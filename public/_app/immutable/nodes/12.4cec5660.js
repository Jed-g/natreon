import{s as rt,K as Se,L as Lt,r as kt,u as Ct,v as St,w as Tt,t as ci,R as Si,a2 as di,e as Be,i as R,d as S,O as lt,z as sn,p as Vt,f as oe,g as ae,h as we,Q as Bt,X as Un,B as $t,C as br,G as Ui,y as vt,N as iw,a4 as Lf,a3 as Ht,H as Rf,I as Of,j as ne,a5 as Ff,x as ue,o as Qn,F as Uo,a as me,c as _e,A as on,l as je,m as qe,n as Ft,U as ur,_ as cr,S as wl,a6 as p_,E as Or,k as Yc,M as Hd,a7 as ow,a8 as aw,a9 as gv,Y as Bi,P as as,T as bn,aa as os,ab as vv,Z as lw,D as yv,q as Bf}from"../chunks/scheduler.e46bbd4c.js";import{S as st,i as it,b as N,d as j,m as V,a as T,t as E,e as U,g as dt,c as pt,h as xl,f as kl,k as Vo,j as $n}from"../chunks/index.df222288.js";import{g as Gd}from"../chunks/globals.7f7f1b26.js";import{o as Hf,m as Ls,d as vl,e as Wc,a as Bo,k as xs,h as cw,i as Kc,s as Qc,c as bv,j as Ca,b as $v,w as uw,u as m_,n as xa,p as fw,f as Ut,l as Zd,B as Nn,L as hw,q as wv}from"../chunks/LogoutButton.1fabb370.js";import{g as Mt,a as dn,e as Jt,u as Ir,o as Fr,d as dw}from"../chunks/spread.4c2634cf.js";import{t as eu,a9 as xv,o as Gf,aa as __,ab as pw,ac as mw,ad as _w,ae as gw,af as vw,ag as g_,r as Zf,c as ou,g as Wf,ah as yw,a as au,ai as bw,aj as $w,ak as ww,al as xw,am as kw,an as Cw,ao as Sw,ap as Tw,a7 as Iw,C as Kf,X as Ew,a3 as tr,a4 as Br,a8 as Er,a5 as ms,R as No,T as jo,H as qo,a6 as ji,aq as Pw,ar as Aw,as as Mw,at as Dw,B as Yr,a2 as hi,_ as kv,$ as Cv,a0 as Sv,a1 as Tv,e as lu,f as cu,D as uu,h as Nf,i as Iv,A as Ev,j as Pv,I as Av,k as Mv,m as Dv,S as zv,q as Lv,s as Rv,u as Ov,v as Fv,w as Bv,V as Nv,x as Fi,y as Vv,z as Uv,M as jv,E as qv,F as Hv,G as Gv,J as Xc,K as Zv,L as Wv,au as Kv,N as Xv,O as Jv,P as Yv,Q as Ho,U as Xf,W as Qv,Y as ey,Z as Jf}from"../chunks/card-title.617f2b8d.js";import{w as hr,d as Vi,r as Sa}from"../chunks/paths.14c1da26.js";import{g as Ta}from"../chunks/navigation.b5a356ff.js";import{I as Wr,B as ks,j as zw,a as Lw,S as Ma,b as Rw,m as Ow,d as Ia,i as ty,E as Yf,o as If,e as Ef,f as yl,q as v_,g as gl,h as xd,r as Fw,v as kd,k as Bw}from"../chunks/index.957809ef.js";import{p as ny}from"../chunks/stores.a5995e93.js";import{c as fu,f as Nw,e as Vw,q as y_,a as b_}from"../chunks/index.65523633.js";import{s as Uw}from"../chunks/index.fa851c61.js";function jw(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function qw(i){let e,n;const t=[{name:"chevron-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[jw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Hw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m6 9 6 6 6-6"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class Gw extends st{constructor(e){super(),it(this,e,Hw,qw,rt,{})}}const Zw=Gw;function Ww(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Kw(i){let e,n;const t=[{name:"chevrons-up-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Ww]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Xw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m7 15 5 5 5-5"}],["path",{d:"m7 9 5-5 5 5"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class Jw extends st{constructor(e){super(),it(this,e,Xw,Kw,rt,{})}}const Yw=Jw;function Qw(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function e2(i){let e,n;const t=[{name:"clipboard-x"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Qw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function t2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}],["path",{d:"m15 11-6 6"}],["path",{d:"m9 11 6 6"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class n2 extends st{constructor(e){super(),it(this,e,t2,e2,rt,{})}}const r2=n2;function s2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function i2(i){let e,n;const t=[{name:"filter-x"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[s2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function o2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055"}],["path",{d:"m22 3-5 5"}],["path",{d:"m17 3 5 5"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class a2 extends st{constructor(e){super(),it(this,e,o2,i2,rt,{})}}const l2=a2;function c2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function u2(i){let e,n;const t=[{name:"filter"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[c2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function f2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class h2 extends st{constructor(e){super(),it(this,e,f2,u2,rt,{})}}const Wd=h2;function d2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function p2(i){let e,n;const t=[{name:"glasses"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[d2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function m2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"6",cy:"15",r:"4"}],["circle",{cx:"18",cy:"15",r:"4"}],["path",{d:"M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2"}],["path",{d:"M2.5 13 5 7c.7-1.3 1.4-2 3-2"}],["path",{d:"M21.5 13 19 7c-.7-1.3-1.5-2-3-2"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class _2 extends st{constructor(e){super(),it(this,e,m2,p2,rt,{})}}const Kd=_2;function g2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function v2(i){let e,n;const t=[{name:"heart"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[g2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function y2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class b2 extends st{constructor(e){super(),it(this,e,y2,v2,rt,{})}}const Cl=b2;function $2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function w2(i){let e,n;const t=[{name:"layers"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[$2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function x2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class k2 extends st{constructor(e){super(),it(this,e,x2,w2,rt,{})}}const C2=k2;function S2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function T2(i){let e,n;const t=[{name:"map"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[S2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function I2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}let E2=class extends st{constructor(e){super(),it(this,e,I2,T2,rt,{})}};const P2=E2;function A2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function M2(i){let e,n;const t=[{name:"message-circle-more"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[A2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function D2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"}],["path",{d:"M8 12h.01"}],["path",{d:"M12 12h.01"}],["path",{d:"M16 12h.01"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class z2 extends st{constructor(e){super(),it(this,e,D2,M2,rt,{})}}const ry=z2;function L2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function R2(i){let e,n;const t=[{name:"messages-square"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[L2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function O2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2z"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class F2 extends st{constructor(e){super(),it(this,e,O2,R2,rt,{})}}const B2=F2;function N2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function V2(i){let e,n;const t=[{name:"pencil"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[N2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function U2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}],["path",{d:"m15 5 4 4"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class j2 extends st{constructor(e){super(),it(this,e,U2,V2,rt,{})}}const q2=j2;function H2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function G2(i){let e,n;const t=[{name:"search"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[H2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Z2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class W2 extends st{constructor(e){super(),it(this,e,Z2,G2,rt,{})}}const Xd=W2;function K2(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function X2(i){let e,n;const t=[{name:"settings-2"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[K2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function J2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M20 7h-9"}],["path",{d:"M14 17H5"}],["circle",{cx:"17",cy:"17",r:"3"}],["circle",{cx:"7",cy:"7",r:"3"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class Y2 extends st{constructor(e){super(),it(this,e,J2,X2,rt,{})}}const Q2=Y2;function ex(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function tx(i){let e,n;const t=[{name:"thumbs-up"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ex]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function nx(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M7 10v12"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class rx extends st{constructor(e){super(),it(this,e,nx,tx,rt,{})}}const Jd=rx;function sx(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function ix(i){let e,n;const t=[{name:"trash"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[sx]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function ox(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class ax extends st{constructor(e){super(),it(this,e,ox,ix,rt,{})}}const sy=ax;function lx(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function cx(i){let e,n;const t=[{name:"tree-pine"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[lx]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function ux(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z"}],["path",{d:"M12 22v-3"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class fx extends st{constructor(e){super(),it(this,e,ux,cx,rt,{})}}const hx=fx;function dx(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function px(i){let e,n;const t=[{name:"user-round-search"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[dx]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function mx(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M2 21a8 8 0 0 1 10.434-7.62"}],["circle",{cx:"18",cy:"18",r:"3"}],["path",{d:"m22 22-1.9-1.9"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class _x extends st{constructor(e){super(),it(this,e,mx,px,rt,{})}}const gx=_x;function vx(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function yx(i){let e,n;const t=[{name:"user"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[vx]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function bx(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class $x extends st{constructor(e){super(),it(this,e,bx,yx,rt,{})}}const wx=$x;function xx(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function kx(i){let e,n;const t=[{name:"users-round"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[xx]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Wr({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[t[0],a&2&&dn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Cx(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];return i.$$set=a=>{n(1,e=Se(Se({},e),Lt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Lt(e),[s,e,t,r]}class Sx extends st{constructor(e){super(),it(this,e,Cx,kx,rt,{})}}const Tx=Sx,{name:qc,selector:$_}=bv("accordion"),Ix={multiple:!1,disabled:!1,forceVisible:!1},Ex=i=>{const e={...Ix,...i},n=eu(Hf(e,"value","onValueChange","defaultValue")),t=xv(["root"]),{disabled:r,forceVisible:s}=n,a=e.value??hr(e.defaultValue),o=Gf(a,e==null?void 0:e.onValueChange),c=(W,Q)=>Q===void 0?!1:typeof Q=="string"?Q===W:Q.includes(W),d=Vi(o,W=>Q=>c(Q,W)),_=Ls(qc(),{returned:()=>({"data-melt-id":t.root})}),b=W=>typeof W=="string"?{value:W}:W,x=W=>typeof W=="number"?{level:W}:W,P=Ls(qc("item"),{stores:o,returned:W=>Q=>{const{value:ve,disabled:re}=b(Q);return{"data-state":c(ve,W)?"open":"closed","data-disabled":vl(re)}}}),L=Ls(qc("trigger"),{stores:[o,r],returned:([W,Q])=>ve=>{const{value:re,disabled:ce}=b(ve);return{disabled:vl(Q||ce),"aria-expanded":!!c(re,W),"aria-disabled":!!ce,"data-disabled":vl(ce),"data-value":re,"data-state":c(re,W)?"open":"closed"}},action:W=>({destroy:Wc(Bo(W,"click",()=>{const ve=W.dataset.disabled==="true",re=W.dataset.value;ve||!re||Z(re)}),Bo(W,"keydown",ve=>{if(![xs.ARROW_DOWN,xs.ARROW_UP,xs.HOME,xs.END].includes(ve.key))return;if(ve.preventDefault(),ve.key===xs.SPACE||ve.key===xs.ENTER){const ee=W.dataset.disabled==="true",fe=W.dataset.value;if(ee||!fe)return;Z(fe);return}const re=ve.target,ce=cw(t.root);if(!ce||!Kc(re))return;const le=Array.from(ce.querySelectorAll($_("trigger"))).filter(ee=>Kc(ee)?ee.dataset.disabled!=="true":!1);if(!le.length)return;const G=le.indexOf(re);ve.key===xs.ARROW_DOWN&&le[(G+1)%le.length].focus(),ve.key===xs.ARROW_UP&&le[(G-1+le.length)%le.length].focus(),ve.key===xs.HOME&&le[0].focus(),ve.key===xs.END&&le[le.length-1].focus()}))})}),D=Ls(qc("content"),{stores:[o,r,s],returned:([W,Q,ve])=>re=>{const{value:ce}=b(re),ge=c(ce,W)||ve;return{"data-state":ge?"open":"closed","data-disabled":vl(Q),"data-value":ce,hidden:ge?void 0:!0,style:Qc({display:ge?void 0:"none"})}},action:W=>{ci().then(()=>{const Q=__(),ve=__(),re=document.querySelector(`${$_("trigger")}, [data-value="${W.dataset.value}"]`);Kc(re)&&(W.id=Q,re.setAttribute("aria-controls",Q),re.id=ve)})}}),B=Ls(qc("heading"),{returned:()=>W=>{const{level:Q}=x(W);return{role:"heading","aria-level":Q,"data-heading-level":Q}}});function Z(W){o.update(Q=>Q===void 0?e.multiple?[W]:W:Array.isArray(Q)?Q.includes(W)?Q.filter(ve=>ve!==W):(Q.push(W),Q):Q===W?void 0:W)}return{ids:t,elements:{root:_,item:P,trigger:L,content:D,heading:B},states:{value:o},helpers:{isSelected:d},options:n}},Px={src:"",delayMs:0,onLoadingStatusChange:void 0},Ax=i=>{const e={...Px,...i},n=eu(Hf(e,"loadingStatus","onLoadingStatusChange")),{src:t,delayMs:r}=n,s=e.loadingStatus??hr("loading"),a=Gf(s,e==null?void 0:e.onLoadingStatusChange);Ca([t,r],([d,_])=>{if($v){const b=new Image;b.src=d,b.onload=()=>{if(r!==void 0){const x=window.setTimeout(()=>{a.set("loaded")},_);return()=>window.clearTimeout(x)}else a.set("loaded")},b.onerror=()=>{a.set("error")}}});const o=Ls("avatar-image",{stores:[t,a],returned:([d,_])=>{const b=Qc({display:_==="loaded"?"block":"none"});return{src:d,style:b}}}),c=Ls("avatar-fallback",{stores:[a],returned:([d])=>({style:d==="loaded"?Qc({display:"none"}):void 0,hidden:d==="loaded"?!0:void 0})});return{elements:{image:o,fallback:c},states:{loadingStatus:a},options:n}},{name:ka}=bv("dialog"),Mx={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},Dx=["content","title","description"];function zx(i){const e={...Mx,...i},n=eu(Hf(e,"ids")),{preventScroll:t,closeOnEscape:r,closeOnOutsideClick:s,role:a,portal:o,forceVisible:c,openFocus:d,closeFocus:_,onOutsideClick:b}=n,x=uw.writable(null),P=eu({...xv(Dx),...e.ids}),L=e.open??hr(e.defaultOpen),D=Gf(L,e==null?void 0:e.onOpenChange),B=Vi([D,c],([fe,$e])=>fe||$e);let Z=xa;function W(fe){const $e=fe.currentTarget,he=fe.currentTarget;!Kc($e)||!Kc(he)||(D.set(!0),x.set(he))}function Q(){D.set(!1),g_({prop:_.get(),defaultEl:x.get()})}const ve=Ls(ka("trigger"),{stores:[D],returned:([fe])=>({"aria-haspopup":"dialog","aria-expanded":fe,type:"button"}),action:fe=>({destroy:Wc(Bo(fe,"click",he=>{W(he)}),Bo(fe,"keydown",he=>{he.key!==xs.ENTER&&he.key!==xs.SPACE||(he.preventDefault(),W(he))}))})}),re=Ls(ka("overlay"),{stores:[B,D],returned:([fe,$e])=>({hidden:fe?void 0:!0,tabindex:-1,style:Qc({display:fe?void 0:"none"}),"aria-hidden":!0,"data-state":$e?"open":"closed"}),action:fe=>{let $e=xa;if(r.get()){const he=m_(fe,{handler:()=>{Q()}});he&&he.destroy&&($e=he.destroy)}return{destroy(){$e()}}}}),ce=Ls(ka("content"),{stores:[B,P.content,P.description,P.title,D],returned:([fe,$e,he,ke,Ue])=>({id:$e,role:a.get(),"aria-describedby":he,"aria-labelledby":ke,"aria-modal":fe?"true":void 0,"data-state":Ue?"open":"closed",tabindex:-1,hidden:fe?void 0:!0,style:Qc({display:fe?void 0:"none"})}),action:fe=>{let $e=xa,he=xa;const ke=Wc(Ca([D,s,r],([Ue,Ie,nt])=>{if(!Ue)return;const Xe=mw({immediate:!1,escapeDeactivates:nt,clickOutsideDeactivates:Ie,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:fe});$e=Xe.activate,he=Xe.deactivate;const ct=Xe.useFocusTrap(fe);return ct&&ct.destroy?ct.destroy:Xe.deactivate}),Ca([s,D],([Ue,Ie])=>pw(fe,{open:Ie,closeOnInteractOutside:Ue,onClose(){Q()},shouldCloseOnInteractOutside(nt){var Xe;return(Xe=b.get())==null||Xe(nt),!nt.defaultPrevented}}).destroy),Ca([r],([Ue])=>Ue?m_(fe,{handler:Q}).destroy:xa),Ca([B],([Ue])=>{ci().then(()=>{Ue?$e():he()})}));return{destroy:()=>{Z(),ke()}}}}),ge=Ls(ka("portalled"),{stores:o,returned:fe=>({"data-portal":fw(fe)}),action:fe=>{const $e=Ca([o],([he])=>{if(he===null)return xa;const ke=_w(fe,he);return ke===null?xa:gw(fe,ke).destroy});return{destroy(){$e()}}}}),le=Ls(ka("title"),{stores:[P.title],returned:([fe])=>({id:fe})}),G=Ls(ka("description"),{stores:[P.description],returned:([fe])=>({id:fe})}),ee=Ls(ka("close"),{returned:()=>({type:"button"}),action:fe=>({destroy:Wc(Bo(fe,"click",()=>{Q()}),Bo(fe,"keydown",he=>{he.key!==xs.SPACE&&he.key!==xs.ENTER||(he.preventDefault(),Q())}))})});return Ca([D,t],([fe,$e])=>{if($v){if($e&&fe&&(Z=vw()),fe){const he=document.getElementById(P.content.get());g_({prop:d.get(),defaultEl:he})}return()=>{c.get()||Z()}}}),{ids:P,elements:{content:ce,trigger:ve,title:le,description:G,overlay:re,close:ee,portalled:ge},states:{open:D},options:n}}const Lx={defaultPressed:!1,disabled:!1};function Rx(i){const e={...Lx,...i},n=eu(Hf(e,"pressed")),{disabled:t}=n,r=e.pressed??hr(e.defaultPressed),s=Gf(r,e==null?void 0:e.onPressedChange);function a(){t.get()||s.update(d=>!d)}return{elements:{root:Ls("toggle",{stores:[s,t],returned:([c,d])=>({"data-disabled":vl(d),disabled:vl(d),"data-state":c?"on":"off","aria-pressed":c,type:"button"}),action:c=>({destroy:Wc(Bo(c,"click",()=>{a()}),Bo(c,"keydown",_=>{_.key!==xs.ENTER&&_.key!==xs.SPACE||(_.preventDefault(),a())}))})})},states:{pressed:s},options:n}}function Qf(){return{NAME:"accordion",ITEM_NAME:"accordion-item",PARTS:["root","content","header","item","trigger"]}}function Ox(i){const e=Ex(Zf(i)),{NAME:n,PARTS:t}=Qf(),r=ou(n,t),s={...e,getAttrs:r,updateOption:Wf(e.options)};return Si(n,s),s}function eh(){const{NAME:i}=Qf();return di(i)}function Fx(i){const{ITEM_NAME:e}=Qf();return Si(e,{...i}),{...eh(),props:i}}function iy(){const{ITEM_NAME:i}=Qf();return di(i)}function Bx(){const i=eh(),{value:e}=iy();return{...i,props:e}}function Nx(){const i=eh(),{value:e,disabled:n}=iy();return{...i,props:{value:e,disabled:n}}}const Vx=i=>({builder:i&4}),w_=i=>({builder:i[2]}),Ux=i=>({builder:i&4}),x_=i=>({builder:i[2]});function jx(i){let e,n,t,r;const s=i[11].default,a=kt(s,i,i[10],w_);let o=[i[2],i[4]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[12](e),n=!0,t||(r=Un(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&1028)&&Ct(a,s,d,d[10],n?Tt(s,d[10],_,Vx):St(d[10]),w_),Bt(e,c=Mt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[12](null),t=!1,r()}}}function qx(i){let e;const n=i[11].default,t=kt(n,i,i[10],x_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1028)&&Ct(t,n,r,r[10],e?Tt(n,r[10],s,Ux):St(r[10]),x_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Hx(i){let e,n,t,r;const s=[qx,jx],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function Gx(i,e,n){let t;const r=["multiple","value","onValueChange","disabled","asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{multiple:d=!1}=e,{value:_=void 0}=e,{onValueChange:b=void 0}=e,{disabled:x=!1}=e,{asChild:P=!1}=e,{el:L=void 0}=e;const{elements:{root:D},states:{value:B},updateOption:Z,getAttrs:W}=Ox({multiple:d,disabled:x,defaultValue:_,onValueChange:({next:re})=>Array.isArray(re)?((!Array.isArray(_)||!yw(_,re))&&(b==null||b(re),n(5,_=re)),re):(_!==re&&(b==null||b(re),n(5,_=re)),re)});sn(i,D,re=>n(9,a=re));const Q=W("root");function ve(re){Vt[re?"unshift":"push"](()=>{L=re,n(0,L)})}return i.$$set=re=>{e=Se(Se({},e),Lt(re)),n(4,s=lt(e,r)),"multiple"in re&&n(6,d=re.multiple),"value"in re&&n(5,_=re.value),"onValueChange"in re&&n(7,b=re.onValueChange),"disabled"in re&&n(8,x=re.disabled),"asChild"in re&&n(1,P=re.asChild),"el"in re&&n(0,L=re.el),"$$scope"in re&&n(10,c=re.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&_!==void 0&&B.set(Array.isArray(_)?[..._]:_),i.$$.dirty&64&&Z("multiple",d),i.$$.dirty&256&&Z("disabled",x),i.$$.dirty&512&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,Q)},[L,P,t,D,s,_,d,b,x,a,c,o,ve]}class Zx extends st{constructor(e){super(),it(this,e,Gx,Hx,rt,{multiple:6,value:5,onValueChange:7,disabled:8,asChild:1,el:0})}}const Wx=i=>({builder:i&4}),k_=i=>({builder:i[2]}),Kx=i=>({builder:i&4}),C_=i=>({builder:i[2]});function Xx(i){let e,n,t,r;const s=i[9].default,a=kt(s,i,i[8],k_);let o=[i[2],i[4]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[10](e),n=!0,t||(r=Un(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&260)&&Ct(a,s,d,d[8],n?Tt(s,d[8],_,Wx):St(d[8]),k_),Bt(e,c=Mt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[10](null),t=!1,r()}}}function Jx(i){let e;const n=i[9].default,t=kt(n,i,i[8],C_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&Ct(t,n,r,r[8],e?Tt(n,r[8],s,Kx):St(r[8]),C_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Yx(i){let e,n,t,r;const s=[Jx,Xx],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function Qx(i,e,n){let t;const r=["value","disabled","asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{value:d}=e,{disabled:_=void 0}=e,{asChild:b=!1}=e,{el:x=void 0}=e;const{elements:{item:P},props:L,getAttrs:D}=Fx({value:d,disabled:_});sn(i,P,W=>n(7,a=W));const B=D("item");function Z(W){Vt[W?"unshift":"push"](()=>{x=W,n(0,x)})}return i.$$set=W=>{e=Se(Se({},e),Lt(W)),n(4,s=lt(e,r)),"value"in W&&n(5,d=W.value),"disabled"in W&&n(6,_=W.disabled),"asChild"in W&&n(1,b=W.asChild),"el"in W&&n(0,x=W.el),"$$scope"in W&&n(8,c=W.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&n(2,t=a(L)),i.$$.dirty&4&&Object.assign(t,B)},[x,b,t,P,s,d,_,a,c,o,Z]}let ek=class extends st{constructor(e){super(),it(this,e,Qx,Yx,rt,{value:5,disabled:6,asChild:1,el:0})}};const tk=i=>({builder:i&4}),S_=i=>({builder:i[2]}),nk=i=>({builder:i&4}),T_=i=>({builder:i[2]});function rk(i){let e,n,t,r;const s=i[8].default,a=kt(s,i,i[7],S_);let o=[i[2],i[4]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[9](e),n=!0,t||(r=Un(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&Ct(a,s,d,d[7],n?Tt(s,d[7],_,tk):St(d[7]),S_),Bt(e,c=Mt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,r()}}}function sk(i){let e;const n=i[8].default,t=kt(n,i,i[7],T_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,nk):St(r[7]),T_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function ik(i){let e,n,t,r;const s=[sk,rk],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function ok(i,e,n){let t;const r=["level","asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{level:d=3}=e,{asChild:_=!1}=e,{el:b=void 0}=e;const{elements:{heading:x},getAttrs:P}=eh();sn(i,x,B=>n(6,a=B));const L=P("header");function D(B){Vt[B?"unshift":"push"](()=>{b=B,n(0,b)})}return i.$$set=B=>{e=Se(Se({},e),Lt(B)),n(4,s=lt(e,r)),"level"in B&&n(5,d=B.level),"asChild"in B&&n(1,_=B.asChild),"el"in B&&n(0,b=B.el),"$$scope"in B&&n(7,c=B.$$scope)},i.$$.update=()=>{i.$$.dirty&96&&n(2,t=a(d)),i.$$.dirty&4&&Object.assign(t,L)},[b,_,t,x,s,d,a,c,o,D]}class ak extends st{constructor(e){super(),it(this,e,ok,ik,rt,{level:5,asChild:1,el:0})}}const lk=i=>({builder:i&4}),I_=i=>({builder:i[2]}),ck=i=>({builder:i&4}),E_=i=>({builder:i[2]});function uk(i){let e,n,t,r;const s=i[8].default,a=kt(s,i,i[7],I_);let o=[i[2],{type:"button"},i[5]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("button"),a&&a.c(),this.h()},l(d){e=ae(d,"BUTTON",{type:!0});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[Un(i[2].action(e)),$t(e,"m-keydown",i[4]),$t(e,"m-click",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&Ct(a,s,d,d[7],n?Tt(s,d[7],_,lk):St(d[7]),I_),Bt(e,c=Mt(o,[_&4&&d[2],{type:"button"},_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,br(r)}}}function fk(i){let e;const n=i[8].default,t=kt(n,i,i[7],E_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,ck):St(r[7]),E_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function hk(i){let e,n,t,r;const s=[fk,uk],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function dk(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{trigger:b},props:x,getAttrs:P}=Nx();sn(i,b,Z=>n(6,a=Z));const L=au(),D=P("trigger");function B(Z){Vt[Z?"unshift":"push"](()=>{_=Z,n(0,_)})}return i.$$set=Z=>{e=Se(Se({},e),Lt(Z)),n(5,s=lt(e,r)),"asChild"in Z&&n(1,d=Z.asChild),"el"in Z&&n(0,_=Z.el),"$$scope"in Z&&n(7,c=Z.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a(x)),i.$$.dirty&4&&Object.assign(t,D)},[_,d,t,b,L,s,a,c,o,B]}let pk=class extends st{constructor(e){super(),it(this,e,dk,hk,rt,{asChild:1,el:0})}};const mk=i=>({builder:i&256}),P_=i=>({builder:i[8]}),_k=i=>({builder:i&256}),A_=i=>({builder:i[8]}),gk=i=>({builder:i&256}),M_=i=>({builder:i[8]}),vk=i=>({builder:i&256}),D_=i=>({builder:i[8]}),yk=i=>({builder:i&256}),z_=i=>({builder:i[8]}),bk=i=>({builder:i&256}),L_=i=>({builder:i[8]});function $k(i){let e,n,t,r;const s=i[16].default,a=kt(s,i,i[15],P_);let o=[i[8],i[13]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[21](e),n=!0,t||(r=Un(i[8].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&33024)&&Ct(a,s,d,d[15],n?Tt(s,d[15],_,mk):St(d[15]),P_),Bt(e,c=Mt(o,[_&256&&d[8],_&8192&&d[13]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[21](null),t=!1,r()}}}function wk(i){let e,n,t,r,s;const a=i[16].default,o=kt(a,i,i[15],A_);let c=[i[8],i[13]],d={};for(let _=0;_<c.length;_+=1)d=Se(d,c[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=we(e);o&&o.l(b),b.forEach(S),this.h()},h(){Bt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[20](e),t=!0,r||(s=Un(i[8].action(e)),r=!0)},p(_,b){i=_,o&&o.p&&(!t||b&33024)&&Ct(o,a,i,i[15],t?Tt(a,i[15],b,_k):St(i[15]),A_),Bt(e,d=Mt(c,[b&256&&i[8],b&8192&&i[13]]))},i(_){t||(T(o,_),n&&n.end(1),t=!0)},o(_){E(o,_),_&&(n=xl(e,i[5],i[6])),t=!1},d(_){_&&S(e),o&&o.d(_),i[20](null),_&&n&&n.end(),r=!1,s()}}}function xk(i){let e,n,t,r,s;const a=i[16].default,o=kt(a,i,i[15],M_);let c=[i[8],i[13]],d={};for(let _=0;_<c.length;_+=1)d=Se(d,c[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=we(e);o&&o.l(b),b.forEach(S),this.h()},h(){Bt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[19](e),t=!0,r||(s=Un(i[8].action(e)),r=!0)},p(_,b){i=_,o&&o.p&&(!t||b&33024)&&Ct(o,a,i,i[15],t?Tt(a,i[15],b,gk):St(i[15]),M_),Bt(e,d=Mt(c,[b&256&&i[8],b&8192&&i[13]]))},i(_){t||(T(o,_),_&&(n||Ui(()=>{n=kl(e,i[3],i[4]),n.start()})),t=!0)},o(_){E(o,_),t=!1},d(_){_&&S(e),o&&o.d(_),i[19](null),r=!1,s()}}}function kk(i){let e,n,t,r,s,a;const o=i[16].default,c=kt(o,i,i[15],D_);let d=[i[8],i[13]],_={};for(let b=0;b<d.length;b+=1)_=Se(_,d[b]);return{c(){e=oe("div"),c&&c.c(),this.h()},l(b){e=ae(b,"DIV",{});var x=we(e);c&&c.l(x),x.forEach(S),this.h()},h(){Bt(e,_)},m(b,x){R(b,e,x),c&&c.m(e,null),i[18](e),r=!0,s||(a=Un(i[8].action(e)),s=!0)},p(b,x){i=b,c&&c.p&&(!r||x&33024)&&Ct(c,o,i,i[15],r?Tt(o,i[15],x,vk):St(i[15]),D_),Bt(e,_=Mt(d,[x&256&&i[8],x&8192&&i[13]]))},i(b){r||(T(c,b),b&&Ui(()=>{r&&(t&&t.end(1),n=kl(e,i[3],i[4]),n.start())}),r=!0)},o(b){E(c,b),n&&n.invalidate(),b&&(t=xl(e,i[5],i[6])),r=!1},d(b){b&&S(e),c&&c.d(b),i[18](null),b&&t&&t.end(),s=!1,a()}}}function Ck(i){let e,n,t,r,s;const a=i[16].default,o=kt(a,i,i[15],z_);let c=[i[8],i[13]],d={};for(let _=0;_<c.length;_+=1)d=Se(d,c[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=we(e);o&&o.l(b),b.forEach(S),this.h()},h(){Bt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[17](e),t=!0,r||(s=Un(i[8].action(e)),r=!0)},p(_,b){i=_,o&&o.p&&(!t||b&33024)&&Ct(o,a,i,i[15],t?Tt(a,i[15],b,yk):St(i[15]),z_),Bt(e,d=Mt(c,[b&256&&i[8],b&8192&&i[13]]))},i(_){t||(T(o,_),_&&Ui(()=>{t&&(n||(n=Vo(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(_){E(o,_),_&&(n||(n=Vo(e,i[1],i[2],!1)),n.run(0)),t=!1},d(_){_&&S(e),o&&o.d(_),i[17](null),_&&n&&n.end(),r=!1,s()}}}function Sk(i){let e;const n=i[16].default,t=kt(n,i,i[15],L_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&33024)&&Ct(t,n,r,r[15],e?Tt(n,r[15],s,bk):St(r[15]),L_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Tk(i){let e,n,t,r,s,a,o,c,d,_;const b=[Sk,Ck,kk,xk,wk,$k],x=[];function P(L,D){return D&640&&(e=null),D&514&&(n=null),D&552&&(t=null),D&520&&(r=null),D&544&&(s=null),D&512&&(a=null),e==null&&(e=!!(L[7]&&L[9](L[12]))),e?0:(n==null&&(n=!!(L[1]&&L[9](L[12]))),n?1:(t==null&&(t=!!(L[3]&&L[5]&&L[9](L[12]))),t?2:(r==null&&(r=!!(L[3]&&L[9](L[12]))),r?3:(s==null&&(s=!!(L[5]&&L[9](L[12]))),s?4:(a==null&&(a=!!L[9](L[12])),a?5:-1)))))}return~(o=P(i,-1))&&(c=x[o]=b[o](i)),{c(){c&&c.c(),d=Be()},l(L){c&&c.l(L),d=Be()},m(L,D){~o&&x[o].m(L,D),R(L,d,D),_=!0},p(L,[D]){let B=o;o=P(L,D),o===B?~o&&x[o].p(L,D):(c&&(dt(),E(x[B],1,1,()=>{x[B]=null}),pt()),~o?(c=x[o],c?c.p(L,D):(c=x[o]=b[o](L),c.c()),T(c,1),c.m(d.parentNode,d)):c=null)},i(L){_||(T(c),_=!0)},o(L){E(c),_=!1},d(L){L&&S(d),~o&&x[o].d(L)}}}function Ik(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let s=lt(e,r),a,o,{$$slots:c={},$$scope:d}=e,{transition:_=void 0}=e,{transitionConfig:b=void 0}=e,{inTransition:x=void 0}=e,{inTransitionConfig:P=void 0}=e,{outTransition:L=void 0}=e,{outTransitionConfig:D=void 0}=e,{asChild:B=!1}=e,{el:Z=void 0}=e;const{elements:{content:W},helpers:{isSelected:Q},props:ve,getAttrs:re}=Bx();sn(i,W,$e=>n(14,a=$e)),sn(i,Q,$e=>n(9,o=$e));const ce=re("content");function ge($e){Vt[$e?"unshift":"push"](()=>{Z=$e,n(0,Z)})}function le($e){Vt[$e?"unshift":"push"](()=>{Z=$e,n(0,Z)})}function G($e){Vt[$e?"unshift":"push"](()=>{Z=$e,n(0,Z)})}function ee($e){Vt[$e?"unshift":"push"](()=>{Z=$e,n(0,Z)})}function fe($e){Vt[$e?"unshift":"push"](()=>{Z=$e,n(0,Z)})}return i.$$set=$e=>{e=Se(Se({},e),Lt($e)),n(13,s=lt(e,r)),"transition"in $e&&n(1,_=$e.transition),"transitionConfig"in $e&&n(2,b=$e.transitionConfig),"inTransition"in $e&&n(3,x=$e.inTransition),"inTransitionConfig"in $e&&n(4,P=$e.inTransitionConfig),"outTransition"in $e&&n(5,L=$e.outTransition),"outTransitionConfig"in $e&&n(6,D=$e.outTransitionConfig),"asChild"in $e&&n(7,B=$e.asChild),"el"in $e&&n(0,Z=$e.el),"$$scope"in $e&&n(15,d=$e.$$scope)},i.$$.update=()=>{i.$$.dirty&16384&&n(8,t=a(ve)),i.$$.dirty&256&&Object.assign(t,ce)},[Z,_,b,x,P,L,D,B,t,o,W,Q,ve,s,a,d,c,ge,le,G,ee,fe]}let Ek=class extends st{constructor(e){super(),it(this,e,Ik,Tk,rt,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};function Yd(){return{NAME:"avatar",PARTS:["root","image","fallback"]}}function Pk(i){const{NAME:e,PARTS:n}=Yd(),t=ou(e,n),r={...Ax(Zf(i)),getAttrs:t};return Si(e,r),{...r,updateOption:Wf(r.options)}}function Ak(i=""){const{NAME:e}=Yd(),n=di(e);return i?n.options.src.set(i):n.options.src.set(""),n}function Mk(){const{NAME:i}=Yd();return di(i)}const Dk=i=>({}),R_=i=>({attrs:i[2]}),zk=i=>({}),O_=i=>({attrs:i[2]});function Lk(i){let e,n;const t=i[8].default,r=kt(t,i,i[7],R_);let s=[i[3],i[2]],a={};for(let o=0;o<s.length;o+=1)a=Se(a,s[o]);return{c(){e=oe("div"),r&&r.c(),this.h()},l(o){e=ae(o,"DIV",{});var c=we(e);r&&r.l(c),c.forEach(S),this.h()},h(){Bt(e,a)},m(o,c){R(o,e,c),r&&r.m(e,null),i[9](e),n=!0},p(o,c){r&&r.p&&(!n||c&128)&&Ct(r,t,o,o[7],n?Tt(t,o[7],c,Dk):St(o[7]),R_),Bt(e,a=Mt(s,[c&8&&o[3],o[2]]))},i(o){n||(T(r,o),n=!0)},o(o){E(r,o),n=!1},d(o){o&&S(e),r&&r.d(o),i[9](null)}}}function Rk(i){let e;const n=i[8].default,t=kt(n,i,i[7],O_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,zk):St(r[7]),O_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Ok(i){let e,n,t,r;const s=[Rk,Lk],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function Fk(i,e,n){const t=["delayMs","loadingStatus","onLoadingStatusChange","asChild","el"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{delayMs:o=void 0}=e,{loadingStatus:c=void 0}=e,{onLoadingStatusChange:d=void 0}=e,{asChild:_=!1}=e,{el:b=void 0}=e;const{states:{loadingStatus:x},updateOption:P,getAttrs:L}=Pk({src:"",delayMs:o,onLoadingStatusChange:({next:Z})=>(n(4,c=Z),d==null||d(Z),Z)}),D=L("root");function B(Z){Vt[Z?"unshift":"push"](()=>{b=Z,n(0,b)})}return i.$$set=Z=>{e=Se(Se({},e),Lt(Z)),n(3,r=lt(e,t)),"delayMs"in Z&&n(5,o=Z.delayMs),"loadingStatus"in Z&&n(4,c=Z.loadingStatus),"onLoadingStatusChange"in Z&&n(6,d=Z.onLoadingStatusChange),"asChild"in Z&&n(1,_=Z.asChild),"el"in Z&&n(0,b=Z.el),"$$scope"in Z&&n(7,a=Z.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&c!==void 0&&x.set(c),i.$$.dirty&32&&P("delayMs",o)},[b,_,D,r,c,o,d,a,s,B]}let Bk=class extends st{constructor(e){super(),it(this,e,Fk,Ok,rt,{delayMs:5,loadingStatus:4,onLoadingStatusChange:6,asChild:1,el:0})}};const Nk=i=>({builder:i&8}),F_=i=>({builder:i[3]});function Vk(i){let e,n,t,r=[i[3],{alt:i[1]},i[5]],s={};for(let a=0;a<r.length;a+=1)s=Se(s,r[a]);return{c(){e=oe("img"),this.h()},l(a){e=ae(a,"IMG",{alt:!0}),this.h()},h(){Bt(e,s)},m(a,o){R(a,e,o),i[10](e),n||(t=Un(i[3].action(e)),n=!0)},p(a,o){Bt(e,s=Mt(r,[o&8&&a[3],o&2&&{alt:a[1]},o&32&&a[5]]))},i:vt,o:vt,d(a){a&&S(e),i[10](null),n=!1,t()}}}function Uk(i){let e;const n=i[9].default,t=kt(n,i,i[8],F_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&Ct(t,n,r,r[8],e?Tt(n,r[8],s,Nk):St(r[8]),F_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function jk(i){let e,n,t,r;const s=[Uk,Vk],a=[];function o(c,d){return c[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function qk(i,e,n){let t,r;const s=["src","alt","asChild","el"];let a=lt(e,s),o,c=vt,d=()=>(c(),c=iw(t,W=>n(7,o=W)),t);i.$$.on_destroy.push(()=>c());let{$$slots:_={},$$scope:b}=e,{src:x=void 0}=e,{alt:P=void 0}=e,{asChild:L=!1}=e,{el:D=void 0}=e;const B={"data-bits-avatar-image":""};function Z(W){Vt[W?"unshift":"push"](()=>{D=W,n(0,D)})}return i.$$set=W=>{e=Se(Se({},e),Lt(W)),n(5,a=lt(e,s)),"src"in W&&n(6,x=W.src),"alt"in W&&n(1,P=W.alt),"asChild"in W&&n(2,L=W.asChild),"el"in W&&n(0,D=W.el),"$$scope"in W&&n(8,b=W.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&d(n(4,t=Ak(x).elements.image)),i.$$.dirty&128&&n(3,r=o),i.$$.dirty&8&&Object.assign(r,B)},[D,P,L,r,t,a,x,o,b,_,Z]}let Hk=class extends st{constructor(e){super(),it(this,e,qk,jk,rt,{src:6,alt:1,asChild:2,el:0})}};const Gk=i=>({builder:i&4}),B_=i=>({builder:i[2]}),Zk=i=>({builder:i&4}),N_=i=>({builder:i[2]});function Wk(i){let e,n,t,r;const s=i[7].default,a=kt(s,i,i[6],B_);let o=[i[2],i[4]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("span"),a&&a.c(),this.h()},l(d){e=ae(d,"SPAN",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[8](e),n=!0,t||(r=Un(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&68)&&Ct(a,s,d,d[6],n?Tt(s,d[6],_,Gk):St(d[6]),B_),Bt(e,c=Mt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[8](null),t=!1,r()}}}function Kk(i){let e;const n=i[7].default,t=kt(n,i,i[6],N_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&Ct(t,n,r,r[6],e?Tt(n,r[6],s,Zk):St(r[6]),N_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Xk(i){let e,n,t,r;const s=[Kk,Wk],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function Jk(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{fallback:b},getAttrs:x}=Mk();sn(i,b,D=>n(5,a=D));const P=x("fallback");function L(D){Vt[D?"unshift":"push"](()=>{_=D,n(0,_)})}return i.$$set=D=>{e=Se(Se({},e),Lt(D)),n(4,s=lt(e,r)),"asChild"in D&&n(1,d=D.asChild),"el"in D&&n(0,_=D.el),"$$scope"in D&&n(6,c=D.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,P)},[_,d,t,b,s,a,c,o,L]}let Yk=class extends st{constructor(e){super(),it(this,e,Jk,Xk,rt,{asChild:1,el:0})}};const Qk=i=>({builder:i&4}),V_=i=>({builder:i[2]}),eC=i=>({builder:i&4}),U_=i=>({builder:i[2]});function tC(i){let e,n,t,r;const s=i[7].default,a=kt(s,i,i[6],V_);let o=[i[2],i[4]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[8](e),n=!0,t||(r=Un(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&68)&&Ct(a,s,d,d[6],n?Tt(s,d[6],_,Qk):St(d[6]),V_),Bt(e,c=Mt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[8](null),t=!1,r()}}}function nC(i){let e;const n=i[7].default,t=kt(n,i,i[6],U_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&Ct(t,n,r,r[6],e?Tt(n,r[6],s,eC):St(r[6]),U_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function rC(i){let e,n,t,r;const s=[nC,tC],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function sC(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{group:b,id:x,getAttrs:P}=bw();sn(i,b,B=>n(5,a=B));const L=P("group");function D(B){Vt[B?"unshift":"push"](()=>{_=B,n(0,_)})}return i.$$set=B=>{e=Se(Se({},e),Lt(B)),n(4,s=lt(e,r)),"asChild"in B&&n(1,d=B.asChild),"el"in B&&n(0,_=B.el),"$$scope"in B&&n(6,c=B.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=a(x)),i.$$.dirty&4&&Object.assign(t,L)},[_,d,t,b,s,a,c,o,D]}class iC extends st{constructor(e){super(),it(this,e,sC,rC,rt,{asChild:1,el:0})}}function oy(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function oC(i){const{NAME:e,PARTS:n}=oy(),t=ou(e,n),r={...zx({...Zf(i),role:"dialog",forceVisible:!0}),getAttrs:t};return Si(e,r),{...r,updateOption:Wf(r.options)}}function Da(){const{NAME:i}=oy();return di(i)}const aC=i=>({ids:i&1}),j_=i=>({ids:i[0]});function lC(i){let e;const n=i[12].default,t=kt(n,i,i[11],j_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&2049)&&Ct(t,n,r,r[11],e?Tt(n,r[11],s,aC):St(r[11]),j_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function cC(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{preventScroll:a=void 0}=e,{closeOnEscape:o=void 0}=e,{closeOnOutsideClick:c=void 0}=e,{portal:d=void 0}=e,{open:_=void 0}=e,{onOpenChange:b=void 0}=e,{openFocus:x=void 0}=e,{closeFocus:P=void 0}=e,{onOutsideClick:L=void 0}=e;const{states:{open:D},updateOption:B,ids:Z}=oC({closeOnEscape:o,preventScroll:a,closeOnOutsideClick:c,portal:d,forceVisible:!0,defaultOpen:_,openFocus:x,closeFocus:P,onOutsideClick:L,onOpenChange:({next:Q})=>(_!==Q&&(b==null||b(Q),n(2,_=Q)),Q)}),W=Vi([Z.content,Z.description,Z.title],([Q,ve,re])=>({content:Q,description:ve,title:re}));return sn(i,W,Q=>n(0,t=Q)),i.$$set=Q=>{"preventScroll"in Q&&n(3,a=Q.preventScroll),"closeOnEscape"in Q&&n(4,o=Q.closeOnEscape),"closeOnOutsideClick"in Q&&n(5,c=Q.closeOnOutsideClick),"portal"in Q&&n(6,d=Q.portal),"open"in Q&&n(2,_=Q.open),"onOpenChange"in Q&&n(7,b=Q.onOpenChange),"openFocus"in Q&&n(8,x=Q.openFocus),"closeFocus"in Q&&n(9,P=Q.closeFocus),"onOutsideClick"in Q&&n(10,L=Q.onOutsideClick),"$$scope"in Q&&n(11,s=Q.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&_!==void 0&&D.set(_),i.$$.dirty&8&&B("preventScroll",a),i.$$.dirty&16&&B("closeOnEscape",o),i.$$.dirty&32&&B("closeOnOutsideClick",c),i.$$.dirty&64&&B("portal",d),i.$$.dirty&256&&B("openFocus",x),i.$$.dirty&512&&B("closeFocus",P),i.$$.dirty&1024&&B("onOutsideClick",L)},[t,W,_,a,o,c,d,b,x,P,L,s,r]}class uC extends st{constructor(e){super(),it(this,e,cC,lC,rt,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}const fC=i=>({builder:i&8}),q_=i=>({builder:i[3]}),hC=i=>({builder:i&8}),H_=i=>({builder:i[3]});function dC(i){let e=i[1],n,t,r=i[1]&&Cd(i);return{c(){r&&r.c(),n=Be()},l(s){r&&r.l(s),n=Be()},m(s,a){r&&r.m(s,a),R(s,n,a),t=!0},p(s,a){s[1]?e?rt(e,s[1])?(r.d(1),r=Cd(s),e=s[1],r.c(),r.m(n.parentNode,n)):r.p(s,a):(r=Cd(s),e=s[1],r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null,e=s[1])},i(s){t||(T(r,s),t=!0)},o(s){E(r,s),t=!1},d(s){s&&S(n),r&&r.d(s)}}}function pC(i){let e;const n=i[9].default,t=kt(n,i,i[8],H_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&Ct(t,n,r,r[8],e?Tt(n,r[8],s,hC):St(r[8]),H_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Cd(i){let e,n,t,r;const s=i[9].default,a=kt(s,i,i[8],q_);let o=[i[3],i[5]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe(i[1]),a&&a.c(),this.h()},l(d){e=ae(d,(i[1]||"null").toUpperCase(),{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Lf(i[1])(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[10](e),n=!0,t||(r=Un(i[3].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&264)&&Ct(a,s,d,d[8],n?Tt(s,d[8],_,fC):St(d[8]),q_),Lf(d[1])(e,c=Mt(o,[_&8&&d[3],_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[10](null),t=!1,r()}}}function mC(i){let e,n,t,r;const s=[pC,dC],a=[];function o(c,d){return c[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function _C(i,e,n){let t;const r=["level","asChild","id","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{level:d="h2"}=e,{asChild:_=!1}=e,{id:b=void 0}=e,{el:x=void 0}=e;const{elements:{title:P},ids:L,getAttrs:D}=Da();sn(i,P,W=>n(7,a=W));const B=D("title");function Z(W){Vt[W?"unshift":"push"](()=>{x=W,n(0,x)})}return i.$$set=W=>{e=Se(Se({},e),Lt(W)),n(5,s=lt(e,r)),"level"in W&&n(1,d=W.level),"asChild"in W&&n(2,_=W.asChild),"id"in W&&n(6,b=W.id),"el"in W&&n(0,x=W.el),"$$scope"in W&&n(8,c=W.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&b&&L.title.set(b),i.$$.dirty&128&&n(3,t=a),i.$$.dirty&8&&Object.assign(t,B)},[x,d,_,t,P,s,b,a,c,o,Z]}let gC=class extends st{constructor(e){super(),it(this,e,_C,mC,rt,{level:1,asChild:2,id:6,el:0})}};const vC=i=>({builder:i&4}),G_=i=>({builder:i[2]}),yC=i=>({builder:i&4}),Z_=i=>({builder:i[2]});function bC(i){let e,n,t,r;const s=i[8].default,a=kt(s,i,i[7],G_);let o=[i[2],{type:"button"},i[5]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("button"),a&&a.c(),this.h()},l(d){e=ae(d,"BUTTON",{type:!0});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[Un(i[2].action(e)),$t(e,"m-click",i[4]),$t(e,"m-keydown",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&Ct(a,s,d,d[7],n?Tt(s,d[7],_,vC):St(d[7]),G_),Bt(e,c=Mt(o,[_&4&&d[2],{type:"button"},_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,br(r)}}}function $C(i){let e;const n=i[8].default,t=kt(n,i,i[7],Z_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,yC):St(r[7]),Z_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function wC(i){let e,n,t,r;const s=[$C,bC],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function xC(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{close:b},getAttrs:x}=Da();sn(i,b,B=>n(6,a=B));const P=au(),L=x("close");function D(B){Vt[B?"unshift":"push"](()=>{_=B,n(0,_)})}return i.$$set=B=>{e=Se(Se({},e),Lt(B)),n(5,s=lt(e,r)),"asChild"in B&&n(1,d=B.asChild),"el"in B&&n(0,_=B.el),"$$scope"in B&&n(7,c=B.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,L)},[_,d,t,b,P,s,a,c,o,D]}class kC extends st{constructor(e){super(),it(this,e,xC,wC,rt,{asChild:1,el:0})}}const CC=i=>({builder:i&4}),W_=i=>({builder:i[2]}),SC=i=>({builder:i&4}),K_=i=>({builder:i[2]});function TC(i){let e,n,t,r;const s=i[7].default,a=kt(s,i,i[6],W_);let o=[i[2],i[4]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[8](e),n=!0,t||(r=Un(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&68)&&Ct(a,s,d,d[6],n?Tt(s,d[6],_,CC):St(d[6]),W_),Bt(e,c=Mt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[8](null),t=!1,r()}}}function IC(i){let e;const n=i[7].default,t=kt(n,i,i[6],K_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&Ct(t,n,r,r[6],e?Tt(n,r[6],s,SC):St(r[6]),K_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function EC(i){let e,n,t,r;const s=[IC,TC],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function PC(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{portalled:b},getAttrs:x}=Da();sn(i,b,D=>n(5,a=D));const P=x("portal");function L(D){Vt[D?"unshift":"push"](()=>{_=D,n(0,_)})}return i.$$set=D=>{e=Se(Se({},e),Lt(D)),n(4,s=lt(e,r)),"asChild"in D&&n(1,d=D.asChild),"el"in D&&n(0,_=D.el),"$$scope"in D&&n(6,c=D.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,P)},[_,d,t,b,s,a,c,o,L]}let AC=class extends st{constructor(e){super(),it(this,e,PC,EC,rt,{asChild:1,el:0})}};const MC=i=>({builder:i[0]&256}),X_=i=>({builder:i[8]}),DC=i=>({builder:i[0]&256}),J_=i=>({builder:i[8]}),zC=i=>({builder:i[0]&256}),Y_=i=>({builder:i[8]}),LC=i=>({builder:i[0]&256}),Q_=i=>({builder:i[8]}),RC=i=>({builder:i[0]&256}),eg=i=>({builder:i[8]}),OC=i=>({builder:i[0]&256}),tg=i=>({builder:i[8]});function FC(i){let e,n,t,r;const s=i[16].default,a=kt(s,i,i[15],X_);let o=[i[8],i[12]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[56](e),n=!0,t||(r=[Un(i[8].action(e)),$t(e,"pointerdown",i[45]),$t(e,"pointermove",i[46]),$t(e,"pointerup",i[47]),$t(e,"touchend",i[48]),$t(e,"touchstart",i[49]),$t(e,"touchcancel",i[50]),$t(e,"touchmove",i[51])],t=!0)},p(d,_){a&&a.p&&(!n||_[0]&33024)&&Ct(a,s,d,d[15],n?Tt(s,d[15],_,MC):St(d[15]),X_),Bt(e,c=Mt(o,[_[0]&256&&d[8],_[0]&4096&&d[12]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[56](null),t=!1,br(r)}}}function BC(i){let e,n,t,r,s;const a=i[16].default,o=kt(a,i,i[15],J_);let c=[i[8],i[12]],d={};for(let _=0;_<c.length;_+=1)d=Se(d,c[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=we(e);o&&o.l(b),b.forEach(S),this.h()},h(){Bt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[55](e),t=!0,r||(s=[Un(i[8].action(e)),$t(e,"pointerdown",i[38]),$t(e,"pointermove",i[39]),$t(e,"pointerup",i[40]),$t(e,"touchend",i[41]),$t(e,"touchstart",i[42]),$t(e,"touchcancel",i[43]),$t(e,"touchmove",i[44])],r=!0)},p(_,b){i=_,o&&o.p&&(!t||b[0]&33024)&&Ct(o,a,i,i[15],t?Tt(a,i[15],b,DC):St(i[15]),J_),Bt(e,d=Mt(c,[b[0]&256&&i[8],b[0]&4096&&i[12]]))},i(_){t||(T(o,_),n&&n.end(1),t=!0)},o(_){E(o,_),_&&(n=xl(e,i[5],i[6])),t=!1},d(_){_&&S(e),o&&o.d(_),i[55](null),_&&n&&n.end(),r=!1,br(s)}}}function NC(i){let e,n,t,r,s;const a=i[16].default,o=kt(a,i,i[15],Y_);let c=[i[8],i[12]],d={};for(let _=0;_<c.length;_+=1)d=Se(d,c[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=we(e);o&&o.l(b),b.forEach(S),this.h()},h(){Bt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[54](e),t=!0,r||(s=[Un(i[8].action(e)),$t(e,"pointerdown",i[31]),$t(e,"pointermove",i[32]),$t(e,"pointerup",i[33]),$t(e,"touchend",i[34]),$t(e,"touchstart",i[35]),$t(e,"touchcancel",i[36]),$t(e,"touchmove",i[37])],r=!0)},p(_,b){i=_,o&&o.p&&(!t||b[0]&33024)&&Ct(o,a,i,i[15],t?Tt(a,i[15],b,zC):St(i[15]),Y_),Bt(e,d=Mt(c,[b[0]&256&&i[8],b[0]&4096&&i[12]]))},i(_){t||(T(o,_),_&&(n||Ui(()=>{n=kl(e,i[3],i[4]),n.start()})),t=!0)},o(_){E(o,_),t=!1},d(_){_&&S(e),o&&o.d(_),i[54](null),r=!1,br(s)}}}function VC(i){let e,n,t,r,s,a;const o=i[16].default,c=kt(o,i,i[15],Q_);let d=[i[8],i[12]],_={};for(let b=0;b<d.length;b+=1)_=Se(_,d[b]);return{c(){e=oe("div"),c&&c.c(),this.h()},l(b){e=ae(b,"DIV",{});var x=we(e);c&&c.l(x),x.forEach(S),this.h()},h(){Bt(e,_)},m(b,x){R(b,e,x),c&&c.m(e,null),i[53](e),r=!0,s||(a=[Un(i[8].action(e)),$t(e,"pointerdown",i[24]),$t(e,"pointermove",i[25]),$t(e,"pointerup",i[26]),$t(e,"touchend",i[27]),$t(e,"touchstart",i[28]),$t(e,"touchcancel",i[29]),$t(e,"touchmove",i[30])],s=!0)},p(b,x){i=b,c&&c.p&&(!r||x[0]&33024)&&Ct(c,o,i,i[15],r?Tt(o,i[15],x,LC):St(i[15]),Q_),Bt(e,_=Mt(d,[x[0]&256&&i[8],x[0]&4096&&i[12]]))},i(b){r||(T(c,b),b&&Ui(()=>{r&&(t&&t.end(1),n=kl(e,i[3],i[4]),n.start())}),r=!0)},o(b){E(c,b),n&&n.invalidate(),b&&(t=xl(e,i[5],i[6])),r=!1},d(b){b&&S(e),c&&c.d(b),i[53](null),b&&t&&t.end(),s=!1,br(a)}}}function UC(i){let e,n,t,r,s;const a=i[16].default,o=kt(a,i,i[15],eg);let c=[i[8],i[12]],d={};for(let _=0;_<c.length;_+=1)d=Se(d,c[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=we(e);o&&o.l(b),b.forEach(S),this.h()},h(){Bt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[52](e),t=!0,r||(s=[Un(i[8].action(e)),$t(e,"pointerdown",i[17]),$t(e,"pointermove",i[18]),$t(e,"pointerup",i[19]),$t(e,"touchend",i[20]),$t(e,"touchstart",i[21]),$t(e,"touchcancel",i[22]),$t(e,"touchmove",i[23])],r=!0)},p(_,b){i=_,o&&o.p&&(!t||b[0]&33024)&&Ct(o,a,i,i[15],t?Tt(a,i[15],b,RC):St(i[15]),eg),Bt(e,d=Mt(c,[b[0]&256&&i[8],b[0]&4096&&i[12]]))},i(_){t||(T(o,_),_&&Ui(()=>{t&&(n||(n=Vo(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(_){E(o,_),_&&(n||(n=Vo(e,i[1],i[2],!1)),n.run(0)),t=!1},d(_){_&&S(e),o&&o.d(_),i[52](null),_&&n&&n.end(),r=!1,br(s)}}}function jC(i){let e;const n=i[16].default,t=kt(n,i,i[15],tg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&33024)&&Ct(t,n,r,r[15],e?Tt(n,r[15],s,OC):St(r[15]),tg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function qC(i){let e,n,t,r;const s=[jC,UC,VC,NC,BC,FC],a=[];function o(c,d){return c[7]&&c[9]?0:c[1]&&c[9]?1:c[3]&&c[5]&&c[9]?2:c[3]&&c[9]?3:c[5]&&c[9]?4:c[9]?5:-1}return~(e=o(i))&&(n=a[e]=s[e](i)),{c(){n&&n.c(),t=Be()},l(c){n&&n.l(c),t=Be()},m(c,d){~e&&a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?~e&&a[e].p(c,d):(n&&(dt(),E(a[_],1,1,()=>{a[_]=null}),pt()),~e?(n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t)):n=null)},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),~e&&a[e].d(c)}}}function HC(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","el"];let s=lt(e,r),a,o,{$$slots:c={},$$scope:d}=e,{transition:_=void 0}=e,{transitionConfig:b=void 0}=e,{inTransition:x=void 0}=e,{inTransitionConfig:P=void 0}=e,{outTransition:L=void 0}=e,{outTransitionConfig:D=void 0}=e,{asChild:B=!1}=e,{id:Z=void 0}=e,{el:W=void 0}=e;const{elements:{content:Q},states:{open:ve},ids:re,getAttrs:ce}=Da();sn(i,Q,Ne=>n(14,a=Ne)),sn(i,ve,Ne=>n(9,o=Ne));const ge=ce("content");function le(Ne){Ht.call(this,i,Ne)}function G(Ne){Ht.call(this,i,Ne)}function ee(Ne){Ht.call(this,i,Ne)}function fe(Ne){Ht.call(this,i,Ne)}function $e(Ne){Ht.call(this,i,Ne)}function he(Ne){Ht.call(this,i,Ne)}function ke(Ne){Ht.call(this,i,Ne)}function Ue(Ne){Ht.call(this,i,Ne)}function Ie(Ne){Ht.call(this,i,Ne)}function nt(Ne){Ht.call(this,i,Ne)}function Xe(Ne){Ht.call(this,i,Ne)}function ct(Ne){Ht.call(this,i,Ne)}function mt(Ne){Ht.call(this,i,Ne)}function Dt(Ne){Ht.call(this,i,Ne)}function zt(Ne){Ht.call(this,i,Ne)}function Yt(Ne){Ht.call(this,i,Ne)}function mn(Ne){Ht.call(this,i,Ne)}function cn(Ne){Ht.call(this,i,Ne)}function It(Ne){Ht.call(this,i,Ne)}function At(Ne){Ht.call(this,i,Ne)}function un(Ne){Ht.call(this,i,Ne)}function fn(Ne){Ht.call(this,i,Ne)}function ot(Ne){Ht.call(this,i,Ne)}function qt(Ne){Ht.call(this,i,Ne)}function wt(Ne){Ht.call(this,i,Ne)}function xt(Ne){Ht.call(this,i,Ne)}function tt(Ne){Ht.call(this,i,Ne)}function yn(Ne){Ht.call(this,i,Ne)}function Ze(Ne){Ht.call(this,i,Ne)}function hn(Ne){Ht.call(this,i,Ne)}function Bn(Ne){Ht.call(this,i,Ne)}function kn(Ne){Ht.call(this,i,Ne)}function Vn(Ne){Ht.call(this,i,Ne)}function ir(Ne){Ht.call(this,i,Ne)}function _s(Ne){Ht.call(this,i,Ne)}function Rs(Ne){Vt[Ne?"unshift":"push"](()=>{W=Ne,n(0,W)})}function gs(Ne){Vt[Ne?"unshift":"push"](()=>{W=Ne,n(0,W)})}function Kr(Ne){Vt[Ne?"unshift":"push"](()=>{W=Ne,n(0,W)})}function Os(Ne){Vt[Ne?"unshift":"push"](()=>{W=Ne,n(0,W)})}function Qs(Ne){Vt[Ne?"unshift":"push"](()=>{W=Ne,n(0,W)})}return i.$$set=Ne=>{e=Se(Se({},e),Lt(Ne)),n(12,s=lt(e,r)),"transition"in Ne&&n(1,_=Ne.transition),"transitionConfig"in Ne&&n(2,b=Ne.transitionConfig),"inTransition"in Ne&&n(3,x=Ne.inTransition),"inTransitionConfig"in Ne&&n(4,P=Ne.inTransitionConfig),"outTransition"in Ne&&n(5,L=Ne.outTransition),"outTransitionConfig"in Ne&&n(6,D=Ne.outTransitionConfig),"asChild"in Ne&&n(7,B=Ne.asChild),"id"in Ne&&n(13,Z=Ne.id),"el"in Ne&&n(0,W=Ne.el),"$$scope"in Ne&&n(15,d=Ne.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8192&&Z&&re.content.set(Z),i.$$.dirty[0]&16384&&n(8,t=a),i.$$.dirty[0]&256&&Object.assign(t,ge)},[W,_,b,x,P,L,D,B,t,o,Q,ve,s,Z,a,d,c,le,G,ee,fe,$e,he,ke,Ue,Ie,nt,Xe,ct,mt,Dt,zt,Yt,mn,cn,It,At,un,fn,ot,qt,wt,xt,tt,yn,Ze,hn,Bn,kn,Vn,ir,_s,Rs,gs,Kr,Os,Qs]}let GC=class extends st{constructor(e){super(),it(this,e,HC,qC,rt,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:13,el:0},null,[-1,-1])}};const ZC=i=>({builder:i&256}),ng=i=>({builder:i[8]});function WC(i){let e,n,t,r=[i[8],i[12]],s={};for(let a=0;a<r.length;a+=1)s=Se(s,r[a]);return{c(){e=oe("div"),this.h()},l(a){e=ae(a,"DIV",{}),we(e).forEach(S),this.h()},h(){Bt(e,s)},m(a,o){R(a,e,o),i[25](e),n||(t=[Un(i[8].action(e)),$t(e,"mouseup",i[20])],n=!0)},p(a,o){Bt(e,s=Mt(r,[o&256&&a[8],o&4096&&a[12]]))},i:vt,o:vt,d(a){a&&S(e),i[25](null),n=!1,br(t)}}}function KC(i){let e,n,t,r,s,a=[i[8],i[12]],o={};for(let c=0;c<a.length;c+=1)o=Se(o,a[c]);return{c(){e=oe("div"),this.h()},l(c){e=ae(c,"DIV",{}),we(e).forEach(S),this.h()},h(){Bt(e,o)},m(c,d){R(c,e,d),i[24](e),t=!0,r||(s=[Un(i[8].action(e)),$t(e,"mouseup",i[19])],r=!0)},p(c,d){i=c,Bt(e,o=Mt(a,[d&256&&i[8],d&4096&&i[12]]))},i(c){t||(n&&n.end(1),t=!0)},o(c){c&&(n=xl(e,i[5],i[6])),t=!1},d(c){c&&S(e),i[24](null),c&&n&&n.end(),r=!1,br(s)}}}function XC(i){let e,n,t,r,s=[i[8],i[12]],a={};for(let o=0;o<s.length;o+=1)a=Se(a,s[o]);return{c(){e=oe("div"),this.h()},l(o){e=ae(o,"DIV",{}),we(e).forEach(S),this.h()},h(){Bt(e,a)},m(o,c){R(o,e,c),i[23](e),t||(r=[Un(i[8].action(e)),$t(e,"mouseup",i[18])],t=!0)},p(o,c){i=o,Bt(e,a=Mt(s,[c&256&&i[8],c&4096&&i[12]]))},i(o){o&&(n||Ui(()=>{n=kl(e,i[3],i[4]),n.start()}))},o:vt,d(o){o&&S(e),i[23](null),t=!1,br(r)}}}function JC(i){let e,n,t,r,s,a,o=[i[8],i[12]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),this.h()},l(d){e=ae(d,"DIV",{}),we(e).forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),i[22](e),r=!0,s||(a=[Un(i[8].action(e)),$t(e,"mouseup",i[17])],s=!0)},p(d,_){i=d,Bt(e,c=Mt(o,[_&256&&i[8],_&4096&&i[12]]))},i(d){r||(d&&Ui(()=>{r&&(t&&t.end(1),n=kl(e,i[3],i[4]),n.start())}),r=!0)},o(d){n&&n.invalidate(),d&&(t=xl(e,i[5],i[6])),r=!1},d(d){d&&S(e),i[22](null),d&&t&&t.end(),s=!1,br(a)}}}function YC(i){let e,n,t,r,s,a=[i[8],i[12]],o={};for(let c=0;c<a.length;c+=1)o=Se(o,a[c]);return{c(){e=oe("div"),this.h()},l(c){e=ae(c,"DIV",{}),we(e).forEach(S),this.h()},h(){Bt(e,o)},m(c,d){R(c,e,d),i[21](e),t=!0,r||(s=[$t(e,"mouseup",i[16]),Un(i[8].action(e))],r=!0)},p(c,d){i=c,Bt(e,o=Mt(a,[d&256&&i[8],d&4096&&i[12]]))},i(c){t||(c&&Ui(()=>{t&&(n||(n=Vo(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(c){c&&(n||(n=Vo(e,i[1],i[2],!1)),n.run(0)),t=!1},d(c){c&&S(e),i[21](null),c&&n&&n.end(),r=!1,br(s)}}}function QC(i){let e;const n=i[15].default,t=kt(n,i,i[14],ng);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16640)&&Ct(t,n,r,r[14],e?Tt(n,r[14],s,ZC):St(r[14]),ng)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function eS(i){let e,n,t,r;const s=[QC,YC,JC,XC,KC,WC],a=[];function o(c,d){return c[7]&&c[9]?0:c[1]&&c[9]?1:c[3]&&c[5]&&c[9]?2:c[3]&&c[9]?3:c[5]&&c[9]?4:c[9]?5:-1}return~(e=o(i))&&(n=a[e]=s[e](i)),{c(){n&&n.c(),t=Be()},l(c){n&&n.l(c),t=Be()},m(c,d){~e&&a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?~e&&a[e].p(c,d):(n&&(dt(),E(a[_],1,1,()=>{a[_]=null}),pt()),~e?(n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t)):n=null)},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),~e&&a[e].d(c)}}}function tS(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let s=lt(e,r),a,o,{$$slots:c={},$$scope:d}=e,{transition:_=void 0}=e,{transitionConfig:b=void 0}=e,{inTransition:x=void 0}=e,{inTransitionConfig:P=void 0}=e,{outTransition:L=void 0}=e,{outTransitionConfig:D=void 0}=e,{asChild:B=!1}=e,{el:Z=void 0}=e;const{elements:{overlay:W},states:{open:Q},getAttrs:ve}=Da();sn(i,W,Ie=>n(13,a=Ie)),sn(i,Q,Ie=>n(9,o=Ie));const re=ve("overlay");function ce(Ie){Ht.call(this,i,Ie)}function ge(Ie){Ht.call(this,i,Ie)}function le(Ie){Ht.call(this,i,Ie)}function G(Ie){Ht.call(this,i,Ie)}function ee(Ie){Ht.call(this,i,Ie)}function fe(Ie){Vt[Ie?"unshift":"push"](()=>{Z=Ie,n(0,Z)})}function $e(Ie){Vt[Ie?"unshift":"push"](()=>{Z=Ie,n(0,Z)})}function he(Ie){Vt[Ie?"unshift":"push"](()=>{Z=Ie,n(0,Z)})}function ke(Ie){Vt[Ie?"unshift":"push"](()=>{Z=Ie,n(0,Z)})}function Ue(Ie){Vt[Ie?"unshift":"push"](()=>{Z=Ie,n(0,Z)})}return i.$$set=Ie=>{e=Se(Se({},e),Lt(Ie)),n(12,s=lt(e,r)),"transition"in Ie&&n(1,_=Ie.transition),"transitionConfig"in Ie&&n(2,b=Ie.transitionConfig),"inTransition"in Ie&&n(3,x=Ie.inTransition),"inTransitionConfig"in Ie&&n(4,P=Ie.inTransitionConfig),"outTransition"in Ie&&n(5,L=Ie.outTransition),"outTransitionConfig"in Ie&&n(6,D=Ie.outTransitionConfig),"asChild"in Ie&&n(7,B=Ie.asChild),"el"in Ie&&n(0,Z=Ie.el),"$$scope"in Ie&&n(14,d=Ie.$$scope)},i.$$.update=()=>{i.$$.dirty&8192&&n(8,t=a),i.$$.dirty&256&&Object.assign(t,re)},[Z,_,b,x,P,L,D,B,t,o,W,Q,s,a,d,c,ce,ge,le,G,ee,fe,$e,he,ke,Ue]}let nS=class extends st{constructor(e){super(),it(this,e,tS,eS,rt,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};const rS=i=>({builder:i&4}),rg=i=>({builder:i[2]}),sS=i=>({builder:i&4}),sg=i=>({builder:i[2]});function iS(i){let e,n,t,r;const s=i[8].default,a=kt(s,i,i[7],rg);let o=[i[2],{type:"button"},i[5]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("button"),a&&a.c(),this.h()},l(d){e=ae(d,"BUTTON",{type:!0});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[Un(i[2].action(e)),$t(e,"m-click",i[4]),$t(e,"m-keydown",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&Ct(a,s,d,d[7],n?Tt(s,d[7],_,rS):St(d[7]),rg),Bt(e,c=Mt(o,[_&4&&d[2],{type:"button"},_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,br(r)}}}function oS(i){let e;const n=i[8].default,t=kt(n,i,i[7],sg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,sS):St(r[7]),sg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function aS(i){let e,n,t,r;const s=[oS,iS],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function lS(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{trigger:b},getAttrs:x}=Da();sn(i,b,B=>n(6,a=B));const P=au(),L=x("trigger");function D(B){Vt[B?"unshift":"push"](()=>{_=B,n(0,_)})}return i.$$set=B=>{e=Se(Se({},e),Lt(B)),n(5,s=lt(e,r)),"asChild"in B&&n(1,d=B.asChild),"el"in B&&n(0,_=B.el),"$$scope"in B&&n(7,c=B.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,L)},[_,d,t,b,P,s,a,c,o,D]}class cS extends st{constructor(e){super(),it(this,e,lS,aS,rt,{asChild:1,el:0})}}const uS=i=>({builder:i&4}),ig=i=>({builder:i[2]}),fS=i=>({builder:i&4}),og=i=>({builder:i[2]});function hS(i){let e,n,t,r;const s=i[8].default,a=kt(s,i,i[7],ig);let o=[i[2],i[4]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[9](e),n=!0,t||(r=Un(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&Ct(a,s,d,d[7],n?Tt(s,d[7],_,uS):St(d[7]),ig),Bt(e,c=Mt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,r()}}}function dS(i){let e;const n=i[8].default,t=kt(n,i,i[7],og);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,fS):St(r[7]),og)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function pS(i){let e,n,t,r;const s=[dS,hS],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function mS(i,e,n){let t;const r=["asChild","id","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{asChild:d=!1}=e,{id:_=void 0}=e,{el:b=void 0}=e;const{elements:{description:x},ids:P,getAttrs:L}=Da();sn(i,x,Z=>n(6,a=Z));const D=L("description");function B(Z){Vt[Z?"unshift":"push"](()=>{b=Z,n(0,b)})}return i.$$set=Z=>{e=Se(Se({},e),Lt(Z)),n(4,s=lt(e,r)),"asChild"in Z&&n(1,d=Z.asChild),"id"in Z&&n(5,_=Z.id),"el"in Z&&n(0,b=Z.el),"$$scope"in Z&&n(7,c=Z.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&_&&P.description.set(_),i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,D)},[b,d,t,x,s,_,a,c,o,B]}let _S=class extends st{constructor(e){super(),it(this,e,mS,pS,rt,{asChild:1,id:5,el:0})}};function gS(){const i="label",n=ou(i,["root"]);return{NAME:i,getAttrs:n}}const vS=i=>({builder:i&4}),ag=i=>({builder:i[2]}),yS=i=>({builder:i&4}),lg=i=>({builder:i[2]});function bS(i){let e,n,t,r;const s=i[8].default,a=kt(s,i,i[7],ag);let o=[i[2],i[5]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("label"),a&&a.c(),this.h()},l(d){e=ae(d,"LABEL",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),i[9](e),n=!0,t||(r=[Un(i[2].action(e)),$t(e,"m-mousedown",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&Ct(a,s,d,d[7],n?Tt(s,d[7],_,vS):St(d[7]),ag),Bt(e,c=Mt(o,[_&4&&d[2],_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,br(r)}}}function $S(i){let e;const n=i[8].default,t=kt(n,i,i[7],lg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,yS):St(r[7]),lg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function wS(i){let e,n,t,r;const s=[$S,bS],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function xS(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{root:b}}=$w();sn(i,b,B=>n(6,a=B));const x=au(),{getAttrs:P}=gS(),L=P("root");function D(B){Vt[B?"unshift":"push"](()=>{_=B,n(0,_)})}return i.$$set=B=>{e=Se(Se({},e),Lt(B)),n(5,s=lt(e,r)),"asChild"in B&&n(1,d=B.asChild),"el"in B&&n(0,_=B.el),"$$scope"in B&&n(7,c=B.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,L)},[_,d,t,b,x,s,a,c,o,D]}let kS=class extends st{constructor(e){super(),it(this,e,xS,wS,rt,{asChild:1,el:0})}};function CS(){return{NAME:"toggle",PARTS:["root","input"]}}function SS(i){const{NAME:e,PARTS:n}=CS(),t=ou(e,n),r={...Rx(Zf(i)),getAttrs:t};return Si(e,r),{...r,updateOption:Wf(r.options)}}const TS=i=>({builder:i&4}),cg=i=>({builder:i[2]}),IS=i=>({builder:i&4}),ug=i=>({builder:i[2]});function ES(i){let e,n,t,r;const s=i[11].default,a=kt(s,i,i[10],cg);let o=[i[2],{type:"button"},i[5]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("button"),a&&a.c(),this.h()},l(d){e=ae(d,"BUTTON",{type:!0});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[12](e),n=!0,t||(r=[Un(i[2].action(e)),$t(e,"m-click",i[4]),$t(e,"m-keydown",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&1028)&&Ct(a,s,d,d[10],n?Tt(s,d[10],_,TS):St(d[10]),cg),Bt(e,c=Mt(o,[_&4&&d[2],{type:"button"},_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[12](null),t=!1,br(r)}}}function PS(i){let e;const n=i[11].default,t=kt(n,i,i[10],ug);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1028)&&Ct(t,n,r,r[10],e?Tt(n,r[10],s,IS):St(r[10]),ug)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function AS(i){let e,n,t,r;const s=[PS,ES],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function MS(i,e,n){let t;const r=["disabled","pressed","onPressedChange","asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{disabled:d=void 0}=e,{pressed:_=void 0}=e,{onPressedChange:b=void 0}=e,{asChild:x=!1}=e,{el:P=void 0}=e;const{elements:{root:L},states:{pressed:D},updateOption:B,getAttrs:Z}=SS({disabled:d,defaultPressed:_,onPressedChange:({next:re})=>(_!==re&&(b==null||b(re),n(6,_=re)),re)});sn(i,L,re=>n(9,a=re));const W=au(),Q=Z("root");function ve(re){Vt[re?"unshift":"push"](()=>{P=re,n(0,P)})}return i.$$set=re=>{e=Se(Se({},e),Lt(re)),n(5,s=lt(e,r)),"disabled"in re&&n(7,d=re.disabled),"pressed"in re&&n(6,_=re.pressed),"onPressedChange"in re&&n(8,b=re.onPressedChange),"asChild"in re&&n(1,x=re.asChild),"el"in re&&n(0,P=re.el),"$$scope"in re&&n(10,c=re.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&_!==void 0&&D.set(_),i.$$.dirty&128&&B("disabled",d),i.$$.dirty&512&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,Q)},[P,x,t,L,W,s,_,d,b,a,c,o,ve]}let DS=class extends st{constructor(e){super(),it(this,e,MS,AS,rt,{disabled:7,pressed:6,onPressedChange:8,asChild:1,el:0})}};function zS(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return{c(){e=Rf("svg"),n=Rf("path"),this.h()},l(s){e=Of(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=we(e);n=Of(a,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(S),a.forEach(S),this.h()},h(){ne(n,"fill-rule","evenodd"),ne(n,"clip-rule","evenodd"),ne(n,"d","M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z"),ne(n,"fill",i[0]),Ff(e,r)},m(s,a){R(s,e,a),ue(e,n)},p(s,[a]){a&1&&ne(n,"fill",s[0]),Ff(e,r=Mt(t,[a&2&&{width:s[1]},a&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a&4&&s[2]]))},i:vt,o:vt,d(s){s&&S(e)}}}function LS(i,e,n){const t=["color","size"];let r=lt(e,t),{color:s="currentColor"}=e,{size:a=15}=e;return i.$$set=o=>{e=Se(Se({},e),Lt(o)),n(2,r=lt(e,t)),"color"in o&&n(0,s=o.color),"size"in o&&n(1,a=o.size)},[s,a,r]}class RS extends st{constructor(e){super(),it(this,e,LS,zS,rt,{color:0,size:1})}}const OS=RS;function FS(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return{c(){e=Rf("svg"),n=Rf("path"),this.h()},l(s){e=Of(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=we(e);n=Of(a,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(S),a.forEach(S),this.h()},h(){ne(n,"fill-rule","evenodd"),ne(n,"clip-rule","evenodd"),ne(n,"d","M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z"),ne(n,"fill",i[0]),Ff(e,r)},m(s,a){R(s,e,a),ue(e,n)},p(s,[a]){a&1&&ne(n,"fill",s[0]),Ff(e,r=Mt(t,[a&2&&{width:s[1]},a&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a&4&&s[2]]))},i:vt,o:vt,d(s){s&&S(e)}}}function BS(i,e,n){const t=["color","size"];let r=lt(e,t),{color:s="currentColor"}=e,{size:a=15}=e;return i.$$set=o=>{e=Se(Se({},e),Lt(o)),n(2,r=lt(e,t)),"color"in o&&n(0,s=o.color),"size"in o&&n(1,a=o.size)},[s,a,r]}class NS extends st{constructor(e){super(),it(this,e,BS,FS,rt,{color:0,size:1})}}const VS=NS;function US(i){let e,n,t;const r=i[3].default,s=kt(r,i,i[2],null);let a=[{class:n=Ut("flex items-center p-6 pt-0",i[0])},i[1]],o={};for(let c=0;c<a.length;c+=1)o=Se(o,a[c]);return{c(){e=oe("div"),s&&s.c(),this.h()},l(c){e=ae(c,"DIV",{class:!0});var d=we(e);s&&s.l(d),d.forEach(S),this.h()},h(){Bt(e,o)},m(c,d){R(c,e,d),s&&s.m(e,null),t=!0},p(c,[d]){s&&s.p&&(!t||d&4)&&Ct(s,r,c,c[2],t?Tt(r,c[2],d,null):St(c[2]),null),Bt(e,o=Mt(a,[(!t||d&1&&n!==(n=Ut("flex items-center p-6 pt-0",c[0])))&&{class:n},d&2&&c[1]]))},i(c){t||(T(s,c),t=!0)},o(c){E(s,c),t=!1},d(c){c&&S(e),s&&s.d(c)}}}function jS(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(2,a=c.$$scope)},[o,r,a,s]}class qS extends st{constructor(e){super(),it(this,e,jS,US,rt,{class:0})}}var Rn=(i=>(i.HOME="",i.SOCIAL_NETWORK="social",i.SOCIAL_NETWORK_FEED="social/feed",i.SOCIAL_NETWORK_CONNECTIONS="social/connections",i.POINTS_AND_BADGES="points-badges",i.CHECK_INS="check-ins",i.FAVOURITES="favourites",i.SETTINGS="settings",i))(Rn||{});const HS=({params:i})=>({slug:i.slug});function GS(){return Object.values(Rn).map(i=>({slug:i}))}const qN=Object.freeze(Object.defineProperty({__proto__:null,entries:GS,load:HS},Symbol.toStringTag,{value:"Module"}));function ZS(i){let e;const n=i[3].default,t=kt(n,i,i[11],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&2048)&&Ct(t,n,r,r[11],e?Tt(n,r[11],s,null):St(r[11]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function WS(i){let e,n;const t=[{class:Ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[ZS]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new ww({props:r}),e.$on("click",i[4]),e.$on("keydown",i[5]),e.$on("focusin",i[6]),e.$on("focusout",i[7]),e.$on("pointerdown",i[8]),e.$on("pointerleave",i[9]),e.$on("pointermove",i[10]),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&7?Mt(t,[a&3&&{class:Ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[1]&&"pl-8",s[0])},a&4&&dn(s[2])]):{};a&2048&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function KS(i,e,n){const t=["class","inset"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{inset:c=void 0}=e;function d(B){Ht.call(this,i,B)}function _(B){Ht.call(this,i,B)}function b(B){Ht.call(this,i,B)}function x(B){Ht.call(this,i,B)}function P(B){Ht.call(this,i,B)}function L(B){Ht.call(this,i,B)}function D(B){Ht.call(this,i,B)}return i.$$set=B=>{e=Se(Se({},e),Lt(B)),n(2,r=lt(e,t)),"class"in B&&n(0,o=B.class),"inset"in B&&n(1,c=B.inset),"$$scope"in B&&n(11,a=B.$$scope)},[o,c,r,s,d,_,b,x,P,L,D,a]}class Vf extends st{constructor(e){super(),it(this,e,KS,WS,rt,{class:0,inset:1})}}function XS(i){let e;const n=i[3].default,t=kt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Ct(t,n,r,r[4],e?Tt(n,r[4],s,null):St(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function JS(i){let e,n;const t=[{class:Ut("px-2 py-1.5 text-sm font-semibold",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[XS]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new xw({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&7?Mt(t,[a&3&&{class:Ut("px-2 py-1.5 text-sm font-semibold",s[1]&&"pl-8",s[0])},a&4&&dn(s[2])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function YS(i,e,n){const t=["class","inset"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{inset:c=void 0}=e;return i.$$set=d=>{e=Se(Se({},e),Lt(d)),n(2,r=lt(e,t)),"class"in d&&n(0,o=d.class),"inset"in d&&n(1,c=d.inset),"$$scope"in d&&n(4,a=d.$$scope)},[o,c,r,s,a]}class QS extends st{constructor(e){super(),it(this,e,YS,JS,rt,{class:0,inset:1})}}function eT(i){let e;const n=i[5].default,t=kt(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,null):St(r[7]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function tT(i){let e,n;const t=[{transition:i[2]},{transitionConfig:i[3]},{sideOffset:i[1]},{class:Ut("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",i[0])},i[4]];let r={$$slots:{default:[eT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new kw({props:r}),e.$on("keydown",i[6]),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&31?Mt(t,[a&4&&{transition:s[2]},a&8&&{transitionConfig:s[3]},a&2&&{sideOffset:s[1]},a&1&&{class:Ut("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",s[0])},a&16&&dn(s[4])]):{};a&128&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function nT(i,e,n){const t=["class","sideOffset","transition","transitionConfig"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{sideOffset:c=4}=e,{transition:d=Zd}=e,{transitionConfig:_=void 0}=e;function b(x){Ht.call(this,i,x)}return i.$$set=x=>{e=Se(Se({},e),Lt(x)),n(4,r=lt(e,t)),"class"in x&&n(0,o=x.class),"sideOffset"in x&&n(1,c=x.sideOffset),"transition"in x&&n(2,d=x.transition),"transitionConfig"in x&&n(3,_=x.transitionConfig),"$$scope"in x&&n(7,a=x.$$scope)},[o,c,d,_,r,s,b,a]}class rT extends st{constructor(e){super(),it(this,e,nT,tT,rt,{class:0,sideOffset:1,transition:2,transitionConfig:3})}}function sT(i){let e,n;const t=[{class:Ut("-mx-1 my-1 h-px bg-muted",i[0])},i[1]];let r={};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Cw({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("-mx-1 my-1 h-px bg-muted",s[0])},a&2&&dn(s[1])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function iT(i,e,n){const t=["class"];let r=lt(e,t),{class:s=void 0}=e;return i.$$set=a=>{e=Se(Se({},e),Lt(a)),n(1,r=lt(e,t)),"class"in a&&n(0,s=a.class)},[s,r]}class ay extends st{constructor(e){super(),it(this,e,iT,sT,rt,{class:0})}}const oT=Sw,aT=Tw,lT=iC;function cT(i){let e;const n=i[3].default,t=kt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Ct(t,n,r,r[4],e?Tt(n,r[4],s,null):St(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function uT(i){let e,n;const t=[{delayMs:i[1]},{class:Ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",i[0])},i[2]];let r={$$slots:{default:[cT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Bk({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&7?Mt(t,[a&2&&{delayMs:s[1]},a&1&&{class:Ut("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s[0])},a&4&&dn(s[2])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function fT(i,e,n){const t=["class","delayMs"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{delayMs:c=void 0}=e;return i.$$set=d=>{e=Se(Se({},e),Lt(d)),n(2,r=lt(e,t)),"class"in d&&n(0,o=d.class),"delayMs"in d&&n(1,c=d.delayMs),"$$scope"in d&&n(4,a=d.$$scope)},[o,c,r,s,a]}class hT extends st{constructor(e){super(),it(this,e,fT,uT,rt,{class:0,delayMs:1})}}function dT(i){let e,n;const t=[{src:i[1]},{alt:i[2]},{class:Ut("aspect-square h-full w-full",i[0])},i[3]];let r={};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Hk({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&15?Mt(t,[a&2&&{src:s[1]},a&4&&{alt:s[2]},a&1&&{class:Ut("aspect-square h-full w-full",s[0])},a&8&&dn(s[3])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function pT(i,e,n){const t=["class","src","alt"];let r=lt(e,t),{class:s=void 0}=e,{src:a=void 0}=e,{alt:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(3,r=lt(e,t)),"class"in c&&n(0,s=c.class),"src"in c&&n(1,a=c.src),"alt"in c&&n(2,o=c.alt)},[s,a,o,r]}class mT extends st{constructor(e){super(),it(this,e,pT,dT,rt,{class:0,src:1,alt:2})}}function _T(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function gT(i){let e,n;const t=[{class:Ut("flex h-full w-full items-center justify-center rounded-full bg-muted",i[0])},i[1]];let r={$$slots:{default:[_T]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Yk({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("flex h-full w-full items-center justify-center rounded-full bg-muted",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function vT(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}class Qd extends st{constructor(e){super(),it(this,e,vT,gT,rt,{class:0})}}function yT(i){let e,n;return e=new Qd({props:{"aria-label":"Profile Picture",class:"bg-error text-2xl",$$slots:{default:[wT]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bT(i){let e,n,t,r=i[1].profile_picture!==void 0&&fg(i);return n=new Qd({props:{"aria-label":"Profile Picture",$$slots:{default:[xT]},$$scope:{ctx:i}}}),{c(){r&&r.c(),e=me(),N(n.$$.fragment)},l(s){r&&r.l(s),e=_e(s),j(n.$$.fragment,s)},m(s,a){r&&r.m(s,a),R(s,e,a),V(n,s,a),t=!0},p(s,a){s[1].profile_picture!==void 0?r?(r.p(s,a),a&2&&T(r,1)):(r=fg(s),r.c(),T(r,1),r.m(e.parentNode,e)):r&&(dt(),E(r,1,1,()=>{r=null}),pt());const o={};a&524288&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){t||(T(r),T(n.$$.fragment,s),t=!0)},o(s){E(r),E(n.$$.fragment,s),t=!1},d(s){s&&S(e),r&&r.d(s),U(n,s)}}}function $T(i){let e,n;return e=new Qd({props:{$$slots:{default:[kT]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wT(i){let e;return{c(){e=je("!")},l(n){e=qe(n,"!")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function fg(i){let e,n;return e=new mT({props:{src:i[1].profile_picture,alt:"Profile Picture","aria-label":"Profile Picture",class:"bg-card"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.src=t[1].profile_picture),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function xT(i){let e,n;return e=new wx({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function kT(i){let e;return{c(){e=oe("span"),this.h()},l(n){e=ae(n,"SPAN",{class:!0}),we(e).forEach(S),this.h()},h(){ne(e,"class","loading loading-ring loading-lg")},m(n,t){R(n,e,t)},p:vt,d(n){n&&S(e)}}}function CT(i){let e,n,t,r;const s=[$T,bT,yT],a=[];function o(c,d){return c[0]?0:c[3]?2:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function ST(i){let e,n;return e=new hT({props:{class:"h-10 w-10",$$slots:{default:[CT]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&524299&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function TT(i){let e,n;return e=new Nn({props:{variant:"ghost",builders:[i[18]],class:"relative h-8 w-8 rounded-full mx-1",$$slots:{default:[ST]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.builders=[t[18]]),r&524299&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function IT(i){let e,n,t,r,s,a;return e=new Vf({props:{class:"font-normal cursor-pointer",$$slots:{default:[AT]},$$scope:{ctx:i}}}),e.$on("click",i[11]),t=new ay({}),s=new Vf({props:{class:"font-normal cursor-pointer flex-col items-start gap-2",$$slots:{default:[zT]},$$scope:{ctx:i}}}),s.$on("click",i[13]),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o),r=_e(o),j(s.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),R(o,r,c),V(s,o,c),a=!0},p(o,c){const d={};c&524290&&(d.$$scope={dirty:c,ctx:o}),e.$set(d);const _={};c&524340&&(_.$$scope={dirty:c,ctx:o}),s.$set(_)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function ET(i){let e,n;return e=new QS({props:{class:"font-normal",$$slots:{default:[LT]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function PT(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1hn9b8o"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","h-16 flex items-center justify-center")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function AT(i){let e,n,t=i[1].nickname+"",r,s,a,o,c=i[1].nickname+"",d;return{c(){e=oe("div"),n=oe("p"),r=je(t),s=me(),a=oe("p"),o=je("@"),d=je(c),this.h()},l(_){e=ae(_,"DIV",{class:!0});var b=we(e);n=ae(b,"P",{class:!0});var x=we(n);r=qe(x,t),x.forEach(S),s=_e(b),a=ae(b,"P",{class:!0});var P=we(a);o=qe(P,"@"),d=qe(P,c),P.forEach(S),b.forEach(S),this.h()},h(){ne(n,"class","text-sm font-medium leading-none"),ne(a,"class","text-xs leading-none text-muted-foreground"),ne(e,"class","flex flex-col space-y-1")},m(_,b){R(_,e,b),ue(e,n),ue(n,r),ue(e,s),ue(e,a),ue(a,o),ue(a,d)},p(_,b){b&2&&t!==(t=_[1].nickname+"")&&Ft(r,t),b&2&&c!==(c=_[1].nickname+"")&&Ft(d,c)},d(_){_&&S(e)}}}function MT(i){let e,n;return e=new Ma({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function DT(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){ur(e.src,n=ks[i[2].badge])||ne(e,"src",n),ne(e,"class","h-14 w-14 -ml-0.5"),ne(e,"alt","Current Total Points Badge Icon")},m(s,a){R(s,e,a),t||(r=$t(e,"error",i[12]),t=!0)},p(s,a){a&4&&!ur(e.src,n=ks[s[2].badge])&&ne(e,"src",n)},i:vt,o:vt,d(s){s&&S(e),t=!1,r()}}}function zT(i){let e,n,t=i[2].totalPoints+"",r,s,a,o,c,d,_,b,x=i[2].badge+"",P,L,D,B,Z=i[2].previousThreshold+"",W,Q,ve,re,ce,ge=i[2].threshold+"",le,G;const ee=[DT,MT],fe=[];function $e(he,ke){return he[4]?1:0}return c=$e(i),d=fe[c]=ee[c](i),{c(){e=oe("p"),n=je("Total Points: "),r=je(t),s=me(),a=oe("div"),o=oe("div"),d.c(),_=me(),b=oe("p"),P=je(x),L=me(),D=oe("div"),B=oe("p"),W=je(Z),Q=me(),ve=oe("progress"),re=me(),ce=oe("p"),le=je(ge),this.h()},l(he){e=ae(he,"P",{class:!0});var ke=we(e);n=qe(ke,"Total Points: "),r=qe(ke,t),ke.forEach(S),s=_e(he),a=ae(he,"DIV",{class:!0});var Ue=we(a);o=ae(Ue,"DIV",{class:!0});var Ie=we(o);d.l(Ie),Ie.forEach(S),_=_e(Ue),b=ae(Ue,"P",{class:!0});var nt=we(b);P=qe(nt,x),nt.forEach(S),L=_e(Ue),D=ae(Ue,"DIV",{class:!0});var Xe=we(D);B=ae(Xe,"P",{class:!0});var ct=we(B);W=qe(ct,Z),ct.forEach(S),Q=_e(Xe),ve=ae(Xe,"PROGRESS",{class:!0,max:!0}),we(ve).forEach(S),re=_e(Xe),ce=ae(Xe,"P",{class:!0});var mt=we(ce);le=qe(mt,ge),mt.forEach(S),Xe.forEach(S),Ue.forEach(S),this.h()},h(){ne(e,"class","text-sm font-medium leading-none"),ne(o,"class","shrink-0"),ne(b,"class","text-sm font-medium leading-none"),ne(B,"class","text-sm font-medium leading-none text-muted-foreground"),ne(ve,"class","progress progress-error grow"),ve.value=i[5],ne(ve,"max","100"),ne(ce,"class","text-sm font-medium leading-none text-muted-foreground"),ne(D,"class","flex self-stretch gap-2 items-center"),ne(a,"class","flex flex-col space-y-1 items-center self-stretch")},m(he,ke){R(he,e,ke),ue(e,n),ue(e,r),R(he,s,ke),R(he,a,ke),ue(a,o),fe[c].m(o,null),ue(a,_),ue(a,b),ue(b,P),ue(a,L),ue(a,D),ue(D,B),ue(B,W),ue(D,Q),ue(D,ve),ue(D,re),ue(D,ce),ue(ce,le),G=!0},p(he,ke){(!G||ke&4)&&t!==(t=he[2].totalPoints+"")&&Ft(r,t);let Ue=c;c=$e(he),c===Ue?fe[c].p(he,ke):(dt(),E(fe[Ue],1,1,()=>{fe[Ue]=null}),pt(),d=fe[c],d?d.p(he,ke):(d=fe[c]=ee[c](he),d.c()),T(d,1),d.m(o,null)),(!G||ke&4)&&x!==(x=he[2].badge+"")&&Ft(P,x),(!G||ke&4)&&Z!==(Z=he[2].previousThreshold+"")&&Ft(W,Z),(!G||ke&32)&&(ve.value=he[5]),(!G||ke&4)&&ge!==(ge=he[2].threshold+"")&&Ft(le,ge)},i(he){G||(T(d),G=!0)},o(he){E(d),G=!1},d(he){he&&(S(e),S(s),S(a)),fe[c].d()}}}function LT(i){let e,n='<p class="text-xs leading-none text-error">Failed To Fetch</p>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-5us5t3"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","flex flex-col space-y-1")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function RT(i){let e;return{c(){e=je("Settings")},l(n){e=qe(n,"Settings")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function OT(i){let e;return{c(){e=je("Log out")},l(n){e=qe(n,"Log out")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function FT(i){let e,n,t,r;return e=new Vf({props:{class:"cursor-pointer",$$slots:{default:[RT]},$$scope:{ctx:i}}}),e.$on("click",i[14]),t=new Vf({props:{class:"cursor-pointer",$$slots:{default:[OT]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&524288&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&524288&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function BT(i){let e,n,t,r,s,a,o;const c=[PT,ET,IT],d=[];function _(b,x){return b[0]?0:b[3]?1:2}return e=_(i),n=d[e]=c[e](i),r=new ay({}),a=new lT({props:{$$slots:{default:[FT]},$$scope:{ctx:i}}}),{c(){n.c(),t=me(),N(r.$$.fragment),s=me(),N(a.$$.fragment)},l(b){n.l(b),t=_e(b),j(r.$$.fragment,b),s=_e(b),j(a.$$.fragment,b)},m(b,x){d[e].m(b,x),R(b,t,x),V(r,b,x),R(b,s,x),V(a,b,x),o=!0},p(b,x){let P=e;e=_(b),e===P?d[e].p(b,x):(dt(),E(d[P],1,1,()=>{d[P]=null}),pt(),n=d[e],n?n.p(b,x):(n=d[e]=c[e](b),n.c()),T(n,1),n.m(t.parentNode,t));const L={};x&524288&&(L.$$scope={dirty:x,ctx:b}),a.$set(L)},i(b){o||(T(n),T(r.$$.fragment,b),T(a.$$.fragment,b),o=!0)},o(b){E(n),E(r.$$.fragment,b),E(a.$$.fragment,b),o=!1},d(b){b&&(S(t),S(s)),d[e].d(b),U(r,b),U(a,b)}}}function NT(i){let e,n,t,r;return e=new aT({props:{asChild:!0,$$slots:{default:[TT,({builder:s})=>({18:s}),({builder:s})=>s?262144:0]},$$scope:{ctx:i}}}),t=new rT({props:{class:"w-56",align:"end",$$slots:{default:[BT]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&786443&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&524351&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function VT(i){let e,n;return e=new oT({props:{$$slots:{default:[NT]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&524351&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let hg=2e3;function UT(i,e,n){let t,r,s=!1,a=!0,o=!1;const c=di("refreshAvatarData");let d;const _=async()=>{const ce=await(await fetch("/api/settings/profile")).json();n(1,t=ce),(typeof(t==null?void 0:t.nickname)!="string"||typeof(t==null?void 0:t.email)!="string"||typeof(t==null?void 0:t.description)!="string")&&n(3,s=!0);const le=await(await fetch("/api/points-badges/avatar")).json();n(2,r=le),(typeof(r==null?void 0:r.totalPoints)!="number"||typeof(r==null?void 0:r.badge)!="string"||!((r==null?void 0:r.badge)in ks)||typeof(r==null?void 0:r.threshold)!="number"||typeof(r==null?void 0:r.previousThreshold)!="number")&&n(3,s=!0),n(7,d=Math.round((r.totalPoints-r.previousThreshold)*100/(r.threshold-r.previousThreshold))),d>100&&n(7,d=100),n(0,a=!1)};c.set(_);const b=async()=>{await zw()&&Lw.verify()};let x;Qn(()=>(_(),x=ny.subscribe(_),()=>x()));let P=0,L,D,B=!1;Uo(()=>clearInterval(L));const Z=()=>Ta("/app"),W=()=>n(4,o=!0),Q=()=>Ta("/app/points-badges"),ve=()=>Ta("/app/settings");return i.$$.update=()=>{i.$$.dirty&1921&&!a&&!B&&(n(10,B=!0),n(9,D=Date.now()),n(8,L=setInterval(()=>{const ce=Date.now()-D;if(ce<hg){const ge=ce/hg;n(5,P=d*fu(ge))}else n(5,P=d),clearInterval(L)},2)))},[a,t,r,s,o,P,b,d,L,D,B,Z,W,Q,ve]}class jT extends st{constructor(e){super(),it(this,e,UT,VT,rt,{})}}function qT(i){let e,n,t,r,s,a,o,c;return{c(){e=oe("div"),n=me(),t=oe("div"),r=oe("div"),s=me(),a=oe("div"),o=me(),c=oe("div"),this.h()},l(d){e=ae(d,"DIV",{class:!0}),we(e).forEach(S),n=_e(d),t=ae(d,"DIV",{class:!0});var _=we(t);r=ae(_,"DIV",{class:!0}),we(r).forEach(S),s=_e(_),a=ae(_,"DIV",{class:!0}),we(a).forEach(S),_.forEach(S),o=_e(d),c=ae(d,"DIV",{class:!0}),we(c).forEach(S),this.h()},h(){ne(e,"class","h-1 w-7 rounded bg-base-content transition-all"),cr(e,"w-0",!i[0]),cr(e,"opacity-0",!i[0]),cr(e,"opacity-100",i[0]),ne(r,"class","absolute h-1 w-7 -translate-x-1/2 -translate-y-1/2 rounded bg-base-content transition-all"),cr(r,"rotate-45",!i[0]),ne(a,"class","absolute h-1 w-7 -translate-x-1/2 -translate-y-1/2 rounded bg-base-content transition-all"),cr(a,"-rotate-45",!i[0]),ne(t,"class","relative"),ne(c,"class","h-1 w-7 rounded bg-base-content transition-all"),cr(c,"w-0",!i[0]),cr(c,"opacity-0",!i[0]),cr(c,"opacity-100",i[0])},m(d,_){R(d,e,_),R(d,n,_),R(d,t,_),ue(t,r),ue(t,s),ue(t,a),R(d,o,_),R(d,c,_)},p(d,_){_&1&&cr(e,"w-0",!d[0]),_&1&&cr(e,"opacity-0",!d[0]),_&1&&cr(e,"opacity-100",d[0]),_&1&&cr(r,"rotate-45",!d[0]),_&1&&cr(a,"-rotate-45",!d[0]),_&1&&cr(c,"w-0",!d[0]),_&1&&cr(c,"opacity-0",!d[0]),_&1&&cr(c,"opacity-100",d[0])},d(d){d&&(S(e),S(n),S(t),S(o),S(c))}}}function HT(i){let e,n,t,r,s,a="Natreon",o,c,d="Natreon",_,b,x;return t=new Nn({props:{variant:"outline",size:"none",class:"flex-col btn btn-square p-0",$$slots:{default:[qT]},$$scope:{ctx:i}}}),t.$on("click",i[1]),b=new jT({}),{c(){e=oe("header"),n=oe("div"),N(t.$$.fragment),r=me(),s=oe("h1"),s.textContent=a,o=me(),c=oe("h1"),c.textContent=d,_=me(),N(b.$$.fragment),this.h()},l(P){e=ae(P,"HEADER",{id:!0,class:!0});var L=we(e);n=ae(L,"DIV",{class:!0});var D=we(n);j(t.$$.fragment,D),D.forEach(S),r=_e(L),s=ae(L,"H1",{class:!0,"data-svelte-h":!0}),on(s)!=="svelte-1i53c1w"&&(s.textContent=a),o=_e(L),c=ae(L,"H1",{class:!0,"data-svelte-h":!0}),on(c)!=="svelte-8xrexm"&&(c.textContent=d),_=_e(L),j(b.$$.fragment,L),L.forEach(S),this.h()},h(){ne(n,"class","px-1 md:hidden"),ne(s,"class","select-none px-4 hidden md:block"),ne(c,"class","select-none md:hidden absolute left-1/2 -translate-x-1/2"),ne(e,"id","app-header"),ne(e,"class","p-2 flex items-center justify-between sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60")},m(P,L){R(P,e,L),ue(e,n),V(t,n,null),ue(e,r),ue(e,s),ue(e,o),ue(e,c),ue(e,_),V(b,e,null),x=!0},p(P,[L]){const D={};L&5&&(D.$$scope={dirty:L,ctx:P}),t.$set(D)},i(P){x||(T(t.$$.fragment,P),T(b.$$.fragment,P),x=!0)},o(P){E(t.$$.fragment,P),E(b.$$.fragment,P),x=!1},d(P){P&&S(e),U(t),U(b)}}}function GT(i,e,n){let{menuClosed:t}=e;const r=()=>n(0,t=!t);return i.$$set=s=>{"menuClosed"in s&&n(0,t=s.menuClosed)},[t,r]}class ZT extends st{constructor(e){super(),it(this,e,GT,HT,rt,{menuClosed:0})}}function WT(i){let e,n,t;return e=new P2({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=je("Home")},l(r){j(e.$$.fragment,r),n=qe(r,"Home")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:vt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function KT(i){let e,n,t;return e=new Tx({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=je("Social Network")},l(r){j(e.$$.fragment,r),n=qe(r,"Social Network")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:vt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function XT(i){let e,n,t;return e=new Iw({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=je("Points & Badges")},l(r){j(e.$$.fragment,r),n=qe(r,"Points & Badges")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:vt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function JT(i){let e,n,t;return e=new Kf({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=je("Checked-in POIs")},l(r){j(e.$$.fragment,r),n=qe(r,"Checked-in POIs")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:vt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function YT(i){let e,n,t;return e=new Cl({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=je("Favourite POIs")},l(r){j(e.$$.fragment,r),n=qe(r,"Favourite POIs")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:vt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function QT(i){let e,n,t;return e=new Q2({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=je("Profile Settings")},l(r){j(e.$$.fragment,r),n=qe(r,"Profile Settings")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:vt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function eI(i){var Dt,zt,Yt,mn,cn;let e,n,t,r,s,a,o,c,d,_,b,x,P,L,D,B,Z,W,Q,ve,re,ce,ge,le,G,ee,fe,$e,he,ke,Ue,Ie,nt,Xe,ct,mt;return t=new Nn({props:{variant:i[0]?"outline":"secondary",href:`/app${Rn.HOME?"/"+Rn.HOME:""}`,"data-testid":"home-button",class:"flex items-center text-sm justify-start",$$slots:{default:[WT]},$$scope:{ctx:i}}}),t.$on("click",i[2]),c=new Nn({props:{variant:((Dt=i[0])==null?void 0:Dt.split("/")[0])===Rn.SOCIAL_NETWORK?"secondary":"outline",href:`/app${Rn.SOCIAL_NETWORK?"/"+Rn.SOCIAL_NETWORK:""}`,"data-testid":"social-network-button",class:"flex items-center text-sm justify-start",$$slots:{default:[KT]},$$scope:{ctx:i}}}),c.$on("click",i[3]),P=new Nn({props:{variant:((zt=i[0])==null?void 0:zt.split("/")[0])===Rn.POINTS_AND_BADGES?"secondary":"outline",href:`/app${Rn.POINTS_AND_BADGES?"/"+Rn.POINTS_AND_BADGES:""}`,"data-testid":"points-and-badges-button",class:"flex items-center text-sm justify-start",$$slots:{default:[XT]},$$scope:{ctx:i}}}),P.$on("click",i[4]),W=new Nn({props:{variant:((Yt=i[0])==null?void 0:Yt.split("/")[0])===Rn.CHECK_INS?"secondary":"outline",href:`/app${Rn.CHECK_INS?"/"+Rn.CHECK_INS:""}`,"data-testid":"checked-in-pois-button",class:"flex items-center text-sm justify-start",$$slots:{default:[JT]},$$scope:{ctx:i}}}),W.$on("click",i[5]),ge=new Nn({props:{variant:((mn=i[0])==null?void 0:mn.split("/")[0])===Rn.FAVOURITES?"secondary":"outline",href:`/app${Rn.FAVOURITES?"/"+Rn.FAVOURITES:""}`,"data-testid":"favourite-pois-button",class:"flex items-center text-sm justify-start",$$slots:{default:[YT]},$$scope:{ctx:i}}}),ge.$on("click",i[6]),$e=new Nn({props:{variant:((cn=i[0])==null?void 0:cn.split("/")[0])===Rn.SETTINGS?"secondary":"outline",href:`/app${Rn.SETTINGS?"/"+Rn.SETTINGS:""}`,"data-testid":"settings-button",class:"flex items-center text-sm justify-start",$$slots:{default:[QT]},$$scope:{ctx:i}}}),$e.$on("click",i[7]),ct=new hw({props:{variant:"secondary"}}),{c(){e=oe("ul"),n=oe("li"),N(t.$$.fragment),r=me(),s=oe("div"),a=me(),o=oe("li"),N(c.$$.fragment),d=me(),_=oe("div"),b=me(),x=oe("li"),N(P.$$.fragment),L=me(),D=oe("div"),B=me(),Z=oe("li"),N(W.$$.fragment),Q=me(),ve=oe("div"),re=me(),ce=oe("li"),N(ge.$$.fragment),le=me(),G=oe("div"),ee=me(),fe=oe("li"),N($e.$$.fragment),he=me(),ke=oe("div"),Ue=me(),Ie=oe("div"),nt=me(),Xe=oe("li"),N(ct.$$.fragment),this.h()},l(It){e=ae(It,"UL",{class:!0,role:!0});var At=we(e);n=ae(At,"LI",{role:!0});var un=we(n);j(t.$$.fragment,un),un.forEach(S),r=_e(At),s=ae(At,"DIV",{class:!0}),we(s).forEach(S),a=_e(At),o=ae(At,"LI",{role:!0});var fn=we(o);j(c.$$.fragment,fn),fn.forEach(S),d=_e(At),_=ae(At,"DIV",{class:!0}),we(_).forEach(S),b=_e(At),x=ae(At,"LI",{role:!0});var ot=we(x);j(P.$$.fragment,ot),ot.forEach(S),L=_e(At),D=ae(At,"DIV",{class:!0}),we(D).forEach(S),B=_e(At),Z=ae(At,"LI",{role:!0});var qt=we(Z);j(W.$$.fragment,qt),qt.forEach(S),Q=_e(At),ve=ae(At,"DIV",{class:!0}),we(ve).forEach(S),re=_e(At),ce=ae(At,"LI",{role:!0});var wt=we(ce);j(ge.$$.fragment,wt),wt.forEach(S),le=_e(At),G=ae(At,"DIV",{class:!0}),we(G).forEach(S),ee=_e(At),fe=ae(At,"LI",{role:!0});var xt=we(fe);j($e.$$.fragment,xt),xt.forEach(S),he=_e(At),ke=ae(At,"DIV",{class:!0}),we(ke).forEach(S),Ue=_e(At),Ie=ae(At,"DIV",{class:!0}),we(Ie).forEach(S),nt=_e(At),Xe=ae(At,"LI",{role:!0});var tt=we(Xe);j(ct.$$.fragment,tt),tt.forEach(S),At.forEach(S),this.h()},h(){ne(n,"role","tab"),ne(s,"class","my-1"),ne(o,"role","tab"),ne(_,"class","my-1"),ne(x,"role","tab"),ne(D,"class","my-1"),ne(Z,"role","tab"),ne(ve,"class","my-1"),ne(ce,"role","tab"),ne(G,"class","my-1"),ne(fe,"role","tab"),ne(ke,"class","grow"),ne(Ie,"class","my-2"),ne(Xe,"role","tab"),ne(e,"class","menu menu-lg p-4 min-h-full text-base-content flex-nowrap"),ne(e,"role","tablist")},m(It,At){R(It,e,At),ue(e,n),V(t,n,null),ue(e,r),ue(e,s),ue(e,a),ue(e,o),V(c,o,null),ue(e,d),ue(e,_),ue(e,b),ue(e,x),V(P,x,null),ue(e,L),ue(e,D),ue(e,B),ue(e,Z),V(W,Z,null),ue(e,Q),ue(e,ve),ue(e,re),ue(e,ce),V(ge,ce,null),ue(e,le),ue(e,G),ue(e,ee),ue(e,fe),V($e,fe,null),ue(e,he),ue(e,ke),ue(e,Ue),ue(e,Ie),ue(e,nt),ue(e,Xe),V(ct,Xe,null),mt=!0},p(It,[At]){var tt,yn,Ze,hn,Bn;const un={};At&1&&(un.variant=It[0]?"outline":"secondary"),At&256&&(un.$$scope={dirty:At,ctx:It}),t.$set(un);const fn={};At&1&&(fn.variant=((tt=It[0])==null?void 0:tt.split("/")[0])===Rn.SOCIAL_NETWORK?"secondary":"outline"),At&256&&(fn.$$scope={dirty:At,ctx:It}),c.$set(fn);const ot={};At&1&&(ot.variant=((yn=It[0])==null?void 0:yn.split("/")[0])===Rn.POINTS_AND_BADGES?"secondary":"outline"),At&256&&(ot.$$scope={dirty:At,ctx:It}),P.$set(ot);const qt={};At&1&&(qt.variant=((Ze=It[0])==null?void 0:Ze.split("/")[0])===Rn.CHECK_INS?"secondary":"outline"),At&256&&(qt.$$scope={dirty:At,ctx:It}),W.$set(qt);const wt={};At&1&&(wt.variant=((hn=It[0])==null?void 0:hn.split("/")[0])===Rn.FAVOURITES?"secondary":"outline"),At&256&&(wt.$$scope={dirty:At,ctx:It}),ge.$set(wt);const xt={};At&1&&(xt.variant=((Bn=It[0])==null?void 0:Bn.split("/")[0])===Rn.SETTINGS?"secondary":"outline"),At&256&&(xt.$$scope={dirty:At,ctx:It}),$e.$set(xt)},i(It){mt||(T(t.$$.fragment,It),T(c.$$.fragment,It),T(P.$$.fragment,It),T(W.$$.fragment,It),T(ge.$$.fragment,It),T($e.$$.fragment,It),T(ct.$$.fragment,It),mt=!0)},o(It){E(t.$$.fragment,It),E(c.$$.fragment,It),E(P.$$.fragment,It),E(W.$$.fragment,It),E(ge.$$.fragment,It),E($e.$$.fragment,It),E(ct.$$.fragment,It),mt=!1},d(It){It&&S(e),U(t),U(c),U(P),U(W),U(ge),U($e),U(ct)}}}function tI(i,e,n){let{slug:t}=e;const r=wl(),s=()=>r("sideMenuItemClicked"),a=()=>r("sideMenuItemClicked"),o=()=>r("sideMenuItemClicked"),c=()=>r("sideMenuItemClicked"),d=()=>r("sideMenuItemClicked"),_=()=>r("sideMenuItemClicked");return i.$$set=b=>{"slug"in b&&n(0,t=b.slug)},[t,r,s,a,o,c,d,_]}class ly extends st{constructor(e){super(),it(this,e,tI,eI,rt,{slug:0})}}function nI(i){let e,n,t;return n=new ly({props:{slug:i[0]}}),n.$on("sideMenuItemClicked",i[1]),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","hidden w-64 h-full flex-col md:flex shrink-0")},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,[s]){const a={};s&1&&(a.slug=r[0]),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function rI(i,e,n){let{slug:t}=e;function r(s){Ht.call(this,i,s)}return i.$$set=s=>{"slug"in s&&n(0,t=s.slug)},[t,r]}class sI extends st{constructor(e){super(),it(this,e,rI,nI,rt,{slug:0})}}function iI(i){let e,n,t;return n=new ly({props:{slug:i[1]}}),n.$on("sideMenuItemClicked",i[2]),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","absolute left-0 z-20 flex h-full w-64 flex-col transition-all md:hidden shrink-0 bg-background svelte-v8wrex"),cr(e,"menuClosed",i[0])},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,[s]){const a={};s&2&&(a.slug=r[1]),n.$set(a),(!t||s&1)&&cr(e,"menuClosed",r[0])},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function oI(i,e,n){let{menuClosed:t}=e,{slug:r}=e;function s(a){Ht.call(this,i,a)}return i.$$set=a=>{"menuClosed"in a&&n(0,t=a.menuClosed),"slug"in a&&n(1,r=a.slug)},[t,r,s]}class aI extends st{constructor(e){super(),it(this,e,oI,iI,rt,{menuClosed:0,slug:1})}}function lI(i){let e,n,t,r;return e=new sI({props:{slug:i[1]}}),e.$on("sideMenuItemClicked",i[2]),t=new aI({props:{menuClosed:i[0],slug:i[1]}}),t.$on("sideMenuItemClicked",i[2]),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,[a]){const o={};a&2&&(o.slug=s[1]),e.$set(o);const c={};a&1&&(c.menuClosed=s[0]),a&2&&(c.slug=s[1]),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function cI(i,e,n){let{menuClosed:t}=e,{slug:r}=e;const s=()=>n(0,t=!0);return i.$$set=a=>{"menuClosed"in a&&n(0,t=a.menuClosed),"slug"in a&&n(1,r=a.slug)},[t,r,s]}class uI extends st{constructor(e){super(),it(this,e,cI,lI,rt,{menuClosed:0,slug:1})}}const ep=Symbol.for("svelte-maplibre");function Sl(){return di(ep)}function fI(i){let e=new WeakMap;return n=>{var a;let t=e.get(n.originalEvent);if(t!==void 0)return t;let s=(a=n.target.queryRenderedFeatures(n.point).find(o=>{var c;return(c=i.get(o.layer.id))==null?void 0:c.interactive}))==null?void 0:a.layer.id;return e.set(n.originalEvent,s),s}}function hI(){let i=new Map;return Si(ep,{map:hr(null),source:Sa(null),layer:Sa(null),popupTarget:Sa(null),cluster:hr(),loadedImages:hr(new Set),minzoom:hr(0),maxzoom:hr(24),layerEvent:hr(null),layerInfo:i,eventTopMost:fI(i)})}function dg(i){return{subscribe:i.subscribe}}function dI({key:i,setPopupTarget:e=!1,setCluster:n=!1,setMouseEvent:t=!1}){let r=Sl(),s=hr(null),a=dg(s),o={...r,[i]:dg(s)};if(e&&(o.popupTarget=a),t){let c=hr(null);o.layerEvent=c,r.layerEvent=c}return n&&(o.cluster=hr()),Si(ep,o),{...r,self:s}}function pI(){return dI({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function mI(i){return"layerType"in i&&i.layerType==="deckgl"}var cy={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.2.0/LICENSE.txt
 */(function(i,e){(function(n,t){i.exports=t()})(Rw,function(){var n={},t={};function r(a,o,c){if(t[a]=c,a==="index"){var d="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",_={};return t.shared(_),t.index(n,_),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),n}}r("shared",["exports"],function(a){function o(f,l,h,m){return new(h||(h=Promise))(function(v,w){function k(O){try{M(m.next(O))}catch(H){w(H)}}function I(O){try{M(m.throw(O))}catch(H){w(H)}}function M(O){var H;O.done?v(O.value):(H=O.value,H instanceof h?H:new h(function(K){K(H)})).then(k,I)}M((m=m.apply(f,l||[])).next())})}function c(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}typeof SuppressedError=="function"&&SuppressedError;var d=_;function _(f,l){this.x=f,this.y=l}_.prototype={clone:function(){return new _(this.x,this.y)},add:function(f){return this.clone()._add(f)},sub:function(f){return this.clone()._sub(f)},multByPoint:function(f){return this.clone()._multByPoint(f)},divByPoint:function(f){return this.clone()._divByPoint(f)},mult:function(f){return this.clone()._mult(f)},div:function(f){return this.clone()._div(f)},rotate:function(f){return this.clone()._rotate(f)},rotateAround:function(f,l){return this.clone()._rotateAround(f,l)},matMult:function(f){return this.clone()._matMult(f)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(f){return this.x===f.x&&this.y===f.y},dist:function(f){return Math.sqrt(this.distSqr(f))},distSqr:function(f){var l=f.x-this.x,h=f.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith:function(f){return this.angleWithSep(f.x,f.y)},angleWithSep:function(f,l){return Math.atan2(this.x*l-this.y*f,this.x*f+this.y*l)},_matMult:function(f){var l=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=l,this},_add:function(f){return this.x+=f.x,this.y+=f.y,this},_sub:function(f){return this.x-=f.x,this.y-=f.y,this},_mult:function(f){return this.x*=f,this.y*=f,this},_div:function(f){return this.x/=f,this.y/=f,this},_multByPoint:function(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint:function(f){return this.x/=f.x,this.y/=f.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var f=this.y;return this.y=this.x,this.x=-f,this},_rotate:function(f){var l=Math.cos(f),h=Math.sin(f),m=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=m,this},_rotateAround:function(f,l){var h=Math.cos(f),m=Math.sin(f),v=l.y+m*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-m*(this.y-l.y),this.y=v,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},_.convert=function(f){return f instanceof _?f:Array.isArray(f)?new _(f[0],f[1]):f};var b=c(d),x=P;function P(f,l,h,m){this.cx=3*f,this.bx=3*(h-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=l,this.p2x=h,this.p2y=m}P.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,l){if(l===void 0&&(l=1e-6),f<0)return 0;if(f>1)return 1;for(var h=f,m=0;m<8;m++){var v=this.sampleCurveX(h)-f;if(Math.abs(v)<l)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=v/w}var k=0,I=1;for(h=f,m=0;m<20&&(v=this.sampleCurveX(h),!(Math.abs(v-f)<l));m++)f>v?k=h:I=h,h=.5*(I-k)+k;return h},solve:function(f,l){return this.sampleCurveY(this.solveCurveX(f,l))}};var L=c(x);let D,B;function Z(){return D==null&&(D=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),D}function W(){if(B==null&&(B=!1,Z())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<5*5;m++){const v=4*m;l.fillStyle=`rgb(${v},${v+1},${v+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}const h=l.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&h[m]!==m){B=!0;break}}}return B||!1}function Q(f,l,h,m){const v=new L(f,l,h,m);return w=>v.solve(w)}const ve=Q(.25,.1,.25,1);function re(f,l,h){return Math.min(h,Math.max(l,f))}function ce(f,l,h){const m=h-l,v=((f-l)%m+m)%m+l;return v===l?h:v}function ge(f,...l){for(const h of l)for(const m in h)f[m]=h[m];return f}let le=1;function G(f,l,h){const m={};for(const v in f)m[v]=l.call(this,f[v],v,f);return m}function ee(f,l,h){const m={};for(const v in f)l.call(this,f[v],v,f)&&(m[v]=f[v]);return m}function fe(f){return Array.isArray(f)?f.map(fe):typeof f=="object"&&f?G(f,fe):f}const $e={};function he(f){$e[f]||(typeof console<"u"&&console.warn(f),$e[f]=!0)}function ke(f,l,h){return(h.y-f.y)*(l.x-f.x)>(l.y-f.y)*(h.x-f.x)}function Ue(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let Ie=null;function nt(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ct(f,l,h,m,v){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(f,{timestamp:0});try{const k=w==null?void 0:w.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const I=k.startsWith("BGR"),M=new Uint8ClampedArray(m*v*4);if(yield w.copyTo(M,function(O,H,K,J,se){const pe=4*Math.max(-H,0),be=(Math.max(0,K)-K)*J*4+pe,Ee=4*J,ze=Math.max(0,H),Ke=Math.max(0,K);return{rect:{x:ze,y:Ke,width:Math.min(O.width,H+J)-ze,height:Math.min(O.height,K+se)-Ke},layout:[{offset:be,stride:Ee}]}}(f,l,h,m,v)),I)for(let O=0;O<M.length;O+=4){const H=M[O];M[O]=M[O+2],M[O+2]=H}return M}finally{w.close()}})}let mt,Dt;const zt="AbortError";function Yt(){return new Error(zt)}const mn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function cn(f){return mn.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const It="global-dispatcher";class At extends Error{constructor(l,h,m,v){super(`AJAXError: ${h} (${l}): ${m}`),this.status=l,this.statusText=h,this.url=m,this.body=v}}const un=()=>Ue(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,fn=function(f,l){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const m=cn(f.url);if(m)return m(f,l);if(Ue(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:It},l)}if(!(/^file:/.test(h=f.url)||/^file:/.test(un())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,v){return o(this,void 0,void 0,function*(){const w=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:un(),signal:v.signal});m.type==="json"&&w.headers.set("Accept","application/json");const k=yield fetch(w);if(!k.ok){const O=yield k.blob();throw new At(k.status,k.statusText,m.url,O)}let I;I=m.type==="arrayBuffer"||m.type==="image"?k.arrayBuffer():m.type==="json"?k.json():k.text();const M=yield I;if(v.signal.aborted)throw Yt();return{data:M,cacheControl:k.headers.get("Cache-Control"),expires:k.headers.get("Expires")}})}(f,l);if(Ue(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:It},l)}var h;return function(m,v){return new Promise((w,k)=>{const I=new XMLHttpRequest;I.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(I.responseType="arraybuffer");for(const M in m.headers)I.setRequestHeader(M,m.headers[M]);m.type==="json"&&(I.responseType="text",I.setRequestHeader("Accept","application/json")),I.withCredentials=m.credentials==="include",I.onerror=()=>{k(new Error(I.statusText))},I.onload=()=>{if(!v.signal.aborted)if((I.status>=200&&I.status<300||I.status===0)&&I.response!==null){let M=I.response;if(m.type==="json")try{M=JSON.parse(I.response)}catch(O){return void k(O)}w({data:M,cacheControl:I.getResponseHeader("Cache-Control"),expires:I.getResponseHeader("Expires")})}else{const M=new Blob([I.response],{type:I.getResponseHeader("Content-Type")});k(new At(I.status,I.statusText,m.url,M))}},v.signal.addEventListener("abort",()=>{I.abort(),k(Yt())}),I.send(m.body)})}(f,l)};function ot(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const l=new URL(f),h=window.location;return l.protocol===h.protocol&&l.host===h.host}function qt(f,l,h){h[f]&&h[f].indexOf(l)!==-1||(h[f]=h[f]||[],h[f].push(l))}function wt(f,l,h){if(h&&h[f]){const m=h[f].indexOf(l);m!==-1&&h[f].splice(m,1)}}class xt{constructor(l,h={}){ge(this,h),this.type=l}}class tt extends xt{constructor(l,h={}){super("error",ge({error:l},h))}}class yn{on(l,h){return this._listeners=this._listeners||{},qt(l,h,this._listeners),this}off(l,h){return wt(l,h,this._listeners),wt(l,h,this._oneTimeListeners),this}once(l,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},qt(l,h,this._oneTimeListeners),this):new Promise(m=>this.once(l,m))}fire(l,h){typeof l=="string"&&(l=new xt(l,h||{}));const m=l.type;if(this.listens(m)){l.target=this;const v=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const I of v)I.call(this,l);const w=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const I of w)wt(m,I,this._oneTimeListeners),I.call(this,l);const k=this._eventedParent;k&&(ge(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(l))}else l instanceof tt&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,h){return this._eventedParent=l,this._eventedParentData=h,this}}var Ze={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const hn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Bn(f,l){const h={};for(const m in f)m!=="ref"&&(h[m]=f[m]);return hn.forEach(m=>{m in l&&(h[m]=l[m])}),h}function kn(f,l){if(Array.isArray(f)){if(!Array.isArray(l)||f.length!==l.length)return!1;for(let h=0;h<f.length;h++)if(!kn(f[h],l[h]))return!1;return!0}if(typeof f=="object"&&f!==null&&l!==null){if(typeof l!="object"||Object.keys(f).length!==Object.keys(l).length)return!1;for(const h in f)if(!kn(f[h],l[h]))return!1;return!0}return f===l}function Vn(f,l){f.push(l)}function ir(f,l,h){Vn(h,{command:"addSource",args:[f,l[f]]})}function _s(f,l,h){Vn(l,{command:"removeSource",args:[f]}),h[f]=!0}function Rs(f,l,h,m){_s(f,h,m),ir(f,l,h)}function gs(f,l,h){let m;for(m in f[h])if(Object.prototype.hasOwnProperty.call(f[h],m)&&m!=="data"&&!kn(f[h][m],l[h][m]))return!1;for(m in l[h])if(Object.prototype.hasOwnProperty.call(l[h],m)&&m!=="data"&&!kn(f[h][m],l[h][m]))return!1;return!0}function Kr(f,l,h,m,v,w){f=f||{},l=l||{};for(const k in f)Object.prototype.hasOwnProperty.call(f,k)&&(kn(f[k],l[k])||h.push({command:w,args:[m,k,l[k],v]}));for(const k in l)Object.prototype.hasOwnProperty.call(l,k)&&!Object.prototype.hasOwnProperty.call(f,k)&&(kn(f[k],l[k])||h.push({command:w,args:[m,k,l[k],v]}))}function Os(f){return f.id}function Qs(f,l){return f[l.id]=l,f}class Ne{constructor(l,h,m,v){this.message=(l?`${l}: `:"")+m,v&&(this.identifier=v),h!=null&&h.__line__&&(this.line=h.__line__)}}function Nr(f,...l){for(const h of l)for(const m in h)f[m]=h[m];return f}class Vr extends Error{constructor(l,h){super(h),this.message=h,this.key=l}}class js{constructor(l,h=[]){this.parent=l,this.bindings={};for(const[m,v]of h)this.bindings[m]=v}concat(l){return new js(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const pi={kind:"null"},Ot={kind:"number"},An={kind:"string"},wn={kind:"boolean"},Ur={kind:"color"},Xr={kind:"object"},Cn={kind:"value"},Fs={kind:"collator"},qs={kind:"formatted"},jr={kind:"padding"},Pe={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function ie(f,l){return{kind:"array",itemType:f,N:l}}function ye(f){if(f.kind==="array"){const l=ye(f.itemType);return typeof f.N=="number"?`array<${l}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${l}>`}return f.kind}const Me=[pi,Ot,An,wn,Ur,qs,Xr,ie(Cn),jr,Pe,te];function Fe(f,l){if(l.kind==="error")return null;if(f.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Fe(f.itemType,l.itemType))&&(typeof f.N!="number"||f.N===l.N))return null}else{if(f.kind===l.kind)return null;if(f.kind==="value"){for(const h of Me)if(!Fe(h,l))return null}}return`Expected ${ye(f)} but found ${ye(l)} instead.`}function Ve(f,l){return l.some(h=>h.kind===f.kind)}function We(f,l){return l.some(h=>h==="null"?f===null:h==="array"?Array.isArray(f):h==="object"?f&&!Array.isArray(f)&&typeof f=="object":h===typeof f)}function Le(f,l){return f.kind==="array"&&l.kind==="array"?f.itemType.kind===l.itemType.kind&&typeof f.N=="number":f.kind===l.kind}const Je=.96422,yt=.82521,ht=4/29,ut=6/29,pn=3*ut*ut,_n=ut*ut*ut,In=Math.PI/180,xn=180/Math.PI;function Fn(f){return(f%=360)<0&&(f+=360),f}function Wn([f,l,h,m]){let v,w;const k=wr((.2225045*(f=nr(f))+.7168786*(l=nr(l))+.0606169*(h=nr(h)))/1);f===l&&l===h?v=w=k:(v=wr((.4360747*f+.3850649*l+.1430804*h)/Je),w=wr((.0139322*f+.0971045*l+.7141733*h)/yt));const I=116*k-16;return[I<0?0:I,500*(v-k),200*(k-w),m]}function nr(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function wr(f){return f>_n?Math.pow(f,1/3):f/pn+ht}function Mn([f,l,h,m]){let v=(f+16)/116,w=isNaN(l)?v:v+l/500,k=isNaN(h)?v:v-h/200;return v=1*Ar(v),w=Je*Ar(w),k=yt*Ar(k),[or(3.1338561*w-1.6168667*v-.4906146*k),or(-.9787684*w+1.9161415*v+.033454*k),or(.0719453*w-.2289914*v+1.4052427*k),m]}function or(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Ar(f){return f>ut?f*f*f:pn*(f-ht)}function Qr(f){return parseInt(f.padEnd(2,f),16)/255}function Bs(f,l){return dr(l?f/100:f,0,1)}function dr(f,l,h){return Math.min(Math.max(l,f),h)}function po(f){return!f.some(Number.isNaN)}const lh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Zn{constructor(l,h,m,v=1,w=!0){this.r=l,this.g=h,this.b=m,this.a=v,w||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[l,h,m,v]))}static parse(l){if(l instanceof Zn)return l;if(typeof l!="string")return;const h=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=lh[m];if(v){const[k,I,M]=v;return[k/255,I/255,M/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const k=m.length<6?1:2;let I=1;return[Qr(m.slice(I,I+=k)),Qr(m.slice(I,I+=k)),Qr(m.slice(I,I+=k)),Qr(m.slice(I,I+k)||"ff")]}if(m.startsWith("rgb")){const k=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[I,M,O,H,K,J,se,pe,be,Ee,ze,Ke]=k,Re=[H||" ",se||" ",Ee].join("");if(Re==="  "||Re==="  /"||Re===",,"||Re===",,,"){const Ge=[O,J,be].join(""),ft=Ge==="%%%"?100:Ge===""?255:0;if(ft){const _t=[dr(+M/ft,0,1),dr(+K/ft,0,1),dr(+pe/ft,0,1),ze?Bs(+ze,Ke):1];if(po(_t))return _t}}return}}const w=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[k,I,M,O,H,K,J,se,pe]=w,be=[M||" ",H||" ",J].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Ee=[+I,dr(+O,0,100),dr(+K,0,100),se?Bs(+se,pe):1];if(po(Ee))return function([ze,Ke,Re,Ge]){function ft(_t){const Kt=(_t+ze/30)%12,rn=Ke*Math.min(Re,1-Re);return Re-rn*Math.max(-1,Math.min(Kt-3,9-Kt,1))}return ze=Fn(ze),Ke/=100,Re/=100,[ft(0),ft(8),ft(4),Ge]}(Ee)}}}(l);return h?new Zn(...h,!1):void 0}get rgb(){const{r:l,g:h,b:m,a:v}=this,w=v||1/0;return this.overwriteGetter("rgb",[l/w,h/w,m/w,v])}get hcl(){return this.overwriteGetter("hcl",function(l){const[h,m,v,w]=Wn(l),k=Math.sqrt(m*m+v*v);return[Math.round(1e4*k)?Fn(Math.atan2(v,m)*xn):NaN,k,h,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Wn(this.rgb))}overwriteGetter(l,h){return Object.defineProperty(this,l,{value:h}),h}toString(){const[l,h,m,v]=this.rgb;return`rgba(${[l,h,m].map(w=>Math.round(255*w)).join(",")},${v})`}}Zn.black=new Zn(0,0,0,1),Zn.white=new Zn(1,1,1,1),Zn.transparent=new Zn(0,0,0,0),Zn.red=new Zn(1,0,0,1);class Al{constructor(l,h,m){this.sensitivity=l?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,h){return this.collator.compare(l,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ml{constructor(l,h,m,v,w){this.text=l,this.image=h,this.scale=m,this.fontStack=v,this.textColor=w}}class Cs{constructor(l){this.sections=l}static fromString(l){return new Cs([new Ml(l,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof Cs?l:Cs.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class Ss{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Ss)return l;if(typeof l=="number")return new Ss([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const h of l)if(typeof h!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Ss(l)}}toString(){return JSON.stringify(this.values)}}const vu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class es{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof es)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let h=0;h<l.length;h+=2){const m=l[h],v=l[h+1];if(typeof m!="string"||!vu.has(m)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new es(l)}}toString(){return JSON.stringify(this.values)}}class Ns{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Ns({name:l,available:!1}):null}}function yu(f,l,h,m){return typeof f=="number"&&f>=0&&f<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof h=="number"&&h>=0&&h<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[f,l,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[f,l,h,m]:[f,l,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function mi(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Zn||f instanceof Al||f instanceof Cs||f instanceof Ss||f instanceof es||f instanceof Ns)return!0;if(Array.isArray(f)){for(const l of f)if(!mi(l))return!1;return!0}if(typeof f=="object"){for(const l in f)if(!mi(f[l]))return!1;return!0}return!1}function xr(f){if(f===null)return pi;if(typeof f=="string")return An;if(typeof f=="boolean")return wn;if(typeof f=="number")return Ot;if(f instanceof Zn)return Ur;if(f instanceof Al)return Fs;if(f instanceof Cs)return qs;if(f instanceof Ss)return jr;if(f instanceof es)return te;if(f instanceof Ns)return Pe;if(Array.isArray(f)){const l=f.length;let h;for(const m of f){const v=xr(m);if(h){if(h===v)continue;h=Cn;break}h=v}return ie(h||Cn,l)}return Xr}function Go(f){const l=typeof f;return f===null?"":l==="string"||l==="number"||l==="boolean"?String(f):f instanceof Zn||f instanceof Cs||f instanceof Ss||f instanceof es||f instanceof Ns?f.toString():JSON.stringify(f)}class Hi{constructor(l,h){this.type=l,this.value=h}static parse(l,h){if(l.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!mi(l[1]))return h.error("invalid value");const m=l[1];let v=xr(m);const w=h.expectedType;return v.kind!=="array"||v.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(v=w),new Hi(v,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class pr{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}const Gi={string:An,number:Ot,boolean:wn,object:Xr};class Hs{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");let m,v=1;const w=l[0];if(w==="array"){let I,M;if(l.length>2){const O=l[1];if(typeof O!="string"||!(O in Gi)||O==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);I=Gi[O],v++}else I=Cn;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return h.error('The length argument to "array" must be a positive integer literal',2);M=l[2],v++}m=ie(I,M)}else{if(!Gi[w])throw new Error(`Types doesn't contain name = ${w}`);m=Gi[w]}const k=[];for(;v<l.length;v++){const I=h.parse(l[v],v,Cn);if(!I)return null;k.push(I)}return new Hs(m,k)}evaluate(l){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(l);if(!Fe(this.type,xr(m)))return m;if(h===this.args.length-1)throw new pr(`Expected value to be of type ${ye(this.type)}, but found ${ye(xr(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Ra={"to-boolean":wn,"to-color":Ur,"to-number":Ot,"to-string":An};class ei{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const m=l[0];if(!Ra[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return h.error("Expected one argument.");const v=Ra[m],w=[];for(let k=1;k<l.length;k++){const I=h.parse(l[k],k,Cn);if(!I)return null;w.push(I)}return new ei(v,w)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let h,m;for(const v of this.args){if(h=v.evaluate(l),m=null,h instanceof Zn)return h;if(typeof h=="string"){const w=l.parseColor(h);if(w)return w}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:yu(h[0],h[1],h[2],h[3]),!m))return new Zn(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new pr(m||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const m of this.args){h=m.evaluate(l);const v=Ss.parse(h);if(v)return v}throw new pr(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const m of this.args){h=m.evaluate(l);const v=es.parse(h);if(v)return v}throw new pr(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const m of this.args){if(h=m.evaluate(l),h===null)return 0;const v=Number(h);if(!isNaN(v))return v}throw new pr(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Cs.fromString(Go(this.args[0].evaluate(l)));case"resolvedImage":return Ns.fromString(Go(this.args[0].evaluate(l)));default:return Go(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Dl=["Unknown","Point","LineString","Polygon"];class mo{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Dl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let h=this._parseColorCache[l];return h||(h=this._parseColorCache[l]=Zn.parse(l)),h}}class qn{constructor(l,h,m=[],v,w=new js,k=[]){this.registry=l,this.path=m,this.key=m.map(I=>`[${I}]`).join(""),this.scope=w,this.errors=k,this.expectedType=v,this._isConstant=h}parse(l,h,m,v,w={}){return h?this.concat(h,m,v)._parse(l,w):this._parse(l,w)}_parse(l,h){function m(v,w,k){return k==="assert"?new Hs(w,[v]):k==="coerce"?new ei(w,[v]):v}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=l[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[v];if(w){let k=w.parse(l,this);if(!k)return null;if(this.expectedType){const I=this.expectedType,M=k.type;if(I.kind!=="string"&&I.kind!=="number"&&I.kind!=="boolean"&&I.kind!=="object"&&I.kind!=="array"||M.kind!=="value")if(I.kind!=="color"&&I.kind!=="formatted"&&I.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string")if(I.kind!=="padding"||M.kind!=="value"&&M.kind!=="number"&&M.kind!=="array")if(I.kind!=="variableAnchorOffsetCollection"||M.kind!=="value"&&M.kind!=="array"){if(this.checkSubtype(I,M))return null}else k=m(k,I,h.typeAnnotation||"coerce");else k=m(k,I,h.typeAnnotation||"coerce");else k=m(k,I,h.typeAnnotation||"coerce");else k=m(k,I,h.typeAnnotation||"assert")}if(!(k instanceof Hi)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const I=new mo;try{k=new Hi(k.type,k.evaluate(I))}catch(M){return this.error(M.message),null}}return k}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,h,m){const v=typeof l=="number"?this.path.concat(l):this.path,w=m?this.scope.concat(m):this.scope;return new qn(this.registry,this._isConstant,v,h||null,w,this.errors)}error(l,...h){const m=`${this.key}${h.map(v=>`[${v}]`).join("")}`;this.errors.push(new Vr(m,l))}checkSubtype(l,h){const m=Fe(l,h);return m&&this.error(m),m}}class Oa{constructor(l,h){this.type=h.type,this.bindings=[].concat(l),this.result=h}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const h of this.bindings)l(h[1]);l(this.result)}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const m=[];for(let w=1;w<l.length-1;w+=2){const k=l[w];if(typeof k!="string")return h.error(`Expected string, but found ${typeof k} instead.`,w);if(/[^a-zA-Z0-9_]/.test(k))return h.error("Variable names must contain only alphanumeric characters or '_'.",w);const I=h.parse(l[w+1],w+1);if(!I)return null;m.push([k,I])}const v=h.parse(l[l.length-1],l.length-1,h.expectedType,m);return v?new Oa(m,v):null}outputDefined(){return this.result.outputDefined()}}class _o{constructor(l,h){this.type=h.type,this.name=l,this.boundExpression=h}static parse(l,h){if(l.length!==2||typeof l[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const m=l[1];return h.scope.has(m)?new _o(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class zl{constructor(l,h,m){this.type=l,this.index=h,this.input=m}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,Ot),v=h.parse(l[2],2,ie(h.expectedType||Cn));return m&&v?new zl(v.type.itemType,m,v):null}evaluate(l){const h=this.index.evaluate(l),m=this.input.evaluate(l);if(h<0)throw new pr(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new pr(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new pr(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class Fa{constructor(l,h){this.type=wn,this.needle=l,this.haystack=h}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,Cn),v=h.parse(l[2],2,Cn);return m&&v?Ve(m.type,[wn,An,Ot,pi,Cn])?new Fa(m,v):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(m.type)} instead`):null}evaluate(l){const h=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!We(h,["boolean","string","number","null"]))throw new pr(`Expected first argument to be of type boolean, string, number or null, but found ${ye(xr(h))} instead.`);if(!We(m,["string","array"]))throw new pr(`Expected second argument to be of type array or string, but found ${ye(xr(m))} instead.`);return m.indexOf(h)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Zo{constructor(l,h,m){this.type=Ot,this.needle=l,this.haystack=h,this.fromIndex=m}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,Cn),v=h.parse(l[2],2,Cn);if(!m||!v)return null;if(!Ve(m.type,[wn,An,Ot,pi,Cn]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${ye(m.type)} instead`);if(l.length===4){const w=h.parse(l[3],3,Ot);return w?new Zo(m,v,w):null}return new Zo(m,v)}evaluate(l){const h=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!We(h,["boolean","string","number","null"]))throw new pr(`Expected first argument to be of type boolean, string, number or null, but found ${ye(xr(h))} instead.`);if(!We(m,["string","array"]))throw new pr(`Expected second argument to be of type array or string, but found ${ye(xr(m))} instead.`);if(this.fromIndex){const v=this.fromIndex.evaluate(l);return m.indexOf(h,v)}return m.indexOf(h)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class Ll{constructor(l,h,m,v,w,k){this.inputType=l,this.type=h,this.input=m,this.cases=v,this.outputs=w,this.otherwise=k}static parse(l,h){if(l.length<5)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return h.error("Expected an even number of arguments.");let m,v;h.expectedType&&h.expectedType.kind!=="value"&&(v=h.expectedType);const w={},k=[];for(let O=2;O<l.length-1;O+=2){let H=l[O];const K=l[O+1];Array.isArray(H)||(H=[H]);const J=h.concat(O);if(H.length===0)return J.error("Expected at least one branch label.");for(const pe of H){if(typeof pe!="number"&&typeof pe!="string")return J.error("Branch labels must be numbers or strings.");if(typeof pe=="number"&&Math.abs(pe)>Number.MAX_SAFE_INTEGER)return J.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof pe=="number"&&Math.floor(pe)!==pe)return J.error("Numeric branch labels must be integer values.");if(m){if(J.checkSubtype(m,xr(pe)))return null}else m=xr(pe);if(w[String(pe)]!==void 0)return J.error("Branch labels must be unique.");w[String(pe)]=k.length}const se=h.parse(K,O,v);if(!se)return null;v=v||se.type,k.push(se)}const I=h.parse(l[1],1,Cn);if(!I)return null;const M=h.parse(l[l.length-1],l.length-1,v);return M?I.type.kind!=="value"&&h.concat(1).checkSubtype(m,I.type)?null:new Ll(m,v,I,w,k,M):null}evaluate(l){const h=this.input.evaluate(l);return(xr(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Ba{constructor(l,h,m){this.type=l,this.branches=h,this.otherwise=m}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);const v=[];for(let k=1;k<l.length-1;k+=2){const I=h.parse(l[k],k,wn);if(!I)return null;const M=h.parse(l[k+1],k+1,m);if(!M)return null;v.push([I,M]),m=m||M.type}const w=h.parse(l[l.length-1],l.length-1,m);if(!w)return null;if(!m)throw new Error("Can't infer output type");return new Ba(m,v,w)}evaluate(l){for(const[h,m]of this.branches)if(h.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[h,m]of this.branches)l(h),l(m);l(this.otherwise)}outputDefined(){return this.branches.every(([l,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Wo{constructor(l,h,m,v){this.type=l,this.input=h,this.beginIndex=m,this.endIndex=v}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,Cn),v=h.parse(l[2],2,Ot);if(!m||!v)return null;if(!Ve(m.type,[ie(Cn),An,Cn]))return h.error(`Expected first argument to be of type array or string, but found ${ye(m.type)} instead`);if(l.length===4){const w=h.parse(l[3],3,Ot);return w?new Wo(m.type,m,v,w):null}return new Wo(m.type,m,v)}evaluate(l){const h=this.input.evaluate(l),m=this.beginIndex.evaluate(l);if(!We(h,["string","array"]))throw new pr(`Expected first argument to be of type array or string, but found ${ye(xr(h))} instead.`);if(this.endIndex){const v=this.endIndex.evaluate(l);return h.slice(m,v)}return h.slice(m)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Na(f,l){const h=f.length-1;let m,v,w=0,k=h,I=0;for(;w<=k;)if(I=Math.floor((w+k)/2),m=f[I],v=f[I+1],m<=l){if(I===h||l<v)return I;w=I+1}else{if(!(m>l))throw new pr("Input is not a number.");k=I-1}return 0}class Ko{constructor(l,h,m){this.type=l,this.input=h,this.labels=[],this.outputs=[];for(const[v,w]of m)this.labels.push(v),this.outputs.push(w)}static parse(l,h){if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(l[1],1,Ot);if(!m)return null;const v=[];let w=null;h.expectedType&&h.expectedType.kind!=="value"&&(w=h.expectedType);for(let k=1;k<l.length;k+=2){const I=k===1?-1/0:l[k],M=l[k+1],O=k,H=k+1;if(typeof I!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(v.length&&v[v.length-1][0]>=I)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const K=h.parse(M,H,w);if(!K)return null;w=w||K.type,v.push([I,K])}return new Ko(w,m,v)}evaluate(l){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(l);const v=this.input.evaluate(l);if(v<=h[0])return m[0].evaluate(l);const w=h.length;return v>=h[w-1]?m[w-1].evaluate(l):m[Na(h,v)].evaluate(l)}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function ch(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var uh=Rl;function Rl(f,l,h,m){this.cx=3*f,this.bx=3*(h-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=l,this.p2x=h,this.p2y=m}Rl.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,l){if(l===void 0&&(l=1e-6),f<0)return 0;if(f>1)return 1;for(var h=f,m=0;m<8;m++){var v=this.sampleCurveX(h)-f;if(Math.abs(v)<l)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=v/w}var k=0,I=1;for(h=f,m=0;m<20&&(v=this.sampleCurveX(h),!(Math.abs(v-f)<l));m++)f>v?k=h:I=h,h=.5*(I-k)+k;return h},solve:function(f,l){return this.sampleCurveY(this.solveCurveX(f,l))}};var bu=ch(uh);function Zi(f,l,h){return f+h*(l-f)}function Va(f,l,h){return f.map((m,v)=>Zi(m,l[v],h))}const ls={number:Zi,color:function(f,l,h,m="rgb"){switch(m){case"rgb":{const[v,w,k,I]=Va(f.rgb,l.rgb,h);return new Zn(v,w,k,I,!1)}case"hcl":{const[v,w,k,I]=f.hcl,[M,O,H,K]=l.hcl;let J,se;if(isNaN(v)||isNaN(M))isNaN(v)?isNaN(M)?J=NaN:(J=M,k!==1&&k!==0||(se=O)):(J=v,H!==1&&H!==0||(se=w));else{let Ke=M-v;M>v&&Ke>180?Ke-=360:M<v&&v-M>180&&(Ke+=360),J=v+h*Ke}const[pe,be,Ee,ze]=function([Ke,Re,Ge,ft]){return Ke=isNaN(Ke)?0:Ke*In,Mn([Ge,Math.cos(Ke)*Re,Math.sin(Ke)*Re,ft])}([J,se??Zi(w,O,h),Zi(k,H,h),Zi(I,K,h)]);return new Zn(pe,be,Ee,ze,!1)}case"lab":{const[v,w,k,I]=Mn(Va(f.lab,l.lab,h));return new Zn(v,w,k,I,!1)}}},array:Va,padding:function(f,l,h){return new Ss(Va(f.values,l.values,h))},variableAnchorOffsetCollection:function(f,l,h){const m=f.values,v=l.values;if(m.length!==v.length)throw new pr(`Cannot interpolate values of different length. from: ${f.toString()}, to: ${l.toString()}`);const w=[];for(let k=0;k<m.length;k+=2){if(m[k]!==v[k])throw new pr(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${m[k]}, to[${k}]: ${v[k]}`);w.push(m[k]);const[I,M]=m[k+1],[O,H]=v[k+1];w.push([Zi(I,O,h),Zi(M,H,h)])}return new es(w)}};class Ts{constructor(l,h,m,v,w){this.type=l,this.operator=h,this.interpolation=m,this.input=v,this.labels=[],this.outputs=[];for(const[k,I]of w)this.labels.push(k),this.outputs.push(I)}static interpolationFactor(l,h,m,v){let w=0;if(l.name==="exponential")w=Ol(h,l.base,m,v);else if(l.name==="linear")w=Ol(h,1,m,v);else if(l.name==="cubic-bezier"){const k=l.controlPoints;w=new bu(k[0],k[1],k[2],k[3]).solve(Ol(h,1,m,v))}return w}static parse(l,h){let[m,v,w,...k]=l;if(!Array.isArray(v)||v.length===0)return h.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const O=v[1];if(typeof O!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:O}}else{if(v[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const O=v.slice(1);if(O.length!==4||O.some(H=>typeof H!="number"||H<0||H>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:O}}}if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(w=h.parse(w,2,Ot),!w)return null;const I=[];let M=null;m==="interpolate-hcl"||m==="interpolate-lab"?M=Ur:h.expectedType&&h.expectedType.kind!=="value"&&(M=h.expectedType);for(let O=0;O<k.length;O+=2){const H=k[O],K=k[O+1],J=O+3,se=O+4;if(typeof H!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',J);if(I.length&&I[I.length-1][0]>=H)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',J);const pe=h.parse(K,se,M);if(!pe)return null;M=M||pe.type,I.push([H,pe])}return Le(M,Ot)||Le(M,Ur)||Le(M,jr)||Le(M,te)||Le(M,ie(Ot))?new Ts(M,m,v,w,I):h.error(`Type ${ye(M)} is not interpolatable.`)}evaluate(l){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(l);const v=this.input.evaluate(l);if(v<=h[0])return m[0].evaluate(l);const w=h.length;if(v>=h[w-1])return m[w-1].evaluate(l);const k=Na(h,v),I=Ts.interpolationFactor(this.interpolation,v,h[k],h[k+1]),M=m[k].evaluate(l),O=m[k+1].evaluate(l);switch(this.operator){case"interpolate":return ls[this.type.kind](M,O,I);case"interpolate-hcl":return ls.color(M,O,I,"hcl");case"interpolate-lab":return ls.color(M,O,I,"lab")}}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function Ol(f,l,h,m){const v=m-h,w=f-h;return v===0?0:l===1?w/v:(Math.pow(l,w)-1)/(Math.pow(l,v)-1)}class Ua{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expectected at least one argument.");let m=null;const v=h.expectedType;v&&v.kind!=="value"&&(m=v);const w=[];for(const I of l.slice(1)){const M=h.parse(I,1+w.length,m,void 0,{typeAnnotation:"omit"});if(!M)return null;m=m||M.type,w.push(M)}if(!m)throw new Error("No output type");const k=v&&w.some(I=>Fe(v,I.type));return new Ua(k?Cn:m,w)}evaluate(l){let h,m=null,v=0;for(const w of this.args)if(v++,m=w.evaluate(l),m&&m instanceof Ns&&!m.available&&(h||(h=m.name),m=null,v===this.args.length&&(m=h)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function Fl(f,l){return f==="=="||f==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function Bl(f,l,h,m){return m.compare(l,h)===0}function go(f,l,h){const m=f!=="=="&&f!=="!=";return class uy{constructor(w,k,I){this.type=wn,this.lhs=w,this.rhs=k,this.collator=I,this.hasUntypedArgument=w.type.kind==="value"||k.type.kind==="value"}static parse(w,k){if(w.length!==3&&w.length!==4)return k.error("Expected two or three arguments.");const I=w[0];let M=k.parse(w[1],1,Cn);if(!M)return null;if(!Fl(I,M.type))return k.concat(1).error(`"${I}" comparisons are not supported for type '${ye(M.type)}'.`);let O=k.parse(w[2],2,Cn);if(!O)return null;if(!Fl(I,O.type))return k.concat(2).error(`"${I}" comparisons are not supported for type '${ye(O.type)}'.`);if(M.type.kind!==O.type.kind&&M.type.kind!=="value"&&O.type.kind!=="value")return k.error(`Cannot compare types '${ye(M.type)}' and '${ye(O.type)}'.`);m&&(M.type.kind==="value"&&O.type.kind!=="value"?M=new Hs(O.type,[M]):M.type.kind!=="value"&&O.type.kind==="value"&&(O=new Hs(M.type,[O])));let H=null;if(w.length===4){if(M.type.kind!=="string"&&O.type.kind!=="string"&&M.type.kind!=="value"&&O.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(H=k.parse(w[3],3,Fs),!H)return null}return new uy(M,O,H)}evaluate(w){const k=this.lhs.evaluate(w),I=this.rhs.evaluate(w);if(m&&this.hasUntypedArgument){const M=xr(k),O=xr(I);if(M.kind!==O.kind||M.kind!=="string"&&M.kind!=="number")throw new pr(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${M.kind}, ${O.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const M=xr(k),O=xr(I);if(M.kind!=="string"||O.kind!=="string")return l(w,k,I)}return this.collator?h(w,k,I,this.collator.evaluate(w)):l(w,k,I)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const fh=go("==",function(f,l,h){return l===h},Bl),$u=go("!=",function(f,l,h){return l!==h},function(f,l,h,m){return!Bl(0,l,h,m)}),wu=go("<",function(f,l,h){return l<h},function(f,l,h,m){return m.compare(l,h)<0}),hh=go(">",function(f,l,h){return l>h},function(f,l,h,m){return m.compare(l,h)>0}),dh=go("<=",function(f,l,h){return l<=h},function(f,l,h,m){return m.compare(l,h)<=0}),ph=go(">=",function(f,l,h){return l>=h},function(f,l,h,m){return m.compare(l,h)>=0});class ja{constructor(l,h,m){this.type=Fs,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=h}static parse(l,h){if(l.length!==2)return h.error("Expected one argument.");const m=l[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");const v=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,wn);if(!v)return null;const w=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,wn);if(!w)return null;let k=null;return m.locale&&(k=h.parse(m.locale,1,An),!k)?null:new ja(v,w,k)}evaluate(l){return new Al(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class Nl{constructor(l,h,m,v,w){this.type=An,this.number=l,this.locale=h,this.currency=m,this.minFractionDigits=v,this.maxFractionDigits=w}static parse(l,h){if(l.length!==3)return h.error("Expected two arguments.");const m=h.parse(l[1],1,Ot);if(!m)return null;const v=l[2];if(typeof v!="object"||Array.isArray(v))return h.error("NumberFormat options argument must be an object.");let w=null;if(v.locale&&(w=h.parse(v.locale,1,An),!w))return null;let k=null;if(v.currency&&(k=h.parse(v.currency,1,An),!k))return null;let I=null;if(v["min-fraction-digits"]&&(I=h.parse(v["min-fraction-digits"],1,Ot),!I))return null;let M=null;return v["max-fraction-digits"]&&(M=h.parse(v["max-fraction-digits"],1,Ot),!M)?null:new Nl(m,w,k,I,M)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class qa{constructor(l){this.type=qs,this.sections=l}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const m=l[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");const v=[];let w=!1;for(let k=1;k<=l.length-1;++k){const I=l[k];if(w&&typeof I=="object"&&!Array.isArray(I)){w=!1;let M=null;if(I["font-scale"]&&(M=h.parse(I["font-scale"],1,Ot),!M))return null;let O=null;if(I["text-font"]&&(O=h.parse(I["text-font"],1,ie(An)),!O))return null;let H=null;if(I["text-color"]&&(H=h.parse(I["text-color"],1,Ur),!H))return null;const K=v[v.length-1];K.scale=M,K.font=O,K.textColor=H}else{const M=h.parse(l[k],1,Cn);if(!M)return null;const O=M.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,v.push({content:M,scale:null,font:null,textColor:null})}}return new qa(v)}evaluate(l){return new Cs(this.sections.map(h=>{const m=h.content.evaluate(l);return xr(m)===Pe?new Ml("",m,null,null,null):new Ml(Go(m),null,h.scale?h.scale.evaluate(l):null,h.font?h.font.evaluate(l).join(","):null,h.textColor?h.textColor.evaluate(l):null)}))}eachChild(l){for(const h of this.sections)l(h.content),h.scale&&l(h.scale),h.font&&l(h.font),h.textColor&&l(h.textColor)}outputDefined(){return!1}}class Vl{constructor(l){this.type=Pe,this.input=l}static parse(l,h){if(l.length!==2)return h.error("Expected two arguments.");const m=h.parse(l[1],1,An);return m?new Vl(m):h.error("No image name provided.")}evaluate(l){const h=this.input.evaluate(l),m=Ns.fromString(h);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(h)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class Xo{constructor(l){this.type=Ot,this.input=l}static parse(l,h){if(l.length!==2)return h.error(`Expected 1 argument, but found ${l.length-1} instead.`);const m=h.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${ye(m.type)} instead.`):new Xo(m):null}evaluate(l){const h=this.input.evaluate(l);if(typeof h=="string"||Array.isArray(h))return h.length;throw new pr(`Expected value to be of type string or array, but found ${ye(xr(h))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const Is=8192;function Hn(f,l){const h=(180+f[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,v=Math.pow(2,l.z);return[Math.round(h*v*Is),Math.round(m*v*Is)]}function Ul(f,l){const h=Math.pow(2,l.z);return[(v=(f[0]/Is+l.x)/h,360*v-180),(m=(f[1]/Is+l.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,v}function Jo(f,l){f[0]=Math.min(f[0],l[0]),f[1]=Math.min(f[1],l[1]),f[2]=Math.max(f[2],l[0]),f[3]=Math.max(f[3],l[1])}function Yo(f,l){return!(f[0]<=l[0]||f[2]>=l[2]||f[1]<=l[1]||f[3]>=l[3])}function mh(f,l,h){const m=f[0]-l[0],v=f[1]-l[1],w=f[0]-h[0],k=f[1]-h[1];return m*k-w*v==0&&m*w<=0&&v*k<=0}function Ha(f,l,h,m){return(v=[m[0]-h[0],m[1]-h[1]])[0]*(w=[l[0]-f[0],l[1]-f[1]])[1]-v[1]*w[0]!=0&&!(!ku(f,l,h,m)||!ku(h,m,f,l));var v,w}function _h(f,l,h){for(const m of h)for(let v=0;v<m.length-1;++v)if(Ha(f,l,m[v],m[v+1]))return!0;return!1}function vo(f,l,h=!1){let m=!1;for(const I of l)for(let M=0;M<I.length-1;M++){if(mh(f,I[M],I[M+1]))return h;(w=I[M])[1]>(v=f)[1]!=(k=I[M+1])[1]>v[1]&&v[0]<(k[0]-w[0])*(v[1]-w[1])/(k[1]-w[1])+w[0]&&(m=!m)}var v,w,k;return m}function gh(f,l){for(const h of l)if(vo(f,h))return!0;return!1}function xu(f,l){for(const h of f)if(!vo(h,l))return!1;for(let h=0;h<f.length-1;++h)if(_h(f[h],f[h+1],l))return!1;return!0}function vh(f,l){for(const h of l)if(xu(f,h))return!0;return!1}function ku(f,l,h,m){const v=m[0]-h[0],w=m[1]-h[1],k=(f[0]-h[0])*w-v*(f[1]-h[1]),I=(l[0]-h[0])*w-v*(l[1]-h[1]);return k>0&&I<0||k<0&&I>0}function jl(f,l,h){const m=[];for(let v=0;v<f.length;v++){const w=[];for(let k=0;k<f[v].length;k++){const I=Hn(f[v][k],h);Jo(l,I),w.push(I)}m.push(w)}return m}function Cu(f,l,h){const m=[];for(let v=0;v<f.length;v++){const w=jl(f[v],l,h);m.push(w)}return m}function Su(f,l,h,m){if(f[0]<h[0]||f[0]>h[2]){const v=.5*m;let w=f[0]-h[0]>v?-m:h[0]-f[0]>v?m:0;w===0&&(w=f[0]-h[2]>v?-m:h[2]-f[0]>v?m:0),f[0]+=w}Jo(l,f)}function Tu(f,l,h,m){const v=Math.pow(2,m.z)*Is,w=[m.x*Is,m.y*Is],k=[];for(const I of f)for(const M of I){const O=[M.x+w[0],M.y+w[1]];Su(O,l,h,v),k.push(O)}return k}function Iu(f,l,h,m){const v=Math.pow(2,m.z)*Is,w=[m.x*Is,m.y*Is],k=[];for(const M of f){const O=[];for(const H of M){const K=[H.x+w[0],H.y+w[1]];Jo(l,K),O.push(K)}k.push(O)}if(l[2]-l[0]<=v/2){(I=l)[0]=I[1]=1/0,I[2]=I[3]=-1/0;for(const M of k)for(const O of M)Su(O,l,h,v)}var I;return k}class Wi{constructor(l,h){this.type=wn,this.geojson=l,this.geometries=h}static parse(l,h){if(l.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(mi(l[1])){const m=l[1];if(m.type==="FeatureCollection"){const v=[];for(const w of m.features){const{type:k,coordinates:I}=w.geometry;k==="Polygon"&&v.push(I),k==="MultiPolygon"&&v.push(...I)}if(v.length)return new Wi(m,{type:"MultiPolygon",coordinates:v})}else if(m.type==="Feature"){const v=m.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Wi(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Wi(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(h,m){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(m.type==="Polygon"){const I=jl(m.coordinates,w,k),M=Tu(h.geometry(),v,w,k);if(!Yo(v,w))return!1;for(const O of M)if(!vo(O,I))return!1}if(m.type==="MultiPolygon"){const I=Cu(m.coordinates,w,k),M=Tu(h.geometry(),v,w,k);if(!Yo(v,w))return!1;for(const O of M)if(!gh(O,I))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(h,m){const v=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(m.type==="Polygon"){const I=jl(m.coordinates,w,k),M=Iu(h.geometry(),v,w,k);if(!Yo(v,w))return!1;for(const O of M)if(!xu(O,I))return!1}if(m.type==="MultiPolygon"){const I=Cu(m.coordinates,w,k),M=Iu(h.geometry(),v,w,k);if(!Yo(v,w))return!1;for(const O of M)if(!vh(O,I))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Eu=class{constructor(f=[],l=yh){if(this.data=f,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(f){this.data.push(f),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const f=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),f}peek(){return this.data[0]}_up(f){const{data:l,compare:h}=this,m=l[f];for(;f>0;){const v=f-1>>1,w=l[v];if(h(m,w)>=0)break;l[f]=w,f=v}l[f]=m}_down(f){const{data:l,compare:h}=this,m=this.length>>1,v=l[f];for(;f<m;){let w=1+(f<<1),k=l[w];const I=w+1;if(I<this.length&&h(l[I],k)<0&&(w=I,k=l[I]),h(k,v)>=0)break;l[f]=k,f=w}l[f]=v}};function yh(f,l){return f<l?-1:f>l?1:0}function bh(f,l,h,m,v){Pu(f,l,h,m||f.length-1,v||$h)}function Pu(f,l,h,m,v){for(;m>h;){if(m-h>600){var w=m-h+1,k=l-h+1,I=Math.log(w),M=.5*Math.exp(2*I/3),O=.5*Math.sqrt(I*M*(w-M)/w)*(k-w/2<0?-1:1);Pu(f,l,Math.max(h,Math.floor(l-k*M/w+O)),Math.min(m,Math.floor(l+(w-k)*M/w+O)),v)}var H=f[l],K=h,J=m;for(Qo(f,h,l),v(f[m],H)>0&&Qo(f,h,m);K<J;){for(Qo(f,K,J),K++,J--;v(f[K],H)<0;)K++;for(;v(f[J],H)>0;)J--}v(f[h],H)===0?Qo(f,h,J):Qo(f,++J,m),J<=l&&(h=J+1),l<=J&&(m=J-1)}}function Qo(f,l,h){var m=f[l];f[l]=f[h],f[h]=m}function $h(f,l){return f<l?-1:f>l?1:0}function Ga(f,l){if(f.length<=1)return[f];const h=[];let m,v;for(const w of f){const k=xh(w);k!==0&&(w.area=Math.abs(k),v===void 0&&(v=k<0),v===k<0?(m&&h.push(m),m=[w]):m.push(w))}if(m&&h.push(m),l>1)for(let w=0;w<h.length;w++)h[w].length<=l||(bh(h[w],l,1,h[w].length-1,wh),h[w]=h[w].slice(0,l));return h}function wh(f,l){return l.area-f.area}function xh(f){let l=0;for(let h,m,v=0,w=f.length,k=w-1;v<w;k=v++)h=f[v],m=f[k],l+=(m.x-h.x)*(h.y+m.y);return l}const Au=1/298.257223563,Mu=Au*(2-Au),Du=Math.PI/180;class ql{constructor(l){const h=6378.137*Du*1e3,m=Math.cos(l*Du),v=1/(1-Mu*(1-m*m)),w=Math.sqrt(v);this.kx=h*w*m,this.ky=h*w*v*(1-Mu)}distance(l,h){const m=this.wrap(l[0]-h[0])*this.kx,v=(l[1]-h[1])*this.ky;return Math.sqrt(m*m+v*v)}pointOnLine(l,h){let m,v,w,k,I=1/0;for(let M=0;M<l.length-1;M++){let O=l[M][0],H=l[M][1],K=this.wrap(l[M+1][0]-O)*this.kx,J=(l[M+1][1]-H)*this.ky,se=0;K===0&&J===0||(se=(this.wrap(h[0]-O)*this.kx*K+(h[1]-H)*this.ky*J)/(K*K+J*J),se>1?(O=l[M+1][0],H=l[M+1][1]):se>0&&(O+=K/this.kx*se,H+=J/this.ky*se)),K=this.wrap(h[0]-O)*this.kx,J=(h[1]-H)*this.ky;const pe=K*K+J*J;pe<I&&(I=pe,m=O,v=H,w=M,k=se)}return{point:[m,v],index:w,t:Math.max(0,Math.min(1,k))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function zu(f,l){return l[0]-f[0]}function yo(f){return f[1]-f[0]+1}function _i(f,l){return f[1]>=f[0]&&f[1]<l}function Hl(f,l){if(f[0]>f[1])return[null,null];const h=yo(f);if(l){if(h===2)return[f,null];const v=Math.floor(h/2);return[[f[0],f[0]+v],[f[0]+v,f[1]]]}if(h===1)return[f,null];const m=Math.floor(h/2)-1;return[[f[0],f[0]+m],[f[0]+m+1,f[1]]]}function Gl(f,l){if(!_i(l,f.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let m=l[0];m<=l[1];++m)Jo(h,f[m]);return h}function Zl(f){const l=[1/0,1/0,-1/0,-1/0];for(const h of f)for(const m of h)Jo(l,m);return l}function mr(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Wl(f,l,h){if(!mr(f)||!mr(l))return NaN;let m=0,v=0;return f[2]<l[0]&&(m=l[0]-f[2]),f[0]>l[2]&&(m=f[0]-l[2]),f[1]>l[3]&&(v=f[1]-l[3]),f[3]<l[1]&&(v=l[1]-f[3]),h.distance([0,0],[m,v])}function zn(f,l,h){const m=h.pointOnLine(l,f);return h.distance(f,m.point)}function ea(f,l,h,m,v){const w=Math.min(zn(f,[h,m],v),zn(l,[h,m],v)),k=Math.min(zn(h,[f,l],v),zn(m,[f,l],v));return Math.min(w,k)}function ar(f,l,h,m,v){if(!_i(l,f.length)||!_i(m,h.length))return 1/0;let w=1/0;for(let k=l[0];k<l[1];++k){const I=f[k],M=f[k+1];for(let O=m[0];O<m[1];++O){const H=h[O],K=h[O+1];if(Ha(I,M,H,K))return 0;w=Math.min(w,ea(I,M,H,K,v))}}return w}function rr(f,l,h,m,v){if(!_i(l,f.length)||!_i(m,h.length))return NaN;let w=1/0;for(let k=l[0];k<=l[1];++k)for(let I=m[0];I<=m[1];++I)if(w=Math.min(w,v.distance(f[k],h[I])),w===0)return w;return w}function Za(f,l,h){if(vo(f,l,!0))return 0;let m=1/0;for(const v of l){const w=v[0],k=v[v.length-1];if(w!==k&&(m=Math.min(m,zn(f,[k,w],h)),m===0))return m;const I=h.pointOnLine(v,f);if(m=Math.min(m,h.distance(f,I.point)),m===0)return m}return m}function Lu(f,l,h,m){if(!_i(l,f.length))return NaN;for(let w=l[0];w<=l[1];++w)if(vo(f[w],h,!0))return 0;let v=1/0;for(let w=l[0];w<l[1];++w){const k=f[w],I=f[w+1];for(const M of h)for(let O=0,H=M.length,K=H-1;O<H;K=O++){const J=M[K],se=M[O];if(Ha(k,I,J,se))return 0;v=Math.min(v,ea(k,I,J,se,m))}}return v}function Ru(f,l){for(const h of f)for(const m of h)if(vo(m,l,!0))return!0;return!1}function kh(f,l,h,m=1/0){const v=Zl(f),w=Zl(l);if(m!==1/0&&Wl(v,w,h)>=m)return m;if(Yo(v,w)){if(Ru(f,l))return 0}else if(Ru(l,f))return 0;let k=1/0;for(const I of f)for(let M=0,O=I.length,H=O-1;M<O;H=M++){const K=I[H],J=I[M];for(const se of l)for(let pe=0,be=se.length,Ee=be-1;pe<be;Ee=pe++){const ze=se[Ee],Ke=se[pe];if(Ha(K,J,ze,Ke))return 0;k=Math.min(k,ea(K,J,ze,Ke,h))}}return k}function Ou(f,l,h,m,v,w){if(!w)return;const k=Wl(Gl(m,w),v,h);k<l&&f.push([k,w,[0,0]])}function Wa(f,l,h,m,v,w,k){if(!w||!k)return;const I=Wl(Gl(m,w),Gl(v,k),h);I<l&&f.push([I,w,k])}function ta(f,l,h,m,v=1/0){let w=Math.min(m.distance(f[0],h[0][0]),v);if(w===0)return w;const k=new Eu([[0,[0,f.length-1],[0,0]]],zu),I=Zl(h);for(;k.length>0;){const M=k.pop();if(M[0]>=w)continue;const O=M[1],H=l?50:100;if(yo(O)<=H){if(!_i(O,f.length))return NaN;if(l){const K=Lu(f,O,h,m);if(isNaN(K)||K===0)return K;w=Math.min(w,K)}else for(let K=O[0];K<=O[1];++K){const J=Za(f[K],h,m);if(w=Math.min(w,J),w===0)return 0}}else{const K=Hl(O,l);Ou(k,w,m,f,I,K[0]),Ou(k,w,m,f,I,K[1])}}return w}function na(f,l,h,m,v,w=1/0){let k=Math.min(w,v.distance(f[0],h[0]));if(k===0)return k;const I=new Eu([[0,[0,f.length-1],[0,h.length-1]]],zu);for(;I.length>0;){const M=I.pop();if(M[0]>=k)continue;const O=M[1],H=M[2],K=l?50:100,J=m?50:100;if(yo(O)<=K&&yo(H)<=J){if(!_i(O,f.length)&&_i(H,h.length))return NaN;let se;if(l&&m)se=ar(f,O,h,H,v),k=Math.min(k,se);else if(l&&!m){const pe=f.slice(O[0],O[1]+1);for(let be=H[0];be<=H[1];++be)if(se=zn(h[be],pe,v),k=Math.min(k,se),k===0)return k}else if(!l&&m){const pe=h.slice(H[0],H[1]+1);for(let be=O[0];be<=O[1];++be)if(se=zn(f[be],pe,v),k=Math.min(k,se),k===0)return k}else se=rr(f,O,h,H,v),k=Math.min(k,se)}else{const se=Hl(O,l),pe=Hl(H,m);Wa(I,k,v,f,h,se[0],pe[0]),Wa(I,k,v,f,h,se[0],pe[1]),Wa(I,k,v,f,h,se[1],pe[0]),Wa(I,k,v,f,h,se[1],pe[1])}}return k}function Ka(f){return f.type==="MultiPolygon"?f.coordinates.map(l=>({type:"Polygon",coordinates:l})):f.type==="MultiLineString"?f.coordinates.map(l=>({type:"LineString",coordinates:l})):f.type==="MultiPoint"?f.coordinates.map(l=>({type:"Point",coordinates:l})):[f]}class Ti{constructor(l,h){this.type=Ot,this.geojson=l,this.geometries=h}static parse(l,h){if(l.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(mi(l[1])){const m=l[1];if(m.type==="FeatureCollection")return new Ti(m,m.features.map(v=>Ka(v.geometry)).flat());if(m.type==="Feature")return new Ti(m,Ka(m.geometry));if("type"in m&&"coordinates"in m)return new Ti(m,Ka(m))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(h,m){const v=h.geometry(),w=v.flat().map(M=>Ul([M.x,M.y],h.canonical));if(v.length===0)return NaN;const k=new ql(w[0][1]);let I=1/0;for(const M of m){switch(M.type){case"Point":I=Math.min(I,na(w,!1,[M.coordinates],!1,k,I));break;case"LineString":I=Math.min(I,na(w,!1,M.coordinates,!0,k,I));break;case"Polygon":I=Math.min(I,ta(w,!1,M.coordinates,k,I))}if(I===0)return I}return I}(l,this.geometries);if(l.geometryType()==="LineString")return function(h,m){const v=h.geometry(),w=v.flat().map(M=>Ul([M.x,M.y],h.canonical));if(v.length===0)return NaN;const k=new ql(w[0][1]);let I=1/0;for(const M of m){switch(M.type){case"Point":I=Math.min(I,na(w,!0,[M.coordinates],!1,k,I));break;case"LineString":I=Math.min(I,na(w,!0,M.coordinates,!0,k,I));break;case"Polygon":I=Math.min(I,ta(w,!0,M.coordinates,k,I))}if(I===0)return I}return I}(l,this.geometries);if(l.geometryType()==="Polygon")return function(h,m){const v=h.geometry();if(v.length===0||v[0].length===0)return NaN;const w=Ga(v,0).map(M=>M.map(O=>O.map(H=>Ul([H.x,H.y],h.canonical)))),k=new ql(w[0][0][0][1]);let I=1/0;for(const M of m)for(const O of w){switch(M.type){case"Point":I=Math.min(I,ta([M.coordinates],!1,O,k,I));break;case"LineString":I=Math.min(I,ta(M.coordinates,!0,O,k,I));break;case"Polygon":I=Math.min(I,kh(O,M.coordinates,k,I))}if(I===0)return I}return I}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Ii={"==":fh,"!=":$u,">":hh,"<":wu,">=":ph,"<=":dh,array:Hs,at:zl,boolean:Hs,case:Ba,coalesce:Ua,collator:ja,format:qa,image:Vl,in:Fa,"index-of":Zo,interpolate:Ts,"interpolate-hcl":Ts,"interpolate-lab":Ts,length:Xo,let:Oa,literal:Hi,match:Ll,number:Hs,"number-format":Nl,object:Hs,slice:Wo,step:Ko,string:Hs,"to-boolean":ei,"to-color":ei,"to-number":ei,"to-string":ei,var:_o,within:Wi,distance:Ti};class Vs{constructor(l,h,m,v){this.name=l,this.type=h,this._evaluate=m,this.args=v}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,h){const m=l[0],v=Vs.definitions[m];if(!v)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(v)?v[0]:v.type,k=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,I=k.filter(([O])=>!Array.isArray(O)||O.length===l.length-1);let M=null;for(const[O,H]of I){M=new qn(h.registry,Xa,h.path,null,h.scope);const K=[];let J=!1;for(let se=1;se<l.length;se++){const pe=l[se],be=Array.isArray(O)?O[se-1]:O.type,Ee=M.parse(pe,1+K.length,be);if(!Ee){J=!0;break}K.push(Ee)}if(!J)if(Array.isArray(O)&&O.length!==K.length)M.error(`Expected ${O.length} arguments, but found ${K.length} instead.`);else{for(let se=0;se<K.length;se++){const pe=Array.isArray(O)?O[se]:O.type,be=K[se];M.concat(se+1).checkSubtype(pe,be.type)}if(M.errors.length===0)return new Vs(m,w,H,K)}}if(I.length===1)h.errors.push(...M.errors);else{const O=(I.length?I:k).map(([K])=>{return J=K,Array.isArray(J)?`(${J.map(ye).join(", ")})`:`(${ye(J.type)}...)`;var J}).join(" | "),H=[];for(let K=1;K<l.length;K++){const J=h.parse(l[K],1+H.length);if(!J)return null;H.push(ye(J.type))}h.error(`Expected arguments of type ${O}, but found (${H.join(", ")}) instead.`)}return null}static register(l,h){Vs.definitions=h;for(const m in h)l[m]=Vs}}function Fu(f,[l,h,m,v]){l=l.evaluate(f),h=h.evaluate(f),m=m.evaluate(f);const w=v?v.evaluate(f):1,k=yu(l,h,m,w);if(k)throw new pr(k);return new Zn(l/255,h/255,m/255,w,!1)}function Bu(f,l){return f in l}function Kl(f,l){const h=l[f];return h===void 0?null:h}function Ki(f){return{type:f}}function Xa(f){if(f instanceof _o)return Xa(f.boundExpression);if(f instanceof Vs&&f.name==="error"||f instanceof ja||f instanceof Wi||f instanceof Ti)return!1;const l=f instanceof ei||f instanceof Hs;let h=!0;return f.eachChild(m=>{h=l?h&&Xa(m):h&&m instanceof Hi}),!!h&&Ja(f)&&sa(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ja(f){if(f instanceof Vs&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof Wi||f instanceof Ti)return!1;let l=!0;return f.eachChild(h=>{l&&!Ja(h)&&(l=!1)}),l}function ra(f){if(f instanceof Vs&&f.name==="feature-state")return!1;let l=!0;return f.eachChild(h=>{l&&!ra(h)&&(l=!1)}),l}function sa(f,l){if(f instanceof Vs&&l.indexOf(f.name)>=0)return!1;let h=!0;return f.eachChild(m=>{h&&!sa(m,l)&&(h=!1)}),h}function Xl(f){return{result:"success",value:f}}function gi(f){return{result:"error",value:f}}function bo(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Jl(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Yl(f){return!!f.expression&&f.expression.interpolated}function jn(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function Xi(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function Ya(f){return f}function Ql(f,l){const h=l.type==="color",m=f.stops&&typeof f.stops[0][0]=="object",v=m||!(m||f.property!==void 0),w=f.type||(Yl(l)?"exponential":"interval");if(h||l.type==="padding"){const H=h?Zn.parse:Ss.parse;(f=Nr({},f)).stops&&(f.stops=f.stops.map(K=>[K[0],H(K[1])])),f.default=H(f.default?f.default:l.default)}if(f.colorSpace&&(k=f.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var k;let I,M,O;if(w==="exponential")I=ia;else if(w==="interval")I=Vu;else if(w==="categorical"){I=Nu,M=Object.create(null);for(const H of f.stops)M[H[0]]=H[1];O=typeof f.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);I=Ch}if(m){const H={},K=[];for(let pe=0;pe<f.stops.length;pe++){const be=f.stops[pe],Ee=be[0].zoom;H[Ee]===void 0&&(H[Ee]={zoom:Ee,type:f.type,property:f.property,default:f.default,stops:[]},K.push(Ee)),H[Ee].stops.push([be[0].value,be[1]])}const J=[];for(const pe of K)J.push([H[pe].zoom,Ql(H[pe],l)]);const se={name:"linear"};return{kind:"composite",interpolationType:se,interpolationFactor:Ts.interpolationFactor.bind(void 0,se),zoomStops:J.map(pe=>pe[0]),evaluate:({zoom:pe},be)=>ia({stops:J,base:f.base},l,pe).evaluate(pe,be)}}if(v){const H=w==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:H,interpolationFactor:Ts.interpolationFactor.bind(void 0,H),zoomStops:f.stops.map(K=>K[0]),evaluate:({zoom:K})=>I(f,l,K,M,O)}}return{kind:"source",evaluate(H,K){const J=K&&K.properties?K.properties[f.property]:void 0;return J===void 0?Ji(f.default,l.default):I(f,l,J,M,O)}}}function Ji(f,l,h){return f!==void 0?f:l!==void 0?l:h!==void 0?h:void 0}function Nu(f,l,h,m,v){return Ji(typeof h===v?m[h]:void 0,f.default,l.default)}function Vu(f,l,h){if(jn(h)!=="number")return Ji(f.default,l.default);const m=f.stops.length;if(m===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[m-1][0])return f.stops[m-1][1];const v=Na(f.stops.map(w=>w[0]),h);return f.stops[v][1]}function ia(f,l,h){const m=f.base!==void 0?f.base:1;if(jn(h)!=="number")return Ji(f.default,l.default);const v=f.stops.length;if(v===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[v-1][0])return f.stops[v-1][1];const w=Na(f.stops.map(H=>H[0]),h),k=function(H,K,J,se){const pe=se-J,be=H-J;return pe===0?0:K===1?be/pe:(Math.pow(K,be)-1)/(Math.pow(K,pe)-1)}(h,m,f.stops[w][0],f.stops[w+1][0]),I=f.stops[w][1],M=f.stops[w+1][1],O=ls[l.type]||Ya;return typeof I.evaluate=="function"?{evaluate(...H){const K=I.evaluate.apply(void 0,H),J=M.evaluate.apply(void 0,H);if(K!==void 0&&J!==void 0)return O(K,J,k,f.colorSpace)}}:O(I,M,k,f.colorSpace)}function Ch(f,l,h){switch(l.type){case"color":h=Zn.parse(h);break;case"formatted":h=Cs.fromString(h.toString());break;case"resolvedImage":h=Ns.fromString(h.toString());break;case"padding":h=Ss.parse(h);break;default:jn(h)===l.type||l.type==="enum"&&l.values[h]||(h=void 0)}return Ji(h,f.default,l.default)}Vs.register(Ii,{error:[{kind:"error"},[An],(f,[l])=>{throw new pr(l.evaluate(f))}],typeof:[An,[Cn],(f,[l])=>ye(xr(l.evaluate(f)))],"to-rgba":[ie(Ot,4),[Ur],(f,[l])=>{const[h,m,v,w]=l.evaluate(f).rgb;return[255*h,255*m,255*v,w]}],rgb:[Ur,[Ot,Ot,Ot],Fu],rgba:[Ur,[Ot,Ot,Ot,Ot],Fu],has:{type:wn,overloads:[[[An],(f,[l])=>Bu(l.evaluate(f),f.properties())],[[An,Xr],(f,[l,h])=>Bu(l.evaluate(f),h.evaluate(f))]]},get:{type:Cn,overloads:[[[An],(f,[l])=>Kl(l.evaluate(f),f.properties())],[[An,Xr],(f,[l,h])=>Kl(l.evaluate(f),h.evaluate(f))]]},"feature-state":[Cn,[An],(f,[l])=>Kl(l.evaluate(f),f.featureState||{})],properties:[Xr,[],f=>f.properties()],"geometry-type":[An,[],f=>f.geometryType()],id:[Cn,[],f=>f.id()],zoom:[Ot,[],f=>f.globals.zoom],"heatmap-density":[Ot,[],f=>f.globals.heatmapDensity||0],"line-progress":[Ot,[],f=>f.globals.lineProgress||0],accumulated:[Cn,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[Ot,Ki(Ot),(f,l)=>{let h=0;for(const m of l)h+=m.evaluate(f);return h}],"*":[Ot,Ki(Ot),(f,l)=>{let h=1;for(const m of l)h*=m.evaluate(f);return h}],"-":{type:Ot,overloads:[[[Ot,Ot],(f,[l,h])=>l.evaluate(f)-h.evaluate(f)],[[Ot],(f,[l])=>-l.evaluate(f)]]},"/":[Ot,[Ot,Ot],(f,[l,h])=>l.evaluate(f)/h.evaluate(f)],"%":[Ot,[Ot,Ot],(f,[l,h])=>l.evaluate(f)%h.evaluate(f)],ln2:[Ot,[],()=>Math.LN2],pi:[Ot,[],()=>Math.PI],e:[Ot,[],()=>Math.E],"^":[Ot,[Ot,Ot],(f,[l,h])=>Math.pow(l.evaluate(f),h.evaluate(f))],sqrt:[Ot,[Ot],(f,[l])=>Math.sqrt(l.evaluate(f))],log10:[Ot,[Ot],(f,[l])=>Math.log(l.evaluate(f))/Math.LN10],ln:[Ot,[Ot],(f,[l])=>Math.log(l.evaluate(f))],log2:[Ot,[Ot],(f,[l])=>Math.log(l.evaluate(f))/Math.LN2],sin:[Ot,[Ot],(f,[l])=>Math.sin(l.evaluate(f))],cos:[Ot,[Ot],(f,[l])=>Math.cos(l.evaluate(f))],tan:[Ot,[Ot],(f,[l])=>Math.tan(l.evaluate(f))],asin:[Ot,[Ot],(f,[l])=>Math.asin(l.evaluate(f))],acos:[Ot,[Ot],(f,[l])=>Math.acos(l.evaluate(f))],atan:[Ot,[Ot],(f,[l])=>Math.atan(l.evaluate(f))],min:[Ot,Ki(Ot),(f,l)=>Math.min(...l.map(h=>h.evaluate(f)))],max:[Ot,Ki(Ot),(f,l)=>Math.max(...l.map(h=>h.evaluate(f)))],abs:[Ot,[Ot],(f,[l])=>Math.abs(l.evaluate(f))],round:[Ot,[Ot],(f,[l])=>{const h=l.evaluate(f);return h<0?-Math.round(-h):Math.round(h)}],floor:[Ot,[Ot],(f,[l])=>Math.floor(l.evaluate(f))],ceil:[Ot,[Ot],(f,[l])=>Math.ceil(l.evaluate(f))],"filter-==":[wn,[An,Cn],(f,[l,h])=>f.properties()[l.value]===h.value],"filter-id-==":[wn,[Cn],(f,[l])=>f.id()===l.value],"filter-type-==":[wn,[An],(f,[l])=>f.geometryType()===l.value],"filter-<":[wn,[An,Cn],(f,[l,h])=>{const m=f.properties()[l.value],v=h.value;return typeof m==typeof v&&m<v}],"filter-id-<":[wn,[Cn],(f,[l])=>{const h=f.id(),m=l.value;return typeof h==typeof m&&h<m}],"filter->":[wn,[An,Cn],(f,[l,h])=>{const m=f.properties()[l.value],v=h.value;return typeof m==typeof v&&m>v}],"filter-id->":[wn,[Cn],(f,[l])=>{const h=f.id(),m=l.value;return typeof h==typeof m&&h>m}],"filter-<=":[wn,[An,Cn],(f,[l,h])=>{const m=f.properties()[l.value],v=h.value;return typeof m==typeof v&&m<=v}],"filter-id-<=":[wn,[Cn],(f,[l])=>{const h=f.id(),m=l.value;return typeof h==typeof m&&h<=m}],"filter->=":[wn,[An,Cn],(f,[l,h])=>{const m=f.properties()[l.value],v=h.value;return typeof m==typeof v&&m>=v}],"filter-id->=":[wn,[Cn],(f,[l])=>{const h=f.id(),m=l.value;return typeof h==typeof m&&h>=m}],"filter-has":[wn,[Cn],(f,[l])=>l.value in f.properties()],"filter-has-id":[wn,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[wn,[ie(An)],(f,[l])=>l.value.indexOf(f.geometryType())>=0],"filter-id-in":[wn,[ie(Cn)],(f,[l])=>l.value.indexOf(f.id())>=0],"filter-in-small":[wn,[An,ie(Cn)],(f,[l,h])=>h.value.indexOf(f.properties()[l.value])>=0],"filter-in-large":[wn,[An,ie(Cn)],(f,[l,h])=>function(m,v,w,k){for(;w<=k;){const I=w+k>>1;if(v[I]===m)return!0;v[I]>m?k=I-1:w=I+1}return!1}(f.properties()[l.value],h.value,0,h.value.length-1)],all:{type:wn,overloads:[[[wn,wn],(f,[l,h])=>l.evaluate(f)&&h.evaluate(f)],[Ki(wn),(f,l)=>{for(const h of l)if(!h.evaluate(f))return!1;return!0}]]},any:{type:wn,overloads:[[[wn,wn],(f,[l,h])=>l.evaluate(f)||h.evaluate(f)],[Ki(wn),(f,l)=>{for(const h of l)if(h.evaluate(f))return!0;return!1}]]},"!":[wn,[wn],(f,[l])=>!l.evaluate(f)],"is-supported-script":[wn,[An],(f,[l])=>{const h=f.globals&&f.globals.isSupportedScript;return!h||h(l.evaluate(f))}],upcase:[An,[An],(f,[l])=>l.evaluate(f).toUpperCase()],downcase:[An,[An],(f,[l])=>l.evaluate(f).toLowerCase()],concat:[An,Ki(Cn),(f,l)=>l.map(h=>Go(h.evaluate(f))).join("")],"resolved-locale":[An,[Fs],(f,[l])=>l.evaluate(f).resolvedLocale()]});class ec{constructor(l,h){var m;this.expression=l,this._warningHistory={},this._evaluator=new mo,this._defaultValue=h?(m=h).type==="color"&&Xi(m.default)?new Zn(0,0,0,0):m.type==="color"?Zn.parse(m.default)||null:m.type==="padding"?Ss.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?es.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(l,h,m,v,w,k){return this._evaluator.globals=l,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(l,h,m,v,w,k){this._evaluator.globals=l,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=v,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=k||null;try{const I=this.expression.evaluate(this._evaluator);if(I==null||typeof I=="number"&&I!=I)return this._defaultValue;if(this._enumValues&&!(I in this._enumValues))throw new pr(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(I)} instead.`);return I}catch(I){return this._warningHistory[I.message]||(this._warningHistory[I.message]=!0,typeof console<"u"&&console.warn(I.message)),this._defaultValue}}}function Qa(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Ii}function el(f,l){const h=new qn(Ii,Xa,[],l?function(v){const w={color:Ur,string:An,number:Ot,enum:An,boolean:wn,formatted:qs,padding:jr,resolvedImage:Pe,variableAnchorOffsetCollection:te};return v.type==="array"?ie(w[v.value]||Cn,v.length):w[v.type]}(l):void 0),m=h.parse(f,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Xl(new ec(m,l)):gi(h.errors)}class tc{constructor(l,h){this.kind=l,this._styleExpression=h,this.isStateDependent=l!=="constant"&&!ra(h.expression)}evaluateWithoutErrorHandling(l,h,m,v,w,k){return this._styleExpression.evaluateWithoutErrorHandling(l,h,m,v,w,k)}evaluate(l,h,m,v,w,k){return this._styleExpression.evaluate(l,h,m,v,w,k)}}class $o{constructor(l,h,m,v){this.kind=l,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=l!=="camera"&&!ra(h.expression),this.interpolationType=v}evaluateWithoutErrorHandling(l,h,m,v,w,k){return this._styleExpression.evaluateWithoutErrorHandling(l,h,m,v,w,k)}evaluate(l,h,m,v,w,k){return this._styleExpression.evaluate(l,h,m,v,w,k)}interpolationFactor(l,h,m){return this.interpolationType?Ts.interpolationFactor(this.interpolationType,l,h,m):0}}function oa(f,l){const h=el(f,l);if(h.result==="error")return h;const m=h.value.expression,v=Ja(m);if(!v&&!bo(l))return gi([new Vr("","data expressions not supported")]);const w=sa(m,["zoom"]);if(!w&&!Jl(l))return gi([new Vr("","zoom expressions not supported")]);const k=Ei(m);return k||w?k instanceof Vr?gi([k]):k instanceof Ts&&!Yl(l)?gi([new Vr("",'"interpolate" expressions cannot be used with this property')]):Xl(k?new $o(v?"camera":"composite",h.value,k.labels,k instanceof Ts?k.interpolation:void 0):new tc(v?"constant":"source",h.value)):gi([new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ts{constructor(l,h){this._parameters=l,this._specification=h,Nr(this,Ql(this._parameters,this._specification))}static deserialize(l){return new ts(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Ei(f){let l=null;if(f instanceof Oa)l=Ei(f.result);else if(f instanceof Ua){for(const h of f.args)if(l=Ei(h),l)break}else(f instanceof Ko||f instanceof Ts)&&f.input instanceof Vs&&f.input.name==="zoom"&&(l=f);return l instanceof Vr||f.eachChild(h=>{const m=Ei(h);m instanceof Vr?l=m:!l&&m?l=new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&m&&l!==m&&(l=new Vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function tl(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const l of f.slice(1))if(!tl(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const Sh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nc(f){if(f==null)return{filter:()=>!0,needGeometry:!1};tl(f)||(f=wo(f));const l=el(f,Sh);if(l.result==="error")throw new Error(l.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,m,v)=>l.value.evaluate(h,m,{},v),needGeometry:rc(f)}}function aa(f,l){return f<l?-1:f>l?1:0}function rc(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let l=1;l<f.length;l++)if(rc(f[l]))return!0;return!1}function wo(f){if(!f)return!0;const l=f[0];return f.length<=1?l!=="any":l==="=="?sc(f[1],f[2],"=="):l==="!="?Pi(sc(f[1],f[2],"==")):l==="<"||l===">"||l==="<="||l===">="?sc(f[1],f[2],l):l==="any"?(h=f.slice(1),["any"].concat(h.map(wo))):l==="all"?["all"].concat(f.slice(1).map(wo)):l==="none"?["all"].concat(f.slice(1).map(wo).map(Pi)):l==="in"?nl(f[1],f.slice(2)):l==="!in"?Pi(nl(f[1],f.slice(2))):l==="has"?Uu(f[1]):l!=="!has"||Pi(Uu(f[1]));var h}function sc(f,l,h){switch(f){case"$type":return[`filter-type-${h}`,l];case"$id":return[`filter-id-${h}`,l];default:return[`filter-${h}`,f,l]}}function nl(f,l){if(l.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(h=>typeof h!=typeof l[0])?["filter-in-large",f,["literal",l.sort(aa)]]:["filter-in-small",f,["literal",l]]}}function Uu(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Pi(f){return["!",f]}function ic(f){const l=typeof f;if(l==="number"||l==="boolean"||l==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let v="[";for(const w of f)v+=`${ic(w)},`;return`${v}]`}const h=Object.keys(f).sort();let m="{";for(let v=0;v<h.length;v++)m+=`${JSON.stringify(h[v])}:${ic(f[h[v]])},`;return`${m}}`}function oc(f){let l="";for(const h of hn)l+=`/${ic(f[h])}`;return l}function ac(f){const l=f.value;return l?[new Ne(f.key,l,"constants have been deprecated as of v8")]:[]}function lr(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Ai(f){if(Array.isArray(f))return f.map(Ai);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const l={};for(const h in f)l[h]=Ai(f[h]);return l}return lr(f)}function Es(f){const l=f.key,h=f.value,m=f.valueSpec||{},v=f.objectElementValidators||{},w=f.style,k=f.styleSpec,I=f.validateSpec;let M=[];const O=jn(h);if(O!=="object")return[new Ne(l,h,`object expected, ${O} found`)];for(const H in h){const K=H.split(".")[0],J=m[K]||m["*"];let se;if(v[K])se=v[K];else if(m[K])se=I;else if(v["*"])se=v["*"];else{if(!m["*"]){M.push(new Ne(l,h[H],`unknown property "${H}"`));continue}se=I}M=M.concat(se({key:(l&&`${l}.`)+H,value:h[H],valueSpec:J,style:w,styleSpec:k,object:h,objectKey:H,validateSpec:I},h))}for(const H in m)v[H]||m[H].required&&m[H].default===void 0&&h[H]===void 0&&M.push(new Ne(l,h,`missing required property "${H}"`));return M}function lc(f){const l=f.value,h=f.valueSpec,m=f.style,v=f.styleSpec,w=f.key,k=f.arrayElementValidator||f.validateSpec;if(jn(l)!=="array")return[new Ne(w,l,`array expected, ${jn(l)} found`)];if(h.length&&l.length!==h.length)return[new Ne(w,l,`array length ${h.length} expected, length ${l.length} found`)];if(h["min-length"]&&l.length<h["min-length"])return[new Ne(w,l,`array length at least ${h["min-length"]} expected, length ${l.length} found`)];let I={type:h.value,values:h.values};v.$version<7&&(I.function=h.function),jn(h.value)==="object"&&(I=h.value);let M=[];for(let O=0;O<l.length;O++)M=M.concat(k({array:l,arrayIndex:O,value:l[O],valueSpec:I,validateSpec:f.validateSpec,style:m,styleSpec:v,key:`${w}[${O}]`}));return M}function la(f){const l=f.key,h=f.value,m=f.valueSpec;let v=jn(h);return v==="number"&&h!=h&&(v="NaN"),v!=="number"?[new Ne(l,h,`number expected, ${v} found`)]:"minimum"in m&&h<m.minimum?[new Ne(l,h,`${h} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&h>m.maximum?[new Ne(l,h,`${h} is greater than the maximum value ${m.maximum}`)]:[]}function ca(f){const l=f.valueSpec,h=lr(f.value.type);let m,v,w,k={};const I=h!=="categorical"&&f.value.property===void 0,M=!I,O=jn(f.value.stops)==="array"&&jn(f.value.stops[0])==="array"&&jn(f.value.stops[0][0])==="object",H=Es({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(se){if(h==="identity")return[new Ne(se.key,se.value,'identity function may not have a "stops" property')];let pe=[];const be=se.value;return pe=pe.concat(lc({key:se.key,value:be,valueSpec:se.valueSpec,validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec,arrayElementValidator:K})),jn(be)==="array"&&be.length===0&&pe.push(new Ne(se.key,be,"array must have at least one stop")),pe},default:function(se){return se.validateSpec({key:se.key,value:se.value,valueSpec:l,validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec})}}});return h==="identity"&&I&&H.push(new Ne(f.key,f.value,'missing required property "property"')),h==="identity"||f.value.stops||H.push(new Ne(f.key,f.value,'missing required property "stops"')),h==="exponential"&&f.valueSpec.expression&&!Yl(f.valueSpec)&&H.push(new Ne(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(M&&!bo(f.valueSpec)?H.push(new Ne(f.key,f.value,"property functions not supported")):I&&!Jl(f.valueSpec)&&H.push(new Ne(f.key,f.value,"zoom functions not supported"))),h!=="categorical"&&!O||f.value.property!==void 0||H.push(new Ne(f.key,f.value,'"property" property is required')),H;function K(se){let pe=[];const be=se.value,Ee=se.key;if(jn(be)!=="array")return[new Ne(Ee,be,`array expected, ${jn(be)} found`)];if(be.length!==2)return[new Ne(Ee,be,`array length 2 expected, length ${be.length} found`)];if(O){if(jn(be[0])!=="object")return[new Ne(Ee,be,`object expected, ${jn(be[0])} found`)];if(be[0].zoom===void 0)return[new Ne(Ee,be,"object stop key must have zoom")];if(be[0].value===void 0)return[new Ne(Ee,be,"object stop key must have value")];if(w&&w>lr(be[0].zoom))return[new Ne(Ee,be[0].zoom,"stop zoom values must appear in ascending order")];lr(be[0].zoom)!==w&&(w=lr(be[0].zoom),v=void 0,k={}),pe=pe.concat(Es({key:`${Ee}[0]`,value:be[0],valueSpec:{zoom:{}},validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{zoom:la,value:J}}))}else pe=pe.concat(J({key:`${Ee}[0]`,value:be[0],valueSpec:{},validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec},be));return Qa(Ai(be[1]))?pe.concat([new Ne(`${Ee}[1]`,be[1],"expressions are not allowed in function stops.")]):pe.concat(se.validateSpec({key:`${Ee}[1]`,value:be[1],valueSpec:l,validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec}))}function J(se,pe){const be=jn(se.value),Ee=lr(se.value),ze=se.value!==null?se.value:pe;if(m){if(be!==m)return[new Ne(se.key,ze,`${be} stop domain type must match previous stop domain type ${m}`)]}else m=be;if(be!=="number"&&be!=="string"&&be!=="boolean")return[new Ne(se.key,ze,"stop domain value must be a number, string, or boolean")];if(be!=="number"&&h!=="categorical"){let Ke=`number expected, ${be} found`;return bo(l)&&h===void 0&&(Ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ne(se.key,ze,Ke)]}return h!=="categorical"||be!=="number"||isFinite(Ee)&&Math.floor(Ee)===Ee?h!=="categorical"&&be==="number"&&v!==void 0&&Ee<v?[new Ne(se.key,ze,"stop domain values must appear in ascending order")]:(v=Ee,h==="categorical"&&Ee in k?[new Ne(se.key,ze,"stop domain values must be unique")]:(k[Ee]=!0,[])):[new Ne(se.key,ze,`integer expected, found ${Ee}`)]}}function Yi(f){const l=(f.expressionContext==="property"?oa:el)(Ai(f.value),f.valueSpec);if(l.result==="error")return l.value.map(m=>new Ne(`${f.key}${m.key}`,f.value,m.message));const h=l.value.expression||l.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!h.outputDefined())return[new Ne(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!ra(h))return[new Ne(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!ra(h))return[new Ne(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!sa(h,["zoom","feature-state"]))return[new Ne(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!Ja(h))return[new Ne(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xo(f){const l=f.key,h=f.value,m=f.valueSpec,v=[];return Array.isArray(m.values)?m.values.indexOf(lr(h))===-1&&v.push(new Ne(l,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(m.values).indexOf(lr(h))===-1&&v.push(new Ne(l,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),v}function rl(f){return tl(Ai(f.value))?Yi(Nr({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):cc(f)}function cc(f){const l=f.value,h=f.key;if(jn(l)!=="array")return[new Ne(h,l,`array expected, ${jn(l)} found`)];const m=f.styleSpec;let v,w=[];if(l.length<1)return[new Ne(h,l,"filter array must have at least 1 element")];switch(w=w.concat(xo({key:`${h}[0]`,value:l[0],valueSpec:m.filter_operator,style:f.style,styleSpec:f.styleSpec})),lr(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&lr(l[1])==="$type"&&w.push(new Ne(h,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&w.push(new Ne(h,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(v=jn(l[1]),v!=="string"&&w.push(new Ne(`${h}[1]`,l[1],`string expected, ${v} found`)));for(let k=2;k<l.length;k++)v=jn(l[k]),lr(l[1])==="$type"?w=w.concat(xo({key:`${h}[${k}]`,value:l[k],valueSpec:m.geometry_type,style:f.style,styleSpec:f.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&w.push(new Ne(`${h}[${k}]`,l[k],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let k=1;k<l.length;k++)w=w.concat(cc({key:`${h}[${k}]`,value:l[k],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":v=jn(l[1]),l.length!==2?w.push(new Ne(h,l,`filter array for "${l[0]}" operator must have 2 elements`)):v!=="string"&&w.push(new Ne(`${h}[1]`,l[1],`string expected, ${v} found`))}return w}function sl(f,l){const h=f.key,m=f.validateSpec,v=f.style,w=f.styleSpec,k=f.value,I=f.objectKey,M=w[`${l}_${f.layerType}`];if(!M)return[];const O=I.match(/^(.*)-transition$/);if(l==="paint"&&O&&M[O[1]]&&M[O[1]].transition)return m({key:h,value:k,valueSpec:w.transition,style:v,styleSpec:w});const H=f.valueSpec||M[I];if(!H)return[new Ne(h,k,`unknown property "${I}"`)];let K;if(jn(k)==="string"&&bo(H)&&!H.tokens&&(K=/^{([^}]+)}$/.exec(k)))return[new Ne(h,k,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(K[1])} }\`.`)];const J=[];return f.layerType==="symbol"&&(I==="text-field"&&v&&!v.glyphs&&J.push(new Ne(h,k,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&Xi(Ai(k))&&lr(k.type)==="identity"&&J.push(new Ne(h,k,'"text-font" does not support identity functions'))),J.concat(m({key:f.key,value:k,valueSpec:H,style:v,styleSpec:w,expressionContext:"property",propertyType:l,propertyKey:I}))}function uc(f){return sl(f,"paint")}function ju(f){return sl(f,"layout")}function fc(f){let l=[];const h=f.value,m=f.key,v=f.style,w=f.styleSpec;h.type||h.ref||l.push(new Ne(m,h,'either "type" or "ref" is required'));let k=lr(h.type);const I=lr(h.ref);if(h.id){const M=lr(h.id);for(let O=0;O<f.arrayIndex;O++){const H=v.layers[O];lr(H.id)===M&&l.push(new Ne(m,h.id,`duplicate layer id "${h.id}", previously used at line ${H.id.__line__}`))}}if("ref"in h){let M;["type","source","source-layer","filter","layout"].forEach(O=>{O in h&&l.push(new Ne(m,h[O],`"${O}" is prohibited for ref layers`))}),v.layers.forEach(O=>{lr(O.id)===I&&(M=O)}),M?M.ref?l.push(new Ne(m,h.ref,"ref cannot reference another ref layer")):k=lr(M.type):l.push(new Ne(m,h.ref,`ref layer "${I}" not found`))}else if(k!=="background")if(h.source){const M=v.sources&&v.sources[h.source],O=M&&lr(M.type);M?O==="vector"&&k==="raster"?l.push(new Ne(m,h.source,`layer "${h.id}" requires a raster source`)):O!=="raster-dem"&&k==="hillshade"?l.push(new Ne(m,h.source,`layer "${h.id}" requires a raster-dem source`)):O==="raster"&&k!=="raster"?l.push(new Ne(m,h.source,`layer "${h.id}" requires a vector source`)):O!=="vector"||h["source-layer"]?O==="raster-dem"&&k!=="hillshade"?l.push(new Ne(m,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):k!=="line"||!h.paint||!h.paint["line-gradient"]||O==="geojson"&&M.lineMetrics||l.push(new Ne(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Ne(m,h,`layer "${h.id}" must specify a "source-layer"`)):l.push(new Ne(m,h.source,`source "${h.source}" not found`))}else l.push(new Ne(m,h,'missing required property "source"'));return l=l.concat(Es({key:m,value:h,valueSpec:w.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${m}.type`,value:h.type,valueSpec:w.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:h,objectKey:"type"}),filter:rl,layout:M=>Es({layer:h,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":O=>ju(Nr({layerType:k},O))}}),paint:M=>Es({layer:h,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":O=>uc(Nr({layerType:k},O))}})}})),l}function Qi(f){const l=f.value,h=f.key,m=jn(l);return m!=="string"?[new Ne(h,l,`string expected, ${m} found`)]:[]}const hc={promoteId:function({key:f,value:l}){if(jn(l)==="string")return Qi({key:f,value:l});{const h=[];for(const m in l)h.push(...Qi({key:`${f}.${m}`,value:l[m]}));return h}}};function dc(f){const l=f.value,h=f.key,m=f.styleSpec,v=f.style,w=f.validateSpec;if(!l.type)return[new Ne(h,l,'"type" is required')];const k=lr(l.type);let I;switch(k){case"vector":case"raster":return I=Es({key:h,value:l,valueSpec:m[`source_${k.replace("-","_")}`],style:f.style,styleSpec:m,objectElementValidators:hc,validateSpec:w}),I;case"raster-dem":return I=function(M){var O;const H=(O=M.sourceName)!==null&&O!==void 0?O:"",K=M.value,J=M.styleSpec,se=J.source_raster_dem,pe=M.style;let be=[];const Ee=jn(K);if(K===void 0)return be;if(Ee!=="object")return be.push(new Ne("source_raster_dem",K,`object expected, ${Ee} found`)),be;const ze=lr(K.encoding)==="custom",Ke=["redFactor","greenFactor","blueFactor","baseShift"],Re=M.value.encoding?`"${M.value.encoding}"`:"Default";for(const Ge in K)!ze&&Ke.includes(Ge)?be.push(new Ne(Ge,K[Ge],`In "${H}": "${Ge}" is only valid when "encoding" is set to "custom". ${Re} encoding found`)):se[Ge]?be=be.concat(M.validateSpec({key:Ge,value:K[Ge],valueSpec:se[Ge],validateSpec:M.validateSpec,style:pe,styleSpec:J})):be.push(new Ne(Ge,K[Ge],`unknown property "${Ge}"`));return be}({sourceName:h,value:l,style:f.style,styleSpec:m,validateSpec:w}),I;case"geojson":if(I=Es({key:h,value:l,valueSpec:m.source_geojson,style:v,styleSpec:m,validateSpec:w,objectElementValidators:hc}),l.cluster)for(const M in l.clusterProperties){const[O,H]=l.clusterProperties[M],K=typeof O=="string"?[O,["accumulated"],["get",M]]:O;I.push(...Yi({key:`${h}.${M}.map`,value:H,validateSpec:w,expressionContext:"cluster-map"})),I.push(...Yi({key:`${h}.${M}.reduce`,value:K,validateSpec:w,expressionContext:"cluster-reduce"}))}return I;case"video":return Es({key:h,value:l,valueSpec:m.source_video,style:v,validateSpec:w,styleSpec:m});case"image":return Es({key:h,value:l,valueSpec:m.source_image,style:v,validateSpec:w,styleSpec:m});case"canvas":return[new Ne(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xo({key:`${h}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:v,validateSpec:w,styleSpec:m})}}function pc(f){const l=f.value,h=f.styleSpec,m=h.light,v=f.style;let w=[];const k=jn(l);if(l===void 0)return w;if(k!=="object")return w=w.concat([new Ne("light",l,`object expected, ${k} found`)]),w;for(const I in l){const M=I.match(/^(.*)-transition$/);w=w.concat(M&&m[M[1]]&&m[M[1]].transition?f.validateSpec({key:I,value:l[I],valueSpec:h.transition,validateSpec:f.validateSpec,style:v,styleSpec:h}):m[I]?f.validateSpec({key:I,value:l[I],valueSpec:m[I],validateSpec:f.validateSpec,style:v,styleSpec:h}):[new Ne(I,l[I],`unknown property "${I}"`)])}return w}function qu(f){const l=f.value,h=f.styleSpec,m=h.sky,v=f.style,w=jn(l);if(l===void 0)return[];if(w!=="object")return[new Ne("sky",l,`object expected, ${w} found`)];let k=[];for(const I in l)k=k.concat(m[I]?f.validateSpec({key:I,value:l[I],valueSpec:m[I],style:v,styleSpec:h}):[new Ne(I,l[I],`unknown property "${I}"`)]);return k}function Hu(f){const l=f.value,h=f.styleSpec,m=h.terrain,v=f.style;let w=[];const k=jn(l);if(l===void 0)return w;if(k!=="object")return w=w.concat([new Ne("terrain",l,`object expected, ${k} found`)]),w;for(const I in l)w=w.concat(m[I]?f.validateSpec({key:I,value:l[I],valueSpec:m[I],validateSpec:f.validateSpec,style:v,styleSpec:h}):[new Ne(I,l[I],`unknown property "${I}"`)]);return w}function mc(f){let l=[];const h=f.value,m=f.key;if(Array.isArray(h)){const v=[],w=[];for(const k in h)h[k].id&&v.includes(h[k].id)&&l.push(new Ne(m,h,`all the sprites' ids must be unique, but ${h[k].id} is duplicated`)),v.push(h[k].id),h[k].url&&w.includes(h[k].url)&&l.push(new Ne(m,h,`all the sprites' URLs must be unique, but ${h[k].url} is duplicated`)),w.push(h[k].url),l=l.concat(Es({key:`${m}[${k}]`,value:h[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return l}return Qi({key:m,value:h})}const _c={"*":()=>[],array:lc,boolean:function(f){const l=f.value,h=f.key,m=jn(l);return m!=="boolean"?[new Ne(h,l,`boolean expected, ${m} found`)]:[]},number:la,color:function(f){const l=f.key,h=f.value,m=jn(h);return m!=="string"?[new Ne(l,h,`color expected, ${m} found`)]:Zn.parse(String(h))?[]:[new Ne(l,h,`color expected, "${h}" found`)]},constants:ac,enum:xo,filter:rl,function:ca,layer:fc,object:Es,source:dc,light:pc,sky:qu,terrain:Hu,string:Qi,formatted:function(f){return Qi(f).length===0?[]:Yi(f)},resolvedImage:function(f){return Qi(f).length===0?[]:Yi(f)},padding:function(f){const l=f.key,h=f.value;if(jn(h)==="array"){if(h.length<1||h.length>4)return[new Ne(l,h,`padding requires 1 to 4 values; ${h.length} values found`)];const m={type:"number"};let v=[];for(let w=0;w<h.length;w++)v=v.concat(f.validateSpec({key:`${l}[${w}]`,value:h[w],validateSpec:f.validateSpec,valueSpec:m}));return v}return la({key:l,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(f){const l=f.key,h=f.value,m=jn(h),v=f.styleSpec;if(m!=="array"||h.length<1||h.length%2!=0)return[new Ne(l,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let k=0;k<h.length;k+=2)w=w.concat(xo({key:`${l}[${k}]`,value:h[k],valueSpec:v.layout_symbol["text-anchor"]})),w=w.concat(lc({key:`${l}[${k+1}]`,value:h[k+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:v}));return w},sprite:mc};function ko(f){const l=f.value,h=f.valueSpec,m=f.styleSpec;return f.validateSpec=ko,h.expression&&Xi(lr(l))?ca(f):h.expression&&Qa(Ai(l))?Yi(f):h.type&&_c[h.type]?_c[h.type](f):Es(Nr({},f,{valueSpec:h.type?m[h.type]:h}))}function gc(f){const l=f.value,h=f.key,m=Qi(f);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new Ne(h,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&m.push(new Ne(h,l,'"glyphs" url must include a "{range}" token'))),m}function vs(f,l=Ze){let h=[];return h=h.concat(ko({key:"",value:f,valueSpec:l.$root,styleSpec:l,style:f,validateSpec:ko,objectElementValidators:{glyphs:gc,"*":()=>[]}})),f.constants&&(h=h.concat(ac({key:"constants",value:f.constants,style:f,styleSpec:l,validateSpec:ko}))),il(h)}function ti(f){return function(l){return f({...l,validateSpec:ko})}}function il(f){return[].concat(f).sort((l,h)=>l.line-h.line)}function ni(f){return function(...l){return il(f.apply(this,l))}}vs.source=ni(ti(dc)),vs.sprite=ni(ti(mc)),vs.glyphs=ni(ti(gc)),vs.light=ni(ti(pc)),vs.sky=ni(ti(qu)),vs.terrain=ni(ti(Hu)),vs.layer=ni(ti(fc)),vs.filter=ni(ti(rl)),vs.paintProperty=ni(ti(uc)),vs.layoutProperty=ni(ti(ju));const ua=vs,Gu=ua.light,Zu=ua.paintProperty,Wu=ua.layoutProperty;function Ku(f,l){let h=!1;if(l&&l.length)for(const m of l)f.fire(new tt(new Error(m.message))),h=!0;return h}class fa{constructor(l,h,m){const v=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const k=new Int32Array(this.arrayBuffer);l=k[0],this.d=(h=k[1])+2*(m=k[2]);for(let M=0;M<this.d*this.d;M++){const O=k[3+M],H=k[3+M+1];v.push(O===H?null:k.subarray(O,H))}const I=k[3+v.length+1];this.keys=k.subarray(k[3+v.length],I),this.bboxes=k.subarray(I),this.insert=this._insertReadonly}else{this.d=h+2*m;for(let k=0;k<this.d*this.d;k++)v.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=l,this.padding=m,this.scale=h/l,this.uid=0;const w=m/h*l;this.min=-w,this.max=l+w}insert(l,h,m,v,w){this._forEachCell(h,m,v,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,h,m,v,w,k){this.cells[w].push(k)}query(l,h,m,v,w){const k=this.min,I=this.max;if(l<=k&&h<=k&&I<=m&&I<=v&&!w)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(l,h,m,v,this._queryCell,M,{},w),M}}_queryCell(l,h,m,v,w,k,I,M){const O=this.cells[w];if(O!==null){const H=this.keys,K=this.bboxes;for(let J=0;J<O.length;J++){const se=O[J];if(I[se]===void 0){const pe=4*se;(M?M(K[pe+0],K[pe+1],K[pe+2],K[pe+3]):l<=K[pe+2]&&h<=K[pe+3]&&m>=K[pe+0]&&v>=K[pe+1])?(I[se]=!0,k.push(H[se])):I[se]=!1}}}}_forEachCell(l,h,m,v,w,k,I,M){const O=this._convertToCellCoord(l),H=this._convertToCellCoord(h),K=this._convertToCellCoord(m),J=this._convertToCellCoord(v);for(let se=O;se<=K;se++)for(let pe=H;pe<=J;pe++){const be=this.d*pe+se;if((!M||M(this._convertFromCellCoord(se),this._convertFromCellCoord(pe),this._convertFromCellCoord(se+1),this._convertFromCellCoord(pe+1)))&&w.call(this,l,h,m,v,be,k,I,M))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,h=3+this.cells.length+1+1;let m=0;for(let k=0;k<this.cells.length;k++)m+=this.cells[k].length;const v=new Int32Array(h+m+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let w=h;for(let k=0;k<l.length;k++){const I=l[k];v[3+k]=w,v.set(I,w),w+=I.length}return v[3+l.length]=w,v.set(this.keys,w),w+=this.keys.length,v[3+l.length+1]=w,v.set(this.bboxes,w),w+=this.bboxes.length,v.buffer}static serialize(l,h){const m=l.toArrayBuffer();return h&&h.push(m),{buffer:m}}static deserialize(l){return new fa(l.buffer)}}const Mi={};function Qt(f,l,h={}){if(Mi[f])throw new Error(`${f} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:f,writeable:!1}),Mi[f]={klass:l,omit:h.omit||[],shallow:h.shallow||[]}}Qt("Object",Object),Qt("TransferableGridIndex",fa),Qt("Color",Zn),Qt("Error",Error),Qt("AJAXError",At),Qt("ResolvedImage",Ns),Qt("StylePropertyFunction",ts),Qt("StyleExpression",ec,{omit:["_evaluator"]}),Qt("ZoomDependentExpression",$o),Qt("ZoomConstantExpression",tc),Qt("CompoundExpression",Vs,{omit:["_evaluate"]});for(const f in Ii)Ii[f]._classRegistryKey||Qt(`Expression_${f}`,Ii[f]);function Xu(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function ri(f,l){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error)return f;if(Xu(f)||nt(f))return l&&l.push(f),f;if(ArrayBuffer.isView(f)){const h=f;return l&&l.push(h.buffer),h}if(f instanceof ImageData)return l&&l.push(f.data.buffer),f;if(Array.isArray(f)){const h=[];for(const m of f)h.push(ri(m,l));return h}if(typeof f=="object"){const h=f.constructor,m=h._classRegistryKey;if(!m)throw new Error(`can't serialize object of unregistered class ${h.name}`);if(!Mi[m])throw new Error(`${m} is not registered.`);const v=h.serialize?h.serialize(f,l):{};if(h.serialize){if(l&&v===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in f){if(!f.hasOwnProperty(w)||Mi[m].omit.indexOf(w)>=0)continue;const k=f[w];v[w]=Mi[m].shallow.indexOf(w)>=0?k:ri(k,l)}f instanceof Error&&(v.message=f.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(v.$name=m),v}throw new Error("can't serialize object of type "+typeof f)}function ha(f){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||Xu(f)||nt(f)||ArrayBuffer.isView(f)||f instanceof ImageData)return f;if(Array.isArray(f))return f.map(ha);if(typeof f=="object"){const l=f.$name||"Object";if(!Mi[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:h}=Mi[l];if(!h)throw new Error(`can't deserialize unregistered class ${l}`);if(h.deserialize)return h.deserialize(f);const m=Object.create(h.prototype);for(const v of Object.keys(f)){if(v==="$name")continue;const w=f[v];m[v]=Mi[l].shallow.indexOf(v)>=0?w:ha(w)}return m}throw new Error("can't deserialize object of type "+typeof f)}class Ju{constructor(){this.first=!0}update(l,h){const m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}const Wt={"Latin-1 Supplement":f=>f>=128&&f<=255,Arabic:f=>f>=1536&&f<=1791,"Arabic Supplement":f=>f>=1872&&f<=1919,"Arabic Extended-A":f=>f>=2208&&f<=2303,"Hangul Jamo":f=>f>=4352&&f<=4607,"Unified Canadian Aboriginal Syllabics":f=>f>=5120&&f<=5759,Khmer:f=>f>=6016&&f<=6143,"Unified Canadian Aboriginal Syllabics Extended":f=>f>=6320&&f<=6399,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"CJK Radicals Supplement":f=>f>=11904&&f<=12031,"Kangxi Radicals":f=>f>=12032&&f<=12255,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Bopomofo:f=>f>=12544&&f<=12591,"Hangul Compatibility Jamo":f=>f>=12592&&f<=12687,Kanbun:f=>f>=12688&&f<=12703,"Bopomofo Extended":f=>f>=12704&&f<=12735,"CJK Strokes":f=>f>=12736&&f<=12783,"Katakana Phonetic Extensions":f=>f>=12784&&f<=12799,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"CJK Unified Ideographs Extension A":f=>f>=13312&&f<=19903,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Yi Syllables":f=>f>=40960&&f<=42127,"Yi Radicals":f=>f>=42128&&f<=42191,"Hangul Jamo Extended-A":f=>f>=43360&&f<=43391,"Hangul Syllables":f=>f>=44032&&f<=55215,"Hangul Jamo Extended-B":f=>f>=55216&&f<=55295,"Private Use Area":f=>f>=57344&&f<=63743,"CJK Compatibility Ideographs":f=>f>=63744&&f<=64255,"Arabic Presentation Forms-A":f=>f>=64336&&f<=65023,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Arabic Presentation Forms-B":f=>f>=65136&&f<=65279,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function vc(f){for(const l of f)if(yc(l.charCodeAt(0)))return!0;return!1}function Yu(f){for(const l of f)if(!Th(l.charCodeAt(0)))return!1;return!0}function Th(f){return!(Wt.Arabic(f)||Wt["Arabic Supplement"](f)||Wt["Arabic Extended-A"](f)||Wt["Arabic Presentation Forms-A"](f)||Wt["Arabic Presentation Forms-B"](f))}function yc(f){return!(f!==746&&f!==747&&(f<4352||!(Wt["Bopomofo Extended"](f)||Wt.Bopomofo(f)||Wt["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Wt["CJK Compatibility Ideographs"](f)||Wt["CJK Compatibility"](f)||Wt["CJK Radicals Supplement"](f)||Wt["CJK Strokes"](f)||!(!Wt["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Wt["CJK Unified Ideographs Extension A"](f)||Wt["CJK Unified Ideographs"](f)||Wt["Enclosed CJK Letters and Months"](f)||Wt["Hangul Compatibility Jamo"](f)||Wt["Hangul Jamo Extended-A"](f)||Wt["Hangul Jamo Extended-B"](f)||Wt["Hangul Jamo"](f)||Wt["Hangul Syllables"](f)||Wt.Hiragana(f)||Wt["Ideographic Description Characters"](f)||Wt.Kanbun(f)||Wt["Kangxi Radicals"](f)||Wt["Katakana Phonetic Extensions"](f)||Wt.Katakana(f)&&f!==12540||!(!Wt["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Wt["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Wt["Unified Canadian Aboriginal Syllabics"](f)||Wt["Unified Canadian Aboriginal Syllabics Extended"](f)||Wt["Vertical Forms"](f)||Wt["Yijing Hexagram Symbols"](f)||Wt["Yi Syllables"](f)||Wt["Yi Radicals"](f))))}function Di(f){return!(yc(f)||function(l){return!!(Wt["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||Wt["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||Wt["Letterlike Symbols"](l)||Wt["Number Forms"](l)||Wt["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||Wt["Control Pictures"](l)&&l!==9251||Wt["Optical Character Recognition"](l)||Wt["Enclosed Alphanumerics"](l)||Wt["Geometric Shapes"](l)||Wt["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||Wt["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||Wt["CJK Symbols and Punctuation"](l)||Wt.Katakana(l)||Wt["Private Use Area"](l)||Wt["CJK Compatibility Forms"](l)||Wt["Small Form Variants"](l)||Wt["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(f))}function bc(f){return f>=1424&&f<=2303||Wt["Arabic Presentation Forms-A"](f)||Wt["Arabic Presentation Forms-B"](f)}function $c(f,l){return!(!l&&bc(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Wt.Khmer(f))}function Qu(f){for(const l of f)if(bc(l.charCodeAt(0)))return!0;return!1}const vi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class sr{constructor(l,h){this.zoom=l,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ju,this.transition={})}isSupportedScript(l){return function(h,m){for(const v of h)if(!$c(v.charCodeAt(0),m))return!1;return!0}(l,vi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,h=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}}}class eo{constructor(l,h){this.property=l,this.value=h,this.expression=function(m,v){if(Xi(m))return new ts(m,v);if(Qa(m)){const w=oa(m,v);if(w.result==="error")throw new Error(w.value.map(k=>`${k.key}: ${k.message}`).join(", "));return w.value}{let w=m;return v.type==="color"&&typeof m=="string"?w=Zn.parse(m):v.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(w=es.parse(m)):w=Ss.parse(m),{kind:"constant",evaluate:()=>w}}}(h===void 0?l.specification.default:h,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,h,m){return this.property.possiblyEvaluate(this,l,h,m)}}class to{constructor(l){this.property=l,this.value=new eo(l,void 0)}transitioned(l,h){return new wc(this.property,this.value,h,ge({},l.transition,this.transition),l.now)}untransitioned(){return new wc(this.property,this.value,null,{},0)}}class ef{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return fe(this._values[l].value.value)}setValue(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new to(this._values[l].property)),this._values[l].value=new eo(this._values[l].property,h===null?void 0:fe(h))}getTransition(l){return fe(this._values[l].transition)}setTransition(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new to(this._values[l].property)),this._values[l].transition=fe(h)||void 0}serialize(){const l={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(l[h]=m);const v=this.getTransition(h);v!==void 0&&(l[`${h}-transition`]=v)}return l}transitioned(l,h){const m=new Co(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].transitioned(l,h._values[v]);return m}untransitioned(){const l=new Co(this._properties);for(const h of Object.keys(this._values))l._values[h]=this._values[h].untransitioned();return l}}class wc{constructor(l,h,m,v,w){this.property=l,this.value=h,this.begin=w+v.delay||0,this.end=this.begin+v.duration||0,l.specification.transition&&(v.delay||v.duration)&&(this.prior=m)}possiblyEvaluate(l,h,m){const v=l.now||0,w=this.value.possiblyEvaluate(l,h,m),k=this.prior;if(k){if(v>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(v<this.begin)return k.possiblyEvaluate(l,h,m);{const I=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(l,h,m),w,function(M){if(M<=0)return 0;if(M>=1)return 1;const O=M*M,H=O*M;return 4*(M<.5?H:3*(M-O)+H-.75)}(I))}}return w}}class Co{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,h,m){const v=new da(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(l,h,m);return v}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Ih{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return fe(this._values[l].value)}setValue(l,h){this._values[l]=new eo(this._values[l].property,h===null?void 0:fe(h))}serialize(){const l={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(l[h]=m)}return l}possiblyEvaluate(l,h,m){const v=new da(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].possiblyEvaluate(l,h,m);return v}}class si{constructor(l,h,m){this.property=l,this.value=h,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,h,m,v){return this.property.evaluate(this.value,this.parameters,l,h,m,v)}}class da{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class an{constructor(l){this.specification=l}possiblyEvaluate(l,h){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(h)}interpolate(l,h,m){const v=ls[this.specification.type];return v?v(l,h,m):l}}class ${constructor(l,h){this.specification=l,this.overrides=h}possiblyEvaluate(l,h,m,v){return new si(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(h,null,{},m,v)}:l.expression,h)}interpolate(l,h,m){if(l.value.kind!=="constant"||h.value.kind!=="constant")return l;if(l.value.value===void 0||h.value.value===void 0)return new si(this,{kind:"constant",value:void 0},l.parameters);const v=ls[this.specification.type];if(v){const w=v(l.value.value,h.value.value,m);return new si(this,{kind:"constant",value:w},l.parameters)}return l}evaluate(l,h,m,v,w,k){return l.kind==="constant"?l.value:l.evaluate(h,m,v,w,k)}}class u extends ${possiblyEvaluate(l,h,m,v){if(l.value===void 0)return new si(this,{kind:"constant",value:void 0},h);if(l.expression.kind==="constant"){const w=l.expression.evaluate(h,null,{},m,v),k=l.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,I=this._calculate(k,k,k,h);return new si(this,{kind:"constant",value:I},h)}if(l.expression.kind==="camera"){const w=this._calculate(l.expression.evaluate({zoom:h.zoom-1}),l.expression.evaluate({zoom:h.zoom}),l.expression.evaluate({zoom:h.zoom+1}),h);return new si(this,{kind:"constant",value:w},h)}return new si(this,l.expression,h)}evaluate(l,h,m,v,w,k){if(l.kind==="source"){const I=l.evaluate(h,m,v,w,k);return this._calculate(I,I,I,h)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(h.zoom)-1},m,v),l.evaluate({zoom:Math.floor(h.zoom)},m,v),l.evaluate({zoom:Math.floor(h.zoom)+1},m,v),h):l.value}_calculate(l,h,m,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:m,to:h}}interpolate(l){return l}}class p{constructor(l){this.specification=l}possiblyEvaluate(l,h,m,v){if(l.value!==void 0){if(l.expression.kind==="constant"){const w=l.expression.evaluate(h,null,{},m,v);return this._calculate(w,w,w,h)}return this._calculate(l.expression.evaluate(new sr(Math.floor(h.zoom-1),h)),l.expression.evaluate(new sr(Math.floor(h.zoom),h)),l.expression.evaluate(new sr(Math.floor(h.zoom+1),h)),h)}}_calculate(l,h,m,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:m,to:h}}interpolate(l){return l}}class g{constructor(l){this.specification=l}possiblyEvaluate(l,h,m,v){return!!l.expression.evaluate(h,null,{},m,v)}interpolate(){return!1}}class y{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in l){const m=l[h];m.specification.overridable&&this.overridableProperties.push(h);const v=this.defaultPropertyValues[h]=new eo(m,void 0),w=this.defaultTransitionablePropertyValues[h]=new to(m);this.defaultTransitioningPropertyValues[h]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=v.possiblyEvaluate({})}}}Qt("DataDrivenProperty",$),Qt("DataConstantProperty",an),Qt("CrossFadedDataDrivenProperty",u),Qt("CrossFadedProperty",p),Qt("ColorRampProperty",g);const C="-transition";class A extends yn{constructor(l,h){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),h.layout&&(this._unevaluatedLayout=new Ih(h.layout)),h.paint)){this._transitionablePaint=new ef(h.paint);for(const m in l.paint)this.setPaintProperty(m,l.paint[m],{validate:!1});for(const m in l.layout)this.setLayoutProperty(m,l.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new da(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,h,m={}){h!=null&&this._validate(Wu,`layers.${this.id}.layout.${l}`,l,h,m)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,h):this.visibility=h)}getPaintProperty(l){return l.endsWith(C)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,h,m={}){if(h!=null&&this._validate(Zu,`layers.${this.id}.paint.${l}`,l,h,m))return!1;if(l.endsWith(C))return this._transitionablePaint.setTransition(l.slice(0,-11),h||void 0),!1;{const v=this._transitionablePaint._values[l],w=v.property.specification["property-type"]==="cross-faded-data-driven",k=v.value.isDataDriven(),I=v.value;this._transitionablePaint.setValue(l,h),this._handleSpecialPaintPropertyUpdate(l);const M=this._transitionablePaint._values[l].value;return M.isDataDriven()||k||w||this._handleOverridablePaintPropertyUpdate(l,I,M)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,h,m){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,h){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,h)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),ee(l,(h,m)=>!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length))}_validate(l,h,m,v,w={}){return(!w||w.validate!==!1)&&Ku(this,l.call(ua,{key:h,layerType:this.type,objectKey:m,value:v,styleSpec:Ze,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const h=this.paint.get(l);if(h instanceof si&&bo(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const z={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class F{constructor(l,h){this._structArray=l,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class q{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,h){return l._trim(),h&&(l.isTransferred=!0,h.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const h=Object.create(this.prototype);return h.arrayBuffer=l.arrayBuffer,h.length=l.length,h.capacity=l.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function X(f,l=1){let h=0,m=0;return{members:f.map(v=>{const w=z[v.type].BYTES_PER_ELEMENT,k=h=Y(h,Math.max(l,w)),I=v.components||1;return m=Math.max(m,w),h+=w*I,{name:v.name,type:v.type,components:I,offset:k}}),size:Y(h,Math.max(m,l)),alignment:l}}function Y(f,l){return Math.ceil(f/l)*l}class de extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h){const m=this.length;return this.resize(m+1),this.emplace(m,l,h)}emplace(l,h,m){const v=2*l;return this.int16[v+0]=h,this.int16[v+1]=m,l}}de.prototype.bytesPerElement=4,Qt("StructArrayLayout2i4",de);class Ce extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,l,h,m)}emplace(l,h,m,v){const w=3*l;return this.int16[w+0]=h,this.int16[w+1]=m,this.int16[w+2]=v,l}}Ce.prototype.bytesPerElement=6,Qt("StructArrayLayout3i6",Ce);class Te extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,l,h,m,v)}emplace(l,h,m,v,w){const k=4*l;return this.int16[k+0]=h,this.int16[k+1]=m,this.int16[k+2]=v,this.int16[k+3]=w,l}}Te.prototype.bytesPerElement=8,Qt("StructArrayLayout4i8",Te);class Ae extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,v,w,k){const I=this.length;return this.resize(I+1),this.emplace(I,l,h,m,v,w,k)}emplace(l,h,m,v,w,k,I){const M=6*l;return this.int16[M+0]=h,this.int16[M+1]=m,this.int16[M+2]=v,this.int16[M+3]=w,this.int16[M+4]=k,this.int16[M+5]=I,l}}Ae.prototype.bytesPerElement=12,Qt("StructArrayLayout2i4i12",Ae);class xe extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,v,w,k){const I=this.length;return this.resize(I+1),this.emplace(I,l,h,m,v,w,k)}emplace(l,h,m,v,w,k,I){const M=4*l,O=8*l;return this.int16[M+0]=h,this.int16[M+1]=m,this.uint8[O+4]=v,this.uint8[O+5]=w,this.uint8[O+6]=k,this.uint8[O+7]=I,l}}xe.prototype.bytesPerElement=8,Qt("StructArrayLayout2i4ub8",xe);class Oe extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h){const m=this.length;return this.resize(m+1),this.emplace(m,l,h)}emplace(l,h,m){const v=2*l;return this.float32[v+0]=h,this.float32[v+1]=m,l}}Oe.prototype.bytesPerElement=8,Qt("StructArrayLayout2f8",Oe);class Ye extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,v,w,k,I,M,O,H){const K=this.length;return this.resize(K+1),this.emplace(K,l,h,m,v,w,k,I,M,O,H)}emplace(l,h,m,v,w,k,I,M,O,H,K){const J=10*l;return this.uint16[J+0]=h,this.uint16[J+1]=m,this.uint16[J+2]=v,this.uint16[J+3]=w,this.uint16[J+4]=k,this.uint16[J+5]=I,this.uint16[J+6]=M,this.uint16[J+7]=O,this.uint16[J+8]=H,this.uint16[J+9]=K,l}}Ye.prototype.bytesPerElement=20,Qt("StructArrayLayout10ui20",Ye);class De extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,v,w,k,I,M,O,H,K,J){const se=this.length;return this.resize(se+1),this.emplace(se,l,h,m,v,w,k,I,M,O,H,K,J)}emplace(l,h,m,v,w,k,I,M,O,H,K,J,se){const pe=12*l;return this.int16[pe+0]=h,this.int16[pe+1]=m,this.int16[pe+2]=v,this.int16[pe+3]=w,this.uint16[pe+4]=k,this.uint16[pe+5]=I,this.uint16[pe+6]=M,this.uint16[pe+7]=O,this.int16[pe+8]=H,this.int16[pe+9]=K,this.int16[pe+10]=J,this.int16[pe+11]=se,l}}De.prototype.bytesPerElement=24,Qt("StructArrayLayout4i4ui4i24",De);class He extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,l,h,m)}emplace(l,h,m,v){const w=3*l;return this.float32[w+0]=h,this.float32[w+1]=m,this.float32[w+2]=v,l}}He.prototype.bytesPerElement=12,Qt("StructArrayLayout3f12",He);class Qe extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint32[1*l+0]=h,l}}Qe.prototype.bytesPerElement=4,Qt("StructArrayLayout1ul4",Qe);class et extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,v,w,k,I,M,O){const H=this.length;return this.resize(H+1),this.emplace(H,l,h,m,v,w,k,I,M,O)}emplace(l,h,m,v,w,k,I,M,O,H){const K=10*l,J=5*l;return this.int16[K+0]=h,this.int16[K+1]=m,this.int16[K+2]=v,this.int16[K+3]=w,this.int16[K+4]=k,this.int16[K+5]=I,this.uint32[J+3]=M,this.uint16[K+8]=O,this.uint16[K+9]=H,l}}et.prototype.bytesPerElement=20,Qt("StructArrayLayout6i1ul2ui20",et);class at extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,v,w,k){const I=this.length;return this.resize(I+1),this.emplace(I,l,h,m,v,w,k)}emplace(l,h,m,v,w,k,I){const M=6*l;return this.int16[M+0]=h,this.int16[M+1]=m,this.int16[M+2]=v,this.int16[M+3]=w,this.int16[M+4]=k,this.int16[M+5]=I,l}}at.prototype.bytesPerElement=12,Qt("StructArrayLayout2i2i2i12",at);class Et extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,v,w){const k=this.length;return this.resize(k+1),this.emplace(k,l,h,m,v,w)}emplace(l,h,m,v,w,k){const I=4*l,M=8*l;return this.float32[I+0]=h,this.float32[I+1]=m,this.float32[I+2]=v,this.int16[M+6]=w,this.int16[M+7]=k,l}}Et.prototype.bytesPerElement=16,Qt("StructArrayLayout2f1f2i16",Et);class bt extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,l,h,m,v)}emplace(l,h,m,v,w){const k=12*l,I=3*l;return this.uint8[k+0]=h,this.uint8[k+1]=m,this.float32[I+1]=v,this.float32[I+2]=w,l}}bt.prototype.bytesPerElement=12,Qt("StructArrayLayout2ub2f12",bt);class Rt extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,l,h,m)}emplace(l,h,m,v){const w=3*l;return this.uint16[w+0]=h,this.uint16[w+1]=m,this.uint16[w+2]=v,l}}Rt.prototype.bytesPerElement=6,Qt("StructArrayLayout3ui6",Rt);class Xt extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,v,w,k,I,M,O,H,K,J,se,pe,be,Ee,ze){const Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,l,h,m,v,w,k,I,M,O,H,K,J,se,pe,be,Ee,ze)}emplace(l,h,m,v,w,k,I,M,O,H,K,J,se,pe,be,Ee,ze,Ke){const Re=24*l,Ge=12*l,ft=48*l;return this.int16[Re+0]=h,this.int16[Re+1]=m,this.uint16[Re+2]=v,this.uint16[Re+3]=w,this.uint32[Ge+2]=k,this.uint32[Ge+3]=I,this.uint32[Ge+4]=M,this.uint16[Re+10]=O,this.uint16[Re+11]=H,this.uint16[Re+12]=K,this.float32[Ge+7]=J,this.float32[Ge+8]=se,this.uint8[ft+36]=pe,this.uint8[ft+37]=be,this.uint8[ft+38]=Ee,this.uint32[Ge+10]=ze,this.int16[Re+22]=Ke,l}}Xt.prototype.bytesPerElement=48,Qt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Xt);class Sn extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,v,w,k,I,M,O,H,K,J,se,pe,be,Ee,ze,Ke,Re,Ge,ft,_t,Kt,rn,Gt,jt,en,ln){const Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,l,h,m,v,w,k,I,M,O,H,K,J,se,pe,be,Ee,ze,Ke,Re,Ge,ft,_t,Kt,rn,Gt,jt,en,ln)}emplace(l,h,m,v,w,k,I,M,O,H,K,J,se,pe,be,Ee,ze,Ke,Re,Ge,ft,_t,Kt,rn,Gt,jt,en,ln,Zt){const gt=32*l,nn=16*l;return this.int16[gt+0]=h,this.int16[gt+1]=m,this.int16[gt+2]=v,this.int16[gt+3]=w,this.int16[gt+4]=k,this.int16[gt+5]=I,this.int16[gt+6]=M,this.int16[gt+7]=O,this.uint16[gt+8]=H,this.uint16[gt+9]=K,this.uint16[gt+10]=J,this.uint16[gt+11]=se,this.uint16[gt+12]=pe,this.uint16[gt+13]=be,this.uint16[gt+14]=Ee,this.uint16[gt+15]=ze,this.uint16[gt+16]=Ke,this.uint16[gt+17]=Re,this.uint16[gt+18]=Ge,this.uint16[gt+19]=ft,this.uint16[gt+20]=_t,this.uint16[gt+21]=Kt,this.uint16[gt+22]=rn,this.uint32[nn+12]=Gt,this.float32[nn+13]=jt,this.float32[nn+14]=en,this.uint16[gt+30]=ln,this.uint16[gt+31]=Zt,l}}Sn.prototype.bytesPerElement=64,Qt("StructArrayLayout8i15ui1ul2f2ui64",Sn);class Nt extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.float32[1*l+0]=h,l}}Nt.prototype.bytesPerElement=4,Qt("StructArrayLayout1f4",Nt);class gn extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,l,h,m)}emplace(l,h,m,v){const w=3*l;return this.uint16[6*l+0]=h,this.float32[w+1]=m,this.float32[w+2]=v,l}}gn.prototype.bytesPerElement=12,Qt("StructArrayLayout1ui2f12",gn);class Tn extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,l,h,m)}emplace(l,h,m,v){const w=4*l;return this.uint32[2*l+0]=h,this.uint16[w+2]=m,this.uint16[w+3]=v,l}}Tn.prototype.bytesPerElement=8,Qt("StructArrayLayout1ul2ui8",Tn);class On extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h){const m=this.length;return this.resize(m+1),this.emplace(m,l,h)}emplace(l,h,m){const v=2*l;return this.uint16[v+0]=h,this.uint16[v+1]=m,l}}On.prototype.bytesPerElement=4,Qt("StructArrayLayout2ui4",On);class vn extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint16[1*l+0]=h,l}}vn.prototype.bytesPerElement=2,Qt("StructArrayLayout1ui2",vn);class En extends q{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,v){const w=this.length;return this.resize(w+1),this.emplace(w,l,h,m,v)}emplace(l,h,m,v,w){const k=4*l;return this.float32[k+0]=h,this.float32[k+1]=m,this.float32[k+2]=v,this.float32[k+3]=w,l}}En.prototype.bytesPerElement=16,Qt("StructArrayLayout4f16",En);class Dn extends F{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}Dn.prototype.size=20;class _r extends et{get(l){return new Dn(this,l)}}Qt("CollisionBoxArray",_r);class er extends F{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}er.prototype.size=48;class Ps extends Xt{get(l){return new er(this,l)}}Qt("PlacedSymbolArray",Ps);class qr extends F{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}qr.prototype.size=64;class gr extends Sn{get(l){return new qr(this,l)}}Qt("SymbolInstanceArray",gr);class ys extends Nt{getoffsetX(l){return this.float32[1*l+0]}}Qt("GlyphOffsetArray",ys);class Gs extends Ce{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}Qt("SymbolLineVertexArray",Gs);class ii extends F{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ii.prototype.size=12;class zi extends gn{get(l){return new ii(this,l)}}Qt("TextAnchorOffsetArray",zi);class So extends F{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}So.prototype.size=8;class no extends Tn{get(l){return new So(this,l)}}Qt("FeatureIndexArray",no);class ro extends de{}class cs extends de{}class ns extends de{}class us extends Ae{}class pa extends xe{}class Mr extends Oe{}class fr extends Ye{}class Us extends De{}class Dr extends He{}class Eh extends Qe{}class tf extends at{}class Ph extends bt{}class To extends Rt{}class xc extends On{}const Ah=X([{name:"a_pos",components:2,type:"Int16"}],4),{members:Io}=Ah;class Hr{constructor(l=[]){this.segments=l}prepareSegment(l,h,m,v){let w=this.segments[this.segments.length-1];return l>Hr.MAX_VERTEX_ARRAY_LENGTH&&he(`Max vertices per segment is ${Hr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!w||w.vertexLength+l>Hr.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==v)&&(w={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},v!==void 0&&(w.sortKey=v),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const l of this.segments)for(const h in l.vaos)l.vaos[h].destroy()}static simpleSegment(l,h,m,v){return new Hr([{vertexOffset:l,primitiveOffset:h,vertexLength:m,primitiveLength:v,vaos:{},sortKey:0}])}}function kc(f,l){return 256*(f=re(Math.floor(f),0,255))+re(Math.floor(l),0,255)}Hr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qt("SegmentVector",Hr);const ma=X([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Eo={exports:{}},Cc={exports:{}};Cc.exports=function(f,l){var h,m,v,w,k,I,M,O;for(m=f.length-(h=3&f.length),v=l,k=3432918353,I=461845907,O=0;O<m;)M=255&f.charCodeAt(O)|(255&f.charCodeAt(++O))<<8|(255&f.charCodeAt(++O))<<16|(255&f.charCodeAt(++O))<<24,++O,v=27492+(65535&(w=5*(65535&(v=(v^=M=(65535&(M=(M=(65535&M)*k+(((M>>>16)*k&65535)<<16)&4294967295)<<15|M>>>17))*I+(((M>>>16)*I&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(M=0,h){case 3:M^=(255&f.charCodeAt(O+2))<<16;case 2:M^=(255&f.charCodeAt(O+1))<<8;case 1:v^=M=(65535&(M=(M=(65535&(M^=255&f.charCodeAt(O)))*k+(((M>>>16)*k&65535)<<16)&4294967295)<<15|M>>>17))*I+(((M>>>16)*I&65535)<<16)&4294967295}return v^=f.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0};var Sc=Cc.exports,Ep={exports:{}};Ep.exports=function(f,l){for(var h,m=f.length,v=l^m,w=0;m>=4;)h=1540483477*(65535&(h=255&f.charCodeAt(w)|(255&f.charCodeAt(++w))<<8|(255&f.charCodeAt(++w))<<16|(255&f.charCodeAt(++w))<<24))+((1540483477*(h>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++w;switch(m){case 3:v^=(255&f.charCodeAt(w+2))<<16;case 2:v^=(255&f.charCodeAt(w+1))<<8;case 1:v=1540483477*(65535&(v^=255&f.charCodeAt(w)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0};var Pp=Sc,hb=Ep.exports;Eo.exports=Pp,Eo.exports.murmur3=Pp,Eo.exports.murmur2=hb;var Mh=c(Eo.exports);class nf{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,h,m,v){this.ids.push(Ap(l)),this.positions.push(h,m,v)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=Ap(l);let m=0,v=this.ids.length-1;for(;m<v;){const k=m+v>>1;this.ids[k]>=h?v=k:m=k+1}const w=[];for(;this.ids[m]===h;)w.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return w}static serialize(l,h){const m=new Float64Array(l.ids),v=new Uint32Array(l.positions);return Dh(m,v,0,m.length-1),h&&h.push(m.buffer,v.buffer),{ids:m,positions:v}}static deserialize(l){const h=new nf;return h.ids=l.ids,h.positions=l.positions,h.indexed=!0,h}}function Ap(f){const l=+f;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Mh(String(f))}function Dh(f,l,h,m){for(;h<m;){const v=f[h+m>>1];let w=h-1,k=m+1;for(;;){do w++;while(f[w]<v);do k--;while(f[k]>v);if(w>=k)break;rf(f,w,k),rf(l,3*w,3*k),rf(l,3*w+1,3*k+1),rf(l,3*w+2,3*k+2)}k-h<m-k?(Dh(f,l,h,k),h=k+1):(Dh(f,l,k+1,m),m=k)}}function rf(f,l,h){const m=f[l];f[l]=f[h],f[h]=m}Qt("FeaturePositionMap",nf);class _a{constructor(l,h){this.gl=l.gl,this.location=h}}class sf extends _a{constructor(l,h){super(l,h),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Mp extends _a{constructor(l,h){super(l,h),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Dp extends _a{constructor(l,h){super(l,h),this.current=Zn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const db=new Float32Array(16);function zh(f){return[kc(255*f.r,255*f.g),kc(255*f.b,255*f.a)]}class Tc{constructor(l,h,m){this.value=l,this.uniformNames=h.map(v=>`u_${v}`),this.type=m}setUniform(l,h,m){l.set(m.constantOr(this.value))}getBinding(l,h,m){return this.type==="color"?new Dp(l,h):new sf(l,h)}}class ol{constructor(l,h){this.uniformNames=h.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=l.tlbr}setUniform(l,h,m,v){const w=v==="u_pattern_to"?this.patternTo:v==="u_pattern_from"?this.patternFrom:v==="u_pixel_ratio_to"?this.pixelRatioTo:v==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&l.set(w)}getBinding(l,h,m){return m.substr(0,9)==="u_pattern"?new Mp(l,h):new sf(l,h)}}class so{constructor(l,h,m,v){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(w=>({name:`a_${w}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new v}populatePaintArray(l,h,m,v,w){const k=this.paintVertexArray.length,I=this.expression.evaluate(new sr(0),h,{},v,[],w);this.paintVertexArray.resize(l),this._setPaintValue(k,l,I)}updatePaintArray(l,h,m,v){const w=this.expression.evaluate({zoom:0},m,v);this._setPaintValue(l,h,w)}_setPaintValue(l,h,m){if(this.type==="color"){const v=zh(m);for(let w=l;w<h;w++)this.paintVertexArray.emplace(w,v[0],v[1])}else{for(let v=l;v<h;v++)this.paintVertexArray.emplace(v,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class yi{constructor(l,h,m,v,w,k){this.expression=l,this.uniformNames=h.map(I=>`u_${I}_t`),this.type=m,this.useIntegerZoom=v,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=h.map(I=>({name:`a_${I}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new k}populatePaintArray(l,h,m,v,w){const k=this.expression.evaluate(new sr(this.zoom),h,{},v,[],w),I=this.expression.evaluate(new sr(this.zoom+1),h,{},v,[],w),M=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(M,l,k,I)}updatePaintArray(l,h,m,v){const w=this.expression.evaluate({zoom:this.zoom},m,v),k=this.expression.evaluate({zoom:this.zoom+1},m,v);this._setPaintValue(l,h,w,k)}_setPaintValue(l,h,m,v){if(this.type==="color"){const w=zh(m),k=zh(v);for(let I=l;I<h;I++)this.paintVertexArray.emplace(I,w[0],w[1],k[0],k[1])}else{for(let w=l;w<h;w++)this.paintVertexArray.emplace(w,m,v);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(v))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,h){const m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,v=re(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(v)}getBinding(l,h,m){return new sf(l,h)}}class Po{constructor(l,h,m,v,w,k){this.expression=l,this.type=h,this.useIntegerZoom=m,this.zoom=v,this.layerId=k,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(l,h,m){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(v,l,h.patterns&&h.patterns[this.layerId],m)}updatePaintArray(l,h,m,v,w){this._setPaintValues(l,h,m.patterns&&m.patterns[this.layerId],w)}_setPaintValues(l,h,m,v){if(!v||!m)return;const{min:w,mid:k,max:I}=m,M=v[w],O=v[k],H=v[I];if(M&&O&&H)for(let K=l;K<h;K++)this.zoomInPaintVertexArray.emplace(K,O.tl[0],O.tl[1],O.br[0],O.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],O.pixelRatio,M.pixelRatio),this.zoomOutPaintVertexArray.emplace(K,O.tl[0],O.tl[1],O.br[0],O.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],O.pixelRatio,H.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,ma.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,ma.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class zp{constructor(l,h,m){this.binders={},this._buffers=[];const v=[];for(const w in l.paint._values){if(!m(w))continue;const k=l.paint.get(w);if(!(k instanceof si&&bo(k.property.specification)))continue;const I=pb(w,l.type),M=k.value,O=k.property.specification.type,H=k.property.useIntegerZoom,K=k.property.specification["property-type"],J=K==="cross-faded"||K==="cross-faded-data-driven";if(M.kind==="constant")this.binders[w]=J?new ol(M.value,I):new Tc(M.value,I,O),v.push(`/u_${w}`);else if(M.kind==="source"||J){const se=Lp(w,O,"source");this.binders[w]=J?new Po(M,O,H,h,se,l.id):new so(M,I,O,se),v.push(`/a_${w}`)}else{const se=Lp(w,O,"composite");this.binders[w]=new yi(M,I,O,H,h,se),v.push(`/z_${w}`)}}this.cacheKey=v.sort().join("")}getMaxValue(l){const h=this.binders[l];return h instanceof so||h instanceof yi?h.maxValue:0}populatePaintArrays(l,h,m,v,w){for(const k in this.binders){const I=this.binders[k];(I instanceof so||I instanceof yi||I instanceof Po)&&I.populatePaintArray(l,h,m,v,w)}}setConstantPatternPositions(l,h){for(const m in this.binders){const v=this.binders[m];v instanceof ol&&v.setConstantPatternPositions(l,h)}}updatePaintArrays(l,h,m,v,w){let k=!1;for(const I in l){const M=h.getPositions(I);for(const O of M){const H=m.feature(O.index);for(const K in this.binders){const J=this.binders[K];if((J instanceof so||J instanceof yi||J instanceof Po)&&J.expression.isStateDependent===!0){const se=v.paint.get(K);J.expression=se.value,J.updatePaintArray(O.start,O.end,H,l[I],w),k=!0}}}}return k}defines(){const l=[];for(const h in this.binders){const m=this.binders[h];(m instanceof Tc||m instanceof ol)&&l.push(...m.uniformNames.map(v=>`#define HAS_UNIFORM_${v}`))}return l}getBinderAttributes(){const l=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof so||m instanceof yi)for(let v=0;v<m.paintVertexAttributes.length;v++)l.push(m.paintVertexAttributes[v].name);else if(m instanceof Po)for(let v=0;v<ma.members.length;v++)l.push(ma.members[v].name)}return l}getBinderUniforms(){const l=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof Tc||m instanceof ol||m instanceof yi)for(const v of m.uniformNames)l.push(v)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,h){const m=[];for(const v in this.binders){const w=this.binders[v];if(w instanceof Tc||w instanceof ol||w instanceof yi){for(const k of w.uniformNames)if(h[k]){const I=w.getBinding(l,h[k],k);m.push({name:k,property:v,binding:I})}}}return m}setUniforms(l,h,m,v){for(const{name:w,property:k,binding:I}of h)this.binders[k].setUniform(I,v,m.get(k),w)}updatePaintBuffers(l){this._buffers=[];for(const h in this.binders){const m=this.binders[h];if(l&&m instanceof Po){const v=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(m instanceof so||m instanceof yi)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(const h in this.binders){const m=this.binders[h];(m instanceof so||m instanceof yi||m instanceof Po)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const h=this.binders[l];(h instanceof so||h instanceof yi||h instanceof Po)&&h.destroy()}}}class ga{constructor(l,h,m=()=>!0){this.programConfigurations={};for(const v of l)this.programConfigurations[v.id]=new zp(v,h,m);this.needsUpload=!1,this._featureMap=new nf,this._bufferOffset=0}populatePaintArrays(l,h,m,v,w,k){for(const I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(l,h,v,w,k);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,h,m,v){for(const w of m)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(l,this._featureMap,h,w,v)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function pb(f,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${l}-`,"").replace(/-/g,"_")]}function Lp(f,l,h){const m={color:{source:Oe,composite:En},number:{source:Nt,composite:Oe}},v=function(w){return{"line-pattern":{source:fr,composite:fr},"fill-pattern":{source:fr,composite:fr},"fill-extrusion-pattern":{source:fr,composite:fr}}[w]}(f);return v&&v[h]||m[l][h]}Qt("ConstantBinder",Tc),Qt("CrossFadedConstantBinder",ol),Qt("SourceExpressionBinder",so),Qt("CrossFadedCompositeBinder",Po),Qt("CompositeExpressionBinder",yi),Qt("ProgramConfiguration",zp,{omit:["_buffers"]}),Qt("ProgramConfigurationSet",ga);const kr=8192,Lh=Math.pow(2,14)-1,Rp=-Lh-1;function va(f){const l=kr/f.extent,h=f.loadGeometry();for(let m=0;m<h.length;m++){const v=h[m];for(let w=0;w<v.length;w++){const k=v[w],I=Math.round(k.x*l),M=Math.round(k.y*l);k.x=re(I,Rp,Lh),k.y=re(M,Rp,Lh),(I<k.x||I>k.x+1||M<k.y||M>k.y+1)&&he("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function ya(f,l){return{type:f.type,id:f.id,properties:f.properties,geometry:l?va(f):[]}}function of(f,l,h,m,v){f.emplaceBack(2*l+(m+1)/2,2*h+(v+1)/2)}class Rh{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(h=>h.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new cs,this.indexArray=new To,this.segments=new Hr,this.programConfigurations=new ga(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(l,h,m){const v=this.layers[0],w=[];let k=null,I=!1;v.type==="circle"&&(k=v.layout.get("circle-sort-key"),I=!k.isConstant());for(const{feature:M,id:O,index:H,sourceLayerIndex:K}of l){const J=this.layers[0]._featureFilter.needGeometry,se=ya(M,J);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),se,m))continue;const pe=I?k.evaluate(se,{},m):void 0,be={id:O,properties:M.properties,type:M.type,sourceLayerIndex:K,index:H,geometry:J?se.geometry:va(M),patterns:{},sortKey:pe};w.push(be)}I&&w.sort((M,O)=>M.sortKey-O.sortKey);for(const M of w){const{geometry:O,index:H,sourceLayerIndex:K}=M,J=l[H].feature;this.addFeature(M,O,H,m),h.featureIndex.insert(J,O,H,K,this.index)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Io),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,h,m,v){for(const w of h)for(const k of w){const I=k.x,M=k.y;if(I<0||I>=kr||M<0||M>=kr)continue;const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),H=O.vertexLength;of(this.layoutVertexArray,I,M,-1,-1),of(this.layoutVertexArray,I,M,1,-1),of(this.layoutVertexArray,I,M,1,1),of(this.layoutVertexArray,I,M,-1,1),this.indexArray.emplaceBack(H,H+1,H+2),this.indexArray.emplaceBack(H,H+3,H+2),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{},v)}}function Op(f,l){for(let h=0;h<f.length;h++)if(al(l,f[h]))return!0;for(let h=0;h<l.length;h++)if(al(f,l[h]))return!0;return!!Oh(f,l)}function mb(f,l,h){return!!al(f,l)||!!Fh(l,f,h)}function Fp(f,l){if(f.length===1)return Np(l,f[0]);for(let h=0;h<l.length;h++){const m=l[h];for(let v=0;v<m.length;v++)if(al(f,m[v]))return!0}for(let h=0;h<f.length;h++)if(Np(l,f[h]))return!0;for(let h=0;h<l.length;h++)if(Oh(f,l[h]))return!0;return!1}function _b(f,l,h){if(f.length>1){if(Oh(f,l))return!0;for(let m=0;m<l.length;m++)if(Fh(l[m],f,h))return!0}for(let m=0;m<f.length;m++)if(Fh(f[m],l,h))return!0;return!1}function Oh(f,l){if(f.length===0||l.length===0)return!1;for(let h=0;h<f.length-1;h++){const m=f[h],v=f[h+1];for(let w=0;w<l.length-1;w++)if(gb(m,v,l[w],l[w+1]))return!0}return!1}function gb(f,l,h,m){return ke(f,h,m)!==ke(l,h,m)&&ke(f,l,h)!==ke(f,l,m)}function Fh(f,l,h){const m=h*h;if(l.length===1)return f.distSqr(l[0])<m;for(let v=1;v<l.length;v++)if(Bp(f,l[v-1],l[v])<m)return!0;return!1}function Bp(f,l,h){const m=l.distSqr(h);if(m===0)return f.distSqr(l);const v=((f.x-l.x)*(h.x-l.x)+(f.y-l.y)*(h.y-l.y))/m;return f.distSqr(v<0?l:v>1?h:h.sub(l)._mult(v)._add(l))}function Np(f,l){let h,m,v,w=!1;for(let k=0;k<f.length;k++){h=f[k];for(let I=0,M=h.length-1;I<h.length;M=I++)m=h[I],v=h[M],m.y>l.y!=v.y>l.y&&l.x<(v.x-m.x)*(l.y-m.y)/(v.y-m.y)+m.x&&(w=!w)}return w}function al(f,l){let h=!1;for(let m=0,v=f.length-1;m<f.length;v=m++){const w=f[m],k=f[v];w.y>l.y!=k.y>l.y&&l.x<(k.x-w.x)*(l.y-w.y)/(k.y-w.y)+w.x&&(h=!h)}return h}function vb(f,l,h){const m=h[0],v=h[2];if(f.x<m.x&&l.x<m.x||f.x>v.x&&l.x>v.x||f.y<m.y&&l.y<m.y||f.y>v.y&&l.y>v.y)return!1;const w=ke(f,l,h[0]);return w!==ke(f,l,h[1])||w!==ke(f,l,h[2])||w!==ke(f,l,h[3])}function Ic(f,l,h){const m=l.paint.get(f).value;return m.kind==="constant"?m.value:h.programConfigurations.get(l.id).getMaxValue(f)}function af(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function lf(f,l,h,m,v){if(!l[0]&&!l[1])return f;const w=b.convert(l)._mult(v);h==="viewport"&&w._rotate(-m);const k=[];for(let I=0;I<f.length;I++)k.push(f[I].sub(w));return k}let Vp,Up;Qt("CircleBucket",Rh,{omit:["layers"]});var yb={get paint(){return Up=Up||new y({"circle-radius":new $(Ze.paint_circle["circle-radius"]),"circle-color":new $(Ze.paint_circle["circle-color"]),"circle-blur":new $(Ze.paint_circle["circle-blur"]),"circle-opacity":new $(Ze.paint_circle["circle-opacity"]),"circle-translate":new an(Ze.paint_circle["circle-translate"]),"circle-translate-anchor":new an(Ze.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new an(Ze.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new an(Ze.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new $(Ze.paint_circle["circle-stroke-width"]),"circle-stroke-color":new $(Ze.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new $(Ze.paint_circle["circle-stroke-opacity"])})},get layout(){return Vp=Vp||new y({"circle-sort-key":new $(Ze.layout_circle["circle-sort-key"])})}},bs=1e-6,ll=typeof Float32Array<"u"?Float32Array:Array;function Bh(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function jp(f,l,h){var m=l[0],v=l[1],w=l[2],k=l[3],I=l[4],M=l[5],O=l[6],H=l[7],K=l[8],J=l[9],se=l[10],pe=l[11],be=l[12],Ee=l[13],ze=l[14],Ke=l[15],Re=h[0],Ge=h[1],ft=h[2],_t=h[3];return f[0]=Re*m+Ge*I+ft*K+_t*be,f[1]=Re*v+Ge*M+ft*J+_t*Ee,f[2]=Re*w+Ge*O+ft*se+_t*ze,f[3]=Re*k+Ge*H+ft*pe+_t*Ke,f[4]=(Re=h[4])*m+(Ge=h[5])*I+(ft=h[6])*K+(_t=h[7])*be,f[5]=Re*v+Ge*M+ft*J+_t*Ee,f[6]=Re*w+Ge*O+ft*se+_t*ze,f[7]=Re*k+Ge*H+ft*pe+_t*Ke,f[8]=(Re=h[8])*m+(Ge=h[9])*I+(ft=h[10])*K+(_t=h[11])*be,f[9]=Re*v+Ge*M+ft*J+_t*Ee,f[10]=Re*w+Ge*O+ft*se+_t*ze,f[11]=Re*k+Ge*H+ft*pe+_t*Ke,f[12]=(Re=h[12])*m+(Ge=h[13])*I+(ft=h[14])*K+(_t=h[15])*be,f[13]=Re*v+Ge*M+ft*J+_t*Ee,f[14]=Re*w+Ge*O+ft*se+_t*ze,f[15]=Re*k+Ge*H+ft*pe+_t*Ke,f}Math.hypot||(Math.hypot=function(){for(var f=0,l=arguments.length;l--;)f+=arguments[l]*arguments[l];return Math.sqrt(f)});var Ec,bb=jp;function cf(f,l,h){var m=l[0],v=l[1],w=l[2],k=l[3];return f[0]=h[0]*m+h[4]*v+h[8]*w+h[12]*k,f[1]=h[1]*m+h[5]*v+h[9]*w+h[13]*k,f[2]=h[2]*m+h[6]*v+h[10]*w+h[14]*k,f[3]=h[3]*m+h[7]*v+h[11]*w+h[15]*k,f}Ec=new ll(4),ll!=Float32Array&&(Ec[0]=0,Ec[1]=0,Ec[2]=0,Ec[3]=0);class $b extends A{constructor(l){super(l,yb)}createBucket(l){return new Rh(l)}queryRadius(l){const h=l;return Ic("circle-radius",this,h)+Ic("circle-stroke-width",this,h)+af(this.paint.get("circle-translate"))}queryIntersectsFeature(l,h,m,v,w,k,I,M){const O=lf(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,I),H=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),K=this.paint.get("circle-pitch-alignment")==="map",J=K?O:function(pe,be){return pe.map(Ee=>qp(Ee,be))}(O,M),se=K?H*I:H;for(const pe of v)for(const be of pe){const Ee=K?be:qp(be,M);let ze=se;const Ke=cf([],[be.x,be.y,0,1],M);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ze*=Ke[3]/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ze*=k.cameraToCenterDistance/Ke[3]),mb(J,Ee,ze))return!0}return!1}}function qp(f,l){const h=cf([],[f.x,f.y,0,1],l);return new b(h[0]/h[3],h[1]/h[3])}class Hp extends Rh{}let Gp;Qt("HeatmapBucket",Hp,{omit:["layers"]});var wb={get paint(){return Gp=Gp||new y({"heatmap-radius":new $(Ze.paint_heatmap["heatmap-radius"]),"heatmap-weight":new $(Ze.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new an(Ze.paint_heatmap["heatmap-intensity"]),"heatmap-color":new g(Ze.paint_heatmap["heatmap-color"]),"heatmap-opacity":new an(Ze.paint_heatmap["heatmap-opacity"])})}};function Nh(f,{width:l,height:h},m,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==l*h*m)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${l*h*m}`)}else v=new Uint8Array(l*h*m);return f.width=l,f.height=h,f.data=v,f}function Zp(f,{width:l,height:h},m){if(l===f.width&&h===f.height)return;const v=Nh({},{width:l,height:h},m);Vh(f,v,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,l),height:Math.min(f.height,h)},m),f.width=l,f.height=h,f.data=v.data}function Vh(f,l,h,m,v,w){if(v.width===0||v.height===0)return l;if(v.width>f.width||v.height>f.height||h.x>f.width-v.width||h.y>f.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>l.width||v.height>l.height||m.x>l.width-v.width||m.y>l.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const k=f.data,I=l.data;if(k===I)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<v.height;M++){const O=((h.y+M)*f.width+h.x)*w,H=((m.y+M)*l.width+m.x)*w;for(let K=0;K<v.width*w;K++)I[H+K]=k[O+K]}return l}class Pc{constructor(l,h){Nh(this,l,1,h)}resize(l){Zp(this,l,1)}clone(){return new Pc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,m,v,w){Vh(l,h,m,v,w,1)}}class Zs{constructor(l,h){Nh(this,l,4,h)}resize(l){Zp(this,l,4)}replace(l,h){h?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Zs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,m,v,w){Vh(l,h,m,v,w,4)}}function Wp(f){const l={},h=f.resolution||256,m=f.clips?f.clips.length:1,v=f.image||new Zs({width:h,height:m});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const w=(k,I,M)=>{l[f.evaluationKey]=M;const O=f.expression.evaluate(l);v.data[k+I+0]=Math.floor(255*O.r/O.a),v.data[k+I+1]=Math.floor(255*O.g/O.a),v.data[k+I+2]=Math.floor(255*O.b/O.a),v.data[k+I+3]=Math.floor(255*O.a)};if(f.clips)for(let k=0,I=0;k<m;++k,I+=4*h)for(let M=0,O=0;M<h;M++,O+=4){const H=M/(h-1),{start:K,end:J}=f.clips[k];w(I,O,K*(1-H)+J*H)}else for(let k=0,I=0;k<h;k++,I+=4)w(0,I,k/(h-1));return v}Qt("AlphaImage",Pc),Qt("RGBAImage",Zs);class xb extends A{createBucket(l){return new Hp(l)}constructor(l){super(l,wb),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Wp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Kp;var kb={get paint(){return Kp=Kp||new y({"hillshade-illumination-direction":new an(Ze.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new an(Ze.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new an(Ze.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new an(Ze.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new an(Ze.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new an(Ze.paint_hillshade["hillshade-accent-color"])})}};class Cb extends A{constructor(l){super(l,kb)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Sb=X([{name:"a_pos",components:2,type:"Int16"}],4),{members:Tb}=Sb;var Uh={exports:{}};function uf(f,l,h){h=h||2;var m,v,w,k,I,M,O,H=l&&l.length,K=H?l[0]*h:f.length,J=Xp(f,0,K,h,!0),se=[];if(!J||J.next===J.prev)return se;if(H&&(J=function(be,Ee,ze,Ke){var Re,Ge,ft,_t=[];for(Re=0,Ge=Ee.length;Re<Ge;Re++)(ft=Xp(be,Ee[Re]*Ke,Re<Ge-1?Ee[Re+1]*Ke:be.length,Ke,!1))===ft.next&&(ft.steiner=!0),_t.push(Lb(ft));for(_t.sort(Mb),Re=0;Re<_t.length;Re++)ze=Db(_t[Re],ze);return ze}(f,l,J,h)),f.length>80*h){m=w=f[0],v=k=f[1];for(var pe=h;pe<K;pe+=h)(I=f[pe])<m&&(m=I),(M=f[pe+1])<v&&(v=M),I>w&&(w=I),M>k&&(k=M);O=(O=Math.max(w-m,k-v))!==0?32767/O:0}return Ac(J,se,h,m,v,O,0),se}function Xp(f,l,h,m,v){var w,k;if(v===Hh(f,l,h,m)>0)for(w=l;w<h;w+=m)k=Qp(w,f[w],f[w+1],k);else for(w=h-m;w>=l;w-=m)k=Qp(w,f[w],f[w+1],k);return k&&ff(k,k.next)&&(Dc(k),k=k.next),k}function ba(f,l){if(!f)return f;l||(l=f);var h,m=f;do if(h=!1,m.steiner||!ff(m,m.next)&&$r(m.prev,m,m.next)!==0)m=m.next;else{if(Dc(m),(m=l=m.prev)===m.next)break;h=!0}while(h||m!==l);return l}function Ac(f,l,h,m,v,w,k){if(f){!k&&w&&function(H,K,J,se){var pe=H;do pe.z===0&&(pe.z=jh(pe.x,pe.y,K,J,se)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==H);pe.prevZ.nextZ=null,pe.prevZ=null,function(be){var Ee,ze,Ke,Re,Ge,ft,_t,Kt,rn=1;do{for(ze=be,be=null,Ge=null,ft=0;ze;){for(ft++,Ke=ze,_t=0,Ee=0;Ee<rn&&(_t++,Ke=Ke.nextZ);Ee++);for(Kt=rn;_t>0||Kt>0&&Ke;)_t!==0&&(Kt===0||!Ke||ze.z<=Ke.z)?(Re=ze,ze=ze.nextZ,_t--):(Re=Ke,Ke=Ke.nextZ,Kt--),Ge?Ge.nextZ=Re:be=Re,Re.prevZ=Ge,Ge=Re;ze=Ke}Ge.nextZ=null,rn*=2}while(ft>1)}(pe)}(f,m,v,w);for(var I,M,O=f;f.prev!==f.next;)if(I=f.prev,M=f.next,w?Eb(f,m,v,w):Ib(f))l.push(I.i/h|0),l.push(f.i/h|0),l.push(M.i/h|0),Dc(f),f=M.next,O=M.next;else if((f=M)===O){k?k===1?Ac(f=Pb(ba(f),l,h),l,h,m,v,w,2):k===2&&Ab(f,l,h,m,v,w):Ac(ba(f),l,h,m,v,w,1);break}}}function Ib(f){var l=f.prev,h=f,m=f.next;if($r(l,h,m)>=0)return!1;for(var v=l.x,w=h.x,k=m.x,I=l.y,M=h.y,O=m.y,H=v<w?v<k?v:k:w<k?w:k,K=I<M?I<O?I:O:M<O?M:O,J=v>w?v>k?v:k:w>k?w:k,se=I>M?I>O?I:O:M>O?M:O,pe=m.next;pe!==l;){if(pe.x>=H&&pe.x<=J&&pe.y>=K&&pe.y<=se&&cl(v,I,w,M,k,O,pe.x,pe.y)&&$r(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function Eb(f,l,h,m){var v=f.prev,w=f,k=f.next;if($r(v,w,k)>=0)return!1;for(var I=v.x,M=w.x,O=k.x,H=v.y,K=w.y,J=k.y,se=I<M?I<O?I:O:M<O?M:O,pe=H<K?H<J?H:J:K<J?K:J,be=I>M?I>O?I:O:M>O?M:O,Ee=H>K?H>J?H:J:K>J?K:J,ze=jh(se,pe,l,h,m),Ke=jh(be,Ee,l,h,m),Re=f.prevZ,Ge=f.nextZ;Re&&Re.z>=ze&&Ge&&Ge.z<=Ke;){if(Re.x>=se&&Re.x<=be&&Re.y>=pe&&Re.y<=Ee&&Re!==v&&Re!==k&&cl(I,H,M,K,O,J,Re.x,Re.y)&&$r(Re.prev,Re,Re.next)>=0||(Re=Re.prevZ,Ge.x>=se&&Ge.x<=be&&Ge.y>=pe&&Ge.y<=Ee&&Ge!==v&&Ge!==k&&cl(I,H,M,K,O,J,Ge.x,Ge.y)&&$r(Ge.prev,Ge,Ge.next)>=0))return!1;Ge=Ge.nextZ}for(;Re&&Re.z>=ze;){if(Re.x>=se&&Re.x<=be&&Re.y>=pe&&Re.y<=Ee&&Re!==v&&Re!==k&&cl(I,H,M,K,O,J,Re.x,Re.y)&&$r(Re.prev,Re,Re.next)>=0)return!1;Re=Re.prevZ}for(;Ge&&Ge.z<=Ke;){if(Ge.x>=se&&Ge.x<=be&&Ge.y>=pe&&Ge.y<=Ee&&Ge!==v&&Ge!==k&&cl(I,H,M,K,O,J,Ge.x,Ge.y)&&$r(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.nextZ}return!0}function Pb(f,l,h){var m=f;do{var v=m.prev,w=m.next.next;!ff(v,w)&&Jp(v,m,m.next,w)&&Mc(v,w)&&Mc(w,v)&&(l.push(v.i/h|0),l.push(m.i/h|0),l.push(w.i/h|0),Dc(m),Dc(m.next),m=f=w),m=m.next}while(m!==f);return ba(m)}function Ab(f,l,h,m,v,w){var k=f;do{for(var I=k.next.next;I!==k.prev;){if(k.i!==I.i&&Rb(k,I)){var M=Yp(k,I);return k=ba(k,k.next),M=ba(M,M.next),Ac(k,l,h,m,v,w,0),void Ac(M,l,h,m,v,w,0)}I=I.next}k=k.next}while(k!==f)}function Mb(f,l){return f.x-l.x}function Db(f,l){var h=function(v,w){var k,I=w,M=v.x,O=v.y,H=-1/0;do{if(O<=I.y&&O>=I.next.y&&I.next.y!==I.y){var K=I.x+(O-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(K<=M&&K>H&&(H=K,k=I.x<I.next.x?I:I.next,K===M))return k}I=I.next}while(I!==w);if(!k)return null;var J,se=k,pe=k.x,be=k.y,Ee=1/0;I=k;do M>=I.x&&I.x>=pe&&M!==I.x&&cl(O<be?M:H,O,pe,be,O<be?H:M,O,I.x,I.y)&&(J=Math.abs(O-I.y)/(M-I.x),Mc(I,v)&&(J<Ee||J===Ee&&(I.x>k.x||I.x===k.x&&zb(k,I)))&&(k=I,Ee=J)),I=I.next;while(I!==se);return k}(f,l);if(!h)return l;var m=Yp(h,f);return ba(m,m.next),ba(h,h.next)}function zb(f,l){return $r(f.prev,f,l.prev)<0&&$r(l.next,f,f.next)<0}function jh(f,l,h,m,v){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-h)*v|0)|f<<8))|f<<4))|f<<2))|f<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*v|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Lb(f){var l=f,h=f;do(l.x<h.x||l.x===h.x&&l.y<h.y)&&(h=l),l=l.next;while(l!==f);return h}function cl(f,l,h,m,v,w,k,I){return(v-k)*(l-I)>=(f-k)*(w-I)&&(f-k)*(m-I)>=(h-k)*(l-I)&&(h-k)*(w-I)>=(v-k)*(m-I)}function Rb(f,l){return f.next.i!==l.i&&f.prev.i!==l.i&&!function(h,m){var v=h;do{if(v.i!==h.i&&v.next.i!==h.i&&v.i!==m.i&&v.next.i!==m.i&&Jp(v,v.next,h,m))return!0;v=v.next}while(v!==h);return!1}(f,l)&&(Mc(f,l)&&Mc(l,f)&&function(h,m){var v=h,w=!1,k=(h.x+m.x)/2,I=(h.y+m.y)/2;do v.y>I!=v.next.y>I&&v.next.y!==v.y&&k<(v.next.x-v.x)*(I-v.y)/(v.next.y-v.y)+v.x&&(w=!w),v=v.next;while(v!==h);return w}(f,l)&&($r(f.prev,f,l.prev)||$r(f,l.prev,l))||ff(f,l)&&$r(f.prev,f,f.next)>0&&$r(l.prev,l,l.next)>0)}function $r(f,l,h){return(l.y-f.y)*(h.x-l.x)-(l.x-f.x)*(h.y-l.y)}function ff(f,l){return f.x===l.x&&f.y===l.y}function Jp(f,l,h,m){var v=df($r(f,l,h)),w=df($r(f,l,m)),k=df($r(h,m,f)),I=df($r(h,m,l));return v!==w&&k!==I||!(v!==0||!hf(f,h,l))||!(w!==0||!hf(f,m,l))||!(k!==0||!hf(h,f,m))||!(I!==0||!hf(h,l,m))}function hf(f,l,h){return l.x<=Math.max(f.x,h.x)&&l.x>=Math.min(f.x,h.x)&&l.y<=Math.max(f.y,h.y)&&l.y>=Math.min(f.y,h.y)}function df(f){return f>0?1:f<0?-1:0}function Mc(f,l){return $r(f.prev,f,f.next)<0?$r(f,l,f.next)>=0&&$r(f,f.prev,l)>=0:$r(f,l,f.prev)<0||$r(f,f.next,l)<0}function Yp(f,l){var h=new qh(f.i,f.x,f.y),m=new qh(l.i,l.x,l.y),v=f.next,w=l.prev;return f.next=l,l.prev=f,h.next=v,v.prev=h,m.next=h,h.prev=m,w.next=m,m.prev=w,m}function Qp(f,l,h,m){var v=new qh(f,l,h);return m?(v.next=m.next,v.prev=m,m.next.prev=v,m.next=v):(v.prev=v,v.next=v),v}function Dc(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function qh(f,l,h){this.i=f,this.x=l,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Hh(f,l,h,m){for(var v=0,w=l,k=h-m;w<h;w+=m)v+=(f[k]-f[w])*(f[w+1]+f[k+1]),k=w;return v}Uh.exports=uf,Uh.exports.default=uf,uf.deviation=function(f,l,h,m){var v=l&&l.length,w=Math.abs(Hh(f,0,v?l[0]*h:f.length,h));if(v)for(var k=0,I=l.length;k<I;k++)w-=Math.abs(Hh(f,l[k]*h,k<I-1?l[k+1]*h:f.length,h));var M=0;for(k=0;k<m.length;k+=3){var O=m[k]*h,H=m[k+1]*h,K=m[k+2]*h;M+=Math.abs((f[O]-f[K])*(f[H+1]-f[O+1])-(f[O]-f[H])*(f[K+1]-f[O+1]))}return w===0&&M===0?0:Math.abs((M-w)/w)},uf.flatten=function(f){for(var l=f[0][0].length,h={vertices:[],holes:[],dimensions:l},m=0,v=0;v<f.length;v++){for(var w=0;w<f[v].length;w++)for(var k=0;k<l;k++)h.vertices.push(f[v][w][k]);v>0&&h.holes.push(m+=f[v-1].length)}return h};var em=c(Uh.exports);function Gh(f,l,h){const m=h.patternDependencies;let v=!1;for(const w of l){const k=w.paint.get(`${f}-pattern`);k.isConstant()||(v=!0);const I=k.constantOr(null);I&&(v=!0,m[I.to]=!0,m[I.from]=!0)}return v}function Zh(f,l,h,m,v){const w=v.patternDependencies;for(const k of l){const I=k.paint.get(`${f}-pattern`).value;if(I.kind!=="constant"){let M=I.evaluate({zoom:m-1},h,{},v.availableImages),O=I.evaluate({zoom:m},h,{},v.availableImages),H=I.evaluate({zoom:m+1},h,{},v.availableImages);M=M&&M.name?M.name:M,O=O&&O.name?O.name:O,H=H&&H.name?H.name:H,w[M]=!0,w[O]=!0,w[H]=!0,h.patterns[k.id]={min:M,mid:O,max:H}}}return h}class Wh{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(h=>h.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ns,this.indexArray=new To,this.indexArray2=new xc,this.programConfigurations=new ga(l.layers,l.zoom),this.segments=new Hr,this.segments2=new Hr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(l,h,m){this.hasPattern=Gh("fill",this.layers,h);const v=this.layers[0].layout.get("fill-sort-key"),w=!v.isConstant(),k=[];for(const{feature:I,id:M,index:O,sourceLayerIndex:H}of l){const K=this.layers[0]._featureFilter.needGeometry,J=ya(I,K);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),J,m))continue;const se=w?v.evaluate(J,{},m,h.availableImages):void 0,pe={id:M,properties:I.properties,type:I.type,sourceLayerIndex:H,index:O,geometry:K?J.geometry:va(I),patterns:{},sortKey:se};k.push(pe)}w&&k.sort((I,M)=>I.sortKey-M.sortKey);for(const I of k){const{geometry:M,index:O,sourceLayerIndex:H}=I;if(this.hasPattern){const K=Zh("fill",this.layers,I,this.zoom,h);this.patternFeatures.push(K)}else this.addFeature(I,M,O,m,{});h.featureIndex.insert(l[O].feature,M,O,H,this.index)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,m)}addFeatures(l,h,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Tb),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,h,m,v,w){for(const k of Ga(h,500)){let I=0;for(const se of k)I+=se.length;const M=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray),O=M.vertexLength,H=[],K=[];for(const se of k){if(se.length===0)continue;se!==k[0]&&K.push(H.length/2);const pe=this.segments2.prepareSegment(se.length,this.layoutVertexArray,this.indexArray2),be=pe.vertexLength;this.layoutVertexArray.emplaceBack(se[0].x,se[0].y),this.indexArray2.emplaceBack(be+se.length-1,be),H.push(se[0].x),H.push(se[0].y);for(let Ee=1;Ee<se.length;Ee++)this.layoutVertexArray.emplaceBack(se[Ee].x,se[Ee].y),this.indexArray2.emplaceBack(be+Ee-1,be+Ee),H.push(se[Ee].x),H.push(se[Ee].y);pe.vertexLength+=se.length,pe.primitiveLength+=se.length}const J=em(H,K);for(let se=0;se<J.length;se+=3)this.indexArray.emplaceBack(O+J[se],O+J[se+1],O+J[se+2]);M.vertexLength+=I,M.primitiveLength+=J.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,w,v)}}let tm,nm;Qt("FillBucket",Wh,{omit:["layers","patternFeatures"]});var Ob={get paint(){return nm=nm||new y({"fill-antialias":new an(Ze.paint_fill["fill-antialias"]),"fill-opacity":new $(Ze.paint_fill["fill-opacity"]),"fill-color":new $(Ze.paint_fill["fill-color"]),"fill-outline-color":new $(Ze.paint_fill["fill-outline-color"]),"fill-translate":new an(Ze.paint_fill["fill-translate"]),"fill-translate-anchor":new an(Ze.paint_fill["fill-translate-anchor"]),"fill-pattern":new u(Ze.paint_fill["fill-pattern"])})},get layout(){return tm=tm||new y({"fill-sort-key":new $(Ze.layout_fill["fill-sort-key"])})}};class Fb extends A{constructor(l){super(l,Ob)}recalculate(l,h){super.recalculate(l,h);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new Wh(l)}queryRadius(){return af(this.paint.get("fill-translate"))}queryIntersectsFeature(l,h,m,v,w,k,I){return Fp(lf(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,I),v)}isTileClipped(){return!0}}const Bb=X([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Nb=X([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Vb}=Bb;var Ao={},Ub=d,rm=ul;function ul(f,l,h,m,v){this.properties={},this.extent=h,this.type=0,this._pbf=f,this._geometry=-1,this._keys=m,this._values=v,f.readFields(jb,this,l)}function jb(f,l,h){f==1?l.id=h.readVarint():f==2?function(m,v){for(var w=m.readVarint()+m.pos;m.pos<w;){var k=v._keys[m.readVarint()],I=v._values[m.readVarint()];v.properties[k]=I}}(h,l):f==3?l.type=h.readVarint():f==4&&(l._geometry=h.pos)}function qb(f){for(var l,h,m=0,v=0,w=f.length,k=w-1;v<w;k=v++)m+=((h=f[k]).x-(l=f[v]).x)*(l.y+h.y);return m}ul.types=["Unknown","Point","LineString","Polygon"],ul.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var l,h=f.readVarint()+f.pos,m=1,v=0,w=0,k=0,I=[];f.pos<h;){if(v<=0){var M=f.readVarint();m=7&M,v=M>>3}if(v--,m===1||m===2)w+=f.readSVarint(),k+=f.readSVarint(),m===1&&(l&&I.push(l),l=[]),l.push(new Ub(w,k));else{if(m!==7)throw new Error("unknown command "+m);l&&l.push(l[0].clone())}}return l&&I.push(l),I},ul.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var l=f.readVarint()+f.pos,h=1,m=0,v=0,w=0,k=1/0,I=-1/0,M=1/0,O=-1/0;f.pos<l;){if(m<=0){var H=f.readVarint();h=7&H,m=H>>3}if(m--,h===1||h===2)(v+=f.readSVarint())<k&&(k=v),v>I&&(I=v),(w+=f.readSVarint())<M&&(M=w),w>O&&(O=w);else if(h!==7)throw new Error("unknown command "+h)}return[k,M,I,O]},ul.prototype.toGeoJSON=function(f,l,h){var m,v,w=this.extent*Math.pow(2,h),k=this.extent*f,I=this.extent*l,M=this.loadGeometry(),O=ul.types[this.type];function H(se){for(var pe=0;pe<se.length;pe++){var be=se[pe];se[pe]=[360*(be.x+k)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(be.y+I)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var K=[];for(m=0;m<M.length;m++)K[m]=M[m][0];H(M=K);break;case 2:for(m=0;m<M.length;m++)H(M[m]);break;case 3:for(M=function(se){var pe=se.length;if(pe<=1)return[se];for(var be,Ee,ze=[],Ke=0;Ke<pe;Ke++){var Re=qb(se[Ke]);Re!==0&&(Ee===void 0&&(Ee=Re<0),Ee===Re<0?(be&&ze.push(be),be=[se[Ke]]):be.push(se[Ke]))}return be&&ze.push(be),ze}(M),m=0;m<M.length;m++)for(v=0;v<M[m].length;v++)H(M[m][v])}M.length===1?M=M[0]:O="Multi"+O;var J={type:"Feature",geometry:{type:O,coordinates:M},properties:this.properties};return"id"in this&&(J.id=this.id),J};var Hb=rm,sm=im;function im(f,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(Gb,this,l),this.length=this._features.length}function Gb(f,l,h){f===15?l.version=h.readVarint():f===1?l.name=h.readString():f===5?l.extent=h.readVarint():f===2?l._features.push(h.pos):f===3?l._keys.push(h.readString()):f===4&&l._values.push(function(m){for(var v=null,w=m.readVarint()+m.pos;m.pos<w;){var k=m.readVarint()>>3;v=k===1?m.readString():k===2?m.readFloat():k===3?m.readDouble():k===4?m.readVarint64():k===5?m.readVarint():k===6?m.readSVarint():k===7?m.readBoolean():null}return v}(h))}im.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var l=this._pbf.readVarint()+this._pbf.pos;return new Hb(this._pbf,l,this.extent,this._keys,this._values)};var Zb=sm;function Wb(f,l,h){if(f===3){var m=new Zb(h,h.readVarint()+h.pos);m.length&&(l[m.name]=m)}}Ao.VectorTile=function(f,l){this.layers=f.readFields(Wb,{},l)},Ao.VectorTileFeature=rm,Ao.VectorTileLayer=sm;const Kb=Ao.VectorTileFeature.types,Kh=Math.pow(2,13);function zc(f,l,h,m,v,w,k,I){f.emplaceBack(l,h,2*Math.floor(m*Kh)+k,v*Kh*2,w*Kh*2,Math.round(I))}class Xh{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(h=>h.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new us,this.centroidVertexArray=new ro,this.indexArray=new To,this.programConfigurations=new ga(l.layers,l.zoom),this.segments=new Hr,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(l,h,m){this.features=[],this.hasPattern=Gh("fill-extrusion",this.layers,h);for(const{feature:v,id:w,index:k,sourceLayerIndex:I}of l){const M=this.layers[0]._featureFilter.needGeometry,O=ya(v,M);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),O,m))continue;const H={id:w,sourceLayerIndex:I,index:k,geometry:M?O.geometry:va(v),properties:v.properties,type:v.type,patterns:{}};this.hasPattern?this.features.push(Zh("fill-extrusion",this.layers,H,this.zoom,h)):this.addFeature(H,H.geometry,k,m,{}),h.featureIndex.insert(v,H.geometry,k,I,this.index,!0)}}addFeatures(l,h,m){for(const v of this.features){const{geometry:w}=v;this.addFeature(v,w,v.index,h,m)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Vb),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,Nb.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,h,m,v,w){const k={x:0,y:0,vertexCount:0};for(const I of Ga(h,500)){let M=0;for(const pe of I)M+=pe.length;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const pe of I){if(pe.length===0||Jb(pe))continue;let be=0;for(let Ee=0;Ee<pe.length;Ee++){const ze=pe[Ee];if(Ee>=1){const Ke=pe[Ee-1];if(!Xb(ze,Ke)){O.vertexLength+4>Hr.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Re=ze.sub(Ke)._perp()._unit(),Ge=Ke.dist(ze);be+Ge>32768&&(be=0),zc(this.layoutVertexArray,ze.x,ze.y,Re.x,Re.y,0,0,be),zc(this.layoutVertexArray,ze.x,ze.y,Re.x,Re.y,0,1,be),k.x+=2*ze.x,k.y+=2*ze.y,k.vertexCount+=2,be+=Ge,zc(this.layoutVertexArray,Ke.x,Ke.y,Re.x,Re.y,0,0,be),zc(this.layoutVertexArray,Ke.x,Ke.y,Re.x,Re.y,0,1,be),k.x+=2*Ke.x,k.y+=2*Ke.y,k.vertexCount+=2;const ft=O.vertexLength;this.indexArray.emplaceBack(ft,ft+2,ft+1),this.indexArray.emplaceBack(ft+1,ft+2,ft+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+M>Hr.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(M,this.layoutVertexArray,this.indexArray)),Kb[l.type]!=="Polygon")continue;const H=[],K=[],J=O.vertexLength;for(const pe of I)if(pe.length!==0){pe!==I[0]&&K.push(H.length/2);for(let be=0;be<pe.length;be++){const Ee=pe[be];zc(this.layoutVertexArray,Ee.x,Ee.y,0,0,1,1,0),k.x+=Ee.x,k.y+=Ee.y,k.vertexCount+=1,H.push(Ee.x),H.push(Ee.y)}}const se=em(H,K);for(let pe=0;pe<se.length;pe+=3)this.indexArray.emplaceBack(J+se[pe],J+se[pe+2],J+se[pe+1]);O.primitiveLength+=se.length/3,O.vertexLength+=M}for(let I=0;I<k.vertexCount;I++)this.centroidVertexArray.emplaceBack(Math.floor(k.x/k.vertexCount),Math.floor(k.y/k.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,w,v)}}function Xb(f,l){return f.x===l.x&&(f.x<0||f.x>kr)||f.y===l.y&&(f.y<0||f.y>kr)}function Jb(f){return f.every(l=>l.x<0)||f.every(l=>l.x>kr)||f.every(l=>l.y<0)||f.every(l=>l.y>kr)}let om;Qt("FillExtrusionBucket",Xh,{omit:["layers","features"]});var Yb={get paint(){return om=om||new y({"fill-extrusion-opacity":new an(Ze["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new $(Ze["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new an(Ze["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new an(Ze["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new u(Ze["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new $(Ze["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new $(Ze["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new an(Ze["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Qb extends A{constructor(l){super(l,Yb)}createBucket(l){return new Xh(l)}queryRadius(){return af(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,h,m,v,w,k,I,M){const O=lf(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,I),H=this.paint.get("fill-extrusion-height").evaluate(h,m),K=this.paint.get("fill-extrusion-base").evaluate(h,m),J=function(pe,be,Ee,ze){const Ke=[];for(const Re of pe){const Ge=[Re.x,Re.y,0,1];cf(Ge,Ge,be),Ke.push(new b(Ge[0]/Ge[3],Ge[1]/Ge[3]))}return Ke}(O,M),se=function(pe,be,Ee,ze){const Ke=[],Re=[],Ge=ze[8]*be,ft=ze[9]*be,_t=ze[10]*be,Kt=ze[11]*be,rn=ze[8]*Ee,Gt=ze[9]*Ee,jt=ze[10]*Ee,en=ze[11]*Ee;for(const ln of pe){const Zt=[],gt=[];for(const nn of ln){const tn=nn.x,Pn=nn.y,Xn=ze[0]*tn+ze[4]*Pn+ze[12],Jn=ze[1]*tn+ze[5]*Pn+ze[13],Cr=ze[2]*tn+ze[6]*Pn+ze[14],Ks=ze[3]*tn+ze[7]*Pn+ze[15],fs=Cr+_t,Lr=Ks+Kt,Jr=Xn+rn,hs=Jn+Gt,$s=Cr+jt,ds=Ks+en,Sr=new b((Xn+Ge)/Lr,(Jn+ft)/Lr);Sr.z=fs/Lr,Zt.push(Sr);const Gr=new b(Jr/ds,hs/ds);Gr.z=$s/ds,gt.push(Gr)}Ke.push(Zt),Re.push(gt)}return[Ke,Re]}(v,K,H,M);return function(pe,be,Ee){let ze=1/0;Fp(Ee,be)&&(ze=am(Ee,be[0]));for(let Ke=0;Ke<be.length;Ke++){const Re=be[Ke],Ge=pe[Ke];for(let ft=0;ft<Re.length-1;ft++){const _t=Re[ft],Kt=[_t,Re[ft+1],Ge[ft+1],Ge[ft],_t];Op(Ee,Kt)&&(ze=Math.min(ze,am(Ee,Kt)))}}return ze!==1/0&&ze}(se[0],se[1],J)}}function Lc(f,l){return f.x*l.x+f.y*l.y}function am(f,l){if(f.length===1){let h=0;const m=l[h++];let v;for(;!v||m.equals(v);)if(v=l[h++],!v)return 1/0;for(;h<l.length;h++){const w=l[h],k=f[0],I=v.sub(m),M=w.sub(m),O=k.sub(m),H=Lc(I,I),K=Lc(I,M),J=Lc(M,M),se=Lc(O,I),pe=Lc(O,M),be=H*J-K*K,Ee=(J*se-K*pe)/be,ze=(H*pe-K*se)/be,Ke=m.z*(1-Ee-ze)+v.z*Ee+w.z*ze;if(isFinite(Ke))return Ke}return 1/0}{let h=1/0;for(const m of l)h=Math.min(h,m.z);return h}}const e$=X([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:t$}=e$,n$=X([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:r$}=n$,s$=Ao.VectorTileFeature.types,i$=Math.cos(Math.PI/180*37.5),lm=Math.pow(2,14)/.5;class Jh{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(h=>h.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new pa,this.layoutVertexArray2=new Mr,this.indexArray=new To,this.programConfigurations=new ga(l.layers,l.zoom),this.segments=new Hr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(l,h,m){this.hasPattern=Gh("line",this.layers,h);const v=this.layers[0].layout.get("line-sort-key"),w=!v.isConstant(),k=[];for(const{feature:I,id:M,index:O,sourceLayerIndex:H}of l){const K=this.layers[0]._featureFilter.needGeometry,J=ya(I,K);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom),J,m))continue;const se=w?v.evaluate(J,{},m):void 0,pe={id:M,properties:I.properties,type:I.type,sourceLayerIndex:H,index:O,geometry:K?J.geometry:va(I),patterns:{},sortKey:se};k.push(pe)}w&&k.sort((I,M)=>I.sortKey-M.sortKey);for(const I of k){const{geometry:M,index:O,sourceLayerIndex:H}=I;if(this.hasPattern){const K=Zh("line",this.layers,I,this.zoom,h);this.patternFeatures.push(K)}else this.addFeature(I,M,O,m,{});h.featureIndex.insert(l[O].feature,M,O,H,this.index)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,m)}addFeatures(l,h,m){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,r$)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,t$),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,h,m,v,w){const k=this.layers[0].layout,I=k.get("line-join").evaluate(l,{}),M=k.get("line-cap"),O=k.get("line-miter-limit"),H=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const K of h)this.addLine(K,l,I,M,O,H);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,w,v)}addLine(l,h,m,v,w,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ze=0;ze<l.length-1;ze++)this.totalDistance+=l[ze].dist(l[ze+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const I=s$[h.type]==="Polygon";let M=l.length;for(;M>=2&&l[M-1].equals(l[M-2]);)M--;let O=0;for(;O<M-1&&l[O].equals(l[O+1]);)O++;if(M<(I?3:2))return;m==="bevel"&&(w=1.05);const H=this.overscaling<=16?15*kr/(512*this.overscaling):0,K=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray);let J,se,pe,be,Ee;this.e1=this.e2=-1,I&&(J=l[M-2],Ee=l[O].sub(J)._unit()._perp());for(let ze=O;ze<M;ze++){if(pe=ze===M-1?I?l[O+1]:void 0:l[ze+1],pe&&l[ze].equals(pe))continue;Ee&&(be=Ee),J&&(se=J),J=l[ze],Ee=pe?pe.sub(J)._unit()._perp():be,be=be||Ee;let Ke=be.add(Ee);Ke.x===0&&Ke.y===0||Ke._unit();const Re=be.x*Ee.x+be.y*Ee.y,Ge=Ke.x*Ee.x+Ke.y*Ee.y,ft=Ge!==0?1/Ge:1/0,_t=2*Math.sqrt(2-2*Ge),Kt=Ge<i$&&se&&pe,rn=be.x*Ee.y-be.y*Ee.x>0;if(Kt&&ze>O){const en=J.dist(se);if(en>2*H){const ln=J.sub(J.sub(se)._mult(H/en)._round());this.updateDistance(se,ln),this.addCurrentVertex(ln,be,0,0,K),se=ln}}const Gt=se&&pe;let jt=Gt?m:I?"butt":v;if(Gt&&jt==="round"&&(ft<k?jt="miter":ft<=2&&(jt="fakeround")),jt==="miter"&&ft>w&&(jt="bevel"),jt==="bevel"&&(ft>2&&(jt="flipbevel"),ft<w&&(jt="miter")),se&&this.updateDistance(se,J),jt==="miter")Ke._mult(ft),this.addCurrentVertex(J,Ke,0,0,K);else if(jt==="flipbevel"){if(ft>100)Ke=Ee.mult(-1);else{const en=ft*be.add(Ee).mag()/be.sub(Ee).mag();Ke._perp()._mult(en*(rn?-1:1))}this.addCurrentVertex(J,Ke,0,0,K),this.addCurrentVertex(J,Ke.mult(-1),0,0,K)}else if(jt==="bevel"||jt==="fakeround"){const en=-Math.sqrt(ft*ft-1),ln=rn?en:0,Zt=rn?0:en;if(se&&this.addCurrentVertex(J,be,ln,Zt,K),jt==="fakeround"){const gt=Math.round(180*_t/Math.PI/20);for(let nn=1;nn<gt;nn++){let tn=nn/gt;if(tn!==.5){const Xn=tn-.5;tn+=tn*Xn*(tn-1)*((1.0904+Re*(Re*(3.55645-1.43519*Re)-3.2452))*Xn*Xn+(.848013+Re*(.215638*Re-1.06021)))}const Pn=Ee.sub(be)._mult(tn)._add(be)._unit()._mult(rn?-1:1);this.addHalfVertex(J,Pn.x,Pn.y,!1,rn,0,K)}}pe&&this.addCurrentVertex(J,Ee,-ln,-Zt,K)}else if(jt==="butt")this.addCurrentVertex(J,Ke,0,0,K);else if(jt==="square"){const en=se?1:-1;this.addCurrentVertex(J,Ke,en,en,K)}else jt==="round"&&(se&&(this.addCurrentVertex(J,be,0,0,K),this.addCurrentVertex(J,be,1,1,K,!0)),pe&&(this.addCurrentVertex(J,Ee,-1,-1,K,!0),this.addCurrentVertex(J,Ee,0,0,K)));if(Kt&&ze<M-1){const en=J.dist(pe);if(en>2*H){const ln=J.add(pe.sub(J)._mult(H/en)._round());this.updateDistance(J,ln),this.addCurrentVertex(ln,Ee,0,0,K),J=ln}}}}addCurrentVertex(l,h,m,v,w,k=!1){const I=h.y*v-h.x,M=-h.y-h.x*v;this.addHalfVertex(l,h.x+h.y*m,h.y-h.x*m,k,!1,m,w),this.addHalfVertex(l,I,M,k,!0,-v,w),this.distance>lm/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,h,m,v,w,k))}addHalfVertex({x:l,y:h},m,v,w,k,I,M){const O=.5*(this.lineClips?this.scaledDistance*(lm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(w?1:0),(h<<1)+(k?1:0),Math.round(63*m)+128,Math.round(63*v)+128,1+(I===0?0:I<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const H=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,H),M.primitiveLength++),k?this.e2=H:this.e1=H}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,h){this.distance+=l.dist(h),this.updateScaledDistance()}}let cm,um;Qt("LineBucket",Jh,{omit:["layers","patternFeatures"]});var fm={get paint(){return um=um||new y({"line-opacity":new $(Ze.paint_line["line-opacity"]),"line-color":new $(Ze.paint_line["line-color"]),"line-translate":new an(Ze.paint_line["line-translate"]),"line-translate-anchor":new an(Ze.paint_line["line-translate-anchor"]),"line-width":new $(Ze.paint_line["line-width"]),"line-gap-width":new $(Ze.paint_line["line-gap-width"]),"line-offset":new $(Ze.paint_line["line-offset"]),"line-blur":new $(Ze.paint_line["line-blur"]),"line-dasharray":new p(Ze.paint_line["line-dasharray"]),"line-pattern":new u(Ze.paint_line["line-pattern"]),"line-gradient":new g(Ze.paint_line["line-gradient"])})},get layout(){return cm=cm||new y({"line-cap":new an(Ze.layout_line["line-cap"]),"line-join":new $(Ze.layout_line["line-join"]),"line-miter-limit":new an(Ze.layout_line["line-miter-limit"]),"line-round-limit":new an(Ze.layout_line["line-round-limit"]),"line-sort-key":new $(Ze.layout_line["line-sort-key"])})}};class o$ extends ${possiblyEvaluate(l,h){return h=new sr(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(l,h)}evaluate(l,h,m,v){return h=ge({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(l,h,m,v)}}let pf;class a$ extends A{constructor(l){super(l,fm),this.gradientVersion=0,pf||(pf=new o$(fm.paint.properties["line-width"].specification),pf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof Ko,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,h){super.recalculate(l,h),this.paint._values["line-floorwidth"]=pf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Jh(l)}queryRadius(l){const h=l,m=hm(Ic("line-width",this,h),Ic("line-gap-width",this,h)),v=Ic("line-offset",this,h);return m/2+Math.abs(v)+af(this.paint.get("line-translate"))}queryIntersectsFeature(l,h,m,v,w,k,I){const M=lf(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,I),O=I/2*hm(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),H=this.paint.get("line-offset").evaluate(h,m);return H&&(v=function(K,J){const se=[];for(let pe=0;pe<K.length;pe++){const be=K[pe],Ee=[];for(let ze=0;ze<be.length;ze++){const Ke=be[ze-1],Re=be[ze],Ge=be[ze+1],ft=ze===0?new b(0,0):Re.sub(Ke)._unit()._perp(),_t=ze===be.length-1?new b(0,0):Ge.sub(Re)._unit()._perp(),Kt=ft._add(_t)._unit(),rn=Kt.x*_t.x+Kt.y*_t.y;rn!==0&&Kt._mult(1/rn),Ee.push(Kt._mult(J)._add(Re))}se.push(Ee)}return se}(v,H*I)),function(K,J,se){for(let pe=0;pe<J.length;pe++){const be=J[pe];if(K.length>=3){for(let Ee=0;Ee<be.length;Ee++)if(al(K,be[Ee]))return!0}if(_b(K,be,se))return!0}return!1}(M,v,O)}isTileClipped(){return!0}}function hm(f,l){return l>0?l+2*f:f}const l$=X([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),c$=X([{name:"a_projected_pos",components:3,type:"Float32"}],4);X([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const u$=X([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);X([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const dm=X([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),f$=X([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function h$(f,l,h){return f.sections.forEach(m=>{m.text=function(v,w,k){const I=w.layout.get("text-transform").evaluate(k,{});return I==="uppercase"?v=v.toLocaleUpperCase():I==="lowercase"&&(v=v.toLocaleLowerCase()),vi.applyArabicShaping&&(v=vi.applyArabicShaping(v)),v}(m.text,l,h)}),f}X([{name:"triangle",components:3,type:"Uint16"}]),X([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),X([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),X([{type:"Float32",name:"offsetX"}]),X([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),X([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Rc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var zr=24,pm=Kn,mm=function(f,l,h,m,v){var w,k,I=8*v-m-1,M=(1<<I)-1,O=M>>1,H=-7,K=h?v-1:0,J=h?-1:1,se=f[l+K];for(K+=J,w=se&(1<<-H)-1,se>>=-H,H+=I;H>0;w=256*w+f[l+K],K+=J,H-=8);for(k=w&(1<<-H)-1,w>>=-H,H+=m;H>0;k=256*k+f[l+K],K+=J,H-=8);if(w===0)w=1-O;else{if(w===M)return k?NaN:1/0*(se?-1:1);k+=Math.pow(2,m),w-=O}return(se?-1:1)*k*Math.pow(2,w-m)},_m=function(f,l,h,m,v,w){var k,I,M,O=8*w-v-1,H=(1<<O)-1,K=H>>1,J=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,se=m?0:w-1,pe=m?1:-1,be=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(I=isNaN(l)?1:0,k=H):(k=Math.floor(Math.log(l)/Math.LN2),l*(M=Math.pow(2,-k))<1&&(k--,M*=2),(l+=k+K>=1?J/M:J*Math.pow(2,1-K))*M>=2&&(k++,M/=2),k+K>=H?(I=0,k=H):k+K>=1?(I=(l*M-1)*Math.pow(2,v),k+=K):(I=l*Math.pow(2,K-1)*Math.pow(2,v),k=0));v>=8;f[h+se]=255&I,se+=pe,I/=256,v-=8);for(k=k<<v|I,O+=v;O>0;f[h+se]=255&k,se+=pe,k/=256,O-=8);f[h+se-pe]|=128*be};function Kn(f){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(f)?f:new Uint8Array(f||0),this.pos=0,this.type=0,this.length=this.buf.length}Kn.Varint=0,Kn.Fixed64=1,Kn.Bytes=2,Kn.Fixed32=5;var Yh=4294967296,gm=1/Yh,vm=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function io(f){return f.type===Kn.Bytes?f.readVarint()+f.pos:f.pos+1}function fl(f,l,h){return h?4294967296*l+(f>>>0):4294967296*(l>>>0)+(f>>>0)}function ym(f,l,h){var m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));h.realloc(m);for(var v=h.pos-1;v>=f;v--)h.buf[v+m]=h.buf[v]}function d$(f,l){for(var h=0;h<f.length;h++)l.writeVarint(f[h])}function p$(f,l){for(var h=0;h<f.length;h++)l.writeSVarint(f[h])}function m$(f,l){for(var h=0;h<f.length;h++)l.writeFloat(f[h])}function _$(f,l){for(var h=0;h<f.length;h++)l.writeDouble(f[h])}function g$(f,l){for(var h=0;h<f.length;h++)l.writeBoolean(f[h])}function v$(f,l){for(var h=0;h<f.length;h++)l.writeFixed32(f[h])}function y$(f,l){for(var h=0;h<f.length;h++)l.writeSFixed32(f[h])}function b$(f,l){for(var h=0;h<f.length;h++)l.writeFixed64(f[h])}function $$(f,l){for(var h=0;h<f.length;h++)l.writeSFixed64(f[h])}function mf(f,l){return(f[l]|f[l+1]<<8|f[l+2]<<16)+16777216*f[l+3]}function hl(f,l,h){f[h]=l,f[h+1]=l>>>8,f[h+2]=l>>>16,f[h+3]=l>>>24}function bm(f,l){return(f[l]|f[l+1]<<8|f[l+2]<<16)+(f[l+3]<<24)}Kn.prototype={destroy:function(){this.buf=null},readFields:function(f,l,h){for(h=h||this.length;this.pos<h;){var m=this.readVarint(),v=m>>3,w=this.pos;this.type=7&m,f(v,l,this),this.pos===w&&this.skip(m)}return l},readMessage:function(f,l){return this.readFields(f,l,this.readVarint()+this.pos)},readFixed32:function(){var f=mf(this.buf,this.pos);return this.pos+=4,f},readSFixed32:function(){var f=bm(this.buf,this.pos);return this.pos+=4,f},readFixed64:function(){var f=mf(this.buf,this.pos)+mf(this.buf,this.pos+4)*Yh;return this.pos+=8,f},readSFixed64:function(){var f=mf(this.buf,this.pos)+bm(this.buf,this.pos+4)*Yh;return this.pos+=8,f},readFloat:function(){var f=mm(this.buf,this.pos,!0,23,4);return this.pos+=4,f},readDouble:function(){var f=mm(this.buf,this.pos,!0,52,8);return this.pos+=8,f},readVarint:function(f){var l,h,m=this.buf;return l=127&(h=m[this.pos++]),h<128?l:(l|=(127&(h=m[this.pos++]))<<7,h<128?l:(l|=(127&(h=m[this.pos++]))<<14,h<128?l:(l|=(127&(h=m[this.pos++]))<<21,h<128?l:function(v,w,k){var I,M,O=k.buf;if(I=(112&(M=O[k.pos++]))>>4,M<128||(I|=(127&(M=O[k.pos++]))<<3,M<128)||(I|=(127&(M=O[k.pos++]))<<10,M<128)||(I|=(127&(M=O[k.pos++]))<<17,M<128)||(I|=(127&(M=O[k.pos++]))<<24,M<128)||(I|=(1&(M=O[k.pos++]))<<31,M<128))return fl(v,I,w);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(h=m[this.pos]))<<28,f,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var f=this.readVarint();return f%2==1?(f+1)/-2:f/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var f=this.readVarint()+this.pos,l=this.pos;return this.pos=f,f-l>=12&&vm?function(h,m,v){return vm.decode(h.subarray(m,v))}(this.buf,l,f):function(h,m,v){for(var w="",k=m;k<v;){var I,M,O,H=h[k],K=null,J=H>239?4:H>223?3:H>191?2:1;if(k+J>v)break;J===1?H<128&&(K=H):J===2?(192&(I=h[k+1]))==128&&(K=(31&H)<<6|63&I)<=127&&(K=null):J===3?(M=h[k+2],(192&(I=h[k+1]))==128&&(192&M)==128&&((K=(15&H)<<12|(63&I)<<6|63&M)<=2047||K>=55296&&K<=57343)&&(K=null)):J===4&&(M=h[k+2],O=h[k+3],(192&(I=h[k+1]))==128&&(192&M)==128&&(192&O)==128&&((K=(15&H)<<18|(63&I)<<12|(63&M)<<6|63&O)<=65535||K>=1114112)&&(K=null)),K===null?(K=65533,J=1):K>65535&&(K-=65536,w+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),w+=String.fromCharCode(K),k+=J}return w}(this.buf,l,f)},readBytes:function(){var f=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,f);return this.pos=f,l},readPackedVarint:function(f,l){if(this.type!==Kn.Bytes)return f.push(this.readVarint(l));var h=io(this);for(f=f||[];this.pos<h;)f.push(this.readVarint(l));return f},readPackedSVarint:function(f){if(this.type!==Kn.Bytes)return f.push(this.readSVarint());var l=io(this);for(f=f||[];this.pos<l;)f.push(this.readSVarint());return f},readPackedBoolean:function(f){if(this.type!==Kn.Bytes)return f.push(this.readBoolean());var l=io(this);for(f=f||[];this.pos<l;)f.push(this.readBoolean());return f},readPackedFloat:function(f){if(this.type!==Kn.Bytes)return f.push(this.readFloat());var l=io(this);for(f=f||[];this.pos<l;)f.push(this.readFloat());return f},readPackedDouble:function(f){if(this.type!==Kn.Bytes)return f.push(this.readDouble());var l=io(this);for(f=f||[];this.pos<l;)f.push(this.readDouble());return f},readPackedFixed32:function(f){if(this.type!==Kn.Bytes)return f.push(this.readFixed32());var l=io(this);for(f=f||[];this.pos<l;)f.push(this.readFixed32());return f},readPackedSFixed32:function(f){if(this.type!==Kn.Bytes)return f.push(this.readSFixed32());var l=io(this);for(f=f||[];this.pos<l;)f.push(this.readSFixed32());return f},readPackedFixed64:function(f){if(this.type!==Kn.Bytes)return f.push(this.readFixed64());var l=io(this);for(f=f||[];this.pos<l;)f.push(this.readFixed64());return f},readPackedSFixed64:function(f){if(this.type!==Kn.Bytes)return f.push(this.readSFixed64());var l=io(this);for(f=f||[];this.pos<l;)f.push(this.readSFixed64());return f},skip:function(f){var l=7&f;if(l===Kn.Varint)for(;this.buf[this.pos++]>127;);else if(l===Kn.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Kn.Fixed32)this.pos+=4;else{if(l!==Kn.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(f,l){this.writeVarint(f<<3|l)},realloc:function(f){for(var l=this.length||16;l<this.pos+f;)l*=2;if(l!==this.length){var h=new Uint8Array(l);h.set(this.buf),this.buf=h,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(f){this.realloc(4),hl(this.buf,f,this.pos),this.pos+=4},writeSFixed32:function(f){this.realloc(4),hl(this.buf,f,this.pos),this.pos+=4},writeFixed64:function(f){this.realloc(8),hl(this.buf,-1&f,this.pos),hl(this.buf,Math.floor(f*gm),this.pos+4),this.pos+=8},writeSFixed64:function(f){this.realloc(8),hl(this.buf,-1&f,this.pos),hl(this.buf,Math.floor(f*gm),this.pos+4),this.pos+=8},writeVarint:function(f){(f=+f||0)>268435455||f<0?function(l,h){var m,v;if(l>=0?(m=l%4294967296|0,v=l/4294967296|0):(v=~(-l/4294967296),4294967295^(m=~(-l%4294967296))?m=m+1|0:(m=0,v=v+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(w,k,I){I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,w>>>=7,I.buf[I.pos++]=127&w|128,I.buf[I.pos]=127&(w>>>=7)}(m,0,h),function(w,k){var I=(7&w)<<4;k.buf[k.pos++]|=I|((w>>>=3)?128:0),w&&(k.buf[k.pos++]=127&w|((w>>>=7)?128:0),w&&(k.buf[k.pos++]=127&w|((w>>>=7)?128:0),w&&(k.buf[k.pos++]=127&w|((w>>>=7)?128:0),w&&(k.buf[k.pos++]=127&w|((w>>>=7)?128:0),w&&(k.buf[k.pos++]=127&w)))))}(v,h)}(f,this):(this.realloc(4),this.buf[this.pos++]=127&f|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=f>>>7&127))))},writeSVarint:function(f){this.writeVarint(f<0?2*-f-1:2*f)},writeBoolean:function(f){this.writeVarint(!!f)},writeString:function(f){f=String(f),this.realloc(4*f.length),this.pos++;var l=this.pos;this.pos=function(m,v,w){for(var k,I,M=0;M<v.length;M++){if((k=v.charCodeAt(M))>55295&&k<57344){if(!I){k>56319||M+1===v.length?(m[w++]=239,m[w++]=191,m[w++]=189):I=k;continue}if(k<56320){m[w++]=239,m[w++]=191,m[w++]=189,I=k;continue}k=I-55296<<10|k-56320|65536,I=null}else I&&(m[w++]=239,m[w++]=191,m[w++]=189,I=null);k<128?m[w++]=k:(k<2048?m[w++]=k>>6|192:(k<65536?m[w++]=k>>12|224:(m[w++]=k>>18|240,m[w++]=k>>12&63|128),m[w++]=k>>6&63|128),m[w++]=63&k|128)}return w}(this.buf,f,this.pos);var h=this.pos-l;h>=128&&ym(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeFloat:function(f){this.realloc(4),_m(this.buf,f,this.pos,!0,23,4),this.pos+=4},writeDouble:function(f){this.realloc(8),_m(this.buf,f,this.pos,!0,52,8),this.pos+=8},writeBytes:function(f){var l=f.length;this.writeVarint(l),this.realloc(l);for(var h=0;h<l;h++)this.buf[this.pos++]=f[h]},writeRawMessage:function(f,l){this.pos++;var h=this.pos;f(l,this);var m=this.pos-h;m>=128&&ym(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeMessage:function(f,l,h){this.writeTag(f,Kn.Bytes),this.writeRawMessage(l,h)},writePackedVarint:function(f,l){l.length&&this.writeMessage(f,d$,l)},writePackedSVarint:function(f,l){l.length&&this.writeMessage(f,p$,l)},writePackedBoolean:function(f,l){l.length&&this.writeMessage(f,g$,l)},writePackedFloat:function(f,l){l.length&&this.writeMessage(f,m$,l)},writePackedDouble:function(f,l){l.length&&this.writeMessage(f,_$,l)},writePackedFixed32:function(f,l){l.length&&this.writeMessage(f,v$,l)},writePackedSFixed32:function(f,l){l.length&&this.writeMessage(f,y$,l)},writePackedFixed64:function(f,l){l.length&&this.writeMessage(f,b$,l)},writePackedSFixed64:function(f,l){l.length&&this.writeMessage(f,$$,l)},writeBytesField:function(f,l){this.writeTag(f,Kn.Bytes),this.writeBytes(l)},writeFixed32Field:function(f,l){this.writeTag(f,Kn.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(f,l){this.writeTag(f,Kn.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(f,l){this.writeTag(f,Kn.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(f,l){this.writeTag(f,Kn.Fixed64),this.writeSFixed64(l)},writeVarintField:function(f,l){this.writeTag(f,Kn.Varint),this.writeVarint(l)},writeSVarintField:function(f,l){this.writeTag(f,Kn.Varint),this.writeSVarint(l)},writeStringField:function(f,l){this.writeTag(f,Kn.Bytes),this.writeString(l)},writeFloatField:function(f,l){this.writeTag(f,Kn.Fixed32),this.writeFloat(l)},writeDoubleField:function(f,l){this.writeTag(f,Kn.Fixed64),this.writeDouble(l)},writeBooleanField:function(f,l){this.writeVarintField(f,!!l)}};var Qh=c(pm);const ed=3;function w$(f,l,h){f===1&&h.readMessage(x$,l)}function x$(f,l,h){if(f===3){const{id:m,bitmap:v,width:w,height:k,left:I,top:M,advance:O}=h.readMessage(k$,{});l.push({id:m,bitmap:new Pc({width:w+2*ed,height:k+2*ed},v),metrics:{width:w,height:k,left:I,top:M,advance:O}})}}function k$(f,l,h){f===1?l.id=h.readVarint():f===2?l.bitmap=h.readBytes():f===3?l.width=h.readVarint():f===4?l.height=h.readVarint():f===5?l.left=h.readSVarint():f===6?l.top=h.readSVarint():f===7&&(l.advance=h.readVarint())}const $m=ed;function wm(f){let l=0,h=0;for(const k of f)l+=k.w*k.h,h=Math.max(h,k.w);f.sort((k,I)=>I.h-k.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),h),h:1/0}];let v=0,w=0;for(const k of f)for(let I=m.length-1;I>=0;I--){const M=m[I];if(!(k.w>M.w||k.h>M.h)){if(k.x=M.x,k.y=M.y,w=Math.max(w,k.y+k.h),v=Math.max(v,k.x+k.w),k.w===M.w&&k.h===M.h){const O=m.pop();I<m.length&&(m[I]=O)}else k.h===M.h?(M.x+=k.w,M.w-=k.w):k.w===M.w?(M.y+=k.h,M.h-=k.h):(m.push({x:M.x+k.w,y:M.y,w:M.w-k.w,h:k.h}),M.y+=k.h,M.h-=k.h);break}}return{w:v,h:w,fill:l/(v*w)||0}}const As=1;class td{constructor(l,{pixelRatio:h,version:m,stretchX:v,stretchY:w,content:k,textFitWidth:I,textFitHeight:M}){this.paddedRect=l,this.pixelRatio=h,this.stretchX=v,this.stretchY=w,this.content=k,this.version=m,this.textFitWidth=I,this.textFitHeight=M}get tl(){return[this.paddedRect.x+As,this.paddedRect.y+As]}get br(){return[this.paddedRect.x+this.paddedRect.w-As,this.paddedRect.y+this.paddedRect.h-As]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*As)/this.pixelRatio,(this.paddedRect.h-2*As)/this.pixelRatio]}}class xm{constructor(l,h){const m={},v={};this.haveRenderCallbacks=[];const w=[];this.addImages(l,m,w),this.addImages(h,v,w);const{w:k,h:I}=wm(w),M=new Zs({width:k||1,height:I||1});for(const O in l){const H=l[O],K=m[O].paddedRect;Zs.copy(H.data,M,{x:0,y:0},{x:K.x+As,y:K.y+As},H.data)}for(const O in h){const H=h[O],K=v[O].paddedRect,J=K.x+As,se=K.y+As,pe=H.data.width,be=H.data.height;Zs.copy(H.data,M,{x:0,y:0},{x:J,y:se},H.data),Zs.copy(H.data,M,{x:0,y:be-1},{x:J,y:se-1},{width:pe,height:1}),Zs.copy(H.data,M,{x:0,y:0},{x:J,y:se+be},{width:pe,height:1}),Zs.copy(H.data,M,{x:pe-1,y:0},{x:J-1,y:se},{width:1,height:be}),Zs.copy(H.data,M,{x:0,y:0},{x:J+pe,y:se},{width:1,height:be})}this.image=M,this.iconPositions=m,this.patternPositions=v}addImages(l,h,m){for(const v in l){const w=l[v],k={x:0,y:0,w:w.data.width+2*As,h:w.data.height+2*As};m.push(k),h[v]=new td(k,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(l,h){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),h)}patchUpdatedImage(l,h,m){if(!l||!h||l.version===h.version)return;l.version=h.version;const[v,w]=l.tl;m.update(h.data,void 0,{x:v,y:w})}}var Mo;Qt("ImagePosition",td),Qt("ImageAtlas",xm),a.ah=void 0,(Mo=a.ah||(a.ah={}))[Mo.none=0]="none",Mo[Mo.horizontal=1]="horizontal",Mo[Mo.vertical=2]="vertical",Mo[Mo.horizontalOnly=3]="horizontalOnly";const Oc=-17;class Fc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,h){const m=new Fc;return m.scale=l||1,m.fontStack=h,m}static forImage(l){const h=new Fc;return h.imageName=l,h}}class dl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,h){const m=new dl;for(let v=0;v<l.sections.length;v++){const w=l.sections[v];w.image?m.addImageSection(w):m.addTextSection(w,h)}return m}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let h="";for(let m=0;m<l.length;m++){const v=l.charCodeAt(m+1)||null,w=l.charCodeAt(m-1)||null;h+=v&&Di(v)&&!Rc[l[m+1]]||w&&Di(w)&&!Rc[l[m-1]]||!Rc[l[m]]?l[m]:Rc[l[m]]}return h}(this.text)}trim(){let l=0;for(let m=0;m<this.text.length&&gf[this.text.charCodeAt(m)];m++)l++;let h=this.text.length;for(let m=this.text.length-1;m>=0&&m>=l&&gf[this.text.charCodeAt(m)];m--)h--;this.text=this.text.substring(l,h),this.sectionIndex=this.sectionIndex.slice(l,h)}substring(l,h){const m=new dl;return m.text=this.text.substring(l,h),m.sectionIndex=this.sectionIndex.slice(l,h),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,h)=>Math.max(l,this.sections[h].scale),0)}addTextSection(l,h){this.text+=l.text,this.sections.push(Fc.forText(l.scale,l.fontStack||h));const m=this.sections.length-1;for(let v=0;v<l.text.length;++v)this.sectionIndex.push(m)}addImageSection(l){const h=l.image?l.image.name:"";if(h.length===0)return void he("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(Fc.forImage(h)),this.sectionIndex.push(this.sections.length-1)):he("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _f(f,l,h,m,v,w,k,I,M,O,H,K,J,se,pe,be){const Ee=dl.fromFeature(f,v);let ze;K===a.ah.vertical&&Ee.verticalizePunctuation();const{processBidirectionalText:Ke,processStyledBidirectionalText:Re}=vi;if(Ke&&Ee.sections.length===1){ze=[];const _t=Ke(Ee.toString(),nd(Ee,O,w,l,m,se,pe));for(const Kt of _t){const rn=new dl;rn.text=Kt,rn.sections=Ee.sections;for(let Gt=0;Gt<Kt.length;Gt++)rn.sectionIndex.push(0);ze.push(rn)}}else if(Re){ze=[];const _t=Re(Ee.text,Ee.sectionIndex,nd(Ee,O,w,l,m,se,pe));for(const Kt of _t){const rn=new dl;rn.text=Kt[0],rn.sectionIndex=Kt[1],rn.sections=Ee.sections,ze.push(rn)}}else ze=function(_t,Kt){const rn=[],Gt=_t.text;let jt=0;for(const en of Kt)rn.push(_t.substring(jt,en)),jt=en;return jt<Gt.length&&rn.push(_t.substring(jt,Gt.length)),rn}(Ee,nd(Ee,O,w,l,m,se,pe));const Ge=[],ft={positionedLines:Ge,text:Ee.toString(),top:H[1],bottom:H[1],left:H[0],right:H[0],writingMode:K,iconsInText:!1,verticalizable:!1};return function(_t,Kt,rn,Gt,jt,en,ln,Zt,gt,nn,tn,Pn){let Xn=0,Jn=Oc,Cr=0,Ks=0;const fs=Zt==="right"?1:Zt==="left"?0:.5;let Lr=0;for(const Sr of jt){Sr.trim();const Gr=Sr.getMaxScale(),ws=(Gr-1)*zr,Ms={positionedGlyphs:[],lineOffset:0};_t.positionedLines[Lr]=Ms;const ss=Ms.positionedGlyphs;let Ds=0;if(!Sr.length()){Jn+=en,++Lr;continue}for(let vr=0;vr<Sr.length();vr++){const Ln=Sr.getSection(vr),Tr=Sr.getSectionIndex(vr),is=Sr.getCharCode(vr);let Rr=0,oi=null,bi=null,$i=null,oo=zr;const ai=!(gt===a.ah.horizontal||!tn&&!yc(is)||tn&&(gf[is]||(Jr=is,Wt.Arabic(Jr)||Wt["Arabic Supplement"](Jr)||Wt["Arabic Extended-A"](Jr)||Wt["Arabic Presentation Forms-A"](Jr)||Wt["Arabic Presentation Forms-B"](Jr))));if(Ln.imageName){const Js=Gt[Ln.imageName];if(!Js)continue;$i=Ln.imageName,_t.iconsInText=_t.iconsInText||!0,bi=Js.paddedRect;const zs=Js.displaySize;Ln.scale=Ln.scale*zr/Pn,oi={width:zs[0],height:zs[1],left:As,top:-$m,advance:ai?zs[1]:zs[0]},Rr=ws+(zr-zs[1]*Ln.scale),oo=oi.advance;const ao=ai?zs[0]*Ln.scale-zr*Gr:zs[1]*Ln.scale-zr*Gr;ao>0&&ao>Ds&&(Ds=ao)}else{const Js=rn[Ln.fontStack],zs=Js&&Js[is];if(zs&&zs.rect)bi=zs.rect,oi=zs.metrics;else{const ao=Kt[Ln.fontStack],jc=ao&&ao[is];if(!jc)continue;oi=jc.metrics}Rr=(Gr-Ln.scale)*zr}ai?(_t.verticalizable=!0,ss.push({glyph:is,imageName:$i,x:Xn,y:Jn+Rr,vertical:ai,scale:Ln.scale,fontStack:Ln.fontStack,sectionIndex:Tr,metrics:oi,rect:bi}),Xn+=oo*Ln.scale+nn):(ss.push({glyph:is,imageName:$i,x:Xn,y:Jn+Rr,vertical:ai,scale:Ln.scale,fontStack:Ln.fontStack,sectionIndex:Tr,metrics:oi,rect:bi}),Xn+=oi.advance*Ln.scale+nn)}ss.length!==0&&(Cr=Math.max(Xn-nn,Cr),T$(ss,0,ss.length-1,fs,Ds)),Xn=0;const Xs=en*Gr+Ds;Ms.lineOffset=Math.max(Ds,ws),Jn+=Xs,Ks=Math.max(Xs,Ks),++Lr}var Jr;const hs=Jn-Oc,{horizontalAlign:$s,verticalAlign:ds}=rd(ln);(function(Sr,Gr,ws,Ms,ss,Ds,Xs,vr,Ln){const Tr=(Gr-ws)*ss;let is=0;is=Ds!==Xs?-vr*Ms-Oc:(-Ms*Ln+.5)*Xs;for(const Rr of Sr)for(const oi of Rr.positionedGlyphs)oi.x+=Tr,oi.y+=is})(_t.positionedLines,fs,$s,ds,Cr,Ks,en,hs,jt.length),_t.top+=-ds*hs,_t.bottom=_t.top+hs,_t.left+=-$s*Cr,_t.right=_t.left+Cr}(ft,l,h,m,ze,k,I,M,K,O,J,be),!function(_t){for(const Kt of _t)if(Kt.positionedGlyphs.length!==0)return!1;return!0}(Ge)&&ft}const gf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},C$={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function km(f,l,h,m,v,w){if(l.imageName){const k=m[l.imageName];return k?k.displaySize[0]*l.scale*zr/w+v:0}{const k=h[l.fontStack],I=k&&k[f];return I?I.metrics.advance*l.scale+v:0}}function Cm(f,l,h,m){const v=Math.pow(f-l,2);return m?f<l?v/2:2*v:v+Math.abs(h)*h}function S$(f,l,h){let m=0;return f===10&&(m-=1e4),h&&(m+=150),f!==40&&f!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function Sm(f,l,h,m,v,w){let k=null,I=Cm(l,h,v,w);for(const M of m){const O=Cm(l-M.x,h,v,w)+M.badness;O<=I&&(k=M,I=O)}return{index:f,x:l,priorBreak:k,badness:I}}function Tm(f){return f?Tm(f.priorBreak).concat(f.index):[]}function nd(f,l,h,m,v,w,k){if(w!=="point")return[];if(!f)return[];const I=[],M=function(J,se,pe,be,Ee,ze){let Ke=0;for(let Re=0;Re<J.length();Re++){const Ge=J.getSection(Re);Ke+=km(J.getCharCode(Re),Ge,be,Ee,se,ze)}return Ke/Math.max(1,Math.ceil(Ke/pe))}(f,l,h,m,v,k),O=f.text.indexOf("")>=0;let H=0;for(let J=0;J<f.length();J++){const se=f.getSection(J),pe=f.getCharCode(J);if(gf[pe]||(H+=km(pe,se,m,v,l,k)),J<f.length()-1){const be=!((K=pe)<11904||!(Wt["Bopomofo Extended"](K)||Wt.Bopomofo(K)||Wt["CJK Compatibility Forms"](K)||Wt["CJK Compatibility Ideographs"](K)||Wt["CJK Compatibility"](K)||Wt["CJK Radicals Supplement"](K)||Wt["CJK Strokes"](K)||Wt["CJK Symbols and Punctuation"](K)||Wt["CJK Unified Ideographs Extension A"](K)||Wt["CJK Unified Ideographs"](K)||Wt["Enclosed CJK Letters and Months"](K)||Wt["Halfwidth and Fullwidth Forms"](K)||Wt.Hiragana(K)||Wt["Ideographic Description Characters"](K)||Wt["Kangxi Radicals"](K)||Wt["Katakana Phonetic Extensions"](K)||Wt.Katakana(K)||Wt["Vertical Forms"](K)||Wt["Yi Radicals"](K)||Wt["Yi Syllables"](K)));(C$[pe]||be||se.imageName)&&I.push(Sm(J+1,H,M,I,S$(pe,f.getCharCode(J+1),be&&O),!1))}}var K;return Tm(Sm(f.length(),H,M,I,0,!0))}function rd(f){let l=.5,h=.5;switch(f){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:l,verticalAlign:h}}function T$(f,l,h,m,v){if(!m&&!v)return;const w=f[h],k=(f[h].x+w.metrics.advance*w.scale)*m;for(let I=l;I<=h;I++)f[I].x-=k,f[I].y+=v}function I$(f,l,h){const{horizontalAlign:m,verticalAlign:v}=rd(h),w=l[0]-f.displaySize[0]*m,k=l[1]-f.displaySize[1]*v;return{image:f,top:k,bottom:k+f.displaySize[1],left:w,right:w+f.displaySize[0]}}function Im(f){var l,h;let m=f.left,v=f.top,w=f.right-m,k=f.bottom-v;const I=(l=f.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",M=(h=f.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",O=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(M==="proportional"){if(I==="stretchOnly"&&w/k<O||I==="proportional"){const H=Math.ceil(k*O);m*=H/w,w=H}}else if(I==="proportional"&&M==="stretchOnly"&&O!==0&&w/k>O){const H=Math.ceil(w/O);v*=H/k,k=H}return{x1:m,y1:v,x2:m+w,y2:v+k}}function Em(f,l,h,m,v,w){const k=f.image;let I;if(k.content){const Ee=k.content,ze=k.pixelRatio||1;I=[Ee[0]/ze,Ee[1]/ze,k.displaySize[0]-Ee[2]/ze,k.displaySize[1]-Ee[3]/ze]}const M=l.left*w,O=l.right*w;let H,K,J,se;h==="width"||h==="both"?(se=v[0]+M-m[3],K=v[0]+O+m[1]):(se=v[0]+(M+O-k.displaySize[0])/2,K=se+k.displaySize[0]);const pe=l.top*w,be=l.bottom*w;return h==="height"||h==="both"?(H=v[1]+pe-m[0],J=v[1]+be+m[2]):(H=v[1]+(pe+be-k.displaySize[1])/2,J=H+k.displaySize[1]),{image:k,top:H,right:K,bottom:J,left:se,collisionPadding:I}}const Bc=255,Li=128,Do=Bc*Li;function Pm(f,l){const{expression:h}=l;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new sr(f+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:v}=h;let w=0;for(;w<m.length&&m[w]<=f;)w++;w=Math.max(0,w-1);let k=w;for(;k<m.length&&m[k]<f+1;)k++;k=Math.min(m.length-1,k);const I=m[w],M=m[k];return h.kind==="composite"?{kind:"composite",minZoom:I,maxZoom:M,interpolationType:v}:{kind:"camera",minZoom:I,maxZoom:M,minSize:h.evaluate(new sr(I)),maxSize:h.evaluate(new sr(M)),interpolationType:v}}}function sd(f,l,h){let m="never";const v=f.get(l);return v?m=v:f.get(h)&&(m="always"),m}const E$=Ao.VectorTileFeature.types,P$=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vf(f,l,h,m,v,w,k,I,M,O,H,K,J){const se=I?Math.min(Do,Math.round(I[0])):0,pe=I?Math.min(Do,Math.round(I[1])):0;f.emplaceBack(l,h,Math.round(32*m),Math.round(32*v),w,k,(se<<1)+(M?1:0),pe,16*O,16*H,256*K,256*J)}function id(f,l,h){f.emplaceBack(l.x,l.y,h),f.emplaceBack(l.x,l.y,h),f.emplaceBack(l.x,l.y,h),f.emplaceBack(l.x,l.y,h)}function A$(f){for(const l of f.sections)if(Qu(l.text))return!0;return!1}class od{constructor(l){this.layoutVertexArray=new Us,this.indexArray=new To,this.programConfigurations=l,this.segments=new Hr,this.dynamicLayoutVertexArray=new Dr,this.opacityVertexArray=new Eh,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ps}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,h,m,v){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,l$.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,c$.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,P$,!0),this.opacityVertexBuffer.itemSize=1),(m||v)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Qt("SymbolBuffers",od);class ad{constructor(l,h,m){this.layoutVertexArray=new l,this.layoutAttributes=h,this.indexArray=new m,this.segments=new Hr,this.collisionVertexArray=new Ph}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,u$.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Qt("CollisionBuffers",ad);class pl{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(k=>k.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bh([]),this.placementViewportMatrix=Bh([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pm(this.zoom,h["text-size"]),this.iconSizeData=Pm(this.zoom,h["icon-size"]);const m=this.layers[0].layout,v=m.get("symbol-sort-key"),w=m.get("symbol-z-order");this.canOverlap=sd(m,"text-overlap","text-allow-overlap")!=="never"||sd(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(k=>a.ah[k])),this.stateDependentLayerIds=this.layers.filter(k=>k.isStateDependent()).map(k=>k.id),this.sourceID=l.sourceID}createArrays(){this.text=new od(new ga(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new od(new ga(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new ys,this.lineVertexArray=new Gs,this.symbolInstances=new gr,this.textAnchorOffsets=new zi}calculateGlyphDependencies(l,h,m,v,w){for(let k=0;k<l.length;k++)if(h[l.charCodeAt(k)]=!0,(m||v)&&w){const I=Rc[l.charAt(k)];I&&(h[I.charCodeAt(0)]=!0)}}populate(l,h,m){const v=this.layers[0],w=v.layout,k=w.get("text-font"),I=w.get("text-field"),M=w.get("icon-image"),O=(I.value.kind!=="constant"||I.value.value instanceof Cs&&!I.value.value.isEmpty()||I.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),H=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,K=w.get("symbol-sort-key");if(this.features=[],!O&&!H)return;const J=h.iconDependencies,se=h.glyphDependencies,pe=h.availableImages,be=new sr(this.zoom);for(const{feature:Ee,id:ze,index:Ke,sourceLayerIndex:Re}of l){const Ge=v._featureFilter.needGeometry,ft=ya(Ee,Ge);if(!v._featureFilter.filter(be,ft,m))continue;let _t,Kt;if(Ge||(ft.geometry=va(Ee)),O){const Gt=v.getValueAndResolveTokens("text-field",ft,m,pe),jt=Cs.factory(Gt),en=this.hasRTLText=this.hasRTLText||A$(jt);(!en||vi.getRTLTextPluginStatus()==="unavailable"||en&&vi.isParsed())&&(_t=h$(jt,v,ft))}if(H){const Gt=v.getValueAndResolveTokens("icon-image",ft,m,pe);Kt=Gt instanceof Ns?Gt:Ns.fromString(Gt)}if(!_t&&!Kt)continue;const rn=this.sortFeaturesByKey?K.evaluate(ft,{},m):void 0;if(this.features.push({id:ze,text:_t,icon:Kt,index:Ke,sourceLayerIndex:Re,geometry:ft.geometry,properties:Ee.properties,type:E$[Ee.type],sortKey:rn}),Kt&&(J[Kt.name]=!0),_t){const Gt=k.evaluate(ft,{},m).join(","),jt=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ah.vertical)>=0;for(const en of _t.sections)if(en.image)J[en.image.name]=!0;else{const ln=vc(_t.toString()),Zt=en.fontStack||Gt,gt=se[Zt]=se[Zt]||{};this.calculateGlyphDependencies(en.text,gt,jt,this.allowVerticalPlacement,ln)}}}w.get("symbol-placement")==="line"&&(this.features=function(Ee){const ze={},Ke={},Re=[];let Ge=0;function ft(Gt){Re.push(Ee[Gt]),Ge++}function _t(Gt,jt,en){const ln=Ke[Gt];return delete Ke[Gt],Ke[jt]=ln,Re[ln].geometry[0].pop(),Re[ln].geometry[0]=Re[ln].geometry[0].concat(en[0]),ln}function Kt(Gt,jt,en){const ln=ze[jt];return delete ze[jt],ze[Gt]=ln,Re[ln].geometry[0].shift(),Re[ln].geometry[0]=en[0].concat(Re[ln].geometry[0]),ln}function rn(Gt,jt,en){const ln=en?jt[0][jt[0].length-1]:jt[0][0];return`${Gt}:${ln.x}:${ln.y}`}for(let Gt=0;Gt<Ee.length;Gt++){const jt=Ee[Gt],en=jt.geometry,ln=jt.text?jt.text.toString():null;if(!ln){ft(Gt);continue}const Zt=rn(ln,en),gt=rn(ln,en,!0);if(Zt in Ke&&gt in ze&&Ke[Zt]!==ze[gt]){const nn=Kt(Zt,gt,en),tn=_t(Zt,gt,Re[nn].geometry);delete ze[Zt],delete Ke[gt],Ke[rn(ln,Re[tn].geometry,!0)]=tn,Re[nn].geometry=null}else Zt in Ke?_t(Zt,gt,en):gt in ze?Kt(Zt,gt,en):(ft(Gt),ze[Zt]=Ge-1,Ke[gt]=Ge-1)}return Re.filter(Gt=>Gt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ee,ze)=>Ee.sortKey-ze.sortKey)}update(l,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,h,this.layers,m),this.icon.programConfigurations.updatePaintArrays(l,h,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,h){const m=this.lineVertexArray.length;if(l.segment!==void 0){let v=l.dist(h[l.segment+1]),w=l.dist(h[l.segment]);const k={};for(let I=l.segment+1;I<h.length;I++)k[I]={x:h[I].x,y:h[I].y,tileUnitDistanceFromAnchor:v},I<h.length-1&&(v+=h[I+1].dist(h[I]));for(let I=l.segment||0;I>=0;I--)k[I]={x:h[I].x,y:h[I].y,tileUnitDistanceFromAnchor:w},I>0&&(w+=h[I-1].dist(h[I]));for(let I=0;I<h.length;I++){const M=k[I];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,h,m,v,w,k,I,M,O,H,K,J){const se=l.indexArray,pe=l.layoutVertexArray,be=l.segments.prepareSegment(4*h.length,pe,se,this.canOverlap?k.sortKey:void 0),Ee=this.glyphOffsetArray.length,ze=be.vertexLength,Ke=this.allowVerticalPlacement&&I===a.ah.vertical?Math.PI/2:0,Re=k.text&&k.text.sections;for(let Ge=0;Ge<h.length;Ge++){const{tl:ft,tr:_t,bl:Kt,br:rn,tex:Gt,pixelOffsetTL:jt,pixelOffsetBR:en,minFontScaleX:ln,minFontScaleY:Zt,glyphOffset:gt,isSDF:nn,sectionIndex:tn}=h[Ge],Pn=be.vertexLength,Xn=gt[1];vf(pe,M.x,M.y,ft.x,Xn+ft.y,Gt.x,Gt.y,m,nn,jt.x,jt.y,ln,Zt),vf(pe,M.x,M.y,_t.x,Xn+_t.y,Gt.x+Gt.w,Gt.y,m,nn,en.x,jt.y,ln,Zt),vf(pe,M.x,M.y,Kt.x,Xn+Kt.y,Gt.x,Gt.y+Gt.h,m,nn,jt.x,en.y,ln,Zt),vf(pe,M.x,M.y,rn.x,Xn+rn.y,Gt.x+Gt.w,Gt.y+Gt.h,m,nn,en.x,en.y,ln,Zt),id(l.dynamicLayoutVertexArray,M,Ke),se.emplaceBack(Pn,Pn+1,Pn+2),se.emplaceBack(Pn+1,Pn+2,Pn+3),be.vertexLength+=4,be.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(gt[0]),Ge!==h.length-1&&tn===h[Ge+1].sectionIndex||l.programConfigurations.populatePaintArrays(pe.length,k,k.index,{},J,Re&&Re[tn])}l.placedSymbolArray.emplaceBack(M.x,M.y,Ee,this.glyphOffsetArray.length-Ee,ze,O,H,M.segment,m?m[0]:0,m?m[1]:0,v[0],v[1],I,0,!1,0,K)}_addCollisionDebugVertex(l,h,m,v,w,k){return h.emplaceBack(0,0),l.emplaceBack(m.x,m.y,v,w,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(l,h,m,v,w,k,I){const M=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),O=M.vertexLength,H=w.layoutVertexArray,K=w.collisionVertexArray,J=I.anchorX,se=I.anchorY;this._addCollisionDebugVertex(H,K,k,J,se,new b(l,h)),this._addCollisionDebugVertex(H,K,k,J,se,new b(m,h)),this._addCollisionDebugVertex(H,K,k,J,se,new b(m,v)),this._addCollisionDebugVertex(H,K,k,J,se,new b(l,v)),M.vertexLength+=4;const pe=w.indexArray;pe.emplaceBack(O,O+1),pe.emplaceBack(O+1,O+2),pe.emplaceBack(O+2,O+3),pe.emplaceBack(O+3,O),M.primitiveLength+=4}addDebugCollisionBoxes(l,h,m,v){for(let w=l;w<h;w++){const k=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,v?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ad(tf,dm.members,xc),this.iconCollisionBox=new ad(tf,dm.members,xc);for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(l,h,m,v,w,k,I,M,O){const H={};for(let K=h;K<m;K++){const J=l.get(K);H.textBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},H.textFeatureIndex=J.featureIndex;break}for(let K=v;K<w;K++){const J=l.get(K);H.verticalTextBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},H.verticalTextFeatureIndex=J.featureIndex;break}for(let K=k;K<I;K++){const J=l.get(K);H.iconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},H.iconFeatureIndex=J.featureIndex;break}for(let K=M;K<O;K++){const J=l.get(K);H.verticalIconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},H.verticalIconFeatureIndex=J.featureIndex;break}return H}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,h){const m=l.placedSymbolArray.get(h),v=m.vertexStartIndex+4*m.numGlyphs;for(let w=m.vertexStartIndex;w<v;w+=4)l.indexArray.emplaceBack(w,w+1,w+2),l.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(l),m=Math.cos(l),v=[],w=[],k=[];for(let I=0;I<this.symbolInstances.length;++I){k.push(I);const M=this.symbolInstances.get(I);v.push(0|Math.round(h*M.anchorX+m*M.anchorY)),w.push(M.featureIndex)}return k.sort((I,M)=>v[I]-v[M]||w[M]-w[I]),k}addToSortKeyRanges(l,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((v,w,k)=>{v>=0&&k.indexOf(v)===w&&this.addIndicesForPlacedSymbol(this.text,v)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Am,Mm;Qt("SymbolBucket",pl,{omit:["layers","collisionBoxArray","features","compareText"]}),pl.MAX_GLYPHS=65535,pl.addDynamicAttributes=id;var ld={get paint(){return Mm=Mm||new y({"icon-opacity":new $(Ze.paint_symbol["icon-opacity"]),"icon-color":new $(Ze.paint_symbol["icon-color"]),"icon-halo-color":new $(Ze.paint_symbol["icon-halo-color"]),"icon-halo-width":new $(Ze.paint_symbol["icon-halo-width"]),"icon-halo-blur":new $(Ze.paint_symbol["icon-halo-blur"]),"icon-translate":new an(Ze.paint_symbol["icon-translate"]),"icon-translate-anchor":new an(Ze.paint_symbol["icon-translate-anchor"]),"text-opacity":new $(Ze.paint_symbol["text-opacity"]),"text-color":new $(Ze.paint_symbol["text-color"],{runtimeType:Ur,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new $(Ze.paint_symbol["text-halo-color"]),"text-halo-width":new $(Ze.paint_symbol["text-halo-width"]),"text-halo-blur":new $(Ze.paint_symbol["text-halo-blur"]),"text-translate":new an(Ze.paint_symbol["text-translate"]),"text-translate-anchor":new an(Ze.paint_symbol["text-translate-anchor"])})},get layout(){return Am=Am||new y({"symbol-placement":new an(Ze.layout_symbol["symbol-placement"]),"symbol-spacing":new an(Ze.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new an(Ze.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new $(Ze.layout_symbol["symbol-sort-key"]),"symbol-z-order":new an(Ze.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new an(Ze.layout_symbol["icon-allow-overlap"]),"icon-overlap":new an(Ze.layout_symbol["icon-overlap"]),"icon-ignore-placement":new an(Ze.layout_symbol["icon-ignore-placement"]),"icon-optional":new an(Ze.layout_symbol["icon-optional"]),"icon-rotation-alignment":new an(Ze.layout_symbol["icon-rotation-alignment"]),"icon-size":new $(Ze.layout_symbol["icon-size"]),"icon-text-fit":new an(Ze.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new an(Ze.layout_symbol["icon-text-fit-padding"]),"icon-image":new $(Ze.layout_symbol["icon-image"]),"icon-rotate":new $(Ze.layout_symbol["icon-rotate"]),"icon-padding":new $(Ze.layout_symbol["icon-padding"]),"icon-keep-upright":new an(Ze.layout_symbol["icon-keep-upright"]),"icon-offset":new $(Ze.layout_symbol["icon-offset"]),"icon-anchor":new $(Ze.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new an(Ze.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new an(Ze.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new an(Ze.layout_symbol["text-rotation-alignment"]),"text-field":new $(Ze.layout_symbol["text-field"]),"text-font":new $(Ze.layout_symbol["text-font"]),"text-size":new $(Ze.layout_symbol["text-size"]),"text-max-width":new $(Ze.layout_symbol["text-max-width"]),"text-line-height":new an(Ze.layout_symbol["text-line-height"]),"text-letter-spacing":new $(Ze.layout_symbol["text-letter-spacing"]),"text-justify":new $(Ze.layout_symbol["text-justify"]),"text-radial-offset":new $(Ze.layout_symbol["text-radial-offset"]),"text-variable-anchor":new an(Ze.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new $(Ze.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new $(Ze.layout_symbol["text-anchor"]),"text-max-angle":new an(Ze.layout_symbol["text-max-angle"]),"text-writing-mode":new an(Ze.layout_symbol["text-writing-mode"]),"text-rotate":new $(Ze.layout_symbol["text-rotate"]),"text-padding":new an(Ze.layout_symbol["text-padding"]),"text-keep-upright":new an(Ze.layout_symbol["text-keep-upright"]),"text-transform":new $(Ze.layout_symbol["text-transform"]),"text-offset":new $(Ze.layout_symbol["text-offset"]),"text-allow-overlap":new an(Ze.layout_symbol["text-allow-overlap"]),"text-overlap":new an(Ze.layout_symbol["text-overlap"]),"text-ignore-placement":new an(Ze.layout_symbol["text-ignore-placement"]),"text-optional":new an(Ze.layout_symbol["text-optional"])})}};class Dm{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:pi,this.defaultValue=l}evaluate(l){if(l.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(l.formattedSection))return h.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qt("FormatSectionOverride",Dm,{omit:["defaultValue"]});class yf extends A{constructor(l){super(l,ld)}recalculate(l,h){if(super.recalculate(l,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const v=[];for(const w of m)v.indexOf(w)<0&&v.push(w);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,h,m,v){const w=this.layout.get(l).evaluate(h,{},m,v),k=this._unevaluatedLayout._values[l];return k.isDataDriven()||Qa(k.value)||!w?w:function(I,M){return M.replace(/{([^{}]+)}/g,(O,H)=>I&&H in I?String(I[H]):"")}(h.properties,w)}createBucket(l){return new pl(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of ld.paint.overridableProperties){if(!yf.hasPaintOverride(this.layout,l))continue;const h=this.paint.get(l),m=new Dm(h),v=new ec(m,h.property.specification);let w=null;w=h.value.kind==="constant"||h.value.kind==="source"?new tc("source",v):new $o("composite",v,h.value.zoomStops),this.paint._values[l]=new si(h.property,w,h.parameters)}}_handleOverridablePaintPropertyUpdate(l,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&yf.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,h){const m=l.get("text-field"),v=ld.paint.properties[h];let w=!1;const k=I=>{for(const M of I)if(v.overrides&&v.overrides.hasOverride(M))return void(w=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Cs)k(m.value.value.sections);else if(m.value.kind==="source"){const I=O=>{w||(O instanceof Hi&&xr(O.value)===qs?k(O.value.sections):O instanceof qa?k(O.sections):O.eachChild(I))},M=m.value;M._styleExpression&&I(M._styleExpression.expression)}return w}}let zm;var M$={get paint(){return zm=zm||new y({"background-color":new an(Ze.paint_background["background-color"]),"background-pattern":new p(Ze.paint_background["background-pattern"]),"background-opacity":new an(Ze.paint_background["background-opacity"])})}};class D$ extends A{constructor(l){super(l,M$)}}let Lm;var z$={get paint(){return Lm=Lm||new y({"raster-opacity":new an(Ze.paint_raster["raster-opacity"]),"raster-hue-rotate":new an(Ze.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new an(Ze.paint_raster["raster-brightness-min"]),"raster-brightness-max":new an(Ze.paint_raster["raster-brightness-max"]),"raster-saturation":new an(Ze.paint_raster["raster-saturation"]),"raster-contrast":new an(Ze.paint_raster["raster-contrast"]),"raster-resampling":new an(Ze.paint_raster["raster-resampling"]),"raster-fade-duration":new an(Ze.paint_raster["raster-fade-duration"])})}};class L$ extends A{constructor(l){super(l,z$)}}class R$ extends A{constructor(l){super(l,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class O${constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const cd=63710088e-1;class zo{constructor(l,h){if(isNaN(l)||isNaN(h))throw new Error(`Invalid LngLat object: (${l}, ${h})`);if(this.lng=+l,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new zo(ce(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const h=Math.PI/180,m=this.lat*h,v=l.lat*h,w=Math.sin(m)*Math.sin(v)+Math.cos(m)*Math.cos(v)*Math.cos((l.lng-this.lng)*h);return cd*Math.acos(Math.min(w,1))}static convert(l){if(l instanceof zo)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new zo(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new zo(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Rm=2*Math.PI*cd;function Om(f){return Rm*Math.cos(f*Math.PI/180)}function Fm(f){return(180+f)/360}function Bm(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function Nm(f,l){return f/Om(l)}function ud(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}class bf{constructor(l,h,m=0){this.x=+l,this.y=+h,this.z=+m}static fromLngLat(l,h=0){const m=zo.convert(l);return new bf(Fm(m.lng),Bm(m.lat),Nm(h,m.lat))}toLngLat(){return new zo(360*this.x-180,ud(this.y))}toAltitude(){return this.z*Om(ud(this.y))}meterInMercatorCoordinateUnits(){return 1/Rm*(l=ud(this.y),1/Math.cos(l*Math.PI/180));var l}}function Vm(f,l,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[f*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class fd{constructor(l,h,m){if(l<0||l>25||m<0||m>=Math.pow(2,l)||h<0||h>=Math.pow(2,l))throw new Error(`x=${h}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=h,this.y=m,this.key=Nc(0,l,l,h,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,h,m){const v=(k=this.y,I=this.z,M=Vm(256*(w=this.x),256*(k=Math.pow(2,I)-k-1),I),O=Vm(256*(w+1),256*(k+1),I),M[0]+","+M[1]+","+O[0]+","+O[1]);var w,k,I,M,O;const H=function(K,J,se){let pe,be="";for(let Ee=K;Ee>0;Ee--)pe=1<<Ee-1,be+=(J&pe?1:0)+(se&pe?2:0);return be}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,H).replace(/{bbox-epsg-3857}/g,v)}isChildOf(l){const h=this.z-l.z;return h>0&&l.x===this.x>>h&&l.y===this.y>>h}getTilePoint(l){const h=Math.pow(2,this.z);return new b((l.x*h-this.x)*kr,(l.y*h-this.y)*kr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Um{constructor(l,h){this.wrap=l,this.canonical=h,this.key=Nc(l,h.z,h.z,h.x,h.y)}}class Ws{constructor(l,h,m,v,w){if(l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=h,this.canonical=new fd(m,+v,+w),this.key=Nc(h,l,m,v,w)}clone(){return new Ws(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-l;return l>this.canonical.z?new Ws(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ws(l,this.wrap,l,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(l,h){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-l;return l>this.canonical.z?Nc(this.wrap*+h,l,this.canonical.z,this.canonical.x,this.canonical.y):Nc(this.wrap*+h,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap)return!1;const h=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>h&&l.canonical.y===this.canonical.y>>h}children(l){if(this.overscaledZ>=l)return[new Ws(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,v=2*this.canonical.y;return[new Ws(h,this.wrap,h,m,v),new Ws(h,this.wrap,h,m+1,v),new Ws(h,this.wrap,h,m,v+1),new Ws(h,this.wrap,h,m+1,v+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Ws(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Ws(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Um(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new bf(l.x-this.wrap,l.y))}}function Nc(f,l,h,m,v){(f*=2)<0&&(f=-1*f-1);const w=1<<h;return(w*w*f+w*v+m).toString(36)+h.toString(36)+l.toString(36)}Qt("CanonicalTileID",fd),Qt("OverscaledTileID",Ws,{omit:["posMatrix"]});class jm{constructor(l,h,m,v=1,w=1,k=1,I=0){if(this.uid=l,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void he(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const M=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=w,this.blueFactor=k,this.baseShift=I;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let O=0;O<M;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(M,O)]=this.data[this._idx(M-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,M)]=this.data[this._idx(O,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<M;O++)for(let H=0;H<M;H++){const K=this.get(O,H);K>this.max&&(this.max=K),K<this.min&&(this.min=K)}}get(l,h){const m=new Uint8Array(this.data.buffer),v=4*this._idx(l,h);return this.unpack(m[v],m[v+1],m[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,h){if(l<-1||l>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(l+1)}unpack(l,h,m){return l*this.redFactor+h*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new Zs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,h,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let v=h*this.dim,w=h*this.dim+this.dim,k=m*this.dim,I=m*this.dim+this.dim;switch(h){case-1:v=w-1;break;case 1:w=v+1}switch(m){case-1:k=I-1;break;case 1:I=k+1}const M=-h*this.dim,O=-m*this.dim;for(let H=k;H<I;H++)for(let K=v;K<w;K++)this.data[this._idx(K,H)]=l.data[this._idx(K+M,H+O)]}}Qt("DEMData",jm);class qm{constructor(l){this._stringToNumber={},this._numberToString=[];for(let h=0;h<l.length;h++){const m=l[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class Hm{constructor(l,h,m,v,w){this.type="Feature",this._vectorTileFeature=l,l._z=h,l._x=m,l._y=v,this.properties=l.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(l[h]=this[h]);return l}}class Gm{constructor(l,h){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new fa(kr,16,0),this.grid3D=new fa(kr,16,0),this.featureIndexArray=new no,this.promoteId=h}insert(l,h,m,v,w,k){const I=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,v,w);const M=k?this.grid3D:this.grid;for(let O=0;O<h.length;O++){const H=h[O],K=[1/0,1/0,-1/0,-1/0];for(let J=0;J<H.length;J++){const se=H[J];K[0]=Math.min(K[0],se.x),K[1]=Math.min(K[1],se.y),K[2]=Math.max(K[2],se.x),K[3]=Math.max(K[3],se.y)}K[0]<kr&&K[1]<kr&&K[2]>=0&&K[3]>=0&&M.insert(I,K[0],K[1],K[2],K[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ao.VectorTile(new Qh(this.rawTileData)).layers,this.sourceLayerCoder=new qm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,h,m,v){this.loadVTLayers();const w=l.params||{},k=kr/l.tileSize/l.scale,I=nc(w.filter),M=l.queryGeometry,O=l.queryPadding*k,H=Wm(M),K=this.grid.query(H.minX-O,H.minY-O,H.maxX+O,H.maxY+O),J=Wm(l.cameraQueryGeometry),se=this.grid3D.query(J.minX-O,J.minY-O,J.maxX+O,J.maxY+O,(Ee,ze,Ke,Re)=>function(Ge,ft,_t,Kt,rn){for(const jt of Ge)if(ft<=jt.x&&_t<=jt.y&&Kt>=jt.x&&rn>=jt.y)return!0;const Gt=[new b(ft,_t),new b(ft,rn),new b(Kt,rn),new b(Kt,_t)];if(Ge.length>2){for(const jt of Gt)if(al(Ge,jt))return!0}for(let jt=0;jt<Ge.length-1;jt++)if(vb(Ge[jt],Ge[jt+1],Gt))return!0;return!1}(l.cameraQueryGeometry,Ee-O,ze-O,Ke+O,Re+O));for(const Ee of se)K.push(Ee);K.sort(F$);const pe={};let be;for(let Ee=0;Ee<K.length;Ee++){const ze=K[Ee];if(ze===be)continue;be=ze;const Ke=this.featureIndexArray.get(ze);let Re=null;this.loadMatchingFeature(pe,Ke.bucketIndex,Ke.sourceLayerIndex,Ke.featureIndex,I,w.layers,w.availableImages,h,m,v,(Ge,ft,_t)=>(Re||(Re=va(Ge)),ft.queryIntersectsFeature(M,Ge,_t,Re,this.z,l.transform,k,l.pixelPosMatrix)))}return pe}loadMatchingFeature(l,h,m,v,w,k,I,M,O,H,K){const J=this.bucketLayerIDs[h];if(k&&!function(Ee,ze){for(let Ke=0;Ke<Ee.length;Ke++)if(ze.indexOf(Ee[Ke])>=0)return!0;return!1}(k,J))return;const se=this.sourceLayerCoder.decode(m),pe=this.vtLayers[se].feature(v);if(w.needGeometry){const Ee=ya(pe,!0);if(!w.filter(new sr(this.tileID.overscaledZ),Ee,this.tileID.canonical))return}else if(!w.filter(new sr(this.tileID.overscaledZ),pe))return;const be=this.getId(pe,se);for(let Ee=0;Ee<J.length;Ee++){const ze=J[Ee];if(k&&k.indexOf(ze)<0)continue;const Ke=M[ze];if(!Ke)continue;let Re={};be&&H&&(Re=H.getState(Ke.sourceLayer||"_geojsonTileLayer",be));const Ge=ge({},O[ze]);Ge.paint=Zm(Ge.paint,Ke.paint,pe,Re,I),Ge.layout=Zm(Ge.layout,Ke.layout,pe,Re,I);const ft=!K||K(pe,Ke,Re);if(!ft)continue;const _t=new Hm(pe,this.z,this.x,this.y,be);_t.layer=Ge;let Kt=l[ze];Kt===void 0&&(Kt=l[ze]=[]),Kt.push({featureIndex:v,feature:_t,intersectionZ:ft})}}lookupSymbolFeatures(l,h,m,v,w,k,I,M){const O={};this.loadVTLayers();const H=nc(w);for(const K of l)this.loadMatchingFeature(O,m,v,K,H,k,I,M,h);return O}hasLayer(l){for(const h of this.bucketLayerIDs)for(const m of h)if(l===m)return!0;return!1}getId(l,h){let m=l.id;return this.promoteId&&(m=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof m=="boolean"&&(m=Number(m))),m}}function Zm(f,l,h,m,v){return G(f,(w,k)=>{const I=l instanceof da?l.get(k):null;return I&&I.evaluate?I.evaluate(h,m,v):I})}function Wm(f){let l=1/0,h=1/0,m=-1/0,v=-1/0;for(const w of f)l=Math.min(l,w.x),h=Math.min(h,w.y),m=Math.max(m,w.x),v=Math.max(v,w.y);return{minX:l,minY:h,maxX:m,maxY:v}}function F$(f,l){return l-f}function Km(f,l,h,m,v){const w=[];for(let k=0;k<f.length;k++){const I=f[k];let M;for(let O=0;O<I.length-1;O++){let H=I[O],K=I[O+1];H.x<l&&K.x<l||(H.x<l?H=new b(l,H.y+(l-H.x)/(K.x-H.x)*(K.y-H.y))._round():K.x<l&&(K=new b(l,H.y+(l-H.x)/(K.x-H.x)*(K.y-H.y))._round()),H.y<h&&K.y<h||(H.y<h?H=new b(H.x+(h-H.y)/(K.y-H.y)*(K.x-H.x),h)._round():K.y<h&&(K=new b(H.x+(h-H.y)/(K.y-H.y)*(K.x-H.x),h)._round()),H.x>=m&&K.x>=m||(H.x>=m?H=new b(m,H.y+(m-H.x)/(K.x-H.x)*(K.y-H.y))._round():K.x>=m&&(K=new b(m,H.y+(m-H.x)/(K.x-H.x)*(K.y-H.y))._round()),H.y>=v&&K.y>=v||(H.y>=v?H=new b(H.x+(v-H.y)/(K.y-H.y)*(K.x-H.x),v)._round():K.y>=v&&(K=new b(H.x+(v-H.y)/(K.y-H.y)*(K.x-H.x),v)._round()),M&&H.equals(M[M.length-1])||(M=[H],w.push(M)),M.push(K)))))}}return w}Qt("FeatureIndex",Gm,{omit:["rawTileData","sourceLayerCoder"]});class Lo extends b{constructor(l,h,m,v){super(l,h),this.angle=m,v!==void 0&&(this.segment=v)}clone(){return new Lo(this.x,this.y,this.angle,this.segment)}}function Xm(f,l,h,m,v){if(l.segment===void 0||h===0)return!0;let w=l,k=l.segment+1,I=0;for(;I>-h/2;){if(k--,k<0)return!1;I-=f[k].dist(w),w=f[k]}I+=f[k].dist(f[k+1]),k++;const M=[];let O=0;for(;I<h/2;){const H=f[k],K=f[k+1];if(!K)return!1;let J=f[k-1].angleTo(H)-H.angleTo(K);for(J=Math.abs((J+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:I,angleDelta:J}),O+=J;I-M[0].distance>m;)O-=M.shift().angleDelta;if(O>v)return!1;k++,I+=H.dist(K)}return!0}function Jm(f){let l=0;for(let h=0;h<f.length-1;h++)l+=f[h].dist(f[h+1]);return l}function Ym(f,l,h){return f?.6*l*h:0}function Qm(f,l){return Math.max(f?f.right-f.left:0,l?l.right-l.left:0)}function B$(f,l,h,m,v,w){const k=Ym(h,v,w),I=Qm(h,m)*w;let M=0;const O=Jm(f)/2;for(let H=0;H<f.length-1;H++){const K=f[H],J=f[H+1],se=K.dist(J);if(M+se>O){const pe=(O-M)/se,be=ls.number(K.x,J.x,pe),Ee=ls.number(K.y,J.y,pe),ze=new Lo(be,Ee,J.angleTo(K),H);return ze._round(),!k||Xm(f,ze,I,k,l)?ze:void 0}M+=se}}function N$(f,l,h,m,v,w,k,I,M){const O=Ym(m,w,k),H=Qm(m,v),K=H*k,J=f[0].x===0||f[0].x===M||f[0].y===0||f[0].y===M;return l-K<l/4&&(l=K+l/4),e_(f,J?l/2*I%l:(H/2+2*w)*k*I%l,l,O,h,K,J,!1,M)}function e_(f,l,h,m,v,w,k,I,M){const O=w/2,H=Jm(f);let K=0,J=l-h,se=[];for(let pe=0;pe<f.length-1;pe++){const be=f[pe],Ee=f[pe+1],ze=be.dist(Ee),Ke=Ee.angleTo(be);for(;J+h<K+ze;){J+=h;const Re=(J-K)/ze,Ge=ls.number(be.x,Ee.x,Re),ft=ls.number(be.y,Ee.y,Re);if(Ge>=0&&Ge<M&&ft>=0&&ft<M&&J-O>=0&&J+O<=H){const _t=new Lo(Ge,ft,Ke,pe);_t._round(),m&&!Xm(f,_t,w,m,v)||se.push(_t)}}K+=ze}return I||se.length||k||(se=e_(f,K/2,h,m,v,w,k,!0,M)),se}Qt("Anchor",Lo);const ml=As;function t_(f,l,h,m){const v=[],w=f.image,k=w.pixelRatio,I=w.paddedRect.w-2*ml,M=w.paddedRect.h-2*ml;let O={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom};const H=w.stretchX||[[0,I]],K=w.stretchY||[[0,M]],J=(gt,nn)=>gt+nn[1]-nn[0],se=H.reduce(J,0),pe=K.reduce(J,0),be=I-se,Ee=M-pe;let ze=0,Ke=se,Re=0,Ge=pe,ft=0,_t=be,Kt=0,rn=Ee;if(w.content&&m){const gt=w.content,nn=gt[2]-gt[0],tn=gt[3]-gt[1];(w.textFitWidth||w.textFitHeight)&&(O=Im(f)),ze=$f(H,0,gt[0]),Re=$f(K,0,gt[1]),Ke=$f(H,gt[0],gt[2]),Ge=$f(K,gt[1],gt[3]),ft=gt[0]-ze,Kt=gt[1]-Re,_t=nn-Ke,rn=tn-Ge}const Gt=O.x1,jt=O.y1,en=O.x2-Gt,ln=O.y2-jt,Zt=(gt,nn,tn,Pn)=>{const Xn=wf(gt.stretch-ze,Ke,en,Gt),Jn=xf(gt.fixed-ft,_t,gt.stretch,se),Cr=wf(nn.stretch-Re,Ge,ln,jt),Ks=xf(nn.fixed-Kt,rn,nn.stretch,pe),fs=wf(tn.stretch-ze,Ke,en,Gt),Lr=xf(tn.fixed-ft,_t,tn.stretch,se),Jr=wf(Pn.stretch-Re,Ge,ln,jt),hs=xf(Pn.fixed-Kt,rn,Pn.stretch,pe),$s=new b(Xn,Cr),ds=new b(fs,Cr),Sr=new b(fs,Jr),Gr=new b(Xn,Jr),ws=new b(Jn/k,Ks/k),Ms=new b(Lr/k,hs/k),ss=l*Math.PI/180;if(ss){const vr=Math.sin(ss),Ln=Math.cos(ss),Tr=[Ln,-vr,vr,Ln];$s._matMult(Tr),ds._matMult(Tr),Gr._matMult(Tr),Sr._matMult(Tr)}const Ds=gt.stretch+gt.fixed,Xs=nn.stretch+nn.fixed;return{tl:$s,tr:ds,bl:Gr,br:Sr,tex:{x:w.paddedRect.x+ml+Ds,y:w.paddedRect.y+ml+Xs,w:tn.stretch+tn.fixed-Ds,h:Pn.stretch+Pn.fixed-Xs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ws,pixelOffsetBR:Ms,minFontScaleX:_t/k/en,minFontScaleY:rn/k/ln,isSDF:h}};if(m&&(w.stretchX||w.stretchY)){const gt=n_(H,be,se),nn=n_(K,Ee,pe);for(let tn=0;tn<gt.length-1;tn++){const Pn=gt[tn],Xn=gt[tn+1];for(let Jn=0;Jn<nn.length-1;Jn++)v.push(Zt(Pn,nn[Jn],Xn,nn[Jn+1]))}}else v.push(Zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:I+1},{fixed:0,stretch:M+1}));return v}function $f(f,l,h){let m=0;for(const v of f)m+=Math.max(l,Math.min(h,v[1]))-Math.max(l,Math.min(h,v[0]));return m}function n_(f,l,h){const m=[{fixed:-ml,stretch:0}];for(const[v,w]of f){const k=m[m.length-1];m.push({fixed:v-k.stretch,stretch:k.stretch}),m.push({fixed:v-k.stretch,stretch:k.stretch+(w-v)})}return m.push({fixed:l+ml,stretch:h}),m}function wf(f,l,h,m){return f/l*h+m}function xf(f,l,h,m){return f-l*h/m}class kf{constructor(l,h,m,v,w,k,I,M,O,H){var K;if(this.boxStartIndex=l.length,O){let J=k.top,se=k.bottom;const pe=k.collisionPadding;pe&&(J-=pe[1],se+=pe[3]);let be=se-J;be>0&&(be=Math.max(10,be),this.circleDiameter=be)}else{const J=!((K=k.image)===null||K===void 0)&&K.content&&(k.image.textFitWidth||k.image.textFitHeight)?Im(k):{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom};J.y1=J.y1*I-M[0],J.y2=J.y2*I+M[2],J.x1=J.x1*I-M[3],J.x2=J.x2*I+M[1];const se=k.collisionPadding;if(se&&(J.x1-=se[0]*I,J.y1-=se[1]*I,J.x2+=se[2]*I,J.y2+=se[3]*I),H){const pe=new b(J.x1,J.y1),be=new b(J.x2,J.y1),Ee=new b(J.x1,J.y2),ze=new b(J.x2,J.y2),Ke=H*Math.PI/180;pe._rotate(Ke),be._rotate(Ke),Ee._rotate(Ke),ze._rotate(Ke),J.x1=Math.min(pe.x,be.x,Ee.x,ze.x),J.x2=Math.max(pe.x,be.x,Ee.x,ze.x),J.y1=Math.min(pe.y,be.y,Ee.y,ze.y),J.y2=Math.max(pe.y,be.y,Ee.y,ze.y)}l.emplaceBack(h.x,h.y,J.x1,J.y1,J.x2,J.y2,m,v,w)}this.boxEndIndex=l.length}}class V${constructor(l=[],h=U$){if(this.data=l,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const l=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:h,compare:m}=this,v=h[l];for(;l>0;){const w=l-1>>1,k=h[w];if(m(v,k)>=0)break;h[l]=k,l=w}h[l]=v}_down(l){const{data:h,compare:m}=this,v=this.length>>1,w=h[l];for(;l<v;){let k=1+(l<<1),I=h[k];const M=k+1;if(M<this.length&&m(h[M],I)<0&&(k=M,I=h[M]),m(I,w)>=0)break;h[l]=I,l=k}h[l]=w}}function U$(f,l){return f<l?-1:f>l?1:0}function j$(f,l=1,h=!1){let m=1/0,v=1/0,w=-1/0,k=-1/0;const I=f[0];for(let se=0;se<I.length;se++){const pe=I[se];(!se||pe.x<m)&&(m=pe.x),(!se||pe.y<v)&&(v=pe.y),(!se||pe.x>w)&&(w=pe.x),(!se||pe.y>k)&&(k=pe.y)}const M=Math.min(w-m,k-v);let O=M/2;const H=new V$([],q$);if(M===0)return new b(m,v);for(let se=m;se<w;se+=M)for(let pe=v;pe<k;pe+=M)H.push(new _l(se+O,pe+O,O,f));let K=function(se){let pe=0,be=0,Ee=0;const ze=se[0];for(let Ke=0,Re=ze.length,Ge=Re-1;Ke<Re;Ge=Ke++){const ft=ze[Ke],_t=ze[Ge],Kt=ft.x*_t.y-_t.x*ft.y;be+=(ft.x+_t.x)*Kt,Ee+=(ft.y+_t.y)*Kt,pe+=3*Kt}return new _l(be/pe,Ee/pe,0,se)}(f),J=H.length;for(;H.length;){const se=H.pop();(se.d>K.d||!K.d)&&(K=se,h&&console.log("found best %d after %d probes",Math.round(1e4*se.d)/1e4,J)),se.max-K.d<=l||(O=se.h/2,H.push(new _l(se.p.x-O,se.p.y-O,O,f)),H.push(new _l(se.p.x+O,se.p.y-O,O,f)),H.push(new _l(se.p.x-O,se.p.y+O,O,f)),H.push(new _l(se.p.x+O,se.p.y+O,O,f)),J+=4)}return h&&(console.log(`num probes: ${J}`),console.log(`best distance: ${K.d}`)),K.p}function q$(f,l){return l.max-f.max}function _l(f,l,h,m){this.p=new b(f,l),this.h=h,this.d=function(v,w){let k=!1,I=1/0;for(let M=0;M<w.length;M++){const O=w[M];for(let H=0,K=O.length,J=K-1;H<K;J=H++){const se=O[H],pe=O[J];se.y>v.y!=pe.y>v.y&&v.x<(pe.x-se.x)*(v.y-se.y)/(pe.y-se.y)+se.x&&(k=!k),I=Math.min(I,Bp(v,se,pe))}}return(k?1:-1)*Math.sqrt(I)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var rs;a.ap=void 0,(rs=a.ap||(a.ap={}))[rs.center=1]="center",rs[rs.left=2]="left",rs[rs.right=3]="right",rs[rs.top=4]="top",rs[rs.bottom=5]="bottom",rs[rs["top-left"]=6]="top-left",rs[rs["top-right"]=7]="top-right",rs[rs["bottom-left"]=8]="bottom-left",rs[rs["bottom-right"]=9]="bottom-right";const Ro=7,hd=Number.POSITIVE_INFINITY;function r_(f,l){return l[1]!==hd?function(h,m,v){let w=0,k=0;switch(m=Math.abs(m),v=Math.abs(v),h){case"top-right":case"top-left":case"top":k=v-Ro;break;case"bottom-right":case"bottom-left":case"bottom":k=-v+Ro}switch(h){case"top-right":case"bottom-right":case"right":w=-m;break;case"top-left":case"bottom-left":case"left":w=m}return[w,k]}(f,l[0],l[1]):function(h,m){let v=0,w=0;m<0&&(m=0);const k=m/Math.SQRT2;switch(h){case"top-right":case"top-left":w=k-Ro;break;case"bottom-right":case"bottom-left":w=-k+Ro;break;case"bottom":w=-m+Ro;break;case"top":w=m-Ro}switch(h){case"top-right":case"bottom-right":v=-k;break;case"top-left":case"bottom-left":v=k;break;case"left":v=m;break;case"right":v=-m}return[v,w]}(f,l[0])}function s_(f,l,h){var m;const v=f.layout,w=(m=v.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},h);if(w){const I=w.values,M=[];for(let O=0;O<I.length;O+=2){const H=M[O]=I[O],K=I[O+1].map(J=>J*zr);H.startsWith("top")?K[1]-=Ro:H.startsWith("bottom")&&(K[1]+=Ro),M[O+1]=K}return new es(M)}const k=v.get("text-variable-anchor");if(k){let I;I=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(l,{},h)*zr,hd]:v.get("text-offset").evaluate(l,{},h).map(O=>O*zr);const M=[];for(const O of k)M.push(O,r_(O,I));return new es(M)}return null}function dd(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function H$(f,l,h,m,v,w,k,I,M,O,H){let K=w.textMaxSize.evaluate(l,{});K===void 0&&(K=k);const J=f.layers[0].layout,se=J.get("icon-offset").evaluate(l,{},H),pe=o_(h.horizontal),be=k/24,Ee=f.tilePixelRatio*be,ze=f.tilePixelRatio*K/24,Ke=f.tilePixelRatio*I,Re=f.tilePixelRatio*J.get("symbol-spacing"),Ge=J.get("text-padding")*f.tilePixelRatio,ft=function(gt,nn,tn,Pn=1){const Xn=gt.get("icon-padding").evaluate(nn,{},tn),Jn=Xn&&Xn.values;return[Jn[0]*Pn,Jn[1]*Pn,Jn[2]*Pn,Jn[3]*Pn]}(J,l,H,f.tilePixelRatio),_t=J.get("text-max-angle")/180*Math.PI,Kt=J.get("text-rotation-alignment")!=="viewport"&&J.get("symbol-placement")!=="point",rn=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",Gt=J.get("symbol-placement"),jt=Re/2,en=J.get("icon-text-fit");let ln;m&&en!=="none"&&(f.allowVerticalPlacement&&h.vertical&&(ln=Em(m,h.vertical,en,J.get("icon-text-fit-padding"),se,be)),pe&&(m=Em(m,pe,en,J.get("icon-text-fit-padding"),se,be)));const Zt=(gt,nn)=>{nn.x<0||nn.x>=kr||nn.y<0||nn.y>=kr||function(tn,Pn,Xn,Jn,Cr,Ks,fs,Lr,Jr,hs,$s,ds,Sr,Gr,ws,Ms,ss,Ds,Xs,vr,Ln,Tr,is,Rr,oi){const bi=tn.addToLineVertexArray(Pn,Xn);let $i,oo,ai,Js,zs=0,ao=0,jc=0,u_=0,$d=-1,wd=-1;const lo={};let f_=Mh("");if(tn.allowVerticalPlacement&&Jn.vertical){const ps=Lr.layout.get("text-rotate").evaluate(Ln,{},Rr)+90;ai=new kf(Jr,Pn,hs,$s,ds,Jn.vertical,Sr,Gr,ws,ps),fs&&(Js=new kf(Jr,Pn,hs,$s,ds,fs,ss,Ds,ws,ps))}if(Cr){const ps=Lr.layout.get("icon-rotate").evaluate(Ln,{}),Ys=Lr.layout.get("icon-text-fit")!=="none",$a=t_(Cr,ps,is,Ys),xi=fs?t_(fs,ps,is,Ys):void 0;oo=new kf(Jr,Pn,hs,$s,ds,Cr,ss,Ds,!1,ps),zs=4*$a.length;const wa=tn.iconSizeData;let Ri=null;wa.kind==="source"?(Ri=[Li*Lr.layout.get("icon-size").evaluate(Ln,{})],Ri[0]>Do&&he(`${tn.layerIds[0]}: Value for "icon-size" is >= ${Bc}. Reduce your "icon-size".`)):wa.kind==="composite"&&(Ri=[Li*Tr.compositeIconSizes[0].evaluate(Ln,{},Rr),Li*Tr.compositeIconSizes[1].evaluate(Ln,{},Rr)],(Ri[0]>Do||Ri[1]>Do)&&he(`${tn.layerIds[0]}: Value for "icon-size" is >= ${Bc}. Reduce your "icon-size".`)),tn.addSymbols(tn.icon,$a,Ri,vr,Xs,Ln,a.ah.none,Pn,bi.lineStartIndex,bi.lineLength,-1,Rr),$d=tn.icon.placedSymbolArray.length-1,xi&&(ao=4*xi.length,tn.addSymbols(tn.icon,xi,Ri,vr,Xs,Ln,a.ah.vertical,Pn,bi.lineStartIndex,bi.lineLength,-1,Rr),wd=tn.icon.placedSymbolArray.length-1)}const h_=Object.keys(Jn.horizontal);for(const ps of h_){const Ys=Jn.horizontal[ps];if(!$i){f_=Mh(Ys.text);const xi=Lr.layout.get("text-rotate").evaluate(Ln,{},Rr);$i=new kf(Jr,Pn,hs,$s,ds,Ys,Sr,Gr,ws,xi)}const $a=Ys.positionedLines.length===1;if(jc+=i_(tn,Pn,Ys,Ks,Lr,ws,Ln,Ms,bi,Jn.vertical?a.ah.horizontal:a.ah.horizontalOnly,$a?h_:[ps],lo,$d,Tr,Rr),$a)break}Jn.vertical&&(u_+=i_(tn,Pn,Jn.vertical,Ks,Lr,ws,Ln,Ms,bi,a.ah.vertical,["vertical"],lo,wd,Tr,Rr));const W$=$i?$i.boxStartIndex:tn.collisionBoxArray.length,K$=$i?$i.boxEndIndex:tn.collisionBoxArray.length,X$=ai?ai.boxStartIndex:tn.collisionBoxArray.length,J$=ai?ai.boxEndIndex:tn.collisionBoxArray.length,Y$=oo?oo.boxStartIndex:tn.collisionBoxArray.length,Q$=oo?oo.boxEndIndex:tn.collisionBoxArray.length,ew=Js?Js.boxStartIndex:tn.collisionBoxArray.length,tw=Js?Js.boxEndIndex:tn.collisionBoxArray.length;let wi=-1;const Sf=(ps,Ys)=>ps&&ps.circleDiameter?Math.max(ps.circleDiameter,Ys):Ys;wi=Sf($i,wi),wi=Sf(ai,wi),wi=Sf(oo,wi),wi=Sf(Js,wi);const d_=wi>-1?1:0;d_&&(wi*=oi/zr),tn.glyphOffsetArray.length>=pl.MAX_GLYPHS&&he("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ln.sortKey!==void 0&&tn.addToSortKeyRanges(tn.symbolInstances.length,Ln.sortKey);const nw=s_(Lr,Ln,Rr),[rw,sw]=function(ps,Ys){const $a=ps.length,xi=Ys==null?void 0:Ys.values;if((xi==null?void 0:xi.length)>0)for(let wa=0;wa<xi.length;wa+=2){const Ri=xi[wa+1];ps.emplaceBack(a.ap[xi[wa]],Ri[0],Ri[1])}return[$a,ps.length]}(tn.textAnchorOffsets,nw);tn.symbolInstances.emplaceBack(Pn.x,Pn.y,lo.right>=0?lo.right:-1,lo.center>=0?lo.center:-1,lo.left>=0?lo.left:-1,lo.vertical||-1,$d,wd,f_,W$,K$,X$,J$,Y$,Q$,ew,tw,hs,jc,u_,zs,ao,d_,0,Sr,wi,rw,sw)}(f,nn,gt,h,m,v,ln,f.layers[0],f.collisionBoxArray,l.index,l.sourceLayerIndex,f.index,Ee,[Ge,Ge,Ge,Ge],Kt,M,Ke,ft,rn,se,l,w,O,H,k)};if(Gt==="line")for(const gt of Km(l.geometry,0,0,kr,kr)){const nn=N$(gt,Re,_t,h.vertical||pe,m,24,ze,f.overscaling,kr);for(const tn of nn)pe&&G$(f,pe.text,jt,tn)||Zt(gt,tn)}else if(Gt==="line-center"){for(const gt of l.geometry)if(gt.length>1){const nn=B$(gt,_t,h.vertical||pe,m,24,ze);nn&&Zt(gt,nn)}}else if(l.type==="Polygon")for(const gt of Ga(l.geometry,0)){const nn=j$(gt,16);Zt(gt[0],new Lo(nn.x,nn.y,0))}else if(l.type==="LineString")for(const gt of l.geometry)Zt(gt,new Lo(gt[0].x,gt[0].y,0));else if(l.type==="Point")for(const gt of l.geometry)for(const nn of gt)Zt([nn],new Lo(nn.x,nn.y,0))}function i_(f,l,h,m,v,w,k,I,M,O,H,K,J,se,pe){const be=function(Ke,Re,Ge,ft,_t,Kt,rn,Gt){const jt=ft.layout.get("text-rotate").evaluate(Kt,{})*Math.PI/180,en=[];for(const ln of Re.positionedLines)for(const Zt of ln.positionedGlyphs){if(!Zt.rect)continue;const gt=Zt.rect||{};let nn=$m+1,tn=!0,Pn=1,Xn=0;const Jn=(_t||Gt)&&Zt.vertical,Cr=Zt.metrics.advance*Zt.scale/2;if(Gt&&Re.verticalizable&&(Xn=ln.lineOffset/2-(Zt.imageName?-(zr-Zt.metrics.width*Zt.scale)/2:(Zt.scale-1)*zr)),Zt.imageName){const vr=rn[Zt.imageName];tn=vr.sdf,Pn=vr.pixelRatio,nn=As/Pn}const Ks=_t?[Zt.x+Cr,Zt.y]:[0,0];let fs=_t?[0,0]:[Zt.x+Cr+Ge[0],Zt.y+Ge[1]-Xn],Lr=[0,0];Jn&&(Lr=fs,fs=[0,0]);const Jr=Zt.metrics.isDoubleResolution?2:1,hs=(Zt.metrics.left-nn)*Zt.scale-Cr+fs[0],$s=(-Zt.metrics.top-nn)*Zt.scale+fs[1],ds=hs+gt.w/Jr*Zt.scale/Pn,Sr=$s+gt.h/Jr*Zt.scale/Pn,Gr=new b(hs,$s),ws=new b(ds,$s),Ms=new b(hs,Sr),ss=new b(ds,Sr);if(Jn){const vr=new b(-Cr,Cr-Oc),Ln=-Math.PI/2,Tr=zr/2-Cr,is=new b(5-Oc-Tr,-(Zt.imageName?Tr:0)),Rr=new b(...Lr);Gr._rotateAround(Ln,vr)._add(is)._add(Rr),ws._rotateAround(Ln,vr)._add(is)._add(Rr),Ms._rotateAround(Ln,vr)._add(is)._add(Rr),ss._rotateAround(Ln,vr)._add(is)._add(Rr)}if(jt){const vr=Math.sin(jt),Ln=Math.cos(jt),Tr=[Ln,-vr,vr,Ln];Gr._matMult(Tr),ws._matMult(Tr),Ms._matMult(Tr),ss._matMult(Tr)}const Ds=new b(0,0),Xs=new b(0,0);en.push({tl:Gr,tr:ws,bl:Ms,br:ss,tex:gt,writingMode:Re.writingMode,glyphOffset:Ks,sectionIndex:Zt.sectionIndex,isSDF:tn,pixelOffsetTL:Ds,pixelOffsetBR:Xs,minFontScaleX:0,minFontScaleY:0})}return en}(0,h,I,v,w,k,m,f.allowVerticalPlacement),Ee=f.textSizeData;let ze=null;Ee.kind==="source"?(ze=[Li*v.layout.get("text-size").evaluate(k,{})],ze[0]>Do&&he(`${f.layerIds[0]}: Value for "text-size" is >= ${Bc}. Reduce your "text-size".`)):Ee.kind==="composite"&&(ze=[Li*se.compositeTextSizes[0].evaluate(k,{},pe),Li*se.compositeTextSizes[1].evaluate(k,{},pe)],(ze[0]>Do||ze[1]>Do)&&he(`${f.layerIds[0]}: Value for "text-size" is >= ${Bc}. Reduce your "text-size".`)),f.addSymbols(f.text,be,ze,I,w,k,O,l,M.lineStartIndex,M.lineLength,J,pe);for(const Ke of H)K[Ke]=f.text.placedSymbolArray.length-1;return 4*be.length}function o_(f){for(const l in f)return f[l];return null}function G$(f,l,h,m){const v=f.compareText;if(l in v){const w=v[l];for(let k=w.length-1;k>=0;k--)if(m.dist(w[k])<h)return!0}else v[l]=[];return v[l].push(m),!1}const a_=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class pd{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,m]=new Uint8Array(l,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=m>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const w=a_[15&m];if(!w)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(l,2,1),[I]=new Uint32Array(l,4,1);return new pd(I,k,w,l)}constructor(l,h=64,m=Float64Array,v){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const w=a_.indexOf(this.ArrayType),k=2*l*this.ArrayType.BYTES_PER_ELEMENT,I=l*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-I%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${m}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+I+M,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+k+I+M),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+I+M,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=l)}add(l,h){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=h,m}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return md(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,h,m,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:k,nodeSize:I}=this,M=[0,w.length-1,0],O=[];for(;M.length;){const H=M.pop()||0,K=M.pop()||0,J=M.pop()||0;if(K-J<=I){for(let Ee=J;Ee<=K;Ee++){const ze=k[2*Ee],Ke=k[2*Ee+1];ze>=l&&ze<=m&&Ke>=h&&Ke<=v&&O.push(w[Ee])}continue}const se=J+K>>1,pe=k[2*se],be=k[2*se+1];pe>=l&&pe<=m&&be>=h&&be<=v&&O.push(w[se]),(H===0?l<=pe:h<=be)&&(M.push(J),M.push(se-1),M.push(1-H)),(H===0?m>=pe:v>=be)&&(M.push(se+1),M.push(K),M.push(1-H))}return O}within(l,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:w,nodeSize:k}=this,I=[0,v.length-1,0],M=[],O=m*m;for(;I.length;){const H=I.pop()||0,K=I.pop()||0,J=I.pop()||0;if(K-J<=k){for(let Ee=J;Ee<=K;Ee++)c_(w[2*Ee],w[2*Ee+1],l,h)<=O&&M.push(v[Ee]);continue}const se=J+K>>1,pe=w[2*se],be=w[2*se+1];c_(pe,be,l,h)<=O&&M.push(v[se]),(H===0?l-m<=pe:h-m<=be)&&(I.push(J),I.push(se-1),I.push(1-H)),(H===0?l+m>=pe:h+m>=be)&&(I.push(se+1),I.push(K),I.push(1-H))}return M}}function md(f,l,h,m,v,w){if(v-m<=h)return;const k=m+v>>1;l_(f,l,k,m,v,w),md(f,l,h,m,k-1,1-w),md(f,l,h,k+1,v,1-w)}function l_(f,l,h,m,v,w){for(;v>m;){if(v-m>600){const O=v-m+1,H=h-m+1,K=Math.log(O),J=.5*Math.exp(2*K/3),se=.5*Math.sqrt(K*J*(O-J)/O)*(H-O/2<0?-1:1);l_(f,l,h,Math.max(m,Math.floor(h-H*J/O+se)),Math.min(v,Math.floor(h+(O-H)*J/O+se)),w)}const k=l[2*h+w];let I=m,M=v;for(Vc(f,l,m,h),l[2*v+w]>k&&Vc(f,l,m,v);I<M;){for(Vc(f,l,I,M),I++,M--;l[2*I+w]<k;)I++;for(;l[2*M+w]>k;)M--}l[2*m+w]===k?Vc(f,l,m,M):(M++,Vc(f,l,M,v)),M<=h&&(m=M+1),h<=M&&(v=M-1)}}function Vc(f,l,h,m){_d(f,h,m),_d(l,2*h,2*m),_d(l,2*h+1,2*m+1)}function _d(f,l,h){const m=f[l];f[l]=f[h],f[h]=m}function c_(f,l,h,m){const v=f-h,w=l-m;return v*v+w*w}var gd;a.bd=void 0,(gd=a.bd||(a.bd={})).create="create",gd.load="load",gd.fullLoad="fullLoad";let Cf=null,Uc=[];const vd=1e3/60,yd="loadTime",bd="fullLoadTime",Z$={mark(f){performance.mark(f)},frame(f){const l=f;Cf!=null&&Uc.push(l-Cf),Cf=l},clearMetrics(){Cf=null,Uc=[],performance.clearMeasures(yd),performance.clearMeasures(bd);for(const f in a.bd)performance.clearMarks(a.bd[f])},getPerformanceMetrics(){performance.measure(yd,a.bd.create,a.bd.load),performance.measure(bd,a.bd.create,a.bd.fullLoad);const f=performance.getEntriesByName(yd)[0].duration,l=performance.getEntriesByName(bd)[0].duration,h=Uc.length,m=1/(Uc.reduce((w,k)=>w+k,0)/h/1e3),v=Uc.filter(w=>w>vd).reduce((w,k)=>w+(k-vd)/vd,0);return{loadTime:f,fullLoadTime:l,fps:m,percentDroppedFrames:v/(h+v)*100,totalFrames:h}}};a.$=Hr,a.A=ll,a.B=function(f){if(Ie==null){const l=f.navigator?f.navigator.userAgent:null;Ie=!!f.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Ie},a.C=class{constructor(f,l){this.target=f,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new O$(()=>this.process()),this.subscription=function(h,m,v,w){return h.addEventListener(m,v,!1),{unsubscribe:()=>{h.removeEventListener(m,v,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=Ue(self)?f:window}registerMessageHandler(f,l){this.messageHandlers[f]=l}sendAsync(f,l){return new Promise((h,m)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[v]={resolve:h,reject:m},l&&l.signal.addEventListener("abort",()=>{delete this.resolveRejects[v];const I={id:v,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(I)},{once:!0});const w=[],k=Object.assign(Object.assign({},f),{id:v,sourceMapId:this.mapId,origin:location.origin,data:ri(f.data,w)});this.target.postMessage(k,{transfer:w})})}receive(f){const l=f.data,h=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[h];const m=this.abortControllers[h];return delete this.abortControllers[h],void(m&&m.abort())}if(Ue(self)||l.mustQueue)return this.tasks[h]=l,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,l)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),l=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(f,l)}processTask(f,l){return o(this,void 0,void 0,function*(){if(l.type==="<response>"){const v=this.resolveRejects[f];return delete this.resolveRejects[f],v?void(l.error?v.reject(ha(l.error)):v.resolve(ha(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=ha(l.data),m=new AbortController;this.abortControllers[f]=m;try{const v=yield this.messageHandlers[l.type](l.sourceMapId,h,m);this.completeTask(f,null,v)}catch(v){this.completeTask(f,v)}})}completeTask(f,l,h){const m=[];delete this.abortControllers[f];const v={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?ri(l):null,data:ri(h,m)};this.target.postMessage(v,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.D=an,a.E=yn,a.F=function(){var f=new ll(16);return ll!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},a.G=It,a.H=function(f,l,h){var m,v,w,k,I,M,O,H,K,J,se,pe,be=h[0],Ee=h[1],ze=h[2];return l===f?(f[12]=l[0]*be+l[4]*Ee+l[8]*ze+l[12],f[13]=l[1]*be+l[5]*Ee+l[9]*ze+l[13],f[14]=l[2]*be+l[6]*Ee+l[10]*ze+l[14],f[15]=l[3]*be+l[7]*Ee+l[11]*ze+l[15]):(v=l[1],w=l[2],k=l[3],I=l[4],M=l[5],O=l[6],H=l[7],K=l[8],J=l[9],se=l[10],pe=l[11],f[0]=m=l[0],f[1]=v,f[2]=w,f[3]=k,f[4]=I,f[5]=M,f[6]=O,f[7]=H,f[8]=K,f[9]=J,f[10]=se,f[11]=pe,f[12]=m*be+I*Ee+K*ze+l[12],f[13]=v*be+M*Ee+J*ze+l[13],f[14]=w*be+O*Ee+se*ze+l[14],f[15]=k*be+H*Ee+pe*ze+l[15]),f},a.I=td,a.J=function(f,l,h){var m=h[0],v=h[1],w=h[2];return f[0]=l[0]*m,f[1]=l[1]*m,f[2]=l[2]*m,f[3]=l[3]*m,f[4]=l[4]*v,f[5]=l[5]*v,f[6]=l[6]*v,f[7]=l[7]*v,f[8]=l[8]*w,f[9]=l[9]*w,f[10]=l[10]*w,f[11]=l[11]*w,f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},a.K=jp,a.L=function(f,l){const h={};for(let m=0;m<l.length;m++){const v=l[m];v in f&&(h[v]=f[v])}return h},a.M=zo,a.N=Fm,a.O=Bm,a.P=b,a.Q=Ws,a.R=Zs,a.S=Z,a.T=ef,a.U=W,a.V=ct,a.W=kr,a.X=X,a.Y=bf,a.Z=class extends Te{},a._=o,a.a=mn,a.a$=function(f,l,h){return f[0]=l[0]*h[0],f[1]=l[1]*h[1],f[2]=l[2]*h[2],f[3]=l[3]*h[3],f},a.a0=fd,a.a1=Ne,a.a2=f=>{const l=window.document.createElement("video");return l.muted=!0,new Promise(h=>{l.onloadstart=()=>{h(l)};for(const m of f){const v=window.document.createElement("source");ot(m)||(l.crossOrigin="Anonymous"),v.src=m,l.appendChild(v)}})},a.a3=function(){return le++},a.a4=_r,a.a5=pl,a.a6=nc,a.a7=ya,a.a8=sr,a.a9=Hm,a.aA=fe,a.aB=function(f,l){if(!f)return[{command:"setStyle",args:[l]}];let h=[];try{if(!kn(f.version,l.version))return[{command:"setStyle",args:[l]}];kn(f.center,l.center)||h.push({command:"setCenter",args:[l.center]}),kn(f.zoom,l.zoom)||h.push({command:"setZoom",args:[l.zoom]}),kn(f.bearing,l.bearing)||h.push({command:"setBearing",args:[l.bearing]}),kn(f.pitch,l.pitch)||h.push({command:"setPitch",args:[l.pitch]}),kn(f.sprite,l.sprite)||h.push({command:"setSprite",args:[l.sprite]}),kn(f.glyphs,l.glyphs)||h.push({command:"setGlyphs",args:[l.glyphs]}),kn(f.transition,l.transition)||h.push({command:"setTransition",args:[l.transition]}),kn(f.light,l.light)||h.push({command:"setLight",args:[l.light]}),kn(f.terrain,l.terrain)||h.push({command:"setTerrain",args:[l.terrain]}),kn(f.sky,l.sky)||h.push({command:"setSky",args:[l.sky]});const m={},v=[];(function(k,I,M,O){let H;for(H in I=I||{},k=k||{})Object.prototype.hasOwnProperty.call(k,H)&&(Object.prototype.hasOwnProperty.call(I,H)||_s(H,M,O));for(H in I)Object.prototype.hasOwnProperty.call(I,H)&&(Object.prototype.hasOwnProperty.call(k,H)?kn(k[H],I[H])||(k[H].type==="geojson"&&I[H].type==="geojson"&&gs(k,I,H)?Vn(M,{command:"setGeoJSONSourceData",args:[H,I[H].data]}):Rs(H,I,M,O)):ir(H,I,M))})(f.sources,l.sources,v,m);const w=[];f.layers&&f.layers.forEach(k=>{"source"in k&&m[k.source]?h.push({command:"removeLayer",args:[k.id]}):w.push(k)}),h=h.concat(v),function(k,I,M){I=I||[];const O=(k=k||[]).map(Os),H=I.map(Os),K=k.reduce(Qs,{}),J=I.reduce(Qs,{}),se=O.slice(),pe=Object.create(null);let be,Ee,ze,Ke,Re;for(let Ge=0,ft=0;Ge<O.length;Ge++)be=O[Ge],Object.prototype.hasOwnProperty.call(J,be)?ft++:(Vn(M,{command:"removeLayer",args:[be]}),se.splice(se.indexOf(be,ft),1));for(let Ge=0,ft=0;Ge<H.length;Ge++)be=H[H.length-1-Ge],se[se.length-1-Ge]!==be&&(Object.prototype.hasOwnProperty.call(K,be)?(Vn(M,{command:"removeLayer",args:[be]}),se.splice(se.lastIndexOf(be,se.length-ft),1)):ft++,Ke=se[se.length-Ge],Vn(M,{command:"addLayer",args:[J[be],Ke]}),se.splice(se.length-Ge,0,be),pe[be]=!0);for(let Ge=0;Ge<H.length;Ge++)if(be=H[Ge],Ee=K[be],ze=J[be],!pe[be]&&!kn(Ee,ze))if(kn(Ee.source,ze.source)&&kn(Ee["source-layer"],ze["source-layer"])&&kn(Ee.type,ze.type)){for(Re in Kr(Ee.layout,ze.layout,M,be,null,"setLayoutProperty"),Kr(Ee.paint,ze.paint,M,be,null,"setPaintProperty"),kn(Ee.filter,ze.filter)||Vn(M,{command:"setFilter",args:[be,ze.filter]}),kn(Ee.minzoom,ze.minzoom)&&kn(Ee.maxzoom,ze.maxzoom)||Vn(M,{command:"setLayerZoomRange",args:[be,ze.minzoom,ze.maxzoom]}),Ee)Object.prototype.hasOwnProperty.call(Ee,Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Kr(Ee[Re],ze[Re],M,be,Re.slice(6),"setPaintProperty"):kn(Ee[Re],ze[Re])||Vn(M,{command:"setLayerProperty",args:[be,Re,ze[Re]]}));for(Re in ze)Object.prototype.hasOwnProperty.call(ze,Re)&&!Object.prototype.hasOwnProperty.call(Ee,Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Kr(Ee[Re],ze[Re],M,be,Re.slice(6),"setPaintProperty"):kn(Ee[Re],ze[Re])||Vn(M,{command:"setLayerProperty",args:[be,Re,ze[Re]]}))}else Vn(M,{command:"removeLayer",args:[be]}),Ke=se[se.lastIndexOf(be)+1],Vn(M,{command:"addLayer",args:[ze,Ke]})}(w,l.layers,h)}catch(m){console.warn("Unable to compute style diff:",m),h=[{command:"setStyle",args:[l]}]}return h},a.aC=function(f){const l=[],h=f.id;return h===void 0&&l.push({message:`layers.${h}: missing required property "id"`}),f.render===void 0&&l.push({message:`layers.${h}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&l.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),l},a.aD=function f(l,h){if(Array.isArray(l)){if(!Array.isArray(h)||l.length!==h.length)return!1;for(let m=0;m<l.length;m++)if(!f(l[m],h[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&h!==null){if(typeof h!="object"||Object.keys(l).length!==Object.keys(h).length)return!1;for(const m in l)if(!f(l[m],h[m]))return!1;return!0}return l===h},a.aE=G,a.aF=ee,a.aG=class extends _a{constructor(f,l){super(f,l),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},a.aH=sf,a.aI=class extends _a{constructor(f,l){super(f,l),this.current=db}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let l=1;l<16;l++)if(f[l]!==this.current[l]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},a.aJ=Mp,a.aK=class extends _a{constructor(f,l){super(f,l),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},a.aL=class extends _a{constructor(f,l){super(f,l),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},a.aM=Dp,a.aN=function(f,l,h,m,v,w,k){var I=1/(l-h),M=1/(m-v),O=1/(w-k);return f[0]=-2*I,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*M,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*O,f[11]=0,f[12]=(l+h)*I,f[13]=(v+m)*M,f[14]=(k+w)*O,f[15]=1,f},a.aO=Zn,a.aP=bb,a.aQ=class extends Et{},a.aR=f$,a.aS=class extends Rt{},a.aT=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},a.aU=Wp,a.aV=ro,a.aW=class extends vn{},a.aX=To,a.aY=function(f,l){return f[0]===l[0]&&f[1]===l[1]&&f[2]===l[2]&&f[3]===l[3]&&f[4]===l[4]&&f[5]===l[5]&&f[6]===l[6]&&f[7]===l[7]&&f[8]===l[8]&&f[9]===l[9]&&f[10]===l[10]&&f[11]===l[11]&&f[12]===l[12]&&f[13]===l[13]&&f[14]===l[14]&&f[15]===l[15]},a.aZ=function(f,l){var h=f[0],m=f[1],v=f[2],w=f[3],k=f[4],I=f[5],M=f[6],O=f[7],H=f[8],K=f[9],J=f[10],se=f[11],pe=f[12],be=f[13],Ee=f[14],ze=f[15],Ke=l[0],Re=l[1],Ge=l[2],ft=l[3],_t=l[4],Kt=l[5],rn=l[6],Gt=l[7],jt=l[8],en=l[9],ln=l[10],Zt=l[11],gt=l[12],nn=l[13],tn=l[14],Pn=l[15];return Math.abs(h-Ke)<=bs*Math.max(1,Math.abs(h),Math.abs(Ke))&&Math.abs(m-Re)<=bs*Math.max(1,Math.abs(m),Math.abs(Re))&&Math.abs(v-Ge)<=bs*Math.max(1,Math.abs(v),Math.abs(Ge))&&Math.abs(w-ft)<=bs*Math.max(1,Math.abs(w),Math.abs(ft))&&Math.abs(k-_t)<=bs*Math.max(1,Math.abs(k),Math.abs(_t))&&Math.abs(I-Kt)<=bs*Math.max(1,Math.abs(I),Math.abs(Kt))&&Math.abs(M-rn)<=bs*Math.max(1,Math.abs(M),Math.abs(rn))&&Math.abs(O-Gt)<=bs*Math.max(1,Math.abs(O),Math.abs(Gt))&&Math.abs(H-jt)<=bs*Math.max(1,Math.abs(H),Math.abs(jt))&&Math.abs(K-en)<=bs*Math.max(1,Math.abs(K),Math.abs(en))&&Math.abs(J-ln)<=bs*Math.max(1,Math.abs(J),Math.abs(ln))&&Math.abs(se-Zt)<=bs*Math.max(1,Math.abs(se),Math.abs(Zt))&&Math.abs(pe-gt)<=bs*Math.max(1,Math.abs(pe),Math.abs(gt))&&Math.abs(be-nn)<=bs*Math.max(1,Math.abs(be),Math.abs(nn))&&Math.abs(Ee-tn)<=bs*Math.max(1,Math.abs(Ee),Math.abs(tn))&&Math.abs(ze-Pn)<=bs*Math.max(1,Math.abs(ze),Math.abs(Pn))},a.a_=function(f,l){return f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},a.aa=function(f){const l={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,m,v,w)=>{const k=v||w;return l[m]=!k||k.toLowerCase(),""}),l["max-age"]){const h=parseInt(l["max-age"],10);isNaN(h)?delete l["max-age"]:l["max-age"]=h}return l},a.ab=function(f,l){const h=[];for(const m in f)m in l||h.push(m);return h},a.ac=re,a.ad=function(f,l,h){var m=Math.sin(h),v=Math.cos(h),w=l[0],k=l[1],I=l[2],M=l[3],O=l[4],H=l[5],K=l[6],J=l[7];return l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=w*v+O*m,f[1]=k*v+H*m,f[2]=I*v+K*m,f[3]=M*v+J*m,f[4]=O*v-w*m,f[5]=H*v-k*m,f[6]=K*v-I*m,f[7]=J*v-M*m,f},a.ae=function(f){var l=new ll(16);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],l},a.af=cf,a.ag=function(f,l){let h=0,m=0;if(f.kind==="constant")m=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:v,minZoom:w,maxZoom:k}=f,I=v?re(Ts.interpolationFactor(v,l,w,k),0,1):0;f.kind==="camera"?m=ls.number(f.minSize,f.maxSize,I):h=I}return{uSizeT:h,uSize:m}},a.ai=function(f,{uSize:l,uSizeT:h},{lowerSize:m,upperSize:v}){return f.kind==="source"?m/Li:f.kind==="composite"?ls.number(m/Li,v/Li,h):l},a.aj=id,a.ak=function(f,l,h,m){const v=l.y-f.y,w=l.x-f.x,k=m.y-h.y,I=m.x-h.x,M=k*w-I*v;if(M===0)return null;const O=(I*(f.y-h.y)-k*(f.x-h.x))/M;return new b(f.x+O*w,f.y+O*v)},a.al=Km,a.am=Op,a.an=Bh,a.ao=zr,a.aq=sd,a.ar=function(f,l){var h=l[0],m=l[1],v=l[2],w=l[3],k=l[4],I=l[5],M=l[6],O=l[7],H=l[8],K=l[9],J=l[10],se=l[11],pe=l[12],be=l[13],Ee=l[14],ze=l[15],Ke=h*I-m*k,Re=h*M-v*k,Ge=h*O-w*k,ft=m*M-v*I,_t=m*O-w*I,Kt=v*O-w*M,rn=H*be-K*pe,Gt=H*Ee-J*pe,jt=H*ze-se*pe,en=K*Ee-J*be,ln=K*ze-se*be,Zt=J*ze-se*Ee,gt=Ke*Zt-Re*ln+Ge*en+ft*jt-_t*Gt+Kt*rn;return gt?(f[0]=(I*Zt-M*ln+O*en)*(gt=1/gt),f[1]=(v*ln-m*Zt-w*en)*gt,f[2]=(be*Kt-Ee*_t+ze*ft)*gt,f[3]=(J*_t-K*Kt-se*ft)*gt,f[4]=(M*jt-k*Zt-O*Gt)*gt,f[5]=(h*Zt-v*jt+w*Gt)*gt,f[6]=(Ee*Ge-pe*Kt-ze*Re)*gt,f[7]=(H*Kt-J*Ge+se*Re)*gt,f[8]=(k*ln-I*jt+O*rn)*gt,f[9]=(m*jt-h*ln-w*rn)*gt,f[10]=(pe*_t-be*Ge+ze*Ke)*gt,f[11]=(K*Ge-H*_t-se*Ke)*gt,f[12]=(I*Gt-k*en-M*rn)*gt,f[13]=(h*en-m*Gt+v*rn)*gt,f[14]=(be*Re-pe*ft-Ee*Ke)*gt,f[15]=(H*ft-K*Re+J*Ke)*gt,f):null},a.as=dd,a.at=rd,a.au=pd,a.av=function(){const f={},l=Ze.$version;for(const h in Ze.$root){const m=Ze.$root[h];if(m.required){let v=null;v=h==="version"?l:m.type==="array"?[]:{},v!=null&&(f[h]=v)}}return f},a.aw=Ju,a.ax=un,a.ay=function(f){f=f.slice();const l=Object.create(null);for(let h=0;h<f.length;h++)l[f[h].id]=f[h];for(let h=0;h<f.length;h++)"ref"in f[h]&&(f[h]=Bn(f[h],l[f[h].ref]));return f},a.az=function(f){if(f.type==="custom")return new R$(f);switch(f.type){case"background":return new D$(f);case"circle":return new $b(f);case"fill":return new Fb(f);case"fill-extrusion":return new Qb(f);case"heatmap":return new xb(f);case"hillshade":return new Cb(f);case"line":return new a$(f);case"raster":return new L$(f);case"symbol":return new yf(f)}},a.b=nt,a.b0=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]+f[3]*l[3]},a.b1=ce,a.b2=Um,a.b3=Nm,a.b4=function(f,l,h,m,v){var w,k=1/Math.tan(l/2);return f[0]=k/h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=k,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,v!=null&&v!==1/0?(f[10]=(v+m)*(w=1/(m-v)),f[14]=2*v*m*w):(f[10]=-1,f[14]=-2*m),f},a.b5=function(f,l,h){var m=Math.sin(h),v=Math.cos(h),w=l[4],k=l[5],I=l[6],M=l[7],O=l[8],H=l[9],K=l[10],J=l[11];return l!==f&&(f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[4]=w*v+O*m,f[5]=k*v+H*m,f[6]=I*v+K*m,f[7]=M*v+J*m,f[8]=O*v-w*m,f[9]=H*v-k*m,f[10]=K*v-I*m,f[11]=J*v-M*m,f},a.b6=Q,a.b7=ve,a.b8=function(f){return f*Math.PI/180},a.b9=function(f,l){return f[0]=l[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=l[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=l[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},a.bA=vi,a.ba=class extends Ce{},a.bb=cd,a.bc=Z$,a.be=At,a.bf=function(f,l){mn.REGISTERED_PROTOCOLS[f]=l},a.bg=function(f){delete mn.REGISTERED_PROTOCOLS[f]},a.bh=function(f,l){const h={};for(let v=0;v<f.length;v++){const w=l&&l[f[v].id]||oc(f[v]);l&&(l[f[v].id]=w);let k=h[w];k||(k=h[w]=[]),k.push(f[v])}const m=[];for(const v in h)m.push(h[v]);return m},a.bi=Qt,a.bj=qm,a.bk=Gm,a.bl=xm,a.bm=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=kr/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const l=f.bucket.layers[0],h=l.layout,m=l._unevaluatedLayout._values,v={layoutIconSize:m["icon-size"].possiblyEvaluate(new sr(f.bucket.zoom+1),f.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new sr(f.bucket.zoom+1),f.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new sr(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:H}=f.bucket.textSizeData;v.compositeTextSizes=[m["text-size"].possiblyEvaluate(new sr(O),f.canonical),m["text-size"].possiblyEvaluate(new sr(H),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:H}=f.bucket.iconSizeData;v.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new sr(O),f.canonical),m["icon-size"].possiblyEvaluate(new sr(H),f.canonical)]}const w=h.get("text-line-height")*zr,k=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",I=h.get("text-keep-upright"),M=h.get("text-size");for(const O of f.bucket.features){const H=h.get("text-font").evaluate(O,{},f.canonical).join(","),K=M.evaluate(O,{},f.canonical),J=v.layoutTextSize.evaluate(O,{},f.canonical),se=v.layoutIconSize.evaluate(O,{},f.canonical),pe={horizontal:{},vertical:void 0},be=O.text;let Ee,ze=[0,0];if(be){const Ge=be.toString(),ft=h.get("text-letter-spacing").evaluate(O,{},f.canonical)*zr,_t=Yu(Ge)?ft:0,Kt=h.get("text-anchor").evaluate(O,{},f.canonical),rn=s_(l,O,f.canonical);if(!rn){const Zt=h.get("text-radial-offset").evaluate(O,{},f.canonical);ze=Zt?r_(Kt,[Zt*zr,hd]):h.get("text-offset").evaluate(O,{},f.canonical).map(gt=>gt*zr)}let Gt=k?"center":h.get("text-justify").evaluate(O,{},f.canonical);const jt=h.get("symbol-placement"),en=jt==="point"?h.get("text-max-width").evaluate(O,{},f.canonical)*zr:0,ln=()=>{f.bucket.allowVerticalPlacement&&vc(Ge)&&(pe.vertical=_f(be,f.glyphMap,f.glyphPositions,f.imagePositions,H,en,w,Kt,"left",_t,ze,a.ah.vertical,!0,jt,J,K))};if(!k&&rn){const Zt=new Set;if(Gt==="auto")for(let nn=0;nn<rn.values.length;nn+=2)Zt.add(dd(rn.values[nn]));else Zt.add(Gt);let gt=!1;for(const nn of Zt)if(!pe.horizontal[nn])if(gt)pe.horizontal[nn]=pe.horizontal[0];else{const tn=_f(be,f.glyphMap,f.glyphPositions,f.imagePositions,H,en,w,"center",nn,_t,ze,a.ah.horizontal,!1,jt,J,K);tn&&(pe.horizontal[nn]=tn,gt=tn.positionedLines.length===1)}ln()}else{Gt==="auto"&&(Gt=dd(Kt));const Zt=_f(be,f.glyphMap,f.glyphPositions,f.imagePositions,H,en,w,Kt,Gt,_t,ze,a.ah.horizontal,!1,jt,J,K);Zt&&(pe.horizontal[Gt]=Zt),ln(),vc(Ge)&&k&&I&&(pe.vertical=_f(be,f.glyphMap,f.glyphPositions,f.imagePositions,H,en,w,Kt,Gt,_t,ze,a.ah.vertical,!1,jt,J,K))}}let Ke=!1;if(O.icon&&O.icon.name){const Ge=f.imageMap[O.icon.name];Ge&&(Ee=I$(f.imagePositions[O.icon.name],h.get("icon-offset").evaluate(O,{},f.canonical),h.get("icon-anchor").evaluate(O,{},f.canonical)),Ke=!!Ge.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Ke:f.bucket.sdfIcons!==Ke&&he("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ge.pixelRatio!==f.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const Re=o_(pe.horizontal)||pe.vertical;f.bucket.iconsInText=!!Re&&Re.iconsInText,(Re||Ee)&&H$(f.bucket,O,pe,Ee,f.imageMap,v,J,se,ze,Ke,f.canonical)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},a.bn=Jh,a.bo=Wh,a.bp=Xh,a.bq=Ao,a.br=Qh,a.bs=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},a.bt=function(f,l,h,m,v){return o(this,void 0,void 0,function*(){if(W())try{return yield ct(f,l,h,m,v)}catch{}return function(w,k,I,M,O){const H=w.width,K=w.height;mt&&Dt||(mt=new OffscreenCanvas(H,K),Dt=mt.getContext("2d",{willReadFrequently:!0})),mt.width=H,mt.height=K,Dt.drawImage(w,0,0,H,K);const J=Dt.getImageData(k,I,M,O);return Dt.clearRect(0,0,H,K),J.data}(f,l,h,m,v)})},a.bu=jm,a.bv=c,a.bw=d,a.bx=pm,a.by=el,a.bz=function(f){return f.message===zt},a.c=Yt,a.d=f=>o(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(l)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=ge,a.f=f=>new Promise((l,h)=>{const m=new Image;m.onload=()=>{l(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Xe})},m.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(f)],{type:"image/png"});m.src=f.byteLength?URL.createObjectURL(v):Xe}),a.g=cn,a.h=(f,l)=>fn(ge(f,{type:"json"}),l),a.i=Ue,a.j=tt,a.k=xt,a.l=(f,l)=>fn(ge(f,{type:"arrayBuffer"}),l),a.m=fn,a.n=function(f){return new Qh(f).readFields(w$,[])},a.o=Pc,a.p=wm,a.q=y,a.r=Gu,a.s=ot,a.t=Ku,a.u=Wt,a.v=Ze,a.w=he,a.x=ua,a.y=function([f,l,h]){return l+=90,l*=Math.PI/180,h*=Math.PI/180,{x:f*Math.cos(l)*Math.sin(h),y:f*Math.sin(l)*Math.sin(h),z:f*Math.cos(h)}},a.z=ls}),r("worker",["./shared"],function(a){class o{constructor(te){this.keyCache={},te&&this.replace(te)}replace(te){this._layerConfigs={},this._layers={},this.update(te,[])}update(te,ie){for(const Me of te){this._layerConfigs[Me.id]=Me;const Fe=this._layers[Me.id]=a.az(Me);Fe._featureFilter=a.a6(Fe.filter),this.keyCache[Me.id]&&delete this.keyCache[Me.id]}for(const Me of ie)delete this.keyCache[Me],delete this._layerConfigs[Me],delete this._layers[Me];this.familiesBySource={};const ye=a.bh(Object.values(this._layerConfigs),this.keyCache);for(const Me of ye){const Fe=Me.map(ht=>this._layers[ht.id]),Ve=Fe[0];if(Ve.visibility==="none")continue;const We=Ve.source||"";let Le=this.familiesBySource[We];Le||(Le=this.familiesBySource[We]={});const Je=Ve.sourceLayer||"_geojsonTileLayer";let yt=Le[Je];yt||(yt=Le[Je]=[]),yt.push(Fe)}}}class c{constructor(te){const ie={},ye=[];for(const We in te){const Le=te[We],Je=ie[We]={};for(const yt in Le){const ht=Le[+yt];if(!ht||ht.bitmap.width===0||ht.bitmap.height===0)continue;const ut={x:0,y:0,w:ht.bitmap.width+2,h:ht.bitmap.height+2};ye.push(ut),Je[yt]={rect:ut,metrics:ht.metrics}}}const{w:Me,h:Fe}=a.p(ye),Ve=new a.o({width:Me||1,height:Fe||1});for(const We in te){const Le=te[We];for(const Je in Le){const yt=Le[+Je];if(!yt||yt.bitmap.width===0||yt.bitmap.height===0)continue;const ht=ie[We][Je].rect;a.o.copy(yt.bitmap,Ve,{x:0,y:0},{x:ht.x+1,y:ht.y+1},yt.bitmap)}}this.image=Ve,this.positions=ie}}a.bi("GlyphAtlas",c);class d{constructor(te){this.tileID=new a.Q(te.tileID.overscaledZ,te.tileID.wrap,te.tileID.canonical.z,te.tileID.canonical.x,te.tileID.canonical.y),this.uid=te.uid,this.zoom=te.zoom,this.pixelRatio=te.pixelRatio,this.tileSize=te.tileSize,this.source=te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=te.showCollisionBoxes,this.collectResourceTiming=!!te.collectResourceTiming,this.returnDependencies=!!te.returnDependencies,this.promoteId=te.promoteId,this.inFlightDependencies=[]}parse(te,ie,ye,Me){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=te,this.collisionBoxArray=new a.a4;const Fe=new a.bj(Object.keys(te.layers).sort()),Ve=new a.bk(this.tileID,this.promoteId);Ve.bucketLayerIDs=[];const We={},Le={featureIndex:Ve,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ye},Je=ie.familiesBySource[this.source];for(const Mn in Je){const or=te.layers[Mn];if(!or)continue;or.version===1&&a.w(`Vector tile source "${this.source}" layer "${Mn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ar=Fe.encode(Mn),Qr=[];for(let Bs=0;Bs<or.length;Bs++){const dr=or.feature(Bs),po=Ve.getId(dr,Mn);Qr.push({feature:dr,id:po,index:Bs,sourceLayerIndex:Ar})}for(const Bs of Je[Mn]){const dr=Bs[0];dr.source!==this.source&&a.w(`layer.source = ${dr.source} does not equal this.source = ${this.source}`),dr.minzoom&&this.zoom<Math.floor(dr.minzoom)||dr.maxzoom&&this.zoom>=dr.maxzoom||dr.visibility!=="none"&&(_(Bs,this.zoom,ye),(We[dr.id]=dr.createBucket({index:Ve.bucketLayerIDs.length,layers:Bs,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ar,sourceID:this.source})).populate(Qr,Le,this.tileID.canonical),Ve.bucketLayerIDs.push(Bs.map(po=>po.id)))}}const yt=a.aE(Le.glyphDependencies,Mn=>Object.keys(Mn).map(Number));this.inFlightDependencies.forEach(Mn=>Mn==null?void 0:Mn.abort()),this.inFlightDependencies=[];let ht=Promise.resolve({});if(Object.keys(yt).length){const Mn=new AbortController;this.inFlightDependencies.push(Mn),ht=Me.sendAsync({type:"GG",data:{stacks:yt,source:this.source,tileID:this.tileID,type:"glyphs"}},Mn)}const ut=Object.keys(Le.iconDependencies);let pn=Promise.resolve({});if(ut.length){const Mn=new AbortController;this.inFlightDependencies.push(Mn),pn=Me.sendAsync({type:"GI",data:{icons:ut,source:this.source,tileID:this.tileID,type:"icons"}},Mn)}const _n=Object.keys(Le.patternDependencies);let In=Promise.resolve({});if(_n.length){const Mn=new AbortController;this.inFlightDependencies.push(Mn),In=Me.sendAsync({type:"GI",data:{icons:_n,source:this.source,tileID:this.tileID,type:"patterns"}},Mn)}const[xn,Fn,Wn]=yield Promise.all([ht,pn,In]),nr=new c(xn),wr=new a.bl(Fn,Wn);for(const Mn in We){const or=We[Mn];or instanceof a.a5?(_(or.layers,this.zoom,ye),a.bm({bucket:or,glyphMap:xn,glyphPositions:nr.positions,imageMap:Fn,imagePositions:wr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):or.hasPattern&&(or instanceof a.bn||or instanceof a.bo||or instanceof a.bp)&&(_(or.layers,this.zoom,ye),or.addFeatures(Le,this.tileID.canonical,wr.patternPositions))}return this.status="done",{buckets:Object.values(We).filter(Mn=>!Mn.isEmpty()),featureIndex:Ve,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nr.image,imageAtlas:wr,glyphMap:this.returnDependencies?xn:null,iconMap:this.returnDependencies?Fn:null,glyphPositions:this.returnDependencies?nr.positions:null}})}}function _(Pe,te,ie){const ye=new a.a8(te);for(const Me of Pe)Me.recalculate(ye,ie)}class b{constructor(te,ie,ye){this.actor=te,this.layerIndex=ie,this.availableImages=ye,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(te,ie){return a._(this,void 0,void 0,function*(){const ye=yield a.l(te.request,ie);try{return{vectorTile:new a.bq.VectorTile(new a.br(ye.data)),rawData:ye.data,cacheControl:ye.cacheControl,expires:ye.expires}}catch(Me){const Fe=new Uint8Array(ye.data);let Ve=`Unable to parse the tile at ${te.request.url}, `;throw Ve+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Me.messge}`,new Error(Ve)}})}loadTile(te){return a._(this,void 0,void 0,function*(){const ie=te.uid,ye=!!(te&&te.request&&te.request.collectResourceTiming)&&new a.bs(te.request),Me=new d(te);this.loading[ie]=Me;const Fe=new AbortController;Me.abort=Fe;try{const Ve=yield this.loadVectorTile(te,Fe);if(delete this.loading[ie],!Ve)return null;const We=Ve.rawData,Le={};Ve.expires&&(Le.expires=Ve.expires),Ve.cacheControl&&(Le.cacheControl=Ve.cacheControl);const Je={};if(ye){const ht=ye.finish();ht&&(Je.resourceTiming=JSON.parse(JSON.stringify(ht)))}Me.vectorTile=Ve.vectorTile;const yt=Me.parse(Ve.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ie]=Me,this.fetching[ie]={rawTileData:We,cacheControl:Le,resourceTiming:Je};try{const ht=yield yt;return a.e({rawTileData:We.slice(0)},ht,Le,Je)}finally{delete this.fetching[ie]}}catch(Ve){throw delete this.loading[ie],Me.status="done",this.loaded[ie]=Me,Ve}})}reloadTile(te){return a._(this,void 0,void 0,function*(){const ie=te.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ye=this.loaded[ie];if(ye.showCollisionBoxes=te.showCollisionBoxes,ye.status==="parsing"){const Me=yield ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor);let Fe;if(this.fetching[ie]){const{rawTileData:Ve,cacheControl:We,resourceTiming:Le}=this.fetching[ie];delete this.fetching[ie],Fe=a.e({rawTileData:Ve.slice(0)},Me,We,Le)}else Fe=Me;return Fe}if(ye.status==="done"&&ye.vectorTile)return ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(te){return a._(this,void 0,void 0,function*(){const ie=this.loading,ye=te.uid;ie&&ie[ye]&&ie[ye].abort&&(ie[ye].abort.abort(),delete ie[ye])})}removeTile(te){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[te.uid]&&delete this.loaded[te.uid]})}}class x{constructor(){this.loaded={}}loadTile(te){return a._(this,void 0,void 0,function*(){const{uid:ie,encoding:ye,rawImageData:Me,redFactor:Fe,greenFactor:Ve,blueFactor:We,baseShift:Le}=te,Je=Me.width+2,yt=Me.height+2,ht=a.b(Me)?new a.R({width:Je,height:yt},yield a.bt(Me,-1,-1,Je,yt)):Me,ut=new a.bu(ie,ht,ye,Fe,Ve,We,Le);return this.loaded=this.loaded||{},this.loaded[ie]=ut,ut})}removeTile(te){const ie=this.loaded,ye=te.uid;ie&&ie[ye]&&delete ie[ye]}}function P(Pe,te){if(Pe.length!==0){L(Pe[0],te);for(var ie=1;ie<Pe.length;ie++)L(Pe[ie],!te)}}function L(Pe,te){for(var ie=0,ye=0,Me=0,Fe=Pe.length,Ve=Fe-1;Me<Fe;Ve=Me++){var We=(Pe[Me][0]-Pe[Ve][0])*(Pe[Ve][1]+Pe[Me][1]),Le=ie+We;ye+=Math.abs(ie)>=Math.abs(We)?ie-Le+We:We-Le+ie,ie=Le}ie+ye>=0!=!!te&&Pe.reverse()}var D=a.bv(function Pe(te,ie){var ye,Me=te&&te.type;if(Me==="FeatureCollection")for(ye=0;ye<te.features.length;ye++)Pe(te.features[ye],ie);else if(Me==="GeometryCollection")for(ye=0;ye<te.geometries.length;ye++)Pe(te.geometries[ye],ie);else if(Me==="Feature")Pe(te.geometry,ie);else if(Me==="Polygon")P(te.coordinates,ie);else if(Me==="MultiPolygon")for(ye=0;ye<te.coordinates.length;ye++)P(te.coordinates[ye],ie);return te});const B=a.bq.VectorTileFeature.prototype.toGeoJSON;var Z={exports:{}},W=a.bw,Q=a.bq.VectorTileFeature,ve=re;function re(Pe,te){this.options=te||{},this.features=Pe,this.length=Pe.length}function ce(Pe,te){this.id=typeof Pe.id=="number"?Pe.id:void 0,this.type=Pe.type,this.rawGeometry=Pe.type===1?[Pe.geometry]:Pe.geometry,this.properties=Pe.tags,this.extent=te||4096}re.prototype.feature=function(Pe){return new ce(this.features[Pe],this.options.extent)},ce.prototype.loadGeometry=function(){var Pe=this.rawGeometry;this.geometry=[];for(var te=0;te<Pe.length;te++){for(var ie=Pe[te],ye=[],Me=0;Me<ie.length;Me++)ye.push(new W(ie[Me][0],ie[Me][1]));this.geometry.push(ye)}return this.geometry},ce.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pe=this.geometry,te=1/0,ie=-1/0,ye=1/0,Me=-1/0,Fe=0;Fe<Pe.length;Fe++)for(var Ve=Pe[Fe],We=0;We<Ve.length;We++){var Le=Ve[We];te=Math.min(te,Le.x),ie=Math.max(ie,Le.x),ye=Math.min(ye,Le.y),Me=Math.max(Me,Le.y)}return[te,ye,ie,Me]},ce.prototype.toGeoJSON=Q.prototype.toGeoJSON;var ge=a.bx,le=ve;function G(Pe){var te=new ge;return function(ie,ye){for(var Me in ie.layers)ye.writeMessage(3,ee,ie.layers[Me])}(Pe,te),te.finish()}function ee(Pe,te){var ie;te.writeVarintField(15,Pe.version||1),te.writeStringField(1,Pe.name||""),te.writeVarintField(5,Pe.extent||4096);var ye={keys:[],values:[],keycache:{},valuecache:{}};for(ie=0;ie<Pe.length;ie++)ye.feature=Pe.feature(ie),te.writeMessage(2,fe,ye);var Me=ye.keys;for(ie=0;ie<Me.length;ie++)te.writeStringField(3,Me[ie]);var Fe=ye.values;for(ie=0;ie<Fe.length;ie++)te.writeMessage(4,Ie,Fe[ie])}function fe(Pe,te){var ie=Pe.feature;ie.id!==void 0&&te.writeVarintField(1,ie.id),te.writeMessage(2,$e,Pe),te.writeVarintField(3,ie.type),te.writeMessage(4,Ue,ie)}function $e(Pe,te){var ie=Pe.feature,ye=Pe.keys,Me=Pe.values,Fe=Pe.keycache,Ve=Pe.valuecache;for(var We in ie.properties){var Le=ie.properties[We],Je=Fe[We];if(Le!==null){Je===void 0&&(ye.push(We),Fe[We]=Je=ye.length-1),te.writeVarint(Je);var yt=typeof Le;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(Le=JSON.stringify(Le));var ht=yt+":"+Le,ut=Ve[ht];ut===void 0&&(Me.push(Le),Ve[ht]=ut=Me.length-1),te.writeVarint(ut)}}}function he(Pe,te){return(te<<3)+(7&Pe)}function ke(Pe){return Pe<<1^Pe>>31}function Ue(Pe,te){for(var ie=Pe.loadGeometry(),ye=Pe.type,Me=0,Fe=0,Ve=ie.length,We=0;We<Ve;We++){var Le=ie[We],Je=1;ye===1&&(Je=Le.length),te.writeVarint(he(1,Je));for(var yt=ye===3?Le.length-1:Le.length,ht=0;ht<yt;ht++){ht===1&&ye!==1&&te.writeVarint(he(2,yt-1));var ut=Le[ht].x-Me,pn=Le[ht].y-Fe;te.writeVarint(ke(ut)),te.writeVarint(ke(pn)),Me+=ut,Fe+=pn}ye===3&&te.writeVarint(he(7,1))}}function Ie(Pe,te){var ie=typeof Pe;ie==="string"?te.writeStringField(1,Pe):ie==="boolean"?te.writeBooleanField(7,Pe):ie==="number"&&(Pe%1!=0?te.writeDoubleField(3,Pe):Pe<0?te.writeSVarintField(6,Pe):te.writeVarintField(5,Pe))}Z.exports=G,Z.exports.fromVectorTileJs=G,Z.exports.fromGeojsonVt=function(Pe,te){te=te||{};var ie={};for(var ye in Pe)ie[ye]=new le(Pe[ye].features,te),ie[ye].name=ye,ie[ye].version=te.version,ie[ye].extent=te.extent;return G({layers:ie})},Z.exports.GeoJSONWrapper=le;var nt=a.bv(Z.exports);const Xe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Pe=>Pe},ct=Math.fround||(mt=new Float32Array(1),Pe=>(mt[0]=+Pe,mt[0]));var mt;const Dt=3,zt=5,Yt=6;class mn{constructor(te){this.options=Object.assign(Object.create(Xe),te),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(te){const{log:ie,minZoom:ye,maxZoom:Me}=this.options;ie&&console.time("total time");const Fe=`prepare ${te.length} points`;ie&&console.time(Fe),this.points=te;const Ve=[];for(let Le=0;Le<te.length;Le++){const Je=te[Le];if(!Je.geometry)continue;const[yt,ht]=Je.geometry.coordinates,ut=ct(At(yt)),pn=ct(un(ht));Ve.push(ut,pn,1/0,Le,-1,1),this.options.reduce&&Ve.push(0)}let We=this.trees[Me+1]=this._createTree(Ve);ie&&console.timeEnd(Fe);for(let Le=Me;Le>=ye;Le--){const Je=+Date.now();We=this.trees[Le]=this._createTree(this._cluster(We,Le)),ie&&console.log("z%d: %d clusters in %dms",Le,We.numItems,+Date.now()-Je)}return ie&&console.timeEnd("total time"),this}getClusters(te,ie){let ye=((te[0]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,te[1]));let Fe=te[2]===180?180:((te[2]+180)%360+360)%360-180;const Ve=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)ye=-180,Fe=180;else if(ye>Fe){const ht=this.getClusters([ye,Me,180,Ve],ie),ut=this.getClusters([-180,Me,Fe,Ve],ie);return ht.concat(ut)}const We=this.trees[this._limitZoom(ie)],Le=We.range(At(ye),un(Ve),At(Fe),un(Me)),Je=We.data,yt=[];for(const ht of Le){const ut=this.stride*ht;yt.push(Je[ut+zt]>1?cn(Je,ut,this.clusterProps):this.points[Je[ut+Dt]])}return yt}getChildren(te){const ie=this._getOriginId(te),ye=this._getOriginZoom(te),Me="No cluster with the specified id.",Fe=this.trees[ye];if(!Fe)throw new Error(Me);const Ve=Fe.data;if(ie*this.stride>=Ve.length)throw new Error(Me);const We=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Le=Fe.within(Ve[ie*this.stride],Ve[ie*this.stride+1],We),Je=[];for(const yt of Le){const ht=yt*this.stride;Ve[ht+4]===te&&Je.push(Ve[ht+zt]>1?cn(Ve,ht,this.clusterProps):this.points[Ve[ht+Dt]])}if(Je.length===0)throw new Error(Me);return Je}getLeaves(te,ie,ye){const Me=[];return this._appendLeaves(Me,te,ie=ie||10,ye=ye||0,0),Me}getTile(te,ie,ye){const Me=this.trees[this._limitZoom(te)],Fe=Math.pow(2,te),{extent:Ve,radius:We}=this.options,Le=We/Ve,Je=(ye-Le)/Fe,yt=(ye+1+Le)/Fe,ht={features:[]};return this._addTileFeatures(Me.range((ie-Le)/Fe,Je,(ie+1+Le)/Fe,yt),Me.data,ie,ye,Fe,ht),ie===0&&this._addTileFeatures(Me.range(1-Le/Fe,Je,1,yt),Me.data,Fe,ye,Fe,ht),ie===Fe-1&&this._addTileFeatures(Me.range(0,Je,Le/Fe,yt),Me.data,-1,ye,Fe,ht),ht.features.length?ht:null}getClusterExpansionZoom(te){let ie=this._getOriginZoom(te)-1;for(;ie<=this.options.maxZoom;){const ye=this.getChildren(te);if(ie++,ye.length!==1)break;te=ye[0].properties.cluster_id}return ie}_appendLeaves(te,ie,ye,Me,Fe){const Ve=this.getChildren(ie);for(const We of Ve){const Le=We.properties;if(Le&&Le.cluster?Fe+Le.point_count<=Me?Fe+=Le.point_count:Fe=this._appendLeaves(te,Le.cluster_id,ye,Me,Fe):Fe<Me?Fe++:te.push(We),te.length===ye)break}return Fe}_createTree(te){const ie=new a.au(te.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<te.length;ye+=this.stride)ie.add(te[ye],te[ye+1]);return ie.finish(),ie.data=te,ie}_addTileFeatures(te,ie,ye,Me,Fe,Ve){for(const We of te){const Le=We*this.stride,Je=ie[Le+zt]>1;let yt,ht,ut;if(Je)yt=It(ie,Le,this.clusterProps),ht=ie[Le],ut=ie[Le+1];else{const In=this.points[ie[Le+Dt]];yt=In.properties;const[xn,Fn]=In.geometry.coordinates;ht=At(xn),ut=un(Fn)}const pn={type:1,geometry:[[Math.round(this.options.extent*(ht*Fe-ye)),Math.round(this.options.extent*(ut*Fe-Me))]],tags:yt};let _n;_n=Je||this.options.generateId?ie[Le+Dt]:this.points[ie[Le+Dt]].id,_n!==void 0&&(pn.id=_n),Ve.features.push(pn)}}_limitZoom(te){return Math.max(this.options.minZoom,Math.min(Math.floor(+te),this.options.maxZoom+1))}_cluster(te,ie){const{radius:ye,extent:Me,reduce:Fe,minPoints:Ve}=this.options,We=ye/(Me*Math.pow(2,ie)),Le=te.data,Je=[],yt=this.stride;for(let ht=0;ht<Le.length;ht+=yt){if(Le[ht+2]<=ie)continue;Le[ht+2]=ie;const ut=Le[ht],pn=Le[ht+1],_n=te.within(Le[ht],Le[ht+1],We),In=Le[ht+zt];let xn=In;for(const Fn of _n){const Wn=Fn*yt;Le[Wn+2]>ie&&(xn+=Le[Wn+zt])}if(xn>In&&xn>=Ve){let Fn,Wn=ut*In,nr=pn*In,wr=-1;const Mn=((ht/yt|0)<<5)+(ie+1)+this.points.length;for(const or of _n){const Ar=or*yt;if(Le[Ar+2]<=ie)continue;Le[Ar+2]=ie;const Qr=Le[Ar+zt];Wn+=Le[Ar]*Qr,nr+=Le[Ar+1]*Qr,Le[Ar+4]=Mn,Fe&&(Fn||(Fn=this._map(Le,ht,!0),wr=this.clusterProps.length,this.clusterProps.push(Fn)),Fe(Fn,this._map(Le,Ar)))}Le[ht+4]=Mn,Je.push(Wn/xn,nr/xn,1/0,Mn,-1,xn),Fe&&Je.push(wr)}else{for(let Fn=0;Fn<yt;Fn++)Je.push(Le[ht+Fn]);if(xn>1)for(const Fn of _n){const Wn=Fn*yt;if(!(Le[Wn+2]<=ie)){Le[Wn+2]=ie;for(let nr=0;nr<yt;nr++)Je.push(Le[Wn+nr])}}}}return Je}_getOriginId(te){return te-this.points.length>>5}_getOriginZoom(te){return(te-this.points.length)%32}_map(te,ie,ye){if(te[ie+zt]>1){const Ve=this.clusterProps[te[ie+Yt]];return ye?Object.assign({},Ve):Ve}const Me=this.points[te[ie+Dt]].properties,Fe=this.options.map(Me);return ye&&Fe===Me?Object.assign({},Fe):Fe}}function cn(Pe,te,ie){return{type:"Feature",id:Pe[te+Dt],properties:It(Pe,te,ie),geometry:{type:"Point",coordinates:[(ye=Pe[te],360*(ye-.5)),fn(Pe[te+1])]}};var ye}function It(Pe,te,ie){const ye=Pe[te+zt],Me=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,Fe=Pe[te+Yt],Ve=Fe===-1?{}:Object.assign({},ie[Fe]);return Object.assign(Ve,{cluster:!0,cluster_id:Pe[te+Dt],point_count:ye,point_count_abbreviated:Me})}function At(Pe){return Pe/360+.5}function un(Pe){const te=Math.sin(Pe*Math.PI/180),ie=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ie<0?0:ie>1?1:ie}function fn(Pe){const te=(180-360*Pe)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function ot(Pe,te,ie,ye){for(var Me,Fe=ye,Ve=ie-te>>1,We=ie-te,Le=Pe[te],Je=Pe[te+1],yt=Pe[ie],ht=Pe[ie+1],ut=te+3;ut<ie;ut+=3){var pn=qt(Pe[ut],Pe[ut+1],Le,Je,yt,ht);if(pn>Fe)Me=ut,Fe=pn;else if(pn===Fe){var _n=Math.abs(ut-Ve);_n<We&&(Me=ut,We=_n)}}Fe>ye&&(Me-te>3&&ot(Pe,te,Me,ye),Pe[Me+2]=Fe,ie-Me>3&&ot(Pe,Me,ie,ye))}function qt(Pe,te,ie,ye,Me,Fe){var Ve=Me-ie,We=Fe-ye;if(Ve!==0||We!==0){var Le=((Pe-ie)*Ve+(te-ye)*We)/(Ve*Ve+We*We);Le>1?(ie=Me,ye=Fe):Le>0&&(ie+=Ve*Le,ye+=We*Le)}return(Ve=Pe-ie)*Ve+(We=te-ye)*We}function wt(Pe,te,ie,ye){var Me={id:Pe===void 0?null:Pe,type:te,geometry:ie,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Fe){var Ve=Fe.geometry,We=Fe.type;if(We==="Point"||We==="MultiPoint"||We==="LineString")xt(Fe,Ve);else if(We==="Polygon"||We==="MultiLineString")for(var Le=0;Le<Ve.length;Le++)xt(Fe,Ve[Le]);else if(We==="MultiPolygon")for(Le=0;Le<Ve.length;Le++)for(var Je=0;Je<Ve[Le].length;Je++)xt(Fe,Ve[Le][Je])}(Me),Me}function xt(Pe,te){for(var ie=0;ie<te.length;ie+=3)Pe.minX=Math.min(Pe.minX,te[ie]),Pe.minY=Math.min(Pe.minY,te[ie+1]),Pe.maxX=Math.max(Pe.maxX,te[ie]),Pe.maxY=Math.max(Pe.maxY,te[ie+1])}function tt(Pe,te,ie,ye){if(te.geometry){var Me=te.geometry.coordinates,Fe=te.geometry.type,Ve=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2),We=[],Le=te.id;if(ie.promoteId?Le=te.properties[ie.promoteId]:ie.generateId&&(Le=ye||0),Fe==="Point")yn(Me,We);else if(Fe==="MultiPoint")for(var Je=0;Je<Me.length;Je++)yn(Me[Je],We);else if(Fe==="LineString")Ze(Me,We,Ve,!1);else if(Fe==="MultiLineString"){if(ie.lineMetrics){for(Je=0;Je<Me.length;Je++)Ze(Me[Je],We=[],Ve,!1),Pe.push(wt(Le,"LineString",We,te.properties));return}hn(Me,We,Ve,!1)}else if(Fe==="Polygon")hn(Me,We,Ve,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(Je=0;Je<te.geometry.geometries.length;Je++)tt(Pe,{id:Le,geometry:te.geometry.geometries[Je],properties:te.properties},ie,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Je=0;Je<Me.length;Je++){var yt=[];hn(Me[Je],yt,Ve,!0),We.push(yt)}}Pe.push(wt(Le,Fe,We,te.properties))}}function yn(Pe,te){te.push(Bn(Pe[0])),te.push(kn(Pe[1])),te.push(0)}function Ze(Pe,te,ie,ye){for(var Me,Fe,Ve=0,We=0;We<Pe.length;We++){var Le=Bn(Pe[We][0]),Je=kn(Pe[We][1]);te.push(Le),te.push(Je),te.push(0),We>0&&(Ve+=ye?(Me*Je-Le*Fe)/2:Math.sqrt(Math.pow(Le-Me,2)+Math.pow(Je-Fe,2))),Me=Le,Fe=Je}var yt=te.length-3;te[2]=1,ot(te,0,yt,ie),te[yt+2]=1,te.size=Math.abs(Ve),te.start=0,te.end=te.size}function hn(Pe,te,ie,ye){for(var Me=0;Me<Pe.length;Me++){var Fe=[];Ze(Pe[Me],Fe,ie,ye),te.push(Fe)}}function Bn(Pe){return Pe/360+.5}function kn(Pe){var te=Math.sin(Pe*Math.PI/180),ie=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ie<0?0:ie>1?1:ie}function Vn(Pe,te,ie,ye,Me,Fe,Ve,We){if(ye/=te,Fe>=(ie/=te)&&Ve<ye)return Pe;if(Ve<ie||Fe>=ye)return null;for(var Le=[],Je=0;Je<Pe.length;Je++){var yt=Pe[Je],ht=yt.geometry,ut=yt.type,pn=Me===0?yt.minX:yt.minY,_n=Me===0?yt.maxX:yt.maxY;if(pn>=ie&&_n<ye)Le.push(yt);else if(!(_n<ie||pn>=ye)){var In=[];if(ut==="Point"||ut==="MultiPoint")ir(ht,In,ie,ye,Me);else if(ut==="LineString")_s(ht,In,ie,ye,Me,!1,We.lineMetrics);else if(ut==="MultiLineString")gs(ht,In,ie,ye,Me,!1);else if(ut==="Polygon")gs(ht,In,ie,ye,Me,!0);else if(ut==="MultiPolygon")for(var xn=0;xn<ht.length;xn++){var Fn=[];gs(ht[xn],Fn,ie,ye,Me,!0),Fn.length&&In.push(Fn)}if(In.length){if(We.lineMetrics&&ut==="LineString"){for(xn=0;xn<In.length;xn++)Le.push(wt(yt.id,ut,In[xn],yt.tags));continue}ut!=="LineString"&&ut!=="MultiLineString"||(In.length===1?(ut="LineString",In=In[0]):ut="MultiLineString"),ut!=="Point"&&ut!=="MultiPoint"||(ut=In.length===3?"Point":"MultiPoint"),Le.push(wt(yt.id,ut,In,yt.tags))}}}return Le.length?Le:null}function ir(Pe,te,ie,ye,Me){for(var Fe=0;Fe<Pe.length;Fe+=3){var Ve=Pe[Fe+Me];Ve>=ie&&Ve<=ye&&(te.push(Pe[Fe]),te.push(Pe[Fe+1]),te.push(Pe[Fe+2]))}}function _s(Pe,te,ie,ye,Me,Fe,Ve){for(var We,Le,Je=Rs(Pe),yt=Me===0?Os:Qs,ht=Pe.start,ut=0;ut<Pe.length-3;ut+=3){var pn=Pe[ut],_n=Pe[ut+1],In=Pe[ut+2],xn=Pe[ut+3],Fn=Pe[ut+4],Wn=Me===0?pn:_n,nr=Me===0?xn:Fn,wr=!1;Ve&&(We=Math.sqrt(Math.pow(pn-xn,2)+Math.pow(_n-Fn,2))),Wn<ie?nr>ie&&(Le=yt(Je,pn,_n,xn,Fn,ie),Ve&&(Je.start=ht+We*Le)):Wn>ye?nr<ye&&(Le=yt(Je,pn,_n,xn,Fn,ye),Ve&&(Je.start=ht+We*Le)):Kr(Je,pn,_n,In),nr<ie&&Wn>=ie&&(Le=yt(Je,pn,_n,xn,Fn,ie),wr=!0),nr>ye&&Wn<=ye&&(Le=yt(Je,pn,_n,xn,Fn,ye),wr=!0),!Fe&&wr&&(Ve&&(Je.end=ht+We*Le),te.push(Je),Je=Rs(Pe)),Ve&&(ht+=We)}var Mn=Pe.length-3;pn=Pe[Mn],_n=Pe[Mn+1],In=Pe[Mn+2],(Wn=Me===0?pn:_n)>=ie&&Wn<=ye&&Kr(Je,pn,_n,In),Mn=Je.length-3,Fe&&Mn>=3&&(Je[Mn]!==Je[0]||Je[Mn+1]!==Je[1])&&Kr(Je,Je[0],Je[1],Je[2]),Je.length&&te.push(Je)}function Rs(Pe){var te=[];return te.size=Pe.size,te.start=Pe.start,te.end=Pe.end,te}function gs(Pe,te,ie,ye,Me,Fe){for(var Ve=0;Ve<Pe.length;Ve++)_s(Pe[Ve],te,ie,ye,Me,Fe,!1)}function Kr(Pe,te,ie,ye){Pe.push(te),Pe.push(ie),Pe.push(ye)}function Os(Pe,te,ie,ye,Me,Fe){var Ve=(Fe-te)/(ye-te);return Pe.push(Fe),Pe.push(ie+(Me-ie)*Ve),Pe.push(1),Ve}function Qs(Pe,te,ie,ye,Me,Fe){var Ve=(Fe-ie)/(Me-ie);return Pe.push(te+(ye-te)*Ve),Pe.push(Fe),Pe.push(1),Ve}function Ne(Pe,te){for(var ie=[],ye=0;ye<Pe.length;ye++){var Me,Fe=Pe[ye],Ve=Fe.type;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")Me=Nr(Fe.geometry,te);else if(Ve==="MultiLineString"||Ve==="Polygon"){Me=[];for(var We=0;We<Fe.geometry.length;We++)Me.push(Nr(Fe.geometry[We],te))}else if(Ve==="MultiPolygon")for(Me=[],We=0;We<Fe.geometry.length;We++){for(var Le=[],Je=0;Je<Fe.geometry[We].length;Je++)Le.push(Nr(Fe.geometry[We][Je],te));Me.push(Le)}ie.push(wt(Fe.id,Ve,Me,Fe.tags))}return ie}function Nr(Pe,te){var ie=[];ie.size=Pe.size,Pe.start!==void 0&&(ie.start=Pe.start,ie.end=Pe.end);for(var ye=0;ye<Pe.length;ye+=3)ie.push(Pe[ye]+te,Pe[ye+1],Pe[ye+2]);return ie}function Vr(Pe,te){if(Pe.transformed)return Pe;var ie,ye,Me,Fe=1<<Pe.z,Ve=Pe.x,We=Pe.y;for(ie=0;ie<Pe.features.length;ie++){var Le=Pe.features[ie],Je=Le.geometry,yt=Le.type;if(Le.geometry=[],yt===1)for(ye=0;ye<Je.length;ye+=2)Le.geometry.push(js(Je[ye],Je[ye+1],te,Fe,Ve,We));else for(ye=0;ye<Je.length;ye++){var ht=[];for(Me=0;Me<Je[ye].length;Me+=2)ht.push(js(Je[ye][Me],Je[ye][Me+1],te,Fe,Ve,We));Le.geometry.push(ht)}}return Pe.transformed=!0,Pe}function js(Pe,te,ie,ye,Me,Fe){return[Math.round(ie*(Pe*ye-Me)),Math.round(ie*(te*ye-Fe))]}function pi(Pe,te,ie,ye,Me){for(var Fe=te===Me.maxZoom?0:Me.tolerance/((1<<te)*Me.extent),Ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ie,y:ye,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},We=0;We<Pe.length;We++){Ve.numFeatures++,Ot(Ve,Pe[We],Fe,Me);var Le=Pe[We].minX,Je=Pe[We].minY,yt=Pe[We].maxX,ht=Pe[We].maxY;Le<Ve.minX&&(Ve.minX=Le),Je<Ve.minY&&(Ve.minY=Je),yt>Ve.maxX&&(Ve.maxX=yt),ht>Ve.maxY&&(Ve.maxY=ht)}return Ve}function Ot(Pe,te,ie,ye){var Me=te.geometry,Fe=te.type,Ve=[];if(Fe==="Point"||Fe==="MultiPoint")for(var We=0;We<Me.length;We+=3)Ve.push(Me[We]),Ve.push(Me[We+1]),Pe.numPoints++,Pe.numSimplified++;else if(Fe==="LineString")An(Ve,Me,Pe,ie,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(We=0;We<Me.length;We++)An(Ve,Me[We],Pe,ie,Fe==="Polygon",We===0);else if(Fe==="MultiPolygon")for(var Le=0;Le<Me.length;Le++){var Je=Me[Le];for(We=0;We<Je.length;We++)An(Ve,Je[We],Pe,ie,!0,We===0)}if(Ve.length){var yt=te.tags||null;if(Fe==="LineString"&&ye.lineMetrics){for(var ht in yt={},te.tags)yt[ht]=te.tags[ht];yt.mapbox_clip_start=Me.start/Me.size,yt.mapbox_clip_end=Me.end/Me.size}var ut={geometry:Ve,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:yt};te.id!==null&&(ut.id=te.id),Pe.features.push(ut)}}function An(Pe,te,ie,ye,Me,Fe){var Ve=ye*ye;if(ye>0&&te.size<(Me?Ve:ye))ie.numPoints+=te.length/3;else{for(var We=[],Le=0;Le<te.length;Le+=3)(ye===0||te[Le+2]>Ve)&&(ie.numSimplified++,We.push(te[Le]),We.push(te[Le+1])),ie.numPoints++;Me&&function(Je,yt){for(var ht=0,ut=0,pn=Je.length,_n=pn-2;ut<pn;_n=ut,ut+=2)ht+=(Je[ut]-Je[_n])*(Je[ut+1]+Je[_n+1]);if(ht>0===yt)for(ut=0,pn=Je.length;ut<pn/2;ut+=2){var In=Je[ut],xn=Je[ut+1];Je[ut]=Je[pn-2-ut],Je[ut+1]=Je[pn-1-ut],Je[pn-2-ut]=In,Je[pn-1-ut]=xn}}(We,Fe),Pe.push(We)}}function wn(Pe,te){var ie=(te=this.options=function(Me,Fe){for(var Ve in Fe)Me[Ve]=Fe[Ve];return Me}(Object.create(this.options),te)).debug;if(ie&&console.time("preprocess data"),te.maxZoom<0||te.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(te.promoteId&&te.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=function(Me,Fe){var Ve=[];if(Me.type==="FeatureCollection")for(var We=0;We<Me.features.length;We++)tt(Ve,Me.features[We],Fe,We);else tt(Ve,Me.type==="Feature"?Me:{geometry:Me},Fe);return Ve}(Pe,te);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",te.indexMaxZoom,te.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(Me,Fe){var Ve=Fe.buffer/Fe.extent,We=Me,Le=Vn(Me,1,-1-Ve,Ve,0,-1,2,Fe),Je=Vn(Me,1,1-Ve,2+Ve,0,-1,2,Fe);return(Le||Je)&&(We=Vn(Me,1,-Ve,1+Ve,0,-1,2,Fe)||[],Le&&(We=Ne(Le,1).concat(We)),Je&&(We=We.concat(Ne(Je,-1)))),We}(ye,te),ye.length&&this.splitTile(ye,0,0,0),ie&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ur(Pe,te,ie){return 32*((1<<Pe)*ie+te)+Pe}function Xr(Pe,te){return te?Pe.properties[te]:Pe.id}function Cn(Pe,te){if(Pe==null)return!0;if(Pe.type==="Feature")return Xr(Pe,te)!=null;if(Pe.type==="FeatureCollection"){const ie=new Set;for(const ye of Pe.features){const Me=Xr(ye,te);if(Me==null||ie.has(Me))return!1;ie.add(Me)}return!0}return!1}function Fs(Pe,te){const ie=new Map;if(Pe!=null)if(Pe.type==="Feature")ie.set(Xr(Pe,te),Pe);else for(const ye of Pe.features)ie.set(Xr(ye,te),ye);return ie}wn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},wn.prototype.splitTile=function(Pe,te,ie,ye,Me,Fe,Ve){for(var We=[Pe,te,ie,ye],Le=this.options,Je=Le.debug;We.length;){ye=We.pop(),ie=We.pop(),te=We.pop(),Pe=We.pop();var yt=1<<te,ht=Ur(te,ie,ye),ut=this.tiles[ht];if(!ut&&(Je>1&&console.time("creation"),ut=this.tiles[ht]=pi(Pe,te,ie,ye,Le),this.tileCoords.push({z:te,x:ie,y:ye}),Je)){Je>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",te,ie,ye,ut.numFeatures,ut.numPoints,ut.numSimplified),console.timeEnd("creation"));var pn="z"+te;this.stats[pn]=(this.stats[pn]||0)+1,this.total++}if(ut.source=Pe,Me){if(te===Le.maxZoom||te===Me)continue;var _n=1<<Me-te;if(ie!==Math.floor(Fe/_n)||ye!==Math.floor(Ve/_n))continue}else if(te===Le.indexMaxZoom||ut.numPoints<=Le.indexMaxPoints)continue;if(ut.source=null,Pe.length!==0){Je>1&&console.time("clipping");var In,xn,Fn,Wn,nr,wr,Mn=.5*Le.buffer/Le.extent,or=.5-Mn,Ar=.5+Mn,Qr=1+Mn;In=xn=Fn=Wn=null,nr=Vn(Pe,yt,ie-Mn,ie+Ar,0,ut.minX,ut.maxX,Le),wr=Vn(Pe,yt,ie+or,ie+Qr,0,ut.minX,ut.maxX,Le),Pe=null,nr&&(In=Vn(nr,yt,ye-Mn,ye+Ar,1,ut.minY,ut.maxY,Le),xn=Vn(nr,yt,ye+or,ye+Qr,1,ut.minY,ut.maxY,Le),nr=null),wr&&(Fn=Vn(wr,yt,ye-Mn,ye+Ar,1,ut.minY,ut.maxY,Le),Wn=Vn(wr,yt,ye+or,ye+Qr,1,ut.minY,ut.maxY,Le),wr=null),Je>1&&console.timeEnd("clipping"),We.push(In||[],te+1,2*ie,2*ye),We.push(xn||[],te+1,2*ie,2*ye+1),We.push(Fn||[],te+1,2*ie+1,2*ye),We.push(Wn||[],te+1,2*ie+1,2*ye+1)}}},wn.prototype.getTile=function(Pe,te,ie){var ye=this.options,Me=ye.extent,Fe=ye.debug;if(Pe<0||Pe>24)return null;var Ve=1<<Pe,We=Ur(Pe,te=(te%Ve+Ve)%Ve,ie);if(this.tiles[We])return Vr(this.tiles[We],Me);Fe>1&&console.log("drilling down to z%d-%d-%d",Pe,te,ie);for(var Le,Je=Pe,yt=te,ht=ie;!Le&&Je>0;)Je--,yt=Math.floor(yt/2),ht=Math.floor(ht/2),Le=this.tiles[Ur(Je,yt,ht)];return Le&&Le.source?(Fe>1&&console.log("found parent tile z%d-%d-%d",Je,yt,ht),Fe>1&&console.time("drilling down"),this.splitTile(Le.source,Je,yt,ht,Pe,te,ie),Fe>1&&console.timeEnd("drilling down"),this.tiles[We]?Vr(this.tiles[We],Me):null):null};class qs extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(te,ie){return a._(this,void 0,void 0,function*(){const ye=te.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Me=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!Me)return null;const Fe=new class{constructor(We){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.W,this.length=We.length,this._features=We}feature(We){return new class{constructor(Le){this._feature=Le,this.extent=a.W,this.type=Le.type,this.properties=Le.tags,"id"in Le&&!isNaN(Le.id)&&(this.id=parseInt(Le.id,10))}loadGeometry(){if(this._feature.type===1){const Le=[];for(const Je of this._feature.geometry)Le.push([new a.P(Je[0],Je[1])]);return Le}{const Le=[];for(const Je of this._feature.geometry){const yt=[];for(const ht of Je)yt.push(new a.P(ht[0],ht[1]));Le.push(yt)}return Le}}toGeoJSON(Le,Je,yt){return B.call(this,Le,Je,yt)}}(this._features[We])}}(Me.features);let Ve=nt(Fe);return Ve.byteOffset===0&&Ve.byteLength===Ve.buffer.byteLength||(Ve=new Uint8Array(Ve)),{vectorTile:Fe,rawData:Ve.buffer}})}loadData(te){return a._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const ye=!!(te&&te.request&&te.request.collectResourceTiming)&&new a.bs(te.request);this._pendingRequest=new AbortController;try{let Me=yield this.loadGeoJSON(te,this._pendingRequest);if(delete this._pendingRequest,typeof Me!="object")throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(D(Me,!0),te.filter){const Ve=a.by(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ve.result==="error")throw new Error(Ve.value.map(Le=>`${Le.key}: ${Le.message}`).join(", "));Me={type:"FeatureCollection",features:Me.features.filter(Le=>Ve.value.evaluate({zoom:0},Le))}}this._geoJSONIndex=te.cluster?new mn(function({superclusterOptions:Ve,clusterProperties:We}){if(!We||!Ve)return Ve;const Le={},Je={},yt={accumulated:null,zoom:0},ht={properties:null},ut=Object.keys(We);for(const pn of ut){const[_n,In]=We[pn],xn=a.by(In),Fn=a.by(typeof _n=="string"?[_n,["accumulated"],["get",pn]]:_n);Le[pn]=xn.value,Je[pn]=Fn.value}return Ve.map=pn=>{ht.properties=pn;const _n={};for(const In of ut)_n[In]=Le[In].evaluate(yt,ht);return _n},Ve.reduce=(pn,_n)=>{ht.properties=_n;for(const In of ut)yt.accumulated=pn[In],pn[In]=Je[In].evaluate(yt,ht)},Ve}(te)).load(Me.features):function(Ve,We){return new wn(Ve,We)}(Me,te.geojsonVtOptions),this.loaded={};const Fe={};if(ye){const Ve=ye.finish();Ve&&(Fe.resourceTiming={},Fe.resourceTiming[te.source]=JSON.parse(JSON.stringify(Ve)))}return Fe}catch(Me){if(delete this._pendingRequest,a.bz(Me))return{abandoned:!0};throw Me}})}reloadTile(te){const ie=this.loaded;return ie&&ie[te.uid]?super.reloadTile(te):this.loadTile(te)}loadGeoJSON(te,ie){return a._(this,void 0,void 0,function*(){const{promoteId:ye}=te;if(te.request){const Me=yield a.h(te.request,ie);return this._dataUpdateable=Cn(Me.data,ye)?Fs(Me.data,ye):void 0,Me.data}if(typeof te.data=="string")try{const Me=JSON.parse(te.data);return this._dataUpdateable=Cn(Me,ye)?Fs(Me,ye):void 0,Me}catch{throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`)}if(!te.dataDiff)throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${te.source}`);return function(Me,Fe,Ve){var We,Le,Je,yt;if(Fe.removeAll&&Me.clear(),Fe.remove)for(const ht of Fe.remove)Me.delete(ht);if(Fe.add)for(const ht of Fe.add){const ut=Xr(ht,Ve);ut!=null&&Me.set(ut,ht)}if(Fe.update)for(const ht of Fe.update){let ut=Me.get(ht.id);if(ut==null)continue;const pn=!ht.removeAllProperties&&(((We=ht.removeProperties)===null||We===void 0?void 0:We.length)>0||((Le=ht.addOrUpdateProperties)===null||Le===void 0?void 0:Le.length)>0);if((ht.newGeometry||ht.removeAllProperties||pn)&&(ut=Object.assign({},ut),Me.set(ht.id,ut),pn&&(ut.properties=Object.assign({},ut.properties))),ht.newGeometry&&(ut.geometry=ht.newGeometry),ht.removeAllProperties)ut.properties={};else if(((Je=ht.removeProperties)===null||Je===void 0?void 0:Je.length)>0)for(const _n of ht.removeProperties)Object.prototype.hasOwnProperty.call(ut.properties,_n)&&delete ut.properties[_n];if(((yt=ht.addOrUpdateProperties)===null||yt===void 0?void 0:yt.length)>0)for(const{key:_n,value:In}of ht.addOrUpdateProperties)ut.properties[_n]=In}}(this._dataUpdateable,te.dataDiff,ye),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(te){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(te){return this._geoJSONIndex.getClusterExpansionZoom(te.clusterId)}getClusterChildren(te){return this._geoJSONIndex.getChildren(te.clusterId)}getClusterLeaves(te){return this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset)}}class jr{constructor(te){this.self=te,this.actor=new a.C(te),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ie,ye)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=ye},this.self.addProtocol=a.bf,this.self.removeProtocol=a.bg,this.self.registerRTLTextPlugin=ie=>{if(a.bA.isParsed())throw new Error("RTL text plugin already registered.");a.bA.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,ye)=>this._getDEMWorkerSource(ie,ye.source).loadTile(ye)),this.actor.registerMessageHandler("RDT",(ie,ye)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,ye.source).removeTile(ye)})),this.actor.registerMessageHandler("GCEZ",(ie,ye)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,ye.type,ye.source).getClusterExpansionZoom(ye)})),this.actor.registerMessageHandler("GCC",(ie,ye)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,ye.type,ye.source).getClusterChildren(ye)})),this.actor.registerMessageHandler("GCL",(ie,ye)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,ye.type,ye.source).getClusterLeaves(ye)})),this.actor.registerMessageHandler("LD",(ie,ye)=>this._getWorkerSource(ie,ye.type,ye.source).loadData(ye)),this.actor.registerMessageHandler("LT",(ie,ye)=>this._getWorkerSource(ie,ye.type,ye.source).loadTile(ye)),this.actor.registerMessageHandler("RT",(ie,ye)=>this._getWorkerSource(ie,ye.type,ye.source).reloadTile(ye)),this.actor.registerMessageHandler("AT",(ie,ye)=>this._getWorkerSource(ie,ye.type,ye.source).abortTile(ye)),this.actor.registerMessageHandler("RMT",(ie,ye)=>this._getWorkerSource(ie,ye.type,ye.source).removeTile(ye)),this.actor.registerMessageHandler("RS",(ie,ye)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][ye.type]||!this.workerSources[ie][ye.type][ye.source])return;const Me=this.workerSources[ie][ye.type][ye.source];delete this.workerSources[ie][ye.type][ye.source],Me.removeSource!==void 0&&Me.removeSource(ye)})),this.actor.registerMessageHandler("RM",ie=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie]})),this.actor.registerMessageHandler("SR",(ie,ye)=>a._(this,void 0,void 0,function*(){this.referrer=ye})),this.actor.registerMessageHandler("SRPS",(ie,ye)=>this._syncRTLPluginState(ie,ye)),this.actor.registerMessageHandler("IS",(ie,ye)=>a._(this,void 0,void 0,function*(){this.self.importScripts(ye)})),this.actor.registerMessageHandler("SI",(ie,ye)=>this._setImages(ie,ye)),this.actor.registerMessageHandler("UL",(ie,ye)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(ye.layers,ye.removedIds)})),this.actor.registerMessageHandler("SL",(ie,ye)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(ye)}))}_setImages(te,ie){return a._(this,void 0,void 0,function*(){this.availableImages[te]=ie;for(const ye in this.workerSources[te]){const Me=this.workerSources[te][ye];for(const Fe in Me)Me[Fe].availableImages=ie}})}_syncRTLPluginState(te,ie){return a._(this,void 0,void 0,function*(){if(a.bA.isParsed())return a.bA.getState();if(ie.pluginStatus!=="loading")return a.bA.setState(ie),ie;const ye=ie.pluginURL;if(this.self.importScripts(ye),a.bA.isParsed()){const Me={pluginStatus:"loaded",pluginURL:ye};return a.bA.setState(Me),Me}throw a.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ye}`)})}_getAvailableImages(te){let ie=this.availableImages[te];return ie||(ie=[]),ie}_getLayerIndex(te){let ie=this.layerIndexes[te];return ie||(ie=this.layerIndexes[te]=new o),ie}_getWorkerSource(te,ie,ye){if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][ie]||(this.workerSources[te][ie]={}),!this.workerSources[te][ie][ye]){const Me={sendAsync:(Fe,Ve)=>(Fe.targetMapId=te,this.actor.sendAsync(Fe,Ve))};switch(ie){case"vector":this.workerSources[te][ie][ye]=new b(Me,this._getLayerIndex(te),this._getAvailableImages(te));break;case"geojson":this.workerSources[te][ie][ye]=new qs(Me,this._getLayerIndex(te),this._getAvailableImages(te));break;default:this.workerSources[te][ie][ye]=new this.externalWorkerSourceTypes[ie](Me,this._getLayerIndex(te),this._getAvailableImages(te))}}return this.workerSources[te][ie][ye]}_getDEMWorkerSource(te,ie){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][ie]||(this.demWorkerSources[te][ie]=new x),this.demWorkerSources[te][ie]}}return a.i(self)&&(self.worker=new jr(self)),jr}),r("index",["exports","./shared"],function(a,o){var c="4.2.0";let d,_;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:$=>new Promise((u,p)=>{const g=requestAnimationFrame(u);$.signal.addEventListener("abort",()=>{cancelAnimationFrame(g),p(o.c())})}),getImageData($,u=0){return this.getImageCanvasContext($).getImageData(-u,-u,$.width+2*u,$.height+2*u)},getImageCanvasContext($){const u=window.document.createElement("canvas"),p=u.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return u.width=$.width,u.height=$.height,p.drawImage($,0,0,$.width,$.height),p},resolveURL:$=>(d||(d=document.createElement("a")),d.href=$,d.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(_==null&&(_=matchMedia("(prefers-reduced-motion: reduce)")),_.matches)}};class x{static testProp(u){if(!x.docStyle)return u[0];for(let p=0;p<u.length;p++)if(u[p]in x.docStyle)return u[p];return u[0]}static create(u,p,g){const y=window.document.createElement(u);return p!==void 0&&(y.className=p),g&&g.appendChild(y),y}static createNS(u,p){return window.document.createElementNS(u,p)}static disableDrag(){x.docStyle&&x.selectProp&&(x.userSelect=x.docStyle[x.selectProp],x.docStyle[x.selectProp]="none")}static enableDrag(){x.docStyle&&x.selectProp&&(x.docStyle[x.selectProp]=x.userSelect)}static setTransform(u,p){u.style[x.transformProp]=p}static addEventListener(u,p,g,y={}){u.addEventListener(p,g,"passive"in y?y:y.capture)}static removeEventListener(u,p,g,y={}){u.removeEventListener(p,g,"passive"in y?y:y.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",x.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",x.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",x.suppressClickInternal,!0)},0)}static getScale(u){const p=u.getBoundingClientRect();return{x:p.width/u.offsetWidth||1,y:p.height/u.offsetHeight||1,boundingClientRect:p}}static getPoint(u,p,g){const y=p.boundingClientRect;return new o.P((g.clientX-y.left)/p.x-u.clientLeft,(g.clientY-y.top)/p.y-u.clientTop)}static mousePos(u,p){const g=x.getScale(u);return x.getPoint(u,g,p)}static touchPos(u,p){const g=[],y=x.getScale(u);for(let C=0;C<p.length;C++)g.push(x.getPoint(u,y,p[C]));return g}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}x.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,x.selectProp=x.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),x.transformProp=x.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function($){!B&&D&&(Z?W($):L=$)}};let L,D,B=!1,Z=!1;function W($){const u=$.createTexture();$.bindTexture($.TEXTURE_2D,u);try{if($.texImage2D($.TEXTURE_2D,0,$.RGBA,$.RGBA,$.UNSIGNED_BYTE,D),$.isContextLost())return;P.supported=!0}catch{}$.deleteTexture(u),B=!0}var Q;typeof document<"u"&&(D=document.createElement("img"),D.onload=()=>{L&&W(L),L=null,Z=!0},D.onerror=()=>{B=!0,L=null},D.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function($){let u,p,g,y;$.resetRequestQueue=()=>{u=[],p=0,g=0,y={}},$.addThrottleControl=F=>{const q=g++;return y[q]=F,q},$.removeThrottleControl=F=>{delete y[F],A()},$.getImage=(F,q,X=!0)=>new Promise((Y,de)=>{P.supported&&(F.headers||(F.headers={}),F.headers.accept="image/webp,*/*"),o.e(F,{type:"image"}),u.push({abortController:q,requestParameters:F,supportImageRefresh:X,state:"queued",onError:Ce=>{de(Ce)},onSuccess:Ce=>{Y(Ce)}}),A()});const C=F=>o._(this,void 0,void 0,function*(){F.state="running";const{requestParameters:q,supportImageRefresh:X,onError:Y,onSuccess:de,abortController:Ce}=F,Te=X===!1&&!o.i(self)&&!o.g(q.url)&&(!q.headers||Object.keys(q.headers).reduce((Oe,Ye)=>Oe&&Ye==="accept",!0));p++;const Ae=Te?z(q,Ce):o.m(q,Ce);try{const Oe=yield Ae;delete F.abortController,F.state="completed",Oe.data instanceof HTMLImageElement||o.b(Oe.data)?de(Oe):Oe.data&&de({data:yield(xe=Oe.data,typeof createImageBitmap=="function"?o.d(xe):o.f(xe)),cacheControl:Oe.cacheControl,expires:Oe.expires})}catch(Oe){delete F.abortController,Y(Oe)}finally{p--,A()}var xe}),A=()=>{const F=(()=>{for(const q of Object.keys(y))if(y[q]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let q=p;q<F&&u.length>0;q++){const X=u.shift();X.abortController.signal.aborted?q--:C(X)}},z=(F,q)=>new Promise((X,Y)=>{const de=new Image,Ce=F.url,Te=F.credentials;Te&&Te==="include"?de.crossOrigin="use-credentials":(Te&&Te==="same-origin"||!o.s(Ce))&&(de.crossOrigin="anonymous"),q.signal.addEventListener("abort",()=>{de.src="",Y(o.c())}),de.fetchPriority="high",de.onload=()=>{de.onerror=de.onload=null,X({data:de})},de.onerror=()=>{de.onerror=de.onload=null,q.signal.aborted||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},de.src=Ce})}(Q||(Q={})),Q.resetRequestQueue();class ve{constructor(u){this._transformRequestFn=u}transformRequest(u,p){return this._transformRequestFn&&this._transformRequestFn(u,p)||{url:u}}normalizeSpriteURL(u,p,g){const y=function(C){const A=C.match(re);if(!A)throw new Error(`Unable to parse URL "${C}"`);return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("&"):[]}}(u);return y.path+=`${p}${g}`,function(C){const A=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${A}`}(y)}setTransformRequest(u){this._transformRequestFn=u}}const re=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ce($){var u=new o.A(3);return u[0]=$[0],u[1]=$[1],u[2]=$[2],u}var ge,le=function($,u,p){return $[0]=u[0]-p[0],$[1]=u[1]-p[1],$[2]=u[2]-p[2],$};ge=new o.A(3),o.A!=Float32Array&&(ge[0]=0,ge[1]=0,ge[2]=0);var G=function($){var u=$[0],p=$[1];return u*u+p*p};function ee($){const u=[];if(typeof $=="string")u.push({id:"default",url:$});else if($&&$.length>0){const p=[];for(const{id:g,url:y}of $){const C=`${g}${y}`;p.indexOf(C)===-1&&(p.push(C),u.push({id:g,url:y}))}}return u}(function(){var $=new o.A(2);o.A!=Float32Array&&($[0]=0,$[1]=0)})();class fe{constructor(u,p,g,y){this.context=u,this.format=g,this.texture=u.gl.createTexture(),this.update(p,y)}update(u,p,g){const{width:y,height:C}=u,A=!(this.size&&this.size[0]===y&&this.size[1]===C||g),{context:z}=this,{gl:F}=z;if(this.useMipmap=!!(p&&p.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!p||p.premultiply!==!1)),A)this.size=[y,C],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||o.b(u)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,u):F.texImage2D(F.TEXTURE_2D,0,this.format,y,C,0,this.format,F.UNSIGNED_BYTE,u.data);else{const{x:q,y:X}=g||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||o.b(u)?F.texSubImage2D(F.TEXTURE_2D,0,q,X,F.RGBA,F.UNSIGNED_BYTE,u):F.texSubImage2D(F.TEXTURE_2D,0,q,X,y,C,F.RGBA,F.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D)}bind(u,p,g){const{context:y}=this,{gl:C}=y;C.bindTexture(C.TEXTURE_2D,this.texture),g!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=C.LINEAR),u!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,u),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,g||u),this.filter=u),p!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,p),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function $e($){const{userImage:u}=$;return!!(u&&u.render&&u.render())&&($.data.replace(new Uint8Array(u.data.buffer)),!0)}class he extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:p,promiseResolve:g}of this.requestors)g(this._getImagesForIds(p));this.requestors=[]}}getImage(u){const p=this.images[u];if(p&&!p.data&&p.spriteData){const g=p.spriteData;p.data=new o.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),p.spriteData=null}return p}addImage(u,p){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,p)&&(this.images[u]=p)}_validate(u,p){let g=!0;const y=p.data||p.spriteData;return this._validateStretch(p.stretchX,y&&y.width)||(this.fire(new o.j(new Error(`Image "${u}" has invalid "stretchX" value`))),g=!1),this._validateStretch(p.stretchY,y&&y.height)||(this.fire(new o.j(new Error(`Image "${u}" has invalid "stretchY" value`))),g=!1),this._validateContent(p.content,p)||(this.fire(new o.j(new Error(`Image "${u}" has invalid "content" value`))),g=!1),g}_validateStretch(u,p){if(!u)return!0;let g=0;for(const y of u){if(y[0]<g||y[1]<y[0]||p<y[1])return!1;g=y[1]}return!0}_validateContent(u,p){if(!u)return!0;if(u.length!==4)return!1;const g=p.spriteData,y=g&&g.width||p.data.width,C=g&&g.height||p.data.height;return!(u[0]<0||y<u[0]||u[1]<0||C<u[1]||u[2]<0||y<u[2]||u[3]<0||C<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,p,g=!0){const y=this.getImage(u);if(g&&(y.data.width!==p.data.width||y.data.height!==p.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=y.version+1,this.images[u]=p,this.updatedImages[u]=!0}removeImage(u){const p=this.images[u];delete this.images[u],delete this.patterns[u],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise((p,g)=>{let y=!0;if(!this.isLoaded())for(const C of u)this.images[C]||(y=!1);this.isLoaded()||y?p(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:p})})}_getImagesForIds(u){const p={};for(const g of u){let y=this.getImage(g);y||(this.fire(new o.k("styleimagemissing",{id:g})),y=this.getImage(g)),y?p[g]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:u,height:p}=this.atlasImage;return{width:u,height:p}}getPattern(u){const p=this.patterns[u],g=this.getImage(u);if(!g)return null;if(p&&p.position.version===g.version)return p.position;if(p)p.position.version=g.version;else{const y={w:g.data.width+2,h:g.data.height+2,x:0,y:0},C=new o.I(y,g);this.patterns[u]={bin:y,position:C}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const p=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new fe(u,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const C in this.patterns)u.push(this.patterns[C].bin);const{w:p,h:g}=o.p(u),y=this.atlasImage;y.resize({width:p||1,height:g||1});for(const C in this.patterns){const{bin:A}=this.patterns[C],z=A.x+1,F=A.y+1,q=this.getImage(C).data,X=q.width,Y=q.height;o.R.copy(q,y,{x:0,y:0},{x:z,y:F},{width:X,height:Y}),o.R.copy(q,y,{x:0,y:Y-1},{x:z,y:F-1},{width:X,height:1}),o.R.copy(q,y,{x:0,y:0},{x:z,y:F+Y},{width:X,height:1}),o.R.copy(q,y,{x:X-1,y:0},{x:z-1,y:F},{width:1,height:Y}),o.R.copy(q,y,{x:0,y:0},{x:z+X,y:F},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const p of u){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const g=this.getImage(p);g||o.w(`Image with ID: "${p}" was not found`),$e(g)&&this.updateImage(p,g)}}}const ke=1e20;function Ue($,u,p,g,y,C,A,z,F){for(let q=u;q<u+g;q++)Ie($,p*C+q,C,y,A,z,F);for(let q=p;q<p+y;q++)Ie($,q*C+u,1,g,A,z,F)}function Ie($,u,p,g,y,C,A){C[0]=0,A[0]=-ke,A[1]=ke,y[0]=$[u];for(let z=1,F=0,q=0;z<g;z++){y[z]=$[u+z*p];const X=z*z;do{const Y=C[F];q=(y[z]-y[Y]+X-Y*Y)/(z-Y)/2}while(q<=A[F]&&--F>-1);F++,C[F]=z,A[F]=q,A[F+1]=ke}for(let z=0,F=0;z<g;z++){for(;A[F+1]<z;)F++;const q=C[F],X=z-q;$[u+z*p]=y[q]+X*X}}class nt{constructor(u,p){this.requestManager=u,this.localIdeographFontFamily=p,this.entries={}}setURL(u){this.url=u}getGlyphs(u){return o._(this,void 0,void 0,function*(){const p=[];for(const C in u)for(const A of u[C])p.push(this._getAndCacheGlyphsPromise(C,A));const g=yield Promise.all(p),y={};for(const{stack:C,id:A,glyph:z}of g)y[C]||(y[C]={}),y[C][A]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};return y})}_getAndCacheGlyphsPromise(u,p){return o._(this,void 0,void 0,function*(){let g=this.entries[u];g||(g=this.entries[u]={glyphs:{},requests:{},ranges:{}});let y=g.glyphs[p];if(y!==void 0)return{stack:u,id:p,glyph:y};if(y=this._tinySDF(g,u,p),y)return g.glyphs[p]=y,{stack:u,id:p,glyph:y};const C=Math.floor(p/256);if(256*C>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[C])return{stack:u,id:p,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[C]){const z=nt.loadGlyphRange(u,C,this.url,this.requestManager);g.requests[C]=z}const A=yield g.requests[C];for(const z in A)this._doesCharSupportLocalGlyph(+z)||(g.glyphs[+z]=A[+z]);return g.ranges[C]=!0,{stack:u,id:p,glyph:A[p]||null}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(o.u["CJK Unified Ideographs"](u)||o.u["Hangul Syllables"](u)||o.u.Hiragana(u)||o.u.Katakana(u))}_tinySDF(u,p,g){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(g))return;let C=u.tinySDF;if(!C){let z="400";/bold/i.test(p)?z="900":/medium/i.test(p)?z="500":/light/i.test(p)&&(z="200"),C=u.tinySDF=new nt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:z})}const A=C.draw(String.fromCharCode(g));return{id:g,bitmap:new o.o({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}nt.loadGlyphRange=function($,u,p,g){return o._(this,void 0,void 0,function*(){const y=256*u,C=y+255,A=g.transformRequest(p.replace("{fontstack}",$).replace("{range}",`${y}-${C}`),"Glyphs"),z=yield o.l(A,new AbortController);if(!z||!z.data)throw new Error(`Could not load glyph range. range: ${u}, ${y}-${C}`);const F={};for(const q of o.n(z.data))F[q.id]=q;return F})},nt.TinySDF=class{constructor({fontSize:$=24,buffer:u=3,radius:p=8,cutoff:g=.25,fontFamily:y="sans-serif",fontWeight:C="normal",fontStyle:A="normal"}={}){this.buffer=u,this.cutoff=g,this.radius=p;const z=this.size=$+4*u,F=this._createCanvas(z),q=this.ctx=F.getContext("2d",{willReadFrequently:!0});q.font=`${A} ${C} ${$}px ${y}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas($){const u=document.createElement("canvas");return u.width=u.height=$,u}draw($){const{width:u,actualBoundingBoxAscent:p,actualBoundingBoxDescent:g,actualBoundingBoxLeft:y,actualBoundingBoxRight:C}=this.ctx.measureText($),A=Math.ceil(p),z=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(C-y))),F=Math.min(this.size-this.buffer,A+Math.ceil(g)),q=z+2*this.buffer,X=F+2*this.buffer,Y=Math.max(q*X,0),de=new Uint8ClampedArray(Y),Ce={data:de,width:q,height:X,glyphWidth:z,glyphHeight:F,glyphTop:A,glyphLeft:0,glyphAdvance:u};if(z===0||F===0)return Ce;const{ctx:Te,buffer:Ae,gridInner:xe,gridOuter:Oe}=this;Te.clearRect(Ae,Ae,z,F),Te.fillText($,Ae,Ae+A);const Ye=Te.getImageData(Ae,Ae,z,F);Oe.fill(ke,0,Y),xe.fill(0,0,Y);for(let De=0;De<F;De++)for(let He=0;He<z;He++){const Qe=Ye.data[4*(De*z+He)+3]/255;if(Qe===0)continue;const et=(De+Ae)*q+He+Ae;if(Qe===1)Oe[et]=0,xe[et]=ke;else{const at=.5-Qe;Oe[et]=at>0?at*at:0,xe[et]=at<0?at*at:0}}Ue(Oe,0,0,q,X,q,this.f,this.v,this.z),Ue(xe,Ae,Ae,z,F,q,this.f,this.v,this.z);for(let De=0;De<Y;De++){const He=Math.sqrt(Oe[De])-Math.sqrt(xe[De]);de[De]=Math.round(255-255*(He/this.radius+this.cutoff))}return Ce}};class Xe{constructor(){this.specification=o.v.light.position}possiblyEvaluate(u,p){return o.y(u.expression.evaluate(p))}interpolate(u,p,g){return{x:o.z.number(u.x,p.x,g),y:o.z.number(u.y,p.y,g),z:o.z.number(u.z,p.z,g)}}}let ct;class mt extends o.E{constructor(u){super(),ct=ct||new o.q({anchor:new o.D(o.v.light.anchor),position:new Xe,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(ct),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,p={}){if(!this._validate(o.r,u,p))for(const g in u){const y=u[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,g){return(!g||g.validate!==!1)&&o.t(this,u.call(o.x,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}class Dt{constructor(u,p){this.width=u,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,p){const g=u.join(",")+String(p);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(u,p)),this.dashEntry[g]}getDashRanges(u,p,g){const y=[];let C=u.length%2==1?-u[u.length-1]*g:0,A=u[0]*g,z=!0;y.push({left:C,right:A,isDash:z,zeroLength:u[0]===0});let F=u[0];for(let q=1;q<u.length;q++){z=!z;const X=u[q];C=F*g,F+=X,A=F*g,y.push({left:C,right:A,isDash:z,zeroLength:X===0})}return y}addRoundDash(u,p,g){const y=p/2;for(let C=-g;C<=g;C++){const A=this.width*(this.nextRow+g+C);let z=0,F=u[z];for(let q=0;q<this.width;q++){q/F.right>1&&(F=u[++z]);const X=Math.abs(q-F.left),Y=Math.abs(q-F.right),de=Math.min(X,Y);let Ce;const Te=C/g*(y+1);if(F.isDash){const Ae=y-Math.abs(Te);Ce=Math.sqrt(de*de+Ae*Ae)}else Ce=y-Math.sqrt(de*de+Te*Te);this.data[A+q]=Math.max(0,Math.min(255,Ce+128))}}}addRegularDash(u){for(let z=u.length-1;z>=0;--z){const F=u[z],q=u[z+1];F.zeroLength?u.splice(z,1):q&&q.isDash===F.isDash&&(q.left=F.left,u.splice(z,1))}const p=u[0],g=u[u.length-1];p.isDash===g.isDash&&(p.left=g.left-this.width,g.right=p.right+this.width);const y=this.width*this.nextRow;let C=0,A=u[C];for(let z=0;z<this.width;z++){z/A.right>1&&(A=u[++C]);const F=Math.abs(z-A.left),q=Math.abs(z-A.right),X=Math.min(F,q);this.data[y+z]=Math.max(0,Math.min(255,(A.isDash?X:-X)+128))}}addDash(u,p){const g=p?7:0,y=2*g+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let C=0;for(let z=0;z<u.length;z++)C+=u[z];if(C!==0){const z=this.width/C,F=this.getDashRanges(u,this.width,z);p?this.addRoundDash(F,z,g):this.addRegularDash(F)}const A={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:C};return this.nextRow+=y,this.dirty=!0,A}bind(u){const p=u.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const zt="maplibre_preloaded_worker_pool";class Yt{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<Yt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const mn=Math.floor(b.hardwareConcurrency/2);let cn,It;function At(){return cn||(cn=new Yt),cn}Yt.workerCount=o.B(globalThis)?Math.max(Math.min(mn,3),1):1;class un{constructor(u,p){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let y=0;y<g.length;y++){const C=new o.C(g[y],p);C.name=`Worker ${y}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,p){const g=[];for(const y of this.actors)g.push(y.sendAsync({type:u,data:p}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,p){for(const g of this.actors)g.registerMessageHandler(u,p)}}function fn(){return It||(It=new un(At(),o.G),It.registerMessageHandler("GR",($,u,p)=>o.m(u,p))),It}function ot($,u){const p=o.F();return o.H(p,p,[1,1,0]),o.J(p,p,[.5*$.width,.5*$.height,1]),o.K(p,p,$.calculatePosMatrix(u.toUnwrapped()))}function qt($,u,p,g,y,C){const A=function(Y,de,Ce){if(Y)for(const Te of Y){const Ae=de[Te];if(Ae&&Ae.source===Ce&&Ae.type==="fill-extrusion")return!0}else for(const Te in de){const Ae=de[Te];if(Ae.source===Ce&&Ae.type==="fill-extrusion")return!0}return!1}(y&&y.layers,u,$.id),z=C.maxPitchScaleFactor(),F=$.tilesIn(g,z,A);F.sort(wt);const q=[];for(const Y of F)q.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(u,p,$._state,Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,y,C,z,ot($.transform,Y.tileID))});const X=function(Y){const de={},Ce={};for(const Te of Y){const Ae=Te.queryResults,xe=Te.wrappedTileID,Oe=Ce[xe]=Ce[xe]||{};for(const Ye in Ae){const De=Ae[Ye],He=Oe[Ye]=Oe[Ye]||{},Qe=de[Ye]=de[Ye]||[];for(const et of De)He[et.featureIndex]||(He[et.featureIndex]=!0,Qe.push(et))}}return de}(q);for(const Y in X)X[Y].forEach(de=>{const Ce=de.feature,Te=$.getFeatureState(Ce.layer["source-layer"],Ce.id);Ce.source=Ce.layer.source,Ce.layer["source-layer"]&&(Ce.sourceLayer=Ce.layer["source-layer"]),Ce.state=Te});return X}function wt($,u){const p=$.tileID,g=u.tileID;return p.overscaledZ-g.overscaledZ||p.canonical.y-g.canonical.y||p.wrap-g.wrap||p.canonical.x-g.canonical.x}function xt($,u,p){return o._(this,void 0,void 0,function*(){let g=$;if($.url?g=(yield o.h(u.transformRequest($.url,"Source"),p)).data:yield b.frameAsync(p),!g)return null;const y=o.L(o.e(g,$),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(y.vectorLayerIds=g.vector_layers.map(C=>C.id)),y})}class tt{constructor(u,p){u&&(p?this.setSouthWest(u).setNorthEast(p):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof o.M?new o.M(u.lng,u.lat):o.M.convert(u),this}setSouthWest(u){return this._sw=u instanceof o.M?new o.M(u.lng,u.lat):o.M.convert(u),this}extend(u){const p=this._sw,g=this._ne;let y,C;if(u instanceof o.M)y=u,C=u;else{if(!(u instanceof tt))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(tt.convert(u)):this.extend(o.M.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(o.M.convert(u)):this;if(y=u._sw,C=u._ne,!y||!C)return this}return p||g?(p.lng=Math.min(y.lng,p.lng),p.lat=Math.min(y.lat,p.lat),g.lng=Math.max(C.lng,g.lng),g.lat=Math.max(C.lat,g.lat)):(this._sw=new o.M(y.lng,y.lat),this._ne=new o.M(C.lng,C.lat)),this}getCenter(){return new o.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.M(this.getWest(),this.getNorth())}getSouthEast(){return new o.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:p,lat:g}=o.M.convert(u);let y=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&y}static convert(u){return u instanceof tt?u:u&&new tt(u)}static fromLngLat(u,p=0){const g=360*p/40075017,y=g/Math.cos(Math.PI/180*u.lat);return new tt(new o.M(u.lng-y,u.lat-g),new o.M(u.lng+y,u.lat+g))}}class yn{constructor(u,p,g){this.bounds=tt.convert(this.validateBounds(u)),this.minzoom=p||0,this.maxzoom=g||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const p=Math.pow(2,u.z),g=Math.floor(o.N(this.bounds.getWest())*p),y=Math.floor(o.O(this.bounds.getNorth())*p),C=Math.ceil(o.N(this.bounds.getEast())*p),A=Math.ceil(o.O(this.bounds.getSouth())*p);return u.x>=g&&u.x<C&&u.y>=y&&u.y<A}}class Ze extends o.E{constructor(u,p,g,y){if(super(),this.id=u,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.L(p,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield xt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u&&(o.e(this,u),u.bounds&&(this.tileBounds=new yn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new o.j(u))}})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(u){return o._(this,void 0,void 0,function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,"Tile"),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise((C,A)=>{u.reloadPromise={resolve:C,reject:A}})}else u.actor=this.dispatcher.getActor(),y="LT";u.abortController=new AbortController;try{const C=yield u.actor.sendAsync({type:y,data:g},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,C)}catch(C){if(delete u.abortController,u.aborted)return;if(C&&C.status!==404)throw C;this._afterTileLoadWorkerResponse(u,null)}})}_afterTileLoadWorkerResponse(u,p){if(p&&p.resourceTiming&&(u.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&u.setExpiryData(p),u.loadVectorData(p,this.map.painter),u.reloadPromise){const g=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(g.resolve).catch(g.reject)}}abortTile(u){return o._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"AT",data:{uid:u.uid,type:this.type,source:this.id}}))})}unloadTile(u){return o._(this,void 0,void 0,function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class hn extends o.E{constructor(u,p,g,y){super(),this.id=u,this.dispatcher=g,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},p),o.e(this,o.L(p,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield xt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(o.e(this,u),u.bounds&&(this.tileBounds=new yn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new o.j(u))}})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}serialize(){return o.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return o._(this,void 0,void 0,function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const g=yield Q.getImage(this.map._requestManager.transformRequest(p,"Tile"),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&u.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const y=this.map.painter.context,C=y.gl,A=g.data;u.texture=this.map.painter.getTileTexture(A.width),u.texture?u.texture.update(A,{useMipmap:!0}):(u.texture=new fe(y,A,C.RGBA,{useMipmap:!0}),u.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),y.extTextureFilterAnisotropic&&C.texParameterf(C.TEXTURE_2D,y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,y.extTextureFilterAnisotropicMax)),u.state="loaded"}}catch(g){if(delete u.abortController,u.aborted)u.state="unloaded";else if(g)throw u.state="errored",g}})}abortTile(u){return o._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)})}unloadTile(u){return o._(this,void 0,void 0,function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)})}hasTransition(){return!1}}class Bn extends hn{constructor(u,p,g,y){super(u,p,g,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(u){return o._(this,void 0,void 0,function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,"Tile");u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const y=yield Q.getImage(g,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(y&&y.data){const C=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&u.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const A=o.b(C)&&o.S()?C:yield this.readImageNow(C),z={type:this.type,uid:u.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const F=yield u.actor.sendAsync({type:"LDT",data:z});u.dem=F,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(y){if(delete u.abortController,u.aborted)u.state="unloaded";else if(y)throw u.state="errored",y}})}readImageNow(u){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.U()){const p=u.width+2,g=u.height+2;try{return new o.R({width:p,height:g},yield o.V(u,-1,-1,p,g))}catch{}}return b.getImageData(u,1)})}_getNeighboringTiles(u){const p=u.canonical,g=Math.pow(2,p.z),y=(p.x-1+g)%g,C=p.x===0?u.wrap-1:u.wrap,A=(p.x+1+g)%g,z=p.x+1===g?u.wrap+1:u.wrap,F={};return F[new o.Q(u.overscaledZ,C,p.z,y,p.y).key]={backfilled:!1},F[new o.Q(u.overscaledZ,z,p.z,A,p.y).key]={backfilled:!1},p.y>0&&(F[new o.Q(u.overscaledZ,C,p.z,y,p.y-1).key]={backfilled:!1},F[new o.Q(u.overscaledZ,u.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},F[new o.Q(u.overscaledZ,z,p.z,A,p.y-1).key]={backfilled:!1}),p.y+1<g&&(F[new o.Q(u.overscaledZ,C,p.z,y,p.y+1).key]={backfilled:!1},F[new o.Q(u.overscaledZ,u.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},F[new o.Q(u.overscaledZ,z,p.z,A,p.y+1).key]={backfilled:!1}),F}unloadTile(u){return o._(this,void 0,void 0,function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"RDT",data:{type:this.type,uid:u.uid,source:this.id}}))})}}class kn extends o.E{constructor(u,p,g,y){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(y),this._data=p.data,this._options=o.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const C=o.W/this.tileSize;this.workerOptions=o.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*C,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*C,extent:o.W,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:o.W,radius:(p.clusterRadius||50)*C,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,p,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:u,limit:p,offset:g}})}_updateWorkerData(u){return o._(this,void 0,void 0,function*(){const p=o.e({type:this.type},this.workerOptions);u?p.dataDiff=u:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:p});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let y=null;g.resourceTiming&&g.resourceTiming[this.id]&&(y=g.resourceTiming[this.id].slice(0));const C={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&o.e(C,{resourceTiming:y}),this.fire(new o.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(g))}})}loaded(){return this._pendingLoads===0}loadTile(u){return o._(this,void 0,void 0,function*(){const p=u.actor?"RT":"LT";u.actor=this.actor;const g={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.abortController=new AbortController;const y=yield this.actor.sendAsync({type:p,data:g},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(y,this.map.painter,p==="RT")})}abortTile(u){return o._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0})}unloadTile(u){return o._(this,void 0,void 0,function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Vn=o.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ir extends o.E{constructor(u,p,g,y){super(),this.id=u,this.dispatcher=g,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=p}load(u){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield Q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,u&&(this.coordinates=u),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new o.j(p))}})}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const p=u.map(o.Y.fromLngLat);this.tileID=function(y){let C=1/0,A=1/0,z=-1/0,F=-1/0;for(const de of y)C=Math.min(C,de.x),A=Math.min(A,de.y),z=Math.max(z,de.x),F=Math.max(F,de.y);const q=Math.max(z-C,F-A),X=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),Y=Math.pow(2,X);return new o.a0(X,Math.floor((C+z)/2*Y),Math.floor((A+F)/2*Y))}(p),this.minzoom=this.maxzoom=this.tileID.z;const g=p.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new o.Z,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,o.W,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,o.W),this._boundsArray.emplaceBack(g[2].x,g[2].y,o.W,o.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Vn.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new fe(u,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let g=!1;for(const y in this.tiles){const C=this.tiles[y];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class _s extends ir{constructor(u,p,g,y){super(u,p,g,y),this.roundZoom=!0,this.type="video",this.options=p}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const p of u.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield o.a2(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new o.j(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const p=this.video.seekable;u<p.start(0)||u>p.end(0)?this.fire(new o.j(new o.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Vn.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new fe(u,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let g=!1;for(const y in this.tiles){const C=this.tiles[y];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Rs extends ir{constructor(u,p,g,y){super(u,p,g,y),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(C=>!Array.isArray(C)||C.length!==2||C.some(A=>typeof A!="number"))||this.fire(new o.j(new o.a1(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.a1(`sources.${u}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new o.j(new o.a1(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a1(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.a1(`sources.${u}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,g=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,Vn.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new fe(p,this.canvas,g.RGBA,{premultiply:!0});let y=!1;for(const C in this.tiles){const A=this.tiles[C];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,y=!0)}y&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const gs={},Kr=$=>{switch($){case"geojson":return kn;case"image":return ir;case"raster":return hn;case"raster-dem":return Bn;case"vector":return Ze;case"video":return _s;case"canvas":return Rs}return gs[$]},Os="RTLPluginLoaded";class Qs extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=fn()}_syncState(u){return this.status=u,this.dispatcher.broadcast("SRPS",{pluginStatus:u,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return o._(this,arguments,void 0,function*(p,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(Os))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ne=null;function Nr(){return Ne||(Ne=new Qs),Ne}class Vr{constructor(u,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=o.a3(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const p=u+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,p,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(y,C){const A={};if(!C)return A;for(const z of y){const F=z.layerIds.map(q=>C.getLayer(q)).filter(Boolean);if(F.length!==0){z.layers=F,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(q=>F.filter(X=>X.id===q)[0]));for(const q of F)A[q.id]=z}}return A}(u.buckets,p.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const C=this.buckets[y];if(C instanceof o.a5){if(this.hasSymbolBuckets=!0,!g)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const C=this.buckets[y];if(C instanceof o.a5&&C.hasRTLText){this.hasRTLText=!0,Nr().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const C=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(y).queryRadius(C))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new o.a4}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const g in this.buckets){const y=this.buckets[g];y.uploadPending()&&y.upload(u)}const p=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new fe(u,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new fe(u,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,p,g,y,C,A,z,F,q,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:C,scale:A,tileSize:this.tileSize,pixelPosMatrix:X,transform:F,params:z,queryPadding:this.queryPadding*q},u,p,g):{}}querySourceFeatures(u,p){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const y=g.loadVTLayers(),C=p&&p.sourceLayer?p.sourceLayer:"",A=y._geojsonTileLayer||y[C];if(!A)return;const z=o.a6(p&&p.filter),{z:F,x:q,y:X}=this.tileID.canonical,Y={z:F,x:q,y:X};for(let de=0;de<A.length;de++){const Ce=A.feature(de);if(z.needGeometry){const xe=o.a7(Ce,!0);if(!z.filter(new o.a8(this.tileID.overscaledZ),xe,this.tileID.canonical))continue}else if(!z.filter(new o.a8(this.tileID.overscaledZ),Ce))continue;const Te=g.getId(Ce,C),Ae=new o.a9(Ce,F,q,X,Te);Ae.tile=Y,u.push(Ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const p=this.expirationTime;if(u.cacheControl){const g=o.aa(u.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const g=Date.now();let y=!1;if(this.expirationTime>g)y=!1;else if(p)if(this.expirationTime<p)y=!0;else{const C=this.expirationTime-p;C?this.expirationTime=g+Math.max(C,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!p.style.hasLayer(y))continue;const C=this.buckets[y],A=C.layers[0].sourceLayer||"_geojsonTileLayer",z=g[A],F=u[A];if(!z||!F||Object.keys(F).length===0)continue;C.update(F,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const q=p&&p.style&&p.style.getLayer(y);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=b.now()+u}setDependencies(u,p){const g={};for(const y of p)g[y]=!0;this.dependencies[u]=g}hasDependency(u,p){for(const g of u){const y=this.dependencies[g];if(y){for(const C of p)if(y[C])return!0}}return!1}}class js{constructor(u,p){this.max=u,this.onRemove=p,this.reset()}reset(){for(const u in this.data)for(const p of this.data[u])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(u,p,g){const y=u.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const C={value:p,timeout:void 0};if(g!==void 0&&(C.timeout=setTimeout(()=>{this.remove(u,C)},g)),this.data[y].push(C),this.order.push(y),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const p=this.data[u].shift();return p.timeout&&clearTimeout(p.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),p.value}getByKey(u){const p=this.data[u];return p?p[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,p){if(!this.has(u))return this;const g=u.wrapped().key,y=p===void 0?0:this.data[g].indexOf(p),C=this.data[g][y];return this.data[g].splice(y,1),C.timeout&&clearTimeout(C.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(C.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(u){const p=[];for(const g in this.data)for(const y of this.data[g])u(y.value)||p.push(y);for(const g of p)this.remove(g.value.tileID,g)}}class pi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,p,g){const y=String(p);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][y]=this.stateChanges[u][y]||{},o.e(this.stateChanges[u][y],g),this.deletedStates[u]===null){this.deletedStates[u]={};for(const C in this.state[u])C!==y&&(this.deletedStates[u][C]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][y]===null){this.deletedStates[u][y]={};for(const C in this.state[u][y])g[C]||(this.deletedStates[u][y][C]=null)}else for(const C in g)this.deletedStates[u]&&this.deletedStates[u][y]&&this.deletedStates[u][y][C]===null&&delete this.deletedStates[u][y][C]}removeFeatureState(u,p,g){if(this.deletedStates[u]===null)return;const y=String(p);if(this.deletedStates[u]=this.deletedStates[u]||{},g&&p!==void 0)this.deletedStates[u][y]!==null&&(this.deletedStates[u][y]=this.deletedStates[u][y]||{},this.deletedStates[u][y][g]=null);else if(p!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][y])for(g in this.deletedStates[u][y]={},this.stateChanges[u][y])this.deletedStates[u][y][g]=null;else this.deletedStates[u][y]=null;else this.deletedStates[u]=null}getState(u,p){const g=String(p),y=o.e({},(this.state[u]||{})[g],(this.stateChanges[u]||{})[g]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const C=this.deletedStates[u][p];if(C===null)return{};for(const A in C)delete y[A]}return y}initializeTileState(u,p){u.setFeatureState(this.state,p)}coalesceChanges(u,p){const g={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const C={};for(const A in this.stateChanges[y])this.state[y][A]||(this.state[y][A]={}),o.e(this.state[y][A],this.stateChanges[y][A]),C[A]=this.state[y][A];g[y]=C}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const C={};if(this.deletedStates[y]===null)for(const A in this.state[y])C[A]={},this.state[y][A]={};else for(const A in this.deletedStates[y]){if(this.deletedStates[y][A]===null)this.state[y][A]={};else for(const z of Object.keys(this.deletedStates[y][A]))delete this.state[y][A][z];C[A]=this.state[y][A]}g[y]=g[y]||{},o.e(g[y],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const y in u)u[y].setFeatureState(g,p)}}class Ot extends o.E{constructor(u,p,g){super(),this.id=u,this.dispatcher=g,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,C,A,z)=>{const F=new(Kr(C.type))(y,C,A,z);if(F.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${F.id}`);return F})(u,p,g,this),this._tiles={},this._cache=new js(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new pi,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const p=this._tiles[u];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,p,g){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,p,g)}catch(y){u.state="errored",y.status!==404?this._source.fire(new o.j(y,{tile:u})):this.update(this.transform,this.terrain)}})}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new o.k("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const g=this._tiles[p];g.upload(u),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(An).map(u=>u.key)}getRenderableIds(u){const p=[];for(const g in this._tiles)this._isIdRenderable(g,u)&&p.push(this._tiles[g]);return u?p.sort((g,y)=>{const C=g.tileID,A=y.tileID,z=new o.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),F=new o.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-A.overscaledZ||F.y-z.y||F.x-z.x}).map(g=>g.tileID.key):p.map(g=>g.tileID).sort(An).map(g=>g.key)}hasRenderableParent(u){const p=this.findLoadedParent(u,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(u,p){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(p||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,p){return o._(this,void 0,void 0,function*(){const g=this._tiles[u];g&&(g.state!=="loading"&&(g.state=p),yield this._loadTile(g,u,p))})}_tileLoaded(u,p,g){u.timeAdded=b.now(),g==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(p,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const p=this.getRenderableIds();for(let y=0;y<p.length;y++){const C=p[y];if(u.neighboringTiles&&u.neighboringTiles[C]){const A=this.getTileByID(C);g(u,A),g(A,u)}}function g(y,C){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let A=C.tileID.canonical.x-y.tileID.canonical.x;const z=C.tileID.canonical.y-y.tileID.canonical.y,F=Math.pow(2,y.tileID.canonical.z),q=C.tileID.key;A===0&&z===0||Math.abs(z)>1||(Math.abs(A)>1&&(Math.abs(A+F)===1?A+=F:Math.abs(A-F)===1&&(A-=F)),C.dem&&y.dem&&(y.dem.backfillBorder(C.dem,A,z),y.neighboringTiles&&y.neighboringTiles[q]&&(y.neighboringTiles[q].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,p,g,y){for(const C in this._tiles){let A=this._tiles[C];if(y[C]||!A.hasData()||A.tileID.overscaledZ<=p||A.tileID.overscaledZ>g)continue;let z=A.tileID;for(;A&&A.tileID.overscaledZ>p+1;){const q=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[q.key],A&&A.hasData()&&(z=q)}let F=z;for(;F.overscaledZ>p;)if(F=F.scaledTo(F.overscaledZ-1),u[F.key]){y[z.key]=z;break}}}findLoadedParent(u,p){if(u.key in this._loadedParentTiles){const g=this._loadedParentTiles[u.key];return g&&g.tileID.overscaledZ>=p?g:null}for(let g=u.overscaledZ-1;g>=p;g--){const y=u.scaledTo(g),C=this._getLoadedTile(y);if(C)return C}}_getLoadedTile(u){const p=this._tiles[u.key];return p&&p.hasData()?p:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const p=Math.ceil(u.width/this._source.tileSize)+1,g=Math.ceil(u.height/this._source.tileSize)+1,y=Math.floor(p*g*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(C)}handleWrapJump(u){const p=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,p){const g={};for(const y in this._tiles){const C=this._tiles[y];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+p),g[C.tileID.key]=C}this._tiles=g;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(u,p){if(!this._sourceLoaded||this._paused)return;let g;this.transform=u,this.terrain=p,this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(X=>new o.Q(X.canonical.z,X.wrap,X.canonical.z,X.canonical.x,X.canonical.y)):(g=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(g=g.filter(X=>this._source.hasTile(X)))):g=[];const y=u.coveringZoomLevel(this._source),C=Math.max(y-Ot.maxOverzooming,this._source.minzoom),A=Math.max(y+Ot.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const X={};for(const Y of g)if(Y.canonical.z>this._source.minzoom){const de=Y.scaledTo(Y.canonical.z-1);X[de.key]=de;const Ce=Y.scaledTo(Math.max(this._source.minzoom,Math.min(Y.canonical.z,5)));X[Ce.key]=Ce}g=g.concat(Object.values(X))}const z=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,z&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const F=this._updateRetainedTiles(g,y);if(wn(this._source.type)){const X={},Y={},de=Object.keys(F),Ce=b.now();for(const Te of de){const Ae=F[Te],xe=this._tiles[Te];if(!xe||xe.fadeEndTime!==0&&xe.fadeEndTime<=Ce)continue;const Oe=this.findLoadedParent(Ae,C);Oe&&(this._addTile(Oe.tileID),X[Oe.tileID.key]=Oe.tileID),Y[Te]=Ae}this._retainLoadedChildren(Y,y,A,F);for(const Te in X)F[Te]||(this._coveredTiles[Te]=!0,F[Te]=X[Te]);if(p){const Te={},Ae={};for(const xe of g)this._tiles[xe.key].hasData()?Te[xe.key]=xe:Ae[xe.key]=xe;for(const xe in Ae){const Oe=Ae[xe].children(this._source.maxzoom);this._tiles[Oe[0].key]&&this._tiles[Oe[1].key]&&this._tiles[Oe[2].key]&&this._tiles[Oe[3].key]&&(Te[Oe[0].key]=F[Oe[0].key]=Oe[0],Te[Oe[1].key]=F[Oe[1].key]=Oe[1],Te[Oe[2].key]=F[Oe[2].key]=Oe[2],Te[Oe[3].key]=F[Oe[3].key]=Oe[3],delete Ae[xe])}for(const xe in Ae){const Oe=this.findLoadedParent(Ae[xe],this._source.minzoom);if(Oe){Te[Oe.tileID.key]=F[Oe.tileID.key]=Oe.tileID;for(const Ye in Te)Te[Ye].isChildOf(Oe.tileID)&&delete Te[Ye]}}for(const xe in this._tiles)Te[xe]||(this._coveredTiles[xe]=!0)}}for(const X in F)this._tiles[X].clearFadeHold();const q=o.ab(this._tiles,F);for(const X of q){const Y=this._tiles[X];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(X)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,p){var g;const y={},C={},A=Math.max(p-Ot.maxOverzooming,this._source.minzoom),z=Math.max(p+Ot.maxUnderzooming,this._source.minzoom),F={};for(const q of u){const X=this._addTile(q);y[q.key]=q,X.hasData()||p<this._source.maxzoom&&(F[q.key]=q)}this._retainLoadedChildren(F,p,z,y);for(const q of u){let X=this._tiles[q.key];if(X.hasData())continue;if(p+1>this._source.maxzoom){const de=q.children(this._source.maxzoom)[0],Ce=this.getTile(de);if(Ce&&Ce.hasData()){y[de.key]=de;continue}}else{const de=q.children(this._source.maxzoom);if(y[de[0].key]&&y[de[1].key]&&y[de[2].key]&&y[de[3].key])continue}let Y=X.wasRequested();for(let de=q.overscaledZ-1;de>=A;--de){const Ce=q.scaledTo(de);if(C[Ce.key])break;if(C[Ce.key]=!0,X=this.getTile(Ce),!X&&Y&&(X=this._addTile(Ce)),X){const Te=X.hasData();if((Te||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||Y)&&(y[Ce.key]=Ce),Y=X.wasRequested(),Te)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const p=[];let g,y=this._tiles[u].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){g=this._loadedParentTiles[y.key];break}p.push(y.key);const C=y.scaledTo(y.overscaledZ-1);if(g=this._getLoadedTile(C),g)break;y=C}for(const C of p)this._loadedParentTiles[C]=g}}_addTile(u){let p=this._tiles[u.key];if(p)return p;p=this._cache.getAndRemove(u),p&&(this._setTileReloadTimer(u.key,p),p.tileID=u,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,p)));const g=p;return p||(p=new Vr(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(p,u.key,p.state)),p.uses++,this._tiles[u.key]=p,g||this._source.fire(new o.k("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(u,p){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const g=p.getExpiryTimeout();g&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},g))}_removeTile(u){const p=this._tiles[u];p&&(p.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(u){const p=u.sourceDataType;u.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&p==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,p,g){const y=[],C=this.transform;if(!C)return y;const A=g?C.getCameraQueryGeometry(u):u,z=u.map(Te=>C.pointCoordinate(Te,this.terrain)),F=A.map(Te=>C.pointCoordinate(Te,this.terrain)),q=this.getIds();let X=1/0,Y=1/0,de=-1/0,Ce=-1/0;for(const Te of F)X=Math.min(X,Te.x),Y=Math.min(Y,Te.y),de=Math.max(de,Te.x),Ce=Math.max(Ce,Te.y);for(let Te=0;Te<q.length;Te++){const Ae=this._tiles[q[Te]];if(Ae.holdingForFade())continue;const xe=Ae.tileID,Oe=Math.pow(2,C.zoom-Ae.tileID.overscaledZ),Ye=p*Ae.queryPadding*o.W/Ae.tileSize/Oe,De=[xe.getTilePoint(new o.Y(X,Y)),xe.getTilePoint(new o.Y(de,Ce))];if(De[0].x-Ye<o.W&&De[0].y-Ye<o.W&&De[1].x+Ye>=0&&De[1].y+Ye>=0){const He=z.map(et=>xe.getTilePoint(et)),Qe=F.map(et=>xe.getTilePoint(et));y.push({tile:Ae,tileID:xe,queryGeometry:He,cameraQueryGeometry:Qe,scale:Oe})}}return y}getVisibleCoordinates(u){const p=this.getRenderableIds(u).map(g=>this._tiles[g].tileID);for(const g of p)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(wn(this._source.type)){const u=b.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=u)return!0}return!1}setFeatureState(u,p,g){this._state.updateState(u=u||"_geojsonTileLayer",p,g)}removeFeatureState(u,p,g){this._state.removeFeatureState(u=u||"_geojsonTileLayer",p,g)}getFeatureState(u,p){return this._state.getState(u=u||"_geojsonTileLayer",p)}setDependencies(u,p,g){const y=this._tiles[u];y&&y.setDependencies(p,g)}reloadTilesForDependencies(u,p){for(const g in this._tiles)this._tiles[g].hasDependency(u,p)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(u,p))}}function An($,u){const p=Math.abs(2*$.wrap)-+($.wrap<0),g=Math.abs(2*u.wrap)-+(u.wrap<0);return $.overscaledZ-u.overscaledZ||g-p||u.canonical.y-$.canonical.y||u.canonical.x-$.canonical.x}function wn($){return $==="raster"||$==="image"||$==="video"}Ot.maxOverzooming=10,Ot.maxUnderzooming=3;class Ur{constructor(u,p){this.reset(u,p)}reset(u,p){this.points=u||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=o.ac(u,0,1);let p=1,g=this._distances[p];const y=u*this.paddedLength+this.padding;for(;g<y&&p<this._distances.length;)g=this._distances[++p];const C=p-1,A=this._distances[C],z=g-A,F=z>0?(y-A)/z:0;return this.points[C].mult(1-F).add(this.points[p].mult(F))}}function Xr($,u){let p=!0;return $==="always"||$!=="never"&&u!=="never"||(p=!1),p}class Cn{constructor(u,p,g){const y=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(u/g),this.yCellCount=Math.ceil(p/g);for(let A=0;A<this.xCellCount*this.yCellCount;A++)y.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=p,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,p,g,y,C){this._forEachCell(p,g,y,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(y),this.bboxes.push(C)}insertCircle(u,p,g,y){this._forEachCell(p-y,g-y,p+y,g+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(p),this.circles.push(g),this.circles.push(y)}_insertBoxCell(u,p,g,y,C,A){this.boxCells[C].push(A)}_insertCircleCell(u,p,g,y,C,A){this.circleCells[C].push(A)}_query(u,p,g,y,C,A,z){if(g<0||u>this.width||y<0||p>this.height)return[];const F=[];if(u<=0&&p<=0&&this.width<=g&&this.height<=y){if(C)return[{key:null,x1:u,y1:p,x2:g,y2:y}];for(let q=0;q<this.boxKeys.length;q++)F.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const X=this.circles[3*q],Y=this.circles[3*q+1],de=this.circles[3*q+2];F.push({key:this.circleKeys[q],x1:X-de,y1:Y-de,x2:X+de,y2:Y+de})}}else this._forEachCell(u,p,g,y,this._queryCell,F,{hitTest:C,overlapMode:A,seenUids:{box:{},circle:{}}},z);return F}query(u,p,g,y){return this._query(u,p,g,y,!1,null)}hitTest(u,p,g,y,C,A){return this._query(u,p,g,y,!0,C,A).length>0}hitTestCircle(u,p,g,y,C){const A=u-g,z=u+g,F=p-g,q=p+g;if(z<0||A>this.width||q<0||F>this.height)return!1;const X=[];return this._forEachCell(A,F,z,q,this._queryCellCircle,X,{hitTest:!0,overlapMode:y,circle:{x:u,y:p,radius:g},seenUids:{box:{},circle:{}}},C),X.length>0}_queryCell(u,p,g,y,C,A,z,F){const{seenUids:q,hitTest:X,overlapMode:Y}=z,de=this.boxCells[C];if(de!==null){const Te=this.bboxes;for(const Ae of de)if(!q.box[Ae]){q.box[Ae]=!0;const xe=4*Ae,Oe=this.boxKeys[Ae];if(u<=Te[xe+2]&&p<=Te[xe+3]&&g>=Te[xe+0]&&y>=Te[xe+1]&&(!F||F(Oe))&&(!X||!Xr(Y,Oe.overlapMode))&&(A.push({key:Oe,x1:Te[xe],y1:Te[xe+1],x2:Te[xe+2],y2:Te[xe+3]}),X))return!0}}const Ce=this.circleCells[C];if(Ce!==null){const Te=this.circles;for(const Ae of Ce)if(!q.circle[Ae]){q.circle[Ae]=!0;const xe=3*Ae,Oe=this.circleKeys[Ae];if(this._circleAndRectCollide(Te[xe],Te[xe+1],Te[xe+2],u,p,g,y)&&(!F||F(Oe))&&(!X||!Xr(Y,Oe.overlapMode))){const Ye=Te[xe],De=Te[xe+1],He=Te[xe+2];if(A.push({key:Oe,x1:Ye-He,y1:De-He,x2:Ye+He,y2:De+He}),X)return!0}}}return!1}_queryCellCircle(u,p,g,y,C,A,z,F){const{circle:q,seenUids:X,overlapMode:Y}=z,de=this.boxCells[C];if(de!==null){const Te=this.bboxes;for(const Ae of de)if(!X.box[Ae]){X.box[Ae]=!0;const xe=4*Ae,Oe=this.boxKeys[Ae];if(this._circleAndRectCollide(q.x,q.y,q.radius,Te[xe+0],Te[xe+1],Te[xe+2],Te[xe+3])&&(!F||F(Oe))&&!Xr(Y,Oe.overlapMode))return A.push(!0),!0}}const Ce=this.circleCells[C];if(Ce!==null){const Te=this.circles;for(const Ae of Ce)if(!X.circle[Ae]){X.circle[Ae]=!0;const xe=3*Ae,Oe=this.circleKeys[Ae];if(this._circlesCollide(Te[xe],Te[xe+1],Te[xe+2],q.x,q.y,q.radius)&&(!F||F(Oe))&&!Xr(Y,Oe.overlapMode))return A.push(!0),!0}}}_forEachCell(u,p,g,y,C,A,z,F){const q=this._convertToXCellCoord(u),X=this._convertToYCellCoord(p),Y=this._convertToXCellCoord(g),de=this._convertToYCellCoord(y);for(let Ce=q;Ce<=Y;Ce++)for(let Te=X;Te<=de;Te++)if(C.call(this,u,p,g,y,this.xCellCount*Te+Ce,A,z,F))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,p,g,y,C,A){const z=y-u,F=C-p,q=g+A;return q*q>z*z+F*F}_circleAndRectCollide(u,p,g,y,C,A,z){const F=(A-y)/2,q=Math.abs(u-(y+F));if(q>F+g)return!1;const X=(z-C)/2,Y=Math.abs(p-(C+X));if(Y>X+g)return!1;if(q<=F||Y<=X)return!0;const de=q-F,Ce=Y-X;return de*de+Ce*Ce<=g*g}}function Fs($,u,p,g,y){const C=o.F();return u?(o.J(C,C,[1/y,1/y,1]),p||o.ad(C,C,g.angle)):o.K(C,g.labelPlaneMatrix,$),C}function qs($,u,p,g,y){if(u){const C=o.ae($);return o.J(C,C,[y,y,1]),p||o.ad(C,C,-g.angle),C}return g.glCoordMatrix}function jr($,u,p){let g;p?(g=[$.x,$.y,p($.x,$.y),1],o.af(g,g,u)):(g=[$.x,$.y,0,1],pn(g,g,u));const y=g[3];return{point:new o.P(g[0]/y,g[1]/y),signedDistanceFromCamera:y}}function Pe($,u){return .5+$/u*.5}function te($,u){const p=$[0]/$[3],g=$[1]/$[3];return p>=-u[0]&&p<=u[0]&&g>=-u[1]&&g<=u[1]}function ie($,u,p,g,y,C,A,z,F,q){const X=g?$.textSizeData:$.iconSizeData,Y=o.ag(X,p.transform.zoom),de=[256/p.width*2+1,256/p.height*2+1],Ce=g?$.text.dynamicLayoutVertexArray:$.icon.dynamicLayoutVertexArray;Ce.clear();const Te=$.lineVertexArray,Ae=g?$.text.placedSymbolArray:$.icon.placedSymbolArray,xe=p.transform.width/p.transform.height;let Oe=!1;for(let Ye=0;Ye<Ae.length;Ye++){const De=Ae.get(Ye);if(De.hidden||De.writingMode===o.ah.vertical&&!Oe){ut(De.numGlyphs,Ce);continue}let He;if(Oe=!1,q?(He=[De.anchorX,De.anchorY,q(De.anchorX,De.anchorY),1],o.af(He,He,u)):(He=[De.anchorX,De.anchorY,0,1],pn(He,He,u)),!te(He,de)){ut(De.numGlyphs,Ce);continue}const Qe=Pe(p.transform.cameraToCenterDistance,He[3]),et=o.ai(X,Y,De),at=A?et/Qe:et*Qe,Et=new o.P(De.anchorX,De.anchorY),bt=jr(Et,y,q).point,Rt={projections:{},offsets:{}},Xt=Fe(De,at,!1,z,u,y,C,$.glyphOffsetArray,Te,Ce,bt,Et,Rt,xe,F,q);Oe=Xt.useVertical,(Xt.notEnoughRoom||Oe||Xt.needsFlipping&&Fe(De,at,!0,z,u,y,C,$.glyphOffsetArray,Te,Ce,bt,Et,Rt,xe,F,q).notEnoughRoom)&&ut(De.numGlyphs,Ce)}g?$.text.dynamicLayoutVertexBuffer.updateData(Ce):$.icon.dynamicLayoutVertexBuffer.updateData(Ce)}function ye($,u,p,g,y,C,A,z,F,q,X,Y,de){const Ce=z.glyphStartIndex+z.numGlyphs,Te=z.lineStartIndex,Ae=z.lineStartIndex+z.lineLength,xe=u.getoffsetX(z.glyphStartIndex),Oe=u.getoffsetX(Ce-1),Ye=yt($*xe,p,g,y,C,A,z.segment,Te,Ae,F,q,X,Y,de);if(!Ye)return null;const De=yt($*Oe,p,g,y,C,A,z.segment,Te,Ae,F,q,X,Y,de);return De?{first:Ye,last:De}:null}function Me($,u,p,g){return $===o.ah.horizontal&&Math.abs(p.y-u.y)>Math.abs(p.x-u.x)*g?{useVertical:!0}:($===o.ah.vertical?u.y<p.y:u.x>p.x)?{needsFlipping:!0}:null}function Fe($,u,p,g,y,C,A,z,F,q,X,Y,de,Ce,Te,Ae){const xe=u/24,Oe=$.lineOffsetX*xe,Ye=$.lineOffsetY*xe;let De;if($.numGlyphs>1){const He=$.glyphStartIndex+$.numGlyphs,Qe=$.lineStartIndex,et=$.lineStartIndex+$.lineLength,at=ye(xe,z,Oe,Ye,p,X,Y,$,F,C,de,Te,Ae);if(!at)return{notEnoughRoom:!0};const Et=jr(at.first.point,A,Ae).point,bt=jr(at.last.point,A,Ae).point;if(g&&!p){const Rt=Me($.writingMode,Et,bt,Ce);if(Rt)return Rt}De=[at.first];for(let Rt=$.glyphStartIndex+1;Rt<He-1;Rt++)De.push(yt(xe*z.getoffsetX(Rt),Oe,Ye,p,X,Y,$.segment,Qe,et,F,C,de,Te,Ae));De.push(at.last)}else{if(g&&!p){const Qe=jr(Y,y,Ae).point,et=$.lineStartIndex+$.segment+1,at=new o.P(F.getx(et),F.gety(et)),Et=jr(at,y,Ae),bt=Et.signedDistanceFromCamera>0?Et.point:Ve(Y,at,Qe,1,y,Ae),Rt=Me($.writingMode,Qe,bt,Ce);if(Rt)return Rt}const He=yt(xe*z.getoffsetX($.glyphStartIndex),Oe,Ye,p,X,Y,$.segment,$.lineStartIndex,$.lineStartIndex+$.lineLength,F,C,de,Te,Ae);if(!He)return{notEnoughRoom:!0};De=[He]}for(const He of De)o.aj(q,He.point,He.angle);return{}}function Ve($,u,p,g,y,C){const A=jr($.add($.sub(u)._unit()),y,C).point,z=p.sub(A);return p.add(z._mult(g/z.mag()))}function We($,u){const{projectionCache:p,lineVertexArray:g,labelPlaneMatrix:y,tileAnchorPoint:C,distanceFromAnchor:A,getElevation:z,previousVertex:F,direction:q,absOffsetX:X}=u;if(p.projections[$])return p.projections[$];const Y=new o.P(g.getx($),g.gety($)),de=jr(Y,y,z);if(de.signedDistanceFromCamera>0)return p.projections[$]=de.point,de.point;const Ce=$-q;return Ve(A===0?C:new o.P(g.getx(Ce),g.gety(Ce)),Y,F,X-A+1,y,z)}function Le($,u,p){return $._unit()._perp()._mult(u*p)}function Je($,u,p,g,y,C,A,z){const{projectionCache:F,direction:q}=z;if(F.offsets[$])return F.offsets[$];const X=p.add(u);if($+q<g||$+q>=y)return F.offsets[$]=X,X;const Y=We($+q,z),de=Le(Y.sub(p),A,q),Ce=p.add(de),Te=Y.add(de);return F.offsets[$]=o.ak(C,X,Ce,Te)||X,F.offsets[$]}function yt($,u,p,g,y,C,A,z,F,q,X,Y,de,Ce){const Te=g?$-u:$+u;let Ae=Te>0?1:-1,xe=0;g&&(Ae*=-1,xe=Math.PI),Ae<0&&(xe+=Math.PI);let Oe,Ye,De=Ae>0?z+A:z+A+1,He=y,Qe=y,et=0,at=0;const Et=Math.abs(Te),bt=[];let Rt;for(;et+at<=Et;){if(De+=Ae,De<z||De>=F)return null;et+=at,Qe=He,Ye=Oe;const Nt={projectionCache:Y,lineVertexArray:q,labelPlaneMatrix:X,tileAnchorPoint:C,distanceFromAnchor:et,getElevation:Ce,previousVertex:Qe,direction:Ae,absOffsetX:Et};if(He=We(De,Nt),p===0)bt.push(Qe),Rt=He.sub(Qe);else{let gn;const Tn=He.sub(Qe);gn=Tn.mag()===0?Le(We(De+Ae,Nt).sub(He),p,Ae):Le(Tn,p,Ae),Ye||(Ye=Qe.add(gn)),Oe=Je(De,gn,He,z,F,Ye,p,Nt),bt.push(Ye),Rt=Oe.sub(Ye)}at=Rt.mag()}const Xt=Rt._mult((Et-et)/at)._add(Ye||Qe),Sn=xe+Math.atan2(He.y-Qe.y,He.x-Qe.x);return bt.push(Xt),{point:Xt,angle:de?Sn:0,path:bt}}const ht=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ut($,u){for(let p=0;p<$;p++){const g=u.length;u.resize(g+4),u.float32.set(ht,3*g)}}function pn($,u,p){const g=u[0],y=u[1];return $[0]=p[0]*g+p[4]*y+p[12],$[1]=p[1]*g+p[5]*y+p[13],$[3]=p[3]*g+p[7]*y+p[15],$}const _n=100;class In{constructor(u,p=new Cn(u.width+200,u.height+200,25),g=new Cn(u.width+200,u.height+200,25)){this.transform=u,this.grid=p,this.ignoredGrid=g,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+_n,this.screenBottomBoundary=u.height+_n,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,p,g,y,C,A){const z=this.projectAndGetPerspectiveRatio(y,u.anchorPointX,u.anchorPointY,A),F=g*z.perspectiveRatio,q=u.x1*F+z.point.x,X=u.y1*F+z.point.y,Y=u.x2*F+z.point.x,de=u.y2*F+z.point.y;return!this.isInsideGrid(q,X,Y,de)||p!=="always"&&this.grid.hitTest(q,X,Y,de,p,C)||z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[q,X,Y,de],offscreen:this.isOffscreen(q,X,Y,de)}}placeCollisionCircles(u,p,g,y,C,A,z,F,q,X,Y,de,Ce,Te){const Ae=[],xe=new o.P(p.anchorX,p.anchorY),Oe=jr(xe,A,Te),Ye=Pe(this.transform.cameraToCenterDistance,Oe.signedDistanceFromCamera),De=(X?C/Ye:C*Ye)/o.ao,He=jr(xe,z,Te).point,Qe=ye(De,y,p.lineOffsetX*De,p.lineOffsetY*De,!1,He,xe,p,g,z,{projections:{},offsets:{}},!1,Te);let et=!1,at=!1,Et=!0;if(Qe){const bt=.5*de*Ye+Ce,Rt=new o.P(-100,-100),Xt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Sn=new Ur,Nt=Qe.first,gn=Qe.last;let Tn=[];for(let En=Nt.path.length-1;En>=1;En--)Tn.push(Nt.path[En]);for(let En=1;En<gn.path.length;En++)Tn.push(gn.path[En]);const On=2.5*bt;if(F){const En=Tn.map(Dn=>jr(Dn,F,Te));Tn=En.some(Dn=>Dn.signedDistanceFromCamera<=0)?[]:En.map(Dn=>Dn.point)}let vn=[];if(Tn.length>0){const En=Tn[0].clone(),Dn=Tn[0].clone();for(let _r=1;_r<Tn.length;_r++)En.x=Math.min(En.x,Tn[_r].x),En.y=Math.min(En.y,Tn[_r].y),Dn.x=Math.max(Dn.x,Tn[_r].x),Dn.y=Math.max(Dn.y,Tn[_r].y);vn=En.x>=Rt.x&&Dn.x<=Xt.x&&En.y>=Rt.y&&Dn.y<=Xt.y?[Tn]:Dn.x<Rt.x||En.x>Xt.x||Dn.y<Rt.y||En.y>Xt.y?[]:o.al([Tn],Rt.x,Rt.y,Xt.x,Xt.y)}for(const En of vn){Sn.reset(En,.25*bt);let Dn=0;Dn=Sn.length<=.5*bt?1:Math.ceil(Sn.paddedLength/On)+1;for(let _r=0;_r<Dn;_r++){const er=_r/Math.max(Dn-1,1),Ps=Sn.lerp(er),qr=Ps.x+_n,gr=Ps.y+_n;Ae.push(qr,gr,bt,0);const ys=qr-bt,Gs=gr-bt,ii=qr+bt,zi=gr+bt;if(Et=Et&&this.isOffscreen(ys,Gs,ii,zi),at=at||this.isInsideGrid(ys,Gs,ii,zi),u!=="always"&&this.grid.hitTestCircle(qr,gr,bt,u,Y)&&(et=!0,!q))return{circles:[],offscreen:!1,collisionDetected:et}}}}return{circles:!q&&et||!at||Ye<this.perspectiveRatioCutoff?[]:Ae,offscreen:Et,collisionDetected:et}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let g=1/0,y=1/0,C=-1/0,A=-1/0;for(const X of u){const Y=new o.P(X.x+_n,X.y+_n);g=Math.min(g,Y.x),y=Math.min(y,Y.y),C=Math.max(C,Y.x),A=Math.max(A,Y.y),p.push(Y)}const z=this.grid.query(g,y,C,A).concat(this.ignoredGrid.query(g,y,C,A)),F={},q={};for(const X of z){const Y=X.key;if(F[Y.bucketInstanceId]===void 0&&(F[Y.bucketInstanceId]={}),F[Y.bucketInstanceId][Y.featureIndex])continue;const de=[new o.P(X.x1,X.y1),new o.P(X.x2,X.y1),new o.P(X.x2,X.y2),new o.P(X.x1,X.y2)];o.am(p,de)&&(F[Y.bucketInstanceId][Y.featureIndex]=!0,q[Y.bucketInstanceId]===void 0&&(q[Y.bucketInstanceId]=[]),q[Y.bucketInstanceId].push(Y.featureIndex))}return q}insertCollisionBox(u,p,g,y,C,A){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:C,collisionGroupID:A,overlapMode:p},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,p,g,y,C,A){const z=g?this.ignoredGrid:this.grid,F={bucketInstanceId:y,featureIndex:C,collisionGroupID:A,overlapMode:p};for(let q=0;q<u.length;q+=4)z.insertCircle(F,u[q],u[q+1],u[q+2])}projectAndGetPerspectiveRatio(u,p,g,y){let C;return y?(C=[p,g,y(p,g),1],o.af(C,C,u)):(C=[p,g,0,1],pn(C,C,u)),{point:new o.P((C[0]/C[3]+1)/2*this.transform.width+_n,(-C[1]/C[3]+1)/2*this.transform.height+_n),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}}isOffscreen(u,p,g,y){return g<_n||u>=this.screenRightBoundary||y<_n||p>this.screenBottomBoundary}isInsideGrid(u,p,g,y){return g>=0&&u<this.gridRightBoundary&&y>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const u=o.an([]);return o.H(u,u,[-100,-100,0]),u}}function xn($,u,p){return u*(o.W/($.tileSize*Math.pow(2,p-$.tileID.overscaledZ)))}class Fn{constructor(u,p,g,y){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?p:-p))):y&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Wn{constructor(u,p,g,y,C){this.text=new Fn(u?u.text:null,p,g,C),this.icon=new Fn(u?u.icon:null,p,y,C)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class nr{constructor(u,p,g){this.text=u,this.icon=p,this.skipFade=g}}class wr{constructor(){this.invProjMatrix=o.F(),this.viewportMatrix=o.F(),this.circles=[]}}class Mn{constructor(u,p,g,y,C){this.bucketInstanceId=u,this.featureIndex=p,this.sourceLayerIndex=g,this.bucketIndex=y,this.tileID=C}}class or{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const p=++this.maxGroupID;this.collisionGroups[u]={ID:p,predicate:g=>g.collisionGroupID===p}}return this.collisionGroups[u]}}function Ar($,u,p,g,y){const{horizontalAlign:C,verticalAlign:A}=o.at($);return new o.P(-(C-.5)*u+g[0]*y,-(A-.5)*p+g[1]*y)}function Qr($,u,p,g,y,C){const{x1:A,x2:z,y1:F,y2:q,anchorPointX:X,anchorPointY:Y}=$,de=new o.P(u,p);return g&&de._rotate(y?C:-C),{x1:A+de.x,y1:F+de.y,x2:z+de.x,y2:q+de.y,anchorPointX:X,anchorPointY:Y}}class Bs{constructor(u,p,g,y,C){this.transform=u.clone(),this.terrain=p,this.collisionIndex=new In(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new or(y),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,p,g,y){const C=g.getBucket(p),A=g.latestFeatureIndex;if(!C||!A||p.id!==C.layerIds[0])return;const z=g.collisionBoxArray,F=C.layers[0].layout,q=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),X=g.tileSize/o.W,Y=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),de=F.get("text-pitch-alignment")==="map",Ce=F.get("text-rotation-alignment")==="map",Te=xn(g,1,this.transform.zoom),Ae=Fs(Y,de,Ce,this.transform,Te);let xe=null;if(de){const Ye=qs(Y,de,Ce,this.transform,Te);xe=o.K([],this.transform.labelPlaneMatrix,Ye)}this.retainedQueryData[C.bucketInstanceId]=new Mn(C.bucketInstanceId,A,C.sourceLayerIndex,C.index,g.tileID);const Oe={bucket:C,layout:F,posMatrix:Y,textLabelPlaneMatrix:Ae,labelToScreenMatrix:xe,scale:q,textPixelRatio:X,holdingForFade:g.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:o.ag(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(y)for(const Ye of C.sortKeyRanges){const{sortKey:De,symbolInstanceStart:He,symbolInstanceEnd:Qe}=Ye;u.push({sortKey:De,symbolInstanceStart:He,symbolInstanceEnd:Qe,parameters:Oe})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Oe})}attemptAnchorPlacement(u,p,g,y,C,A,z,F,q,X,Y,de,Ce,Te,Ae,xe){const Oe=o.ap[u.textAnchor],Ye=[u.textOffset0,u.textOffset1],De=Ar(Oe,g,y,Ye,C),He=this.collisionIndex.placeCollisionBox(Qr(p,De.x,De.y,A,z,this.transform.angle),Y,F,q,X.predicate,xe);if((!Ae||this.collisionIndex.placeCollisionBox(Qr(Ae,De.x,De.y,A,z,this.transform.angle),Y,F,q,X.predicate,xe).box.length!==0)&&He.box.length>0){let Qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[de.crossTileID]&&this.prevPlacement.placements[de.crossTileID]&&this.prevPlacement.placements[de.crossTileID].text&&(Qe=this.prevPlacement.variableOffsets[de.crossTileID].anchor),de.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[de.crossTileID]={textOffset:Ye,width:g,height:y,anchor:Oe,textBoxScale:C,prevAnchor:Qe},this.markUsedJustification(Ce,Oe,de,Te),Ce.allowVerticalPlacement&&(this.markUsedOrientation(Ce,Te,de),this.placedOrientations[de.crossTileID]=Te),{shift:De,placedGlyphBoxes:He}}}placeLayerBucketPart(u,p,g){const{bucket:y,layout:C,posMatrix:A,textLabelPlaneMatrix:z,labelToScreenMatrix:F,textPixelRatio:q,holdingForFade:X,collisionBoxArray:Y,partiallyEvaluatedTextSize:de,collisionGroup:Ce}=u.parameters,Te=C.get("text-optional"),Ae=C.get("icon-optional"),xe=o.aq(C,"text-overlap","text-allow-overlap"),Oe=xe==="always",Ye=o.aq(C,"icon-overlap","icon-allow-overlap"),De=Ye==="always",He=C.get("text-rotation-alignment")==="map",Qe=C.get("text-pitch-alignment")==="map",et=C.get("icon-text-fit")!=="none",at=C.get("symbol-z-order")==="viewport-y",Et=Oe&&(De||!y.hasIconData()||Ae),bt=De&&(Oe||!y.hasTextData()||Te);!y.collisionArrays&&Y&&y.deserializeCollisionBoxes(Y);const Rt=this.retainedQueryData[y.bucketInstanceId].tileID,Xt=this.terrain?(Nt,gn)=>this.terrain.getElevation(Rt,Nt,gn):null,Sn=(Nt,gn)=>{var Tn,On;if(p[Nt.crossTileID])return;if(X)return void(this.placements[Nt.crossTileID]=new nr(!1,!1,!1));let vn=!1,En=!1,Dn=!0,_r=null,er={box:null,offscreen:null},Ps={box:null,offscreen:null},qr=null,gr=null,ys=null,Gs=0,ii=0,zi=0;gn.textFeatureIndex?Gs=gn.textFeatureIndex:Nt.useRuntimeCollisionCircles&&(Gs=Nt.featureIndex),gn.verticalTextFeatureIndex&&(ii=gn.verticalTextFeatureIndex);const So=gn.textBox;if(So){const cs=Mr=>{let fr=o.ah.horizontal;if(y.allowVerticalPlacement&&!Mr&&this.prevPlacement){const Us=this.prevPlacement.placedOrientations[Nt.crossTileID];Us&&(this.placedOrientations[Nt.crossTileID]=Us,fr=Us,this.markUsedOrientation(y,fr,Nt))}return fr},ns=(Mr,fr)=>{if(y.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&gn.verticalTextBox){for(const Us of y.writingModes)if(Us===o.ah.vertical?(er=fr(),Ps=er):er=Mr(),er&&er.box&&er.box.length)break}else er=Mr()},us=Nt.textAnchorOffsetStartIndex,pa=Nt.textAnchorOffsetEndIndex;if(pa===us){const Mr=(fr,Us)=>{const Dr=this.collisionIndex.placeCollisionBox(fr,xe,q,A,Ce.predicate,Xt);return Dr&&Dr.box&&Dr.box.length&&(this.markUsedOrientation(y,Us,Nt),this.placedOrientations[Nt.crossTileID]=Us),Dr};ns(()=>Mr(So,o.ah.horizontal),()=>{const fr=gn.verticalTextBox;return y.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&fr?Mr(fr,o.ah.vertical):{box:null,offscreen:null}}),cs(er&&er.box&&er.box.length)}else{let Mr=o.ap[(On=(Tn=this.prevPlacement)===null||Tn===void 0?void 0:Tn.variableOffsets[Nt.crossTileID])===null||On===void 0?void 0:On.anchor];const fr=(Dr,Eh,tf)=>{const Ph=Dr.x2-Dr.x1,To=Dr.y2-Dr.y1,xc=Nt.textBoxScale,Ah=et&&Ye==="never"?Eh:null;let Io={box:[],offscreen:!1},Hr=xe==="never"?1:2,kc="never";Mr&&Hr++;for(let ma=0;ma<Hr;ma++){for(let Eo=us;Eo<pa;Eo++){const Cc=y.textAnchorOffsets.get(Eo);if(Mr&&Cc.textAnchor!==Mr)continue;const Sc=this.attemptAnchorPlacement(Cc,Dr,Ph,To,xc,He,Qe,q,A,Ce,kc,Nt,y,tf,Ah,Xt);if(Sc&&(Io=Sc.placedGlyphBoxes,Io&&Io.box&&Io.box.length))return vn=!0,_r=Sc.shift,Io}Mr?Mr=null:kc=xe}return Io};ns(()=>fr(So,gn.iconBox,o.ah.horizontal),()=>{const Dr=gn.verticalTextBox;return y.allowVerticalPlacement&&!(er&&er.box&&er.box.length)&&Nt.numVerticalGlyphVertices>0&&Dr?fr(Dr,gn.verticalIconBox,o.ah.vertical):{box:null,offscreen:null}}),er&&(vn=er.box,Dn=er.offscreen);const Us=cs(er&&er.box);if(!vn&&this.prevPlacement){const Dr=this.prevPlacement.variableOffsets[Nt.crossTileID];Dr&&(this.variableOffsets[Nt.crossTileID]=Dr,this.markUsedJustification(y,Dr.anchor,Nt,Us))}}}if(qr=er,vn=qr&&qr.box&&qr.box.length>0,Dn=qr&&qr.offscreen,Nt.useRuntimeCollisionCircles){const cs=y.text.placedSymbolArray.get(Nt.centerJustifiedTextSymbolIndex),ns=o.ai(y.textSizeData,de,cs),us=C.get("text-padding");gr=this.collisionIndex.placeCollisionCircles(xe,cs,y.lineVertexArray,y.glyphOffsetArray,ns,A,z,F,g,Qe,Ce.predicate,Nt.collisionCircleDiameter,us,Xt),gr.circles.length&&gr.collisionDetected&&!g&&o.w("Collisions detected, but collision boxes are not shown"),vn=Oe||gr.circles.length>0&&!gr.collisionDetected,Dn=Dn&&gr.offscreen}if(gn.iconFeatureIndex&&(zi=gn.iconFeatureIndex),gn.iconBox){const cs=ns=>{const us=et&&_r?Qr(ns,_r.x,_r.y,He,Qe,this.transform.angle):ns;return this.collisionIndex.placeCollisionBox(us,Ye,q,A,Ce.predicate,Xt)};Ps&&Ps.box&&Ps.box.length&&gn.verticalIconBox?(ys=cs(gn.verticalIconBox),En=ys.box.length>0):(ys=cs(gn.iconBox),En=ys.box.length>0),Dn=Dn&&ys.offscreen}const no=Te||Nt.numHorizontalGlyphVertices===0&&Nt.numVerticalGlyphVertices===0,ro=Ae||Nt.numIconVertices===0;if(no||ro?ro?no||(En=En&&vn):vn=En&&vn:En=vn=En&&vn,vn&&qr&&qr.box&&this.collisionIndex.insertCollisionBox(qr.box,xe,C.get("text-ignore-placement"),y.bucketInstanceId,Ps&&Ps.box&&ii?ii:Gs,Ce.ID),En&&ys&&this.collisionIndex.insertCollisionBox(ys.box,Ye,C.get("icon-ignore-placement"),y.bucketInstanceId,zi,Ce.ID),gr&&(vn&&this.collisionIndex.insertCollisionCircles(gr.circles,xe,C.get("text-ignore-placement"),y.bucketInstanceId,Gs,Ce.ID),g)){const cs=y.bucketInstanceId;let ns=this.collisionCircleArrays[cs];ns===void 0&&(ns=this.collisionCircleArrays[cs]=new wr);for(let us=0;us<gr.circles.length;us+=4)ns.circles.push(gr.circles[us+0]),ns.circles.push(gr.circles[us+1]),ns.circles.push(gr.circles[us+2]),ns.circles.push(gr.collisionDetected?1:0)}if(Nt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Nt.crossTileID]=new nr(vn||Et,En||bt,Dn||y.justReloaded),p[Nt.crossTileID]=!0};if(at){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Nt=y.getSortedSymbolIndexes(this.transform.angle);for(let gn=Nt.length-1;gn>=0;--gn){const Tn=Nt[gn];Sn(y.symbolInstances.get(Tn),y.collisionArrays[Tn])}}else for(let Nt=u.symbolInstanceStart;Nt<u.symbolInstanceEnd;Nt++)Sn(y.symbolInstances.get(Nt),y.collisionArrays[Nt]);if(g&&y.bucketInstanceId in this.collisionCircleArrays){const Nt=this.collisionCircleArrays[y.bucketInstanceId];o.ar(Nt.invProjMatrix,A),Nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(u,p,g,y){let C;C=y===o.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.as(p)];const A=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const z of A)z>=0&&(u.text.placedSymbolArray.get(z).crossTileID=C>=0&&z!==C?0:g.crossTileID)}markUsedOrientation(u,p,g){const y=p===o.ah.horizontal||p===o.ah.horizontalOnly?p:0,C=p===o.ah.vertical?p:0,A=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const z of A)u.text.placedSymbolArray.get(z).placedOrientation=y;g.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let g=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const y=p?p.symbolFadeChange(u):1,C=p?p.opacities:{},A=p?p.variableOffsets:{},z=p?p.placedOrientations:{};for(const F in this.placements){const q=this.placements[F],X=C[F];X?(this.opacities[F]=new Wn(X,y,q.text,q.icon),g=g||q.text!==X.text.placed||q.icon!==X.icon.placed):(this.opacities[F]=new Wn(null,y,q.text,q.icon,q.skipFade),g=g||q.text||q.icon)}for(const F in C){const q=C[F];if(!this.opacities[F]){const X=new Wn(q,y,!1,!1);X.isHidden()||(this.opacities[F]=X,g=g||q.text.placed||q.icon.placed)}}for(const F in A)this.variableOffsets[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.variableOffsets[F]=A[F]);for(const F in z)this.placedOrientations[F]||!this.opacities[F]||this.opacities[F].isHidden()||(this.placedOrientations[F]=z[F]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:u)}updateLayerOpacities(u,p){const g={};for(const y of p){const C=y.getBucket(u);C&&y.latestFeatureIndex&&u.id===C.layerIds[0]&&this.updateBucketOpacities(C,g,y.collisionBoxArray)}}updateBucketOpacities(u,p,g){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const y=u.layers[0],C=y.layout,A=new Wn(null,0,!1,!1,!0),z=C.get("text-allow-overlap"),F=C.get("icon-allow-overlap"),q=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),X=C.get("text-rotation-alignment")==="map",Y=C.get("text-pitch-alignment")==="map",de=C.get("icon-text-fit")!=="none",Ce=new Wn(null,0,z&&(F||!u.hasIconData()||C.get("icon-optional")),F&&(z||!u.hasTextData()||C.get("text-optional")),!0);!u.collisionArrays&&g&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(g);const Te=(Ae,xe,Oe)=>{for(let Ye=0;Ye<xe/4;Ye++)Ae.opacityVertexArray.emplaceBack(Oe);Ae.hasVisibleVertices=Ae.hasVisibleVertices||Oe!==es};for(let Ae=0;Ae<u.symbolInstances.length;Ae++){const xe=u.symbolInstances.get(Ae),{numHorizontalGlyphVertices:Oe,numVerticalGlyphVertices:Ye,crossTileID:De}=xe;let He=this.opacities[De];p[De]?He=A:He||(He=Ce,this.opacities[De]=He),p[De]=!0;const Qe=xe.numIconVertices>0,et=this.placedOrientations[xe.crossTileID],at=et===o.ah.vertical,Et=et===o.ah.horizontal||et===o.ah.horizontalOnly;if(Oe>0||Ye>0){const bt=vu(He.text);Te(u.text,Oe,at?es:bt),Te(u.text,Ye,Et?es:bt);const Rt=He.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach(Nt=>{Nt>=0&&(u.text.placedSymbolArray.get(Nt).hidden=Rt||at?1:0)}),xe.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=Rt||Et?1:0);const Xt=this.variableOffsets[xe.crossTileID];Xt&&this.markUsedJustification(u,Xt.anchor,xe,et);const Sn=this.placedOrientations[xe.crossTileID];Sn&&(this.markUsedJustification(u,"left",xe,Sn),this.markUsedOrientation(u,Sn,xe))}if(Qe){const bt=vu(He.icon),Rt=!(de&&xe.verticalPlacedIconSymbolIndex&&at);xe.placedIconSymbolIndex>=0&&(Te(u.icon,xe.numIconVertices,Rt?bt:es),u.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=He.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(Te(u.icon,xe.numVerticalIconVertices,Rt?es:bt),u.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=He.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const bt=u.collisionArrays[Ae];if(bt){let Rt=new o.P(0,0);if(bt.textBox||bt.verticalTextBox){let Sn=!0;if(q){const Nt=this.variableOffsets[De];Nt?(Rt=Ar(Nt.anchor,Nt.width,Nt.height,Nt.textOffset,Nt.textBoxScale),X&&Rt._rotate(Y?this.transform.angle:-this.transform.angle)):Sn=!1}bt.textBox&&dr(u.textCollisionBox.collisionVertexArray,He.text.placed,!Sn||at,Rt.x,Rt.y),bt.verticalTextBox&&dr(u.textCollisionBox.collisionVertexArray,He.text.placed,!Sn||Et,Rt.x,Rt.y)}const Xt=!!(!Et&&bt.verticalIconBox);bt.iconBox&&dr(u.iconCollisionBox.collisionVertexArray,He.icon.placed,Xt,de?Rt.x:0,de?Rt.y:0),bt.verticalIconBox&&dr(u.iconCollisionBox.collisionVertexArray,He.icon.placed,!Xt,de?Rt.x:0,de?Rt.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const Ae=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Ae.invProjMatrix,u.placementViewportMatrix=Ae.viewportMatrix,u.collisionCircleArray=Ae.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,p){const g=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*g>u}setStale(){this.stale=!0}}function dr($,u,p,g,y){$.emplaceBack(u?1:0,p?1:0,g||0,y||0),$.emplaceBack(u?1:0,p?1:0,g||0,y||0),$.emplaceBack(u?1:0,p?1:0,g||0,y||0),$.emplaceBack(u?1:0,p?1:0,g||0,y||0)}const po=Math.pow(2,25),lh=Math.pow(2,24),Zn=Math.pow(2,17),Al=Math.pow(2,16),Ml=Math.pow(2,9),Cs=Math.pow(2,8),Ss=Math.pow(2,1);function vu($){if($.opacity===0&&!$.placed)return 0;if($.opacity===1&&$.placed)return 4294967295;const u=$.placed?1:0,p=Math.floor(127*$.opacity);return p*po+u*lh+p*Zn+u*Al+p*Ml+u*Cs+p*Ss+u}const es=0;class Ns{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,p,g,y,C){const A=this._bucketParts;for(;this._currentTileIndex<u.length;)if(p.getBucketParts(A,y,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((z,F)=>z.sortKey-F.sortKey));this._currentPartIndex<A.length;)if(p.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,C())return!0;return!1}}class yu{constructor(u,p,g,y,C,A,z,F){this.placement=new Bs(u,p,A,z,F),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(u,p,g){const y=b.now(),C=()=>!this._forceFullPlacement&&b.now()-y>2;for(;this._currentPlacementIndex>=0;){const A=p[u[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=z)&&(!A.maxzoom||A.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new Ns(A)),this._inProgressLayer.continuePlacement(g[A.source],this.placement,this._showCollisionBoxes,A,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const mi=512/o.W/2;class xr{constructor(u,p,g){this.tileID=u,this.bucketInstanceId=g,this._symbolsByKey={};const y=new Map;for(let C=0;C<p.length;C++){const A=p.get(C),z=A.key,F=y.get(z);F?F.push(A):y.set(z,[A])}for(const[C,A]of y){const z={positions:A.map(F=>({x:Math.floor(F.anchorX*mi),y:Math.floor(F.anchorY*mi)})),crossTileIDs:A.map(F=>F.crossTileID)};if(z.positions.length>128){const F=new o.au(z.positions.length,16,Uint16Array);for(const{x:q,y:X}of z.positions)F.add(q,X);F.finish(),delete z.positions,z.index=F}this._symbolsByKey[C]=z}}getScaledCoordinates(u,p){const{x:g,y,z:C}=this.tileID.canonical,{x:A,y:z,z:F}=p.canonical,q=mi/Math.pow(2,F-C),X=(z*o.W+u.anchorY)*q,Y=y*o.W*mi;return{x:Math.floor((A*o.W+u.anchorX)*q-g*o.W*mi),y:Math.floor(X-Y)}}findMatches(u,p,g){const y=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let C=0;C<u.length;C++){const A=u.get(C);if(A.crossTileID)continue;const z=this._symbolsByKey[A.key];if(!z)continue;const F=this.getScaledCoordinates(A,p);if(z.index){const q=z.index.range(F.x-y,F.y-y,F.x+y,F.y+y).sort();for(const X of q){const Y=z.crossTileIDs[X];if(!g[Y]){g[Y]=!0,A.crossTileID=Y;break}}}else if(z.positions)for(let q=0;q<z.positions.length;q++){const X=z.positions[q],Y=z.crossTileIDs[q];if(Math.abs(X.x-F.x)<=y&&Math.abs(X.y-F.y)<=y&&!g[Y]){g[Y]=!0,A.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:u})=>u)}}class Go{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Hi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const p=Math.round((u-this.lng)/360);if(p!==0)for(const g in this.indexes){const y=this.indexes[g],C={};for(const A in y){const z=y[A];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+p),C[z.tileID.key]=z}this.indexes[g]=C}this.lng=u}addBucket(u,p,g){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let C=0;C<p.symbolInstances.length;C++)p.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const y=this.usedCrossTileIDs[u.overscaledZ];for(const C in this.indexes){const A=this.indexes[C];if(Number(C)>u.overscaledZ)for(const z in A){const F=A[z];F.tileID.isChildOf(u)&&F.findMatches(p.symbolInstances,u,y)}else{const z=A[u.scaledTo(Number(C)).key];z&&z.findMatches(p.symbolInstances,u,y)}}for(let C=0;C<p.symbolInstances.length;C++){const A=p.symbolInstances.get(C);A.crossTileID||(A.crossTileID=g.generate(),y[A.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new xr(u,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(u,p){for(const g of p.getCrossTileIDsLists())for(const y of g)delete this.usedCrossTileIDs[u][y]}removeStaleBuckets(u){let p=!1;for(const g in this.indexes){const y=this.indexes[g];for(const C in y)u[y[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,y[C]),delete y[C],p=!0)}return p}}class pr{constructor(){this.layerIndexes={},this.crossTileIDs=new Go,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,p,g){let y=this.layerIndexes[u.id];y===void 0&&(y=this.layerIndexes[u.id]=new Hi);let C=!1;const A={};y.handleWrapJump(g);for(const z of p){const F=z.getBucket(u);F&&u.id===F.layerIds[0]&&(F.bucketInstanceId||(F.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(z.tileID,F,this.crossTileIDs)&&(C=!0),A[F.bucketInstanceId]=!0)}return y.removeStaleBuckets(A)&&(C=!0),C}pruneUnusedLayers(u){const p={};u.forEach(g=>{p[g]=!0});for(const g in this.layerIndexes)p[g]||delete this.layerIndexes[g]}}const Gi=($,u)=>o.t($,u&&u.filter(p=>p.identifier!=="source.canvas")),Hs=o.av();class Ra extends o.E{constructor(u,p={}){super(),this._rtlPluginLoaded=()=>{for(const g in this.sourceCaches){const y=this.sourceCaches[g].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[g].reload()}},this.map=u,this.dispatcher=new un(At(),u._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,y)=>this.getGlyphs(g,y)),this.dispatcher.registerMessageHandler("GI",(g,y)=>this.getImages(g,y)),this.imageManager=new he,this.imageManager.setEventedParent(this),this.glyphManager=new nt(u._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Dt(256,512),this.crossTileSymbolIndex=new pr,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ax()),Nr().on(Os,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const y=this.sourceCaches[g.sourceId];if(!y)return;const C=y.getSource();if(C&&C.vectorLayerIds)for(const A in this._layers){const z=this._layers[A];z.source===C.id&&this._validateLayer(z)}})}loadURL(u,p={},g){this.fire(new o.k("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const y=this.map._requestManager.transformRequest(u,"Style");this._loadStyleRequest=new AbortController,o.h(y,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,p,g)}).catch(C=>{this._loadStyleRequest=null,C&&this.fire(new o.j(C))})}loadJSON(u,p={},g){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(u,p,g)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Hs,{validate:!1})}_load(u,p,g){var y;const C=p.transformStyle?p.transformStyle(g,u):u;if(!p.validate||!Gi(this,o.x(C))){this._loaded=!0,this.stylesheet=C;for(const A in C.sources)this.addSource(A,C.sources[A],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs),this._createLayers(),this.light=new mt(this.stylesheet.light),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const u=o.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",u),this._order=u.map(p=>p.id),this._layers={},this._serializedLayers=null;for(const p of u){const g=o.az(p);g.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=g}}_loadSprite(u,p=!1,g=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(C,A,z,F){return o._(this,void 0,void 0,function*(){const q=ee(C),X=z>1?"@2x":"",Y={},de={};for(const{id:Ce,url:Te}of q){const Ae=A.transformRequest(A.normalizeSpriteURL(Te,X,".json"),"SpriteJSON");Y[Ce]=o.h(Ae,F);const xe=A.transformRequest(A.normalizeSpriteURL(Te,X,".png"),"SpriteImage");de[Ce]=Q.getImage(xe,F)}return yield Promise.all([...Object.values(Y),...Object.values(de)]),function(Ce,Te){return o._(this,void 0,void 0,function*(){const Ae={};for(const xe in Ce){Ae[xe]={};const Oe=b.getImageCanvasContext((yield Te[xe]).data),Ye=(yield Ce[xe]).data;for(const De in Ye){const{width:He,height:Qe,x:et,y:at,sdf:Et,pixelRatio:bt,stretchX:Rt,stretchY:Xt,content:Sn,textFitWidth:Nt,textFitHeight:gn}=Ye[De];Ae[xe][De]={data:null,pixelRatio:bt,sdf:Et,stretchX:Rt,stretchY:Xt,content:Sn,textFitWidth:Nt,textFitHeight:gn,spriteData:{width:He,height:Qe,x:et,y:at,context:Oe}}}}return Ae})}(Y,de)})}(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(C=>{if(this._spriteRequest=null,C)for(const A in C){this._spritesImagesIds[A]=[];const z=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(F=>!(F in C)):[];for(const F of z)this.imageManager.removeImage(F),this._changedImages[F]=!0;for(const F in C[A]){const q=A==="default"?F:`${A}:${F}`;this._spritesImagesIds[A].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,C[A][F],!1):this.imageManager.addImage(q,C[A][F]),p&&(this._changedImages[q]=!0)}}}).catch(C=>{this._spriteRequest=null,y=C,this.fire(new o.j(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),g&&g(y)})}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(u){const p=this.sourceCaches[u.source];if(!p)return;const g=u.sourceLayer;if(!g)return;const y=p.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.j(new Error(`Source layer "${g}" does not exist on source "${y.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u){const p=this._serializedAllLayers();if(!u||u.length===0)return Object.values(p);const g=[];for(const y of u)p[y]&&g.push(p[y]);return g}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const p=Object.keys(this._layers);for(const g of p){const y=this._layers[g];y.type!=="custom"&&(u[g]=y.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const p=this._changed;if(p){const y=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(y.length||C.length)&&this._updateWorkerLayers(y,C);for(const A in this._updatedSources){const z=this._updatedSources[A];if(z==="reload")this._reloadSource(A);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const g={};for(const y in this.sourceCaches){const C=this.sourceCaches[y];g[y]=C.used,C.used=!1}for(const y of this._order){const C=this._layers[y];C.recalculate(u,this._availableImages),!C.isHidden(u.zoom)&&C.source&&(this.sourceCaches[C.source].used=!0)}for(const y in g){const C=this.sourceCaches[y];!!g[y]!=!!C.used&&C.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(u),this.z=u.zoom,p&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(u),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,p={}){var g;this._checkLoaded();const y=this.serialize();if(u=p.transformStyle?p.transformStyle(y,u):u,((g=p.validate)===null||g===void 0||g)&&Gi(this,o.x(u)))return!1;(u=o.aA(u)).layers=o.ay(u.layers);const C=o.aB(y,u),A=this._getOperationsToPerform(C);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const z of A.operations)z();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const p=[],g=[];for(const y of u)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":p.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":p.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,y.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setTransition":p.push(()=>{});break;default:g.push(y.command)}return{operations:p,unimplemented:g}}addImage(u,p){if(this.getImage(u))return this.fire(new o.j(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,p),this._afterImageUpdated(u)}updateImage(u,p){this.imageManager.updateImage(u,p)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new o.j(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,p,g={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.x.source,`sources.${u}`,p,null,g))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const y=this.sourceCaches[u]=new Ot(u,p,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:u})),y.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===u)return this.fire(new o.j(new Error(`Source "${u}" cannot be removed while layer "${g}" is using it.`)));const p=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],p.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,p){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const g=this.sourceCaches[u].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(p),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,p,g={}){this._checkLoaded();const y=u.id;if(this.getLayer(y))return void this.fire(new o.j(new Error(`Layer "${y}" already exists on this map.`)));let C;if(u.type==="custom"){if(Gi(this,o.aC(u)))return;C=o.az(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(y,u.source),u=o.aA(u),u=o.e(u,{source:y})),this._validate(o.x.layer,`layers.${y}`,u,{arrayIndex:-1},g))return;C=o.az(u),this._validateLayer(C),C.setEventedParent(this,{layer:{id:y}})}const A=p?this._order.indexOf(p):this._order.length;if(p&&A===-1)this.fire(new o.j(new Error(`Cannot add layer "${y}" before non-existing layer "${p}".`)));else{if(this._order.splice(A,0,y),this._layerOrderChanged=!0,this._layers[y]=C,this._removedLayers[y]&&C.source&&C.type!=="custom"){const z=this._removedLayers[y];delete this._removedLayers[y],z.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map)}}moveLayer(u,p){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new o.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===p)return;const g=this._order.indexOf(u);this._order.splice(g,1);const y=p?this._order.indexOf(p):this._order.length;p&&y===-1?this.fire(new o.j(new Error(`Cannot move layer "${u}" before non-existing layer "${p}".`))):(this._order.splice(y,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const p=this._layers[u];if(!p)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${u}".`)));p.setEventedParent(null);const g=this._order.indexOf(u);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=p,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],p.onRemove&&p.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,p,g){this._checkLoaded();const y=this.getLayer(u);y?y.minzoom===p&&y.maxzoom===g||(p!=null&&(y.minzoom=p),g!=null&&(y.maxzoom=g),this._updateLayer(y)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,p,g={}){this._checkLoaded();const y=this.getLayer(u);if(y){if(!o.aD(y.filter,p))return p==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(o.x.filter,`layers.${y.id}.filter`,p,null,g)||(y.filter=o.aA(p),this._updateLayer(y)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return o.aA(this.getLayer(u).filter)}setLayoutProperty(u,p,g,y={}){this._checkLoaded();const C=this.getLayer(u);C?o.aD(C.getLayoutProperty(p),g)||(C.setLayoutProperty(p,g,y),this._updateLayer(C)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,p){const g=this.getLayer(u);if(g)return g.getLayoutProperty(p);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,p,g,y={}){this._checkLoaded();const C=this.getLayer(u);C?o.aD(C.getPaintProperty(p),g)||(C.setPaintProperty(p,g,y)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[u]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,p){return this.getLayer(u).getPaintProperty(p)}setFeatureState(u,p){this._checkLoaded();const g=u.source,y=u.sourceLayer,C=this.sourceCaches[g];if(C===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));const A=C.getSource().type;A==="geojson"&&y?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||y?(u.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),C.setFeatureState(y,u.id,p)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,p){this._checkLoaded();const g=u.source,y=this.sourceCaches[g];if(y===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));const C=y.getSource().type,A=C==="vector"?u.sourceLayer:void 0;C!=="vector"||A?p&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(A,u.id,p):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const p=u.source,g=u.sourceLayer,y=this.sourceCaches[p];if(y!==void 0)return y.getSource().type!=="vector"||g?(u.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(g,u.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=o.aE(this.sourceCaches,C=>C.serialize()),p=this._serializeByIds(this._order),g=this.map.getTerrain()||void 0,y=this.stylesheet;return o.aF({version:y.version,name:y.name,metadata:y.metadata,light:y.light,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:u,layers:p,terrain:g},C=>C!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const p=A=>this._layers[A].type==="fill-extrusion",g={},y=[];for(let A=this._order.length-1;A>=0;A--){const z=this._order[A];if(p(z)){g[z]=A;for(const F of u){const q=F[z];if(q)for(const X of q)y.push(X)}}}y.sort((A,z)=>z.intersectionZ-A.intersectionZ);const C=[];for(let A=this._order.length-1;A>=0;A--){const z=this._order[A];if(p(z))for(let F=y.length-1;F>=0;F--){const q=y[F].feature;if(g[q.layer.id]<A)break;C.push(q),y.pop()}else for(const F of u){const q=F[z];if(q)for(const X of q)C.push(X.feature)}}return C}queryRenderedFeatures(u,p,g){p&&p.filter&&this._validate(o.x.filter,"queryRenderedFeatures.filter",p.filter,null,p);const y={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const z of p.layers){const F=this._layers[z];if(!F)return this.fire(new o.j(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];y[F.source]=!0}}const C=[];p.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const z in this.sourceCaches)p.layers&&!y[z]||C.push(qt(this.sourceCaches[z],this._layers,A,u,p,g));return this.placement&&C.push(function(z,F,q,X,Y,de,Ce){const Te={},Ae=de.queryRenderedSymbols(X),xe=[];for(const Oe of Object.keys(Ae).map(Number))xe.push(Ce[Oe]);xe.sort(wt);for(const Oe of xe){const Ye=Oe.featureIndex.lookupSymbolFeatures(Ae[Oe.bucketInstanceId],F,Oe.bucketIndex,Oe.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,z);for(const De in Ye){const He=Te[De]=Te[De]||[],Qe=Ye[De];Qe.sort((et,at)=>{const Et=Oe.featureSortOrder;if(Et){const bt=Et.indexOf(et.featureIndex);return Et.indexOf(at.featureIndex)-bt}return at.featureIndex-et.featureIndex});for(const et of Qe)He.push(et)}}for(const Oe in Te)Te[Oe].forEach(Ye=>{const De=Ye.feature,He=q[z[Oe].source].getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=He});return Te}(this._layers,A,this.sourceCaches,u,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(u,p){p&&p.filter&&this._validate(o.x.filter,"querySourceFeatures.filter",p.filter,null,p);const g=this.sourceCaches[u];return g?function(y,C){const A=y.getRenderableIds().map(q=>y.getTileByID(q)),z=[],F={};for(let q=0;q<A.length;q++){const X=A[q],Y=X.tileID.canonical.key;F[Y]||(F[Y]=!0,X.querySourceFeatures(z,C))}return z}(g,p):[]}getLight(){return this.light.getLight()}setLight(u,p={}){this._checkLoaded();const g=this.light.getLight();let y=!1;for(const A in u)if(!o.aD(u[A],g[A])){y=!0;break}if(!y)return;const C={now:b.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,p),this.light.updateTransitions(C)}_validate(u,p,g,y,C={}){return(!C||C.validate!==!1)&&Gi(this,u.call(o.x,o.e({key:p,style:this.serialize(),value:g,styleSpec:o.v},y)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Nr().off(Os,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const g=this.sourceCaches[p];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const p in this.sourceCaches)this.sourceCaches[p].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,p,g,y,C=!1){let A=!1,z=!1;const F={};for(const q of this._order){const X=this._layers[q];if(X.type!=="symbol")continue;if(!F[X.source]){const de=this.sourceCaches[X.source];F[X.source]=de.getRenderableIds(!0).map(Ce=>de.getTileByID(Ce)).sort((Ce,Te)=>Te.tileID.overscaledZ-Ce.tileID.overscaledZ||(Ce.tileID.isLessThan(Te.tileID)?-1:1))}const Y=this.crossTileSymbolIndex.addLayer(X,F[X.source],u.center.lng);A=A||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((C=C||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),u.zoom))&&(this.pauseablePlacement=new yu(u,this.map.terrain,this._order,C,p,g,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,F),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),z=!0),A&&this.pauseablePlacement.placement.setStale()),z||A)for(const q of this._order){const X=this._layers[q];X.type==="symbol"&&this.placement.updateLayerOpacities(X,F[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,p){return o._(this,void 0,void 0,function*(){const g=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[p.source];return y&&y.setDependencies(p.tileID.key,p.type,p.icons),g})}getGlyphs(u,p){return o._(this,void 0,void 0,function*(){const g=yield this.glyphManager.getGlyphs(p.stacks),y=this.sourceCaches[p.source];return y&&y.setDependencies(p.tileID.key,p.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,p={}){this._checkLoaded(),u&&this._validate(o.x.glyphs,"glyphs",u,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,p,g={},y){this._checkLoaded();const C=[{id:u,url:p}],A=[...ee(this.stylesheet.sprite),...C];this._validate(o.x.sprite,"sprite",A,null,g)||(this.stylesheet.sprite=A,this._loadSprite(C,!0,y))}removeSprite(u){this._checkLoaded();const p=ee(this.stylesheet.sprite);if(p.find(g=>g.id===u)){if(this._spritesImagesIds[u])for(const g of this._spritesImagesIds[u])this.imageManager.removeImage(g),this._changedImages[g]=!0;p.splice(p.findIndex(g=>g.id===u),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return ee(this.stylesheet.sprite)}setSprite(u,p={},g){this._checkLoaded(),u&&this._validate(o.x.sprite,"sprite",u,null,p)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,g):(this._unloadSprite(),g&&g(null)))}}var ei=o.X([{name:"a_pos",type:"Int16",components:2}]),Dl="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const mo={prelude:qn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:qn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:qn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:qn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:qn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:qn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:qn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:qn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:qn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:qn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:qn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:qn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:qn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:qn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:qn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:qn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:qn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:qn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:qn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:qn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:qn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:qn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:qn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:qn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Dl),terrainDepth:qn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Dl),terrainCoords:qn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Dl)};function qn($,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=u.match(/attribute ([\w]+) ([\w]+)/g),y=$.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=C?C.concat(y):y,z={};return{fragmentSource:$=$.replace(p,(F,q,X,Y,de)=>(z[de]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_${de}
varying ${X} ${Y} ${de};
#else
uniform ${X} ${Y} u_${de};
#endif
`:`
#ifdef HAS_UNIFORM_u_${de}
    ${X} ${Y} ${de} = u_${de};
#endif
`)),vertexSource:u=u.replace(p,(F,q,X,Y,de)=>{const Ce=Y==="float"?"vec2":"vec4",Te=de.match(/color/)?"color":Ce;return z[de]?q==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
attribute ${X} ${Ce} a_${de};
varying ${X} ${Y} ${de};
#else
uniform ${X} ${Y} u_${de};
#endif
`:Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = a_${de};
#else
    ${X} ${Y} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${de} = unpack_mix_${Te}(a_${de}, u_${de}_t);
#else
    ${X} ${Y} ${de} = u_${de};
#endif
`:q==="define"?`
#ifndef HAS_UNIFORM_u_${de}
uniform lowp float u_${de}_t;
attribute ${X} ${Ce} a_${de};
#else
uniform ${X} ${Y} u_${de};
#endif
`:Te==="vec4"?`
#ifndef HAS_UNIFORM_u_${de}
    ${X} ${Y} ${de} = a_${de};
#else
    ${X} ${Y} ${de} = u_${de};
#endif
`:`
#ifndef HAS_UNIFORM_u_${de}
    ${X} ${Y} ${de} = unpack_mix_${Te}(a_${de}, u_${de}_t);
#else
    ${X} ${Y} ${de} = u_${de};
#endif
`}),staticAttributes:g,staticUniforms:A}}class Oa{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,p,g,y,C,A,z,F,q){this.context=u;let X=this.boundPaintVertexBuffers.length!==y.length;for(let Y=0;!X&&Y<y.length;Y++)this.boundPaintVertexBuffers[Y]!==y[Y]&&(X=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==g||X||this.boundIndexBuffer!==C||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==z||this.boundDynamicVertexBuffer2!==F||this.boundDynamicVertexBuffer3!==q?this.freshBind(p,g,y,C,A,z,F,q):(u.bindVertexArray.set(this.vao),z&&z.bind(),C&&C.dynamicDraw&&C.bind(),F&&F.bind(),q&&q.bind())}freshBind(u,p,g,y,C,A,z,F){const q=u.numAttributes,X=this.context,Y=X.gl;this.vao&&this.destroy(),this.vao=X.createVertexArray(),X.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=y,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=F,p.enableAttributes(Y,u);for(const de of g)de.enableAttributes(Y,u);A&&A.enableAttributes(Y,u),z&&z.enableAttributes(Y,u),F&&F.enableAttributes(Y,u),p.bind(),p.setVertexAttribPointers(Y,u,C);for(const de of g)de.bind(),de.setVertexAttribPointers(Y,u,C);A&&(A.bind(),A.setVertexAttribPointers(Y,u,C)),y&&y.bind(),z&&(z.bind(),z.setVertexAttribPointers(Y,u,C)),F&&(F.bind(),F.setVertexAttribPointers(Y,u,C)),X.currentNumAttributes=q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function _o($){const u=[];for(let p=0;p<$.length;p++){if($[p]===null)continue;const g=$[p].split(" ");u.push(g.pop())}return u}class zl{constructor(u,p,g,y,C,A){const z=u.gl;this.program=z.createProgram();const F=_o(p.staticAttributes),q=g?g.getBinderAttributes():[],X=F.concat(q),Y=mo.prelude.staticUniforms?_o(mo.prelude.staticUniforms):[],de=p.staticUniforms?_o(p.staticUniforms):[],Ce=g?g.getBinderUniforms():[],Te=Y.concat(de).concat(Ce),Ae=[];for(const et of Te)Ae.indexOf(et)<0&&Ae.push(et);const xe=g?g.defines():[];C&&xe.push("#define OVERDRAW_INSPECTOR;"),A&&xe.push("#define TERRAIN3D;");const Oe=xe.concat(mo.prelude.fragmentSource,p.fragmentSource).join(`
`),Ye=xe.concat(mo.prelude.vertexSource,p.vertexSource).join(`
`),De=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(De,Oe),z.compileShader(De),!z.getShaderParameter(De,z.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${z.getShaderInfoLog(De)}`);z.attachShader(this.program,De);const He=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(He,Ye),z.compileShader(He),!z.getShaderParameter(He,z.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${z.getShaderInfoLog(He)}`);z.attachShader(this.program,He),this.attributes={};const Qe={};this.numAttributes=X.length;for(let et=0;et<this.numAttributes;et++)X[et]&&(z.bindAttribLocation(this.program,et,X[et]),this.attributes[X[et]]=et);if(z.linkProgram(this.program),!z.getProgramParameter(this.program,z.LINK_STATUS))throw new Error(`Program failed to link: ${z.getProgramInfoLog(this.program)}`);z.deleteShader(He),z.deleteShader(De);for(let et=0;et<Ae.length;et++){const at=Ae[et];if(at&&!Qe[at]){const Et=z.getUniformLocation(this.program,at);Et&&(Qe[at]=Et)}}this.fixedUniforms=y(u,Qe),this.terrainUniforms=((et,at)=>({u_depth:new o.aG(et,at.u_depth),u_terrain:new o.aG(et,at.u_terrain),u_terrain_dim:new o.aH(et,at.u_terrain_dim),u_terrain_matrix:new o.aI(et,at.u_terrain_matrix),u_terrain_unpack:new o.aJ(et,at.u_terrain_unpack),u_terrain_exaggeration:new o.aH(et,at.u_terrain_exaggeration)}))(u,Qe),this.binderUniforms=g?g.getUniforms(u,Qe):[]}draw(u,p,g,y,C,A,z,F,q,X,Y,de,Ce,Te,Ae,xe,Oe,Ye){const De=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(g),u.setStencilMode(y),u.setColorMode(C),u.setCullFace(A),F){u.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,F.depthTexture),u.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,F.texture);for(const Qe in this.terrainUniforms)this.terrainUniforms[Qe].set(F[Qe])}for(const Qe in this.fixedUniforms)this.fixedUniforms[Qe].set(z[Qe]);Ae&&Ae.setUniforms(u,this.binderUniforms,Ce,{zoom:Te});let He=0;switch(p){case De.LINES:He=2;break;case De.TRIANGLES:He=3;break;case De.LINE_STRIP:He=1}for(const Qe of de.get()){const et=Qe.vaos||(Qe.vaos={});(et[q]||(et[q]=new Oa)).bind(u,this,X,Ae?Ae.getPaintVertexBuffers():[],Y,Qe.vertexOffset,xe,Oe,Ye),De.drawElements(p,Qe.primitiveLength*He,De.UNSIGNED_SHORT,Qe.primitiveOffset*He*2)}}}function Fa($,u,p){const g=1/xn(p,1,u.transform.tileZoom),y=Math.pow(2,p.tileID.overscaledZ),C=p.tileSize*Math.pow(2,u.transform.tileZoom)/y,A=C*(p.tileID.canonical.x+p.tileID.wrap*y),z=C*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[g,$.fromScale,$.toScale],u_fade:$.t,u_pixel_coord_upper:[A>>16,z>>16],u_pixel_coord_lower:[65535&A,65535&z]}}const Zo=($,u,p,g)=>{const y=u.style.light,C=y.properties.get("position"),A=[C.x,C.y,C.z],z=function(){var q=new o.A(9);return o.A!=Float32Array&&(q[1]=0,q[2]=0,q[3]=0,q[5]=0,q[6]=0,q[7]=0),q[0]=1,q[4]=1,q[8]=1,q}();y.properties.get("anchor")==="viewport"&&function(q,X){var Y=Math.sin(X),de=Math.cos(X);q[0]=de,q[1]=Y,q[2]=0,q[3]=-Y,q[4]=de,q[5]=0,q[6]=0,q[7]=0,q[8]=1}(z,-u.transform.angle),function(q,X,Y){var de=X[0],Ce=X[1],Te=X[2];q[0]=de*Y[0]+Ce*Y[3]+Te*Y[6],q[1]=de*Y[1]+Ce*Y[4]+Te*Y[7],q[2]=de*Y[2]+Ce*Y[5]+Te*Y[8]}(A,A,z);const F=y.properties.get("color");return{u_matrix:$,u_lightpos:A,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+p,u_opacity:g}},Ll=($,u,p,g,y,C,A)=>o.e(Zo($,u,p,g),Fa(C,u,A),{u_height_factor:-Math.pow(2,y.overscaledZ)/A.tileSize/8}),Ba=$=>({u_matrix:$}),Wo=($,u,p,g)=>o.e(Ba($),Fa(p,u,g)),Na=($,u)=>({u_matrix:$,u_world:u}),Ko=($,u,p,g,y)=>o.e(Wo($,u,p,g),{u_world:y}),ch=($,u,p,g)=>{const y=$.transform;let C,A;if(g.paint.get("circle-pitch-alignment")==="map"){const z=xn(p,1,y.zoom);C=!0,A=[z,z]}else C=!1,A=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:$.translatePosMatrix(u.posMatrix,p,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:$.pixelRatio,u_extrude_scale:A}},uh=($,u,p)=>{const g=xn(p,1,u.zoom),y=Math.pow(2,u.zoom-p.tileID.overscaledZ),C=p.tileID.overscaleFactor();return{u_matrix:$,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:g,u_extrude_scale:[u.pixelsToGLUnits[0]/(g*y),u.pixelsToGLUnits[1]/(g*y)],u_overscale_factor:C}},Rl=($,u,p=1)=>({u_matrix:$,u_color:u,u_overlay:0,u_overlay_scale:p}),bu=$=>({u_matrix:$}),Zi=($,u,p,g)=>({u_matrix:$,u_extrude_scale:xn(u,1,p),u_intensity:g});function Va($,u){const p=Math.pow(2,u.canonical.z),g=u.canonical.y;return[new o.Y(0,g/p).toLngLat().lat,new o.Y(0,(g+1)/p).toLngLat().lat]}const ls=($,u,p,g)=>{const y=$.transform;return{u_matrix:Bl($,u,p,g),u_ratio:1/xn(u,1,y.zoom),u_device_pixel_ratio:$.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Ts=($,u,p,g,y)=>o.e(ls($,u,p,y),{u_image:0,u_image_height:g}),Ol=($,u,p,g,y)=>{const C=$.transform,A=Fl(u,C);return{u_matrix:Bl($,u,p,y),u_texsize:u.imageAtlasTexture.size,u_ratio:1/xn(u,1,C.zoom),u_device_pixel_ratio:$.pixelRatio,u_image:0,u_scale:[A,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Ua=($,u,p,g,y,C)=>{const A=$.lineAtlas,z=Fl(u,$.transform),F=p.layout.get("line-cap")==="round",q=A.getDash(g.from,F),X=A.getDash(g.to,F),Y=q.width*y.fromScale,de=X.width*y.toScale;return o.e(ls($,u,p,C),{u_patternscale_a:[z/Y,-q.height/2],u_patternscale_b:[z/de,-X.height/2],u_sdfgamma:A.width/(256*Math.min(Y,de)*$.pixelRatio)/2,u_image:0,u_tex_y_a:q.y,u_tex_y_b:X.y,u_mix:y.t})};function Fl($,u){return 1/xn($,1,u.tileZoom)}function Bl($,u,p,g){return $.translatePosMatrix(g?g.posMatrix:u.tileID.posMatrix,u,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const go=($,u,p,g,y)=>{return{u_matrix:$,u_tl_parent:u,u_scale_parent:p,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(A=y.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(C=y.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:fh(y.paint.get("raster-hue-rotate"))};var C,A};function fh($){$*=Math.PI/180;const u=Math.sin($),p=Math.cos($);return[(2*p+1)/3,(-Math.sqrt(3)*u-p+1)/3,(Math.sqrt(3)*u-p+1)/3]}const $u=($,u,p,g,y,C,A,z,F,q)=>{const X=y.transform;return{u_is_size_zoom_constant:+($==="constant"||$==="source"),u_is_size_feature_constant:+($==="constant"||$==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:X.width/X.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:A,u_coord_matrix:z,u_is_text:+F,u_pitch_with_map:+g,u_texsize:q,u_texture:0}},wu=($,u,p,g,y,C,A,z,F,q,X)=>{const Y=y.transform;return o.e($u($,u,p,g,y,C,A,z,F,q),{u_gamma_scale:g?Math.cos(Y._pitch)*Y.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+X})},hh=($,u,p,g,y,C,A,z,F,q)=>o.e(wu($,u,p,g,y,C,A,z,!0,F,!0),{u_texsize_icon:q,u_texture_icon:1}),dh=($,u,p)=>({u_matrix:$,u_opacity:u,u_color:p}),ph=($,u,p,g,y,C)=>o.e(function(A,z,F,q){const X=F.imageManager.getPattern(A.from.toString()),Y=F.imageManager.getPattern(A.to.toString()),{width:de,height:Ce}=F.imageManager.getPixelSize(),Te=Math.pow(2,q.tileID.overscaledZ),Ae=q.tileSize*Math.pow(2,F.transform.tileZoom)/Te,xe=Ae*(q.tileID.canonical.x+q.tileID.wrap*Te),Oe=Ae*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[de,Ce],u_mix:z.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/xn(q,1,F.transform.tileZoom),u_pixel_coord_upper:[xe>>16,Oe>>16],u_pixel_coord_lower:[65535&xe,65535&Oe]}}(g,C,p,y),{u_matrix:$,u_opacity:u}),ja={fillExtrusion:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_lightpos:new o.aK($,u.u_lightpos),u_lightintensity:new o.aH($,u.u_lightintensity),u_lightcolor:new o.aK($,u.u_lightcolor),u_vertical_gradient:new o.aH($,u.u_vertical_gradient),u_opacity:new o.aH($,u.u_opacity)}),fillExtrusionPattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_lightpos:new o.aK($,u.u_lightpos),u_lightintensity:new o.aH($,u.u_lightintensity),u_lightcolor:new o.aK($,u.u_lightcolor),u_vertical_gradient:new o.aH($,u.u_vertical_gradient),u_height_factor:new o.aH($,u.u_height_factor),u_image:new o.aG($,u.u_image),u_texsize:new o.aL($,u.u_texsize),u_pixel_coord_upper:new o.aL($,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL($,u.u_pixel_coord_lower),u_scale:new o.aK($,u.u_scale),u_fade:new o.aH($,u.u_fade),u_opacity:new o.aH($,u.u_opacity)}),fill:($,u)=>({u_matrix:new o.aI($,u.u_matrix)}),fillPattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_image:new o.aG($,u.u_image),u_texsize:new o.aL($,u.u_texsize),u_pixel_coord_upper:new o.aL($,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL($,u.u_pixel_coord_lower),u_scale:new o.aK($,u.u_scale),u_fade:new o.aH($,u.u_fade)}),fillOutline:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_world:new o.aL($,u.u_world)}),fillOutlinePattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_world:new o.aL($,u.u_world),u_image:new o.aG($,u.u_image),u_texsize:new o.aL($,u.u_texsize),u_pixel_coord_upper:new o.aL($,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL($,u.u_pixel_coord_lower),u_scale:new o.aK($,u.u_scale),u_fade:new o.aH($,u.u_fade)}),circle:($,u)=>({u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_scale_with_map:new o.aG($,u.u_scale_with_map),u_pitch_with_map:new o.aG($,u.u_pitch_with_map),u_extrude_scale:new o.aL($,u.u_extrude_scale),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_matrix:new o.aI($,u.u_matrix)}),collisionBox:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_pixels_to_tile_units:new o.aH($,u.u_pixels_to_tile_units),u_extrude_scale:new o.aL($,u.u_extrude_scale),u_overscale_factor:new o.aH($,u.u_overscale_factor)}),collisionCircle:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_inv_matrix:new o.aI($,u.u_inv_matrix),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_viewport_size:new o.aL($,u.u_viewport_size)}),debug:($,u)=>({u_color:new o.aM($,u.u_color),u_matrix:new o.aI($,u.u_matrix),u_overlay:new o.aG($,u.u_overlay),u_overlay_scale:new o.aH($,u.u_overlay_scale)}),clippingMask:($,u)=>({u_matrix:new o.aI($,u.u_matrix)}),heatmap:($,u)=>({u_extrude_scale:new o.aH($,u.u_extrude_scale),u_intensity:new o.aH($,u.u_intensity),u_matrix:new o.aI($,u.u_matrix)}),heatmapTexture:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_world:new o.aL($,u.u_world),u_image:new o.aG($,u.u_image),u_color_ramp:new o.aG($,u.u_color_ramp),u_opacity:new o.aH($,u.u_opacity)}),hillshade:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_image:new o.aG($,u.u_image),u_latrange:new o.aL($,u.u_latrange),u_light:new o.aL($,u.u_light),u_shadow:new o.aM($,u.u_shadow),u_highlight:new o.aM($,u.u_highlight),u_accent:new o.aM($,u.u_accent)}),hillshadePrepare:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_image:new o.aG($,u.u_image),u_dimension:new o.aL($,u.u_dimension),u_zoom:new o.aH($,u.u_zoom),u_unpack:new o.aJ($,u.u_unpack)}),line:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_ratio:new o.aH($,u.u_ratio),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_units_to_pixels:new o.aL($,u.u_units_to_pixels)}),lineGradient:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_ratio:new o.aH($,u.u_ratio),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_units_to_pixels:new o.aL($,u.u_units_to_pixels),u_image:new o.aG($,u.u_image),u_image_height:new o.aH($,u.u_image_height)}),linePattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_texsize:new o.aL($,u.u_texsize),u_ratio:new o.aH($,u.u_ratio),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_image:new o.aG($,u.u_image),u_units_to_pixels:new o.aL($,u.u_units_to_pixels),u_scale:new o.aK($,u.u_scale),u_fade:new o.aH($,u.u_fade)}),lineSDF:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_ratio:new o.aH($,u.u_ratio),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_units_to_pixels:new o.aL($,u.u_units_to_pixels),u_patternscale_a:new o.aL($,u.u_patternscale_a),u_patternscale_b:new o.aL($,u.u_patternscale_b),u_sdfgamma:new o.aH($,u.u_sdfgamma),u_image:new o.aG($,u.u_image),u_tex_y_a:new o.aH($,u.u_tex_y_a),u_tex_y_b:new o.aH($,u.u_tex_y_b),u_mix:new o.aH($,u.u_mix)}),raster:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_tl_parent:new o.aL($,u.u_tl_parent),u_scale_parent:new o.aH($,u.u_scale_parent),u_buffer_scale:new o.aH($,u.u_buffer_scale),u_fade_t:new o.aH($,u.u_fade_t),u_opacity:new o.aH($,u.u_opacity),u_image0:new o.aG($,u.u_image0),u_image1:new o.aG($,u.u_image1),u_brightness_low:new o.aH($,u.u_brightness_low),u_brightness_high:new o.aH($,u.u_brightness_high),u_saturation_factor:new o.aH($,u.u_saturation_factor),u_contrast_factor:new o.aH($,u.u_contrast_factor),u_spin_weights:new o.aK($,u.u_spin_weights)}),symbolIcon:($,u)=>({u_is_size_zoom_constant:new o.aG($,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aG($,u.u_is_size_feature_constant),u_size_t:new o.aH($,u.u_size_t),u_size:new o.aH($,u.u_size),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_pitch:new o.aH($,u.u_pitch),u_rotate_symbol:new o.aG($,u.u_rotate_symbol),u_aspect_ratio:new o.aH($,u.u_aspect_ratio),u_fade_change:new o.aH($,u.u_fade_change),u_matrix:new o.aI($,u.u_matrix),u_label_plane_matrix:new o.aI($,u.u_label_plane_matrix),u_coord_matrix:new o.aI($,u.u_coord_matrix),u_is_text:new o.aG($,u.u_is_text),u_pitch_with_map:new o.aG($,u.u_pitch_with_map),u_texsize:new o.aL($,u.u_texsize),u_texture:new o.aG($,u.u_texture)}),symbolSDF:($,u)=>({u_is_size_zoom_constant:new o.aG($,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aG($,u.u_is_size_feature_constant),u_size_t:new o.aH($,u.u_size_t),u_size:new o.aH($,u.u_size),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_pitch:new o.aH($,u.u_pitch),u_rotate_symbol:new o.aG($,u.u_rotate_symbol),u_aspect_ratio:new o.aH($,u.u_aspect_ratio),u_fade_change:new o.aH($,u.u_fade_change),u_matrix:new o.aI($,u.u_matrix),u_label_plane_matrix:new o.aI($,u.u_label_plane_matrix),u_coord_matrix:new o.aI($,u.u_coord_matrix),u_is_text:new o.aG($,u.u_is_text),u_pitch_with_map:new o.aG($,u.u_pitch_with_map),u_texsize:new o.aL($,u.u_texsize),u_texture:new o.aG($,u.u_texture),u_gamma_scale:new o.aH($,u.u_gamma_scale),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_is_halo:new o.aG($,u.u_is_halo)}),symbolTextAndIcon:($,u)=>({u_is_size_zoom_constant:new o.aG($,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aG($,u.u_is_size_feature_constant),u_size_t:new o.aH($,u.u_size_t),u_size:new o.aH($,u.u_size),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_pitch:new o.aH($,u.u_pitch),u_rotate_symbol:new o.aG($,u.u_rotate_symbol),u_aspect_ratio:new o.aH($,u.u_aspect_ratio),u_fade_change:new o.aH($,u.u_fade_change),u_matrix:new o.aI($,u.u_matrix),u_label_plane_matrix:new o.aI($,u.u_label_plane_matrix),u_coord_matrix:new o.aI($,u.u_coord_matrix),u_is_text:new o.aG($,u.u_is_text),u_pitch_with_map:new o.aG($,u.u_pitch_with_map),u_texsize:new o.aL($,u.u_texsize),u_texsize_icon:new o.aL($,u.u_texsize_icon),u_texture:new o.aG($,u.u_texture),u_texture_icon:new o.aG($,u.u_texture_icon),u_gamma_scale:new o.aH($,u.u_gamma_scale),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_is_halo:new o.aG($,u.u_is_halo)}),background:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_opacity:new o.aH($,u.u_opacity),u_color:new o.aM($,u.u_color)}),backgroundPattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_opacity:new o.aH($,u.u_opacity),u_image:new o.aG($,u.u_image),u_pattern_tl_a:new o.aL($,u.u_pattern_tl_a),u_pattern_br_a:new o.aL($,u.u_pattern_br_a),u_pattern_tl_b:new o.aL($,u.u_pattern_tl_b),u_pattern_br_b:new o.aL($,u.u_pattern_br_b),u_texsize:new o.aL($,u.u_texsize),u_mix:new o.aH($,u.u_mix),u_pattern_size_a:new o.aL($,u.u_pattern_size_a),u_pattern_size_b:new o.aL($,u.u_pattern_size_b),u_scale_a:new o.aH($,u.u_scale_a),u_scale_b:new o.aH($,u.u_scale_b),u_pixel_coord_upper:new o.aL($,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL($,u.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aH($,u.u_tile_units_to_pixels)}),terrain:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_texture:new o.aG($,u.u_texture),u_ele_delta:new o.aH($,u.u_ele_delta)}),terrainDepth:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_ele_delta:new o.aH($,u.u_ele_delta)}),terrainCoords:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_texture:new o.aG($,u.u_texture),u_terrain_coords_id:new o.aH($,u.u_terrain_coords_id),u_ele_delta:new o.aH($,u.u_ele_delta)})};class Nl{constructor(u,p,g){this.context=u;const y=u.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qa={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Vl{constructor(u,p,g,y){this.length=p.length,this.attributes=g,this.itemSize=p.bytesPerElement,this.dynamicDraw=y,this.context=u;const C=u.gl;this.buffer=C.createBuffer(),u.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,p){for(let g=0;g<this.attributes.length;g++){const y=p.attributes[this.attributes[g].name];y!==void 0&&u.enableVertexAttribArray(y)}}setVertexAttribPointers(u,p,g){for(let y=0;y<this.attributes.length;y++){const C=this.attributes[y],A=p.attributes[C.name];A!==void 0&&u.vertexAttribPointer(A,C.components,u[qa[C.type]],!1,this.itemSize,C.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xo=new WeakMap;function Is($){var u;if(Xo.has($))return Xo.get($);{const p=(u=$.getParameter($.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return Xo.set($,p),p}}class Hn{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ul extends Hn{getDefault(){return o.aO.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Jo extends Hn{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Yo extends Hn{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class mh extends Hn{getDefault(){return[!0,!0,!0,!0]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Ha extends Hn{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class _h extends Hn{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class vo extends Hn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const p=this.current;(u.func!==p.func||u.ref!==p.ref||u.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class gh extends Hn{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class xu extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=u,this.dirty=!1}}class vh extends Hn{getDefault(){return[0,1]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class ku extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=u,this.dirty=!1}}class jl extends Hn{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Cu extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.BLEND):p.disable(p.BLEND),this.current=u,this.dirty=!1}}class Su extends Hn{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Tu extends Hn{getDefault(){return o.aO.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Iu extends Hn{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Wi extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=u,this.dirty=!1}}class Eu extends Hn{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class yh extends Hn{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class bh extends Hn{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class Pu extends Hn{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Qo extends Hn{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class $h extends Hn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Ga extends Hn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class wh extends Hn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class xh extends Hn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Au extends Hn{getDefault(){return null}set(u){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Mu extends Hn{getDefault(){return null}set(u){var p;if(u===this.current&&!this.dirty)return;const g=this.gl;Is(g)?g.bindVertexArray(u):(p=g.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class Du extends Hn{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class ql extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class zu extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class yo extends Hn{constructor(u,p){super(u),this.context=u,this.parent=p}getDefault(){return null}}class _i extends yo{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class Hl extends yo{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Gl extends yo{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Zl{constructor(u,p,g,y,C){this.context=u,this.width=p,this.height=g;const A=u.gl,z=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new _i(u,z),y)this.depthAttachment=C?new Gl(u,z):new Hl(u,z);else if(C)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,p=this.colorAttachment.get();if(p&&u.deleteTexture(p),this.depthAttachment){const g=this.depthAttachment.get();g&&u.deleteRenderbuffer(g)}u.deleteFramebuffer(this.framebuffer)}}class mr{constructor(u,p,g){this.blendFunction=u,this.blendColor=p,this.mask=g}}mr.Replace=[1,0],mr.disabled=new mr(mr.Replace,o.aO.transparent,[!1,!1,!1,!1]),mr.unblended=new mr(mr.Replace,o.aO.transparent,[!0,!0,!0,!0]),mr.alphaBlended=new mr([1,771],o.aO.transparent,[!0,!0,!0,!0]);class Wl{constructor(u){var p,g;if(this.gl=u,this.clearColor=new Ul(this),this.clearDepth=new Jo(this),this.clearStencil=new Yo(this),this.colorMask=new mh(this),this.depthMask=new Ha(this),this.stencilMask=new _h(this),this.stencilFunc=new vo(this),this.stencilOp=new gh(this),this.stencilTest=new xu(this),this.depthRange=new vh(this),this.depthTest=new ku(this),this.depthFunc=new jl(this),this.blend=new Cu(this),this.blendFunc=new Su(this),this.blendColor=new Tu(this),this.blendEquation=new Iu(this),this.cullFace=new Wi(this),this.cullFaceSide=new Eu(this),this.frontFace=new yh(this),this.program=new bh(this),this.activeTexture=new Pu(this),this.viewport=new Qo(this),this.bindFramebuffer=new $h(this),this.bindRenderbuffer=new Ga(this),this.bindTexture=new wh(this),this.bindVertexBuffer=new xh(this),this.bindElementBuffer=new Au(this),this.bindVertexArray=new Mu(this),this.pixelStoreUnpack=new Du(this),this.pixelStoreUnpackPremultiplyAlpha=new ql(this),this.pixelStoreUnpackFlipY=new zu(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),Is(u)){this.HALF_FLOAT=u.HALF_FLOAT;const y=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=u.RGBA16F)!==null&&p!==void 0?p:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(g=u.RGB16F)!==null&&g!==void 0?g:y==null?void 0:y.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const y=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,p){return new Nl(this,u,p)}createVertexBuffer(u,p,g){return new Vl(this,u,p,g)}createRenderbuffer(u,p,g){const y=this.gl,C=y.createRenderbuffer();return this.bindRenderbuffer.set(C),y.renderbufferStorage(y.RENDERBUFFER,u,p,g),this.bindRenderbuffer.set(null),C}createFramebuffer(u,p,g,y){return new Zl(this,u,p,g,y)}clear({color:u,depth:p,stencil:g}){const y=this.gl;let C=0;u&&(C|=y.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(C|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),g!==void 0&&(C|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),y.clear(C)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){o.aD(u.blendFunction,mr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return Is(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var p;return Is(this.gl)?this.gl.deleteVertexArray(u):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class zn{constructor(u,p,g){this.func=u,this.mask=p,this.range=g}}zn.ReadOnly=!1,zn.ReadWrite=!0,zn.disabled=new zn(519,zn.ReadOnly,[0,1]);const ea=7680;class ar{constructor(u,p,g,y,C,A){this.test=u,this.ref=p,this.mask=g,this.fail=y,this.depthFail=C,this.pass=A}}ar.disabled=new ar({func:519,mask:0},0,0,ea,ea,ea);class rr{constructor(u,p,g){this.enable=u,this.mode=p,this.frontFace=g}}let Za;function Lu($,u,p,g,y,C,A){const z=$.context,F=z.gl,q=$.useProgram("collisionBox"),X=[];let Y=0,de=0;for(let De=0;De<g.length;De++){const He=g[De],Qe=u.getTile(He),et=Qe.getBucket(p);if(!et)continue;let at=He.posMatrix;y[0]===0&&y[1]===0||(at=$.translatePosMatrix(He.posMatrix,Qe,y,C));const Et=A?et.textCollisionBox:et.iconCollisionBox,bt=et.collisionCircleArray;if(bt.length>0){const Rt=o.F(),Xt=at;o.aP(Rt,et.placementInvProjMatrix,$.transform.glCoordMatrix),o.aP(Rt,Rt,et.placementViewportMatrix),X.push({circleArray:bt,circleOffset:de,transform:Xt,invTransform:Rt,coord:He}),Y+=bt.length/4,de=Y}Et&&q.draw(z,F.LINES,zn.disabled,ar.disabled,$.colorModeForRenderPass(),rr.disabled,uh(at,$.transform,Qe),$.style.map.terrain&&$.style.map.terrain.getTerrainData(He),p.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,null,$.transform.zoom,null,null,Et.collisionVertexBuffer)}if(!A||!X.length)return;const Ce=$.useProgram("collisionCircle"),Te=new o.aQ;Te.resize(4*Y),Te._trim();let Ae=0;for(const De of X)for(let He=0;He<De.circleArray.length/4;He++){const Qe=4*He,et=De.circleArray[Qe+0],at=De.circleArray[Qe+1],Et=De.circleArray[Qe+2],bt=De.circleArray[Qe+3];Te.emplace(Ae++,et,at,Et,bt,0),Te.emplace(Ae++,et,at,Et,bt,1),Te.emplace(Ae++,et,at,Et,bt,2),Te.emplace(Ae++,et,at,Et,bt,3)}(!Za||Za.length<2*Y)&&(Za=function(De){const He=2*De,Qe=new o.aS;Qe.resize(He),Qe._trim();for(let et=0;et<He;et++){const at=6*et;Qe.uint16[at+0]=4*et+0,Qe.uint16[at+1]=4*et+1,Qe.uint16[at+2]=4*et+2,Qe.uint16[at+3]=4*et+2,Qe.uint16[at+4]=4*et+3,Qe.uint16[at+5]=4*et+0}return Qe}(Y));const xe=z.createIndexBuffer(Za,!0),Oe=z.createVertexBuffer(Te,o.aR.members,!0);for(const De of X){const He={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(Ye=$.transform).cameraToCenterDistance,u_viewport_size:[Ye.width,Ye.height]};Ce.draw(z,F.TRIANGLES,zn.disabled,ar.disabled,$.colorModeForRenderPass(),rr.disabled,He,$.style.map.terrain&&$.style.map.terrain.getTerrainData(De.coord),p.id,Oe,xe,o.$.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,$.transform.zoom,null,null,null)}var Ye;Oe.destroy(),xe.destroy()}rr.disabled=new rr(!1,1029,2305),rr.backCCW=new rr(!0,1029,2305);const Ru=o.an(new Float32Array(16));function kh($,u,p,g,y,C){const{horizontalAlign:A,verticalAlign:z}=o.at($);return new o.P((-(A-.5)*u/y+g[0])*C,(-(z-.5)*p/y+g[1])*C)}function Ou($,u,p,g,y,C,A,z,F,q,X){const Y=$.text.placedSymbolArray,de=$.text.dynamicLayoutVertexArray,Ce=$.icon.dynamicLayoutVertexArray,Te={};de.clear();for(let Ae=0;Ae<Y.length;Ae++){const xe=Y.get(Ae),Oe=xe.hidden||!xe.crossTileID||$.allowVerticalPlacement&&!xe.placedOrientation?null:g[xe.crossTileID];if(Oe){const Ye=new o.P(xe.anchorX,xe.anchorY),De=jr(Ye,p?A:C,X),He=Pe(y.cameraToCenterDistance,De.signedDistanceFromCamera);let Qe=o.ai($.textSizeData,F,xe)*He/o.ao;p&&(Qe*=$.tilePixelRatio/z);const{width:et,height:at,anchor:Et,textOffset:bt,textBoxScale:Rt}=Oe,Xt=kh(Et,et,at,bt,Rt,Qe),Sn=p?jr(Ye.add(Xt),C,X).point:De.point.add(u?Xt.rotate(-y.angle):Xt),Nt=$.allowVerticalPlacement&&xe.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let gn=0;gn<xe.numGlyphs;gn++)o.aj(de,Sn,Nt);q&&xe.associatedIconIndex>=0&&(Te[xe.associatedIconIndex]={shiftedAnchor:Sn,angle:Nt})}else ut(xe.numGlyphs,de)}if(q){Ce.clear();const Ae=$.icon.placedSymbolArray;for(let xe=0;xe<Ae.length;xe++){const Oe=Ae.get(xe);if(Oe.hidden)ut(Oe.numGlyphs,Ce);else{const Ye=Te[xe];if(Ye)for(let De=0;De<Oe.numGlyphs;De++)o.aj(Ce,Ye.shiftedAnchor,Ye.angle);else ut(Oe.numGlyphs,Ce)}}$.icon.dynamicLayoutVertexBuffer.updateData(Ce)}$.text.dynamicLayoutVertexBuffer.updateData(de)}function Wa($,u,p){return p.iconsInText&&u?"symbolTextAndIcon":$?"symbolSDF":"symbolIcon"}function ta($,u,p,g,y,C,A,z,F,q,X,Y){const de=$.context,Ce=de.gl,Te=$.transform,Ae=z==="map",xe=F==="map",Oe=z!=="viewport"&&p.layout.get("symbol-placement")!=="point",Ye=Ae&&!xe&&!Oe,De=!p.layout.get("symbol-sort-key").isConstant();let He=!1;const Qe=$.depthModeForSublayer(0,zn.ReadOnly),et=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),at=[];for(const Et of g){const bt=u.getTile(Et),Rt=bt.getBucket(p);if(!Rt)continue;const Xt=y?Rt.text:Rt.icon;if(!Xt||!Xt.segments.get().length||!Xt.hasVisibleVertices)continue;const Sn=Xt.programConfigurations.get(p.id),Nt=y||Rt.sdfIcons,gn=y?Rt.textSizeData:Rt.iconSizeData,Tn=xe||Te.pitch!==0,On=$.useProgram(Wa(Nt,y,Rt),Sn),vn=o.ag(gn,Te.zoom),En=$.style.map.terrain&&$.style.map.terrain.getTerrainData(Et);let Dn,_r,er,Ps,qr=[0,0],gr=null;if(y)_r=bt.glyphAtlasTexture,er=Ce.LINEAR,Dn=bt.glyphAtlasTexture.size,Rt.iconsInText&&(qr=bt.imageAtlasTexture.size,gr=bt.imageAtlasTexture,Ps=Tn||$.options.rotating||$.options.zooming||gn.kind==="composite"||gn.kind==="camera"?Ce.LINEAR:Ce.NEAREST);else{const Mr=p.layout.get("icon-size").constantOr(0)!==1||Rt.iconsNeedLinear;_r=bt.imageAtlasTexture,er=Nt||$.options.rotating||$.options.zooming||Mr||Tn?Ce.LINEAR:Ce.NEAREST,Dn=bt.imageAtlasTexture.size}const ys=xn(bt,1,$.transform.zoom),Gs=Fs(Et.posMatrix,xe,Ae,$.transform,ys),ii=qs(Et.posMatrix,xe,Ae,$.transform,ys),zi=et&&Rt.hasTextData(),So=p.layout.get("icon-text-fit")!=="none"&&zi&&Rt.hasIconData();if(Oe){const Mr=$.style.map.terrain?(Us,Dr)=>$.style.map.terrain.getElevation(Et,Us,Dr):null,fr=p.layout.get("text-rotation-alignment")==="map";ie(Rt,Et.posMatrix,$,y,Gs,ii,xe,q,fr,Mr)}const no=$.translatePosMatrix(Et.posMatrix,bt,C,A),ro=Oe||y&&et||So?Ru:Gs,cs=$.translatePosMatrix(ii,bt,C,A,!0),ns=Nt&&p.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let us;us=Nt?Rt.iconsInText?hh(gn.kind,vn,Ye,xe,$,no,ro,cs,Dn,qr):wu(gn.kind,vn,Ye,xe,$,no,ro,cs,y,Dn,!0):$u(gn.kind,vn,Ye,xe,$,no,ro,cs,y,Dn);const pa={program:On,buffers:Xt,uniformValues:us,atlasTexture:_r,atlasTextureIcon:gr,atlasInterpolation:er,atlasInterpolationIcon:Ps,isSDF:Nt,hasHalo:ns};if(De&&Rt.canOverlap){He=!0;const Mr=Xt.segments.get();for(const fr of Mr)at.push({segments:new o.$([fr]),sortKey:fr.sortKey,state:pa,terrainData:En})}else at.push({segments:Xt.segments,sortKey:0,state:pa,terrainData:En})}He&&at.sort((Et,bt)=>Et.sortKey-bt.sortKey);for(const Et of at){const bt=Et.state;if(de.activeTexture.set(Ce.TEXTURE0),bt.atlasTexture.bind(bt.atlasInterpolation,Ce.CLAMP_TO_EDGE),bt.atlasTextureIcon&&(de.activeTexture.set(Ce.TEXTURE1),bt.atlasTextureIcon&&bt.atlasTextureIcon.bind(bt.atlasInterpolationIcon,Ce.CLAMP_TO_EDGE)),bt.isSDF){const Rt=bt.uniformValues;bt.hasHalo&&(Rt.u_is_halo=1,na(bt.buffers,Et.segments,p,$,bt.program,Qe,X,Y,Rt,Et.terrainData)),Rt.u_is_halo=0}na(bt.buffers,Et.segments,p,$,bt.program,Qe,X,Y,bt.uniformValues,Et.terrainData)}}function na($,u,p,g,y,C,A,z,F,q){const X=g.context;y.draw(X,X.gl.TRIANGLES,C,A,z,rr.disabled,F,q,p.id,$.layoutVertexBuffer,$.indexBuffer,u,p.paint,g.transform.zoom,$.programConfigurations.get(p.id),$.dynamicLayoutVertexBuffer,$.opacityVertexBuffer)}function Ka($,u,p,g,y){if(!p||!g||!g.imageAtlas)return;const C=g.imageAtlas.patternPositions;let A=C[p.to.toString()],z=C[p.from.toString()];if(!A&&z&&(A=z),!z&&A&&(z=A),!A||!z){const F=y.getPaintProperty(u);A=C[F],z=C[F]}A&&z&&$.setConstantPatternPositions(A,z)}function Ti($,u,p,g,y,C,A){const z=$.context.gl,F="fill-pattern",q=p.paint.get(F),X=q&&q.constantOr(1),Y=p.getCrossfadeParameters();let de,Ce,Te,Ae,xe;A?(Ce=X&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",de=z.LINES):(Ce=X?"fillPattern":"fill",de=z.TRIANGLES);const Oe=q.constantOr(null);for(const Ye of g){const De=u.getTile(Ye);if(X&&!De.patternsLoaded())continue;const He=De.getBucket(p);if(!He)continue;const Qe=He.programConfigurations.get(p.id),et=$.useProgram(Ce,Qe),at=$.style.map.terrain&&$.style.map.terrain.getTerrainData(Ye);X&&($.context.activeTexture.set(z.TEXTURE0),De.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Qe.updatePaintBuffers(Y)),Ka(Qe,F,Oe,De,p);const Et=at?Ye:null,bt=$.translatePosMatrix(Et?Et.posMatrix:Ye.posMatrix,De,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(A){Ae=He.indexBuffer2,xe=He.segments2;const Rt=[z.drawingBufferWidth,z.drawingBufferHeight];Te=Ce==="fillOutlinePattern"&&X?Ko(bt,$,Y,De,Rt):Na(bt,Rt)}else Ae=He.indexBuffer,xe=He.segments,Te=X?Wo(bt,$,Y,De):Ba(bt);et.draw($.context,de,y,$.stencilModeForClipping(Ye),C,rr.disabled,Te,at,p.id,He.layoutVertexBuffer,Ae,xe,p.paint,$.transform.zoom,Qe)}}function Ii($,u,p,g,y,C,A){const z=$.context,F=z.gl,q="fill-extrusion-pattern",X=p.paint.get(q),Y=X.constantOr(1),de=p.getCrossfadeParameters(),Ce=p.paint.get("fill-extrusion-opacity"),Te=X.constantOr(null);for(const Ae of g){const xe=u.getTile(Ae),Oe=xe.getBucket(p);if(!Oe)continue;const Ye=$.style.map.terrain&&$.style.map.terrain.getTerrainData(Ae),De=Oe.programConfigurations.get(p.id),He=$.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",De);Y&&($.context.activeTexture.set(F.TEXTURE0),xe.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),De.updatePaintBuffers(de)),Ka(De,q,Te,xe,p);const Qe=$.translatePosMatrix(Ae.posMatrix,xe,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),et=p.paint.get("fill-extrusion-vertical-gradient"),at=Y?Ll(Qe,$,et,Ce,Ae,de,xe):Zo(Qe,$,et,Ce);He.draw(z,z.gl.TRIANGLES,y,C,A,rr.backCCW,at,Ye,p.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,p.paint,$.transform.zoom,De,$.style.map.terrain&&Oe.centroidVertexBuffer)}}function Vs($,u,p,g,y,C,A){const z=$.context,F=z.gl,q=p.fbo;if(!q)return;const X=$.useProgram("hillshade"),Y=$.style.map.terrain&&$.style.map.terrain.getTerrainData(u);z.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,q.colorAttachment.get()),X.draw(z,F.TRIANGLES,y,C,A,rr.disabled,((de,Ce,Te,Ae)=>{const xe=Te.paint.get("hillshade-shadow-color"),Oe=Te.paint.get("hillshade-highlight-color"),Ye=Te.paint.get("hillshade-accent-color");let De=Te.paint.get("hillshade-illumination-direction")*(Math.PI/180);Te.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=de.transform.angle);const He=!de.options.moving;return{u_matrix:Ae?Ae.posMatrix:de.transform.calculatePosMatrix(Ce.tileID.toUnwrapped(),He),u_image:0,u_latrange:Va(0,Ce.tileID),u_light:[Te.paint.get("hillshade-exaggeration"),De],u_shadow:xe,u_highlight:Oe,u_accent:Ye}})($,p,g,Y?u:null),Y,g.id,$.rasterBoundsBuffer,$.quadTriangleIndexBuffer,$.rasterBoundsSegments)}function Fu($,u,p,g,y,C){const A=$.context,z=A.gl,F=u.dem;if(F&&F.data){const q=F.dim,X=F.stride,Y=F.getPixels();if(A.activeTexture.set(z.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||$.getTileTexture(X),u.demTexture){const Ce=u.demTexture;Ce.update(Y,{premultiply:!1}),Ce.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else u.demTexture=new fe(A,Y,z.RGBA,{premultiply:!1}),u.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);A.activeTexture.set(z.TEXTURE0);let de=u.fbo;if(!de){const Ce=new fe(A,{width:q,height:q,data:null},z.RGBA);Ce.bind(z.LINEAR,z.CLAMP_TO_EDGE),de=u.fbo=A.createFramebuffer(q,q,!0,!1),de.colorAttachment.set(Ce.texture)}A.bindFramebuffer.set(de.framebuffer),A.viewport.set([0,0,q,q]),$.useProgram("hillshadePrepare").draw(A,z.TRIANGLES,g,y,C,rr.disabled,((Ce,Te)=>{const Ae=Te.stride,xe=o.F();return o.aN(xe,0,o.W,-o.W,0,0,1),o.H(xe,xe,[0,-o.W,0]),{u_matrix:xe,u_image:1,u_dimension:[Ae,Ae],u_zoom:Ce.overscaledZ,u_unpack:Te.getUnpackVector()}})(u.tileID,F),null,p.id,$.rasterBoundsBuffer,$.quadTriangleIndexBuffer,$.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function Bu($,u,p,g,y,C){const A=g.paint.get("raster-fade-duration");if(!C&&A>0){const z=b.now(),F=(z-$.timeAdded)/A,q=u?(z-u.timeAdded)/A:-1,X=p.getSource(),Y=y.coveringZoomLevel({tileSize:X.tileSize,roundZoom:X.roundZoom}),de=!u||Math.abs(u.tileID.overscaledZ-Y)>Math.abs($.tileID.overscaledZ-Y),Ce=de&&$.refreshedUponExpiration?1:o.ac(de?F:1-q,0,1);return $.refreshedUponExpiration&&F>=1&&($.refreshedUponExpiration=!1),u?{opacity:1,mix:1-Ce}:{opacity:Ce,mix:0}}return{opacity:1,mix:0}}const Kl=new o.aO(1,0,0,1),Ki=new o.aO(0,1,0,1),Xa=new o.aO(0,0,1,1),Ja=new o.aO(1,0,1,1),ra=new o.aO(0,1,1,1);function sa($,u,p,g){gi($,0,u+p/2,$.transform.width,p,g)}function Xl($,u,p,g){gi($,u-p/2,0,p,$.transform.height,g)}function gi($,u,p,g,y,C){const A=$.context,z=A.gl;z.enable(z.SCISSOR_TEST),z.scissor(u*$.pixelRatio,p*$.pixelRatio,g*$.pixelRatio,y*$.pixelRatio),A.clear({color:C}),z.disable(z.SCISSOR_TEST)}function bo($,u,p){const g=$.context,y=g.gl,C=p.posMatrix,A=$.useProgram("debug"),z=zn.disabled,F=ar.disabled,q=$.colorModeForRenderPass(),X="$debug",Y=$.style.map.terrain&&$.style.map.terrain.getTerrainData(p);g.activeTexture.set(y.TEXTURE0);const de=u.getTileByID(p.key).latestRawTileData,Ce=Math.floor((de&&de.byteLength||0)/1024),Te=u.getTile(p).tileSize,Ae=512/Math.min(Te,512)*(p.overscaledZ/$.transform.zoom)*.5;let xe=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(xe+=` => ${p.overscaledZ}`),function(Oe,Ye){Oe.initDebugOverlayCanvas();const De=Oe.debugOverlayCanvas,He=Oe.context.gl,Qe=Oe.debugOverlayCanvas.getContext("2d");Qe.clearRect(0,0,De.width,De.height),Qe.shadowColor="white",Qe.shadowBlur=2,Qe.lineWidth=1.5,Qe.strokeStyle="white",Qe.textBaseline="top",Qe.font="bold 36px Open Sans, sans-serif",Qe.fillText(Ye,5,5),Qe.strokeText(Ye,5,5),Oe.debugOverlayTexture.update(De),Oe.debugOverlayTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE)}($,`${xe} ${Ce}kB`),A.draw(g,y.TRIANGLES,z,F,mr.alphaBlended,rr.disabled,Rl(C,o.aO.transparent,Ae),null,X,$.debugBuffer,$.quadTriangleIndexBuffer,$.debugSegments),A.draw(g,y.LINE_STRIP,z,F,q,rr.disabled,Rl(C,o.aO.red),Y,X,$.debugBuffer,$.tileBorderIndexBuffer,$.debugSegments)}function Jl($,u,p){const g=$.context,y=g.gl,C=$.colorModeForRenderPass(),A=new zn(y.LEQUAL,zn.ReadWrite,$.depthRangeFor3D),z=$.useProgram("terrain"),F=u.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,$.width,$.height]);for(const q of p){const X=$.renderToTexture.getTexture(q),Y=u.getTerrainData(q.tileID);g.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,X.texture);const de={u_matrix:$.transform.calculatePosMatrix(q.tileID.toUnwrapped()),u_texture:0,u_ele_delta:u.getMeshFrameDelta($.transform.zoom)};z.draw(g,y.TRIANGLES,A,ar.disabled,C,rr.backCCW,de,Y,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}}class Yl{constructor(u,p){this.context=new Wl(u),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ot.maxUnderzooming+Ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pr}resize(u,p,g){if(this.width=Math.floor(u*g),this.height=Math.floor(p*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const u=this.context,p=new o.aV;p.emplaceBack(0,0),p.emplaceBack(o.W,0),p.emplaceBack(0,o.W),p.emplaceBack(o.W,o.W),this.tileExtentBuffer=u.createVertexBuffer(p,ei.members),this.tileExtentSegments=o.$.simpleSegment(0,0,4,2);const g=new o.aV;g.emplaceBack(0,0),g.emplaceBack(o.W,0),g.emplaceBack(0,o.W),g.emplaceBack(o.W,o.W),this.debugBuffer=u.createVertexBuffer(g,ei.members),this.debugSegments=o.$.simpleSegment(0,0,4,5);const y=new o.Z;y.emplaceBack(0,0,0,0),y.emplaceBack(o.W,0,o.W,0),y.emplaceBack(0,o.W,0,o.W),y.emplaceBack(o.W,o.W,o.W,o.W),this.rasterBoundsBuffer=u.createVertexBuffer(y,Vn.members),this.rasterBoundsSegments=o.$.simpleSegment(0,0,4,2);const C=new o.aV;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(C,ei.members),this.viewportSegments=o.$.simpleSegment(0,0,4,2);const A=new o.aW;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(A);const z=new o.aX;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(z);const F=this.context.gl;this.stencilClearMode=new ar({func:F.ALWAYS,mask:0},0,255,F.ZERO,F.ZERO,F.ZERO)}clearStencil(){const u=this.context,p=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=o.F();o.aN(g,0,this.width,this.height,0,0,1),o.J(g,g,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,p.TRIANGLES,zn.disabled,this.stencilClearMode,mr.disabled,rr.disabled,bu(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,p){if(this.currentStencilSource===u.source||!u.isTileClipped()||!p||!p.length)return;this.currentStencilSource=u.source;const g=this.context,y=g.gl;this.nextStencilID+p.length>256&&this.clearStencil(),g.setColorMode(mr.disabled),g.setDepthMode(zn.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of p){const z=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,F=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);C.draw(g,y.TRIANGLES,zn.disabled,new ar({func:y.ALWAYS,mask:0},z,255,y.KEEP,y.KEEP,y.REPLACE),mr.disabled,rr.disabled,bu(A.posMatrix),F,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,p=this.context.gl;return new ar({func:p.NOTEQUAL,mask:255},u,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(u){const p=this.context.gl;return new ar({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(u){const p=this.context.gl,g=u.sort((A,z)=>z.overscaledZ-A.overscaledZ),y=g[g.length-1].overscaledZ,C=g[0].overscaledZ-y+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const A={};for(let z=0;z<C;z++)A[z+y]=new ar({func:p.GEQUAL,mask:255},z+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=C,[A,g]}return[{[y]:ar.disabled},g]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new mr([u.CONSTANT_COLOR,u.ONE],new o.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?mr.unblended:mr.alphaBlended}depthModeForSublayer(u,p,g){if(!this.opaquePassEnabledForLayer())return zn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new zn(g||this.context.gl.LEQUAL,p,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,p){this.style=u,this.options=p,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const g=this.style._order,y=this.style.sourceCaches,C={},A={},z={};for(const F in y){const q=y[F];q.used&&q.prepare(this.context),C[F]=q.getVisibleCoordinates(),A[F]=C[F].slice().reverse(),z[F]=q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let F=0;F<g.length;F++)if(this.style._layers[g[F]].is3D()){this.opaquePassCutoff=F;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const F of g){const q=this.style._layers[F];if(!q.hasOffscreenPass()||q.isHidden(this.transform.zoom))continue;const X=A[q.source];(q.type==="custom"||X.length)&&this.renderLayer(this,y[q.source],q,X)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.aO.black:o.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const F=this.style._layers[g[this.currentLayer]],q=y[F.source],X=C[F.source];this._renderTileClippingMasks(F,X),this.renderLayer(this,q,F,X)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const F=this.style._layers[g[this.currentLayer]],q=y[F.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(F))continue;const X=(F.type==="symbol"?z:A)[F.source];this._renderTileClippingMasks(F,C[F.source]),this.renderLayer(this,q,F,X)}if(this.options.showTileBoundaries){const F=function(q,X){let Y=null;const de=Object.values(q._layers).flatMap(xe=>xe.source&&!xe.isHidden(X)?[q.sourceCaches[xe.source]]:[]),Ce=de.filter(xe=>xe.getSource().type==="vector"),Te=de.filter(xe=>xe.getSource().type!=="vector"),Ae=xe=>{(!Y||Y.getSource().maxzoom<xe.getSource().maxzoom)&&(Y=xe)};return Ce.forEach(xe=>Ae(xe)),Y||Te.forEach(xe=>Ae(xe)),Y}(this.style,this.transform.zoom);F&&function(q,X,Y){for(let de=0;de<Y.length;de++)bo(q,X,Y[de])}(this,F,F.getVisibleCoordinates())}this.options.showPadding&&function(F){const q=F.transform.padding;sa(F,F.transform.height-(q.top||0),3,Kl),sa(F,q.bottom||0,3,Ki),Xl(F,q.left||0,3,Xa),Xl(F,F.transform.width-(q.right||0),3,Ja);const X=F.transform.centerPoint;(function(Y,de,Ce,Te){gi(Y,de-1,Ce-10,2,20,Te),gi(Y,de-10,Ce-1,20,2,Te)})(F,X.x,F.transform.height-X.y,ra)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,g=this.transform.projMatrix;let y=this.terrainFacilitator.dirty;y||(y=u?!o.aY(p,g):!o.aZ(p,g)),y||(y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),y&&(o.a_(p,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(C,A){const z=C.context,F=z.gl,q=mr.unblended,X=new zn(F.LEQUAL,zn.ReadWrite,[0,1]),Y=A.getTerrainMesh(),de=A.sourceCache.getRenderableTiles(),Ce=C.useProgram("terrainDepth");z.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),z.viewport.set([0,0,C.width/devicePixelRatio,C.height/devicePixelRatio]),z.clear({color:o.aO.transparent,depth:1});for(const Te of de){const Ae=A.getTerrainData(Te.tileID),xe={u_matrix:C.transform.calculatePosMatrix(Te.tileID.toUnwrapped()),u_ele_delta:A.getMeshFrameDelta(C.transform.zoom)};Ce.draw(z,F.TRIANGLES,X,ar.disabled,q,rr.backCCW,xe,Ae,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments)}z.bindFramebuffer.set(null),z.viewport.set([0,0,C.width,C.height])}(this,this.style.map.terrain),function(C,A){const z=C.context,F=z.gl,q=mr.unblended,X=new zn(F.LEQUAL,zn.ReadWrite,[0,1]),Y=A.getTerrainMesh(),de=A.getCoordsTexture(),Ce=A.sourceCache.getRenderableTiles(),Te=C.useProgram("terrainCoords");z.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),z.viewport.set([0,0,C.width/devicePixelRatio,C.height/devicePixelRatio]),z.clear({color:o.aO.transparent,depth:1}),A.coordsIndex=[];for(const Ae of Ce){const xe=A.getTerrainData(Ae.tileID);z.activeTexture.set(F.TEXTURE0),F.bindTexture(F.TEXTURE_2D,de.texture);const Oe={u_matrix:C.transform.calculatePosMatrix(Ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(C.transform.zoom)};Te.draw(z,F.TRIANGLES,X,ar.disabled,q,rr.backCCW,Oe,xe,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments),A.coordsIndex.push(Ae.tileID.key)}z.bindFramebuffer.set(null),z.viewport.set([0,0,C.width,C.height])}(this,this.style.map.terrain))}renderLayer(u,p,g,y){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(y||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(C,A,z,F,q){if(C.renderPass!=="translucent")return;const X=ar.disabled,Y=C.colorModeForRenderPass();(z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(de,Ce,Te,Ae,xe,Oe,Ye){const De=Ce.transform,He=xe==="map",Qe=Oe==="map";for(const et of de){const at=Ae.getTile(et),Et=at.getBucket(Te);if(!Et||!Et.text||!Et.text.segments.get().length)continue;const bt=o.ag(Et.textSizeData,De.zoom),Rt=xn(at,1,Ce.transform.zoom),Xt=Fs(et.posMatrix,Qe,He,Ce.transform,Rt),Sn=Te.layout.get("icon-text-fit")!=="none"&&Et.hasIconData();if(bt){const Nt=Math.pow(2,De.zoom-at.tileID.overscaledZ);Ou(Et,He,Qe,Ye,De,Xt,et.posMatrix,Nt,bt,Sn,Ce.style.map.terrain?(gn,Tn)=>Ce.style.map.terrain.getElevation(et,gn,Tn):null)}}}(F,C,z,A,z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),q),z.paint.get("icon-opacity").constantOr(1)!==0&&ta(C,A,z,F,!1,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),z.layout.get("icon-rotation-alignment"),z.layout.get("icon-pitch-alignment"),z.layout.get("icon-keep-upright"),X,Y),z.paint.get("text-opacity").constantOr(1)!==0&&ta(C,A,z,F,!0,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.layout.get("text-keep-upright"),X,Y),A.map.showCollisionBoxes&&(Lu(C,A,z,F,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),!0),Lu(C,A,z,F,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),!1))})(u,p,g,y,this.style.placement.variableOffsets);break;case"circle":(function(C,A,z,F){if(C.renderPass!=="translucent")return;const q=z.paint.get("circle-opacity"),X=z.paint.get("circle-stroke-width"),Y=z.paint.get("circle-stroke-opacity"),de=!z.layout.get("circle-sort-key").isConstant();if(q.constantOr(1)===0&&(X.constantOr(1)===0||Y.constantOr(1)===0))return;const Ce=C.context,Te=Ce.gl,Ae=C.depthModeForSublayer(0,zn.ReadOnly),xe=ar.disabled,Oe=C.colorModeForRenderPass(),Ye=[];for(let De=0;De<F.length;De++){const He=F[De],Qe=A.getTile(He),et=Qe.getBucket(z);if(!et)continue;const at=et.programConfigurations.get(z.id),Et=C.useProgram("circle",at),bt=et.layoutVertexBuffer,Rt=et.indexBuffer,Xt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(He),Sn={programConfiguration:at,program:Et,layoutVertexBuffer:bt,indexBuffer:Rt,uniformValues:ch(C,He,Qe,z),terrainData:Xt};if(de){const Nt=et.segments.get();for(const gn of Nt)Ye.push({segments:new o.$([gn]),sortKey:gn.sortKey,state:Sn})}else Ye.push({segments:et.segments,sortKey:0,state:Sn})}de&&Ye.sort((De,He)=>De.sortKey-He.sortKey);for(const De of Ye){const{programConfiguration:He,program:Qe,layoutVertexBuffer:et,indexBuffer:at,uniformValues:Et,terrainData:bt}=De.state;Qe.draw(Ce,Te.TRIANGLES,Ae,xe,Oe,rr.disabled,Et,bt,z.id,et,at,De.segments,z.paint,C.transform.zoom,He)}})(u,p,g,y);break;case"heatmap":(function(C,A,z,F){if(z.paint.get("heatmap-opacity")!==0)if(C.renderPass==="offscreen"){const q=C.context,X=q.gl,Y=ar.disabled,de=new mr([X.ONE,X.ONE],o.aO.transparent,[!0,!0,!0,!0]);(function(Ce,Te,Ae){const xe=Ce.gl;Ce.activeTexture.set(xe.TEXTURE1),Ce.viewport.set([0,0,Te.width/4,Te.height/4]);let Oe=Ae.heatmapFbo;if(Oe)xe.bindTexture(xe.TEXTURE_2D,Oe.colorAttachment.get()),Ce.bindFramebuffer.set(Oe.framebuffer);else{const Ye=xe.createTexture();xe.bindTexture(xe.TEXTURE_2D,Ye),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_S,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_WRAP_T,xe.CLAMP_TO_EDGE),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MIN_FILTER,xe.LINEAR),xe.texParameteri(xe.TEXTURE_2D,xe.TEXTURE_MAG_FILTER,xe.LINEAR),Oe=Ae.heatmapFbo=Ce.createFramebuffer(Te.width/4,Te.height/4,!1,!1),function(De,He,Qe,et){var at,Et;const bt=De.gl,Rt=(at=De.HALF_FLOAT)!==null&&at!==void 0?at:bt.UNSIGNED_BYTE,Xt=(Et=De.RGBA16F)!==null&&Et!==void 0?Et:bt.RGBA;bt.texImage2D(bt.TEXTURE_2D,0,Xt,He.width/4,He.height/4,0,bt.RGBA,Rt,null),et.colorAttachment.set(Qe)}(Ce,Te,Ye,Oe)}})(q,C,z),q.clear({color:o.aO.transparent});for(let Ce=0;Ce<F.length;Ce++){const Te=F[Ce];if(A.hasRenderableParent(Te))continue;const Ae=A.getTile(Te),xe=Ae.getBucket(z);if(!xe)continue;const Oe=xe.programConfigurations.get(z.id),Ye=C.useProgram("heatmap",Oe),{zoom:De}=C.transform;Ye.draw(q,X.TRIANGLES,zn.disabled,Y,de,rr.disabled,Zi(Te.posMatrix,Ae,De,z.paint.get("heatmap-intensity")),null,z.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,z.paint,C.transform.zoom,Oe)}q.viewport.set([0,0,C.width,C.height])}else C.renderPass==="translucent"&&(C.context.setColorMode(C.colorModeForRenderPass()),function(q,X){const Y=q.context,de=Y.gl,Ce=X.heatmapFbo;if(!Ce)return;Y.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,Ce.colorAttachment.get()),Y.activeTexture.set(de.TEXTURE1);let Te=X.colorRampTexture;Te||(Te=X.colorRampTexture=new fe(Y,X.colorRamp,de.RGBA)),Te.bind(de.LINEAR,de.CLAMP_TO_EDGE),q.useProgram("heatmapTexture").draw(Y,de.TRIANGLES,zn.disabled,ar.disabled,q.colorModeForRenderPass(),rr.disabled,((Ae,xe,Oe,Ye)=>{const De=o.F();o.aN(De,0,Ae.width,Ae.height,0,0,1);const He=Ae.context.gl;return{u_matrix:De,u_world:[He.drawingBufferWidth,He.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:xe.paint.get("heatmap-opacity")}})(q,X),null,X.id,q.viewportBuffer,q.quadTriangleIndexBuffer,q.viewportSegments,X.paint,q.transform.zoom)}(C,z))})(u,p,g,y);break;case"line":(function(C,A,z,F){if(C.renderPass!=="translucent")return;const q=z.paint.get("line-opacity"),X=z.paint.get("line-width");if(q.constantOr(1)===0||X.constantOr(1)===0)return;const Y=C.depthModeForSublayer(0,zn.ReadOnly),de=C.colorModeForRenderPass(),Ce=z.paint.get("line-dasharray"),Te=z.paint.get("line-pattern"),Ae=Te.constantOr(1),xe=z.paint.get("line-gradient"),Oe=z.getCrossfadeParameters(),Ye=Ae?"linePattern":Ce?"lineSDF":xe?"lineGradient":"line",De=C.context,He=De.gl;let Qe=!0;for(const et of F){const at=A.getTile(et);if(Ae&&!at.patternsLoaded())continue;const Et=at.getBucket(z);if(!Et)continue;const bt=Et.programConfigurations.get(z.id),Rt=C.context.program.get(),Xt=C.useProgram(Ye,bt),Sn=Qe||Xt.program!==Rt,Nt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(et),gn=Te.constantOr(null);if(gn&&at.imageAtlas){const vn=at.imageAtlas,En=vn.patternPositions[gn.to.toString()],Dn=vn.patternPositions[gn.from.toString()];En&&Dn&&bt.setConstantPatternPositions(En,Dn)}const Tn=Nt?et:null,On=Ae?Ol(C,at,z,Oe,Tn):Ce?Ua(C,at,z,Ce,Oe,Tn):xe?Ts(C,at,z,Et.lineClipsArray.length,Tn):ls(C,at,z,Tn);if(Ae)De.activeTexture.set(He.TEXTURE0),at.imageAtlasTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE),bt.updatePaintBuffers(Oe);else if(Ce&&(Sn||C.lineAtlas.dirty))De.activeTexture.set(He.TEXTURE0),C.lineAtlas.bind(De);else if(xe){const vn=Et.gradients[z.id];let En=vn.texture;if(z.gradientVersion!==vn.version){let Dn=256;if(z.stepInterpolant){const _r=A.getSource().maxzoom,er=et.canonical.z===_r?Math.ceil(1<<C.transform.maxZoom-et.canonical.z):1;Dn=o.ac(o.aT(Et.maxLineLength/o.W*1024*er),256,De.maxTextureSize)}vn.gradient=o.aU({expression:z.gradientExpression(),evaluationKey:"lineProgress",resolution:Dn,image:vn.gradient||void 0,clips:Et.lineClipsArray}),vn.texture?vn.texture.update(vn.gradient):vn.texture=new fe(De,vn.gradient,He.RGBA),vn.version=z.gradientVersion,En=vn.texture}De.activeTexture.set(He.TEXTURE0),En.bind(z.stepInterpolant?He.NEAREST:He.LINEAR,He.CLAMP_TO_EDGE)}Xt.draw(De,He.TRIANGLES,Y,C.stencilModeForClipping(et),de,rr.disabled,On,Nt,z.id,Et.layoutVertexBuffer,Et.indexBuffer,Et.segments,z.paint,C.transform.zoom,bt,Et.layoutVertexBuffer2),Qe=!1}})(u,p,g,y);break;case"fill":(function(C,A,z,F){const q=z.paint.get("fill-color"),X=z.paint.get("fill-opacity");if(X.constantOr(1)===0)return;const Y=C.colorModeForRenderPass(),de=z.paint.get("fill-pattern"),Ce=C.opaquePassEnabledForLayer()&&!de.constantOr(1)&&q.constantOr(o.aO.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===Ce){const Te=C.depthModeForSublayer(1,C.renderPass==="opaque"?zn.ReadWrite:zn.ReadOnly);Ti(C,A,z,F,Te,Y,!1)}if(C.renderPass==="translucent"&&z.paint.get("fill-antialias")){const Te=C.depthModeForSublayer(z.getPaintProperty("fill-outline-color")?2:0,zn.ReadOnly);Ti(C,A,z,F,Te,Y,!0)}})(u,p,g,y);break;case"fill-extrusion":(function(C,A,z,F){const q=z.paint.get("fill-extrusion-opacity");if(q!==0&&C.renderPass==="translucent"){const X=new zn(C.context.gl.LEQUAL,zn.ReadWrite,C.depthRangeFor3D);if(q!==1||z.paint.get("fill-extrusion-pattern").constantOr(1))Ii(C,A,z,F,X,ar.disabled,mr.disabled),Ii(C,A,z,F,X,C.stencilModeFor3D(),C.colorModeForRenderPass());else{const Y=C.colorModeForRenderPass();Ii(C,A,z,F,X,ar.disabled,Y)}}})(u,p,g,y);break;case"hillshade":(function(C,A,z,F){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const q=C.context,X=C.depthModeForSublayer(0,zn.ReadOnly),Y=C.colorModeForRenderPass(),[de,Ce]=C.renderPass==="translucent"?C.stencilConfigForOverlap(F):[{},F];for(const Te of Ce){const Ae=A.getTile(Te);Ae.needsHillshadePrepare!==void 0&&Ae.needsHillshadePrepare&&C.renderPass==="offscreen"?Fu(C,Ae,z,X,ar.disabled,Y):C.renderPass==="translucent"&&Vs(C,Te,Ae,z,X,de[Te.overscaledZ],Y)}q.viewport.set([0,0,C.width,C.height])})(u,p,g,y);break;case"raster":(function(C,A,z,F){if(C.renderPass!=="translucent"||z.paint.get("raster-opacity")===0||!F.length)return;const q=C.context,X=q.gl,Y=A.getSource(),de=C.useProgram("raster"),Ce=C.colorModeForRenderPass(),[Te,Ae]=Y instanceof ir?[{},F]:C.stencilConfigForOverlap(F),xe=Ae[Ae.length-1].overscaledZ,Oe=!C.options.moving;for(const Ye of Ae){const De=C.depthModeForSublayer(Ye.overscaledZ-xe,z.paint.get("raster-opacity")===1?zn.ReadWrite:zn.ReadOnly,X.LESS),He=A.getTile(Ye);He.registerFadeDuration(z.paint.get("raster-fade-duration"));const Qe=A.findLoadedParent(Ye,0),et=Bu(He,Qe,A,z,C.transform,C.style.map.terrain);let at,Et;const bt=z.paint.get("raster-resampling")==="nearest"?X.NEAREST:X.LINEAR;q.activeTexture.set(X.TEXTURE0),He.texture.bind(bt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),q.activeTexture.set(X.TEXTURE1),Qe?(Qe.texture.bind(bt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),at=Math.pow(2,Qe.tileID.overscaledZ-He.tileID.overscaledZ),Et=[He.tileID.canonical.x*at%1,He.tileID.canonical.y*at%1]):He.texture.bind(bt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const Rt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ye),Xt=Rt?Ye:null,Sn=Xt?Xt.posMatrix:C.transform.calculatePosMatrix(Ye.toUnwrapped(),Oe),Nt=go(Sn,Et||[0,0],at||1,et,z);Y instanceof ir?de.draw(q,X.TRIANGLES,De,ar.disabled,Ce,rr.disabled,Nt,Rt,z.id,Y.boundsBuffer,C.quadTriangleIndexBuffer,Y.boundsSegments):de.draw(q,X.TRIANGLES,De,Te[Ye.overscaledZ],Ce,rr.disabled,Nt,Rt,z.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}})(u,p,g,y);break;case"background":(function(C,A,z,F){const q=z.paint.get("background-color"),X=z.paint.get("background-opacity");if(X===0)return;const Y=C.context,de=Y.gl,Ce=C.transform,Te=Ce.tileSize,Ae=z.paint.get("background-pattern");if(C.isPatternMissing(Ae))return;const xe=!Ae&&q.a===1&&X===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==xe)return;const Oe=ar.disabled,Ye=C.depthModeForSublayer(0,xe==="opaque"?zn.ReadWrite:zn.ReadOnly),De=C.colorModeForRenderPass(),He=C.useProgram(Ae?"backgroundPattern":"background"),Qe=F||Ce.coveringTiles({tileSize:Te,terrain:C.style.map.terrain});Ae&&(Y.activeTexture.set(de.TEXTURE0),C.imageManager.bind(C.context));const et=z.getCrossfadeParameters();for(const at of Qe){const Et=F?at.posMatrix:C.transform.calculatePosMatrix(at.toUnwrapped()),bt=Ae?ph(Et,X,C,Ae,{tileID:at,tileSize:Te},et):dh(Et,X,q),Rt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(at);He.draw(Y,de.TRIANGLES,Ye,Oe,De,rr.disabled,bt,Rt,z.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}})(u,0,g,y);break;case"custom":(function(C,A,z){const F=C.context,q=z.implementation;if(C.renderPass==="offscreen"){const X=q.prerender;X&&(C.setCustomLayerDefaults(),F.setColorMode(C.colorModeForRenderPass()),X.call(q,F.gl,C.transform.customLayerMatrix()),F.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),F.setColorMode(C.colorModeForRenderPass()),F.setStencilMode(ar.disabled);const X=q.renderingMode==="3d"?new zn(C.context.gl.LEQUAL,zn.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,zn.ReadOnly);F.setDepthMode(X),q.render(F.gl,C.transform.customLayerMatrix()),F.setDirty(),C.setBaseState(),F.bindFramebuffer.set(null)}})(u,0,g)}}translatePosMatrix(u,p,g,y,C){if(!g[0]&&!g[1])return u;const A=C?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(A){const q=Math.sin(A),X=Math.cos(A);g=[g[0]*X-g[1]*q,g[0]*q+g[1]*X]}const z=[C?g[0]:xn(p,g[0],this.transform.zoom),C?g[1]:xn(p,g[1],this.transform.zoom),0],F=new Float32Array(16);return o.H(F,u,z),F}saveTileTexture(u){const p=this._tileTextures[u.size[0]];p?p.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const p=this._tileTextures[u];return p&&p.length>0?p.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const p=this.imageManager.getPattern(u.from.toString()),g=this.imageManager.getPattern(u.to.toString());return!p||!g}useProgram(u,p){this.cache=this.cache||{};const g=u+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new zl(this.context,mo[u],p,ja[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new fe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:p}=this.context.gl;return this.width!==u||this.height!==p}}class jn{constructor(u,p){this.points=u,this.planes=p}static fromInvProjectionMatrix(u,p,g){const y=Math.pow(2,g),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const F=1/(z=o.af([],z,u))[3]/p*y;return o.a$(z,z,[F,F,1/z[3],F])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const F=function(de,Ce){var Te=Ce[0],Ae=Ce[1],xe=Ce[2],Oe=Te*Te+Ae*Ae+xe*xe;return Oe>0&&(Oe=1/Math.sqrt(Oe)),de[0]=Ce[0]*Oe,de[1]=Ce[1]*Oe,de[2]=Ce[2]*Oe,de}([],function(de,Ce,Te){var Ae=Ce[0],xe=Ce[1],Oe=Ce[2],Ye=Te[0],De=Te[1],He=Te[2];return de[0]=xe*He-Oe*De,de[1]=Oe*Ye-Ae*He,de[2]=Ae*De-xe*Ye,de}([],le([],C[z[0]],C[z[1]]),le([],C[z[2]],C[z[1]]))),q=-((X=F)[0]*(Y=C[z[1]])[0]+X[1]*Y[1]+X[2]*Y[2]);var X,Y;return F.concat(q)});return new jn(C,A)}}class Xi{constructor(u,p){this.min=u,this.max=p,this.center=function(g,y,C){return g[0]=.5*y[0],g[1]=.5*y[1],g[2]=.5*y[2],g}([],function(g,y,C){return g[0]=y[0]+C[0],g[1]=y[1]+C[1],g[2]=y[2]+C[2],g}([],this.min,this.max))}quadrant(u){const p=[u%2==0,u<2],g=ce(this.min),y=ce(this.max);for(let C=0;C<p.length;C++)g[C]=p[C]?this.min[C]:this.center[C],y[C]=p[C]?this.center[C]:this.max[C];return y[2]=this.max[2],new Xi(g,y)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let y=0;y<u.planes.length;y++){const C=u.planes[y];let A=0;for(let z=0;z<p.length;z++)o.b0(C,p[z])>=0&&A++;if(A===0)return 0;A!==p.length&&(g=!1)}if(g)return 2;for(let y=0;y<3;y++){let C=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let z=0;z<u.points.length;z++){const F=u.points[z][y]-this.min[y];C=Math.min(C,F),A=Math.max(A,F)}if(A<0||C>this.max[y]-this.min[y])return 0}return 1}}class Ya{constructor(u=0,p=0,g=0,y=0){if(isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=p,this.left=g,this.right=y}interpolate(u,p,g){return p.top!=null&&u.top!=null&&(this.top=o.z.number(u.top,p.top,g)),p.bottom!=null&&u.bottom!=null&&(this.bottom=o.z.number(u.bottom,p.bottom,g)),p.left!=null&&u.left!=null&&(this.left=o.z.number(u.left,p.left,g)),p.right!=null&&u.right!=null&&(this.right=o.z.number(u.right,p.right,g)),this}getCenter(u,p){const g=o.ac((this.left+u-this.right)/2,0,u),y=o.ac((this.top+p-this.bottom)/2,0,p);return new o.P(g,y)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new Ya(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ql=85.051129;class Ji{constructor(u,p,g,y,C){this.tileSize=512,this._renderWorldCopies=C===void 0||!!C,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=g??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ya,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const u=new Ji(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this.minElevationForCurrentTile=u.minElevationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const p=-o.b1(u,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=function(){var g=new o.A(4);return o.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,y,C){var A=y[0],z=y[1],F=y[2],q=y[3],X=Math.sin(C),Y=Math.cos(C);g[0]=A*Y+F*X,g[1]=z*Y+q*X,g[2]=A*-X+F*Y,g[3]=z*-X+q*Y}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const p=o.ac(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const p=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.tileZoom=Math.max(0,Math.floor(p)),this.scale=this.zoomScale(p),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,p,g){this._unmodified=!1,this._edgeInsets.interpolate(u,p,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const p=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(u){const p=[new o.b2(0,u)];if(this._renderWorldCopies){const g=this.pointCoordinate(new o.P(0,0)),y=this.pointCoordinate(new o.P(this.width,0)),C=this.pointCoordinate(new o.P(this.width,this.height)),A=this.pointCoordinate(new o.P(0,this.height)),z=Math.floor(Math.min(g.x,y.x,C.x,A.x)),F=Math.floor(Math.max(g.x,y.x,C.x,A.x)),q=1;for(let X=z-q;X<=F+q;X++)X!==0&&p.push(new o.b2(X,u))}return p}coveringTiles(u){var p,g;let y=this.coveringZoomLevel(u);const C=y;if(u.minzoom!==void 0&&y<u.minzoom)return[];u.maxzoom!==void 0&&y>u.maxzoom&&(y=u.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),z=o.Y.fromLngLat(this.center),F=Math.pow(2,y),q=[F*A.x,F*A.y,0],X=[F*z.x,F*z.y,0],Y=jn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let de=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(de=y);const Ce=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,Te=De=>({aabb:new Xi([De*F,0,0],[(De+1)*F,F,0]),zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Ae=[],xe=[],Oe=y,Ye=u.reparseOverscaled?C:y;if(this._renderWorldCopies)for(let De=1;De<=3;De++)Ae.push(Te(-De)),Ae.push(Te(De));for(Ae.push(Te(0));Ae.length>0;){const De=Ae.pop(),He=De.x,Qe=De.y;let et=De.fullyVisible;if(!et){const Xt=De.aabb.intersects(Y);if(Xt===0)continue;et=Xt===2}const at=u.terrain?q:X,Et=De.aabb.distanceX(at),bt=De.aabb.distanceY(at),Rt=Math.max(Math.abs(Et),Math.abs(bt));if(De.zoom===Oe||Rt>Ce+(1<<Oe-De.zoom)-2&&De.zoom>=de){const Xt=Oe-De.zoom,Sn=q[0]-.5-(He<<Xt),Nt=q[1]-.5-(Qe<<Xt);xe.push({tileID:new o.Q(De.zoom===Oe?Ye:De.zoom,De.wrap,De.zoom,He,Qe),distanceSq:G([X[0]-.5-He,X[1]-.5-Qe]),tileDistanceToCamera:Math.sqrt(Sn*Sn+Nt*Nt)})}else for(let Xt=0;Xt<4;Xt++){const Sn=(He<<1)+Xt%2,Nt=(Qe<<1)+(Xt>>1),gn=De.zoom+1;let Tn=De.aabb.quadrant(Xt);if(u.terrain){const On=new o.Q(gn,De.wrap,gn,Sn,Nt),vn=u.terrain.getMinMaxElevation(On),En=(p=vn.minElevation)!==null&&p!==void 0?p:this.elevation,Dn=(g=vn.maxElevation)!==null&&g!==void 0?g:this.elevation;Tn=new Xi([Tn.min[0],Tn.min[1],En],[Tn.max[0],Tn.max[1],Dn])}Ae.push({aabb:Tn,zoom:gn,x:Sn,y:Nt,wrap:De.wrap,fullyVisible:et})}}return xe.sort((De,He)=>De.distanceSq-He.distanceSq).map(De=>De.tileID)}resize(u,p){this.width=u,this.height=p,this.pixelsToGLUnits=[2/u,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const p=o.ac(u.lat,-85.051129,Ql);return new o.P(o.N(u.lng)*this.worldSize,o.O(p)*this.worldSize)}unproject(u){return new o.Y(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const p=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,y=this.pointLocation(this.centerPoint,u),C=u.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-C))return;const A=g+p-C,z=Math.cos(this._pitch)*this.cameraToCenterDistance/A/o.b3(1,y.lat),F=this.scaleZoom(z/this.tileSize);this._elevation=C,this._center=y,this.zoom=F}setLocationAtPoint(u,p){const g=this.pointCoordinate(p),y=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(u),A=new o.Y(C.x-(g.x-y.x),C.y-(g.y-y.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,p){return p?this.coordinatePoint(this.locationCoordinate(u),p.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,p){return this.coordinateLocation(this.pointCoordinate(u,p))}locationCoordinate(u){return o.Y.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,p){if(p){const de=p.pointCoordinate(u);if(de!=null)return de}const g=[u.x,u.y,0,1],y=[u.x,u.y,1,1];o.af(g,g,this.pixelMatrixInverse),o.af(y,y,this.pixelMatrixInverse);const C=g[3],A=y[3],z=g[1]/C,F=y[1]/A,q=g[2]/C,X=y[2]/A,Y=q===X?0:(0-q)/(X-q);return new o.Y(o.z.number(g[0]/C,y[0]/A,Y)/this.worldSize,o.z.number(z,F,Y)/this.worldSize)}coordinatePoint(u,p=0,g=this.pixelMatrix){const y=[u.x*this.worldSize,u.y*this.worldSize,p,1];return o.af(y,y,g),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new tt().extend(this.pointLocation(new o.P(0,u))).extend(this.pointLocation(new o.P(this.width,u))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new tt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Ql])}calculatePosMatrix(u,p=!1){const g=u.key,y=p?this._alignedPosMatrixCache:this._posMatrixCache;if(y[g])return y[g];const C=u.canonical,A=this.worldSize/this.zoomScale(C.z),z=C.x+Math.pow(2,C.z)*u.wrap,F=o.an(new Float64Array(16));return o.H(F,F,[z*A,C.y*A,0]),o.J(F,F,[A/o.W,A/o.W,1]),o.K(F,p?this.alignedProjMatrix:this.projMatrix,F),y[g]=new Float32Array(F),y[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(u,p){p=o.ac(+p,this.minZoom,this.maxZoom);const g={center:new o.M(u.lng,u.lat),zoom:p};let y=this.lngRange;if(!this._renderWorldCopies&&y===null){const De=179.9999999999;y=[-De,De]}const C=this.tileSize*this.zoomScale(g.zoom);let A=0,z=C,F=0,q=C,X=0,Y=0;const{x:de,y:Ce}=this.size;if(this.latRange){const De=this.latRange;A=o.O(De[1])*C,z=o.O(De[0])*C,z-A<Ce&&(X=Ce/(z-A))}y&&(F=o.b1(o.N(y[0])*C,0,C),q=o.b1(o.N(y[1])*C,0,C),q<F&&(q+=C),q-F<de&&(Y=de/(q-F)));const{x:Te,y:Ae}=this.project.call({worldSize:C},u);let xe,Oe;const Ye=Math.max(Y||0,X||0);if(Ye){const De=new o.P(Y?(q+F)/2:Te,X?(z+A)/2:Ae);return g.center=this.unproject.call({worldSize:C},De).wrap(),g.zoom+=this.scaleZoom(Ye),g}if(this.latRange){const De=Ce/2;Ae-De<A&&(Oe=A+De),Ae+De>z&&(Oe=z-De)}if(y){const De=(F+q)/2;let He=Te;this._renderWorldCopies&&(He=o.b1(Te,De-C/2,De+C/2));const Qe=de/2;He-Qe<F&&(xe=F+Qe),He+Qe>q&&(xe=q-Qe)}if(xe!==void 0||Oe!==void 0){const De=new o.P(xe??Te,Oe??Ae);g.center=this.unproject.call({worldSize:C},De).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this._unmodified,{center:p,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=p,this.zoom=g,this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,p=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b3(1,this.center.lat)*this.worldSize;let y=o.an(new Float64Array(16));o.J(y,y,[this.width/2,-this.height/2,1]),o.H(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=o.an(new Float64Array(16)),o.J(y,y,[1,-1,1]),o.H(y,y,[-1,-1,0]),o.J(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;const C=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this.minElevationForCurrentTile),z=C-A*this._pixelPerMeter/Math.cos(this._pitch),F=A<0?z:C,q=Math.PI/2+this._pitch,X=this._fov*(.5+u.y/this.height),Y=Math.sin(X)*F/Math.sin(o.ac(Math.PI-q-X,.01,Math.PI-.01)),de=this.getHorizon(),Ce=2*Math.atan(de/this.cameraToCenterDistance)*(.5+u.y/(2*de)),Te=Math.sin(Ce)*F/Math.sin(o.ac(Math.PI-q-Ce,.01,Math.PI-.01)),Ae=Math.min(Y,Te),xe=1.01*(Math.cos(Math.PI/2-this._pitch)*Ae+F),Oe=this.height/50;y=new Float64Array(16),o.b4(y,this._fov,this.width/this.height,Oe,xe),y[8]=2*-u.x/this.width,y[9]=2*u.y/this.height,o.J(y,y,[1,-1,1]),o.H(y,y,[0,0,-this.cameraToCenterDistance]),o.b5(y,y,this._pitch),o.ad(y,y,this.angle),o.H(y,y,[-p,-g,0]),this.mercatorMatrix=o.J([],y,[this.worldSize,this.worldSize,this.worldSize]),o.J(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.K(new Float64Array(16),this.labelPlaneMatrix,y),o.H(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=o.ar([],y),this.pixelMatrix3D=o.K(new Float64Array(16),this.labelPlaneMatrix,y);const Ye=this.width%2/2,De=this.height%2/2,He=Math.cos(this.angle),Qe=Math.sin(this.angle),et=p-Math.round(p)+He*Ye+Qe*De,at=g-Math.round(g)+He*De+Qe*Ye,Et=new Float64Array(y);if(o.H(Et,Et,[et>.5?et-1:et,at>.5?at-1:at,0]),this.alignedProjMatrix=Et,y=o.ar(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new o.P(0,0)),p=[u.x*this.worldSize,u.y*this.worldSize,0,1];return o.af(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,u))}getCameraQueryGeometry(u){const p=this.getCameraPoint();if(u.length===1)return[u[0],p];{let g=p.x,y=p.y,C=p.x,A=p.y;for(const z of u)g=Math.min(g,z.x),y=Math.min(y,z.y),C=Math.max(C,z.x),A=Math.max(A,z.y);return[new o.P(g,y),new o.P(C,y),new o.P(C,A),new o.P(g,A),new o.P(g,y)]}}lngLatToCameraDepth(u,p){const g=this.locationCoordinate(u),y=[g.x*this.worldSize,g.y*this.worldSize,p,1];return o.af(y,y,this.projMatrix),y[2]/y[3]}}function Nu($,u){let p,g=!1,y=null,C=null;const A=()=>{y=null,g&&($.apply(C,p),y=setTimeout(A,u),g=!1)};return(...z)=>(g=!0,C=this,p=z,y||A(),y)}class Vu{constructor(u){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let g;return p.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(g=y)}),(g&&g[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(p.length>=3&&!p.some(g=>isNaN(g))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:g,pitch:+(p[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,p)}catch{}},this._updateHash=Nu(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const p=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,y=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,y),A=Math.round(p.lng*C)/C,z=Math.round(p.lat*C)/C,F=this._map.getBearing(),q=this._map.getPitch();let X="";if(X+=u?`/${A}/${z}/${g}`:`${g}/${z}/${A}`,(F||q)&&(X+="/"+Math.round(10*F)/10),q&&(X+=`/${Math.round(q)}`),this._hashName){const Y=this._hashName;let de=!1;const Ce=window.location.hash.slice(1).split("&").map(Te=>{const Ae=Te.split("=")[0];return Ae===Y?(de=!0,`${Ae}=${X}`):Te}).filter(Te=>Te);return de||Ce.push(`${Y}=${X}`),`#${Ce.join("&")}`}return`#${X}`}}const ia={linearity:.3,easing:o.b6(0,0,.3,1)},Ch=o.e({deceleration:2500,maxSpeed:1400},ia),ec=o.e({deceleration:20,maxSpeed:1400},ia),Qa=o.e({deceleration:1e3,maxSpeed:360},ia),el=o.e({deceleration:1e3,maxSpeed:90},ia);class tc{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,p=b.now();for(;u.length>0&&p-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)p.zoom+=C.zoomDelta||0,p.bearing+=C.bearingDelta||0,p.pitch+=C.pitchDelta||0,C.panDelta&&p.pan._add(C.panDelta),C.around&&(p.around=C.around),C.pinchAround&&(p.pinchAround=C.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(p.pan.mag()){const C=oa(p.pan.mag(),g,o.e({},Ch,u||{}));y.offset=p.pan.mult(C.amount/p.pan.mag()),y.center=this._map.transform.center,$o(y,C)}if(p.zoom){const C=oa(p.zoom,g,ec);y.zoom=this._map.transform.zoom+C.amount,$o(y,C)}if(p.bearing){const C=oa(p.bearing,g,Qa);y.bearing=this._map.transform.bearing+o.ac(C.amount,-179,179),$o(y,C)}if(p.pitch){const C=oa(p.pitch,g,el);y.pitch=this._map.transform.pitch+C.amount,$o(y,C)}if(y.zoom||y.bearing){const C=p.pinchAround===void 0?p.around:p.pinchAround;y.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function $o($,u){(!$.duration||$.duration<u.duration)&&($.duration=u.duration,$.easing=u.easing)}function oa($,u,p){const{maxSpeed:g,linearity:y,deceleration:C}=p,A=o.ac($*y/(u/1e3),-g,g),z=Math.abs(A)/(C*y);return{easing:p.easing,duration:1e3*z,amount:A*(z/2)}}class ts extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,g,y={}){const C=x.mousePos(p.getCanvas(),g),A=p.unproject(C);super(u,o.e({point:C,lngLat:A,originalEvent:g},y)),this._defaultPrevented=!1,this.target=p}}class Ei extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,g){const y=u==="touchend"?g.changedTouches:g.touches,C=x.touchPos(p.getCanvasContainer(),y),A=C.map(F=>p.unproject(F)),z=C.reduce((F,q,X,Y)=>F.add(q.div(Y.length)),new o.P(0,0));super(u,{points:C,point:z,lngLats:A,lngLat:p.unproject(z),originalEvent:g}),this._defaultPrevented=!1}}class tl extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,g){super(u,{originalEvent:g}),this._defaultPrevented=!1}}class Sh{constructor(u,p){this._map=u,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new tl(u.type,this._map,u))}mousedown(u,p){return this._mousedownPos=p,this._firePreventable(new ts(u.type,this._map,u))}mouseup(u){this._map.fire(new ts(u.type,this._map,u))}click(u,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new ts(u.type,this._map,u))}dblclick(u){return this._firePreventable(new ts(u.type,this._map,u))}mouseover(u){this._map.fire(new ts(u.type,this._map,u))}mouseout(u){this._map.fire(new ts(u.type,this._map,u))}touchstart(u){return this._firePreventable(new Ei(u.type,this._map,u))}touchmove(u){this._map.fire(new Ei(u.type,this._map,u))}touchend(u){this._map.fire(new Ei(u.type,this._map,u))}touchcancel(u){this._map.fire(new Ei(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class nc{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new ts(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ts("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new ts(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class aa{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(o.P.convert(u),this._map.terrain)}}class rc{constructor(u,p){this._map=u,this._tr=new aa(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,p){this.isEnabled()&&u.shiftKey&&u.button===0&&(x.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(u,p){if(!this._active)return;const g=p;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=g,this._box||(this._box=x.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const C=Math.min(y.x,g.x),A=Math.max(y.x,g.x),z=Math.min(y.y,g.y),F=Math.max(y.y,g.y);x.setTransform(this._box,`translate(${C}px,${z}px)`),this._box.style.width=A-C+"px",this._box.style.height=F-z+"px"}mouseupWindow(u,p){if(!this._active||u.button!==0)return;const g=this._startPos,y=p;if(this.reset(),x.suppressClick(),g.x!==y.x||g.y!==y.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:u})),{cameraAnimation:C=>C.fitScreenCoordinates(g,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(x.remove(this._box),this._box=null),x.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,p){return this._map.fire(new o.k(u,{originalEvent:p}))}}function wo($,u){if($.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${$.length}, points ${u.length}`);const p={};for(let g=0;g<$.length;g++)p[$[g].identifier]=u[g];return p}class sc{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,p,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),g.length===this.numTouches&&(this.centroid=function(y){const C=new o.P(0,0);for(const A of y)C._add(A);return C.div(y.length)}(p),this.touches=wo(g,p)))}touchmove(u,p,g){if(this.aborted||!this.centroid)return;const y=wo(g,p);for(const C in this.touches){const A=y[C];(!A||A.dist(this.touches[C])>30)&&(this.aborted=!0)}}touchend(u,p,g){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class nl{constructor(u){this.singleTap=new sc(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,p,g){this.singleTap.touchstart(u,p,g)}touchmove(u,p,g){this.singleTap.touchmove(u,p,g)}touchend(u,p,g){const y=this.singleTap.touchend(u,p,g);if(y){const C=u.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(y)<30;if(C&&A||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Uu{constructor(u){this._tr=new aa(u),this._zoomIn=new nl({numTouches:1,numTaps:2}),this._zoomOut=new nl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,p,g){this._zoomIn.touchstart(u,p,g),this._zoomOut.touchstart(u,p,g)}touchmove(u,p,g){this._zoomIn.touchmove(u,p,g),this._zoomOut.touchmove(u,p,g)}touchend(u,p,g){const y=this._zoomIn.touchend(u,p,g),C=this._zoomOut.touchend(u,p,g),A=this._tr;return y?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(y)},{originalEvent:u})}):C?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(C)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pi{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const p=this._moveFunction(...u);if(p.bearingDelta||p.pitchDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(u,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=p.length?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,p){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const y=p.length?p[0]:p;return!this._moved&&y.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(g,y))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&x.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ic={0:1,2:2};class oc{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const p=x.mouseButton(u);this._eventButton=p}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!function(p,g){const y=ic[g];return p.buttons===void 0||(p.buttons&y)!==y}(u,this._eventButton)}isValidEndEvent(u){return x.mouseButton(u)===this._eventButton}}class ac{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const lr=$=>{$.mousedown=$.dragStart,$.mousemoveWindow=$.dragMove,$.mouseup=$.dragEnd,$.contextmenu=u=>{u.preventDefault()}},Ai=({enable:$,clickTolerance:u,bearingDegreesPerPixelMoved:p=.8})=>{const g=new oc({checkCorrectEvent:y=>x.mouseButton(y)===0&&y.ctrlKey||x.mouseButton(y)===2});return new Pi({clickTolerance:u,move:(y,C)=>({bearingDelta:(C.x-y.x)*p}),moveStateManager:g,enable:$,assignEvents:lr})},Es=({enable:$,clickTolerance:u,pitchDegreesPerPixelMoved:p=-.5})=>{const g=new oc({checkCorrectEvent:y=>x.mouseButton(y)===0&&y.ctrlKey||x.mouseButton(y)===2});return new Pi({clickTolerance:u,move:(y,C)=>({pitchDelta:(C.y-y.y)*p}),moveStateManager:g,enable:$,assignEvents:lr})};class lc{constructor(u,p){this._clickTolerance=u.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(u,p,g){return this._calculateTransform(u,p,g)}touchmove(u,p,g){if(this._active&&!(g.length<this.minTouchs()))return u.preventDefault(),this._calculateTransform(u,p,g)}touchend(u,p,g){this._calculateTransform(u,p,g),this._active&&g.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,p,g){g.length>0&&(this._active=!0);const y=wo(g,p),C=new o.P(0,0),A=new o.P(0,0);let z=0;for(const q in y){const X=y[q],Y=this._touches[q];Y&&(C._add(X),A._add(X.sub(Y)),z++,y[q]=X)}if(this._touches=y,z<this.minTouchs()||!A.mag())return;const F=A.div(z);return this._sum._add(F),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(z),panDelta:F}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class la{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,p,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([p[0],p[1]]))}touchmove(u,p,g){if(!this._firstTwoTouches)return;u.preventDefault();const[y,C]=this._firstTwoTouches,A=ca(g,p,y),z=ca(g,p,C);if(!A||!z)return;const F=this._aroundCenter?null:A.add(z).div(2);return this._move([A,z],F,u)}touchend(u,p,g){if(!this._firstTwoTouches)return;const[y,C]=this._firstTwoTouches,A=ca(g,p,y),z=ca(g,p,C);A&&z||(this._active&&x.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ca($,u,p){for(let g=0;g<$.length;g++)if($[g].identifier===p)return u[g]}function Yi($,u){return Math.log($/u)/Math.LN2}class xo extends la{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,p){const g=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Yi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Yi(this._distance,g),pinchAround:p}}}function rl($,u){return 180*$.angleWith(u)/Math.PI}class cc extends la{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,p,g){const y=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:rl(this._vector,y),pinchAround:p}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const p=25/(Math.PI*this._minDiameter)*360,g=rl(u,this._startVector);return Math.abs(g)<p}}function sl($){return Math.abs($.y)>Math.abs($.x)}class uc extends la{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,p,g){super.touchstart(u,p,g),this._currentTouchCount=g.length}_start(u){this._lastPoints=u,sl(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,p,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=u[0].sub(this._lastPoints[0]),C=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,C,g.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(y.y+C.y)/2*-.5}):void 0}gestureBeginsVertically(u,p,g){if(this._valid!==void 0)return this._valid;const y=u.mag()>=2,C=p.mag()>=2;if(!y&&!C)return;if(!y||!C)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const A=u.y>0==p.y>0;return sl(u)&&sl(p)&&A}}const ju={panStep:100,bearingStep:15,pitchStep:10};class fc{constructor(u){this._tr=new aa(u);const p=ju;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let p=0,g=0,y=0,C=0,A=0;switch(u.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:u.shiftKey?g=-1:(u.preventDefault(),C=-1);break;case 39:u.shiftKey?g=1:(u.preventDefault(),C=1);break;case 38:u.shiftKey?y=1:(u.preventDefault(),A=-1);break;case 40:u.shiftKey?y=-1:(u.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(g=0,y=0),{cameraAnimation:z=>{const F=this._tr;z.easeTo({duration:300,easeId:"keyboardHandler",easing:Qi,zoom:p?Math.round(F.zoom)+p*(u.shiftKey?2:1):F.zoom,bearing:F.bearing+g*this._bearingStep,pitch:F.pitch+y*this._pitchStep,offset:[-C*this._panStep,-A*this._panStep],center:F.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Qi($){return $*(2-$)}const hc=4.000244140625;class dc{constructor(u,p){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=u,this._tr=new aa(u),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!u[this._map.cooperativeGestures._bypassKey])return;let p=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const g=b.now(),y=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,p!==0&&p%hc==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(y*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),u.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=u,this._delta-=p,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=x.mousePos(this._map.getCanvas(),u),g=this._tr;this._around=p.y>g.transform.height/2-g.transform.getHorizon()?o.M.convert(this._aroundCenter?g.center:g.unproject(p)):o.M.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>hc?this._wheelZoomRate:this._defaultZoomRate;let F=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&F!==0&&(F=1/F);const q=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(q*F))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,g=this._startZoom,y=this._easing;let C,A=!1;if(this._type==="wheel"&&g&&y){const z=Math.min((b.now()-this._lastWheelEventTime)/200,1),F=y(z);C=o.z.number(g,p,F),z<1?this._frameId||(this._frameId=!0):A=!0}else C=p,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:C-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let p=o.b7;if(this._prevEase){const g=this._prevEase,y=(b.now()-g.start)/g.duration,C=g.easing(y+.01)-g.easing(y),A=.27/Math.sqrt(C*C+1e-4)*.01,z=Math.sqrt(.0729-A*A);p=o.b6(A,z,.25,1)}return this._prevEase={start:b.now(),duration:u,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class pc{constructor(u,p){this._clickZoom=u,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qu{constructor(u){this._tr=new aa(u),this.reset()}reset(){this._active=!1}dblclick(u,p){return u.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hu{constructor(){this._tap=new nl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,p,g){if(!this._swipePoint)if(this._tapTime){const y=p[0],C=u.timeStamp-this._tapTime<500,A=this._tapPoint.dist(y)<30;C&&A?g.length>0&&(this._swipePoint=y,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(u,p,g)}touchmove(u,p,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const y=p[0],C=y.y-this._swipePoint.y;return this._swipePoint=y,u.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(u,p,g)}touchend(u,p,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const y=this._tap.touchend(u,p,g);y&&(this._tapTime=u.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mc{constructor(u,p,g){this._el=u,this._mousePan=p,this._touchPan=g}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class _c{constructor(u,p,g){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=p,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ko{constructor(u,p,g,y){this._el=u,this._touchZoom=p,this._touchRotate=g,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class gc{constructor(u,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=x.create("div","maplibregl-cooperative-gesture-screen",u);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=p,this._container.appendChild(y);const C=document.createElement("div");C.className="maplibregl-mobile-message",C.textContent=g,this._container.appendChild(C),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(x.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(u){this._onCooperativeGesture(u.touches.length===1)}wheel(u){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!u[this._bypassKey])}_onCooperativeGesture(u){this._enabled&&u&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const vs=$=>$.zoom||$.drag||$.pitch||$.rotate;class ti extends o.k{}function il($){return $.panDelta&&$.panDelta.mag()||$.zoomDelta||$.bearingDelta||$.pitchDelta}class ni{constructor(u,p){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,C)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=y.type==="renderFrame"?void 0:y,z={needsRenderFrame:!1},F={},q={},X=y.touches,Y=X?this._getMapTouches(X):void 0,de=Y?x.touchPos(this._map.getCanvas(),Y):x.mousePos(this._map.getCanvas(),y);for(const{handlerName:Ae,handler:xe,allowed:Oe}of this._handlers){if(!xe.isEnabled())continue;let Ye;this._blockedByActive(q,Oe,Ae)?xe.reset():xe[C||y.type]&&(Ye=xe[C||y.type](y,de,Y),this.mergeHandlerResult(z,F,Ye,Ae,A),Ye&&Ye.needsRenderFrame&&this._triggerRenderFrame()),(Ye||xe.isActive())&&(q[Ae]=xe)}const Ce={};for(const Ae in this._previousActiveHandlers)q[Ae]||(Ce[Ae]=A);this._previousActiveHandlers=q,(Object.keys(Ce).length||il(z))&&(this._changes.push([z,F,Ce]),this._triggerRenderFrame()),(Object.keys(q).length||il(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Te}=z;Te&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Te(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new tc(u),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,C,A]of this._listeners)x.addEventListener(y,C,y===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[u,p,g]of this._listeners)x.removeEventListener(u,p,u===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(u){const p=this._map,g=p.getCanvasContainer();this._add("mapEvent",new Sh(p,u));const y=p.boxZoom=new rc(p,u);this._add("boxZoom",y),u.interactive&&u.boxZoom&&y.enable();const C=p.cooperativeGestures=new gc(p,u.cooperativeGestures);this._add("cooperativeGestures",C),u.cooperativeGestures&&C.enable();const A=new Uu(p),z=new qu(p);p.doubleClickZoom=new pc(z,A),this._add("tapZoom",A),this._add("clickZoom",z),u.interactive&&u.doubleClickZoom&&p.doubleClickZoom.enable();const F=new Hu;this._add("tapDragZoom",F);const q=p.touchPitch=new uc(p);this._add("touchPitch",q),u.interactive&&u.touchPitch&&p.touchPitch.enable(u.touchPitch);const X=Ai(u),Y=Es(u);p.dragRotate=new _c(u,X,Y),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate"]),u.interactive&&u.dragRotate&&p.dragRotate.enable();const de=(({enable:Ye,clickTolerance:De})=>{const He=new oc({checkCorrectEvent:Qe=>x.mouseButton(Qe)===0&&!Qe.ctrlKey});return new Pi({clickTolerance:De,move:(Qe,et)=>({around:et,panDelta:et.sub(Qe)}),activateOnStart:!0,moveStateManager:He,enable:Ye,assignEvents:lr})})(u),Ce=new lc(u,p);p.dragPan=new mc(g,de,Ce),this._add("mousePan",de),this._add("touchPan",Ce,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&p.dragPan.enable(u.dragPan);const Te=new cc,Ae=new xo;p.touchZoomRotate=new ko(g,Ae,Te,F),this._add("touchRotate",Te,["touchPan","touchZoom"]),this._add("touchZoom",Ae,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&p.touchZoomRotate.enable(u.touchZoomRotate);const xe=p.scrollZoom=new dc(p,()=>this._triggerRenderFrame());this._add("scrollZoom",xe,["mousePan"]),u.interactive&&u.scrollZoom&&p.scrollZoom.enable(u.scrollZoom);const Oe=p.keyboard=new fc(p);this._add("keyboard",Oe),u.interactive&&u.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new nc(p))}_add(u,p,g){this._handlers.push({handlerName:u,handler:p,allowed:g}),this._handlersById[u]=p}stop(u){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!vs(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,p,g){for(const y in u)if(y!==g&&(!p||p.indexOf(y)<0))return!0;return!1}_getMapTouches(u){const p=[];for(const g of u)this._el.contains(g.target)&&p.push(g);return p}mergeHandlerResult(u,p,g,y,C){if(!g)return;o.e(u,g);const A={handlerName:y,originalEvent:g.originalEvent||C};g.zoomDelta!==void 0&&(p.zoom=A),g.panDelta!==void 0&&(p.drag=A),g.pitchDelta!==void 0&&(p.pitch=A),g.bearingDelta!==void 0&&(p.rotate=A)}_applyChanges(){const u={},p={},g={};for(const[y,C,A]of this._changes)y.panDelta&&(u.panDelta=(u.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(u.around=y.around),y.pinchAround!==void 0&&(u.pinchAround=y.pinchAround),y.noInertia&&(u.noInertia=y.noInertia),o.e(p,C),o.e(g,A);this._updateMapTransform(u,p,g),this._changes=[]}_updateMapTransform(u,p,g){const y=this._map,C=y._getTransformForUpdate(),A=y.terrain;if(!(il(u)||A&&this._terrainMovement))return this._fireEvents(p,g,!0);let{panDelta:z,zoomDelta:F,bearingDelta:q,pitchDelta:X,around:Y,pinchAround:de}=u;de!==void 0&&(Y=de),y._stop(!0),Y=Y||y.transform.centerPoint;const Ce=C.pointLocation(z?Y.sub(z):Y);q&&(C.bearing+=q),X&&(C.pitch+=X),F&&(C.zoom+=F),A?this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?C.center=C.pointLocation(C.centerPoint.sub(z)):C.setLocationAtPoint(Ce,Y):(this._terrainMovement=!0,this._map._elevationFreeze=!0,C.setLocationAtPoint(Ce,Y),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,C.recalculateZoom(y.terrain)})):C.setLocationAtPoint(Ce,Y),y._applyUpdatedTransform(C),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(p,g,!0)}_fireEvents(u,p,g){const y=vs(this._eventsInProgress),C=vs(u),A={};for(const X in u){const{originalEvent:Y}=u[X];this._eventsInProgress[X]||(A[`${X}start`]=Y),this._eventsInProgress[X]=u[X]}!y&&C&&this._fireEvent("movestart",C.originalEvent);for(const X in A)this._fireEvent(X,A[X]);C&&this._fireEvent("move",C.originalEvent);for(const X in u){const{originalEvent:Y}=u[X];this._fireEvent(X,Y)}const z={};let F;for(const X in this._eventsInProgress){const{handlerName:Y,originalEvent:de}=this._eventsInProgress[X];this._handlersById[Y].isActive()||(delete this._eventsInProgress[X],F=p[Y]||de,z[`${X}end`]=F)}for(const X in z)this._fireEvent(X,z[X]);const q=vs(this._eventsInProgress);if(g&&(y||C)&&!q){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Y=de=>de!==0&&-this._bearingSnap<de&&de<this._bearingSnap;!X||!X.essential&&b.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:F})),Y(this._map.getBearing())&&this._map.resetNorth()):(Y(X.bearing||this._map.getBearing())&&(X.bearing=0),X.freezeElevation=!0,this._map.easeTo(X,{originalEvent:F})),this._updatingCamera=!1}}_fireEvent(u,p){this._map.fire(new o.k(u,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new ti("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ua extends o.E{constructor(u,p){super(),this._renderFrameCallback=()=>{const g=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=p.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.M(this.transform.center.lng,this.transform.center.lat)}setCenter(u,p){return this.jumpTo({center:u},p)}panBy(u,p,g){return u=o.P.convert(u).mult(-1),this.panTo(this.transform.center,o.e({offset:u},p),g)}panTo(u,p,g){return this.easeTo(o.e({center:u},p),g)}getZoom(){return this.transform.zoom}setZoom(u,p){return this.jumpTo({zoom:u},p),this}zoomTo(u,p,g){return this.easeTo(o.e({zoom:u},p),g)}zoomIn(u,p){return this.zoomTo(this.getZoom()+1,u,p),this}zoomOut(u,p){return this.zoomTo(this.getZoom()-1,u,p),this}getBearing(){return this.transform.bearing}setBearing(u,p){return this.jumpTo({bearing:u},p),this}getPadding(){return this.transform.padding}setPadding(u,p){return this.jumpTo({padding:u},p),this}rotateTo(u,p,g){return this.easeTo(o.e({bearing:u},p),g)}resetNorth(u,p){return this.rotateTo(0,o.e({duration:1e3},u),p),this}resetNorthPitch(u,p){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},u),p),this}snapToNorth(u,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,p):this}getPitch(){return this.transform.pitch}setPitch(u,p){return this.jumpTo({pitch:u},p),this}cameraForBounds(u,p){u=tt.convert(u);const g=p&&p.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),g,p)}_cameraForBoxAndBearing(u,p,g,y){const C={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:C,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const Xt=y.padding;y.padding={top:Xt,bottom:Xt,right:Xt,left:Xt}}y.padding=o.e(C,y.padding);const A=this.transform,z=A.padding,F=new tt(u,p),q=A.project(F.getNorthWest()),X=A.project(F.getNorthEast()),Y=A.project(F.getSouthEast()),de=A.project(F.getSouthWest()),Ce=o.b8(-g),Te=q.rotate(Ce),Ae=X.rotate(Ce),xe=Y.rotate(Ce),Oe=de.rotate(Ce),Ye=new o.P(Math.max(Te.x,Ae.x,Oe.x,xe.x),Math.max(Te.y,Ae.y,Oe.y,xe.y)),De=new o.P(Math.min(Te.x,Ae.x,Oe.x,xe.x),Math.min(Te.y,Ae.y,Oe.y,xe.y)),He=Ye.sub(De),Qe=(A.width-(z.left+z.right+y.padding.left+y.padding.right))/He.x,et=(A.height-(z.top+z.bottom+y.padding.top+y.padding.bottom))/He.y;if(et<0||Qe<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const at=Math.min(A.scaleZoom(A.scale*Math.min(Qe,et)),y.maxZoom),Et=o.P.convert(y.offset),bt=new o.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(o.b8(g)),Rt=Et.add(bt).mult(A.scale/A.zoomScale(at));return{center:A.unproject(q.add(Y).div(2).sub(Rt)),zoom:at,bearing:g}}fitBounds(u,p,g){return this._fitInternal(this.cameraForBounds(u,p),p,g)}fitScreenCoordinates(u,p,g,y,C){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(u)),this.transform.pointLocation(o.P.convert(p)),g,y),y,C)}_fitInternal(u,p,g){return u?(delete(p=o.e(u,p)).padding,p.linear?this.easeTo(p,g):this.flyTo(p,g)):this}jumpTo(u,p){this.stop();const g=this._getTransformForUpdate();let y=!1,C=!1,A=!1;return"zoom"in u&&g.zoom!==+u.zoom&&(y=!0,g.zoom=+u.zoom),u.center!==void 0&&(g.center=o.M.convert(u.center)),"bearing"in u&&g.bearing!==+u.bearing&&(C=!0,g.bearing=+u.bearing),"pitch"in u&&g.pitch!==+u.pitch&&(A=!0,g.pitch=+u.pitch),u.padding==null||g.isPaddingEqual(u.padding)||(g.padding=u.padding),this._applyUpdatedTransform(g),this.fire(new o.k("movestart",p)).fire(new o.k("move",p)),y&&this.fire(new o.k("zoomstart",p)).fire(new o.k("zoom",p)).fire(new o.k("zoomend",p)),C&&this.fire(new o.k("rotatestart",p)).fire(new o.k("rotate",p)).fire(new o.k("rotateend",p)),A&&this.fire(new o.k("pitchstart",p)).fire(new o.k("pitch",p)).fire(new o.k("pitchend",p)),this.fire(new o.k("moveend",p))}calculateCameraOptionsFromTo(u,p,g,y=0){const C=o.Y.fromLngLat(u,p),A=o.Y.fromLngLat(g,y),z=A.x-C.x,F=A.y-C.y,q=A.z-C.z,X=Math.hypot(z,F,q);if(X===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(z,F),de=this.transform.scaleZoom(this.transform.cameraToCenterDistance/X/this.transform.tileSize),Ce=180*Math.atan2(z,-F)/Math.PI;let Te=180*Math.acos(Y/X)/Math.PI;return Te=q<0?90-Te:90+Te,{center:A.toLngLat(),zoom:de,pitch:Te,bearing:Ce}}easeTo(u,p){var g;this._stop(!1,u.easeId),((u=o.e({offset:[0,0],duration:500,easing:o.b7},u)).animate===!1||!u.essential&&b.prefersReducedMotion)&&(u.duration=0);const y=this._getTransformForUpdate(),C=this.getZoom(),A=this.getBearing(),z=this.getPitch(),F=this.getPadding(),q="bearing"in u?this._normalizeBearing(u.bearing,A):A,X="pitch"in u?+u.pitch:z,Y="padding"in u?u.padding:y.padding,de=o.P.convert(u.offset);let Ce=y.centerPoint.add(de);const Te=y.pointLocation(Ce),{center:Ae,zoom:xe}=y.getConstrained(o.M.convert(u.center||Te),(g=u.zoom)!==null&&g!==void 0?g:C);this._normalizeCenter(Ae);const Oe=y.project(Te),Ye=y.project(Ae).sub(Oe),De=y.zoomScale(xe-C);let He,Qe;u.around&&(He=o.M.convert(u.around),Qe=y.locationPoint(He));const et={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||xe!==C,this._rotating=this._rotating||A!==q,this._pitching=this._pitching||X!==z,this._padding=!y.isPaddingEqual(Y),this._easeId=u.easeId,this._prepareEase(p,u.noMoveStart,et),this.terrain&&this._prepareElevation(Ae),this._ease(at=>{if(this._zooming&&(y.zoom=o.z.number(C,xe,at)),this._rotating&&(y.bearing=o.z.number(A,q,at)),this._pitching&&(y.pitch=o.z.number(z,X,at)),this._padding&&(y.interpolatePadding(F,Y,at),Ce=y.centerPoint.add(de)),this.terrain&&!u.freezeElevation&&this._updateElevation(at),He)y.setLocationAtPoint(He,Qe);else{const Et=y.zoomScale(y.zoom-C),bt=xe>C?Math.min(2,De):Math.max(.5,De),Rt=Math.pow(bt,1-at),Xt=y.unproject(Oe.add(Ye.mult(at*Rt)).mult(Et));y.setLocationAtPoint(y.renderWorldCopies?Xt.wrap():Xt,Ce)}this._applyUpdatedTransform(y),this._fireMoveEvents(p)},at=>{this.terrain&&this._finalizeElevation(),this._afterEase(p,at)},u),this}_prepareEase(u,p,g={}){this._moving=!0,p||g.moving||this.fire(new o.k("movestart",u)),this._zooming&&!g.zooming&&this.fire(new o.k("zoomstart",u)),this._rotating&&!g.rotating&&this.fire(new o.k("rotatestart",u)),this._pitching&&!g.pitching&&this.fire(new o.k("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&p!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(g-(p-(g*u+this._elevationStart))/(1-u)),this._elevationTarget=p}this.transform.elevation=o.z.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(u){if(!this.transformCameraUpdate)return;const p=u.clone(),{center:g,zoom:y,pitch:C,bearing:A,elevation:z}=this.transformCameraUpdate(p);g&&(p.center=g),y!==void 0&&(p.zoom=y),C!==void 0&&(p.pitch=C),A!==void 0&&(p.bearing=A),z!==void 0&&(p.elevation=z),this.transform.apply(p)}_fireMoveEvents(u){this.fire(new o.k("move",u)),this._zooming&&this.fire(new o.k("zoom",u)),this._rotating&&this.fire(new o.k("rotate",u)),this._pitching&&this.fire(new o.k("pitch",u))}_afterEase(u,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const g=this._zooming,y=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.k("zoomend",u)),y&&this.fire(new o.k("rotateend",u)),C&&this.fire(new o.k("pitchend",u)),this.fire(new o.k("moveend",u))}flyTo(u,p){var g;if(!u.essential&&b.prefersReducedMotion){const On=o.L(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(On,p)}this.stop(),u=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b7},u);const y=this._getTransformForUpdate(),C=this.getZoom(),A=this.getBearing(),z=this.getPitch(),F=this.getPadding(),q="bearing"in u?this._normalizeBearing(u.bearing,A):A,X="pitch"in u?+u.pitch:z,Y="padding"in u?u.padding:y.padding,de=o.P.convert(u.offset);let Ce=y.centerPoint.add(de);const Te=y.pointLocation(Ce),{center:Ae,zoom:xe}=y.getConstrained(o.M.convert(u.center||Te),(g=u.zoom)!==null&&g!==void 0?g:C);this._normalizeCenter(Ae);const Oe=y.zoomScale(xe-C),Ye=y.project(Te),De=y.project(Ae).sub(Ye);let He=u.curve;const Qe=Math.max(y.width,y.height),et=Qe/Oe,at=De.mag();if("minZoom"in u){const On=o.ac(Math.min(u.minZoom,C,xe),y.minZoom,y.maxZoom),vn=Qe/y.zoomScale(On-C);He=Math.sqrt(vn/at*2)}const Et=He*He;function bt(On){const vn=(et*et-Qe*Qe+(On?-1:1)*Et*Et*at*at)/(2*(On?et:Qe)*Et*at);return Math.log(Math.sqrt(vn*vn+1)-vn)}function Rt(On){return(Math.exp(On)-Math.exp(-On))/2}function Xt(On){return(Math.exp(On)+Math.exp(-On))/2}const Sn=bt(!1);let Nt=function(On){return Xt(Sn)/Xt(Sn+He*On)},gn=function(On){return Qe*((Xt(Sn)*(Rt(vn=Sn+He*On)/Xt(vn))-Rt(Sn))/Et)/at;var vn},Tn=(bt(!0)-Sn)/He;if(Math.abs(at)<1e-6||!isFinite(Tn)){if(Math.abs(Qe-et)<1e-6)return this.easeTo(u,p);const On=et<Qe?-1:1;Tn=Math.abs(Math.log(et/Qe))/He,gn=()=>0,Nt=vn=>Math.exp(On*He*vn)}return u.duration="duration"in u?+u.duration:1e3*Tn/("screenSpeed"in u?+u.screenSpeed/He:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=A!==q,this._pitching=X!==z,this._padding=!y.isPaddingEqual(Y),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Ae),this._ease(On=>{const vn=On*Tn,En=1/Nt(vn);y.zoom=On===1?xe:C+y.scaleZoom(En),this._rotating&&(y.bearing=o.z.number(A,q,On)),this._pitching&&(y.pitch=o.z.number(z,X,On)),this._padding&&(y.interpolatePadding(F,Y,On),Ce=y.centerPoint.add(de)),this.terrain&&!u.freezeElevation&&this._updateElevation(On);const Dn=On===1?Ae:y.unproject(Ye.add(De.mult(gn(vn))).mult(En));y.setLocationAtPoint(y.renderWorldCopies?Dn.wrap():Dn,Ce),this._applyUpdatedTransform(y),this._fireMoveEvents(p)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(p)},u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,p)}if(!u){const g=this.handlers;g&&g.stop(!1)}return this}_ease(u,p,g){g.animate===!1||g.duration===0?(u(1),p()):(this._easeStart=b.now(),this._easeOptions=g,this._onEaseFrame=u,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,p){u=o.b1(u,-180,180);const g=Math.abs(u-p);return Math.abs(u-360-p)<g&&(u-=360),Math.abs(u+360-p)<g&&(u+=360),u}_normalizeCenter(u){const p=this.transform;if(!p.renderWorldCopies||p.lngRange)return;const g=u.lng-p.center.lng;u.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(o.M.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}const Gu={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Zu{constructor(u=Gu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=x.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=x.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=x.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){x.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,p){const g=this._map._getUIString(`AttributionControl.${p}`);u.title=g,u.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const p=this._map.style.sourceCaches;for(const y in p){const C=p[y];if(C.used||C.usedForTerrain){const A=C.getSource();A.attribution&&u.indexOf(A.attribution)<0&&u.push(A.attribution)}}u=u.filter(y=>String(y).trim()),u.sort((y,C)=>y.length-C.length),u=u.filter((y,C)=>{for(let A=C+1;A<u.length;A++)if(u[A].indexOf(y)>=0)return!1;return!0});const g=u.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,u.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Wu{constructor(u={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const g=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=x.create("div","maplibregl-ctrl");const p=x.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){x.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ku{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const p=++this._id;return this._queue.push({callback:u,id:p,cancelled:!1}),p}remove(u){const p=this._currentlyRunning,g=p?this._queue.concat(p):this._queue;for(const y of g)if(y.id===u)return void(y.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const g of p)if(!g.cancelled&&(g.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var fa=o.X([{name:"a_pos3d",type:"Int16",components:3}]);class Mi extends o.E{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,p){this.sourceCache.update(u,p),this._renderableTilesKeys=[];const g={};for(const y of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))g[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),o.aN(y.posMatrix,0,o.W,0,o.W,0,1),this._tiles[y.key]=new Vr(y,this.tileSize));for(const y in this._tiles)g[y]||delete this._tiles[y]}freeRtt(u){for(const p in this._tiles){const g=this._tiles[p];(!u||g.tileID.equals(u)||g.tileID.isChildOf(u)||u.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const p={};for(const g of this._renderableTilesKeys){const y=this._tiles[g].tileID;if(y.canonical.equals(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16),o.aN(C.posMatrix,0,o.W,0,o.W,0,1),p[g]=C}else if(y.canonical.isChildOf(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const A=y.canonical.z-u.canonical.z,z=y.canonical.x-(y.canonical.x>>A<<A),F=y.canonical.y-(y.canonical.y>>A<<A),q=o.W>>A;o.aN(C.posMatrix,0,q,0,q,0,1),o.H(C.posMatrix,C.posMatrix,[-z*q,-F*q,0]),p[g]=C}else if(u.canonical.isChildOf(y.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const A=u.canonical.z-y.canonical.z,z=u.canonical.x-(u.canonical.x>>A<<A),F=u.canonical.y-(u.canonical.y>>A<<A),q=o.W>>A;o.aN(C.posMatrix,0,o.W,0,o.W,0,1),o.H(C.posMatrix,C.posMatrix,[z*q,F*q,0]),o.J(C.posMatrix,C.posMatrix,[1/2**A,1/2**A,0]),p[g]=C}}return p}getSourceTile(u,p){const g=this.sourceCache._source;let y=u.overscaledZ-this.deltaZoom;if(y>g.maxzoom&&(y=g.maxzoom),y<g.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(y).key);let C=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!C||!C.dem)&&p)for(;y>=g.minzoom&&(!C||!C.dem);)C=this.sourceCache.getTileByID(u.scaledTo(y--).key);return C}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(p=>p.timeAdded>=u)}}class Qt{constructor(u,p,g){this.painter=u,this.sourceCache=new Mi(p),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,p,g,y=o.W){var C;if(!(p>=0&&p<y&&g>=0&&g<y))return 0;const A=this.getTerrainData(u),z=(C=A.tile)===null||C===void 0?void 0:C.dem;if(!z)return 0;const F=function(Te,Ae,xe){var Oe=Ae[0],Ye=Ae[1];return Te[0]=xe[0]*Oe+xe[4]*Ye+xe[12],Te[1]=xe[1]*Oe+xe[5]*Ye+xe[13],Te}([],[p/y*o.W,g/y*o.W],A.u_terrain_matrix),q=[F[0]*z.dim,F[1]*z.dim],X=Math.floor(q[0]),Y=Math.floor(q[1]),de=q[0]-X,Ce=q[1]-Y;return z.get(X,Y)*(1-de)*(1-Ce)+z.get(X+1,Y)*de*(1-Ce)+z.get(X,Y+1)*(1-de)*Ce+z.get(X+1,Y+1)*de*Ce}getElevationForLngLatZoom(u,p){const{tileID:g,mercatorX:y,mercatorY:C}=this._getOverscaledTileIDFromLngLatZoom(u,p);return this.getElevation(g,y%o.W,C%o.W,o.W)}getElevation(u,p,g,y=o.W){return this.getDEMElevation(u,p,g,y)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const y=this.painter.context,C=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new fe(y,C,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new fe(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}const p=this.sourceCache.getSourceTile(u,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const y=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new fe(y,p.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),p.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const g=p&&p+p.tileID.key+u.key;if(g&&!this._demMatrixCache[g]){const y=this.sourceCache.sourceCache._source.maxzoom;let C=u.canonical.z-p.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=y?C=u.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=u.canonical.x-(u.canonical.x>>C<<C),z=u.canonical.y-(u.canonical.y>>C<<C),F=o.b9(new Float64Array(16),[1/(o.W<<C),1/(o.W<<C),0]);o.H(F,F,[A*o.W,z*o.W,0]),this._demMatrixCache[u.key]={matrix:F,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(u){const p=this.painter,g=p.width/devicePixelRatio,y=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new fe(p.context,{width:g,height:y,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new fe(p.context,{width:g,height:y,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(g,y,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,g,y))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let C=0,A=0;C<this._coordsTextureSize;C++)for(let z=0;z<this._coordsTextureSize;z++,A+=4)p[A+0]=255&z,p[A+1]=255&C,p[A+2]=z>>8<<4|C>>8,p[A+3]=0;const g=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),y=new fe(u,g,u.gl.RGBA,{premultiply:!1});return y.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(u){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),g=this.painter.context,y=g.gl,C=Math.round(u.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(u.y*this.painter.pixelRatio/devicePixelRatio),z=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(C,z-A-1,1,1,y.RGBA,y.UNSIGNED_BYTE,p),g.bindFramebuffer.set(null);const F=p[0]+(p[2]>>4<<8),q=p[1]+((15&p[2])<<8),X=this.coordsIndex[255-p[3]],Y=X&&this.sourceCache.getTileByID(X);if(!Y)return null;const de=this._coordsTextureSize,Ce=(1<<Y.tileID.canonical.z)*de;return new o.Y((Y.tileID.canonical.x*de+F)/Ce+Y.tileID.wrap,(Y.tileID.canonical.y*de+q)/Ce,this.getElevation(Y.tileID,F,q,de))}depthAtPoint(u){const p=new Uint8Array(4),g=this.painter.context,y=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,p),g.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.painter.context,p=new o.ba,g=new o.aX,y=this.meshSize,C=o.W/y,A=y*y;for(let Y=0;Y<=y;Y++)for(let de=0;de<=y;de++)p.emplaceBack(de*C,Y*C,0);for(let Y=0;Y<A;Y+=y+1)for(let de=0;de<y;de++)g.emplaceBack(de+Y,y+de+Y+1,y+de+Y+2),g.emplaceBack(de+Y,y+de+Y+2,de+Y+1);const z=p.length,F=z+2*(y+1);for(const Y of[0,1])for(let de=0;de<=y;de++)for(const Ce of[0,1])p.emplaceBack(de*C,Y*o.W,Ce);for(let Y=0;Y<2*y;Y+=2)g.emplaceBack(F+Y,F+Y+1,F+Y+3),g.emplaceBack(F+Y,F+Y+3,F+Y+2),g.emplaceBack(z+Y,z+Y+3,z+Y+1),g.emplaceBack(z+Y,z+Y+2,z+Y+3);const q=p.length,X=q+2*(y+1);for(const Y of[0,1])for(let de=0;de<=y;de++)for(const Ce of[0,1])p.emplaceBack(Y*o.W,de*C,Ce);for(let Y=0;Y<2*y;Y+=2)g.emplaceBack(q+Y,q+Y+1,q+Y+3),g.emplaceBack(q+Y,q+Y+3,q+Y+2),g.emplaceBack(X+Y,X+Y+3,X+Y+1),g.emplaceBack(X+Y,X+Y+2,X+Y+3);return this._mesh={indexBuffer:u.createIndexBuffer(g),vertexBuffer:u.createVertexBuffer(p,fa.members),segments:o.$.simpleSegment(0,0,p.length,g.length)},this._mesh}getMeshFrameDelta(u){return 2*Math.PI*o.bb/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,p){var g;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(u,p);return(g=this.getMinMaxElevation(y).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(u){const p=this.getTerrainData(u).tile,g={minElevation:null,maxElevation:null};return p&&p.dem&&(g.minElevation=p.dem.min*this.exaggeration,g.maxElevation=p.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(u,p){const g=o.Y.fromLngLat(u.wrap()),y=(1<<p)*o.W,C=g.x*y,A=g.y*y,z=Math.floor(C/o.W),F=Math.floor(A/o.W);return{tileID:new o.Q(p,0,p,z,F),mercatorX:C,mercatorY:A}}}class Xu{constructor(u,p,g){this._context=u,this._size=p,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new fe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(g.texture),{id:u,fbo:p,texture:g,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>u.id!==p),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(u=>!u.inUse)===!1}}const ri={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ha{constructor(u,p){this.painter=u,this.terrain=p,this.pool=new Xu(u.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter(g=>!u._layers[g].isHidden(p)),this._coordsDescendingInv={};for(const g in u.sourceCaches){this._coordsDescendingInv[g]={};const y=u.sourceCaches[g].getVisibleCoordinates();for(const C of y){const A=this.terrain.sourceCache.getTerrainCoords(C);for(const z in A)this._coordsDescendingInv[g][z]||(this._coordsDescendingInv[g][z]=[]),this._coordsDescendingInv[g][z].push(A[z])}}this._coordsDescendingInvStr={};for(const g of u._order){const y=u._layers[g],C=y.source;if(ri[y.type]&&!this._coordsDescendingInvStr[C]){this._coordsDescendingInvStr[C]={};for(const A in this._coordsDescendingInv[C])this._coordsDescendingInvStr[C][A]=this._coordsDescendingInv[C][A].map(z=>z.key).sort().join()}}for(const g of this._renderableTiles)for(const y in this._coordsDescendingInvStr){const C=this._coordsDescendingInvStr[y][g.tileID.key];C&&C!==g.rttCoords[y]&&(g.rtt=[])}}renderLayer(u){if(u.isHidden(this.painter.transform.zoom))return!1;const p=u.type,g=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(ri[p]&&(this._prevType&&ri[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(u.id),!y))return!0;if(ri[this._prevType]||ri[p]&&y){this._prevType=p;const C=this._stacks.length-1,A=this._stacks[C]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(Jl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[C]){const q=this.pool.getObjectForId(z.rtt[C].id);if(q.stamp===z.rtt[C].stamp){this.pool.useObject(q);continue}}const F=this.pool.getOrCreateFreeObject();this.pool.useObject(F),this.pool.stampObject(F),z.rtt[C]={id:F.id,stamp:F.stamp},g.context.bindFramebuffer.set(F.fbo.framebuffer),g.context.clear({color:o.aO.transparent,stencil:0}),g.currentStencilSource=void 0;for(let q=0;q<A.length;q++){const X=g.style._layers[A[q]],Y=X.source?this._coordsDescendingInv[X.source][z.tileID.key]:[z.tileID];g.context.viewport.set([0,0,F.fbo.width,F.fbo.height]),g._renderTileClippingMasks(X,Y),g.renderLayer(g,g.style.sourceCaches[X.source],X,Y),X.source&&(z.rttCoords[X.source]=this._coordsDescendingInvStr[X.source][z.tileID.key])}}return Jl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),ri[p]}return!1}}const Ju={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Wt=c,vc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Gu,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Yu=$=>{$.touchstart=$.dragStart,$.touchmoveWindow=$.dragMove,$.touchend=$.dragEnd},Th={showCompass:!0,showZoom:!0,visualizePitch:!1};class yc{constructor(u,p,g=!1){this.mousedown=A=>{this.startMouse(o.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),x.mousePos(this.element,A)),x.addEventListener(window,"mousemove",this.mousemove),x.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,x.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=x.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),x.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=x.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const y=u.dragRotate._mouseRotate.getClickTolerance(),C=u.dragRotate._mousePitch.getClickTolerance();this.element=p,this.mouseRotate=Ai({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:z,bearingDegreesPerPixelMoved:F=.8})=>{const q=new ac;return new Pi({clickTolerance:z,move:(X,Y)=>({bearingDelta:(Y.x-X.x)*F}),moveStateManager:q,enable:A,assignEvents:Yu})})({clickTolerance:y,enable:!0}),this.map=u,g&&(this.mousePitch=Es({clickTolerance:C,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:z,pitchDegreesPerPixelMoved:F=-.5})=>{const q=new ac;return new Pi({clickTolerance:z,move:(X,Y)=>({pitchDelta:(Y.y-X.y)*F}),moveStateManager:q,enable:A,assignEvents:Yu})})({clickTolerance:C,enable:!0})),x.addEventListener(p,"mousedown",this.mousedown),x.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),x.addEventListener(p,"touchcancel",this.reset)}startMouse(u,p){this.mouseRotate.dragStart(u,p),this.mousePitch&&this.mousePitch.dragStart(u,p),x.disableDrag()}startTouch(u,p){this.touchRotate.dragStart(u,p),this.touchPitch&&this.touchPitch.dragStart(u,p),x.disableDrag()}moveMouse(u,p){const g=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(u,p)||{};if(y&&g.setBearing(g.getBearing()+y),this.mousePitch){const{pitchDelta:C}=this.mousePitch.dragMove(u,p)||{};C&&g.setPitch(g.getPitch()+C)}}moveTouch(u,p){const g=this.map,{bearingDelta:y}=this.touchRotate.dragMove(u,p)||{};if(y&&g.setBearing(g.getBearing()+y),this.touchPitch){const{pitchDelta:C}=this.touchPitch.dragMove(u,p)||{};C&&g.setPitch(g.getPitch()+C)}}off(){const u=this.element;x.removeEventListener(u,"mousedown",this.mousedown),x.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend),x.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){x.enableDrag(),x.removeEventListener(window,"mousemove",this.mousemove),x.removeEventListener(window,"mouseup",this.mouseup),x.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),x.removeEventListener(window,"touchend",this.touchend)}}let Di;function bc($,u,p){const g=new o.M($.lng,$.lat);if($=new o.M($.lng,$.lat),u){const y=new o.M($.lng-360,$.lat),C=new o.M($.lng+360,$.lat),A=p.locationPoint($).distSqr(u);p.locationPoint(y).distSqr(u)<A?$=y:p.locationPoint(C).distSqr(u)<A&&($=C)}for(;Math.abs($.lng-p.center.lng)>180;){const y=p.locationPoint($);if(y.x>=0&&y.y>=0&&y.x<=p.width&&y.y<=p.height)break;$.lng>p.center.lng?$.lng-=360:$.lng+=360}return $.lng!==g.lng&&p.locationPoint($).y>p.height/2-p.getHorizon()?$:g}const $c={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qu($,u,p){const g=$.classList;for(const y in $c)g.remove(`maplibregl-${p}-anchor-${y}`);g.add(`maplibregl-${p}-anchor-${u}`)}class vi extends o.E{constructor(u){if(super(),this._onKeyPress=p=>{const g=p.code,y=p.charCode||p.keyCode;g!=="Space"&&g!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=p=>{const g=p.originalEvent.target,y=this._element;this._popup&&(g===y||y.contains(g))&&this.togglePopup()},this._update=p=>{var g;if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?bc(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let C="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?C=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(C=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),p&&p.type!=="moveend"||(this._pos=this._pos.round()),x.setTransform(this._element,`${$c[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${C}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(u==null?void 0:u.opacity,u==null?void 0:u.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=o.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=x.create("div"),this._element.setAttribute("aria-label","Map marker");const p=x.createNS("http://www.w3.org/2000/svg","svg"),g=41,y=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${g}px`),p.setAttributeNS(null,"width",`${y}px`),p.setAttributeNS(null,"viewBox",`0 0 ${y} ${g}`);const C=x.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"stroke","none"),C.setAttributeNS(null,"stroke-width","1"),C.setAttributeNS(null,"fill","none"),C.setAttributeNS(null,"fill-rule","evenodd");const A=x.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const z=x.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");const F=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Oe of F){const Ye=x.createNS("http://www.w3.org/2000/svg","ellipse");Ye.setAttributeNS(null,"opacity","0.04"),Ye.setAttributeNS(null,"cx","10.5"),Ye.setAttributeNS(null,"cy","5.80029008"),Ye.setAttributeNS(null,"rx",Oe.rx),Ye.setAttributeNS(null,"ry",Oe.ry),z.appendChild(Ye)}const q=x.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill",this._color);const X=x.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),q.appendChild(X);const Y=x.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");const de=x.createNS("http://www.w3.org/2000/svg","path");de.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(de);const Ce=x.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ce.setAttributeNS(null,"fill","#FFFFFF");const Te=x.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ae=x.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#000000"),Ae.setAttributeNS(null,"opacity","0.25"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962");const xe=x.createNS("http://www.w3.org/2000/svg","circle");xe.setAttributeNS(null,"fill","#FFFFFF"),xe.setAttributeNS(null,"cx","5.5"),xe.setAttributeNS(null,"cy","5.5"),xe.setAttributeNS(null,"r","5.4999962"),Te.appendChild(Ae),Te.appendChild(xe),A.appendChild(z),A.appendChild(q),A.appendChild(Y),A.appendChild(Ce),A.appendChild(Te),p.appendChild(A),p.setAttributeNS(null,"height",g*this._scale+"px"),p.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(p),this._offset=o.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),Qu(this._element,this._anchor,"marker"),u&&u.className)for(const p of u.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),x.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=o.M.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const y=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:u?(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map)),this):this}_updateOpacity(u=!1){var p,g;if(!(!((p=this._map)===null||p===void 0)&&p.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const y=this._map,C=y.terrain.depthAtPoint(this._pos),A=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,A)-C<.006)return void(this._element.style.opacity=this._opacity);const z=-this._offset.y/y.transform._pixelPerMeter,F=Math.sin(y.getPitch()*Math.PI/180)*z,q=y.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),X=y.transform.lngLatToCameraDepth(this._lngLat,A+F)-q>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&X&&this._popup.remove(),this._element.style.opacity=X?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=o.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,p){return u===void 0&&p===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const sr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let eo=0,to=!1;const ef={maxWidth:100,unit:"metric"};function wc($,u,p){const g=p&&p.maxWidth||100,y=$._container.clientHeight/2,C=$.unproject([0,y]),A=$.unproject([g,y]),z=C.distanceTo(A);if(p&&p.unit==="imperial"){const F=3.2808*z;F>5280?Co(u,g,F/5280,$._getUIString("ScaleControl.Miles")):Co(u,g,F,$._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Co(u,g,z/1852,$._getUIString("ScaleControl.NauticalMiles")):z>=1e3?Co(u,g,z/1e3,$._getUIString("ScaleControl.Kilometers")):Co(u,g,z,$._getUIString("ScaleControl.Meters"))}function Co($,u,p,g){const y=function(C){const A=Math.pow(10,`${Math.floor(C)}`.length-1);let z=C/A;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(F){const q=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*q)/q}(z),A*z}(p);$.style.width=u*(y/p)+"px",$.innerHTML=`${y}&nbsp;${g}`}const Ih={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},si=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function da($){if($){if(typeof $=="number"){const u=Math.round(Math.abs($)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,$),"top-left":new o.P(u,u),"top-right":new o.P(-u,u),bottom:new o.P(0,-$),"bottom-left":new o.P(u,-u),"bottom-right":new o.P(-u,-u),left:new o.P($,0),right:new o.P(-$,0)}}if($ instanceof o.P||Array.isArray($)){const u=o.P.convert($);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:o.P.convert($.center||[0,0]),top:o.P.convert($.top||[0,0]),"top-left":o.P.convert($["top-left"]||[0,0]),"top-right":o.P.convert($["top-right"]||[0,0]),bottom:o.P.convert($.bottom||[0,0]),"bottom-left":o.P.convert($["bottom-left"]||[0,0]),"bottom-right":o.P.convert($["bottom-right"]||[0,0]),left:o.P.convert($.left||[0,0]),right:o.P.convert($.right||[0,0])}}return da(new o.P(0,0))}const an=c;a.AJAXError=o.be,a.Evented=o.E,a.LngLat=o.M,a.MercatorCoordinate=o.Y,a.Point=o.P,a.addProtocol=o.bf,a.config=o.a,a.removeProtocol=o.bg,a.AttributionControl=Zu,a.BoxZoomHandler=rc,a.CanvasSource=Rs,a.CooperativeGesturesHandler=gc,a.DoubleClickZoomHandler=pc,a.DragPanHandler=mc,a.DragRotateHandler=_c,a.EdgeInsets=Ya,a.FullscreenControl=class extends o.E{constructor($={}){super(),this._onFullscreenChange=()=>{var u;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((u=p==null?void 0:p.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,$&&$.container&&($.container instanceof HTMLElement?this._container=$.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd($){return this._map=$,this._container||(this._container=this._map.getContainer()),this._controlContainer=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){x.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const $=this._fullscreenButton=x.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);x.create("span","maplibregl-ctrl-icon",$).setAttribute("aria-hidden","true"),$.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const $=this._getTitle();this._fullscreenButton.setAttribute("aria-label",$),this._fullscreenButton.title=$}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=kn,a.GeolocateControl=class extends o.E{constructor($){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",u)),this._finish()}},this._updateCamera=u=>{const p=new o.M(u.coords.longitude,u.coords.latitude),g=u.coords.accuracy,y=this._map.getBearing(),C=o.e({bearing:y},this.options.fitBoundsOptions),A=tt.fromLngLat(p,g);this._map.fitBounds(A,C,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const p=new o.M(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&to)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=u=>{if(this._map){if(this._container.addEventListener("contextmenu",p=>p.preventDefault()),this._geolocateButton=x.create("button","maplibregl-ctrl-geolocate",this._container),x.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=x.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new vi({element:this._dotElement}),this._circleElement=x.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")))})}},this.options=o.e({},sr,$)}onAdd($){return this._map=$,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return o._(this,arguments,void 0,function*(u=!1){if(Di!==void 0&&!u)return Di;if(window.navigator.permissions===void 0)return Di=!!window.navigator.geolocation,Di;try{Di=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Di=!!window.navigator.geolocation}return Di})}().then(u=>this._setupUI(u)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),x.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,eo=0,to=!1}_isOutOfMapMaxBounds($){const u=this._map.getMaxBounds(),p=$.coords;return u&&(p.longitude<u.getWest()||p.longitude>u.getEast()||p.latitude<u.getSouth()||p.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const $=this._map.getBounds(),u=$.getSouthEast(),p=$.getNorthEast(),g=u.distanceTo(p),y=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":eo--,to=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let $;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),eo++,eo>1?($={maximumAge:6e5,timeout:0},to=!0):($=this.options.positionOptions,to=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,$)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.Hash=Vu,a.ImageSource=ir,a.KeyboardHandler=fc,a.LngLatBounds=tt,a.LogoControl=Wu,a.Map=class extends ua{constructor($){if(o.bc.mark(o.bd.create),($=o.e({},vc,$)).minZoom!=null&&$.maxZoom!=null&&$.minZoom>$.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if($.minPitch!=null&&$.maxPitch!=null&&$.minPitch>$.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if($.minPitch!=null&&$.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if($.maxPitch!=null&&$.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ji($.minZoom,$.maxZoom,$.minPitch,$.maxPitch,$.renderWorldCopies),{bearingSnap:$.bearingSnap}),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=$.interactive,this._maxTileCacheSize=$.maxTileCacheSize,this._maxTileCacheZoomLevels=$.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=$.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=$.preserveDrawingBuffer,this._antialias=$.antialias,this._trackResize=$.trackResize,this._bearingSnap=$.bearingSnap,this._refreshExpiredTiles=$.refreshExpiredTiles,this._fadeDuration=$.fadeDuration,this._crossSourceCollisions=$.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=$.collectResourceTiming,this._renderTaskQueue=new Ku,this._controls=[],this._mapId=o.a3(),this._locale=o.e({},Ju,$.locale),this._clickTolerance=$.clickTolerance,this._overridePixelRatio=$.pixelRatio,this._maxCanvasSize=$.maxCanvasSize,this.transformCameraUpdate=$.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=$.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=Q.addThrottleControl(()=>this.isMoving()),this._requestManager=new ve($.transformRequest),typeof $.container=="string"){if(this._container=document.getElementById($.container),!this._container)throw new Error(`Container '${$.container}' not found.`)}else{if(!($.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=$.container}if($.maxBounds&&this.setMaxBounds($.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const p=Nu(g=>{this._trackResize&&!this._removed&&this.resize(g)._update()},50);this._resizeObserver=new ResizeObserver(g=>{u?p(g):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ni(this,$),this._hash=$.hash&&new Vu(typeof $.hash=="string"&&$.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:$.center,zoom:$.zoom,bearing:$.bearing,pitch:$.pitch}),$.bounds&&(this.resize(),this.fitBounds($.bounds,o.e({},$.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=$.localIdeographFontFamily,this._validateStyle=$.validateStyle,$.style&&this.setStyle($.style,{localIdeographFontFamily:$.localIdeographFontFamily}),$.attributionControl&&this.addControl(new Zu(typeof $.attributionControl=="boolean"?void 0:$.attributionControl)),$.maplibreLogo&&this.addControl(new Wu,$.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new o.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new o.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new o.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl($,u){if(u===void 0&&(u=$.getDefaultPosition?$.getDefaultPosition():"top-right"),!$||!$.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=$.onAdd(this);this._controls.push($);const g=this._controlPositions[u];return u.indexOf("bottom")!==-1?g.insertBefore(p,g.firstChild):g.appendChild(p),this}removeControl($){if(!$||!$.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf($);return u>-1&&this._controls.splice(u,1),$.onRemove(this),this}hasControl($){return this._controls.indexOf($)>-1}calculateCameraOptionsFromTo($,u,p,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo($,u,p,g)}resize($){var u;const p=this._containerDimensions(),g=p[0],y=p[1],C=this._getClampedPixelRatio(g,y);if(this._resizeCanvas(g,y,C),this.painter.resize(g,y,C),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const F=this._getClampedPixelRatio(g,y);this._resizeCanvas(g,y,F),this.painter.resize(g,y,F)}this.transform.resize(g,y),(u=this._requestedCameraState)===null||u===void 0||u.resize(g,y);const A=!this._moving;return A&&(this.stop(),this.fire(new o.k("movestart",$)).fire(new o.k("move",$))),this.fire(new o.k("resize",$)),A&&this.fire(new o.k("moveend",$)),this}_getClampedPixelRatio($,u){const{0:p,1:g}=this._maxCanvasSize,y=this.getPixelRatio(),C=$*y,A=u*y;return Math.min(C>p?p/C:1,A>g?g/A:1)*y}getPixelRatio(){var $;return($=this._overridePixelRatio)!==null&&$!==void 0?$:devicePixelRatio}setPixelRatio($){this._overridePixelRatio=$,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds($){return this.transform.setMaxBounds(tt.convert($)),this._update()}setMinZoom($){if(($=$??-2)>=-2&&$<=this.transform.maxZoom)return this.transform.minZoom=$,this._update(),this.getZoom()<$&&this.setZoom($),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom($){if(($=$??22)>=this.transform.minZoom)return this.transform.maxZoom=$,this._update(),this.getZoom()>$&&this.setZoom($),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch($){if(($=$??0)<0)throw new Error("minPitch must be greater than or equal to 0");if($>=0&&$<=this.transform.maxPitch)return this.transform.minPitch=$,this._update(),this.getPitch()<$&&this.setPitch($),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch($){if(($=$??60)>85)throw new Error("maxPitch must be less than or equal to 85");if($>=this.transform.minPitch)return this.transform.maxPitch=$,this._update(),this.getPitch()>$&&this.setPitch($),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies($){return this.transform.renderWorldCopies=$,this._update()}project($){return this.transform.locationPoint(o.M.convert($),this.style&&this.terrain)}unproject($){return this.transform.pointLocation(o.P.convert($),this.terrain)}isMoving(){var $;return this._moving||(($=this.handlers)===null||$===void 0?void 0:$.isMoving())}isZooming(){var $;return this._zooming||(($=this.handlers)===null||$===void 0?void 0:$.isZooming())}isRotating(){var $;return this._rotating||(($=this.handlers)===null||$===void 0?void 0:$.isRotating())}_createDelegatedListener($,u,p){if($==="mouseenter"||$==="mouseover"){let g=!1;return{layer:u,listener:p,delegates:{mousemove:C=>{const A=this.getLayer(u)?this.queryRenderedFeatures(C.point,{layers:[u]}):[];A.length?g||(g=!0,p.call(this,new ts($,this,C.originalEvent,{features:A}))):g=!1},mouseout:()=>{g=!1}}}}if($==="mouseleave"||$==="mouseout"){let g=!1;return{layer:u,listener:p,delegates:{mousemove:A=>{(this.getLayer(u)?this.queryRenderedFeatures(A.point,{layers:[u]}):[]).length?g=!0:g&&(g=!1,p.call(this,new ts($,this,A.originalEvent)))},mouseout:A=>{g&&(g=!1,p.call(this,new ts($,this,A.originalEvent)))}}}}{const g=y=>{const C=this.getLayer(u)?this.queryRenderedFeatures(y.point,{layers:[u]}):[];C.length&&(y.features=C,p.call(this,y),delete y.features)};return{layer:u,listener:p,delegates:{[$]:g}}}}on($,u,p){if(p===void 0)return super.on($,u);const g=this._createDelegatedListener($,u,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[$]=this._delegatedListeners[$]||[],this._delegatedListeners[$].push(g);for(const y in g.delegates)this.on(y,g.delegates[y]);return this}once($,u,p){if(p===void 0)return super.once($,u);const g=this._createDelegatedListener($,u,p);for(const y in g.delegates)this.once(y,g.delegates[y]);return this}off($,u,p){return p===void 0?super.off($,u):(this._delegatedListeners&&this._delegatedListeners[$]&&(g=>{const y=this._delegatedListeners[$];for(let C=0;C<y.length;C++){const A=y[C];if(A.layer===u&&A.listener===p){for(const z in A.delegates)this.off(z,A.delegates[z]);return y.splice(C,1),this}}})(),this)}queryRenderedFeatures($,u){if(!this.style)return[];let p;const g=$ instanceof o.P||Array.isArray($),y=g?$:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(g?{}:$)||{},y instanceof o.P||typeof y[0]=="number")p=[o.P.convert(y)];else{const C=o.P.convert(y[0]),A=o.P.convert(y[1]);p=[C,new o.P(A.x,C.y),A,new o.P(C.x,A.y),C]}return this.style.queryRenderedFeatures(p,u,this.transform)}querySourceFeatures($,u){return this.style.querySourceFeatures($,u)}setStyle($,u){return(u=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&$?(this._diffStyle($,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle($,u))}setTransformRequest($){return this._requestManager.setTransformRequest($),this}_getUIString($){const u=this._locale[$];if(u==null)throw new Error(`Missing UI string '${$}'`);return u}_updateStyle($,u){if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle($,u));const p=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!$)),$?(this.style=new Ra(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof $=="string"?this.style.loadURL($,u,p):this.style.loadJSON($,u,p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ra(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle($,u){if(typeof $=="string"){const p=this._requestManager.transformRequest($,"Style");o.h(p,new AbortController).then(g=>{this._updateDiff(g.data,u)}).catch(g=>{g&&this.fire(new o.j(g))})}else typeof $=="object"&&this._updateDiff($,u)}_updateDiff($,u){try{this.style.setState($,u)&&this._update(!0)}catch(p){o.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle($,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource($,u){return this._lazyInitEmptyStyle(),this.style.addSource($,u),this._update(!0)}isSourceLoaded($){const u=this.style&&this.style.sourceCaches[$];if(u!==void 0)return u.loaded();this.fire(new o.j(new Error(`There is no source with ID '${$}'`)))}setTerrain($){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),$){const u=this.style.sourceCaches[$.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${$.source}`);this.terrain===null&&u.reload();for(const p in this.style._layers){const g=this.style._layers[p];g.type==="hillshade"&&g.source===$.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Qt(this.painter,u,$),this.painter.renderToTexture=new ha(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=p=>{p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==$.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:$})),this}getTerrain(){var $,u;return(u=($=this.terrain)===null||$===void 0?void 0:$.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const $=this.style&&this.style.sourceCaches;for(const u in $){const p=$[u]._tiles;for(const g in p){const y=p[g];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource($){return this.style.removeSource($),this._update(!0)}getSource($){return this.style.getSource($)}addImage($,u,p={}){const{pixelRatio:g=1,sdf:y=!1,stretchX:C,stretchY:A,content:z,textFitWidth:F,textFitHeight:q}=p;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||o.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:X,height:Y,data:de}=u,Ce=u;return this.style.addImage($,{data:new o.R({width:X,height:Y},new Uint8Array(de)),pixelRatio:g,stretchX:C,stretchY:A,content:z,textFitWidth:F,textFitHeight:q,sdf:y,version:0,userImage:Ce}),Ce.onAdd&&Ce.onAdd(this,$),this}}{const{width:X,height:Y,data:de}=b.getImageData(u);this.style.addImage($,{data:new o.R({width:X,height:Y},de),pixelRatio:g,stretchX:C,stretchY:A,content:z,textFitWidth:F,textFitHeight:q,sdf:y,version:0})}}updateImage($,u){const p=this.style.getImage($);if(!p)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=u instanceof HTMLImageElement||o.b(u)?b.getImageData(u):u,{width:y,height:C,data:A}=g;if(y===void 0||C===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==p.data.width||C!==p.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(u instanceof HTMLImageElement||o.b(u));return p.data.replace(A,z),this.style.updateImage($,p),this}getImage($){return this.style.getImage($)}hasImage($){return $?!!this.style.getImage($):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage($){this.style.removeImage($)}loadImage($){return Q.getImage(this._requestManager.transformRequest($,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer($,u){return this._lazyInitEmptyStyle(),this.style.addLayer($,u),this._update(!0)}moveLayer($,u){return this.style.moveLayer($,u),this._update(!0)}removeLayer($){return this.style.removeLayer($),this._update(!0)}getLayer($){return this.style.getLayer($)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange($,u,p){return this.style.setLayerZoomRange($,u,p),this._update(!0)}setFilter($,u,p={}){return this.style.setFilter($,u,p),this._update(!0)}getFilter($){return this.style.getFilter($)}setPaintProperty($,u,p,g={}){return this.style.setPaintProperty($,u,p,g),this._update(!0)}getPaintProperty($,u){return this.style.getPaintProperty($,u)}setLayoutProperty($,u,p,g={}){return this.style.setLayoutProperty($,u,p,g),this._update(!0)}getLayoutProperty($,u){return this.style.getLayoutProperty($,u)}setGlyphs($,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs($,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite($,u,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite($,u,p,g=>{g||this._update(!0)}),this}removeSprite($){return this._lazyInitEmptyStyle(),this.style.removeSprite($),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite($,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite($,u,p=>{p||this._update(!0)}),this}setLight($,u={}){return this._lazyInitEmptyStyle(),this.style.setLight($,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState($,u){return this.style.setFeatureState($,u),this._update()}removeFeatureState($,u){return this.style.removeFeatureState($,u),this._update()}getFeatureState($){return this.style.getFeatureState($)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let $=0,u=0;return this._container&&($=this._container.clientWidth||400,u=this._container.clientHeight||300),[$,u]}_setupContainer(){const $=this._container;$.classList.add("maplibregl-map");const u=this._canvasContainer=x.create("div","maplibregl-canvas-container",$);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=x.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),g=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],g);const y=this._controlContainer=x.create("div","maplibregl-control-container",$),C=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{C[A]=x.create("div",`maplibregl-ctrl-${A} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas($,u,p){this._canvas.width=Math.floor(p*$),this._canvas.height=Math.floor(p*u),this._canvas.style.width=`${$}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const $={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{u={requestedAttributes:$},g&&(u.statusMessage=g.statusMessage,u.type=g.type)},{once:!0});const p=this._canvas.getContext("webgl2",$)||this._canvas.getContext("webgl",$);if(!p){const g="Failed to initialize WebGL";throw u?(u.message=g,new Error(JSON.stringify(u))):new Error(g)}this.painter=new Yl(p,this.transform),P.testSupport(p)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update($){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||$,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame($){return this._update(),this._renderTaskQueue.add($)}_cancelRenderFrame($){this._renderTaskQueue.remove($)}_render($){const u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run($),this._removed)return;let p=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const y=this.transform.zoom,C=b.now();this.style.zoomHistory.update(y,C);const A=new o.a8(y,{now:C,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),z=A.crossFadingFactor();z===1&&z===this._crossFadingFactor||(p=!0,this._crossFadingFactor=z),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bc.mark(o.bd.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,o.bc.mark(o.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var $;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Q.removeThrottleControl(this._imageQueueHandle),($=this._resizeObserver)===null||$===void 0||$.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),x.remove(this._canvasContainer),x.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bc.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then($=>{o.bc.frame($),this._frameRequest=null,this._render($)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries($){this._showTileBoundaries!==$&&(this._showTileBoundaries=$,this._update())}get showPadding(){return!!this._showPadding}set showPadding($){this._showPadding!==$&&(this._showPadding=$,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes($){this._showCollisionBoxes!==$&&(this._showCollisionBoxes=$,$?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector($){this._showOverdrawInspector!==$&&(this._showOverdrawInspector=$,this._update())}get repaint(){return!!this._repaint}set repaint($){this._repaint!==$&&(this._repaint=$,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices($){this._vertices=$,this._update()}get version(){return Wt}getCameraTargetElevation(){return this.transform.elevation}},a.MapMouseEvent=ts,a.MapTouchEvent=Ei,a.MapWheelEvent=tl,a.Marker=vi,a.NavigationControl=class{constructor($){this._updateZoomButtons=()=>{const u=this._map.getZoom(),p=u===this._map.getMaxZoom(),g=u===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,p)=>{const g=this._map._getUIString(`NavigationControl.${p}`);u.title=g,u.setAttribute("aria-label",g)},this.options=o.e({},Th,$),this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),x.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),x.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=x.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd($){return this._map=$,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new yc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){x.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton($,u){const p=x.create("button",$,this._container);return p.type="button",p.addEventListener("click",u),p}},a.Popup=class extends o.E{constructor($){super(),this.remove=()=>(this._content&&x.remove(this._content),this._container&&(x.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{var p;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=x.create("div","maplibregl-popup",this._map.getContainer()),this._tip=x.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?bc(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._trackPointer&&!u)return;const g=this._flatPos=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&u?u:this._map.transform.locationPoint(this._lngLat));let y=this.options.anchor;const C=da(this.options.offset);if(!y){const z=this._container.offsetWidth,F=this._container.offsetHeight;let q;q=g.y+C.bottom.y<F?["top"]:g.y>this._map.transform.height-F?["bottom"]:[],g.x<z/2?q.push("left"):g.x>this._map.transform.width-z/2&&q.push("right"),y=q.length===0?"bottom":q.join("-")}let A=g.add(C[y]);this.options.subpixelPositioning||(A=A.round()),x.setTransform(this._container,`${$c[y]} translate(${A.x}px,${A.y}px)`),Qu(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Ih),$)}addTo($){return this._map&&this.remove(),this._map=$,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat($){return this._lngLat=o.M.convert($),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText($){return this.setDOMContent(document.createTextNode($))}setHTML($){const u=document.createDocumentFragment(),p=document.createElement("body");let g;for(p.innerHTML=$;g=p.firstChild,g;)u.appendChild(g);return this.setDOMContent(u)}getMaxWidth(){var $;return($=this._container)===null||$===void 0?void 0:$.style.maxWidth}setMaxWidth($){return this.options.maxWidth=$,this._update(),this}setDOMContent($){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=x.create("div","maplibregl-popup-content",this._container);return this._content.appendChild($),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName($){return this._container&&this._container.classList.add($),this}removeClassName($){return this._container&&this._container.classList.remove($),this}setOffset($){return this.options.offset=$,this._update(),this}toggleClassName($){if(this._container)return this._container.classList.toggle($)}setSubpixelPositioning($){this.options.subpixelPositioning=$}_createCloseButton(){this.options.closeButton&&(this._closeButton=x.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const $=this._container.querySelector(si);$&&$.focus()}},a.RasterDEMTileSource=Bn,a.RasterTileSource=hn,a.ScaleControl=class{constructor($){this._onMove=()=>{wc(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,wc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ef),$)}getDefaultPosition(){return"bottom-left"}onAdd($){return this._map=$,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-scale",$.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){x.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=dc,a.Style=Ra,a.TerrainControl=class{constructor($){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=$}onAdd($){return this._map=$,this._container=x.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=x.create("button","maplibregl-ctrl-terrain",this._container),x.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){x.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=uc,a.TwoFingersTouchRotateHandler=cc,a.TwoFingersTouchZoomHandler=xo,a.TwoFingersTouchZoomRotateHandler=ko,a.VectorTileSource=Ze,a.VideoSource=_s,a.addSourceType=($,u)=>o._(void 0,void 0,void 0,function*(){if(Kr($))throw new Error(`A source type called "${$}" already exists.`);((p,g)=>{gs[p]=g})($,u)}),a.clearPrewarmedResources=function(){const $=cn;$&&($.isPreloaded()&&$.numActive()===1?($.release(zt),cn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return Nr().getRTLTextPluginStatus()},a.getVersion=function(){return an},a.getWorkerCount=function(){return Yt.workerCount},a.getWorkerUrl=function(){return o.a.WORKER_URL},a.importScriptInWorkers=function($){return fn().broadcast("IS",$)},a.prewarm=function(){At().acquire(zt)},a.setMaxParallelImageRequests=function($){o.a.MAX_PARALLEL_IMAGE_REQUESTS=$},a.setRTLTextPlugin=function($,u){return Nr().setRTLTextPlugin($,u)},a.setWorkerCount=function($){Yt.workerCount=$},a.setWorkerUrl=function($){o.a.WORKER_URL=$}});var s=n;return s})})(cy);var Pf=cy.exports;const ui=Ow(Pf);var _I=gI;function gI(i){var e,n,t;if(i){if(Array.isArray(i)){for(e=[],n=i.length,t=0;t<n;t++){var r=i[t];r!=null&&e.push(r)}return e}if(typeof i=="object"){e={};var s=Object.keys(i);for(n=s.length,t=0;t<n;t++){var a=s[t],o=i[a];o!=null&&(e[a]=o)}return e}}}function vI(i,e,n){let t;const{map:r}=Sl();sn(i,r,c=>n(4,t=c));let{position:s="top-left"}=e,{container:a=void 0}=e,o=null;return Uo(()=>{t!=null&&t.loaded()&&o&&t.removeControl(o)}),i.$$set=c=>{"position"in c&&n(1,s=c.position),"container"in c&&n(2,a=c.container)},i.$$.update=()=>{if(i.$$.dirty&30&&t&&!o){let c;typeof a=="string"?c=document.querySelector(a)??void 0:c=a,n(3,o=new ui.FullscreenControl({container:c})),t.addControl(o,s)}},[r,s,a,o,t]}class yI extends st{constructor(e){super(),it(this,e,vI,null,rt,{position:1,container:2})}}function bI(i,e,n){let t;const{map:r}=Sl();sn(i,r,x=>n(8,t=x));let{position:s="top-left"}=e,{positionOptions:a=void 0}=e,{fitBoundsOptions:o=void 0}=e,{trackUserLocation:c=!1}=e,{showAccuracyCircle:d=!0}=e,{showUserLocation:_=!0}=e,b=null;return Uo(()=>{t!=null&&t.loaded()&&b&&t.removeControl(b)}),i.$$set=x=>{"position"in x&&n(1,s=x.position),"positionOptions"in x&&n(2,a=x.positionOptions),"fitBoundsOptions"in x&&n(3,o=x.fitBoundsOptions),"trackUserLocation"in x&&n(4,c=x.trackUserLocation),"showAccuracyCircle"in x&&n(5,d=x.showAccuracyCircle),"showUserLocation"in x&&n(6,_=x.showUserLocation)},i.$$.update=()=>{i.$$.dirty&510&&t&&!b&&(n(7,b=new ui.GeolocateControl({positionOptions:a,fitBoundsOptions:o,trackUserLocation:c,showAccuracyCircle:d,showUserLocation:_})),t.addControl(b,s))},[r,s,a,o,c,d,_,b,t]}class $I extends st{constructor(e){super(),it(this,e,bI,null,rt,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function wI(i){let e=i.getCenter(),n=Math.round(i.getZoom()*100)/100,t=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,t),s=Math.round(e.lat*r)/r,a=Math.round(e.lng*r)/r,o=`${n}/${s}/${a}`,c=i.getBearing(),d=i.getPitch();return(c||d)&&(o+=`/${Math.round(c*10)/10}`),d&&(o+=`/${Math.round(d)}`),`#${o}`}function xI(i){return i.replace("#","").split("/").map(parseFloat)}var Tf=tp;function tp(i,e){return i===e||i!==i&&e!==e?!0:typeof i!=typeof e||{}.toString.call(i)!={}.toString.call(e)||i!==Object(i)||!i?!1:Array.isArray(i)?pg(i,e):{}.toString.call(i)=="[object Set]"?pg(Array.from(i),Array.from(e)):{}.toString.call(i)=="[object Object]"?CI(i,e):kI(i,e)}function kI(i,e){return i.toString()===e.toString()}function pg(i,e){var n=i.length;if(n!=e.length)return!1;for(var t=0;t<n;t++)if(!tp(i[t],e[t]))return!1;return!0}function CI(i,e){var n=Object.keys(i),t=n.length;if(t!=Object.keys(e).length)return!1;for(var r=0;r<t;r++){var s=n[r];if(!(e.hasOwnProperty(s)&&tp(i[s],e[s])))return!1}return!0}function SI(i,e,n){let t;const{map:r}=Sl();sn(i,r,_=>n(6,t=_));let{position:s="top-left"}=e,{showCompass:a=!0}=e,{showZoom:o=!0}=e,{visualizePitch:c=!1}=e,d=null;return Uo(()=>{t!=null&&t.loaded()&&d&&t.removeControl(d)}),i.$$set=_=>{"position"in _&&n(1,s=_.position),"showCompass"in _&&n(2,a=_.showCompass),"showZoom"in _&&n(3,o=_.showZoom),"visualizePitch"in _&&n(4,c=_.visualizePitch)},i.$$.update=()=>{i.$$.dirty&126&&t&&!d&&(n(5,d=new ui.NavigationControl({showCompass:a,showZoom:o,visualizePitch:c})),t.addControl(d,s))},[r,s,a,o,c,d,t]}class TI extends st{constructor(e){super(),it(this,e,SI,null,rt,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function II(i,e,n){let t;const{map:r}=Sl();sn(i,r,d=>n(5,t=d));let{position:s="bottom-left"}=e,{maxWidth:a=void 0}=e,{unit:o="metric"}=e,c=null;return Uo(()=>{t!=null&&t.loaded()&&c&&t.removeControl(c)}),i.$$set=d=>{"position"in d&&n(1,s=d.position),"maxWidth"in d&&n(2,a=d.maxWidth),"unit"in d&&n(3,o=d.unit)},i.$$.update=()=>{i.$$.dirty&62&&t&&!c&&(n(4,c=new ui.ScaleControl({maxWidth:a,unit:o})),t.addControl(c,s))},[r,s,a,o,c,t]}class EI extends st{constructor(e){super(),it(this,e,II,null,rt,{position:1,maxWidth:2,unit:3})}}const{window:PI}=Gd,AI=i=>({map:i[0]&8,loadedImages:i[0]&16,allImagesLoaded:i[0]&32}),mg=i=>({map:i[3],loadedImages:i[4],allImagesLoaded:i[5]});function _g(i){let e,n,t=i[2]&&gg(i);const r=i[38].default,s=kt(r,i,i[37],mg);return{c(){t&&t.c(),e=me(),s&&s.c()},l(a){t&&t.l(a),e=_e(a),s&&s.l(a)},m(a,o){t&&t.m(a,o),R(a,e,o),s&&s.m(a,o),n=!0},p(a,o){a[2]?t?(t.p(a,o),o[0]&4&&T(t,1)):(t=gg(a),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(dt(),E(t,1,1,()=>{t=null}),pt()),s&&s.p&&(!n||o[0]&56|o[1]&64)&&Ct(s,r,a,a[37],n?Tt(r,a[37],o,AI):St(a[37]),mg)},i(a){n||(T(t),T(s,a),n=!0)},o(a){E(t),E(s,a),n=!1},d(a){a&&S(e),t&&t.d(a),s&&s.d(a)}}}function gg(i){let e,n,t,r,s,a,o,c;return e=new TI({props:{position:i[6]}}),t=new $I({props:{position:i[6],fitBoundsOptions:{maxZoom:12}}}),s=new yI({props:{position:i[6]}}),o=new EI({props:{position:i[6]}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),N(s.$$.fragment),a=me(),N(o.$$.fragment)},l(d){j(e.$$.fragment,d),n=_e(d),j(t.$$.fragment,d),r=_e(d),j(s.$$.fragment,d),a=_e(d),j(o.$$.fragment,d)},m(d,_){V(e,d,_),R(d,n,_),V(t,d,_),R(d,r,_),V(s,d,_),R(d,a,_),V(o,d,_),c=!0},p(d,_){const b={};_[0]&64&&(b.position=d[6]),e.$set(b);const x={};_[0]&64&&(x.position=d[6]),t.$set(x);const P={};_[0]&64&&(P.position=d[6]),s.$set(P);const L={};_[0]&64&&(L.position=d[6]),o.$set(L)},i(d){c||(T(e.$$.fragment,d),T(t.$$.fragment,d),T(s.$$.fragment,d),T(o.$$.fragment,d),c=!0)},o(d){E(e.$$.fragment,d),E(t.$$.fragment,d),E(s.$$.fragment,d),E(o.$$.fragment,d),c=!1},d(d){d&&(S(n),S(r),S(a)),U(e,d),U(t,d),U(s,d),U(o,d)}}}function MI(i){let e,n,t,r,s,a=i[3]&&i[0]&&_g(i);return{c(){e=oe("div"),a&&a.c(),this.h()},l(o){e=ae(o,"DIV",{class:!0,"data-testid":!0});var c=we(e);a&&a.l(c),c.forEach(S),this.h()},h(){ne(e,"class",n=p_(i[1])+" svelte-p00lfq"),ne(e,"data-testid","map-container"),cr(e,"expand-map",!i[1])},m(o,c){R(o,e,c),a&&a.m(e,null),t=!0,r||(s=[$t(PI,"hashchange",i[10]),Un(i[9].call(null,e))],r=!0)},p(o,c){o[3]&&o[0]?a?(a.p(o,c),c[0]&9&&T(a,1)):(a=_g(o),a.c(),T(a,1),a.m(e,null)):a&&(dt(),E(a,1,1,()=>{a=null}),pt()),(!t||c[0]&2&&n!==(n=p_(o[1])+" svelte-p00lfq"))&&ne(e,"class",n),(!t||c[0]&2)&&cr(e,"expand-map",!o[1])},i(o){t||(T(a),t=!0)},o(o){E(a),t=!1},d(o){o&&S(e),a&&a.d(),r=!1,br(s)}}}function DI(i,e,n){let t,r,s,a,{$$slots:o={},$$scope:c}=e,{map:d=null}=e,{class:_=void 0}=e,{style:b}=e,{diffStyleUpdates:x=!1}=e,{center:P=void 0}=e,{zoom:L=void 0}=e,{pitch:D=0}=e,{bearing:B=0}=e,{bounds:Z=void 0}=e,{hash:W=!1}=e,{loaded:Q=!1}=e,{minZoom:ve=0}=e,{maxZoom:re=22}=e,{antialias:ce=void 0}=e,{zoomOnDoubleClick:ge=!0}=e,{locale:le=void 0}=e,{interactive:G=!0}=e,{attributionControl:ee=!0}=e,{cooperativeGestures:fe=!1}=e,{preserveDrawingBuffer:$e=!1}=e,{maxBounds:he=void 0}=e,{images:ke=[]}=e,{standardControls:Ue=!1}=e,{filterLayers:Ie=void 0}=e,{transformRequest:nt=void 0}=e;const Xe=wl(),{map:ct,loadedImages:mt}=hI();sn(i,ct,ot=>n(3,s=ot)),sn(i,mt,ot=>n(4,a=ot));let Dt=new Set;async function zt(ot,qt=!1){if(s&&!(!s.loaded()&&!qt))if("url"in ot){Dt.add(ot.id);try{let wt=await s.loadImage(ot.url);s==null||s.addImage(ot.id,wt.data,ot.options),a.add(ot.id),mt.set(a)}catch(wt){Xe("error",wt)}finally{Dt.delete(ot.id)}}else s.addImage(ot.id,ot.data,ot.options),a.add(ot.id),mt.set(a)}let Yt,mn,cn,It;function At(ot){return fn(),Or(ct,s=new ui.Map(_I({container:ot,style:b,locale:le,center:P,zoom:L,pitch:D,bearing:B,minZoom:ve,maxZoom:re,antialias:ce,interactive:G,preserveDrawingBuffer:$e,maxBounds:he,bounds:Z,attributionControl:ee,transformRequest:nt,cooperativeGestures:fe})),s),s.on("load",qt=>{qt.target.getContainer().setAttribute("data-testid","map"),qt.target.getCanvas().setAttribute("data-testid","map-canvas"),n(0,Q=!0),Xe("load",s)}),s.on("error",qt=>Xe("error",{...qt,map:s})),s.on("movestart",qt=>Xe("movestart",{...qt,map:s})),s.on("moveend",qt=>{if(n(11,P=qt.target.getCenter()),n(12,L=qt.target.getZoom()),n(13,Z=qt.target.getBounds()),Xe("moveend",{...qt,map:s}),W){let wt=window.location.href.replace(/(#.+)?$/,wI(s));window.history.replaceState(window.history.state,"",wt)}}),s.on("zoomstart",qt=>Xe("zoomstart",{...qt,map:s})),s.on("zoom",qt=>{n(12,L=qt.target.getZoom()),Xe("zoom",{...qt,map:s})}),s.on("zoomend",qt=>{n(12,L=qt.target.getZoom()),Xe("zoomend",{...qt,map:s})}),s.on("style.load",()=>{if(s){const qt=s.getStyle();if(n(34,Yt=qt.layers.map(wt=>wt.id)),n(35,mn=Object.keys(qt.sources)),It)for(const[wt,xt]of Object.entries(It))s.addSource(wt,xt);if(cn)for(const wt of cn)s.addLayer(wt);for(const wt of ke)zt(wt,!0)}}),s.on("styledata",qt=>{if(s&&Ie){const wt=s.getStyle().layers;if(wt)for(let xt of wt)Ie(xt)||s.setLayoutProperty(xt.id,"visibility","none")}Xe("styledata",{...qt,map:s})}),{destroy(){n(0,Q=!1),s==null||s.remove(),Or(ct,s=null,s)}}}let un=b;function fn(){if(W){let ot=xI(window.location.hash);ot.length>=3&&(n(12,L=ot[0]),n(11,P=[ot[2],ot[1]])),ot.length==5&&(n(16,B=ot[3]),n(15,D=ot[4]))}}return i.$$set=ot=>{"map"in ot&&n(14,d=ot.map),"class"in ot&&n(1,_=ot.class),"style"in ot&&n(17,b=ot.style),"diffStyleUpdates"in ot&&n(18,x=ot.diffStyleUpdates),"center"in ot&&n(11,P=ot.center),"zoom"in ot&&n(12,L=ot.zoom),"pitch"in ot&&n(15,D=ot.pitch),"bearing"in ot&&n(16,B=ot.bearing),"bounds"in ot&&n(13,Z=ot.bounds),"hash"in ot&&n(19,W=ot.hash),"loaded"in ot&&n(0,Q=ot.loaded),"minZoom"in ot&&n(20,ve=ot.minZoom),"maxZoom"in ot&&n(21,re=ot.maxZoom),"antialias"in ot&&n(22,ce=ot.antialias),"zoomOnDoubleClick"in ot&&n(23,ge=ot.zoomOnDoubleClick),"locale"in ot&&n(24,le=ot.locale),"interactive"in ot&&n(25,G=ot.interactive),"attributionControl"in ot&&n(26,ee=ot.attributionControl),"cooperativeGestures"in ot&&n(27,fe=ot.cooperativeGestures),"preserveDrawingBuffer"in ot&&n(28,$e=ot.preserveDrawingBuffer),"maxBounds"in ot&&n(29,he=ot.maxBounds),"images"in ot&&n(30,ke=ot.images),"standardControls"in ot&&n(2,Ue=ot.standardControls),"filterLayers"in ot&&n(31,Ie=ot.filterLayers),"transformRequest"in ot&&n(32,nt=ot.transformRequest),"$$scope"in ot&&n(37,c=ot.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&n(6,t=typeof Ue=="boolean"?void 0:Ue),i.$$.dirty[0]&8&&n(14,d=s),i.$$.dirty[0]&393224|i.$$.dirty[1]&56&&s&&!Tf(b,un)){const ot=s.getStyle();if(Yt&&(cn=ot.layers.filter(qt=>!Yt.includes(qt.id))),mn){const qt=Object.keys(ot.sources).filter(wt=>!mn.includes(wt));It={};for(const wt of qt)It[wt]=ot.sources[wt]}n(36,un=b),s.setStyle(b,{diff:x}),Or(mt,a=new Set,a),n(33,Dt=new Set)}if(i.$$.dirty[0]&1073741849|i.$$.dirty[1]&4&&Q&&s!=null&&s.loaded())for(let ot of ke)!a.has(ot.id)&&!Dt.has(ot.id)&&!s.hasImage(ot.id)&&zt(ot);i.$$.dirty[0]&1073741840&&n(5,r=ke.every(ot=>a.has(ot.id))),i.$$.dirty[0]&2056&&P&&!Tf(P,s==null?void 0:s.getCenter())&&(s==null||s.panTo(P)),i.$$.dirty[0]&4104&&L&&!Tf(L,s==null?void 0:s.getZoom())&&(s==null||s.zoomTo(L)),i.$$.dirty[0]&8200&&Z&&!Tf(Z,s==null?void 0:s.getBounds())&&(s==null||s.fitBounds(Z)),i.$$.dirty[0]&8388616&&(ge?s==null||s.doubleClickZoom.enable():s==null||s.doubleClickZoom.disable())},[Q,_,Ue,s,a,r,t,ct,mt,At,fn,P,L,Z,d,D,B,b,x,W,ve,re,ce,ge,le,G,ee,fe,$e,he,ke,Ie,nt,Dt,Yt,mn,un,c,o]}class zI extends st{constructor(e){super(),it(this,e,DI,MI,rt,{map:14,class:1,style:17,diffStyleUpdates:18,center:11,zoom:12,pitch:15,bearing:16,bounds:13,hash:19,loaded:0,minZoom:20,maxZoom:21,antialias:22,zoomOnDoubleClick:23,locale:24,interactive:25,attributionControl:26,cooperativeGestures:27,preserveDrawingBuffer:28,maxBounds:29,images:30,standardControls:2,filterLayers:31,transformRequest:32},null,[-1,-1])}}function LI(i){let e,n,t,r,s,a,o;const c=i[18].default,d=kt(c,i,i[17],null);return{c(){e=oe("div"),d&&d.c(),this.h()},l(_){e=ae(_,"DIV",{tabindex:!0,role:!0});var b=we(e);d&&d.l(b),b.forEach(S),this.h()},h(){ne(e,"tabindex",n=i[1]?0:void 0),ne(e,"role",t=i[1]?"button":void 0),Yc(e,"z-index",i[2])},m(_,b){R(_,e,b),d&&d.m(e,null),s=!0,a||(o=[Un(i[6].call(null,e)),Un(r=RI.call(null,e,i[0])),$t(e,"click",i[19]),$t(e,"dblclick",i[20]),$t(e,"contextmenu",i[21]),$t(e,"mouseenter",i[22]),$t(e,"mouseleave",i[23]),$t(e,"mousemove",i[24]),$t(e,"keydown",i[7])],a=!0)},p(_,[b]){d&&d.p&&(!s||b&131072)&&Ct(d,c,_,_[17],s?Tt(c,_[17],b,null):St(_[17]),null),(!s||b&2&&n!==(n=_[1]?0:void 0))&&ne(e,"tabindex",n),(!s||b&2&&t!==(t=_[1]?"button":void 0))&&ne(e,"role",t),r&&Hd(r.update)&&b&1&&r.update.call(null,_[0]),b&4&&Yc(e,"z-index",_[2])},i(_){s||(T(d,_),s=!0)},o(_){E(d,_),s=!1},d(_){_&&S(e),d&&d.d(_),a=!1,br(o)}}}function RI(i,e){const n=i.className;function t(r){r?i.className=`${n} ${r}`:i.className=n}return t(e),{update:t}}function OI(i,e,n){let t,r,s,{$$slots:a={},$$scope:o}=e,{lngLat:c}=e,{class:d=void 0}=e,{interactive:_=!0}=e,{asButton:b=!1}=e,{draggable:x=!1}=e,{feature:P=null}=e,{offset:L=void 0}=e,{zIndex:D=void 0}=e,{rotation:B=0}=e,{opacity:Z=1}=e;const W=wl(),{map:Q,layerEvent:ve,self:re}=pI();sn(i,Q,Ie=>n(26,s=Ie)),sn(i,ve,Ie=>n(25,t=Ie)),sn(i,re,Ie=>n(16,r=Ie));function ce(Ie){Or(re,r=new ui.Marker({element:Ie,rotation:B,draggable:x,offset:L,opacity:Z.toString()}).setLngLat(c).addTo(s),r);const nt=()=>G("dragstart"),Xe=()=>{ge(),G("drag")},ct=()=>{ge(),G("dragend")};return x&&(r.on("dragstart",nt),r.on("drag",Xe),r.on("dragend",ct)),{destroy(){x&&(r==null||r.off("dragstart",nt),r==null||r.off("drag",Xe),r==null||r.off("dragend",ct)),r==null||r.remove()}}}function ge(){let Ie=r==null?void 0:r.getLngLat();Ie&&(Array.isArray(c)?n(9,c=[Ie.lng,Ie.lat]):c&&"lon"in c?n(9,c={lon:Ie.lng,lat:Ie.lat}):n(9,c=Ie))}function le(Ie){Ie.key===" "&&(Ie.preventDefault(),Ie.stopPropagation(),G("click"))}function G(Ie){if(!_)return;let nt=r==null?void 0:r.getLngLat();if(!nt)return;const Xe=[nt.lng,nt.lat];let ct={map:s,marker:r,lngLat:Xe,features:[{type:"Feature",properties:(P==null?void 0:P.properties)??{},geometry:{type:"Point",coordinates:Xe}}]};Or(ve,t={...ct,layerType:"marker",type:Ie},t),W(Ie,ct)}const ee=()=>G("click"),fe=()=>G("dblclick"),$e=()=>G("contextmenu"),he=Ie=>{G("mouseenter")},ke=()=>{G("mouseleave")},Ue=()=>G("mousemove");return i.$$set=Ie=>{"lngLat"in Ie&&n(9,c=Ie.lngLat),"class"in Ie&&n(0,d=Ie.class),"interactive"in Ie&&n(10,_=Ie.interactive),"asButton"in Ie&&n(1,b=Ie.asButton),"draggable"in Ie&&n(11,x=Ie.draggable),"feature"in Ie&&n(12,P=Ie.feature),"offset"in Ie&&n(13,L=Ie.offset),"zIndex"in Ie&&n(2,D=Ie.zIndex),"rotation"in Ie&&n(14,B=Ie.rotation),"opacity"in Ie&&n(15,Z=Ie.opacity),"$$scope"in Ie&&n(17,o=Ie.$$scope)},i.$$.update=()=>{i.$$.dirty&66048&&(r==null||r.setLngLat(c)),i.$$.dirty&73728&&(r==null||r.setOffset(L??[0,0])),i.$$.dirty&81920&&(r==null||r.setRotation(B)),i.$$.dirty&98304&&(r==null||r.setOpacity(Z.toString()))},[d,b,D,Q,ve,re,ce,le,G,c,_,x,P,L,B,Z,r,o,a,ee,fe,$e,he,ke,Ue]}class FI extends st{constructor(e){super(),it(this,e,OI,LI,rt,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14,opacity:15})}}const BI=i=>({features:i[0]&16,data:i[0]&16,map:i[0]&4,close:i[0]&1}),vg=i=>{var e;return{features:i[4],data:(e=i[4])==null?void 0:e[0],map:i[2],close:i[31]}};function yg(i){let e,n,t=(i[4]||i[3]instanceof ui.Marker)&&bg(i);return{c(){e=oe("div"),t&&t.c()},l(r){e=ae(r,"DIV",{});var s=we(e);t&&t.l(s),s.forEach(S)},m(r,s){R(r,e,s),t&&t.m(e,null),i[32](e),n=!0},p(r,s){r[4]||r[3]instanceof ui.Marker?t?(t.p(r,s),s[0]&24&&T(t,1)):(t=bg(r),t.c(),T(t,1),t.m(e,null)):t&&(dt(),E(t,1,1,()=>{t=null}),pt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&S(e),t&&t.d(),i[32](null)}}}function bg(i){let e;const n=i[30].default,t=kt(n,i,i[29],vg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&536870933)&&Ct(t,n,r,r[29],e?Tt(n,r[29],s,BI):St(r[29]),vg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function NI(i){let e,n,t=i[9].default&&yg(i);return{c(){t&&t.c(),e=Be()},l(r){t&&t.l(r),e=Be()},m(r,s){t&&t.m(r,s),R(r,e,s),n=!0},p(r,s){r[9].default?t?(t.p(r,s),s[0]&512&&T(t,1)):(t=yg(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(dt(),E(t,1,1,()=>{t=null}),pt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&S(e),t&&t.d(r)}}}function VI(i,e,n){let t,r,s,a,o,c,{$$slots:d={},$$scope:_}=e;const b=ow(d);let{closeButton:x=void 0}=e,{closeOnClickOutside:P=!0}=e,{closeOnClickInside:L=!1}=e,{closeOnMove:D=!1}=e,{openOn:B="click"}=e,{openIfTopMost:Z=!0}=e,{focusAfterOpen:W=!0}=e,{anchor:Q=void 0}=e,{offset:ve=void 0}=e,{popupClass:re=void 0}=e,{maxWidth:ce=void 0}=e,{lngLat:ge=void 0}=e,{html:le=void 0}=e,{open:G=!1}=e;const ee=wl(),{map:fe,popupTarget:$e,layerEvent:he,layer:ke,eventTopMost:Ue}=Sl();sn(i,fe,tt=>n(2,s=tt)),sn(i,$e,tt=>n(3,o=tt)),sn(i,he,tt=>n(28,a=tt)),sn(i,ke,tt=>n(35,c=tt));const Ie=["click","dblclick","contextmenu"];let nt,Xe=!1,ct;function mt(){if(!nt)return;let tt=nt.getElement();!tt||tt===ct||(ct=tt,B==="hover"&&(ct.style.pointerEvents="none"),ct.addEventListener("mouseenter",()=>{n(24,Xe=!0)},{passive:!0}),ct.addEventListener("mouseleave",()=>{n(24,Xe=!1)},{passive:!0}),ct.addEventListener("click",()=>{L&&n(0,G=!1)},{passive:!0}))}Qn(()=>{if(s)return s.on("click",ot),s.on("contextmenu",ot),typeof o=="string"&&(s.on("click",o,mn),s.on("dblclick",o,mn),s.on("contextmenu",o,mn),s.on("mousemove",o,fn),s.on("mouseleave",o,un),s.on("touchstart",o,It),s.on("touchend",o,At)),()=>{s!=null&&s.loaded()&&(nt==null||nt.remove(),s.off("click",ot),s.off("contextmenu",ot),o instanceof ui.Marker?o.getPopup()===nt&&o.setPopup(void 0):typeof o=="string"&&(s.off("click",o,mn),s.off("dblclick",o,mn),s.off("contextmenu",o,mn),s.off("mousemove",o,fn),s.off("mouseleave",o,un),s.off("touchstart",o,It),s.off("touchend",o,At)))}});function Dt(tt){return Z?!("marker"in tt)&&!mI(tt)&&Ue(tt)!==c:!1}let zt=null,Yt="normal";function mn(tt){tt.type===B&&(Dt(tt)||("layerType"in tt?tt.layerType==="deckgl"?(n(10,ge=tt.coordinate),n(4,zt=tt.object?[tt.object]:null)):(n(10,ge=tt.lngLat),n(4,zt=tt.features??[])):(n(10,ge=tt.lngLat),n(4,zt=tt.features??[])),setTimeout(()=>n(0,G=!0))))}let cn=null;function It(tt){cn=tt.point}function At(tt){if(!cn||B!=="hover")return;let yn=cn.dist(tt.point);cn=null,yn<3&&(n(10,ge=tt.lngLat),n(4,zt=tt.features??[]),nt.isOpen()?n(25,Yt="justOpened"):(n(25,Yt="opening"),n(0,G=!0)))}function un(tt){B!=="hover"||cn||Yt!=="normal"||(n(0,G=!1),n(4,zt=null))}function fn(tt){if(!(B!=="hover"||cn||Yt!=="normal")){if(Dt(tt)){n(0,G=!1),n(4,zt=null);return}n(0,G=!0),n(4,zt=tt.features??[]),n(10,ge=tt.lngLat)}}function ot(tt){if(Yt==="justOpened"){n(25,Yt="normal");return}if(!P)return;let yn=[ct,o instanceof ui.Marker?o==null?void 0:o.getElement():null];G&&nt.isOpen()&&!yn.some(Ze=>Ze==null?void 0:Ze.contains(tt.originalEvent.target))&&(tt.type==="contextmenu"&&B==="contextmenu"||tt.type!=="contextmenu")&&n(0,G=!1)}Uo(()=>{s&&(nt!=null&&nt.isOpen())&&nt.remove()});let qt;const wt=()=>n(0,G=!1);function xt(tt){Vt[tt?"unshift":"push"](()=>{qt=tt,n(1,qt)})}return i.$$set=tt=>{"closeButton"in tt&&n(11,x=tt.closeButton),"closeOnClickOutside"in tt&&n(12,P=tt.closeOnClickOutside),"closeOnClickInside"in tt&&n(13,L=tt.closeOnClickInside),"closeOnMove"in tt&&n(14,D=tt.closeOnMove),"openOn"in tt&&n(15,B=tt.openOn),"openIfTopMost"in tt&&n(16,Z=tt.openIfTopMost),"focusAfterOpen"in tt&&n(17,W=tt.focusAfterOpen),"anchor"in tt&&n(18,Q=tt.anchor),"offset"in tt&&n(19,ve=tt.offset),"popupClass"in tt&&n(20,re=tt.popupClass),"maxWidth"in tt&&n(21,ce=tt.maxWidth),"lngLat"in tt&&n(10,ge=tt.lngLat),"html"in tt&&n(22,le=tt.html),"open"in tt&&n(0,G=tt.open),"$$scope"in tt&&n(29,_=tt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&14336&&n(27,t=x??(!P&&!L)),i.$$.dirty[0]&146685952&&(nt||(n(23,nt=new ui.Popup({closeButton:t,closeOnClick:!1,closeOnMove:D,focusAfterOpen:W,maxWidth:ce,className:re,anchor:Q,offset:ve})),ct=nt.getElement(),nt.on("open",()=>{n(0,G=!0),mt(),ee("open",nt)}),nt.on("close",()=>{n(0,G=!1),ee("close",nt)}),nt.on("hover",()=>{ee("hover",nt)}))),i.$$.dirty[0]&8421384&&nt&&o instanceof ui.Marker&&(B==="click"?o.setPopup(nt):o.getPopup()===nt&&o.setPopup(void 0)),i.$$.dirty[0]&268468224&&Ie.includes(B)&&(a==null?void 0:a.type)===B&&(mn(a),Or(he,a=null,a)),i.$$.dirty[0]&268468224&&n(26,r=B==="hover"&&((a==null?void 0:a.type)==="mousemove"||(a==null?void 0:a.type)==="mouseenter")),i.$$.dirty[0]&352354304&&B==="hover"&&he&&(r&&a&&(a.layerType==="deckgl"?(n(10,ge=a.coordinate),n(4,zt=a.object?[a.object]:null)):(n(10,ge=a.lngLat),n(4,zt=a.features??[]))),n(0,G=(r||Xe)??!1)),i.$$.dirty[0]&12582914&&(qt?nt.setDOMContent(qt):le&&nt.setHTML(le)),i.$$.dirty[0]&8389632&&ge&&nt.setLngLat(ge),i.$$.dirty[0]&41943045&&s){let tt=nt.isOpen();G&&!tt?(nt.addTo(s),Yt==="opening"&&n(25,Yt="justOpened")):!G&&tt&&nt.remove()}},[G,qt,s,o,zt,fe,$e,he,ke,b,ge,x,P,L,D,B,Z,W,Q,ve,re,ce,le,nt,Xe,Yt,r,t,a,_,d,wt,xt]}class UI extends st{constructor(e){super(),it(this,e,VI,NI,rt,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}var hu=Uint8Array,fy=Uint16Array,jI=Int32Array,qI=new hu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),HI=new hu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hy=function(i,e){for(var n=new fy(31),t=0;t<31;++t)n[t]=e+=1<<i[t-1];for(var r=new jI(n[30]),t=1;t<30;++t)for(var s=n[t];s<n[t+1];++s)r[s]=s-n[t]<<5|t;return{b:n,r}},dy=hy(qI,2),GI=dy.b,ZI=dy.r;GI[28]=258,ZI[258]=28;hy(HI,0);var WI=new fy(32768);for(Yn=0;Yn<32768;++Yn)co=(Yn&43690)>>1|(Yn&21845)<<1,co=(co&52428)>>2|(co&13107)<<2,co=(co&61680)>>4|(co&3855)<<4,WI[Yn]=((co&65280)>>8|(co&255)<<8)>>1;var co,Yn,th=new hu(288);for(Yn=0;Yn<144;++Yn)th[Yn]=8;var Yn;for(Yn=144;Yn<256;++Yn)th[Yn]=9;var Yn;for(Yn=256;Yn<280;++Yn)th[Yn]=7;var Yn;for(Yn=280;Yn<288;++Yn)th[Yn]=8;var Yn,KI=new hu(32);for(Yn=0;Yn<32;++Yn)KI[Yn]=5;var Yn,XI=new hu(0),JI=typeof TextDecoder<"u"&&new TextDecoder,YI=0;try{JI.decode(XI,{stream:!0}),YI=1}catch{}const Rd=Symbol("EMBLA_CAROUSEL_CONTEXT");function QI(i){return Si(Rd,i),i}function py(i="This component"){if(!aw(Rd))throw new Error(`${i} must be used within a <Carousel.Root> component`);return di(Rd)}function e3(i){let e,n,t,r,s;const a=i[7].default,o=kt(a,i,i[6],null);let c=[{class:n=Ut("relative",i[0])},{role:"region"},{"aria-roledescription":"carousel"},i[1]],d={};for(let _=0;_<c.length;_+=1)d=Se(d,c[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{class:!0,role:!0,"aria-roledescription":!0});var b=we(e);o&&o.l(b),b.forEach(S),this.h()},h(){Bt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),t=!0,r||(s=[$t(e,"mouseenter",i[8]),$t(e,"mouseleave",i[9])],r=!0)},p(_,[b]){o&&o.p&&(!t||b&64)&&Ct(o,a,_,_[6],t?Tt(a,_[6],b,null):St(_[6]),null),Bt(e,d=Mt(c,[(!t||b&1&&n!==(n=Ut("relative",_[0])))&&{class:n},{role:"region"},{"aria-roledescription":"carousel"},b&2&&_[1]]))},i(_){t||(T(o,_),t=!0)},o(_){E(o,_),t=!1},d(_){_&&S(e),o&&o.d(_),r=!1,br(s)}}}function t3(i,e,n){const t=["opts","plugins","api","orientation","class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{opts:o={}}=e,{plugins:c=[]}=e,{api:d=void 0}=e,{orientation:_="horizontal"}=e,{class:b=void 0}=e;const x=hr(void 0),P=hr(_),L=hr(!1),D=hr(!1),B=hr(o),Z=hr(c);function W(){d==null||d.scrollPrev()}function Q(){d==null||d.scrollNext()}function ve(G){G&&(L.set(G.canScrollPrev()),D.set(G.canScrollNext()))}function re(G){G.key==="ArrowLeft"?(G.preventDefault(),W()):G.key==="ArrowRight"&&(G.preventDefault(),Q())}QI({api:x,scrollPrev:W,scrollNext:Q,orientation:P,canScrollNext:D,canScrollPrev:L,handleKeyDown:re,options:B,plugins:Z,onInit:ce});function ce(G){n(2,d=G.detail),x.set(d)}Uo(()=>{d==null||d.off("select",ve)});function ge(G){Ht.call(this,i,G)}function le(G){Ht.call(this,i,G)}return i.$$set=G=>{e=Se(Se({},e),Lt(G)),n(1,r=lt(e,t)),"opts"in G&&n(3,o=G.opts),"plugins"in G&&n(4,c=G.plugins),"api"in G&&n(2,d=G.api),"orientation"in G&&n(5,_=G.orientation),"class"in G&&n(0,b=G.class),"$$scope"in G&&n(6,a=G.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&P.set(_),i.$$.dirty&16&&Z.set(c),i.$$.dirty&8&&B.set(o),i.$$.dirty&4&&d&&(ve(d),d.on("select",ve),d.on("reInit",ve))},[b,r,d,o,c,_,a,s,ge,le]}class n3 extends st{constructor(e){super(),it(this,e,t3,e3,rt,{opts:3,plugins:4,api:2,orientation:5,class:0})}}function r3(i){return Object.prototype.toString.call(i)==="[object Object]"}function $g(i){return r3(i)||Array.isArray(i)}function s3(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function np(i,e){const n=Object.keys(i),t=Object.keys(e);if(n.length!==t.length)return!1;const r=JSON.stringify(Object.keys(i.breakpoints||{})),s=JSON.stringify(Object.keys(e.breakpoints||{}));return r!==s?!1:n.every(a=>{const o=i[a],c=e[a];return typeof o=="function"?`${o}`==`${c}`:!$g(o)||!$g(c)?o===c:np(o,c)})}function wg(i){return i.concat().sort((e,n)=>e.name>n.name?1:-1).map(e=>e.options)}function i3(i,e){if(i.length!==e.length)return!1;const n=wg(i),t=wg(e);return n.every((r,s)=>{const a=t[s];return np(r,a)})}function rp(i){return typeof i=="number"}function Od(i){return typeof i=="string"}function sp(i){return typeof i=="boolean"}function xg(i){return Object.prototype.toString.call(i)==="[object Object]"}function yr(i){return Math.abs(i)}function ip(i){return Math.sign(i)}function Jc(i,e){return yr(i-e)}function o3(i,e){if(i===0||e===0||yr(i)<=yr(e))return 0;const n=Jc(yr(i),yr(e));return yr(n/i)}function tu(i){return nu(i).map(Number)}function Ci(i){return i[du(i)]}function du(i){return Math.max(0,i.length-1)}function op(i,e){return e===du(i)}function kg(i,e=0){return Array.from(Array(i),(n,t)=>e+t)}function nu(i){return Object.keys(i)}function my(i,e){return[i,e].reduce((n,t)=>(nu(t).forEach(r=>{const s=n[r],a=t[r],o=xg(s)&&xg(a);n[r]=o?my(s,a):a}),n),{})}function Fd(i,e){return typeof e.MouseEvent<"u"&&i instanceof e.MouseEvent}function a3(i,e){const n={start:t,center:r,end:s};function t(){return 0}function r(c){return s(c)/2}function s(c){return e-c}function a(c,d){return Od(i)?n[i](c):i(e,c,d)}return{measure:a}}function ru(){let i=[];function e(r,s,a,o={passive:!0}){let c;if("addEventListener"in r)r.addEventListener(s,a,o),c=()=>r.removeEventListener(s,a,o);else{const d=r;d.addListener(a),c=()=>d.removeListener(a)}return i.push(c),t}function n(){i=i.filter(r=>r())}const t={add:e,clear:n};return t}function l3(i,e,n,t){const r=ru(),s=1e3/60;let a=null,o=0,c=0;function d(){r.add(i,"visibilitychange",()=>{i.hidden&&L()})}function _(){P(),r.clear()}function b(B){if(!c)return;a||(a=B);const Z=B-a;for(a=B,o+=Z;o>=s;)n(),o-=s;const W=yr(o/s);t(W),c&&e.requestAnimationFrame(b)}function x(){c||(c=e.requestAnimationFrame(b))}function P(){e.cancelAnimationFrame(c),a=null,o=0,c=0}function L(){a=null,o=0}return{init:d,destroy:_,start:x,stop:P,update:n,render:t}}function c3(i,e){const n=e==="rtl",t=i==="y",r=t?"y":"x",s=t?"x":"y",a=!t&&n?-1:1,o=_(),c=b();function d(L){const{height:D,width:B}=L;return t?D:B}function _(){return t?"top":n?"right":"left"}function b(){return t?"bottom":n?"left":"right"}function x(L){return L*a}return{scroll:r,cross:s,startEdge:o,endEdge:c,measureSize:d,direction:x}}function Aa(i=0,e=0){const n=yr(i-e);function t(d){return d<i}function r(d){return d>e}function s(d){return t(d)||r(d)}function a(d){return s(d)?t(d)?i:e:d}function o(d){return n?d-n*Math.ceil((d-e)/n):d}return{length:n,max:e,min:i,constrain:a,reachedAny:s,reachedMax:r,reachedMin:t,removeOffset:o}}function _y(i,e,n){const{constrain:t}=Aa(0,i),r=i+1;let s=a(e);function a(x){return n?yr((r+x)%r):t(x)}function o(){return s}function c(x){return s=a(x),b}function d(x){return _().set(o()+x)}function _(){return _y(i,o(),n)}const b={get:o,set:c,add:d,clone:_};return b}function u3(i,e,n,t,r,s,a,o,c,d,_,b,x,P,L,D,B,Z,W){const{cross:Q,direction:ve}=i,re=["INPUT","SELECT","TEXTAREA"],ce={passive:!1},ge=ru(),le=ru(),G=Aa(50,225).constrain(P.measure(20)),ee={mouse:300,touch:400},fe={mouse:500,touch:600},$e=L?43:25;let he=!1,ke=0,Ue=0,Ie=!1,nt=!1,Xe=!1,ct=!1;function mt(wt){if(!W)return;function xt(yn){(sp(W)||W(wt,yn))&&It(yn)}const tt=e;ge.add(tt,"dragstart",yn=>yn.preventDefault(),ce).add(tt,"touchmove",()=>{},ce).add(tt,"touchend",()=>{}).add(tt,"touchstart",xt).add(tt,"mousedown",xt).add(tt,"touchcancel",un).add(tt,"contextmenu",un).add(tt,"click",fn,!0)}function Dt(){ge.clear(),le.clear()}function zt(){const wt=ct?n:e;le.add(wt,"touchmove",At,ce).add(wt,"touchend",un).add(wt,"mousemove",At,ce).add(wt,"mouseup",un)}function Yt(wt){const xt=wt.nodeName||"";return re.includes(xt)}function mn(){return(L?fe:ee)[ct?"mouse":"touch"]}function cn(wt,xt){const tt=b.add(ip(wt)*-1),yn=_.byDistance(wt,!L).distance;return L||yr(wt)<G?yn:B&&xt?yn*.5:_.byIndex(tt.get(),0).distance}function It(wt){const xt=Fd(wt,t);ct=xt,Xe=L&&xt&&!wt.buttons&&he,he=Jc(r.get(),a.get())>=2,!(xt&&wt.button!==0)&&(Yt(wt.target)||(Ie=!0,s.pointerDown(wt),d.useFriction(0).useDuration(0),r.set(a),zt(),ke=s.readPoint(wt),Ue=s.readPoint(wt,Q),x.emit("pointerDown")))}function At(wt){if(!Fd(wt,t)&&wt.touches.length>=2)return un(wt);const tt=s.readPoint(wt),yn=s.readPoint(wt,Q),Ze=Jc(tt,ke),hn=Jc(yn,Ue);if(!nt&&!ct&&(!wt.cancelable||(nt=Ze>hn,!nt)))return un(wt);const Bn=s.pointerMove(wt);Ze>D&&(Xe=!0),d.useFriction(.3).useDuration(1),o.start(),r.add(ve(Bn)),wt.preventDefault()}function un(wt){const tt=_.byDistance(0,!1).index!==b.get(),yn=s.pointerUp(wt)*mn(),Ze=cn(ve(yn),tt),hn=o3(yn,Ze),Bn=$e-10*hn,kn=Z+hn/50;nt=!1,Ie=!1,le.clear(),d.useDuration(Bn).useFriction(kn),c.distance(Ze,!L),ct=!1,x.emit("pointerUp")}function fn(wt){Xe&&(wt.stopPropagation(),wt.preventDefault(),Xe=!1)}function ot(){return Ie}return{init:mt,pointerDown:ot,destroy:Dt}}function f3(i,e){let t,r;function s(b){return b.timeStamp}function a(b,x){const L=`client${(x||i.scroll)==="x"?"X":"Y"}`;return(Fd(b,e)?b:b.touches[0])[L]}function o(b){return t=b,r=b,a(b)}function c(b){const x=a(b)-a(r),P=s(b)-s(t)>170;return r=b,P&&(t=b),x}function d(b){if(!t||!r)return 0;const x=a(r)-a(t),P=s(b)-s(t),L=s(b)-s(r)>170,D=x/P;return P&&!L&&yr(D)>.1?D:0}return{pointerDown:o,pointerMove:c,pointerUp:d,readPoint:a}}function h3(){function i(n){const{offsetTop:t,offsetLeft:r,offsetWidth:s,offsetHeight:a}=n;return{top:t,right:r+s,bottom:t+a,left:r,width:s,height:a}}return{measure:i}}function d3(i){function e(t){return i*(t/100)}return{measure:e}}function p3(i,e,n,t,r,s,a){let o,c,d=[],_=!1;function b(D){return r.measureSize(a.measure(D))}function x(D){if(!s)return;c=b(i),d=t.map(b);function B(W){for(const Q of W){const ve=Q.target===i,re=t.indexOf(Q.target),ce=ve?c:d[re],ge=b(ve?i:t[re]);if(yr(ge-ce)>=.5){n.requestAnimationFrame(()=>{D.reInit(),e.emit("resize")});break}}}o=new ResizeObserver(W=>{_||(sp(s)||s(D,W))&&B(W)}),[i].concat(t).forEach(W=>o.observe(W))}function P(){o&&o.disconnect(),_=!0}return{init:x,destroy:P}}function m3(i,e,n,t,r){let s=0,a=0,o=t,c=r,d=i.get(),_=0;function b(){const re=n.get()-i.get(),ce=!o;let ge=0;return ce?(s=0,i.set(n),ge=re):(s+=re/o,s*=c,d+=s,i.add(s),ge=d-_),a=ip(ge),_=d,ve}function x(){const re=n.get()-e.get();return yr(re)<.001}function P(){return o}function L(){return a}function D(){return s}function B(){return W(t)}function Z(){return Q(r)}function W(re){return o=re,ve}function Q(re){return c=re,ve}const ve={direction:L,duration:P,velocity:D,seek:b,settled:x,useBaseFriction:Z,useBaseDuration:B,useFriction:Q,useDuration:W};return ve}function _3(i,e,n,t,r){const s=r.measure(10),a=r.measure(50),o=Aa(.1,.99);let c=!1;function d(){return!(c||!i.reachedAny(n.get())||!i.reachedAny(e.get()))}function _(P){if(!d())return;const L=i.reachedMin(e.get())?"min":"max",D=yr(i[L]-e.get()),B=n.get()-e.get(),Z=o.constrain(D/a);n.subtract(B*Z),!P&&yr(B)<s&&(n.set(i.constrain(n.get())),t.useDuration(25).useBaseFriction())}function b(P){c=!P}return{constrain:_,toggleActive:b}}function g3(i,e,n,t,r){const s=Aa(-e+i,0),a=b(),o=_(),c=x();function d(L,D){return Jc(L,D)<1}function _(){const L=a[0],D=Ci(a),B=a.lastIndexOf(L),Z=a.indexOf(D)+1;return Aa(B,Z)}function b(){return n.map((L,D)=>{const{min:B,max:Z}=s,W=s.constrain(L),Q=!D,ve=op(n,D);return Q?Z:ve||d(B,W)?B:d(Z,W)?Z:W}).map(L=>parseFloat(L.toFixed(3)))}function x(){if(e<=i+r)return[s.max];if(t==="keepSnaps")return a;const{min:L,max:D}=o;return a.slice(L,D)}return{snapsContained:c,scrollContainLimit:o}}function v3(i,e,n){const t=e[0],r=n?t-i:Ci(e);return{limit:Aa(r,t)}}function y3(i,e,n,t){const s=e.min+.1,a=e.max+.1,{reachedMin:o,reachedMax:c}=Aa(s,a);function d(x){return x===1?c(n.get()):x===-1?o(n.get()):!1}function _(x){if(!d(x))return;const P=i*(x*-1);t.forEach(L=>L.add(P))}return{loop:_}}function b3(i){const{max:e,length:n}=i;function t(s){const a=s-e;return n?a/-n:0}return{get:t}}function $3(i,e,n,t,r){const{startEdge:s,endEdge:a}=i,{groupSlides:o}=r,c=b().map(e.measure),d=x(),_=P();function b(){return o(t).map(D=>Ci(D)[a]-D[0][s]).map(yr)}function x(){return t.map(D=>n[s]-D[s]).map(D=>-yr(D))}function P(){return o(d).map(D=>D[0]).map((D,B)=>D+c[B])}return{snaps:d,snapsAligned:_}}function w3(i,e,n,t,r,s){const{groupSlides:a}=r,{min:o,max:c}=t,d=_();function _(){const x=a(s),P=!i||e==="keepSnaps";return n.length===1?[s]:P?x:x.slice(o,c).map((L,D,B)=>{const Z=!D,W=op(B,D);if(Z){const Q=Ci(B[0])+1;return kg(Q)}if(W){const Q=du(s)-Ci(B)[0]+1;return kg(Q,Ci(B)[0])}return L})}return{slideRegistry:d}}function x3(i,e,n,t,r){const{reachedAny:s,removeOffset:a,constrain:o}=t;function c(L){return L.concat().sort((D,B)=>yr(D)-yr(B))[0]}function d(L){const D=i?a(L):o(L),B=e.map((W,Q)=>({diff:_(W-D,0),index:Q})).sort((W,Q)=>yr(W.diff)-yr(Q.diff)),{index:Z}=B[0];return{index:Z,distance:D}}function _(L,D){const B=[L,L+n,L-n];if(!i)return B[0];if(!D)return c(B);const Z=B.filter(W=>ip(W)===D);return Z.length?c(Z):Ci(B)-n}function b(L,D){const B=e[L]-r.get(),Z=_(B,D);return{index:L,distance:Z}}function x(L,D){const B=r.get()+L,{index:Z,distance:W}=d(B),Q=!i&&s(B);if(!D||Q)return{index:Z,distance:L};const ve=e[Z]-W,re=L+_(ve,0);return{index:Z,distance:re}}return{byDistance:x,byIndex:b,shortcut:_}}function k3(i,e,n,t,r,s,a){function o(b){const x=b.distance,P=b.index!==e.get();s.add(x),x&&(t.duration()?i.start():(i.update(),i.render(1),i.update())),P&&(n.set(e.get()),e.set(b.index),a.emit("select"))}function c(b,x){const P=r.byDistance(b,x);o(P)}function d(b,x){const P=e.clone().set(b),L=r.byIndex(P.get(),x);o(L)}return{distance:c,index:d}}function C3(i,e,n,t,r,s){let a=0;function o(){s.add(document,"keydown",c,!1),e.forEach(d)}function c(b){b.code==="Tab"&&(a=new Date().getTime())}function d(b){const x=()=>{if(new Date().getTime()-a>10)return;i.scrollLeft=0;const D=e.indexOf(b),B=n.findIndex(Z=>Z.includes(D));rp(B)&&(r.useDuration(0),t.index(B,0))};s.add(b,"focus",x,{passive:!0,capture:!0})}return{init:o}}function Af(i){let e=i;function n(){return e}function t(c){e=a(c)}function r(c){e+=a(c)}function s(c){e-=a(c)}function a(c){return rp(c)?c:c.get()}return{get:n,set:t,add:r,subtract:s}}function gy(i,e){const n=i.scroll==="x"?s:a,t=e.style;let r=!1;function s(b){return`translate3d(${b}px,0px,0px)`}function a(b){return`translate3d(0px,${b}px,0px)`}function o(b){r||(t.transform=n(i.direction(b)))}function c(b){r=!b}function d(){r||(t.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:d,to:o,toggleActive:c}}function S3(i,e,n,t,r,s,a,o,c){const _=tu(r),b=tu(r).reverse(),x=Z().concat(W());function P(ge,le){return ge.reduce((G,ee)=>G-r[ee],le)}function L(ge,le){return ge.reduce((G,ee)=>P(G,le)>0?G.concat([ee]):G,[])}function D(ge){return s.map((le,G)=>({start:le-t[G]+.5+ge,end:le+e-.5+ge}))}function B(ge,le,G){const ee=D(le);return ge.map(fe=>{const $e=G?0:-n,he=G?n:0,ke=G?"end":"start",Ue=ee[fe][ke];return{index:fe,loopPoint:Ue,slideLocation:Af(-1),translate:gy(i,c[fe]),target:()=>o.get()>Ue?$e:he}})}function Z(){const ge=a[0],le=L(b,ge);return B(le,n,!1)}function W(){const ge=e-a[0]-1,le=L(_,ge);return B(le,-n,!0)}function Q(){return x.every(({index:ge})=>{const le=_.filter(G=>G!==ge);return P(le,e)<=.1})}function ve(){x.forEach(ge=>{const{target:le,translate:G,slideLocation:ee}=ge,fe=le();fe!==ee.get()&&(G.to(fe),ee.set(fe))})}function re(){x.forEach(ge=>ge.translate.clear())}return{canLoop:Q,clear:re,loop:ve,loopPoints:x}}function T3(i,e,n){let t,r=!1;function s(c){if(!n)return;function d(_){for(const b of _)if(b.type==="childList"){c.reInit(),e.emit("slidesChanged");break}}t=new MutationObserver(_=>{r||(sp(n)||n(c,_))&&d(_)}),t.observe(i,{childList:!0})}function a(){t&&t.disconnect(),r=!0}return{init:s,destroy:a}}function I3(i,e,n,t){const r={};let s=null,a=null,o,c=!1;function d(){o=new IntersectionObserver(L=>{c||(L.forEach(D=>{const B=e.indexOf(D.target);r[B]=D}),s=null,a=null,n.emit("slidesInView"))},{root:i.parentElement,threshold:t}),e.forEach(L=>o.observe(L))}function _(){o&&o.disconnect(),c=!0}function b(L){return nu(r).reduce((D,B)=>{const Z=parseInt(B),{isIntersecting:W}=r[Z];return(L&&W||!L&&!W)&&D.push(Z),D},[])}function x(L=!0){if(L&&s)return s;if(!L&&a)return a;const D=b(L);return L&&(s=D),L||(a=D),D}return{init:d,destroy:_,get:x}}function E3(i,e,n,t,r,s){const{measureSize:a,startEdge:o,endEdge:c}=i,d=n[0]&&r,_=L(),b=D(),x=n.map(a),P=B();function L(){if(!d)return 0;const W=n[0];return yr(e[o]-W[o])}function D(){if(!d)return 0;const W=s.getComputedStyle(Ci(t));return parseFloat(W.getPropertyValue(`margin-${c}`))}function B(){return n.map((W,Q,ve)=>{const re=!Q,ce=op(ve,Q);return re?x[Q]+_:ce?x[Q]+b:ve[Q+1][o]-W[o]}).map(yr)}return{slideSizes:x,slideSizesWithGaps:P,startGap:_,endGap:b}}function P3(i,e,n,t,r,s,a,o,c){const{startEdge:d,endEdge:_,direction:b}=i,x=rp(n);function P(Z,W){return tu(Z).filter(Q=>Q%W===0).map(Q=>Z.slice(Q,Q+W))}function L(Z){return Z.length?tu(Z).reduce((W,Q,ve)=>{const re=Ci(W)||0,ce=re===0,ge=Q===du(Z),le=r[d]-s[re][d],G=r[d]-s[Q][_],ee=!t&&ce?b(a):0,fe=!t&&ge?b(o):0,$e=yr(G-fe-(le+ee));return ve&&$e>e+c&&W.push(Q),ge&&W.push(Z.length),W},[]).map((W,Q,ve)=>{const re=Math.max(ve[Q-1]||0);return Z.slice(re,W)}):[]}function D(Z){return x?P(Z,n):L(Z)}return{groupSlides:D}}function A3(i,e,n,t,r,s,a){const{align:o,axis:c,direction:d,startIndex:_,loop:b,duration:x,dragFree:P,dragThreshold:L,inViewThreshold:D,slidesToScroll:B,skipSnaps:Z,containScroll:W,watchResize:Q,watchSlides:ve,watchDrag:re}=s,ce=2,ge=h3(),le=ge.measure(e),G=n.map(ge.measure),ee=c3(c,d),fe=ee.measureSize(le),$e=d3(fe),he=a3(o,fe),ke=!b&&!!W,Ue=b||!!W,{slideSizes:Ie,slideSizesWithGaps:nt,startGap:Xe,endGap:ct}=E3(ee,le,G,n,Ue,r),mt=P3(ee,fe,B,b,le,G,Xe,ct,ce),{snaps:Dt,snapsAligned:zt}=$3(ee,he,le,G,mt),Yt=-Ci(Dt)+Ci(nt),{snapsContained:mn,scrollContainLimit:cn}=g3(fe,Yt,zt,W,ce),It=ke?mn:zt,{limit:At}=v3(Yt,It,b),un=_y(du(It),_,b),fn=un.clone(),ot=tu(n),qt=({dragHandler:Ne,scrollBody:Nr,scrollBounds:Vr,options:{loop:js}})=>{js||Vr.constrain(Ne.pointerDown()),Nr.seek()},wt=({scrollBody:Ne,translate:Nr,location:Vr,offsetLocation:js,scrollLooper:pi,slideLooper:Ot,dragHandler:An,animation:wn,eventHandler:Ur,options:{loop:Xr}},Cn)=>{const Fs=Ne.velocity(),qs=Ne.settled();qs&&!An.pointerDown()&&(wn.stop(),Ur.emit("settle")),qs||Ur.emit("scroll"),js.set(Vr.get()-Fs+Fs*Cn),Xr&&(pi.loop(Ne.direction()),Ot.loop()),Nr.to(js.get())},xt=l3(t,r,()=>qt(Qs),Ne=>wt(Qs,Ne)),tt=.68,yn=It[un.get()],Ze=Af(yn),hn=Af(yn),Bn=Af(yn),kn=m3(Ze,hn,Bn,x,tt),Vn=x3(b,It,Yt,At,Bn),ir=k3(xt,un,fn,kn,Vn,Bn,a),_s=b3(At),Rs=ru(),gs=I3(e,n,a,D),{slideRegistry:Kr}=w3(ke,W,It,cn,mt,ot),Os=C3(i,n,Kr,ir,kn,Rs),Qs={ownerDocument:t,ownerWindow:r,eventHandler:a,containerRect:le,slideRects:G,animation:xt,axis:ee,dragHandler:u3(ee,i,t,r,Bn,f3(ee,r),Ze,xt,ir,kn,Vn,un,a,$e,P,L,Z,tt,re),eventStore:Rs,percentOfView:$e,index:un,indexPrevious:fn,limit:At,location:Ze,offsetLocation:hn,options:s,resizeHandler:p3(e,a,r,n,ee,Q,ge),scrollBody:kn,scrollBounds:_3(At,hn,Bn,kn,$e),scrollLooper:y3(Yt,At,hn,[Ze,hn,Bn]),scrollProgress:_s,scrollSnapList:It.map(_s.get),scrollSnaps:It,scrollTarget:Vn,scrollTo:ir,slideLooper:S3(ee,fe,Yt,Ie,nt,Dt,It,hn,n),slideFocus:Os,slidesHandler:T3(e,a,ve),slidesInView:gs,slideIndexes:ot,slideRegistry:Kr,slidesToScroll:mt,target:Bn,translate:gy(ee,e)};return Qs}function M3(){const i={};let e;function n(c){e=c}function t(c){return i[c]||[]}function r(c){return t(c).forEach(d=>d(e,c)),o}function s(c,d){return i[c]=t(c).concat([d]),o}function a(c,d){return i[c]=t(c).filter(_=>_!==d),o}const o={init:n,emit:r,off:a,on:s};return o}const D3={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function z3(i){function e(s,a){return my(s,a||{})}function n(s){const a=s.breakpoints||{},o=nu(a).filter(c=>i.matchMedia(c).matches).map(c=>a[c]).reduce((c,d)=>e(c,d),{});return e(s,o)}function t(s){return s.map(a=>nu(a.breakpoints||{})).reduce((a,o)=>a.concat(o),[]).map(i.matchMedia)}return{mergeOptions:e,optionsAtMedia:n,optionsMediaQueries:t}}function L3(i){let e=[];function n(s,a){return e=a.filter(({options:o})=>i.optionsAtMedia(o).active!==!1),e.forEach(o=>o.init(s,i)),a.reduce((o,c)=>Object.assign(o,{[c.name]:c}),{})}function t(){e=e.filter(s=>s.destroy())}return{init:n,destroy:t}}function Uf(i,e,n){const t=i.ownerDocument,r=t.defaultView,s=z3(r),a=L3(s),o=ru(),c=M3(),{mergeOptions:d,optionsAtMedia:_,optionsMediaQueries:b}=s,{on:x,off:P,emit:L}=c,D=fe;let B=!1,Z,W=d(D3,Uf.globalOptions),Q=d(W),ve=[],re,ce,ge;function le(){const{container:qt,slides:wt}=Q;ce=(Od(qt)?i.querySelector(qt):qt)||i.children[0];const tt=Od(wt)?ce.querySelectorAll(wt):wt;ge=[].slice.call(tt||ce.children)}function G(qt){const wt=A3(i,ce,ge,t,r,qt,c);if(qt.loop&&!wt.slideLooper.canLoop()){const xt=Object.assign({},qt,{loop:!1});return G(xt)}return wt}function ee(qt,wt){B||(W=d(W,qt),Q=_(W),ve=wt||ve,le(),Z=G(Q),b([W,...ve.map(({options:xt})=>xt)]).forEach(xt=>o.add(xt,"change",fe)),Q.active&&(Z.translate.to(Z.location.get()),Z.animation.init(),Z.slidesInView.init(),Z.slideFocus.init(),Z.eventHandler.init(ot),Z.resizeHandler.init(ot),Z.slidesHandler.init(ot),Z.options.loop&&Z.slideLooper.loop(),ce.offsetParent&&ge.length&&Z.dragHandler.init(ot),re=a.init(ot,ve)))}function fe(qt,wt){const xt=Dt();$e(),ee(d({startIndex:xt},qt),wt),c.emit("reInit")}function $e(){Z.dragHandler.destroy(),Z.eventStore.clear(),Z.translate.clear(),Z.slideLooper.clear(),Z.resizeHandler.destroy(),Z.slidesHandler.destroy(),Z.slidesInView.destroy(),Z.animation.destroy(),a.destroy(),o.clear()}function he(){B||(B=!0,o.clear(),$e(),c.emit("destroy"))}function ke(qt,wt,xt){!Q.active||B||(Z.scrollBody.useBaseFriction().useDuration(wt===!0?0:Q.duration),Z.scrollTo.index(qt,xt||0))}function Ue(qt){const wt=Z.index.add(1).get();ke(wt,qt,-1)}function Ie(qt){const wt=Z.index.add(-1).get();ke(wt,qt,1)}function nt(){return Z.index.add(1).get()!==Dt()}function Xe(){return Z.index.add(-1).get()!==Dt()}function ct(){return Z.scrollSnapList}function mt(){return Z.scrollProgress.get(Z.location.get())}function Dt(){return Z.index.get()}function zt(){return Z.indexPrevious.get()}function Yt(){return Z.slidesInView.get()}function mn(){return Z.slidesInView.get(!1)}function cn(){return re}function It(){return Z}function At(){return i}function un(){return ce}function fn(){return ge}const ot={canScrollNext:nt,canScrollPrev:Xe,containerNode:un,internalEngine:It,destroy:he,off:P,on:x,emit:L,plugins:cn,previousScrollSnap:zt,reInit:D,rootNode:At,scrollNext:Ue,scrollPrev:Ie,scrollProgress:mt,scrollSnapList:ct,scrollTo:ke,selectedScrollSnap:Dt,slideNodes:fn,slidesInView:Yt,slidesNotInView:mn};return ee(e,n),setTimeout(()=>c.emit("init"),0),ot}Uf.globalOptions=void 0;function ap(i,e={options:{},plugins:[]}){let n=e,t;return s3()&&(Uf.globalOptions=ap.globalOptions,t=Uf(i,n.options,n.plugins),t.on("init",()=>i.dispatchEvent(new CustomEvent("emblaInit",{detail:t})))),{destroy:()=>{t&&t.destroy()},update:r=>{const s=!np(n.options,r.options),a=!i3(n.plugins,r.plugins);!s&&!a||(n=r,t&&t.reInit(n.options,n.plugins))}}}ap.globalOptions=void 0;function R3(i){let e,n,t,r,s,a,o;const c=i[10].default,d=kt(c,i,i[9],null);let _=[{class:t=Ut("flex",i[2]==="horizontal"?"-ml-4":"-mt-4 flex-col",i[0])},{"data-embla-container":""},i[8]],b={};for(let x=0;x<_.length;x+=1)b=Se(b,_[x]);return{c(){e=oe("div"),n=oe("div"),d&&d.c(),this.h()},l(x){e=ae(x,"DIV",{class:!0});var P=we(e);n=ae(P,"DIV",{class:!0,"data-embla-container":!0});var L=we(n);d&&d.l(L),L.forEach(S),P.forEach(S),this.h()},h(){Bt(n,b),ne(e,"class","overflow-hidden")},m(x,P){R(x,e,P),ue(e,n),d&&d.m(n,null),s=!0,a||(o=[Un(r=ap.call(null,e,{options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...i[1],axis:i[2]==="horizontal"?"x":"y"},plugins:i[3]})),$t(e,"emblaInit",i[7])],a=!0)},p(x,[P]){d&&d.p&&(!s||P&512)&&Ct(d,c,x,x[9],s?Tt(c,x[9],P,null):St(x[9]),null),Bt(n,b=Mt(_,[(!s||P&5&&t!==(t=Ut("flex",x[2]==="horizontal"?"-ml-4":"-mt-4 flex-col",x[0])))&&{class:t},{"data-embla-container":""},P&256&&x[8]])),r&&Hd(r.update)&&P&14&&r.update.call(null,{options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...x[1],axis:x[2]==="horizontal"?"x":"y"},plugins:x[3]})},i(x){s||(T(d,x),s=!0)},o(x){E(d,x),s=!1},d(x){x&&S(e),d&&d.d(x),a=!1,br(o)}}}function O3(i,e,n){const t=["class"];let r=lt(e,t),s,a,o,{$$slots:c={},$$scope:d}=e,{class:_=void 0}=e;const{orientation:b,options:x,plugins:P,onInit:L}=py("<Carousel.Content/>");return sn(i,b,D=>n(2,a=D)),sn(i,x,D=>n(1,s=D)),sn(i,P,D=>n(3,o=D)),i.$$set=D=>{e=Se(Se({},e),Lt(D)),n(8,r=lt(e,t)),"class"in D&&n(0,_=D.class),"$$scope"in D&&n(9,d=D.$$scope)},[_,s,a,o,b,x,P,L,r,d,c]}class F3 extends st{constructor(e){super(),it(this,e,O3,R3,rt,{class:0})}}function B3(i){let e,n,t;const r=i[5].default,s=kt(r,i,i[4],null);let a=[{role:"group"},{"aria-roledescription":"slide"},{class:n=Ut("min-w-0 shrink-0 grow-0 basis-full",i[1]==="horizontal"?"pl-4":"pt-4",i[0])},{"data-embla-slide":""},i[3]],o={};for(let c=0;c<a.length;c+=1)o=Se(o,a[c]);return{c(){e=oe("div"),s&&s.c(),this.h()},l(c){e=ae(c,"DIV",{role:!0,"aria-roledescription":!0,class:!0,"data-embla-slide":!0});var d=we(e);s&&s.l(d),d.forEach(S),this.h()},h(){Bt(e,o)},m(c,d){R(c,e,d),s&&s.m(e,null),t=!0},p(c,[d]){s&&s.p&&(!t||d&16)&&Ct(s,r,c,c[4],t?Tt(r,c[4],d,null):St(c[4]),null),Bt(e,o=Mt(a,[{role:"group"},{"aria-roledescription":"slide"},(!t||d&3&&n!==(n=Ut("min-w-0 shrink-0 grow-0 basis-full",c[1]==="horizontal"?"pl-4":"pt-4",c[0])))&&{class:n},{"data-embla-slide":""},d&8&&c[3]]))},i(c){t||(T(s,c),t=!0)},o(c){E(s,c),t=!1},d(c){c&&S(e),s&&s.d(c)}}}function N3(i,e,n){const t=["class"];let r=lt(e,t),s,{$$slots:a={},$$scope:o}=e,{class:c=void 0}=e;const{orientation:d}=py("<Carousel.Item/>");return sn(i,d,_=>n(1,s=_)),i.$$set=_=>{e=Se(Se({},e),Lt(_)),n(3,r=lt(e,t)),"class"in _&&n(0,c=_.class),"$$scope"in _&&n(4,o=_.$$scope)},[c,s,d,r,o,a]}class V3 extends st{constructor(e){super(),it(this,e,N3,B3,rt,{class:0})}}function U3(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function j3(i){let e,n;const t=[{class:Ut("text-lg font-semibold leading-none tracking-tight",i[0])},i[1]];let r={$$slots:{default:[U3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new gC({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("text-lg font-semibold leading-none tracking-tight",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function q3(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}class lp extends st{constructor(e){super(),it(this,e,q3,j3,rt,{class:0})}}function H3(i){let e;const n=i[1].default,t=kt(n,i,i[2],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&4)&&Ct(t,n,r,r[2],e?Tt(n,r[2],s,null):St(r[2]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function G3(i){let e,n;const t=[i[0]];let r={$$slots:{default:[H3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new AC({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&1?Mt(t,[dn(s[0])]):{};a&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Z3(i,e,n){const t=[];let r=lt(e,t),{$$slots:s={},$$scope:a}=e;return i.$$set=o=>{e=Se(Se({},e),Lt(o)),n(0,r=lt(e,t)),"$$scope"in o&&n(2,a=o.$$scope)},[r,s,a]}class W3 extends st{constructor(e){super(),it(this,e,Z3,G3,rt,{})}}function K3(i){let e,n,t;const r=i[3].default,s=kt(r,i,i[2],null);let a=[{class:n=Ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i[0])},i[1]],o={};for(let c=0;c<a.length;c+=1)o=Se(o,a[c]);return{c(){e=oe("div"),s&&s.c(),this.h()},l(c){e=ae(c,"DIV",{class:!0});var d=we(e);s&&s.l(d),d.forEach(S),this.h()},h(){Bt(e,o)},m(c,d){R(c,e,d),s&&s.m(e,null),t=!0},p(c,[d]){s&&s.p&&(!t||d&4)&&Ct(s,r,c,c[2],t?Tt(r,c[2],d,null):St(c[2]),null),Bt(e,o=Mt(a,[(!t||d&1&&n!==(n=Ut("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",c[0])))&&{class:n},d&2&&c[1]]))},i(c){t||(T(s,c),t=!0)},o(c){E(s,c),t=!1},d(c){c&&S(e),s&&s.d(c)}}}function X3(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(2,a=c.$$scope)},[o,r,a,s]}class J3 extends st{constructor(e){super(),it(this,e,X3,K3,rt,{class:0})}}function Y3(i){let e,n,t;const r=i[3].default,s=kt(r,i,i[2],null);let a=[{class:n=Ut("flex flex-col space-y-1.5 text-center sm:text-left",i[0])},i[1]],o={};for(let c=0;c<a.length;c+=1)o=Se(o,a[c]);return{c(){e=oe("div"),s&&s.c(),this.h()},l(c){e=ae(c,"DIV",{class:!0});var d=we(e);s&&s.l(d),d.forEach(S),this.h()},h(){Bt(e,o)},m(c,d){R(c,e,d),s&&s.m(e,null),t=!0},p(c,[d]){s&&s.p&&(!t||d&4)&&Ct(s,r,c,c[2],t?Tt(r,c[2],d,null):St(c[2]),null),Bt(e,o=Mt(a,[(!t||d&1&&n!==(n=Ut("flex flex-col space-y-1.5 text-center sm:text-left",c[0])))&&{class:n},d&2&&c[1]]))},i(c){t||(T(s,c),t=!0)},o(c){E(s,c),t=!1},d(c){c&&S(e),s&&s.d(c)}}}function Q3(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(2,a=c.$$scope)},[o,r,a,s]}class pu extends st{constructor(e){super(),it(this,e,Q3,Y3,rt,{class:0})}}function eE(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{class:Ut("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",i[0])},i[3]];let r={};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new nS({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&15?Mt(t,[a&2&&{transition:s[1]},a&4&&{transitionConfig:s[2]},a&1&&{class:Ut("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",s[0])},a&8&&dn(s[3])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function tE(i,e,n){const t=["class","transition","transitionConfig"];let r=lt(e,t),{class:s=void 0}=e,{transition:a=Nw}=e,{transitionConfig:o={duration:150}}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(3,r=lt(e,t)),"class"in c&&n(0,s=c.class),"transition"in c&&n(1,a=c.transition),"transitionConfig"in c&&n(2,o=c.transitionConfig)},[s,a,o,r]}class nE extends st{constructor(e){super(),it(this,e,tE,eE,rt,{class:0,transition:1,transitionConfig:2})}}function rE(i){let e,n,t,r="Close",s;return e=new Ew({props:{class:"h-4 w-4"}}),{c(){N(e.$$.fragment),n=me(),t=oe("span"),t.textContent=r,this.h()},l(a){j(e.$$.fragment,a),n=_e(a),t=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(t)!=="svelte-1pewzs3"&&(t.textContent=r),this.h()},h(){ne(t,"class","sr-only")},m(a,o){V(e,a,o),R(a,n,o),R(a,t,o),s=!0},p:vt,i(a){s||(T(e.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),s=!1},d(a){a&&(S(n),S(t)),U(e,a)}}}function sE(i){let e,n,t;const r=i[4].default,s=kt(r,i,i[5],null);return n=new kC({props:{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",$$slots:{default:[rE]},$$scope:{ctx:i}}}),{c(){s&&s.c(),e=me(),N(n.$$.fragment)},l(a){s&&s.l(a),e=_e(a),j(n.$$.fragment,a)},m(a,o){s&&s.m(a,o),R(a,e,o),V(n,a,o),t=!0},p(a,o){s&&s.p&&(!t||o&32)&&Ct(s,r,a,a[5],t?Tt(r,a[5],o,null):St(a[5]),null);const c={};o&32&&(c.$$scope={dirty:o,ctx:a}),n.$set(c)},i(a){t||(T(s,a),T(n.$$.fragment,a),t=!0)},o(a){E(s,a),E(n.$$.fragment,a),t=!1},d(a){a&&S(e),s&&s.d(a),U(n,a)}}}function iE(i){let e,n,t,r;e=new nE({});const s=[{transition:i[1]},{transitionConfig:i[2]},{class:Ut("w-full-dialog-custom fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",i[0])},i[3]];let a={$$slots:{default:[sE]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Se(a,s[o]);return t=new GC({props:a}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),r=!0},p(o,c){const d=c&15?Mt(s,[c&2&&{transition:o[1]},c&4&&{transitionConfig:o[2]},c&1&&{class:Ut("w-full-dialog-custom fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",o[0])},c&8&&dn(o[3])]):{};c&32&&(d.$$scope={dirty:c,ctx:o}),t.$set(d)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function oE(i){let e,n;return e=new W3({props:{$$slots:{default:[iE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&47&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function aE(i,e,n){const t=["class","transition","transitionConfig"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{transition:c=Zd}=e,{transitionConfig:d={duration:200}}=e;return i.$$set=_=>{e=Se(Se({},e),Lt(_)),n(3,r=lt(e,t)),"class"in _&&n(0,o=_.class),"transition"in _&&n(1,c=_.transition),"transitionConfig"in _&&n(2,d=_.transitionConfig),"$$scope"in _&&n(5,a=_.$$scope)},[o,c,d,r,s,a]}class za extends st{constructor(e){super(),it(this,e,aE,oE,rt,{class:0,transition:1,transitionConfig:2})}}function lE(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function cE(i){let e,n;const t=[{class:Ut("text-sm text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[lE]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new _S({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("text-sm text-muted-foreground",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function uE(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}class mu extends st{constructor(e){super(),it(this,e,uE,cE,rt,{class:0})}}const La=uC,vy=cS;function Cg(i,e,n){const t=i.slice();return t[22]=e[n],t[24]=n,t}function Sg(i){let e,n,t,r=i[22].nickname+"",s,a,o,c,d=i[22].text+"",_,b,x,P,L=i[22].rating+"",D,B,Z,W,Q="Report",ve,re,ce;function ge(){return i[12](i[22])}return{c(){e=oe("div"),n=oe("div"),t=oe("div"),s=je(r),a=me(),o=oe("div"),c=oe("div"),_=je(d),b=me(),x=oe("div"),P=oe("div"),D=je(L),B=me(),Z=oe("div"),W=oe("button"),W.textContent=Q,ve=me(),this.h()},l(le){e=ae(le,"DIV",{class:!0});var G=we(e);n=ae(G,"DIV",{class:!0});var ee=we(n);t=ae(ee,"DIV",{class:!0});var fe=we(t);s=qe(fe,r),fe.forEach(S),ee.forEach(S),a=_e(G),o=ae(G,"DIV",{class:!0});var $e=we(o);c=ae($e,"DIV",{class:!0});var he=we(c);_=qe(he,d),he.forEach(S),$e.forEach(S),b=_e(G),x=ae(G,"DIV",{class:!0});var ke=we(x);P=ae(ke,"DIV",{class:!0});var Ue=we(P);D=qe(Ue,L),Ue.forEach(S),ke.forEach(S),B=_e(G),Z=ae(G,"DIV",{class:!0});var Ie=we(Z);W=ae(Ie,"BUTTON",{class:!0,"data-svelte-h":!0}),on(W)!=="svelte-16v2fwz"&&(W.textContent=Q),Ie.forEach(S),ve=_e(G),G.forEach(S),this.h()},h(){ne(t,"class","user-name text-white"),ne(n,"class","comment-info w-1/4"),ne(c,"class","comment-text text-white break-words"),ne(o,"class","comment-info w-1/4"),ne(P,"class","comment-rating text-white"),ne(x,"class","comment-info w-1/6"),ne(W,"class","report-button py-2 px-4 bg-red-600 text-white rounded-lg"),ne(Z,"class","comment-info w-1/6"),ne(e,"class","comment-wrapper flex items-center justify-between px-4 mb-4 w-full")},m(le,G){R(le,e,G),ue(e,n),ue(n,t),ue(t,s),ue(e,a),ue(e,o),ue(o,c),ue(c,_),ue(e,b),ue(e,x),ue(x,P),ue(P,D),ue(e,B),ue(e,Z),ue(Z,W),ue(e,ve),re||(ce=$t(W,"click",ge),re=!0)},p(le,G){i=le,G&8&&r!==(r=i[22].nickname+"")&&Ft(s,r),G&8&&d!==(d=i[22].text+"")&&Ft(_,d),G&8&&L!==(L=i[22].rating+"")&&Ft(D,L)},d(le){le&&S(e),re=!1,ce()}}}function fE(i){let e;return{c(){e=je("Upload Picture")},l(n){e=qe(n,"Upload Picture")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function hE(i){let e,n,t,r,s,a,o,c,d,_,b="Comments",x,P,L,D='<div class="w-1/4">User</div> <div class="w-1/2">Review</div> <div class="w-1/6">Rating</div> <div class="w-1/6">Report</div>',B,Z,W,Q,ve,re,ce="Rating:",ge,le,G,ee,fe="Add Comment",$e,he,ke,Ue,Ie="Upload a picture of this location!",nt,Xe,ct,mt,Dt,zt,Yt,mn=Jt(i[3]),cn=[];for(let It=0;It<mn.length;It+=1)cn[It]=Sg(Cg(i,mn,It));return mt=new Nn({props:{variant:"secondary",class:"mt-4",$$slots:{default:[fE]},$$scope:{ctx:i}}}),mt.$on("click",i[7]),{c(){e=oe("div"),n=oe("h2"),t=je(i[5]),r=me(),s=oe("p"),a=je("ID: "),o=je(i[4]),c=me(),d=oe("div"),_=oe("h3"),_.textContent=b,x=me(),P=oe("div"),L=oe("div"),L.innerHTML=D,B=me();for(let It=0;It<cn.length;It+=1)cn[It].c();Z=me(),W=oe("textarea"),Q=me(),ve=oe("div"),re=oe("label"),re.textContent=ce,ge=me(),le=oe("input"),G=me(),ee=oe("button"),ee.textContent=fe,$e=me(),he=oe("div"),ke=oe("div"),Ue=oe("label"),Ue.textContent=Ie,nt=me(),Xe=oe("input"),ct=me(),N(mt.$$.fragment),this.h()},l(It){e=ae(It,"DIV",{class:!0});var At=we(e);n=ae(At,"H2",{class:!0});var un=we(n);t=qe(un,i[5]),un.forEach(S),r=_e(At),s=ae(At,"P",{class:!0});var fn=we(s);a=qe(fn,"ID: "),o=qe(fn,i[4]),fn.forEach(S),c=_e(At),d=ae(At,"DIV",{class:!0,style:!0});var ot=we(d);_=ae(ot,"H3",{class:!0,"data-svelte-h":!0}),on(_)!=="svelte-xqj6bi"&&(_.textContent=b),x=_e(ot),P=ae(ot,"DIV",{class:!0});var qt=we(P);L=ae(qt,"DIV",{class:!0,"data-svelte-h":!0}),on(L)!=="svelte-11ckxhf"&&(L.innerHTML=D),B=_e(qt);for(let yn=0;yn<cn.length;yn+=1)cn[yn].l(qt);qt.forEach(S),ot.forEach(S),Z=_e(At),W=ae(At,"TEXTAREA",{class:!0,placeholder:!0}),we(W).forEach(S),Q=_e(At),ve=ae(At,"DIV",{class:!0});var wt=we(ve);re=ae(wt,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),on(re)!=="svelte-biuhfw"&&(re.textContent=ce),ge=_e(wt),le=ae(wt,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),wt.forEach(S),G=_e(At),ee=ae(At,"BUTTON",{class:!0,"data-svelte-h":!0}),on(ee)!=="svelte-lawec5"&&(ee.textContent=fe),At.forEach(S),$e=_e(It),he=ae(It,"DIV",{class:!0});var xt=we(he);ke=ae(xt,"DIV",{class:!0});var tt=we(ke);Ue=ae(tt,"LABEL",{for:!0,"data-svelte-h":!0}),on(Ue)!=="svelte-14dirxk"&&(Ue.textContent=Ie),nt=_e(tt),Xe=ae(tt,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),tt.forEach(S),ct=_e(xt),j(mt.$$.fragment,xt),xt.forEach(S),this.h()},h(){ne(n,"class","text-2xl font-bold text-white"),ne(s,"class","text-white"),ne(_,"class","text-lg font-bold text-white mb-4"),ne(L,"class","comment-header flex items-center bg-gray-700 text-white py-2 px-4 mb-4"),ne(P,"class","comments-scroll"),ne(d,"class","comment-container mt-8 overflow-y-auto max-h-48"),Yc(d,"width","80%"),ne(W,"class","comment-input mt-4 w-full rounded-lg px-4 py-2"),ne(W,"placeholder","Type your comment here..."),ne(re,"for","rating"),ne(re,"class","text-white"),ne(le,"id","rating"),ne(le,"type","number"),ne(le,"min","1"),ne(le,"max","5"),ne(le,"class","w-full rounded-lg px-4 py-2 bg-gray-700 text-white"),ne(ve,"class","rating-container mt-4"),ne(ee,"class","bg-blue-500 text-white rounded-lg px-4 py-2 mt-4"),ne(e,"class","flex flex-col items-center w-full max-w-full mx-auto bg-gray-800 rounded-lg p-8"),ne(Ue,"for","poi-picture"),ne(Xe,"id","poi-picture"),ne(Xe,"type","file"),ne(Xe,"accept","image/png, image/jpg, image/jpeg"),ne(Xe,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),ne(ke,"class","mb-4"),ne(he,"class","mb-4 text-white rounded shadow-md mt-6 w-full md:w-3/4 lg:w-1/2")},m(It,At){R(It,e,At),ue(e,n),ue(n,t),ue(e,r),ue(e,s),ue(s,a),ue(s,o),ue(e,c),ue(e,d),ue(d,_),ue(d,x),ue(d,P),ue(P,L),ue(P,B);for(let un=0;un<cn.length;un+=1)cn[un]&&cn[un].m(P,null);ue(e,Z),ue(e,W),Bi(W,i[1]),ue(e,Q),ue(e,ve),ue(ve,re),ue(ve,ge),ue(ve,le),Bi(le,i[2]),ue(e,G),ue(e,ee),R(It,$e,At),R(It,he,At),ue(he,ke),ue(ke,Ue),ue(ke,nt),ue(ke,Xe),ue(he,ct),V(mt,he,null),Dt=!0,zt||(Yt=[$t(W,"input",i[13]),$t(le,"input",i[14]),$t(ee,"click",i[6]),$t(Xe,"change",i[8])],zt=!0)},p(It,At){if(At&520){mn=Jt(It[3]);let fn;for(fn=0;fn<mn.length;fn+=1){const ot=Cg(It,mn,fn);cn[fn]?cn[fn].p(ot,At):(cn[fn]=Sg(ot),cn[fn].c(),cn[fn].m(P,null))}for(;fn<cn.length;fn+=1)cn[fn].d(1);cn.length=mn.length}At&2&&Bi(W,It[1]),At&4&&gv(le.value)!==It[2]&&Bi(le,It[2]);const un={};At&33554432&&(un.$$scope={dirty:At,ctx:It}),mt.$set(un)},i(It){Dt||(T(mt.$$.fragment,It),Dt=!0)},o(It){E(mt.$$.fragment,It),Dt=!1},d(It){It&&(S(e),S($e),S(he)),as(cn,It),U(mt),zt=!1,br(Yt)}}}function dE(i){let e,n;return e=new za({props:{class:"max-h-[90%] overflow-y-auto p-4 ",style:"max-width:max(70%, 800px);",$$slots:{default:[hE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&33554446&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function pE(i){let e,n;return e=new La({props:{open:!0,onOpenChange:i[15],$$slots:{default:[dE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&1&&(s.onOpenChange=t[15]),r&33554446&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function mE(i,e,n){let{poi:t}=e;const{id:r,name:s,description:a,features:o}=t;let{onClose:c}=e,{refreshPOIs:d}=e,_="",b=1,x,P=[];const L=async G=>{try{let ee="/api/comments";G!==void 0&&(ee+=`?poiId=${G}`);const fe=await fetch(ee);if(fe.ok){const $e=await fe.json();console.log("Fetched comments:",$e),n(3,P=$e)}else console.error("Failed to fetch comments:",fe.statusText)}catch(ee){console.error("Error fetching comments:",ee)}};async function D(){if(_.trim()!=="")try{console.log("User ID:",1),console.log("POI ID:",t.id),console.log("Comment Text:",_),console.log("Rating:",b);const G=await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:1,poi_id:t.id,text:_,rating:b})});G.ok?(L(t.id),n(1,_="")):console.error("Failed to add ViewDetails comment:",G.statusText)}catch(G){console.error("Error adding comment:",G)}}async function B(){if(x){const G=new FormData;G.append("picture",x),G.append("poi_id",String(t.id));try{(await fetch("/api/poi/poi-image/upload",{method:"POST",body:G})).ok&&(Q(t.id),Ia.success("Successfully added picture for POI!"),ty.checkForUpdates(),c())}catch(ee){console.error("Error uploading file:",ee)}}}const Z=["image/png","image/jpg","image/jpeg"];function W(G){const ee=G.target;ee&&ee.files&&ee.files.length>0&&Z.includes(ee.files[0].type)?x=ee.files[0]:x=void 0}const Q=async G=>{const ee=new URLSearchParams({id:G.toString()}),fe=await fetch(`/api/poi/get-by-id?${ee.toString()}`);if(fe.ok){const $e=await fe.json(),he=Pa.decode($e);if(Yf.isRight(he)){const ke=he.right;n(10,t.pictures=ke.pictures,t),d()}else console.error("Invalid POI object received from API: ",he.left)}};async function ve(G){try{if((await fetch(`/api/comments/${G}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reported:!0})})).ok)Ia.success("Comment reported successfully.");else throw new Error("Failed to report comment.")}catch(ee){console.error("Error reporting comment:",ee),Ia.error("An error occurred while reporting the comment.")}}Qn(()=>{L(t.id)});const re=G=>ve(G.id);function ce(){_=this.value,n(1,_)}function ge(){b=gv(this.value),n(2,b)}const le=G=>G||c();return i.$$set=G=>{"poi"in G&&n(10,t=G.poi),"onClose"in G&&n(0,c=G.onClose),"refreshPOIs"in G&&n(11,d=G.refreshPOIs)},[c,_,b,P,r,s,D,B,W,ve,t,d,re,ce,ge,le]}class _E extends st{constructor(e){super(),it(this,e,mE,pE,rt,{poi:10,onClose:0,refreshPOIs:11})}}function gE(i){let e;const n=i[5].default,t=kt(n,i,i[8],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&256)&&Ct(t,n,r,r[8],e?Tt(n,r[8],s,null):St(r[8]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function vE(i){let e,n,t;const r=[{class:Ut(Tg({variant:i[2],size:i[3],className:i[1]}))},i[4]];function s(o){i[6](o)}let a={$$slots:{default:[gE]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Se(a,r[o]);return i[0]!==void 0&&(a.pressed=i[0]),e=new DS({props:a}),Vt.push(()=>$n(e,"pressed",s)),e.$on("click",i[7]),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,c){V(e,o,c),t=!0},p(o,[c]){const d=c&30?Mt(r,[c&14&&{class:Ut(Tg({variant:o[2],size:o[3],className:o[1]}))},c&16&&dn(o[4])]):{};c&256&&(d.$$scope={dirty:c,ctx:o}),!n&&c&1&&(n=!0,d.pressed=o[0],bn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function yE(i,e,n){const t=["class","variant","size","pressed"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{variant:c="default"}=e,{size:d="default"}=e,{pressed:_=void 0}=e;function b(P){_=P,n(0,_)}function x(P){Ht.call(this,i,P)}return i.$$set=P=>{e=Se(Se({},e),Lt(P)),n(4,r=lt(e,t)),"class"in P&&n(1,o=P.class),"variant"in P&&n(2,c=P.variant),"size"in P&&n(3,d=P.size),"pressed"in P&&n(0,_=P.pressed),"$$scope"in P&&n(8,a=P.$$scope)},[_,o,c,d,r,s,b,x,a]}class cp extends st{constructor(e){super(),it(this,e,yE,vE,rt,{class:1,variant:2,size:3,pressed:0})}}const Tg=wv({base:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background hover:bg-muted hover:text-muted-foreground",variants:{variant:{default:"bg-transparent",outline:"bg-transparent border border-input hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});function bE(i){let e;const n=i[2].default,t=kt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Ct(t,n,r,r[4],e?Tt(n,r[4],s,null):St(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function $E(i){let e,n;const t=[{class:Ut("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",i[0])},i[1]];let r={$$slots:{default:[bE]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new kS({props:r}),e.$on("mousedown",i[3]),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s[0])},a&2&&dn(s[1])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function wE(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;function c(d){Ht.call(this,i,d)}return i.$$set=d=>{e=Se(Se({},e),Lt(d)),n(1,r=lt(e,t)),"class"in d&&n(0,o=d.class),"$$scope"in d&&n(4,a=d.$$scope)},[o,r,s,c,a]}class uo extends st{constructor(e){super(),it(this,e,wE,$E,rt,{class:0})}}function xE(i){let e,n;const t=i[4].default,r=kt(t,i,i[5],null);return{c(){e=oe("div"),r&&r.c(),this.h()},l(s){e=ae(s,"DIV",{class:!0});var a=we(e);r&&r.l(a),a.forEach(S),this.h()},h(){ne(e,"class","pb-4 pt-0")},m(s,a){R(s,e,a),r&&r.m(e,null),n=!0},p(s,a){r&&r.p&&(!n||a&32)&&Ct(r,t,s,s[5],n?Tt(t,s[5],a,null):St(s[5]),null)},i(s){n||(T(r,s),n=!0)},o(s){E(r,s),n=!1},d(s){s&&S(e),r&&r.d(s)}}}function kE(i){let e,n;const t=[{class:Ut("overflow-hidden text-sm transition-all",i[0])},{transition:i[1]},{transitionConfig:i[2]},i[3]];let r={$$slots:{default:[xE]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Ek({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&15?Mt(t,[a&1&&{class:Ut("overflow-hidden text-sm transition-all",s[0])},a&2&&{transition:s[1]},a&4&&{transitionConfig:s[2]},a&8&&dn(s[3])]):{};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function CE(i,e,n){const t=["class","transition","transitionConfig"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{transition:c=Vw}=e,{transitionConfig:d={duration:200}}=e;return i.$$set=_=>{e=Se(Se({},e),Lt(_)),n(3,r=lt(e,t)),"class"in _&&n(0,o=_.class),"transition"in _&&n(1,c=_.transition),"transitionConfig"in _&&n(2,d=_.transitionConfig),"$$scope"in _&&n(5,a=_.$$scope)},[o,c,d,r,s,a]}class yy extends st{constructor(e){super(),it(this,e,CE,kE,rt,{class:0,transition:1,transitionConfig:2})}}function SE(i){let e;const n=i[3].default,t=kt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&Ct(t,n,r,r[4],e?Tt(n,r[4],s,null):St(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function TE(i){let e,n;const t=[{value:i[1]},{class:Ut("border-b",i[0])},i[2]];let r={$$slots:{default:[SE]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new ek({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&7?Mt(t,[a&2&&{value:s[1]},a&1&&{class:Ut("border-b",s[0])},a&4&&dn(s[2])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function IE(i,e,n){const t=["class","value"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{value:c}=e;return i.$$set=d=>{e=Se(Se({},e),Lt(d)),n(2,r=lt(e,t)),"class"in d&&n(0,o=d.class),"value"in d&&n(1,c=d.value),"$$scope"in d&&n(4,a=d.$$scope)},[o,c,r,s,a]}class by extends st{constructor(e){super(),it(this,e,IE,TE,rt,{class:0,value:1})}}function EE(i){let e,n,t;const r=i[3].default,s=kt(r,i,i[5],null);return n=new Zw({props:{class:"h-4 w-4 transition-transform duration-200"}}),{c(){s&&s.c(),e=me(),N(n.$$.fragment)},l(a){s&&s.l(a),e=_e(a),j(n.$$.fragment,a)},m(a,o){s&&s.m(a,o),R(a,e,o),V(n,a,o),t=!0},p(a,o){s&&s.p&&(!t||o&32)&&Ct(s,r,a,a[5],t?Tt(r,a[5],o,null):St(a[5]),null)},i(a){t||(T(s,a),T(n.$$.fragment,a),t=!0)},o(a){E(s,a),E(n.$$.fragment,a),t=!1},d(a){a&&S(e),s&&s.d(a),U(n,a)}}}function PE(i){let e,n;const t=[{class:Ut("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",i[0])},i[2]];let r={$$slots:{default:[EE]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new pk({props:r}),e.$on("click",i[4]),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,a){const o=a&5?Mt(t,[a&1&&{class:Ut("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s[0])},a&4&&dn(s[2])]):{};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function AE(i){let e,n;return e=new ak({props:{level:i[1],class:"flex",$$slots:{default:[PE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&2&&(s.level=t[1]),r&37&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function ME(i,e,n){const t=["class","level"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{level:c=3}=e;function d(_){Ht.call(this,i,_)}return i.$$set=_=>{e=Se(Se({},e),Lt(_)),n(2,r=lt(e,t)),"class"in _&&n(0,o=_.class),"level"in _&&n(1,c=_.level),"$$scope"in _&&n(5,a=_.$$scope)},[o,c,r,s,d,a]}class $y extends st{constructor(e){super(),it(this,e,ME,AE,rt,{class:0,level:1})}}const wy=Zx;function Ig(i,e,n){const t=i.slice();return t[25]=e[n],t[27]=n,t}function Eg(i,e,n){const t=i.slice();return t[28]=e[n],t}function Pg(i,e,n){const t=i.slice();return t[31]=e[n],t[27]=n,t}function DE(i){let e,n=i[0].isFavourite?"Remove From Favourites":"Add To Favourites",t,r,s;return r=new Cl({props:{class:"max-sm:w-4 max-sm:h-4"}}),{c(){e=oe("div"),t=je(n),N(r.$$.fragment),this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=we(e);t=qe(o,n),j(r.$$.fragment,o),o.forEach(S),this.h()},h(){ne(e,"class","flex gap-2 items-center max-sm:text-xs")},m(a,o){R(a,e,o),ue(e,t),V(r,e,null),s=!0},p(a,o){(!s||o[0]&1)&&n!==(n=a[0].isFavourite?"Remove From Favourites":"Add To Favourites")&&Ft(t,n)},i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&S(e),U(r)}}}function zE(i){let e,n;return e=new cp({props:{class:"max-sm:p-2 max-sm:h-auto text-secondary-foreground hover:text-accent-foreground data-[state=off]:hover:bg-accent data-[state=off]:bg-background data-[state=on]:bg-primary data-[state=on]:hover:brightness-90 data-[state=on]:text-error-content",pressed:i[0].isFavourite,onPressedChange:i[9],$$slots:{default:[DE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1&&(s.pressed=t[0].isFavourite),r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function LE(i){let e,n="Add/Remove Favourite";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-17t27y0"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function RE(i){let e,n,t,r;return e=new jo({props:{$$slots:{default:[zE]},$$scope:{ctx:i}}}),t=new qo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[LE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[0]&1|a[1]&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a[1]&4&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function OE(i){let e,n,t=i[0].name+"",r,s,a,o,c;function d(b){i[11](b)}let _={openDelay:0,closeDelay:0,onOutsideClick:i[10],$$slots:{default:[RE]},$$scope:{ctx:i}};return i[7][0]!==void 0&&(_.open=i[7][0]),a=new No({props:_}),Vt.push(()=>$n(a,"open",d)),{c(){e=oe("div"),n=oe("p"),r=je(t),s=me(),N(a.$$.fragment),this.h()},l(b){e=ae(b,"DIV",{class:!0});var x=we(e);n=ae(x,"P",{class:!0});var P=we(n);r=qe(P,t),P.forEach(S),s=_e(x),j(a.$$.fragment,x),x.forEach(S),this.h()},h(){ne(n,"class","max-sm:text-sm"),ne(e,"class","flex justify-between items-center gap-2")},m(b,x){R(b,e,x),ue(e,n),ue(n,r),ue(e,s),V(a,e,null),c=!0},p(b,x){(!c||x[0]&1)&&t!==(t=b[0].name+"")&&Ft(r,t);const P={};x[0]&1|x[1]&4&&(P.$$scope={dirty:x,ctx:b}),!o&&x[0]&128&&(o=!0,P.open=b[7][0],bn(()=>o=!1)),a.$set(P)},i(b){c||(T(a.$$.fragment,b),c=!0)},o(b){E(a.$$.fragment,b),c=!1},d(b){b&&S(e),U(a)}}}function FE(i){let e,n;return e=new ms({props:{$$slots:{default:[OE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&129|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function BE(i){let e,n;return e=new wy({props:{$$slots:{default:[eP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&97|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function NE(i){let e,n;return e=new tr({props:{class:"mb-2",$$slots:{default:[nP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function VE(i){let e;return{c(){e=je("All Pictures")},l(n){e=qe(n,"All Pictures")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function UE(i){let e,n,t="Pictures:",r,s,a;return s=new Nn({props:{size:"sm",$$slots:{default:[VE]},$$scope:{ctx:i}}}),s.$on("click",i[12]),{c(){e=oe("div"),n=oe("p"),n.textContent=t,r=me(),N(s.$$.fragment),this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);n=ae(c,"P",{"data-svelte-h":!0}),on(n)!=="svelte-gkyk2r"&&(n.textContent=t),r=_e(c),j(s.$$.fragment,c),c.forEach(S),this.h()},h(){ne(e,"class","flex justify-between items-center grow mr-4")},m(o,c){R(o,e,c),ue(e,n),ue(e,r),V(s,e,null),a=!0},p(o,c){const d={};c[1]&4&&(d.$$scope={dirty:c,ctx:o}),s.$set(d)},i(o){a||(T(s.$$.fragment,o),a=!0)},o(o){E(s.$$.fragment,o),a=!1},d(o){o&&S(e),U(s)}}}function jE(i){let e,n,t;return{c(){e=oe("img"),this.h()},l(r){e=ae(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ur(e.src,n=i[0].pictures[i[27]*3])||ne(e,"src",n),ne(e,"alt",t="Picture "+(i[27]*3+1)),ne(e,"class","object-contain rounded-xl h-full")},m(r,s){R(r,e,s)},p(r,s){s[0]&1&&!ur(e.src,n=r[0].pictures[r[27]*3])&&ne(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+1))&&ne(e,"alt",t)},d(r){r&&S(e)}}}function qE(i){let e,n;return e=new Er({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[jE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Ag(i){let e,n,t,r,s;n=new tr({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[GE]},$$scope:{ctx:i}}});function a(){return i[14](i[27])}return{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);j(n.$$.fragment,c),c.forEach(S),this.h()},h(){ne(e,"class","basis-1/3 relative h-full")},m(o,c){R(o,e,c),V(n,e,null),t=!0,r||(s=$t(e,"click",a),r=!0)},p(o,c){i=o;const d={};c[0]&1|c[1]&4&&(d.$$scope={dirty:c,ctx:i}),n.$set(d)},i(o){t||(T(n.$$.fragment,o),t=!0)},o(o){E(n.$$.fragment,o),t=!1},d(o){o&&S(e),U(n),r=!1,s()}}}function HE(i){let e,n,t;return{c(){e=oe("img"),this.h()},l(r){e=ae(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ur(e.src,n=i[0].pictures[i[27]*3+1])||ne(e,"src",n),ne(e,"alt",t="Picture "+(i[27]*3+2)),ne(e,"class","object-contain rounded-xl h-full")},m(r,s){R(r,e,s)},p(r,s){s[0]&1&&!ur(e.src,n=r[0].pictures[r[27]*3+1])&&ne(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+2))&&ne(e,"alt",t)},d(r){r&&S(e)}}}function GE(i){let e,n;return e=new Er({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[HE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Mg(i){let e,n,t,r,s;n=new tr({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[WE]},$$scope:{ctx:i}}});function a(){return i[15](i[27])}return{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);j(n.$$.fragment,c),c.forEach(S),this.h()},h(){ne(e,"class","basis-1/3 relative h-full")},m(o,c){R(o,e,c),V(n,e,null),t=!0,r||(s=$t(e,"click",a),r=!0)},p(o,c){i=o;const d={};c[0]&1|c[1]&4&&(d.$$scope={dirty:c,ctx:i}),n.$set(d)},i(o){t||(T(n.$$.fragment,o),t=!0)},o(o){E(n.$$.fragment,o),t=!1},d(o){o&&S(e),U(n),r=!1,s()}}}function ZE(i){let e,n,t;return{c(){e=oe("img"),this.h()},l(r){e=ae(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ur(e.src,n=i[0].pictures[i[27]*3+2])||ne(e,"src",n),ne(e,"alt",t="Picture "+(i[27]*3+3)),ne(e,"class","object-contain rounded-xl h-full")},m(r,s){R(r,e,s)},p(r,s){s[0]&1&&!ur(e.src,n=r[0].pictures[r[27]*3+2])&&ne(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+3))&&ne(e,"alt",t)},d(r){r&&S(e)}}}function WE(i){let e,n;return e=new Er({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[ZE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function KE(i){let e,n,t,r,s,a,o,c,d;t=new tr({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[qE]},$$scope:{ctx:i}}});function _(){return i[13](i[27])}let b=i[0].pictures[i[27]*3+1]!==void 0&&Ag(i),x=i[0].pictures[i[27]*3+2]!==void 0&&Mg(i);return{c(){e=oe("div"),n=oe("div"),N(t.$$.fragment),r=me(),b&&b.c(),s=me(),x&&x.c(),a=me(),this.h()},l(P){e=ae(P,"DIV",{class:!0});var L=we(e);n=ae(L,"DIV",{class:!0});var D=we(n);j(t.$$.fragment,D),D.forEach(S),r=_e(L),b&&b.l(L),s=_e(L),x&&x.l(L),L.forEach(S),a=_e(P),this.h()},h(){ne(n,"class","basis-1/3 relative h-full"),ne(e,"class","flex relative gap-4 h-24")},m(P,L){R(P,e,L),ue(e,n),V(t,n,null),ue(e,r),b&&b.m(e,null),ue(e,s),x&&x.m(e,null),R(P,a,L),o=!0,c||(d=$t(n,"click",_),c=!0)},p(P,L){i=P;const D={};L[0]&1|L[1]&4&&(D.$$scope={dirty:L,ctx:i}),t.$set(D),i[0].pictures[i[27]*3+1]!==void 0?b?(b.p(i,L),L[0]&1&&T(b,1)):(b=Ag(i),b.c(),T(b,1),b.m(e,s)):b&&(dt(),E(b,1,1,()=>{b=null}),pt()),i[0].pictures[i[27]*3+2]!==void 0?x?(x.p(i,L),L[0]&1&&T(x,1)):(x=Mg(i),x.c(),T(x,1),x.m(e,null)):x&&(dt(),E(x,1,1,()=>{x=null}),pt())},i(P){o||(T(t.$$.fragment,P),T(b),T(x),o=!0)},o(P){E(t.$$.fragment,P),E(b),E(x),o=!1},d(P){P&&(S(e),S(a)),U(t),b&&b.d(),x&&x.d(),c=!1,d()}}}function Dg(i,e){let n,t,r;return t=new V3({props:{$$slots:{default:[KE]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&65|a[1]&4&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function XE(i){let e=[],n=new Map,t,r,s=Jt(Array(Math.ceil(i[0].pictures.length/3)));const a=o=>o[27];for(let o=0;o<s.length;o+=1){let c=Pg(i,s,o),d=a(c);n.set(d,e[o]=Dg(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c[0]&65&&(s=Jt(Array(Math.ceil(o[0].pictures.length/3))),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,Dg,t,Pg),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function JE(i){let e,n;return e=new F3({props:{$$slots:{default:[XE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function YE(i){let e,n;return e=new n3({props:{class:"w-full",$$slots:{default:[JE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function QE(i){let e,n,t,r;return e=new $y({props:{class:"hover:no-underline transition-colors hover:bg-secondary/70 rounded-md px-3 py-2",$$slots:{default:[UE]},$$scope:{ctx:i}}}),t=new yy({props:{class:"p-0 *:p-0 mt-2",$$slots:{default:[YE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[0]&32|a[1]&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a[0]&65|a[1]&4&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function eP(i){let e,n;return e=new by({props:{value:"poi-pictures",class:"border-b-0",$$slots:{default:[QE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&97|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function tP(i){let e,n="No Pictures available for this Point of Interest";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1ofvg4f"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function nP(i){let e,n;return e=new Er({props:{class:"p-2",$$slots:{default:[tP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function rP(i){let e;return{c(){e=je("Description:")},l(n){e=qe(n,"Description:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function sP(i){let e,n=(i[0].description||"No description")+"",t;return{c(){e=oe("p"),t=je(n),this.h()},l(r){e=ae(r,"P",{id:!0,class:!0});var s=we(e);t=qe(s,n),s.forEach(S),this.h()},h(){ne(e,"id","description"),ne(e,"class","text-muted-foreground")},m(r,s){R(r,e,s),ue(e,t)},p(r,s){s[0]&1&&n!==(n=(r[0].description||"No description")+"")&&Ft(t,n)},d(r){r&&S(e)}}}function iP(i){let e,n;return e=new Er({props:{class:"px-3 py-2 max-h-16 overflow-y-auto",$$slots:{default:[sP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function oP(i){let e;return{c(){e=je("Features:")},l(n){e=qe(n,"Features:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function aP(i){let e,n=Jt(i[0].features),t=[];for(let r=0;r<n.length;r+=1)t[r]=zg(Eg(i,n,r));return{c(){e=oe("ul");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=ae(r,"UL",{id:!0,class:!0});var s=we(e);for(let a=0;a<t.length;a+=1)t[a].l(s);s.forEach(S),this.h()},h(){ne(e,"id","features"),ne(e,"class","list-disc ml-2")},m(r,s){R(r,e,s);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,s){if(s[0]&1){n=Jt(r[0].features);let a;for(a=0;a<n.length;a+=1){const o=Eg(r,n,a);t[a]?t[a].p(o,s):(t[a]=zg(o),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&S(e),as(t,r)}}}function lP(i){let e,n="No features";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{id:!0,class:!0,"data-svelte-h":!0}),on(e)!=="svelte-12d3m3b"&&(e.textContent=n),this.h()},h(){ne(e,"id","features"),ne(e,"class","text-muted-foreground")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function zg(i){let e,n=i[28]+"",t;return{c(){e=oe("li"),t=je(n),this.h()},l(r){e=ae(r,"LI",{class:!0});var s=we(e);t=qe(s,n),s.forEach(S),this.h()},h(){ne(e,"class","text-muted-foreground")},m(r,s){R(r,e,s),ue(e,t)},p(r,s){s[0]&1&&n!==(n=r[28]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function cP(i){let e;function n(s,a){return s[0].features.length===0?lP:aP}let t=n(i),r=t(i);return{c(){r.c(),e=Be()},l(s){r.l(s),e=Be()},m(s,a){r.m(s,a),R(s,e,a)},p(s,a){t===(t=n(s))&&r?r.p(s,a):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&S(e),r.d(s)}}}function uP(i){let e,n;return e=new Er({props:{class:"px-3 py-2 max-h-16 overflow-y-auto",$$slots:{default:[cP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function fP(i){let e,n,t,r,s,a,o,c,d,_,b;const x=[NE,BE],P=[];function L(D,B){return D[0].pictures.length===0?0:1}return e=L(i),n=P[e]=x[e](i),r=new uo({props:{for:"description",$$slots:{default:[rP]},$$scope:{ctx:i}}}),a=new tr({props:{class:"p-0",$$slots:{default:[iP]},$$scope:{ctx:i}}}),c=new uo({props:{for:"features",$$slots:{default:[oP]},$$scope:{ctx:i}}}),_=new tr({props:{class:"p-0",$$slots:{default:[uP]},$$scope:{ctx:i}}}),{c(){n.c(),t=me(),N(r.$$.fragment),s=me(),N(a.$$.fragment),o=me(),N(c.$$.fragment),d=me(),N(_.$$.fragment)},l(D){n.l(D),t=_e(D),j(r.$$.fragment,D),s=_e(D),j(a.$$.fragment,D),o=_e(D),j(c.$$.fragment,D),d=_e(D),j(_.$$.fragment,D)},m(D,B){P[e].m(D,B),R(D,t,B),V(r,D,B),R(D,s,B),V(a,D,B),R(D,o,B),V(c,D,B),R(D,d,B),V(_,D,B),b=!0},p(D,B){let Z=e;e=L(D),e===Z?P[e].p(D,B):(dt(),E(P[Z],1,1,()=>{P[Z]=null}),pt(),n=P[e],n?n.p(D,B):(n=P[e]=x[e](D),n.c()),T(n,1),n.m(t.parentNode,t));const W={};B[1]&4&&(W.$$scope={dirty:B,ctx:D}),r.$set(W);const Q={};B[0]&1|B[1]&4&&(Q.$$scope={dirty:B,ctx:D}),a.$set(Q);const ve={};B[1]&4&&(ve.$$scope={dirty:B,ctx:D}),c.$set(ve);const re={};B[0]&1|B[1]&4&&(re.$$scope={dirty:B,ctx:D}),_.$set(re)},i(D){b||(T(n),T(r.$$.fragment,D),T(a.$$.fragment,D),T(c.$$.fragment,D),T(_.$$.fragment,D),b=!0)},o(D){E(n),E(r.$$.fragment,D),E(a.$$.fragment,D),E(c.$$.fragment,D),E(_.$$.fragment,D),b=!1},d(D){D&&(S(t),S(s),S(o),S(d)),P[e].d(D),U(r,D),U(a,D),U(c,D),U(_,D)}}}function hP(i){let e;return{c(){e=je("Navigate")},l(n){e=qe(n,"Navigate")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function dP(i){let e;return{c(){e=je("View Details")},l(n){e=qe(n,"View Details")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function pP(i){let e;return{c(){e=je("Close")},l(n){e=qe(n,"Close")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function mP(i){let e,n,t,r,s,a;return e=new Nn({props:{size:"sm",class:"basis-1/3",href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(i[0].lngLat.lat)},${encodeURIComponent(i[0].lngLat.lng)}`,target:"_blank",$$slots:{default:[hP]},$$scope:{ctx:i}}}),t=new Nn({props:{variant:"secondary",size:"sm",class:"basis-1/3",$$slots:{default:[dP]},$$scope:{ctx:i}}}),t.$on("click",i[16]),s=new Nn({props:{variant:"secondary",size:"sm",class:"basis-1/3",$$slots:{default:[pP]},$$scope:{ctx:i}}}),s.$on("click",function(){Hd(i[2])&&i[2].apply(this,arguments)}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o),r=_e(o),j(s.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),R(o,r,c),V(s,o,c),a=!0},p(o,c){i=o;const d={};c[0]&1&&(d.href=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(i[0].lngLat.lat)},${encodeURIComponent(i[0].lngLat.lng)}`),c[1]&4&&(d.$$scope={dirty:c,ctx:i}),e.$set(d);const _={};c[1]&4&&(_.$$scope={dirty:c,ctx:i}),t.$set(_);const b={};c[1]&4&&(b.$$scope={dirty:c,ctx:i}),s.$set(b)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function _P(i){let e,n,t,r,s,a;return e=new Br({props:{class:"p-3",$$slots:{default:[FE]},$$scope:{ctx:i}}}),t=new Er({props:{class:"grow p-3 pt-0 flex flex-col overflow-y-auto gap-2",$$slots:{default:[fP]},$$scope:{ctx:i}}}),s=new qS({props:{class:"flex justify-between p-3 grow-0 gap-2",$$slots:{default:[mP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o),r=_e(o),j(s.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),R(o,r,c),V(s,o,c),a=!0},p(o,c){const d={};c[0]&129|c[1]&4&&(d.$$scope={dirty:c,ctx:o}),e.$set(d);const _={};c[0]&97|c[1]&4&&(_.$$scope={dirty:c,ctx:o}),t.$set(_);const b={};c[0]&21|c[1]&4&&(b.$$scope={dirty:c,ctx:o}),s.$set(b)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function Lg(i){let e,n,t;function r(a){i[18](a)}let s={refreshPOIs:i[3],onClose:i[17],userNickname:i[1]};return i[0]!==void 0&&(s.poi=i[0]),e=new _E({props:s}),Vt.push(()=>$n(e,"poi",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const c={};o[0]&8&&(c.refreshPOIs=a[3]),o[0]&16&&(c.onClose=a[17]),o[0]&2&&(c.userNickname=a[1]),!n&&o[0]&1&&(n=!0,c.poi=a[0],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function Rg(i){let e,n;return e=new La({props:{open:!0,onOpenChange:i[20],$$slots:{default:[CP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&32&&(s.onOpenChange=t[20]),r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function gP(i){let e;return{c(){e=je("All Pictures")},l(n){e=qe(n,"All Pictures")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function vP(i){let e,n,t;return{c(){e=oe("img"),this.h()},l(r){e=ae(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ur(e.src,n=i[25])||ne(e,"src",n),ne(e,"alt",t="Picture "+(i[27]*3+1)),ne(e,"class","object-contain rounded-xl h-full")},m(r,s){R(r,e,s)},p(r,s){s[0]&1&&!ur(e.src,n=r[25])&&ne(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+1))&&ne(e,"alt",t)},d(r){r&&S(e)}}}function yP(i){let e,n;return e=new Er({props:{class:"p-2 flex justify-center items-center relative h-24",$$slots:{default:[vP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bP(i){let e,n;return e=new ji({props:{$$slots:{default:[yP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function $P(i){let e,n,t,r,s,a;n=new Br({props:{class:"p-2 transition-colors hover:bg-secondary/70 rounded-lg cursor-pointer",$$slots:{default:[bP]},$$scope:{ctx:i}}});function o(){return i[19](i[27])}return{c(){e=oe("div"),N(n.$$.fragment),t=me()},l(c){e=ae(c,"DIV",{});var d=we(e);j(n.$$.fragment,d),d.forEach(S),t=_e(c)},m(c,d){R(c,e,d),V(n,e,null),R(c,t,d),r=!0,s||(a=$t(e,"click",o),s=!0)},p(c,d){i=c;const _={};d[0]&1|d[1]&4&&(_.$$scope={dirty:d,ctx:i}),n.$set(_)},i(c){r||(T(n.$$.fragment,c),r=!0)},o(c){E(n.$$.fragment,c),r=!1},d(c){c&&(S(e),S(t)),U(n),s=!1,a()}}}function Og(i,e){let n,t,r;return t=new tr({props:{$$slots:{default:[$P]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&65|a[1]&4&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function wP(i){let e,n=[],t=new Map,r,s=Jt(i[0].pictures);const a=o=>o[25];for(let o=0;o<s.length;o+=1){let c=Ig(i,s,o),d=a(c);t.set(d,n[o]=Og(d,c))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);for(let d=0;d<n.length;d+=1)n[d].l(c);c.forEach(S),this.h()},h(){ne(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(o,c){R(o,e,c);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,c){c[0]&65&&(s=Jt(o[0].pictures),dt(),n=Ir(n,c,a,1,o,s,t,e,Fr,Og,null,Ig),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(n[c]);r=!0}},o(o){for(let c=0;c<n.length;c+=1)E(n[c]);r=!1},d(o){o&&S(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function xP(i){let e,n,t,r;return e=new lp({props:{class:"mb-4",$$slots:{default:[gP]},$$scope:{ctx:i}}}),t=new mu({props:{$$slots:{default:[wP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[1]&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a[0]&65|a[1]&4&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function kP(i){let e,n;return e=new pu({props:{$$slots:{default:[xP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function CP(i){let e,n;return e=new za({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[kP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Fg(i){let e,n;return e=new La({props:{open:!0,onOpenChange:i[21],$$slots:{default:[DP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&64&&(s.onOpenChange=t[21]),r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function SP(i){let e,n;return{c(){e=oe("img"),this.h()},l(t){e=ae(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ur(e.src,n=i[0].pictures[i[6]])||ne(e,"src",n),ne(e,"alt","Fullscreen POI picture"),ne(e,"class","object-contain rounded-xl h-full")},m(t,r){R(t,e,r)},p(t,r){r[0]&65&&!ur(e.src,n=t[0].pictures[t[6]])&&ne(e,"src",n)},d(t){t&&S(e)}}}function TP(i){let e,n;return e=new Er({props:{class:"p-2 flex justify-center items-center grow relative",$$slots:{default:[SP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function IP(i){let e,n;return e=new ji({props:{class:"flex grow",$$slots:{default:[TP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function EP(i){let e,n;return e=new Br({props:{class:"p-2 flex grow",$$slots:{default:[IP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function PP(i){let e,n;return e=new tr({props:{class:"flex grow",$$slots:{default:[EP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function AP(i){let e,n;return e=new mu({props:{class:"flex grow",$$slots:{default:[PP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function MP(i){let e,n;return e=new pu({props:{$$slots:{default:[AP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function DP(i){let e,n;return e=new za({props:{class:"h-[90%] max-w-[90%] overflow-y-auto p-8",$$slots:{default:[MP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function zP(i){let e,n,t,r,s,a,o,c,d;n=new tr({props:{class:"flex flex-col grow relative w-full",$$slots:{default:[_P]},$$scope:{ctx:i}}});let _=i[4]&&Lg(i),b=i[5]&&Rg(i),x=i[6]!==null&&Fg(i);return{c(){e=oe("div"),N(n.$$.fragment),s=me(),_&&_.c(),a=me(),b&&b.c(),o=me(),x&&x.c(),c=Be(),this.h()},l(P){e=ae(P,"DIV",{class:!0});var L=we(e);j(n.$$.fragment,L),L.forEach(S),s=_e(P),_&&_.l(P),a=_e(P),b&&b.l(P),o=_e(P),x&&x.l(P),c=Be(),this.h()},h(){ne(e,"class",t="z-20 absolute w-full flex pl-4"+(i[0].pictures.length===0?" h-72":" h-80"))},m(P,L){R(P,e,L),V(n,e,null),R(P,s,L),_&&_.m(P,L),R(P,a,L),b&&b.m(P,L),R(P,o,L),x&&x.m(P,L),R(P,c,L),d=!0},p(P,L){const D={};L[0]&245|L[1]&4&&(D.$$scope={dirty:L,ctx:P}),n.$set(D),(!d||L[0]&1&&t!==(t="z-20 absolute w-full flex pl-4"+(P[0].pictures.length===0?" h-72":" h-80")))&&ne(e,"class",t),P[4]?_?(_.p(P,L),L[0]&16&&T(_,1)):(_=Lg(P),_.c(),T(_,1),_.m(a.parentNode,a)):_&&(dt(),E(_,1,1,()=>{_=null}),pt()),P[5]?b?(b.p(P,L),L[0]&32&&T(b,1)):(b=Rg(P),b.c(),T(b,1),b.m(o.parentNode,o)):b&&(dt(),E(b,1,1,()=>{b=null}),pt()),P[6]!==null?x?(x.p(P,L),L[0]&64&&T(x,1)):(x=Fg(P),x.c(),T(x,1),x.m(c.parentNode,c)):x&&(dt(),E(x,1,1,()=>{x=null}),pt())},i(P){d||(T(n.$$.fragment,P),P&&Ui(()=>{d&&(r||(r=Vo(e,b_,{duration:300,x:200,y:0,opacity:0,easing:y_},!0)),r.run(1))}),T(_),T(b),T(x),d=!0)},o(P){E(n.$$.fragment,P),P&&(r||(r=Vo(e,b_,{duration:300,x:200,y:0,opacity:0,easing:y_},!1)),r.run(0)),E(_),E(b),E(x),d=!1},d(P){P&&(S(e),S(s),S(a),S(o),S(c)),U(n),P&&r&&r.end(),_&&_.d(P),b&&b.d(P),x&&x.d(P)}}}function LP(i,e,n){let{poi:t}=e,{userNickname:r}=e,{closePOICard:s}=e,{refreshPOIs:a}=e,o=!1,c=!1,d=null,_=[!1];const b=()=>{n(7,_=new Array(_.length).fill(!1))},x=async()=>{const he=await(await fetch("/api/favourites/single?poi_id="+encodeURIComponent(t.id))).json();typeof he=="boolean"&&(n(0,t.isFavourite=!t.isFavourite,t),await ci(),n(0,t.isFavourite=he,t))},P=async()=>{const $e=t.isFavourite;n(0,t.isFavourite=!t.isFavourite,t),await ci(),n(0,t.isFavourite=$e,t)};let L=!1;const D=async $e=>{P(),!L&&(L=!0,$e?await fetch("/api/favourites?poi_id="+encodeURIComponent(t.id),{method:"POST"}):await fetch("/api/favourites?poi_id="+encodeURIComponent(t.id),{method:"DELETE"}),await x(),a(),L=!1)},B=$e=>{b(),$e.target.focus()};function Z($e){i.$$.not_equal(_[0],$e)&&(_[0]=$e,n(7,_))}const W=$e=>{$e.stopPropagation(),n(5,c=!0)},Q=$e=>n(6,d=$e*3),ve=$e=>n(6,d=$e*3+1),re=$e=>n(6,d=$e*3+2),ce=()=>n(4,o=!0),ge=()=>n(4,o=!1);function le($e){t=$e,n(0,t)}const G=$e=>n(6,d=$e),ee=$e=>$e||(()=>n(5,c=!1))(),fe=$e=>$e||(()=>n(6,d=null))();return i.$$set=$e=>{"poi"in $e&&n(0,t=$e.poi),"userNickname"in $e&&n(1,r=$e.userNickname),"closePOICard"in $e&&n(2,s=$e.closePOICard),"refreshPOIs"in $e&&n(3,a=$e.refreshPOIs)},[t,r,s,a,o,c,d,_,b,D,B,Z,W,Q,ve,re,ce,ge,le,G,ee,fe]}class RP extends st{constructor(e){super(),it(this,e,LP,zP,rt,{poi:0,userNickname:1,closePOICard:2,refreshPOIs:3},null,[-1,-1])}}const OP="https://api.maptiler.com/maps/outdoor-v2/style.json?key=TXpGz6EEUuCZtdUb72gw",FP="https://api.maptiler.com/maps/streets-v2/style.json?key=TXpGz6EEUuCZtdUb72gw",BP="https://api.maptiler.com/maps/hybrid/style.json?key=TXpGz6EEUuCZtdUb72gw",NP="https://api.maptiler.com/maps/dataviz-light/style.json?key=TXpGz6EEUuCZtdUb72gw",VP="https://api.maptiler.com/maps/dataviz-dark/style.json?key=TXpGz6EEUuCZtdUb72gw",UP="6faR3O8R7ilrB_1rMKJyXHy5DYdgnd1v4hS84oSaPt4",Ea=[{value:"outdoor",label:"Outdoor",URI:OP},{value:"street",label:"Street",URI:FP},{value:"satellite",label:"Satellite",URI:BP},{value:"light",label:"Light",URI:NP},{value:"dark",label:"Dark",URI:VP}],Bg=1,jP=.9,qP=.8,HP=.17,Sd=.1,Td=.999,GP=.9999,ZP=.99,WP=/[\\/_+.#"@[({&]/,KP=/[\\/_+.#"@[({&]/g,XP=/[\s-]/,xy=/[\s-]/g;function Bd(i,e,n,t,r,s,a){if(s===e.length)return r===i.length?Bg:ZP;const o=`${r},${s}`;if(a[o]!==void 0)return a[o];const c=t.charAt(s);let d=n.indexOf(c,r),_=0,b,x,P,L;for(;d>=0;)b=Bd(i,e,n,t,d+1,s+1,a),b>_&&(d===r?b*=Bg:WP.test(i.charAt(d-1))?(b*=qP,P=i.slice(r,d-1).match(KP),P&&r>0&&(b*=Math.pow(Td,P.length))):XP.test(i.charAt(d-1))?(b*=jP,L=i.slice(r,d-1).match(xy),L&&r>0&&(b*=Math.pow(Td,L.length))):(b*=HP,r>0&&(b*=Math.pow(Td,d-r))),i.charAt(d)!==e.charAt(s)&&(b*=GP)),(b<Sd&&n.charAt(d-1)===t.charAt(s+1)||t.charAt(s+1)===t.charAt(s)&&n.charAt(d-1)!==t.charAt(s))&&(x=Bd(i,e,n,t,d+1,s+2,a),x*Sd>b&&(b=x*Sd)),b>_&&(_=b),d=n.indexOf(c,d+1);return a[o]=_,_}function Ng(i){return i.toLowerCase().replace(xy," ")}function JP(i,e){return Bd(i,e,Ng(i),Ng(e),0,0,{})}const YP=typeof document<"u";function Fo(i){return i instanceof HTMLElement}function QP(i){return i instanceof HTMLInputElement}function up(i){return i===void 0}function ki(){return Pw(10)}const Hc={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*"};function e4(i,...e){const n={};for(const t of Object.keys(i))e.includes(t)||(n[t]=i[t]);return n}function ky(i){const e={};for(const n in i){const t=i[n];t!==void 0&&(e[n]=t)}return e}function t4(i){const e={};return Object.keys(i).forEach(n=>{const t=n,r=i[t];e[t]=hr(r)}),e}function n4(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}const r4={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function jf(i,e,n,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,n,t)),()=>{r.forEach(s=>i.removeEventListener(s,n,t))}}function Cy(...i){return(...e)=>{for(const n of i)typeof n=="function"&&n(...e)}}const Sy="Command",Ty="CommandState",Iy="CommandGroup",s4="[data-cmdk-list-sizer]",Gc="[data-cmdk-group]",Vg="[data-cmdk-group-items]",i4="[data-cmdk-group-heading]",Ey="[data-cmdk-item]",Id=`${Ey}:not([aria-disabled="true"])`,Oi="data-value",Py=(i,e)=>JP(i,e);function nh(){return di(Sy)}function Tl(){return di(Ty)}function o4(i){const e=ki();return Si(Iy,{id:e,alwaysRender:up(i)?!1:i}),{id:e}}function a4(){const i=di(Iy);if(i)return i}function l4(i){const e={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};return hr(i?{...e,...ky(i)}:e)}const c4={label:"Command menu",shouldFilter:!0,loop:!1,onValueChange:void 0,value:void 0,filter:Py,ids:{root:ki(),list:ki(),label:ki(),input:ki()}};function u4(i){const e={root:ki(),list:ki(),label:ki(),input:ki(),...i.ids},n={...c4,...ky(i)},t=i.state??l4({value:n.value}),r=hr(new Set),s=hr(new Map),a=hr(new Map),o=hr(null),c=t4(e4(n,"value","ids")),{shouldFilter:d,loop:_,filter:b,label:x}=c,P={value:(ke,Ue)=>{Ue!==os(a).get(ke)&&(a.update(Ie=>(Ie.set(ke,Ue),Ie)),t.update(Ie=>(Ie.filtered.items.set(ke,W(Ue,Ie.search)),B(Ie,os(d)))))},item:(ke,Ue)=>(r.update(Ie=>Ie.add(ke)),Ue&&s.update(Ie=>{var nt;return Ie.has(Ue)?(nt=Ie.get(Ue))==null||nt.add(ke):Ie.set(Ue,new Set([ke])),Ie}),t.update(Ie=>{const nt=os(d),Xe=D(Ie,nt),ct=B(Xe,nt);if(!ct.value){const mt=Z();ct.value=mt??""}return ct}),()=>{a.update(Ie=>(Ie.delete(ke),Ie)),r.update(Ie=>(Ie.delete(ke),Ie)),t.update(Ie=>{Ie.filtered.items.delete(ke);const nt=re(),Xe=D(Ie);return(nt==null?void 0:nt.getAttribute("id"))===ke&&(Xe.value=Z()??""),Ie})}),group:ke=>(s.update(Ue=>(Ue.has(ke)||Ue.set(ke,new Set),Ue)),()=>{a.update(Ue=>(Ue.delete(ke),Ue)),s.update(Ue=>(Ue.delete(ke),Ue))}),filter:()=>os(d),label:os(x)||i["aria-label"]||"",commandEl:o,ids:e,updateState:L};function L(ke,Ue,Ie){const nt=os(d);t.update(Xe=>{var ct;return Object.is(Xe[ke],Ue)||(Xe[ke]=Ue,ke==="search"?(Xe=D(Xe,nt),Xe=B(Xe,nt),ci().then(()=>t.update(zt=>(zt.value=Z()??"",zt)))):ke==="value"&&((ct=i.onValueChange)==null||ct.call(i,Xe.value),Ie||ci().then(()=>Q()))),Xe})}function D(ke,Ue){const Ie=Ue??os(d),nt=os(r),Xe=os(a);if(!ke.search||!Ie)return ke.filtered.count=nt.size,ke;ke.filtered.groups=new Set;let ct=0;for(const mt of nt){const Dt=Xe.get(mt),zt=W(Dt,ke.search);ke.filtered.items.set(mt,zt),zt>0&&ct++}for(const[mt,Dt]of os(s))for(const zt of Dt){const Yt=ke.filtered.items.get(zt);Yt&&Yt>0&&ke.filtered.groups.add(mt)}return ke.filtered.count=ct,ke}function B(ke,Ue){const Ie=Ue??os(d);if(!ke.search||!Ie)return ke;const nt=ke.filtered.items,Xe=[],ct=os(s);ke.filtered.groups.forEach(zt=>{const Yt=ct.get(zt);if(!Yt)return;let mn=0;Yt.forEach(cn=>{const It=nt.get(cn);up(It)||(mn=Math.max(It,mn))}),Xe.push([zt,mn])});const mt=document.getElementById(e.root);if(!mt)return ke;const Dt=mt.querySelector(s4);return ve(mt).sort((zt,Yt)=>{const mn=zt.getAttribute(Oi)??"",cn=Yt.getAttribute(Oi)??"";return(nt.get(mn)??0)-(nt.get(cn)??0)}).forEach(zt=>{const Yt=zt.closest(Vg),mn=zt.closest(`${Vg} > *`);if(Fo(Yt))if(zt.parentElement===Yt)Yt.appendChild(zt);else{if(!Fo(mn))return;Yt.appendChild(mn)}else{if(!Fo(Dt))return;if(zt.parentElement===Dt)Dt.appendChild(zt);else{if(!Fo(mn))return;Dt.appendChild(mn)}}}),Xe.sort((zt,Yt)=>Yt[1]-zt[1]).forEach(zt=>{var mn;const Yt=mt.querySelector(`${Gc}[${Oi}="${zt[0]}"]`);Fo(Yt)&&((mn=Yt.parentElement)==null||mn.appendChild(Yt))}),ke}function Z(){const ke=ve().find(Ie=>!Ie.ariaDisabled);if(!ke)return;const Ue=ke.getAttribute(Oi);if(Ue)return Ue}function W(ke,Ue){const Ie=ke==null?void 0:ke.toLowerCase().trim(),nt=os(b);return nt?Ie?nt(Ie,Ue):0:Ie?Py(Ie,Ue):0}function Q(){var Ue;const ke=re();ke&&(((Ue=ke.parentElement)==null?void 0:Ue.firstChild)===ke&&ci().then(()=>{var Ie,nt;return(nt=(Ie=ke.closest(Gc))==null?void 0:Ie.querySelector(i4))==null?void 0:nt.scrollIntoView({block:"nearest"})}),ci().then(()=>ke.scrollIntoView({block:"nearest"})))}function ve(ke){const Ue=ke??document.getElementById(e.root);return Ue?Array.from(Ue.querySelectorAll(Id)).filter(Ie=>Fo(Ie)):[]}function re(ke){const Ue=ke??document.getElementById(e.root);if(!Ue)return;const Ie=Ue.querySelector(`${Id}[aria-selected="true"]`);return Fo(Ie)?Ie:null}function ce(ke){const Ue=document.getElementById(e.root);!Ue||ve(Ue)[ke]}function ge(ke){const Ue=re(),Ie=ve(),nt=Ie.findIndex(ct=>ct===Ue);let Xe=Ie[nt+ke];os(_)&&(nt+ke<0?Xe=Ie[Ie.length-1]:nt+ke===Ie.length?Xe=Ie[0]:Xe=Ie[nt+ke]),Xe&&L("value",Xe.getAttribute(Oi)??"")}function le(ke){const Ue=re();let Ie=Ue==null?void 0:Ue.closest(Gc),nt;for(;Ie&&!nt;)Ie=ke>0?f4(Ie,Gc):h4(Ie,Gc),nt=Ie==null?void 0:Ie.querySelector(Id);nt?L("value",nt.getAttribute(Oi)??""):ge(ke)}function G(){return ce(ve().length-1)}function ee(ke){ke.preventDefault(),ke.metaKey?G():ke.altKey?le(1):ge(1)}function fe(ke){ke.preventDefault(),ke.metaKey?ce(0):ke.altKey?le(-1):ge(-1)}function $e(ke){switch(ke.key){case Hc.ARROW_DOWN:ee(ke);break;case Hc.ARROW_UP:fe(ke);break;case Hc.HOME:ke.preventDefault(),ce(0);break;case Hc.END:ke.preventDefault(),G();break;case Hc.ENTER:{ke.preventDefault();const Ue=re();Ue&&Ue.click()}}}Si(Sy,P);const he={subscribe:t.subscribe,update:t.update,set:t.set,updateState:L};return Si(Ty,he),{state:he,handleRootKeydown:$e,commandEl:o,ids:e}}function f4(i,e){let n=i.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function h4(i,e){let n=i.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}const d4=i=>i&4,p4=i=>({}),Ug=i=>({...i[2]}),m4=i=>i&4,_4=i=>({}),jg=i=>({...i[2]});function g4(i){let e,n,t=(i[0]??"")+"",r,s,a,o,c,d=[i[6]],_={};for(let D=0;D<d.length;D+=1)_=Se(_,d[D]);const b=i[18].default,x=kt(b,i,i[17],Ug);let P=[i[5],i[7]],L={};for(let D=0;D<P.length;D+=1)L=Se(L,P[D]);return{c(){e=oe("div"),n=oe("label"),r=je(t),s=me(),x&&x.c(),this.h()},l(D){e=ae(D,"DIV",{});var B=we(e);n=ae(B,"LABEL",{});var Z=we(n);r=qe(Z,t),Z.forEach(S),s=_e(B),x&&x.l(B),B.forEach(S),this.h()},h(){Bt(n,_),Bt(e,L)},m(D,B){R(D,e,B),ue(e,n),ue(n,r),ue(e,s),x&&x.m(e,null),a=!0,o||(c=Un(i[4].call(null,e)),o=!0)},p(D,B){(!a||B&1)&&t!==(t=(D[0]??"")+"")&&vv(r,t,_.contenteditable),x&&x.p&&(!a||B&131076)&&Ct(x,b,D,D[17],d4(B)||!a?St(D[17]):Tt(b,D[17],B,p4),Ug),Bt(e,L=Mt(P,[D[5],B&128&&D[7]]))},i(D){a||(T(x,D),a=!0)},o(D){E(x,D),a=!1},d(D){D&&S(e),x&&x.d(D),o=!1,c()}}}function v4(i){let e;const n=i[18].default,t=kt(n,i,i[17],jg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&131076)&&Ct(t,n,r,r[17],m4(s)||!e?St(r[17]):Tt(n,r[17],s,_4),jg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function y4(i){let e,n,t,r;const s=[v4,g4],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function b4(i,e,n){let t;const r=["label","shouldFilter","filter","value","onValueChange","loop","onKeydown","state","ids","asChild"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{label:d=void 0}=e,{shouldFilter:_=!0}=e,{filter:b=void 0}=e,{value:x=void 0}=e,{onValueChange:P=void 0}=e,{loop:L=void 0}=e,{onKeydown:D=void 0}=e,{state:B=void 0}=e,{ids:Z=void 0}=e,{asChild:W=!1}=e;const{commandEl:Q,handleRootKeydown:ve,ids:re,state:ce}=u4({label:d,shouldFilter:_,filter:b,value:x,onValueChange:he=>{he!==x&&(n(8,x=he),P==null||P(he))},loop:L,state:B,ids:Z});sn(i,ce,he=>n(16,a=he));function ge(he){he&&he!==a.value&&Or(ce,a.value=he,a)}function le(he){return Q.set(he),{destroy:Cy(jf(he,"keydown",fe))}}const G={role:"application",id:re.root,"data-cmdk-root":""},ee={"data-cmdk-label":"",for:re.input,id:re.label,style:n4(r4)};function fe(he){D==null||D(he),!he.defaultPrevented&&ve(he)}const $e={action:le,attrs:G};return i.$$set=he=>{e=Se(Se({},e),Lt(he)),n(7,s=lt(e,r)),"label"in he&&n(0,d=he.label),"shouldFilter"in he&&n(9,_=he.shouldFilter),"filter"in he&&n(10,b=he.filter),"value"in he&&n(8,x=he.value),"onValueChange"in he&&n(11,P=he.onValueChange),"loop"in he&&n(12,L=he.loop),"onKeydown"in he&&n(13,D=he.onKeydown),"state"in he&&n(14,B=he.state),"ids"in he&&n(15,Z=he.ids),"asChild"in he&&n(1,W=he.asChild),"$$scope"in he&&n(17,c=he.$$scope)},i.$$.update=()=>{i.$$.dirty&256&&ge(x),i.$$.dirty&65536&&n(2,t={root:$e,label:{attrs:ee},stateStore:ce,state:a})},[d,W,t,ce,le,G,ee,s,x,_,b,P,L,D,B,Z,a,c,o]}let Ay=class extends st{constructor(e){super(),it(this,e,b4,y4,rt,{label:0,shouldFilter:9,filter:10,value:8,onValueChange:11,loop:12,onKeydown:13,state:14,ids:15,asChild:1})}};function $4(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}$4({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function My(i,e,n,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,n,t)),()=>{r.forEach(s=>i.removeEventListener(s,n,t))}}const w4={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};Sa(void 0,i=>{function e(t){i(t),i(void 0)}return My(document,"pointerup",e,{passive:!1,capture:!0})});Sa(void 0,i=>{function e(t){t&&t.key===w4.ESCAPE&&i(t),i(void 0)}return My(document,"keydown",e,{passive:!1,capture:!0})});function Pr(i,e){const n={};return e.forEach(t=>{n[t]={[`data-bits-${i}-${t}`]:""}}),t=>n[t]}function Dy(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}Dy({position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"});Dy({position:"absolute",width:"25px",height:"25px",opacity:"0",margin:"0px",pointerEvents:"none",transform:"translateX(-100%)"});const x4="accordion",k4=["root","content","header","item","trigger"];Pr(x4,k4);const C4="alert-dialog",S4=["action","cancel","content","description","overlay","portal","title","trigger"];Pr(C4,S4);const T4="avatar",I4=["root","image","fallback"];Pr(T4,I4);const E4="checkbox",P4=["root","input","indicator"];Pr(E4,P4);const A4="collapsible",M4=["root","content","trigger"];Pr(A4,M4);const D4="context-menu",z4=["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];Pr(D4,z4);const L4="dialog",R4=["close","content","description","overlay","portal","title","trigger"];Pr(L4,R4);const O4="dropdown-menu",F4=["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];Pr(O4,F4);const B4="link-preview",N4=["arrow","content","trigger"];Pr(B4,N4);const V4="label",U4=["root"];Pr(V4,U4);const j4="menubar",q4=["root","arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];Pr(j4,q4);const H4="popover",G4=["arrow","close","content","trigger"];Pr(H4,G4);const Z4="progress",W4=["root"];Pr(Z4,W4);const K4="radio-group",X4=["root","item","input"];Pr(K4,X4);const J4="select",Y4=["arrow","content","group","item","input","label","trigger","value"];Pr(J4,Y4);const Q4="separator",eA=["root"];Pr(Q4,eA);const tA="slider",nA=["root","input","range","thumb","tick"];Pr(tA,nA);const rA="switch",sA=["root","input","thumb"];Pr(rA,sA);const iA="tabs",oA=["root","content","list","trigger"];Pr(iA,oA);const aA="toggle",lA=["root","input"];Pr(aA,lA);const cA="toggle-group",uA=["root","item"];Pr(cA,uA);const fA="tooltip",hA=["arrow","content","trigger"];Pr(fA,hA);const dA=i=>({}),qg=i=>({attrs:i[4]});function Hg(i){let e,n,t,r;const s=[mA,pA],a=[];function o(c,d){return c[0]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function pA(i){let e,n;const t=i[8].default,r=kt(t,i,i[7],null);let s=[i[4],i[5]],a={};for(let o=0;o<s.length;o+=1)a=Se(a,s[o]);return{c(){e=oe("div"),r&&r.c(),this.h()},l(o){e=ae(o,"DIV",{});var c=we(e);r&&r.l(c),c.forEach(S),this.h()},h(){Bt(e,a)},m(o,c){R(o,e,c),r&&r.m(e,null),n=!0},p(o,c){r&&r.p&&(!n||c&128)&&Ct(r,t,o,o[7],n?Tt(t,o[7],c,null):St(o[7]),null),Bt(e,a=Mt(s,[o[4],c&32&&o[5]]))},i(o){n||(T(r,o),n=!0)},o(o){E(r,o),n=!1},d(o){o&&S(e),r&&r.d(o)}}}function mA(i){let e;const n=i[8].default,t=kt(n,i,i[7],qg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,dA):St(r[7]),qg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function _A(i){let e,n,t=!i[1]&&i[2]&&Hg(i);return{c(){t&&t.c(),e=Be()},l(r){t&&t.l(r),e=Be()},m(r,s){t&&t.m(r,s),R(r,e,s),n=!0},p(r,[s]){!r[1]&&r[2]?t?(t.p(r,s),s&6&&T(t,1)):(t=Hg(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(dt(),E(t,1,1,()=>{t=null}),pt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&S(e),t&&t.d(r)}}}function gA(i,e,n){let t;const r=["asChild"];let s=lt(e,r),a,{$$slots:o={},$$scope:c}=e,{asChild:d=!1}=e,_=!0;Qn(()=>{n(1,_=!1)});const b=Tl();sn(i,b,P=>n(6,a=P));const x={"data-cmdk-empty":"",role:"presentation"};return i.$$set=P=>{e=Se(Se({},e),Lt(P)),n(5,s=lt(e,r)),"asChild"in P&&n(0,d=P.asChild),"$$scope"in P&&n(7,c=P.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a.filtered.count===0)},[d,_,t,b,x,s,a,c,o]}class zy extends st{constructor(e){super(),it(this,e,gA,_A,rt,{asChild:0})}}const vA=i=>({container:i&32,group:i&16}),Gg=i=>({container:i[5],group:i[4],heading:{attrs:i[8]}}),yA=i=>({container:i&32,group:i&16}),Zg=i=>({container:i[5],group:i[4],heading:{attrs:i[8]}});function bA(i){let e,n,t,r,s,a,o=i[0]&&Wg(i);const c=i[14].default,d=kt(c,i,i[13],Gg);let _=[i[2]],b={};for(let L=0;L<_.length;L+=1)b=Se(b,_[L]);let x=[i[3],i[9]],P={};for(let L=0;L<x.length;L+=1)P=Se(P,x[L]);return{c(){e=oe("div"),o&&o.c(),n=me(),t=oe("div"),d&&d.c(),this.h()},l(L){e=ae(L,"DIV",{});var D=we(e);o&&o.l(D),n=_e(D),t=ae(D,"DIV",{});var B=we(t);d&&d.l(B),B.forEach(S),D.forEach(S),this.h()},h(){Bt(t,b),Bt(e,P)},m(L,D){R(L,e,D),o&&o.m(e,null),ue(e,n),ue(e,t),d&&d.m(t,null),r=!0,s||(a=Un(i[7].call(null,e)),s=!0)},p(L,D){L[0]?o?o.p(L,D):(o=Wg(L),o.c(),o.m(e,n)):o&&(o.d(1),o=null),d&&d.p&&(!r||D&8240)&&Ct(d,c,L,L[13],r?Tt(c,L[13],D,vA):St(L[13]),Gg),Bt(t,b=Mt(_,[D&4&&L[2]])),Bt(e,P=Mt(x,[D&8&&L[3],D&512&&L[9]]))},i(L){r||(T(d,L),r=!0)},o(L){E(d,L),r=!1},d(L){L&&S(e),o&&o.d(),d&&d.d(L),s=!1,a()}}}function $A(i){let e;const n=i[14].default,t=kt(n,i,i[13],Zg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8240)&&Ct(t,n,r,r[13],e?Tt(n,r[13],s,yA):St(r[13]),Zg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Wg(i){let e,n,t=[i[8]],r={};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return{c(){e=oe("div"),n=je(i[0]),this.h()},l(s){e=ae(s,"DIV",{});var a=we(e);n=qe(a,i[0]),a.forEach(S),this.h()},h(){Bt(e,r)},m(s,a){R(s,e,a),ue(e,n)},p(s,a){a&1&&vv(n,s[0],r.contenteditable)},d(s){s&&S(e)}}}function wA(i){let e,n,t,r;const s=[$A,bA],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function xA(i,e,n){let t,r,s,a;const o=["heading","value","alwaysRender","asChild"];let c=lt(e,o),d,{$$slots:_={},$$scope:b}=e,{heading:x=void 0}=e,{value:P=""}=e,{alwaysRender:L=!1}=e,{asChild:D=!1}=e;const{id:B}=o4(L),Z=nh(),W=Tl(),Q=ki(),ve=Vi(W,ge=>L||Z.filter()===!1||!ge.search?!0:ge.filtered.groups.has(B));sn(i,ve,ge=>n(12,d=ge)),Qn(()=>Z.group(B));function re(ge){if(P){Z.value(B,P),ge.setAttribute(Oi,P);return}x?n(10,P=x.trim().toLowerCase()):ge.textContent&&n(10,P=ge.textContent.trim().toLowerCase()),Z.value(B,P),ge.setAttribute(Oi,P)}const ce={"data-cmdk-group-heading":"","aria-hidden":!0,id:Q};return i.$$set=ge=>{e=Se(Se({},e),Lt(ge)),n(9,c=lt(e,o)),"heading"in ge&&n(0,x=ge.heading),"value"in ge&&n(10,P=ge.value),"alwaysRender"in ge&&n(11,L=ge.alwaysRender),"asChild"in ge&&n(1,D=ge.asChild),"$$scope"in ge&&n(13,b=ge.$$scope)},i.$$.update=()=>{i.$$.dirty&5120&&n(3,t={"data-cmdk-group":"",role:"presentation",hidden:d?void 0:!0,"data-value":P}),i.$$.dirty&1&&n(2,r={"data-cmdk-group-items":"",role:"group","aria-labelledby":x?Q:void 0}),i.$$.dirty&8&&n(5,s={action:re,attrs:t}),i.$$.dirty&4&&n(4,a={attrs:r})},[x,D,r,t,a,s,ve,re,ce,c,P,L,d,b,_]}class Ly extends st{constructor(e){super(),it(this,e,xA,wA,rt,{heading:0,value:10,alwaysRender:11,asChild:1})}}function kA(i){return new Promise(e=>setTimeout(e,i))}const CA=i=>({attrs:i&8}),Kg=i=>({action:i[6],attrs:i[3]});function SA(i){let e,n,t,r=[i[3],i[7]],s={};for(let a=0;a<r.length;a+=1)s=Se(s,r[a]);return{c(){e=oe("input"),this.h()},l(a){e=ae(a,"INPUT",{}),this.h()},h(){Bt(e,s)},m(a,o){R(a,e,o),e.autofocus&&e.focus(),i[17](e),Bi(e,i[0]),n||(t=[$t(e,"input",i[18]),Un(i[6].call(null,e)),$t(e,"keydown",i[12]),$t(e,"input",i[13]),$t(e,"focus",i[14]),$t(e,"blur",i[15]),$t(e,"change",i[16])],n=!0)},p(a,o){Bt(e,s=Mt(r,[o&8&&a[3],o&128&&a[7]])),o&1&&e.value!==a[0]&&Bi(e,a[0])},i:vt,o:vt,d(a){a&&S(e),i[17](null),n=!1,br(t)}}}function TA(i){let e;const n=i[11].default,t=kt(n,i,i[10],Kg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1032)&&Ct(t,n,r,r[10],e?Tt(n,r[10],s,CA):St(r[10]),Kg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function IA(i){let e,n,t,r;const s=[TA,SA],a=[];function o(c,d){return c[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function EA(i,e,n){const t=["autofocus","value","asChild","el"];let r=lt(e,t),s,a,{$$slots:o={},$$scope:c}=e;const{ids:d,commandEl:_}=nh(),b=Tl(),x=Vi(b,he=>he.search);sn(i,x,he=>n(19,a=he));const P=Vi(b,he=>he.value);let{autofocus:L=void 0}=e,{value:D=a}=e,{asChild:B=!1}=e,{el:Z=void 0}=e;const W=Vi([P,_],([he,ke])=>{if(!YP)return;const Ue=ke==null?void 0:ke.querySelector(`${Ey}[${Oi}="${he}"]`);return Ue==null?void 0:Ue.getAttribute("id")});sn(i,W,he=>n(9,s=he));function Q(he){b.updateState("search",he)}function ve(he){return L&&kA(10).then(()=>he.focus()),{destroy:jf(he,"change",Ue=>{QP(Ue.target)&&b.updateState("search",Ue.target.value)})}}let re;function ce(he){Ht.call(this,i,he)}function ge(he){Ht.call(this,i,he)}function le(he){Ht.call(this,i,he)}function G(he){Ht.call(this,i,he)}function ee(he){Ht.call(this,i,he)}function fe(he){Vt[he?"unshift":"push"](()=>{Z=he,n(1,Z)})}function $e(){D=this.value,n(0,D)}return i.$$set=he=>{e=Se(Se({},e),Lt(he)),n(7,r=lt(e,t)),"autofocus"in he&&n(8,L=he.autofocus),"value"in he&&n(0,D=he.value),"asChild"in he&&n(2,B=he.asChild),"el"in he&&n(1,Z=he.el),"$$scope"in he&&n(10,c=he.$$scope)},i.$$.update=()=>{i.$$.dirty&1&&Q(D),i.$$.dirty&512&&n(3,re={type:"text","data-cmdk-input":"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.list,"aria-labelledby":d.label,"aria-activedescendant":s??void 0,id:d.input})},[D,Z,B,re,x,W,ve,r,L,s,c,o,ce,ge,le,G,ee,fe,$e]}class Ry extends st{constructor(e){super(),it(this,e,EA,IA,rt,{autofocus:8,value:0,asChild:2,el:1})}}const PA=i=>({attrs:i&4}),Xg=i=>({action:i[6],attrs:i[2]}),AA=i=>({attrs:i&4}),Jg=i=>({action:i[6],attrs:i[2]});function Yg(i){let e,n,t,r;const s=[DA,MA],a=[];function o(c,d){return c[0]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function MA(i){let e,n,t,r;const s=i[15].default,a=kt(s,i,i[14],Xg);let o=[i[2],i[7]],c={};for(let d=0;d<o.length;d+=1)c=Se(c,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=we(e);a&&a.l(_),_.forEach(S),this.h()},h(){Bt(e,c)},m(d,_){R(d,e,_),a&&a.m(e,null),n=!0,t||(r=Un(i[6].call(null,e)),t=!0)},p(d,_){a&&a.p&&(!n||_&16388)&&Ct(a,s,d,d[14],n?Tt(s,d[14],_,PA):St(d[14]),Xg),Bt(e,c=Mt(o,[_&4&&d[2],_&128&&d[7]]))},i(d){n||(T(a,d),n=!0)},o(d){E(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),t=!1,r()}}}function DA(i){let e;const n=i[15].default,t=kt(n,i,i[14],Jg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16388)&&Ct(t,n,r,r[14],e?Tt(n,r[14],s,AA):St(r[14]),Jg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function zA(i){let e,n,t=(i[3]||i[1])&&Yg(i);return{c(){t&&t.c(),e=Be()},l(r){t&&t.l(r),e=Be()},m(r,s){t&&t.m(r,s),R(r,e,s),n=!0},p(r,[s]){r[3]||r[1]?t?(t.p(r,s),s&10&&T(t,1)):(t=Yg(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(dt(),E(t,1,1,()=>{t=null}),pt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&S(e),t&&t.d(r)}}}function LA(i,e,n){let t;const r=["disabled","value","onSelect","alwaysRender","asChild","id"];let s=lt(e,r),a,o,{$$slots:c={},$$scope:d}=e,{disabled:_=!1}=e,{value:b=""}=e,{onSelect:x=void 0}=e,{alwaysRender:P=!1}=e,{asChild:L=!1}=e,{id:D=ki()}=e;const B=a4(),Z=nh(),W=Tl(),Q=P??(B==null?void 0:B.alwaysRender),ve=Vi(W,ee=>{if(Q||Z.filter()===!1||!ee.search)return!0;const fe=ee.filtered.items.get(D);return up(fe)?!1:fe>0});sn(i,ve,ee=>n(3,o=ee));let re=!0;Qn(()=>(n(1,re=!1),Z.item(D,B==null?void 0:B.id)));const ce=Vi(W,ee=>ee.value===b);sn(i,ce,ee=>n(13,a=ee));function ge(ee){!b&&ee.textContent&&n(8,b=ee.textContent.trim().toLowerCase()),Z.value(D,b),ee.setAttribute(Oi,b);const fe=Cy(jf(ee,"pointermove",()=>{_||G()}),jf(ee,"click",()=>{_||le()}));return{destroy(){fe()}}}function le(){G(),x==null||x(b)}function G(){W.updateState("value",b,!0)}return i.$$set=ee=>{e=Se(Se({},e),Lt(ee)),n(7,s=lt(e,r)),"disabled"in ee&&n(9,_=ee.disabled),"value"in ee&&n(8,b=ee.value),"onSelect"in ee&&n(10,x=ee.onSelect),"alwaysRender"in ee&&n(11,P=ee.alwaysRender),"asChild"in ee&&n(0,L=ee.asChild),"id"in ee&&n(12,D=ee.id),"$$scope"in ee&&n(14,d=ee.$$scope)},i.$$.update=()=>{i.$$.dirty&13056&&n(2,t={"aria-disabled":_?!0:void 0,"aria-selected":a?!0:void 0,"data-disabled":_?!0:void 0,"data-selected":a?!0:void 0,"data-cmdk-item":"","data-value":b,role:"option",id:D})},[L,re,t,o,ve,ce,ge,s,b,_,x,P,D,a,d,c]}class Oy extends st{constructor(e){super(),it(this,e,LA,zA,rt,{disabled:9,value:8,onSelect:10,alwaysRender:11,asChild:0,id:12})}}const RA=i=>({}),Qg=i=>({list:i[7],sizer:i[8]});function OA(i){let e,n,t=i[2].search==="",r,s,a,o=e1(i),c=[i[6]],d={};for(let x=0;x<c.length;x+=1)d=Se(d,c[x]);let _=[i[5],i[9]],b={};for(let x=0;x<_.length;x+=1)b=Se(b,_[x]);return{c(){e=oe("div"),n=oe("div"),o.c(),this.h()},l(x){e=ae(x,"DIV",{});var P=we(e);n=ae(P,"DIV",{});var L=we(n);o.l(L),L.forEach(S),P.forEach(S),this.h()},h(){Bt(n,d),Bt(e,b)},m(x,P){R(x,e,P),ue(e,n),o.m(n,null),i[12](e),r=!0,s||(a=Un(i[4].call(null,n)),s=!0)},p(x,P){P&4&&rt(t,t=x[2].search==="")?(dt(),E(o,1,1,vt),pt(),o=e1(x),o.c(),T(o,1),o.m(n,null)):o.p(x,P),Bt(e,b=Mt(_,[x[5],P&512&&x[9]]))},i(x){r||(T(o),r=!0)},o(x){E(o),r=!1},d(x){x&&S(e),o.d(x),i[12](null),s=!1,a()}}}function FA(i){let e=i[2].search==="",n,t,r=t1(i);return{c(){r.c(),n=Be()},l(s){r.l(s),n=Be()},m(s,a){r.m(s,a),R(s,n,a),t=!0},p(s,a){a&4&&rt(e,e=s[2].search==="")?(dt(),E(r,1,1,vt),pt(),r=t1(s),r.c(),T(r,1),r.m(n.parentNode,n)):r.p(s,a)},i(s){t||(T(r),t=!0)},o(s){E(r),t=!1},d(s){s&&S(n),r.d(s)}}}function e1(i){let e;const n=i[11].default,t=kt(n,i,i[10],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&Ct(t,n,r,r[10],e?Tt(n,r[10],s,null):St(r[10]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function t1(i){let e;const n=i[11].default,t=kt(n,i,i[10],Qg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&Ct(t,n,r,r[10],e?Tt(n,r[10],s,RA):St(r[10]),Qg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function BA(i){let e,n,t,r;const s=[FA,OA],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function NA(i,e,n){const t=["el","asChild"];let r=lt(e,t),s,{$$slots:a={},$$scope:o}=e;const{ids:c}=nh(),d=Tl();sn(i,d,W=>n(2,s=W));let{el:_=void 0}=e,{asChild:b=!1}=e;function x(W){let Q;const ve=W.closest("[data-cmdk-list]");if(!Fo(ve))return;const re=new ResizeObserver(()=>{Q=requestAnimationFrame(()=>{const ce=W.offsetHeight;ve.style.setProperty("--cmdk-list-height",ce.toFixed(1)+"px")})});return re.observe(W),{destroy(){cancelAnimationFrame(Q),re.unobserve(W)}}}const P={"data-cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:c.list,"aria-labelledby":c.input},L={"data-cmdk-list-sizer":""},D={attrs:P},B={attrs:L,action:x};function Z(W){Vt[W?"unshift":"push"](()=>{_=W,n(0,_)})}return i.$$set=W=>{e=Se(Se({},e),Lt(W)),n(9,r=lt(e,t)),"el"in W&&n(0,_=W.el),"asChild"in W&&n(1,b=W.asChild),"$$scope"in W&&n(10,o=W.$$scope)},[_,b,s,d,x,P,L,D,B,r,o,a,Z]}class Fy extends st{constructor(e){super(),it(this,e,NA,BA,rt,{el:0,asChild:1})}}const VA=i=>({attrs:i&2}),n1=i=>({attrs:i[1]}),UA=i=>({attrs:i&2}),r1=i=>({attrs:i[1]});function jA(i){let e,n,t;const r=i[5].default,s=kt(r,i,i[4],n1);let a=[i[1],i[2]],o={};for(let c=0;c<a.length;c+=1)o=Se(o,a[c]);return{c(){e=oe("div"),n=oe("div"),s&&s.c(),this.h()},l(c){e=ae(c,"DIV",{});var d=we(e);n=ae(d,"DIV",{"aria-hidden":!0});var _=we(n);s&&s.l(_),_.forEach(S),d.forEach(S),this.h()},h(){ne(n,"aria-hidden",""),Bt(e,o)},m(c,d){R(c,e,d),ue(e,n),s&&s.m(n,null),t=!0},p(c,d){s&&s.p&&(!t||d&18)&&Ct(s,r,c,c[4],t?Tt(r,c[4],d,VA):St(c[4]),n1),Bt(e,o=Mt(a,[d&2&&c[1],d&4&&c[2]]))},i(c){t||(T(s,c),t=!0)},o(c){E(s,c),t=!1},d(c){c&&S(e),s&&s.d(c)}}}function qA(i){let e;const n=i[5].default,t=kt(n,i,i[4],r1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&18)&&Ct(t,n,r,r[4],e?Tt(n,r[4],s,UA):St(r[4]),r1)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function HA(i){let e,n,t,r;const s=[qA,jA],a=[];function o(c,d){return c[0]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function GA(i,e,n){let t;const r=["progress","asChild"];let s=lt(e,r),{$$slots:a={},$$scope:o}=e,{progress:c=0}=e,{asChild:d=!1}=e;return i.$$set=_=>{e=Se(Se({},e),Lt(_)),n(2,s=lt(e,r)),"progress"in _&&n(3,c=_.progress),"asChild"in _&&n(0,d=_.asChild),"$$scope"in _&&n(4,o=_.$$scope)},i.$$.update=()=>{i.$$.dirty&8&&n(1,t={"data-cmdk-loading":"",role:"progressbar","aria-valuenow":c,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."})},[d,t,s,c,o,a]}class ZA extends st{constructor(e){super(),it(this,e,GA,HA,rt,{progress:3,asChild:0})}}const WA=i=>({}),s1=i=>({attrs:i[4]});function i1(i){let e,n,t,r;const s=[XA,KA],a=[];function o(c,d){return c[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function KA(i){let e,n=[i[4],i[5]],t={};for(let r=0;r<n.length;r+=1)t=Se(t,n[r]);return{c(){e=oe("div"),this.h()},l(r){e=ae(r,"DIV",{}),we(e).forEach(S),this.h()},h(){Bt(e,t)},m(r,s){R(r,e,s)},p(r,s){Bt(e,t=Mt(n,[r[4],s&32&&r[5]]))},i:vt,o:vt,d(r){r&&S(e)}}}function XA(i){let e;const n=i[7].default,t=kt(n,i,i[6],s1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&64)&&Ct(t,n,r,r[6],e?Tt(n,r[6],s,WA):St(r[6]),s1)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function JA(i){let e,n,t=(i[2]||i[0])&&i1(i);return{c(){t&&t.c(),e=Be()},l(r){t&&t.l(r),e=Be()},m(r,s){t&&t.m(r,s),R(r,e,s),n=!0},p(r,[s]){r[2]||r[0]?t?(t.p(r,s),s&5&&T(t,1)):(t=i1(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(dt(),E(t,1,1,()=>{t=null}),pt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&S(e),t&&t.d(r)}}}function YA(i,e,n){const t=["alwaysRender","asChild"];let r=lt(e,t),s,{$$slots:a={},$$scope:o}=e,{alwaysRender:c=!1}=e,{asChild:d=!1}=e;const _=Tl(),b=Vi(_,P=>!P.search);sn(i,b,P=>n(2,s=P));const x={"data-cmdk-separator":"",role:"separator"};return i.$$set=P=>{e=Se(Se({},e),Lt(P)),n(5,r=lt(e,t)),"alwaysRender"in P&&n(0,c=P.alwaysRender),"asChild"in P&&n(1,d=P.asChild),"$$scope"in P&&n(6,o=P.$$scope)},[c,d,s,b,x,r,o,a]}class QA extends st{constructor(e){super(),it(this,e,YA,JA,rt,{alwaysRender:0,asChild:1})}}function e5(i){let e;const n=i[3].default,t=kt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&Ct(t,n,r,r[5],e?Tt(n,r[5],s,null):St(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function t5(i){let e,n,t;const r=[{class:Ut("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",i[1])},i[2]];function s(o){i[4](o)}let a={$$slots:{default:[e5]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Se(a,r[o]);return i[0]!==void 0&&(a.value=i[0]),e=new Ay({props:a}),Vt.push(()=>$n(e,"value",s)),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,c){V(e,o,c),t=!0},p(o,[c]){const d=c&6?Mt(r,[c&2&&{class:Ut("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",o[1])},c&4&&dn(o[2])]):{};c&32&&(d.$$scope={dirty:c,ctx:o}),!n&&c&1&&(n=!0,d.value=o[0],bn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function n5(i,e,n){const t=["value","class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{value:o=void 0}=e,{class:c=void 0}=e;function d(_){o=_,n(0,o)}return i.$$set=_=>{e=Se(Se({},e),Lt(_)),n(2,r=lt(e,t)),"value"in _&&n(0,o=_.value),"class"in _&&n(1,c=_.class),"$$scope"in _&&n(5,a=_.$$scope)},[o,c,r,s,d,a]}let fp=class extends st{constructor(e){super(),it(this,e,n5,t5,rt,{value:0,class:1})}};function r5(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function s5(i){let e,n;const t=[{class:Ut("py-6 text-center text-sm",i[0])},i[1]];let r={$$slots:{default:[r5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new zy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("py-6 text-center text-sm",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function i5(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}let hp=class extends st{constructor(e){super(),it(this,e,i5,s5,rt,{class:0})}};function o5(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function a5(i){let e,n;const t=[{class:Ut("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[o5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Ly({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function l5(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}let dp=class extends st{constructor(e){super(),it(this,e,l5,a5,rt,{class:0})}};function c5(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function u5(i){let e,n;const t=[{class:Ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[0])},i[1]];let r={$$slots:{default:[c5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Oy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function f5(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}let Il=class extends st{constructor(e){super(),it(this,e,f5,u5,rt,{class:0})}};function h5(i){let e,n,t,r,s,a;n=new VS({props:{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}});const o=[{class:Ut("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]];function c(_){i[3](_)}let d={};for(let _=0;_<o.length;_+=1)d=Se(d,o[_]);return i[0]!==void 0&&(d.value=i[0]),r=new Ry({props:d}),Vt.push(()=>$n(r,"value",c)),{c(){e=oe("div"),N(n.$$.fragment),t=me(),N(r.$$.fragment),this.h()},l(_){e=ae(_,"DIV",{class:!0,"data-cmdk-input-wrapper":!0});var b=we(e);j(n.$$.fragment,b),t=_e(b),j(r.$$.fragment,b),b.forEach(S),this.h()},h(){ne(e,"class","flex items-center border-b px-3"),ne(e,"data-cmdk-input-wrapper","")},m(_,b){R(_,e,b),V(n,e,null),ue(e,t),V(r,e,null),a=!0},p(_,[b]){const x=b&6?Mt(o,[b&2&&{class:Ut("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",_[1])},b&4&&dn(_[2])]):{};!s&&b&1&&(s=!0,x.value=_[0],bn(()=>s=!1)),r.$set(x)},i(_){a||(T(n.$$.fragment,_),T(r.$$.fragment,_),a=!0)},o(_){E(n.$$.fragment,_),E(r.$$.fragment,_),a=!1},d(_){_&&S(e),U(n),U(r)}}}function d5(i,e,n){const t=["class","value"];let r=lt(e,t),{class:s=void 0}=e,{value:a=""}=e;function o(c){a=c,n(0,a)}return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(2,r=lt(e,t)),"class"in c&&n(1,s=c.class),"value"in c&&n(0,a=c.value)},[a,s,r,o]}let pp=class extends st{constructor(e){super(),it(this,e,d5,h5,rt,{class:1,value:0})}};function p5(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function m5(i){let e,n;const t=[{class:Ut("max-h-[300px] overflow-y-auto overflow-x-hidden",i[0])},i[1]];let r={$$slots:{default:[p5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Fy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("max-h-[300px] overflow-y-auto overflow-x-hidden",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function _5(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}let mp=class extends st{constructor(e){super(),it(this,e,_5,m5,rt,{class:0})}};function g5(i){let e,n;const t=[{class:Ut("-mx-1 h-px bg-border",i[0])},i[1]];let r={};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new QA({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("-mx-1 h-px bg-border",s[0])},a&2&&dn(s[1])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function v5(i,e,n){const t=["class"];let r=lt(e,t),{class:s=void 0}=e;return i.$$set=a=>{e=Se(Se({},e),Lt(a)),n(1,r=lt(e,t)),"class"in a&&n(0,s=a.class)},[s,r]}class _p extends st{constructor(e){super(),it(this,e,v5,g5,rt,{class:0})}}function y5(i){let e;const n=i[6].default,t=kt(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&Ct(t,n,r,r[7],e?Tt(n,r[7],s,null):St(r[7]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function b5(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{align:i[3]},{sideOffset:i[4]},i[5],{class:Ut("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",i[0])}];let r={$$slots:{default:[y5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Aw({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&63?Mt(t,[a&2&&{transition:s[1]},a&4&&{transitionConfig:s[2]},a&8&&{align:s[3]},a&16&&{sideOffset:s[4]},a&32&&dn(s[5]),a&1&&{class:Ut("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",s[0])}]):{};a&128&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function $5(i,e,n){const t=["class","transition","transitionConfig","align","sideOffset"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{transition:c=Zd}=e,{transitionConfig:d=void 0}=e,{align:_="center"}=e,{sideOffset:b=4}=e;return i.$$set=x=>{e=Se(Se({},e),Lt(x)),n(5,r=lt(e,t)),"class"in x&&n(0,o=x.class),"transition"in x&&n(1,c=x.transition),"transitionConfig"in x&&n(2,d=x.transitionConfig),"align"in x&&n(3,_=x.align),"sideOffset"in x&&n(4,b=x.sideOffset),"$$scope"in x&&n(7,a=x.$$scope)},[o,c,d,_,b,r,s,a]}class gp extends st{constructor(e){super(),it(this,e,$5,b5,rt,{class:0,transition:1,transitionConfig:2,align:3,sideOffset:4})}}const vp=Mw,yp=Dw;function Ed(i){let e,n,t;const r=i[5].default,s=kt(r,i,i[4],null);let a=[{href:i[1]},{class:n=Ut(o1({variant:i[2],className:i[0]}))},i[3]],o={};for(let c=0;c<a.length;c+=1)o=Se(o,a[c]);return{c(){e=oe(i[1]?"a":"span"),s&&s.c(),this.h()},l(c){e=ae(c,((i[1]?"a":"span")||"null").toUpperCase(),{href:!0,class:!0});var d=we(e);s&&s.l(d),d.forEach(S),this.h()},h(){Lf(i[1]?"a":"span")(e,o)},m(c,d){R(c,e,d),s&&s.m(e,null),t=!0},p(c,d){s&&s.p&&(!t||d&16)&&Ct(s,r,c,c[4],t?Tt(r,c[4],d,null):St(c[4]),null),Lf(c[1]?"a":"span")(e,o=Mt(a,[(!t||d&2)&&{href:c[1]},(!t||d&5&&n!==(n=Ut(o1({variant:c[2],className:c[0]}))))&&{class:n},d&8&&c[3]]))},i(c){t||(T(s,c),t=!0)},o(c){E(s,c),t=!1},d(c){c&&S(e),s&&s.d(c)}}}function w5(i){let e=i[1]?"a":"span",n,t,r=(i[1]?"a":"span")&&Ed(i);return{c(){r&&r.c(),n=Be()},l(s){r&&r.l(s),n=Be()},m(s,a){r&&r.m(s,a),R(s,n,a),t=!0},p(s,[a]){s[1],e?rt(e,s[1]?"a":"span")?(r.d(1),r=Ed(s),e=s[1]?"a":"span",r.c(),r.m(n.parentNode,n)):r.p(s,a):(r=Ed(s),e=s[1]?"a":"span",r.c(),r.m(n.parentNode,n))},i(s){t||(T(r,s),t=!0)},o(s){E(r,s),t=!1},d(s){s&&S(n),r&&r.d(s)}}}function x5(i,e,n){const t=["class","href","variant"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{href:c=void 0}=e,{variant:d="default"}=e;return i.$$set=_=>{e=Se(Se({},e),Lt(_)),n(3,r=lt(e,t)),"class"in _&&n(0,o=_.class),"href"in _&&n(1,c=_.href),"variant"in _&&n(2,d=_.variant),"$$scope"in _&&n(4,a=_.$$scope)},[o,c,d,r,a,s]}class ho extends st{constructor(e){super(),it(this,e,x5,w5,rt,{class:0,href:1,variant:2})}}const o1=wv({base:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 select-none",variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function a1(i,e,n){const t=i.slice();return t[10]=e[n],t}function l1(i,e,n){const t=i.slice();return t[10]=e[n],t}function c1(i){let e,n,t,r,s,a,o,c;e=new hi({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new ho({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[k5]},$$scope:{ctx:i}}});const d=[S5,C5],_=[];function b(x,P){return x[0].length>2?0:1}return a=b(i),o=_[a]=d[a](i),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),s=oe("div"),o.c(),this.h()},l(x){j(e.$$.fragment,x),n=_e(x),j(t.$$.fragment,x),r=_e(x),s=ae(x,"DIV",{class:!0});var P=we(s);o.l(P),P.forEach(S),this.h()},h(){ne(s,"class","hidden space-x-1 lg:flex")},m(x,P){V(e,x,P),R(x,n,P),V(t,x,P),R(x,r,P),R(x,s,P),_[a].m(s,null),c=!0},p(x,P){const L={};P&65537&&(L.$$scope={dirty:P,ctx:x}),t.$set(L);let D=a;a=b(x),a===D?_[a].p(x,P):(dt(),E(_[D],1,1,()=>{_[D]=null}),pt(),o=_[a],o?o.p(x,P):(o=_[a]=d[a](x),o.c()),T(o,1),o.m(s,null))},i(x){c||(T(e.$$.fragment,x),T(t.$$.fragment,x),T(o),c=!0)},o(x){E(e.$$.fragment,x),E(t.$$.fragment,x),E(o),c=!1},d(x){x&&(S(n),S(r),S(s)),U(e,x),U(t,x),_[a].d()}}}function k5(i){let e=i[0].length+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&Ft(n,e)},d(t){t&&S(n)}}}function C5(i){let e,n,t=Jt(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=u1(l1(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Be()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Be()},m(a,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&1){t=Jt(a[0]);let c;for(c=0;c<t.length;c+=1){const d=l1(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=u1(d),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function S5(i){let e,n;return e=new ho({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[I5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function T5(i){let e=i[10]+"",n,t;return{c(){n=je(e),t=me()},l(r){n=qe(r,e),t=_e(r)},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[10]+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function u1(i){let e,n;return e=new ho({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[T5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function I5(i){let e=i[0].length+"",n,t;return{c(){n=je(e),t=je(" Selected")},l(r){n=qe(r,e),t=qe(r," Selected")},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function E5(i){let e,n,t,r,s,a,o;e=new Wd({props:{class:"mr-2 h-5 w-5"}});let c=i[0].length>0&&c1(i);return{c(){N(e.$$.fragment),n=me(),t=oe("p"),r=je(i[1]),s=me(),c&&c.c(),a=Be(),this.h()},l(d){j(e.$$.fragment,d),n=_e(d),t=ae(d,"P",{class:!0});var _=we(t);r=qe(_,i[1]),_.forEach(S),s=_e(d),c&&c.l(d),a=Be(),this.h()},h(){ne(t,"class","text-sm")},m(d,_){V(e,d,_),R(d,n,_),R(d,t,_),ue(t,r),R(d,s,_),c&&c.m(d,_),R(d,a,_),o=!0},p(d,_){(!o||_&2)&&Ft(r,d[1]),d[0].length>0?c?(c.p(d,_),_&1&&T(c,1)):(c=c1(d),c.c(),T(c,1),c.m(a.parentNode,a)):c&&(dt(),E(c,1,1,()=>{c=null}),pt())},i(d){o||(T(e.$$.fragment,d),T(c),o=!0)},o(d){E(e.$$.fragment,d),E(c),o=!1},d(d){d&&(S(n),S(t),S(s),S(a)),U(e,d),c&&c.d(d)}}}function P5(i){let e,n;return e=new Yr({props:{builders:[i[13]],variant:"outline",class:"h-10 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[E5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&8192&&(s.builders=[t[13]]),r&65539&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function A5(i){let e;return{c(){e=je("No results found.")},l(n){e=qe(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function f1(i){let e,n=i[3][i[10]]+"",t;return{c(){e=oe("span"),t=je(n),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=we(e);t=qe(s,n),s.forEach(S),this.h()},h(){ne(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){R(r,e,s),ue(e,t)},p(r,s){s&12&&n!==(n=r[3][r[10]]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function M5(i){let e,n,t,r,s,a=i[10]+"",o,c,d,_;n=new Kd({props:{className:Ut("h-4 w-4")}});let b=i[3][i[10]]&&f1(i);return{c(){e=oe("div"),N(n.$$.fragment),r=me(),s=oe("span"),o=je(a),c=me(),b&&b.c(),d=me(),this.h()},l(x){e=ae(x,"DIV",{class:!0});var P=we(e);j(n.$$.fragment,P),P.forEach(S),r=_e(x),s=ae(x,"SPAN",{});var L=we(s);o=qe(L,a),L.forEach(S),c=_e(x),b&&b.l(x),d=_e(x),this.h()},h(){ne(e,"class",t=Ut("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[10])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m(x,P){R(x,e,P),V(n,e,null),R(x,r,P),R(x,s,P),ue(s,o),R(x,c,P),b&&b.m(x,P),R(x,d,P),_=!0},p(x,P){(!_||P&5&&t!==(t=Ut("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",x[0].includes(x[10])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&ne(e,"class",t),(!_||P&4)&&a!==(a=x[10]+"")&&Ft(o,a),x[3][x[10]]?b?b.p(x,P):(b=f1(x),b.c(),b.m(d.parentNode,d)):b&&(b.d(1),b=null)},i(x){_||(T(n.$$.fragment,x),_=!0)},o(x){E(n.$$.fragment,x),_=!1},d(x){x&&(S(e),S(r),S(s),S(c),S(d)),U(n),b&&b.d(x)}}}function h1(i){let e,n;return e=new Il({props:{class:"cursor-pointer",value:i[10],onSelect:i[7],$$slots:{default:[M5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[10]),r&65549&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function D5(i){let e,n,t=Jt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=h1(a1(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Be()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Be()},m(a,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&77){t=Jt(a[2]);let c;for(c=0;c<t.length;c+=1){const d=a1(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=h1(d),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function d1(i){let e,n,t,r;return e=new _p({}),t=new Il({props:{class:"justify-center text-center cursor-pointer",onSelect:i[8],$$slots:{default:[z5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.onSelect=s[8]),a&65536&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function z5(i){let e;return{c(){e=je("Clear Filter")},l(n){e=qe(n,"Clear Filter")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function L5(i){let e,n,t,r,s,a;e=new hp({props:{$$slots:{default:[A5]},$$scope:{ctx:i}}}),t=new dp({props:{$$slots:{default:[D5]},$$scope:{ctx:i}}});let o=i[0].length>0&&d1(i);return{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),o&&o.c(),s=Be()},l(c){j(e.$$.fragment,c),n=_e(c),j(t.$$.fragment,c),r=_e(c),o&&o.l(c),s=Be()},m(c,d){V(e,c,d),R(c,n,d),V(t,c,d),R(c,r,d),o&&o.m(c,d),R(c,s,d),a=!0},p(c,d){const _={};d&65536&&(_.$$scope={dirty:d,ctx:c}),e.$set(_);const b={};d&65549&&(b.$$scope={dirty:d,ctx:c}),t.$set(b),c[0].length>0?o?(o.p(c,d),d&1&&T(o,1)):(o=d1(c),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(dt(),E(o,1,1,()=>{o=null}),pt())},i(c){a||(T(e.$$.fragment,c),T(t.$$.fragment,c),T(o),a=!0)},o(c){E(e.$$.fragment,c),E(t.$$.fragment,c),E(o),a=!1},d(c){c&&(S(n),S(r),S(s)),U(e,c),U(t,c),o&&o.d(c)}}}function R5(i){let e,n,t,r;return e=new pp({props:{placeholder:i[1]}}),t=new mp({props:{$$slots:{default:[L5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.placeholder=s[1]),e.$set(o);const c={};a&65549&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function O5(i){let e,n;return e=new fp({props:{loop:!0,$$slots:{default:[R5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&65551&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function F5(i){let e,n,t,r;return e=new yp({props:{asChild:!0,$$slots:{default:[P5,({builder:s})=>({13:s}),({builder:s})=>s?8192:0]},$$scope:{ctx:i}}}),t=new gp({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[O5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&73731&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&65551&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function B5(i){let e,n,t;function r(a){i[9](a)}let s={disableFocusTrap:!0,onOutsideClick:i[4],$$slots:{default:[F5]},$$scope:{ctx:i}};return i[5]!==void 0&&(s.open=i[5]),e=new vp({props:s}),Vt.push(()=>$n(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,[o]){const c={};o&65551&&(c.$$scope={dirty:o,ctx:a}),!n&&o&32&&(n=!0,c.open=a[5],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function N5(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{poiFeatureOptions:s}=e,{counts:a={}}=e,o=!1;const c=()=>n(5,o=!1);function d(P){Array.isArray(t)&&t.includes(P)?n(0,t=t.filter(L=>L!==P)):n(0,t=[...Array.isArray(t)?t:[],P])}const _=P=>{d(P)},b=()=>{n(0,t=[])};function x(P){o=P,n(5,o)}return i.$$set=P=>{"filterValues"in P&&n(0,t=P.filterValues),"title"in P&&n(1,r=P.title),"poiFeatureOptions"in P&&n(2,s=P.poiFeatureOptions),"counts"in P&&n(3,a=P.counts)},[t,r,s,a,c,o,d,_,b,x]}class V5 extends st{constructor(e){super(),it(this,e,N5,B5,rt,{filterValues:0,title:1,poiFeatureOptions:2,counts:3,forceClosePopover:4})}get forceClosePopover(){return this.$$.ctx[4]}}function U5(i){let e;const n=i[3].default,t=kt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&Ct(t,n,r,r[5],e?Tt(n,r[5],s,null):St(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function j5(i){let e,n,t;const r=[{class:Ut("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",i[1])},i[2]];function s(o){i[4](o)}let a={$$slots:{default:[U5]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Se(a,r[o]);return i[0]!==void 0&&(a.value=i[0]),e=new Ay({props:a}),Vt.push(()=>$n(e,"value",s)),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,c){V(e,o,c),t=!0},p(o,[c]){const d=c&6?Mt(r,[c&2&&{class:Ut("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",o[1])},c&4&&dn(o[2])]):{};c&32&&(d.$$scope={dirty:c,ctx:o}),!n&&c&1&&(n=!0,d.value=o[0],bn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function q5(i,e,n){const t=["value","class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{value:o=void 0}=e,{class:c=void 0}=e;function d(_){o=_,n(0,o)}return i.$$set=_=>{e=Se(Se({},e),Lt(_)),n(2,r=lt(e,t)),"value"in _&&n(0,o=_.value),"class"in _&&n(1,c=_.class),"$$scope"in _&&n(5,a=_.$$scope)},[o,c,r,s,d,a]}class By extends st{constructor(e){super(),it(this,e,q5,j5,rt,{value:0,class:1})}}function H5(i){let e;const n=i[3].default,t=kt(n,i,i[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&64)&&Ct(t,n,r,r[6],e?Tt(n,r[6],s,null):St(r[6]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function G5(i){let e,n,t;const r=[{class:"[&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground [&_[data-cmdk-group]:not([hidden])_~[data-cmdk-group]]:pt-0 [&_[data-cmdk-group]]:px-2 [&_[data-cmdk-input-wrapper]_svg]:h-5 [&_[data-cmdk-input-wrapper]_svg]:w-5 [&_[data-cmdk-input]]:h-12 [&_[data-cmdk-item]]:px-2 [&_[data-cmdk-item]]:py-3 [&_[data-cmdk-item]_svg]:h-5 [&_[data-cmdk-item]_svg]:w-5"},i[2]];function s(o){i[4](o)}let a={$$slots:{default:[H5]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Se(a,r[o]);return i[1]!==void 0&&(a.value=i[1]),e=new By({props:a}),Vt.push(()=>$n(e,"value",s)),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,c){V(e,o,c),t=!0},p(o,c){const d=c&4?Mt(r,[r[0],dn(o[2])]):{};c&64&&(d.$$scope={dirty:c,ctx:o}),!n&&c&2&&(n=!0,d.value=o[1],bn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function Z5(i){let e,n;return e=new za({props:{class:"overflow-hidden p-0 shadow-lg",$$slots:{default:[G5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&70&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function W5(i){let e,n,t;const r=[i[2]];function s(o){i[5](o)}let a={$$slots:{default:[Z5]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Se(a,r[o]);return i[0]!==void 0&&(a.open=i[0]),e=new La({props:a}),Vt.push(()=>$n(e,"open",s)),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,c){V(e,o,c),t=!0},p(o,[c]){const d=c&4?Mt(r,[dn(o[2])]):{};c&70&&(d.$$scope={dirty:c,ctx:o}),!n&&c&1&&(n=!0,d.open=o[0],bn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function K5(i,e,n){const t=["open","value"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{open:o=!1}=e,{value:c=void 0}=e;function d(b){c=b,n(1,c)}function _(b){o=b,n(0,o)}return i.$$set=b=>{e=Se(Se({},e),Lt(b)),n(2,r=lt(e,t)),"open"in b&&n(0,o=b.open),"value"in b&&n(1,c=b.value),"$$scope"in b&&n(6,a=b.$$scope)},[o,c,r,s,d,_,a]}class Ny extends st{constructor(e){super(),it(this,e,K5,W5,rt,{open:0,value:1})}}function X5(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function J5(i){let e,n;const t=[{class:Ut("py-6 text-center text-sm",i[0])},i[1]];let r={$$slots:{default:[X5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new zy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("py-6 text-center text-sm",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Y5(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}class bp extends st{constructor(e){super(),it(this,e,Y5,J5,rt,{class:0})}}function Q5(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function eM(i){let e,n;const t=[{class:Ut("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[Q5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Ly({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function tM(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}class bl extends st{constructor(e){super(),it(this,e,tM,eM,rt,{class:0})}}function nM(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function rM(i){let e,n;const t=[{class:Ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[0])},i[1]];let r={$$slots:{default:[nM]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Oy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function sM(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}class El extends st{constructor(e){super(),it(this,e,sM,rM,rt,{class:0})}}function iM(i){let e,n,t,r,s,a;n=new Xd({props:{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}});const o=[{class:Ut("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]];function c(_){i[3](_)}let d={};for(let _=0;_<o.length;_+=1)d=Se(d,o[_]);return i[0]!==void 0&&(d.value=i[0]),r=new Ry({props:d}),Vt.push(()=>$n(r,"value",c)),{c(){e=oe("div"),N(n.$$.fragment),t=me(),N(r.$$.fragment),this.h()},l(_){e=ae(_,"DIV",{class:!0,"data-cmdk-input-wrapper":!0});var b=we(e);j(n.$$.fragment,b),t=_e(b),j(r.$$.fragment,b),b.forEach(S),this.h()},h(){ne(e,"class","flex items-center border-b px-2"),ne(e,"data-cmdk-input-wrapper","")},m(_,b){R(_,e,b),V(n,e,null),ue(e,t),V(r,e,null),a=!0},p(_,[b]){const x=b&6?Mt(o,[b&2&&{class:Ut("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",_[1])},b&4&&dn(_[2])]):{};!s&&b&1&&(s=!0,x.value=_[0],bn(()=>s=!1)),r.$set(x)},i(_){a||(T(n.$$.fragment,_),T(r.$$.fragment,_),a=!0)},o(_){E(n.$$.fragment,_),E(r.$$.fragment,_),a=!1},d(_){_&&S(e),U(n),U(r)}}}function oM(i,e,n){const t=["class","value"];let r=lt(e,t),{class:s=void 0}=e,{value:a=""}=e;function o(c){a=c,n(0,a)}return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(2,r=lt(e,t)),"class"in c&&n(1,s=c.class),"value"in c&&n(0,a=c.value)},[a,s,r,o]}class $p extends st{constructor(e){super(),it(this,e,oM,iM,rt,{class:1,value:0})}}function aM(i){let e;const n=i[2].default,t=kt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&Ct(t,n,r,r[3],e?Tt(n,r[3],s,null):St(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function lM(i){let e,n;const t=[{class:Ut("max-h-[300px] overflow-y-auto overflow-x-hidden",i[0])},i[1]];let r={$$slots:{default:[aM]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Se(r,t[s]);return e=new Fy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Mt(t,[a&1&&{class:Ut("max-h-[300px] overflow-y-auto overflow-x-hidden",s[0])},a&2&&dn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function cM(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=c=>{e=Se(Se({},e),Lt(c)),n(1,r=lt(e,t)),"class"in c&&n(0,o=c.class),"$$scope"in c&&n(3,a=c.$$scope)},[o,r,s,a]}class Vy extends st{constructor(e){super(),it(this,e,cM,lM,rt,{class:0})}}const Uy=ZA;function p1(i,e,n){const t=i.slice();return t[8]=e[n],t}function uM(i){let e,n,t,r,s=i[0].label+"",a,o,c,d;return n=new C2({props:{class:"h-5 w-5"}}),c=new Yw({props:{class:"ml-2 h-4 w-4 shrink-0 opacity-50"}}),{c(){e=oe("div"),N(n.$$.fragment),t=me(),r=oe("p"),a=je(s),o=me(),N(c.$$.fragment),this.h()},l(_){e=ae(_,"DIV",{class:!0});var b=we(e);j(n.$$.fragment,b),t=_e(b),r=ae(b,"P",{class:!0});var x=we(r);a=qe(x,s),x.forEach(S),b.forEach(S),o=_e(_),j(c.$$.fragment,_),this.h()},h(){ne(r,"class","max-lg:hidden text-sm"),ne(e,"class","flex gap-2")},m(_,b){R(_,e,b),V(n,e,null),ue(e,t),ue(e,r),ue(r,a),R(_,o,b),V(c,_,b),d=!0},p(_,b){(!d||b&1)&&s!==(s=_[0].label+"")&&Ft(a,s)},i(_){d||(T(n.$$.fragment,_),T(c.$$.fragment,_),d=!0)},o(_){E(n.$$.fragment,_),E(c.$$.fragment,_),d=!1},d(_){_&&(S(e),S(o)),U(n),U(c,_)}}}function fM(i){let e,n;return e=new Nn({props:{builders:[i[11]],variant:"outline",role:"combobox","aria-expanded":i[3],"aria-label":"Change Map Layer",$$slots:{default:[uM]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&2048&&(s.builders=[t[11]]),r&8&&(s["aria-expanded"]=t[3]),r&4097&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function hM(i){let e;return{c(){e=je("No map layer found.")},l(n){e=qe(n,"No map layer found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function dM(i){let e,n,t=i[8].label+"",r,s,a;return e=new Kf({props:{class:Ut("mr-2 h-4 w-4",i[2]!==i[8].value&&"text-transparent")}}),{c(){N(e.$$.fragment),n=me(),r=je(t),s=me()},l(o){j(e.$$.fragment,o),n=_e(o),r=qe(o,t),s=_e(o)},m(o,c){V(e,o,c),R(o,n,c),R(o,r,c),R(o,s,c),a=!0},p(o,c){const d={};c&4&&(d.class=Ut("mr-2 h-4 w-4",o[2]!==o[8].value&&"text-transparent")),e.$set(d)},i(o){a||(T(e.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r),S(s)),U(e,o)}}}function m1(i){let e,n;function t(...r){return i[5](i[7],...r)}return e=new El({props:{class:"cursor-pointer",value:i[8].value,onSelect:t,$$slots:{default:[dM]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,s){V(e,r,s),n=!0},p(r,s){i=r;const a={};s&132&&(a.onSelect=t),s&4100&&(a.$$scope={dirty:s,ctx:i}),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function pM(i){let e,n,t=Jt(Ea),r=[];for(let a=0;a<t.length;a+=1)r[a]=m1(p1(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Be()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Be()},m(a,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&148){t=Jt(Ea);let c;for(c=0;c<t.length;c+=1){const d=p1(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=m1(d),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function mM(i){let e,n,t,r,s,a;return e=new $p({props:{placeholder:"Search map layers"}}),t=new bp({props:{$$slots:{default:[hM]},$$scope:{ctx:i}}}),s=new bl({props:{$$slots:{default:[pM]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o),r=_e(o),j(s.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),R(o,r,c),V(s,o,c),a=!0},p(o,c){const d={};c&4096&&(d.$$scope={dirty:c,ctx:o}),t.$set(d);const _={};c&4228&&(_.$$scope={dirty:c,ctx:o}),s.$set(_)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function _M(i){let e,n;return e=new By({props:{$$slots:{default:[mM]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4228&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function gM(i){let e,n,t,r;return e=new Cv({props:{asChild:!0,$$slots:{default:[fM,({builder:s})=>({11:s}),({builder:s})=>s?2048:0]},$$scope:{ctx:i}}}),t=new Sv({props:{class:"w-[200px] p-0 mt-1",align:"end",$$slots:{default:[_M]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&6153&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&4228&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function vM(i){let e,n,t;function r(a){i[6](a)}let s={disableFocusTrap:!0,onOutsideClick:i[1],$$slots:{default:[gM,({ids:a})=>({7:a}),({ids:a})=>a?128:0]},$$scope:{ctx:i}};return i[3]!==void 0&&(s.open=i[3]),e=new kv({props:s}),Vt.push(()=>$n(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,[o]){const c={};o&4237&&(c.$$scope={dirty:o,ctx:a}),!n&&o&8&&(n=!0,c.open=a[3],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function yM(i,e,n){let{selectedMapLayer:t}=e,r=!1;const s=()=>n(3,r=!1);let a="";function o(_){n(3,r=!1),ci().then(()=>{var b;(b=document.getElementById(_))==null||b.focus()})}const c=(_,b)=>{n(2,a=b),localStorage.setItem("preferredMapLayer",b),o(_.trigger)};function d(_){r=_,n(3,r)}return i.$$set=_=>{"selectedMapLayer"in _&&n(0,t=_.selectedMapLayer)},i.$$.update=()=>{i.$$.dirty&5&&(Ea.find(_=>_.value===a)?n(0,t=Ea.find(_=>_.value===a)):n(2,a=t.value))},[t,s,a,r,o,c,d]}class bM extends st{constructor(e){super(),it(this,e,yM,vM,rt,{selectedMapLayer:0,forceClosePopover:1})}get forceClosePopover(){return this.$$.ctx[1]}}function jy(i,e){return function(){return i.apply(e,arguments)}}const{toString:$M}=Object.prototype,{getPrototypeOf:wp}=Object,rh=(i=>e=>{const n=$M.call(e);return i[n]||(i[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),qi=i=>(i=i.toLowerCase(),e=>rh(e)===i),sh=i=>e=>typeof e===i,{isArray:Pl}=Array,su=sh("undefined");function wM(i){return i!==null&&!su(i)&&i.constructor!==null&&!su(i.constructor)&&fi(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const qy=qi("ArrayBuffer");function xM(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&qy(i.buffer),e}const kM=sh("string"),fi=sh("function"),Hy=sh("number"),ih=i=>i!==null&&typeof i=="object",CM=i=>i===!0||i===!1,Mf=i=>{if(rh(i)!=="object")return!1;const e=wp(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},SM=qi("Date"),TM=qi("File"),IM=qi("Blob"),EM=qi("FileList"),PM=i=>ih(i)&&fi(i.pipe),AM=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||fi(i.append)&&((e=rh(i))==="formdata"||e==="object"&&fi(i.toString)&&i.toString()==="[object FormData]"))},MM=qi("URLSearchParams"),DM=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _u(i,e,{allOwnKeys:n=!1}={}){if(i===null||typeof i>"u")return;let t,r;if(typeof i!="object"&&(i=[i]),Pl(i))for(t=0,r=i.length;t<r;t++)e.call(null,i[t],t,i);else{const s=n?Object.getOwnPropertyNames(i):Object.keys(i),a=s.length;let o;for(t=0;t<a;t++)o=s[t],e.call(null,i[o],o,i)}}function Gy(i,e){e=e.toLowerCase();const n=Object.keys(i);let t=n.length,r;for(;t-- >0;)if(r=n[t],e===r.toLowerCase())return r;return null}const Zy=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Wy=i=>!su(i)&&i!==Zy;function Nd(){const{caseless:i}=Wy(this)&&this||{},e={},n=(t,r)=>{const s=i&&Gy(e,r)||r;Mf(e[s])&&Mf(t)?e[s]=Nd(e[s],t):Mf(t)?e[s]=Nd({},t):Pl(t)?e[s]=t.slice():e[s]=t};for(let t=0,r=arguments.length;t<r;t++)arguments[t]&&_u(arguments[t],n);return e}const zM=(i,e,n,{allOwnKeys:t}={})=>(_u(e,(r,s)=>{n&&fi(r)?i[s]=jy(r,n):i[s]=r},{allOwnKeys:t}),i),LM=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),RM=(i,e,n,t)=>{i.prototype=Object.create(e.prototype,t),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),n&&Object.assign(i.prototype,n)},OM=(i,e,n,t)=>{let r,s,a;const o={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),s=r.length;s-- >0;)a=r[s],(!t||t(a,i,e))&&!o[a]&&(e[a]=i[a],o[a]=!0);i=n!==!1&&wp(i)}while(i&&(!n||n(i,e))&&i!==Object.prototype);return e},FM=(i,e,n)=>{i=String(i),(n===void 0||n>i.length)&&(n=i.length),n-=e.length;const t=i.indexOf(e,n);return t!==-1&&t===n},BM=i=>{if(!i)return null;if(Pl(i))return i;let e=i.length;if(!Hy(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=i[e];return n},NM=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&wp(Uint8Array)),VM=(i,e)=>{const t=(i&&i[Symbol.iterator]).call(i);let r;for(;(r=t.next())&&!r.done;){const s=r.value;e.call(i,s[0],s[1])}},UM=(i,e)=>{let n;const t=[];for(;(n=i.exec(e))!==null;)t.push(n);return t},jM=qi("HTMLFormElement"),qM=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,t,r){return t.toUpperCase()+r}),_1=(({hasOwnProperty:i})=>(e,n)=>i.call(e,n))(Object.prototype),HM=qi("RegExp"),Ky=(i,e)=>{const n=Object.getOwnPropertyDescriptors(i),t={};_u(n,(r,s)=>{let a;(a=e(r,s,i))!==!1&&(t[s]=a||r)}),Object.defineProperties(i,t)},GM=i=>{Ky(i,(e,n)=>{if(fi(i)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const t=i[n];if(fi(t)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ZM=(i,e)=>{const n={},t=r=>{r.forEach(s=>{n[s]=!0})};return Pl(i)?t(i):t(String(i).split(e)),n},WM=()=>{},KM=(i,e)=>(i=+i,Number.isFinite(i)?i:e),Pd="abcdefghijklmnopqrstuvwxyz",g1="0123456789",Xy={DIGIT:g1,ALPHA:Pd,ALPHA_DIGIT:Pd+Pd.toUpperCase()+g1},XM=(i=16,e=Xy.ALPHA_DIGIT)=>{let n="";const{length:t}=e;for(;i--;)n+=e[Math.random()*t|0];return n};function JM(i){return!!(i&&fi(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const YM=i=>{const e=new Array(10),n=(t,r)=>{if(ih(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const s=Pl(t)?[]:{};return _u(t,(a,o)=>{const c=n(a,r+1);!su(c)&&(s[o]=c)}),e[r]=void 0,s}}return t};return n(i,0)},QM=qi("AsyncFunction"),eD=i=>i&&(ih(i)||fi(i))&&fi(i.then)&&fi(i.catch),Pt={isArray:Pl,isArrayBuffer:qy,isBuffer:wM,isFormData:AM,isArrayBufferView:xM,isString:kM,isNumber:Hy,isBoolean:CM,isObject:ih,isPlainObject:Mf,isUndefined:su,isDate:SM,isFile:TM,isBlob:IM,isRegExp:HM,isFunction:fi,isStream:PM,isURLSearchParams:MM,isTypedArray:NM,isFileList:EM,forEach:_u,merge:Nd,extend:zM,trim:DM,stripBOM:LM,inherits:RM,toFlatObject:OM,kindOf:rh,kindOfTest:qi,endsWith:FM,toArray:BM,forEachEntry:VM,matchAll:UM,isHTMLForm:jM,hasOwnProperty:_1,hasOwnProp:_1,reduceDescriptors:Ky,freezeMethods:GM,toObjectSet:ZM,toCamelCase:qM,noop:WM,toFiniteNumber:KM,findKey:Gy,global:Zy,isContextDefined:Wy,ALPHABET:Xy,generateString:XM,isSpecCompliantForm:JM,toJSONObject:YM,isAsyncFn:QM,isThenable:eD};function Gn(i,e,n,t,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),t&&(this.request=t),r&&(this.response=r)}Pt.inherits(Gn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Pt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Jy=Gn.prototype,Yy={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Yy[i]={value:i}});Object.defineProperties(Gn,Yy);Object.defineProperty(Jy,"isAxiosError",{value:!0});Gn.from=(i,e,n,t,r,s)=>{const a=Object.create(Jy);return Pt.toFlatObject(i,a,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),Gn.call(a,i.message,e,n,t,r),a.cause=i,a.name=i.name,s&&Object.assign(a,s),a};const tD=null;function Vd(i){return Pt.isPlainObject(i)||Pt.isArray(i)}function Qy(i){return Pt.endsWith(i,"[]")?i.slice(0,-2):i}function v1(i,e,n){return i?i.concat(e).map(function(r,s){return r=Qy(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function nD(i){return Pt.isArray(i)&&!i.some(Vd)}const rD=Pt.toFlatObject(Pt,{},null,function(e){return/^is[A-Z]/.test(e)});function oh(i,e,n){if(!Pt.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,n=Pt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,B){return!Pt.isUndefined(B[D])});const t=n.metaTokens,r=n.visitor||_,s=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Pt.isSpecCompliantForm(e);if(!Pt.isFunction(r))throw new TypeError("visitor must be a function");function d(L){if(L===null)return"";if(Pt.isDate(L))return L.toISOString();if(!c&&Pt.isBlob(L))throw new Gn("Blob is not supported. Use a Buffer instead.");return Pt.isArrayBuffer(L)||Pt.isTypedArray(L)?c&&typeof Blob=="function"?new Blob([L]):Buffer.from(L):L}function _(L,D,B){let Z=L;if(L&&!B&&typeof L=="object"){if(Pt.endsWith(D,"{}"))D=t?D:D.slice(0,-2),L=JSON.stringify(L);else if(Pt.isArray(L)&&nD(L)||(Pt.isFileList(L)||Pt.endsWith(D,"[]"))&&(Z=Pt.toArray(L)))return D=Qy(D),Z.forEach(function(Q,ve){!(Pt.isUndefined(Q)||Q===null)&&e.append(a===!0?v1([D],ve,s):a===null?D:D+"[]",d(Q))}),!1}return Vd(L)?!0:(e.append(v1(B,D,s),d(L)),!1)}const b=[],x=Object.assign(rD,{defaultVisitor:_,convertValue:d,isVisitable:Vd});function P(L,D){if(!Pt.isUndefined(L)){if(b.indexOf(L)!==-1)throw Error("Circular reference detected in "+D.join("."));b.push(L),Pt.forEach(L,function(Z,W){(!(Pt.isUndefined(Z)||Z===null)&&r.call(e,Z,Pt.isString(W)?W.trim():W,D,x))===!0&&P(Z,D?D.concat(W):[W])}),b.pop()}}if(!Pt.isObject(i))throw new TypeError("data must be an object");return P(i),e}function y1(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function xp(i,e){this._pairs=[],i&&oh(i,this,e)}const eb=xp.prototype;eb.append=function(e,n){this._pairs.push([e,n])};eb.toString=function(e){const n=e?function(t){return e.call(this,t,y1)}:y1;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function sD(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tb(i,e,n){if(!e)return i;const t=n&&n.encode||sD,r=n&&n.serialize;let s;if(r?s=r(e,n):s=Pt.isURLSearchParams(e)?e.toString():new xp(e,n).toString(t),s){const a=i.indexOf("#");a!==-1&&(i=i.slice(0,a)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}class iD{constructor(){this.handlers=[]}use(e,n,t){return this.handlers.push({fulfilled:e,rejected:n,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Pt.forEach(this.handlers,function(t){t!==null&&e(t)})}}const b1=iD,nb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oD=typeof URLSearchParams<"u"?URLSearchParams:xp,aD=typeof FormData<"u"?FormData:null,lD=typeof Blob<"u"?Blob:null,cD={isBrowser:!0,classes:{URLSearchParams:oD,FormData:aD,Blob:lD},protocols:["http","https","file","blob","url","data"]},rb=typeof window<"u"&&typeof document<"u",uD=(i=>rb&&["ReactNative","NativeScript","NS"].indexOf(i)<0)(typeof navigator<"u"&&navigator.product),fD=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),hD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:rb,hasStandardBrowserEnv:uD,hasStandardBrowserWebWorkerEnv:fD},Symbol.toStringTag,{value:"Module"})),Ni={...hD,...cD};function dD(i,e){return oh(i,new Ni.classes.URLSearchParams,Object.assign({visitor:function(n,t,r,s){return Ni.isNode&&Pt.isBuffer(n)?(this.append(t,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function pD(i){return Pt.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function mD(i){const e={},n=Object.keys(i);let t;const r=n.length;let s;for(t=0;t<r;t++)s=n[t],e[s]=i[s];return e}function sb(i){function e(n,t,r,s){let a=n[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),c=s>=n.length;return a=!a&&Pt.isArray(r)?r.length:a,c?(Pt.hasOwnProp(r,a)?r[a]=[r[a],t]:r[a]=t,!o):((!r[a]||!Pt.isObject(r[a]))&&(r[a]=[]),e(n,t,r[a],s)&&Pt.isArray(r[a])&&(r[a]=mD(r[a])),!o)}if(Pt.isFormData(i)&&Pt.isFunction(i.entries)){const n={};return Pt.forEachEntry(i,(t,r)=>{e(pD(t),r,n,0)}),n}return null}function _D(i,e,n){if(Pt.isString(i))try{return(e||JSON.parse)(i),Pt.trim(i)}catch(t){if(t.name!=="SyntaxError")throw t}return(n||JSON.stringify)(i)}const kp={transitional:nb,adapter:["xhr","http"],transformRequest:[function(e,n){const t=n.getContentType()||"",r=t.indexOf("application/json")>-1,s=Pt.isObject(e);if(s&&Pt.isHTMLForm(e)&&(e=new FormData(e)),Pt.isFormData(e))return r?JSON.stringify(sb(e)):e;if(Pt.isArrayBuffer(e)||Pt.isBuffer(e)||Pt.isStream(e)||Pt.isFile(e)||Pt.isBlob(e))return e;if(Pt.isArrayBufferView(e))return e.buffer;if(Pt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(t.indexOf("application/x-www-form-urlencoded")>-1)return dD(e,this.formSerializer).toString();if((o=Pt.isFileList(e))||t.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return oh(o?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),_D(e)):e}],transformResponse:[function(e){const n=this.transitional||kp.transitional,t=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&Pt.isString(e)&&(t&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Gn.from(o,Gn.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ni.classes.FormData,Blob:Ni.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Pt.forEach(["delete","get","head","post","put","patch"],i=>{kp.headers[i]={}});const Cp=kp,gD=Pt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vD=i=>{const e={};let n,t,r;return i&&i.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),t=a.substring(r+1).trim(),!(!n||e[n]&&gD[n])&&(n==="set-cookie"?e[n]?e[n].push(t):e[n]=[t]:e[n]=e[n]?e[n]+", "+t:t)}),e},$1=Symbol("internals");function Zc(i){return i&&String(i).trim().toLowerCase()}function Df(i){return i===!1||i==null?i:Pt.isArray(i)?i.map(Df):String(i)}function yD(i){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=n.exec(i);)e[t[1]]=t[2];return e}const bD=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function Ad(i,e,n,t,r){if(Pt.isFunction(t))return t.call(this,e,n);if(r&&(e=n),!!Pt.isString(e)){if(Pt.isString(t))return e.indexOf(t)!==-1;if(Pt.isRegExp(t))return t.test(e)}}function $D(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,t)=>n.toUpperCase()+t)}function wD(i,e){const n=Pt.toCamelCase(" "+e);["get","set","has"].forEach(t=>{Object.defineProperty(i,t+n,{value:function(r,s,a){return this[t].call(this,e,r,s,a)},configurable:!0})})}class ah{constructor(e){e&&this.set(e)}set(e,n,t){const r=this;function s(o,c,d){const _=Zc(c);if(!_)throw new Error("header name must be a non-empty string");const b=Pt.findKey(r,_);(!b||r[b]===void 0||d===!0||d===void 0&&r[b]!==!1)&&(r[b||c]=Df(o))}const a=(o,c)=>Pt.forEach(o,(d,_)=>s(d,_,c));return Pt.isPlainObject(e)||e instanceof this.constructor?a(e,n):Pt.isString(e)&&(e=e.trim())&&!bD(e)?a(vD(e),n):e!=null&&s(n,e,t),this}get(e,n){if(e=Zc(e),e){const t=Pt.findKey(this,e);if(t){const r=this[t];if(!n)return r;if(n===!0)return yD(r);if(Pt.isFunction(n))return n.call(this,r,t);if(Pt.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Zc(e),e){const t=Pt.findKey(this,e);return!!(t&&this[t]!==void 0&&(!n||Ad(this,this[t],t,n)))}return!1}delete(e,n){const t=this;let r=!1;function s(a){if(a=Zc(a),a){const o=Pt.findKey(t,a);o&&(!n||Ad(t,t[o],o,n))&&(delete t[o],r=!0)}}return Pt.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let t=n.length,r=!1;for(;t--;){const s=n[t];(!e||Ad(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,t={};return Pt.forEach(this,(r,s)=>{const a=Pt.findKey(t,s);if(a){n[a]=Df(r),delete n[s];return}const o=e?$D(s):String(s).trim();o!==s&&delete n[s],n[o]=Df(r),t[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Pt.forEach(this,(t,r)=>{t!=null&&t!==!1&&(n[r]=e&&Pt.isArray(t)?t.join(", "):t)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const t=new this(e);return n.forEach(r=>t.set(r)),t}static accessor(e){const t=(this[$1]=this[$1]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=Zc(a);t[o]||(wD(r,a),t[o]=!0)}return Pt.isArray(e)?e.forEach(s):s(e),this}}ah.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Pt.reduceDescriptors(ah.prototype,({value:i},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(t){this[n]=t}}});Pt.freezeMethods(ah);const fo=ah;function Md(i,e){const n=this||Cp,t=e||n,r=fo.from(t.headers);let s=t.data;return Pt.forEach(i,function(o){s=o.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function ib(i){return!!(i&&i.__CANCEL__)}function gu(i,e,n){Gn.call(this,i??"canceled",Gn.ERR_CANCELED,e,n),this.name="CanceledError"}Pt.inherits(gu,Gn,{__CANCEL__:!0});function xD(i,e,n){const t=n.config.validateStatus;!n.status||!t||t(n.status)?i(n):e(new Gn("Request failed with status code "+n.status,[Gn.ERR_BAD_REQUEST,Gn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const kD=Ni.hasStandardBrowserEnv?{write(i,e,n,t,r,s){const a=[i+"="+encodeURIComponent(e)];Pt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Pt.isString(t)&&a.push("path="+t),Pt.isString(r)&&a.push("domain="+r),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function CD(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function SD(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function ob(i,e){return i&&!CD(e)?SD(i,e):e}const TD=Ni.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let t;function r(s){let a=s;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(a){const o=Pt.isString(a)?r(a):a;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}();function ID(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function ED(i,e){i=i||10;const n=new Array(i),t=new Array(i);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),_=t[s];a||(a=d),n[r]=c,t[r]=d;let b=s,x=0;for(;b!==r;)x+=n[b++],b=b%i;if(r=(r+1)%i,r===s&&(s=(s+1)%i),d-a<e)return;const P=_&&d-_;return P?Math.round(x*1e3/P):void 0}}function w1(i,e){let n=0;const t=ED(50,250);return r=>{const s=r.loaded,a=r.lengthComputable?r.total:void 0,o=s-n,c=t(o),d=s<=a;n=s;const _={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:c||void 0,estimated:c&&a&&d?(a-s)/c:void 0,event:r};_[e?"download":"upload"]=!0,i(_)}}const PD=typeof XMLHttpRequest<"u",AD=PD&&function(i){return new Promise(function(n,t){let r=i.data;const s=fo.from(i.headers).normalize();let{responseType:a,withXSRFToken:o}=i,c;function d(){i.cancelToken&&i.cancelToken.unsubscribe(c),i.signal&&i.signal.removeEventListener("abort",c)}let _;if(Pt.isFormData(r)){if(Ni.hasStandardBrowserEnv||Ni.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((_=s.getContentType())!==!1){const[D,...B]=_?_.split(";").map(Z=>Z.trim()).filter(Boolean):[];s.setContentType([D||"multipart/form-data",...B].join("; "))}}let b=new XMLHttpRequest;if(i.auth){const D=i.auth.username||"",B=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";s.set("Authorization","Basic "+btoa(D+":"+B))}const x=ob(i.baseURL,i.url);b.open(i.method.toUpperCase(),tb(x,i.params,i.paramsSerializer),!0),b.timeout=i.timeout;function P(){if(!b)return;const D=fo.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),Z={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:D,config:i,request:b};xD(function(Q){n(Q),d()},function(Q){t(Q),d()},Z),b=null}if("onloadend"in b?b.onloadend=P:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(P)},b.onabort=function(){b&&(t(new Gn("Request aborted",Gn.ECONNABORTED,i,b)),b=null)},b.onerror=function(){t(new Gn("Network Error",Gn.ERR_NETWORK,i,b)),b=null},b.ontimeout=function(){let B=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const Z=i.transitional||nb;i.timeoutErrorMessage&&(B=i.timeoutErrorMessage),t(new Gn(B,Z.clarifyTimeoutError?Gn.ETIMEDOUT:Gn.ECONNABORTED,i,b)),b=null},Ni.hasStandardBrowserEnv&&(o&&Pt.isFunction(o)&&(o=o(i)),o||o!==!1&&TD(x))){const D=i.xsrfHeaderName&&i.xsrfCookieName&&kD.read(i.xsrfCookieName);D&&s.set(i.xsrfHeaderName,D)}r===void 0&&s.setContentType(null),"setRequestHeader"in b&&Pt.forEach(s.toJSON(),function(B,Z){b.setRequestHeader(Z,B)}),Pt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&b.addEventListener("progress",w1(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",w1(i.onUploadProgress)),(i.cancelToken||i.signal)&&(c=D=>{b&&(t(!D||D.type?new gu(null,i,b):D),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(c),i.signal&&(i.signal.aborted?c():i.signal.addEventListener("abort",c)));const L=ID(x);if(L&&Ni.protocols.indexOf(L)===-1){t(new Gn("Unsupported protocol "+L+":",Gn.ERR_BAD_REQUEST,i));return}b.send(r||null)})},Ud={http:tD,xhr:AD};Pt.forEach(Ud,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const x1=i=>`- ${i}`,MD=i=>Pt.isFunction(i)||i===null||i===!1,ab={getAdapter:i=>{i=Pt.isArray(i)?i:[i];const{length:e}=i;let n,t;const r={};for(let s=0;s<e;s++){n=i[s];let a;if(t=n,!MD(n)&&(t=Ud[(a=String(n)).toLowerCase()],t===void 0))throw new Gn(`Unknown adapter '${a}'`);if(t)break;r[a||"#"+s]=t}if(!t){const s=Object.entries(r).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(x1).join(`
`):" "+x1(s[0]):"as no adapter specified";throw new Gn("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return t},adapters:Ud};function Dd(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new gu(null,i)}function k1(i){return Dd(i),i.headers=fo.from(i.headers),i.data=Md.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),ab.getAdapter(i.adapter||Cp.adapter)(i).then(function(t){return Dd(i),t.data=Md.call(i,i.transformResponse,t),t.headers=fo.from(t.headers),t},function(t){return ib(t)||(Dd(i),t&&t.response&&(t.response.data=Md.call(i,i.transformResponse,t.response),t.response.headers=fo.from(t.response.headers))),Promise.reject(t)})}const C1=i=>i instanceof fo?{...i}:i;function $l(i,e){e=e||{};const n={};function t(d,_,b){return Pt.isPlainObject(d)&&Pt.isPlainObject(_)?Pt.merge.call({caseless:b},d,_):Pt.isPlainObject(_)?Pt.merge({},_):Pt.isArray(_)?_.slice():_}function r(d,_,b){if(Pt.isUndefined(_)){if(!Pt.isUndefined(d))return t(void 0,d,b)}else return t(d,_,b)}function s(d,_){if(!Pt.isUndefined(_))return t(void 0,_)}function a(d,_){if(Pt.isUndefined(_)){if(!Pt.isUndefined(d))return t(void 0,d)}else return t(void 0,_)}function o(d,_,b){if(b in e)return t(d,_);if(b in i)return t(void 0,d)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(d,_)=>r(C1(d),C1(_),!0)};return Pt.forEach(Object.keys(Object.assign({},i,e)),function(_){const b=c[_]||r,x=b(i[_],e[_],_);Pt.isUndefined(x)&&b!==o||(n[_]=x)}),n}const lb="1.6.8",Sp={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{Sp[i]=function(t){return typeof t===i||"a"+(e<1?"n ":" ")+i}});const S1={};Sp.transitional=function(e,n,t){function r(s,a){return"[Axios v"+lb+"] Transitional option '"+s+"'"+a+(t?". "+t:"")}return(s,a,o)=>{if(e===!1)throw new Gn(r(a," has been removed"+(n?" in "+n:"")),Gn.ERR_DEPRECATED);return n&&!S1[a]&&(S1[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,o):!0}};function DD(i,e,n){if(typeof i!="object")throw new Gn("options must be an object",Gn.ERR_BAD_OPTION_VALUE);const t=Object.keys(i);let r=t.length;for(;r-- >0;){const s=t[r],a=e[s];if(a){const o=i[s],c=o===void 0||a(o,s,i);if(c!==!0)throw new Gn("option "+s+" must be "+c,Gn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Gn("Unknown option "+s,Gn.ERR_BAD_OPTION)}}const jd={assertOptions:DD,validators:Sp},Oo=jd.validators;class qf{constructor(e){this.defaults=e,this.interceptors={request:new b1,response:new b1}}async request(e,n){try{return await this._request(e,n)}catch(t){if(t instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";t.stack?s&&!String(t.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(t.stack+=`
`+s):t.stack=s}throw t}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=$l(this.defaults,n);const{transitional:t,paramsSerializer:r,headers:s}=n;t!==void 0&&jd.assertOptions(t,{silentJSONParsing:Oo.transitional(Oo.boolean),forcedJSONParsing:Oo.transitional(Oo.boolean),clarifyTimeoutError:Oo.transitional(Oo.boolean)},!1),r!=null&&(Pt.isFunction(r)?n.paramsSerializer={serialize:r}:jd.assertOptions(r,{encode:Oo.function,serialize:Oo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&Pt.merge(s.common,s[n.method]);s&&Pt.forEach(["delete","get","head","post","put","patch","common"],L=>{delete s[L]}),n.headers=fo.concat(a,s);const o=[];let c=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(n)===!1||(c=c&&D.synchronous,o.unshift(D.fulfilled,D.rejected))});const d=[];this.interceptors.response.forEach(function(D){d.push(D.fulfilled,D.rejected)});let _,b=0,x;if(!c){const L=[k1.bind(this),void 0];for(L.unshift.apply(L,o),L.push.apply(L,d),x=L.length,_=Promise.resolve(n);b<x;)_=_.then(L[b++],L[b++]);return _}x=o.length;let P=n;for(b=0;b<x;){const L=o[b++],D=o[b++];try{P=L(P)}catch(B){D.call(this,B);break}}try{_=k1.call(this,P)}catch(L){return Promise.reject(L)}for(b=0,x=d.length;b<x;)_=_.then(d[b++],d[b++]);return _}getUri(e){e=$l(this.defaults,e);const n=ob(e.baseURL,e.url);return tb(n,e.params,e.paramsSerializer)}}Pt.forEach(["delete","get","head","options"],function(e){qf.prototype[e]=function(n,t){return this.request($l(t||{},{method:e,url:n,data:(t||{}).data}))}});Pt.forEach(["post","put","patch"],function(e){function n(t){return function(s,a,o){return this.request($l(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}qf.prototype[e]=n(),qf.prototype[e+"Form"]=n(!0)});const zf=qf;class Tp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const t=this;this.promise.then(r=>{if(!t._listeners)return;let s=t._listeners.length;for(;s-- >0;)t._listeners[s](r);t._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{t.subscribe(o),s=o}).then(r);return a.cancel=function(){t.unsubscribe(s)},a},e(function(s,a,o){t.reason||(t.reason=new gu(s,a,o),n(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Tp(function(r){e=r}),cancel:e}}}const zD=Tp;function LD(i){return function(n){return i.apply(null,n)}}function RD(i){return Pt.isObject(i)&&i.isAxiosError===!0}const qd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qd).forEach(([i,e])=>{qd[e]=i});const OD=qd;function cb(i){const e=new zf(i),n=jy(zf.prototype.request,e);return Pt.extend(n,zf.prototype,e,{allOwnKeys:!0}),Pt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return cb($l(i,r))},n}const Zr=cb(Cp);Zr.Axios=zf;Zr.CanceledError=gu;Zr.CancelToken=zD;Zr.isCancel=ib;Zr.VERSION=lb;Zr.toFormData=oh;Zr.AxiosError=Gn;Zr.Cancel=Zr.CanceledError;Zr.all=function(e){return Promise.all(e)};Zr.spread=LD;Zr.isAxiosError=RD;Zr.mergeConfig=$l;Zr.AxiosHeaders=fo;Zr.formToJSON=i=>sb(Pt.isHTMLForm(i)?new FormData(i):i);Zr.getAdapter=ab.getAdapter;Zr.HttpStatusCode=OD;Zr.default=Zr;const li=Zr;function T1(i,e,n){const t=i.slice();return t[19]=e[n],t}function I1(i,e,n){const t=i.slice();return t[22]=e[n],t}function E1(i,e,n){const t=i.slice();return t[22]=e[n],t}function P1(i,e,n){const t=i.slice();return t[19]=e[n],t}function FD(i){let e,n,t,r,s="Search By Name Or Location",a;return n=new Xd({}),{c(){e=oe("div"),N(n.$$.fragment),t=me(),r=oe("p"),r.textContent=s,this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);j(n.$$.fragment,c),t=_e(c),r=ae(c,"P",{class:!0,"data-svelte-h":!0}),on(r)!=="svelte-1imatsx"&&(r.textContent=s),c.forEach(S),this.h()},h(){ne(r,"class","text-sm"),ne(e,"class","flex gap-2 items-center")},m(o,c){R(o,e,c),V(n,e,null),ue(e,t),ue(e,r),a=!0},p:vt,i(o){a||(T(n.$$.fragment,o),a=!0)},o(o){E(n.$$.fragment,o),a=!1},d(o){o&&S(e),U(n)}}}function BD(i){let e,n="Points Of Interest",t,r,s,a,o,c,d="Locations",_,b,x,P,L='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',D;return r=new bl({props:{$$slots:{default:[HD]},$$scope:{ctx:i}}}),b=new bl({props:{$$slots:{default:[ZD]},$$scope:{ctx:i}}}),{c(){e=oe("p"),e.textContent=n,t=me(),N(r.$$.fragment),s=me(),a=oe("div"),o=me(),c=oe("p"),c.textContent=d,_=me(),N(b.$$.fragment),x=me(),P=oe("div"),P.innerHTML=L,this.h()},l(B){e=ae(B,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-x03xac"&&(e.textContent=n),t=_e(B),j(r.$$.fragment,B),s=_e(B),a=ae(B,"DIV",{class:!0}),we(a).forEach(S),o=_e(B),c=ae(B,"P",{class:!0,"data-svelte-h":!0}),on(c)!=="svelte-wt03ge"&&(c.textContent=d),_=_e(B),j(b.$$.fragment,B),x=_e(B),P=ae(B,"DIV",{class:!0,"data-svelte-h":!0}),on(P)!=="svelte-160hzgv"&&(P.innerHTML=L),this.h()},h(){ne(e,"class","px-4 py-2 font-medium leading-none"),ne(a,"class","divider my-0 mx-4"),ne(c,"class","px-4 py-2 font-medium leading-none"),ne(P,"class","flex w-full justify-end p-2")},m(B,Z){R(B,e,Z),R(B,t,Z),V(r,B,Z),R(B,s,Z),R(B,a,Z),R(B,o,Z),R(B,c,Z),R(B,_,Z),V(b,B,Z),R(B,x,Z),R(B,P,Z),D=!0},p(B,Z){const W={};Z&536870921&&(W.$$scope={dirty:Z,ctx:B}),r.$set(W);const Q={};Z&536870929&&(Q.$$scope={dirty:Z,ctx:B}),b.$set(Q)},i(B){D||(T(r.$$.fragment,B),T(b.$$.fragment,B),D=!0)},o(B){E(r.$$.fragment,B),E(b.$$.fragment,B),D=!1},d(B){B&&(S(e),S(t),S(s),S(a),S(o),S(c),S(_),S(x),S(P)),U(r,B),U(b,B)}}}function ND(i){let e,n="Points Of Interest",t,r,s,a,o='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',c;return r=new bl({props:{$$slots:{default:[KD]},$$scope:{ctx:i}}}),{c(){e=oe("p"),e.textContent=n,t=me(),N(r.$$.fragment),s=me(),a=oe("div"),a.innerHTML=o,this.h()},l(d){e=ae(d,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-x03xac"&&(e.textContent=n),t=_e(d),j(r.$$.fragment,d),s=_e(d),a=ae(d,"DIV",{class:!0,"data-svelte-h":!0}),on(a)!=="svelte-160hzgv"&&(a.innerHTML=o),this.h()},h(){ne(e,"class","px-4 py-2 font-medium leading-none"),ne(a,"class","flex w-full justify-end p-2")},m(d,_){R(d,e,_),R(d,t,_),V(r,d,_),R(d,s,_),R(d,a,_),c=!0},p(d,_){const b={};_&536870921&&(b.$$scope={dirty:_,ctx:d}),r.$set(b)},i(d){c||(T(r.$$.fragment,d),c=!0)},o(d){E(r.$$.fragment,d),c=!1},d(d){d&&(S(e),S(t),S(s),S(a)),U(r,d)}}}function VD(i){let e,n="Locations",t,r,s,a,o='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',c;return r=new bl({props:{$$slots:{default:[JD]},$$scope:{ctx:i}}}),{c(){e=oe("p"),e.textContent=n,t=me(),N(r.$$.fragment),s=me(),a=oe("div"),a.innerHTML=o,this.h()},l(d){e=ae(d,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-wt03ge"&&(e.textContent=n),t=_e(d),j(r.$$.fragment,d),s=_e(d),a=ae(d,"DIV",{class:!0,"data-svelte-h":!0}),on(a)!=="svelte-160hzgv"&&(a.innerHTML=o),this.h()},h(){ne(e,"class","px-4 py-2 font-medium leading-none"),ne(a,"class","flex w-full justify-end p-2")},m(d,_){R(d,e,_),R(d,t,_),V(r,d,_),R(d,s,_),R(d,a,_),c=!0},p(d,_){const b={};_&536870929&&(b.$$scope={dirty:_,ctx:d}),r.$set(b)},i(d){c||(T(r.$$.fragment,d),c=!0)},o(d){E(r.$$.fragment,d),c=!1},d(d){d&&(S(e),S(t),S(s),S(a)),U(r,d)}}}function UD(i){let e,n;return e=new bp({props:{class:"h-[300px] flex items-center justify-center",$$slots:{default:[YD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function jD(i){let e,n;return e=new Uy({props:{$$slots:{default:[QD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function A1(i){let e,n,t;return n=new Cl({props:{class:"h-3 w-3 text-primary"}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","flex gap-2")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function qD(i){let e,n,t,r=i[22].name+"",s,a,o,c=Math.round(i[8](i[22].lngLat,i[0].getCenter())/100)/10+"",d,_,b,x,P,L,D,B=i[22].features.join(", ")+"",Z,W,Q,ve,re,ce,ge,le,G=i[22].likes+"",ee,fe,$e,he,ke,Ue,Ie=i[22].comments.length+"",nt,Xe,ct,mt=i[22].isFavourite&&A1();return ce=new Jd({props:{class:"h-3 w-3"}}),he=new ry({props:{class:"h-3 w-3"}}),{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=je(r),a=me(),o=oe("p"),d=je(c),_=je("Km"),b=me(),x=oe("div"),P=oe("div"),L=oe("p"),D=je("Features:"),Z=je(B),W=me(),Q=oe("div"),mt&&mt.c(),ve=me(),re=oe("div"),N(ce.$$.fragment),ge=me(),le=oe("p"),ee=je(G),fe=me(),$e=oe("div"),N(he.$$.fragment),ke=me(),Ue=oe("p"),nt=je(Ie),Xe=me(),this.h()},l(Dt){e=ae(Dt,"DIV",{class:!0});var zt=we(e);n=ae(zt,"DIV",{class:!0});var Yt=we(n);t=ae(Yt,"P",{});var mn=we(t);s=qe(mn,r),mn.forEach(S),a=_e(Yt),o=ae(Yt,"P",{class:!0});var cn=we(o);d=qe(cn,c),_=qe(cn,"Km"),cn.forEach(S),Yt.forEach(S),b=_e(zt),x=ae(zt,"DIV",{class:!0});var It=we(x);P=ae(It,"DIV",{class:!0});var At=we(P);L=ae(At,"P",{class:!0});var un=we(L);D=qe(un,"Features:"),Z=qe(un,B),un.forEach(S),At.forEach(S),W=_e(It),Q=ae(It,"DIV",{class:!0});var fn=we(Q);mt&&mt.l(fn),ve=_e(fn),re=ae(fn,"DIV",{class:!0});var ot=we(re);j(ce.$$.fragment,ot),ge=_e(ot),le=ae(ot,"P",{class:!0});var qt=we(le);ee=qe(qt,G),qt.forEach(S),ot.forEach(S),fe=_e(fn),$e=ae(fn,"DIV",{class:!0});var wt=we($e);j(he.$$.fragment,wt),ke=_e(wt),Ue=ae(wt,"P",{class:!0});var xt=we(Ue);nt=qe(xt,Ie),xt.forEach(S),wt.forEach(S),fn.forEach(S),It.forEach(S),zt.forEach(S),Xe=_e(Dt),this.h()},h(){ne(o,"class","text-sm text-muted-foreground"),ne(n,"class","flex justify-between gap-4"),ne(L,"class","text-xs text-muted-foreground"),ne(P,"class","flex"),ne(le,"class","text-muted-foreground"),ne(re,"class","flex gap-2"),ne(Ue,"class","text-muted-foreground"),ne($e,"class","flex gap-2"),ne(Q,"class","flex gap-4"),ne(x,"class","flex justify-between gap-2"),ne(e,"class","flex flex-col w-full gap-2")},m(Dt,zt){R(Dt,e,zt),ue(e,n),ue(n,t),ue(t,s),ue(n,a),ue(n,o),ue(o,d),ue(o,_),ue(e,b),ue(e,x),ue(x,P),ue(P,L),ue(L,D),ue(L,Z),ue(x,W),ue(x,Q),mt&&mt.m(Q,null),ue(Q,ve),ue(Q,re),V(ce,re,null),ue(re,ge),ue(re,le),ue(le,ee),ue(Q,fe),ue(Q,$e),V(he,$e,null),ue($e,ke),ue($e,Ue),ue(Ue,nt),R(Dt,Xe,zt),ct=!0},p(Dt,zt){(!ct||zt&8)&&r!==(r=Dt[22].name+"")&&Ft(s,r),(!ct||zt&9)&&c!==(c=Math.round(Dt[8](Dt[22].lngLat,Dt[0].getCenter())/100)/10+"")&&Ft(d,c),(!ct||zt&8)&&B!==(B=Dt[22].features.join(", ")+"")&&Ft(Z,B),Dt[22].isFavourite?mt?zt&8&&T(mt,1):(mt=A1(),mt.c(),T(mt,1),mt.m(Q,ve)):mt&&(dt(),E(mt,1,1,()=>{mt=null}),pt()),(!ct||zt&8)&&G!==(G=Dt[22].likes+"")&&Ft(ee,G),(!ct||zt&8)&&Ie!==(Ie=Dt[22].comments.length+"")&&Ft(nt,Ie)},i(Dt){ct||(T(mt),T(ce.$$.fragment,Dt),T(he.$$.fragment,Dt),ct=!0)},o(Dt){E(mt),E(ce.$$.fragment,Dt),E(he.$$.fragment,Dt),ct=!1},d(Dt){Dt&&(S(e),S(Xe)),mt&&mt.d(),U(ce),U(he)}}}function M1(i,e){let n,t,r;return t=new El({props:{value:e[22].id.toString(),onSelect:e[7],class:"cursor-pointer",$$slots:{default:[qD]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&8&&(o.value=e[22].id.toString()),a&536870921&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function HD(i){let e=[],n=new Map,t,r,s=Jt(i[3]);const a=o=>o[22].id;for(let o=0;o<s.length;o+=1){let c=I1(i,s,o),d=a(c);n.set(d,e[o]=M1(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&393&&(s=Jt(o[3]),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,M1,t,I1),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function D1(i){let e,n=i[19].address.label+"",t;return{c(){e=oe("p"),t=je(n),this.h()},l(r){e=ae(r,"P",{class:!0});var s=we(e);t=qe(s,n),s.forEach(S),this.h()},h(){ne(e,"class","text-xs text-muted-foreground")},m(r,s){R(r,e,s),ue(e,t)},p(r,s){s&16&&n!==(n=r[19].address.label+"")&&Ft(t,n)},d(r){r&&S(e)}}}function GD(i){let e,n,t,r=i[19].title+"",s,a,o,c=Math.round(i[8](i[19].position,i[0].getCenter())/100)/10+"",d,_,b,x,P=i[19].address.label!==i[19].title&&D1(i);return{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=je(r),a=me(),o=oe("p"),d=je(c),_=je("Km"),b=me(),P&&P.c(),x=me(),this.h()},l(L){e=ae(L,"DIV",{class:!0});var D=we(e);n=ae(D,"DIV",{class:!0});var B=we(n);t=ae(B,"P",{});var Z=we(t);s=qe(Z,r),Z.forEach(S),a=_e(B),o=ae(B,"P",{class:!0});var W=we(o);d=qe(W,c),_=qe(W,"Km"),W.forEach(S),B.forEach(S),b=_e(D),P&&P.l(D),D.forEach(S),x=_e(L),this.h()},h(){ne(o,"class","text-sm text-muted-foreground"),ne(n,"class","flex justify-between gap-4"),ne(e,"class","flex flex-col w-full gap-0.5")},m(L,D){R(L,e,D),ue(e,n),ue(n,t),ue(t,s),ue(n,a),ue(n,o),ue(o,d),ue(o,_),ue(e,b),P&&P.m(e,null),R(L,x,D)},p(L,D){D&16&&r!==(r=L[19].title+"")&&Ft(s,r),D&17&&c!==(c=Math.round(L[8](L[19].position,L[0].getCenter())/100)/10+"")&&Ft(d,c),L[19].address.label!==L[19].title?P?P.p(L,D):(P=D1(L),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},d(L){L&&(S(e),S(x)),P&&P.d()}}}function z1(i,e){let n,t,r;return t=new El({props:{value:e[19].id,onSelect:e[6],class:"cursor-pointer",$$slots:{default:[GD]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.value=e[19].id),a&536870929&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function ZD(i){let e=[],n=new Map,t,r,s=Jt(i[4]);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let c=T1(i,s,o),d=a(c);n.set(d,e[o]=z1(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&337&&(s=Jt(o[4]),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,z1,t,T1),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function L1(i){let e,n,t;return n=new Cl({props:{class:"h-3 w-3 text-primary"}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","flex gap-2")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function WD(i){let e,n,t,r=i[22].name+"",s,a,o,c=Math.round(i[8](i[22].lngLat,i[0].getCenter())/100)/10+"",d,_,b,x,P,L,D,B=i[22].features.join(", ")+"",Z,W,Q,ve,re,ce,ge,le,G=i[22].likes+"",ee,fe,$e,he,ke,Ue,Ie=i[22].comments.length+"",nt,Xe,ct,mt=i[22].isFavourite&&L1();return ce=new Jd({props:{class:"h-3 w-3"}}),he=new ry({props:{class:"h-3 w-3"}}),{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=je(r),a=me(),o=oe("p"),d=je(c),_=je("Km"),b=me(),x=oe("div"),P=oe("div"),L=oe("p"),D=je("Features:"),Z=je(B),W=me(),Q=oe("div"),mt&&mt.c(),ve=me(),re=oe("div"),N(ce.$$.fragment),ge=me(),le=oe("p"),ee=je(G),fe=me(),$e=oe("div"),N(he.$$.fragment),ke=me(),Ue=oe("p"),nt=je(Ie),Xe=me(),this.h()},l(Dt){e=ae(Dt,"DIV",{class:!0});var zt=we(e);n=ae(zt,"DIV",{class:!0});var Yt=we(n);t=ae(Yt,"P",{});var mn=we(t);s=qe(mn,r),mn.forEach(S),a=_e(Yt),o=ae(Yt,"P",{class:!0});var cn=we(o);d=qe(cn,c),_=qe(cn,"Km"),cn.forEach(S),Yt.forEach(S),b=_e(zt),x=ae(zt,"DIV",{class:!0});var It=we(x);P=ae(It,"DIV",{class:!0});var At=we(P);L=ae(At,"P",{class:!0});var un=we(L);D=qe(un,"Features:"),Z=qe(un,B),un.forEach(S),At.forEach(S),W=_e(It),Q=ae(It,"DIV",{class:!0});var fn=we(Q);mt&&mt.l(fn),ve=_e(fn),re=ae(fn,"DIV",{class:!0});var ot=we(re);j(ce.$$.fragment,ot),ge=_e(ot),le=ae(ot,"P",{class:!0});var qt=we(le);ee=qe(qt,G),qt.forEach(S),ot.forEach(S),fe=_e(fn),$e=ae(fn,"DIV",{class:!0});var wt=we($e);j(he.$$.fragment,wt),ke=_e(wt),Ue=ae(wt,"P",{class:!0});var xt=we(Ue);nt=qe(xt,Ie),xt.forEach(S),wt.forEach(S),fn.forEach(S),It.forEach(S),zt.forEach(S),Xe=_e(Dt),this.h()},h(){ne(o,"class","text-sm text-muted-foreground"),ne(n,"class","flex justify-between gap-4"),ne(L,"class","text-xs text-muted-foreground"),ne(P,"class","flex"),ne(le,"class","text-muted-foreground"),ne(re,"class","flex gap-2"),ne(Ue,"class","text-muted-foreground"),ne($e,"class","flex gap-2"),ne(Q,"class","flex gap-4"),ne(x,"class","flex justify-between gap-2"),ne(e,"class","flex flex-col w-full gap-2")},m(Dt,zt){R(Dt,e,zt),ue(e,n),ue(n,t),ue(t,s),ue(n,a),ue(n,o),ue(o,d),ue(o,_),ue(e,b),ue(e,x),ue(x,P),ue(P,L),ue(L,D),ue(L,Z),ue(x,W),ue(x,Q),mt&&mt.m(Q,null),ue(Q,ve),ue(Q,re),V(ce,re,null),ue(re,ge),ue(re,le),ue(le,ee),ue(Q,fe),ue(Q,$e),V(he,$e,null),ue($e,ke),ue($e,Ue),ue(Ue,nt),R(Dt,Xe,zt),ct=!0},p(Dt,zt){(!ct||zt&8)&&r!==(r=Dt[22].name+"")&&Ft(s,r),(!ct||zt&9)&&c!==(c=Math.round(Dt[8](Dt[22].lngLat,Dt[0].getCenter())/100)/10+"")&&Ft(d,c),(!ct||zt&8)&&B!==(B=Dt[22].features.join(", ")+"")&&Ft(Z,B),Dt[22].isFavourite?mt?zt&8&&T(mt,1):(mt=L1(),mt.c(),T(mt,1),mt.m(Q,ve)):mt&&(dt(),E(mt,1,1,()=>{mt=null}),pt()),(!ct||zt&8)&&G!==(G=Dt[22].likes+"")&&Ft(ee,G),(!ct||zt&8)&&Ie!==(Ie=Dt[22].comments.length+"")&&Ft(nt,Ie)},i(Dt){ct||(T(mt),T(ce.$$.fragment,Dt),T(he.$$.fragment,Dt),ct=!0)},o(Dt){E(mt),E(ce.$$.fragment,Dt),E(he.$$.fragment,Dt),ct=!1},d(Dt){Dt&&(S(e),S(Xe)),mt&&mt.d(),U(ce),U(he)}}}function R1(i,e){let n,t,r;return t=new El({props:{value:e[22].id.toString(),onSelect:e[7],class:"cursor-pointer",$$slots:{default:[WD]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&8&&(o.value=e[22].id.toString()),a&536870921&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function KD(i){let e=[],n=new Map,t,r,s=Jt(i[3]);const a=o=>o[22].id;for(let o=0;o<s.length;o+=1){let c=E1(i,s,o),d=a(c);n.set(d,e[o]=R1(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&393&&(s=Jt(o[3]),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,R1,t,E1),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function O1(i){let e,n=i[19].address.label+"",t;return{c(){e=oe("p"),t=je(n),this.h()},l(r){e=ae(r,"P",{class:!0});var s=we(e);t=qe(s,n),s.forEach(S),this.h()},h(){ne(e,"class","text-xs text-muted-foreground")},m(r,s){R(r,e,s),ue(e,t)},p(r,s){s&16&&n!==(n=r[19].address.label+"")&&Ft(t,n)},d(r){r&&S(e)}}}function XD(i){let e,n,t,r=i[19].title+"",s,a,o,c=Math.round(i[8](i[19].position,i[0].getCenter())/100)/10+"",d,_,b,x,P=i[19].address.label!==i[19].title&&O1(i);return{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=je(r),a=me(),o=oe("p"),d=je(c),_=je("Km"),b=me(),P&&P.c(),x=me(),this.h()},l(L){e=ae(L,"DIV",{class:!0});var D=we(e);n=ae(D,"DIV",{class:!0});var B=we(n);t=ae(B,"P",{});var Z=we(t);s=qe(Z,r),Z.forEach(S),a=_e(B),o=ae(B,"P",{class:!0});var W=we(o);d=qe(W,c),_=qe(W,"Km"),W.forEach(S),B.forEach(S),b=_e(D),P&&P.l(D),D.forEach(S),x=_e(L),this.h()},h(){ne(o,"class","text-sm text-muted-foreground"),ne(n,"class","flex justify-between gap-4"),ne(e,"class","flex flex-col w-full gap-0.5")},m(L,D){R(L,e,D),ue(e,n),ue(n,t),ue(t,s),ue(n,a),ue(n,o),ue(o,d),ue(o,_),ue(e,b),P&&P.m(e,null),R(L,x,D)},p(L,D){D&16&&r!==(r=L[19].title+"")&&Ft(s,r),D&17&&c!==(c=Math.round(L[8](L[19].position,L[0].getCenter())/100)/10+"")&&Ft(d,c),L[19].address.label!==L[19].title?P?P.p(L,D):(P=O1(L),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},d(L){L&&(S(e),S(x)),P&&P.d()}}}function F1(i,e){let n,t,r;return t=new El({props:{value:e[19].id,onSelect:e[6],class:"cursor-pointer",$$slots:{default:[XD]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.value=e[19].id),a&536870929&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function JD(i){let e=[],n=new Map,t,r,s=Jt(i[4]);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let c=P1(i,s,o),d=a(c);n.set(d,e[o]=F1(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&337&&(s=Jt(o[4]),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,F1,t,P1),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function YD(i){let e;return{c(){e=je("No results found.")},l(n){e=qe(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function QD(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-11244tn"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","h-[300px] w-full flex items-center justify-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function e6(i){let e,n,t,r;const s=[jD,UD,VD,ND,BD],a=[];function o(c,d){return c[5]?0:c[4].length===0&&c[3].length===0?1:c[3].length===0?2:c[4].length===0?3:4}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function t6(i){let e,n,t,r,s;function a(c){i[12](c)}let o={placeholder:"Search by POI name or location"};return i[1]!==void 0&&(o.value=i[1]),e=new $p({props:o}),Vt.push(()=>$n(e,"value",a)),r=new Vy({props:{class:"my-2",$$slots:{default:[e6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),t=me(),N(r.$$.fragment)},l(c){j(e.$$.fragment,c),t=_e(c),j(r.$$.fragment,c)},m(c,d){V(e,c,d),R(c,t,d),V(r,c,d),s=!0},p(c,d){const _={};!n&&d&2&&(n=!0,_.value=c[1],bn(()=>n=!1)),e.$set(_);const b={};d&536870969&&(b.$$scope={dirty:d,ctx:c}),r.$set(b)},i(c){s||(T(e.$$.fragment,c),T(r.$$.fragment,c),s=!0)},o(c){E(e.$$.fragment,c),E(r.$$.fragment,c),s=!1},d(c){c&&S(t),U(e,c),U(r,c)}}}function n6(i){let e,n,t,r,s;e=new Nn({props:{class:"text-secondary-foreground w-full sm:max-w-md bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[FD]},$$scope:{ctx:i}}}),e.$on("click",i[11]);function a(c){i[13](c)}let o={shouldFilter:!1,loop:!0,$$slots:{default:[t6]},$$scope:{ctx:i}};return i[2]!==void 0&&(o.open=i[2]),t=new Ny({props:o}),Vt.push(()=>$n(t,"open",a)),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(c){j(e.$$.fragment,c),n=_e(c),j(t.$$.fragment,c)},m(c,d){V(e,c,d),R(c,n,d),V(t,c,d),s=!0},p(c,[d]){const _={};d&536870912&&(_.$$scope={dirty:d,ctx:c}),e.$set(_);const b={};d&536870971&&(b.$$scope={dirty:d,ctx:c}),!r&&d&4&&(r=!0,b.open=c[2],bn(()=>r=!1)),t.$set(b)},i(c){s||(T(e.$$.fragment,c),T(t.$$.fragment,c),s=!0)},o(c){E(e.$$.fragment,c),E(t.$$.fragment,c),s=!1},d(c){c&&S(n),U(e,c),U(t,c)}}}const r6=30;function s6(i,e,n){let t,{map:r}=e;const s=wl();let a=!1,o=!1,c,d=!1,_=li.CancelToken.source(),b=li.CancelToken.source(),x=[];const P=async()=>{n(9,a=!0),_&&_.cancel(),_=li.CancelToken.source();const ce=_.token,ge=new URLSearchParams({name:c}),le=await li.get(`/api/poi/search?${ge.toString()}`,{cancelToken:ce}).catch(G=>G);if(le!=null&&le.data){let G=le.data;G=G.map(ee=>{const fe=Pa.decode(ee);return If(fe)?fe.right:{error:!0,message:"Invalid POI object received from API: "+fe.left}}),G=G.filter(ee=>"error"in ee&&ee.error?(console.error(ee.message),!1):!0),n(3,x=G)}n(9,a=!1)};let L=[];const D=async()=>{var ee;n(10,o=!0),b&&b.cancel(),b=li.CancelToken.source();const ce=b.token,ge=r.getCenter(),le=new URLSearchParams({q:c,at:`${ge.lat},${ge.lng}`,limit:r6.toString(),lang:"en",apiKey:UP}),G=await li.get(`https://autosuggest.search.hereapi.com/v1/autosuggest?${le.toString()}`,{cancelToken:ce}).catch(fe=>fe);if((ee=G==null?void 0:G.data)!=null&&ee.items){const fe=G.data.items;n(4,L=fe.filter($e=>{var he;return $e.id!==void 0&&$e.title!==void 0&&((he=$e.address)==null?void 0:he.label)!==void 0&&$e.position!==void 0&&$e.distance!==void 0}))}n(10,o=!1)},B=ce=>{const ge=L.find(({id:le})=>le===ce);ge&&r.flyTo({center:{lat:ge.position.lat,lng:ge.position.lng},zoom:Math.min(16,Math.max(14,r.getZoom())),padding:{top:300}}),n(2,d=!1)},Z=ce=>{const ge=x.find(({id:le})=>le===parseInt(ce));ge&&(r.flyTo({center:ge.lngLat,zoom:Math.min(16,Math.max(14,r.getZoom())),padding:{top:300}}),s("poiSelected",parseInt(ce))),n(2,d=!1)},W=(ce,ge)=>{const G=ce.lat*Math.PI/180,ee=ge.lat*Math.PI/180,fe=(ge.lat-ce.lat)*Math.PI/180,$e=(ge.lng-ce.lng)*Math.PI/180,he=Math.sin(fe/2)*Math.sin(fe/2)+Math.cos(G)*Math.cos(ee)*Math.sin($e/2)*Math.sin($e/2);return 6371e3*(2*Math.atan2(Math.sqrt(he),Math.sqrt(1-he)))},Q=()=>n(2,d=!0);function ve(ce){c=ce,n(1,c)}function re(ce){d=ce,n(2,d)}return i.$$set=ce=>{"map"in ce&&n(0,r=ce.map)},i.$$.update=()=>{i.$$.dirty&1536&&n(5,t=a||o),i.$$.dirty&2&&c!=null&&c.trim()&&(P(),D())},[r,c,d,x,L,t,B,Z,W,a,o,Q,ve,re]}class i6 extends st{constructor(e){super(),it(this,e,s6,n6,rt,{map:0})}}function o6(i){let e,n;return e=new i6({props:{map:i[4]}}),e.$on("poiSelected",i[9]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.map=t[4]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function a6(i){let e,n="Search By POI Name Or Location";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1fty8wh"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function l6(i){let e,n,t,r;return e=new jo({props:{class:"w-full sm:max-w-md",$$slots:{default:[o6]},$$scope:{ctx:i}}}),t=new qo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[a6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108880&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&67108864&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function c6(i){let e,n,t,r;function s(c){i[12](c)}function a(c){i[13](c)}let o={title:"POI Features",poiFeatureOptions:i[3]};return i[1]!==void 0&&(o.filterValues=i[1]),i[6]!==void 0&&(o.forceClosePopover=i[6]),e=new V5({props:o}),Vt.push(()=>$n(e,"filterValues",s)),Vt.push(()=>$n(e,"forceClosePopover",a)),{c(){N(e.$$.fragment)},l(c){j(e.$$.fragment,c)},m(c,d){V(e,c,d),r=!0},p(c,d){const _={};d&8&&(_.poiFeatureOptions=c[3]),!n&&d&2&&(n=!0,_.filterValues=c[1],bn(()=>n=!1)),!t&&d&64&&(t=!0,_.forceClosePopover=c[6],bn(()=>t=!1)),e.$set(_)},i(c){r||(T(e.$$.fragment,c),r=!0)},o(c){E(e.$$.fragment,c),r=!1},d(c){U(e,c)}}}function u6(i){let e,n="Filter By POI Features";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1oglnlj"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function f6(i){let e,n,t,r;return e=new jo({props:{$$slots:{default:[c6]},$$scope:{ctx:i}}}),t=new qo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[u6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108938&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&67108864&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function B1(i){let e,n,t;function r(a){i[18](a)}let s={openDelay:0,closeDelay:0,onOutsideClick:i[17],$$slots:{default:[m6]},$$scope:{ctx:i}};return i[5][2]!==void 0&&(s.open=i[5][2]),e=new No({props:s}),Vt.push(()=>$n(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const c={};o&192&&(c.onOutsideClick=a[17]),o&67108866&&(c.$$scope={dirty:o,ctx:a}),!n&&o&32&&(n=!0,c.open=a[5][2],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function h6(i){let e,n;return e=new l2({}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function d6(i){let e,n;return e=new cp({props:{class:"bg-background",onPressedChange:i[16],$$slots:{default:[h6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.onPressedChange=t[16]),r&67108864&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function p6(i){let e,n="Clear POI Features Filter";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-r3d05h"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function m6(i){let e,n,t,r;return e=new jo({props:{$$slots:{default:[d6]},$$scope:{ctx:i}}}),t=new qo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[p6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108866&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&67108864&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function _6(i){let e,n;return e=new Cl({}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function g6(i){let e,n,t;function r(a){i[19](a)}let s={"aria-label":"Show Favourites Only",class:"text-secondary-foreground hover:text-accent-foreground data-[state=off]:hover:bg-accent data-[state=off]:bg-background data-[state=on]:bg-primary data-[state=on]:hover:brightness-90 data-[state=on]:text-error-content",$$slots:{default:[_6]},$$scope:{ctx:i}};return i[2]!==void 0&&(s.pressed=i[2]),e=new cp({props:s}),Vt.push(()=>$n(e,"pressed",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const c={};o&67108864&&(c.$$scope={dirty:o,ctx:a}),!n&&o&4&&(n=!0,c.pressed=a[2],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function v6(i){let e,n="Show Favourites Only";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-14grtso"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function y6(i){let e,n,t,r;return e=new jo({props:{$$slots:{default:[g6]},$$scope:{ctx:i}}}),t=new qo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[v6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108868&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&67108864&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function b6(i){let e,n,t,r;function s(c){i[22](c)}function a(c){i[23](c)}let o={};return i[0]!==void 0&&(o.selectedMapLayer=i[0]),i[7]!==void 0&&(o.forceClosePopover=i[7]),e=new bM({props:o}),Vt.push(()=>$n(e,"selectedMapLayer",s)),Vt.push(()=>$n(e,"forceClosePopover",a)),{c(){N(e.$$.fragment)},l(c){j(e.$$.fragment,c)},m(c,d){V(e,c,d),r=!0},p(c,d){const _={};!n&&d&1&&(n=!0,_.selectedMapLayer=c[0],bn(()=>n=!1)),!t&&d&128&&(t=!0,_.forceClosePopover=c[7],bn(()=>t=!1)),e.$set(_)},i(c){r||(T(e.$$.fragment,c),r=!0)},o(c){E(e.$$.fragment,c),r=!1},d(c){U(e,c)}}}function $6(i){let e,n="Change Map Layer";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1habla0"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function w6(i){let e,n,t,r;return e=new jo({props:{$$slots:{default:[b6]},$$scope:{ctx:i}}}),t=new qo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[$6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108993&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&67108864&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function x6(i){let e,n,t,r,s,a,o,c,d,_,b,x,P,L,D,B;function Z(ee){i[11](ee)}let W={openDelay:0,closeDelay:0,onOutsideClick:i[10],$$slots:{default:[l6]},$$scope:{ctx:i}};i[5][0]!==void 0&&(W.open=i[5][0]),n=new No({props:W}),Vt.push(()=>$n(n,"open",Z));function Q(ee){i[15](ee)}let ve={openDelay:0,closeDelay:0,onOutsideClick:i[14],$$slots:{default:[f6]},$$scope:{ctx:i}};i[5][1]!==void 0&&(ve.open=i[5][1]),o=new No({props:ve}),Vt.push(()=>$n(o,"open",Q));let re=i[1].length>0&&B1(i);function ce(ee){i[21](ee)}let ge={openDelay:0,closeDelay:0,onOutsideClick:i[20],$$slots:{default:[y6]},$$scope:{ctx:i}};i[5][3]!==void 0&&(ge.open=i[5][3]),b=new No({props:ge}),Vt.push(()=>$n(b,"open",ce));function le(ee){i[25](ee)}let G={openDelay:0,closeDelay:0,onOutsideClick:i[24],$$slots:{default:[w6]},$$scope:{ctx:i}};return i[5][4]!==void 0&&(G.open=i[5][4]),L=new No({props:G}),Vt.push(()=>$n(L,"open",le)),{c(){e=oe("div"),N(n.$$.fragment),r=me(),s=oe("div"),a=oe("div"),N(o.$$.fragment),d=me(),re&&re.c(),_=me(),N(b.$$.fragment),P=me(),N(L.$$.fragment),this.h()},l(ee){e=ae(ee,"DIV",{class:!0});var fe=we(e);j(n.$$.fragment,fe),r=_e(fe),s=ae(fe,"DIV",{class:!0});var $e=we(s);a=ae($e,"DIV",{class:!0});var he=we(a);j(o.$$.fragment,he),d=_e(he),re&&re.l(he),_=_e(he),j(b.$$.fragment,he),he.forEach(S),P=_e($e),j(L.$$.fragment,$e),$e.forEach(S),fe.forEach(S),this.h()},h(){ne(a,"class","flex gap-2"),ne(s,"class","flex justify-between gap-2 grow max-sm:w-full max-sm:overflow-x-auto"),ne(e,"class","flex gap-2 max-sm:flex-col w-full sm:overflow-x-auto")},m(ee,fe){R(ee,e,fe),V(n,e,null),ue(e,r),ue(e,s),ue(s,a),V(o,a,null),ue(a,d),re&&re.m(a,null),ue(a,_),V(b,a,null),ue(s,P),V(L,s,null),B=!0},p(ee,[fe]){const $e={};fe&192&&($e.onOutsideClick=ee[10]),fe&67108880&&($e.$$scope={dirty:fe,ctx:ee}),!t&&fe&32&&(t=!0,$e.open=ee[5][0],bn(()=>t=!1)),n.$set($e);const he={};fe&128&&(he.onOutsideClick=ee[14]),fe&67108938&&(he.$$scope={dirty:fe,ctx:ee}),!c&&fe&32&&(c=!0,he.open=ee[5][1],bn(()=>c=!1)),o.$set(he),ee[1].length>0?re?(re.p(ee,fe),fe&2&&T(re,1)):(re=B1(ee),re.c(),T(re,1),re.m(a,_)):re&&(dt(),E(re,1,1,()=>{re=null}),pt());const ke={};fe&192&&(ke.onOutsideClick=ee[20]),fe&67108868&&(ke.$$scope={dirty:fe,ctx:ee}),!x&&fe&32&&(x=!0,ke.open=ee[5][3],bn(()=>x=!1)),b.$set(ke);const Ue={};fe&64&&(Ue.onOutsideClick=ee[24]),fe&67108993&&(Ue.$$scope={dirty:fe,ctx:ee}),!D&&fe&32&&(D=!0,Ue.open=ee[5][4],bn(()=>D=!1)),L.$set(Ue)},i(ee){B||(T(n.$$.fragment,ee),T(o.$$.fragment,ee),T(re),T(b.$$.fragment,ee),T(L.$$.fragment,ee),B=!0)},o(ee){E(n.$$.fragment,ee),E(o.$$.fragment,ee),E(re),E(b.$$.fragment,ee),E(L.$$.fragment,ee),B=!1},d(ee){ee&&S(e),U(n),U(o),re&&re.d(),U(b),U(L)}}}function k6(i,e,n){let{selectedMapLayer:t}=e,{poiFeatureOptions:r}=e,{poiFeaturesFilter:s}=e,{onlyShowFavourites:a}=e,{map:o}=e,c=[!1,!1,!1,!1,!1],d,_;const b=()=>{n(5,c=new Array(c.length).fill(!1))};function x(he){Ht.call(this,i,he)}const P=he=>{b(),d(),_(),he.target.focus()};function L(he){i.$$.not_equal(c[0],he)&&(c[0]=he,n(5,c))}function D(he){s=he,n(1,s)}function B(he){d=he,n(6,d)}const Z=he=>{b(),_(),he.target.focus()};function W(he){i.$$.not_equal(c[1],he)&&(c[1]=he,n(5,c))}const Q=he=>{he&&n(1,s=[])},ve=he=>{b(),d(),_(),he.target.focus()};function re(he){i.$$.not_equal(c[2],he)&&(c[2]=he,n(5,c))}function ce(he){a=he,n(2,a)}const ge=he=>{b(),d(),_(),he.target.focus()};function le(he){i.$$.not_equal(c[3],he)&&(c[3]=he,n(5,c))}function G(he){t=he,n(0,t)}function ee(he){_=he,n(7,_)}const fe=he=>{b(),d(),he.target.focus()};function $e(he){i.$$.not_equal(c[4],he)&&(c[4]=he,n(5,c))}return i.$$set=he=>{"selectedMapLayer"in he&&n(0,t=he.selectedMapLayer),"poiFeatureOptions"in he&&n(3,r=he.poiFeatureOptions),"poiFeaturesFilter"in he&&n(1,s=he.poiFeaturesFilter),"onlyShowFavourites"in he&&n(2,a=he.onlyShowFavourites),"map"in he&&n(4,o=he.map)},[t,s,a,r,o,c,d,_,b,x,P,L,D,B,Z,W,Q,ve,re,ce,ge,le,G,ee,fe,$e]}class C6 extends st{constructor(e){super(),it(this,e,k6,x6,rt,{selectedMapLayer:0,poiFeatureOptions:3,poiFeaturesFilter:1,onlyShowFavourites:2,map:4})}}function N1(i,e,n){const t=i.slice();return t[29]=e[n],t}function V1(i,e,n){const t=i.slice();return t[32]=e[n],t[34]=n,t}function U1(i){let e,n,t;function r(a){i[26](a)}let s={onValueChange:i[25],$$slots:{default:[D6]},$$scope:{ctx:i}};return i[10]!==void 0&&(s.value=i[10]),e=new wy({props:s}),Vt.push(()=>$n(e,"value",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const c={};o[0]&2561&&(c.onValueChange=a[25]),o[0]&128|o[1]&16&&(c.$$scope={dirty:o,ctx:a}),!n&&o[0]&1024&&(n=!0,c.value=a[10],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function S6(i){let e,n=i[7].length>1?"s":"",t,r;return{c(){e=je("Check-in to nearby POI"),t=je(n),r=je(":")},l(s){e=qe(s,"Check-in to nearby POI"),t=qe(s,n),r=qe(s,":")},m(s,a){R(s,e,a),R(s,t,a),R(s,r,a)},p(s,a){a[0]&128&&n!==(n=s[7].length>1?"s":"")&&Ft(t,n)},d(s){s&&(S(e),S(t),S(r))}}}function T6(i){let e,n=i[32]+"",t;return{c(){e=je(""),t=je(n)},l(r){e=qe(r,""),t=qe(r,n)},m(r,s){R(r,e,s),R(r,t,s)},p(r,s){s[0]&128&&n!==(n=r[32]+"")&&Ft(t,n)},d(r){r&&(S(e),S(t))}}}function I6(i){let e=i[32]+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&128&&e!==(e=t[32]+"")&&Ft(n,e)},d(t){t&&S(n)}}}function j1(i,e){let n,t;function r(o,c){return o[34]===0?I6:T6}let s=r(e),a=s(e);return{key:i,first:null,c(){n=Be(),a.c(),t=Be(),this.h()},l(o){n=Be(),a.l(o),t=Be(),this.h()},h(){this.first=n},m(o,c){R(o,n,c),a.m(o,c),R(o,t,c)},p(o,c){e=o,s===(s=r(e))&&a?a.p(e,c):(a.d(1),a=s(e),a&&(a.c(),a.m(t.parentNode,t)))},d(o){o&&(S(n),S(t)),a.d(o)}}}function E6(i){let e;return{c(){e=je("View")},l(n){e=qe(n,"View")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function P6(i){let e;return{c(){e=je("Check-in")},l(n){e=qe(n,"Check-in")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function q1(i,e){let n,t,r=[],s=new Map,a,o,c,d,_,b,x,P=Jt(e[29].name.split(" "));const L=Z=>Z[34];for(let Z=0;Z<P.length;Z+=1){let W=V1(e,P,Z),Q=L(W);s.set(Q,r[Z]=j1(Q,W))}function D(){return e[23](e[29])}c=new Nn({props:{size:"sm",variant:"secondary",$$slots:{default:[E6]},$$scope:{ctx:e}}}),c.$on("click",D);function B(){return e[24](e[29])}return _=new Nn({props:{size:"sm",$$slots:{default:[P6]},$$scope:{ctx:e}}}),_.$on("click",B),{key:i,first:null,c(){n=oe("div"),t=oe("p");for(let Z=0;Z<r.length;Z+=1)r[Z].c();a=me(),o=oe("div"),N(c.$$.fragment),d=me(),N(_.$$.fragment),b=me(),this.h()},l(Z){n=ae(Z,"DIV",{class:!0});var W=we(n);t=ae(W,"P",{class:!0});var Q=we(t);for(let re=0;re<r.length;re+=1)r[re].l(Q);Q.forEach(S),a=_e(W),o=ae(W,"DIV",{class:!0});var ve=we(o);j(c.$$.fragment,ve),d=_e(ve),j(_.$$.fragment,ve),ve.forEach(S),b=_e(W),W.forEach(S),this.h()},h(){ne(t,"class","max-sm:text-ellipsis max-sm:max-w-48 max-sm:overflow-hidden"),ne(o,"class","flex items-center gap-2"),ne(n,"class","flex justify-between items-center gap-4 px-4 py-2"),this.first=n},m(Z,W){R(Z,n,W),ue(n,t);for(let Q=0;Q<r.length;Q+=1)r[Q]&&r[Q].m(t,null);ue(n,a),ue(n,o),V(c,o,null),ue(o,d),V(_,o,null),ue(n,b),x=!0},p(Z,W){e=Z,W[0]&128&&(P=Jt(e[29].name.split(" ")),r=Ir(r,W,L,1,e,P,s,t,dw,j1,null,V1));const Q={};W[1]&16&&(Q.$$scope={dirty:W,ctx:e}),c.$set(Q);const ve={};W[1]&16&&(ve.$$scope={dirty:W,ctx:e}),_.$set(ve)},i(Z){x||(T(c.$$.fragment,Z),T(_.$$.fragment,Z),x=!0)},o(Z){E(c.$$.fragment,Z),E(_.$$.fragment,Z),x=!1},d(Z){Z&&S(n);for(let W=0;W<r.length;W+=1)r[W].d();U(c),U(_)}}}function A6(i){let e=[],n=new Map,t,r,s=Jt(i[7]);const a=o=>o[29].id;for(let o=0;o<s.length;o+=1){let c=N1(i,s,o),d=a(c);n.set(d,e[o]=q1(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c[0]&12416&&(s=Jt(o[7]),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,q1,t,N1),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function M6(i){let e,n,t,r;return e=new $y({props:{class:"hover:no-underline hover:backdrop-opacity-75 active:backdrop-opacity-95 rounded-md h-10 px-4 py-2",$$slots:{default:[S6]},$$scope:{ctx:i}}}),t=new yy({props:{class:"*:p-0 max-h-32 overflow-y-auto",$$slots:{default:[A6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[0]&128|a[1]&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a[0]&128|a[1]&16&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function D6(i){let e,n;return e=new by({props:{value:"check-in-prompt",class:"border-b-0",$$slots:{default:[M6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&128|r[1]&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function z6(i){let e,n,t,r,s,a,o,c,d;function _(D){i[19](D)}function b(D){i[20](D)}function x(D){i[21](D)}let P={poiFeatureOptions:i[5],map:i[6]};i[1]!==void 0&&(P.selectedMapLayer=i[1]),i[3]!==void 0&&(P.poiFeaturesFilter=i[3]),i[4]!==void 0&&(P.onlyShowFavourites=i[4]),n=new C6({props:P}),Vt.push(()=>$n(n,"selectedMapLayer",_)),Vt.push(()=>$n(n,"poiFeaturesFilter",b)),Vt.push(()=>$n(n,"onlyShowFavourites",x)),n.$on("poiSelected",i[22]);let L=i[7].length>0&&U1(i);return{c(){e=oe("div"),N(n.$$.fragment),a=me(),L&&L.c(),this.h()},l(D){e=ae(D,"DIV",{class:!0});var B=we(e);j(n.$$.fragment,B),a=_e(B),L&&L.l(B),B.forEach(S),this.h()},h(){ne(e,"class","z-10 absolute w-full p-2 border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex flex-col gap-2 justify-between")},m(D,B){R(D,e,B),V(n,e,null),ue(e,a),L&&L.m(e,null),i[27](e),o=!0,c||(d=$t(window,"resize",i[18]),c=!0)},p(D,B){const Z={};B[0]&32&&(Z.poiFeatureOptions=D[5]),B[0]&64&&(Z.map=D[6]),!t&&B[0]&2&&(t=!0,Z.selectedMapLayer=D[1],bn(()=>t=!1)),!r&&B[0]&8&&(r=!0,Z.poiFeaturesFilter=D[3],bn(()=>r=!1)),!s&&B[0]&16&&(s=!0,Z.onlyShowFavourites=D[4],bn(()=>s=!1)),n.$set(Z),D[7].length>0?L?(L.p(D,B),B[0]&128&&T(L,1)):(L=U1(D),L.c(),T(L,1),L.m(e,null)):L&&(dt(),E(L,1,1,()=>{L=null}),pt())},i(D){o||(T(n.$$.fragment,D),T(L),o=!0)},o(D){E(n.$$.fragment,D),E(L),o=!1},d(D){D&&S(e),U(n),L&&L.d(),i[27](null),c=!1,d()}}}function L6(i,e,n){let{selectedMapLayer:t}=e,{searchBar:r}=e,{poiFeatureOptions:s}=e,{poiFeaturesFilter:a}=e,{onlyShowFavourites:o}=e,{map:c}=e,{checkInCandidates:d}=e,{updateSearchBarOffset:_}=e,{idOfSelectedPOI:b}=e,{userLocation:x}=e,{fetchCheckInCandidates:P}=e,{pointsOfInterest:L}=e,D="",B=null;const Z=wl(),W=Ie=>{n(10,D="");const nt=L.find(({id:Xe})=>Xe===Ie);nt&&c.flyTo({center:nt.lngLat,zoom:Math.min(16,Math.max(14,c.getZoom())),padding:{top:300}}),Z("poiSelected",Ie)};let Q=!0,ve=0;const re=async Ie=>{if(x===void 0)return;if((await fetch("/api/check-in",{method:"POST",body:JSON.stringify({poi_id:Ie,latitude:x.lat,longitude:x.lat,accuracy_meters:x.accuracyMeters}),headers:{"Content-Type":"application/json"}})).ok||Ia.error("Failed to check-in at POI, contact admin for details."),P(),await(await fetch("/api/check-in/single?poi_id="+encodeURIComponent(Ie))).json()){Ia.success("Successfully checked in at POI!"),ty.checkForUpdates();const mt=L.find(({id:Dt})=>Ie===Dt);mt!==void 0&&(mt.checkedIn=!0,n(14,L))}},ce=async()=>{if(c==null||c.resize(),D!==""){const Ie=D;n(10,D=""),await Uw(250),_(),n(10,D=Ie)}else _()};function ge(Ie){t=Ie,n(1,t)}function le(Ie){a=Ie,n(3,a)}function G(Ie){o=Ie,n(4,o)}function ee(Ie){Ht.call(this,i,Ie)}const fe=Ie=>W(Ie.id),$e=Ie=>re(Ie.id),he=Ie=>{Ie!==void 0&&Ie!==""?(n(9,Q=!1),n(11,B=b),n(0,b=null)):B!==null&&(n(9,Q=!1),n(0,b=B))};function ke(Ie){D=Ie,n(10,D),n(7,d),n(0,b),n(9,Q)}function Ue(Ie){Vt[Ie?"unshift":"push"](()=>{r=Ie,n(2,r)})}return i.$$set=Ie=>{"selectedMapLayer"in Ie&&n(1,t=Ie.selectedMapLayer),"searchBar"in Ie&&n(2,r=Ie.searchBar),"poiFeatureOptions"in Ie&&n(5,s=Ie.poiFeatureOptions),"poiFeaturesFilter"in Ie&&n(3,a=Ie.poiFeaturesFilter),"onlyShowFavourites"in Ie&&n(4,o=Ie.onlyShowFavourites),"map"in Ie&&n(6,c=Ie.map),"checkInCandidates"in Ie&&n(7,d=Ie.checkInCandidates),"updateSearchBarOffset"in Ie&&n(8,_=Ie.updateSearchBarOffset),"idOfSelectedPOI"in Ie&&n(0,b=Ie.idOfSelectedPOI),"userLocation"in Ie&&n(15,x=Ie.userLocation),"fetchCheckInCandidates"in Ie&&n(16,P=Ie.fetchCheckInCandidates),"pointsOfInterest"in Ie&&n(14,L=Ie.pointsOfInterest)},i.$$.update=()=>{i.$$.dirty[0]&128&&d.length===0&&n(10,D=""),i.$$.dirty[0]&513&&(b!==null?n(10,D=""):Q?n(11,B=null):n(9,Q=!0)),i.$$.dirty[0]&131456&&(async()=>(d.length>0&&ve===0||d.length===0&&ve>0)&&(n(17,ve=d.length),await ci(),_()))()},[b,t,r,a,o,s,c,d,_,Q,D,B,W,re,L,x,P,ve,ce,ge,le,G,ee,fe,$e,he,ke,Ue]}class R6 extends st{constructor(e){super(),it(this,e,L6,z6,rt,{selectedMapLayer:1,searchBar:2,poiFeatureOptions:5,poiFeaturesFilter:3,onlyShowFavourites:4,map:6,checkInCandidates:7,updateSearchBarOffset:8,idOfSelectedPOI:0,userLocation:15,fetchCheckInCandidates:16,pointsOfInterest:14},null,[-1,-1])}}const{Map:O6}=Gd;function zd(i){const e=i.slice(),n=e[21](e[3]);return e[47]=n,e}function H1(i,e,n){const t=i.slice();return t[48]=e[n].lngLat,t[49]=e[n].name,t[50]=e[n].id,t[51]=e[n].isFavourite,t[52]=e[n].checkedIn,t}function F6(i){let e,n,t,r,s,a,o,c,d,_,b,x,P,L;function D(G){i[24](G)}let B={style:i[5].URI,class:"h-full w-full absolute",zoom:i[11]?6:1,center:[i[10].lon,i[10].lat],attributionControl:!1,$$slots:{default:[H6]},$$scope:{ctx:i}};i[6]!==void 0&&(B.map=i[6]),e=new zI({props:B}),Vt.push(()=>$n(e,"map",D)),e.$on("moveend",i[19]),e.$on("zoomend",i[19]);function Z(G){i[25](G)}function W(G){i[26](G)}function Q(G){i[27](G)}function ve(G){i[28](G)}function re(G){i[29](G)}function ce(G){i[30](G)}let ge={poiFeatureOptions:i[7],map:i[6],checkInCandidates:i[13],updateSearchBarOffset:i[17],userLocation:i[4],fetchCheckInCandidates:i[18]};i[8]!==void 0&&(ge.searchBar=i[8]),i[5]!==void 0&&(ge.selectedMapLayer=i[5]),i[0]!==void 0&&(ge.poiFeaturesFilter=i[0]),i[1]!==void 0&&(ge.onlyShowFavourites=i[1]),i[3]!==void 0&&(ge.idOfSelectedPOI=i[3]),i[2]!==void 0&&(ge.pointsOfInterest=i[2]),r=new R6({props:ge}),Vt.push(()=>$n(r,"searchBar",Z)),Vt.push(()=>$n(r,"selectedMapLayer",W)),Vt.push(()=>$n(r,"poiFeaturesFilter",Q)),Vt.push(()=>$n(r,"onlyShowFavourites",ve)),Vt.push(()=>$n(r,"idOfSelectedPOI",re)),Vt.push(()=>$n(r,"pointsOfInterest",ce)),r.$on("poiSelected",i[31]);let le=i[3]!==null&&Z1(zd(i));return P=new La({props:{open:i[15],onOpenChange:i[35],$$slots:{default:[J6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),t=me(),N(r.$$.fragment),b=me(),le&&le.c(),x=me(),N(P.$$.fragment)},l(G){j(e.$$.fragment,G),t=_e(G),j(r.$$.fragment,G),b=_e(G),le&&le.l(G),x=_e(G),j(P.$$.fragment,G)},m(G,ee){V(e,G,ee),R(G,t,ee),V(r,G,ee),R(G,b,ee),le&&le.m(G,ee),R(G,x,ee),V(P,G,ee),L=!0},p(G,ee){const fe={};ee[0]&32&&(fe.style=G[5].URI),ee[0]&2048&&(fe.zoom=G[11]?6:1),ee[0]&1024&&(fe.center=[G[10].lon,G[10].lat]),ee[0]&65608|ee[1]&16777216&&(fe.$$scope={dirty:ee,ctx:G}),!n&&ee[0]&64&&(n=!0,fe.map=G[6],bn(()=>n=!1)),e.$set(fe);const $e={};ee[0]&128&&($e.poiFeatureOptions=G[7]),ee[0]&64&&($e.map=G[6]),ee[0]&8192&&($e.checkInCandidates=G[13]),ee[0]&16&&($e.userLocation=G[4]),!s&&ee[0]&256&&(s=!0,$e.searchBar=G[8],bn(()=>s=!1)),!a&&ee[0]&32&&(a=!0,$e.selectedMapLayer=G[5],bn(()=>a=!1)),!o&&ee[0]&1&&(o=!0,$e.poiFeaturesFilter=G[0],bn(()=>o=!1)),!c&&ee[0]&2&&(c=!0,$e.onlyShowFavourites=G[1],bn(()=>c=!1)),!d&&ee[0]&8&&(d=!0,$e.idOfSelectedPOI=G[3],bn(()=>d=!1)),!_&&ee[0]&4&&(_=!0,$e.pointsOfInterest=G[2],bn(()=>_=!1)),r.$set($e),G[3]!==null?le?(le.p(zd(G),ee),ee[0]&8&&T(le,1)):(le=Z1(zd(G)),le.c(),T(le,1),le.m(x.parentNode,x)):le&&(dt(),E(le,1,1,()=>{le=null}),pt());const he={};ee[0]&32768&&(he.open=G[15]),ee[0]&32768&&(he.onOpenChange=G[35]),ee[0]&32768|ee[1]&16777216&&(he.$$scope={dirty:ee,ctx:G}),P.$set(he)},i(G){L||(T(e.$$.fragment,G),T(r.$$.fragment,G),T(le),T(P.$$.fragment,G),L=!0)},o(G){E(e.$$.fragment,G),E(r.$$.fragment,G),E(le),E(P.$$.fragment,G),L=!1},d(G){G&&(S(t),S(b),S(x)),U(e,G),U(r,G),le&&le.d(G),U(P,G)}}}function B6(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-ava9pj"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function N6(i){let e,n,t;return n=new hx({props:{class:"h-5 w-5"}}),{c(){e=oe("span"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","text-xl")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function V6(i){let e,n,t;return n=new Cl({props:{class:"h-5 w-5"}}),{c(){e=oe("span"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","text-xl")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function U6(i){let e,n,t;return n=new Kf({props:{class:"h-5 w-5"}}),{c(){e=oe("span"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","text-xl")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function j6(i){let e,n=i[49]+"",t;return{c(){e=oe("div"),t=je(n),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=we(e);t=qe(s,n),s.forEach(S),this.h()},h(){ne(e,"class","text-lg font-bold text-black")},m(r,s){R(r,e,s),ue(e,t)},p(r,s){s[0]&65536&&n!==(n=r[49]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function q6(i){let e,n,t,r,s,a;const o=[U6,V6,N6],c=[];function d(_,b){return _[52]?0:_[51]?1:2}return e=d(i),n=c[e]=o[e](i),r=new UI({props:{openOn:"hover",offset:[0,-10],$$slots:{default:[j6]},$$scope:{ctx:i}}}),{c(){n.c(),t=me(),N(r.$$.fragment),s=me()},l(_){n.l(_),t=_e(_),j(r.$$.fragment,_),s=_e(_)},m(_,b){c[e].m(_,b),R(_,t,b),V(r,_,b),R(_,s,b),a=!0},p(_,b){let x=e;e=d(_),e!==x&&(dt(),E(c[x],1,1,()=>{c[x]=null}),pt(),n=c[e],n||(n=c[e]=o[e](_),n.c()),T(n,1),n.m(t.parentNode,t));const P={};b[0]&65536|b[1]&16777216&&(P.$$scope={dirty:b,ctx:_}),r.$set(P)},i(_){a||(T(n),T(r.$$.fragment,_),a=!0)},o(_){E(n),E(r.$$.fragment,_),a=!1},d(_){_&&(S(t),S(s)),c[e].d(_),U(r,_)}}}function G1(i,e){let n,t,r;function s(){return e[23](e[50],e[48])}return t=new FI({props:{lngLat:e[48],class:"z-10 grid h-8 w-8 place-items-center rounded-full border border-zinc-600 text-black shadow-2xl focus:outline-2 focus:outline-black"+(e[3]===e[50]?" border-4 box-content":"")+(e[52]?" bg-cyan-300":e[51]?" bg-green-300":" bg-red-300"),$$slots:{default:[q6]},$$scope:{ctx:e}}}),t.$on("click",s),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(a){n=Be(),j(t.$$.fragment,a),this.h()},h(){this.first=n},m(a,o){R(a,n,o),V(t,a,o),r=!0},p(a,o){e=a;const c={};o[0]&65536&&(c.lngLat=e[48]),o[0]&65544&&(c.class="z-10 grid h-8 w-8 place-items-center rounded-full border border-zinc-600 text-black shadow-2xl focus:outline-2 focus:outline-black"+(e[3]===e[50]?" border-4 box-content":"")+(e[52]?" bg-cyan-300":e[51]?" bg-green-300":" bg-red-300")),o[0]&65536|o[1]&16777216&&(c.$$scope={dirty:o,ctx:e}),t.$set(c)},i(a){r||(T(t.$$.fragment,a),r=!0)},o(a){E(t.$$.fragment,a),r=!1},d(a){a&&S(n),U(t,a)}}}function H6(i){let e=[],n=new O6,t,r,s=Jt(i[16]);const a=o=>o[50];for(let o=0;o<s.length;o+=1){let c=H1(i,s,o),d=a(c);n.set(d,e[o]=G1(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c[0]&4259912&&(s=Jt(o[16]),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,G1,t,H1),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function Z1(i){let e,n,t,r;return n=new RP({props:{closePOICard:i[32],poi:i[47],userNickname:i[14],refreshPOIs:i[33]}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(s){e=ae(s,"DIV",{class:!0,style:!0});var a=we(e);j(n.$$.fragment,a),a.forEach(S),this.h()},h(){ne(e,"class","absolute w-full max-w-md md:max-w-xl top-2 right-2"),ne(e,"style",t=`margin-top: ${i[9]}px;`)},m(s,a){R(s,e,a),V(n,e,null),r=!0},p(s,a){const o={};a[0]&8&&(o.closePOICard=s[32]),a[0]&8&&(o.poi=s[47]),a[0]&16384&&(o.userNickname=s[14]),a[0]&4&&(o.refreshPOIs=s[33]),n.$set(o),(!r||a[0]&512&&t!==(t=`margin-top: ${s[9]}px;`))&&ne(e,"style",t)},i(s){r||(T(n.$$.fragment,s),r=!0)},o(s){E(n.$$.fragment,s),r=!1},d(s){s&&S(e),U(n)}}}function G6(i){let e;return{c(){e=je(`Please allow geolocation permissions and turn on location services for check-in
					functionality.`)},l(n){e=qe(n,`Please allow geolocation permissions and turn on location services for check-in
					functionality.`)},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Z6(i){let e,n;return e=new mu({props:{$$slots:{default:[G6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&16777216&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function W6(i){let e;return{c(){e=je("Close")},l(n){e=qe(n,"Close")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function K6(i){let e,n;return e=new Nn({props:{$$slots:{default:[W6]},$$scope:{ctx:i}}}),e.$on("click",i[34]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&16777216&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function X6(i){let e,n,t,r;return e=new pu({props:{$$slots:{default:[Z6]},$$scope:{ctx:i}}}),t=new J3({props:{$$slots:{default:[K6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[1]&16777216&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a[0]&32768|a[1]&16777216&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function J6(i){let e,n;return e=new za({props:{$$slots:{default:[X6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&32768|r[1]&16777216&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Y6(i){let e,n,t,r;const s=[B6,F6],a=[];function o(c,d){return c[12]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}const Pa=Ef({id:yl,isFavourite:v_,lngLat:Ef({lng:yl,lat:yl}),name:gl,description:gl,features:xd(gl),likes:yl,comments:xd(Ef({text:gl,nickname:gl})),pictures:xd(gl),checkedIn:v_});function Q6(i,e,n){let t,r;sn(i,ny,xt=>n(44,r=xt));const s=r.url.searchParams.get("focus-poi");let a=Ea.find(({value:xt})=>xt==="outdoor");Qn(()=>{const xt=localStorage.getItem("preferredMapLayer");xt&&Ea.map(({value:tt})=>tt).includes(xt)&&n(5,a=Ea.find(({value:tt})=>tt===xt))});let o,c,d,_,b,x=[],P=!1,L,D=64,B=[],Z=null,W={lon:0,lat:0},Q=!1,ve=!0,re,ce=[],ge=li.CancelToken.source();const le=()=>{L&&n(9,D=L.offsetHeight)},G=async()=>{ge&&ge.cancel(),ge=li.CancelToken.source();const xt=ge.token,tt=new URLSearchParams({latitude:re.lat.toString(),longitude:re.lng.toString(),accuracy_meters:re.accuracyMeters.toString()}),yn=await li.get(`/api/check-in/candidates?${tt.toString()}`,{cancelToken:xt}).catch(Ze=>Ze);if(yn!=null&&yn.data){let Ze=yn.data;Ze=Ze.map(hn=>{const Bn=Pa.decode(hn);return If(Bn)?Bn.right:{error:!0,message:"Invalid POI object received from API: "+Bn.left}}),Ze=Ze.filter(hn=>"error"in hn&&hn.error?(console.error(hn.message),!1):!0),n(13,ce=Ze)}};let ee=null;const fe=xt=>JSON.stringify(xt,Object.keys(xt).sort());let $e=li.CancelToken.source();const he=async()=>{const xt=o.getBounds(),tt=xt._ne.lat,yn=xt._sw.lat,Ze=xt._ne.lng,hn=xt._sw.lng,Bn={north:tt>90?"90":tt.toString(),south:yn<-90?"-90":yn.toString(),east:Ze>180?"180":Ze.toString(),west:hn<-180?"-180":hn.toString()};if(ee!==null&&fe(ee)===fe(Bn))return;$e&&$e.cancel(),$e=li.CancelToken.source();const kn=$e.token;ee=Bn;const Vn=new URLSearchParams(Bn),ir=await li.get(`/api/poi?${Vn.toString()}`,{cancelToken:kn}).catch(_s=>_s);ir.status===200&&ir.data&&ir.data.forEach(Rs=>{const gs=Pa.decode(Rs);if(If(gs)){const Kr=gs.right;B.some(Os=>Os.id===Kr.id)||n(2,B=[...B,Kr])}else console.error("Invalid POI object received from API: ",gs.left)})},ke=async xt=>{if(B.some(Ze=>Ze.id===xt)){n(3,Z=xt);return}const tt=new URLSearchParams({id:xt.toString()}),yn=await fetch(`/api/poi/get-by-id?${tt.toString()}`);if(yn.ok){const Ze=await yn.json(),hn=Pa.decode(Ze);if(If(hn)){const Bn=hn.right;B.some(kn=>kn.id===Bn.id)||(n(2,B=[...B,Bn]),n(3,Z=Bn.id))}else console.error("Invalid POI object received from API: ",hn.left)}},Ue=xt=>B.find(({id:tt})=>xt===tt);let Ie,nt=!1,Xe;Uo(()=>clearInterval(Xe));const ct=xt=>fetch("/api/stats/app/register-new-poi-click?poi_id="+encodeURIComponent(xt),{method:"POST"});Qn(async()=>{const xt=async()=>{try{const Ze=await fetch("/api/utils/geolocation");if(Ze.ok){const hn=await Ze.json();!isNaN(parseFloat(hn.lon))&&!isNaN(parseFloat(hn.lat))&&(n(10,[W.lon,W.lat]=[parseFloat(hn.lon),parseFloat(hn.lat)],W),n(11,Q=!0))}else{const hn=await fetch("https://api.ipify.org?format=json"),kn=(await hn.json()).ip;if(!hn.ok)return;const Vn=await fetch("/api/utils/geolocation-with-ip-param",{method:"POST",body:JSON.stringify({ip:kn}),headers:{"Content-Type":"application/json"}});if(!Vn.ok)return;const ir=await Vn.json();!isNaN(parseFloat(ir.lon))&&!isNaN(parseFloat(ir.lat))&&(n(10,[W.lon,W.lat]=[parseFloat(ir.lon),parseFloat(ir.lat)],W),n(11,Q=!0))}}catch(Ze){console.error(Ze)}},tt=async()=>{try{const hn=await(await fetch("/api/poi/features")).json();n(7,b=hn.allPOIFeatures)}catch(Ze){console.error(Ze)}},yn=async()=>{const Ze=await fetch("/api/settings/profile"),{nickname:hn}=await Ze.json();hn===void 0&&typeof hn!="string"||n(14,Ie=hn)};await Promise.allSettled([xt(),tt(),yn()]),n(12,ve=!1),await ci(),c=new Pf.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),o.addControl(c,"bottom-right"),c._container.parentElement.style.zIndex="10",d=new Pf.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),o.addControl(d,"bottom-right"),d._container.parentElement.style.zIndex="10",_=new Pf.ScaleControl({maxWidth:160,unit:"metric"}),o.addControl(_,"bottom-left"),_._container.parentElement.style.zIndex="10",o.on("load",async()=>{if(o.resize(),s){await ke(parseInt(s));const Ze=B.find(({id:hn})=>hn===parseInt(s));if(Ze){await new Promise(Bn=>{d.on("trackuserlocationstart",()=>o.once("movestart",Bn)),d.trigger()}),o.stop();const hn=14;o.flyTo({center:Ze.lngLat,zoom:hn,padding:{top:300}}),n(3,Z=parseInt(s))}else d.trigger()}else d.trigger()}),o.on("pitchend",he),le(),d.on("error",()=>{n(15,nt=!0),Xe=setInterval(()=>{"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(Ze=>{Ze.state==="granted"&&d.trigger()})},1e3)}),d.on("trackuserlocationend",Ze=>Ze.target._watchState==="OFF"&&d.trigger()),d.on("geolocate",Ze=>{const hn=Ze.coords;n(4,re={lat:hn.latitude,lng:hn.longitude,accuracyMeters:hn.accuracy})}),o.on("click",Ze=>{Ze.originalEvent.target.dataset.testid==="map-canvas"&&n(3,Z=null)})});const mt=(xt,tt)=>{n(3,Z=xt),o.flyTo({center:tt,padding:{top:300}}),ct(xt)};function Dt(xt){o=xt,n(6,o)}function zt(xt){L=xt,n(8,L)}function Yt(xt){a=xt,n(5,a)}function mn(xt){x=xt,n(0,x)}function cn(xt){P=xt,n(1,P)}function It(xt){Z=xt,n(3,Z)}function At(xt){B=xt,n(2,B)}const un=({detail:xt})=>ke(xt),fn=()=>n(3,Z=null),ot=()=>n(2,B=[...B]),qt=()=>n(15,nt=!1),wt=xt=>{xt||n(15,nt=!1)};return i.$$.update=()=>{i.$$.dirty[0]&15&&n(16,t=B.filter(({features:xt,isFavourite:tt,id:yn})=>yn===Z?!0:!(x.length>0&&!xt.some(Ze=>x.includes(Ze))||P&&!tt))),i.$$.dirty[0]&16&&re!==void 0&&G()},[x,P,B,Z,re,a,o,b,L,D,W,Q,ve,ce,Ie,nt,t,le,G,he,ke,Ue,ct,mt,Dt,zt,Yt,mn,cn,It,At,un,fn,ot,qt,wt]}class ez extends st{constructor(e){super(),it(this,e,Q6,Y6,rt,{},null,[-1,-1])}}function tz(i){let e,n;return e=new ez({}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}class nz extends st{constructor(e){super(),it(this,e,null,tz,rt,{})}}function rz(i){let e,n,t,r,s=[{class:n=Ut("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i[1])},{readOnly:i[2]},i[3]],a={};for(let o=0;o<s.length;o+=1)a=Se(a,s[o]);return{c(){e=oe("textarea"),this.h()},l(o){e=ae(o,"TEXTAREA",{class:!0}),we(e).forEach(S),this.h()},h(){Bt(e,a)},m(o,c){R(o,e,c),e.autofocus&&e.focus(),Bi(e,i[0]),t||(r=[$t(e,"input",i[16]),$t(e,"blur",i[4]),$t(e,"change",i[5]),$t(e,"click",i[6]),$t(e,"focus",i[7]),$t(e,"keydown",i[8]),$t(e,"keypress",i[9]),$t(e,"keyup",i[10]),$t(e,"mouseover",i[11]),$t(e,"mouseenter",i[12]),$t(e,"mouseleave",i[13]),$t(e,"paste",i[14]),$t(e,"input",i[15])],t=!0)},p(o,[c]){Bt(e,a=Mt(s,[c&2&&n!==(n=Ut("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o[1]))&&{class:n},c&4&&{readOnly:o[2]},c&8&&o[3]])),c&1&&Bi(e,o[0])},i:vt,o:vt,d(o){o&&S(e),t=!1,br(r)}}}function sz(i,e,n){const t=["class","value","readonly"];let r=lt(e,t),{class:s=void 0}=e,{value:a=void 0}=e,{readonly:o=void 0}=e;function c(re){Ht.call(this,i,re)}function d(re){Ht.call(this,i,re)}function _(re){Ht.call(this,i,re)}function b(re){Ht.call(this,i,re)}function x(re){Ht.call(this,i,re)}function P(re){Ht.call(this,i,re)}function L(re){Ht.call(this,i,re)}function D(re){Ht.call(this,i,re)}function B(re){Ht.call(this,i,re)}function Z(re){Ht.call(this,i,re)}function W(re){Ht.call(this,i,re)}function Q(re){Ht.call(this,i,re)}function ve(){a=this.value,n(0,a)}return i.$$set=re=>{e=Se(Se({},e),Lt(re)),n(3,r=lt(e,t)),"class"in re&&n(1,s=re.class),"value"in re&&n(0,a=re.value),"readonly"in re&&n(2,o=re.readonly)},[a,s,o,r,c,d,_,b,x,P,L,D,B,Z,W,Q,ve]}class Ip extends st{constructor(e){super(),it(this,e,sz,rz,rt,{class:1,value:0,readonly:2})}}function iz(i){let e,n,t,r,s=[{class:n=Ut("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0  file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]],a={};for(let o=0;o<s.length;o+=1)a=Se(a,s[o]);return{c(){e=oe("input"),this.h()},l(o){e=ae(o,"INPUT",{class:!0}),this.h()},h(){Bt(e,a)},m(o,c){R(o,e,c),e.autofocus&&e.focus(),Bi(e,i[0]),t||(r=[$t(e,"input",i[17]),$t(e,"blur",i[3]),$t(e,"change",i[4]),$t(e,"click",i[5]),$t(e,"focus",i[6]),$t(e,"focusin",i[7]),$t(e,"focusout",i[8]),$t(e,"keydown",i[9]),$t(e,"keypress",i[10]),$t(e,"keyup",i[11]),$t(e,"mouseover",i[12]),$t(e,"mouseenter",i[13]),$t(e,"mouseleave",i[14]),$t(e,"paste",i[15]),$t(e,"input",i[16])],t=!0)},p(o,[c]){Bt(e,a=Mt(s,[c&2&&n!==(n=Ut("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0  file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o[1]))&&{class:n},c&4&&o[2]])),c&1&&e.value!==o[0]&&Bi(e,o[0])},i:vt,o:vt,d(o){o&&S(e),t=!1,br(r)}}}function oz(i,e,n){const t=["class","value"];let r=lt(e,t),{class:s=void 0}=e,{value:a=void 0}=e;function o(ce){Ht.call(this,i,ce)}function c(ce){Ht.call(this,i,ce)}function d(ce){Ht.call(this,i,ce)}function _(ce){Ht.call(this,i,ce)}function b(ce){Ht.call(this,i,ce)}function x(ce){Ht.call(this,i,ce)}function P(ce){Ht.call(this,i,ce)}function L(ce){Ht.call(this,i,ce)}function D(ce){Ht.call(this,i,ce)}function B(ce){Ht.call(this,i,ce)}function Z(ce){Ht.call(this,i,ce)}function W(ce){Ht.call(this,i,ce)}function Q(ce){Ht.call(this,i,ce)}function ve(ce){Ht.call(this,i,ce)}function re(){a=this.value,n(0,a)}return i.$$set=ce=>{e=Se(Se({},e),Lt(ce)),n(2,r=lt(e,t)),"class"in ce&&n(1,s=ce.class),"value"in ce&&n(0,a=ce.value)},[a,s,r,o,c,d,_,b,x,P,L,D,B,Z,W,Q,ve,re]}class iu extends st{constructor(e){super(),it(this,e,oz,iz,rt,{class:1,value:0})}}function W1(i,e,n){const t=i.slice();return t[24]=e[n],t[25]=e,t[26]=n,t}function K1(i,e,n){const t=i.slice();return t[27]=e[n],t}function az(i){let e;return{c(){e=je("Post")},l(n){e=qe(n,"Post")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function lz(i){let e=i[24].user.nickname+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r&8&&e!==(e=t[24].user.nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function X1(i){let e,n,t,r,s;function a(){return i[14](i[24])}n=new Nn({props:{class:"icon-button",$$slots:{default:[cz]},$$scope:{ctx:i}}}),n.$on("click",a);function o(){return i[15](i[24])}return r=new Nn({props:{class:"icon-button bg-red-400 hover:bg-red-500",$$slots:{default:[uz]},$$scope:{ctx:i}}}),r.$on("click",o),{c(){e=oe("div"),N(n.$$.fragment),t=me(),N(r.$$.fragment),this.h()},l(c){e=ae(c,"DIV",{class:!0});var d=we(e);j(n.$$.fragment,d),t=_e(d),j(r.$$.fragment,d),d.forEach(S),this.h()},h(){ne(e,"class","button-container svelte-1foeejj")},m(c,d){R(c,e,d),V(n,e,null),ue(e,t),V(r,e,null),s=!0},p(c,d){i=c;const _={};d&1073741824&&(_.$$scope={dirty:d,ctx:i}),n.$set(_);const b={};d&1073741824&&(b.$$scope={dirty:d,ctx:i}),r.$set(b)},i(c){s||(T(n.$$.fragment,c),T(r.$$.fragment,c),s=!0)},o(c){E(n.$$.fragment,c),E(r.$$.fragment,c),s=!1},d(c){c&&S(e),U(n),U(r)}}}function cz(i){let e,n;return e=new q2({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function uz(i){let e,n;return e=new sy({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function fz(i){let e=new Date(i[24].created_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r&8&&e!==(e=new Date(t[24].created_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"")&&Ft(n,e)},d(t){t&&S(n)}}}function hz(i){let e=new Date(i[24].updated_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"",n,t,r,s="(edited)";return{c(){n=je(e),t=me(),r=oe("span"),r.textContent=s},l(a){n=qe(a,e),t=_e(a),r=ae(a,"SPAN",{"data-svelte-h":!0}),on(r)!=="svelte-zxef7y"&&(r.textContent=s)},m(a,o){R(a,n,o),R(a,t,o),R(a,r,o)},p(a,o){o&8&&e!==(e=new Date(a[24].updated_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"")&&Ft(n,e)},d(a){a&&(S(n),S(t),S(r))}}}function dz(i){let e;function n(s,a){return s[24].updated_at!==s[24].created_at?hz:fz}let t=n(i),r=t(i);return{c(){r.c(),e=Be()},l(s){r.l(s),e=Be()},m(s,a){r.m(s,a),R(s,e,a)},p(s,a){t===(t=n(s))&&r?r.p(s,a):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&S(e),r.d(s)}}}function pz(i){let e,n,t,r,s;e=new ms({props:{$$slots:{default:[lz]},$$scope:{ctx:i}}});let a=i[24].user.id===(i[5]&&i[5].id)&&X1(i);return r=new ji({props:{$$slots:{default:[dz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),a&&a.c(),t=me(),N(r.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),a&&a.l(o),t=_e(o),j(r.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),a&&a.m(o,c),R(o,t,c),V(r,o,c),s=!0},p(o,c){const d={};c&1073741832&&(d.$$scope={dirty:c,ctx:o}),e.$set(d),o[24].user.id===(o[5]&&o[5].id)?a?(a.p(o,c),c&40&&T(a,1)):(a=X1(o),a.c(),T(a,1),a.m(t.parentNode,t)):a&&(dt(),E(a,1,1,()=>{a=null}),pt());const _={};c&1073741832&&(_.$$scope={dirty:c,ctx:o}),r.$set(_)},i(o){s||(T(e.$$.fragment,o),T(a),T(r.$$.fragment,o),s=!0)},o(o){E(e.$$.fragment,o),E(a),E(r.$$.fragment,o),s=!1},d(o){o&&(S(n),S(t)),U(e,o),a&&a.d(o),U(r,o)}}}function mz(i){let e,n,t=i[24].content+"",r,s,a,o,c;function d(){return i[19](i[24])}return o=new Nn({props:{$$slots:{default:[gz]},$$scope:{ctx:i}}}),o.$on("click",d),{c(){e=oe("div"),n=oe("p"),r=je(t),s=me(),a=oe("div"),N(o.$$.fragment),this.h()},l(_){e=ae(_,"DIV",{class:!0});var b=we(e);n=ae(b,"P",{});var x=we(n);r=qe(x,t),x.forEach(S),s=_e(b),a=ae(b,"DIV",{class:!0});var P=we(a);j(o.$$.fragment,P),P.forEach(S),b.forEach(S),this.h()},h(){ne(a,"class","flex items-center"),ne(e,"class","flex justify-between items-center")},m(_,b){R(_,e,b),ue(e,n),ue(n,r),ue(e,s),ue(e,a),V(o,a,null),c=!0},p(_,b){i=_,(!c||b&8)&&t!==(t=i[24].content+"")&&Ft(r,t);const x={};b&1073741832&&(x.$$scope={dirty:b,ctx:i}),o.$set(x)},i(_){c||(T(o.$$.fragment,_),c=!0)},o(_){E(o.$$.fragment,_),c=!1},d(_){_&&S(e),U(o)}}}function _z(i){let e,n,t,r,s,a,o,c;function d(P){i[16](P,i[24])}let _={class:"max-w-xs"};i[2][i[24].id]!==void 0&&(_.value=i[2][i[24].id]),n=new iu({props:_}),Vt.push(()=>$n(n,"value",d));function b(){return i[17](i[24])}s=new Nn({props:{$$slots:{default:[vz]},$$scope:{ctx:i}}}),s.$on("click",b);function x(){return i[18](i[24])}return o=new Nn({props:{class:"icon-button bg-red-400 hover:bg-red-500",$$slots:{default:[yz]},$$scope:{ctx:i}}}),o.$on("click",x),{c(){e=oe("form"),N(n.$$.fragment),r=me(),N(s.$$.fragment),a=me(),N(o.$$.fragment),this.h()},l(P){e=ae(P,"FORM",{class:!0});var L=we(e);j(n.$$.fragment,L),r=_e(L),j(s.$$.fragment,L),a=_e(L),j(o.$$.fragment,L),L.forEach(S),this.h()},h(){ne(e,"class","flex w-full max-w-sm items-center space-x-2")},m(P,L){R(P,e,L),V(n,e,null),ue(e,r),V(s,e,null),ue(e,a),V(o,e,null),c=!0},p(P,L){i=P;const D={};!t&&L&12&&(t=!0,D.value=i[2][i[24].id],bn(()=>t=!1)),n.$set(D);const B={};L&1073741824&&(B.$$scope={dirty:L,ctx:i}),s.$set(B);const Z={};L&1073741824&&(Z.$$scope={dirty:L,ctx:i}),o.$set(Z)},i(P){c||(T(n.$$.fragment,P),T(s.$$.fragment,P),T(o.$$.fragment,P),c=!0)},o(P){E(n.$$.fragment,P),E(s.$$.fragment,P),E(o.$$.fragment,P),c=!1},d(P){P&&S(e),U(n),U(s),U(o)}}}function gz(i){let e,n,t,r=i[24].likes_count+"",s,a;return n=new Jd({}),{c(){e=oe("div"),N(n.$$.fragment),t=oe("span"),s=je(r),this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);j(n.$$.fragment,c),t=ae(c,"SPAN",{});var d=we(t);s=qe(d,r),d.forEach(S),c.forEach(S),this.h()},h(){ne(e,"class","flex space-x-1")},m(o,c){R(o,e,c),V(n,e,null),ue(e,t),ue(t,s),a=!0},p(o,c){(!a||c&8)&&r!==(r=o[24].likes_count+"")&&Ft(s,r)},i(o){a||(T(n.$$.fragment,o),a=!0)},o(o){E(n.$$.fragment,o),a=!1},d(o){o&&S(e),U(n)}}}function vz(i){let e,n;return e=new Kf({props:{class:"icon-button h-3 w-3"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function yz(i){let e,n;return e=new r2({props:{class:"h-3 w-3"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bz(i){let e=i[27].user.nickname+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r&8&&e!==(e=t[27].user.nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function $z(i){let e=new Date(i[27].created_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r&8&&e!==(e=new Date(t[27].created_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"")&&Ft(n,e)},d(t){t&&S(n)}}}function wz(i){let e,n,t,r;return e=new ms({props:{$$slots:{default:[bz]},$$scope:{ctx:i}}}),t=new ji({props:{$$slots:{default:[$z]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1073741832&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&1073741832&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function J1(i){let e,n,t;function r(){return i[20](i[24],i[27])}return n=new Nn({props:{class:"icon-button bg-red-400 hover:bg-red-500",$$slots:{default:[xz]},$$scope:{ctx:i}}}),n.$on("click",r),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(s){e=ae(s,"DIV",{class:!0});var a=we(e);j(n.$$.fragment,a),a.forEach(S),this.h()},h(){ne(e,"class","flex justify-end mt-4")},m(s,a){R(s,e,a),V(n,e,null),t=!0},p(s,a){i=s;const o={};a&1073741824&&(o.$$scope={dirty:a,ctx:i}),n.$set(o)},i(s){t||(T(n.$$.fragment,s),t=!0)},o(s){E(n.$$.fragment,s),t=!1},d(s){s&&S(e),U(n)}}}function xz(i){let e,n;return e=new sy({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function kz(i){let e,n=i[27].content+"",t,r,s,a,o=i[27].user.id===(i[5]&&i[5].id)&&J1(i);return{c(){e=oe("p"),t=je(n),r=me(),o&&o.c(),s=Be()},l(c){e=ae(c,"P",{});var d=we(e);t=qe(d,n),d.forEach(S),r=_e(c),o&&o.l(c),s=Be()},m(c,d){R(c,e,d),ue(e,t),R(c,r,d),o&&o.m(c,d),R(c,s,d),a=!0},p(c,d){(!a||d&8)&&n!==(n=c[27].content+"")&&Ft(t,n),c[27].user.id===(c[5]&&c[5].id)?o?(o.p(c,d),d&40&&T(o,1)):(o=J1(c),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(dt(),E(o,1,1,()=>{o=null}),pt())},i(c){a||(T(o),a=!0)},o(c){E(o),a=!1},d(c){c&&(S(e),S(r),S(s)),o&&o.d(c)}}}function Cz(i){let e,n,t,r;return e=new Br({props:{$$slots:{default:[wz]},$$scope:{ctx:i}}}),t=new Er({props:{$$slots:{default:[kz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1073741832&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&1073741864&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function Y1(i,e){let n,t,r;return t=new tr({props:{class:"mt-4",$$slots:{default:[Cz]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&1073741864&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function Sz(i){let e,n,t,r=[],s=new Map,a,o,c,d,_,b,x,P,L,D,B;const Z=[_z,mz],W=[];function Q(G,ee){return G[1][G[24].id]?0:1}e=Q(i),n=W[e]=Z[e](i);let ve=Jt(i[24].comments);const re=G=>G[27].id;for(let G=0;G<ve.length;G+=1){let ee=K1(i,ve,G),fe=re(ee);s.set(fe,r[G]=Y1(fe,ee))}function ce(G){i[21](G,i[24])}let ge={placeholder:"Write a comment...",class:"w-full mr-2"};i[4][i[24].id]!==void 0&&(ge.value=i[4][i[24].id]),c=new iu({props:ge}),Vt.push(()=>$n(c,"value",ce));function le(){return i[22](i[24])}return{c(){n.c(),t=me();for(let G=0;G<r.length;G+=1)r[G].c();a=me(),o=oe("form"),N(c.$$.fragment),_=me(),b=oe("button"),x=je("Submit"),this.h()},l(G){n.l(G),t=_e(G);for(let $e=0;$e<r.length;$e+=1)r[$e].l(G);a=_e(G),o=ae(G,"FORM",{class:!0});var ee=we(o);j(c.$$.fragment,ee),_=_e(ee),b=ae(ee,"BUTTON",{type:!0});var fe=we(b);x=qe(fe,"Submit"),fe.forEach(S),ee.forEach(S),this.h()},h(){ne(b,"type","submit"),b.disabled=P=!i[4][i[24].id],ne(o,"class","flex justify-between mt-4")},m(G,ee){W[e].m(G,ee),R(G,t,ee);for(let fe=0;fe<r.length;fe+=1)r[fe]&&r[fe].m(G,ee);R(G,a,ee),R(G,o,ee),V(c,o,null),ue(o,_),ue(o,b),ue(b,x),L=!0,D||(B=$t(o,"submit",lw(le)),D=!0)},p(G,ee){i=G;let fe=e;e=Q(i),e===fe?W[e].p(i,ee):(dt(),E(W[fe],1,1,()=>{W[fe]=null}),pt(),n=W[e],n?n.p(i,ee):(n=W[e]=Z[e](i),n.c()),T(n,1),n.m(t.parentNode,t)),ee&2088&&(ve=Jt(i[24].comments),dt(),r=Ir(r,ee,re,1,i,ve,s,a.parentNode,Fr,Y1,a,K1),pt());const $e={};!d&&ee&24&&(d=!0,$e.value=i[4][i[24].id],bn(()=>d=!1)),c.$set($e),(!L||ee&24&&P!==(P=!i[4][i[24].id]))&&(b.disabled=P)},i(G){if(!L){T(n);for(let ee=0;ee<ve.length;ee+=1)T(r[ee]);T(c.$$.fragment,G),L=!0}},o(G){E(n);for(let ee=0;ee<r.length;ee+=1)E(r[ee]);E(c.$$.fragment,G),L=!1},d(G){G&&(S(t),S(a),S(o)),W[e].d(G);for(let ee=0;ee<r.length;ee+=1)r[ee].d(G);U(c),D=!1,B()}}}function Tz(i){let e,n,t,r,s;return e=new Br({props:{$$slots:{default:[pz]},$$scope:{ctx:i}}}),t=new Er({props:{$$slots:{default:[Sz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me()},l(a){j(e.$$.fragment,a),n=_e(a),j(t.$$.fragment,a),r=_e(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const c={};o&1073741870&&(c.$$scope={dirty:o,ctx:a}),e.$set(c);const d={};o&1073741886&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),E(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function Q1(i,e){let n,t,r;return t=new tr({props:{class:"card m-2",$$slots:{default:[Tz]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&1073741886&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function Iz(i){let e,n,t,r,s,a=[],o=new Map,c,d;function _(L){i[12](L)}let b={class:"px-4 mb-2 focus-visible:mx-1 focus-visible:mt-1 focus-visible:w-[calc(100%-0.5rem)]",placeholder:"What's on your mind?"};i[0]!==void 0&&(b.value=i[0]),e=new Ip({props:b}),Vt.push(()=>$n(e,"value",_)),r=new Nn({props:{variant:"outline",$$slots:{default:[az]},$$scope:{ctx:i}}}),r.$on("click",i[13]);let x=Jt(i[3]);const P=L=>L[24].id;for(let L=0;L<x.length;L+=1){let D=W1(i,x,L),B=P(D);o.set(B,a[L]=Q1(B,D))}return{c(){N(e.$$.fragment),t=me(),N(r.$$.fragment),s=me();for(let L=0;L<a.length;L+=1)a[L].c();c=Be()},l(L){j(e.$$.fragment,L),t=_e(L),j(r.$$.fragment,L),s=_e(L);for(let D=0;D<a.length;D+=1)a[D].l(L);c=Be()},m(L,D){V(e,L,D),R(L,t,D),V(r,L,D),R(L,s,D);for(let B=0;B<a.length;B+=1)a[B]&&a[B].m(L,D);R(L,c,D),d=!0},p(L,[D]){const B={};!n&&D&1&&(n=!0,B.value=L[0],bn(()=>n=!1)),e.$set(B);const Z={};D&1073741824&&(Z.$$scope={dirty:D,ctx:L}),r.$set(Z),D&4030&&(x=Jt(L[3]),dt(),a=Ir(a,D,P,1,L,x,o,c.parentNode,Fr,Q1,c,W1),pt())},i(L){if(!d){T(e.$$.fragment,L),T(r.$$.fragment,L);for(let D=0;D<x.length;D+=1)T(a[D]);d=!0}},o(L){E(e.$$.fragment,L),E(r.$$.fragment,L);for(let D=0;D<a.length;D+=1)E(a[D]);d=!1},d(L){L&&(S(t),S(s),S(c)),U(e,L),U(r,L);for(let D=0;D<a.length;D+=1)a[D].d(L)}}}function Ez(i,e,n){let t="",r={},s={},a=[],o={},c=null;Qn(async()=>{const fe=await fetch("/api/social/users/show",{});fe.ok&&n(5,c=await fe.json())});const d=async()=>{(await fetch("/api/social/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).ok?(n(0,t=""),await _()):console.error("Post creation failed")},_=async()=>{const fe=await fetch("/api/social/posts",{});fe.ok?n(3,a=await fe.json()):console.error("Failed to get posts")},b=async(fe,$e)=>{(await fetch(`/api/social/posts/${fe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:{content:$e}})})).ok?(n(1,r[fe]=!1,r),await _()):console.error("Post editing failed")},x=async fe=>{(await fetch(`/api/social/posts/${fe}`,{method:"DELETE"})).ok?await _():console.error("Post deletion failed")},P=async fe=>{(await fetch(`/api/social/posts/${fe}/like`,{method:"POST"})).ok?await _():console.error("Post liking failed")};async function L(fe){(await fetch(`/api/social/posts/${fe}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:o[fe]})})).ok||console.error("Post comment failed"),_(),n(4,o[fe]="",o)}async function D(fe,$e){(await fetch(`/api/social/posts/${fe}/comments/${$e}`,{method:"DELETE"})).ok?await _():console.error("Comment deletion failed")}Qn(_);function B(fe){t=fe,n(0,t)}const Z=()=>{t.trim()!==""?d():alert("You cannot make an empty post!")},W=fe=>{n(1,r[fe.id]=!0,r),n(2,s[fe.id]=fe.content,s)},Q=fe=>{confirm("Are you sure you want to delete this post?")&&x(fe.id)};function ve(fe,$e){i.$$.not_equal(s[$e.id],fe)&&(s[$e.id]=fe,n(2,s))}const re=fe=>{s[fe.id].trim()!==""?b(fe.id,s[fe.id]):alert("Post content cannot be empty")},ce=fe=>n(1,r[fe.id]=!1,r),ge=fe=>{console.log(`liked: ${fe.id}`),P(fe.id)},le=(fe,$e)=>{confirm("Are you sure you want to delete this comment?")&&(console.log(fe.id,$e.id),D(fe.id,$e.id))};function G(fe,$e){i.$$.not_equal(o[$e.id],fe)&&(o[$e.id]=fe,n(4,o))}return[t,r,s,a,o,c,d,b,x,P,L,D,B,Z,W,Q,ve,re,ce,ge,le,G,fe=>L(fe.id)]}class Pz extends st{constructor(e){super(),it(this,e,Ez,Iz,rt,{})}}function e0(i,e,n){const t=i.slice();return t[31]=e[n],t}function t0(i,e,n){const t=i.slice();return t[34]=e[n],t}function n0(i,e,n){const t=i.slice();return t[31]=e[n],t}function r0(i,e,n){const t=i.slice();return t[39]=e[n],t}function s0(i,e,n){const t=i.slice();return t[42]=e[n],t}function i0(i,e,n){const t=i.slice();return t[31]=e[n],t}function Az(i){let e,n,t,r,s="Search users...",a;return n=new Xd({}),{c(){e=oe("div"),N(n.$$.fragment),t=me(),r=oe("p"),r.textContent=s,this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);j(n.$$.fragment,c),t=_e(c),r=ae(c,"P",{class:!0,"data-svelte-h":!0}),on(r)!=="svelte-1nrh68l"&&(r.textContent=s),c.forEach(S),this.h()},h(){ne(r,"class","text-sm"),ne(e,"class","flex gap-2 items-center")},m(o,c){R(o,e,c),V(n,e,null),ue(e,t),ue(e,r),a=!0},p:vt,i(o){a||(T(n.$$.fragment,o),a=!0)},o(o){E(n.$$.fragment,o),a=!1},d(o){o&&S(e),U(n)}}}function Mz(i){let e,n="User Search",t,r,s;return r=new bl({props:{$$slots:{default:[Oz]},$$scope:{ctx:i}}}),{c(){e=oe("p"),e.textContent=n,t=me(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-2xvezt"&&(e.textContent=n),t=_e(a),j(r.$$.fragment,a),this.h()},h(){ne(e,"class","px-4 py-2 font-medium leading-none")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p(a,o){const c={};o[0]&320|o[1]&65536&&(c.$$scope={dirty:o,ctx:a}),r.$set(c)},i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function Dz(i){let e,n;return e=new bp({props:{class:"h-[300px] flex items-center justify-center",$$slots:{default:[Fz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function zz(i){let e,n;return e=new Uy({props:{$$slots:{default:[Bz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Lz(i){let e;return{c(){e=je("Add Friend")},l(n){e=qe(n,"Add Friend")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Rz(i){let e,n,t,r=i[31].nickname+"",s,a,o,c,d;return o=new Nn({props:{$$slots:{default:[Lz]},$$scope:{ctx:i}}}),{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=je(r),a=me(),N(o.$$.fragment),c=me(),this.h()},l(_){e=ae(_,"DIV",{class:!0});var b=we(e);n=ae(b,"DIV",{class:!0});var x=we(n);t=ae(x,"P",{});var P=we(t);s=qe(P,r),P.forEach(S),a=_e(x),j(o.$$.fragment,x),x.forEach(S),b.forEach(S),c=_e(_),this.h()},h(){ne(n,"class","flex justify-between gap-4"),ne(e,"class","flex flex-col w-full gap-2")},m(_,b){R(_,e,b),ue(e,n),ue(n,t),ue(t,s),ue(n,a),V(o,n,null),R(_,c,b),d=!0},p(_,b){(!d||b[0]&256)&&r!==(r=_[31].nickname+"")&&Ft(s,r);const x={};b[1]&65536&&(x.$$scope={dirty:b,ctx:_}),o.$set(x)},i(_){d||(T(o.$$.fragment,_),d=!0)},o(_){E(o.$$.fragment,_),d=!1},d(_){_&&(S(e),S(c)),U(o)}}}function o0(i,e){let n,t,r;return t=new El({props:{value:e[31].id.toString(),onSelect:e[17],class:"cursor-pointer",$$slots:{default:[Rz]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&256&&(o.value=e[31].id.toString()),a[0]&64&&(o.onSelect=e[17]),a[0]&256|a[1]&65536&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function Oz(i){let e=[],n=new Map,t,r,s=Jt(i[8]);const a=o=>o[31].id;for(let o=0;o<s.length;o+=1){let c=i0(i,s,o),d=a(c);n.set(d,e[o]=o0(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c[0]&832&&(s=Jt(o[8]),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,o0,t,i0),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function Fz(i){let e;return{c(){e=je("No results found.")},l(n){e=qe(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Bz(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-11244tn"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","h-[300px] w-full flex items-center justify-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function Nz(i){let e,n,t,r;const s=[zz,Dz,Mz],a=[];function o(c,d){return c[7]?0:c[8].length===0?1:2}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function Vz(i){let e,n,t,r,s;function a(c){i[16](c)}let o={placeholder:"Search by name"};return i[2]!==void 0&&(o.value=i[2]),e=new $p({props:o}),Vt.push(()=>$n(e,"value",a)),r=new Vy({props:{class:"my-2",$$slots:{default:[Nz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),t=me(),N(r.$$.fragment)},l(c){j(e.$$.fragment,c),t=_e(c),j(r.$$.fragment,c)},m(c,d){V(e,c,d),R(c,t,d),V(r,c,d),s=!0},p(c,d){const _={};!n&&d[0]&4&&(n=!0,_.value=c[2],bn(()=>n=!1)),e.$set(_);const b={};d[0]&448|d[1]&65536&&(b.$$scope={dirty:d,ctx:c}),r.$set(b)},i(c){s||(T(e.$$.fragment,c),T(r.$$.fragment,c),s=!0)},o(c){E(e.$$.fragment,c),E(r.$$.fragment,c),s=!1},d(c){c&&S(t),U(e,c),U(r,c)}}}function Uz(i){let e,n,t=Jt(i[3]),r=[];for(let a=0;a<t.length;a+=1)r[a]=a0(s0(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){e=oe("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=we(e);for(let c=0;c<r.length;c+=1)r[c].l(o);o.forEach(S),this.h()},h(){ne(e,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(a,o){R(a,e,o);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(e,null);n=!0},p(a,o){if(o[0]&12296){t=Jt(a[3]);let c;for(c=0;c<t.length;c+=1){const d=s0(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=a0(d),r[c].c(),T(r[c],1),r[c].m(e,null))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function jz(i){let e,n="Add some friends to get started!";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-peihu4"&&(e.textContent=n),this.h()},h(){ne(e,"class","mb-8")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function qz(i){let e=i[42].nickname+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&8&&e!==(e=t[42].nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function Hz(i){let e,n;return e=new ms({props:{$$slots:{default:[qz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&8|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Gz(i){let e;return{c(){e=je("Delete")},l(n){e=qe(n,"Delete")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Zz(i){let e;return{c(){e=je("Block")},l(n){e=qe(n,"Block")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Wz(i){let e,n,t,r;function s(){return i[19](i[42])}e=new Nn({props:{class:"bg-red-500 text-white",$$slots:{default:[Gz]},$$scope:{ctx:i}}}),e.$on("click",s);function a(){return i[20](i[42])}return t=new Nn({props:{class:"bg-yellow-500 text-white",$$slots:{default:[Zz]},$$scope:{ctx:i}}}),t.$on("click",a),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),r=!0},p(o,c){i=o;const d={};c[1]&65536&&(d.$$scope={dirty:c,ctx:i}),e.$set(d);const _={};c[1]&65536&&(_.$$scope={dirty:c,ctx:i}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function Kz(i){let e,n,t,r,s;return e=new Br({props:{$$slots:{default:[Hz]},$$scope:{ctx:i}}}),t=new Er({props:{$$slots:{default:[Wz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me()},l(a){j(e.$$.fragment,a),n=_e(a),j(t.$$.fragment,a),r=_e(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const c={};o[0]&8|o[1]&65536&&(c.$$scope={dirty:o,ctx:a}),e.$set(c);const d={};o[0]&8|o[1]&65536&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),E(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function a0(i){let e,n;return e=new tr({props:{class:"card",$$slots:{default:[Kz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&8|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function l0(i){let e,n="Received Friend Requests",t,r,s,a=Jt(i[4]),o=[];for(let d=0;d<a.length;d+=1)o[d]=c0(r0(i,a,d));const c=d=>E(o[d],1,1,()=>{o[d]=null});return{c(){e=oe("h1"),e.textContent=n,t=me(),r=oe("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ae(d,"H1",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-15xbieh"&&(e.textContent=n),t=_e(d),r=ae(d,"DIV",{class:!0});var _=we(r);for(let b=0;b<o.length;b+=1)o[b].l(_);_.forEach(S),this.h()},h(){ne(e,"class","text-xl font-bold mb-4"),ne(r,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(d,_){R(d,e,_),R(d,t,_),R(d,r,_);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);s=!0},p(d,_){if(_[0]&3088){a=Jt(d[4]);let b;for(b=0;b<a.length;b+=1){const x=r0(d,a,b);o[b]?(o[b].p(x,_),T(o[b],1)):(o[b]=c0(x),o[b].c(),T(o[b],1),o[b].m(r,null))}for(dt(),b=a.length;b<o.length;b+=1)c(b);pt()}},i(d){if(!s){for(let _=0;_<a.length;_+=1)T(o[_]);s=!0}},o(d){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)E(o[_]);s=!1},d(d){d&&(S(e),S(t),S(r)),as(o,d)}}}function Xz(i){let e=(i[39].user?i[39].user.nickname:"Unknown")+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&16&&e!==(e=(t[39].user?t[39].user.nickname:"Unknown")+"")&&Ft(n,e)},d(t){t&&S(n)}}}function Jz(i){let e,n;return e=new ms({props:{$$slots:{default:[Xz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&16|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Yz(i){let e;return{c(){e=je("Accept")},l(n){e=qe(n,"Accept")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Qz(i){let e;return{c(){e=je("Reject")},l(n){e=qe(n,"Reject")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function eL(i){let e,n,t,r;function s(){return i[21](i[39])}e=new Nn({props:{$$slots:{default:[Yz]},$$scope:{ctx:i}}}),e.$on("click",s);function a(){return i[22](i[39])}return t=new Nn({props:{class:"bg-red-500 text-white",$$slots:{default:[Qz]},$$scope:{ctx:i}}}),t.$on("click",a),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),r=!0},p(o,c){i=o;const d={};c[1]&65536&&(d.$$scope={dirty:c,ctx:i}),e.$set(d);const _={};c[1]&65536&&(_.$$scope={dirty:c,ctx:i}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function tL(i){let e,n,t,r,s;return e=new Br({props:{$$slots:{default:[Jz]},$$scope:{ctx:i}}}),t=new Er({props:{$$slots:{default:[eL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me()},l(a){j(e.$$.fragment,a),n=_e(a),j(t.$$.fragment,a),r=_e(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const c={};o[0]&16|o[1]&65536&&(c.$$scope={dirty:o,ctx:a}),e.$set(c);const d={};o[0]&16|o[1]&65536&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),E(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function c0(i){let e,n;return e=new tr({props:{class:"card",$$slots:{default:[tL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&16|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function u0(i){let e,n="People you might know",t,r,s,a=Jt(_0(i[0])),o=[];for(let d=0;d<a.length;d+=1)o[d]=f0(n0(i,a,d));const c=d=>E(o[d],1,1,()=>{o[d]=null});return{c(){e=oe("h1"),e.textContent=n,t=me(),r=oe("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ae(d,"H1",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-18yu156"&&(e.textContent=n),t=_e(d),r=ae(d,"DIV",{class:!0});var _=we(r);for(let b=0;b<o.length;b+=1)o[b].l(_);_.forEach(S),this.h()},h(){ne(e,"class","text-xl font-bold mb-4"),ne(r,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(d,_){R(d,e,_),R(d,t,_),R(d,r,_);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);s=!0},p(d,_){if(_[0]&513){a=Jt(_0(d[0]));let b;for(b=0;b<a.length;b+=1){const x=n0(d,a,b);o[b]?(o[b].p(x,_),T(o[b],1)):(o[b]=f0(x),o[b].c(),T(o[b],1),o[b].m(r,null))}for(dt(),b=a.length;b<o.length;b+=1)c(b);pt()}},i(d){if(!s){for(let _=0;_<a.length;_+=1)T(o[_]);s=!0}},o(d){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)E(o[_]);s=!1},d(d){d&&(S(e),S(t),S(r)),as(o,d)}}}function nL(i){let e=i[31].nickname+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&1&&e!==(e=t[31].nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function rL(i){let e,n;return e=new ms({props:{$$slots:{default:[nL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function sL(i){let e;return{c(){e=je("Add Friend")},l(n){e=qe(n,"Add Friend")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function iL(i){let e,n;function t(){return i[23](i[31])}return e=new Nn({props:{$$slots:{default:[sL]},$$scope:{ctx:i}}}),e.$on("click",t),{c(){N(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,s){V(e,r,s),n=!0},p(r,s){i=r;const a={};s[1]&65536&&(a.$$scope={dirty:s,ctx:i}),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function oL(i){let e,n,t,r,s;return e=new Br({props:{$$slots:{default:[rL]},$$scope:{ctx:i}}}),t=new Er({props:{$$slots:{default:[iL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me()},l(a){j(e.$$.fragment,a),n=_e(a),j(t.$$.fragment,a),r=_e(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const c={};o[0]&1|o[1]&65536&&(c.$$scope={dirty:o,ctx:a}),e.$set(c);const d={};o[0]&1|o[1]&65536&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),E(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function f0(i){let e,n;return e=new tr({props:{class:"card",$$slots:{default:[oL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function h0(i){let e,n="Sent Friend Requests",t,r,s,a=Jt(i[5]),o=[];for(let d=0;d<a.length;d+=1)o[d]=d0(t0(i,a,d));const c=d=>E(o[d],1,1,()=>{o[d]=null});return{c(){e=oe("h1"),e.textContent=n,t=me(),r=oe("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ae(d,"H1",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1e8ve9q"&&(e.textContent=n),t=_e(d),r=ae(d,"DIV",{class:!0});var _=we(r);for(let b=0;b<o.length;b+=1)o[b].l(_);_.forEach(S),this.h()},h(){ne(e,"class","text-xl font-bold mb-4"),ne(r,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(d,_){R(d,e,_),R(d,t,_),R(d,r,_);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);s=!0},p(d,_){if(_[0]&32){a=Jt(d[5]);let b;for(b=0;b<a.length;b+=1){const x=t0(d,a,b);o[b]?(o[b].p(x,_),T(o[b],1)):(o[b]=d0(x),o[b].c(),T(o[b],1),o[b].m(r,null))}for(dt(),b=a.length;b<o.length;b+=1)c(b);pt()}},i(d){if(!s){for(let _=0;_<a.length;_+=1)T(o[_]);s=!0}},o(d){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)E(o[_]);s=!1},d(d){d&&(S(e),S(t),S(r)),as(o,d)}}}function aL(i){let e=(i[34].friend?i[34].friend.nickname:"Unknown")+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&32&&e!==(e=(t[34].friend?t[34].friend.nickname:"Unknown")+"")&&Ft(n,e)},d(t){t&&S(n)}}}function lL(i){let e,n;return e=new ms({props:{$$slots:{default:[aL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&32|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function cL(i){let e,n,t;return e=new Br({props:{$$slots:{default:[lL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me()},l(r){j(e.$$.fragment,r),n=_e(r)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p(r,s){const a={};s[0]&32|s[1]&65536&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function d0(i){let e,n;return e=new tr({props:{class:"card",$$slots:{default:[cL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&32|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function p0(i){let e,n="Blocked",t,r,s,a=Jt(i[1]),o=[];for(let d=0;d<a.length;d+=1)o[d]=m0(e0(i,a,d));const c=d=>E(o[d],1,1,()=>{o[d]=null});return{c(){e=oe("h1"),e.textContent=n,t=me(),r=oe("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ae(d,"H1",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-i2gizo"&&(e.textContent=n),t=_e(d),r=ae(d,"DIV",{class:!0});var _=we(r);for(let b=0;b<o.length;b+=1)o[b].l(_);_.forEach(S),this.h()},h(){ne(e,"class","text-xl font-bold mb-4"),ne(r,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(d,_){R(d,e,_),R(d,t,_),R(d,r,_);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);s=!0},p(d,_){if(_[0]&16386){a=Jt(d[1]);let b;for(b=0;b<a.length;b+=1){const x=e0(d,a,b);o[b]?(o[b].p(x,_),T(o[b],1)):(o[b]=m0(x),o[b].c(),T(o[b],1),o[b].m(r,null))}for(dt(),b=a.length;b<o.length;b+=1)c(b);pt()}},i(d){if(!s){for(let _=0;_<a.length;_+=1)T(o[_]);s=!0}},o(d){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)E(o[_]);s=!1},d(d){d&&(S(e),S(t),S(r)),as(o,d)}}}function uL(i){let e=i[31].nickname+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&2&&e!==(e=t[31].nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function fL(i){let e,n;return e=new ms({props:{$$slots:{default:[uL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&2|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function hL(i){let e;return{c(){e=je("Unblock User")},l(n){e=qe(n,"Unblock User")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function dL(i){let e,n;function t(){return i[24](i[31])}return e=new Nn({props:{$$slots:{default:[hL]},$$scope:{ctx:i}}}),e.$on("click",t),{c(){N(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,s){V(e,r,s),n=!0},p(r,s){i=r;const a={};s[1]&65536&&(a.$$scope={dirty:s,ctx:i}),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function pL(i){let e,n,t,r,s;return e=new Br({props:{$$slots:{default:[fL]},$$scope:{ctx:i}}}),t=new Er({props:{$$slots:{default:[dL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me()},l(a){j(e.$$.fragment,a),n=_e(a),j(t.$$.fragment,a),r=_e(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const c={};o[0]&2|o[1]&65536&&(c.$$scope={dirty:o,ctx:a}),e.$set(c);const d={};o[0]&2|o[1]&65536&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),E(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function m0(i){let e,n;return e=new tr({props:{class:"card",$$slots:{default:[pL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&2|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function mL(i){let e,n="Your Connections",t,r,s,a,o,c,d,_,b,x,P,L,D,B;r=new Nn({props:{class:"text-secondary-foreground w-full bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground mb-4",$$slots:{default:[Az]},$$scope:{ctx:i}}}),r.$on("click",i[15]);function Z(ee){i[18](ee)}let W={shouldFilter:!1,loop:!0,$$slots:{default:[Vz]},$$scope:{ctx:i}};i[6]!==void 0&&(W.open=i[6]),a=new Ny({props:W}),Vt.push(()=>$n(a,"open",Z));const Q=[jz,Uz],ve=[];function re(ee,fe){return ee[3].length===0?0:1}d=re(i),_=ve[d]=Q[d](i);let ce=i[4].length!==0&&l0(i),ge=i[0].length!==0&&u0(i),le=i[5].length!==0&&h0(i),G=i[1].length!==0&&p0(i);return{c(){e=oe("h1"),e.textContent=n,t=me(),N(r.$$.fragment),s=me(),N(a.$$.fragment),c=me(),_.c(),b=me(),ce&&ce.c(),x=me(),ge&&ge.c(),P=me(),le&&le.c(),L=me(),G&&G.c(),D=Be(),this.h()},l(ee){e=ae(ee,"H1",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1srrtp0"&&(e.textContent=n),t=_e(ee),j(r.$$.fragment,ee),s=_e(ee),j(a.$$.fragment,ee),c=_e(ee),_.l(ee),b=_e(ee),ce&&ce.l(ee),x=_e(ee),ge&&ge.l(ee),P=_e(ee),le&&le.l(ee),L=_e(ee),G&&G.l(ee),D=Be(),this.h()},h(){ne(e,"class","text-xl font-bold mb-4")},m(ee,fe){R(ee,e,fe),R(ee,t,fe),V(r,ee,fe),R(ee,s,fe),V(a,ee,fe),R(ee,c,fe),ve[d].m(ee,fe),R(ee,b,fe),ce&&ce.m(ee,fe),R(ee,x,fe),ge&&ge.m(ee,fe),R(ee,P,fe),le&&le.m(ee,fe),R(ee,L,fe),G&&G.m(ee,fe),R(ee,D,fe),B=!0},p(ee,fe){const $e={};fe[1]&65536&&($e.$$scope={dirty:fe,ctx:ee}),r.$set($e);const he={};fe[0]&452|fe[1]&65536&&(he.$$scope={dirty:fe,ctx:ee}),!o&&fe[0]&64&&(o=!0,he.open=ee[6],bn(()=>o=!1)),a.$set(he);let ke=d;d=re(ee),d===ke?ve[d].p(ee,fe):(dt(),E(ve[ke],1,1,()=>{ve[ke]=null}),pt(),_=ve[d],_?_.p(ee,fe):(_=ve[d]=Q[d](ee),_.c()),T(_,1),_.m(b.parentNode,b)),ee[4].length!==0?ce?(ce.p(ee,fe),fe[0]&16&&T(ce,1)):(ce=l0(ee),ce.c(),T(ce,1),ce.m(x.parentNode,x)):ce&&(dt(),E(ce,1,1,()=>{ce=null}),pt()),ee[0].length!==0?ge?(ge.p(ee,fe),fe[0]&1&&T(ge,1)):(ge=u0(ee),ge.c(),T(ge,1),ge.m(P.parentNode,P)):ge&&(dt(),E(ge,1,1,()=>{ge=null}),pt()),ee[5].length!==0?le?(le.p(ee,fe),fe[0]&32&&T(le,1)):(le=h0(ee),le.c(),T(le,1),le.m(L.parentNode,L)):le&&(dt(),E(le,1,1,()=>{le=null}),pt()),ee[1].length!==0?G?(G.p(ee,fe),fe[0]&2&&T(G,1)):(G=p0(ee),G.c(),T(G,1),G.m(D.parentNode,D)):G&&(dt(),E(G,1,1,()=>{G=null}),pt())},i(ee){B||(T(r.$$.fragment,ee),T(a.$$.fragment,ee),T(_),T(ce),T(ge),T(le),T(G),B=!0)},o(ee){E(r.$$.fragment,ee),E(a.$$.fragment,ee),E(_),E(ce),E(ge),E(le),E(G),B=!1},d(ee){ee&&(S(e),S(t),S(s),S(c),S(b),S(x),S(P),S(L),S(D)),U(r,ee),U(a,ee),ve[d].d(ee),ce&&ce.d(ee),ge&&ge.d(ee),le&&le.d(ee),G&&G.d(ee)}}}function _0(i){return i.sort(()=>.5-Math.random()).slice(0,5)}function _L(i,e,n){let t=null,r=[],s=[],a=[],o=[],c=[],d=!1,_=!1,b,x=[];const P=async()=>{const Xe=await fetch("/api/social/users",{method:"GET",headers:{"Content-Type":"application/json"}});if(!Xe.ok){const ct=`[Connections.svelte] ERROR: ${Xe.status}`;throw new Error(ct)}n(0,r=await Xe.json())},L=async()=>{const Xe=await fetch("/api/social/friends",{method:"GET",headers:{"Content-Type":"application/json"}});if(!Xe.ok){const zt=`[Connections.svelte] ERROR: ${Xe.status}`;throw new Error(zt)}n(3,s=await Xe.json());const ct=await fetch("/api/social/blocks",{method:"GET",headers:{"Content-Type":"application/json"}});if(!ct.ok){const zt=`[Connections.svelte] ERROR: ${ct.status}`;throw new Error(zt)}const mt=await ct.json(),Dt=s.filter(zt=>!mt.includes(zt.id));n(3,s=Dt)},D=async()=>{const Xe=await fetch("/api/social/friend_requests",{method:"GET",headers:{"Content-Type":"application/json"}});if(!Xe.ok){const mt=`[Connections.svelte] ERROR: ${Xe.status}`;throw new Error(mt)}const ct=await Xe.json();n(4,a=ct.incoming),n(5,o=ct.outgoing)},B=async Xe=>{if(await D(),o.some(mt=>String(mt.friend_id)===String(Xe))){Ia.warning("Friend request already sent!");return}const ct=await fetch("/api/social/friend_requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:Xe})});if(ct.ok)Ia.success("Friend request sent!");else{const mt=`[Connections.svelte] ERROR: ${ct.status}`;throw new Error(mt)}P(),L(),D()},Z=async Xe=>{const ct=await fetch(`/api/social/friend_requests/${Xe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:Xe})});if(!ct.ok){const mt=`[Connections.svelte] ERROR: ${ct.status}`;throw new Error(mt)}P(),L(),D()},W=async Xe=>{const ct=await fetch(`/api/social/friend_requests/${Xe}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!ct.ok){const mt=`[Connections.svelte] ERROR: ${ct.status}`;throw new Error(mt)}P(),L(),D()},Q=async Xe=>{const ct=await fetch(`/api/social/friends/${Xe}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Xe})});if(!ct.ok){const mt=`[Connections.svelte] ERROR: ${ct.status}`;throw new Error(mt)}P(),L(),D()},ve=async Xe=>{const ct=await fetch(`/api/social/users/block/${Xe}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(ct.ok)Q(Xe);else{const mt=`[Connections.svelte] ERROR: ${ct.status}`;throw new Error(mt)}W(Xe),P(),L(),ce()},re=async Xe=>{const ct=await fetch(`/api/social/users/unblock/${Xe}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!ct.ok){const mt=`[Connections.svelte] ERROR: ${ct.status}`;throw new Error(mt)}P(),L(),ce()},ce=async()=>{const Xe=await fetch("/api/social/blocks",{method:"GET",headers:{"Content-Type":"application/json"}});if(!Xe.ok){const ct=`[Connections.svelte] ERROR: ${Xe.status}`;throw new Error(ct)}n(1,c=await Xe.json()),P(),L(),D()},ge=async()=>{n(7,_=!0);let ct=await(await fetch(`/api/social/users/search-by-nickname?nickname=${encodeURIComponent(b)}`)).json();ct=ct.filter(mt=>mt.id!==(t==null?void 0:t.id)),n(8,x=ct),n(7,_=!1)};Qn(P),Qn(L),Qn(D),Qn(ce),Qn(async()=>{const Xe=await fetch("/api/social/users/show",{});Xe.ok&&(t=await Xe.json())});const le=()=>{n(2,b=""),n(6,d=!0)};function G(Xe){b=Xe,n(2,b)}const ee=Xe=>{B(Xe),n(6,d=!1)};function fe(Xe){d=Xe,n(6,d)}const $e=Xe=>{Q(Xe.id)},he=Xe=>{ve(Xe.id)},ke=Xe=>{Z(Xe.id)},Ue=Xe=>{W(Xe.id)},Ie=Xe=>B(Xe.id),nt=Xe=>re(Xe.id);return i.$$.update=()=>{i.$$.dirty[0]&4&&b!=null&&b.trim()&&ge(),i.$$.dirty[0]&3&&n(0,r=r.filter(Xe=>Array.isArray(c)&&!c.some(ct=>ct.id===Xe.id)))},[r,c,b,s,a,o,d,_,x,B,Z,W,Q,ve,re,le,G,ee,fe,$e,he,ke,Ue,Ie,nt]}class gL extends st{constructor(e){super(),it(this,e,_L,mL,rt,{},null,[-1,-1])}}function vL(i){let e;return{c(){e=je(i[2])},l(n){e=qe(n,i[2])},m(n,t){R(n,e,t)},p(n,t){t&4&&Ft(e,n[2])},d(n){n&&S(e)}}}function yL(i){let e,n,t,r;return e=new ms({props:{tag:"h2",class:"mb-3",$$slots:{default:[vL]},$$scope:{ctx:i}}}),t=new hi({}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1028&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function bL(i){let e,n,t;var r=i[1];function s(a,o){return{}}return r&&(e=Bf(r,s())),{c(){e&&N(e.$$.fragment),n=Be()},l(a){e&&j(e.$$.fragment,a),n=Be()},m(a,o){e&&V(e,a,o),R(a,n,o),t=!0},p(a,o){if(o&2&&r!==(r=a[1])){if(e){dt();const c=e;E(c.$$.fragment,1,0,()=>{U(c,1)}),pt()}r?(e=Bf(r,s()),N(e.$$.fragment),T(e.$$.fragment,1),V(e,n.parentNode,n)):e=null}},i(a){t||(e&&T(e.$$.fragment,a),t=!0)},o(a){e&&E(e.$$.fragment,a),t=!1},d(a){a&&S(n),e&&U(e,a)}}}function $L(i){let e,n,t,r,s;return n=new Br({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[yL]},$$scope:{ctx:i}}}),r=new Er({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[6]}px);`,$$slots:{default:[bL]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=me(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=we(e);j(n.$$.fragment,o),o.forEach(S),t=_e(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[8](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const c={};o&1028&&(c.$$scope={dirty:o,ctx:a}),n.$set(c);const d={};o&64&&(d.style=`height: calc(100% - ${a[6]}px);`),o&1026&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[8](null),U(r,a)}}}function wL(i){let e,n,t,r,s,a,o,c,d,_,b,x,P="Feed",L,D,B,Z,W,Q,ve="Connections",re,ce,ge,le;return document.title=e=i[2]+" - Social Network",s=new tr({props:{class:"relative p-4 h-full",$$slots:{default:[$L]},$$scope:{ctx:i}}}),_=new B2({props:{class:"h-5 w-5"}}),Z=new gx({props:{class:"h-5 w-5"}}),{c(){n=me(),t=oe("div"),r=oe("div"),N(s.$$.fragment),o=me(),c=oe("div"),d=oe("a"),N(_.$$.fragment),b=me(),x=oe("span"),x.textContent=P,D=me(),B=oe("a"),N(Z.$$.fragment),W=me(),Q=oe("span"),Q.textContent=ve,this.h()},l(G){yv("svelte-hbok3p",document.head).forEach(S),n=_e(G),t=ae(G,"DIV",{class:!0});var fe=we(t);r=ae(fe,"DIV",{class:!0,style:!0});var $e=we(r);j(s.$$.fragment,$e),$e.forEach(S),o=_e(fe),c=ae(fe,"DIV",{class:!0});var he=we(c);d=ae(he,"A",{class:!0,href:!0,"data-testid":!0});var ke=we(d);j(_.$$.fragment,ke),b=_e(ke),x=ae(ke,"SPAN",{class:!0,"data-svelte-h":!0}),on(x)!=="svelte-oj2kup"&&(x.textContent=P),ke.forEach(S),D=_e(he),B=ae(he,"A",{class:!0,href:!0,"data-testid":!0});var Ue=we(B);j(Z.$$.fragment,Ue),W=_e(Ue),Q=ae(Ue,"SPAN",{class:!0,"data-svelte-h":!0}),on(Q)!=="svelte-s36po"&&(Q.textContent=ve),Ue.forEach(S),he.forEach(S),fe.forEach(S),this.h()},h(){ne(r,"class","flex flex-col p-4 relative"),ne(r,"style",a=`height: calc(100% - ${i[4]}px);`),ne(x,"class","btm-nav-label text-neutral-content font-medium"),ne(d,"class",L="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(i[0]===Rn.SOCIAL_NETWORK_FEED?" bg-secondary/30":"")),ne(d,"href",`/app/${Rn.SOCIAL_NETWORK_FEED}`),ne(d,"data-testid","social-network-feed-button"),cr(d,"active",i[0]===Rn.SOCIAL_NETWORK_FEED),ne(Q,"class","btm-nav-label text-neutral-content font-medium"),ne(B,"class",re="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(i[0]===Rn.SOCIAL_NETWORK_CONNECTIONS?" bg-secondary/30":"")),ne(B,"href",`/app/${Rn.SOCIAL_NETWORK_CONNECTIONS}`),ne(B,"data-testid","social-network-connections-button"),cr(B,"active",i[0]===Rn.SOCIAL_NETWORK_CONNECTIONS),ne(c,"class","btm-nav static max-sm:btm-nav-md"),ne(t,"class","flex grow flex-col relative h-full")},m(G,ee){R(G,n,ee),R(G,t,ee),ue(t,r),V(s,r,null),ue(t,o),ue(t,c),ue(c,d),V(_,d,null),ue(d,b),ue(d,x),ue(c,D),ue(c,B),V(Z,B,null),ue(B,W),ue(B,Q),i[9](c),ce=!0,ge||(le=$t(window,"resize",i[7]),ge=!0)},p(G,[ee]){(!ce||ee&4)&&e!==(e=G[2]+" - Social Network")&&(document.title=e);const fe={};ee&1126&&(fe.$$scope={dirty:ee,ctx:G}),s.$set(fe),(!ce||ee&16&&a!==(a=`height: calc(100% - ${G[4]}px);`))&&ne(r,"style",a),(!ce||ee&1&&L!==(L="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(G[0]===Rn.SOCIAL_NETWORK_FEED?" bg-secondary/30":"")))&&ne(d,"class",L),(!ce||ee&1)&&cr(d,"active",G[0]===Rn.SOCIAL_NETWORK_FEED),(!ce||ee&1&&re!==(re="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(G[0]===Rn.SOCIAL_NETWORK_CONNECTIONS?" bg-secondary/30":"")))&&ne(B,"class",re),(!ce||ee&1)&&cr(B,"active",G[0]===Rn.SOCIAL_NETWORK_CONNECTIONS)},i(G){ce||(T(s.$$.fragment,G),T(_.$$.fragment,G),T(Z.$$.fragment,G),ce=!0)},o(G){E(s.$$.fragment,G),E(_.$$.fragment,G),E(Z.$$.fragment,G),ce=!1},d(G){G&&(S(n),S(t)),U(s),U(_),U(Z),i[9](null),ge=!1,le()}}}function xL(i,e,n){let{slug:t}=e,r=null,s="",a,o=64,c,d=64;const _=()=>{let P=a.offsetHeight;P!==void 0&&n(4,o=P),P=c.offsetHeight,P!==void 0&&n(6,d=P)};Qn(_);function b(P){Vt[P?"unshift":"push"](()=>{c=P,n(5,c)})}function x(P){Vt[P?"unshift":"push"](()=>{a=P,n(3,a)})}return i.$$set=P=>{"slug"in P&&n(0,t=P.slug)},i.$$.update=()=>{if(i.$$.dirty&1)switch(t){case Rn.SOCIAL_NETWORK_FEED:n(1,r=Pz),n(2,s="Feed");break;case Rn.SOCIAL_NETWORK_CONNECTIONS:n(1,r=gL),n(2,s="Connections");break;default:Ta("/app/"+Rn.SOCIAL_NETWORK_FEED);break}},[t,r,s,a,o,c,d,_,b,x]}class kL extends st{constructor(e){super(),it(this,e,xL,wL,rt,{slug:0})}}function CL(i){let e,n;return{c(){e=je("Total Points: "),n=je(i[0])},l(t){e=qe(t,"Total Points: "),n=qe(t,i[0])},m(t,r){R(t,e,r),R(t,n,r)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&(S(e),S(n))}}}function SL(i){let e,n;return e=new Ma({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function TL(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){ur(e.src,n=ks[i[1].badge])||ne(e,"src",n),ne(e,"class","h-14 w-14 -ml-0.5"),ne(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=$t(e,"error",i[4]),t=!0)},p(s,a){a&2&&!ur(e.src,n=ks[s[1].badge])&&ne(e,"src",n)},i:vt,o:vt,d(s){s&&S(e),t=!1,r()}}}function IL(i){let e,n,t,r,s,a,o=i[1].badge+"",c,d,_,b,x=i[1].previous_threshold+"",P,L,D,B,Z,W=i[1].threshold+"",Q,ve;const re=[TL,SL],ce=[];function ge(le,G){return le[2]?1:0}return t=ge(i),r=ce[t]=re[t](i),{c(){e=oe("div"),n=oe("div"),r.c(),s=me(),a=oe("p"),c=je(o),d=me(),_=oe("div"),b=oe("p"),P=je(x),L=me(),D=oe("progress"),B=me(),Z=oe("p"),Q=je(W),this.h()},l(le){e=ae(le,"DIV",{class:!0});var G=we(e);n=ae(G,"DIV",{class:!0});var ee=we(n);r.l(ee),ee.forEach(S),s=_e(G),a=ae(G,"P",{class:!0});var fe=we(a);c=qe(fe,o),fe.forEach(S),d=_e(G),_=ae(G,"DIV",{class:!0});var $e=we(_);b=ae($e,"P",{class:!0});var he=we(b);P=qe(he,x),he.forEach(S),L=_e($e),D=ae($e,"PROGRESS",{class:!0,max:!0}),we(D).forEach(S),B=_e($e),Z=ae($e,"P",{class:!0});var ke=we(Z);Q=qe(ke,W),ke.forEach(S),$e.forEach(S),G.forEach(S),this.h()},h(){ne(n,"class","shrink-0"),ne(a,"class","text-sm font-medium leading-none"),ne(b,"class","text-sm font-medium leading-none text-muted-foreground"),ne(D,"class","progress progress-error grow"),D.value=i[3],ne(D,"max","100"),ne(Z,"class","text-sm font-medium leading-none text-muted-foreground"),ne(_,"class","flex self-stretch gap-2 items-center"),ne(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(le,G){R(le,e,G),ue(e,n),ce[t].m(n,null),ue(e,s),ue(e,a),ue(a,c),ue(e,d),ue(e,_),ue(_,b),ue(b,P),ue(_,L),ue(_,D),ue(_,B),ue(_,Z),ue(Z,Q),ve=!0},p(le,G){let ee=t;t=ge(le),t===ee?ce[t].p(le,G):(dt(),E(ce[ee],1,1,()=>{ce[ee]=null}),pt(),r=ce[t],r?r.p(le,G):(r=ce[t]=re[t](le),r.c()),T(r,1),r.m(n,null)),(!ve||G&2)&&o!==(o=le[1].badge+"")&&Ft(c,o),(!ve||G&2)&&x!==(x=le[1].previous_threshold+"")&&Ft(P,x),(!ve||G&8)&&(D.value=le[3]),(!ve||G&2)&&W!==(W=le[1].threshold+"")&&Ft(Q,W)},i(le){ve||(T(r),ve=!0)},o(le){E(r),ve=!1},d(le){le&&S(e),ce[t].d()}}}function EL(i){let e,n,t,r;return e=new ms({props:{class:"text-xs",$$slots:{default:[CL]},$$scope:{ctx:i}}}),t=new ji({props:{$$slots:{default:[IL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&270&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function PL(i){let e,n;return e=new Br({props:{class:"p-2",$$slots:{default:[EL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function AL(i){let e,n;return e=new tr({props:{$$slots:{default:[PL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let g0=2e3;function ML(i,e,n){let{totalPoints:t}=e,{inProgressTotalPoints:r}=e,s=!1,a,o=0,c,d;Qn(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),d=Date.now(),c=setInterval(()=>{const x=Date.now()-d;if(x<g0){const P=x/g0;n(3,o=a*fu(P))}else n(3,o=a),clearInterval(c)},2),()=>clearInterval(c)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalPoints"in b&&n(0,t=b.totalPoints),"inProgressTotalPoints"in b&&n(1,r=b.inProgressTotalPoints)},[t,r,s,o,_]}class DL extends st{constructor(e){super(),it(this,e,ML,AL,rt,{totalPoints:0,inProgressTotalPoints:1})}}function zL(i){let e,n;return{c(){e=je("Total Check-ins: "),n=je(i[0])},l(t){e=qe(t,"Total Check-ins: "),n=qe(t,i[0])},m(t,r){R(t,e,r),R(t,n,r)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&(S(e),S(n))}}}function LL(i){let e,n;return e=new Ma({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function RL(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){ur(e.src,n=ks[i[1].badge])||ne(e,"src",n),ne(e,"class","h-14 w-14 -ml-0.5"),ne(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=$t(e,"error",i[4]),t=!0)},p(s,a){a&2&&!ur(e.src,n=ks[s[1].badge])&&ne(e,"src",n)},i:vt,o:vt,d(s){s&&S(e),t=!1,r()}}}function OL(i){let e,n,t,r,s,a,o=i[1].badge+"",c,d,_,b,x=i[1].previous_threshold+"",P,L,D,B,Z,W=i[1].threshold+"",Q,ve;const re=[RL,LL],ce=[];function ge(le,G){return le[2]?1:0}return t=ge(i),r=ce[t]=re[t](i),{c(){e=oe("div"),n=oe("div"),r.c(),s=me(),a=oe("p"),c=je(o),d=me(),_=oe("div"),b=oe("p"),P=je(x),L=me(),D=oe("progress"),B=me(),Z=oe("p"),Q=je(W),this.h()},l(le){e=ae(le,"DIV",{class:!0});var G=we(e);n=ae(G,"DIV",{class:!0});var ee=we(n);r.l(ee),ee.forEach(S),s=_e(G),a=ae(G,"P",{class:!0});var fe=we(a);c=qe(fe,o),fe.forEach(S),d=_e(G),_=ae(G,"DIV",{class:!0});var $e=we(_);b=ae($e,"P",{class:!0});var he=we(b);P=qe(he,x),he.forEach(S),L=_e($e),D=ae($e,"PROGRESS",{class:!0,max:!0}),we(D).forEach(S),B=_e($e),Z=ae($e,"P",{class:!0});var ke=we(Z);Q=qe(ke,W),ke.forEach(S),$e.forEach(S),G.forEach(S),this.h()},h(){ne(n,"class","shrink-0"),ne(a,"class","text-sm font-medium leading-none"),ne(b,"class","text-sm font-medium leading-none text-muted-foreground"),ne(D,"class","progress progress-error grow"),D.value=i[3],ne(D,"max","100"),ne(Z,"class","text-sm font-medium leading-none text-muted-foreground"),ne(_,"class","flex self-stretch gap-2 items-center"),ne(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(le,G){R(le,e,G),ue(e,n),ce[t].m(n,null),ue(e,s),ue(e,a),ue(a,c),ue(e,d),ue(e,_),ue(_,b),ue(b,P),ue(_,L),ue(_,D),ue(_,B),ue(_,Z),ue(Z,Q),ve=!0},p(le,G){let ee=t;t=ge(le),t===ee?ce[t].p(le,G):(dt(),E(ce[ee],1,1,()=>{ce[ee]=null}),pt(),r=ce[t],r?r.p(le,G):(r=ce[t]=re[t](le),r.c()),T(r,1),r.m(n,null)),(!ve||G&2)&&o!==(o=le[1].badge+"")&&Ft(c,o),(!ve||G&2)&&x!==(x=le[1].previous_threshold+"")&&Ft(P,x),(!ve||G&8)&&(D.value=le[3]),(!ve||G&2)&&W!==(W=le[1].threshold+"")&&Ft(Q,W)},i(le){ve||(T(r),ve=!0)},o(le){E(r),ve=!1},d(le){le&&S(e),ce[t].d()}}}function FL(i){let e,n,t,r;return e=new ms({props:{class:"text-xs",$$slots:{default:[zL]},$$scope:{ctx:i}}}),t=new ji({props:{$$slots:{default:[OL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&270&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function BL(i){let e,n;return e=new Br({props:{class:"p-2",$$slots:{default:[FL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function NL(i){let e,n;return e=new tr({props:{$$slots:{default:[BL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let v0=2e3;function VL(i,e,n){let{totalCheckInCounts:t}=e,{inProgressTotalCheckIns:r}=e,s=!1,a,o=0,c,d;Qn(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),d=Date.now(),c=setInterval(()=>{const x=Date.now()-d;if(x<v0){const P=x/v0;n(3,o=a*fu(P))}else n(3,o=a),clearInterval(c)},2),()=>clearInterval(c)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalCheckInCounts"in b&&n(0,t=b.totalCheckInCounts),"inProgressTotalCheckIns"in b&&n(1,r=b.inProgressTotalCheckIns)},[t,r,s,o,_]}class UL extends st{constructor(e){super(),it(this,e,VL,NL,rt,{totalCheckInCounts:0,inProgressTotalCheckIns:1})}}function jL(i){let e,n;return{c(){e=je("Total Photos: "),n=je(i[0])},l(t){e=qe(t,"Total Photos: "),n=qe(t,i[0])},m(t,r){R(t,e,r),R(t,n,r)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&(S(e),S(n))}}}function qL(i){let e,n;return e=new Ma({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function HL(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){ur(e.src,n=ks[i[1].badge])||ne(e,"src",n),ne(e,"class","h-14 w-14 -ml-0.5"),ne(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=$t(e,"error",i[4]),t=!0)},p(s,a){a&2&&!ur(e.src,n=ks[s[1].badge])&&ne(e,"src",n)},i:vt,o:vt,d(s){s&&S(e),t=!1,r()}}}function GL(i){let e,n,t,r,s,a,o=i[1].badge+"",c,d,_,b,x=i[1].previous_threshold+"",P,L,D,B,Z,W=i[1].threshold+"",Q,ve;const re=[HL,qL],ce=[];function ge(le,G){return le[2]?1:0}return t=ge(i),r=ce[t]=re[t](i),{c(){e=oe("div"),n=oe("div"),r.c(),s=me(),a=oe("p"),c=je(o),d=me(),_=oe("div"),b=oe("p"),P=je(x),L=me(),D=oe("progress"),B=me(),Z=oe("p"),Q=je(W),this.h()},l(le){e=ae(le,"DIV",{class:!0});var G=we(e);n=ae(G,"DIV",{class:!0});var ee=we(n);r.l(ee),ee.forEach(S),s=_e(G),a=ae(G,"P",{class:!0});var fe=we(a);c=qe(fe,o),fe.forEach(S),d=_e(G),_=ae(G,"DIV",{class:!0});var $e=we(_);b=ae($e,"P",{class:!0});var he=we(b);P=qe(he,x),he.forEach(S),L=_e($e),D=ae($e,"PROGRESS",{class:!0,max:!0}),we(D).forEach(S),B=_e($e),Z=ae($e,"P",{class:!0});var ke=we(Z);Q=qe(ke,W),ke.forEach(S),$e.forEach(S),G.forEach(S),this.h()},h(){ne(n,"class","shrink-0"),ne(a,"class","text-sm font-medium leading-none"),ne(b,"class","text-sm font-medium leading-none text-muted-foreground"),ne(D,"class","progress progress-error grow"),D.value=i[3],ne(D,"max","100"),ne(Z,"class","text-sm font-medium leading-none text-muted-foreground"),ne(_,"class","flex self-stretch gap-2 items-center"),ne(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(le,G){R(le,e,G),ue(e,n),ce[t].m(n,null),ue(e,s),ue(e,a),ue(a,c),ue(e,d),ue(e,_),ue(_,b),ue(b,P),ue(_,L),ue(_,D),ue(_,B),ue(_,Z),ue(Z,Q),ve=!0},p(le,G){let ee=t;t=ge(le),t===ee?ce[t].p(le,G):(dt(),E(ce[ee],1,1,()=>{ce[ee]=null}),pt(),r=ce[t],r?r.p(le,G):(r=ce[t]=re[t](le),r.c()),T(r,1),r.m(n,null)),(!ve||G&2)&&o!==(o=le[1].badge+"")&&Ft(c,o),(!ve||G&2)&&x!==(x=le[1].previous_threshold+"")&&Ft(P,x),(!ve||G&8)&&(D.value=le[3]),(!ve||G&2)&&W!==(W=le[1].threshold+"")&&Ft(Q,W)},i(le){ve||(T(r),ve=!0)},o(le){E(r),ve=!1},d(le){le&&S(e),ce[t].d()}}}function ZL(i){let e,n,t,r;return e=new ms({props:{class:"text-xs",$$slots:{default:[jL]},$$scope:{ctx:i}}}),t=new ji({props:{$$slots:{default:[GL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&270&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function WL(i){let e,n;return e=new Br({props:{class:"p-2",$$slots:{default:[ZL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function KL(i){let e,n;return e=new tr({props:{$$slots:{default:[WL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let y0=2e3;function XL(i,e,n){let{totalPoiPhotoCounts:t}=e,{inProgressTotalPoiPhotos:r}=e,s=!1,a,o=0,c,d;Qn(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),d=Date.now(),c=setInterval(()=>{const x=Date.now()-d;if(x<y0){const P=x/y0;n(3,o=a*fu(P))}else n(3,o=a),clearInterval(c)},2),()=>clearInterval(c)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalPoiPhotoCounts"in b&&n(0,t=b.totalPoiPhotoCounts),"inProgressTotalPoiPhotos"in b&&n(1,r=b.inProgressTotalPoiPhotos)},[t,r,s,o,_]}class JL extends st{constructor(e){super(),it(this,e,XL,KL,rt,{totalPoiPhotoCounts:0,inProgressTotalPoiPhotos:1})}}function YL(i){let e,n;return{c(){e=je("Total Reviews: "),n=je(i[0])},l(t){e=qe(t,"Total Reviews: "),n=qe(t,i[0])},m(t,r){R(t,e,r),R(t,n,r)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&(S(e),S(n))}}}function QL(i){let e,n;return e=new Ma({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function eR(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){ur(e.src,n=ks[i[1].badge])||ne(e,"src",n),ne(e,"class","h-14 w-14 -ml-0.5"),ne(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=$t(e,"error",i[4]),t=!0)},p(s,a){a&2&&!ur(e.src,n=ks[s[1].badge])&&ne(e,"src",n)},i:vt,o:vt,d(s){s&&S(e),t=!1,r()}}}function tR(i){let e,n,t,r,s,a,o=i[1].badge+"",c,d,_,b,x=i[1].previous_threshold+"",P,L,D,B,Z,W=i[1].threshold+"",Q,ve;const re=[eR,QL],ce=[];function ge(le,G){return le[2]?1:0}return t=ge(i),r=ce[t]=re[t](i),{c(){e=oe("div"),n=oe("div"),r.c(),s=me(),a=oe("p"),c=je(o),d=me(),_=oe("div"),b=oe("p"),P=je(x),L=me(),D=oe("progress"),B=me(),Z=oe("p"),Q=je(W),this.h()},l(le){e=ae(le,"DIV",{class:!0});var G=we(e);n=ae(G,"DIV",{class:!0});var ee=we(n);r.l(ee),ee.forEach(S),s=_e(G),a=ae(G,"P",{class:!0});var fe=we(a);c=qe(fe,o),fe.forEach(S),d=_e(G),_=ae(G,"DIV",{class:!0});var $e=we(_);b=ae($e,"P",{class:!0});var he=we(b);P=qe(he,x),he.forEach(S),L=_e($e),D=ae($e,"PROGRESS",{class:!0,max:!0}),we(D).forEach(S),B=_e($e),Z=ae($e,"P",{class:!0});var ke=we(Z);Q=qe(ke,W),ke.forEach(S),$e.forEach(S),G.forEach(S),this.h()},h(){ne(n,"class","shrink-0"),ne(a,"class","text-sm font-medium leading-none"),ne(b,"class","text-sm font-medium leading-none text-muted-foreground"),ne(D,"class","progress progress-error grow"),D.value=i[3],ne(D,"max","100"),ne(Z,"class","text-sm font-medium leading-none text-muted-foreground"),ne(_,"class","flex self-stretch gap-2 items-center"),ne(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(le,G){R(le,e,G),ue(e,n),ce[t].m(n,null),ue(e,s),ue(e,a),ue(a,c),ue(e,d),ue(e,_),ue(_,b),ue(b,P),ue(_,L),ue(_,D),ue(_,B),ue(_,Z),ue(Z,Q),ve=!0},p(le,G){let ee=t;t=ge(le),t===ee?ce[t].p(le,G):(dt(),E(ce[ee],1,1,()=>{ce[ee]=null}),pt(),r=ce[t],r?r.p(le,G):(r=ce[t]=re[t](le),r.c()),T(r,1),r.m(n,null)),(!ve||G&2)&&o!==(o=le[1].badge+"")&&Ft(c,o),(!ve||G&2)&&x!==(x=le[1].previous_threshold+"")&&Ft(P,x),(!ve||G&8)&&(D.value=le[3]),(!ve||G&2)&&W!==(W=le[1].threshold+"")&&Ft(Q,W)},i(le){ve||(T(r),ve=!0)},o(le){E(r),ve=!1},d(le){le&&S(e),ce[t].d()}}}function nR(i){let e,n,t,r;return e=new ms({props:{class:"text-xs",$$slots:{default:[YL]},$$scope:{ctx:i}}}),t=new ji({props:{$$slots:{default:[tR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&270&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function rR(i){let e,n;return e=new Br({props:{class:"p-2",$$slots:{default:[nR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function sR(i){let e,n;return e=new tr({props:{$$slots:{default:[rR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let b0=2e3;function iR(i,e,n){let{totalPoiReviewCounts:t}=e,{inProgressTotalPoiReviews:r}=e,s=!1,a,o=0,c,d;Qn(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),d=Date.now(),c=setInterval(()=>{const x=Date.now()-d;if(x<b0){const P=x/b0;n(3,o=a*fu(P))}else n(3,o=a),clearInterval(c)},2),()=>clearInterval(c)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalPoiReviewCounts"in b&&n(0,t=b.totalPoiReviewCounts),"inProgressTotalPoiReviews"in b&&n(1,r=b.inProgressTotalPoiReviews)},[t,r,s,o,_]}class oR extends st{constructor(e){super(),it(this,e,iR,sR,rt,{totalPoiReviewCounts:0,inProgressTotalPoiReviews:1})}}function aR(i){let e,n="Your Progression",t,r,s,a,o,c,d,_,b,x,P,L;return s=new DL({props:{totalPoints:i[0],inProgressTotalPoints:i[4]}}),o=new UL({props:{totalCheckInCounts:i[1],inProgressTotalCheckIns:i[5]}}),d=new JL({props:{totalPoiPhotoCounts:i[2],inProgressTotalPoiPhotos:i[6]}}),b=new oR({props:{totalPoiReviewCounts:i[3],inProgressTotalPoiReviews:i[7]}}),P=new hi({props:{class:"mt-3 mb-4"}}),{c(){e=oe("p"),e.textContent=n,t=me(),r=oe("div"),N(s.$$.fragment),a=me(),N(o.$$.fragment),c=me(),N(d.$$.fragment),_=me(),N(b.$$.fragment),x=me(),N(P.$$.fragment),this.h()},l(D){e=ae(D,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-15fyxhe"&&(e.textContent=n),t=_e(D),r=ae(D,"DIV",{class:!0});var B=we(r);j(s.$$.fragment,B),a=_e(B),j(o.$$.fragment,B),c=_e(B),j(d.$$.fragment,B),_=_e(B),j(b.$$.fragment,B),B.forEach(S),x=_e(D),j(P.$$.fragment,D),this.h()},h(){ne(e,"class","text-lg font-medium leading-none text-muted-foreground mb-3"),ne(r,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(D,B){R(D,e,B),R(D,t,B),R(D,r,B),V(s,r,null),ue(r,a),V(o,r,null),ue(r,c),V(d,r,null),ue(r,_),V(b,r,null),R(D,x,B),V(P,D,B),L=!0},p(D,[B]){const Z={};B&1&&(Z.totalPoints=D[0]),B&16&&(Z.inProgressTotalPoints=D[4]),s.$set(Z);const W={};B&2&&(W.totalCheckInCounts=D[1]),B&32&&(W.inProgressTotalCheckIns=D[5]),o.$set(W);const Q={};B&4&&(Q.totalPoiPhotoCounts=D[2]),B&64&&(Q.inProgressTotalPoiPhotos=D[6]),d.$set(Q);const ve={};B&8&&(ve.totalPoiReviewCounts=D[3]),B&128&&(ve.inProgressTotalPoiReviews=D[7]),b.$set(ve)},i(D){L||(T(s.$$.fragment,D),T(o.$$.fragment,D),T(d.$$.fragment,D),T(b.$$.fragment,D),T(P.$$.fragment,D),L=!0)},o(D){E(s.$$.fragment,D),E(o.$$.fragment,D),E(d.$$.fragment,D),E(b.$$.fragment,D),E(P.$$.fragment,D),L=!1},d(D){D&&(S(e),S(t),S(r),S(x)),U(s),U(o),U(d),U(b),U(P,D)}}}function lR(i,e,n){let{totalPoints:t}=e,{totalCheckInCounts:r}=e,{totalPoiPhotoCounts:s}=e,{totalPoiReviewCounts:a}=e,{inProgressTotalPoints:o}=e,{inProgressTotalCheckIns:c}=e,{inProgressTotalPoiPhotos:d}=e,{inProgressTotalPoiReviews:_}=e;return i.$$set=b=>{"totalPoints"in b&&n(0,t=b.totalPoints),"totalCheckInCounts"in b&&n(1,r=b.totalCheckInCounts),"totalPoiPhotoCounts"in b&&n(2,s=b.totalPoiPhotoCounts),"totalPoiReviewCounts"in b&&n(3,a=b.totalPoiReviewCounts),"inProgressTotalPoints"in b&&n(4,o=b.inProgressTotalPoints),"inProgressTotalCheckIns"in b&&n(5,c=b.inProgressTotalCheckIns),"inProgressTotalPoiPhotos"in b&&n(6,d=b.inProgressTotalPoiPhotos),"inProgressTotalPoiReviews"in b&&n(7,_=b.inProgressTotalPoiReviews)},[t,r,s,a,o,c,d,_]}class cR extends st{constructor(e){super(),it(this,e,lR,aR,rt,{totalPoints:0,totalCheckInCounts:1,totalPoiPhotoCounts:2,totalPoiReviewCounts:3,inProgressTotalPoints:4,inProgressTotalCheckIns:5,inProgressTotalPoiPhotos:6,inProgressTotalPoiReviews:7})}}function uR(i){let e,n;return e=new Ma({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function fR(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){ur(e.src,n=ks[i[0].badge])||ne(e,"src",n),ne(e,"class","h-14 w-14 -ml-0.5"),ne(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=$t(e,"error",i[3]),t=!0)},p(s,a){a&1&&!ur(e.src,n=ks[s[0].badge])&&ne(e,"src",n)},i:vt,o:vt,d(s){s&&S(e),t=!1,r()}}}function hR(i){let e,n,t=i[0].badge+"",r,s,a,o,c,d,_,b=i[0].threshold+"",x,P,L,D;const B=[fR,uR],Z=[];function W(Q,ve){return Q[2]?1:0}return o=W(i),c=Z[o]=B[o](i),{c(){e=oe("div"),n=oe("p"),r=je(t),s=me(),a=oe("div"),c.c(),d=me(),_=oe("p"),x=je(b),P=me(),L=je(i[1]),this.h()},l(Q){e=ae(Q,"DIV",{class:!0});var ve=we(e);n=ae(ve,"P",{class:!0});var re=we(n);r=qe(re,t),re.forEach(S),s=_e(ve),a=ae(ve,"DIV",{class:!0});var ce=we(a);c.l(ce),ce.forEach(S),d=_e(ve),_=ae(ve,"P",{class:!0});var ge=we(_);x=qe(ge,b),P=_e(ge),L=qe(ge,i[1]),ge.forEach(S),ve.forEach(S),this.h()},h(){ne(n,"class","text-sm font-medium leading-none"),ne(a,"class","shrink-0"),ne(_,"class","text-xs"),ne(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(Q,ve){R(Q,e,ve),ue(e,n),ue(n,r),ue(e,s),ue(e,a),Z[o].m(a,null),ue(e,d),ue(e,_),ue(_,x),ue(_,P),ue(_,L),D=!0},p(Q,ve){(!D||ve&1)&&t!==(t=Q[0].badge+"")&&Ft(r,t);let re=o;o=W(Q),o===re?Z[o].p(Q,ve):(dt(),E(Z[re],1,1,()=>{Z[re]=null}),pt(),c=Z[o],c?c.p(Q,ve):(c=Z[o]=B[o](Q),c.c()),T(c,1),c.m(a,null)),(!D||ve&1)&&b!==(b=Q[0].threshold+"")&&Ft(x,b),(!D||ve&2)&&Ft(L,Q[1])},i(Q){D||(T(c),D=!0)},o(Q){E(c),D=!1},d(Q){Q&&S(e),Z[o].d()}}}function dR(i){let e,n;return e=new ji({props:{$$slots:{default:[hR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function pR(i){let e,n;return e=new Br({props:{class:"p-2",$$slots:{default:[dR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function mR(i){let e,n;return e=new tr({props:{$$slots:{default:[pR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function _R(i,e,n){let{badgeStatus:t}=e,{appendix:r}=e,s=!1;const a=()=>n(2,s=!0);return i.$$set=o=>{"badgeStatus"in o&&n(0,t=o.badgeStatus),"appendix"in o&&n(1,r=o.appendix)},[t,r,s,a]}class ub extends st{constructor(e){super(),it(this,e,_R,mR,rt,{badgeStatus:0,appendix:1})}}function $0(i,e,n){const t=i.slice();return t[7]=e[n],t}function w0(i,e,n){const t=i.slice();return t[7]=e[n],t}function gR(i){let e,n=[],t=new Map,r,s=Jt(i[0]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let c=w0(i,s,o),d=a(c);t.set(d,n[o]=x0(d,c))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);for(let d=0;d<n.length;d+=1)n[d].l(c);c.forEach(S),this.h()},h(){ne(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2 mb-3")},m(o,c){R(o,e,c);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,c){c&1&&(s=Jt(o[0]),dt(),n=Ir(n,c,a,1,o,s,t,e,Fr,x0,null,w0),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(n[c]);r=!0}},o(o){for(let c=0;c<n.length;c+=1)E(n[c]);r=!1},d(o){o&&S(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function vR(i){let e,n="<p>You have achieved all possible milestones, congratulations!</p>";return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-apfzai"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","flex justify-center items-center p-4")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function x0(i,e){let n,t,r;return t=new ub({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function yR(i){let e,n;return e=new La({props:{$$slots:{default:[SR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bR(i){let e;return{c(){e=je("Show All Others")},l(n){e=qe(n,"Show All Others")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function $R(i){let e,n;return e=new Nn({props:{class:"grow",variant:"outline",$$slots:{default:[bR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wR(i){let e;return{c(){e=je("All Other Upcoming Milestones")},l(n){e=qe(n,"All Other Upcoming Milestones")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function k0(i,e){let n,t,r;return t=new ub({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function xR(i){let e,n=[],t=new Map,r,s=Jt(i[1]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let c=$0(i,s,o),d=a(c);t.set(d,n[o]=k0(d,c))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);for(let d=0;d<n.length;d+=1)n[d].l(c);c.forEach(S),this.h()},h(){ne(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(o,c){R(o,e,c);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,c){c&2&&(s=Jt(o[1]),dt(),n=Ir(n,c,a,1,o,s,t,e,Fr,k0,null,$0),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(n[c]);r=!0}},o(o){for(let c=0;c<n.length;c+=1)E(n[c]);r=!1},d(o){o&&S(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function kR(i){let e,n,t,r;return e=new lp({props:{class:"mb-4",$$slots:{default:[wR]},$$scope:{ctx:i}}}),t=new mu({props:{$$slots:{default:[xR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&4096&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function CR(i){let e,n;return e=new pu({props:{$$slots:{default:[kR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function SR(i){let e,n,t,r;return e=new vy({props:{class:"flex",$$slots:{default:[$R]},$$scope:{ctx:i}}}),t=new za({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[CR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&4096&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function TR(i){let e,n="Upcoming Milestones",t,r,s,a,o,c,d;const _=[vR,gR],b=[];function x(L,D){return L[0].length===0?0:1}r=x(i),s=b[r]=_[r](i);let P=i[1].length>0&&yR(i);return c=new hi({props:{class:"mt-3 mb-4"}}),{c(){e=oe("p"),e.textContent=n,t=me(),s.c(),a=me(),P&&P.c(),o=me(),N(c.$$.fragment),this.h()},l(L){e=ae(L,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1cur427"&&(e.textContent=n),t=_e(L),s.l(L),a=_e(L),P&&P.l(L),o=_e(L),j(c.$$.fragment,L),this.h()},h(){ne(e,"class","text-lg font-medium leading-none text-muted-foreground mb-3")},m(L,D){R(L,e,D),R(L,t,D),b[r].m(L,D),R(L,a,D),P&&P.m(L,D),R(L,o,D),V(c,L,D),d=!0},p(L,[D]){s.p(L,D),L[1].length>0&&P.p(L,D)},i(L){d||(T(s),T(P),T(c.$$.fragment,L),d=!0)},o(L){E(s),E(P),E(c.$$.fragment,L),d=!1},d(L){L&&(S(e),S(t),S(a),S(o)),b[r].d(L),P&&P.d(L),U(c,L)}}}function IR(i,e,n){let{lockedTotalPoints:t}=e,{lockedTotalCheckIns:r}=e,{lockedTotalPoiPhotos:s}=e,{lockedTotalPoiReviews:a}=e;const o=(_,b)=>_.map(x=>({value:x,appendix:b})),c=[o(t,"Total Points")[0],o(r,"Total Check-ins")[0],o(s,"Total Photos")[0],o(a,"Total Reviews")[0]].concat([...o(t.slice(1),"Total Points"),...o(r.slice(1),"Total Check-ins"),...o(s.slice(1),"Total Photos"),...o(a.slice(1),"Total Reviews")]).filter(_=>_!==void 0).slice(0,4),d=[...o(t,"Total Points"),...o(r,"Total Check-ins"),...o(s,"Total Photos"),...o(a,"Total Reviews")].filter(_=>_!==void 0&&!c.some(({value:b})=>b===_.value));return i.$$set=_=>{"lockedTotalPoints"in _&&n(2,t=_.lockedTotalPoints),"lockedTotalCheckIns"in _&&n(3,r=_.lockedTotalCheckIns),"lockedTotalPoiPhotos"in _&&n(4,s=_.lockedTotalPoiPhotos),"lockedTotalPoiReviews"in _&&n(5,a=_.lockedTotalPoiReviews)},[c,d,t,r,s,a]}class ER extends st{constructor(e){super(),it(this,e,IR,TR,rt,{lockedTotalPoints:2,lockedTotalCheckIns:3,lockedTotalPoiPhotos:4,lockedTotalPoiReviews:5})}}function PR(i){let e,n;return e=new Ma({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function AR(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){ur(e.src,n=ks[i[0].badge])||ne(e,"src",n),ne(e,"class","h-14 w-14 -ml-0.5"),ne(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=$t(e,"error",i[3]),t=!0)},p(s,a){a&1&&!ur(e.src,n=ks[s[0].badge])&&ne(e,"src",n)},i:vt,o:vt,d(s){s&&S(e),t=!1,r()}}}function MR(i){let e,n,t=i[0].badge+"",r,s,a,o,c,d,_,b=i[0].threshold+"",x,P,L,D;const B=[AR,PR],Z=[];function W(Q,ve){return Q[2]?1:0}return o=W(i),c=Z[o]=B[o](i),{c(){e=oe("div"),n=oe("p"),r=je(t),s=me(),a=oe("div"),c.c(),d=me(),_=oe("p"),x=je(b),P=me(),L=je(i[1]),this.h()},l(Q){e=ae(Q,"DIV",{class:!0});var ve=we(e);n=ae(ve,"P",{class:!0});var re=we(n);r=qe(re,t),re.forEach(S),s=_e(ve),a=ae(ve,"DIV",{class:!0});var ce=we(a);c.l(ce),ce.forEach(S),d=_e(ve),_=ae(ve,"P",{class:!0});var ge=we(_);x=qe(ge,b),P=_e(ge),L=qe(ge,i[1]),ge.forEach(S),ve.forEach(S),this.h()},h(){ne(n,"class","text-sm font-medium leading-none"),ne(a,"class","shrink-0"),ne(_,"class","text-xs"),ne(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(Q,ve){R(Q,e,ve),ue(e,n),ue(n,r),ue(e,s),ue(e,a),Z[o].m(a,null),ue(e,d),ue(e,_),ue(_,x),ue(_,P),ue(_,L),D=!0},p(Q,ve){(!D||ve&1)&&t!==(t=Q[0].badge+"")&&Ft(r,t);let re=o;o=W(Q),o===re?Z[o].p(Q,ve):(dt(),E(Z[re],1,1,()=>{Z[re]=null}),pt(),c=Z[o],c?c.p(Q,ve):(c=Z[o]=B[o](Q),c.c()),T(c,1),c.m(a,null)),(!D||ve&1)&&b!==(b=Q[0].threshold+"")&&Ft(x,b),(!D||ve&2)&&Ft(L,Q[1])},i(Q){D||(T(c),D=!0)},o(Q){E(c),D=!1},d(Q){Q&&S(e),Z[o].d()}}}function DR(i){let e,n;return e=new ji({props:{$$slots:{default:[MR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function zR(i){let e,n;return e=new Br({props:{class:"p-2",$$slots:{default:[DR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function LR(i){let e,n;return e=new tr({props:{$$slots:{default:[zR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function RR(i,e,n){let{badgeStatus:t}=e,{appendix:r}=e,s=!1;const a=()=>n(2,s=!0);return i.$$set=o=>{"badgeStatus"in o&&n(0,t=o.badgeStatus),"appendix"in o&&n(1,r=o.appendix)},[t,r,s,a]}class fb extends st{constructor(e){super(),it(this,e,RR,LR,rt,{badgeStatus:0,appendix:1})}}function C0(i,e,n){const t=i.slice();return t[7]=e[n],t}function S0(i,e,n){const t=i.slice();return t[7]=e[n],t}function OR(i){let e,n=[],t=new Map,r,s=Jt(i[0]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let c=S0(i,s,o),d=a(c);t.set(d,n[o]=T0(d,c))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);for(let d=0;d<n.length;d+=1)n[d].l(c);c.forEach(S),this.h()},h(){ne(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2 mb-3")},m(o,c){R(o,e,c);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,c){c&1&&(s=Jt(o[0]),dt(),n=Ir(n,c,a,1,o,s,t,e,Fr,T0,null,S0),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(n[c]);r=!0}},o(o){for(let c=0;c<n.length;c+=1)E(n[c]);r=!1},d(o){o&&S(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function FR(i){let e,n="<p>Currently you do not have any past achievements</p>";return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-mb704s"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","flex justify-center items-center p-4")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function T0(i,e){let n,t,r;return t=new fb({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function BR(i){let e,n;return e=new La({props:{$$slots:{default:[GR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function NR(i){let e;return{c(){e=je("Show All Others")},l(n){e=qe(n,"Show All Others")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function VR(i){let e,n;return e=new Nn({props:{class:"grow",variant:"outline",$$slots:{default:[NR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function UR(i){let e;return{c(){e=je("All Other Past Achievements")},l(n){e=qe(n,"All Other Past Achievements")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function I0(i,e){let n,t,r;return t=new fb({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function jR(i){let e,n=[],t=new Map,r,s=Jt(i[1]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let c=C0(i,s,o),d=a(c);t.set(d,n[o]=I0(d,c))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);for(let d=0;d<n.length;d+=1)n[d].l(c);c.forEach(S),this.h()},h(){ne(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(o,c){R(o,e,c);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,c){c&2&&(s=Jt(o[1]),dt(),n=Ir(n,c,a,1,o,s,t,e,Fr,I0,null,C0),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(n[c]);r=!0}},o(o){for(let c=0;c<n.length;c+=1)E(n[c]);r=!1},d(o){o&&S(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function qR(i){let e,n,t,r;return e=new lp({props:{class:"mb-4",$$slots:{default:[UR]},$$scope:{ctx:i}}}),t=new mu({props:{$$slots:{default:[jR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&4096&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function HR(i){let e,n;return e=new pu({props:{$$slots:{default:[qR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function GR(i){let e,n,t,r;return e=new vy({props:{class:"flex",$$slots:{default:[VR]},$$scope:{ctx:i}}}),t=new za({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[HR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&4096&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function ZR(i){let e,n="Past Achievements",t,r,s,a,o,c;const d=[FR,OR],_=[];function b(P,L){return P[0].length===0?0:1}r=b(i),s=_[r]=d[r](i);let x=i[1].length>0&&BR(i);return{c(){e=oe("p"),e.textContent=n,t=me(),s.c(),a=me(),x&&x.c(),o=Be(),this.h()},l(P){e=ae(P,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-kqqb76"&&(e.textContent=n),t=_e(P),s.l(P),a=_e(P),x&&x.l(P),o=Be(),this.h()},h(){ne(e,"class","text-lg font-medium leading-none text-muted-foreground mb-3")},m(P,L){R(P,e,L),R(P,t,L),_[r].m(P,L),R(P,a,L),x&&x.m(P,L),R(P,o,L),c=!0},p(P,[L]){s.p(P,L),P[1].length>0&&x.p(P,L)},i(P){c||(T(s),T(x),c=!0)},o(P){E(s),E(x),c=!1},d(P){P&&(S(e),S(t),S(a),S(o)),_[r].d(P),x&&x.d(P)}}}function WR(i,e,n){let{achievedTotalPoints:t}=e,{achievedTotalCheckIns:r}=e,{achievedTotalPoiPhotos:s}=e,{achievedTotalPoiReviews:a}=e;const o=(_,b)=>_.map(x=>({value:x,appendix:b})),c=[o(t,"Total Points")[0],o(r,"Total Check-ins")[0],o(s,"Total Photos")[0],o(a,"Total Reviews")[0]].concat([...o(t.slice(1),"Total Points"),...o(r.slice(1),"Total Check-ins"),...o(s.slice(1),"Total Photos"),...o(a.slice(1),"Total Reviews")]).filter(_=>_!==void 0).slice(0,4),d=[...o(t,"Total Points"),...o(r,"Total Check-ins"),...o(s,"Total Photos"),...o(a,"Total Reviews")].filter(_=>_!==void 0&&!c.some(({value:b})=>b===_.value));return i.$$set=_=>{"achievedTotalPoints"in _&&n(2,t=_.achievedTotalPoints),"achievedTotalCheckIns"in _&&n(3,r=_.achievedTotalCheckIns),"achievedTotalPoiPhotos"in _&&n(4,s=_.achievedTotalPoiPhotos),"achievedTotalPoiReviews"in _&&n(5,a=_.achievedTotalPoiReviews)},[c,d,t,r,s,a]}class KR extends st{constructor(e){super(),it(this,e,WR,ZR,rt,{achievedTotalPoints:2,achievedTotalCheckIns:3,achievedTotalPoiPhotos:4,achievedTotalPoiReviews:5})}}function XR(i){let e;return{c(){e=je("Points & Badges")},l(n){e=qe(n,"Points & Badges")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function JR(i){let e,n;return e=new Tv({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function YR(i){let e,n;return e=new Nn({props:{"aria-label":"Additional Information",builders:[i[18]],variant:"secondary",size:"icon",$$slots:{default:[JR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.builders=[t[18]]),r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function QR(i){let e,n,t,r,s,a='<h4 class="text-sm font-semibold">Note</h4> <p class="text-sm">Total Points are calculated according to this formula:</p> <p class="italic text-xs">total_points = 20 * total_check_ins + 10 * total_photos + 5 * total_reviews</p>',o;return t=new Tv({props:{className:"h-4 w-4"}}),{c(){e=oe("div"),n=oe("div"),N(t.$$.fragment),r=me(),s=oe("div"),s.innerHTML=a,this.h()},l(c){e=ae(c,"DIV",{class:!0});var d=we(e);n=ae(d,"DIV",{class:!0});var _=we(n);j(t.$$.fragment,_),_.forEach(S),r=_e(d),s=ae(d,"DIV",{class:!0,"data-svelte-h":!0}),on(s)!=="svelte-4zeadu"&&(s.innerHTML=a),d.forEach(S),this.h()},h(){ne(n,"class","shrink-0"),ne(s,"class","space-y-1"),ne(e,"class","flex justify-between space-x-4")},m(c,d){R(c,e,d),ue(e,n),V(t,n,null),ue(e,r),ue(e,s),o=!0},p:vt,i(c){o||(T(t.$$.fragment,c),o=!0)},o(c){E(t.$$.fragment,c),o=!1},d(c){c&&S(e),U(t)}}}function eO(i){let e,n,t,r;return e=new Cv({props:{asChild:!0,$$slots:{default:[YR,({builder:s})=>({18:s}),({builder:s})=>s?262144:0]},$$scope:{ctx:i}}}),t=new Sv({props:{class:"w-80",$$slots:{default:[QR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&786432&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&524288&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function tO(i){let e,n,t,r,s,a,o;return n=new ms({props:{tag:"h2",$$slots:{default:[XR]},$$scope:{ctx:i}}}),r=new kv({props:{portal:null,$$slots:{default:[eO]},$$scope:{ctx:i}}}),a=new hi({}),{c(){e=oe("div"),N(n.$$.fragment),t=me(),N(r.$$.fragment),s=me(),N(a.$$.fragment),this.h()},l(c){e=ae(c,"DIV",{class:!0});var d=we(e);j(n.$$.fragment,d),t=_e(d),j(r.$$.fragment,d),d.forEach(S),s=_e(c),j(a.$$.fragment,c),this.h()},h(){ne(e,"class","flex justify-between mb-3 items-center")},m(c,d){R(c,e,d),V(n,e,null),ue(e,t),V(r,e,null),R(c,s,d),V(a,c,d),o=!0},p(c,d){const _={};d&524288&&(_.$$scope={dirty:d,ctx:c}),n.$set(_);const b={};d&524288&&(b.$$scope={dirty:d,ctx:c}),r.$set(b)},i(c){o||(T(n.$$.fragment,c),T(r.$$.fragment,c),T(a.$$.fragment,c),o=!0)},o(c){E(n.$$.fragment,c),E(r.$$.fragment,c),E(a.$$.fragment,c),o=!1},d(c){c&&(S(e),S(s)),U(n),U(r),U(a,c)}}}function nO(i){let e,n,t,r,s,a;return e=new cR({props:{totalPoints:i[3],totalCheckInCounts:i[4],totalPoiPhotoCounts:i[5],totalPoiReviewCounts:i[6],inProgressTotalPoints:i[12](i[7]),inProgressTotalCheckIns:i[12](i[8]),inProgressTotalPoiPhotos:i[12](i[9]),inProgressTotalPoiReviews:i[12](i[10])}}),t=new ER({props:{lockedTotalPoints:i[13](i[7]),lockedTotalCheckIns:i[13](i[8]),lockedTotalPoiPhotos:i[13](i[9]),lockedTotalPoiReviews:i[13](i[10])}}),s=new KR({props:{achievedTotalPoints:i[14](i[7]),achievedTotalCheckIns:i[14](i[8]),achievedTotalPoiPhotos:i[14](i[9]),achievedTotalPoiReviews:i[14](i[10])}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o),r=_e(o),j(s.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),R(o,r,c),V(s,o,c),a=!0},p(o,c){const d={};c&8&&(d.totalPoints=o[3]),c&16&&(d.totalCheckInCounts=o[4]),c&32&&(d.totalPoiPhotoCounts=o[5]),c&64&&(d.totalPoiReviewCounts=o[6]),c&128&&(d.inProgressTotalPoints=o[12](o[7])),c&256&&(d.inProgressTotalCheckIns=o[12](o[8])),c&512&&(d.inProgressTotalPoiPhotos=o[12](o[9])),c&1024&&(d.inProgressTotalPoiReviews=o[12](o[10])),e.$set(d);const _={};c&128&&(_.lockedTotalPoints=o[13](o[7])),c&256&&(_.lockedTotalCheckIns=o[13](o[8])),c&512&&(_.lockedTotalPoiPhotos=o[13](o[9])),c&1024&&(_.lockedTotalPoiReviews=o[13](o[10])),t.$set(_);const b={};c&128&&(b.achievedTotalPoints=o[14](o[7])),c&256&&(b.achievedTotalCheckIns=o[14](o[8])),c&512&&(b.achievedTotalPoiPhotos=o[14](o[9])),c&1024&&(b.achievedTotalPoiReviews=o[14](o[10])),s.$set(b)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function rO(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function sO(i){let e,n,t,r;const s=[rO,nO],a=[];function o(c,d){return c[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function iO(i){let e,n,t,r,s;return n=new Br({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[tO]},$$scope:{ctx:i}}}),r=new Er({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[sO]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=me(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=we(e);j(n.$$.fragment,o),o.forEach(S),t=_e(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[15](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const c={};o&524288&&(c.$$scope={dirty:o,ctx:a}),n.$set(c);const d={};o&2&&(d.style=`height: calc(100% - ${a[1]}px);`),o&526332&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[15](null),U(r,a)}}}function oO(i){let e,n,t,r,s;return n=new tr({props:{class:"relative p-4 h-full",$$slots:{default:[iO]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=we(e);j(n.$$.fragment,o),o.forEach(S),this.h()},h(){ne(e,"class","flex flex-col p-4 relative h-full")},m(a,o){R(a,e,o),V(n,e,null),t=!0,r||(s=$t(window,"resize",i[11]),r=!0)},p(a,[o]){const c={};o&526335&&(c.$$scope={dirty:o,ctx:a}),n.$set(c)},i(a){t||(T(n.$$.fragment,a),t=!0)},o(a){E(n.$$.fragment,a),t=!1},d(a){a&&S(e),U(n),r=!1,s()}}}const aO=Ef({status:Fw([kd("ACHIEVED"),kd("IN PROGRESS"),kd("LOCKED")]),badge:Bw(ks),threshold:yl,previous_threshold:yl});function lO(i,e,n){let t,r=64;const s=()=>{const re=t.offsetHeight;re!==void 0&&n(1,r=re)};Qn(s);let a=!0,o,c,d,_,b,x,P,L;const D=re=>{if(!Array.isArray(re))return console.error("Badge statuses are not an array"),[];const ce=[];return re.forEach(ge=>{const le=aO.decode(ge);if(Yf.isRight(le)){const G=le.right;ce.push(G)}else console.error("Invalid BadgeStatus object received from API: ",le.left)}),ce};Qn(async()=>{const re=["totalPoints","totalCheckInCounts","totalPoiPhotoCounts","totalPoiReviewCounts","badgeStatusesForTotalPoints","badgeStatusesForTotalCheckInCounts","badgeStatusesForTotalPoiPhotoCounts","badgeStatusesForTotalPoiReviewCounts"],ce=await fetch("/api/points-badges");if(ce.ok){const ge=await ce.json();if(re.some(le=>ge[le]===void 0)){console.error("Undefined data returned from API");return}if(typeof ge.totalPoints!="number"||typeof ge.totalCheckInCounts!="number"||typeof ge.totalPoiPhotoCounts!="number"||typeof ge.totalPoiReviewCounts!="number"){console.error("Data returned from API has unexpected type");return}n(7,b=D(ge.badgeStatusesForTotalPoints)),n(8,x=D(ge.badgeStatusesForTotalCheckInCounts)),n(9,P=D(ge.badgeStatusesForTotalPoiPhotoCounts)),n(10,L=D(ge.badgeStatusesForTotalPoiReviewCounts)),n(3,{totalPoints:o,totalCheckInCounts:c,totalPoiPhotoCounts:d,totalPoiReviewCounts:_}=ge,o,n(4,c),n(5,d),n(6,_)),n(2,a=!1)}});const Z=re=>re.find(({status:ce})=>ce==="IN PROGRESS")??re.slice(-1)[0],W=re=>re.filter(({status:ce})=>ce==="LOCKED"),Q=re=>re.filter(({status:ce})=>ce==="ACHIEVED").reverse();function ve(re){Vt[re?"unshift":"push"](()=>{t=re,n(0,t)})}return[t,r,a,o,c,d,_,b,x,P,L,s,Z,W,Q,ve]}class cO extends st{constructor(e){super(),it(this,e,lO,oO,rt,{})}}function uO(i){let e,n;return{c(){e=oe("span"),n=je(i[0]),this.h()},l(t){e=ae(t,"SPAN",{class:!0});var r=we(e);n=qe(r,i[0]),r.forEach(S),this.h()},h(){ne(e,"class","lg:max-w-[320px] sm:max-w-[160px] max-w-[80px] truncate font-medium")},m(t,r){R(t,e,r),ue(e,n)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&S(e)}}}function fO(i){let e,n;return{c(){e=oe("div"),n=je(i[0]),this.h()},l(t){e=ae(t,"DIV",{class:!0});var r=we(e);n=qe(r,i[0]),r.forEach(S),this.h()},h(){ne(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r),ue(e,n)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&S(e)}}}function hO(i){let e,n,t,r;return e=new jo({props:{$$slots:{default:[uO]},$$scope:{ctx:i}}}),t=new qo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[fO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&3&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&3&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function dO(i){let e,n,t;return n=new No({props:{$$slots:{default:[hO]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","flex space-x-2")},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,[s]){const a={};s&3&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function pO(i,e,n){let{value:t}=e;return i.$$set=r=>{"value"in r&&n(0,t=r.value)},[t]}let E0=class extends st{constructor(e){super(),it(this,e,pO,dO,rt,{value:0})}};function mO(i){let e;const n=i[4].default,t=kt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&Ct(t,n,r,r[5],e?Tt(n,r[5],s,null):St(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function _O(i){let e,n,t,r;return n=new lu({props:{$$slots:{default:[CO]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(s){e=ae(s,"DIV",{class:!0});var a=we(e);j(n.$$.fragment,a),a.forEach(S),this.h()},h(){ne(e,"class",t=Ut("flex items-center",i[0]))},m(s,a){R(s,e,a),V(n,e,null),r=!0},p(s,a){const o={};a&34&&(o.$$scope={dirty:a,ctx:s}),n.$set(o),(!r||a&1&&t!==(t=Ut("flex items-center",s[0])))&&ne(e,"class",t)},i(s){r||(T(n.$$.fragment,s),r=!0)},o(s){E(n.$$.fragment,s),r=!1},d(s){s&&S(e),U(n)}}}function gO(i){let e,n;return e=new Iv({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function vO(i){let e,n;return e=new Ev({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function yO(i){let e,n;return e=new Pv({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bO(i){let e,n,t,r,s;const a=i[4].default,o=kt(a,i,i[5],null),c=[yO,vO,gO],d=[];function _(b,x){return b[1].sort.order==="desc"?0:b[1].sort.order==="asc"?1:2}return n=_(i),t=d[n]=c[n](i),{c(){o&&o.c(),e=me(),t.c(),r=Be()},l(b){o&&o.l(b),e=_e(b),t.l(b),r=Be()},m(b,x){o&&o.m(b,x),R(b,e,x),d[n].m(b,x),R(b,r,x),s=!0},p(b,x){o&&o.p&&(!s||x&32)&&Ct(o,a,b,b[5],s?Tt(a,b[5],x,null):St(b[5]),null);let P=n;n=_(b),n!==P&&(dt(),E(d[P],1,1,()=>{d[P]=null}),pt(),t=d[n],t||(t=d[n]=c[n](b),t.c()),T(t,1),t.m(r.parentNode,r))},i(b){s||(T(o,b),T(t),s=!0)},o(b){E(o,b),E(t),s=!1},d(b){b&&(S(e),S(r)),o&&o.d(b),d[n].d(b)}}}function $O(i){let e,n;return e=new Yr({props:{variant:"ghost",builders:[i[6]],class:"-ml-3 h-8 data-[state=open]:bg-accent",$$slots:{default:[bO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&64&&(s.builders=[t[6]]),r&34&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wO(i){let e;return{c(){e=je("Asc")},l(n){e=qe(n,"Asc")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function xO(i){let e;return{c(){e=je("Desc")},l(n){e=qe(n,"Desc")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function kO(i){let e,n,t,r;return e=new Nf({props:{$$slots:{default:[wO]},$$scope:{ctx:i}}}),e.$on("click",i[2]),t=new Nf({props:{$$slots:{default:[xO]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&32&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function CO(i){let e,n,t,r;return e=new cu({props:{asChild:!0,$$slots:{default:[$O,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:i}}}),t=new uu({props:{align:"start",$$slots:{default:[kO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&98&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&32&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function SO(i){let e,n,t,r;const s=[_O,mO],a=[];function o(c,d){return c[1].sort.disabled?1:0}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function TO(i,e,n){let{$$slots:t={},$$scope:r}=e,{class:s=void 0}=e,{props:a}=e;function o(d){a.sort.order!=="asc"&&a.sort.toggle(d)}function c(d){a.sort.order!=="desc"&&a.sort.toggle(d)}return i.$$set=d=>{"class"in d&&n(0,s=d.class),"props"in d&&n(1,a=d.props),"$$scope"in d&&n(5,r=d.$$scope)},[s,a,o,c,t,r]}let IO=class extends st{constructor(e){super(),it(this,e,TO,SO,rt,{class:0,props:1})}};function P0(i){let e,n;return e=new Yr({props:{variant:"outline",class:"h-8 px-2 lg:px-3",$$slots:{default:[EO]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function EO(i){let e,n;return e=new Mv({props:{class:"h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function PO(i){let e,n,t,r,s,a,o,c,d,_,b,x,P;function L(Q){i[5](Q)}let D={placeholder:"Filter by name...",class:"h-8 sm:w-[250px] lg:w-[350px] grow sm:grow-0 lg:grow-0 md:grow hover:bg-accent hover:text-accent-foreground bg-background focus-visible:m-0.5",type:"search"};i[1].name!==void 0&&(D.value=i[1].name),n=new Av({props:D}),Vt.push(()=>$n(n,"value",L));function B(Q){i[6](Q)}let Z={title:"POI Features",options:i[2]};i[1].features!==void 0&&(Z.filterValues=i[1].features),c=new f8({props:Z}),Vt.push(()=>$n(c,"filterValues",B));let W=i[3]&&P0(i);return x=new $8({props:{tableModel:i[0]}}),{c(){e=oe("div"),N(n.$$.fragment),r=me(),s=oe("div"),a=oe("div"),o=oe("div"),N(c.$$.fragment),_=me(),W&&W.c(),b=me(),N(x.$$.fragment),this.h()},l(Q){e=ae(Q,"DIV",{class:!0});var ve=we(e);j(n.$$.fragment,ve),r=_e(ve),s=ae(ve,"DIV",{class:!0});var re=we(s);a=ae(re,"DIV",{class:!0});var ce=we(a);o=ae(ce,"DIV",{class:!0});var ge=we(o);j(c.$$.fragment,ge),_=_e(ge),W&&W.l(ge),ge.forEach(S),ce.forEach(S),b=_e(re),j(x.$$.fragment,re),re.forEach(S),ve.forEach(S),this.h()},h(){ne(o,"class","flex items-center gap-2 w-full"),ne(a,"class","relative overflow-x-auto flex sm:overflow-x-visible"),ne(s,"class","flex flex-1 sm:items-center grow justify-between gap-2 flex-col sm:flex-row relative overflow-x-auto sm:overflow-x-visible"),ne(e,"class","flex items-center gap-2 flex-wrap")},m(Q,ve){R(Q,e,ve),V(n,e,null),ue(e,r),ue(e,s),ue(s,a),ue(a,o),V(c,o,null),ue(o,_),W&&W.m(o,null),ue(s,b),V(x,s,null),P=!0},p(Q,[ve]){const re={};!t&&ve&2&&(t=!0,re.value=Q[1].name,bn(()=>t=!1)),n.$set(re);const ce={};ve&4&&(ce.options=Q[2]),!d&&ve&2&&(d=!0,ce.filterValues=Q[1].features,bn(()=>d=!1)),c.$set(ce),Q[3]?W?(W.p(Q,ve),ve&8&&T(W,1)):(W=P0(Q),W.c(),T(W,1),W.m(o,null)):W&&(dt(),E(W,1,1,()=>{W=null}),pt());const ge={};ve&1&&(ge.tableModel=Q[0]),x.$set(ge)},i(Q){P||(T(n.$$.fragment,Q),T(c.$$.fragment,Q),T(W),T(x.$$.fragment,Q),P=!0)},o(Q){E(n.$$.fragment,Q),E(c.$$.fragment,Q),E(W),E(x.$$.fragment,Q),P=!1},d(Q){Q&&S(e),U(n),U(c),W&&W.d(),U(x)}}}function AO(i,e,n){let t,r,{tableModel:s}=e,a;Qn(async()=>{try{const L=await(await fetch("/api/poi/features")).json();n(2,a=L.allPOIFeatures)}catch(P){console.error(P)}});const{pluginStates:c}=s,{filterValues:d}=c.colFilter;sn(i,d,P=>n(1,r=P));function _(P){i.$$.not_equal(r.name,P)&&(r.name=P,d.set(r))}function b(P){i.$$.not_equal(r.features,P)&&(r.features=P,d.set(r))}const x=()=>{Or(d,r.name="",r),Or(d,r.features=[],r)};return i.$$set=P=>{"tableModel"in P&&n(0,s=P.tableModel)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=Object.values({...r}).some(P=>P.length>0||typeof P=="string"&&P.length>0))},[s,r,a,t,d,_,b,x]}let MO=class extends st{constructor(e){super(),it(this,e,AO,PO,rt,{tableModel:0})}};function DO(i){let e,n;return e=new Nv({props:{placeholder:"Select page size"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function zO(i){let e;return{c(){e=je("10")},l(n){e=qe(n,"10")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function LO(i){let e;return{c(){e=je("20")},l(n){e=qe(n,"20")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function RO(i){let e;return{c(){e=je("30")},l(n){e=qe(n,"30")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function OO(i){let e;return{c(){e=je("40")},l(n){e=qe(n,"40")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function FO(i){let e;return{c(){e=je("50")},l(n){e=qe(n,"50")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function BO(i){let e,n,t,r,s,a,o,c,d,_;return e=new Fi({props:{value:"10",$$slots:{default:[zO]},$$scope:{ctx:i}}}),t=new Fi({props:{value:"20",$$slots:{default:[LO]},$$scope:{ctx:i}}}),s=new Fi({props:{value:"30",$$slots:{default:[RO]},$$scope:{ctx:i}}}),o=new Fi({props:{value:"40",$$slots:{default:[OO]},$$scope:{ctx:i}}}),d=new Fi({props:{value:"50",$$slots:{default:[FO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),N(s.$$.fragment),a=me(),N(o.$$.fragment),c=me(),N(d.$$.fragment)},l(b){j(e.$$.fragment,b),n=_e(b),j(t.$$.fragment,b),r=_e(b),j(s.$$.fragment,b),a=_e(b),j(o.$$.fragment,b),c=_e(b),j(d.$$.fragment,b)},m(b,x){V(e,b,x),R(b,n,x),V(t,b,x),R(b,r,x),V(s,b,x),R(b,a,x),V(o,b,x),R(b,c,x),V(d,b,x),_=!0},p(b,x){const P={};x&1048576&&(P.$$scope={dirty:x,ctx:b}),e.$set(P);const L={};x&1048576&&(L.$$scope={dirty:x,ctx:b}),t.$set(L);const D={};x&1048576&&(D.$$scope={dirty:x,ctx:b}),s.$set(D);const B={};x&1048576&&(B.$$scope={dirty:x,ctx:b}),o.$set(B);const Z={};x&1048576&&(Z.$$scope={dirty:x,ctx:b}),d.$set(Z)},i(b){_||(T(e.$$.fragment,b),T(t.$$.fragment,b),T(s.$$.fragment,b),T(o.$$.fragment,b),T(d.$$.fragment,b),_=!0)},o(b){E(e.$$.fragment,b),E(t.$$.fragment,b),E(s.$$.fragment,b),E(o.$$.fragment,b),E(d.$$.fragment,b),_=!1},d(b){b&&(S(n),S(r),S(a),S(c)),U(e,b),U(t,b),U(s,b),U(o,b),U(d,b)}}}function NO(i){let e,n,t,r;return e=new zv({props:{class:"w-[180px]",$$slots:{default:[DO]},$$scope:{ctx:i}}}),t=new Lv({props:{$$slots:{default:[BO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1048576&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&1048576&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function VO(i){let e,n="Go to first page",t,r,s;return r=new Rv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=me(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-lc32pz"&&(e.textContent=n),t=_e(a),j(r.$$.fragment,a),this.h()},h(){ne(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:vt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function UO(i){let e,n="Go to previous page",t,r,s;return r=new Ov({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=me(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-2don1e"&&(e.textContent=n),t=_e(a),j(r.$$.fragment,a),this.h()},h(){ne(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:vt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function jO(i){let e,n="Go to next page",t,r,s;return r=new Fv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=me(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-10zd0e2"&&(e.textContent=n),t=_e(a),j(r.$$.fragment,a),this.h()},h(){ne(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:vt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function qO(i){let e,n="Go to last page",t,r,s;return r=new Bv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=me(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-17pj58n"&&(e.textContent=n),t=_e(a),j(r.$$.fragment,a),this.h()},h(){ne(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:vt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function HO(i){let e,n,t,r="Rows per page",s,a,o,c,d,_=i[0]+1+"",b,x,P,L,D,B,Z,W,Q,ve,re,ce,ge;return a=new Dv({props:{onSelectedChange:i[14],selected:{value:10,label:"10"},$$slots:{default:[NO]},$$scope:{ctx:i}}}),B=new Yr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[VO]},$$scope:{ctx:i}}}),B.$on("click",i[15]),W=new Yr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[UO]},$$scope:{ctx:i}}}),W.$on("click",i[16]),ve=new Yr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[jO]},$$scope:{ctx:i}}}),ve.$on("click",i[17]),ce=new Yr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[qO]},$$scope:{ctx:i}}}),ce.$on("click",i[18]),{c(){e=oe("div"),n=oe("div"),t=oe("p"),t.textContent=r,s=me(),N(a.$$.fragment),o=me(),c=oe("div"),d=je("Page "),b=je(_),x=je(" of "),P=je(i[1]),L=me(),D=oe("div"),N(B.$$.fragment),Z=me(),N(W.$$.fragment),Q=me(),N(ve.$$.fragment),re=me(),N(ce.$$.fragment),this.h()},l(le){e=ae(le,"DIV",{class:!0});var G=we(e);n=ae(G,"DIV",{class:!0});var ee=we(n);t=ae(ee,"P",{class:!0,"data-svelte-h":!0}),on(t)!=="svelte-opj3eb"&&(t.textContent=r),s=_e(ee),j(a.$$.fragment,ee),ee.forEach(S),o=_e(G),c=ae(G,"DIV",{class:!0});var fe=we(c);d=qe(fe,"Page "),b=qe(fe,_),x=qe(fe," of "),P=qe(fe,i[1]),fe.forEach(S),L=_e(G),D=ae(G,"DIV",{class:!0});var $e=we(D);j(B.$$.fragment,$e),Z=_e($e),j(W.$$.fragment,$e),Q=_e($e),j(ve.$$.fragment,$e),re=_e($e),j(ce.$$.fragment,$e),$e.forEach(S),G.forEach(S),this.h()},h(){ne(t,"class","text-sm font-medium"),ne(n,"class","flex items-center space-x-2"),ne(c,"class","flex w-[100px] items-center justify-center text-sm font-medium"),ne(D,"class","flex items-center space-x-2"),ne(e,"class","flex items-center space-x-6 lg:space-x-8 flex-wrap gap-2")},m(le,G){R(le,e,G),ue(e,n),ue(n,t),ue(n,s),V(a,n,null),ue(e,o),ue(e,c),ue(c,d),ue(c,b),ue(c,x),ue(c,P),ue(e,L),ue(e,D),V(B,D,null),ue(D,Z),V(W,D,null),ue(D,Q),V(ve,D,null),ue(D,re),V(ce,D,null),ge=!0},p(le,[G]){const ee={};G&1048576&&(ee.$$scope={dirty:G,ctx:le}),a.$set(ee),(!ge||G&1)&&_!==(_=le[0]+1+"")&&Ft(b,_),(!ge||G&2)&&Ft(P,le[1]);const fe={};G&4&&(fe.disabled=!le[2]),G&1048576&&(fe.$$scope={dirty:G,ctx:le}),B.$set(fe);const $e={};G&4&&($e.disabled=!le[2]),G&1048576&&($e.$$scope={dirty:G,ctx:le}),W.$set($e);const he={};G&8&&(he.disabled=!le[3]),G&1048576&&(he.$$scope={dirty:G,ctx:le}),ve.$set(he);const ke={};G&8&&(ke.disabled=!le[3]),G&1048576&&(ke.$$scope={dirty:G,ctx:le}),ce.$set(ke)},i(le){ge||(T(a.$$.fragment,le),T(B.$$.fragment,le),T(W.$$.fragment,le),T(ve.$$.fragment,le),T(ce.$$.fragment,le),ge=!0)},o(le){E(a.$$.fragment,le),E(B.$$.fragment,le),E(W.$$.fragment,le),E(ve.$$.fragment,le),E(ce.$$.fragment,le),ge=!1},d(le){le&&S(e),U(a),U(B),U(W),U(ve),U(ce)}}}function GO(i,e,n){let t,r,s,a,o,c,{tableModel:d}=e;const{pageRows:_,pluginStates:b,rows:x}=d;sn(i,_,ge=>n(5,c=ge)),sn(i,x,ge=>n(4,o=ge));const{hasNextPage:P,hasPreviousPage:L,pageIndex:D,pageCount:B,pageSize:Z}=b.page;sn(i,P,ge=>n(3,a=ge)),sn(i,L,ge=>n(2,s=ge)),sn(i,D,ge=>n(0,t=ge)),sn(i,B,ge=>n(1,r=ge));const W=ge=>Z.set(Number(ge==null?void 0:ge.value)),Q=()=>Or(D,t=0,t),ve=()=>Or(D,t=t-1,t),re=()=>Or(D,t=t+1,t),ce=()=>Or(D,t=Math.ceil(o.length/c.length)-1,t);return i.$$set=ge=>{"tableModel"in ge&&n(13,d=ge.tableModel)},[t,r,s,a,o,c,_,x,P,L,D,B,Z,d,W,Q,ve,re,ce]}let ZO=class extends st{constructor(e){super(),it(this,e,GO,HO,rt,{tableModel:13})}};function A0(i,e,n){const t=i.slice();return t[9]=e[n],t}function M0(i,e,n){const t=i.slice();return t[9]=e[n],t}function D0(i){let e,n,t,r,s,a,o,c;e=new hi({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new ho({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[WO]},$$scope:{ctx:i}}});const d=[XO,KO],_=[];function b(x,P){return x[0].length>2?0:1}return a=b(i),o=_[a]=d[a](i),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),s=oe("div"),o.c(),this.h()},l(x){j(e.$$.fragment,x),n=_e(x),j(t.$$.fragment,x),r=_e(x),s=ae(x,"DIV",{class:!0});var P=we(s);o.l(P),P.forEach(S),this.h()},h(){ne(s,"class","hidden space-x-1 lg:flex")},m(x,P){V(e,x,P),R(x,n,P),V(t,x,P),R(x,r,P),R(x,s,P),_[a].m(s,null),c=!0},p(x,P){const L={};P&32769&&(L.$$scope={dirty:P,ctx:x}),t.$set(L);let D=a;a=b(x),a===D?_[a].p(x,P):(dt(),E(_[D],1,1,()=>{_[D]=null}),pt(),o=_[a],o?o.p(x,P):(o=_[a]=d[a](x),o.c()),T(o,1),o.m(s,null))},i(x){c||(T(e.$$.fragment,x),T(t.$$.fragment,x),T(o),c=!0)},o(x){E(e.$$.fragment,x),E(t.$$.fragment,x),E(o),c=!1},d(x){x&&(S(n),S(r),S(s)),U(e,x),U(t,x),_[a].d()}}}function WO(i){let e=i[0].length+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&Ft(n,e)},d(t){t&&S(n)}}}function KO(i){let e,n,t=Jt(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=z0(M0(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Be()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Be()},m(a,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&1){t=Jt(a[0]);let c;for(c=0;c<t.length;c+=1){const d=M0(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=z0(d),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function XO(i){let e,n;return e=new ho({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[YO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function JO(i){let e=i[9]+"",n,t;return{c(){n=je(e),t=me()},l(r){n=qe(r,e),t=_e(r)},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[9]+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function z0(i){let e,n;return e=new ho({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[JO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function YO(i){let e=i[0].length+"",n,t;return{c(){n=je(e),t=je(" Selected")},l(r){n=qe(r,e),t=qe(r," Selected")},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function QO(i){let e,n,t,r,s,a;e=new Wd({props:{class:"mr-2 h-4 w-4"}});let o=i[0].length>0&&D0(i);return{c(){N(e.$$.fragment),n=me(),t=je(i[1]),r=me(),o&&o.c(),s=Be()},l(c){j(e.$$.fragment,c),n=_e(c),t=qe(c,i[1]),r=_e(c),o&&o.l(c),s=Be()},m(c,d){V(e,c,d),R(c,n,d),R(c,t,d),R(c,r,d),o&&o.m(c,d),R(c,s,d),a=!0},p(c,d){(!a||d&2)&&Ft(t,c[1]),c[0].length>0?o?(o.p(c,d),d&1&&T(o,1)):(o=D0(c),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(dt(),E(o,1,1,()=>{o=null}),pt())},i(c){a||(T(e.$$.fragment,c),T(o),a=!0)},o(c){E(e.$$.fragment,c),E(o),a=!1},d(c){c&&(S(n),S(t),S(r),S(s)),U(e,c),o&&o.d(c)}}}function e8(i){let e,n;return e=new Yr({props:{builders:[i[12]],variant:"outline",size:"sm",class:"h-8 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[QO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&32771&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function t8(i){let e;return{c(){e=je("No results found.")},l(n){e=qe(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function L0(i){let e,n=i[3][i[9]]+"",t;return{c(){e=oe("span"),t=je(n),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=we(e);t=qe(s,n),s.forEach(S),this.h()},h(){ne(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){R(r,e,s),ue(e,t)},p(r,s){s&12&&n!==(n=r[3][r[9]]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function n8(i){let e,n,t,r,s,a=i[9]+"",o,c,d,_;n=new Kd({props:{className:Ut("h-4 w-4")}});let b=i[3][i[9]]&&L0(i);return{c(){e=oe("div"),N(n.$$.fragment),r=me(),s=oe("span"),o=je(a),c=me(),b&&b.c(),d=me(),this.h()},l(x){e=ae(x,"DIV",{class:!0});var P=we(e);j(n.$$.fragment,P),P.forEach(S),r=_e(x),s=ae(x,"SPAN",{});var L=we(s);o=qe(L,a),L.forEach(S),c=_e(x),b&&b.l(x),d=_e(x),this.h()},h(){ne(e,"class",t=Ut("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m(x,P){R(x,e,P),V(n,e,null),R(x,r,P),R(x,s,P),ue(s,o),R(x,c,P),b&&b.m(x,P),R(x,d,P),_=!0},p(x,P){(!_||P&5&&t!==(t=Ut("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",x[0].includes(x[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&ne(e,"class",t),(!_||P&4)&&a!==(a=x[9]+"")&&Ft(o,a),x[3][x[9]]?b?b.p(x,P):(b=L0(x),b.c(),b.m(d.parentNode,d)):b&&(b.d(1),b=null)},i(x){_||(T(n.$$.fragment,x),_=!0)},o(x){E(n.$$.fragment,x),_=!1},d(x){x&&(S(e),S(r),S(s),S(c),S(d)),U(n),b&&b.d(x)}}}function R0(i){let e,n;return e=new Il({props:{class:"cursor-pointer",value:i[9],onSelect:i[6],$$slots:{default:[n8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[9]),r&32781&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function r8(i){let e,n,t=Jt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=R0(A0(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Be()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Be()},m(a,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&45){t=Jt(a[2]);let c;for(c=0;c<t.length;c+=1){const d=A0(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=R0(d),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function O0(i){let e,n,t,r;return e=new _p({}),t=new Il({props:{class:"justify-center text-center cursor-pointer",onSelect:i[7],$$slots:{default:[s8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.onSelect=s[7]),a&32768&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function s8(i){let e;return{c(){e=je("Clear Filter")},l(n){e=qe(n,"Clear Filter")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function i8(i){let e,n,t,r,s,a;e=new hp({props:{$$slots:{default:[t8]},$$scope:{ctx:i}}}),t=new dp({props:{$$slots:{default:[r8]},$$scope:{ctx:i}}});let o=i[0].length>0&&O0(i);return{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),o&&o.c(),s=Be()},l(c){j(e.$$.fragment,c),n=_e(c),j(t.$$.fragment,c),r=_e(c),o&&o.l(c),s=Be()},m(c,d){V(e,c,d),R(c,n,d),V(t,c,d),R(c,r,d),o&&o.m(c,d),R(c,s,d),a=!0},p(c,d){const _={};d&32768&&(_.$$scope={dirty:d,ctx:c}),e.$set(_);const b={};d&32781&&(b.$$scope={dirty:d,ctx:c}),t.$set(b),c[0].length>0?o?(o.p(c,d),d&1&&T(o,1)):(o=O0(c),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(dt(),E(o,1,1,()=>{o=null}),pt())},i(c){a||(T(e.$$.fragment,c),T(t.$$.fragment,c),T(o),a=!0)},o(c){E(e.$$.fragment,c),E(t.$$.fragment,c),E(o),a=!1},d(c){c&&(S(n),S(r),S(s)),U(e,c),U(t,c),o&&o.d(c)}}}function o8(i){let e,n,t,r;return e=new pp({props:{placeholder:i[1]}}),t=new mp({props:{$$slots:{default:[i8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.placeholder=s[1]),e.$set(o);const c={};a&32781&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function a8(i){let e,n;return e=new fp({props:{loop:!0,$$slots:{default:[o8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function l8(i){let e,n,t,r;return e=new yp({props:{asChild:!0,$$slots:{default:[e8,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new gp({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[a8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&36867&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&32783&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function c8(i){let e,n,t;function r(a){i[8](a)}let s={$$slots:{default:[l8]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.open=i[4]),e=new vp({props:s}),Vt.push(()=>$n(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,[o]){const c={};o&32783&&(c.$$scope={dirty:o,ctx:a}),!n&&o&16&&(n=!0,c.open=a[4],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function u8(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{options:s}=e,{counts:a={}}=e,o=!1;const c=x=>{Array.isArray(t)&&t.includes(x)?n(0,t=t.filter(P=>P!==x)):n(0,t=[...Array.isArray(t)?t:[],x])},d=x=>{c(x)},_=()=>{n(0,t=[])};function b(x){o=x,n(4,o)}return i.$$set=x=>{"filterValues"in x&&n(0,t=x.filterValues),"title"in x&&n(1,r=x.title),"options"in x&&n(2,s=x.options),"counts"in x&&n(3,a=x.counts)},[t,r,s,a,o,c,d,_,b]}let f8=class extends st{constructor(e){super(),it(this,e,u8,c8,rt,{filterValues:0,title:1,options:2,counts:3})}};function F0(i,e,n){const t=i.slice();return t[9]=e[n],t[10]=e,t[11]=n,t}function h8(i){let e,n,t;return e=new jv({props:{class:"mr-2 h-4 w-4"}}),{c(){N(e.$$.fragment),n=je(`
			View`)},l(r){j(e.$$.fragment,r),n=qe(r,`
			View`)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:vt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function d8(i){let e,n;return e=new Yr({props:{variant:"outline",size:"sm",class:"h-8 flex hover:bg-accent hover:text-accent-foreground bg-background",builders:[i[12]],$$slots:{default:[h8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&8192&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function p8(i){let e;return{c(){e=je("Toggle columns")},l(n){e=qe(n,"Toggle columns")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function m8(i){let e,n,t;function r(a){i[5](a,i[9])}let s={$$slots:{default:[_8]},$$scope:{ctx:i}};return i[0][i[9].id]!==void 0&&(s.checked=i[0][i[9].id]),e=new qv({props:s}),Vt.push(()=>$n(e,"checked",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){i=a;const c={};o&8192&&(c.$$scope={dirty:o,ctx:i}),!n&&o&3&&(n=!0,c.checked=i[0][i[9].id],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function _8(i){let e=i[9].header+"",n,t;return{c(){n=je(e),t=me()},l(r){n=qe(r,e),t=_e(r)},m(r,s){R(r,n,s),R(r,t,s)},p:vt,d(r){r&&(S(n),S(t))}}}function B0(i){let e=i[3].includes(i[9].id),n,t,r=e&&m8(i);return{c(){r&&r.c(),n=Be()},l(s){r&&r.l(s),n=Be()},m(s,a){r&&r.m(s,a),R(s,n,a),t=!0},p(s,a){e&&r.p(s,a)},i(s){t||(T(r),t=!0)},o(s){E(r),t=!1},d(s){s&&S(n),r&&r.d(s)}}}function g8(i){let e,n,t,r,s,a;e=new Vv({props:{$$slots:{default:[p8]},$$scope:{ctx:i}}}),t=new Uv({});let o=Jt(i[1]),c=[];for(let _=0;_<o.length;_+=1)c[_]=B0(F0(i,o,_));const d=_=>E(c[_],1,1,()=>{c[_]=null});return{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me();for(let _=0;_<c.length;_+=1)c[_].c();s=Be()},l(_){j(e.$$.fragment,_),n=_e(_),j(t.$$.fragment,_),r=_e(_);for(let b=0;b<c.length;b+=1)c[b].l(_);s=Be()},m(_,b){V(e,_,b),R(_,n,b),V(t,_,b),R(_,r,b);for(let x=0;x<c.length;x+=1)c[x]&&c[x].m(_,b);R(_,s,b),a=!0},p(_,b){const x={};if(b&8192&&(x.$$scope={dirty:b,ctx:_}),e.$set(x),b&11){o=Jt(_[1]);let P;for(P=0;P<o.length;P+=1){const L=F0(_,o,P);c[P]?(c[P].p(L,b),T(c[P],1)):(c[P]=B0(L),c[P].c(),T(c[P],1),c[P].m(s.parentNode,s))}for(dt(),P=o.length;P<c.length;P+=1)d(P);pt()}},i(_){if(!a){T(e.$$.fragment,_),T(t.$$.fragment,_);for(let b=0;b<o.length;b+=1)T(c[b]);a=!0}},o(_){E(e.$$.fragment,_),E(t.$$.fragment,_),c=c.filter(Boolean);for(let b=0;b<c.length;b+=1)E(c[b]);a=!1},d(_){_&&(S(n),S(r),S(s)),U(e,_),U(t,_),as(c,_)}}}function v8(i){let e,n,t,r;return e=new cu({props:{asChild:!0,$$slots:{default:[d8,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new uu({props:{$$slots:{default:[g8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&12288&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&8193&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function y8(i){let e,n;return e=new lu({props:{$$slots:{default:[v8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&8193&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function b8(i,e,n){let t,{tableModel:r}=e;const{pluginStates:s,flatColumns:a}=r,{hiddenColumnIds:o}=s.hide;sn(i,o,x=>n(6,t=x));const c=a.map(x=>x.id);let d=Object.fromEntries(c.map(x=>[x,!0]));const _=["name","features"];function b(x,P){i.$$.not_equal(d[P.id],x)&&(d[P.id]=x,n(0,d))}return i.$$set=x=>{"tableModel"in x&&n(4,r=x.tableModel)},i.$$.update=()=>{i.$$.dirty&1&&Or(o,t=Object.entries(d).filter(([,x])=>!x).map(([x])=>x),t)},[d,a,o,_,r,b]}let $8=class extends st{constructor(e){super(),it(this,e,b8,y8,rt,{tableModel:4})}};function N0(i,e,n){const t=i.slice();return t[14]=e[n],t}function V0(i,e,n){const t=i.slice();return t[18]=e[n],t}function U0(i,e,n){const t=i.slice();return t[22]=e[n],t}function j0(i,e,n){const t=i.slice();return t[18]=e[n],t}function w8(i){let e,n;return e=new Jf({props:{of:i[18].render()}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.of=t[18].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function x8(i){let e,n;return e=new IO({props:{props:i[27],$$slots:{default:[w8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&134217728&&(s.props=t[27]),r&268435460&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function k8(i){let e,n,t;const r=[i[21]];let s={$$slots:{default:[x8]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Se(s,r[a]);return e=new Qv({props:s}),{c(){N(e.$$.fragment),n=me()},l(a){j(e.$$.fragment,a),n=_e(a)},m(a,o){V(e,a,o),R(a,n,o),t=!0},p(a,o){const c=o&2097152?Mt(r,[dn(a[21])]):{};o&402653188&&(c.$$scope={dirty:o,ctx:a}),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){a&&S(n),U(e,a)}}}function q0(i,e){let n,t,r;return t=new Ho({props:{attrs:e[18].attrs(),props:e[18].props(),$$slots:{default:[k8,({attrs:s,props:a})=>({21:s,27:a}),({attrs:s,props:a})=>(s?2097152:0)|(a?134217728:0)]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&4&&(o.attrs=e[18].attrs()),a&4&&(o.props=e[18].props()),a&404750340&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function C8(i){let e=[],n=new Map,t,r,s=Jt(i[22].cells);const a=o=>o[18].id;for(let o=0;o<s.length;o+=1){let c=j0(i,s,o),d=a(c);n.set(d,e[o]=q0(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&136314884&&(s=Jt(o[22].cells),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,q0,t,j0),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function S8(i){let e,n,t;return e=new Xf({props:{$$slots:{default:[C8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me()},l(r){j(e.$$.fragment,r),n=_e(r)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p(r,s){const a={};s&268435460&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function H0(i){let e,n;return e=new Ho({props:{rowAttrs:i[22].attrs(),$$slots:{default:[S8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.rowAttrs=t[22].attrs()),r&268435460&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function T8(i){let e,n,t=Jt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=H0(U0(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Be()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Be()},m(a,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&136314884){t=Jt(a[2]);let c;for(c=0;c<t.length;c+=1){const d=U0(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=H0(d),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function I8(i){let e,n;return e=new Jf({props:{of:i[18].render()}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.of=t[18].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function E8(i){let e,n,t;const r=[i[21]];let s={$$slots:{default:[I8]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Se(s,r[a]);return e=new ey({props:s}),{c(){N(e.$$.fragment),n=me()},l(a){j(e.$$.fragment,a),n=_e(a)},m(a,o){V(e,a,o),R(a,n,o),t=!0},p(a,o){const c=o&2097152?Mt(r,[dn(a[21])]):{};o&268435472&&(c.$$scope={dirty:o,ctx:a}),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){a&&S(n),U(e,a)}}}function G0(i,e){let n,t,r;return t=new Ho({props:{attrs:e[18].attrs(),$$slots:{default:[E8,({attrs:s})=>({21:s}),({attrs:s})=>s?2097152:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.attrs=e[18].attrs()),a&270532624&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function P8(i){let e=[],n=new Map,t,r,s=Jt(i[14].cells);const a=o=>o[18].id;for(let o=0;o<s.length;o+=1){let c=V0(i,s,o),d=a(c);n.set(d,e[o]=G0(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&2097168&&(s=Jt(o[14].cells),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,G0,t,V0),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function A8(i){let e,n,t;const r=[i[17],{class:"cursor-pointer"}];function s(){return i[11](i[14])}let a={$$slots:{default:[P8]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Se(a,r[o]);return e=new Xf({props:a}),e.$on("click",s),{c(){N(e.$$.fragment),n=me()},l(o){j(e.$$.fragment,o),n=_e(o)},m(o,c){V(e,o,c),R(o,n,c),t=!0},p(o,c){i=o;const d=c&131072?Mt(r,[dn(i[17]),r[1]]):{};c&268435472&&(d.$$scope={dirty:c,ctx:i}),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){o&&S(n),U(e,o)}}}function Z0(i,e){let n,t,r;return t=new Ho({props:{rowAttrs:e[14].attrs(),$$slots:{default:[A8,({rowAttrs:s})=>({17:s}),({rowAttrs:s})=>s?131072:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.rowAttrs=e[14].attrs()),a&268566544&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function M8(i){let e=[],n=new Map,t,r,s=Jt(i[4]);const a=o=>o[14].id;for(let o=0;o<s.length;o+=1){let c=N0(i,s,o),d=a(c);n.set(d,e[o]=Z0(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&2228272&&(s=Jt(o[4]),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,Z0,t,N0),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function D8(i){let e,n,t,r;e=new Jv({props:{$$slots:{default:[T8]},$$scope:{ctx:i}}});const s=[i[3]];let a={$$slots:{default:[M8]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Se(a,s[o]);return t=new Yv({props:a}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),r=!0},p(o,c){const d={};c&268435460&&(d.$$scope={dirty:c,ctx:o}),e.$set(d);const _=c&8?Mt(s,[dn(o[3])]):{};c&268435472&&(_.$$scope={dirty:c,ctx:o}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function z8(i){let e,n;return e=new ZO({props:{tableModel:i[6]}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function L8(i){let e,n="No POIs in Favourites";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-cqoewt"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-center text-xl")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function R8(i){let e,n,t,r,s,a,o,c,d;n=new MO({props:{tableModel:i[6]}});const _=[i[1]];let b={$$slots:{default:[D8]},$$scope:{ctx:i}};for(let D=0;D<_.length;D+=1)b=Se(b,_[D]);s=new Hv({props:b});const x=[L8,z8],P=[];function L(D,B){return D[0].length===0?0:1}return o=L(i),c=P[o]=x[o](i),{c(){e=oe("div"),N(n.$$.fragment),t=me(),r=oe("div"),N(s.$$.fragment),a=me(),c.c(),this.h()},l(D){e=ae(D,"DIV",{class:!0});var B=we(e);j(n.$$.fragment,B),t=_e(B),r=ae(B,"DIV",{class:!0});var Z=we(r);j(s.$$.fragment,Z),Z.forEach(S),a=_e(B),c.l(B),B.forEach(S),this.h()},h(){ne(r,"class","rounded-md border"),ne(e,"class","space-y-4")},m(D,B){R(D,e,B),V(n,e,null),ue(e,t),ue(e,r),V(s,r,null),ue(e,a),P[o].m(e,null),d=!0},p(D,[B]){const Z=B&2?Mt(_,[dn(D[1])]):{};B&268435484&&(Z.$$scope={dirty:B,ctx:D}),s.$set(Z);let W=o;o=L(D),o===W?P[o].p(D,B):(dt(),E(P[W],1,1,()=>{P[W]=null}),pt(),c=P[o],c?c.p(D,B):(c=P[o]=x[o](D),c.c()),T(c,1),c.m(e,null))},i(D){d||(T(n.$$.fragment,D),T(s.$$.fragment,D),T(c),d=!0)},o(D){E(n.$$.fragment,D),E(s.$$.fragment,D),E(c),d=!1},d(D){D&&S(e),U(n),U(s),P[o].d()}}}function O8(i,e,n){let t,r,s,a,{data:o}=e;const c=Gv(Sa(o),{sort:Zv({toggleOrder:["asc","desc"]}),page:Wv(),colFilter:Kv(),hide:Xv()}),d=c.createColumns([c.column({accessor:"name",header:"Name",id:"name",cell:({value:Z,row:W})=>W.isData()?Xc(E0,{value:Z}):Z,plugins:{colFilter:{fn:({filterValue:Z,value:W})=>W.toLowerCase().includes(Z.toLowerCase()),initialFilterValue:"",render:({filterValue:Z})=>os(Z)}}}),c.column({accessor:"features",header:"Features",id:"features",cell:({value:Z,row:W})=>W.isData()?Xc(E0,{value:Z.join(", ")}):Z.join(""),plugins:{colFilter:{fn:({filterValue:Z,value:W})=>Z.length===0||!Array.isArray(Z)?!0:Z.some(Q=>W.includes(Q)),initialFilterValue:[],render:({filterValue:Z})=>os(Z)},sort:{disable:!0}}})]),_=Z=>Z.original,b=c.createViewModel(d),{headerRows:x,pageRows:P,tableAttrs:L,tableBodyAttrs:D}=b;sn(i,x,Z=>n(2,r=Z)),sn(i,P,Z=>n(4,a=Z)),sn(i,L,Z=>n(1,t=Z)),sn(i,D,Z=>n(3,s=Z));const B=Z=>Ta("/app?focus-poi="+encodeURIComponent(_(Z).id));return i.$$set=Z=>{"data"in Z&&n(0,o=Z.data)},[o,t,r,s,a,_,b,x,P,L,D,B]}let F8=class extends st{constructor(e){super(),it(this,e,O8,R8,rt,{data:0})}};function B8(i){let e;return{c(){e=je("Check-ins")},l(n){e=qe(n,"Check-ins")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function N8(i){let e,n,t,r;return e=new ms({props:{tag:"h2",class:"mb-3",$$slots:{default:[B8]},$$scope:{ctx:i}}}),t=new hi({}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&128&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function V8(i){let e,n;return e=new F8({props:{data:i[2]}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.data=t[2]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function U8(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function j8(i){let e,n,t,r;const s=[U8,V8],a=[];function o(c,d){return c[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function q8(i){let e,n,t,r,s;return n=new Br({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[N8]},$$scope:{ctx:i}}}),r=new Er({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[j8]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=me(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=we(e);j(n.$$.fragment,o),o.forEach(S),t=_e(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[5](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const c={};o&128&&(c.$$scope={dirty:o,ctx:a}),n.$set(c);const d={};o&2&&(d.style=`height: calc(100% - ${a[1]}px);`),o&140&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[5](null),U(r,a)}}}function H8(i){let e,n,t,r,s;return n=new tr({props:{class:"relative p-4 h-full",$$slots:{default:[q8]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=we(e);j(n.$$.fragment,o),o.forEach(S),this.h()},h(){ne(e,"class","flex flex-col p-4 relative h-full")},m(a,o){R(a,e,o),V(n,e,null),t=!0,r||(s=$t(window,"resize",i[4]),r=!0)},p(a,[o]){const c={};o&143&&(c.$$scope={dirty:o,ctx:a}),n.$set(c)},i(a){t||(T(n.$$.fragment,a),t=!0)},o(a){E(n.$$.fragment,a),t=!1},d(a){a&&S(e),U(n),r=!1,s()}}}function G8(i,e,n){let t,r=64;const s=()=>{const _=t.offsetHeight;_!==void 0&&n(1,r=_)};Qn(s);let a=[],o=!0;Qn(async()=>{const _=await fetch("/api/check-in");if(_.ok){const b=await _.json(),x=[];b.forEach(P=>{const L=Pa.decode(P);if(Yf.isRight(L)){const D=L.right;x.push(D)}else console.error("Invalid POI object received from API: ",L.left)}),n(2,a=x),n(3,o=!1)}});function d(_){Vt[_?"unshift":"push"](()=>{t=_,n(0,t)})}return[t,r,a,o,s,d]}class Z8 extends st{constructor(e){super(),it(this,e,G8,H8,rt,{})}}function W8(i){let e,n;return{c(){e=oe("span"),n=je(i[0]),this.h()},l(t){e=ae(t,"SPAN",{class:!0});var r=we(e);n=qe(r,i[0]),r.forEach(S),this.h()},h(){ne(e,"class","lg:max-w-[320px] sm:max-w-[160px] max-w-[80px] truncate font-medium")},m(t,r){R(t,e,r),ue(e,n)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&S(e)}}}function K8(i){let e,n;return{c(){e=oe("div"),n=je(i[0]),this.h()},l(t){e=ae(t,"DIV",{class:!0});var r=we(e);n=qe(r,i[0]),r.forEach(S),this.h()},h(){ne(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r),ue(e,n)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&S(e)}}}function X8(i){let e,n,t,r;return e=new jo({props:{$$slots:{default:[W8]},$$scope:{ctx:i}}}),t=new qo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[K8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&3&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&3&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function J8(i){let e,n,t;return n=new No({props:{$$slots:{default:[X8]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","flex space-x-2")},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,[s]){const a={};s&3&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function Y8(i,e,n){let{value:t}=e;return i.$$set=r=>{"value"in r&&n(0,t=r.value)},[t]}class W0 extends st{constructor(e){super(),it(this,e,Y8,J8,rt,{value:0})}}function Q8(i){let e,n,t,r="Open menu",s;return e=new OS({props:{class:"h-4 w-4"}}),{c(){N(e.$$.fragment),n=me(),t=oe("span"),t.textContent=r,this.h()},l(a){j(e.$$.fragment,a),n=_e(a),t=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(t)!=="svelte-rsbkxi"&&(t.textContent=r),this.h()},h(){ne(t,"class","sr-only")},m(a,o){V(e,a,o),R(a,n,o),R(a,t,o),s=!0},p:vt,i(a){s||(T(e.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),s=!1},d(a){a&&(S(n),S(t)),U(e,a)}}}function eF(i){let e,n;return e=new Yr({props:{variant:"ghost",builders:[i[3]],class:"flex h-8 w-8 p-0 data-[state=open]:bg-muted ml-auto hover:bg-accent hover:text-accent-foreground bg-background",$$slots:{default:[Q8]},$$scope:{ctx:i}}}),e.$on("click",iF),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.builders=[t[3]]),r&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function tF(i){let e;return{c(){e=je("Remove From Favourites")},l(n){e=qe(n,"Remove From Favourites")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function nF(i){let e,n;return e=new Yr({props:{variant:"destructive",$$slots:{default:[tF]},$$scope:{ctx:i}}}),e.$on("click",i[2]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function rF(i){let e,n,t,r;return e=new cu({props:{asChild:!0,$$slots:{default:[eF,({builder:s})=>({3:s}),({builder:s})=>s?8:0]},$$scope:{ctx:i}}}),t=new uu({props:{class:"w-[160px]",align:"end",$$slots:{default:[nF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&24&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&19&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function sF(i){let e,n;return e=new lu({props:{$$slots:{default:[rF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&19&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}const iF=i=>i.stopPropagation();function oF(i,e,n){let{rowId:t}=e,{removeFavourite:r}=e;const s=()=>r(t);return i.$$set=a=>{"rowId"in a&&n(0,t=a.rowId),"removeFavourite"in a&&n(1,r=a.removeFavourite)},[t,r,s]}class aF extends st{constructor(e){super(),it(this,e,oF,sF,rt,{rowId:0,removeFavourite:1})}}function lF(i){let e;const n=i[4].default,t=kt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&Ct(t,n,r,r[5],e?Tt(n,r[5],s,null):St(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function cF(i){let e,n,t,r;return n=new lu({props:{$$slots:{default:[vF]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(s){e=ae(s,"DIV",{class:!0});var a=we(e);j(n.$$.fragment,a),a.forEach(S),this.h()},h(){ne(e,"class",t=Ut("flex items-center",i[0]))},m(s,a){R(s,e,a),V(n,e,null),r=!0},p(s,a){const o={};a&34&&(o.$$scope={dirty:a,ctx:s}),n.$set(o),(!r||a&1&&t!==(t=Ut("flex items-center",s[0])))&&ne(e,"class",t)},i(s){r||(T(n.$$.fragment,s),r=!0)},o(s){E(n.$$.fragment,s),r=!1},d(s){s&&S(e),U(n)}}}function uF(i){let e,n;return e=new Iv({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function fF(i){let e,n;return e=new Ev({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function hF(i){let e,n;return e=new Pv({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function dF(i){let e,n,t,r,s;const a=i[4].default,o=kt(a,i,i[5],null),c=[hF,fF,uF],d=[];function _(b,x){return b[1].sort.order==="desc"?0:b[1].sort.order==="asc"?1:2}return n=_(i),t=d[n]=c[n](i),{c(){o&&o.c(),e=me(),t.c(),r=Be()},l(b){o&&o.l(b),e=_e(b),t.l(b),r=Be()},m(b,x){o&&o.m(b,x),R(b,e,x),d[n].m(b,x),R(b,r,x),s=!0},p(b,x){o&&o.p&&(!s||x&32)&&Ct(o,a,b,b[5],s?Tt(a,b[5],x,null):St(b[5]),null);let P=n;n=_(b),n!==P&&(dt(),E(d[P],1,1,()=>{d[P]=null}),pt(),t=d[n],t||(t=d[n]=c[n](b),t.c()),T(t,1),t.m(r.parentNode,r))},i(b){s||(T(o,b),T(t),s=!0)},o(b){E(o,b),E(t),s=!1},d(b){b&&(S(e),S(r)),o&&o.d(b),d[n].d(b)}}}function pF(i){let e,n;return e=new Yr({props:{variant:"ghost",builders:[i[6]],class:"-ml-3 h-8 data-[state=open]:bg-accent",$$slots:{default:[dF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&64&&(s.builders=[t[6]]),r&34&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function mF(i){let e;return{c(){e=je("Asc")},l(n){e=qe(n,"Asc")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function _F(i){let e;return{c(){e=je("Desc")},l(n){e=qe(n,"Desc")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function gF(i){let e,n,t,r;return e=new Nf({props:{$$slots:{default:[mF]},$$scope:{ctx:i}}}),e.$on("click",i[2]),t=new Nf({props:{$$slots:{default:[_F]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&32&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function vF(i){let e,n,t,r;return e=new cu({props:{asChild:!0,$$slots:{default:[pF,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:i}}}),t=new uu({props:{align:"start",$$slots:{default:[gF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&98&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&32&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function yF(i){let e,n,t,r;const s=[cF,lF],a=[];function o(c,d){return c[1].sort.disabled?1:0}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,[d]){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function bF(i,e,n){let{$$slots:t={},$$scope:r}=e,{class:s=void 0}=e,{props:a}=e;function o(d){a.sort.order!=="asc"&&a.sort.toggle(d)}function c(d){a.sort.order!=="desc"&&a.sort.toggle(d)}return i.$$set=d=>{"class"in d&&n(0,s=d.class),"props"in d&&n(1,a=d.props),"$$scope"in d&&n(5,r=d.$$scope)},[s,a,o,c,t,r]}class $F extends st{constructor(e){super(),it(this,e,bF,yF,rt,{class:0,props:1})}}function K0(i){let e,n;return e=new Yr({props:{variant:"outline",class:"h-8 px-2 lg:px-3",$$slots:{default:[wF]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wF(i){let e,n;return e=new Mv({props:{class:"h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function xF(i){let e,n,t,r,s,a,o,c,d,_,b,x,P;function L(Q){i[5](Q)}let D={placeholder:"Filter by name...",class:"h-8 sm:w-[250px] lg:w-[350px] grow sm:grow-0 lg:grow-0 md:grow hover:bg-accent hover:text-accent-foreground bg-background focus-visible:m-0.5",type:"search"};i[1].name!==void 0&&(D.value=i[1].name),n=new Av({props:D}),Vt.push(()=>$n(n,"value",L));function B(Q){i[6](Q)}let Z={title:"POI Features",options:i[2]};i[1].features!==void 0&&(Z.filterValues=i[1].features),c=new sB({props:Z}),Vt.push(()=>$n(c,"filterValues",B));let W=i[3]&&K0(i);return x=new pB({props:{tableModel:i[0]}}),{c(){e=oe("div"),N(n.$$.fragment),r=me(),s=oe("div"),a=oe("div"),o=oe("div"),N(c.$$.fragment),_=me(),W&&W.c(),b=me(),N(x.$$.fragment),this.h()},l(Q){e=ae(Q,"DIV",{class:!0});var ve=we(e);j(n.$$.fragment,ve),r=_e(ve),s=ae(ve,"DIV",{class:!0});var re=we(s);a=ae(re,"DIV",{class:!0});var ce=we(a);o=ae(ce,"DIV",{class:!0});var ge=we(o);j(c.$$.fragment,ge),_=_e(ge),W&&W.l(ge),ge.forEach(S),ce.forEach(S),b=_e(re),j(x.$$.fragment,re),re.forEach(S),ve.forEach(S),this.h()},h(){ne(o,"class","flex items-center gap-2 w-full"),ne(a,"class","relative overflow-x-auto flex sm:overflow-x-visible"),ne(s,"class","flex flex-1 sm:items-center grow justify-between gap-2 flex-col sm:flex-row relative overflow-x-auto sm:overflow-x-visible"),ne(e,"class","flex items-center gap-2 flex-wrap")},m(Q,ve){R(Q,e,ve),V(n,e,null),ue(e,r),ue(e,s),ue(s,a),ue(a,o),V(c,o,null),ue(o,_),W&&W.m(o,null),ue(s,b),V(x,s,null),P=!0},p(Q,[ve]){const re={};!t&&ve&2&&(t=!0,re.value=Q[1].name,bn(()=>t=!1)),n.$set(re);const ce={};ve&4&&(ce.options=Q[2]),!d&&ve&2&&(d=!0,ce.filterValues=Q[1].features,bn(()=>d=!1)),c.$set(ce),Q[3]?W?(W.p(Q,ve),ve&8&&T(W,1)):(W=K0(Q),W.c(),T(W,1),W.m(o,null)):W&&(dt(),E(W,1,1,()=>{W=null}),pt());const ge={};ve&1&&(ge.tableModel=Q[0]),x.$set(ge)},i(Q){P||(T(n.$$.fragment,Q),T(c.$$.fragment,Q),T(W),T(x.$$.fragment,Q),P=!0)},o(Q){E(n.$$.fragment,Q),E(c.$$.fragment,Q),E(W),E(x.$$.fragment,Q),P=!1},d(Q){Q&&S(e),U(n),U(c),W&&W.d(),U(x)}}}function kF(i,e,n){let t,r,{tableModel:s}=e,a;Qn(async()=>{try{const L=await(await fetch("/api/poi/features")).json();n(2,a=L.allPOIFeatures)}catch(P){console.error(P)}});const{pluginStates:c}=s,{filterValues:d}=c.colFilter;sn(i,d,P=>n(1,r=P));function _(P){i.$$.not_equal(r.name,P)&&(r.name=P,d.set(r))}function b(P){i.$$.not_equal(r.features,P)&&(r.features=P,d.set(r))}const x=()=>{Or(d,r.name="",r),Or(d,r.features=[],r)};return i.$$set=P=>{"tableModel"in P&&n(0,s=P.tableModel)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=Object.values({...r}).some(P=>P.length>0||typeof P=="string"&&P.length>0))},[s,r,a,t,d,_,b,x]}class CF extends st{constructor(e){super(),it(this,e,kF,xF,rt,{tableModel:0})}}function SF(i){let e,n;return e=new Nv({props:{placeholder:"Select page size"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function TF(i){let e;return{c(){e=je("10")},l(n){e=qe(n,"10")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function IF(i){let e;return{c(){e=je("20")},l(n){e=qe(n,"20")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function EF(i){let e;return{c(){e=je("30")},l(n){e=qe(n,"30")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function PF(i){let e;return{c(){e=je("40")},l(n){e=qe(n,"40")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function AF(i){let e;return{c(){e=je("50")},l(n){e=qe(n,"50")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function MF(i){let e,n,t,r,s,a,o,c,d,_;return e=new Fi({props:{value:"10",$$slots:{default:[TF]},$$scope:{ctx:i}}}),t=new Fi({props:{value:"20",$$slots:{default:[IF]},$$scope:{ctx:i}}}),s=new Fi({props:{value:"30",$$slots:{default:[EF]},$$scope:{ctx:i}}}),o=new Fi({props:{value:"40",$$slots:{default:[PF]},$$scope:{ctx:i}}}),d=new Fi({props:{value:"50",$$slots:{default:[AF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),N(s.$$.fragment),a=me(),N(o.$$.fragment),c=me(),N(d.$$.fragment)},l(b){j(e.$$.fragment,b),n=_e(b),j(t.$$.fragment,b),r=_e(b),j(s.$$.fragment,b),a=_e(b),j(o.$$.fragment,b),c=_e(b),j(d.$$.fragment,b)},m(b,x){V(e,b,x),R(b,n,x),V(t,b,x),R(b,r,x),V(s,b,x),R(b,a,x),V(o,b,x),R(b,c,x),V(d,b,x),_=!0},p(b,x){const P={};x&1048576&&(P.$$scope={dirty:x,ctx:b}),e.$set(P);const L={};x&1048576&&(L.$$scope={dirty:x,ctx:b}),t.$set(L);const D={};x&1048576&&(D.$$scope={dirty:x,ctx:b}),s.$set(D);const B={};x&1048576&&(B.$$scope={dirty:x,ctx:b}),o.$set(B);const Z={};x&1048576&&(Z.$$scope={dirty:x,ctx:b}),d.$set(Z)},i(b){_||(T(e.$$.fragment,b),T(t.$$.fragment,b),T(s.$$.fragment,b),T(o.$$.fragment,b),T(d.$$.fragment,b),_=!0)},o(b){E(e.$$.fragment,b),E(t.$$.fragment,b),E(s.$$.fragment,b),E(o.$$.fragment,b),E(d.$$.fragment,b),_=!1},d(b){b&&(S(n),S(r),S(a),S(c)),U(e,b),U(t,b),U(s,b),U(o,b),U(d,b)}}}function DF(i){let e,n,t,r;return e=new zv({props:{class:"w-[180px]",$$slots:{default:[SF]},$$scope:{ctx:i}}}),t=new Lv({props:{$$slots:{default:[MF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1048576&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&1048576&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function zF(i){let e,n="Go to first page",t,r,s;return r=new Rv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=me(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-lc32pz"&&(e.textContent=n),t=_e(a),j(r.$$.fragment,a),this.h()},h(){ne(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:vt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function LF(i){let e,n="Go to previous page",t,r,s;return r=new Ov({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=me(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-2don1e"&&(e.textContent=n),t=_e(a),j(r.$$.fragment,a),this.h()},h(){ne(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:vt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function RF(i){let e,n="Go to next page",t,r,s;return r=new Fv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=me(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-10zd0e2"&&(e.textContent=n),t=_e(a),j(r.$$.fragment,a),this.h()},h(){ne(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:vt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function OF(i){let e,n="Go to last page",t,r,s;return r=new Bv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=me(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-17pj58n"&&(e.textContent=n),t=_e(a),j(r.$$.fragment,a),this.h()},h(){ne(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:vt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function FF(i){let e,n,t,r="Rows per page",s,a,o,c,d,_=i[0]+1+"",b,x,P,L,D,B,Z,W,Q,ve,re,ce,ge;return a=new Dv({props:{onSelectedChange:i[14],selected:{value:10,label:"10"},$$slots:{default:[DF]},$$scope:{ctx:i}}}),B=new Yr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[zF]},$$scope:{ctx:i}}}),B.$on("click",i[15]),W=new Yr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[LF]},$$scope:{ctx:i}}}),W.$on("click",i[16]),ve=new Yr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[RF]},$$scope:{ctx:i}}}),ve.$on("click",i[17]),ce=new Yr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[OF]},$$scope:{ctx:i}}}),ce.$on("click",i[18]),{c(){e=oe("div"),n=oe("div"),t=oe("p"),t.textContent=r,s=me(),N(a.$$.fragment),o=me(),c=oe("div"),d=je("Page "),b=je(_),x=je(" of "),P=je(i[1]),L=me(),D=oe("div"),N(B.$$.fragment),Z=me(),N(W.$$.fragment),Q=me(),N(ve.$$.fragment),re=me(),N(ce.$$.fragment),this.h()},l(le){e=ae(le,"DIV",{class:!0});var G=we(e);n=ae(G,"DIV",{class:!0});var ee=we(n);t=ae(ee,"P",{class:!0,"data-svelte-h":!0}),on(t)!=="svelte-opj3eb"&&(t.textContent=r),s=_e(ee),j(a.$$.fragment,ee),ee.forEach(S),o=_e(G),c=ae(G,"DIV",{class:!0});var fe=we(c);d=qe(fe,"Page "),b=qe(fe,_),x=qe(fe," of "),P=qe(fe,i[1]),fe.forEach(S),L=_e(G),D=ae(G,"DIV",{class:!0});var $e=we(D);j(B.$$.fragment,$e),Z=_e($e),j(W.$$.fragment,$e),Q=_e($e),j(ve.$$.fragment,$e),re=_e($e),j(ce.$$.fragment,$e),$e.forEach(S),G.forEach(S),this.h()},h(){ne(t,"class","text-sm font-medium"),ne(n,"class","flex items-center space-x-2"),ne(c,"class","flex w-[100px] items-center justify-center text-sm font-medium"),ne(D,"class","flex items-center space-x-2"),ne(e,"class","flex items-center space-x-6 lg:space-x-8 flex-wrap gap-2")},m(le,G){R(le,e,G),ue(e,n),ue(n,t),ue(n,s),V(a,n,null),ue(e,o),ue(e,c),ue(c,d),ue(c,b),ue(c,x),ue(c,P),ue(e,L),ue(e,D),V(B,D,null),ue(D,Z),V(W,D,null),ue(D,Q),V(ve,D,null),ue(D,re),V(ce,D,null),ge=!0},p(le,[G]){const ee={};G&1048576&&(ee.$$scope={dirty:G,ctx:le}),a.$set(ee),(!ge||G&1)&&_!==(_=le[0]+1+"")&&Ft(b,_),(!ge||G&2)&&Ft(P,le[1]);const fe={};G&4&&(fe.disabled=!le[2]),G&1048576&&(fe.$$scope={dirty:G,ctx:le}),B.$set(fe);const $e={};G&4&&($e.disabled=!le[2]),G&1048576&&($e.$$scope={dirty:G,ctx:le}),W.$set($e);const he={};G&8&&(he.disabled=!le[3]),G&1048576&&(he.$$scope={dirty:G,ctx:le}),ve.$set(he);const ke={};G&8&&(ke.disabled=!le[3]),G&1048576&&(ke.$$scope={dirty:G,ctx:le}),ce.$set(ke)},i(le){ge||(T(a.$$.fragment,le),T(B.$$.fragment,le),T(W.$$.fragment,le),T(ve.$$.fragment,le),T(ce.$$.fragment,le),ge=!0)},o(le){E(a.$$.fragment,le),E(B.$$.fragment,le),E(W.$$.fragment,le),E(ve.$$.fragment,le),E(ce.$$.fragment,le),ge=!1},d(le){le&&S(e),U(a),U(B),U(W),U(ve),U(ce)}}}function BF(i,e,n){let t,r,s,a,o,c,{tableModel:d}=e;const{pageRows:_,pluginStates:b,rows:x}=d;sn(i,_,ge=>n(5,c=ge)),sn(i,x,ge=>n(4,o=ge));const{hasNextPage:P,hasPreviousPage:L,pageIndex:D,pageCount:B,pageSize:Z}=b.page;sn(i,P,ge=>n(3,a=ge)),sn(i,L,ge=>n(2,s=ge)),sn(i,D,ge=>n(0,t=ge)),sn(i,B,ge=>n(1,r=ge));const W=ge=>Z.set(Number(ge==null?void 0:ge.value)),Q=()=>Or(D,t=0,t),ve=()=>Or(D,t=t-1,t),re=()=>Or(D,t=t+1,t),ce=()=>Or(D,t=Math.ceil(o.length/c.length)-1,t);return i.$$set=ge=>{"tableModel"in ge&&n(13,d=ge.tableModel)},[t,r,s,a,o,c,_,x,P,L,D,B,Z,d,W,Q,ve,re,ce]}class NF extends st{constructor(e){super(),it(this,e,BF,FF,rt,{tableModel:13})}}function X0(i,e,n){const t=i.slice();return t[9]=e[n],t}function J0(i,e,n){const t=i.slice();return t[9]=e[n],t}function Y0(i){let e,n,t,r,s,a,o,c;e=new hi({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new ho({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[VF]},$$scope:{ctx:i}}});const d=[jF,UF],_=[];function b(x,P){return x[0].length>2?0:1}return a=b(i),o=_[a]=d[a](i),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),s=oe("div"),o.c(),this.h()},l(x){j(e.$$.fragment,x),n=_e(x),j(t.$$.fragment,x),r=_e(x),s=ae(x,"DIV",{class:!0});var P=we(s);o.l(P),P.forEach(S),this.h()},h(){ne(s,"class","hidden space-x-1 lg:flex")},m(x,P){V(e,x,P),R(x,n,P),V(t,x,P),R(x,r,P),R(x,s,P),_[a].m(s,null),c=!0},p(x,P){const L={};P&32769&&(L.$$scope={dirty:P,ctx:x}),t.$set(L);let D=a;a=b(x),a===D?_[a].p(x,P):(dt(),E(_[D],1,1,()=>{_[D]=null}),pt(),o=_[a],o?o.p(x,P):(o=_[a]=d[a](x),o.c()),T(o,1),o.m(s,null))},i(x){c||(T(e.$$.fragment,x),T(t.$$.fragment,x),T(o),c=!0)},o(x){E(e.$$.fragment,x),E(t.$$.fragment,x),E(o),c=!1},d(x){x&&(S(n),S(r),S(s)),U(e,x),U(t,x),_[a].d()}}}function VF(i){let e=i[0].length+"",n;return{c(){n=je(e)},l(t){n=qe(t,e)},m(t,r){R(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&Ft(n,e)},d(t){t&&S(n)}}}function UF(i){let e,n,t=Jt(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=Q0(J0(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Be()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Be()},m(a,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&1){t=Jt(a[0]);let c;for(c=0;c<t.length;c+=1){const d=J0(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=Q0(d),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function jF(i){let e,n;return e=new ho({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[HF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function qF(i){let e=i[9]+"",n,t;return{c(){n=je(e),t=me()},l(r){n=qe(r,e),t=_e(r)},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[9]+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function Q0(i){let e,n;return e=new ho({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[qF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function HF(i){let e=i[0].length+"",n,t;return{c(){n=je(e),t=je(" Selected")},l(r){n=qe(r,e),t=qe(r," Selected")},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function GF(i){let e,n,t,r,s,a;e=new Wd({props:{class:"mr-2 h-4 w-4"}});let o=i[0].length>0&&Y0(i);return{c(){N(e.$$.fragment),n=me(),t=je(i[1]),r=me(),o&&o.c(),s=Be()},l(c){j(e.$$.fragment,c),n=_e(c),t=qe(c,i[1]),r=_e(c),o&&o.l(c),s=Be()},m(c,d){V(e,c,d),R(c,n,d),R(c,t,d),R(c,r,d),o&&o.m(c,d),R(c,s,d),a=!0},p(c,d){(!a||d&2)&&Ft(t,c[1]),c[0].length>0?o?(o.p(c,d),d&1&&T(o,1)):(o=Y0(c),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(dt(),E(o,1,1,()=>{o=null}),pt())},i(c){a||(T(e.$$.fragment,c),T(o),a=!0)},o(c){E(e.$$.fragment,c),E(o),a=!1},d(c){c&&(S(n),S(t),S(r),S(s)),U(e,c),o&&o.d(c)}}}function ZF(i){let e,n;return e=new Yr({props:{builders:[i[12]],variant:"outline",size:"sm",class:"h-8 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[GF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&32771&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function WF(i){let e;return{c(){e=je("No results found.")},l(n){e=qe(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function ev(i){let e,n=i[3][i[9]]+"",t;return{c(){e=oe("span"),t=je(n),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=we(e);t=qe(s,n),s.forEach(S),this.h()},h(){ne(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){R(r,e,s),ue(e,t)},p(r,s){s&12&&n!==(n=r[3][r[9]]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function KF(i){let e,n,t,r,s,a=i[9]+"",o,c,d,_;n=new Kd({props:{className:Ut("h-4 w-4")}});let b=i[3][i[9]]&&ev(i);return{c(){e=oe("div"),N(n.$$.fragment),r=me(),s=oe("span"),o=je(a),c=me(),b&&b.c(),d=me(),this.h()},l(x){e=ae(x,"DIV",{class:!0});var P=we(e);j(n.$$.fragment,P),P.forEach(S),r=_e(x),s=ae(x,"SPAN",{});var L=we(s);o=qe(L,a),L.forEach(S),c=_e(x),b&&b.l(x),d=_e(x),this.h()},h(){ne(e,"class",t=Ut("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m(x,P){R(x,e,P),V(n,e,null),R(x,r,P),R(x,s,P),ue(s,o),R(x,c,P),b&&b.m(x,P),R(x,d,P),_=!0},p(x,P){(!_||P&5&&t!==(t=Ut("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",x[0].includes(x[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&ne(e,"class",t),(!_||P&4)&&a!==(a=x[9]+"")&&Ft(o,a),x[3][x[9]]?b?b.p(x,P):(b=ev(x),b.c(),b.m(d.parentNode,d)):b&&(b.d(1),b=null)},i(x){_||(T(n.$$.fragment,x),_=!0)},o(x){E(n.$$.fragment,x),_=!1},d(x){x&&(S(e),S(r),S(s),S(c),S(d)),U(n),b&&b.d(x)}}}function tv(i){let e,n;return e=new Il({props:{class:"cursor-pointer",value:i[9],onSelect:i[6],$$slots:{default:[KF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[9]),r&32781&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function XF(i){let e,n,t=Jt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=tv(X0(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Be()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Be()},m(a,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&45){t=Jt(a[2]);let c;for(c=0;c<t.length;c+=1){const d=X0(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=tv(d),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function nv(i){let e,n,t,r;return e=new _p({}),t=new Il({props:{class:"justify-center text-center cursor-pointer",onSelect:i[7],$$slots:{default:[JF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.onSelect=s[7]),a&32768&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function JF(i){let e;return{c(){e=je("Clear Filter")},l(n){e=qe(n,"Clear Filter")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function YF(i){let e,n,t,r,s,a;e=new hp({props:{$$slots:{default:[WF]},$$scope:{ctx:i}}}),t=new dp({props:{$$slots:{default:[XF]},$$scope:{ctx:i}}});let o=i[0].length>0&&nv(i);return{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me(),o&&o.c(),s=Be()},l(c){j(e.$$.fragment,c),n=_e(c),j(t.$$.fragment,c),r=_e(c),o&&o.l(c),s=Be()},m(c,d){V(e,c,d),R(c,n,d),V(t,c,d),R(c,r,d),o&&o.m(c,d),R(c,s,d),a=!0},p(c,d){const _={};d&32768&&(_.$$scope={dirty:d,ctx:c}),e.$set(_);const b={};d&32781&&(b.$$scope={dirty:d,ctx:c}),t.$set(b),c[0].length>0?o?(o.p(c,d),d&1&&T(o,1)):(o=nv(c),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(dt(),E(o,1,1,()=>{o=null}),pt())},i(c){a||(T(e.$$.fragment,c),T(t.$$.fragment,c),T(o),a=!0)},o(c){E(e.$$.fragment,c),E(t.$$.fragment,c),E(o),a=!1},d(c){c&&(S(n),S(r),S(s)),U(e,c),U(t,c),o&&o.d(c)}}}function QF(i){let e,n,t,r;return e=new pp({props:{placeholder:i[1]}}),t=new mp({props:{$$slots:{default:[YF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.placeholder=s[1]),e.$set(o);const c={};a&32781&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function eB(i){let e,n;return e=new fp({props:{loop:!0,$$slots:{default:[QF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function tB(i){let e,n,t,r;return e=new yp({props:{asChild:!0,$$slots:{default:[ZF,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new gp({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[eB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&36867&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&32783&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function nB(i){let e,n,t;function r(a){i[8](a)}let s={$$slots:{default:[tB]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.open=i[4]),e=new vp({props:s}),Vt.push(()=>$n(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,[o]){const c={};o&32783&&(c.$$scope={dirty:o,ctx:a}),!n&&o&16&&(n=!0,c.open=a[4],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function rB(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{options:s}=e,{counts:a={}}=e,o=!1;const c=x=>{Array.isArray(t)&&t.includes(x)?n(0,t=t.filter(P=>P!==x)):n(0,t=[...Array.isArray(t)?t:[],x])},d=x=>{c(x)},_=()=>{n(0,t=[])};function b(x){o=x,n(4,o)}return i.$$set=x=>{"filterValues"in x&&n(0,t=x.filterValues),"title"in x&&n(1,r=x.title),"options"in x&&n(2,s=x.options),"counts"in x&&n(3,a=x.counts)},[t,r,s,a,o,c,d,_,b]}class sB extends st{constructor(e){super(),it(this,e,rB,nB,rt,{filterValues:0,title:1,options:2,counts:3})}}function rv(i,e,n){const t=i.slice();return t[9]=e[n],t[10]=e,t[11]=n,t}function iB(i){let e,n,t;return e=new jv({props:{class:"mr-2 h-4 w-4"}}),{c(){N(e.$$.fragment),n=je(`
			View`)},l(r){j(e.$$.fragment,r),n=qe(r,`
			View`)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:vt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function oB(i){let e,n;return e=new Yr({props:{variant:"outline",size:"sm",class:"h-8 flex hover:bg-accent hover:text-accent-foreground bg-background",builders:[i[12]],$$slots:{default:[iB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&8192&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function aB(i){let e;return{c(){e=je("Toggle columns")},l(n){e=qe(n,"Toggle columns")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function lB(i){let e,n,t;function r(a){i[5](a,i[9])}let s={$$slots:{default:[cB]},$$scope:{ctx:i}};return i[0][i[9].id]!==void 0&&(s.checked=i[0][i[9].id]),e=new qv({props:s}),Vt.push(()=>$n(e,"checked",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){i=a;const c={};o&8192&&(c.$$scope={dirty:o,ctx:i}),!n&&o&3&&(n=!0,c.checked=i[0][i[9].id],bn(()=>n=!1)),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function cB(i){let e=i[9].header+"",n,t;return{c(){n=je(e),t=me()},l(r){n=qe(r,e),t=_e(r)},m(r,s){R(r,n,s),R(r,t,s)},p:vt,d(r){r&&(S(n),S(t))}}}function sv(i){let e=i[3].includes(i[9].id),n,t,r=e&&lB(i);return{c(){r&&r.c(),n=Be()},l(s){r&&r.l(s),n=Be()},m(s,a){r&&r.m(s,a),R(s,n,a),t=!0},p(s,a){e&&r.p(s,a)},i(s){t||(T(r),t=!0)},o(s){E(r),t=!1},d(s){s&&S(n),r&&r.d(s)}}}function uB(i){let e,n,t,r,s,a;e=new Vv({props:{$$slots:{default:[aB]},$$scope:{ctx:i}}}),t=new Uv({});let o=Jt(i[1]),c=[];for(let _=0;_<o.length;_+=1)c[_]=sv(rv(i,o,_));const d=_=>E(c[_],1,1,()=>{c[_]=null});return{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment),r=me();for(let _=0;_<c.length;_+=1)c[_].c();s=Be()},l(_){j(e.$$.fragment,_),n=_e(_),j(t.$$.fragment,_),r=_e(_);for(let b=0;b<c.length;b+=1)c[b].l(_);s=Be()},m(_,b){V(e,_,b),R(_,n,b),V(t,_,b),R(_,r,b);for(let x=0;x<c.length;x+=1)c[x]&&c[x].m(_,b);R(_,s,b),a=!0},p(_,b){const x={};if(b&8192&&(x.$$scope={dirty:b,ctx:_}),e.$set(x),b&11){o=Jt(_[1]);let P;for(P=0;P<o.length;P+=1){const L=rv(_,o,P);c[P]?(c[P].p(L,b),T(c[P],1)):(c[P]=sv(L),c[P].c(),T(c[P],1),c[P].m(s.parentNode,s))}for(dt(),P=o.length;P<c.length;P+=1)d(P);pt()}},i(_){if(!a){T(e.$$.fragment,_),T(t.$$.fragment,_);for(let b=0;b<o.length;b+=1)T(c[b]);a=!0}},o(_){E(e.$$.fragment,_),E(t.$$.fragment,_),c=c.filter(Boolean);for(let b=0;b<c.length;b+=1)E(c[b]);a=!1},d(_){_&&(S(n),S(r),S(s)),U(e,_),U(t,_),as(c,_)}}}function fB(i){let e,n,t,r;return e=new cu({props:{asChild:!0,$$slots:{default:[oB,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new uu({props:{$$slots:{default:[uB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&12288&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const c={};a&8193&&(c.$$scope={dirty:a,ctx:s}),t.$set(c)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function hB(i){let e,n;return e=new lu({props:{$$slots:{default:[fB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&8193&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function dB(i,e,n){let t,{tableModel:r}=e;const{pluginStates:s,flatColumns:a}=r,{hiddenColumnIds:o}=s.hide;sn(i,o,x=>n(6,t=x));const c=a.map(x=>x.id);let d=Object.fromEntries(c.map(x=>[x,!0]));const _=["name","features"];function b(x,P){i.$$.not_equal(d[P.id],x)&&(d[P.id]=x,n(0,d))}return i.$$set=x=>{"tableModel"in x&&n(4,r=x.tableModel)},i.$$.update=()=>{i.$$.dirty&1&&Or(o,t=Object.entries(d).filter(([,x])=>!x).map(([x])=>x),t)},[d,a,o,_,r,b]}class pB extends st{constructor(e){super(),it(this,e,dB,hB,rt,{tableModel:4})}}function iv(i,e,n){const t=i.slice();return t[15]=e[n],t}function ov(i,e,n){const t=i.slice();return t[19]=e[n],t}function av(i,e,n){const t=i.slice();return t[23]=e[n],t}function lv(i,e,n){const t=i.slice();return t[19]=e[n],t}function mB(i){let e,n;return e=new Jf({props:{of:i[19].render()}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.of=t[19].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function _B(i){let e,n;return e=new $F({props:{props:i[28],$$slots:{default:[mB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&268435456&&(s.props=t[28]),r&536870916&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function gB(i){let e,n,t;const r=[i[22]];let s={$$slots:{default:[_B]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Se(s,r[a]);return e=new Qv({props:s}),{c(){N(e.$$.fragment),n=me()},l(a){j(e.$$.fragment,a),n=_e(a)},m(a,o){V(e,a,o),R(a,n,o),t=!0},p(a,o){const c=o&4194304?Mt(r,[dn(a[22])]):{};o&805306372&&(c.$$scope={dirty:o,ctx:a}),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){a&&S(n),U(e,a)}}}function cv(i,e){let n,t,r;return t=new Ho({props:{attrs:e[19].attrs(),props:e[19].props(),$$slots:{default:[gB,({attrs:s,props:a})=>({22:s,28:a}),({attrs:s,props:a})=>(s?4194304:0)|(a?268435456:0)]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&4&&(o.attrs=e[19].attrs()),a&4&&(o.props=e[19].props()),a&809500676&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function vB(i){let e=[],n=new Map,t,r,s=Jt(i[23].cells);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let c=lv(i,s,o),d=a(c);n.set(d,e[o]=cv(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&272629764&&(s=Jt(o[23].cells),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,cv,t,lv),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function yB(i){let e,n,t;return e=new Xf({props:{$$slots:{default:[vB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=me()},l(r){j(e.$$.fragment,r),n=_e(r)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p(r,s){const a={};s&536870916&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function uv(i){let e,n;return e=new Ho({props:{rowAttrs:i[23].attrs(),$$slots:{default:[yB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.rowAttrs=t[23].attrs()),r&536870916&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bB(i){let e,n,t=Jt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=uv(av(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Be()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Be()},m(a,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&272629764){t=Jt(a[2]);let c;for(c=0;c<t.length;c+=1){const d=av(a,t,c);r[c]?(r[c].p(d,o),T(r[c],1)):(r[c]=uv(d),r[c].c(),T(r[c],1),r[c].m(e.parentNode,e))}for(dt(),c=t.length;c<r.length;c+=1)s(c);pt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&S(e),as(r,a)}}}function $B(i){let e,n;return e=new Jf({props:{of:i[19].render()}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.of=t[19].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wB(i){let e,n,t;const r=[i[22]];let s={$$slots:{default:[$B]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Se(s,r[a]);return e=new ey({props:s}),{c(){N(e.$$.fragment),n=me()},l(a){j(e.$$.fragment,a),n=_e(a)},m(a,o){V(e,a,o),R(a,n,o),t=!0},p(a,o){const c=o&4194304?Mt(r,[dn(a[22])]):{};o&536870928&&(c.$$scope={dirty:o,ctx:a}),e.$set(c)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){a&&S(n),U(e,a)}}}function fv(i,e){let n,t,r;return t=new Ho({props:{attrs:e[19].attrs(),$$slots:{default:[wB,({attrs:s})=>({22:s}),({attrs:s})=>s?4194304:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.attrs=e[19].attrs()),a&541065232&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function xB(i){let e=[],n=new Map,t,r,s=Jt(i[15].cells);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let c=ov(i,s,o),d=a(c);n.set(d,e[o]=fv(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&4194320&&(s=Jt(o[15].cells),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,fv,t,ov),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function kB(i){let e,n,t;const r=[i[18],{class:"cursor-pointer"}];function s(){return i[12](i[15])}let a={$$slots:{default:[xB]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Se(a,r[o]);return e=new Xf({props:a}),e.$on("click",s),{c(){N(e.$$.fragment),n=me()},l(o){j(e.$$.fragment,o),n=_e(o)},m(o,c){V(e,o,c),R(o,n,c),t=!0},p(o,c){i=o;const d=c&262144?Mt(r,[dn(i[18]),r[1]]):{};c&536870928&&(d.$$scope={dirty:c,ctx:i}),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){o&&S(n),U(e,o)}}}function hv(i,e){let n,t,r;return t=new Ho({props:{rowAttrs:e[15].attrs(),$$slots:{default:[kB,({rowAttrs:s})=>({18:s}),({rowAttrs:s})=>s?262144:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Be(),N(t.$$.fragment),this.h()},l(s){n=Be(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.rowAttrs=e[15].attrs()),a&537133072&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function CB(i){let e=[],n=new Map,t,r,s=Jt(i[4]);const a=o=>o[15].id;for(let o=0;o<s.length;o+=1){let c=iv(i,s,o),d=a(c);n.set(d,e[o]=hv(d,c))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Be()},l(o){for(let c=0;c<e.length;c+=1)e[c].l(o);t=Be()},m(o,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,c);R(o,t,c),r=!0},p(o,c){c&4456496&&(s=Jt(o[4]),dt(),e=Ir(e,c,a,1,o,s,n,t.parentNode,Fr,hv,t,iv),pt())},i(o){if(!r){for(let c=0;c<s.length;c+=1)T(e[c]);r=!0}},o(o){for(let c=0;c<e.length;c+=1)E(e[c]);r=!1},d(o){o&&S(t);for(let c=0;c<e.length;c+=1)e[c].d(o)}}}function SB(i){let e,n,t,r;e=new Jv({props:{$$slots:{default:[bB]},$$scope:{ctx:i}}});const s=[i[3]];let a={$$slots:{default:[CB]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Se(a,s[o]);return t=new Yv({props:a}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=_e(o),j(t.$$.fragment,o)},m(o,c){V(e,o,c),R(o,n,c),V(t,o,c),r=!0},p(o,c){const d={};c&536870916&&(d.$$scope={dirty:c,ctx:o}),e.$set(d);const _=c&8?Mt(s,[dn(o[3])]):{};c&536870928&&(_.$$scope={dirty:c,ctx:o}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function TB(i){let e,n;return e=new NF({props:{tableModel:i[6]}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:vt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function IB(i){let e,n="No POIs in Favourites";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-cqoewt"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-center text-xl")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function EB(i){let e,n,t,r,s,a,o,c,d;n=new CF({props:{tableModel:i[6]}});const _=[i[1]];let b={$$slots:{default:[SB]},$$scope:{ctx:i}};for(let D=0;D<_.length;D+=1)b=Se(b,_[D]);s=new Hv({props:b});const x=[IB,TB],P=[];function L(D,B){return D[0].length===0?0:1}return o=L(i),c=P[o]=x[o](i),{c(){e=oe("div"),N(n.$$.fragment),t=me(),r=oe("div"),N(s.$$.fragment),a=me(),c.c(),this.h()},l(D){e=ae(D,"DIV",{class:!0});var B=we(e);j(n.$$.fragment,B),t=_e(B),r=ae(B,"DIV",{class:!0});var Z=we(r);j(s.$$.fragment,Z),Z.forEach(S),a=_e(B),c.l(B),B.forEach(S),this.h()},h(){ne(r,"class","rounded-md border"),ne(e,"class","space-y-4")},m(D,B){R(D,e,B),V(n,e,null),ue(e,t),ue(e,r),V(s,r,null),ue(e,a),P[o].m(e,null),d=!0},p(D,[B]){const Z=B&2?Mt(_,[dn(D[1])]):{};B&536870940&&(Z.$$scope={dirty:B,ctx:D}),s.$set(Z);let W=o;o=L(D),o===W?P[o].p(D,B):(dt(),E(P[W],1,1,()=>{P[W]=null}),pt(),c=P[o],c?c.p(D,B):(c=P[o]=x[o](D),c.c()),T(c,1),c.m(e,null))},i(D){d||(T(n.$$.fragment,D),T(s.$$.fragment,D),T(c),d=!0)},o(D){E(n.$$.fragment,D),E(s.$$.fragment,D),E(c),d=!1},d(D){D&&S(e),U(n),U(s),P[o].d()}}}function PB(i,e,n){let t,r,s,a,{data:o}=e,{removeFavourite:c}=e;const d=Gv(Sa(o),{sort:Zv({toggleOrder:["asc","desc"]}),page:Wv(),colFilter:Kv(),hide:Xv()}),_=d.createColumns([d.column({accessor:"name",header:"Name",id:"name",cell:({value:W,row:Q})=>Q.isData()?Xc(W0,{value:W}):W,plugins:{colFilter:{fn:({filterValue:W,value:Q})=>Q.toLowerCase().includes(W.toLowerCase()),initialFilterValue:"",render:({filterValue:W})=>os(W)}}}),d.column({accessor:"features",header:"Features",id:"features",cell:({value:W,row:Q})=>Q.isData()?Xc(W0,{value:W.join(", ")}):W.join(""),plugins:{colFilter:{fn:({filterValue:W,value:Q})=>W.length===0||!Array.isArray(W)?!0:W.some(ve=>Q.includes(ve)),initialFilterValue:[],render:({filterValue:W})=>os(W)},sort:{disable:!0}}}),d.display({id:"actions",header:()=>"",cell:({row:W})=>W.isData()&&W.original?Xc(aF,{row:W.original,rowId:parseInt(W.id),removeFavourite:c}):"",plugins:{sort:{disable:!0}}})]),b=W=>W.original,x=d.createViewModel(_),{headerRows:P,pageRows:L,tableAttrs:D,tableBodyAttrs:B}=x;sn(i,P,W=>n(2,r=W)),sn(i,L,W=>n(4,a=W)),sn(i,D,W=>n(1,t=W)),sn(i,B,W=>n(3,s=W));const Z=W=>Ta("/app?focus-poi="+encodeURIComponent(b(W).id));return i.$$set=W=>{"data"in W&&n(0,o=W.data),"removeFavourite"in W&&n(11,c=W.removeFavourite)},[o,t,r,s,a,b,x,P,L,D,B,c,Z]}class AB extends st{constructor(e){super(),it(this,e,PB,EB,rt,{data:0,removeFavourite:11})}}function MB(i){let e;return{c(){e=je("Favourites")},l(n){e=qe(n,"Favourites")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function DB(i){let e,n,t,r;return e=new ms({props:{tag:"h2",class:"mb-3",$$slots:{default:[MB]},$$scope:{ctx:i}}}),t=new hi({}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&256&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function zB(i){let e,n;return e=new AB({props:{data:i[3],removeFavourite:i[0]}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.data=t[3]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function LB(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function RB(i){let e,n,t,r;const s=[LB,zB],a=[];function o(c,d){return c[4]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Be()},l(c){n.l(c),t=Be()},m(c,d){a[e].m(c,d),R(c,t,d),r=!0},p(c,d){let _=e;e=o(c),e===_?a[e].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),n=a[e],n?n.p(c,d):(n=a[e]=s[e](c),n.c()),T(n,1),n.m(t.parentNode,t))},i(c){r||(T(n),r=!0)},o(c){E(n),r=!1},d(c){c&&S(t),a[e].d(c)}}}function OB(i){let e,n,t,r,s;return n=new Br({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[DB]},$$scope:{ctx:i}}}),r=new Er({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[2]}px);`,$$slots:{default:[RB]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=me(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=we(e);j(n.$$.fragment,o),o.forEach(S),t=_e(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[6](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const c={};o&256&&(c.$$scope={dirty:o,ctx:a}),n.$set(c);const d={};o&4&&(d.style=`height: calc(100% - ${a[2]}px);`),o&280&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[6](null),U(r,a)}}}function FB(i){let e,n,t,r,s;return n=new tr({props:{class:"relative p-4 h-full",$$slots:{default:[OB]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=we(e);j(n.$$.fragment,o),o.forEach(S),this.h()},h(){ne(e,"class","flex flex-col p-4 relative h-full")},m(a,o){R(a,e,o),V(n,e,null),t=!0,r||(s=$t(window,"resize",i[5]),r=!0)},p(a,[o]){const c={};o&286&&(c.$$scope={dirty:o,ctx:a}),n.$set(c)},i(a){t||(T(n.$$.fragment,a),t=!0)},o(a){E(n.$$.fragment,a),t=!1},d(a){a&&S(e),U(n),r=!1,s()}}}function BB(i,e,n){let t,r=64;const s=()=>{const b=t.offsetHeight;b!==void 0&&n(2,r=b)};Qn(s);let a=[],o=!0;const c=async()=>{const b=await fetch("/api/favourites");if(b.ok){const x=await b.json(),P=[];x.forEach(L=>{const D=Pa.decode(L);if(Yf.isRight(D)){const B=D.right;P.push(B)}else console.error("Invalid POI object received from API: ",D.left)}),n(3,a=P),n(4,o=!1)}},d=async b=>{n(4,o=!0);const x=a[b].id,P=await fetch("/api/favourites?poi_id="+encodeURIComponent(x),{method:"DELETE"});P.ok||console.error(await P.json()),await ci(),c()};Qn(c);function _(b){Vt[b?"unshift":"push"](()=>{t=b,n(1,t)})}return[d,t,r,a,o,s,_]}class NB extends st{constructor(e){super(),it(this,e,BB,FB,rt,{removeFavourite:0})}get removeFavourite(){return this.$$.ctx[0]}}function VB(i){let e,n,t,r,s,a,o,c,d,_="Profile Picture",b,x,P,L,D,B="Profile Picture:",Z,W,Q,ve,re,ce,ge,le=!i[1]&&dv(i),G=i[1]&&mv(i);r=new hi({props:{orientation:"horizontal",class:"lg:hidden"}}),a=new hi({props:{orientation:"vertical",class:"max-lg:hidden"}});const ee=[QB,YB],fe=[];function $e(he,ke){return he[0].profile_picture===void 0?0:1}return x=$e(i),P=fe[x]=ee[x](i),ve=new Nn({props:{$$slots:{default:[sN]},$$scope:{ctx:i}}}),ve.$on("click",i[8]),{c(){e=oe("div"),le&&le.c(),n=me(),G&&G.c(),t=me(),N(r.$$.fragment),s=me(),N(a.$$.fragment),o=me(),c=oe("div"),d=oe("h2"),d.textContent=_,b=me(),P.c(),L=me(),D=oe("label"),D.textContent=B,Z=me(),W=oe("input"),Q=me(),N(ve.$$.fragment),this.h()},l(he){e=ae(he,"DIV",{class:!0});var ke=we(e);le&&le.l(ke),n=_e(ke),G&&G.l(ke),ke.forEach(S),t=_e(he),j(r.$$.fragment,he),s=_e(he),j(a.$$.fragment,he),o=_e(he),c=ae(he,"DIV",{class:!0});var Ue=we(c);d=ae(Ue,"H2",{class:!0,"data-svelte-h":!0}),on(d)!=="svelte-1qatzt5"&&(d.textContent=_),b=_e(Ue),P.l(Ue),L=_e(Ue),D=ae(Ue,"LABEL",{for:!0,"data-svelte-h":!0}),on(D)!=="svelte-1j5ep21"&&(D.textContent=B),Z=_e(Ue),W=ae(Ue,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),Q=_e(Ue),j(ve.$$.fragment,Ue),Ue.forEach(S),this.h()},h(){ne(e,"class","relative card h-full w-full md:w-3/4 max-w-3xl md:max-h-[32rem] max-h-none flex bg-base-200 shadow-xl p-6 flex-col"),ne(d,"class","text-2xl font-bold mb-2"),ne(D,"for","profile-picture"),ne(W,"id","profile-picture"),ne(W,"type","file"),ne(W,"accept","image/png, image/jpeg"),ne(W,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),ne(c,"class","relative card h-full w-full md:w-3/4 max-w-3xl max-h-none flex bg-base-200 shadow-xl p-6 flex-col")},m(he,ke){R(he,e,ke),le&&le.m(e,null),ue(e,n),G&&G.m(e,null),R(he,t,ke),V(r,he,ke),R(he,s,ke),V(a,he,ke),R(he,o,ke),R(he,c,ke),ue(c,d),ue(c,b),fe[x].m(c,null),ue(c,L),ue(c,D),ue(c,Z),ue(c,W),ue(c,Q),V(ve,c,null),re=!0,ce||(ge=$t(W,"change",i[9]),ce=!0)},p(he,ke){he[1]?le&&(dt(),E(le,1,1,()=>{le=null}),pt()):le?(le.p(he,ke),ke&2&&T(le,1)):(le=dv(he),le.c(),T(le,1),le.m(e,n)),he[1]?G?(G.p(he,ke),ke&2&&T(G,1)):(G=mv(he),G.c(),T(G,1),G.m(e,null)):G&&(dt(),E(G,1,1,()=>{G=null}),pt());let Ue=x;x=$e(he),x===Ue?fe[x].p(he,ke):(dt(),E(fe[Ue],1,1,()=>{fe[Ue]=null}),pt(),P=fe[x],P?P.p(he,ke):(P=fe[x]=ee[x](he),P.c()),T(P,1),P.m(c,L));const Ie={};ke&262144&&(Ie.$$scope={dirty:ke,ctx:he}),ve.$set(Ie)},i(he){re||(T(le),T(G),T(r.$$.fragment,he),T(a.$$.fragment,he),T(P),T(ve.$$.fragment,he),re=!0)},o(he){E(le),E(G),E(r.$$.fragment,he),E(a.$$.fragment,he),E(P),E(ve.$$.fragment,he),re=!1},d(he){he&&(S(e),S(t),S(s),S(o),S(c)),le&&le.d(),G&&G.d(),U(r,he),U(a,he),fe[x].d(),U(ve),ce=!1,ge()}}}function UB(i){let e,n,t;return n=new uo({props:{class:"text-error",$$slots:{default:[iN]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=we(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){ne(e,"class","grow flex items-center justify-center")},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,s){const a={};s&262144&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function jB(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-y7ubrx"&&(e.innerHTML=n),this.h()},h(){ne(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:vt,i:vt,o:vt,d(t){t&&S(e)}}}function dv(i){let e,n,t="User Details",r,s,a,o,c,d,_,b,x,P,L,D,B,Z,W,Q,ve,re,ce,ge,le;a=new uo({props:{for:"nickname",$$slots:{default:[qB]},$$scope:{ctx:i}}});function G(ke){i[10](ke)}let ee={id:"nickname",readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm "+(i[1]?"bg-card":"bg-muted")};i[0].nickname!==void 0&&(ee.value=i[0].nickname),c=new iu({props:ee}),Vt.push(()=>$n(c,"value",G));let fe=i[2]&&pv(i);P=new uo({props:{for:"email",$$slots:{default:[GB]},$$scope:{ctx:i}}}),D=new iu({props:{id:"email",type:"text",value:i[0].email,readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm  bg-muted"}}),W=new uo({props:{for:"description",$$slots:{default:[ZB]},$$scope:{ctx:i}}});function $e(ke){i[11](ke)}let he={id:"description",rows:5,cols:50,readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm bg-muted "+(i[1]?"bg-card":"bg-muted")};return i[0].description!==void 0&&(he.value=i[0].description),ve=new Ip({props:he}),Vt.push(()=>$n(ve,"value",$e)),ge=new Nn({props:{$$slots:{default:[WB]},$$scope:{ctx:i}}}),ge.$on("click",i[6]),{c(){e=oe("div"),n=oe("h2"),n.textContent=t,r=me(),s=oe("div"),N(a.$$.fragment),o=me(),N(c.$$.fragment),_=me(),fe&&fe.c(),b=me(),x=oe("div"),N(P.$$.fragment),L=me(),N(D.$$.fragment),B=me(),Z=oe("div"),N(W.$$.fragment),Q=me(),N(ve.$$.fragment),ce=me(),N(ge.$$.fragment),this.h()},l(ke){e=ae(ke,"DIV",{class:!0});var Ue=we(e);n=ae(Ue,"H2",{class:!0,"data-svelte-h":!0}),on(n)!=="svelte-1pn0m61"&&(n.textContent=t),r=_e(Ue),s=ae(Ue,"DIV",{});var Ie=we(s);j(a.$$.fragment,Ie),o=_e(Ie),j(c.$$.fragment,Ie),_=_e(Ie),fe&&fe.l(Ie),Ie.forEach(S),Ue.forEach(S),b=_e(ke),x=ae(ke,"DIV",{class:!0});var nt=we(x);j(P.$$.fragment,nt),L=_e(nt),j(D.$$.fragment,nt),nt.forEach(S),B=_e(ke),Z=ae(ke,"DIV",{});var Xe=we(Z);j(W.$$.fragment,Xe),Q=_e(Xe),j(ve.$$.fragment,Xe),Xe.forEach(S),ce=_e(ke),j(ge.$$.fragment,ke),this.h()},h(){ne(n,"class","text-2xl font-bold mb-2"),ne(e,"class","mb-4"),ne(x,"class","mb-4")},m(ke,Ue){R(ke,e,Ue),ue(e,n),ue(e,r),ue(e,s),V(a,s,null),ue(s,o),V(c,s,null),ue(s,_),fe&&fe.m(s,null),R(ke,b,Ue),R(ke,x,Ue),V(P,x,null),ue(x,L),V(D,x,null),R(ke,B,Ue),R(ke,Z,Ue),V(W,Z,null),ue(Z,Q),V(ve,Z,null),R(ke,ce,Ue),V(ge,ke,Ue),le=!0},p(ke,Ue){const Ie={};Ue&262144&&(Ie.$$scope={dirty:Ue,ctx:ke}),a.$set(Ie);const nt={};Ue&2&&(nt.class="mt-1 block w-full rounded-md shadow-sm "+(ke[1]?"bg-card":"bg-muted")),!d&&Ue&1&&(d=!0,nt.value=ke[0].nickname,bn(()=>d=!1)),c.$set(nt),ke[2]?fe?(fe.p(ke,Ue),Ue&4&&T(fe,1)):(fe=pv(ke),fe.c(),T(fe,1),fe.m(s,null)):fe&&(dt(),E(fe,1,1,()=>{fe=null}),pt());const Xe={};Ue&262144&&(Xe.$$scope={dirty:Ue,ctx:ke}),P.$set(Xe);const ct={};Ue&1&&(ct.value=ke[0].email),D.$set(ct);const mt={};Ue&262144&&(mt.$$scope={dirty:Ue,ctx:ke}),W.$set(mt);const Dt={};Ue&2&&(Dt.class="mt-1 block w-full rounded-md shadow-sm bg-muted "+(ke[1]?"bg-card":"bg-muted")),!re&&Ue&1&&(re=!0,Dt.value=ke[0].description,bn(()=>re=!1)),ve.$set(Dt);const zt={};Ue&262144&&(zt.$$scope={dirty:Ue,ctx:ke}),ge.$set(zt)},i(ke){le||(T(a.$$.fragment,ke),T(c.$$.fragment,ke),T(fe),T(P.$$.fragment,ke),T(D.$$.fragment,ke),T(W.$$.fragment,ke),T(ve.$$.fragment,ke),T(ge.$$.fragment,ke),le=!0)},o(ke){E(a.$$.fragment,ke),E(c.$$.fragment,ke),E(fe),E(P.$$.fragment,ke),E(D.$$.fragment,ke),E(W.$$.fragment,ke),E(ve.$$.fragment,ke),E(ge.$$.fragment,ke),le=!1},d(ke){ke&&(S(e),S(b),S(x),S(B),S(Z),S(ce)),U(a),U(c),fe&&fe.d(),U(P),U(D),U(W),U(ve),U(ge,ke)}}}function qB(i){let e;return{c(){e=je("Nickname:")},l(n){e=qe(n,"Nickname:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function pv(i){let e,n;return e=new uo({props:{class:"text-error",$$slots:{default:[HB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262148&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function HB(i){let e;return{c(){e=je(i[2])},l(n){e=qe(n,i[2])},m(n,t){R(n,e,t)},p(n,t){t&4&&Ft(e,n[2])},d(n){n&&S(e)}}}function GB(i){let e;return{c(){e=je("Email:")},l(n){e=qe(n,"Email:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function ZB(i){let e;return{c(){e=je("Description:")},l(n){e=qe(n,"Description:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function WB(i){let e;return{c(){e=je("Edit Profile")},l(n){e=qe(n,"Edit Profile")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function mv(i){let e,n="Editing User Details",t,r,s,a,o,c,d,_,b,x,P,L,D,B,Z;s=new uo({props:{for:"edit-email",$$slots:{default:[KB]},$$scope:{ctx:i}}});function W(ce){i[12](ce)}let Q={id:"edit-nickname",type:"text",class:"mt-1 block w-full rounded-md shadow-sm focus:border-green-300 bg-muted "};i[0].nickname!==void 0&&(Q.value=i[0].nickname),o=new iu({props:Q}),Vt.push(()=>$n(o,"value",W)),b=new uo({props:{for:"edit-description",$$slots:{default:[XB]},$$scope:{ctx:i}}});function ve(ce){i[13](ce)}let re={id:"edit-description",rows:5,cols:50,class:"mt-1 block w-full rounded-md shadow-sm focus:border-green-300 bg-muted"};return i[0].description!==void 0&&(re.value=i[0].description),P=new Ip({props:re}),Vt.push(()=>$n(P,"value",ve)),B=new Nn({props:{$$slots:{default:[JB]},$$scope:{ctx:i}}}),B.$on("click",i[7]),{c(){e=oe("h2"),e.textContent=n,t=me(),r=oe("div"),N(s.$$.fragment),a=me(),N(o.$$.fragment),d=me(),_=oe("div"),N(b.$$.fragment),x=me(),N(P.$$.fragment),D=me(),N(B.$$.fragment),this.h()},l(ce){e=ae(ce,"H2",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-g6v2i1"&&(e.textContent=n),t=_e(ce),r=ae(ce,"DIV",{});var ge=we(r);j(s.$$.fragment,ge),a=_e(ge),j(o.$$.fragment,ge),ge.forEach(S),d=_e(ce),_=ae(ce,"DIV",{});var le=we(_);j(b.$$.fragment,le),x=_e(le),j(P.$$.fragment,le),le.forEach(S),D=_e(ce),j(B.$$.fragment,ce),this.h()},h(){ne(e,"class","text-2xl font-bold mb-2")},m(ce,ge){R(ce,e,ge),R(ce,t,ge),R(ce,r,ge),V(s,r,null),ue(r,a),V(o,r,null),R(ce,d,ge),R(ce,_,ge),V(b,_,null),ue(_,x),V(P,_,null),R(ce,D,ge),V(B,ce,ge),Z=!0},p(ce,ge){const le={};ge&262144&&(le.$$scope={dirty:ge,ctx:ce}),s.$set(le);const G={};!c&&ge&1&&(c=!0,G.value=ce[0].nickname,bn(()=>c=!1)),o.$set(G);const ee={};ge&262144&&(ee.$$scope={dirty:ge,ctx:ce}),b.$set(ee);const fe={};!L&&ge&1&&(L=!0,fe.value=ce[0].description,bn(()=>L=!1)),P.$set(fe);const $e={};ge&262144&&($e.$$scope={dirty:ge,ctx:ce}),B.$set($e)},i(ce){Z||(T(s.$$.fragment,ce),T(o.$$.fragment,ce),T(b.$$.fragment,ce),T(P.$$.fragment,ce),T(B.$$.fragment,ce),Z=!0)},o(ce){E(s.$$.fragment,ce),E(o.$$.fragment,ce),E(b.$$.fragment,ce),E(P.$$.fragment,ce),E(B.$$.fragment,ce),Z=!1},d(ce){ce&&(S(e),S(t),S(r),S(d),S(_),S(D)),U(s),U(o),U(b),U(P),U(B,ce)}}}function KB(i){let e;return{c(){e=je("Edit Nickname:")},l(n){e=qe(n,"Edit Nickname:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function XB(i){let e;return{c(){e=je("Edit Description:")},l(n){e=qe(n,"Edit Description:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function JB(i){let e;return{c(){e=je("Save Changes")},l(n){e=qe(n,"Save Changes")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function YB(i){let e,n;return e=new tr({props:{class:"mb-2",$$slots:{default:[tN]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262145&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function QB(i){let e,n;return e=new tr({props:{class:"mb-2",$$slots:{default:[rN]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function eN(i){let e,n;return{c(){e=oe("img"),this.h()},l(t){e=ae(t,"IMG",{src:!0,class:!0,alt:!0,style:!0}),this.h()},h(){ur(e.src,n=i[0].profile_picture)||ne(e,"src",n),ne(e,"class","object-contain rounded-xl"),ne(e,"alt","Profile Picture"),Yc(e,"width","max(200px, 75%)"),Yc(e,"max-height","320px")},m(t,r){R(t,e,r)},p(t,r){r&1&&!ur(e.src,n=t[0].profile_picture)&&ne(e,"src",n)},d(t){t&&S(e)}}}function tN(i){let e,n;return e=new Er({props:{class:"p-2 flex justify-center relative",$$slots:{default:[eN]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262145&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function nN(i){let e,n="You do not currently have a profile picture...";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),on(e)!=="svelte-n8lb6d"&&(e.textContent=n),this.h()},h(){ne(e,"class","text-center")},m(t,r){R(t,e,r)},p:vt,d(t){t&&S(e)}}}function rN(i){let e,n;return e=new Er({props:{class:"p-2",$$slots:{default:[nN]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function sN(i){let e;return{c(){e=je("Upload Profile Picture")},l(n){e=qe(n,"Upload Profile Picture")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function iN(i){let e;return{c(){e=je("Failed to fetch or update data. Contact admin for more details.")},l(n){e=qe(n,"Failed to fetch or update data. Contact admin for more details.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function oN(i){let e,n,t,r;const s=[jB,UB,VB],a=[];function o(c,d){return c[4]?0:c[3]?1:2}return n=o(i),t=a[n]=s[n](i),{c(){e=oe("div"),t.c(),this.h()},l(c){e=ae(c,"DIV",{class:!0});var d=we(e);t.l(d),d.forEach(S),this.h()},h(){ne(e,"class","flex max-lg:flex-col max-lg:items-center gap-4 justify-between")},m(c,d){R(c,e,d),a[n].m(e,null),r=!0},p(c,[d]){let _=n;n=o(c),n===_?a[n].p(c,d):(dt(),E(a[_],1,1,()=>{a[_]=null}),pt(),t=a[n],t?t.p(c,d):(t=a[n]=s[n](c),t.c()),T(t,1),t.m(e,null))},i(c){r||(T(t),r=!0)},o(c){E(t),r=!1},d(c){c&&S(e),a[n].d()}}}function aN(i,e,n){let t;const r=di("refreshAvatarData");sn(i,r,re=>n(15,t=re));let s=!1,a,o="",c=!1,d=!0,_;async function b(){const ce=await(await fetch("/api/settings/profile")).json();n(0,_=ce),((_==null?void 0:_.nickname)===void 0||(_==null?void 0:_.email)===void 0||(_==null?void 0:_.description)===void 0)&&n(3,c=!0),n(4,d=!1)}function x(){n(1,s=!s)}async function P(){if(o)return;n(4,d=!0);const ce=await(await fetch("/api/settings/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{..._,email:void 0,profile_picture:void 0}})})).json();n(0,_=ce),((_==null?void 0:_.nickname)===void 0||(_==null?void 0:_.email)===void 0||(_==null?void 0:_.description)===void 0)&&n(3,c=!0),n(4,d=!1),n(1,s=!1),t!==null&&t()}async function L(){if(a){const re=new FormData;re.append("profile_picture",a),n(4,d=!0);const ce=await fetch("/api/settings/profile/update-picture",{method:"POST",body:re});if(ce.ok){const ge=await ce.json();n(0,_=ge),((_==null?void 0:_.nickname)===void 0||(_==null?void 0:_.email)===void 0||(_==null?void 0:_.description)===void 0)&&n(3,c=!0),n(1,s=!1)}else n(3,c=!0);n(4,d=!1),t!==null&&t()}}const D=["image/png","image/jpeg"];function B(re){const ce=re.target;ce&&ce.files&&ce.files.length>0&&D.includes(ce.files[0].type)?a=ce.files[0]:a=void 0}Qn(b);function Z(re){i.$$.not_equal(_.nickname,re)&&(_.nickname=re,n(0,_))}function W(re){i.$$.not_equal(_.description,re)&&(_.description=re,n(0,_))}function Q(re){i.$$.not_equal(_.nickname,re)&&(_.nickname=re,n(0,_))}function ve(re){i.$$.not_equal(_.description,re)&&(_.description=re,n(0,_))}return i.$$.update=()=>{i.$$.dirty&1&&(_&&typeof _.nickname=="string"&&_.nickname.length<3?n(2,o="Nickname must be at least 3 characters long"):n(2,o=""))},[_,s,o,c,d,r,x,P,L,B,Z,W,Q,ve]}class lN extends st{constructor(e){super(),it(this,e,aN,oN,rt,{})}}function cN(i){let e;return{c(){e=je("Profile Settings")},l(n){e=qe(n,"Profile Settings")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function uN(i){let e,n,t,r;return e=new ms({props:{tag:"h2",class:"mb-3",$$slots:{default:[cN]},$$scope:{ctx:i}}}),t=new hi({}),{c(){N(e.$$.fragment),n=me(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=_e(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function fN(i){let e,n;return e=new lN({}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function hN(i){let e,n,t,r,s;return n=new Br({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[uN]},$$scope:{ctx:i}}}),r=new Er({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[fN]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=me(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=we(e);j(n.$$.fragment,o),o.forEach(S),t=_e(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[3](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const c={};o&16&&(c.$$scope={dirty:o,ctx:a}),n.$set(c);const d={};o&2&&(d.style=`height: calc(100% - ${a[1]}px);`),o&16&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[3](null),U(r,a)}}}function dN(i){let e,n,t,r,s,a;return t=new tr({props:{class:"relative p-4 h-full",$$slots:{default:[hN]},$$scope:{ctx:i}}}),{c(){e=oe("div"),n=oe("div"),N(t.$$.fragment),this.h()},l(o){e=ae(o,"DIV",{class:!0});var c=we(e);n=ae(c,"DIV",{class:!0});var d=we(n);j(t.$$.fragment,d),d.forEach(S),c.forEach(S),this.h()},h(){ne(n,"class","flex flex-col p-4 relative h-full"),ne(e,"class","flex grow flex-col relative h-full")},m(o,c){R(o,e,c),ue(e,n),V(t,n,null),r=!0,s||(a=$t(window,"resize",i[2]),s=!0)},p(o,[c]){const d={};c&19&&(d.$$scope={dirty:c,ctx:o}),t.$set(d)},i(o){r||(T(t.$$.fragment,o),r=!0)},o(o){E(t.$$.fragment,o),r=!1},d(o){o&&S(e),U(t),s=!1,a()}}}function pN(i,e,n){let t,r=64;const s=()=>{const o=t.offsetHeight;o!==void 0&&n(1,r=o)};Qn(s);function a(o){Vt[o?"unshift":"push"](()=>{t=o,n(0,t)})}return[t,r,s,a]}class mN extends st{constructor(e){super(),it(this,e,pN,dN,rt,{})}}const{document:Ld}=Gd;function _v(i){let e;return{c(){e=oe("div"),this.h()},l(n){e=ae(n,"DIV",{class:!0}),we(e).forEach(S),this.h()},h(){ne(e,"class","absolute w-full h-full md:hidden backdrop-blur")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function _N(i){let e,n,t,r,s,a,o,c,d,_,b,x,P,L,D,B,Z;Ld.title=e=i[3];function W(G){i[6](G)}let Q={};i[1]!==void 0&&(Q.menuClosed=i[1]),t=new ZT({props:Q}),Vt.push(()=>$n(t,"menuClosed",W));function ve(G){i[7](G)}let re={slug:i[0].slug};i[1]!==void 0&&(re.menuClosed=i[1]),c=new uI({props:re}),Vt.push(()=>$n(c,"menuClosed",ve));var ce=i[2];function ge(G,ee){return{props:{slug:G[0].slug}}}ce&&(x=Bf(ce,ge(i)));let le=!i[1]&&_v();return{c(){n=me(),N(t.$$.fragment),s=me(),a=oe("div"),o=oe("div"),N(c.$$.fragment),_=me(),b=oe("div"),x&&N(x.$$.fragment),P=me(),le&&le.c(),this.h()},l(G){yv("svelte-a7ezgp",Ld.head).forEach(S),n=_e(G),j(t.$$.fragment,G),s=_e(G),a=ae(G,"DIV",{class:!0,style:!0});var fe=we(a);o=ae(fe,"DIV",{class:!0});var $e=we(o);j(c.$$.fragment,$e),$e.forEach(S),_=_e(fe),b=ae(fe,"DIV",{class:!0});var he=we(b);x&&j(x.$$.fragment,he),P=_e(he),le&&le.l(he),he.forEach(S),fe.forEach(S),this.h()},h(){ne(o,"class","overflow-y-auto shrink-0"),ne(b,"class","relative flex flex-col grow bg-base-300 md:brightness-100 overflow-x-hidden"),cr(b,"brightness-50",!i[1]),ne(a,"class","relative flex"),ne(a,"style",L=`height: calc(100% - ${i[4]}px);`)},m(G,ee){R(G,n,ee),V(t,G,ee),R(G,s,ee),R(G,a,ee),ue(a,o),V(c,o,null),ue(a,_),ue(a,b),x&&V(x,b,null),ue(b,P),le&&le.m(b,null),D=!0,B||(Z=[$t(window,"resize",i[5]),$t(b,"click",i[8])],B=!0)},p(G,[ee]){(!D||ee&8)&&e!==(e=G[3])&&(Ld.title=e);const fe={};!r&&ee&2&&(r=!0,fe.menuClosed=G[1],bn(()=>r=!1)),t.$set(fe);const $e={};if(ee&1&&($e.slug=G[0].slug),!d&&ee&2&&(d=!0,$e.menuClosed=G[1],bn(()=>d=!1)),c.$set($e),ee&4&&ce!==(ce=G[2])){if(x){dt();const he=x;E(he.$$.fragment,1,0,()=>{U(he,1)}),pt()}ce?(x=Bf(ce,ge(G)),N(x.$$.fragment),T(x.$$.fragment,1),V(x,b,P)):x=null}else if(ce){const he={};ee&1&&(he.slug=G[0].slug),x.$set(he)}G[1]?le&&(le.d(1),le=null):le||(le=_v(),le.c(),le.m(b,null)),(!D||ee&2)&&cr(b,"brightness-50",!G[1]),(!D||ee&16&&L!==(L=`height: calc(100% - ${G[4]}px);`))&&ne(a,"style",L)},i(G){D||(T(t.$$.fragment,G),T(c.$$.fragment,G),x&&T(x.$$.fragment,G),D=!0)},o(G){E(t.$$.fragment,G),E(c.$$.fragment,G),x&&E(x.$$.fragment,G),D=!1},d(G){G&&(S(n),S(s),S(a)),U(t,G),U(c),x&&U(x),le&&le.d(),B=!1,br(Z)}}}function gN(i,e,n){let{data:t}=e,r=!0,s=null,a="",o=64;const c=()=>{const x=document.getElementById("app-header"),P=x==null?void 0:x.offsetHeight;P!==void 0&&n(4,o=P)};Qn(c);function d(x){r=x,n(1,r)}function _(x){r=x,n(1,r)}const b=()=>n(1,r=!0);return i.$$set=x=>{"data"in x&&n(0,t=x.data)},i.$$.update=()=>{if(i.$$.dirty&1)switch(t.slug.split("/")[0]){case Rn.HOME:n(2,s=nz),n(3,a="Home");break;case Rn.SOCIAL_NETWORK:n(2,s=kL),n(3,a="Social Network");break;case Rn.POINTS_AND_BADGES:n(2,s=cO),n(3,a="Points & Badges");break;case Rn.CHECK_INS:n(2,s=Z8),n(3,a="Check-ins");break;case Rn.FAVOURITES:n(2,s=NB),n(3,a="Favourites");break;case Rn.SETTINGS:n(2,s=mN),n(3,a="Settings");break;default:Ta("/app");break}},[t,r,s,a,o,c,d,_,b]}class iV extends st{constructor(e){super(),it(this,e,gN,_N,rt,{data:0})}}export{iV as component,qN as universal};
