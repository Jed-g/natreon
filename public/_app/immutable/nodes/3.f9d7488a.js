import{s as T,a as I,f as w,D as S,d,c as D,g as v,h as k,j as y,i as u,z as O,o as j,F as E,r as R,u as C,v as P,w as x,G as A,A as L,y as _}from"../chunks/scheduler.aaa74bef.js";import{S as N,i as U,t as h,c as $,a as m,g as H,f as J}from"../chunks/index.26a4f67a.js";/* empty css                       */import{a as g,U as b}from"../chunks/index.eec8b960.js";import{s as V}from"../chunks/index.f25992f7.js";import{s as q}from"../chunks/index.12ffbd6d.js";function z(l){let t,o,e;const s=l[3].default,n=R(s,l,l[2],null);return{c(){t=w("div"),n&&n.c(),this.h()},l(a){t=v(a,"DIV",{class:!0});var r=k(t);n&&n.l(r),r.forEach(d),this.h()},h(){y(t,"class","flex flex-col grow overflow-x-hidden")},m(a,r){u(a,t,r),n&&n.m(t,null),e=!0},p(a,r){n&&n.p&&(!e||r&4)&&C(n,s,a,a[2],e?x(s,a[2],r,null):P(a[2]),null)},i(a){e||(m(n,a),a&&(o||A(()=>{o=J(t,V,{start:.9,duration:500,opacity:0}),o.start()})),e=!0)},o(a){h(n,a),e=!1},d(a){a&&d(t),n&&n.d(a)}}}function F(l){let t,o='<span class="loading loading-ring loading-lg"></span>';return{c(){t=w("div"),t.innerHTML=o,this.h()},l(e){t=v(e,"DIV",{class:!0,"data-svelte-h":!0}),L(t)!=="svelte-y7ubrx"&&(t.innerHTML=o),this.h()},h(){y(t,"class","grow flex items-center justify-center")},m(e,s){u(e,t,s)},p:_,i:_,o:_,d(e){e&&d(t)}}}function G(l){let t,o,e,s,n;const a=[F,z],r=[];function p(i,c){return i[0]?0:1}return e=p(l),s=r[e]=a[e](l),{c(){t=I(),o=w("main"),s.c(),this.h()},l(i){S("svelte-8mmi25",document.head).forEach(d),t=D(i),o=v(i,"MAIN",{class:!0});var f=k(o);s.l(f),f.forEach(d),this.h()},h(){document.title="Admin Dashboard",y(o,"class","h-screen w-screen full-dynamic-viewport-height full-dynamic-viewport-width flex svelte-wv5lwa")},m(i,c){u(i,t,c),u(i,o,c),r[e].m(o,null),n=!0},p(i,[c]){let f=e;e=p(i),e===f?r[e].p(i,c):(H(),h(r[f],1,1,()=>{r[f]=null}),$(),s=r[e],s?s.p(i,c):(s=r[e]=a[e](i),s.c()),m(s,1),s.m(o,null))},i(i){n||(m(s),n=!0)},o(i){h(s),n=!1},d(i){i&&(d(t),d(o)),r[e].d()}}}function B(l,t,o){let e,s;O(l,g,c=>o(1,s=c));let{$$slots:n={},$$scope:a}=t;const r=Date.now();let p=0,i;return j(async()=>{if(await g.verify(),await q(5e3),!(await fetch("/api/stats/admin/register-new-page-visit")).ok){const f=await fetch("https://api.ipify.org?format=json"),M=(await f.json()).ip;if(!f.ok||!(await fetch("/api/stats/admin/register-new-page-visit-with-ip-param",{method:"POST",body:JSON.stringify({ip:M}),headers:{"Content-Type":"application/json"}})).ok)return}i=setInterval(async()=>{p=Date.now()-r,(await fetch("/api/stats/admin/update-page-visit",{method:"POST",body:JSON.stringify({time_spent_seconds:Math.floor(p/1e3)}),headers:{"Content-Type":"application/json"}})).ok||clearInterval(i)},1e3)}),E(()=>clearInterval(i)),l.$$set=c=>{"$$scope"in c&&o(2,a=c.$$scope)},l.$$.update=()=>{if(l.$$.dirty&2&&o(0,e=s===null),l.$$.dirty&2)switch(s){case!1:window.location.href="/login";break;case b.CUSTOMER:window.location.href="/app";break;case b.REPORTER:window.location.href="/metrics";break}},[e,s,a,n]}class se extends N{constructor(t){super(),U(this,t,B,G,T,{})}}export{se as component};
