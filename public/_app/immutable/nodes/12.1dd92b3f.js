var pC=Object.defineProperty;var _C=(i,e,n)=>e in i?pC(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var Ln=(i,e,n)=>(_C(i,typeof e!="symbol"?e+"":e,n),n);import{s as Ze,I as Q,J as bt,r as tt,u as nt,v as it,w as rt,a3 as wr,t as Gi,S as dl,R as Ar,a4 as Tr,e as Le,i as N,d as I,O as Fe,z as Jt,p as Nt,f as ce,g as ue,h as we,Q as ut,X as Cn,B as Ke,C as Wn,G as ar,y as Ct,N as gC,a2 as At,a5 as vo,l as lt,m as ct,n as cn,x as me,a6 as ap,o as Zi,F as hl,a as ke,c as Ce,A as Rn,j as oe,U as Li,_ as zi,a7 as Og,E as vr,k as Bd,M as lp,a8 as vC,a9 as bC,Y as bo,P as fs,T as Gn,K as Wi,L as Ki,aa as Xi,D as Ry,q as ba}from"../chunks/scheduler.ef5aa3da.js";import{S as Xe,i as Je,b as H,d as W,m as G,a as E,t as P,e as Z,g as It,c as Pt,h as bs,f as ys,k as Qr,j as Zn}from"../chunks/index.7d1d894a.js";import{g as cp}from"../chunks/globals.7f7f1b26.js";import{d as bc,i as pn,w as Ri,n as Ti,a as Jr,g as Ly,b as ml,c as yC,e as wC,o as Ho,m as ii,f as Qs,h as ji,j as zn,k as gn,s as Nr,l as Tc,p as $i,u as xc,q as vs,r as xC,t as kC,v as zg,F as Zm,x as Ys,y as CC,z as Gu,A as TC,B as eh,S as Nd,C as SC,D as xd,E as Et,G as pl,H as qi,L as EC,I as up,J as IC}from"../chunks/LogoutButton.943412aa.js";import{g as at,a as dn,e as kn,u as Sr,o as Mr,d as PC}from"../chunks/spread.e8bb49a5.js";import{d as Bn,w as wn,a as Wm,r as As}from"../chunks/paths.c2beaea9.js";import{g as il}from"../chunks/navigation.dceec57b.js";import{I as br,B as es,d as $C,a as AC,S as _l,b as MC,g as DC,e as Km,i as Fy,E as th,f as Pd,h as $d,j as yc,k as Rg,m as gc,o as Em,q as OC,r as Im,v as zC}from"../chunks/index.a8729054.js";import{p as By}from"../chunks/stores.d2c41654.js";import{c as nf,f as RC,e as LC,q as Lg,a as Fg,s as FC}from"../chunks/index.51a055d9.js";import{s as BC}from"../chunks/index.d3d61c93.js";function NC(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function VC(i){let e,n;const t=[{name:"check"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[NC]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function jC(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M20 6 9 17l-5-5"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}let UC=class extends Xe{constructor(e){super(),Je(this,e,jC,VC,Ze,{})}};const fp=UC;function qC(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function HC(i){let e,n;const t=[{name:"chevron-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[qC]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function GC(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m6 9 6 6 6-6"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class ZC extends Xe{constructor(e){super(),Je(this,e,GC,HC,Ze,{})}}const WC=ZC;function KC(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function XC(i){let e,n;const t=[{name:"chevrons-up-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[KC]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function JC(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m7 15 5 5 5-5"}],["path",{d:"m7 9 5-5 5 5"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class YC extends Xe{constructor(e){super(),Je(this,e,JC,XC,Ze,{})}}const QC=YC;function e3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function t3(i){let e,n;const t=[{name:"filter-x"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[e3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function n3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055"}],["path",{d:"m22 3-5 5"}],["path",{d:"m17 3 5 5"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class i3 extends Xe{constructor(e){super(),Je(this,e,n3,t3,Ze,{})}}const r3=i3;function s3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function o3(i){let e,n;const t=[{name:"filter"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[s3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function a3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class l3 extends Xe{constructor(e){super(),Je(this,e,a3,o3,Ze,{})}}const dp=l3;function c3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function u3(i){let e,n;const t=[{name:"glasses"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[c3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function f3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"6",cy:"15",r:"4"}],["circle",{cx:"18",cy:"15",r:"4"}],["path",{d:"M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2"}],["path",{d:"M2.5 13 5 7c.7-1.3 1.4-2 3-2"}],["path",{d:"M21.5 13 19 7c-.7-1.3-1.5-2-3-2"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class d3 extends Xe{constructor(e){super(),Je(this,e,f3,u3,Ze,{})}}const hp=d3;function h3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function m3(i){let e,n;const t=[{name:"heart"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[h3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function p3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class _3 extends Xe{constructor(e){super(),Je(this,e,p3,m3,Ze,{})}}const Sc=_3;function g3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function v3(i){let e,n;const t=[{name:"info"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[g3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function b3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class y3 extends Xe{constructor(e){super(),Je(this,e,b3,v3,Ze,{})}}const Ny=y3;function w3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function x3(i){let e,n;const t=[{name:"layers"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[w3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function k3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class C3 extends Xe{constructor(e){super(),Je(this,e,k3,x3,Ze,{})}}const T3=C3;function S3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function E3(i){let e,n;const t=[{name:"map"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[S3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function I3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}let P3=class extends Xe{constructor(e){super(),Je(this,e,I3,E3,Ze,{})}};const $3=P3;function A3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function M3(i){let e,n;const t=[{name:"message-circle-more"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[A3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function D3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"}],["path",{d:"M8 12h.01"}],["path",{d:"M12 12h.01"}],["path",{d:"M16 12h.01"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class O3 extends Xe{constructor(e){super(),Je(this,e,D3,M3,Ze,{})}}const Vy=O3;function z3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function R3(i){let e,n;const t=[{name:"messages-square"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[z3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function L3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2z"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class F3 extends Xe{constructor(e){super(),Je(this,e,L3,R3,Ze,{})}}const B3=F3;function N3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function V3(i){let e,n;const t=[{name:"search"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[N3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function j3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class U3 extends Xe{constructor(e){super(),Je(this,e,j3,V3,Ze,{})}}const jy=U3;function q3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function H3(i){let e,n;const t=[{name:"settings-2"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[q3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function G3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M20 7h-9"}],["path",{d:"M14 17H5"}],["circle",{cx:"17",cy:"17",r:"3"}],["circle",{cx:"7",cy:"7",r:"3"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class Z3 extends Xe{constructor(e){super(),Je(this,e,G3,H3,Ze,{})}}const W3=Z3;function K3(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function X3(i){let e,n;const t=[{name:"shield"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[K3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function J3(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class Y3 extends Xe{constructor(e){super(),Je(this,e,J3,X3,Ze,{})}}const Q3=Y3;function eT(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function tT(i){let e,n;const t=[{name:"thumbs-up"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[eT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function nT(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M7 10v12"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class iT extends Xe{constructor(e){super(),Je(this,e,nT,tT,Ze,{})}}const Uy=iT;function rT(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function sT(i){let e,n;const t=[{name:"tree-pine"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[rT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function oT(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z"}],["path",{d:"M12 22v-3"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class aT extends Xe{constructor(e){super(),Je(this,e,oT,sT,Ze,{})}}const lT=aT;function cT(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function uT(i){let e,n;const t=[{name:"user-round-search"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[cT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function fT(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M2 21a8 8 0 0 1 10.434-7.62"}],["circle",{cx:"18",cy:"18",r:"3"}],["path",{d:"m22 22-1.9-1.9"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class dT extends Xe{constructor(e){super(),Je(this,e,fT,uT,Ze,{})}}const hT=dT;function mT(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function pT(i){let e,n;const t=[{name:"user"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[mT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function _T(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class gT extends Xe{constructor(e){super(),Je(this,e,_T,pT,Ze,{})}}const vT=gT;function bT(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function yT(i){let e,n;const t=[{name:"users-round"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[bT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function wT(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class xT extends Xe{constructor(e){super(),Je(this,e,wT,yT,Ze,{})}}const kT=xT;function CT(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function TT(i){let e,n;const t=[{name:"x"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[CT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new br({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[t[0],o&2&&dn(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function ST(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return i.$$set=o=>{n(1,e=Q(Q({},e),bt(o))),"$$scope"in o&&n(3,r=o.$$scope)},e=bt(e),[s,e,t,r]}class ET extends Xe{constructor(e){super(),Je(this,e,ST,TT,Ze,{})}}const IT=ET;function PT(i,e,n,t=!0){const r=e-n;return r<=0?t?i[i.length-1]:i[0]:i[r]}function $T(i,e,n,t=!0){const r=e+n;return r>i.length-1?t?i[0]:i[i.length-1]:i[r]}function AT(i,e,n=!0){return e===i.length-1?n?i[0]:i[e]:i[e+1]}function MT(i,e,n=!0){return e<=0?n?i[i.length-1]:i[0]:i[e-1]}function Ad(i){return i[i.length-1]}function DT(i,e){return i.map((n,t)=>i[(e+t)%i.length])}function OT(i,e,n=bc){const t=e.findIndex(r=>n(r,i));return t!==-1?e.splice(t,1):e.push(i),e}function zT(i){const e=[],n=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>t.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}function qy(i){i.setAttribute("data-highlighted","")}function el(i){i.removeAttribute("data-highlighted")}function Pm(i){return Array.from(i.querySelectorAll('[role="option"]:not([data-disabled])')).filter(e=>pn(e))}const Us=(i,e)=>{const n=Ri(i),t=(s,o)=>{n.update(a=>{const l=s(a);let f=l;return e&&(f=e({curr:a,next:l})),o==null||o(f),f})};return{...n,update:t,set:s=>{t(()=>s)}}};function _o(i){return new Promise(e=>setTimeout(e,i))}let RT="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",mp=(i=21)=>{let e="",n=i;for(;n--;)e+=RT[Math.random()*64|0];return e};function Vd(){return mp(10)}function al(i){return i.reduce((e,n)=>(e[n]=Vd(),e),{})}function LT(i,e=500){let n=null;return function(...t){const r=()=>{n=null,i(...t)};n&&clearTimeout(n),n=setTimeout(r,e)}}const Hy=()=>typeof window<"u";function FT(){const i=navigator.userAgentData;return(i==null?void 0:i.platform)??navigator.platform}const Gy=i=>Hy()&&i.test(FT().toLowerCase()),BT=()=>Hy()&&!!navigator.maxTouchPoints,NT=()=>Gy(/^mac/)&&!BT(),VT=()=>Gy(/mac|iphone|ipad|ipod/i),jT=()=>VT()&&!NT(),$m="data-melt-scroll-lock";function Bg(i,e){if(!i)return;const n=i.style.cssText;return Object.assign(i.style,e),()=>{i.style.cssText=n}}function UT(i,e,n){if(!i)return;const t=i.style.getPropertyValue(e);return i.style.setProperty(e,n),()=>{t?i.style.setProperty(e,t):i.style.removeProperty(e)}}function qT(i){const e=i.getBoundingClientRect().left;return Math.round(e)+i.scrollLeft?"paddingLeft":"paddingRight"}function nh(i){const e=i??document,n=e.defaultView??window,{documentElement:t,body:r}=e;if(r.hasAttribute($m))return Ti;r.setAttribute($m,"");const o=n.innerWidth-t.clientWidth,a=()=>UT(t,"--scrollbar-width",`${o}px`),l=qT(t),f=n.getComputedStyle(r)[l],m=()=>Bg(r,{overflow:"hidden",[l]:`calc(${f} + ${o}px)`}),g=()=>{const{scrollX:S,scrollY:M,visualViewport:$}=n,D=($==null?void 0:$.offsetLeft)??0,F=($==null?void 0:$.offsetTop)??0,L=Bg(r,{position:"fixed",overflow:"hidden",top:`${-(M-Math.floor(F))}px`,left:`${-(S-Math.floor(D))}px`,right:"0",[l]:`calc(${f} + ${o}px)`});return()=>{L==null||L(),n.scrollTo(S,M)}},w=[a(),jT()?g():m()];return()=>{w.forEach(S=>S==null?void 0:S()),r.removeAttribute($m)}}function Zu(i){const{open:e,forceVisible:n,activeTrigger:t}=i;return Bn([e,n,t],([r,s,o])=>(r||s)&&o!==null)}function Yr(i){const e={};return Object.keys(i).forEach(n=>{const t=n,r=i[t];e[t]=Ri(wn(r))}),e}function Xr(i){Jr&&_o(1).then(()=>{const e=document.activeElement;!pn(e)||e===i||(e.tabIndex=-1,i&&(i.tabIndex=0,i.focus()))})}function Zy(){return Array.from(document.querySelectorAll('a[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])'))}function HT(i){const e=Zy(),t=e.indexOf(i)+1,r=e[t];return t<e.length&&pn(r)?r:null}function GT(i){const e=Zy(),t=e.indexOf(i)-1,r=e[t];return t>=0&&pn(r)?r:null}const ZT=new Set(["Shift","Control","Alt","Meta","CapsLock","NumLock"]),WT={onMatch:Xr,getCurrentItem:()=>document.activeElement};function Wy(i={}){const e={...WT,...i},n=Ri(wn([])),t=LT(()=>{n.update(()=>[])});return{typed:n,resetTyped:t,handleTypeaheadSearch:(s,o)=>{if(ZT.has(s))return;const a=e.getCurrentItem(),l=wr(n);if(!Array.isArray(l))return;l.push(s.toLowerCase()),n.set(l);const f=o.filter(D=>!(D.getAttribute("disabled")==="true"||D.getAttribute("aria-disabled")==="true"||D.hasAttribute("data-disabled"))),g=l.length>1&&l.every(D=>D===l[0])?l[0]:l.join(""),w=pn(a)?f.indexOf(a):-1;let S=DT(f,Math.max(w,0));g.length===1&&(S=S.filter(D=>D!==a));const $=S.find(D=>(D==null?void 0:D.innerText)&&D.innerText.toLowerCase().startsWith(g.toLowerCase()));pn($)&&$!==a&&e.onMatch($),t()}}}function KT(i){let e=i.parentElement;for(;pn(e)&&!e.hasAttribute("data-portal");)e=e.parentElement;return e||"body"}function ll(i,e){return e!==void 0?e:KT(i)==="body"?document.body:null}function XT(i){return e=>{const n=e.target,t=Ly(i);if(!t||!ml(n))return!1;const r=t.id;return!!(yC(n)&&r===n.htmlFor||n.closest(`label[for="${r}"]`))}}async function Wu(i){const{prop:e,defaultEl:n}=i;if(await Promise.all([_o(1),Gi]),e===void 0){n==null||n.focus();return}const t=wC(e)?e(n):e;if(typeof t=="string"){const r=document.querySelector(t);if(!pn(r))return;r.focus()}else pn(t)&&t.focus()}const{name:zu,selector:Ng}=Tc("accordion"),JT={multiple:!1,disabled:!1,forceVisible:!1},YT=i=>{const e={...JT,...i},n=Yr(Ho(e,"value","onValueChange","defaultValue")),t=al(["root"]),{disabled:r,forceVisible:s}=n,o=e.value??wn(e.defaultValue),a=Us(o,e==null?void 0:e.onValueChange),l=(L,U)=>U===void 0?!1:typeof U=="string"?U===L:U.includes(L),f=Bn(a,L=>U=>l(U,L)),m=ii(zu(),{returned:()=>({"data-melt-id":t.root})}),g=L=>typeof L=="string"?{value:L}:L,w=L=>typeof L=="number"?{level:L}:L,S=ii(zu("item"),{stores:a,returned:L=>U=>{const{value:ne,disabled:se}=g(U);return{"data-state":l(ne,L)?"open":"closed","data-disabled":Qs(se)}}}),M=ii(zu("trigger"),{stores:[a,r],returned:([L,U])=>ne=>{const{value:se,disabled:ee}=g(ne);return{disabled:Qs(U||ee),"aria-expanded":!!l(se,L),"aria-disabled":!!ee,"data-disabled":Qs(ee),"data-value":se,"data-state":l(se,L)?"open":"closed"}},action:L=>({destroy:ji(zn(L,"click",()=>{const ne=L.dataset.disabled==="true",se=L.dataset.value;ne||!se||F(se)}),zn(L,"keydown",ne=>{if(![gn.ARROW_DOWN,gn.ARROW_UP,gn.HOME,gn.END].includes(ne.key))return;if(ne.preventDefault(),ne.key===gn.SPACE||ne.key===gn.ENTER){const de=L.dataset.disabled==="true",he=L.dataset.value;if(de||!he)return;F(he);return}const se=ne.target,ee=Ly(t.root);if(!ee||!pn(se))return;const _e=Array.from(ee.querySelectorAll(Ng("trigger"))).filter(de=>pn(de)?de.dataset.disabled!=="true":!1);if(!_e.length)return;const re=_e.indexOf(se);ne.key===gn.ARROW_DOWN&&_e[(re+1)%_e.length].focus(),ne.key===gn.ARROW_UP&&_e[(re-1+_e.length)%_e.length].focus(),ne.key===gn.HOME&&_e[0].focus(),ne.key===gn.END&&_e[_e.length-1].focus()}))})}),$=ii(zu("content"),{stores:[a,r,s],returned:([L,U,ne])=>se=>{const{value:ee}=g(se),fe=l(ee,L)||ne;return{"data-state":fe?"open":"closed","data-disabled":Qs(U),"data-value":ee,hidden:fe?void 0:!0,style:Nr({display:fe?void 0:"none"})}},action:L=>{Gi().then(()=>{const U=Vd(),ne=Vd(),se=document.querySelector(`${Ng("trigger")}, [data-value="${L.dataset.value}"]`);pn(se)&&(L.id=U,se.setAttribute("aria-controls",U),se.id=ne)})}}),D=ii(zu("heading"),{returned:()=>L=>{const{level:U}=w(L);return{role:"heading","aria-level":U,"data-heading-level":U}}});function F(L){a.update(U=>U===void 0?e.multiple?[L]:L:Array.isArray(U)?U.includes(L)?U.filter(ne=>ne!==L):(U.push(L),U):U===L?void 0:L)}return{ids:t,elements:{root:m,item:S,trigger:M,content:$,heading:D},states:{value:a},helpers:{isSelected:f},options:n}},QT={src:"",delayMs:0,onLoadingStatusChange:void 0},eS=i=>{const e={...QT,...i},n=Yr(Ho(e,"loadingStatus","onLoadingStatusChange")),{src:t,delayMs:r}=n,s=e.loadingStatus??wn("loading"),o=Us(s,e==null?void 0:e.onLoadingStatusChange);$i([t,r],([f,m])=>{if(Jr){const g=new Image;g.src=f,g.onload=()=>{if(r!==void 0){const w=window.setTimeout(()=>{o.set("loaded")},m);return()=>window.clearTimeout(w)}else o.set("loaded")},g.onerror=()=>{o.set("error")}}});const a=ii("avatar-image",{stores:[t,o],returned:([f,m])=>{const g=Nr({display:m==="loaded"?"block":"none"});return{src:f,style:g}}}),l=ii("avatar-fallback",{stores:[o],returned:([f])=>({style:f==="loaded"?Nr({display:"none"}):void 0,hidden:f==="loaded"?!0:void 0})});return{elements:{image:a,fallback:l},states:{loadingStatus:o},options:n}},ya=Math.min,$s=Math.max,jd=Math.round,kd=Math.floor,wa=i=>({x:i,y:i}),tS={left:"right",right:"left",bottom:"top",top:"bottom"},nS={start:"end",end:"start"};function Xm(i,e,n){return $s(i,ya(e,n))}function Ec(i,e){return typeof i=="function"?i(e):i}function xa(i){return i.split("-")[0]}function Ic(i){return i.split("-")[1]}function Ky(i){return i==="x"?"y":"x"}function pp(i){return i==="y"?"height":"width"}function rf(i){return["top","bottom"].includes(xa(i))?"y":"x"}function _p(i){return Ky(rf(i))}function iS(i,e,n){n===void 0&&(n=!1);const t=Ic(i),r=_p(i),s=pp(r);let o=r==="x"?t===(n?"end":"start")?"right":"left":t==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ud(o)),[o,Ud(o)]}function rS(i){const e=Ud(i);return[Jm(i),e,Jm(e)]}function Jm(i){return i.replace(/start|end/g,e=>nS[e])}function sS(i,e,n){const t=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(i){case"top":case"bottom":return n?e?r:t:e?t:r;case"left":case"right":return e?s:o;default:return[]}}function oS(i,e,n,t){const r=Ic(i);let s=sS(xa(i),n==="start",t);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(Jm)))),s}function Ud(i){return i.replace(/left|right|bottom|top/g,e=>tS[e])}function aS(i){return{top:0,right:0,bottom:0,left:0,...i}}function Xy(i){return typeof i!="number"?aS(i):{top:i,right:i,bottom:i,left:i}}function qd(i){return{...i,top:i.y,left:i.x,right:i.x+i.width,bottom:i.y+i.height}}function Vg(i,e,n){let{reference:t,floating:r}=i;const s=rf(e),o=_p(e),a=pp(o),l=xa(e),f=s==="y",m=t.x+t.width/2-r.width/2,g=t.y+t.height/2-r.height/2,w=t[a]/2-r[a]/2;let S;switch(l){case"top":S={x:m,y:t.y-r.height};break;case"bottom":S={x:m,y:t.y+t.height};break;case"right":S={x:t.x+t.width,y:g};break;case"left":S={x:t.x-r.width,y:g};break;default:S={x:t.x,y:t.y}}switch(Ic(e)){case"start":S[o]-=w*(n&&f?-1:1);break;case"end":S[o]+=w*(n&&f?-1:1);break}return S}const lS=async(i,e,n)=>{const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let f=await o.getElementRects({reference:i,floating:e,strategy:r}),{x:m,y:g}=Vg(f,t,l),w=t,S={},M=0;for(let $=0;$<a.length;$++){const{name:D,fn:F}=a[$],{x:L,y:U,data:ne,reset:se}=await F({x:m,y:g,initialPlacement:t,placement:w,strategy:r,middlewareData:S,rects:f,platform:o,elements:{reference:i,floating:e}});m=L??m,g=U??g,S={...S,[D]:{...S[D],...ne}},se&&M<=50&&(M++,typeof se=="object"&&(se.placement&&(w=se.placement),se.rects&&(f=se.rects===!0?await o.getElementRects({reference:i,floating:e,strategy:r}):se.rects),{x:m,y:g}=Vg(f,w,l)),$=-1)}return{x:m,y:g,placement:w,strategy:r,middlewareData:S}};async function gp(i,e){var n;e===void 0&&(e={});const{x:t,y:r,platform:s,rects:o,elements:a,strategy:l}=i,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:g="floating",altBoundary:w=!1,padding:S=0}=Ec(e,i),M=Xy(S),D=a[w?g==="floating"?"reference":"floating":g],F=qd(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(D)))==null||n?D:D.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:f,rootBoundary:m,strategy:l})),L=g==="floating"?{...o.floating,x:t,y:r}:o.reference,U=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),ne=await(s.isElement==null?void 0:s.isElement(U))?await(s.getScale==null?void 0:s.getScale(U))||{x:1,y:1}:{x:1,y:1},se=qd(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:L,offsetParent:U,strategy:l}):L);return{top:(F.top-se.top+M.top)/ne.y,bottom:(se.bottom-F.bottom+M.bottom)/ne.y,left:(F.left-se.left+M.left)/ne.x,right:(se.right-F.right+M.right)/ne.x}}const cS=i=>({name:"arrow",options:i,async fn(e){const{x:n,y:t,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:f,padding:m=0}=Ec(i,e)||{};if(f==null)return{};const g=Xy(m),w={x:n,y:t},S=_p(r),M=pp(S),$=await o.getDimensions(f),D=S==="y",F=D?"top":"left",L=D?"bottom":"right",U=D?"clientHeight":"clientWidth",ne=s.reference[M]+s.reference[S]-w[S]-s.floating[M],se=w[S]-s.reference[S],ee=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let fe=ee?ee[U]:0;(!fe||!await(o.isElement==null?void 0:o.isElement(ee)))&&(fe=a.floating[U]||s.floating[M]);const _e=ne/2-se/2,re=fe/2-$[M]/2-1,de=ya(g[F],re),he=ya(g[L],re),X=de,j=fe-$[M]-he,xe=fe/2-$[M]/2+_e,ze=Xm(X,xe,j),ve=!l.arrow&&Ic(r)!=null&&xe!==ze&&s.reference[M]/2-(xe<X?de:he)-$[M]/2<0,We=ve?xe<X?xe-X:xe-j:0;return{[S]:w[S]+We,data:{[S]:ze,centerOffset:xe-ze-We,...ve&&{alignmentOffset:We}},reset:ve}}}),uS=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(e){var n,t;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:f}=e,{mainAxis:m=!0,crossAxis:g=!0,fallbackPlacements:w,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:M="none",flipAlignment:$=!0,...D}=Ec(i,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const F=xa(r),L=xa(a)===a,U=await(l.isRTL==null?void 0:l.isRTL(f.floating)),ne=w||(L||!$?[Ud(a)]:rS(a));!w&&M!=="none"&&ne.push(...oS(a,$,M,U));const se=[a,...ne],ee=await gp(e,D),fe=[];let _e=((t=s.flip)==null?void 0:t.overflows)||[];if(m&&fe.push(ee[F]),g){const X=iS(r,o,U);fe.push(ee[X[0]],ee[X[1]])}if(_e=[..._e,{placement:r,overflows:fe}],!fe.every(X=>X<=0)){var re,de;const X=(((re=s.flip)==null?void 0:re.index)||0)+1,j=se[X];if(j)return{data:{index:X,overflows:_e},reset:{placement:j}};let xe=(de=_e.filter(ze=>ze.overflows[0]<=0).sort((ze,ve)=>ze.overflows[1]-ve.overflows[1])[0])==null?void 0:de.placement;if(!xe)switch(S){case"bestFit":{var he;const ze=(he=_e.map(ve=>[ve.placement,ve.overflows.filter(We=>We>0).reduce((We,pt)=>We+pt,0)]).sort((ve,We)=>ve[1]-We[1])[0])==null?void 0:he[0];ze&&(xe=ze);break}case"initialPlacement":xe=a;break}if(r!==xe)return{reset:{placement:xe}}}return{}}}};async function fS(i,e){const{placement:n,platform:t,elements:r}=i,s=await(t.isRTL==null?void 0:t.isRTL(r.floating)),o=xa(n),a=Ic(n),l=rf(n)==="y",f=["left","top"].includes(o)?-1:1,m=s&&l?-1:1,g=Ec(e,i);let{mainAxis:w,crossAxis:S,alignmentAxis:M}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return a&&typeof M=="number"&&(S=a==="end"?M*-1:M),l?{x:S*m,y:w*f}:{x:w*f,y:S*m}}const dS=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(e){var n,t;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await fS(e,i);return o===((n=a.offset)==null?void 0:n.placement)&&(t=a.arrow)!=null&&t.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},hS=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(e){const{x:n,y:t,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:D=>{let{x:F,y:L}=D;return{x:F,y:L}}},...l}=Ec(i,e),f={x:n,y:t},m=await gp(e,l),g=rf(xa(r)),w=Ky(g);let S=f[w],M=f[g];if(s){const D=w==="y"?"top":"left",F=w==="y"?"bottom":"right",L=S+m[D],U=S-m[F];S=Xm(L,S,U)}if(o){const D=g==="y"?"top":"left",F=g==="y"?"bottom":"right",L=M+m[D],U=M-m[F];M=Xm(L,M,U)}const $=a.fn({...e,[w]:S,[g]:M});return{...$,data:{x:$.x-n,y:$.y-t}}}}},mS=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(e){const{placement:n,rects:t,platform:r,elements:s}=e,{apply:o=()=>{},...a}=Ec(i,e),l=await gp(e,a),f=xa(n),m=Ic(n),g=rf(n)==="y",{width:w,height:S}=t.floating;let M,$;f==="top"||f==="bottom"?(M=f,$=m===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):($=f,M=m==="end"?"top":"bottom");const D=S-l[M],F=w-l[$],L=!e.middlewareData.shift;let U=D,ne=F;if(g){const ee=w-l.left-l.right;ne=m||L?ya(F,ee):ee}else{const ee=S-l.top-l.bottom;U=m||L?ya(D,ee):ee}if(L&&!m){const ee=$s(l.left,0),fe=$s(l.right,0),_e=$s(l.top,0),re=$s(l.bottom,0);g?ne=w-2*(ee!==0||fe!==0?ee+fe:$s(l.left,l.right)):U=S-2*(_e!==0||re!==0?_e+re:$s(l.top,l.bottom))}await o({...e,availableWidth:ne,availableHeight:U});const se=await r.getDimensions(s.floating);return w!==se.width||S!==se.height?{reset:{rects:!0}}:{}}}};function ka(i){return Jy(i)?(i.nodeName||"").toLowerCase():"#document"}function Ms(i){var e;return(i==null||(e=i.ownerDocument)==null?void 0:e.defaultView)||window}function Go(i){var e;return(e=(Jy(i)?i.ownerDocument:i.document)||window.document)==null?void 0:e.documentElement}function Jy(i){return i instanceof Node||i instanceof Ms(i).Node}function qo(i){return i instanceof Element||i instanceof Ms(i).Element}function yo(i){return i instanceof HTMLElement||i instanceof Ms(i).HTMLElement}function jg(i){return typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof Ms(i).ShadowRoot}function sf(i){const{overflow:e,overflowX:n,overflowY:t,display:r}=Hs(i);return/auto|scroll|overlay|hidden|clip/.test(e+t+n)&&!["inline","contents"].includes(r)}function pS(i){return["table","td","th"].includes(ka(i))}function vp(i){const e=bp(),n=Hs(i);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(t=>(n.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(n.contain||"").includes(t))}function _S(i){let e=kc(i);for(;yo(e)&&!ih(e);){if(vp(e))return e;e=kc(e)}return null}function bp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ih(i){return["html","body","#document"].includes(ka(i))}function Hs(i){return Ms(i).getComputedStyle(i)}function rh(i){return qo(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.pageXOffset,scrollTop:i.pageYOffset}}function kc(i){if(ka(i)==="html")return i;const e=i.assignedSlot||i.parentNode||jg(i)&&i.host||Go(i);return jg(e)?e.host:e}function Yy(i){const e=kc(i);return ih(e)?i.ownerDocument?i.ownerDocument.body:i.body:yo(e)&&sf(e)?e:Yy(e)}function Ku(i,e,n){var t;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=Yy(i),s=r===((t=i.ownerDocument)==null?void 0:t.body),o=Ms(r);return s?e.concat(o,o.visualViewport||[],sf(r)?r:[],o.frameElement&&n?Ku(o.frameElement):[]):e.concat(r,Ku(r,[],n))}function Qy(i){const e=Hs(i);let n=parseFloat(e.width)||0,t=parseFloat(e.height)||0;const r=yo(i),s=r?i.offsetWidth:n,o=r?i.offsetHeight:t,a=jd(n)!==s||jd(t)!==o;return a&&(n=s,t=o),{width:n,height:t,$:a}}function yp(i){return qo(i)?i:i.contextElement}function wc(i){const e=yp(i);if(!yo(e))return wa(1);const n=e.getBoundingClientRect(),{width:t,height:r,$:s}=Qy(e);let o=(s?jd(n.width):n.width)/t,a=(s?jd(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const gS=wa(0);function e2(i){const e=Ms(i);return!bp()||!e.visualViewport?gS:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function vS(i,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ms(i)?!1:e}function cl(i,e,n,t){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=i.getBoundingClientRect(),s=yp(i);let o=wa(1);e&&(t?qo(t)&&(o=wc(t)):o=wc(i));const a=vS(s,n,t)?e2(s):wa(0);let l=(r.left+a.x)/o.x,f=(r.top+a.y)/o.y,m=r.width/o.x,g=r.height/o.y;if(s){const w=Ms(s),S=t&&qo(t)?Ms(t):t;let M=w,$=M.frameElement;for(;$&&t&&S!==M;){const D=wc($),F=$.getBoundingClientRect(),L=Hs($),U=F.left+($.clientLeft+parseFloat(L.paddingLeft))*D.x,ne=F.top+($.clientTop+parseFloat(L.paddingTop))*D.y;l*=D.x,f*=D.y,m*=D.x,g*=D.y,l+=U,f+=ne,M=Ms($),$=M.frameElement}}return qd({width:m,height:g,x:l,y:f})}const bS=[":popover-open",":modal"];function t2(i){return bS.some(e=>{try{return i.matches(e)}catch{return!1}})}function yS(i){let{elements:e,rect:n,offsetParent:t,strategy:r}=i;const s=r==="fixed",o=Go(t),a=e?t2(e.floating):!1;if(t===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},f=wa(1);const m=wa(0),g=yo(t);if((g||!g&&!s)&&((ka(t)!=="body"||sf(o))&&(l=rh(t)),yo(t))){const w=cl(t);f=wc(t),m.x=w.x+t.clientLeft,m.y=w.y+t.clientTop}return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-l.scrollLeft*f.x+m.x,y:n.y*f.y-l.scrollTop*f.y+m.y}}function wS(i){return Array.from(i.getClientRects())}function n2(i){return cl(Go(i)).left+rh(i).scrollLeft}function xS(i){const e=Go(i),n=rh(i),t=i.ownerDocument.body,r=$s(e.scrollWidth,e.clientWidth,t.scrollWidth,t.clientWidth),s=$s(e.scrollHeight,e.clientHeight,t.scrollHeight,t.clientHeight);let o=-n.scrollLeft+n2(i);const a=-n.scrollTop;return Hs(t).direction==="rtl"&&(o+=$s(e.clientWidth,t.clientWidth)-r),{width:r,height:s,x:o,y:a}}function kS(i,e){const n=Ms(i),t=Go(i),r=n.visualViewport;let s=t.clientWidth,o=t.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const f=bp();(!f||f&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function CS(i,e){const n=cl(i,!0,e==="fixed"),t=n.top+i.clientTop,r=n.left+i.clientLeft,s=yo(i)?wc(i):wa(1),o=i.clientWidth*s.x,a=i.clientHeight*s.y,l=r*s.x,f=t*s.y;return{width:o,height:a,x:l,y:f}}function Ug(i,e,n){let t;if(e==="viewport")t=kS(i,n);else if(e==="document")t=xS(Go(i));else if(qo(e))t=CS(e,n);else{const r=e2(i);t={...e,x:e.x-r.x,y:e.y-r.y}}return qd(t)}function i2(i,e){const n=kc(i);return n===e||!qo(n)||ih(n)?!1:Hs(n).position==="fixed"||i2(n,e)}function TS(i,e){const n=e.get(i);if(n)return n;let t=Ku(i,[],!1).filter(a=>qo(a)&&ka(a)!=="body"),r=null;const s=Hs(i).position==="fixed";let o=s?kc(i):i;for(;qo(o)&&!ih(o);){const a=Hs(o),l=vp(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||sf(o)&&!l&&i2(i,o))?t=t.filter(m=>m!==o):r=a,o=kc(o)}return e.set(i,t),t}function SS(i){let{element:e,boundary:n,rootBoundary:t,strategy:r}=i;const o=[...n==="clippingAncestors"?TS(e,this._c):[].concat(n),t],a=o[0],l=o.reduce((f,m)=>{const g=Ug(e,m,r);return f.top=$s(g.top,f.top),f.right=ya(g.right,f.right),f.bottom=ya(g.bottom,f.bottom),f.left=$s(g.left,f.left),f},Ug(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ES(i){const{width:e,height:n}=Qy(i);return{width:e,height:n}}function IS(i,e,n){const t=yo(e),r=Go(e),s=n==="fixed",o=cl(i,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=wa(0);if(t||!t&&!s)if((ka(e)!=="body"||sf(r))&&(a=rh(e)),t){const g=cl(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else r&&(l.x=n2(r));const f=o.left+a.scrollLeft-l.x,m=o.top+a.scrollTop-l.y;return{x:f,y:m,width:o.width,height:o.height}}function qg(i,e){return!yo(i)||Hs(i).position==="fixed"?null:e?e(i):i.offsetParent}function r2(i,e){const n=Ms(i);if(!yo(i)||t2(i))return n;let t=qg(i,e);for(;t&&pS(t)&&Hs(t).position==="static";)t=qg(t,e);return t&&(ka(t)==="html"||ka(t)==="body"&&Hs(t).position==="static"&&!vp(t))?n:t||_S(i)||n}const PS=async function(i){const e=this.getOffsetParent||r2,n=this.getDimensions;return{reference:IS(i.reference,await e(i.floating),i.strategy),floating:{x:0,y:0,...await n(i.floating)}}};function $S(i){return Hs(i).direction==="rtl"}const AS={convertOffsetParentRelativeRectToViewportRelativeRect:yS,getDocumentElement:Go,getClippingRect:SS,getOffsetParent:r2,getElementRects:PS,getClientRects:wS,getDimensions:ES,getScale:wc,isElement:qo,isRTL:$S};function MS(i,e){let n=null,t;const r=Go(i);function s(){var a;clearTimeout(t),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:f,top:m,width:g,height:w}=i.getBoundingClientRect();if(a||e(),!g||!w)return;const S=kd(m),M=kd(r.clientWidth-(f+g)),$=kd(r.clientHeight-(m+w)),D=kd(f),L={rootMargin:-S+"px "+-M+"px "+-$+"px "+-D+"px",threshold:$s(0,ya(1,l))||1};let U=!0;function ne(se){const ee=se[0].intersectionRatio;if(ee!==l){if(!U)return o();ee?o(!1,ee):t=setTimeout(()=>{o(!1,1e-7)},100)}U=!1}try{n=new IntersectionObserver(ne,{...L,root:r.ownerDocument})}catch{n=new IntersectionObserver(ne,L)}n.observe(i)}return o(!0),s}function DS(i,e,n,t){t===void 0&&(t={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=t,f=yp(i),m=r||s?[...f?Ku(f):[],...Ku(e)]:[];m.forEach(F=>{r&&F.addEventListener("scroll",n,{passive:!0}),s&&F.addEventListener("resize",n)});const g=f&&a?MS(f,n):null;let w=-1,S=null;o&&(S=new ResizeObserver(F=>{let[L]=F;L&&L.target===f&&S&&(S.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var U;(U=S)==null||U.observe(e)})),n()}),f&&!l&&S.observe(f),S.observe(e));let M,$=l?cl(i):null;l&&D();function D(){const F=cl(i);$&&(F.x!==$.x||F.y!==$.y||F.width!==$.width||F.height!==$.height)&&n(),$=F,M=requestAnimationFrame(D)}return n(),()=>{var F;m.forEach(L=>{r&&L.removeEventListener("scroll",n),s&&L.removeEventListener("resize",n)}),g==null||g(),(F=S)==null||F.disconnect(),S=null,l&&cancelAnimationFrame(M)}}const OS=hS,zS=uS,RS=mS,LS=cS,FS=(i,e,n)=>{const t=new Map,r={platform:AS,...n},s={...r.platform,_c:t};return lS(i,e,{...r,platform:s})},BS={strategy:"absolute",placement:"top",gutter:5,flip:!0,sameWidth:!1,overflowPadding:8},NS={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function VS(i,e,n={}){if(!e||!i||n===null)return{destroy:Ti};const t={...BS,...n},r=e.querySelector("[data-arrow=true]"),s=[];t.flip&&s.push(zS({boundary:t.boundary,padding:t.overflowPadding}));const o=pn(r)?r.offsetHeight/2:0;if(t.gutter||t.offset){const l=t.gutter?{mainAxis:t.gutter}:t.offset;(l==null?void 0:l.mainAxis)!=null&&(l.mainAxis+=o),s.push(dS(l))}s.push(OS({boundary:t.boundary,crossAxis:t.overlap,padding:t.overflowPadding})),r&&s.push(LS({element:r,padding:8})),s.push(RS({padding:t.overflowPadding,apply({rects:l,availableHeight:f,availableWidth:m}){t.sameWidth&&Object.assign(e.style,{width:`${Math.round(l.reference.width)}px`,minWidth:"unset"}),t.fitViewport&&Object.assign(e.style,{maxWidth:`${m}px`,maxHeight:`${f}px`})}}));function a(){if(!i||!e||pn(i)&&!i.ownerDocument.documentElement.contains(i))return;const{placement:l,strategy:f}=t;FS(i,e,{placement:l,middleware:s,strategy:f}).then(m=>{const g=Math.round(m.x),w=Math.round(m.y),[S,M]=jS(m.placement);if(e.setAttribute("data-side",S),e.setAttribute("data-align",M),Object.assign(e.style,{position:t.strategy,top:`${w}px`,left:`${g}px`}),pn(r)&&m.middlewareData.arrow){const{x:$,y:D}=m.middlewareData.arrow,F=m.placement.split("-")[0];r.setAttribute("data-side",F),Object.assign(r.style,{position:"absolute",left:$!=null?`${$}px`:"",top:D!=null?`${D}px`:"",[F]:`calc(100% - ${o}px)`,transform:NS[F],backgroundColor:"inherit",zIndex:"inherit"})}return m})}return Object.assign(e.style,{position:t.strategy}),{destroy:DS(i,e,a)}}function jS(i){const[e,n="center"]=i.split("-");return[e,n]}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var s2=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Hd=s2.join(","),o2=typeof Element>"u",ul=o2?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Gd=!o2&&Element.prototype.getRootNode?function(i){var e;return i==null||(e=i.getRootNode)===null||e===void 0?void 0:e.call(i)}:function(i){return i==null?void 0:i.ownerDocument},Zd=function i(e,n){var t;n===void 0&&(n=!0);var r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"inert"),s=r===""||r==="true",o=s||n&&e&&i(e.parentNode);return o},US=function(e){var n,t=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return t===""||t==="true"},a2=function(e,n,t){if(Zd(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(Hd));return n&&ul.call(e,Hd)&&r.unshift(e),r=r.filter(t),r},l2=function i(e,n,t){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if(!Zd(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,f=i(l,!0,t);t.flatten?r.push.apply(r,f):r.push({scopeParent:o,candidates:f})}else{var m=ul.call(o,Hd);m&&t.filter(o)&&(n||!e.includes(o))&&r.push(o);var g=o.shadowRoot||typeof t.getShadowRoot=="function"&&t.getShadowRoot(o),w=!Zd(g,!1)&&(!t.shadowRootFilter||t.shadowRootFilter(o));if(g&&w){var S=i(g===!0?o.children:g.children,!0,t);t.flatten?r.push.apply(r,S):r.push({scopeParent:o,candidates:S})}else s.unshift.apply(s,o.children)}}return r},c2=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},nl=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||US(e))&&!c2(e)?0:e.tabIndex},qS=function(e,n){var t=nl(e);return t<0&&n&&!c2(e)?0:t},HS=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},u2=function(e){return e.tagName==="INPUT"},GS=function(e){return u2(e)&&e.type==="hidden"},ZS=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(t){return t.tagName==="SUMMARY"});return n},WS=function(e,n){for(var t=0;t<e.length;t++)if(e[t].checked&&e[t].form===n)return e[t]},KS=function(e){if(!e.name)return!0;var n=e.form||Gd(e),t=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=t(window.CSS.escape(e.name));else try{r=t(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=WS(r,e.form);return!s||s===e},XS=function(e){return u2(e)&&e.type==="radio"},JS=function(e){return XS(e)&&!KS(e)},YS=function(e){var n,t=e&&Gd(e),r=(n=t)===null||n===void 0?void 0:n.host,s=!1;if(t&&t!==e){var o,a,l;for(s=!!((o=r)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&r;){var f,m,g;t=Gd(r),r=(f=t)===null||f===void 0?void 0:f.host,s=!!((m=r)!==null&&m!==void 0&&(g=m.ownerDocument)!==null&&g!==void 0&&g.contains(r))}}return s},Hg=function(e){var n=e.getBoundingClientRect(),t=n.width,r=n.height;return t===0&&r===0},QS=function(e,n){var t=n.displayCheck,r=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=ul.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(ul.call(o,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof r=="function"){for(var a=e;e;){var l=e.parentElement,f=Gd(e);if(l&&!l.shadowRoot&&r(l)===!0)return Hg(e);e.assignedSlot?e=e.assignedSlot:!l&&f!==e.ownerDocument?e=f.host:e=l}e=a}if(YS(e))return!e.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return Hg(e);return!1},e4=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var t=0;t<n.children.length;t++){var r=n.children.item(t);if(r.tagName==="LEGEND")return ul.call(n,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}n=n.parentElement}return!1},Wd=function(e,n){return!(n.disabled||Zd(n)||GS(n)||QS(n,e)||ZS(n)||e4(n))},Ym=function(e,n){return!(JS(n)||nl(n)<0||!Wd(e,n))},t4=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},n4=function i(e){var n=[],t=[];return e.forEach(function(r,s){var o=!!r.scopeParent,a=o?r.scopeParent:r,l=qS(a,o),f=o?i(r.candidates):a;l===0?o?n.push.apply(n,f):n.push(a):t.push({documentOrder:s,tabIndex:l,item:r,isScope:o,content:f})}),t.sort(HS).reduce(function(r,s){return s.isScope?r.push.apply(r,s.content):r.push(s.content),r},[]).concat(n)},i4=function(e,n){n=n||{};var t;return n.getShadowRoot?t=l2([e],n.includeContainer,{filter:Ym.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:t4}):t=a2(e,n.includeContainer,Ym.bind(null,n)),n4(t)},r4=function(e,n){n=n||{};var t;return n.getShadowRoot?t=l2([e],n.includeContainer,{filter:Wd.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):t=a2(e,n.includeContainer,Wd.bind(null,n)),t},vc=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ul.call(e,Hd)===!1?!1:Ym(n,e)},s4=s2.concat("iframe").join(","),Am=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ul.call(e,s4)===!1?!1:Wd(n,e)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Gg(i,e){var n=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),n.push.apply(n,t)}return n}function Zg(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gg(Object(n),!0).forEach(function(t){o4(i,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):Gg(Object(n)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(n,t))})}return i}function o4(i,e,n){return e=l4(e),e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function a4(i,e){if(typeof i!="object"||i===null)return i;var n=i[Symbol.toPrimitive];if(n!==void 0){var t=n.call(i,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function l4(i){var e=a4(i,"string");return typeof e=="symbol"?e:String(e)}var Wg={activateTrap:function(e,n){if(e.length>0){var t=e[e.length-1];t!==n&&t.pause()}var r=e.indexOf(n);r===-1||e.splice(r,1),e.push(n)},deactivateTrap:function(e,n){var t=e.indexOf(n);t!==-1&&e.splice(t,1),e.length>0&&e[e.length-1].unpause()}},c4=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},u4=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Uu=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},f4=function(e){return Uu(e)&&!e.shiftKey},d4=function(e){return Uu(e)&&e.shiftKey},Kg=function(e){return setTimeout(e,0)},Xg=function(e,n){var t=-1;return e.every(function(r,s){return n(r)?(t=s,!1):!0}),t},Ru=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,t):e},Cd=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},h4=[],m4=function(e,n){var t=(n==null?void 0:n.document)||document,r=(n==null?void 0:n.trapStack)||h4,s=Zg({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:f4,isKeyBackward:d4},n),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function(X,j,xe){return X&&X[j]!==void 0?X[j]:s[xe||j]},f=function(X,j){var xe=typeof(j==null?void 0:j.composedPath)=="function"?j.composedPath():void 0;return o.containerGroups.findIndex(function(ze){var ve=ze.container,We=ze.tabbableNodes;return ve.contains(X)||(xe==null?void 0:xe.includes(ve))||We.find(function(pt){return pt===X})})},m=function(X){var j=s[X];if(typeof j=="function"){for(var xe=arguments.length,ze=new Array(xe>1?xe-1:0),ve=1;ve<xe;ve++)ze[ve-1]=arguments[ve];j=j.apply(void 0,ze)}if(j===!0&&(j=void 0),!j){if(j===void 0||j===!1)return j;throw new Error("`".concat(X,"` was specified but was not a node, or did not return a node"))}var We=j;if(typeof j=="string"&&(We=t.querySelector(j),!We))throw new Error("`".concat(X,"` as selector refers to no known node"));return We},g=function(){var X=m("initialFocus");if(X===!1)return!1;if(X===void 0||!Am(X,s.tabbableOptions))if(f(t.activeElement)>=0)X=t.activeElement;else{var j=o.tabbableGroups[0],xe=j&&j.firstTabbableNode;X=xe||m("fallbackFocus")}if(!X)throw new Error("Your focus-trap needs to have at least one focusable element");return X},w=function(){if(o.containerGroups=o.containers.map(function(X){var j=i4(X,s.tabbableOptions),xe=r4(X,s.tabbableOptions),ze=j.length>0?j[0]:void 0,ve=j.length>0?j[j.length-1]:void 0,We=xe.find(function(St){return vc(St)}),pt=xe.slice().reverse().find(function(St){return vc(St)}),Mt=!!j.find(function(St){return nl(St)>0});return{container:X,tabbableNodes:j,focusableNodes:xe,posTabIndexesFound:Mt,firstTabbableNode:ze,lastTabbableNode:ve,firstDomTabbableNode:We,lastDomTabbableNode:pt,nextTabbableNode:function(Dt){var zt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,_t=j.indexOf(Dt);return _t<0?zt?xe.slice(xe.indexOf(Dt)+1).find(function(ft){return vc(ft)}):xe.slice(0,xe.indexOf(Dt)).reverse().find(function(ft){return vc(ft)}):j[_t+(zt?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function(X){return X.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!m("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function(X){return X.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},S=function he(X){var j=X.activeElement;if(j)return j.shadowRoot&&j.shadowRoot.activeElement!==null?he(j.shadowRoot):j},M=function he(X){if(X!==!1&&X!==S(document)){if(!X||!X.focus){he(g());return}X.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=X,c4(X)&&X.select()}},$=function(X){var j=m("setReturnFocus",X);return j||(j===!1?!1:X)},D=function(X){var j=X.target,xe=X.event,ze=X.isBackward,ve=ze===void 0?!1:ze;j=j||Cd(xe),w();var We=null;if(o.tabbableGroups.length>0){var pt=f(j,xe),Mt=pt>=0?o.containerGroups[pt]:void 0;if(pt<0)ve?We=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:We=o.tabbableGroups[0].firstTabbableNode;else if(ve){var St=Xg(o.tabbableGroups,function(Ut){var Rt=Ut.firstTabbableNode;return j===Rt});if(St<0&&(Mt.container===j||Am(j,s.tabbableOptions)&&!vc(j,s.tabbableOptions)&&!Mt.nextTabbableNode(j,!1))&&(St=pt),St>=0){var Dt=St===0?o.tabbableGroups.length-1:St-1,zt=o.tabbableGroups[Dt];We=nl(j)>=0?zt.lastTabbableNode:zt.lastDomTabbableNode}else Uu(xe)||(We=Mt.nextTabbableNode(j,!1))}else{var _t=Xg(o.tabbableGroups,function(Ut){var Rt=Ut.lastTabbableNode;return j===Rt});if(_t<0&&(Mt.container===j||Am(j,s.tabbableOptions)&&!vc(j,s.tabbableOptions)&&!Mt.nextTabbableNode(j))&&(_t=pt),_t>=0){var ft=_t===o.tabbableGroups.length-1?0:_t+1,Be=o.tabbableGroups[ft];We=nl(j)>=0?Be.firstTabbableNode:Be.firstDomTabbableNode}else Uu(xe)||(We=Mt.nextTabbableNode(j))}}else We=m("fallbackFocus");return We},F=function(X){var j=Cd(X);if(!(f(j,X)>=0)){if(Ru(s.clickOutsideDeactivates,X)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Ru(s.allowOutsideClick,X)||X.preventDefault()}},L=function(X){var j=Cd(X),xe=f(j,X)>=0;if(xe||j instanceof Document)xe&&(o.mostRecentlyFocusedNode=j);else{X.stopImmediatePropagation();var ze,ve=!0;if(o.mostRecentlyFocusedNode)if(nl(o.mostRecentlyFocusedNode)>0){var We=f(o.mostRecentlyFocusedNode),pt=o.containerGroups[We].tabbableNodes;if(pt.length>0){var Mt=pt.findIndex(function(St){return St===o.mostRecentlyFocusedNode});Mt>=0&&(s.isKeyForward(o.recentNavEvent)?Mt+1<pt.length&&(ze=pt[Mt+1],ve=!1):Mt-1>=0&&(ze=pt[Mt-1],ve=!1))}}else o.containerGroups.some(function(St){return St.tabbableNodes.some(function(Dt){return nl(Dt)>0})})||(ve=!1);else ve=!1;ve&&(ze=D({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),M(ze||o.mostRecentlyFocusedNode||g())}o.recentNavEvent=void 0},U=function(X){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=X;var xe=D({event:X,isBackward:j});xe&&(Uu(X)&&X.preventDefault(),M(xe))},ne=function(X){if(u4(X)&&Ru(s.escapeDeactivates,X)!==!1){X.preventDefault(),a.deactivate();return}(s.isKeyForward(X)||s.isKeyBackward(X))&&U(X,s.isKeyBackward(X))},se=function(X){var j=Cd(X);f(j,X)>=0||Ru(s.clickOutsideDeactivates,X)||Ru(s.allowOutsideClick,X)||(X.preventDefault(),X.stopImmediatePropagation())},ee=function(){if(o.active)return Wg.activateTrap(r,a),o.delayInitialFocusTimer=s.delayInitialFocus?Kg(function(){M(g())}):M(g()),t.addEventListener("focusin",L,!0),t.addEventListener("mousedown",F,{capture:!0,passive:!1}),t.addEventListener("touchstart",F,{capture:!0,passive:!1}),t.addEventListener("click",se,{capture:!0,passive:!1}),t.addEventListener("keydown",ne,{capture:!0,passive:!1}),a},fe=function(){if(o.active)return t.removeEventListener("focusin",L,!0),t.removeEventListener("mousedown",F,!0),t.removeEventListener("touchstart",F,!0),t.removeEventListener("click",se,!0),t.removeEventListener("keydown",ne,!0),a},_e=function(X){var j=X.some(function(xe){var ze=Array.from(xe.removedNodes);return ze.some(function(ve){return ve===o.mostRecentlyFocusedNode})});j&&M(g())},re=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(_e):void 0,de=function(){re&&(re.disconnect(),o.active&&!o.paused&&o.containers.map(function(X){re.observe(X,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function(X){if(o.active)return this;var j=l(X,"onActivate"),xe=l(X,"onPostActivate"),ze=l(X,"checkCanFocusTrap");ze||w(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=t.activeElement,j==null||j();var ve=function(){ze&&w(),ee(),de(),xe==null||xe()};return ze?(ze(o.containers.concat()).then(ve,ve),this):(ve(),this)},deactivate:function(X){if(!o.active)return this;var j=Zg({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},X);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,fe(),o.active=!1,o.paused=!1,de(),Wg.deactivateTrap(r,a);var xe=l(j,"onDeactivate"),ze=l(j,"onPostDeactivate"),ve=l(j,"checkCanReturnFocus"),We=l(j,"returnFocus","returnFocusOnDeactivate");xe==null||xe();var pt=function(){Kg(function(){We&&M($(o.nodeFocusedBeforeActivation)),ze==null||ze()})};return We&&ve?(ve($(o.nodeFocusedBeforeActivation)).then(pt,pt),this):(pt(),this)},pause:function(X){if(o.paused||!o.active)return this;var j=l(X,"onPause"),xe=l(X,"onPostPause");return o.paused=!0,j==null||j(),fe(),de(),xe==null||xe(),this},unpause:function(X){if(!o.paused||!o.active)return this;var j=l(X,"onUnpause"),xe=l(X,"onPostUnpause");return o.paused=!1,j==null||j(),w(),ee(),de(),xe==null||xe(),this},updateContainerElements:function(X){var j=[].concat(X).filter(Boolean);return o.containers=j.map(function(xe){return typeof xe=="string"?t.querySelector(xe):xe}),o.active&&w(),de(),this}},a.updateContainerElements(e),a};function f2(i={}){let e;const{immediate:n,...t}=i,r=wn(!1),s=wn(!1),o=g=>e==null?void 0:e.activate(g),a=g=>{e==null||e.deactivate(g)},l=()=>{e&&(e.pause(),s.set(!0))},f=()=>{e&&(e.unpause(),s.set(!1))};return{useFocusTrap:g=>(e=m4(g,{...t,onActivate(){var w;r.set(!0),(w=i.onActivate)==null||w.call(i)},onDeactivate(){var w;r.set(!1),(w=i.onDeactivate)==null||w.call(i)}}),n&&o(),{destroy(){a(),e=void 0}}),hasFocus:Wm(r),isPaused:Wm(s),activate:o,deactivate:a,pause:l,unpause:f}}const Td=[],d2=(i,e)=>{let n=Ti;function t(){const s=Td.indexOf(i);s>=0&&Td.splice(s,1)}function r(s){n();const{open:o,onClose:a,shouldCloseOnInteractOutside:l,closeOnInteractOutside:f}=s;_o(100).then(()=>{o?Td.push(i):t()});function m(){return Ad(Td)===i}function g(){m()&&a&&(a(),t())}function w(M){const $=M.target;ml($)&&$&&m()&&(M.preventDefault(),M.stopPropagation(),M.stopImmediatePropagation())}function S(M){l!=null&&l(M)&&m()&&(M.preventDefault(),M.stopPropagation(),M.stopImmediatePropagation(),g())}n=_4(i,{onInteractOutsideStart:w,onInteractOutside:f?S:void 0,enabled:o}).destroy}return r(e),{update:r,destroy(){t(),n()}}},p4={floating:{},focusTrap:{},modal:{},escapeKeydown:{},portal:"body"},Xu=(i,e)=>{i.dataset.escapee="";const{anchorElement:n,open:t,options:r}=e;if(!n||!t||!r)return{destroy:Ti};const s={...p4,...r},o=[];if(s.portal!==null&&o.push(sh(i,s.portal).destroy),o.push(VS(n,i,s.floating).destroy),s.focusTrap!==null){const{useFocusTrap:l}=f2({immediate:!0,escapeDeactivates:!1,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:i,...s.focusTrap});o.push(l(i).destroy)}s.modal!==null&&o.push(d2(i,{onClose:()=>{pn(n)&&(t.set(!1),n.focus())},shouldCloseOnInteractOutside:l=>!(l.defaultPrevented||pn(n)&&n.contains(l.target)),...s.modal}).destroy),s.escapeKeydown!==null&&o.push(xc(i,{enabled:t,handler:()=>{t.set(!1)},...s.escapeKeydown}).destroy);const a=ji(...o);return{destroy(){a()}}},sh=(i,e="body")=>{let n;if(!pn(e)&&typeof e!="string")return{destroy:Ti};async function t(s){if(e=s,typeof e=="string"){if(n=document.querySelector(e),n===null&&(await Gi(),n=document.querySelector(e)),n===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)n=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);i.dataset.portal="",n.appendChild(i),i.hidden=!1}function r(){i.remove()}return t(e),{update:t,destroy:r}},_4=(i,e)=>{let n=Ti,t=Ti,r=!1,s=!1,o=!1;function a(m){n(),t();const{onInteractOutside:g,onInteractOutsideStart:w,enabled:S}=m;if(!S)return;function M(F){g&&Jg(F,i)&&(w==null||w(F));const L=F.target;ml(L)&&h2(i,L)&&(s=!0),r=!0}function $(F){g==null||g(F)}const D=g4(i);if(typeof PointerEvent<"u"){const F=L=>{t();const U=ne=>{l(ne)&&$(ne),f()};if(L.pointerType==="touch"){t=vs(D,"click",U,{capture:!0,once:!0});return}U(L)};n=ji(vs(D,"pointerdown",M,!0),vs(D,"pointerup",F,!0))}else{const F=U=>{o?o=!1:l(U)&&$(U),f()},L=U=>{o=!0,l(U)&&$(U),f()};n=ji(vs(D,"mousedown",M,!0),vs(D,"mouseup",F,!0),vs(D,"touchstart",M,!0),vs(D,"touchend",L,!0))}}function l(m){return!!(r&&!s&&Jg(m,i))}function f(){r=!1,s=!1}return a(e),{update:a,destroy(){n(),t()}}};function Jg(i,e){if("button"in i&&i.button>0)return!1;const n=i.target;if(!ml(n))return!1;const t=n.ownerDocument;return!t||!t.documentElement.contains(n)?!1:e&&!h2(e,n)}function h2(i,e){return i===e||i.contains(e)}function g4(i){return(i==null?void 0:i.ownerDocument)??document}function m2(){return{elements:{root:ii("label",{action:e=>({destroy:zn(e,"mousedown",t=>{!t.defaultPrevented&&t.detail>1&&t.preventDefault()})})})}}}const v4=[gn.ARROW_LEFT,gn.ESCAPE,gn.ARROW_RIGHT,gn.SHIFT,gn.CAPS_LOCK,gn.CONTROL,gn.ALT,gn.META,gn.ENTER,gn.F1,gn.F2,gn.F3,gn.F4,gn.F5,gn.F6,gn.F7,gn.F8,gn.F9,gn.F10,gn.F11,gn.F12],b4={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,closeOnEscape:!0,forceVisible:!1,portal:void 0,builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0},y4=["trigger","menu","label"];function w4(i){const e={...b4,...i},n=Ri(wn(null)),t=Ri(wn(null)),r=e.selected??wn(e.defaultSelected),s=Us(r,e==null?void 0:e.onSelectedChange),o=Bn(t,Ue=>Ue?xe(Ue):void 0),a=e.open??wn(e.defaultOpen),l=Us(a,e==null?void 0:e.onOpenChange),f=Yr({...Ho(e,"open","defaultOpen","builder","ids"),multiple:e.multiple??!1}),{scrollAlignment:m,loop:g,closeOnOutsideClick:w,closeOnEscape:S,preventScroll:M,portal:$,forceVisible:D,positioning:F,multiple:L,arrowSize:U,disabled:ne,required:se,typeahead:ee,name:fe,highlightOnHover:_e,onOutsideClick:re}=f,{name:de,selector:he}=Tc(e.builder),X=Yr({...al(y4),...e.ids}),{handleTypeaheadSearch:j}=Wy({onMatch:Ue=>{t.set(Ue),Ue.scrollIntoView({block:m.get()})},getCurrentItem(){return t.get()}});function xe(Ue){const kt=Ue.getAttribute("data-value"),Ge=Ue.getAttribute("data-label"),Xt=Ue.hasAttribute("data-disabled");return{value:kt&&JSON.parse(kt),label:Ge??Ue.textContent??void 0,disabled:!!Xt}}const ze=Ue=>{s.update(kt=>{if(L.get()){const Xt=Array.isArray(kt)?[...kt]:[];return OT(Ue,Xt,(En,Oe)=>bc(En.value,Oe.value))}return Ue})};function ve(Ue){const kt=xe(Ue);ze(kt)}async function We(){l.set(!0);const Ue=document.getElementById(X.trigger.get());if(!Ue)return;Ue!==n.get()&&n.set(Ue),await Gi();const kt=document.getElementById(X.menu.get());if(!pn(kt))return;const Ge=kt.querySelector("[aria-selected=true]");pn(Ge)&&t.set(Ge)}function pt(){l.set(!1),t.set(null)}const Mt=Zu({open:l,forceVisible:D,activeTrigger:n}),St=Bn([s],([Ue])=>kt=>Array.isArray(Ue)?Ue.some(Ge=>bc(Ge.value,kt)):xC(kt)?bc(Ue==null?void 0:Ue.value,kC(kt,void 0)):bc(Ue==null?void 0:Ue.value,kt)),Dt=Bn([o],([Ue])=>kt=>bc(Ue==null?void 0:Ue.value,kt)),zt=ii(de("trigger"),{stores:[l,t,ne,X.menu,X.trigger,X.label],returned:([Ue,kt,Ge,Xt,En,Oe])=>({"aria-activedescendant":kt==null?void 0:kt.id,"aria-autocomplete":"list","aria-controls":Xt,"aria-expanded":Ue,"aria-labelledby":Oe,id:En,role:"combobox",disabled:Qs(Ge),type:e.builder==="select"?"button":void 0}),action:Ue=>{const kt=TC(Ue),Ge=ji(zn(Ue,"click",()=>{Ue.focus(),l.get()?pt():We()}),zn(Ue,"keydown",Oe=>{if(!l.get()){if(v4.includes(Oe.key)||Oe.key===gn.TAB||Oe.key===gn.BACKSPACE&&kt&&Ue.value===""||Oe.key===gn.SPACE&&zg(Ue))return;We(),Gi().then(()=>{if(s.get())return;const _n=document.getElementById(X.menu.get());if(!pn(_n))return;const mt=Array.from(_n.querySelectorAll(`${he("item")}:not([data-disabled]):not([data-hidden])`)).filter(Zt=>pn(Zt));mt.length&&(Oe.key===gn.ARROW_DOWN?(t.set(mt[0]),mt[0].scrollIntoView({block:m.get()})):Oe.key===gn.ARROW_UP&&(t.set(Ad(mt)),Ad(mt).scrollIntoView({block:m.get()})))})}if(Oe.key===gn.TAB){pt();return}if(Oe.key===gn.ENTER&&!Oe.isComposing||Oe.key===gn.SPACE&&zg(Ue)){Oe.preventDefault();const qn=t.get();qn&&ve(qn),L.get()||pt()}if(Oe.key===gn.ARROW_UP&&Oe.altKey&&pt(),Zm.includes(Oe.key)){Oe.preventDefault();const qn=document.getElementById(X.menu.get());if(!pn(qn))return;const _n=Pm(qn);if(!_n.length)return;const mt=_n.filter(yi=>!Ys(yi)&&yi.dataset.hidden===void 0),Zt=t.get(),Kt=Zt?mt.indexOf(Zt):-1,en=g.get(),Pn=m.get();let Vn;switch(Oe.key){case gn.ARROW_DOWN:Vn=AT(mt,Kt,en);break;case gn.ARROW_UP:Vn=MT(mt,Kt,en);break;case gn.PAGE_DOWN:Vn=$T(mt,Kt,10,en);break;case gn.PAGE_UP:Vn=PT(mt,Kt,10,en);break;case gn.HOME:Vn=mt[0];break;case gn.END:Vn=Ad(mt);break;default:return}t.set(Vn),Vn==null||Vn.scrollIntoView({block:Pn})}else if(ee.get()){const qn=document.getElementById(X.menu.get());if(!pn(qn))return;j(Oe.key,Pm(qn))}}));let Xt=Ti;const En=xc(Ue,{handler:pt,enabled:Bn([l,S],([Oe,un])=>Oe&&un)});return En&&En.destroy&&(Xt=En.destroy),{destroy(){Ge(),Xt()}}}}),_t=ii(de("menu"),{stores:[Mt,X.menu],returned:([Ue,kt])=>({hidden:Ue?void 0:!0,id:kt,role:"listbox",style:Nr({display:Ue?void 0:"none"})}),action:Ue=>{let kt=Ti;const Ge=ji($i([Mt,$,w,F,n],([Xt,En,Oe,un,qn])=>{kt(),!(!Xt||!qn)&&Gi().then(()=>{kt();const _n=XT(X.trigger.get());kt=Xu(Ue,{anchorElement:qn,open:l,options:{floating:un,focusTrap:null,modal:{closeOnInteractOutside:Oe,onClose:pt,open:Xt,shouldCloseOnInteractOutside:mt=>{var Kt;if((Kt=re.get())==null||Kt(mt),mt.defaultPrevented)return!1;const Zt=mt.target;return!(!ml(Zt)||Zt===qn||qn.contains(Zt)||_n(mt))}},escapeKeydown:null,portal:ll(Ue,En)}}).destroy})}));return{destroy:()=>{Ge(),kt()}}}}),{elements:{root:ft}}=m2(),{action:Be}=wr(ft),Ut=ii(de("label"),{stores:[X.label,X.trigger],returned:([Ue,kt])=>({id:Ue,for:kt}),action:Be}),Rt=ii(de("option"),{stores:[St],returned:([Ue])=>kt=>{const Ge=Ue(kt.value);return{"data-value":JSON.stringify(kt.value),"data-label":kt.label,"data-disabled":Qs(kt.disabled),"aria-disabled":kt.disabled?!0:void 0,"aria-selected":Ge,"data-selected":Ge?"":void 0,id:Vd(),role:"option"}},action:Ue=>({destroy:ji(zn(Ue,"click",Ge=>{if(Ys(Ue)){Ge.preventDefault();return}ve(Ue),L.get()||pt()}),$i(_e,Ge=>Ge?ji(zn(Ue,"mouseover",()=>{t.set(Ue)}),zn(Ue,"mouseleave",()=>{t.set(null)})):void 0))})}),qt=ii(de("group"),{returned:()=>Ue=>({role:"group","aria-labelledby":Ue})}),et=ii(de("group-label"),{returned:()=>Ue=>({id:Ue})}),dt=CC({value:Bn([s],([Ue])=>{const kt=Array.isArray(Ue)?Ue.map(Ge=>Ge.value):Ue==null?void 0:Ue.value;return typeof kt=="string"?kt:JSON.stringify(kt)}),name:Wm(fe),required:se,prefix:e.builder}),yt=ii(de("arrow"),{stores:U,returned:Ue=>({"data-arrow":!0,style:Nr({position:"absolute",width:`var(--arrow-size, ${Ue}px)`,height:`var(--arrow-size, ${Ue}px)`})})});return Gu(()=>{if(!Jr)return;const Ue=document.getElementById(X.menu.get()),kt=document.getElementById(X.trigger.get());if(kt&&n.set(kt),!Ue)return;const Ge=Ue.querySelector("[data-selected]");pn(Ge)}),$i([t],([Ue])=>{if(!Jr)return;const kt=document.getElementById(X.menu.get());pn(kt)&&Pm(kt).forEach(Ge=>{Ge===Ue?qy(Ge):el(Ge)})}),$i([l],([Ue])=>{if(!Jr)return;let kt=Ti;return M.get()&&Ue&&(kt=nh()),()=>{kt()}}),{ids:X,elements:{trigger:zt,group:qt,option:Rt,menu:_t,groupLabel:et,label:Ut,hiddenInput:dt,arrow:yt},states:{open:l,selected:s,highlighted:o,highlightedItem:t},helpers:{isSelected:St,isHighlighted:Dt,closeMenu:pt},options:f}}const x4={ltr:[...Nd,gn.ARROW_RIGHT],rtl:[...Nd,gn.ARROW_LEFT]},k4={ltr:[gn.ARROW_LEFT],rtl:[gn.ARROW_RIGHT]},Yg=["menu","trigger"],C4={arrowSize:8,positioning:{placement:"bottom"},preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,portal:void 0,loop:!1,dir:"ltr",defaultOpen:!1,typeahead:!0,closeOnItemClick:!0,onOutsideClick:void 0};function T4(i){const{name:e,selector:n}=Tc(i.selector),{preventScroll:t,arrowSize:r,positioning:s,closeOnEscape:o,closeOnOutsideClick:a,portal:l,forceVisible:f,typeahead:m,loop:g,closeFocus:w,disableFocusFirstItem:S,closeOnItemClick:M,onOutsideClick:$}=i.rootOptions,D=i.rootOpen,F=i.rootActiveTrigger,L=i.nextFocusable,U=i.prevFocusable,ne=Ri.writable(!1),se=Ri(wn(0)),ee=Ri(wn(null)),fe=Ri(wn("right")),_e=Ri(wn(null)),re=Ri(Bn([fe,ee],([mt,Zt])=>Kt=>mt===(Zt==null?void 0:Zt.side)&&S4(Kt,Zt==null?void 0:Zt.area))),{typed:de,handleTypeaheadSearch:he}=Wy(),X=Yr({...al(Yg),...i.ids}),j=Zu({open:D,forceVisible:f,activeTrigger:F}),xe=ii(e(),{stores:[j,l,X.menu,X.trigger],returned:([mt,Zt,Kt,en])=>({role:"menu",hidden:mt?void 0:!0,style:Nr({display:mt?void 0:"none"}),id:Kt,"aria-labelledby":en,"data-state":mt?"open":"closed","data-portal":eh(Zt),tabindex:-1}),action:mt=>{let Zt=Ti;const Kt=$i([j,F,s,a,l,o],([Pn,Vn,yi,wt,$t,Hn])=>{Zt(),!(!Pn||!Vn)&&Gi().then(()=>{Zt(),Fu(mt,n),Zt=Xu(mt,{anchorElement:Vn,open:D,options:{floating:yi,modal:{closeOnInteractOutside:wt,shouldCloseOnInteractOutside:Mn=>{var ei;return(ei=$.get())==null||ei(Mn),!(Mn.defaultPrevented||pn(Vn)&&Vn.contains(Mn.target))},onClose:()=>{D.set(!1),Vn.focus()},open:Pn},portal:ll(mt,$t),escapeKeydown:Hn?void 0:null}}).destroy})}),en=ji(zn(mt,"keydown",Pn=>{const Vn=Pn.target,yi=Pn.currentTarget;if(!pn(Vn)||!pn(yi)||!(Vn.closest('[role="menu"]')===yi))return;if(Zm.includes(Pn.key)&&e1(Pn,g.get()??!1),Pn.key===gn.TAB){Pn.preventDefault(),D.set(!1),Qg(Pn,L,U);return}const $t=Pn.key.length===1;!(Pn.ctrlKey||Pn.altKey||Pn.metaKey)&&$t&&m.get()===!0&&he(Pn.key,tl(yi))}));return{destroy(){Kt(),en(),Zt()}}}}),ze=ii(e("trigger"),{stores:[D,X.menu,X.trigger],returned:([mt,Zt,Kt])=>({"aria-controls":Zt,"aria-expanded":mt,"data-state":mt?"open":"closed",id:Kt,tabindex:0}),action:mt=>(Sd(mt),F.update(Kt=>Kt||mt),{destroy:ji(zn(mt,"click",Kt=>{const en=D.get(),Pn=Kt.currentTarget;pn(Pn)&&(Rt(Pn),en||Kt.preventDefault())}),zn(mt,"keydown",Kt=>{const en=Kt.currentTarget;if(!pn(en)||!(Nd.includes(Kt.key)||Kt.key===gn.ARROW_DOWN))return;Kt.preventDefault(),Rt(en);const Pn=en.getAttribute("aria-controls");if(!Pn)return;const Vn=document.getElementById(Pn);if(!Vn)return;const yi=tl(Vn);yi.length&&Xr(yi[0])}))})}),ve=ii(e("arrow"),{stores:r,returned:mt=>({"data-arrow":!0,style:Nr({position:"absolute",width:`var(--arrow-size, ${mt}px)`,height:`var(--arrow-size, ${mt}px)`})})}),We=ii(e("overlay"),{stores:[j],returned:([mt])=>({hidden:mt?void 0:!0,tabindex:-1,style:Nr({display:mt?void 0:"none"}),"aria-hidden":"true","data-state":P4(mt)}),action:mt=>{let Zt=Ti;if(o.get()){const en=xc(mt,{handler:()=>{D.set(!1);const Pn=F.get();Pn&&Pn.focus()}});en&&en.destroy&&(Zt=en.destroy)}const Kt=$i([l],([en])=>{if(en===null)return Ti;const Pn=ll(mt,en);return Pn===null?Ti:sh(mt,Pn).destroy});return{destroy(){Zt(),Kt()}}}}),pt=ii(e("item"),{returned:()=>({role:"menuitem",tabindex:-1,"data-orientation":"vertical"}),action:mt=>(Fu(mt,n),Sd(mt),{destroy:ji(zn(mt,"pointerdown",Kt=>{const en=Kt.currentTarget;if(pn(en)&&Ys(en)){Kt.preventDefault();return}}),zn(mt,"click",Kt=>{const en=Kt.currentTarget;if(pn(en)){if(Ys(en)){Kt.preventDefault();return}if(Kt.defaultPrevented){Xr(en);return}M.get()&&_o(1).then(()=>{D.set(!1)})}}),zn(mt,"keydown",Kt=>{En(Kt)}),zn(mt,"pointermove",Kt=>{Ge(Kt)}),zn(mt,"pointerleave",Kt=>{Xt(Kt)}),zn(mt,"focusin",Kt=>{qt(Kt)}),zn(mt,"focusout",Kt=>{et(Kt)}))})}),Mt=ii(e("group"),{returned:()=>mt=>({role:"group","aria-labelledby":mt})}),St=ii(e("group-label"),{returned:()=>mt=>({id:mt})}),Dt={defaultChecked:!1,disabled:!1},zt=mt=>{const Zt={...Dt,...mt},Kt=Zt.checked??wn(Zt.defaultChecked??null),en=Us(Kt,Zt.onCheckedChange),Pn=wn(Zt.disabled),Vn=ii(e("checkbox-item"),{stores:[en,Pn],returned:([$t,Hn])=>({role:"menuitemcheckbox",tabindex:-1,"data-orientation":"vertical","aria-checked":Oe($t)?"mixed":$t?"true":"false","data-disabled":Qs(Hn),"data-state":un($t)}),action:$t=>(Fu($t,n),Sd($t),{destroy:ji(zn($t,"pointerdown",Mn=>{const ei=Mn.currentTarget;if(pn(ei)&&Ys(ei)){Mn.preventDefault();return}}),zn($t,"click",Mn=>{const ei=Mn.currentTarget;if(pn(ei)){if(Ys(ei)){Mn.preventDefault();return}if(Mn.defaultPrevented){Xr(ei);return}en.update(xi=>Oe(xi)?!0:!xi),M.get()&&Gi().then(()=>{D.set(!1)})}}),zn($t,"keydown",Mn=>{En(Mn)}),zn($t,"pointermove",Mn=>{const ei=Mn.currentTarget;if(pn(ei)){if(Ys(ei)){yt(Mn);return}Ge(Mn,ei)}}),zn($t,"pointerleave",Mn=>{Xt(Mn)}),zn($t,"focusin",Mn=>{qt(Mn)}),zn($t,"focusout",Mn=>{et(Mn)}))})}),yi=Bn(en,$t=>$t===!0),wt=Bn(en,$t=>$t==="indeterminate");return{elements:{checkboxItem:Vn},states:{checked:en},helpers:{isChecked:yi,isIndeterminate:wt},options:{disabled:Pn}}},_t=(mt={})=>{const Zt=mt.value??wn(mt.defaultValue??null),Kt=Us(Zt,mt.onValueChange),en=ii(e("radio-group"),{returned:()=>({role:"group"})}),Pn={disabled:!1},Vn=ii(e("radio-item"),{stores:[Kt],returned:([wt])=>$t=>{const{value:Hn,disabled:Mn}={...Pn,...$t},ei=wt===Hn;return{disabled:Mn,role:"menuitemradio","data-state":ei?"checked":"unchecked","aria-checked":ei,"data-disabled":Qs(Mn),"data-value":Hn,"data-orientation":"vertical",tabindex:-1}},action:wt=>(Fu(wt,n),{destroy:ji(zn(wt,"pointerdown",Hn=>{const Mn=Hn.currentTarget;if(!pn(Mn))return;const ei=wt.dataset.value;if(wt.dataset.disabled||ei===void 0){Hn.preventDefault();return}}),zn(wt,"click",Hn=>{const Mn=Hn.currentTarget;if(!pn(Mn))return;const ei=wt.dataset.value;if(wt.dataset.disabled||ei===void 0){Hn.preventDefault();return}if(Hn.defaultPrevented){if(!pn(Mn))return;Xr(Mn);return}Kt.set(ei),M.get()&&Gi().then(()=>{D.set(!1)})}),zn(wt,"keydown",Hn=>{En(Hn)}),zn(wt,"pointermove",Hn=>{const Mn=Hn.currentTarget;if(!pn(Mn))return;const ei=wt.dataset.value;if(wt.dataset.disabled||ei===void 0){yt(Hn);return}Ge(Hn,Mn)}),zn(wt,"pointerleave",Hn=>{Xt(Hn)}),zn(wt,"focusin",Hn=>{qt(Hn)}),zn(wt,"focusout",Hn=>{et(Hn)}))})}),yi=Bn(Kt,wt=>$t=>wt===$t);return{elements:{radioGroup:en,radioItem:Vn},states:{value:Kt},helpers:{isChecked:yi}}},{elements:{root:ft}}=p2({orientation:"horizontal"}),Be={...C4,disabled:!1,positioning:{placement:"right-start",gutter:8}},Ut=mt=>{const Zt={...Be,...mt},Kt=Zt.open??wn(!1),en=Us(Kt,Zt==null?void 0:Zt.onOpenChange),Pn=Yr(Ho(Zt,"ids")),{positioning:Vn,arrowSize:yi,disabled:wt}=Pn,$t=Ri(wn(null)),Hn=Ri(wn(null)),Mn=Ri(wn(0)),ei=Yr({...al(Yg),...Zt.ids});Gu(()=>{const On=document.getElementById(ei.trigger.get());On&&$t.set(On)});const xi=Zu({open:en,forceVisible:f,activeTrigger:$t}),tn=ii(e("submenu"),{stores:[xi,ei.menu,ei.trigger],returned:([On,hi,Tn])=>({role:"menu",hidden:On?void 0:!0,style:Nr({display:On?void 0:"none"}),id:hi,"aria-labelledby":Tn,"data-state":On?"open":"closed","data-id":hi,tabindex:-1}),action:On=>{let hi=Ti;const Tn=$i([xi,Vn],([bn,Ee])=>{if(hi(),!bn)return;const ie=$t.get();ie&&Gi().then(()=>{hi();const le=_n(ie);hi=Xu(On,{anchorElement:ie,open:en,options:{floating:Ee,portal:pn(le)?le:void 0,modal:null,focusTrap:null,escapeKeydown:null}}).destroy})}),ti=ji(zn(On,"keydown",bn=>{if(bn.key===gn.ESCAPE)return;const Ee=bn.target,ie=bn.currentTarget;if(!pn(Ee)||!pn(ie)||!(Ee.closest('[role="menu"]')===ie))return;if(Zm.includes(bn.key)){bn.stopImmediatePropagation(),e1(bn,g.get()??!1);return}const ye=k4.ltr.includes(bn.key),Ie=bn.ctrlKey||bn.altKey||bn.metaKey,qe=bn.key.length===1;if(ye){const He=$t.get();bn.preventDefault(),en.update(()=>(He&&Xr(He),!1));return}if(bn.key===gn.TAB){bn.preventDefault(),D.set(!1),Qg(bn,L,U);return}!Ie&&qe&&m.get()===!0&&he(bn.key,tl(ie))}),zn(On,"pointermove",bn=>{kt(bn)}),zn(On,"focusout",bn=>{const Ee=$t.get();if(ne.get()){const ie=bn.target,le=document.getElementById(ei.menu.get());if(!pn(le)||!pn(ie))return;!le.contains(ie)&&ie!==Ee&&en.set(!1)}else{const ie=bn.currentTarget,le=bn.relatedTarget;if(!pn(le)||!pn(ie))return;!ie.contains(le)&&le!==Ee&&en.set(!1)}}));return{destroy(){Tn(),hi(),ti()}}}}),Un=ii(e("subtrigger"),{stores:[en,wt,ei.menu,ei.trigger],returned:([On,hi,Tn,ti])=>({role:"menuitem",id:ti,tabindex:-1,"aria-controls":Tn,"aria-expanded":On,"data-state":On?"open":"closed","data-disabled":Qs(hi),"aria-haspopop":"menu"}),action:On=>{Fu(On,n),Sd(On),$t.update(ti=>ti||On);const hi=()=>{Mm(Hn),window.clearTimeout(Mn.get()),ee.set(null)},Tn=ji(zn(On,"click",ti=>{if(ti.defaultPrevented)return;const bn=ti.currentTarget;!pn(bn)||Ys(bn)||(Xr(bn),en.get()||en.update(Ee=>Ee||($t.set(bn),!Ee)))}),zn(On,"keydown",ti=>{const bn=de.get(),Ee=ti.currentTarget;if(!(!pn(Ee)||Ys(Ee)||bn.length>0&&ti.key===gn.SPACE)&&x4.ltr.includes(ti.key)){if(!en.get()){Ee.click(),ti.preventDefault();return}const le=Ee.getAttribute("aria-controls");if(!le)return;const ye=document.getElementById(le);if(!pn(ye))return;const Ie=tl(ye)[0];Xr(Ie)}}),zn(On,"pointermove",ti=>{if(!Lu(ti)||(dt(ti),ti.defaultPrevented))return;const bn=ti.currentTarget;if(!pn(bn))return;I4(ei.menu.get())||Xr(bn);const Ee=Hn.get();!en.get()&&!Ee&&!Ys(bn)&&Hn.set(window.setTimeout(()=>{en.update(()=>($t.set(bn),!0)),Mm(Hn)},100))}),zn(On,"pointerleave",ti=>{if(!Lu(ti))return;Mm(Hn);const bn=document.getElementById(ei.menu.get()),Ee=bn==null?void 0:bn.getBoundingClientRect();if(Ee){const ie=bn==null?void 0:bn.dataset.side,le=ie==="right",ye=le?-5:5,Ie=Ee[le?"left":"right"],qe=Ee[le?"right":"left"];ee.set({area:[{x:ti.clientX+ye,y:ti.clientY},{x:Ie,y:Ee.top},{x:qe,y:Ee.top},{x:qe,y:Ee.bottom},{x:Ie,y:Ee.bottom}],side:ie}),window.clearTimeout(Mn.get()),Mn.set(window.setTimeout(()=>{ee.set(null)},300))}else{if(Ue(ti),ti.defaultPrevented)return;ee.set(null)}}),zn(On,"focusout",ti=>{const bn=ti.currentTarget;if(!pn(bn))return;el(bn);const Ee=ti.relatedTarget;if(!pn(Ee))return;const ie=bn.getAttribute("aria-controls");if(!ie)return;const le=document.getElementById(ie);le&&!le.contains(Ee)&&en.set(!1)}),zn(On,"focusin",ti=>{qt(ti)}));return{destroy(){hi(),Tn()}}}}),Nn=ii(e("subarrow"),{stores:yi,returned:On=>({"data-arrow":!0,style:Nr({position:"absolute",width:`var(--arrow-size, ${On}px)`,height:`var(--arrow-size, ${On}px)`})})});return $i([D],([On])=>{On||($t.set(null),en.set(!1))}),$i([ee],([On])=>{!Jr||On||window.clearTimeout(Mn.get())}),$i([en],([On])=>{if(Jr&&(On&&ne.get()&&_o(1).then(()=>{const hi=document.getElementById(ei.menu.get());if(!hi)return;const Tn=tl(hi);Tn.length&&Xr(Tn[0])}),!On)){const hi=_e.get(),Tn=document.getElementById(ei.trigger.get());if(hi&&_o(1).then(()=>{const ti=document.getElementById(ei.menu.get());ti&&ti.contains(hi)&&el(hi)}),!Tn||document.activeElement===Tn)return;el(Tn)}}),{ids:ei,elements:{subTrigger:Un,subMenu:tn,subArrow:Nn},states:{subOpen:en},options:Pn}};Gu(()=>{const mt=document.getElementById(X.trigger.get());pn(mt)&&D.get()&&F.set(mt);const Zt=[],Kt=()=>ne.set(!1),en=()=>{ne.set(!0),Zt.push(ji(vs(document,"pointerdown",Kt,{capture:!0,once:!0}),vs(document,"pointermove",Kt,{capture:!0,once:!0})))},Pn=Vn=>{if(Vn.key===gn.ESCAPE&&o.get()){D.set(!1);return}};return Zt.push(vs(document,"keydown",en,{capture:!0})),Zt.push(vs(document,"keydown",Pn)),()=>{Zt.forEach(Vn=>Vn())}}),$i([D,_e],([mt,Zt])=>{!mt&&Zt&&el(Zt)}),$i([D],([mt])=>{if(Jr&&!mt){const Zt=F.get();if(!Zt)return;const Kt=w.get();!mt&&Zt&&Wu({prop:Kt,defaultEl:Zt})}}),$i([D,t],([mt,Zt])=>{if(!Jr)return;const Kt=[];return i.removeScroll&&mt&&Zt&&Kt.push(nh()),_o(1).then(()=>{const en=document.getElementById(X.menu.get());if(en&&mt&&ne.get()){if(S.get()){Xr(en);return}const Pn=tl(en);if(!Pn.length)return;Xr(Pn[0])}}),()=>{Kt.forEach(en=>en())}}),$i(D,mt=>{if(!Jr)return;const Zt=()=>ne.set(!1),Kt=en=>{if(ne.set(!0),en.key===gn.ESCAPE&&mt&&o.get()){D.set(!1);return}};return ji(vs(document,"pointerdown",Zt,{capture:!0,once:!0}),vs(document,"pointermove",Zt,{capture:!0,once:!0}),vs(document,"keydown",Kt,{capture:!0}))});function Rt(mt){D.update(Zt=>{const Kt=!Zt;return Kt&&(L.set(HT(mt)),U.set(GT(mt)),F.set(mt)),Kt})}function qt(mt){const Zt=mt.currentTarget;if(!pn(Zt))return;const Kt=_e.get();Kt&&el(Kt),qy(Zt),_e.set(Zt)}function et(mt){const Zt=mt.currentTarget;pn(Zt)&&el(Zt)}function dt(mt){qn(mt)&&mt.preventDefault()}function yt(mt){if(qn(mt))return;const Zt=mt.target;if(!pn(Zt))return;const Kt=_n(Zt);Kt&&Xr(Kt)}function Ue(mt){qn(mt)&&mt.preventDefault()}function kt(mt){if(!Lu(mt))return;const Zt=mt.target,Kt=mt.currentTarget;if(!pn(Kt)||!pn(Zt))return;const en=se.get(),Pn=en!==mt.clientX;if(Kt.contains(Zt)&&Pn){const Vn=mt.clientX>en?"right":"left";fe.set(Vn),se.set(mt.clientX)}}function Ge(mt,Zt=null){if(!Lu(mt)||(dt(mt),mt.defaultPrevented))return;if(Zt){Xr(Zt);return}const Kt=mt.currentTarget;pn(Kt)&&Xr(Kt)}function Xt(mt){Lu(mt)&&yt(mt)}function En(mt){if(de.get().length>0&&mt.key===gn.SPACE){mt.preventDefault();return}if(Nd.includes(mt.key)){mt.preventDefault();const en=mt.currentTarget;if(!pn(en))return;en.click()}}function Oe(mt){return mt==="indeterminate"}function un(mt){return Oe(mt)?"indeterminate":mt?"checked":"unchecked"}function qn(mt){return re.get()(mt)}function _n(mt){const Zt=mt.closest('[role="menu"]');return pn(Zt)?Zt:null}return{elements:{trigger:ze,menu:xe,overlay:We,item:pt,group:Mt,groupLabel:St,arrow:ve,separator:ft},builders:{createCheckboxItem:zt,createSubmenu:Ut,createMenuRadioGroup:_t},states:{open:D},helpers:{handleTypeaheadSearch:he},ids:X,options:i.rootOptions}}function Qg(i,e,n){if(i.shiftKey){const t=n.get();t&&(i.preventDefault(),_o(1).then(()=>t.focus()),n.set(null))}else{const t=e.get();t&&(i.preventDefault(),_o(1).then(()=>t.focus()),e.set(null))}}function tl(i){return Array.from(i.querySelectorAll(`[data-melt-menu-id="${i.id}"]`)).filter(e=>pn(e))}function Sd(i){!i||!Ys(i)||(i.setAttribute("data-disabled",""),i.setAttribute("aria-disabled","true"))}function Mm(i){if(!Jr)return;const e=i.get();e&&(window.clearTimeout(e),i.set(null))}function Lu(i){return i.pointerType==="mouse"}function Fu(i,e){if(!i)return;const n=i.closest(`${e()}, ${e("submenu")}`);pn(n)&&i.setAttribute("data-melt-menu-id",n.id)}function e1(i,e){i.preventDefault();const n=document.activeElement,t=i.currentTarget;if(!pn(n)||!pn(t))return;const r=tl(t);if(!r.length)return;const s=r.filter(l=>!(l.hasAttribute("data-disabled")||l.getAttribute("disabled")==="true")),o=s.indexOf(n);let a;switch(i.key){case gn.ARROW_DOWN:e?a=o<s.length-1?o+1:0:a=o<s.length-1?o+1:o;break;case gn.ARROW_UP:e?a=o>0?o-1:s.length-1:a=o<0?s.length-1:o>0?o-1:0;break;case gn.HOME:a=0;break;case gn.END:a=s.length-1;break;default:return}Xr(s[a])}function S4(i,e){if(!e)return!1;const n={x:i.clientX,y:i.clientY};return E4(n,e)}function E4(i,e){const{x:n,y:t}=i;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,f=e[o].x,m=e[o].y;l>t!=m>t&&n<(f-a)*(t-l)/(m-l)+a&&(r=!r)}return r}function I4(i){const e=document.activeElement;if(!pn(e))return!1;const n=e.closest(`[data-id="${i}"]`);return pn(n)}function P4(i){return i?"open":"closed"}const{name:Qa}=Tc("dialog"),$4={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},A4=["content","title","description"];function M4(i){const e={...$4,...i},n=Yr(Ho(e,"ids")),{preventScroll:t,closeOnEscape:r,closeOnOutsideClick:s,role:o,portal:a,forceVisible:l,openFocus:f,closeFocus:m,onOutsideClick:g}=n,w=Ri.writable(null),S=Yr({...al(A4),...e.ids}),M=e.open??wn(e.defaultOpen),$=Us(M,e==null?void 0:e.onOpenChange),D=Bn([$,l],([he,X])=>he||X);let F=Ti;function L(he){const X=he.currentTarget,j=he.currentTarget;!pn(X)||!pn(j)||($.set(!0),w.set(j))}function U(){$.set(!1),Wu({prop:m.get(),defaultEl:w.get()})}const ne=ii(Qa("trigger"),{stores:[$],returned:([he])=>({"aria-haspopup":"dialog","aria-expanded":he,type:"button"}),action:he=>({destroy:ji(zn(he,"click",j=>{L(j)}),zn(he,"keydown",j=>{j.key!==gn.ENTER&&j.key!==gn.SPACE||(j.preventDefault(),L(j))}))})}),se=ii(Qa("overlay"),{stores:[D,$],returned:([he,X])=>({hidden:he?void 0:!0,tabindex:-1,style:Nr({display:he?void 0:"none"}),"aria-hidden":!0,"data-state":X?"open":"closed"}),action:he=>{let X=Ti;if(r.get()){const j=xc(he,{handler:()=>{U()}});j&&j.destroy&&(X=j.destroy)}return{destroy(){X()}}}}),ee=ii(Qa("content"),{stores:[D,S.content,S.description,S.title,$],returned:([he,X,j,xe,ze])=>({id:X,role:o.get(),"aria-describedby":j,"aria-labelledby":xe,"aria-modal":he?"true":void 0,"data-state":ze?"open":"closed",tabindex:-1,hidden:he?void 0:!0,style:Nr({display:he?void 0:"none"})}),action:he=>{let X=Ti,j=Ti;const xe=ji($i([$,s,r],([ze,ve,We])=>{if(!ze)return;const pt=f2({immediate:!1,escapeDeactivates:We,clickOutsideDeactivates:ve,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:he});X=pt.activate,j=pt.deactivate;const Mt=pt.useFocusTrap(he);return Mt&&Mt.destroy?Mt.destroy:pt.deactivate}),$i([s,$],([ze,ve])=>d2(he,{open:ve,closeOnInteractOutside:ze,onClose(){U()},shouldCloseOnInteractOutside(We){var pt;return(pt=g.get())==null||pt(We),!We.defaultPrevented}}).destroy),$i([r],([ze])=>ze?xc(he,{handler:U}).destroy:Ti),$i([D],([ze])=>{Gi().then(()=>{ze?X():j()})}));return{destroy:()=>{F(),xe()}}}}),fe=ii(Qa("portalled"),{stores:a,returned:he=>({"data-portal":eh(he)}),action:he=>{const X=$i([a],([j])=>{if(j===null)return Ti;const xe=ll(he,j);return xe===null?Ti:sh(he,xe).destroy});return{destroy(){X()}}}}),_e=ii(Qa("title"),{stores:[S.title],returned:([he])=>({id:he})}),re=ii(Qa("description"),{stores:[S.description],returned:([he])=>({id:he})}),de=ii(Qa("close"),{returned:()=>({type:"button"}),action:he=>({destroy:ji(zn(he,"click",()=>{U()}),zn(he,"keydown",j=>{j.key!==gn.SPACE&&j.key!==gn.ENTER||(j.preventDefault(),U())}))})});return $i([$,t],([he,X])=>{if(Jr){if(X&&he&&(F=nh()),he){const j=document.getElementById(S.content.get());Wu({prop:f.get(),defaultEl:j})}return()=>{l.get()||F()}}}),{ids:S,elements:{content:ee,trigger:ne,title:_e,description:re,overlay:se,close:de,portalled:fe},states:{open:$},options:n}}const D4={arrowSize:8,positioning:{placement:"bottom"},preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,portal:void 0,loop:!1,dir:"ltr",defaultOpen:!1,forceVisible:!1,typeahead:!0,closeFocus:void 0,disableFocusFirstItem:!1,closeOnItemClick:!0,onOutsideClick:void 0};function O4(i){const e={...D4,...i},n=Yr(Ho(e,"ids")),t=e.open??wn(e.defaultOpen),r=Us(t,e==null?void 0:e.onOpenChange),s=Ri(wn(null)),o=Ri(wn(null)),a=Ri(wn(null)),{elements:l,builders:f,ids:m,states:g,options:w}=T4({rootOptions:n,rootOpen:r,rootActiveTrigger:Ri(s),nextFocusable:Ri(o),prevFocusable:Ri(a),selector:"dropdown-menu",removeScroll:!0,ids:e.ids});return{ids:m,elements:l,states:g,builders:f,options:w}}const{name:Dm}=Tc("hover-card"),z4={defaultOpen:!1,openDelay:1e3,closeDelay:100,positioning:{placement:"bottom"},arrowSize:8,closeOnOutsideClick:!0,forceVisible:!1,portal:void 0,closeOnEscape:!0,onOutsideClick:void 0},R4=["trigger","content"];function L4(i={}){const e={...z4,...i},n=e.open??wn(e.defaultOpen),t=Us(n,e==null?void 0:e.onOpenChange),r=Ri.writable(!1),s=Ri.writable(!1),o=wn(!1),a=wn(null),l=Yr(Ho(e,"ids")),{openDelay:f,closeDelay:m,positioning:g,arrowSize:w,closeOnOutsideClick:S,forceVisible:M,portal:$,closeOnEscape:D,onOutsideClick:F}=l,L=Yr({...al(R4),...e.ids});let U=null,ne;const se=Ri.derived(f,he=>()=>{U&&(window.clearTimeout(U),U=null),U=window.setTimeout(()=>{t.set(!0)},he)}),ee=Ri.derived([m,s,r],([he,X,j])=>()=>{U&&(window.clearTimeout(U),U=null),!X&&!j&&(U=window.setTimeout(()=>{t.set(!1)},he))}),fe=ii(Dm("trigger"),{stores:[t,L.trigger,L.content],returned:([he,X,j])=>({role:"button","aria-haspopup":"dialog","aria-expanded":he,"data-state":he?"open":"closed","aria-controls":j,id:X}),action:he=>({destroy:ji(zn(he,"pointerenter",j=>{xd(j)||se.get()()}),zn(he,"pointerleave",j=>{xd(j)||ee.get()()}),zn(he,"focus",j=>{!ml(j.currentTarget)||!SC(j.currentTarget)||se.get()()}),zn(he,"blur",()=>ee.get()()))})}),_e=Zu({open:t,forceVisible:M,activeTrigger:a}),re=ii(Dm("content"),{stores:[_e,$,L.content],returned:([he,X,j])=>({hidden:he?void 0:!0,tabindex:-1,style:Nr({"pointer-events":he?void 0:"none",opacity:he?1:0,userSelect:"text",WebkitUserSelect:"text"}),id:j,"data-state":he?"open":"closed","data-portal":eh(X)}),action:he=>{let X=Ti;const j=()=>{U&&window.clearTimeout(U)};let xe=Ti;const ze=$i([_e,a,g,S,$,D],([ve,We,pt,Mt,St,Dt])=>{xe(),!(!ve||!We)&&Gi().then(()=>{xe(),xe=Xu(he,{anchorElement:We,open:t,options:{floating:pt,modal:{closeOnInteractOutside:Mt,onClose:()=>{t.set(!1),We.focus()},shouldCloseOnInteractOutside:zt=>{var _t;return(_t=F.get())==null||_t(zt),!(zt.defaultPrevented||pn(We)&&We.contains(zt.target))},open:ve},portal:ll(he,St),focusTrap:null,escapeKeydown:Dt?void 0:null}}).destroy})});return X=ji(zn(he,"pointerdown",ve=>{const We=ve.currentTarget,pt=ve.target;!pn(We)||!pn(pt)||(We.contains(pt)&&o.set(!0),r.set(!1),s.set(!0))}),zn(he,"pointerenter",ve=>{xd(ve)||se.get()()}),zn(he,"pointerleave",ve=>{xd(ve)||ee.get()()}),zn(he,"focusout",ve=>{ve.preventDefault()})),{destroy(){X(),xe(),j(),ze()}}}}),de=ii(Dm("arrow"),{stores:w,returned:he=>({"data-arrow":!0,style:Nr({position:"absolute",width:`var(--arrow-size, ${he}px)`,height:`var(--arrow-size, ${he}px)`})})});return $i([o],([he])=>{if(!Jr||!he)return;const X=document.body,j=document.getElementById(L.content.get());if(!j)return;ne=X.style.userSelect||X.style.webkitUserSelect;const xe=j.style.userSelect||j.style.webkitUserSelect;return X.style.userSelect="none",X.style.webkitUserSelect="none",j.style.userSelect="text",j.style.webkitUserSelect="text",()=>{X.style.userSelect=ne,X.style.webkitUserSelect=ne,j.style.userSelect=xe,j.style.webkitUserSelect=xe}}),Gu(()=>{const he=document.getElementById(L.trigger.get());he&&a.set(he)}),$i([t],([he])=>{if(!Jr||!he){r.set(!1);return}const X=()=>{o.set(!1),s.set(!1),_o(1).then(()=>{var ve;((ve=document.getSelection())==null?void 0:ve.toString())!==""&&r.set(!0)})};document.addEventListener("pointerup",X);const j=document.getElementById(L.content.get());return j?(zT(j).forEach(ze=>ze.setAttribute("tabindex","-1")),()=>{document.removeEventListener("pointerup",X),r.set(!1),s.set(!1)}):void 0}),{ids:L,elements:{trigger:fe,content:re,arrow:de},states:{open:t},options:l}}const F4={positioning:{placement:"bottom"},arrowSize:8,defaultOpen:!1,disableFocusTrap:!1,closeOnEscape:!0,preventScroll:!1,onOpenChange:void 0,closeOnOutsideClick:!0,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},{name:Bu}=Tc("popover"),B4=["trigger","content"];function N4(i){const e={...F4,...i},n=Yr(Ho(e,"open","ids")),{positioning:t,arrowSize:r,disableFocusTrap:s,preventScroll:o,closeOnEscape:a,closeOnOutsideClick:l,portal:f,forceVisible:m,openFocus:g,closeFocus:w,onOutsideClick:S}=n,M=e.open??wn(e.defaultOpen),$=Us(M,e==null?void 0:e.onOpenChange),D=Ri.writable(null),F=Yr({...al(B4),...e.ids});Gu(()=>{D.set(document.getElementById(F.trigger.get()))});function L(){$.set(!1);const he=document.getElementById(F.trigger.get());Wu({prop:w.get(),defaultEl:he})}const U=Zu({open:$,activeTrigger:D,forceVisible:m}),ne=ii(Bu("content"),{stores:[U,f,F.content],returned:([he,X,j])=>({hidden:he&&Jr?void 0:!0,tabindex:-1,style:Nr({display:he?void 0:"none"}),id:j,"data-state":he?"open":"closed","data-portal":eh(X)}),action:he=>{let X=Ti;const j=$i([U,D,t,s,a,l,f],([xe,ze,ve,We,pt,Mt,St])=>{X(),!(!xe||!ze)&&Gi().then(()=>{X(),X=Xu(he,{anchorElement:ze,open:$,options:{floating:ve,focusTrap:We?null:{returnFocusOnDeactivate:!1,clickOutsideDeactivates:Mt,allowOutsideClick:!0,escapeDeactivates:pt},modal:{shouldCloseOnInteractOutside:ee,onClose:L,open:xe,closeOnInteractOutside:Mt},escapeKeydown:pt?{handler:()=>{L()}}:null,portal:ll(he,St)}}).destroy})});return{destroy(){j(),X()}}}});function se(he){$.update(X=>!X),he&&he!==D.get()&&D.set(he)}function ee(he){var xe;if((xe=S.get())==null||xe(he),he.defaultPrevented)return!1;const X=he.target,j=document.getElementById(F.trigger.get());return!(j&&ml(X)&&(X===j||j.contains(X)))}const fe=ii(Bu("trigger"),{stores:[U,F.content,F.trigger],returned:([he,X,j])=>({role:"button","aria-haspopup":"dialog","aria-expanded":he?"true":"false","data-state":t1(he),"aria-controls":X,id:j}),action:he=>({destroy:ji(zn(he,"click",()=>{se(he)}),zn(he,"keydown",j=>{j.key!==gn.ENTER&&j.key!==gn.SPACE||(j.preventDefault(),se(he))}))})}),_e=ii(Bu("overlay"),{stores:[U],returned:([he])=>({hidden:he?void 0:!0,tabindex:-1,style:Nr({display:he?void 0:"none"}),"aria-hidden":"true","data-state":t1(he)}),action:he=>{let X=Ti,j=Ti,xe=Ti;if(a.get()){const ze=xc(he,{handler:()=>{L()}});ze&&ze.destroy&&(X=ze.destroy)}return j=$i([f],([ze])=>{if(xe(),ze===null)return;const ve=ll(he,ze);ve!==null&&(xe=sh(he,ve).destroy)}),{destroy(){X(),j(),xe()}}}}),re=ii(Bu("arrow"),{stores:r,returned:he=>({"data-arrow":!0,style:Nr({position:"absolute",width:`var(--arrow-size, ${he}px)`,height:`var(--arrow-size, ${he}px)`})})}),de=ii(Bu("close"),{returned:()=>({type:"button"}),action:he=>({destroy:ji(zn(he,"click",j=>{j.defaultPrevented||L()}),zn(he,"keydown",j=>{j.defaultPrevented||j.key!==gn.ENTER&&j.key!==gn.SPACE||(j.preventDefault(),se())}))})});return $i([$,D,o],([he,X,j])=>{if(!Jr)return;const xe=[];if(he){X||Gi().then(()=>{const ve=document.getElementById(F.trigger.get());pn(ve)&&D.set(ve)}),j&&xe.push(nh());const ze=X??document.getElementById(F.trigger.get());Wu({prop:g.get(),defaultEl:ze})}return()=>{xe.forEach(ze=>ze())}}),{ids:F,elements:{trigger:fe,content:ne,arrow:re,close:de,overlay:_e},states:{open:$},options:n}}function t1(i){return i?"open":"closed"}function V4(i){const e=w4({...i,builder:"select"}),n=Bn(e.states.selected,t=>Array.isArray(t)?t.map(r=>r.label).join(", "):(t==null?void 0:t.label)??"");return{...e,elements:{...e.elements},states:{...e.states,selectedLabel:n}}}const j4={orientation:"horizontal",decorative:!1},p2=i=>{const e={...j4,...i},n=Yr(e),{orientation:t,decorative:r}=n;return{elements:{root:ii("separator",{stores:[t,r],returned:([o,a])=>({role:a?"none":"separator","aria-orientation":o==="vertical"?o:void 0,"aria-hidden":a,"data-orientation":o})})},options:n}},U4={defaultPressed:!1,disabled:!1};function q4(i){const e={...U4,...i},n=Yr(Ho(e,"pressed")),{disabled:t}=n,r=e.pressed??wn(e.defaultPressed),s=Us(r,e==null?void 0:e.onPressedChange);function o(){t.get()||s.update(f=>!f)}return{elements:{root:ii("toggle",{stores:[s,t],returned:([l,f])=>({"data-disabled":Qs(f),disabled:Qs(f),"data-state":l?"on":"off","aria-pressed":l,type:"button"}),action:l=>({destroy:ji(zn(l,"click",()=>{o()}),zn(l,"keydown",m=>{m.key!==gn.ENTER&&m.key!==gn.SPACE||(m.preventDefault(),o())}))})})},states:{pressed:s},options:n}}function wo(i,e){const n={};return e.forEach(t=>{n[t]={[`data-${i}-${t}`]:""}}),t=>n[t]}function H4(i){return i?{"aria-disabled":"true","data-disabled":""}:{"aria-disabled":void 0,"data-disabled":void 0}}function ds(){const i=dl();return e=>{const{originalEvent:n}=e.detail,{cancelable:t}=e,r=n.type;i(r,{originalEvent:n,currentTarget:n.currentTarget},{cancelable:t})||e.preventDefault()}}function _2(){return mp(10)}function xo(i){const e={};for(const n in i){const t=i[n];t!==void 0&&(e[n]=t)}return e}function ko(i){return function(e,n){if(n===void 0)return;const t=i[e];t&&t.set(n)}}function oh(){return{NAME:"accordion",ITEM_NAME:"accordion-item",PARTS:["root","content","header","item","trigger"]}}function G4(i){const e=YT(xo(i)),{NAME:n,PARTS:t}=oh(),r=wo(n,t),s={...e,getAttrs:r,updateOption:ko(e.options)};return Ar(n,s),s}function ah(){const{NAME:i}=oh();return Tr(i)}function Z4(i){const{ITEM_NAME:e}=oh();return Ar(e,{...i}),{...ah(),props:i}}function g2(){const{ITEM_NAME:i}=oh();return Tr(i)}function W4(){const i=ah(),{value:e}=g2();return{...i,props:e}}function K4(){const i=ah(),{value:e,disabled:n}=g2();return{...i,props:{value:e,disabled:n}}}function v2(i,e){return i.length!==e.length?!1:i.every((n,t)=>n===e[t])}const X4=i=>({builder:i&4}),n1=i=>({builder:i[2]}),J4=i=>({builder:i&4}),i1=i=>({builder:i[2]});function Y4(i){let e,n,t,r;const s=i[11].default,o=tt(s,i,i[10],n1);let a=[i[2],i[4]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[12](e),n=!0,t||(r=Cn(i[2].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&1028)&&nt(o,s,f,f[10],n?rt(s,f[10],m,X4):it(f[10]),n1),ut(e,l=at(a,[m&4&&f[2],m&16&&f[4]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[12](null),t=!1,r()}}}function Q4(i){let e;const n=i[11].default,t=tt(n,i,i[10],i1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1028)&&nt(t,n,r,r[10],e?rt(n,r[10],s,J4):it(r[10]),i1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function eE(i){let e,n,t,r;const s=[Q4,Y4],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function tE(i,e,n){let t;const r=["multiple","value","onValueChange","disabled","asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{multiple:f=!1}=e,{value:m=void 0}=e,{onValueChange:g=void 0}=e,{disabled:w=!1}=e,{asChild:S=!1}=e,{el:M=void 0}=e;const{elements:{root:$},states:{value:D},updateOption:F,getAttrs:L}=G4({multiple:f,disabled:w,defaultValue:m,onValueChange:({next:se})=>Array.isArray(se)?((!Array.isArray(m)||!v2(m,se))&&(g==null||g(se),n(5,m=se)),se):(m!==se&&(g==null||g(se),n(5,m=se)),se)});Jt(i,$,se=>n(9,o=se));const U=L("root");function ne(se){Nt[se?"unshift":"push"](()=>{M=se,n(0,M)})}return i.$$set=se=>{e=Q(Q({},e),bt(se)),n(4,s=Fe(e,r)),"multiple"in se&&n(6,f=se.multiple),"value"in se&&n(5,m=se.value),"onValueChange"in se&&n(7,g=se.onValueChange),"disabled"in se&&n(8,w=se.disabled),"asChild"in se&&n(1,S=se.asChild),"el"in se&&n(0,M=se.el),"$$scope"in se&&n(10,l=se.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&m!==void 0&&D.set(Array.isArray(m)?[...m]:m),i.$$.dirty&64&&F("multiple",f),i.$$.dirty&256&&F("disabled",w),i.$$.dirty&512&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,U)},[M,S,t,$,s,m,f,g,w,o,l,a,ne]}class nE extends Xe{constructor(e){super(),Je(this,e,tE,eE,Ze,{multiple:6,value:5,onValueChange:7,disabled:8,asChild:1,el:0})}}const iE=i=>({builder:i&4}),r1=i=>({builder:i[2]}),rE=i=>({builder:i&4}),s1=i=>({builder:i[2]});function sE(i){let e,n,t,r;const s=i[9].default,o=tt(s,i,i[8],r1);let a=[i[2],i[4]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[10](e),n=!0,t||(r=Cn(i[2].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&260)&&nt(o,s,f,f[8],n?rt(s,f[8],m,iE):it(f[8]),r1),ut(e,l=at(a,[m&4&&f[2],m&16&&f[4]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[10](null),t=!1,r()}}}function oE(i){let e;const n=i[9].default,t=tt(n,i,i[8],s1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&nt(t,n,r,r[8],e?rt(n,r[8],s,rE):it(r[8]),s1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function aE(i){let e,n,t,r;const s=[oE,sE],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function lE(i,e,n){let t;const r=["value","disabled","asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{value:f}=e,{disabled:m=void 0}=e,{asChild:g=!1}=e,{el:w=void 0}=e;const{elements:{item:S},props:M,getAttrs:$}=Z4({value:f,disabled:m});Jt(i,S,L=>n(7,o=L));const D=$("item");function F(L){Nt[L?"unshift":"push"](()=>{w=L,n(0,w)})}return i.$$set=L=>{e=Q(Q({},e),bt(L)),n(4,s=Fe(e,r)),"value"in L&&n(5,f=L.value),"disabled"in L&&n(6,m=L.disabled),"asChild"in L&&n(1,g=L.asChild),"el"in L&&n(0,w=L.el),"$$scope"in L&&n(8,l=L.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&n(2,t=o(M)),i.$$.dirty&4&&Object.assign(t,D)},[w,g,t,S,s,f,m,o,l,a,F]}let cE=class extends Xe{constructor(e){super(),Je(this,e,lE,aE,Ze,{value:5,disabled:6,asChild:1,el:0})}};const uE=i=>({builder:i&4}),o1=i=>({builder:i[2]}),fE=i=>({builder:i&4}),a1=i=>({builder:i[2]});function dE(i){let e,n,t,r;const s=i[8].default,o=tt(s,i,i[7],o1);let a=[i[2],i[4]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[9](e),n=!0,t||(r=Cn(i[2].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&132)&&nt(o,s,f,f[7],n?rt(s,f[7],m,uE):it(f[7]),o1),ut(e,l=at(a,[m&4&&f[2],m&16&&f[4]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[9](null),t=!1,r()}}}function hE(i){let e;const n=i[8].default,t=tt(n,i,i[7],a1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&nt(t,n,r,r[7],e?rt(n,r[7],s,fE):it(r[7]),a1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function mE(i){let e,n,t,r;const s=[hE,dE],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function pE(i,e,n){let t;const r=["level","asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{level:f=3}=e,{asChild:m=!1}=e,{el:g=void 0}=e;const{elements:{heading:w},getAttrs:S}=ah();Jt(i,w,D=>n(6,o=D));const M=S("header");function $(D){Nt[D?"unshift":"push"](()=>{g=D,n(0,g)})}return i.$$set=D=>{e=Q(Q({},e),bt(D)),n(4,s=Fe(e,r)),"level"in D&&n(5,f=D.level),"asChild"in D&&n(1,m=D.asChild),"el"in D&&n(0,g=D.el),"$$scope"in D&&n(7,l=D.$$scope)},i.$$.update=()=>{i.$$.dirty&96&&n(2,t=o(f)),i.$$.dirty&4&&Object.assign(t,M)},[g,m,t,w,s,f,o,l,a,$]}class _E extends Xe{constructor(e){super(),Je(this,e,pE,mE,Ze,{level:5,asChild:1,el:0})}}const gE=i=>({builder:i&4}),l1=i=>({builder:i[2]}),vE=i=>({builder:i&4}),c1=i=>({builder:i[2]});function bE(i){let e,n,t,r;const s=i[8].default,o=tt(s,i,i[7],l1);let a=[i[2],{type:"button"},i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("button"),o&&o.c(),this.h()},l(f){e=ue(f,"BUTTON",{type:!0});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-keydown",i[4]),Ke(e,"m-click",i[4])],t=!0)},p(f,m){o&&o.p&&(!n||m&132)&&nt(o,s,f,f[7],n?rt(s,f[7],m,gE):it(f[7]),l1),ut(e,l=at(a,[m&4&&f[2],{type:"button"},m&32&&f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[9](null),t=!1,Wn(r)}}}function yE(i){let e;const n=i[8].default,t=tt(n,i,i[7],c1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&nt(t,n,r,r[7],e?rt(n,r[7],s,vE):it(r[7]),c1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function wE(i){let e,n,t,r;const s=[yE,bE],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function xE(i,e,n){let t;const r=["asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{el:m=void 0}=e;const{elements:{trigger:g},props:w,getAttrs:S}=K4();Jt(i,g,F=>n(6,o=F));const M=ds(),$=S("trigger");function D(F){Nt[F?"unshift":"push"](()=>{m=F,n(0,m)})}return i.$$set=F=>{e=Q(Q({},e),bt(F)),n(5,s=Fe(e,r)),"asChild"in F&&n(1,f=F.asChild),"el"in F&&n(0,m=F.el),"$$scope"in F&&n(7,l=F.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=o(w)),i.$$.dirty&4&&Object.assign(t,$)},[m,f,t,g,M,s,o,l,a,D]}let kE=class extends Xe{constructor(e){super(),Je(this,e,xE,wE,Ze,{asChild:1,el:0})}};const CE=i=>({builder:i&256}),u1=i=>({builder:i[8]}),TE=i=>({builder:i&256}),f1=i=>({builder:i[8]}),SE=i=>({builder:i&256}),d1=i=>({builder:i[8]}),EE=i=>({builder:i&256}),h1=i=>({builder:i[8]}),IE=i=>({builder:i&256}),m1=i=>({builder:i[8]}),PE=i=>({builder:i&256}),p1=i=>({builder:i[8]});function $E(i){let e,n,t,r;const s=i[16].default,o=tt(s,i,i[15],u1);let a=[i[8],i[13]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[21](e),n=!0,t||(r=Cn(i[8].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&33024)&&nt(o,s,f,f[15],n?rt(s,f[15],m,CE):it(f[15]),u1),ut(e,l=at(a,[m&256&&f[8],m&8192&&f[13]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[21](null),t=!1,r()}}}function AE(i){let e,n,t,r,s;const o=i[16].default,a=tt(o,i,i[15],f1);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[20](e),t=!0,r||(s=Cn(i[8].action(e)),r=!0)},p(m,g){i=m,a&&a.p&&(!t||g&33024)&&nt(a,o,i,i[15],t?rt(o,i[15],g,TE):it(i[15]),f1),ut(e,f=at(l,[g&256&&i[8],g&8192&&i[13]]))},i(m){t||(E(a,m),n&&n.end(1),t=!0)},o(m){P(a,m),m&&(n=bs(e,i[5],i[6])),t=!1},d(m){m&&I(e),a&&a.d(m),i[20](null),m&&n&&n.end(),r=!1,s()}}}function ME(i){let e,n,t,r,s;const o=i[16].default,a=tt(o,i,i[15],d1);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[19](e),t=!0,r||(s=Cn(i[8].action(e)),r=!0)},p(m,g){i=m,a&&a.p&&(!t||g&33024)&&nt(a,o,i,i[15],t?rt(o,i[15],g,SE):it(i[15]),d1),ut(e,f=at(l,[g&256&&i[8],g&8192&&i[13]]))},i(m){t||(E(a,m),m&&(n||ar(()=>{n=ys(e,i[3],i[4]),n.start()})),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),i[19](null),r=!1,s()}}}function DE(i){let e,n,t,r,s,o;const a=i[16].default,l=tt(a,i,i[15],h1);let f=[i[8],i[13]],m={};for(let g=0;g<f.length;g+=1)m=Q(m,f[g]);return{c(){e=ce("div"),l&&l.c(),this.h()},l(g){e=ue(g,"DIV",{});var w=we(e);l&&l.l(w),w.forEach(I),this.h()},h(){ut(e,m)},m(g,w){N(g,e,w),l&&l.m(e,null),i[18](e),r=!0,s||(o=Cn(i[8].action(e)),s=!0)},p(g,w){i=g,l&&l.p&&(!r||w&33024)&&nt(l,a,i,i[15],r?rt(a,i[15],w,EE):it(i[15]),h1),ut(e,m=at(f,[w&256&&i[8],w&8192&&i[13]]))},i(g){r||(E(l,g),g&&ar(()=>{r&&(t&&t.end(1),n=ys(e,i[3],i[4]),n.start())}),r=!0)},o(g){P(l,g),n&&n.invalidate(),g&&(t=bs(e,i[5],i[6])),r=!1},d(g){g&&I(e),l&&l.d(g),i[18](null),g&&t&&t.end(),s=!1,o()}}}function OE(i){let e,n,t,r,s;const o=i[16].default,a=tt(o,i,i[15],m1);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[17](e),t=!0,r||(s=Cn(i[8].action(e)),r=!0)},p(m,g){i=m,a&&a.p&&(!t||g&33024)&&nt(a,o,i,i[15],t?rt(o,i[15],g,IE):it(i[15]),m1),ut(e,f=at(l,[g&256&&i[8],g&8192&&i[13]]))},i(m){t||(E(a,m),m&&ar(()=>{t&&(n||(n=Qr(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(m){P(a,m),m&&(n||(n=Qr(e,i[1],i[2],!1)),n.run(0)),t=!1},d(m){m&&I(e),a&&a.d(m),i[17](null),m&&n&&n.end(),r=!1,s()}}}function zE(i){let e;const n=i[16].default,t=tt(n,i,i[15],p1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&33024)&&nt(t,n,r,r[15],e?rt(n,r[15],s,PE):it(r[15]),p1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function RE(i){let e,n,t,r,s,o,a,l,f,m;const g=[zE,OE,DE,ME,AE,$E],w=[];function S(M,$){return $&640&&(e=null),$&514&&(n=null),$&552&&(t=null),$&520&&(r=null),$&544&&(s=null),$&512&&(o=null),e==null&&(e=!!(M[7]&&M[9](M[12]))),e?0:(n==null&&(n=!!(M[1]&&M[9](M[12]))),n?1:(t==null&&(t=!!(M[3]&&M[5]&&M[9](M[12]))),t?2:(r==null&&(r=!!(M[3]&&M[9](M[12]))),r?3:(s==null&&(s=!!(M[5]&&M[9](M[12]))),s?4:(o==null&&(o=!!M[9](M[12])),o?5:-1)))))}return~(a=S(i,-1))&&(l=w[a]=g[a](i)),{c(){l&&l.c(),f=Le()},l(M){l&&l.l(M),f=Le()},m(M,$){~a&&w[a].m(M,$),N(M,f,$),m=!0},p(M,[$]){let D=a;a=S(M,$),a===D?~a&&w[a].p(M,$):(l&&(It(),P(w[D],1,1,()=>{w[D]=null}),Pt()),~a?(l=w[a],l?l.p(M,$):(l=w[a]=g[a](M),l.c()),E(l,1),l.m(f.parentNode,f)):l=null)},i(M){m||(E(l),m=!0)},o(M){P(l),m=!1},d(M){M&&I(f),~a&&w[a].d(M)}}}function LE(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let s=Fe(e,r),o,a,{$$slots:l={},$$scope:f}=e,{transition:m=void 0}=e,{transitionConfig:g=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:S=void 0}=e,{outTransition:M=void 0}=e,{outTransitionConfig:$=void 0}=e,{asChild:D=!1}=e,{el:F=void 0}=e;const{elements:{content:L},helpers:{isSelected:U},props:ne,getAttrs:se}=W4();Jt(i,L,X=>n(14,o=X)),Jt(i,U,X=>n(9,a=X));const ee=se("content");function fe(X){Nt[X?"unshift":"push"](()=>{F=X,n(0,F)})}function _e(X){Nt[X?"unshift":"push"](()=>{F=X,n(0,F)})}function re(X){Nt[X?"unshift":"push"](()=>{F=X,n(0,F)})}function de(X){Nt[X?"unshift":"push"](()=>{F=X,n(0,F)})}function he(X){Nt[X?"unshift":"push"](()=>{F=X,n(0,F)})}return i.$$set=X=>{e=Q(Q({},e),bt(X)),n(13,s=Fe(e,r)),"transition"in X&&n(1,m=X.transition),"transitionConfig"in X&&n(2,g=X.transitionConfig),"inTransition"in X&&n(3,w=X.inTransition),"inTransitionConfig"in X&&n(4,S=X.inTransitionConfig),"outTransition"in X&&n(5,M=X.outTransition),"outTransitionConfig"in X&&n(6,$=X.outTransitionConfig),"asChild"in X&&n(7,D=X.asChild),"el"in X&&n(0,F=X.el),"$$scope"in X&&n(15,f=X.$$scope)},i.$$.update=()=>{i.$$.dirty&16384&&n(8,t=o(ne)),i.$$.dirty&256&&Object.assign(t,ee)},[F,m,g,w,S,M,$,D,t,a,L,U,ne,s,o,f,l,fe,_e,re,de,he]}let FE=class extends Xe{constructor(e){super(),Je(this,e,LE,RE,Ze,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};function wp(){return{NAME:"avatar",PARTS:["root","image","fallback"]}}function BE(i){const{NAME:e,PARTS:n}=wp(),t=wo(e,n),r={...eS(xo(i)),getAttrs:t};return Ar(e,r),{...r,updateOption:ko(r.options)}}function NE(i=""){const{NAME:e}=wp(),n=Tr(e);return i?n.options.src.set(i):n.options.src.set(""),n}function VE(){const{NAME:i}=wp();return Tr(i)}const jE=i=>({}),_1=i=>({attrs:i[2]}),UE=i=>({}),g1=i=>({attrs:i[2]});function qE(i){let e,n;const t=i[8].default,r=tt(t,i,i[7],_1);let s=[i[3],i[2]],o={};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return{c(){e=ce("div"),r&&r.c(),this.h()},l(a){e=ue(a,"DIV",{});var l=we(e);r&&r.l(l),l.forEach(I),this.h()},h(){ut(e,o)},m(a,l){N(a,e,l),r&&r.m(e,null),i[9](e),n=!0},p(a,l){r&&r.p&&(!n||l&128)&&nt(r,t,a,a[7],n?rt(t,a[7],l,jE):it(a[7]),_1),ut(e,o=at(s,[l&8&&a[3],a[2]]))},i(a){n||(E(r,a),n=!0)},o(a){P(r,a),n=!1},d(a){a&&I(e),r&&r.d(a),i[9](null)}}}function HE(i){let e;const n=i[8].default,t=tt(n,i,i[7],g1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&nt(t,n,r,r[7],e?rt(n,r[7],s,UE):it(r[7]),g1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function GE(i){let e,n,t,r;const s=[HE,qE],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function ZE(i,e,n){const t=["delayMs","loadingStatus","onLoadingStatusChange","asChild","el"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{delayMs:a=void 0}=e,{loadingStatus:l=void 0}=e,{onLoadingStatusChange:f=void 0}=e,{asChild:m=!1}=e,{el:g=void 0}=e;const{states:{loadingStatus:w},updateOption:S,getAttrs:M}=BE({src:"",delayMs:a,onLoadingStatusChange:({next:F})=>(n(4,l=F),f==null||f(F),F)}),$=M("root");function D(F){Nt[F?"unshift":"push"](()=>{g=F,n(0,g)})}return i.$$set=F=>{e=Q(Q({},e),bt(F)),n(3,r=Fe(e,t)),"delayMs"in F&&n(5,a=F.delayMs),"loadingStatus"in F&&n(4,l=F.loadingStatus),"onLoadingStatusChange"in F&&n(6,f=F.onLoadingStatusChange),"asChild"in F&&n(1,m=F.asChild),"el"in F&&n(0,g=F.el),"$$scope"in F&&n(7,o=F.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&l!==void 0&&w.set(l),i.$$.dirty&32&&S("delayMs",a)},[g,m,$,r,l,a,f,o,s,D]}let WE=class extends Xe{constructor(e){super(),Je(this,e,ZE,GE,Ze,{delayMs:5,loadingStatus:4,onLoadingStatusChange:6,asChild:1,el:0})}};const KE=i=>({builder:i&8}),v1=i=>({builder:i[3]});function XE(i){let e,n,t,r=[i[3],{alt:i[1]},i[5]],s={};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return{c(){e=ce("img"),this.h()},l(o){e=ue(o,"IMG",{alt:!0}),this.h()},h(){ut(e,s)},m(o,a){N(o,e,a),i[10](e),n||(t=Cn(i[3].action(e)),n=!0)},p(o,a){ut(e,s=at(r,[a&8&&o[3],a&2&&{alt:o[1]},a&32&&o[5]]))},i:Ct,o:Ct,d(o){o&&I(e),i[10](null),n=!1,t()}}}function JE(i){let e;const n=i[9].default,t=tt(n,i,i[8],v1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&nt(t,n,r,r[8],e?rt(n,r[8],s,KE):it(r[8]),v1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function YE(i){let e,n,t,r;const s=[JE,XE],o=[];function a(l,f){return l[2]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function QE(i,e,n){let t,r;const s=["src","alt","asChild","el"];let o=Fe(e,s),a,l=Ct,f=()=>(l(),l=gC(t,L=>n(7,a=L)),t);i.$$.on_destroy.push(()=>l());let{$$slots:m={},$$scope:g}=e,{src:w=void 0}=e,{alt:S=void 0}=e,{asChild:M=!1}=e,{el:$=void 0}=e;const D={"data-bits-avatar-image":""};function F(L){Nt[L?"unshift":"push"](()=>{$=L,n(0,$)})}return i.$$set=L=>{e=Q(Q({},e),bt(L)),n(5,o=Fe(e,s)),"src"in L&&n(6,w=L.src),"alt"in L&&n(1,S=L.alt),"asChild"in L&&n(2,M=L.asChild),"el"in L&&n(0,$=L.el),"$$scope"in L&&n(8,g=L.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&f(n(4,t=NE(w).elements.image)),i.$$.dirty&128&&n(3,r=a),i.$$.dirty&8&&Object.assign(r,D)},[$,S,M,r,t,o,w,a,g,m,F]}let e5=class extends Xe{constructor(e){super(),Je(this,e,QE,YE,Ze,{src:6,alt:1,asChild:2,el:0})}};const t5=i=>({builder:i&4}),b1=i=>({builder:i[2]}),n5=i=>({builder:i&4}),y1=i=>({builder:i[2]});function i5(i){let e,n,t,r;const s=i[7].default,o=tt(s,i,i[6],b1);let a=[i[2],i[4]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("span"),o&&o.c(),this.h()},l(f){e=ue(f,"SPAN",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[8](e),n=!0,t||(r=Cn(i[2].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&68)&&nt(o,s,f,f[6],n?rt(s,f[6],m,t5):it(f[6]),b1),ut(e,l=at(a,[m&4&&f[2],m&16&&f[4]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[8](null),t=!1,r()}}}function r5(i){let e;const n=i[7].default,t=tt(n,i,i[6],y1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&nt(t,n,r,r[6],e?rt(n,r[6],s,n5):it(r[6]),y1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function s5(i){let e,n,t,r;const s=[r5,i5],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function o5(i,e,n){let t;const r=["asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{el:m=void 0}=e;const{elements:{fallback:g},getAttrs:w}=VE();Jt(i,g,$=>n(5,o=$));const S=w("fallback");function M($){Nt[$?"unshift":"push"](()=>{m=$,n(0,m)})}return i.$$set=$=>{e=Q(Q({},e),bt($)),n(4,s=Fe(e,r)),"asChild"in $&&n(1,f=$.asChild),"el"in $&&n(0,m=$.el),"$$scope"in $&&n(6,l=$.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,S)},[m,f,t,g,s,o,l,a,M]}let a5=class extends Xe{constructor(e){super(),Je(this,e,o5,s5,Ze,{asChild:1,el:0})}};function lh(i){return(e={})=>l5(i,e)}function l5(i,e){const t={...{side:"bottom",align:"center",sideOffset:0,alignOffset:0,sameWidth:!1,avoidCollisions:!0,collisionPadding:8,fitViewport:!1,strategy:"absolute",overlap:!1},...e};i.update(r=>({...r,placement:c5(t.side,t.align),offset:{...r.offset,mainAxis:t.sideOffset,crossAxis:t.alignOffset},gutter:0,sameWidth:t.sameWidth,flip:t.avoidCollisions,overflowPadding:t.collisionPadding,boundary:t.collisionBoundary,fitViewport:t.fitViewport,strategy:t.strategy,overlap:t.overlap}))}function c5(i,e){return e==="center"?i:`${i}-${e}`}function u5(){return{NAME:"separator",PARTS:["root"]}}function f5(i){const{NAME:e,PARTS:n}=u5(),t=wo(e,n),r={...p2(xo(i)),getAttrs:t};return{...r,updateOption:ko(r.options)}}const d5=i=>({builder:i&4}),w1=i=>({builder:i[2]});function h5(i){let e,n,t,r=[i[2],i[4]],s={};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return{c(){e=ce("div"),this.h()},l(o){e=ue(o,"DIV",{}),we(e).forEach(I),this.h()},h(){ut(e,s)},m(o,a){N(o,e,a),i[10](e),n||(t=Cn(i[2].action(e)),n=!0)},p(o,a){ut(e,s=at(r,[a&4&&o[2],a&16&&o[4]]))},i:Ct,o:Ct,d(o){o&&I(e),i[10](null),n=!1,t()}}}function m5(i){let e;const n=i[9].default,t=tt(n,i,i[8],w1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&nt(t,n,r,r[8],e?rt(n,r[8],s,d5):it(r[8]),w1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function p5(i){let e,n,t,r;const s=[m5,h5],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function _5(i,e,n){let t;const r=["orientation","decorative","asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{orientation:f="horizontal"}=e,{decorative:m=!0}=e,{asChild:g=!1}=e,{el:w=void 0}=e;const{elements:{root:S},updateOption:M,getAttrs:$}=f5({orientation:f,decorative:m});Jt(i,S,L=>n(7,o=L));const D=$("root");function F(L){Nt[L?"unshift":"push"](()=>{w=L,n(0,w)})}return i.$$set=L=>{e=Q(Q({},e),bt(L)),n(4,s=Fe(e,r)),"orientation"in L&&n(5,f=L.orientation),"decorative"in L&&n(6,m=L.decorative),"asChild"in L&&n(1,g=L.asChild),"el"in L&&n(0,w=L.el),"$$scope"in L&&n(8,l=L.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&M("orientation",f),i.$$.dirty&64&&M("decorative",m),i.$$.dirty&128&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,D)},[w,g,t,S,s,f,m,o,l,a,F]}let g5=class extends Xe{constructor(e){super(),Je(this,e,_5,p5,Ze,{orientation:5,decorative:6,asChild:1,el:0})}};function Pc(){return{NAME:"menu",SUB_NAME:"menu-submenu",RADIO_GROUP_NAME:"menu-radiogroup",CHECKBOX_ITEM_NAME:"menu-checkboxitem",RADIO_ITEM_NAME:"menu-radioitem",GROUP_NAME:"menu-group",PARTS:["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","radio-indicator","separator","sub-content","sub-trigger","trigger"]}}function Zo(){const{NAME:i}=Pc();return Tr(i)}function v5(i){const{NAME:e,PARTS:n}=Pc(),t=wo("menu",n),r={...O4({...xo(i),forceVisible:!0}),getAttrs:t};return Ar(e,r),{...r,updateOption:ko(r.options)}}function b5(i){const{CHECKBOX_ITEM_NAME:e}=Pc(),{builders:{createCheckboxItem:n},getAttrs:t}=Zo(),r=n(xo(i));return Ar(e,r.states.checked),{...r,updateOption:ko(r.options),getAttrs:t}}function y5(){const{CHECKBOX_ITEM_NAME:i}=Pc();return Tr(i)}function w5(){const{GROUP_NAME:i}=Pc(),{elements:{group:e},getAttrs:n}=Zo(),t=_2();return Ar(i,t),{group:e,id:t,getAttrs:n}}function x5(){const{GROUP_NAME:i}=Pc(),e=Tr(i)??_2(),{elements:{groupLabel:n},getAttrs:t}=Zo();return{groupLabel:n,id:e,getAttrs:t}}function k5(i){const n={...{side:"bottom",align:"center"},...i},{options:{positioning:t}}=Zo();lh(t)(n)}const C5=i=>({builder:i&8}),x1=i=>({builder:i[3]}),T5=i=>({builder:i&8}),k1=i=>({builder:i[3]});function S5(i){let e=i[1]?"a":"div",n,t,r=(i[1]?"a":"div")&&Om(i);return{c(){r&&r.c(),n=Le()},l(s){r&&r.l(s),n=Le()},m(s,o){r&&r.m(s,o),N(s,n,o),t=!0},p(s,o){s[1],e?Ze(e,s[1]?"a":"div")?(r.d(1),r=Om(s),e=s[1]?"a":"div",r.c(),r.m(n.parentNode,n)):r.p(s,o):(r=Om(s),e=s[1]?"a":"div",r.c(),r.m(n.parentNode,n))},i(s){t||(E(r,s),t=!0)},o(s){P(r,s),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function E5(i){let e;const n=i[11].default,t=tt(n,i,i[10],k1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1032)&&nt(t,n,r,r[10],e?rt(n,r[10],s,T5):it(r[10]),k1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function Om(i){let e,n,t,r;const s=i[11].default,o=tt(s,i,i[10],x1);let a=[{href:i[1]},i[3],i[6]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce(i[1]?"a":"div"),o&&o.c(),this.h()},l(f){e=ue(f,((i[1]?"a":"div")||"null").toUpperCase(),{href:!0});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){vo(i[1]?"a":"div")(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[13](e),n=!0,t||(r=[Cn(i[3].action(e)),Ke(e,"m-click",i[5]),Ke(e,"m-focusin",i[5]),Ke(e,"m-focusout",i[5]),Ke(e,"m-keydown",i[5]),Ke(e,"m-pointerdown",i[5]),Ke(e,"m-pointerleave",i[5]),Ke(e,"m-pointermove",i[5]),Ke(e,"pointerenter",i[12])],t=!0)},p(f,m){o&&o.p&&(!n||m&1032)&&nt(o,s,f,f[10],n?rt(s,f[10],m,C5):it(f[10]),x1),vo(f[1]?"a":"div")(e,l=at(a,[(!n||m&2)&&{href:f[1]},m&8&&f[3],m&64&&f[6]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[13](null),t=!1,Wn(r)}}}function I5(i){let e,n,t,r;const s=[E5,S5],o=[];function a(l,f){return l[2]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function P5(i,e,n){let t,r;const s=["href","asChild","disabled","el"];let o=Fe(e,s),a,{$$slots:l={},$$scope:f}=e,{href:m=void 0}=e,{asChild:g=!1}=e,{disabled:w=!1}=e,{el:S=void 0}=e;const{elements:{item:M},getAttrs:$}=Zo();Jt(i,M,U=>n(9,a=U));const D=ds();function F(U){At.call(this,i,U)}function L(U){Nt[U?"unshift":"push"](()=>{S=U,n(0,S)})}return i.$$set=U=>{e=Q(Q({},e),bt(U)),n(6,o=Fe(e,s)),"href"in U&&n(1,m=U.href),"asChild"in U&&n(2,g=U.asChild),"disabled"in U&&n(7,w=U.disabled),"el"in U&&n(0,S=U.el),"$$scope"in U&&n(10,f=U.$$scope)},i.$$.update=()=>{i.$$.dirty&512&&n(3,t=a),i.$$.dirty&128&&n(8,r={...$("item"),...H4(w)}),i.$$.dirty&264&&Object.assign(t,r)},[S,m,g,t,M,D,o,w,r,a,f,l,F,L]}class b2 extends Xe{constructor(e){super(),Je(this,e,P5,I5,Ze,{href:1,asChild:2,disabled:7,el:0})}}const $5=i=>({builder:i&4}),C1=i=>({builder:i[2]}),A5=i=>({builder:i&4}),T1=i=>({builder:i[2]});function M5(i){let e,n,t,r;const s=i[7].default,o=tt(s,i,i[6],C1);let a=[i[2],i[4]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[8](e),n=!0,t||(r=Cn(i[2].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&68)&&nt(o,s,f,f[6],n?rt(s,f[6],m,$5):it(f[6]),C1),ut(e,l=at(a,[m&4&&f[2],m&16&&f[4]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[8](null),t=!1,r()}}}function D5(i){let e;const n=i[7].default,t=tt(n,i,i[6],T1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&nt(t,n,r,r[6],e?rt(n,r[6],s,A5):it(r[6]),T1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function O5(i){let e,n,t,r;const s=[D5,M5],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function z5(i,e,n){let t;const r=["asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{el:m=void 0}=e;const{group:g,id:w,getAttrs:S}=w5();Jt(i,g,D=>n(5,o=D));const M=S("group");function $(D){Nt[D?"unshift":"push"](()=>{m=D,n(0,m)})}return i.$$set=D=>{e=Q(Q({},e),bt(D)),n(4,s=Fe(e,r)),"asChild"in D&&n(1,f=D.asChild),"el"in D&&n(0,m=D.el),"$$scope"in D&&n(6,l=D.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=o(w)),i.$$.dirty&4&&Object.assign(t,M)},[m,f,t,g,s,o,l,a,$]}class R5 extends Xe{constructor(e){super(),Je(this,e,z5,O5,Ze,{asChild:1,el:0})}}const L5=i=>({builder:i&4}),S1=i=>({builder:i[2]}),F5=i=>({builder:i&4}),E1=i=>({builder:i[2]});function B5(i){let e,n,t,r;const s=i[7].default,o=tt(s,i,i[6],S1);let a=[i[2],i[4]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[8](e),n=!0,t||(r=Cn(i[2].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&68)&&nt(o,s,f,f[6],n?rt(s,f[6],m,L5):it(f[6]),S1),ut(e,l=at(a,[m&4&&f[2],m&16&&f[4]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[8](null),t=!1,r()}}}function N5(i){let e;const n=i[7].default,t=tt(n,i,i[6],E1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&nt(t,n,r,r[6],e?rt(n,r[6],s,F5):it(r[6]),E1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function V5(i){let e,n,t,r;const s=[N5,B5],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function j5(i,e,n){let t;const r=["asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{el:m=void 0}=e;const{groupLabel:g,id:w,getAttrs:S}=x5();Jt(i,g,D=>n(5,o=D));const M=S("label");function $(D){Nt[D?"unshift":"push"](()=>{m=D,n(0,m)})}return i.$$set=D=>{e=Q(Q({},e),bt(D)),n(4,s=Fe(e,r)),"asChild"in D&&n(1,f=D.asChild),"el"in D&&n(0,m=D.el),"$$scope"in D&&n(6,l=D.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=o(w)),i.$$.dirty&4&&Object.assign(t,M)},[m,f,t,g,s,o,l,a,$]}class y2 extends Xe{constructor(e){super(),Je(this,e,j5,V5,Ze,{asChild:1,el:0})}}const U5=i=>({builder:i&4}),I1=i=>({builder:i[2]});function q5(i){let e,n,t,r=[i[3],i[5]],s={};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return{c(){e=ce("div"),this.h()},l(o){e=ue(o,"DIV",{}),we(e).forEach(I),this.h()},h(){ut(e,s)},m(o,a){N(o,e,a),i[8](e),n||(t=Cn(i[3].action(e)),n=!0)},p(o,a){ut(e,s=at(r,[a&8&&o[3],a&32&&o[5]]))},i:Ct,o:Ct,d(o){o&&I(e),i[8](null),n=!1,t()}}}function H5(i){let e;const n=i[7].default,t=tt(n,i,i[6],I1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&nt(t,n,r,r[6],e?rt(n,r[6],s,U5):it(r[6]),I1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function G5(i){let e,n,t,r;const s=[H5,q5],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function Z5(i,e,n){let t;const r=["asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{el:m=void 0}=e;const{elements:{separator:g},getAttrs:w}=Zo();Jt(i,g,$=>n(3,o=$));const S=w("separator");function M($){Nt[$?"unshift":"push"](()=>{m=$,n(0,m)})}return i.$$set=$=>{e=Q(Q({},e),bt($)),n(5,s=Fe(e,r)),"asChild"in $&&n(1,f=$.asChild),"el"in $&&n(0,m=$.el),"$$scope"in $&&n(6,l=$.$$scope)},i.$$.update=()=>{i.$$.dirty&8&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,S)},[m,f,t,o,g,s,l,a,M]}class w2 extends Xe{constructor(e){super(),Je(this,e,Z5,G5,Ze,{asChild:1,el:0})}}const W5=i=>({builder:i&4}),P1=i=>({builder:i[2]}),K5=i=>({builder:i&4}),$1=i=>({builder:i[2]});function X5(i){let e,n,t,r;const s=i[11].default,o=tt(s,i,i[10],P1);let a=[i[2],i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[13](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-click",i[4]),Ke(e,"m-focusin",i[4]),Ke(e,"m-focusout",i[4]),Ke(e,"m-keydown",i[4]),Ke(e,"m-pointerdown",i[4]),Ke(e,"m-pointerleave",i[4]),Ke(e,"m-pointermove",i[4]),Ke(e,"pointerenter",i[12])],t=!0)},p(f,m){o&&o.p&&(!n||m&1028)&&nt(o,s,f,f[10],n?rt(s,f[10],m,W5):it(f[10]),P1),ut(e,l=at(a,[m&4&&f[2],m&32&&f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[13](null),t=!1,Wn(r)}}}function J5(i){let e;const n=i[11].default,t=tt(n,i,i[10],$1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1028)&&nt(t,n,r,r[10],e?rt(n,r[10],s,K5):it(r[10]),$1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function Y5(i){let e,n,t,r;const s=[J5,X5],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function Q5(i,e,n){let t;const r=["checked","onCheckedChange","disabled","asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{checked:f=void 0}=e,{onCheckedChange:m=void 0}=e,{disabled:g=void 0}=e,{asChild:w=!1}=e,{el:S=void 0}=e;const{elements:{checkboxItem:M},states:{checked:$},updateOption:D,getAttrs:F}=b5({disabled:g,defaultChecked:f,onCheckedChange:({next:ee})=>(f!==ee&&(m==null||m(ee),n(6,f=ee)),ee)});Jt(i,M,ee=>n(9,o=ee));const L=ds(),U=F("checkbox-item");function ne(ee){At.call(this,i,ee)}function se(ee){Nt[ee?"unshift":"push"](()=>{S=ee,n(0,S)})}return i.$$set=ee=>{e=Q(Q({},e),bt(ee)),n(5,s=Fe(e,r)),"checked"in ee&&n(6,f=ee.checked),"onCheckedChange"in ee&&n(7,m=ee.onCheckedChange),"disabled"in ee&&n(8,g=ee.disabled),"asChild"in ee&&n(1,w=ee.asChild),"el"in ee&&n(0,S=ee.el),"$$scope"in ee&&n(10,l=ee.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&f!==void 0&&$.set(f),i.$$.dirty&256&&D("disabled",g),i.$$.dirty&512&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,U)},[S,w,t,M,L,s,f,m,g,o,l,a,ne,se]}class eI extends Xe{constructor(e){super(),Je(this,e,Q5,Y5,Ze,{checked:6,onCheckedChange:7,disabled:8,asChild:1,el:0})}}const tI=i=>({checked:i&4}),A1=i=>({attrs:i[4],checked:i[2]}),nI=i=>({checked:i&4}),M1=i=>({attrs:i[4],checked:i[2]});function iI(i){let e,n,t=i[2]&&D1(i),r=[i[5],i[4]],s={};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return{c(){e=ce("div"),t&&t.c(),this.h()},l(o){e=ue(o,"DIV",{});var a=we(e);t&&t.l(a),a.forEach(I),this.h()},h(){ut(e,s)},m(o,a){N(o,e,a),t&&t.m(e,null),i[8](e),n=!0},p(o,a){o[2]?t?(t.p(o,a),a&4&&E(t,1)):(t=D1(o),t.c(),E(t,1),t.m(e,null)):t&&(It(),P(t,1,1,()=>{t=null}),Pt()),ut(e,s=at(r,[a&32&&o[5],o[4]]))},i(o){n||(E(t),n=!0)},o(o){P(t),n=!1},d(o){o&&I(e),t&&t.d(),i[8](null)}}}function rI(i){let e;const n=i[7].default,t=tt(n,i,i[6],M1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&nt(t,n,r,r[6],e?rt(n,r[6],s,nI):it(r[6]),M1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function D1(i){let e;const n=i[7].default,t=tt(n,i,i[6],A1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&nt(t,n,r,r[6],e?rt(n,r[6],s,tI):it(r[6]),A1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function sI(i){let e,n,t,r;const s=[rI,iI],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function oI(i,e,n){const t=["asChild","el"];let r=Fe(e,t),s,{$$slots:o={},$$scope:a}=e,{asChild:l=!1}=e,{el:f=void 0}=e;const m=y5();Jt(i,m,M=>n(2,s=M));const{getAttrs:g}=Zo(),w=g("checkbox-indicator");function S(M){Nt[M?"unshift":"push"](()=>{f=M,n(0,f)})}return i.$$set=M=>{e=Q(Q({},e),bt(M)),n(5,r=Fe(e,t)),"asChild"in M&&n(1,l=M.asChild),"el"in M&&n(0,f=M.el),"$$scope"in M&&n(6,a=M.$$scope)},[f,l,s,m,w,r,a,o,S]}class aI extends Xe{constructor(e){super(),Je(this,e,oI,sI,Ze,{asChild:1,el:0})}}function x2(){return{NAME:"popover",PARTS:["arrow","close","content","trigger"]}}function lI(i){const{NAME:e,PARTS:n}=x2(),t=wo(e,n),r={...N4({positioning:{placement:"bottom",gutter:0},...xo(i),forceVisible:!0}),getAttrs:t};return Ar(e,r),{...r,updateOption:ko(r.options)}}function xp(){const{NAME:i}=x2();return Tr(i)}function cI(i){const n={...{side:"bottom",align:"center"},...i},{options:{positioning:t}}=xp();lh(t)(n)}function k2(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function uI(i){const{NAME:e,PARTS:n}=k2(),t=wo(e,n),r={...M4({...xo(i),role:"dialog",forceVisible:!0}),getAttrs:t};return Ar(e,r),{...r,updateOption:ko(r.options)}}function gl(){const{NAME:i}=k2();return Tr(i)}const fI=i=>({ids:i&1}),O1=i=>({ids:i[0]});function dI(i){let e;const n=i[12].default,t=tt(n,i,i[11],O1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&2049)&&nt(t,n,r,r[11],e?rt(n,r[11],s,fI):it(r[11]),O1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function hI(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{preventScroll:o=void 0}=e,{closeOnEscape:a=void 0}=e,{closeOnOutsideClick:l=void 0}=e,{portal:f=void 0}=e,{open:m=void 0}=e,{onOpenChange:g=void 0}=e,{openFocus:w=void 0}=e,{closeFocus:S=void 0}=e,{onOutsideClick:M=void 0}=e;const{states:{open:$},updateOption:D,ids:F}=uI({closeOnEscape:a,preventScroll:o,closeOnOutsideClick:l,portal:f,forceVisible:!0,defaultOpen:m,openFocus:w,closeFocus:S,onOutsideClick:M,onOpenChange:({next:U})=>(m!==U&&(g==null||g(U),n(2,m=U)),U)}),L=Bn([F.content,F.description,F.title],([U,ne,se])=>({content:U,description:ne,title:se}));return Jt(i,L,U=>n(0,t=U)),i.$$set=U=>{"preventScroll"in U&&n(3,o=U.preventScroll),"closeOnEscape"in U&&n(4,a=U.closeOnEscape),"closeOnOutsideClick"in U&&n(5,l=U.closeOnOutsideClick),"portal"in U&&n(6,f=U.portal),"open"in U&&n(2,m=U.open),"onOpenChange"in U&&n(7,g=U.onOpenChange),"openFocus"in U&&n(8,w=U.openFocus),"closeFocus"in U&&n(9,S=U.closeFocus),"onOutsideClick"in U&&n(10,M=U.onOutsideClick),"$$scope"in U&&n(11,s=U.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&m!==void 0&&$.set(m),i.$$.dirty&8&&D("preventScroll",o),i.$$.dirty&16&&D("closeOnEscape",a),i.$$.dirty&32&&D("closeOnOutsideClick",l),i.$$.dirty&64&&D("portal",f),i.$$.dirty&256&&D("openFocus",w),i.$$.dirty&512&&D("closeFocus",S),i.$$.dirty&1024&&D("onOutsideClick",M)},[t,L,m,o,a,l,f,g,w,S,M,s,r]}class mI extends Xe{constructor(e){super(),Je(this,e,hI,dI,Ze,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}const pI=i=>({builder:i&8}),z1=i=>({builder:i[3]}),_I=i=>({builder:i&8}),R1=i=>({builder:i[3]});function gI(i){let e=i[1],n,t,r=i[1]&&zm(i);return{c(){r&&r.c(),n=Le()},l(s){r&&r.l(s),n=Le()},m(s,o){r&&r.m(s,o),N(s,n,o),t=!0},p(s,o){s[1]?e?Ze(e,s[1])?(r.d(1),r=zm(s),e=s[1],r.c(),r.m(n.parentNode,n)):r.p(s,o):(r=zm(s),e=s[1],r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null,e=s[1])},i(s){t||(E(r,s),t=!0)},o(s){P(r,s),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function vI(i){let e;const n=i[9].default,t=tt(n,i,i[8],R1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&nt(t,n,r,r[8],e?rt(n,r[8],s,_I):it(r[8]),R1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function zm(i){let e,n,t,r;const s=i[9].default,o=tt(s,i,i[8],z1);let a=[i[3],i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce(i[1]),o&&o.c(),this.h()},l(f){e=ue(f,(i[1]||"null").toUpperCase(),{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){vo(i[1])(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[10](e),n=!0,t||(r=Cn(i[3].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&264)&&nt(o,s,f,f[8],n?rt(s,f[8],m,pI):it(f[8]),z1),vo(f[1])(e,l=at(a,[m&8&&f[3],m&32&&f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[10](null),t=!1,r()}}}function bI(i){let e,n,t,r;const s=[vI,gI],o=[];function a(l,f){return l[2]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function yI(i,e,n){let t;const r=["level","asChild","id","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{level:f="h2"}=e,{asChild:m=!1}=e,{id:g=void 0}=e,{el:w=void 0}=e;const{elements:{title:S},ids:M,getAttrs:$}=gl();Jt(i,S,L=>n(7,o=L));const D=$("title");function F(L){Nt[L?"unshift":"push"](()=>{w=L,n(0,w)})}return i.$$set=L=>{e=Q(Q({},e),bt(L)),n(5,s=Fe(e,r)),"level"in L&&n(1,f=L.level),"asChild"in L&&n(2,m=L.asChild),"id"in L&&n(6,g=L.id),"el"in L&&n(0,w=L.el),"$$scope"in L&&n(8,l=L.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&g&&M.title.set(g),i.$$.dirty&128&&n(3,t=o),i.$$.dirty&8&&Object.assign(t,D)},[w,f,m,t,S,s,g,o,l,a,F]}let wI=class extends Xe{constructor(e){super(),Je(this,e,yI,bI,Ze,{level:1,asChild:2,id:6,el:0})}};const xI=i=>({builder:i&4}),L1=i=>({builder:i[2]}),kI=i=>({builder:i&4}),F1=i=>({builder:i[2]});function CI(i){let e,n,t,r;const s=i[8].default,o=tt(s,i,i[7],L1);let a=[i[2],{type:"button"},i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("button"),o&&o.c(),this.h()},l(f){e=ue(f,"BUTTON",{type:!0});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-click",i[4]),Ke(e,"m-keydown",i[4])],t=!0)},p(f,m){o&&o.p&&(!n||m&132)&&nt(o,s,f,f[7],n?rt(s,f[7],m,xI):it(f[7]),L1),ut(e,l=at(a,[m&4&&f[2],{type:"button"},m&32&&f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[9](null),t=!1,Wn(r)}}}function TI(i){let e;const n=i[8].default,t=tt(n,i,i[7],F1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&nt(t,n,r,r[7],e?rt(n,r[7],s,kI):it(r[7]),F1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function SI(i){let e,n,t,r;const s=[TI,CI],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function EI(i,e,n){let t;const r=["asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{el:m=void 0}=e;const{elements:{close:g},getAttrs:w}=gl();Jt(i,g,D=>n(6,o=D));const S=ds(),M=w("close");function $(D){Nt[D?"unshift":"push"](()=>{m=D,n(0,m)})}return i.$$set=D=>{e=Q(Q({},e),bt(D)),n(5,s=Fe(e,r)),"asChild"in D&&n(1,f=D.asChild),"el"in D&&n(0,m=D.el),"$$scope"in D&&n(7,l=D.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,M)},[m,f,t,g,S,s,o,l,a,$]}class II extends Xe{constructor(e){super(),Je(this,e,EI,SI,Ze,{asChild:1,el:0})}}const PI=i=>({builder:i&4}),B1=i=>({builder:i[2]}),$I=i=>({builder:i&4}),N1=i=>({builder:i[2]});function AI(i){let e,n,t,r;const s=i[7].default,o=tt(s,i,i[6],B1);let a=[i[2],i[4]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[8](e),n=!0,t||(r=Cn(i[2].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&68)&&nt(o,s,f,f[6],n?rt(s,f[6],m,PI):it(f[6]),B1),ut(e,l=at(a,[m&4&&f[2],m&16&&f[4]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[8](null),t=!1,r()}}}function MI(i){let e;const n=i[7].default,t=tt(n,i,i[6],N1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&nt(t,n,r,r[6],e?rt(n,r[6],s,$I):it(r[6]),N1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function DI(i){let e,n,t,r;const s=[MI,AI],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function OI(i,e,n){let t;const r=["asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{el:m=void 0}=e;const{elements:{portalled:g},getAttrs:w}=gl();Jt(i,g,$=>n(5,o=$));const S=w("portal");function M($){Nt[$?"unshift":"push"](()=>{m=$,n(0,m)})}return i.$$set=$=>{e=Q(Q({},e),bt($)),n(4,s=Fe(e,r)),"asChild"in $&&n(1,f=$.asChild),"el"in $&&n(0,m=$.el),"$$scope"in $&&n(6,l=$.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,S)},[m,f,t,g,s,o,l,a,M]}let zI=class extends Xe{constructor(e){super(),Je(this,e,OI,DI,Ze,{asChild:1,el:0})}};const RI=i=>({builder:i[0]&256}),V1=i=>({builder:i[8]}),LI=i=>({builder:i[0]&256}),j1=i=>({builder:i[8]}),FI=i=>({builder:i[0]&256}),U1=i=>({builder:i[8]}),BI=i=>({builder:i[0]&256}),q1=i=>({builder:i[8]}),NI=i=>({builder:i[0]&256}),H1=i=>({builder:i[8]}),VI=i=>({builder:i[0]&256}),G1=i=>({builder:i[8]});function jI(i){let e,n,t,r;const s=i[16].default,o=tt(s,i,i[15],V1);let a=[i[8],i[12]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[56](e),n=!0,t||(r=[Cn(i[8].action(e)),Ke(e,"pointerdown",i[45]),Ke(e,"pointermove",i[46]),Ke(e,"pointerup",i[47]),Ke(e,"touchend",i[48]),Ke(e,"touchstart",i[49]),Ke(e,"touchcancel",i[50]),Ke(e,"touchmove",i[51])],t=!0)},p(f,m){o&&o.p&&(!n||m[0]&33024)&&nt(o,s,f,f[15],n?rt(s,f[15],m,RI):it(f[15]),V1),ut(e,l=at(a,[m[0]&256&&f[8],m[0]&4096&&f[12]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[56](null),t=!1,Wn(r)}}}function UI(i){let e,n,t,r,s;const o=i[16].default,a=tt(o,i,i[15],j1);let l=[i[8],i[12]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[55](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"pointerdown",i[38]),Ke(e,"pointermove",i[39]),Ke(e,"pointerup",i[40]),Ke(e,"touchend",i[41]),Ke(e,"touchstart",i[42]),Ke(e,"touchcancel",i[43]),Ke(e,"touchmove",i[44])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&33024)&&nt(a,o,i,i[15],t?rt(o,i[15],g,LI):it(i[15]),j1),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&4096&&i[12]]))},i(m){t||(E(a,m),n&&n.end(1),t=!0)},o(m){P(a,m),m&&(n=bs(e,i[5],i[6])),t=!1},d(m){m&&I(e),a&&a.d(m),i[55](null),m&&n&&n.end(),r=!1,Wn(s)}}}function qI(i){let e,n,t,r,s;const o=i[16].default,a=tt(o,i,i[15],U1);let l=[i[8],i[12]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[54](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"pointerdown",i[31]),Ke(e,"pointermove",i[32]),Ke(e,"pointerup",i[33]),Ke(e,"touchend",i[34]),Ke(e,"touchstart",i[35]),Ke(e,"touchcancel",i[36]),Ke(e,"touchmove",i[37])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&33024)&&nt(a,o,i,i[15],t?rt(o,i[15],g,FI):it(i[15]),U1),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&4096&&i[12]]))},i(m){t||(E(a,m),m&&(n||ar(()=>{n=ys(e,i[3],i[4]),n.start()})),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),i[54](null),r=!1,Wn(s)}}}function HI(i){let e,n,t,r,s,o;const a=i[16].default,l=tt(a,i,i[15],q1);let f=[i[8],i[12]],m={};for(let g=0;g<f.length;g+=1)m=Q(m,f[g]);return{c(){e=ce("div"),l&&l.c(),this.h()},l(g){e=ue(g,"DIV",{});var w=we(e);l&&l.l(w),w.forEach(I),this.h()},h(){ut(e,m)},m(g,w){N(g,e,w),l&&l.m(e,null),i[53](e),r=!0,s||(o=[Cn(i[8].action(e)),Ke(e,"pointerdown",i[24]),Ke(e,"pointermove",i[25]),Ke(e,"pointerup",i[26]),Ke(e,"touchend",i[27]),Ke(e,"touchstart",i[28]),Ke(e,"touchcancel",i[29]),Ke(e,"touchmove",i[30])],s=!0)},p(g,w){i=g,l&&l.p&&(!r||w[0]&33024)&&nt(l,a,i,i[15],r?rt(a,i[15],w,BI):it(i[15]),q1),ut(e,m=at(f,[w[0]&256&&i[8],w[0]&4096&&i[12]]))},i(g){r||(E(l,g),g&&ar(()=>{r&&(t&&t.end(1),n=ys(e,i[3],i[4]),n.start())}),r=!0)},o(g){P(l,g),n&&n.invalidate(),g&&(t=bs(e,i[5],i[6])),r=!1},d(g){g&&I(e),l&&l.d(g),i[53](null),g&&t&&t.end(),s=!1,Wn(o)}}}function GI(i){let e,n,t,r,s;const o=i[16].default,a=tt(o,i,i[15],H1);let l=[i[8],i[12]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[52](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"pointerdown",i[17]),Ke(e,"pointermove",i[18]),Ke(e,"pointerup",i[19]),Ke(e,"touchend",i[20]),Ke(e,"touchstart",i[21]),Ke(e,"touchcancel",i[22]),Ke(e,"touchmove",i[23])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&33024)&&nt(a,o,i,i[15],t?rt(o,i[15],g,NI):it(i[15]),H1),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&4096&&i[12]]))},i(m){t||(E(a,m),m&&ar(()=>{t&&(n||(n=Qr(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(m){P(a,m),m&&(n||(n=Qr(e,i[1],i[2],!1)),n.run(0)),t=!1},d(m){m&&I(e),a&&a.d(m),i[52](null),m&&n&&n.end(),r=!1,Wn(s)}}}function ZI(i){let e;const n=i[16].default,t=tt(n,i,i[15],G1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&33024)&&nt(t,n,r,r[15],e?rt(n,r[15],s,VI):it(r[15]),G1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function WI(i){let e,n,t,r;const s=[ZI,GI,HI,qI,UI,jI],o=[];function a(l,f){return l[7]&&l[9]?0:l[1]&&l[9]?1:l[3]&&l[5]&&l[9]?2:l[3]&&l[9]?3:l[5]&&l[9]?4:l[9]?5:-1}return~(e=a(i))&&(n=o[e]=s[e](i)),{c(){n&&n.c(),t=Le()},l(l){n&&n.l(l),t=Le()},m(l,f){~e&&o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?~e&&o[e].p(l,f):(n&&(It(),P(o[m],1,1,()=>{o[m]=null}),Pt()),~e?(n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t)):n=null)},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),~e&&o[e].d(l)}}}function KI(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","el"];let s=Fe(e,r),o,a,{$$slots:l={},$$scope:f}=e,{transition:m=void 0}=e,{transitionConfig:g=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:S=void 0}=e,{outTransition:M=void 0}=e,{outTransitionConfig:$=void 0}=e,{asChild:D=!1}=e,{id:F=void 0}=e,{el:L=void 0}=e;const{elements:{content:U},states:{open:ne},ids:se,getAttrs:ee}=gl();Jt(i,U,wt=>n(14,o=wt)),Jt(i,ne,wt=>n(9,a=wt));const fe=ee("content");function _e(wt){At.call(this,i,wt)}function re(wt){At.call(this,i,wt)}function de(wt){At.call(this,i,wt)}function he(wt){At.call(this,i,wt)}function X(wt){At.call(this,i,wt)}function j(wt){At.call(this,i,wt)}function xe(wt){At.call(this,i,wt)}function ze(wt){At.call(this,i,wt)}function ve(wt){At.call(this,i,wt)}function We(wt){At.call(this,i,wt)}function pt(wt){At.call(this,i,wt)}function Mt(wt){At.call(this,i,wt)}function St(wt){At.call(this,i,wt)}function Dt(wt){At.call(this,i,wt)}function zt(wt){At.call(this,i,wt)}function _t(wt){At.call(this,i,wt)}function ft(wt){At.call(this,i,wt)}function Be(wt){At.call(this,i,wt)}function Ut(wt){At.call(this,i,wt)}function Rt(wt){At.call(this,i,wt)}function qt(wt){At.call(this,i,wt)}function et(wt){At.call(this,i,wt)}function dt(wt){At.call(this,i,wt)}function yt(wt){At.call(this,i,wt)}function Ue(wt){At.call(this,i,wt)}function kt(wt){At.call(this,i,wt)}function Ge(wt){At.call(this,i,wt)}function Xt(wt){At.call(this,i,wt)}function En(wt){At.call(this,i,wt)}function Oe(wt){At.call(this,i,wt)}function un(wt){At.call(this,i,wt)}function qn(wt){At.call(this,i,wt)}function _n(wt){At.call(this,i,wt)}function mt(wt){At.call(this,i,wt)}function Zt(wt){At.call(this,i,wt)}function Kt(wt){Nt[wt?"unshift":"push"](()=>{L=wt,n(0,L)})}function en(wt){Nt[wt?"unshift":"push"](()=>{L=wt,n(0,L)})}function Pn(wt){Nt[wt?"unshift":"push"](()=>{L=wt,n(0,L)})}function Vn(wt){Nt[wt?"unshift":"push"](()=>{L=wt,n(0,L)})}function yi(wt){Nt[wt?"unshift":"push"](()=>{L=wt,n(0,L)})}return i.$$set=wt=>{e=Q(Q({},e),bt(wt)),n(12,s=Fe(e,r)),"transition"in wt&&n(1,m=wt.transition),"transitionConfig"in wt&&n(2,g=wt.transitionConfig),"inTransition"in wt&&n(3,w=wt.inTransition),"inTransitionConfig"in wt&&n(4,S=wt.inTransitionConfig),"outTransition"in wt&&n(5,M=wt.outTransition),"outTransitionConfig"in wt&&n(6,$=wt.outTransitionConfig),"asChild"in wt&&n(7,D=wt.asChild),"id"in wt&&n(13,F=wt.id),"el"in wt&&n(0,L=wt.el),"$$scope"in wt&&n(15,f=wt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8192&&F&&se.content.set(F),i.$$.dirty[0]&16384&&n(8,t=o),i.$$.dirty[0]&256&&Object.assign(t,fe)},[L,m,g,w,S,M,$,D,t,a,U,ne,s,F,o,f,l,_e,re,de,he,X,j,xe,ze,ve,We,pt,Mt,St,Dt,zt,_t,ft,Be,Ut,Rt,qt,et,dt,yt,Ue,kt,Ge,Xt,En,Oe,un,qn,_n,mt,Zt,Kt,en,Pn,Vn,yi]}let XI=class extends Xe{constructor(e){super(),Je(this,e,KI,WI,Ze,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:13,el:0},null,[-1,-1])}};const JI=i=>({builder:i&256}),Z1=i=>({builder:i[8]});function YI(i){let e,n,t,r=[i[8],i[12]],s={};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return{c(){e=ce("div"),this.h()},l(o){e=ue(o,"DIV",{}),we(e).forEach(I),this.h()},h(){ut(e,s)},m(o,a){N(o,e,a),i[25](e),n||(t=[Cn(i[8].action(e)),Ke(e,"mouseup",i[20])],n=!0)},p(o,a){ut(e,s=at(r,[a&256&&o[8],a&4096&&o[12]]))},i:Ct,o:Ct,d(o){o&&I(e),i[25](null),n=!1,Wn(t)}}}function QI(i){let e,n,t,r,s,o=[i[8],i[12]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),this.h()},l(l){e=ue(l,"DIV",{}),we(e).forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),i[24](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"mouseup",i[19])],r=!0)},p(l,f){i=l,ut(e,a=at(o,[f&256&&i[8],f&4096&&i[12]]))},i(l){t||(n&&n.end(1),t=!0)},o(l){l&&(n=bs(e,i[5],i[6])),t=!1},d(l){l&&I(e),i[24](null),l&&n&&n.end(),r=!1,Wn(s)}}}function eP(i){let e,n,t,r,s=[i[8],i[12]],o={};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return{c(){e=ce("div"),this.h()},l(a){e=ue(a,"DIV",{}),we(e).forEach(I),this.h()},h(){ut(e,o)},m(a,l){N(a,e,l),i[23](e),t||(r=[Cn(i[8].action(e)),Ke(e,"mouseup",i[18])],t=!0)},p(a,l){i=a,ut(e,o=at(s,[l&256&&i[8],l&4096&&i[12]]))},i(a){a&&(n||ar(()=>{n=ys(e,i[3],i[4]),n.start()}))},o:Ct,d(a){a&&I(e),i[23](null),t=!1,Wn(r)}}}function tP(i){let e,n,t,r,s,o,a=[i[8],i[12]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),this.h()},l(f){e=ue(f,"DIV",{}),we(e).forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),i[22](e),r=!0,s||(o=[Cn(i[8].action(e)),Ke(e,"mouseup",i[17])],s=!0)},p(f,m){i=f,ut(e,l=at(a,[m&256&&i[8],m&4096&&i[12]]))},i(f){r||(f&&ar(()=>{r&&(t&&t.end(1),n=ys(e,i[3],i[4]),n.start())}),r=!0)},o(f){n&&n.invalidate(),f&&(t=bs(e,i[5],i[6])),r=!1},d(f){f&&I(e),i[22](null),f&&t&&t.end(),s=!1,Wn(o)}}}function nP(i){let e,n,t,r,s,o=[i[8],i[12]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),this.h()},l(l){e=ue(l,"DIV",{}),we(e).forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),i[21](e),t=!0,r||(s=[Ke(e,"mouseup",i[16]),Cn(i[8].action(e))],r=!0)},p(l,f){i=l,ut(e,a=at(o,[f&256&&i[8],f&4096&&i[12]]))},i(l){t||(l&&ar(()=>{t&&(n||(n=Qr(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(l){l&&(n||(n=Qr(e,i[1],i[2],!1)),n.run(0)),t=!1},d(l){l&&I(e),i[21](null),l&&n&&n.end(),r=!1,Wn(s)}}}function iP(i){let e;const n=i[15].default,t=tt(n,i,i[14],Z1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16640)&&nt(t,n,r,r[14],e?rt(n,r[14],s,JI):it(r[14]),Z1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function rP(i){let e,n,t,r;const s=[iP,nP,tP,eP,QI,YI],o=[];function a(l,f){return l[7]&&l[9]?0:l[1]&&l[9]?1:l[3]&&l[5]&&l[9]?2:l[3]&&l[9]?3:l[5]&&l[9]?4:l[9]?5:-1}return~(e=a(i))&&(n=o[e]=s[e](i)),{c(){n&&n.c(),t=Le()},l(l){n&&n.l(l),t=Le()},m(l,f){~e&&o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?~e&&o[e].p(l,f):(n&&(It(),P(o[m],1,1,()=>{o[m]=null}),Pt()),~e?(n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t)):n=null)},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),~e&&o[e].d(l)}}}function sP(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let s=Fe(e,r),o,a,{$$slots:l={},$$scope:f}=e,{transition:m=void 0}=e,{transitionConfig:g=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:S=void 0}=e,{outTransition:M=void 0}=e,{outTransitionConfig:$=void 0}=e,{asChild:D=!1}=e,{el:F=void 0}=e;const{elements:{overlay:L},states:{open:U},getAttrs:ne}=gl();Jt(i,L,ve=>n(13,o=ve)),Jt(i,U,ve=>n(9,a=ve));const se=ne("overlay");function ee(ve){At.call(this,i,ve)}function fe(ve){At.call(this,i,ve)}function _e(ve){At.call(this,i,ve)}function re(ve){At.call(this,i,ve)}function de(ve){At.call(this,i,ve)}function he(ve){Nt[ve?"unshift":"push"](()=>{F=ve,n(0,F)})}function X(ve){Nt[ve?"unshift":"push"](()=>{F=ve,n(0,F)})}function j(ve){Nt[ve?"unshift":"push"](()=>{F=ve,n(0,F)})}function xe(ve){Nt[ve?"unshift":"push"](()=>{F=ve,n(0,F)})}function ze(ve){Nt[ve?"unshift":"push"](()=>{F=ve,n(0,F)})}return i.$$set=ve=>{e=Q(Q({},e),bt(ve)),n(12,s=Fe(e,r)),"transition"in ve&&n(1,m=ve.transition),"transitionConfig"in ve&&n(2,g=ve.transitionConfig),"inTransition"in ve&&n(3,w=ve.inTransition),"inTransitionConfig"in ve&&n(4,S=ve.inTransitionConfig),"outTransition"in ve&&n(5,M=ve.outTransition),"outTransitionConfig"in ve&&n(6,$=ve.outTransitionConfig),"asChild"in ve&&n(7,D=ve.asChild),"el"in ve&&n(0,F=ve.el),"$$scope"in ve&&n(14,f=ve.$$scope)},i.$$.update=()=>{i.$$.dirty&8192&&n(8,t=o),i.$$.dirty&256&&Object.assign(t,se)},[F,m,g,w,S,M,$,D,t,a,L,U,s,o,f,l,ee,fe,_e,re,de,he,X,j,xe,ze]}let oP=class extends Xe{constructor(e){super(),Je(this,e,sP,rP,Ze,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};const aP=i=>({builder:i&4}),W1=i=>({builder:i[2]}),lP=i=>({builder:i&4}),K1=i=>({builder:i[2]});function cP(i){let e,n,t,r;const s=i[8].default,o=tt(s,i,i[7],W1);let a=[i[2],{type:"button"},i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("button"),o&&o.c(),this.h()},l(f){e=ue(f,"BUTTON",{type:!0});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-click",i[4]),Ke(e,"m-keydown",i[4])],t=!0)},p(f,m){o&&o.p&&(!n||m&132)&&nt(o,s,f,f[7],n?rt(s,f[7],m,aP):it(f[7]),W1),ut(e,l=at(a,[m&4&&f[2],{type:"button"},m&32&&f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[9](null),t=!1,Wn(r)}}}function uP(i){let e;const n=i[8].default,t=tt(n,i,i[7],K1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&nt(t,n,r,r[7],e?rt(n,r[7],s,lP):it(r[7]),K1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function fP(i){let e,n,t,r;const s=[uP,cP],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function dP(i,e,n){let t;const r=["asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{el:m=void 0}=e;const{elements:{trigger:g},getAttrs:w}=gl();Jt(i,g,D=>n(6,o=D));const S=ds(),M=w("trigger");function $(D){Nt[D?"unshift":"push"](()=>{m=D,n(0,m)})}return i.$$set=D=>{e=Q(Q({},e),bt(D)),n(5,s=Fe(e,r)),"asChild"in D&&n(1,f=D.asChild),"el"in D&&n(0,m=D.el),"$$scope"in D&&n(7,l=D.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,M)},[m,f,t,g,S,s,o,l,a,$]}class hP extends Xe{constructor(e){super(),Je(this,e,dP,fP,Ze,{asChild:1,el:0})}}const mP=i=>({builder:i&4}),X1=i=>({builder:i[2]}),pP=i=>({builder:i&4}),J1=i=>({builder:i[2]});function _P(i){let e,n,t,r;const s=i[8].default,o=tt(s,i,i[7],X1);let a=[i[2],i[4]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[9](e),n=!0,t||(r=Cn(i[2].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m&132)&&nt(o,s,f,f[7],n?rt(s,f[7],m,mP):it(f[7]),X1),ut(e,l=at(a,[m&4&&f[2],m&16&&f[4]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[9](null),t=!1,r()}}}function gP(i){let e;const n=i[8].default,t=tt(n,i,i[7],J1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&nt(t,n,r,r[7],e?rt(n,r[7],s,pP):it(r[7]),J1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function vP(i){let e,n,t,r;const s=[gP,_P],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function bP(i,e,n){let t;const r=["asChild","id","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{id:m=void 0}=e,{el:g=void 0}=e;const{elements:{description:w},ids:S,getAttrs:M}=gl();Jt(i,w,F=>n(6,o=F));const $=M("description");function D(F){Nt[F?"unshift":"push"](()=>{g=F,n(0,g)})}return i.$$set=F=>{e=Q(Q({},e),bt(F)),n(4,s=Fe(e,r)),"asChild"in F&&n(1,f=F.asChild),"id"in F&&n(5,m=F.id),"el"in F&&n(0,g=F.el),"$$scope"in F&&n(7,l=F.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&m&&S.description.set(m),i.$$.dirty&64&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,$)},[g,f,t,w,s,m,o,l,a,D]}let yP=class extends Xe{constructor(e){super(),Je(this,e,bP,vP,Ze,{asChild:1,id:5,el:0})}};const wP=i=>({ids:i&1}),Y1=i=>({ids:i[0]});function xP(i){let e;const n=i[16].default,t=tt(n,i,i[15],Y1);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&32769)&&nt(t,n,r,r[15],e?rt(n,r[15],s,wP):it(r[15]),Y1)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function kP(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{closeOnOutsideClick:o=void 0}=e,{closeOnEscape:a=void 0}=e,{portal:l=void 0}=e,{open:f=void 0}=e,{onOpenChange:m=void 0}=e,{preventScroll:g=void 0}=e,{loop:w=void 0}=e,{dir:S=void 0}=e,{typeahead:M=void 0}=e,{closeFocus:$=void 0}=e,{disableFocusFirstItem:D=void 0}=e,{closeOnItemClick:F=void 0}=e,{onOutsideClick:L=void 0}=e;const{states:{open:U},updateOption:ne,ids:se}=v5({closeOnOutsideClick:o,closeOnEscape:a,portal:l,forceVisible:!0,defaultOpen:f,preventScroll:g,loop:w,dir:S,typeahead:M,closeFocus:$,disableFocusFirstItem:D,closeOnItemClick:F,onOutsideClick:L,onOpenChange:({next:fe})=>(f!==fe&&(m==null||m(fe),n(2,f=fe)),fe)}),ee=Bn([se.menu,se.trigger],([fe,_e])=>({menu:fe,trigger:_e}));return Jt(i,ee,fe=>n(0,t=fe)),i.$$set=fe=>{"closeOnOutsideClick"in fe&&n(3,o=fe.closeOnOutsideClick),"closeOnEscape"in fe&&n(4,a=fe.closeOnEscape),"portal"in fe&&n(5,l=fe.portal),"open"in fe&&n(2,f=fe.open),"onOpenChange"in fe&&n(6,m=fe.onOpenChange),"preventScroll"in fe&&n(7,g=fe.preventScroll),"loop"in fe&&n(8,w=fe.loop),"dir"in fe&&n(9,S=fe.dir),"typeahead"in fe&&n(10,M=fe.typeahead),"closeFocus"in fe&&n(11,$=fe.closeFocus),"disableFocusFirstItem"in fe&&n(12,D=fe.disableFocusFirstItem),"closeOnItemClick"in fe&&n(13,F=fe.closeOnItemClick),"onOutsideClick"in fe&&n(14,L=fe.onOutsideClick),"$$scope"in fe&&n(15,s=fe.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&f!==void 0&&U.set(f),i.$$.dirty&8&&ne("closeOnOutsideClick",o),i.$$.dirty&16&&ne("closeOnEscape",a),i.$$.dirty&32&&ne("portal",l),i.$$.dirty&128&&ne("preventScroll",g),i.$$.dirty&256&&ne("loop",w),i.$$.dirty&512&&ne("dir",S),i.$$.dirty&2048&&ne("closeFocus",$),i.$$.dirty&4096&&ne("disableFocusFirstItem",D),i.$$.dirty&1024&&ne("typeahead",M),i.$$.dirty&8192&&ne("closeOnItemClick",F),i.$$.dirty&16384&&ne("onOutsideClick",L)},[t,ee,f,o,a,l,m,g,w,S,M,$,D,F,L,s,r]}class C2 extends Xe{constructor(e){super(),Je(this,e,kP,xP,Ze,{closeOnOutsideClick:3,closeOnEscape:4,portal:5,open:2,onOpenChange:6,preventScroll:7,loop:8,dir:9,typeahead:10,closeFocus:11,disableFocusFirstItem:12,closeOnItemClick:13,onOutsideClick:14})}}const CP=i=>({builder:i[0]&256}),Q1=i=>({builder:i[8]}),TP=i=>({builder:i[0]&256}),e0=i=>({builder:i[8]}),SP=i=>({builder:i[0]&256}),t0=i=>({builder:i[8]}),EP=i=>({builder:i[0]&256}),n0=i=>({builder:i[8]}),IP=i=>({builder:i[0]&256}),i0=i=>({builder:i[8]}),PP=i=>({builder:i[0]&256}),r0=i=>({builder:i[8]});function $P(i){let e,n,t,r;const s=i[28].default,o=tt(s,i,i[27],Q1);let a=[i[8],i[13]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[33](e),n=!0,t||(r=[Cn(i[8].action(e)),Ke(e,"m-keydown",i[12])],t=!0)},p(f,m){o&&o.p&&(!n||m[0]&134217984)&&nt(o,s,f,f[27],n?rt(s,f[27],m,CP):it(f[27]),Q1),ut(e,l=at(a,[m[0]&256&&f[8],m[0]&8192&&f[13]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[33](null),t=!1,Wn(r)}}}function AP(i){let e,n,t,r,s;const o=i[28].default,a=tt(o,i,i[27],e0);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[32](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"m-keydown",i[12])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&134217984)&&nt(a,o,i,i[27],t?rt(o,i[27],g,TP):it(i[27]),e0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&8192&&i[13]]))},i(m){t||(E(a,m),n&&n.end(1),t=!0)},o(m){P(a,m),m&&(n=bs(e,i[5],i[6])),t=!1},d(m){m&&I(e),a&&a.d(m),i[32](null),m&&n&&n.end(),r=!1,Wn(s)}}}function MP(i){let e,n,t,r,s;const o=i[28].default,a=tt(o,i,i[27],t0);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[31](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"m-keydown",i[12])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&134217984)&&nt(a,o,i,i[27],t?rt(o,i[27],g,SP):it(i[27]),t0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&8192&&i[13]]))},i(m){t||(E(a,m),m&&(n||ar(()=>{n=ys(e,i[3],i[4]),n.start()})),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),i[31](null),r=!1,Wn(s)}}}function DP(i){let e,n,t,r,s,o;const a=i[28].default,l=tt(a,i,i[27],n0);let f=[i[8],i[13]],m={};for(let g=0;g<f.length;g+=1)m=Q(m,f[g]);return{c(){e=ce("div"),l&&l.c(),this.h()},l(g){e=ue(g,"DIV",{});var w=we(e);l&&l.l(w),w.forEach(I),this.h()},h(){ut(e,m)},m(g,w){N(g,e,w),l&&l.m(e,null),i[30](e),r=!0,s||(o=[Cn(i[8].action(e)),Ke(e,"m-keydown",i[12])],s=!0)},p(g,w){i=g,l&&l.p&&(!r||w[0]&134217984)&&nt(l,a,i,i[27],r?rt(a,i[27],w,EP):it(i[27]),n0),ut(e,m=at(f,[w[0]&256&&i[8],w[0]&8192&&i[13]]))},i(g){r||(E(l,g),g&&ar(()=>{r&&(t&&t.end(1),n=ys(e,i[3],i[4]),n.start())}),r=!0)},o(g){P(l,g),n&&n.invalidate(),g&&(t=bs(e,i[5],i[6])),r=!1},d(g){g&&I(e),l&&l.d(g),i[30](null),g&&t&&t.end(),s=!1,Wn(o)}}}function OP(i){let e,n,t,r,s;const o=i[28].default,a=tt(o,i,i[27],i0);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[29](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"m-keydown",i[12])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&134217984)&&nt(a,o,i,i[27],t?rt(o,i[27],g,IP):it(i[27]),i0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&8192&&i[13]]))},i(m){t||(E(a,m),m&&ar(()=>{t&&(n||(n=Qr(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(m){P(a,m),m&&(n||(n=Qr(e,i[1],i[2],!1)),n.run(0)),t=!1},d(m){m&&I(e),a&&a.d(m),i[29](null),m&&n&&n.end(),r=!1,Wn(s)}}}function zP(i){let e;const n=i[28].default,t=tt(n,i,i[27],r0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&134217984)&&nt(t,n,r,r[27],e?rt(n,r[27],s,PP):it(r[27]),r0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function RP(i){let e,n,t,r;const s=[zP,OP,DP,MP,AP,$P],o=[];function a(l,f){return l[7]&&l[9]?0:l[1]&&l[9]?1:l[3]&&l[5]&&l[9]?2:l[3]&&l[9]?3:l[5]&&l[9]?4:l[9]?5:-1}return~(e=a(i))&&(n=o[e]=s[e](i)),{c(){n&&n.c(),t=Le()},l(l){n&&n.l(l),t=Le()},m(l,f){~e&&o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?~e&&o[e].p(l,f):(n&&(It(),P(o[m],1,1,()=>{o[m]=null}),Pt()),~e?(n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t)):n=null)},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),~e&&o[e].d(l)}}}function LP(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let s=Fe(e,r),o,a,{$$slots:l={},$$scope:f}=e,{transition:m=void 0}=e,{transitionConfig:g=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:S=void 0}=e,{outTransition:M=void 0}=e,{outTransitionConfig:$=void 0}=e,{asChild:D=!1}=e,{id:F=void 0}=e,{side:L="bottom"}=e,{align:U="center"}=e,{sideOffset:ne=0}=e,{alignOffset:se=0}=e,{collisionPadding:ee=8}=e,{avoidCollisions:fe=!0}=e,{collisionBoundary:_e=void 0}=e,{sameWidth:re=!1}=e,{fitViewport:de=!1}=e,{strategy:he="absolute"}=e,{overlap:X=!1}=e,{el:j=void 0}=e;const{elements:{menu:xe},states:{open:ze},ids:ve,getAttrs:We}=Zo();Jt(i,xe,Be=>n(26,a=Be)),Jt(i,ze,Be=>n(9,o=Be));const pt=ds(),Mt=We("content");function St(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}function Dt(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}function zt(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}function _t(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}function ft(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}return i.$$set=Be=>{e=Q(Q({},e),bt(Be)),n(13,s=Fe(e,r)),"transition"in Be&&n(1,m=Be.transition),"transitionConfig"in Be&&n(2,g=Be.transitionConfig),"inTransition"in Be&&n(3,w=Be.inTransition),"inTransitionConfig"in Be&&n(4,S=Be.inTransitionConfig),"outTransition"in Be&&n(5,M=Be.outTransition),"outTransitionConfig"in Be&&n(6,$=Be.outTransitionConfig),"asChild"in Be&&n(7,D=Be.asChild),"id"in Be&&n(14,F=Be.id),"side"in Be&&n(15,L=Be.side),"align"in Be&&n(16,U=Be.align),"sideOffset"in Be&&n(17,ne=Be.sideOffset),"alignOffset"in Be&&n(18,se=Be.alignOffset),"collisionPadding"in Be&&n(19,ee=Be.collisionPadding),"avoidCollisions"in Be&&n(20,fe=Be.avoidCollisions),"collisionBoundary"in Be&&n(21,_e=Be.collisionBoundary),"sameWidth"in Be&&n(22,re=Be.sameWidth),"fitViewport"in Be&&n(23,de=Be.fitViewport),"strategy"in Be&&n(24,he=Be.strategy),"overlap"in Be&&n(25,X=Be.overlap),"el"in Be&&n(0,j=Be.el),"$$scope"in Be&&n(27,f=Be.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16384&&F&&ve.menu.set(F),i.$$.dirty[0]&67108864&&n(8,t=a),i.$$.dirty[0]&256&&Object.assign(t,Mt),i.$$.dirty[0]&67076608&&o&&k5({side:L,align:U,sideOffset:ne,alignOffset:se,collisionPadding:ee,avoidCollisions:fe,collisionBoundary:_e,sameWidth:re,fitViewport:de,strategy:he,overlap:X})},[j,m,g,w,S,M,$,D,t,o,xe,ze,pt,s,F,L,U,ne,se,ee,fe,_e,re,de,he,X,a,f,l,St,Dt,zt,_t,ft]}class T2 extends Xe{constructor(e){super(),Je(this,e,LP,RP,Ze,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const FP=i=>({builder:i&4}),s0=i=>({builder:i[2]}),BP=i=>({builder:i&4}),o0=i=>({builder:i[2]});function NP(i){let e,n,t,r;const s=i[9].default,o=tt(s,i,i[8],s0);let a=[i[2],{type:"button"},i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("button"),o&&o.c(),this.h()},l(f){e=ue(f,"BUTTON",{type:!0});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),e.autofocus&&e.focus(),i[10](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-keydown",i[4]),Ke(e,"m-pointerdown",i[4])],t=!0)},p(f,m){o&&o.p&&(!n||m&260)&&nt(o,s,f,f[8],n?rt(s,f[8],m,FP):it(f[8]),s0),ut(e,l=at(a,[m&4&&f[2],{type:"button"},m&32&&f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[10](null),t=!1,Wn(r)}}}function VP(i){let e;const n=i[9].default,t=tt(n,i,i[8],o0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&nt(t,n,r,r[8],e?rt(n,r[8],s,BP):it(r[8]),o0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function jP(i){let e,n,t,r;const s=[VP,NP],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function UP(i,e,n){let t;const r=["asChild","id","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{id:m=void 0}=e,{el:g=void 0}=e;const{elements:{trigger:w},ids:S,getAttrs:M}=Zo();Jt(i,w,L=>n(7,o=L));const $=ds(),D=M("trigger");function F(L){Nt[L?"unshift":"push"](()=>{g=L,n(0,g)})}return i.$$set=L=>{e=Q(Q({},e),bt(L)),n(5,s=Fe(e,r)),"asChild"in L&&n(1,f=L.asChild),"id"in L&&n(6,m=L.id),"el"in L&&n(0,g=L.el),"$$scope"in L&&n(8,l=L.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&m&&S.trigger.set(m),i.$$.dirty&128&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,D)},[g,f,t,w,$,s,m,o,l,a,F]}class S2 extends Xe{constructor(e){super(),Je(this,e,UP,jP,Ze,{asChild:1,id:6,el:0})}}function qP(){const i="label",n=wo(i,["root"]);return{NAME:i,getAttrs:n}}const HP=i=>({builder:i&4}),a0=i=>({builder:i[2]}),GP=i=>({builder:i&4}),l0=i=>({builder:i[2]});function ZP(i){let e,n,t,r;const s=i[8].default,o=tt(s,i,i[7],a0);let a=[i[2],i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("label"),o&&o.c(),this.h()},l(f){e=ue(f,"LABEL",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[9](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-mousedown",i[4])],t=!0)},p(f,m){o&&o.p&&(!n||m&132)&&nt(o,s,f,f[7],n?rt(s,f[7],m,HP):it(f[7]),a0),ut(e,l=at(a,[m&4&&f[2],m&32&&f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[9](null),t=!1,Wn(r)}}}function WP(i){let e;const n=i[8].default,t=tt(n,i,i[7],l0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&nt(t,n,r,r[7],e?rt(n,r[7],s,GP):it(r[7]),l0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function KP(i){let e,n,t,r;const s=[WP,ZP],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function XP(i,e,n){let t;const r=["asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{el:m=void 0}=e;const{elements:{root:g}}=m2();Jt(i,g,D=>n(6,o=D));const w=ds(),{getAttrs:S}=qP(),M=S("root");function $(D){Nt[D?"unshift":"push"](()=>{m=D,n(0,m)})}return i.$$set=D=>{e=Q(Q({},e),bt(D)),n(5,s=Fe(e,r)),"asChild"in D&&n(1,f=D.asChild),"el"in D&&n(0,m=D.el),"$$scope"in D&&n(7,l=D.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,M)},[m,f,t,g,w,s,o,l,a,$]}let JP=class extends Xe{constructor(e){super(),Je(this,e,XP,KP,Ze,{asChild:1,el:0})}};function E2(){return{NAME:"link-preview",PARTS:["arrow","content","trigger"]}}function YP(i){const{NAME:e,PARTS:n}=E2(),t=wo(e,n),r={...L4({...xo(i),forceVisible:!0}),getAttrs:t};return Ar(e,r),{...r,updateOption:ko(r.options)}}function kp(){const{NAME:i}=E2();return Tr(i)}function QP(i){const n={...{side:"bottom",align:"center"},...i},{options:{positioning:t}}=kp();lh(t)(n)}const e$=i=>({ids:i&1}),c0=i=>({ids:i[0]});function t$(i){let e;const n=i[11].default,t=tt(n,i,i[10],c0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&1025)&&nt(t,n,r,r[10],e?rt(n,r[10],s,e$):it(r[10]),c0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function n$(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{open:o=void 0}=e,{onOpenChange:a=void 0}=e,{openDelay:l=700}=e,{closeDelay:f=300}=e,{closeOnOutsideClick:m=void 0}=e,{closeOnEscape:g=void 0}=e,{portal:w=void 0}=e,{onOutsideClick:S=void 0}=e;const{states:{open:M},updateOption:$,ids:D}=YP({defaultOpen:o,openDelay:l,closeDelay:f,closeOnOutsideClick:m,closeOnEscape:g,portal:w,onOutsideClick:S,onOpenChange:({next:L})=>(o!==L&&(a==null||a(L),n(2,o=L)),L)}),F=Bn([D.content,D.trigger],([L,U])=>({content:L,trigger:U}));return Jt(i,F,L=>n(0,t=L)),i.$$set=L=>{"open"in L&&n(2,o=L.open),"onOpenChange"in L&&n(3,a=L.onOpenChange),"openDelay"in L&&n(4,l=L.openDelay),"closeDelay"in L&&n(5,f=L.closeDelay),"closeOnOutsideClick"in L&&n(6,m=L.closeOnOutsideClick),"closeOnEscape"in L&&n(7,g=L.closeOnEscape),"portal"in L&&n(8,w=L.portal),"onOutsideClick"in L&&n(9,S=L.onOutsideClick),"$$scope"in L&&n(10,s=L.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&o!==void 0&&M.set(o),i.$$.dirty&16&&$("openDelay",l),i.$$.dirty&32&&$("closeDelay",f),i.$$.dirty&64&&$("closeOnOutsideClick",m),i.$$.dirty&128&&$("closeOnEscape",g),i.$$.dirty&256&&$("portal",w),i.$$.dirty&512&&$("onOutsideClick",S)},[t,F,o,a,l,f,m,g,w,S,s,r]}class i$ extends Xe{constructor(e){super(),Je(this,e,n$,t$,Ze,{open:2,onOpenChange:3,openDelay:4,closeDelay:5,closeOnOutsideClick:6,closeOnEscape:7,portal:8,onOutsideClick:9})}}const r$=i=>({builder:i[0]&256}),u0=i=>({builder:i[8]}),s$=i=>({builder:i[0]&256}),f0=i=>({builder:i[8]}),o$=i=>({builder:i[0]&256}),d0=i=>({builder:i[8]}),a$=i=>({builder:i[0]&256}),h0=i=>({builder:i[8]}),l$=i=>({builder:i[0]&256}),m0=i=>({builder:i[8]}),c$=i=>({builder:i[0]&256}),p0=i=>({builder:i[8]});function u$(i){let e,n,t,r;const s=i[28].default,o=tt(s,i,i[27],u0);let a=[i[8],i[13]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[33](e),n=!0,t||(r=[Cn(i[8].action(e)),Ke(e,"m-focusout",i[12]),Ke(e,"m-pointerdown",i[12]),Ke(e,"m-pointerenter",i[12]),Ke(e,"m-pointerleave",i[12])],t=!0)},p(f,m){o&&o.p&&(!n||m[0]&134217984)&&nt(o,s,f,f[27],n?rt(s,f[27],m,r$):it(f[27]),u0),ut(e,l=at(a,[m[0]&256&&f[8],m[0]&8192&&f[13]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[33](null),t=!1,Wn(r)}}}function f$(i){let e,n,t,r,s;const o=i[28].default,a=tt(o,i,i[27],f0);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[32](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"m-focusout",i[12]),Ke(e,"m-pointerdown",i[12]),Ke(e,"m-pointerenter",i[12]),Ke(e,"m-pointerleave",i[12])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&134217984)&&nt(a,o,i,i[27],t?rt(o,i[27],g,s$):it(i[27]),f0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&8192&&i[13]]))},i(m){t||(E(a,m),n&&n.end(1),t=!0)},o(m){P(a,m),m&&(n=bs(e,i[5],i[6])),t=!1},d(m){m&&I(e),a&&a.d(m),i[32](null),m&&n&&n.end(),r=!1,Wn(s)}}}function d$(i){let e,n,t,r,s;const o=i[28].default,a=tt(o,i,i[27],d0);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[31](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"m-focusout",i[12]),Ke(e,"m-pointerdown",i[12]),Ke(e,"m-pointerenter",i[12]),Ke(e,"m-pointerleave",i[12])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&134217984)&&nt(a,o,i,i[27],t?rt(o,i[27],g,o$):it(i[27]),d0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&8192&&i[13]]))},i(m){t||(E(a,m),m&&(n||ar(()=>{n=ys(e,i[3],i[4]),n.start()})),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),i[31](null),r=!1,Wn(s)}}}function h$(i){let e,n,t,r,s,o;const a=i[28].default,l=tt(a,i,i[27],h0);let f=[i[8],i[13]],m={};for(let g=0;g<f.length;g+=1)m=Q(m,f[g]);return{c(){e=ce("div"),l&&l.c(),this.h()},l(g){e=ue(g,"DIV",{});var w=we(e);l&&l.l(w),w.forEach(I),this.h()},h(){ut(e,m)},m(g,w){N(g,e,w),l&&l.m(e,null),i[30](e),r=!0,s||(o=[Cn(i[8].action(e)),Ke(e,"m-focusout",i[12]),Ke(e,"m-pointerdown",i[12]),Ke(e,"m-pointerenter",i[12]),Ke(e,"m-pointerleave",i[12])],s=!0)},p(g,w){i=g,l&&l.p&&(!r||w[0]&134217984)&&nt(l,a,i,i[27],r?rt(a,i[27],w,a$):it(i[27]),h0),ut(e,m=at(f,[w[0]&256&&i[8],w[0]&8192&&i[13]]))},i(g){r||(E(l,g),g&&ar(()=>{r&&(t&&t.end(1),n=ys(e,i[3],i[4]),n.start())}),r=!0)},o(g){P(l,g),n&&n.invalidate(),g&&(t=bs(e,i[5],i[6])),r=!1},d(g){g&&I(e),l&&l.d(g),i[30](null),g&&t&&t.end(),s=!1,Wn(o)}}}function m$(i){let e,n,t,r,s;const o=i[28].default,a=tt(o,i,i[27],m0);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[29](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"m-focusout",i[12]),Ke(e,"m-pointerdown",i[12]),Ke(e,"m-pointerenter",i[12]),Ke(e,"m-pointerleave",i[12])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&134217984)&&nt(a,o,i,i[27],t?rt(o,i[27],g,l$):it(i[27]),m0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&8192&&i[13]]))},i(m){t||(E(a,m),m&&ar(()=>{t&&(n||(n=Qr(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(m){P(a,m),m&&(n||(n=Qr(e,i[1],i[2],!1)),n.run(0)),t=!1},d(m){m&&I(e),a&&a.d(m),i[29](null),m&&n&&n.end(),r=!1,Wn(s)}}}function p$(i){let e;const n=i[28].default,t=tt(n,i,i[27],p0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&134217984)&&nt(t,n,r,r[27],e?rt(n,r[27],s,c$):it(r[27]),p0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function _$(i){let e,n,t,r;const s=[p$,m$,h$,d$,f$,u$],o=[];function a(l,f){return l[7]&&l[9]?0:l[1]&&l[9]?1:l[3]&&l[5]&&l[9]?2:l[3]&&l[9]?3:l[5]&&l[9]?4:l[9]?5:-1}return~(e=a(i))&&(n=o[e]=s[e](i)),{c(){n&&n.c(),t=Le()},l(l){n&&n.l(l),t=Le()},m(l,f){~e&&o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?~e&&o[e].p(l,f):(n&&(It(),P(o[m],1,1,()=>{o[m]=null}),Pt()),~e?(n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t)):n=null)},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),~e&&o[e].d(l)}}}function g$(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let s=Fe(e,r),o,a,{$$slots:l={},$$scope:f}=e,{transition:m=void 0}=e,{transitionConfig:g=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:S=void 0}=e,{outTransition:M=void 0}=e,{outTransitionConfig:$=void 0}=e,{asChild:D=!1}=e,{id:F=void 0}=e,{side:L="bottom"}=e,{align:U="center"}=e,{sideOffset:ne=0}=e,{alignOffset:se=0}=e,{collisionPadding:ee=8}=e,{avoidCollisions:fe=!0}=e,{collisionBoundary:_e=void 0}=e,{sameWidth:re=!1}=e,{fitViewport:de=!1}=e,{strategy:he="absolute"}=e,{overlap:X=!1}=e,{el:j=void 0}=e;const{elements:{content:xe},states:{open:ze},ids:ve,getAttrs:We}=kp();Jt(i,xe,Be=>n(26,a=Be)),Jt(i,ze,Be=>n(9,o=Be));const pt=We("content"),Mt=ds();function St(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}function Dt(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}function zt(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}function _t(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}function ft(Be){Nt[Be?"unshift":"push"](()=>{j=Be,n(0,j)})}return i.$$set=Be=>{e=Q(Q({},e),bt(Be)),n(13,s=Fe(e,r)),"transition"in Be&&n(1,m=Be.transition),"transitionConfig"in Be&&n(2,g=Be.transitionConfig),"inTransition"in Be&&n(3,w=Be.inTransition),"inTransitionConfig"in Be&&n(4,S=Be.inTransitionConfig),"outTransition"in Be&&n(5,M=Be.outTransition),"outTransitionConfig"in Be&&n(6,$=Be.outTransitionConfig),"asChild"in Be&&n(7,D=Be.asChild),"id"in Be&&n(14,F=Be.id),"side"in Be&&n(15,L=Be.side),"align"in Be&&n(16,U=Be.align),"sideOffset"in Be&&n(17,ne=Be.sideOffset),"alignOffset"in Be&&n(18,se=Be.alignOffset),"collisionPadding"in Be&&n(19,ee=Be.collisionPadding),"avoidCollisions"in Be&&n(20,fe=Be.avoidCollisions),"collisionBoundary"in Be&&n(21,_e=Be.collisionBoundary),"sameWidth"in Be&&n(22,re=Be.sameWidth),"fitViewport"in Be&&n(23,de=Be.fitViewport),"strategy"in Be&&n(24,he=Be.strategy),"overlap"in Be&&n(25,X=Be.overlap),"el"in Be&&n(0,j=Be.el),"$$scope"in Be&&n(27,f=Be.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16384&&F&&ve.content.set(F),i.$$.dirty[0]&67108864&&n(8,t=a),i.$$.dirty[0]&256&&Object.assign(t,pt),i.$$.dirty[0]&67076608&&o&&QP({side:L,align:U,sideOffset:ne,alignOffset:se,collisionPadding:ee,avoidCollisions:fe,collisionBoundary:_e,sameWidth:re,fitViewport:de,strategy:he,overlap:X})},[j,m,g,w,S,M,$,D,t,o,xe,ze,Mt,s,F,L,U,ne,se,ee,fe,_e,re,de,he,X,a,f,l,St,Dt,zt,_t,ft]}class v$ extends Xe{constructor(e){super(),Je(this,e,g$,_$,Ze,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const b$=i=>({builder:i&4}),_0=i=>({builder:i[2]}),y$=i=>({builder:i&4}),g0=i=>({builder:i[2]});function w$(i){let e,n=k$(i);return{c(){n&&n.c()},l(t){n&&n.l(t)},m(t,r){n&&n.m(t,r),e=!0},p(t,r){n.p(t,r)},i(t){e||(E(n,t),e=!0)},o(t){P(n,t),e=!1},d(t){n&&n.d(t)}}}function x$(i){let e;const n=i[10].default,t=tt(n,i,i[9],g0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&516)&&nt(t,n,r,r[9],e?rt(n,r[9],s,y$):it(r[9]),g0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function k$(i){let e,n,t,r;const s=i[10].default,o=tt(s,i,i[9],_0);let a=[i[2],i[6],i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("a"),o&&o.c(),this.h()},l(f){e=ue(f,"A",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){vo("a")(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[11](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-blur",i[4]),Ke(e,"m-focus",i[4]),Ke(e,"m-pointerenter",i[4]),Ke(e,"m-pointerleave",i[4])],t=!0)},p(f,m){o&&o.p&&(!n||m&516)&&nt(o,s,f,f[9],n?rt(s,f[9],m,b$):it(f[9]),_0),vo("a")(e,l=at(a,[m&4&&f[2],m&64&&f[6],f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[11](null),t=!1,Wn(r)}}}function C$(i){let e,n,t,r;const s=[x$,w$],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function T$(i,e,n){let t;const r=["asChild","id","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{id:m=void 0}=e,{el:g=void 0}=e;const{elements:{trigger:w},ids:S,getAttrs:M}=kp();Jt(i,w,L=>n(8,o=L));const $=ds(),D=M("trigger");function F(L){Nt[L?"unshift":"push"](()=>{g=L,n(0,g)})}return i.$$set=L=>{e=Q(Q({},e),bt(L)),n(6,s=Fe(e,r)),"asChild"in L&&n(1,f=L.asChild),"id"in L&&n(7,m=L.id),"el"in L&&n(0,g=L.el),"$$scope"in L&&n(9,l=L.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&m&&S.trigger.set(m),i.$$.dirty&256&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,D)},[g,f,t,w,$,D,s,m,o,l,a,F]}class S$ extends Xe{constructor(e){super(),Je(this,e,T$,C$,Ze,{asChild:1,id:7,el:0})}}const E$=i=>({ids:i&1}),v0=i=>({ids:i[0]});function I$(i){let e;const n=i[13].default,t=tt(n,i,i[12],v0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&4097)&&nt(t,n,r,r[12],e?rt(n,r[12],s,E$):it(r[12]),v0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function P$(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{disableFocusTrap:o=void 0}=e,{closeOnEscape:a=void 0}=e,{closeOnOutsideClick:l=void 0}=e,{preventScroll:f=void 0}=e,{portal:m=void 0}=e,{open:g=void 0}=e,{onOpenChange:w=void 0}=e,{openFocus:S=void 0}=e,{closeFocus:M=void 0}=e,{onOutsideClick:$=void 0}=e;const{updateOption:D,states:{open:F},ids:L}=lI({disableFocusTrap:o,closeOnEscape:a,closeOnOutsideClick:l,preventScroll:f,portal:m,defaultOpen:g,openFocus:S,closeFocus:M,onOutsideClick:$,onOpenChange:({next:ne})=>(g!==ne&&(w==null||w(ne),n(2,g=ne)),ne),positioning:{gutter:0,offset:{mainAxis:1}}}),U=Bn([L.content,L.trigger],([ne,se])=>({content:ne,trigger:se}));return Jt(i,U,ne=>n(0,t=ne)),i.$$set=ne=>{"disableFocusTrap"in ne&&n(3,o=ne.disableFocusTrap),"closeOnEscape"in ne&&n(4,a=ne.closeOnEscape),"closeOnOutsideClick"in ne&&n(5,l=ne.closeOnOutsideClick),"preventScroll"in ne&&n(6,f=ne.preventScroll),"portal"in ne&&n(7,m=ne.portal),"open"in ne&&n(2,g=ne.open),"onOpenChange"in ne&&n(8,w=ne.onOpenChange),"openFocus"in ne&&n(9,S=ne.openFocus),"closeFocus"in ne&&n(10,M=ne.closeFocus),"onOutsideClick"in ne&&n(11,$=ne.onOutsideClick),"$$scope"in ne&&n(12,s=ne.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&g!==void 0&&F.set(g),i.$$.dirty&8&&D("disableFocusTrap",o),i.$$.dirty&16&&D("closeOnEscape",a),i.$$.dirty&32&&D("closeOnOutsideClick",l),i.$$.dirty&64&&D("preventScroll",f),i.$$.dirty&128&&D("portal",m),i.$$.dirty&512&&D("openFocus",S),i.$$.dirty&1024&&D("closeFocus",M),i.$$.dirty&2048&&D("onOutsideClick",$)},[t,U,g,o,a,l,f,m,w,S,M,$,s,r]}class I2 extends Xe{constructor(e){super(),Je(this,e,P$,I$,Ze,{disableFocusTrap:3,closeOnEscape:4,closeOnOutsideClick:5,preventScroll:6,portal:7,open:2,onOpenChange:8,openFocus:9,closeFocus:10,onOutsideClick:11})}}const $$=i=>({builder:i[0]&256}),b0=i=>({builder:i[8]}),A$=i=>({builder:i[0]&256}),y0=i=>({builder:i[8]}),M$=i=>({builder:i[0]&256}),w0=i=>({builder:i[8]}),D$=i=>({builder:i[0]&256}),x0=i=>({builder:i[8]}),O$=i=>({builder:i[0]&256}),k0=i=>({builder:i[8]}),z$=i=>({builder:i[0]&256}),C0=i=>({builder:i[8]});function R$(i){let e,n,t,r;const s=i[27].default,o=tt(s,i,i[26],b0);let a=[i[8],i[12]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[32](e),n=!0,t||(r=Cn(i[8].action(e)),t=!0)},p(f,m){o&&o.p&&(!n||m[0]&67109120)&&nt(o,s,f,f[26],n?rt(s,f[26],m,$$):it(f[26]),b0),ut(e,l=at(a,[m[0]&256&&f[8],m[0]&4096&&f[12]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[32](null),t=!1,r()}}}function L$(i){let e,n,t,r,s;const o=i[27].default,a=tt(o,i,i[26],y0);let l=[i[8],i[12]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[31](e),t=!0,r||(s=Cn(i[8].action(e)),r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&67109120)&&nt(a,o,i,i[26],t?rt(o,i[26],g,A$):it(i[26]),y0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&4096&&i[12]]))},i(m){t||(E(a,m),n&&n.end(1),t=!0)},o(m){P(a,m),m&&(n=bs(e,i[5],i[6])),t=!1},d(m){m&&I(e),a&&a.d(m),i[31](null),m&&n&&n.end(),r=!1,s()}}}function F$(i){let e,n,t,r,s;const o=i[27].default,a=tt(o,i,i[26],w0);let l=[i[8],i[12]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[30](e),t=!0,r||(s=Cn(i[8].action(e)),r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&67109120)&&nt(a,o,i,i[26],t?rt(o,i[26],g,M$):it(i[26]),w0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&4096&&i[12]]))},i(m){t||(E(a,m),m&&(n||ar(()=>{n=ys(e,i[3],i[4]),n.start()})),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),i[30](null),r=!1,s()}}}function B$(i){let e,n,t,r,s,o;const a=i[27].default,l=tt(a,i,i[26],x0);let f=[i[8],i[12]],m={};for(let g=0;g<f.length;g+=1)m=Q(m,f[g]);return{c(){e=ce("div"),l&&l.c(),this.h()},l(g){e=ue(g,"DIV",{});var w=we(e);l&&l.l(w),w.forEach(I),this.h()},h(){ut(e,m)},m(g,w){N(g,e,w),l&&l.m(e,null),i[29](e),r=!0,s||(o=Cn(i[8].action(e)),s=!0)},p(g,w){i=g,l&&l.p&&(!r||w[0]&67109120)&&nt(l,a,i,i[26],r?rt(a,i[26],w,D$):it(i[26]),x0),ut(e,m=at(f,[w[0]&256&&i[8],w[0]&4096&&i[12]]))},i(g){r||(E(l,g),g&&ar(()=>{r&&(t&&t.end(1),n=ys(e,i[3],i[4]),n.start())}),r=!0)},o(g){P(l,g),n&&n.invalidate(),g&&(t=bs(e,i[5],i[6])),r=!1},d(g){g&&I(e),l&&l.d(g),i[29](null),g&&t&&t.end(),s=!1,o()}}}function N$(i){let e,n,t,r,s;const o=i[27].default,a=tt(o,i,i[26],k0);let l=[i[8],i[12]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[28](e),t=!0,r||(s=Cn(i[8].action(e)),r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&67109120)&&nt(a,o,i,i[26],t?rt(o,i[26],g,O$):it(i[26]),k0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&4096&&i[12]]))},i(m){t||(E(a,m),m&&ar(()=>{t&&(n||(n=Qr(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(m){P(a,m),m&&(n||(n=Qr(e,i[1],i[2],!1)),n.run(0)),t=!1},d(m){m&&I(e),a&&a.d(m),i[28](null),m&&n&&n.end(),r=!1,s()}}}function V$(i){let e;const n=i[27].default,t=tt(n,i,i[26],C0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&67109120)&&nt(t,n,r,r[26],e?rt(n,r[26],s,z$):it(r[26]),C0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function j$(i){let e,n,t,r;const s=[V$,N$,B$,F$,L$,R$],o=[];function a(l,f){return l[7]&&l[9]?0:l[1]&&l[9]?1:l[3]&&l[5]&&l[9]?2:l[3]&&l[9]?3:l[5]&&l[9]?4:l[9]?5:-1}return~(e=a(i))&&(n=o[e]=s[e](i)),{c(){n&&n.c(),t=Le()},l(l){n&&n.l(l),t=Le()},m(l,f){~e&&o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?~e&&o[e].p(l,f):(n&&(It(),P(o[m],1,1,()=>{o[m]=null}),Pt()),~e?(n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t)):n=null)},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),~e&&o[e].d(l)}}}function U$(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let s=Fe(e,r),o,a,{$$slots:l={},$$scope:f}=e,{transition:m=void 0}=e,{transitionConfig:g=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:S=void 0}=e,{outTransition:M=void 0}=e,{outTransitionConfig:$=void 0}=e,{asChild:D=!1}=e,{id:F=void 0}=e,{side:L="bottom"}=e,{align:U="center"}=e,{sideOffset:ne=0}=e,{alignOffset:se=0}=e,{collisionPadding:ee=8}=e,{avoidCollisions:fe=!0}=e,{collisionBoundary:_e=void 0}=e,{sameWidth:re=!1}=e,{fitViewport:de=!1}=e,{strategy:he="absolute"}=e,{overlap:X=!1}=e,{el:j=void 0}=e;const{elements:{content:xe},states:{open:ze},ids:ve,getAttrs:We}=xp();Jt(i,xe,ft=>n(25,a=ft)),Jt(i,ze,ft=>n(9,o=ft));const pt=We("content");function Mt(ft){Nt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}function St(ft){Nt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}function Dt(ft){Nt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}function zt(ft){Nt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}function _t(ft){Nt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}return i.$$set=ft=>{e=Q(Q({},e),bt(ft)),n(12,s=Fe(e,r)),"transition"in ft&&n(1,m=ft.transition),"transitionConfig"in ft&&n(2,g=ft.transitionConfig),"inTransition"in ft&&n(3,w=ft.inTransition),"inTransitionConfig"in ft&&n(4,S=ft.inTransitionConfig),"outTransition"in ft&&n(5,M=ft.outTransition),"outTransitionConfig"in ft&&n(6,$=ft.outTransitionConfig),"asChild"in ft&&n(7,D=ft.asChild),"id"in ft&&n(13,F=ft.id),"side"in ft&&n(14,L=ft.side),"align"in ft&&n(15,U=ft.align),"sideOffset"in ft&&n(16,ne=ft.sideOffset),"alignOffset"in ft&&n(17,se=ft.alignOffset),"collisionPadding"in ft&&n(18,ee=ft.collisionPadding),"avoidCollisions"in ft&&n(19,fe=ft.avoidCollisions),"collisionBoundary"in ft&&n(20,_e=ft.collisionBoundary),"sameWidth"in ft&&n(21,re=ft.sameWidth),"fitViewport"in ft&&n(22,de=ft.fitViewport),"strategy"in ft&&n(23,he=ft.strategy),"overlap"in ft&&n(24,X=ft.overlap),"el"in ft&&n(0,j=ft.el),"$$scope"in ft&&n(26,f=ft.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8192&&F&&ve.content.set(F),i.$$.dirty[0]&33554432&&n(8,t=a),i.$$.dirty[0]&256&&Object.assign(t,pt),i.$$.dirty[0]&33538560&&o&&cI({side:L,align:U,sideOffset:ne,alignOffset:se,collisionPadding:ee,avoidCollisions:fe,collisionBoundary:_e,sameWidth:re,fitViewport:de,strategy:he,overlap:X})},[j,m,g,w,S,M,$,D,t,o,xe,ze,s,F,L,U,ne,se,ee,fe,_e,re,de,he,X,a,f,l,Mt,St,Dt,zt,_t]}let P2=class extends Xe{constructor(e){super(),Je(this,e,U$,j$,Ze,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:13,side:14,align:15,sideOffset:16,alignOffset:17,collisionPadding:18,avoidCollisions:19,collisionBoundary:20,sameWidth:21,fitViewport:22,strategy:23,overlap:24,el:0},null,[-1,-1])}};const q$=i=>({builder:i&4}),T0=i=>({builder:i[2]}),H$=i=>({builder:i&4}),S0=i=>({builder:i[2]});function G$(i){let e,n,t,r;const s=i[12].default,o=tt(s,i,i[11],T0);let a=[i[2],{type:"button"},i[6]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("button"),o&&o.c(),this.h()},l(f){e=ue(f,"BUTTON",{type:!0});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),e.autofocus&&e.focus(),i[13](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-click",i[5]),Ke(e,"m-keydown",i[5])],t=!0)},p(f,m){o&&o.p&&(!n||m&2052)&&nt(o,s,f,f[11],n?rt(s,f[11],m,q$):it(f[11]),T0),ut(e,l=at(a,[m&4&&f[2],{type:"button"},m&64&&f[6]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[13](null),t=!1,Wn(r)}}}function Z$(i){let e;const n=i[12].default,t=tt(n,i,i[11],S0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&2052)&&nt(t,n,r,r[11],e?rt(n,r[11],s,H$):it(r[11]),S0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function W$(i){let e,n,t,r;const s=[Z$,G$],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function K$(i,e,n){let t,r;const s=["asChild","id","el"];let o=Fe(e,s),a,l,{$$slots:f={},$$scope:m}=e,{asChild:g=!1}=e,{id:w=void 0}=e,{el:S=void 0}=e;const{elements:{trigger:M},states:{open:$},ids:D,getAttrs:F}=xp();Jt(i,M,se=>n(9,a=se)),Jt(i,$,se=>n(10,l=se));const L=ds(),U=F("trigger");function ne(se){Nt[se?"unshift":"push"](()=>{S=se,n(0,S)})}return i.$$set=se=>{e=Q(Q({},e),bt(se)),n(6,o=Fe(e,s)),"asChild"in se&&n(1,g=se.asChild),"id"in se&&n(7,w=se.id),"el"in se&&n(0,S=se.el),"$$scope"in se&&n(11,m=se.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&w&&D.trigger.set(w),i.$$.dirty&1024&&n(8,t={...U,"aria-controls":l?D.content:void 0}),i.$$.dirty&512&&n(2,r=a),i.$$.dirty&260&&Object.assign(r,t)},[S,g,r,M,$,L,o,w,t,a,l,m,f,ne]}class $2 extends Xe{constructor(e){super(),Je(this,e,K$,W$,Ze,{asChild:1,id:7,el:0})}}function ch(){return{NAME:"select",GROUP_NAME:"select-group",ITEM_NAME:"select-item",PARTS:["arrow","content","group","item","indicator","input","label","trigger","value"]}}function $c(){const{NAME:i}=ch();return Tr(i)}function X$(i){const{NAME:e,PARTS:n}=ch(),t=wo(e,n),r={...V4({...xo(i),forceVisible:!0}),getAttrs:t};return Ar(e,r),{...r,updateOption:ko(r.options)}}function J$(i){const{ITEM_NAME:e}=ch(),n=$c();return Ar(e,i),n}function Y$(){const{ITEM_NAME:i}=ch(),{helpers:{isSelected:e},getAttrs:n}=$c();return{value:Tr(i),isSelected:e,getAttrs:n}}function Q$(i){const n={...{side:"bottom",align:"center",sameWidth:!0},...i},{options:{positioning:t}}=$c();lh(t)(n)}const eA=i=>({ids:i&1}),E0=i=>({ids:i[0]});function tA(i){let e;const n=i[18].default,t=tt(n,i,i[17],E0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&131073)&&nt(t,n,r,r[17],e?rt(n,r[17],s,eA):it(r[17]),E0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function nA(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{required:o=void 0}=e,{disabled:a=void 0}=e,{preventScroll:l=void 0}=e,{loop:f=void 0}=e,{closeOnEscape:m=void 0}=e,{closeOnOutsideClick:g=void 0}=e,{portal:w=void 0}=e,{name:S=void 0}=e,{multiple:M=!1}=e,{selected:$=void 0}=e,{onSelectedChange:D=void 0}=e,{open:F=void 0}=e,{onOpenChange:L=void 0}=e,{items:U=[]}=e,{onOutsideClick:ne=void 0}=e;const{states:{open:se,selected:ee},updateOption:fe,ids:_e}=X$({required:o,disabled:a,preventScroll:l,loop:f,closeOnEscape:m,closeOnOutsideClick:g,portal:w,name:S,onOutsideClick:ne,multiple:M,forceVisible:!0,defaultSelected:Array.isArray($)?[...$]:$,defaultOpen:F,onSelectedChange:({next:de})=>Array.isArray(de)?((!Array.isArray($)||!v2($,de))&&(D==null||D(de),n(2,$=de)),de):($!==de&&(D==null||D(de),n(2,$=de)),de),onOpenChange:({next:de})=>(F!==de&&(L==null||L(de),n(3,F=de)),de),items:U}),re=Bn([_e.menu,_e.trigger,_e.label],([de,he,X])=>({menu:de,trigger:he,label:X}));return Jt(i,re,de=>n(0,t=de)),i.$$set=de=>{"required"in de&&n(4,o=de.required),"disabled"in de&&n(5,a=de.disabled),"preventScroll"in de&&n(6,l=de.preventScroll),"loop"in de&&n(7,f=de.loop),"closeOnEscape"in de&&n(8,m=de.closeOnEscape),"closeOnOutsideClick"in de&&n(9,g=de.closeOnOutsideClick),"portal"in de&&n(10,w=de.portal),"name"in de&&n(11,S=de.name),"multiple"in de&&n(12,M=de.multiple),"selected"in de&&n(2,$=de.selected),"onSelectedChange"in de&&n(13,D=de.onSelectedChange),"open"in de&&n(3,F=de.open),"onOpenChange"in de&&n(14,L=de.onOpenChange),"items"in de&&n(15,U=de.items),"onOutsideClick"in de&&n(16,ne=de.onOutsideClick),"$$scope"in de&&n(17,s=de.$$scope)},i.$$.update=()=>{i.$$.dirty&8&&F!==void 0&&se.set(F),i.$$.dirty&4&&$!==void 0&&ee.set(Array.isArray($)?[...$]:$),i.$$.dirty&16&&fe("required",o),i.$$.dirty&32&&fe("disabled",a),i.$$.dirty&64&&fe("preventScroll",l),i.$$.dirty&128&&fe("loop",f),i.$$.dirty&256&&fe("closeOnEscape",m),i.$$.dirty&512&&fe("closeOnOutsideClick",g),i.$$.dirty&1024&&fe("portal",w),i.$$.dirty&2048&&fe("name",S),i.$$.dirty&4096&&fe("multiple",M),i.$$.dirty&65536&&fe("onOutsideClick",ne)},[t,re,$,F,o,a,l,f,m,g,w,S,M,D,L,U,ne,s,r]}class iA extends Xe{constructor(e){super(),Je(this,e,nA,tA,Ze,{required:4,disabled:5,preventScroll:6,loop:7,closeOnEscape:8,closeOnOutsideClick:9,portal:10,name:11,multiple:12,selected:2,onSelectedChange:13,open:3,onOpenChange:14,items:15,onOutsideClick:16})}}const rA=i=>({builder:i[0]&256}),I0=i=>({builder:i[8]}),sA=i=>({builder:i[0]&256}),P0=i=>({builder:i[8]}),oA=i=>({builder:i[0]&256}),$0=i=>({builder:i[8]}),aA=i=>({builder:i[0]&256}),A0=i=>({builder:i[8]}),lA=i=>({builder:i[0]&256}),M0=i=>({builder:i[8]}),cA=i=>({builder:i[0]&256}),D0=i=>({builder:i[8]});function uA(i){let e,n,t,r;const s=i[28].default,o=tt(s,i,i[27],I0);let a=[i[8],i[13]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),i[38](e),n=!0,t||(r=[Cn(i[8].action(e)),Ke(e,"m-pointerleave",i[12]),Ke(e,"keydown",i[33])],t=!0)},p(f,m){o&&o.p&&(!n||m[0]&134217984)&&nt(o,s,f,f[27],n?rt(s,f[27],m,rA):it(f[27]),I0),ut(e,l=at(a,[m[0]&256&&f[8],m[0]&8192&&f[13]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[38](null),t=!1,Wn(r)}}}function fA(i){let e,n,t,r,s;const o=i[28].default,a=tt(o,i,i[27],P0);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[37](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"m-pointerleave",i[12]),Ke(e,"keydown",i[32])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&134217984)&&nt(a,o,i,i[27],t?rt(o,i[27],g,sA):it(i[27]),P0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&8192&&i[13]]))},i(m){t||(E(a,m),n&&n.end(1),t=!0)},o(m){P(a,m),m&&(n=bs(e,i[5],i[6])),t=!1},d(m){m&&I(e),a&&a.d(m),i[37](null),m&&n&&n.end(),r=!1,Wn(s)}}}function dA(i){let e,n,t,r,s;const o=i[28].default,a=tt(o,i,i[27],$0);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[36](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"m-pointerleave",i[12]),Ke(e,"keydown",i[31])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&134217984)&&nt(a,o,i,i[27],t?rt(o,i[27],g,oA):it(i[27]),$0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&8192&&i[13]]))},i(m){t||(E(a,m),m&&(n||ar(()=>{n=ys(e,i[3],i[4]),n.start()})),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),i[36](null),r=!1,Wn(s)}}}function hA(i){let e,n,t,r,s,o;const a=i[28].default,l=tt(a,i,i[27],A0);let f=[i[8],i[13]],m={};for(let g=0;g<f.length;g+=1)m=Q(m,f[g]);return{c(){e=ce("div"),l&&l.c(),this.h()},l(g){e=ue(g,"DIV",{});var w=we(e);l&&l.l(w),w.forEach(I),this.h()},h(){ut(e,m)},m(g,w){N(g,e,w),l&&l.m(e,null),i[35](e),r=!0,s||(o=[Cn(i[8].action(e)),Ke(e,"m-pointerleave",i[12]),Ke(e,"keydown",i[30])],s=!0)},p(g,w){i=g,l&&l.p&&(!r||w[0]&134217984)&&nt(l,a,i,i[27],r?rt(a,i[27],w,aA):it(i[27]),A0),ut(e,m=at(f,[w[0]&256&&i[8],w[0]&8192&&i[13]]))},i(g){r||(E(l,g),g&&ar(()=>{r&&(t&&t.end(1),n=ys(e,i[3],i[4]),n.start())}),r=!0)},o(g){P(l,g),n&&n.invalidate(),g&&(t=bs(e,i[5],i[6])),r=!1},d(g){g&&I(e),l&&l.d(g),i[35](null),g&&t&&t.end(),s=!1,Wn(o)}}}function mA(i){let e,n,t,r,s;const o=i[28].default,a=tt(o,i,i[27],M0);let l=[i[8],i[13]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[34](e),t=!0,r||(s=[Cn(i[8].action(e)),Ke(e,"m-pointerleave",i[12]),Ke(e,"keydown",i[29])],r=!0)},p(m,g){i=m,a&&a.p&&(!t||g[0]&134217984)&&nt(a,o,i,i[27],t?rt(o,i[27],g,lA):it(i[27]),M0),ut(e,f=at(l,[g[0]&256&&i[8],g[0]&8192&&i[13]]))},i(m){t||(E(a,m),m&&ar(()=>{t&&(n||(n=Qr(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(m){P(a,m),m&&(n||(n=Qr(e,i[1],i[2],!1)),n.run(0)),t=!1},d(m){m&&I(e),a&&a.d(m),i[34](null),m&&n&&n.end(),r=!1,Wn(s)}}}function pA(i){let e;const n=i[28].default,t=tt(n,i,i[27],D0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&134217984)&&nt(t,n,r,r[27],e?rt(n,r[27],s,cA):it(r[27]),D0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function _A(i){let e,n,t,r;const s=[pA,mA,hA,dA,fA,uA],o=[];function a(l,f){return l[7]&&l[9]?0:l[1]&&l[9]?1:l[3]&&l[5]&&l[9]?2:l[3]&&l[9]?3:l[5]&&l[9]?4:l[9]?5:-1}return~(e=a(i))&&(n=o[e]=s[e](i)),{c(){n&&n.c(),t=Le()},l(l){n&&n.l(l),t=Le()},m(l,f){~e&&o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?~e&&o[e].p(l,f):(n&&(It(),P(o[m],1,1,()=>{o[m]=null}),Pt()),~e?(n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t)):n=null)},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),~e&&o[e].d(l)}}}function gA(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let s=Fe(e,r),o,a,{$$slots:l={},$$scope:f}=e,{transition:m=void 0}=e,{transitionConfig:g=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:S=void 0}=e,{outTransition:M=void 0}=e,{outTransitionConfig:$=void 0}=e,{asChild:D=!1}=e,{id:F=void 0}=e,{side:L="bottom"}=e,{align:U="center"}=e,{sideOffset:ne=0}=e,{alignOffset:se=0}=e,{collisionPadding:ee=8}=e,{avoidCollisions:fe=!0}=e,{collisionBoundary:_e=void 0}=e,{sameWidth:re=!0}=e,{fitViewport:de=!1}=e,{strategy:he="absolute"}=e,{overlap:X=!1}=e,{el:j=void 0}=e;const{elements:{menu:xe},states:{open:ze},ids:ve,getAttrs:We}=$c();Jt(i,xe,dt=>n(26,a=dt)),Jt(i,ze,dt=>n(9,o=dt));const pt=ds(),Mt=We("content");function St(dt){At.call(this,i,dt)}function Dt(dt){At.call(this,i,dt)}function zt(dt){At.call(this,i,dt)}function _t(dt){At.call(this,i,dt)}function ft(dt){At.call(this,i,dt)}function Be(dt){Nt[dt?"unshift":"push"](()=>{j=dt,n(0,j)})}function Ut(dt){Nt[dt?"unshift":"push"](()=>{j=dt,n(0,j)})}function Rt(dt){Nt[dt?"unshift":"push"](()=>{j=dt,n(0,j)})}function qt(dt){Nt[dt?"unshift":"push"](()=>{j=dt,n(0,j)})}function et(dt){Nt[dt?"unshift":"push"](()=>{j=dt,n(0,j)})}return i.$$set=dt=>{e=Q(Q({},e),bt(dt)),n(13,s=Fe(e,r)),"transition"in dt&&n(1,m=dt.transition),"transitionConfig"in dt&&n(2,g=dt.transitionConfig),"inTransition"in dt&&n(3,w=dt.inTransition),"inTransitionConfig"in dt&&n(4,S=dt.inTransitionConfig),"outTransition"in dt&&n(5,M=dt.outTransition),"outTransitionConfig"in dt&&n(6,$=dt.outTransitionConfig),"asChild"in dt&&n(7,D=dt.asChild),"id"in dt&&n(14,F=dt.id),"side"in dt&&n(15,L=dt.side),"align"in dt&&n(16,U=dt.align),"sideOffset"in dt&&n(17,ne=dt.sideOffset),"alignOffset"in dt&&n(18,se=dt.alignOffset),"collisionPadding"in dt&&n(19,ee=dt.collisionPadding),"avoidCollisions"in dt&&n(20,fe=dt.avoidCollisions),"collisionBoundary"in dt&&n(21,_e=dt.collisionBoundary),"sameWidth"in dt&&n(22,re=dt.sameWidth),"fitViewport"in dt&&n(23,de=dt.fitViewport),"strategy"in dt&&n(24,he=dt.strategy),"overlap"in dt&&n(25,X=dt.overlap),"el"in dt&&n(0,j=dt.el),"$$scope"in dt&&n(27,f=dt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16384&&F&&ve.menu.set(F),i.$$.dirty[0]&67108864&&n(8,t=a),i.$$.dirty[0]&256&&Object.assign(t,Mt),i.$$.dirty[0]&67076608&&o&&Q$({side:L,align:U,sideOffset:ne,alignOffset:se,collisionPadding:ee,avoidCollisions:fe,collisionBoundary:_e,sameWidth:re,fitViewport:de,strategy:he,overlap:X})},[j,m,g,w,S,M,$,D,t,o,xe,ze,pt,s,F,L,U,ne,se,ee,fe,_e,re,de,he,X,a,f,l,St,Dt,zt,_t,ft,Be,Ut,Rt,qt,et]}let vA=class extends Xe{constructor(e){super(),Je(this,e,gA,_A,Ze,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}};const bA=i=>({builder:i&16,isSelected:i&32}),O0=i=>({builder:i[4],isSelected:i[5]}),yA=i=>({builder:i&16,isSelected:i&32}),z0=i=>({builder:i[4],isSelected:i[5]});function wA(i){let e,n,t,r;const s=i[14].default,o=tt(s,i,i[13],O0),a=o||kA(i);let l=[i[4],i[9]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),i[19](e),n=!0,t||(r=[Cn(i[4].action(e)),Ke(e,"m-click",i[8]),Ke(e,"m-pointermove",i[8]),Ke(e,"focusin",i[15]),Ke(e,"keydown",i[16]),Ke(e,"focusout",i[17]),Ke(e,"pointerleave",i[18])],t=!0)},p(m,g){o?o.p&&(!n||g&8240)&&nt(o,s,m,m[13],n?rt(s,m[13],g,bA):it(m[13]),O0):a&&a.p&&(!n||g&6)&&a.p(m,n?g:-1),ut(e,f=at(l,[g&16&&m[4],g&512&&m[9]]))},i(m){n||(E(a,m),n=!0)},o(m){P(a,m),n=!1},d(m){m&&I(e),a&&a.d(m),i[19](null),t=!1,Wn(r)}}}function xA(i){let e;const n=i[14].default,t=tt(n,i,i[13],z0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8240)&&nt(t,n,r,r[13],e?rt(n,r[13],s,yA):it(r[13]),z0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function kA(i){let e=(i[2]||i[1])+"",n;return{c(){n=lt(e)},l(t){n=ct(t,e)},m(t,r){N(t,n,r)},p(t,r){r&6&&e!==(e=(t[2]||t[1])+"")&&cn(n,e)},d(t){t&&I(n)}}}function CA(i){let e,n,t,r;const s=[xA,wA],o=[];function a(l,f){return l[3]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function TA(i,e,n){let t,r;const s=["value","disabled","label","asChild","el"];let o=Fe(e,s),a,l,{$$slots:f={},$$scope:m}=e,{value:g}=e,{disabled:w=void 0}=e,{label:S=void 0}=e,{asChild:M=!1}=e,{el:$=void 0}=e;const{elements:{option:D},helpers:{isSelected:F},getAttrs:L}=J$(g);Jt(i,D,de=>n(12,l=de)),Jt(i,F,de=>n(11,a=de));const U=ds(),ne=L("item");function se(de){At.call(this,i,de)}function ee(de){At.call(this,i,de)}function fe(de){At.call(this,i,de)}function _e(de){At.call(this,i,de)}function re(de){Nt[de?"unshift":"push"](()=>{$=de,n(0,$)})}return i.$$set=de=>{e=Q(Q({},e),bt(de)),n(9,o=Fe(e,s)),"value"in de&&n(1,g=de.value),"disabled"in de&&n(10,w=de.disabled),"label"in de&&n(2,S=de.label),"asChild"in de&&n(3,M=de.asChild),"el"in de&&n(0,$=de.el),"$$scope"in de&&n(13,m=de.$$scope)},i.$$.update=()=>{i.$$.dirty&5126&&n(4,t=l({value:g,disabled:w,label:S})),i.$$.dirty&16&&Object.assign(t,ne),i.$$.dirty&2050&&n(5,r=a(g))},[$,g,S,M,t,r,D,F,U,o,w,a,l,m,f,se,ee,fe,_e,re]}let SA=class extends Xe{constructor(e){super(),Je(this,e,TA,CA,Ze,{value:1,disabled:10,label:2,asChild:3,el:0})}};const EA=i=>({isSelected:i&4}),R0=i=>({attrs:i[5],isSelected:i[2](i[4])}),IA=i=>({isSelected:i&4}),L0=i=>({attrs:i[5],isSelected:i[2](i[4])});function PA(i){let e,n=i[2](i[4]),t,r=n&&F0(i),s=[i[6],i[5]],o={};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return{c(){e=ce("div"),r&&r.c(),this.h()},l(a){e=ue(a,"DIV",{});var l=we(e);r&&r.l(l),l.forEach(I),this.h()},h(){ut(e,o)},m(a,l){N(a,e,l),r&&r.m(e,null),i[9](e),t=!0},p(a,l){l&4&&(n=a[2](a[4])),n?r?(r.p(a,l),l&4&&E(r,1)):(r=F0(a),r.c(),E(r,1),r.m(e,null)):r&&(It(),P(r,1,1,()=>{r=null}),Pt()),ut(e,o=at(s,[l&64&&a[6],a[5]]))},i(a){t||(E(r),t=!0)},o(a){P(r),t=!1},d(a){a&&I(e),r&&r.d(),i[9](null)}}}function $A(i){let e;const n=i[8].default,t=tt(n,i,i[7],L0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&nt(t,n,r,r[7],e?rt(n,r[7],s,IA):it(r[7]),L0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function F0(i){let e;const n=i[8].default,t=tt(n,i,i[7],R0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&nt(t,n,r,r[7],e?rt(n,r[7],s,EA):it(r[7]),R0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function AA(i){let e,n,t,r;const s=[$A,PA],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function MA(i,e,n){const t=["asChild","el"];let r=Fe(e,t),s,{$$slots:o={},$$scope:a}=e,{asChild:l=!1}=e,{el:f=void 0}=e;const{isSelected:m,value:g,getAttrs:w}=Y$();Jt(i,m,$=>n(2,s=$));const S=w("indicator");function M($){Nt[$?"unshift":"push"](()=>{f=$,n(0,f)})}return i.$$set=$=>{e=Q(Q({},e),bt($)),n(6,r=Fe(e,t)),"asChild"in $&&n(1,l=$.asChild),"el"in $&&n(0,f=$.el),"$$scope"in $&&n(7,a=$.$$scope)},[f,l,s,m,g,S,r,a,o,M]}class DA extends Xe{constructor(e){super(),Je(this,e,MA,AA,Ze,{asChild:1,el:0})}}const OA=i=>({builder:i&4}),B0=i=>({builder:i[2]}),zA=i=>({builder:i&4}),N0=i=>({builder:i[2]});function RA(i){let e,n,t,r;const s=i[9].default,o=tt(s,i,i[8],B0);let a=[i[2],{type:"button"},i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("button"),o&&o.c(),this.h()},l(f){e=ue(f,"BUTTON",{type:!0});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),e.autofocus&&e.focus(),i[10](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-click",i[4]),Ke(e,"m-keydown",i[4])],t=!0)},p(f,m){o&&o.p&&(!n||m&260)&&nt(o,s,f,f[8],n?rt(s,f[8],m,OA):it(f[8]),B0),ut(e,l=at(a,[m&4&&f[2],{type:"button"},m&32&&f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[10](null),t=!1,Wn(r)}}}function LA(i){let e;const n=i[9].default,t=tt(n,i,i[8],N0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&nt(t,n,r,r[8],e?rt(n,r[8],s,zA):it(r[8]),N0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function FA(i){let e,n,t,r;const s=[LA,RA],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function BA(i,e,n){let t;const r=["asChild","id","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,{id:m=void 0}=e,{el:g=void 0}=e;const{elements:{trigger:w},ids:S,getAttrs:M}=$c();Jt(i,w,L=>n(7,o=L));const $=ds(),D=M("trigger");function F(L){Nt[L?"unshift":"push"](()=>{g=L,n(0,g)})}return i.$$set=L=>{e=Q(Q({},e),bt(L)),n(5,s=Fe(e,r)),"asChild"in L&&n(1,f=L.asChild),"id"in L&&n(6,m=L.id),"el"in L&&n(0,g=L.el),"$$scope"in L&&n(8,l=L.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&m&&S.trigger.set(m),i.$$.dirty&128&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,D)},[g,f,t,w,$,s,m,o,l,a,F]}let NA=class extends Xe{constructor(e){super(),Je(this,e,BA,FA,Ze,{asChild:1,id:6,el:0})}};const VA=i=>({label:i&8}),V0=i=>({label:i[3],attrs:i[5]});function jA(i){let e,n=(i[3]||i[1])+"",t,r,s=[i[6],i[5],{"data-placeholder":r=i[3]?void 0:""}],o={};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return{c(){e=ce("span"),t=lt(n),this.h()},l(a){e=ue(a,"SPAN",{"data-placeholder":!0});var l=we(e);t=ct(l,n),l.forEach(I),this.h()},h(){ut(e,o)},m(a,l){N(a,e,l),me(e,t),i[10](e)},p(a,l){l&10&&n!==(n=(a[3]||a[1])+"")&&ap(t,n,o.contenteditable),ut(e,o=at(s,[l&64&&a[6],a[5],l&8&&r!==(r=a[3]?void 0:"")&&{"data-placeholder":r}]))},i:Ct,o:Ct,d(a){a&&I(e),i[10](null)}}}function UA(i){let e;const n=i[9].default,t=tt(n,i,i[8],V0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&nt(t,n,r,r[8],e?rt(n,r[8],s,VA):it(r[8]),V0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function qA(i){let e,n,t,r;const s=[UA,jA],o=[];function a(l,f){return l[2]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function HA(i,e,n){let t;const r=["placeholder","asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{placeholder:f=""}=e,{asChild:m=!1}=e,{el:g=void 0}=e;const{states:{selectedLabel:w},getAttrs:S}=$c();Jt(i,w,D=>n(7,o=D));const M=S("value");function $(D){Nt[D?"unshift":"push"](()=>{g=D,n(0,g)})}return i.$$set=D=>{e=Q(Q({},e),bt(D)),n(6,s=Fe(e,r)),"placeholder"in D&&n(1,f=D.placeholder),"asChild"in D&&n(2,m=D.asChild),"el"in D&&n(0,g=D.el),"$$scope"in D&&n(8,l=D.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&n(3,t=o)},[g,f,m,t,w,M,s,o,l,a,$]}class GA extends Xe{constructor(e){super(),Je(this,e,HA,qA,Ze,{placeholder:1,asChild:2,el:0})}}function ZA(){return{NAME:"toggle",PARTS:["root","input"]}}function WA(i){const{NAME:e,PARTS:n}=ZA(),t=wo(e,n),r={...q4(xo(i)),getAttrs:t};return Ar(e,r),{...r,updateOption:ko(r.options)}}const KA=i=>({builder:i&4}),j0=i=>({builder:i[2]}),XA=i=>({builder:i&4}),U0=i=>({builder:i[2]});function JA(i){let e,n,t,r;const s=i[11].default,o=tt(s,i,i[10],j0);let a=[i[2],{type:"button"},i[5]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("button"),o&&o.c(),this.h()},l(f){e=ue(f,"BUTTON",{type:!0});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),e.autofocus&&e.focus(),i[12](e),n=!0,t||(r=[Cn(i[2].action(e)),Ke(e,"m-click",i[4]),Ke(e,"m-keydown",i[4])],t=!0)},p(f,m){o&&o.p&&(!n||m&1028)&&nt(o,s,f,f[10],n?rt(s,f[10],m,KA):it(f[10]),j0),ut(e,l=at(a,[m&4&&f[2],{type:"button"},m&32&&f[5]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),i[12](null),t=!1,Wn(r)}}}function YA(i){let e;const n=i[11].default,t=tt(n,i,i[10],U0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1028)&&nt(t,n,r,r[10],e?rt(n,r[10],s,XA):it(r[10]),U0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function QA(i){let e,n,t,r;const s=[YA,JA],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function e6(i,e,n){let t;const r=["disabled","pressed","onPressedChange","asChild","el"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{disabled:f=void 0}=e,{pressed:m=void 0}=e,{onPressedChange:g=void 0}=e,{asChild:w=!1}=e,{el:S=void 0}=e;const{elements:{root:M},states:{pressed:$},updateOption:D,getAttrs:F}=WA({disabled:f,defaultPressed:m,onPressedChange:({next:se})=>(m!==se&&(g==null||g(se),n(6,m=se)),se)});Jt(i,M,se=>n(9,o=se));const L=ds(),U=F("root");function ne(se){Nt[se?"unshift":"push"](()=>{S=se,n(0,S)})}return i.$$set=se=>{e=Q(Q({},e),bt(se)),n(5,s=Fe(e,r)),"disabled"in se&&n(7,f=se.disabled),"pressed"in se&&n(6,m=se.pressed),"onPressedChange"in se&&n(8,g=se.onPressedChange),"asChild"in se&&n(1,w=se.asChild),"el"in se&&n(0,S=se.el),"$$scope"in se&&n(10,l=se.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&m!==void 0&&$.set(m),i.$$.dirty&128&&D("disabled",f),i.$$.dirty&512&&n(2,t=o),i.$$.dirty&4&&Object.assign(t,U)},[S,w,t,M,L,s,m,f,g,o,l,a,ne]}let t6=class extends Xe{constructor(e){super(),Je(this,e,e6,QA,Ze,{disabled:7,pressed:6,onPressedChange:8,asChild:1,el:0})}};var si=(i=>(i.HOME="",i.SOCIAL_NETWORK="social",i.SOCIAL_NETWORK_FEED="social/feed",i.SOCIAL_NETWORK_CONNECTIONS="social/connections",i.POINTS_AND_BADGES="points-badges",i.CHECK_INS="check-ins",i.FAVOURITES="favourites",i.SETTINGS="settings",i))(si||{});const n6=({params:i})=>({slug:i.slug});function i6(){return Object.values(si).map(i=>({slug:i}))}const qW=Object.freeze(Object.defineProperty({__proto__:null,entries:i6,load:n6},Symbol.toStringTag,{value:"Module"}));function r6(i){let e;const n=i[3].default,t=tt(n,i,i[11],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&2048)&&nt(t,n,r,r[11],e?rt(n,r[11],s,null):it(r[11]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function s6(i){let e,n;const t=[{class:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[r6]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new b2({props:r}),e.$on("click",i[4]),e.$on("keydown",i[5]),e.$on("focusin",i[6]),e.$on("focusout",i[7]),e.$on("pointerdown",i[8]),e.$on("pointerleave",i[9]),e.$on("pointermove",i[10]),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&7?at(t,[o&3&&{class:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[1]&&"pl-8",s[0])},o&4&&dn(s[2])]):{};o&2048&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function o6(i,e,n){const t=["class","inset"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{inset:l=void 0}=e;function f(D){At.call(this,i,D)}function m(D){At.call(this,i,D)}function g(D){At.call(this,i,D)}function w(D){At.call(this,i,D)}function S(D){At.call(this,i,D)}function M(D){At.call(this,i,D)}function $(D){At.call(this,i,D)}return i.$$set=D=>{e=Q(Q({},e),bt(D)),n(2,r=Fe(e,t)),"class"in D&&n(0,a=D.class),"inset"in D&&n(1,l=D.inset),"$$scope"in D&&n(11,o=D.$$scope)},[a,l,r,s,f,m,g,w,S,M,$,o]}let Kd=class extends Xe{constructor(e){super(),Je(this,e,o6,s6,Ze,{class:0,inset:1})}};function a6(i){let e;const n=i[3].default,t=tt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&nt(t,n,r,r[4],e?rt(n,r[4],s,null):it(r[4]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function l6(i){let e,n;const t=[{class:Et("px-2 py-1.5 text-sm font-semibold",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[a6]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new y2({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&7?at(t,[o&3&&{class:Et("px-2 py-1.5 text-sm font-semibold",s[1]&&"pl-8",s[0])},o&4&&dn(s[2])]):{};o&16&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function c6(i,e,n){const t=["class","inset"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{inset:l=void 0}=e;return i.$$set=f=>{e=Q(Q({},e),bt(f)),n(2,r=Fe(e,t)),"class"in f&&n(0,a=f.class),"inset"in f&&n(1,l=f.inset),"$$scope"in f&&n(4,o=f.$$scope)},[a,l,r,s,o]}let u6=class extends Xe{constructor(e){super(),Je(this,e,c6,l6,Ze,{class:0,inset:1})}};function f6(i){let e;const n=i[5].default,t=tt(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&nt(t,n,r,r[7],e?rt(n,r[7],s,null):it(r[7]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function d6(i){let e,n;const t=[{transition:i[2]},{transitionConfig:i[3]},{sideOffset:i[1]},{class:Et("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",i[0])},i[4]];let r={$$slots:{default:[f6]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new T2({props:r}),e.$on("keydown",i[6]),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&31?at(t,[o&4&&{transition:s[2]},o&8&&{transitionConfig:s[3]},o&2&&{sideOffset:s[1]},o&1&&{class:Et("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",s[0])},o&16&&dn(s[4])]):{};o&128&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function h6(i,e,n){const t=["class","sideOffset","transition","transitionConfig"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{sideOffset:l=4}=e,{transition:f=pl}=e,{transitionConfig:m=void 0}=e;function g(w){At.call(this,i,w)}return i.$$set=w=>{e=Q(Q({},e),bt(w)),n(4,r=Fe(e,t)),"class"in w&&n(0,a=w.class),"sideOffset"in w&&n(1,l=w.sideOffset),"transition"in w&&n(2,f=w.transition),"transitionConfig"in w&&n(3,m=w.transitionConfig),"$$scope"in w&&n(7,o=w.$$scope)},[a,l,f,m,r,s,g,o]}let m6=class extends Xe{constructor(e){super(),Je(this,e,h6,d6,Ze,{class:0,sideOffset:1,transition:2,transitionConfig:3})}};function p6(i){let e,n;const t=[{class:Et("-mx-1 my-1 h-px bg-muted",i[0])},i[1]];let r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new w2({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("-mx-1 my-1 h-px bg-muted",s[0])},o&2&&dn(s[1])]):{};e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function _6(i,e,n){const t=["class"];let r=Fe(e,t),{class:s=void 0}=e;return i.$$set=o=>{e=Q(Q({},e),bt(o)),n(1,r=Fe(e,t)),"class"in o&&n(0,s=o.class)},[s,r]}let A2=class extends Xe{constructor(e){super(),Je(this,e,_6,p6,Ze,{class:0})}};const g6=C2,v6=S2,b6=R5;function y6(i){let e;const n=i[3].default,t=tt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&nt(t,n,r,r[4],e?rt(n,r[4],s,null):it(r[4]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function w6(i){let e,n;const t=[{delayMs:i[1]},{class:Et("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",i[0])},i[2]];let r={$$slots:{default:[y6]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new WE({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&7?at(t,[o&2&&{delayMs:s[1]},o&1&&{class:Et("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s[0])},o&4&&dn(s[2])]):{};o&16&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function x6(i,e,n){const t=["class","delayMs"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{delayMs:l=void 0}=e;return i.$$set=f=>{e=Q(Q({},e),bt(f)),n(2,r=Fe(e,t)),"class"in f&&n(0,a=f.class),"delayMs"in f&&n(1,l=f.delayMs),"$$scope"in f&&n(4,o=f.$$scope)},[a,l,r,s,o]}class k6 extends Xe{constructor(e){super(),Je(this,e,x6,w6,Ze,{class:0,delayMs:1})}}function C6(i){let e,n;const t=[{src:i[1]},{alt:i[2]},{class:Et("aspect-square h-full w-full",i[0])},i[3]];let r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new e5({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&15?at(t,[o&2&&{src:s[1]},o&4&&{alt:s[2]},o&1&&{class:Et("aspect-square h-full w-full",s[0])},o&8&&dn(s[3])]):{};e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function T6(i,e,n){const t=["class","src","alt"];let r=Fe(e,t),{class:s=void 0}=e,{src:o=void 0}=e,{alt:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(3,r=Fe(e,t)),"class"in l&&n(0,s=l.class),"src"in l&&n(1,o=l.src),"alt"in l&&n(2,a=l.alt)},[s,o,a,r]}class S6 extends Xe{constructor(e){super(),Je(this,e,T6,C6,Ze,{class:0,src:1,alt:2})}}function E6(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function I6(i){let e,n;const t=[{class:Et("flex h-full w-full items-center justify-center rounded-full bg-muted",i[0])},i[1]];let r={$$slots:{default:[E6]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new a5({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("flex h-full w-full items-center justify-center rounded-full bg-muted",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function P6(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}class Cp extends Xe{constructor(e){super(),Je(this,e,P6,I6,Ze,{class:0})}}function $6(i){let e,n;return e=new Cp({props:{class:"bg-error text-2xl",$$slots:{default:[D6]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function A6(i){let e,n,t,r=i[1].profile_picture!==void 0&&q0(i);return n=new Cp({props:{$$slots:{default:[O6]},$$scope:{ctx:i}}}),{c(){r&&r.c(),e=ke(),H(n.$$.fragment)},l(s){r&&r.l(s),e=Ce(s),W(n.$$.fragment,s)},m(s,o){r&&r.m(s,o),N(s,e,o),G(n,s,o),t=!0},p(s,o){s[1].profile_picture!==void 0?r?(r.p(s,o),o&2&&E(r,1)):(r=q0(s),r.c(),E(r,1),r.m(e.parentNode,e)):r&&(It(),P(r,1,1,()=>{r=null}),Pt());const a={};o&524288&&(a.$$scope={dirty:o,ctx:s}),n.$set(a)},i(s){t||(E(r),E(n.$$.fragment,s),t=!0)},o(s){P(r),P(n.$$.fragment,s),t=!1},d(s){s&&I(e),r&&r.d(s),Z(n,s)}}}function M6(i){let e,n;return e=new Cp({props:{$$slots:{default:[z6]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function D6(i){let e;return{c(){e=lt("!")},l(n){e=ct(n,"!")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function q0(i){let e,n;return e=new S6({props:{src:i[1].profile_picture,alt:"Profile Picture",class:"bg-card"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.src=t[1].profile_picture),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function O6(i){let e,n;return e=new vT({props:{class:"h-5 w-5"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function z6(i){let e;return{c(){e=ce("span"),this.h()},l(n){e=ue(n,"SPAN",{class:!0}),we(e).forEach(I),this.h()},h(){oe(e,"class","loading loading-ring loading-lg")},m(n,t){N(n,e,t)},p:Ct,d(n){n&&I(e)}}}function R6(i){let e,n,t,r;const s=[M6,A6,$6],o=[];function a(l,f){return l[0]?0:l[3]?2:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function L6(i){let e,n;return e=new k6({props:{class:"h-10 w-10",$$slots:{default:[R6]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524299&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function F6(i){let e,n;return e=new qi({props:{variant:"ghost",builders:[i[18]],class:"relative h-8 w-8 rounded-full mx-1",$$slots:{default:[L6]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.builders=[t[18]]),r&524299&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function B6(i){let e,n,t,r,s,o;return e=new Kd({props:{class:"font-normal cursor-pointer",$$slots:{default:[j6]},$$scope:{ctx:i}}}),e.$on("click",i[11]),t=new A2({}),s=new Kd({props:{class:"font-normal cursor-pointer flex-col items-start gap-2",$$slots:{default:[H6]},$$scope:{ctx:i}}}),s.$on("click",i[13]),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),H(s.$$.fragment)},l(a){W(e.$$.fragment,a),n=Ce(a),W(t.$$.fragment,a),r=Ce(a),W(s.$$.fragment,a)},m(a,l){G(e,a,l),N(a,n,l),G(t,a,l),N(a,r,l),G(s,a,l),o=!0},p(a,l){const f={};l&524290&&(f.$$scope={dirty:l,ctx:a}),e.$set(f);const m={};l&524340&&(m.$$scope={dirty:l,ctx:a}),s.$set(m)},i(a){o||(E(e.$$.fragment,a),E(t.$$.fragment,a),E(s.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),P(s.$$.fragment,a),o=!1},d(a){a&&(I(n),I(r)),Z(e,a),Z(t,a),Z(s,a)}}}function N6(i){let e,n;return e=new u6({props:{class:"font-normal",$$slots:{default:[G6]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function V6(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-1hn9b8o"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","h-16 flex items-center justify-center")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function j6(i){let e,n,t=i[1].nickname+"",r,s,o,a,l=i[1].nickname+"",f;return{c(){e=ce("div"),n=ce("p"),r=lt(t),s=ke(),o=ce("p"),a=lt("@"),f=lt(l),this.h()},l(m){e=ue(m,"DIV",{class:!0});var g=we(e);n=ue(g,"P",{class:!0});var w=we(n);r=ct(w,t),w.forEach(I),s=Ce(g),o=ue(g,"P",{class:!0});var S=we(o);a=ct(S,"@"),f=ct(S,l),S.forEach(I),g.forEach(I),this.h()},h(){oe(n,"class","text-sm font-medium leading-none"),oe(o,"class","text-xs leading-none text-muted-foreground"),oe(e,"class","flex flex-col space-y-1")},m(m,g){N(m,e,g),me(e,n),me(n,r),me(e,s),me(e,o),me(o,a),me(o,f)},p(m,g){g&2&&t!==(t=m[1].nickname+"")&&cn(r,t),g&2&&l!==(l=m[1].nickname+"")&&cn(f,l)},d(m){m&&I(e)}}}function U6(i){let e,n;return e=new _l({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function q6(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Li(e.src,n=es[i[2].badge])||oe(e,"src",n),oe(e,"class","h-14 w-14 -ml-0.5"),oe(e,"alt","Current Total Points Badge Icon")},m(s,o){N(s,e,o),t||(r=Ke(e,"error",i[12]),t=!0)},p(s,o){o&4&&!Li(e.src,n=es[s[2].badge])&&oe(e,"src",n)},i:Ct,o:Ct,d(s){s&&I(e),t=!1,r()}}}function H6(i){let e,n,t=i[2].totalPoints+"",r,s,o,a,l,f,m,g,w=i[2].badge+"",S,M,$,D,F=i[2].previousThreshold+"",L,U,ne,se,ee,fe=i[2].threshold+"",_e,re;const de=[q6,U6],he=[];function X(j,xe){return j[4]?1:0}return l=X(i),f=he[l]=de[l](i),{c(){e=ce("p"),n=lt("Total Points: "),r=lt(t),s=ke(),o=ce("div"),a=ce("div"),f.c(),m=ke(),g=ce("p"),S=lt(w),M=ke(),$=ce("div"),D=ce("p"),L=lt(F),U=ke(),ne=ce("progress"),se=ke(),ee=ce("p"),_e=lt(fe),this.h()},l(j){e=ue(j,"P",{class:!0});var xe=we(e);n=ct(xe,"Total Points: "),r=ct(xe,t),xe.forEach(I),s=Ce(j),o=ue(j,"DIV",{class:!0});var ze=we(o);a=ue(ze,"DIV",{class:!0});var ve=we(a);f.l(ve),ve.forEach(I),m=Ce(ze),g=ue(ze,"P",{class:!0});var We=we(g);S=ct(We,w),We.forEach(I),M=Ce(ze),$=ue(ze,"DIV",{class:!0});var pt=we($);D=ue(pt,"P",{class:!0});var Mt=we(D);L=ct(Mt,F),Mt.forEach(I),U=Ce(pt),ne=ue(pt,"PROGRESS",{class:!0,max:!0}),we(ne).forEach(I),se=Ce(pt),ee=ue(pt,"P",{class:!0});var St=we(ee);_e=ct(St,fe),St.forEach(I),pt.forEach(I),ze.forEach(I),this.h()},h(){oe(e,"class","text-sm font-medium leading-none"),oe(a,"class","shrink-0"),oe(g,"class","text-sm font-medium leading-none"),oe(D,"class","text-sm font-medium leading-none text-muted-foreground"),oe(ne,"class","progress progress-error grow"),ne.value=i[5],oe(ne,"max","100"),oe(ee,"class","text-sm font-medium leading-none text-muted-foreground"),oe($,"class","flex self-stretch gap-2 items-center"),oe(o,"class","flex flex-col space-y-1 items-center self-stretch")},m(j,xe){N(j,e,xe),me(e,n),me(e,r),N(j,s,xe),N(j,o,xe),me(o,a),he[l].m(a,null),me(o,m),me(o,g),me(g,S),me(o,M),me(o,$),me($,D),me(D,L),me($,U),me($,ne),me($,se),me($,ee),me(ee,_e),re=!0},p(j,xe){(!re||xe&4)&&t!==(t=j[2].totalPoints+"")&&cn(r,t);let ze=l;l=X(j),l===ze?he[l].p(j,xe):(It(),P(he[ze],1,1,()=>{he[ze]=null}),Pt(),f=he[l],f?f.p(j,xe):(f=he[l]=de[l](j),f.c()),E(f,1),f.m(a,null)),(!re||xe&4)&&w!==(w=j[2].badge+"")&&cn(S,w),(!re||xe&4)&&F!==(F=j[2].previousThreshold+"")&&cn(L,F),(!re||xe&32)&&(ne.value=j[5]),(!re||xe&4)&&fe!==(fe=j[2].threshold+"")&&cn(_e,fe)},i(j){re||(E(f),re=!0)},o(j){P(f),re=!1},d(j){j&&(I(e),I(s),I(o)),he[l].d()}}}function G6(i){let e,n='<p class="text-xs leading-none text-error">Failed To Fetch</p>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-5us5t3"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","flex flex-col space-y-1")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function Z6(i){let e;return{c(){e=lt("Settings")},l(n){e=ct(n,"Settings")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function W6(i){let e;return{c(){e=lt("Log out")},l(n){e=ct(n,"Log out")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function K6(i){let e,n,t,r;return e=new Kd({props:{class:"cursor-pointer",$$slots:{default:[Z6]},$$scope:{ctx:i}}}),e.$on("click",i[14]),t=new Kd({props:{class:"cursor-pointer",$$slots:{default:[W6]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&524288&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&524288&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function X6(i){let e,n,t,r,s,o,a;const l=[V6,N6,B6],f=[];function m(g,w){return g[0]?0:g[3]?1:2}return e=m(i),n=f[e]=l[e](i),r=new A2({}),o=new b6({props:{$$slots:{default:[K6]},$$scope:{ctx:i}}}),{c(){n.c(),t=ke(),H(r.$$.fragment),s=ke(),H(o.$$.fragment)},l(g){n.l(g),t=Ce(g),W(r.$$.fragment,g),s=Ce(g),W(o.$$.fragment,g)},m(g,w){f[e].m(g,w),N(g,t,w),G(r,g,w),N(g,s,w),G(o,g,w),a=!0},p(g,w){let S=e;e=m(g),e===S?f[e].p(g,w):(It(),P(f[S],1,1,()=>{f[S]=null}),Pt(),n=f[e],n?n.p(g,w):(n=f[e]=l[e](g),n.c()),E(n,1),n.m(t.parentNode,t));const M={};w&524288&&(M.$$scope={dirty:w,ctx:g}),o.$set(M)},i(g){a||(E(n),E(r.$$.fragment,g),E(o.$$.fragment,g),a=!0)},o(g){P(n),P(r.$$.fragment,g),P(o.$$.fragment,g),a=!1},d(g){g&&(I(t),I(s)),f[e].d(g),Z(r,g),Z(o,g)}}}function J6(i){let e,n,t,r;return e=new v6({props:{asChild:!0,$$slots:{default:[F6,({builder:s})=>({18:s}),({builder:s})=>s?262144:0]},$$scope:{ctx:i}}}),t=new m6({props:{class:"w-56",align:"end",$$slots:{default:[X6]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&786443&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&524351&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function Y6(i){let e,n;return e=new g6({props:{$$slots:{default:[J6]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&524351&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}let H0=2e3;function Q6(i,e,n){let t,r,s=!1,o=!0,a=!1;const l=Tr("refreshAvatarData");let f;const m=async()=>{const ee=await(await fetch("/api/settings/profile")).json();n(1,t=ee),(typeof(t==null?void 0:t.nickname)!="string"||typeof(t==null?void 0:t.email)!="string"||typeof(t==null?void 0:t.description)!="string")&&n(3,s=!0);const _e=await(await fetch("/api/points-badges/avatar")).json();n(2,r=_e),(typeof(r==null?void 0:r.totalPoints)!="number"||typeof(r==null?void 0:r.badge)!="string"||!((r==null?void 0:r.badge)in es)||typeof(r==null?void 0:r.threshold)!="number"||typeof(r==null?void 0:r.previousThreshold)!="number")&&n(3,s=!0),n(7,f=Math.round((r.totalPoints-r.previousThreshold)*100/(r.threshold-r.previousThreshold))),f>100&&n(7,f=100),n(0,o=!1)};l.set(m);const g=async()=>{await $C()&&AC.verify()};let w;Zi(()=>(m(),w=By.subscribe(m),()=>w()));let S=0,M,$,D=!1;hl(()=>clearInterval(M));const F=()=>il("/app"),L=()=>n(4,a=!0),U=()=>il("/app/points-badges"),ne=()=>il("/app/settings");return i.$$.update=()=>{i.$$.dirty&1921&&!o&&!D&&(n(10,D=!0),n(9,$=Date.now()),n(8,M=setInterval(()=>{const ee=Date.now()-$;if(ee<H0){const fe=ee/H0;n(5,S=f*nf(fe))}else n(5,S=f),clearInterval(M)},2)))},[o,t,r,s,a,S,g,f,M,$,D,F,L,U,ne]}class eM extends Xe{constructor(e){super(),Je(this,e,Q6,Y6,Ze,{})}}function tM(i){let e,n,t,r,s,o,a,l;return{c(){e=ce("div"),n=ke(),t=ce("div"),r=ce("div"),s=ke(),o=ce("div"),a=ke(),l=ce("div"),this.h()},l(f){e=ue(f,"DIV",{class:!0}),we(e).forEach(I),n=Ce(f),t=ue(f,"DIV",{class:!0});var m=we(t);r=ue(m,"DIV",{class:!0}),we(r).forEach(I),s=Ce(m),o=ue(m,"DIV",{class:!0}),we(o).forEach(I),m.forEach(I),a=Ce(f),l=ue(f,"DIV",{class:!0}),we(l).forEach(I),this.h()},h(){oe(e,"class","h-1 w-7 rounded bg-base-content transition-all"),zi(e,"w-0",!i[0]),zi(e,"opacity-0",!i[0]),zi(e,"opacity-100",i[0]),oe(r,"class","absolute h-1 w-7 -translate-x-1/2 -translate-y-1/2 rounded bg-base-content transition-all"),zi(r,"rotate-45",!i[0]),oe(o,"class","absolute h-1 w-7 -translate-x-1/2 -translate-y-1/2 rounded bg-base-content transition-all"),zi(o,"-rotate-45",!i[0]),oe(t,"class","relative"),oe(l,"class","h-1 w-7 rounded bg-base-content transition-all"),zi(l,"w-0",!i[0]),zi(l,"opacity-0",!i[0]),zi(l,"opacity-100",i[0])},m(f,m){N(f,e,m),N(f,n,m),N(f,t,m),me(t,r),me(t,s),me(t,o),N(f,a,m),N(f,l,m)},p(f,m){m&1&&zi(e,"w-0",!f[0]),m&1&&zi(e,"opacity-0",!f[0]),m&1&&zi(e,"opacity-100",f[0]),m&1&&zi(r,"rotate-45",!f[0]),m&1&&zi(o,"-rotate-45",!f[0]),m&1&&zi(l,"w-0",!f[0]),m&1&&zi(l,"opacity-0",!f[0]),m&1&&zi(l,"opacity-100",f[0])},d(f){f&&(I(e),I(n),I(t),I(a),I(l))}}}function nM(i){let e,n,t,r,s,o="Natreon™",a,l,f="Natreon™",m,g,w;return t=new qi({props:{variant:"outline",size:"none",class:"flex-col btn btn-square p-0",$$slots:{default:[tM]},$$scope:{ctx:i}}}),t.$on("click",i[1]),g=new eM({}),{c(){e=ce("header"),n=ce("div"),H(t.$$.fragment),r=ke(),s=ce("h1"),s.textContent=o,a=ke(),l=ce("h1"),l.textContent=f,m=ke(),H(g.$$.fragment),this.h()},l(S){e=ue(S,"HEADER",{id:!0,class:!0});var M=we(e);n=ue(M,"DIV",{class:!0});var $=we(n);W(t.$$.fragment,$),$.forEach(I),r=Ce(M),s=ue(M,"H1",{class:!0,"data-svelte-h":!0}),Rn(s)!=="svelte-1i53c1w"&&(s.textContent=o),a=Ce(M),l=ue(M,"H1",{class:!0,"data-svelte-h":!0}),Rn(l)!=="svelte-8xrexm"&&(l.textContent=f),m=Ce(M),W(g.$$.fragment,M),M.forEach(I),this.h()},h(){oe(n,"class","px-1 md:hidden"),oe(s,"class","select-none px-4 hidden md:block"),oe(l,"class","select-none md:hidden absolute left-1/2 -translate-x-1/2"),oe(e,"id","app-header"),oe(e,"class","p-2 flex items-center justify-between sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60")},m(S,M){N(S,e,M),me(e,n),G(t,n,null),me(e,r),me(e,s),me(e,a),me(e,l),me(e,m),G(g,e,null),w=!0},p(S,[M]){const $={};M&5&&($.$$scope={dirty:M,ctx:S}),t.$set($)},i(S){w||(E(t.$$.fragment,S),E(g.$$.fragment,S),w=!0)},o(S){P(t.$$.fragment,S),P(g.$$.fragment,S),w=!1},d(S){S&&I(e),Z(t),Z(g)}}}function iM(i,e,n){let{menuClosed:t}=e;const r=()=>n(0,t=!t);return i.$$set=s=>{"menuClosed"in s&&n(0,t=s.menuClosed)},[t,r]}class rM extends Xe{constructor(e){super(),Je(this,e,iM,nM,Ze,{menuClosed:0})}}function sM(i){let e,n,t;return e=new $3({props:{class:"h-5 w-5 mr-2"}}),{c(){H(e.$$.fragment),n=lt("Home")},l(r){W(e.$$.fragment,r),n=ct(r,"Home")},m(r,s){G(e,r,s),N(r,n,s),t=!0},p:Ct,i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function oM(i){let e,n,t;return e=new kT({props:{class:"h-5 w-5 mr-2"}}),{c(){H(e.$$.fragment),n=lt("Social Network")},l(r){W(e.$$.fragment,r),n=ct(r,"Social Network")},m(r,s){G(e,r,s),N(r,n,s),t=!0},p:Ct,i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function aM(i){let e,n,t;return e=new Q3({props:{class:"h-5 w-5 mr-2"}}),{c(){H(e.$$.fragment),n=lt("Points & Badges")},l(r){W(e.$$.fragment,r),n=ct(r,"Points & Badges")},m(r,s){G(e,r,s),N(r,n,s),t=!0},p:Ct,i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function lM(i){let e,n,t;return e=new fp({props:{class:"h-5 w-5 mr-2"}}),{c(){H(e.$$.fragment),n=lt("Checked-in POIs")},l(r){W(e.$$.fragment,r),n=ct(r,"Checked-in POIs")},m(r,s){G(e,r,s),N(r,n,s),t=!0},p:Ct,i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function cM(i){let e,n,t;return e=new Sc({props:{class:"h-5 w-5 mr-2"}}),{c(){H(e.$$.fragment),n=lt("Favourite POIs")},l(r){W(e.$$.fragment,r),n=ct(r,"Favourite POIs")},m(r,s){G(e,r,s),N(r,n,s),t=!0},p:Ct,i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function uM(i){let e,n,t;return e=new W3({props:{class:"h-5 w-5 mr-2"}}),{c(){H(e.$$.fragment),n=lt("Settings")},l(r){W(e.$$.fragment,r),n=ct(r,"Settings")},m(r,s){G(e,r,s),N(r,n,s),t=!0},p:Ct,i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function fM(i){var Dt,zt,_t,ft,Be;let e,n,t,r,s,o,a,l,f,m,g,w,S,M,$,D,F,L,U,ne,se,ee,fe,_e,re,de,he,X,j,xe,ze,ve,We,pt,Mt,St;return t=new qi({props:{variant:i[0]?"outline":"secondary",href:`/app${si.HOME?"/"+si.HOME:""}`,"data-testid":"home-button",class:"flex items-center text-sm justify-start",$$slots:{default:[sM]},$$scope:{ctx:i}}}),t.$on("click",i[2]),l=new qi({props:{variant:((Dt=i[0])==null?void 0:Dt.split("/")[0])===si.SOCIAL_NETWORK?"secondary":"outline",href:`/app${si.SOCIAL_NETWORK?"/"+si.SOCIAL_NETWORK:""}`,"data-testid":"social-network-button",class:"flex items-center text-sm justify-start",$$slots:{default:[oM]},$$scope:{ctx:i}}}),l.$on("click",i[3]),S=new qi({props:{variant:((zt=i[0])==null?void 0:zt.split("/")[0])===si.POINTS_AND_BADGES?"secondary":"outline",href:`/app${si.POINTS_AND_BADGES?"/"+si.POINTS_AND_BADGES:""}`,"data-testid":"points-and-badges-button",class:"flex items-center text-sm justify-start",$$slots:{default:[aM]},$$scope:{ctx:i}}}),S.$on("click",i[4]),L=new qi({props:{variant:((_t=i[0])==null?void 0:_t.split("/")[0])===si.CHECK_INS?"secondary":"outline",href:`/app${si.CHECK_INS?"/"+si.CHECK_INS:""}`,"data-testid":"checked-in-pois-button",class:"flex items-center text-sm justify-start",$$slots:{default:[lM]},$$scope:{ctx:i}}}),L.$on("click",i[5]),fe=new qi({props:{variant:((ft=i[0])==null?void 0:ft.split("/")[0])===si.FAVOURITES?"secondary":"outline",href:`/app${si.FAVOURITES?"/"+si.FAVOURITES:""}`,"data-testid":"favourite-pois-button",class:"flex items-center text-sm justify-start",$$slots:{default:[cM]},$$scope:{ctx:i}}}),fe.$on("click",i[6]),X=new qi({props:{variant:((Be=i[0])==null?void 0:Be.split("/")[0])===si.SETTINGS?"secondary":"outline",href:`/app${si.SETTINGS?"/"+si.SETTINGS:""}`,"data-testid":"settings-button",class:"flex items-center text-sm justify-start",$$slots:{default:[uM]},$$scope:{ctx:i}}}),X.$on("click",i[7]),Mt=new EC({props:{variant:"secondary"}}),{c(){e=ce("ul"),n=ce("li"),H(t.$$.fragment),r=ke(),s=ce("div"),o=ke(),a=ce("li"),H(l.$$.fragment),f=ke(),m=ce("div"),g=ke(),w=ce("li"),H(S.$$.fragment),M=ke(),$=ce("div"),D=ke(),F=ce("li"),H(L.$$.fragment),U=ke(),ne=ce("div"),se=ke(),ee=ce("li"),H(fe.$$.fragment),_e=ke(),re=ce("div"),de=ke(),he=ce("li"),H(X.$$.fragment),j=ke(),xe=ce("div"),ze=ke(),ve=ce("div"),We=ke(),pt=ce("li"),H(Mt.$$.fragment),this.h()},l(Ut){e=ue(Ut,"UL",{class:!0});var Rt=we(e);n=ue(Rt,"LI",{});var qt=we(n);W(t.$$.fragment,qt),qt.forEach(I),r=Ce(Rt),s=ue(Rt,"DIV",{class:!0}),we(s).forEach(I),o=Ce(Rt),a=ue(Rt,"LI",{});var et=we(a);W(l.$$.fragment,et),et.forEach(I),f=Ce(Rt),m=ue(Rt,"DIV",{class:!0}),we(m).forEach(I),g=Ce(Rt),w=ue(Rt,"LI",{});var dt=we(w);W(S.$$.fragment,dt),dt.forEach(I),M=Ce(Rt),$=ue(Rt,"DIV",{class:!0}),we($).forEach(I),D=Ce(Rt),F=ue(Rt,"LI",{});var yt=we(F);W(L.$$.fragment,yt),yt.forEach(I),U=Ce(Rt),ne=ue(Rt,"DIV",{class:!0}),we(ne).forEach(I),se=Ce(Rt),ee=ue(Rt,"LI",{});var Ue=we(ee);W(fe.$$.fragment,Ue),Ue.forEach(I),_e=Ce(Rt),re=ue(Rt,"DIV",{class:!0}),we(re).forEach(I),de=Ce(Rt),he=ue(Rt,"LI",{});var kt=we(he);W(X.$$.fragment,kt),kt.forEach(I),j=Ce(Rt),xe=ue(Rt,"DIV",{class:!0}),we(xe).forEach(I),ze=Ce(Rt),ve=ue(Rt,"DIV",{class:!0}),we(ve).forEach(I),We=Ce(Rt),pt=ue(Rt,"LI",{});var Ge=we(pt);W(Mt.$$.fragment,Ge),Ge.forEach(I),Rt.forEach(I),this.h()},h(){oe(s,"class","my-1"),oe(m,"class","my-1"),oe($,"class","my-1"),oe(ne,"class","my-1"),oe(re,"class","my-1"),oe(xe,"class","grow"),oe(ve,"class","my-2"),oe(e,"class","menu menu-lg p-4 min-h-full text-base-content flex-nowrap")},m(Ut,Rt){N(Ut,e,Rt),me(e,n),G(t,n,null),me(e,r),me(e,s),me(e,o),me(e,a),G(l,a,null),me(e,f),me(e,m),me(e,g),me(e,w),G(S,w,null),me(e,M),me(e,$),me(e,D),me(e,F),G(L,F,null),me(e,U),me(e,ne),me(e,se),me(e,ee),G(fe,ee,null),me(e,_e),me(e,re),me(e,de),me(e,he),G(X,he,null),me(e,j),me(e,xe),me(e,ze),me(e,ve),me(e,We),me(e,pt),G(Mt,pt,null),St=!0},p(Ut,[Rt]){var Ge,Xt,En,Oe,un;const qt={};Rt&1&&(qt.variant=Ut[0]?"outline":"secondary"),Rt&256&&(qt.$$scope={dirty:Rt,ctx:Ut}),t.$set(qt);const et={};Rt&1&&(et.variant=((Ge=Ut[0])==null?void 0:Ge.split("/")[0])===si.SOCIAL_NETWORK?"secondary":"outline"),Rt&256&&(et.$$scope={dirty:Rt,ctx:Ut}),l.$set(et);const dt={};Rt&1&&(dt.variant=((Xt=Ut[0])==null?void 0:Xt.split("/")[0])===si.POINTS_AND_BADGES?"secondary":"outline"),Rt&256&&(dt.$$scope={dirty:Rt,ctx:Ut}),S.$set(dt);const yt={};Rt&1&&(yt.variant=((En=Ut[0])==null?void 0:En.split("/")[0])===si.CHECK_INS?"secondary":"outline"),Rt&256&&(yt.$$scope={dirty:Rt,ctx:Ut}),L.$set(yt);const Ue={};Rt&1&&(Ue.variant=((Oe=Ut[0])==null?void 0:Oe.split("/")[0])===si.FAVOURITES?"secondary":"outline"),Rt&256&&(Ue.$$scope={dirty:Rt,ctx:Ut}),fe.$set(Ue);const kt={};Rt&1&&(kt.variant=((un=Ut[0])==null?void 0:un.split("/")[0])===si.SETTINGS?"secondary":"outline"),Rt&256&&(kt.$$scope={dirty:Rt,ctx:Ut}),X.$set(kt)},i(Ut){St||(E(t.$$.fragment,Ut),E(l.$$.fragment,Ut),E(S.$$.fragment,Ut),E(L.$$.fragment,Ut),E(fe.$$.fragment,Ut),E(X.$$.fragment,Ut),E(Mt.$$.fragment,Ut),St=!0)},o(Ut){P(t.$$.fragment,Ut),P(l.$$.fragment,Ut),P(S.$$.fragment,Ut),P(L.$$.fragment,Ut),P(fe.$$.fragment,Ut),P(X.$$.fragment,Ut),P(Mt.$$.fragment,Ut),St=!1},d(Ut){Ut&&I(e),Z(t),Z(l),Z(S),Z(L),Z(fe),Z(X),Z(Mt)}}}function dM(i,e,n){let{slug:t}=e;const r=dl(),s=()=>r("sideMenuItemClicked"),o=()=>r("sideMenuItemClicked"),a=()=>r("sideMenuItemClicked"),l=()=>r("sideMenuItemClicked"),f=()=>r("sideMenuItemClicked"),m=()=>r("sideMenuItemClicked");return i.$$set=g=>{"slug"in g&&n(0,t=g.slug)},[t,r,s,o,a,l,f,m]}class M2 extends Xe{constructor(e){super(),Je(this,e,dM,fM,Ze,{slug:0})}}function hM(i){let e,n,t;return n=new M2({props:{slug:i[0]}}),n.$on("sideMenuItemClicked",i[1]),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","hidden w-64 h-full flex-col md:flex shrink-0")},m(r,s){N(r,e,s),G(n,e,null),t=!0},p(r,[s]){const o={};s&1&&(o.slug=r[0]),n.$set(o)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function mM(i,e,n){let{slug:t}=e;function r(s){At.call(this,i,s)}return i.$$set=s=>{"slug"in s&&n(0,t=s.slug)},[t,r]}class pM extends Xe{constructor(e){super(),Je(this,e,mM,hM,Ze,{slug:0})}}function _M(i){let e,n,t;return n=new M2({props:{slug:i[1]}}),n.$on("sideMenuItemClicked",i[2]),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","absolute left-0 z-20 flex h-full w-64 flex-col transition-all md:hidden shrink-0 bg-background svelte-v8wrex"),zi(e,"menuClosed",i[0])},m(r,s){N(r,e,s),G(n,e,null),t=!0},p(r,[s]){const o={};s&2&&(o.slug=r[1]),n.$set(o),(!t||s&1)&&zi(e,"menuClosed",r[0])},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function gM(i,e,n){let{menuClosed:t}=e,{slug:r}=e;function s(o){At.call(this,i,o)}return i.$$set=o=>{"menuClosed"in o&&n(0,t=o.menuClosed),"slug"in o&&n(1,r=o.slug)},[t,r,s]}class vM extends Xe{constructor(e){super(),Je(this,e,gM,_M,Ze,{menuClosed:0,slug:1})}}function bM(i){let e,n,t,r;return e=new pM({props:{slug:i[1]}}),e.$on("sideMenuItemClicked",i[2]),t=new vM({props:{menuClosed:i[0],slug:i[1]}}),t.$on("sideMenuItemClicked",i[2]),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,[o]){const a={};o&2&&(a.slug=s[1]),e.$set(a);const l={};o&1&&(l.menuClosed=s[0]),o&2&&(l.slug=s[1]),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function yM(i,e,n){let{menuClosed:t}=e,{slug:r}=e;const s=()=>n(0,t=!0);return i.$$set=o=>{"menuClosed"in o&&n(0,t=o.menuClosed),"slug"in o&&n(1,r=o.slug)},[t,r,s]}class wM extends Xe{constructor(e){super(),Je(this,e,yM,bM,Ze,{menuClosed:0,slug:1})}}const Tp=Symbol.for("svelte-maplibre");function Ac(){return Tr(Tp)}function xM(i){let e=new WeakMap;return n=>{var o;let t=e.get(n.originalEvent);if(t!==void 0)return t;let s=(o=n.target.queryRenderedFeatures(n.point).find(a=>{var l;return(l=i.get(a.layer.id))==null?void 0:l.interactive}))==null?void 0:o.layer.id;return e.set(n.originalEvent,s),s}}function kM(){let i=new Map;return Ar(Tp,{map:wn(null),source:As(null),layer:As(null),popupTarget:As(null),cluster:wn(),loadedImages:wn(new Set),minzoom:wn(0),maxzoom:wn(24),layerEvent:wn(null),layerInfo:i,eventTopMost:xM(i)})}function G0(i){return{subscribe:i.subscribe}}function CM({key:i,setPopupTarget:e=!1,setCluster:n=!1,setMouseEvent:t=!1}){let r=Ac(),s=wn(null),o=G0(s),a={...r,[i]:G0(s)};if(e&&(a.popupTarget=o),t){let l=wn(null);a.layerEvent=l,r.layerEvent=l}return n&&(a.cluster=wn()),Ar(Tp,a),{...r,self:s}}function TM(){return CM({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function SM(i){return"layerType"in i&&i.layerType==="deckgl"}var D2={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.3/LICENSE.txt
 */(function(i,e){(function(n,t){i.exports=t()})(MC,function(){var n={},t={};function r(o,a,l){if(t[o]=l,o==="index"){var f="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",m={};return t.shared(m),t.index(n,m),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([f],{type:"text/javascript"}))),n}}r("shared",["exports"],function(o){function a(d,c,h,_){return new(h||(h=Promise))(function(y,C){function T(V){try{R(_.next(V))}catch(K){C(K)}}function A(V){try{R(_.throw(V))}catch(K){C(K)}}function R(V){var K;V.done?y(V.value):(K=V.value,K instanceof h?K:new h(function(J){J(K)})).then(T,A)}R((_=_.apply(d,c||[])).next())})}function l(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}typeof SuppressedError=="function"&&SuppressedError;var f=m;function m(d,c){this.x=d,this.y=c}m.prototype={clone:function(){return new m(this.x,this.y)},add:function(d){return this.clone()._add(d)},sub:function(d){return this.clone()._sub(d)},multByPoint:function(d){return this.clone()._multByPoint(d)},divByPoint:function(d){return this.clone()._divByPoint(d)},mult:function(d){return this.clone()._mult(d)},div:function(d){return this.clone()._div(d)},rotate:function(d){return this.clone()._rotate(d)},rotateAround:function(d,c){return this.clone()._rotateAround(d,c)},matMult:function(d){return this.clone()._matMult(d)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(d){return this.x===d.x&&this.y===d.y},dist:function(d){return Math.sqrt(this.distSqr(d))},distSqr:function(d){var c=d.x-this.x,h=d.y-this.y;return c*c+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(d){return Math.atan2(this.y-d.y,this.x-d.x)},angleWith:function(d){return this.angleWithSep(d.x,d.y)},angleWithSep:function(d,c){return Math.atan2(this.x*c-this.y*d,this.x*d+this.y*c)},_matMult:function(d){var c=d[2]*this.x+d[3]*this.y;return this.x=d[0]*this.x+d[1]*this.y,this.y=c,this},_add:function(d){return this.x+=d.x,this.y+=d.y,this},_sub:function(d){return this.x-=d.x,this.y-=d.y,this},_mult:function(d){return this.x*=d,this.y*=d,this},_div:function(d){return this.x/=d,this.y/=d,this},_multByPoint:function(d){return this.x*=d.x,this.y*=d.y,this},_divByPoint:function(d){return this.x/=d.x,this.y/=d.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var d=this.y;return this.y=this.x,this.x=-d,this},_rotate:function(d){var c=Math.cos(d),h=Math.sin(d),_=h*this.x+c*this.y;return this.x=c*this.x-h*this.y,this.y=_,this},_rotateAround:function(d,c){var h=Math.cos(d),_=Math.sin(d),y=c.y+_*(this.x-c.x)+h*(this.y-c.y);return this.x=c.x+h*(this.x-c.x)-_*(this.y-c.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},m.convert=function(d){return d instanceof m?d:Array.isArray(d)?new m(d[0],d[1]):d};var g=l(f),w=S;function S(d,c,h,_){this.cx=3*d,this.bx=3*(h-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(_-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=c,this.p2x=h,this.p2y=_}S.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,c){if(c===void 0&&(c=1e-6),d<0)return 0;if(d>1)return 1;for(var h=d,_=0;_<8;_++){var y=this.sampleCurveX(h)-d;if(Math.abs(y)<c)return h;var C=this.sampleCurveDerivativeX(h);if(Math.abs(C)<1e-6)break;h-=y/C}var T=0,A=1;for(h=d,_=0;_<20&&(y=this.sampleCurveX(h),!(Math.abs(y-d)<c));_++)d>y?T=h:A=h,h=.5*(A-T)+T;return h},solve:function(d,c){return this.sampleCurveY(this.solveCurveX(d,c))}};var M=l(w);let $,D;function F(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function L(){if(D==null&&(D=!1,F())){const c=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(c){for(let _=0;_<5*5;_++){const y=4*_;c.fillStyle=`rgb(${y},${y+1},${y+2})`,c.fillRect(_%5,Math.floor(_/5),1,1)}const h=c.getImageData(0,0,5,5).data;for(let _=0;_<5*5*4;_++)if(_%4!=3&&h[_]!==_){D=!0;break}}}return D||!1}function U(d,c,h,_){const y=new M(d,c,h,_);return function(C){return y.solve(C)}}const ne=U(.25,.1,.25,1);function se(d,c,h){return Math.min(h,Math.max(c,d))}function ee(d,c,h){const _=h-c,y=((d-c)%_+_)%_+c;return y===c?h:y}function fe(d,...c){for(const h of c)for(const _ in h)d[_]=h[_];return d}let _e=1;function re(d,c,h){const _={};for(const y in d)_[y]=c.call(h||this,d[y],y,d);return _}function de(d,c,h){const _={};for(const y in d)c.call(h||this,d[y],y,d)&&(_[y]=d[y]);return _}function he(d){return Array.isArray(d)?d.map(he):typeof d=="object"&&d?re(d,he):d}const X={};function j(d){X[d]||(typeof console<"u"&&console.warn(d),X[d]=!0)}function xe(d,c,h){return(h.y-d.y)*(c.x-d.x)>(c.y-d.y)*(h.x-d.x)}function ze(d){let c=0;for(let h,_,y=0,C=d.length,T=C-1;y<C;T=y++)h=d[y],_=d[T],c+=(_.x-h.x)*(h.y+_.y);return c}function ve(d){return typeof WorkerGlobalScope<"u"&&d!==void 0&&d instanceof WorkerGlobalScope}let We=null;function pt(d){return typeof ImageBitmap<"u"&&d instanceof ImageBitmap}const Mt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function St(d,c,h,_,y){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const C=new VideoFrame(d,{timestamp:0});try{const T=C==null?void 0:C.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const A=T.startsWith("BGR"),R=new Uint8ClampedArray(_*y*4);if(yield C.copyTo(R,function(V,K,J,ae,pe){const be=4*Math.max(-K,0),Se=(Math.max(0,J)-J)*ae*4+be,Ae=4*ae,Re=Math.max(0,K),ot=Math.max(0,J);return{rect:{x:Re,y:ot,width:Math.min(V.width,K+ae)-Re,height:Math.min(V.height,J+pe)-ot},layout:[{offset:Se,stride:Ae}]}}(d,c,h,_,y)),A)for(let V=0;V<R.length;V+=4){const K=R[V];R[V]=R[V+2],R[V+2]=K}return R}finally{C.close()}})}let Dt,zt;const _t="AbortError";function ft(){return new Error(_t)}const Be={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ut(d){return Be.REGISTERED_PROTOCOLS[d.substring(0,d.indexOf("://"))]}const Rt="global-dispatcher";class qt extends Error{constructor(c,h,_,y){super(`AJAXError: ${h} (${c}): ${_}`),this.status=c,this.statusText=h,this.url=_,this.body=y}}const et=()=>ve(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,dt=function(d,c){if(/:\/\//.test(d.url)&&!/^https?:|^file:/.test(d.url)){const _=Ut(d.url);if(_)return _(d,c);if(ve(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,targetMapId:Rt},c)}if(!(/^file:/.test(h=d.url)||/^file:/.test(et())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(_,y){return a(this,void 0,void 0,function*(){const C=new Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,cache:_.cache,referrer:et(),signal:y.signal});_.type==="json"&&C.headers.set("Accept","application/json");const T=yield fetch(C);if(!T.ok){const V=yield T.blob();throw new qt(T.status,T.statusText,_.url,V)}let A;A=_.type==="arrayBuffer"||_.type==="image"?T.arrayBuffer():_.type==="json"?T.json():T.text();const R=yield A;if(y.signal.aborted)throw ft();return{data:R,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}})}(d,c);if(ve(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:d,mustQueue:!0,targetMapId:Rt},c)}var h;return function(_,y){return new Promise((C,T)=>{const A=new XMLHttpRequest;A.open(_.method||"GET",_.url,!0),_.type!=="arrayBuffer"&&_.type!=="image"||(A.responseType="arraybuffer");for(const R in _.headers)A.setRequestHeader(R,_.headers[R]);_.type==="json"&&(A.responseType="text",A.setRequestHeader("Accept","application/json")),A.withCredentials=_.credentials==="include",A.onerror=()=>{T(new Error(A.statusText))},A.onload=()=>{if(!y.signal.aborted)if((A.status>=200&&A.status<300||A.status===0)&&A.response!==null){let R=A.response;if(_.type==="json")try{R=JSON.parse(A.response)}catch(V){return void T(V)}C({data:R,cacheControl:A.getResponseHeader("Cache-Control"),expires:A.getResponseHeader("Expires")})}else{const R=new Blob([A.response],{type:A.getResponseHeader("Content-Type")});T(new qt(A.status,A.statusText,_.url,R))}},y.signal.addEventListener("abort",()=>{A.abort(),T(ft())}),A.send(_.body)})}(d,c)};function yt(d){if(!d||d.indexOf("://")<=0||d.indexOf("data:image/")===0||d.indexOf("blob:")===0)return!0;const c=new URL(d),h=window.location;return c.protocol===h.protocol&&c.host===h.host}function Ue(d,c,h){h[d]&&h[d].indexOf(c)!==-1||(h[d]=h[d]||[],h[d].push(c))}function kt(d,c,h){if(h&&h[d]){const _=h[d].indexOf(c);_!==-1&&h[d].splice(_,1)}}class Ge{constructor(c,h={}){fe(this,h),this.type=c}}class Xt extends Ge{constructor(c,h={}){super("error",fe({error:c},h))}}class En{on(c,h){return this._listeners=this._listeners||{},Ue(c,h,this._listeners),this}off(c,h){return kt(c,h,this._listeners),kt(c,h,this._oneTimeListeners),this}once(c,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Ue(c,h,this._oneTimeListeners),this):new Promise(_=>this.once(c,_))}fire(c,h){typeof c=="string"&&(c=new Ge(c,h||{}));const _=c.type;if(this.listens(_)){c.target=this;const y=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const A of y)A.call(this,c);const C=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const A of C)kt(_,A,this._oneTimeListeners),A.call(this,c);const T=this._eventedParent;T&&(fe(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(c))}else c instanceof Xt&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,h){return this._eventedParent=c,this._eventedParentData=h,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const un=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qn(d,c){const h={};for(const _ in d)_!=="ref"&&(h[_]=d[_]);return un.forEach(_=>{_ in c&&(h[_]=c[_])}),h}function _n(d,c){if(Array.isArray(d)){if(!Array.isArray(c)||d.length!==c.length)return!1;for(let h=0;h<d.length;h++)if(!_n(d[h],c[h]))return!1;return!0}if(typeof d=="object"&&d!==null&&c!==null){if(typeof c!="object"||Object.keys(d).length!==Object.keys(c).length)return!1;for(const h in d)if(!_n(d[h],c[h]))return!1;return!0}return d===c}function mt(d,c){d.push(c)}function Zt(d,c,h){mt(h,{command:"addSource",args:[d,c[d]]})}function Kt(d,c,h){mt(c,{command:"removeSource",args:[d]}),h[d]=!0}function en(d,c,h,_){Kt(d,h,_),Zt(d,c,h)}function Pn(d,c,h){let _;for(_ in d[h])if(Object.prototype.hasOwnProperty.call(d[h],_)&&_!=="data"&&!_n(d[h][_],c[h][_]))return!1;for(_ in c[h])if(Object.prototype.hasOwnProperty.call(c[h],_)&&_!=="data"&&!_n(d[h][_],c[h][_]))return!1;return!0}function Vn(d,c,h,_,y,C){d=d||{},c=c||{};for(const T in d)Object.prototype.hasOwnProperty.call(d,T)&&(_n(d[T],c[T])||h.push({command:C,args:[_,T,c[T],y]}));for(const T in c)Object.prototype.hasOwnProperty.call(c,T)&&!Object.prototype.hasOwnProperty.call(d,T)&&(_n(d[T],c[T])||h.push({command:C,args:[_,T,c[T],y]}))}function yi(d){return d.id}function wt(d,c){return d[c.id]=c,d}class $t{constructor(c,h,_,y){this.message=(c?`${c}: `:"")+_,y&&(this.identifier=y),h!=null&&h.__line__&&(this.line=h.__line__)}}function Hn(d,...c){for(const h of c)for(const _ in h)d[_]=h[_];return d}class Mn extends Error{constructor(c,h){super(h),this.message=h,this.key=c}}class ei{constructor(c,h=[]){this.parent=c,this.bindings={};for(const[_,y]of h)this.bindings[_]=y}concat(c){return new ei(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const xi={kind:"null"},tn={kind:"number"},Un={kind:"string"},Nn={kind:"boolean"},On={kind:"color"},hi={kind:"object"},Tn={kind:"value"},ti={kind:"collator"},bn={kind:"formatted"},Ee={kind:"padding"},ie={kind:"resolvedImage"},le={kind:"variableAnchorOffsetCollection"};function ye(d,c){return{kind:"array",itemType:d,N:c}}function Ie(d){if(d.kind==="array"){const c=Ie(d.itemType);return typeof d.N=="number"?`array<${c}, ${d.N}>`:d.itemType.kind==="value"?"array":`array<${c}>`}return d.kind}const qe=[xi,tn,Un,Nn,On,bn,hi,ye(Tn),Ee,ie,le];function He(d,c){if(c.kind==="error")return null;if(d.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!He(d.itemType,c.itemType))&&(typeof d.N!="number"||d.N===c.N))return null}else{if(d.kind===c.kind)return null;if(d.kind==="value"){for(const h of qe)if(!He(h,c))return null}}return`Expected ${Ie(d)} but found ${Ie(c)} instead.`}function st(d,c){return c.some(h=>h.kind===d.kind)}function Ve(d,c){return c.some(h=>h==="null"?d===null:h==="array"?Array.isArray(d):h==="object"?d&&!Array.isArray(d)&&typeof d=="object":h===typeof d)}function ht(d,c){return d.kind==="array"&&c.kind==="array"?d.itemType.kind===c.itemType.kind&&typeof d.N=="number":d.kind===c.kind}const Vt=.96422,Lt=.82521,Ft=4/29,Sn=6/29,$n=3*Sn*Sn,Kn=Sn*Sn*Sn,jn=Math.PI/180,ai=180/Math.PI;function gi(d){return(d%=360)<0&&(d+=360),d}function Si([d,c,h,_]){let y,C;const T=Yn((.2225045*(d=er(d))+.7168786*(c=er(c))+.0606169*(h=er(h)))/1);d===c&&c===h?y=C=T:(y=Yn((.4360747*d+.3850649*c+.1430804*h)/Vt),C=Yn((.0139322*d+.0971045*c+.7141733*h)/Lt));const A=116*T-16;return[A<0?0:A,500*(y-T),200*(T-C),_]}function er(d){return d<=.04045?d/12.92:Math.pow((d+.055)/1.055,2.4)}function Yn(d){return d>Kn?Math.pow(d,1/3):d/$n+Ft}function Fi([d,c,h,_]){let y=(d+16)/116,C=isNaN(c)?y:y+c/500,T=isNaN(h)?y:y-h/200;return y=1*Dr(y),C=Vt*Dr(C),T=Lt*Dr(T),[cr(3.1338561*C-1.6168667*y-.4906146*T),cr(-.9787684*C+1.9161415*y+.033454*T),cr(.0719453*C-.2289914*y+1.4052427*T),_]}function cr(d){return(d=d<=.00304?12.92*d:1.055*Math.pow(d,1/2.4)-.055)<0?0:d>1?1:d}function Dr(d){return d>Sn?d*d*d:$n*(d-Ft)}function Vr(d){return parseInt(d.padEnd(2,d),16)/255}function yr(d,c){return Ds(c?d/100:d,0,1)}function Ds(d,c,h){return Math.min(Math.max(c,d),h)}function gf(d){return!d.some(Number.isNaN)}const xh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class mi{constructor(c,h,_,y=1,C=!0){this.r=c,this.g=h,this.b=_,this.a=y,C||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[c,h,_,y]))}static parse(c){if(c instanceof mi)return c;if(typeof c!="string")return;const h=function(_){if((_=_.toLowerCase().trim())==="transparent")return[0,0,0,0];const y=xh[_];if(y){const[T,A,R]=y;return[T/255,A/255,R/255,1]}if(_.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(_)){const T=_.length<6?1:2;let A=1;return[Vr(_.slice(A,A+=T)),Vr(_.slice(A,A+=T)),Vr(_.slice(A,A+=T)),Vr(_.slice(A,A+T)||"ff")]}if(_.startsWith("rgb")){const T=_.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[A,R,V,K,J,ae,pe,be,Se,Ae,Re,ot]=T,Ne=[K||" ",pe||" ",Ae].join("");if(Ne==="  "||Ne==="  /"||Ne===",,"||Ne===",,,"){const Ye=[V,ae,Se].join(""),Ot=Ye==="%%%"?100:Ye===""?255:0;if(Ot){const Bt=[Ds(+R/Ot,0,1),Ds(+J/Ot,0,1),Ds(+be/Ot,0,1),Re?yr(+Re,ot):1];if(gf(Bt))return Bt}}return}}const C=_.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[T,A,R,V,K,J,ae,pe,be]=C,Se=[R||" ",K||" ",ae].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const Ae=[+A,Ds(+V,0,100),Ds(+J,0,100),pe?yr(+pe,be):1];if(gf(Ae))return function([Re,ot,Ne,Ye]){function Ot(Bt){const fn=(Bt+Re/30)%12,vn=ot*Math.min(Ne,1-Ne);return Ne-vn*Math.max(-1,Math.min(fn-3,9-fn,1))}return Re=gi(Re),ot/=100,Ne/=100,[Ot(0),Ot(8),Ot(4),Ye]}(Ae)}}}(c);return h?new mi(...h,!1):void 0}get rgb(){const{r:c,g:h,b:_,a:y}=this,C=y||1/0;return this.overwriteGetter("rgb",[c/C,h/C,_/C,y])}get hcl(){return this.overwriteGetter("hcl",function(c){const[h,_,y,C]=Si(c),T=Math.sqrt(_*_+y*y);return[Math.round(1e4*T)?gi(Math.atan2(y,_)*ai):NaN,T,h,C]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Si(this.rgb))}overwriteGetter(c,h){return Object.defineProperty(this,c,{value:h}),h}toString(){const[c,h,_,y]=this.rgb;return`rgba(${[c,h,_].map(C=>Math.round(255*C)).join(",")},${y})`}}mi.black=new mi(0,0,0,1),mi.white=new mi(1,1,1,1),mi.transparent=new mi(0,0,0,0),mi.red=new mi(1,0,0,1);class zc{constructor(c,h,_){this.sensitivity=c?h?"variant":"case":h?"accent":"base",this.locale=_,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,h){return this.collator.compare(c,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Rc{constructor(c,h,_,y,C){this.text=c,this.image=h,this.scale=_,this.fontStack=y,this.textColor=C}}class ns{constructor(c){this.sections=c}static fromString(c){return new ns([new Rc(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof ns?c:ns.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class jr{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof jr)return c;if(typeof c=="number")return new jr([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const h of c)if(typeof h!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new jr(c)}}toString(){return JSON.stringify(this.values)}}const Ea=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class hs{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof hs)return c;if(Array.isArray(c)&&!(c.length<1)&&c.length%2==0){for(let h=0;h<c.length;h+=2){const _=c[h],y=c[h+1];if(typeof _!="string"||!Ea.has(_)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new hs(c)}}toString(){return JSON.stringify(this.values)}}class ms{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new ms({name:c,available:!1}):null}}function Xo(d,c,h,_){return typeof d=="number"&&d>=0&&d<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof h=="number"&&h>=0&&h<=255?_===void 0||typeof _=="number"&&_>=0&&_<=1?null:`Invalid rgba value [${[d,c,h,_].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof _=="number"?[d,c,h,_]:[d,c,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function yl(d){if(d===null||typeof d=="string"||typeof d=="boolean"||typeof d=="number"||d instanceof mi||d instanceof zc||d instanceof ns||d instanceof jr||d instanceof hs||d instanceof ms)return!0;if(Array.isArray(d)){for(const c of d)if(!yl(c))return!1;return!0}if(typeof d=="object"){for(const c in d)if(!yl(d[c]))return!1;return!0}return!1}function tr(d){if(d===null)return xi;if(typeof d=="string")return Un;if(typeof d=="boolean")return Nn;if(typeof d=="number")return tn;if(d instanceof mi)return On;if(d instanceof zc)return ti;if(d instanceof ns)return bn;if(d instanceof jr)return Ee;if(d instanceof hs)return le;if(d instanceof ms)return ie;if(Array.isArray(d)){const c=d.length;let h;for(const _ of d){const y=tr(_);if(h){if(h===y)continue;h=Tn;break}h=y}return ye(h||Tn,c)}return hi}function Ia(d){const c=typeof d;return d===null?"":c==="string"||c==="number"||c==="boolean"?String(d):d instanceof mi||d instanceof ns||d instanceof jr||d instanceof hs||d instanceof ms?d.toString():JSON.stringify(d)}class no{constructor(c,h){this.type=c,this.value=h}static parse(c,h){if(c.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!yl(c[1]))return h.error("invalid value");const _=c[1];let y=tr(_);const C=h.expectedType;return y.kind!=="array"||y.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(y=C),new no(y,_)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ai{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const wl={string:Un,number:tn,boolean:Nn,object:hi};class is{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");let _,y=1;const C=c[0];if(C==="array"){let A,R;if(c.length>2){const V=c[1];if(typeof V!="string"||!(V in wl)||V==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);A=wl[V],y++}else A=Tn;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return h.error('The length argument to "array" must be a positive integer literal',2);R=c[2],y++}_=ye(A,R)}else{if(!wl[C])throw new Error(`Types doesn't contain name = ${C}`);_=wl[C]}const T=[];for(;y<c.length;y++){const A=h.parse(c[y],y,Tn);if(!A)return null;T.push(A)}return new is(_,T)}evaluate(c){for(let h=0;h<this.args.length;h++){const _=this.args[h].evaluate(c);if(!He(this.type,tr(_)))return _;if(h===this.args.length-1)throw new Ai(`Expected value to be of type ${Ie(this.type)}, but found ${Ie(tr(_))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const xl={"to-boolean":Nn,"to-color":On,"to-number":tn,"to-string":Un};class Os{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");const _=c[0];if(!xl[_])throw new Error(`Can't parse ${_} as it is not part of the known types`);if((_==="to-boolean"||_==="to-string")&&c.length!==2)return h.error("Expected one argument.");const y=xl[_],C=[];for(let T=1;T<c.length;T++){const A=h.parse(c[T],T,Tn);if(!A)return null;C.push(A)}return new Os(y,C)}evaluate(c){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(c);case"color":{let h,_;for(const y of this.args){if(h=y.evaluate(c),_=null,h instanceof mi)return h;if(typeof h=="string"){const C=c.parseColor(h);if(C)return C}else if(Array.isArray(h)&&(_=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Xo(h[0],h[1],h[2],h[3]),!_))return new mi(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Ai(_||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const _ of this.args){h=_.evaluate(c);const y=jr.parse(h);if(y)return y}throw new Ai(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const _ of this.args){h=_.evaluate(c);const y=hs.parse(h);if(y)return y}throw new Ai(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const _ of this.args){if(h=_.evaluate(c),h===null)return 0;const y=Number(h);if(!isNaN(y))return y}throw new Ai(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return ns.fromString(Ia(this.args[0].evaluate(c)));case"resolvedImage":return ms.fromString(Ia(this.args[0].evaluate(c)));default:return Ia(this.args[0].evaluate(c))}}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Pa=["Unknown","Point","LineString","Polygon"];class pi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pa[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let h=this._parseColorCache[c];return h||(h=this._parseColorCache[c]=mi.parse(c)),h}}class kl{constructor(c,h,_=[],y,C=new ei,T=[]){this.registry=c,this.path=_,this.key=_.map(A=>`[${A}]`).join(""),this.scope=C,this.errors=T,this.expectedType=y,this._isConstant=h}parse(c,h,_,y,C={}){return h?this.concat(h,_,y)._parse(c,C):this._parse(c,C)}_parse(c,h){function _(y,C,T){return T==="assert"?new is(C,[y]):T==="coerce"?new Os(C,[y]):y}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=c[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[y];if(C){let T=C.parse(c,this);if(!T)return null;if(this.expectedType){const A=this.expectedType,R=T.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||R.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||R.kind!=="value"&&R.kind!=="string")if(A.kind!=="padding"||R.kind!=="value"&&R.kind!=="number"&&R.kind!=="array")if(A.kind!=="variableAnchorOffsetCollection"||R.kind!=="value"&&R.kind!=="array"){if(this.checkSubtype(A,R))return null}else T=_(T,A,h.typeAnnotation||"coerce");else T=_(T,A,h.typeAnnotation||"coerce");else T=_(T,A,h.typeAnnotation||"coerce");else T=_(T,A,h.typeAnnotation||"assert")}if(!(T instanceof no)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const A=new pi;try{T=new no(T.type,T.evaluate(A))}catch(R){return this.error(R.message),null}}return T}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,h,_){const y=typeof c=="number"?this.path.concat(c):this.path,C=_?this.scope.concat(_):this.scope;return new kl(this.registry,this._isConstant,y,h||null,C,this.errors)}error(c,...h){const _=`${this.key}${h.map(y=>`[${y}]`).join("")}`;this.errors.push(new Mn(_,c))}checkSubtype(c,h){const _=He(c,h);return _&&this.error(_),_}}class Jo{constructor(c,h,_){this.type=ti,this.locale=_,this.caseSensitive=c,this.diacriticSensitive=h}static parse(c,h){if(c.length!==2)return h.error("Expected one argument.");const _=c[1];if(typeof _!="object"||Array.isArray(_))return h.error("Collator options argument must be an object.");const y=h.parse(_["case-sensitive"]!==void 0&&_["case-sensitive"],1,Nn);if(!y)return null;const C=h.parse(_["diacritic-sensitive"]!==void 0&&_["diacritic-sensitive"],1,Nn);if(!C)return null;let T=null;return _.locale&&(T=h.parse(_.locale,1,Un),!T)?null:new Jo(y,C,T)}evaluate(c){return new zc(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}const io=8192;function Cl(d,c){d[0]=Math.min(d[0],c[0]),d[1]=Math.min(d[1],c[1]),d[2]=Math.max(d[2],c[0]),d[3]=Math.max(d[3],c[1])}function $a(d,c){return!(d[0]<=c[0]||d[2]>=c[2]||d[1]<=c[1]||d[3]>=c[3])}function kh(d,c){const h=(180+d[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d[1]*Math.PI/360)))/360,y=Math.pow(2,c.z);return[Math.round(h*y*io),Math.round(_*y*io)]}function vf(d,c,h){const _=d[0]-c[0],y=d[1]-c[1],C=d[0]-h[0],T=d[1]-h[1];return _*T-C*y==0&&_*C<=0&&y*T<=0}function Tl(d,c){let h=!1;for(let T=0,A=c.length;T<A;T++){const R=c[T];for(let V=0,K=R.length;V<K-1;V++){if(vf(d,R[V],R[V+1]))return!1;(y=R[V])[1]>(_=d)[1]!=(C=R[V+1])[1]>_[1]&&_[0]<(C[0]-y[0])*(_[1]-y[1])/(C[1]-y[1])+y[0]&&(h=!h)}}var _,y,C;return h}function Ch(d,c){for(let h=0;h<c.length;h++)if(Tl(d,c[h]))return!0;return!1}function bf(d,c,h,_){const y=_[0]-h[0],C=_[1]-h[1],T=(d[0]-h[0])*C-y*(d[1]-h[1]),A=(c[0]-h[0])*C-y*(c[1]-h[1]);return T>0&&A<0||T<0&&A>0}function Th(d,c,h){for(const V of h)for(let K=0;K<V.length-1;++K)if((A=[(T=V[K+1])[0]-(C=V[K])[0],T[1]-C[1]])[0]*(R=[(y=c)[0]-(_=d)[0],y[1]-_[1]])[1]-A[1]*R[0]!=0&&bf(_,y,C,T)&&bf(C,T,_,y))return!0;var _,y,C,T,A,R;return!1}function yf(d,c){for(let h=0;h<d.length;++h)if(!Tl(d[h],c))return!1;for(let h=0;h<d.length-1;++h)if(Th(d[h],d[h+1],c))return!1;return!0}function wf(d,c){for(let h=0;h<c.length;h++)if(yf(d,c[h]))return!0;return!1}function Sl(d,c,h){const _=[];for(let y=0;y<d.length;y++){const C=[];for(let T=0;T<d[y].length;T++){const A=kh(d[y][T],h);Cl(c,A),C.push(A)}_.push(C)}return _}function xf(d,c,h){const _=[];for(let y=0;y<d.length;y++){const C=Sl(d[y],c,h);_.push(C)}return _}function kf(d,c,h,_){if(d[0]<h[0]||d[0]>h[2]){const y=.5*_;let C=d[0]-h[0]>y?-_:h[0]-d[0]>y?_:0;C===0&&(C=d[0]-h[2]>y?-_:h[2]-d[0]>y?_:0),d[0]+=C}Cl(c,d)}function El(d,c,h,_){const y=Math.pow(2,_.z)*io,C=[_.x*io,_.y*io],T=[];for(const A of d)for(const R of A){const V=[R.x+C[0],R.y+C[1]];kf(V,c,h,y),T.push(V)}return T}function Cf(d,c,h,_){const y=Math.pow(2,_.z)*io,C=[_.x*io,_.y*io],T=[];for(const R of d){const V=[];for(const K of R){const J=[K.x+C[0],K.y+C[1]];Cl(c,J),V.push(J)}T.push(V)}if(c[2]-c[0]<=y/2){(A=c)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const R of T)for(const V of R)kf(V,c,h,y)}var A;return T}class Eo{constructor(c,h){this.type=Nn,this.geojson=c,this.geometries=h}static parse(c,h){if(c.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(yl(c[1])){const _=c[1];if(_.type==="FeatureCollection"){const y=[];for(const C of _.features){const{type:T,coordinates:A}=C.geometry;T==="Polygon"&&y.push(A),T==="MultiPolygon"&&y.push(...A)}if(y.length)return new Eo(_,{type:"MultiPolygon",coordinates:y})}else if(_.type==="Feature"){const y=_.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Eo(_,_.geometry)}else if(_.type==="Polygon"||_.type==="MultiPolygon")return new Eo(_,_)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(h,_){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],T=h.canonicalID();if(_.type==="Polygon"){const A=Sl(_.coordinates,C,T),R=El(h.geometry(),y,C,T);if(!$a(y,C))return!1;for(const V of R)if(!Tl(V,A))return!1}if(_.type==="MultiPolygon"){const A=xf(_.coordinates,C,T),R=El(h.geometry(),y,C,T);if(!$a(y,C))return!1;for(const V of R)if(!Ch(V,A))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(h,_){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],T=h.canonicalID();if(_.type==="Polygon"){const A=Sl(_.coordinates,C,T),R=Cf(h.geometry(),y,C,T);if(!$a(y,C))return!1;for(const V of R)if(!yf(V,A))return!1}if(_.type==="MultiPolygon"){const A=xf(_.coordinates,C,T),R=Cf(h.geometry(),y,C,T);if(!$a(y,C))return!1;for(const V of R)if(!wf(V,A))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Il{constructor(c,h){this.type=h.type,this.name=c,this.boundExpression=h}static parse(c,h){if(c.length!==2||typeof c[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const _=c[1];return h.scope.has(_)?new Il(_,h.scope.get(_)):h.error(`Unknown variable "${_}". Make sure "${_}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class rs{constructor(c,h,_,y){this.name=c,this.type=h,this._evaluate=_,this.args=y}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,h){const _=c[0],y=rs.definitions[_];if(!y)return h.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(y)?y[0]:y.type,T=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,A=T.filter(([V])=>!Array.isArray(V)||V.length===c.length-1);let R=null;for(const[V,K]of A){R=new kl(h.registry,Aa,h.path,null,h.scope);const J=[];let ae=!1;for(let pe=1;pe<c.length;pe++){const be=c[pe],Se=Array.isArray(V)?V[pe-1]:V.type,Ae=R.parse(be,1+J.length,Se);if(!Ae){ae=!0;break}J.push(Ae)}if(!ae)if(Array.isArray(V)&&V.length!==J.length)R.error(`Expected ${V.length} arguments, but found ${J.length} instead.`);else{for(let pe=0;pe<J.length;pe++){const be=Array.isArray(V)?V[pe]:V.type,Se=J[pe];R.concat(pe+1).checkSubtype(be,Se.type)}if(R.errors.length===0)return new rs(_,C,K,J)}}if(A.length===1)h.errors.push(...R.errors);else{const V=(A.length?A:T).map(([J])=>{return ae=J,Array.isArray(ae)?`(${ae.map(Ie).join(", ")})`:`(${Ie(ae.type)}...)`;var ae}).join(" | "),K=[];for(let J=1;J<c.length;J++){const ae=h.parse(c[J],1+K.length);if(!ae)return null;K.push(Ie(ae.type))}h.error(`Expected arguments of type ${V}, but found (${K.join(", ")}) instead.`)}return null}static register(c,h){rs.definitions=h;for(const _ in h)c[_]=rs}}function Aa(d){if(d instanceof Il)return Aa(d.boundExpression);if(d instanceof rs&&d.name==="error"||d instanceof Jo||d instanceof Eo)return!1;const c=d instanceof Os||d instanceof is;let h=!0;return d.eachChild(_=>{h=c?h&&Aa(_):h&&_ instanceof no}),!!h&&Pl(d)&&Da(d,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Pl(d){if(d instanceof rs&&(d.name==="get"&&d.args.length===1||d.name==="feature-state"||d.name==="has"&&d.args.length===1||d.name==="properties"||d.name==="geometry-type"||d.name==="id"||/^filter-/.test(d.name))||d instanceof Eo)return!1;let c=!0;return d.eachChild(h=>{c&&!Pl(h)&&(c=!1)}),c}function Ma(d){if(d instanceof rs&&d.name==="feature-state")return!1;let c=!0;return d.eachChild(h=>{c&&!Ma(h)&&(c=!1)}),c}function Da(d,c){if(d instanceof rs&&c.indexOf(d.name)>=0)return!1;let h=!0;return d.eachChild(_=>{h&&!Da(_,c)&&(h=!1)}),h}function Oa(d,c){const h=d.length-1;let _,y,C=0,T=h,A=0;for(;C<=T;)if(A=Math.floor((C+T)/2),_=d[A],y=d[A+1],_<=c){if(A===h||c<y)return A;C=A+1}else{if(!(_>c))throw new Ai("Input is not a number.");T=A-1}return 0}class za{constructor(c,h,_){this.type=c,this.input=h,this.labels=[],this.outputs=[];for(const[y,C]of _)this.labels.push(y),this.outputs.push(C)}static parse(c,h){if(c.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return h.error("Expected an even number of arguments.");const _=h.parse(c[1],1,tn);if(!_)return null;const y=[];let C=null;h.expectedType&&h.expectedType.kind!=="value"&&(C=h.expectedType);for(let T=1;T<c.length;T+=2){const A=T===1?-1/0:c[T],R=c[T+1],V=T,K=T+1;if(typeof A!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(y.length&&y[y.length-1][0]>=A)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const J=h.parse(R,K,C);if(!J)return null;C=C||J.type,y.push([A,J])}return new za(C,_,y)}evaluate(c){const h=this.labels,_=this.outputs;if(h.length===1)return _[0].evaluate(c);const y=this.input.evaluate(c);if(y<=h[0])return _[0].evaluate(c);const C=h.length;return y>=h[C-1]?_[C-1].evaluate(c):_[Oa(h,y)].evaluate(c)}eachChild(c){c(this.input);for(const h of this.outputs)c(h)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Sh(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var Eh=Tf;function Tf(d,c,h,_){this.cx=3*d,this.bx=3*(h-d)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(_-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=d,this.p1y=c,this.p2x=h,this.p2y=_}Tf.prototype={sampleCurveX:function(d){return((this.ax*d+this.bx)*d+this.cx)*d},sampleCurveY:function(d){return((this.ay*d+this.by)*d+this.cy)*d},sampleCurveDerivativeX:function(d){return(3*this.ax*d+2*this.bx)*d+this.cx},solveCurveX:function(d,c){if(c===void 0&&(c=1e-6),d<0)return 0;if(d>1)return 1;for(var h=d,_=0;_<8;_++){var y=this.sampleCurveX(h)-d;if(Math.abs(y)<c)return h;var C=this.sampleCurveDerivativeX(h);if(Math.abs(C)<1e-6)break;h-=y/C}var T=0,A=1;for(h=d,_=0;_<20&&(y=this.sampleCurveX(h),!(Math.abs(y-d)<c));_++)d>y?T=h:A=h,h=.5*(A-T)+T;return h},solve:function(d,c){return this.sampleCurveY(this.solveCurveX(d,c))}};var Ih=Sh(Eh);function Io(d,c,h){return d+h*(c-d)}function $l(d,c,h){return d.map((_,y)=>Io(_,c[y],h))}const Or={number:Io,color:function(d,c,h,_="rgb"){switch(_){case"rgb":{const[y,C,T,A]=$l(d.rgb,c.rgb,h);return new mi(y,C,T,A,!1)}case"hcl":{const[y,C,T,A]=d.hcl,[R,V,K,J]=c.hcl;let ae,pe;if(isNaN(y)||isNaN(R))isNaN(y)?isNaN(R)?ae=NaN:(ae=R,T!==1&&T!==0||(pe=V)):(ae=y,K!==1&&K!==0||(pe=C));else{let ot=R-y;R>y&&ot>180?ot-=360:R<y&&y-R>180&&(ot+=360),ae=y+h*ot}const[be,Se,Ae,Re]=function([ot,Ne,Ye,Ot]){return ot=isNaN(ot)?0:ot*jn,Fi([Ye,Math.cos(ot)*Ne,Math.sin(ot)*Ne,Ot])}([ae,pe??Io(C,V,h),Io(T,K,h),Io(A,J,h)]);return new mi(be,Se,Ae,Re,!1)}case"lab":{const[y,C,T,A]=Fi($l(d.lab,c.lab,h));return new mi(y,C,T,A,!1)}}},array:$l,padding:function(d,c,h){return new jr($l(d.values,c.values,h))},variableAnchorOffsetCollection:function(d,c,h){const _=d.values,y=c.values;if(_.length!==y.length)throw new Ai(`Cannot interpolate values of different length. from: ${d.toString()}, to: ${c.toString()}`);const C=[];for(let T=0;T<_.length;T+=2){if(_[T]!==y[T])throw new Ai(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${_[T]}, to[${T}]: ${y[T]}`);C.push(_[T]);const[A,R]=_[T+1],[V,K]=y[T+1];C.push([Io(A,V,h),Io(R,K,h)])}return new hs(C)}};class Er{constructor(c,h,_,y,C){this.type=c,this.operator=h,this.interpolation=_,this.input=y,this.labels=[],this.outputs=[];for(const[T,A]of C)this.labels.push(T),this.outputs.push(A)}static interpolationFactor(c,h,_,y){let C=0;if(c.name==="exponential")C=fi(h,c.base,_,y);else if(c.name==="linear")C=fi(h,1,_,y);else if(c.name==="cubic-bezier"){const T=c.controlPoints;C=new Ih(T[0],T[1],T[2],T[3]).solve(fi(h,1,_,y))}return C}static parse(c,h){let[_,y,C,...T]=c;if(!Array.isArray(y)||y.length===0)return h.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const V=y[1];if(typeof V!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:V}}else{if(y[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const V=y.slice(1);if(V.length!==4||V.some(K=>typeof K!="number"||K<0||K>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:V}}}if(c.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(C=h.parse(C,2,tn),!C)return null;const A=[];let R=null;_==="interpolate-hcl"||_==="interpolate-lab"?R=On:h.expectedType&&h.expectedType.kind!=="value"&&(R=h.expectedType);for(let V=0;V<T.length;V+=2){const K=T[V],J=T[V+1],ae=V+3,pe=V+4;if(typeof K!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ae);if(A.length&&A[A.length-1][0]>=K)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ae);const be=h.parse(J,pe,R);if(!be)return null;R=R||be.type,A.push([K,be])}return ht(R,tn)||ht(R,On)||ht(R,Ee)||ht(R,le)||ht(R,ye(tn))?new Er(R,_,y,C,A):h.error(`Type ${Ie(R)} is not interpolatable.`)}evaluate(c){const h=this.labels,_=this.outputs;if(h.length===1)return _[0].evaluate(c);const y=this.input.evaluate(c);if(y<=h[0])return _[0].evaluate(c);const C=h.length;if(y>=h[C-1])return _[C-1].evaluate(c);const T=Oa(h,y),A=Er.interpolationFactor(this.interpolation,y,h[T],h[T+1]),R=_[T].evaluate(c),V=_[T+1].evaluate(c);switch(this.operator){case"interpolate":return Or[this.type.kind](R,V,A);case"interpolate-hcl":return Or.color(R,V,A,"hcl");case"interpolate-lab":return Or.color(R,V,A,"lab")}}eachChild(c){c(this.input);for(const h of this.outputs)c(h)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function fi(d,c,h,_){const y=_-h,C=d-h;return y===0?0:c===1?C/y:(Math.pow(c,C)-1)/(Math.pow(c,y)-1)}class Al{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expectected at least one argument.");let _=null;const y=h.expectedType;y&&y.kind!=="value"&&(_=y);const C=[];for(const A of c.slice(1)){const R=h.parse(A,1+C.length,_,void 0,{typeAnnotation:"omit"});if(!R)return null;_=_||R.type,C.push(R)}if(!_)throw new Error("No output type");const T=y&&C.some(A=>He(y,A.type));return new Al(T?Tn:_,C)}evaluate(c){let h,_=null,y=0;for(const C of this.args)if(y++,_=C.evaluate(c),_&&_ instanceof ms&&!_.available&&(h||(h=_.name),_=null,y===this.args.length&&(_=h)),_!==null)break;return _}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}class Ml{constructor(c,h){this.type=h.type,this.bindings=[].concat(c),this.result=h}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const h of this.bindings)c(h[1]);c(this.result)}static parse(c,h){if(c.length<4)return h.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const _=[];for(let C=1;C<c.length-1;C+=2){const T=c[C];if(typeof T!="string")return h.error(`Expected string, but found ${typeof T} instead.`,C);if(/[^a-zA-Z0-9_]/.test(T))return h.error("Variable names must contain only alphanumeric characters or '_'.",C);const A=h.parse(c[C+1],C+1);if(!A)return null;_.push([T,A])}const y=h.parse(c[c.length-1],c.length-1,h.expectedType,_);return y?new Ml(_,y):null}outputDefined(){return this.result.outputDefined()}}class Lc{constructor(c,h,_){this.type=c,this.index=h,this.input=_}static parse(c,h){if(c.length!==3)return h.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const _=h.parse(c[1],1,tn),y=h.parse(c[2],2,ye(h.expectedType||Tn));return _&&y?new Lc(y.type.itemType,_,y):null}evaluate(c){const h=this.index.evaluate(c),_=this.input.evaluate(c);if(h<0)throw new Ai(`Array index out of bounds: ${h} < 0.`);if(h>=_.length)throw new Ai(`Array index out of bounds: ${h} > ${_.length-1}.`);if(h!==Math.floor(h))throw new Ai(`Array index must be an integer, but found ${h} instead.`);return _[h]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class Fc{constructor(c,h){this.type=Nn,this.needle=c,this.haystack=h}static parse(c,h){if(c.length!==3)return h.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const _=h.parse(c[1],1,Tn),y=h.parse(c[2],2,Tn);return _&&y?st(_.type,[Nn,Un,tn,xi,Tn])?new Fc(_,y):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(_.type)} instead`):null}evaluate(c){const h=this.needle.evaluate(c),_=this.haystack.evaluate(c);if(!_)return!1;if(!Ve(h,["boolean","string","number","null"]))throw new Ai(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(tr(h))} instead.`);if(!Ve(_,["string","array"]))throw new Ai(`Expected second argument to be of type array or string, but found ${Ie(tr(_))} instead.`);return _.indexOf(h)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class Dl{constructor(c,h,_){this.type=tn,this.needle=c,this.haystack=h,this.fromIndex=_}static parse(c,h){if(c.length<=2||c.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const _=h.parse(c[1],1,Tn),y=h.parse(c[2],2,Tn);if(!_||!y)return null;if(!st(_.type,[Nn,Un,tn,xi,Tn]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(_.type)} instead`);if(c.length===4){const C=h.parse(c[3],3,tn);return C?new Dl(_,y,C):null}return new Dl(_,y)}evaluate(c){const h=this.needle.evaluate(c),_=this.haystack.evaluate(c);if(!Ve(h,["boolean","string","number","null"]))throw new Ai(`Expected first argument to be of type boolean, string, number or null, but found ${Ie(tr(h))} instead.`);if(!Ve(_,["string","array"]))throw new Ai(`Expected second argument to be of type array or string, but found ${Ie(tr(_))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(c);return _.indexOf(h,y)}return _.indexOf(h)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class Bc{constructor(c,h,_,y,C,T){this.inputType=c,this.type=h,this.input=_,this.cases=y,this.outputs=C,this.otherwise=T}static parse(c,h){if(c.length<5)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return h.error("Expected an even number of arguments.");let _,y;h.expectedType&&h.expectedType.kind!=="value"&&(y=h.expectedType);const C={},T=[];for(let V=2;V<c.length-1;V+=2){let K=c[V];const J=c[V+1];Array.isArray(K)||(K=[K]);const ae=h.concat(V);if(K.length===0)return ae.error("Expected at least one branch label.");for(const be of K){if(typeof be!="number"&&typeof be!="string")return ae.error("Branch labels must be numbers or strings.");if(typeof be=="number"&&Math.abs(be)>Number.MAX_SAFE_INTEGER)return ae.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof be=="number"&&Math.floor(be)!==be)return ae.error("Numeric branch labels must be integer values.");if(_){if(ae.checkSubtype(_,tr(be)))return null}else _=tr(be);if(C[String(be)]!==void 0)return ae.error("Branch labels must be unique.");C[String(be)]=T.length}const pe=h.parse(J,V,y);if(!pe)return null;y=y||pe.type,T.push(pe)}const A=h.parse(c[1],1,Tn);if(!A)return null;const R=h.parse(c[c.length-1],c.length-1,y);return R?A.type.kind!=="value"&&h.concat(1).checkSubtype(_,A.type)?null:new Bc(_,y,A,C,T,R):null}evaluate(c){const h=this.input.evaluate(c);return(tr(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class Nc{constructor(c,h,_){this.type=c,this.branches=h,this.otherwise=_}static parse(c,h){if(c.length<4)return h.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return h.error("Expected an odd number of arguments.");let _;h.expectedType&&h.expectedType.kind!=="value"&&(_=h.expectedType);const y=[];for(let T=1;T<c.length-1;T+=2){const A=h.parse(c[T],T,Nn);if(!A)return null;const R=h.parse(c[T+1],T+1,_);if(!R)return null;y.push([A,R]),_=_||R.type}const C=h.parse(c[c.length-1],c.length-1,_);if(!C)return null;if(!_)throw new Error("Can't infer output type");return new Nc(_,y,C)}evaluate(c){for(const[h,_]of this.branches)if(h.evaluate(c))return _.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[h,_]of this.branches)c(h),c(_);c(this.otherwise)}outputDefined(){return this.branches.every(([c,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Ol{constructor(c,h,_,y){this.type=c,this.input=h,this.beginIndex=_,this.endIndex=y}static parse(c,h){if(c.length<=2||c.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const _=h.parse(c[1],1,Tn),y=h.parse(c[2],2,tn);if(!_||!y)return null;if(!st(_.type,[ye(Tn),Un,Tn]))return h.error(`Expected first argument to be of type array or string, but found ${Ie(_.type)} instead`);if(c.length===4){const C=h.parse(c[3],3,tn);return C?new Ol(_.type,_,y,C):null}return new Ol(_.type,_,y)}evaluate(c){const h=this.input.evaluate(c),_=this.beginIndex.evaluate(c);if(!Ve(h,["string","array"]))throw new Ai(`Expected first argument to be of type array or string, but found ${Ie(tr(h))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(c);return h.slice(_,y)}return h.slice(_)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function Sf(d,c){return d==="=="||d==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function Ef(d,c,h,_){return _.compare(c,h)===0}function Yo(d,c,h){const _=d!=="=="&&d!=="!=";return class O2{constructor(C,T,A){this.type=Nn,this.lhs=C,this.rhs=T,this.collator=A,this.hasUntypedArgument=C.type.kind==="value"||T.type.kind==="value"}static parse(C,T){if(C.length!==3&&C.length!==4)return T.error("Expected two or three arguments.");const A=C[0];let R=T.parse(C[1],1,Tn);if(!R)return null;if(!Sf(A,R.type))return T.concat(1).error(`"${A}" comparisons are not supported for type '${Ie(R.type)}'.`);let V=T.parse(C[2],2,Tn);if(!V)return null;if(!Sf(A,V.type))return T.concat(2).error(`"${A}" comparisons are not supported for type '${Ie(V.type)}'.`);if(R.type.kind!==V.type.kind&&R.type.kind!=="value"&&V.type.kind!=="value")return T.error(`Cannot compare types '${Ie(R.type)}' and '${Ie(V.type)}'.`);_&&(R.type.kind==="value"&&V.type.kind!=="value"?R=new is(V.type,[R]):R.type.kind!=="value"&&V.type.kind==="value"&&(V=new is(R.type,[V])));let K=null;if(C.length===4){if(R.type.kind!=="string"&&V.type.kind!=="string"&&R.type.kind!=="value"&&V.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(K=T.parse(C[3],3,ti),!K)return null}return new O2(R,V,K)}evaluate(C){const T=this.lhs.evaluate(C),A=this.rhs.evaluate(C);if(_&&this.hasUntypedArgument){const R=tr(T),V=tr(A);if(R.kind!==V.kind||R.kind!=="string"&&R.kind!=="number")throw new Ai(`Expected arguments for "${d}" to be (string, string) or (number, number), but found (${R.kind}, ${V.kind}) instead.`)}if(this.collator&&!_&&this.hasUntypedArgument){const R=tr(T),V=tr(A);if(R.kind!=="string"||V.kind!=="string")return c(C,T,A)}return this.collator?h(C,T,A,this.collator.evaluate(C)):c(C,T,A)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const Ph=Yo("==",function(d,c,h){return c===h},Ef),$h=Yo("!=",function(d,c,h){return c!==h},function(d,c,h,_){return!Ef(0,c,h,_)}),Ah=Yo("<",function(d,c,h){return c<h},function(d,c,h,_){return _.compare(c,h)<0}),Mh=Yo(">",function(d,c,h){return c>h},function(d,c,h,_){return _.compare(c,h)>0}),Dh=Yo("<=",function(d,c,h){return c<=h},function(d,c,h,_){return _.compare(c,h)<=0}),Oh=Yo(">=",function(d,c,h){return c>=h},function(d,c,h,_){return _.compare(c,h)>=0});class Vc{constructor(c,h,_,y,C){this.type=Un,this.number=c,this.locale=h,this.currency=_,this.minFractionDigits=y,this.maxFractionDigits=C}static parse(c,h){if(c.length!==3)return h.error("Expected two arguments.");const _=h.parse(c[1],1,tn);if(!_)return null;const y=c[2];if(typeof y!="object"||Array.isArray(y))return h.error("NumberFormat options argument must be an object.");let C=null;if(y.locale&&(C=h.parse(y.locale,1,Un),!C))return null;let T=null;if(y.currency&&(T=h.parse(y.currency,1,Un),!T))return null;let A=null;if(y["min-fraction-digits"]&&(A=h.parse(y["min-fraction-digits"],1,tn),!A))return null;let R=null;return y["max-fraction-digits"]&&(R=h.parse(y["max-fraction-digits"],1,tn),!R)?null:new Vc(_,C,T,A,R)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class zl{constructor(c){this.type=bn,this.sections=c}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");const _=c[1];if(!Array.isArray(_)&&typeof _=="object")return h.error("First argument must be an image or text section.");const y=[];let C=!1;for(let T=1;T<=c.length-1;++T){const A=c[T];if(C&&typeof A=="object"&&!Array.isArray(A)){C=!1;let R=null;if(A["font-scale"]&&(R=h.parse(A["font-scale"],1,tn),!R))return null;let V=null;if(A["text-font"]&&(V=h.parse(A["text-font"],1,ye(Un)),!V))return null;let K=null;if(A["text-color"]&&(K=h.parse(A["text-color"],1,On),!K))return null;const J=y[y.length-1];J.scale=R,J.font=V,J.textColor=K}else{const R=h.parse(c[T],1,Tn);if(!R)return null;const V=R.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,y.push({content:R,scale:null,font:null,textColor:null})}}return new zl(y)}evaluate(c){return new ns(this.sections.map(h=>{const _=h.content.evaluate(c);return tr(_)===ie?new Rc("",_,null,null,null):new Rc(Ia(_),null,h.scale?h.scale.evaluate(c):null,h.font?h.font.evaluate(c).join(","):null,h.textColor?h.textColor.evaluate(c):null)}))}eachChild(c){for(const h of this.sections)c(h.content),h.scale&&c(h.scale),h.font&&c(h.font),h.textColor&&c(h.textColor)}outputDefined(){return!1}}class jc{constructor(c){this.type=ie,this.input=c}static parse(c,h){if(c.length!==2)return h.error("Expected two arguments.");const _=h.parse(c[1],1,Un);return _?new jc(_):h.error("No image name provided.")}evaluate(c){const h=this.input.evaluate(c),_=ms.fromString(h);return _&&c.availableImages&&(_.available=c.availableImages.indexOf(h)>-1),_}eachChild(c){c(this.input)}outputDefined(){return!1}}class Uc{constructor(c){this.type=tn,this.input=c}static parse(c,h){if(c.length!==2)return h.error(`Expected 1 argument, but found ${c.length-1} instead.`);const _=h.parse(c[1],1);return _?_.type.kind!=="array"&&_.type.kind!=="string"&&_.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Ie(_.type)} instead.`):new Uc(_):null}evaluate(c){const h=this.input.evaluate(c);if(typeof h=="string"||Array.isArray(h))return h.length;throw new Ai(`Expected value to be of type string or array, but found ${Ie(tr(h))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const Qo={"==":Ph,"!=":$h,">":Mh,"<":Ah,">=":Oh,"<=":Dh,array:is,at:Lc,boolean:is,case:Nc,coalesce:Al,collator:Jo,format:zl,image:jc,in:Fc,"index-of":Dl,interpolate:Er,"interpolate-hcl":Er,"interpolate-lab":Er,length:Uc,let:Ml,literal:no,match:Bc,number:is,"number-format":Vc,object:is,slice:Ol,step:za,string:is,"to-boolean":Os,"to-color":Os,"to-number":Os,"to-string":Os,var:Il,within:Eo};function If(d,[c,h,_,y]){c=c.evaluate(d),h=h.evaluate(d),_=_.evaluate(d);const C=y?y.evaluate(d):1,T=Xo(c,h,_,C);if(T)throw new Ai(T);return new mi(c/255,h/255,_/255,C,!1)}function Pf(d,c){return d in c}function qc(d,c){const h=c[d];return h===void 0?null:h}function Po(d){return{type:d}}function $f(d){return{result:"success",value:d}}function ea(d){return{result:"error",value:d}}function ta(d){return d["property-type"]==="data-driven"||d["property-type"]==="cross-faded-data-driven"}function Af(d){return!!d.expression&&d.expression.parameters.indexOf("zoom")>-1}function Hc(d){return!!d.expression&&d.expression.interpolated}function ui(d){return d instanceof Number?"number":d instanceof String?"string":d instanceof Boolean?"boolean":Array.isArray(d)?"array":d===null?"null":typeof d}function Rl(d){return typeof d=="object"&&d!==null&&!Array.isArray(d)}function zh(d){return d}function Mf(d,c){const h=c.type==="color",_=d.stops&&typeof d.stops[0][0]=="object",y=_||!(_||d.property!==void 0),C=d.type||(Hc(c)?"exponential":"interval");if(h||c.type==="padding"){const K=h?mi.parse:jr.parse;(d=Hn({},d)).stops&&(d.stops=d.stops.map(J=>[J[0],K(J[1])])),d.default=K(d.default?d.default:c.default)}if(d.colorSpace&&(T=d.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${d.colorSpace}"`);var T;let A,R,V;if(C==="exponential")A=li;else if(C==="interval")A=Rh;else if(C==="categorical"){A=Ji,R=Object.create(null);for(const K of d.stops)R[K[0]]=K[1];V=typeof d.stops[0][0]}else{if(C!=="identity")throw new Error(`Unknown function type "${C}"`);A=Gc}if(_){const K={},J=[];for(let be=0;be<d.stops.length;be++){const Se=d.stops[be],Ae=Se[0].zoom;K[Ae]===void 0&&(K[Ae]={zoom:Ae,type:d.type,property:d.property,default:d.default,stops:[]},J.push(Ae)),K[Ae].stops.push([Se[0].value,Se[1]])}const ae=[];for(const be of J)ae.push([K[be].zoom,Mf(K[be],c)]);const pe={name:"linear"};return{kind:"composite",interpolationType:pe,interpolationFactor:Er.interpolationFactor.bind(void 0,pe),zoomStops:ae.map(be=>be[0]),evaluate:({zoom:be},Se)=>li({stops:ae,base:d.base},c,be).evaluate(be,Se)}}if(y){const K=C==="exponential"?{name:"exponential",base:d.base!==void 0?d.base:1}:null;return{kind:"camera",interpolationType:K,interpolationFactor:Er.interpolationFactor.bind(void 0,K),zoomStops:d.stops.map(J=>J[0]),evaluate:({zoom:J})=>A(d,c,J,R,V)}}return{kind:"source",evaluate(K,J){const ae=J&&J.properties?J.properties[d.property]:void 0;return ae===void 0?Ra(d.default,c.default):A(d,c,ae,R,V)}}}function Ra(d,c,h){return d!==void 0?d:c!==void 0?c:h!==void 0?h:void 0}function Ji(d,c,h,_,y){return Ra(typeof h===y?_[h]:void 0,d.default,c.default)}function Rh(d,c,h){if(ui(h)!=="number")return Ra(d.default,c.default);const _=d.stops.length;if(_===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[_-1][0])return d.stops[_-1][1];const y=Oa(d.stops.map(C=>C[0]),h);return d.stops[y][1]}function li(d,c,h){const _=d.base!==void 0?d.base:1;if(ui(h)!=="number")return Ra(d.default,c.default);const y=d.stops.length;if(y===1||h<=d.stops[0][0])return d.stops[0][1];if(h>=d.stops[y-1][0])return d.stops[y-1][1];const C=Oa(d.stops.map(K=>K[0]),h),T=function(K,J,ae,pe){const be=pe-ae,Se=K-ae;return be===0?0:J===1?Se/be:(Math.pow(J,Se)-1)/(Math.pow(J,be)-1)}(h,_,d.stops[C][0],d.stops[C+1][0]),A=d.stops[C][1],R=d.stops[C+1][1],V=Or[c.type]||zh;return typeof A.evaluate=="function"?{evaluate(...K){const J=A.evaluate.apply(void 0,K),ae=R.evaluate.apply(void 0,K);if(J!==void 0&&ae!==void 0)return V(J,ae,T,d.colorSpace)}}:V(A,R,T,d.colorSpace)}function Gc(d,c,h){switch(c.type){case"color":h=mi.parse(h);break;case"formatted":h=ns.fromString(h.toString());break;case"resolvedImage":h=ms.fromString(h.toString());break;case"padding":h=jr.parse(h);break;default:ui(h)===c.type||c.type==="enum"&&c.values[h]||(h=void 0)}return Ra(h,d.default,c.default)}rs.register(Qo,{error:[{kind:"error"},[Un],(d,[c])=>{throw new Ai(c.evaluate(d))}],typeof:[Un,[Tn],(d,[c])=>Ie(tr(c.evaluate(d)))],"to-rgba":[ye(tn,4),[On],(d,[c])=>{const[h,_,y,C]=c.evaluate(d).rgb;return[255*h,255*_,255*y,C]}],rgb:[On,[tn,tn,tn],If],rgba:[On,[tn,tn,tn,tn],If],has:{type:Nn,overloads:[[[Un],(d,[c])=>Pf(c.evaluate(d),d.properties())],[[Un,hi],(d,[c,h])=>Pf(c.evaluate(d),h.evaluate(d))]]},get:{type:Tn,overloads:[[[Un],(d,[c])=>qc(c.evaluate(d),d.properties())],[[Un,hi],(d,[c,h])=>qc(c.evaluate(d),h.evaluate(d))]]},"feature-state":[Tn,[Un],(d,[c])=>qc(c.evaluate(d),d.featureState||{})],properties:[hi,[],d=>d.properties()],"geometry-type":[Un,[],d=>d.geometryType()],id:[Tn,[],d=>d.id()],zoom:[tn,[],d=>d.globals.zoom],"heatmap-density":[tn,[],d=>d.globals.heatmapDensity||0],"line-progress":[tn,[],d=>d.globals.lineProgress||0],accumulated:[Tn,[],d=>d.globals.accumulated===void 0?null:d.globals.accumulated],"+":[tn,Po(tn),(d,c)=>{let h=0;for(const _ of c)h+=_.evaluate(d);return h}],"*":[tn,Po(tn),(d,c)=>{let h=1;for(const _ of c)h*=_.evaluate(d);return h}],"-":{type:tn,overloads:[[[tn,tn],(d,[c,h])=>c.evaluate(d)-h.evaluate(d)],[[tn],(d,[c])=>-c.evaluate(d)]]},"/":[tn,[tn,tn],(d,[c,h])=>c.evaluate(d)/h.evaluate(d)],"%":[tn,[tn,tn],(d,[c,h])=>c.evaluate(d)%h.evaluate(d)],ln2:[tn,[],()=>Math.LN2],pi:[tn,[],()=>Math.PI],e:[tn,[],()=>Math.E],"^":[tn,[tn,tn],(d,[c,h])=>Math.pow(c.evaluate(d),h.evaluate(d))],sqrt:[tn,[tn],(d,[c])=>Math.sqrt(c.evaluate(d))],log10:[tn,[tn],(d,[c])=>Math.log(c.evaluate(d))/Math.LN10],ln:[tn,[tn],(d,[c])=>Math.log(c.evaluate(d))],log2:[tn,[tn],(d,[c])=>Math.log(c.evaluate(d))/Math.LN2],sin:[tn,[tn],(d,[c])=>Math.sin(c.evaluate(d))],cos:[tn,[tn],(d,[c])=>Math.cos(c.evaluate(d))],tan:[tn,[tn],(d,[c])=>Math.tan(c.evaluate(d))],asin:[tn,[tn],(d,[c])=>Math.asin(c.evaluate(d))],acos:[tn,[tn],(d,[c])=>Math.acos(c.evaluate(d))],atan:[tn,[tn],(d,[c])=>Math.atan(c.evaluate(d))],min:[tn,Po(tn),(d,c)=>Math.min(...c.map(h=>h.evaluate(d)))],max:[tn,Po(tn),(d,c)=>Math.max(...c.map(h=>h.evaluate(d)))],abs:[tn,[tn],(d,[c])=>Math.abs(c.evaluate(d))],round:[tn,[tn],(d,[c])=>{const h=c.evaluate(d);return h<0?-Math.round(-h):Math.round(h)}],floor:[tn,[tn],(d,[c])=>Math.floor(c.evaluate(d))],ceil:[tn,[tn],(d,[c])=>Math.ceil(c.evaluate(d))],"filter-==":[Nn,[Un,Tn],(d,[c,h])=>d.properties()[c.value]===h.value],"filter-id-==":[Nn,[Tn],(d,[c])=>d.id()===c.value],"filter-type-==":[Nn,[Un],(d,[c])=>d.geometryType()===c.value],"filter-<":[Nn,[Un,Tn],(d,[c,h])=>{const _=d.properties()[c.value],y=h.value;return typeof _==typeof y&&_<y}],"filter-id-<":[Nn,[Tn],(d,[c])=>{const h=d.id(),_=c.value;return typeof h==typeof _&&h<_}],"filter->":[Nn,[Un,Tn],(d,[c,h])=>{const _=d.properties()[c.value],y=h.value;return typeof _==typeof y&&_>y}],"filter-id->":[Nn,[Tn],(d,[c])=>{const h=d.id(),_=c.value;return typeof h==typeof _&&h>_}],"filter-<=":[Nn,[Un,Tn],(d,[c,h])=>{const _=d.properties()[c.value],y=h.value;return typeof _==typeof y&&_<=y}],"filter-id-<=":[Nn,[Tn],(d,[c])=>{const h=d.id(),_=c.value;return typeof h==typeof _&&h<=_}],"filter->=":[Nn,[Un,Tn],(d,[c,h])=>{const _=d.properties()[c.value],y=h.value;return typeof _==typeof y&&_>=y}],"filter-id->=":[Nn,[Tn],(d,[c])=>{const h=d.id(),_=c.value;return typeof h==typeof _&&h>=_}],"filter-has":[Nn,[Tn],(d,[c])=>c.value in d.properties()],"filter-has-id":[Nn,[],d=>d.id()!==null&&d.id()!==void 0],"filter-type-in":[Nn,[ye(Un)],(d,[c])=>c.value.indexOf(d.geometryType())>=0],"filter-id-in":[Nn,[ye(Tn)],(d,[c])=>c.value.indexOf(d.id())>=0],"filter-in-small":[Nn,[Un,ye(Tn)],(d,[c,h])=>h.value.indexOf(d.properties()[c.value])>=0],"filter-in-large":[Nn,[Un,ye(Tn)],(d,[c,h])=>function(_,y,C,T){for(;C<=T;){const A=C+T>>1;if(y[A]===_)return!0;y[A]>_?T=A-1:C=A+1}return!1}(d.properties()[c.value],h.value,0,h.value.length-1)],all:{type:Nn,overloads:[[[Nn,Nn],(d,[c,h])=>c.evaluate(d)&&h.evaluate(d)],[Po(Nn),(d,c)=>{for(const h of c)if(!h.evaluate(d))return!1;return!0}]]},any:{type:Nn,overloads:[[[Nn,Nn],(d,[c,h])=>c.evaluate(d)||h.evaluate(d)],[Po(Nn),(d,c)=>{for(const h of c)if(h.evaluate(d))return!0;return!1}]]},"!":[Nn,[Nn],(d,[c])=>!c.evaluate(d)],"is-supported-script":[Nn,[Un],(d,[c])=>{const h=d.globals&&d.globals.isSupportedScript;return!h||h(c.evaluate(d))}],upcase:[Un,[Un],(d,[c])=>c.evaluate(d).toUpperCase()],downcase:[Un,[Un],(d,[c])=>c.evaluate(d).toLowerCase()],concat:[Un,Po(Tn),(d,c)=>c.map(h=>Ia(h.evaluate(d))).join("")],"resolved-locale":[Un,[ti],(d,[c])=>c.evaluate(d).resolvedLocale()]});class ki{constructor(c,h){var _;this.expression=c,this._warningHistory={},this._evaluator=new pi,this._defaultValue=h?(_=h).type==="color"&&Rl(_.default)?new mi(0,0,0,0):_.type==="color"?mi.parse(_.default)||null:_.type==="padding"?jr.parse(_.default)||null:_.type==="variableAnchorOffsetCollection"?hs.parse(_.default)||null:_.default===void 0?null:_.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(c,h,_,y,C,T){return this._evaluator.globals=c,this._evaluator.feature=h,this._evaluator.featureState=_,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(c,h,_,y,C,T){this._evaluator.globals=c,this._evaluator.feature=h||null,this._evaluator.featureState=_||null,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=T||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new Ai(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function wi(d){return Array.isArray(d)&&d.length>0&&typeof d[0]=="string"&&d[0]in Qo}function $o(d,c){const h=new kl(Qo,Aa,[],c?function(y){const C={color:On,string:Un,number:tn,enum:Un,boolean:Nn,formatted:bn,padding:Ee,resolvedImage:ie,variableAnchorOffsetCollection:le};return y.type==="array"?ye(C[y.value]||Tn,y.length):C[y.type]}(c):void 0),_=h.parse(d,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?$f(new ki(_,c)):ea(h.errors)}class Ll{constructor(c,h){this.kind=c,this._styleExpression=h,this.isStateDependent=c!=="constant"&&!Ma(h.expression)}evaluateWithoutErrorHandling(c,h,_,y,C,T){return this._styleExpression.evaluateWithoutErrorHandling(c,h,_,y,C,T)}evaluate(c,h,_,y,C,T){return this._styleExpression.evaluate(c,h,_,y,C,T)}}class Zc{constructor(c,h,_,y){this.kind=c,this.zoomStops=_,this._styleExpression=h,this.isStateDependent=c!=="camera"&&!Ma(h.expression),this.interpolationType=y}evaluateWithoutErrorHandling(c,h,_,y,C,T){return this._styleExpression.evaluateWithoutErrorHandling(c,h,_,y,C,T)}evaluate(c,h,_,y,C,T){return this._styleExpression.evaluate(c,h,_,y,C,T)}interpolationFactor(c,h,_){return this.interpolationType?Er.interpolationFactor(this.interpolationType,c,h,_):0}}function Df(d,c){const h=$o(d,c);if(h.result==="error")return h;const _=h.value.expression,y=Pl(_);if(!y&&!ta(c))return ea([new Mn("","data expressions not supported")]);const C=Da(_,["zoom"]);if(!C&&!Af(c))return ea([new Mn("","zoom expressions not supported")]);const T=Bl(_);return T||C?T instanceof Mn?ea([T]):T instanceof Er&&!Hc(c)?ea([new Mn("",'"interpolate" expressions cannot be used with this property')]):$f(T?new Zc(y?"camera":"composite",h.value,T.labels,T instanceof Er?T.interpolation:void 0):new Ll(y?"constant":"source",h.value)):ea([new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fl{constructor(c,h){this._parameters=c,this._specification=h,Hn(this,Mf(this._parameters,this._specification))}static deserialize(c){return new Fl(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function Bl(d){let c=null;if(d instanceof Ml)c=Bl(d.result);else if(d instanceof Al){for(const h of d.args)if(c=Bl(h),c)break}else(d instanceof za||d instanceof Er)&&d.input instanceof rs&&d.input.name==="zoom"&&(c=d);return c instanceof Mn||d.eachChild(h=>{const _=Bl(h);_ instanceof Mn?c=_:!c&&_?c=new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&_&&c!==_&&(c=new Mn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function Nl(d){if(d===!0||d===!1)return!0;if(!Array.isArray(d)||d.length===0)return!1;switch(d[0]){case"has":return d.length>=2&&d[1]!=="$id"&&d[1]!=="$type";case"in":return d.length>=3&&(typeof d[1]!="string"||Array.isArray(d[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return d.length!==3||Array.isArray(d[1])||Array.isArray(d[2]);case"any":case"all":for(const c of d.slice(1))if(!Nl(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const Of={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Vl(d){if(d==null)return{filter:()=>!0,needGeometry:!1};Nl(d)||(d=Ul(d));const c=$o(d,Of);if(c.result==="error")throw new Error(c.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,_,y)=>c.value.evaluate(h,_,{},y),needGeometry:jl(d)}}function zf(d,c){return d<c?-1:d>c?1:0}function jl(d){if(!Array.isArray(d))return!1;if(d[0]==="within")return!0;for(let c=1;c<d.length;c++)if(jl(d[c]))return!0;return!1}function Ul(d){if(!d)return!0;const c=d[0];return d.length<=1?c!=="any":c==="=="?Wc(d[1],d[2],"=="):c==="!="?ql(Wc(d[1],d[2],"==")):c==="<"||c===">"||c==="<="||c===">="?Wc(d[1],d[2],c):c==="any"?(h=d.slice(1),["any"].concat(h.map(Ul))):c==="all"?["all"].concat(d.slice(1).map(Ul)):c==="none"?["all"].concat(d.slice(1).map(Ul).map(ql)):c==="in"?Rf(d[1],d.slice(2)):c==="!in"?ql(Rf(d[1],d.slice(2))):c==="has"?Lf(d[1]):c==="!has"?ql(Lf(d[1])):c!=="within"||d;var h}function Wc(d,c,h){switch(d){case"$type":return[`filter-type-${h}`,c];case"$id":return[`filter-id-${h}`,c];default:return[`filter-${h}`,d,c]}}function Rf(d,c){if(c.length===0)return!1;switch(d){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(h=>typeof h!=typeof c[0])?["filter-in-large",d,["literal",c.sort(zf)]]:["filter-in-small",d,["literal",c]]}}function Lf(d){switch(d){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",d]}}function ql(d){return["!",d]}function Kc(d){const c=typeof d;if(c==="number"||c==="boolean"||c==="string"||d==null)return JSON.stringify(d);if(Array.isArray(d)){let y="[";for(const C of d)y+=`${Kc(C)},`;return`${y}]`}const h=Object.keys(d).sort();let _="{";for(let y=0;y<h.length;y++)_+=`${JSON.stringify(h[y])}:${Kc(d[h[y]])},`;return`${_}}`}function Lh(d){let c="";for(const h of un)c+=`/${Kc(d[h])}`;return c}function Ff(d){const c=d.value;return c?[new $t(d.key,c,"constants have been deprecated as of v8")]:[]}function Bi(d){return d instanceof Number||d instanceof String||d instanceof Boolean?d.valueOf():d}function ro(d){if(Array.isArray(d))return d.map(ro);if(d instanceof Object&&!(d instanceof Number||d instanceof String||d instanceof Boolean)){const c={};for(const h in d)c[h]=ro(d[h]);return c}return Bi(d)}function zr(d){const c=d.key,h=d.value,_=d.valueSpec||{},y=d.objectElementValidators||{},C=d.style,T=d.styleSpec,A=d.validateSpec;let R=[];const V=ui(h);if(V!=="object")return[new $t(c,h,`object expected, ${V} found`)];for(const K in h){const J=K.split(".")[0],ae=_[J]||_["*"];let pe;if(y[J])pe=y[J];else if(_[J])pe=A;else if(y["*"])pe=y["*"];else{if(!_["*"]){R.push(new $t(c,h[K],`unknown property "${K}"`));continue}pe=A}R=R.concat(pe({key:(c&&`${c}.`)+K,value:h[K],valueSpec:ae,style:C,styleSpec:T,object:h,objectKey:K,validateSpec:A},h))}for(const K in _)y[K]||_[K].required&&_[K].default===void 0&&h[K]===void 0&&R.push(new $t(c,h,`missing required property "${K}"`));return R}function Xc(d){const c=d.value,h=d.valueSpec,_=d.style,y=d.styleSpec,C=d.key,T=d.arrayElementValidator||d.validateSpec;if(ui(c)!=="array")return[new $t(C,c,`array expected, ${ui(c)} found`)];if(h.length&&c.length!==h.length)return[new $t(C,c,`array length ${h.length} expected, length ${c.length} found`)];if(h["min-length"]&&c.length<h["min-length"])return[new $t(C,c,`array length at least ${h["min-length"]} expected, length ${c.length} found`)];let A={type:h.value,values:h.values};y.$version<7&&(A.function=h.function),ui(h.value)==="object"&&(A=h.value);let R=[];for(let V=0;V<c.length;V++)R=R.concat(T({array:c,arrayIndex:V,value:c[V],valueSpec:A,validateSpec:d.validateSpec,style:_,styleSpec:y,key:`${C}[${V}]`}));return R}function Hl(d){const c=d.key,h=d.value,_=d.valueSpec;let y=ui(h);return y==="number"&&h!=h&&(y="NaN"),y!=="number"?[new $t(c,h,`number expected, ${y} found`)]:"minimum"in _&&h<_.minimum?[new $t(c,h,`${h} is less than the minimum value ${_.minimum}`)]:"maximum"in _&&h>_.maximum?[new $t(c,h,`${h} is greater than the maximum value ${_.maximum}`)]:[]}function Bf(d){const c=d.valueSpec,h=Bi(d.value.type);let _,y,C,T={};const A=h!=="categorical"&&d.value.property===void 0,R=!A,V=ui(d.value.stops)==="array"&&ui(d.value.stops[0])==="array"&&ui(d.value.stops[0][0])==="object",K=zr({key:d.key,value:d.value,valueSpec:d.styleSpec.function,validateSpec:d.validateSpec,style:d.style,styleSpec:d.styleSpec,objectElementValidators:{stops:function(pe){if(h==="identity")return[new $t(pe.key,pe.value,'identity function may not have a "stops" property')];let be=[];const Se=pe.value;return be=be.concat(Xc({key:pe.key,value:Se,valueSpec:pe.valueSpec,validateSpec:pe.validateSpec,style:pe.style,styleSpec:pe.styleSpec,arrayElementValidator:J})),ui(Se)==="array"&&Se.length===0&&be.push(new $t(pe.key,Se,"array must have at least one stop")),be},default:function(pe){return pe.validateSpec({key:pe.key,value:pe.value,valueSpec:c,validateSpec:pe.validateSpec,style:pe.style,styleSpec:pe.styleSpec})}}});return h==="identity"&&A&&K.push(new $t(d.key,d.value,'missing required property "property"')),h==="identity"||d.value.stops||K.push(new $t(d.key,d.value,'missing required property "stops"')),h==="exponential"&&d.valueSpec.expression&&!Hc(d.valueSpec)&&K.push(new $t(d.key,d.value,"exponential functions not supported")),d.styleSpec.$version>=8&&(R&&!ta(d.valueSpec)?K.push(new $t(d.key,d.value,"property functions not supported")):A&&!Af(d.valueSpec)&&K.push(new $t(d.key,d.value,"zoom functions not supported"))),h!=="categorical"&&!V||d.value.property!==void 0||K.push(new $t(d.key,d.value,'"property" property is required')),K;function J(pe){let be=[];const Se=pe.value,Ae=pe.key;if(ui(Se)!=="array")return[new $t(Ae,Se,`array expected, ${ui(Se)} found`)];if(Se.length!==2)return[new $t(Ae,Se,`array length 2 expected, length ${Se.length} found`)];if(V){if(ui(Se[0])!=="object")return[new $t(Ae,Se,`object expected, ${ui(Se[0])} found`)];if(Se[0].zoom===void 0)return[new $t(Ae,Se,"object stop key must have zoom")];if(Se[0].value===void 0)return[new $t(Ae,Se,"object stop key must have value")];if(C&&C>Bi(Se[0].zoom))return[new $t(Ae,Se[0].zoom,"stop zoom values must appear in ascending order")];Bi(Se[0].zoom)!==C&&(C=Bi(Se[0].zoom),y=void 0,T={}),be=be.concat(zr({key:`${Ae}[0]`,value:Se[0],valueSpec:{zoom:{}},validateSpec:pe.validateSpec,style:pe.style,styleSpec:pe.styleSpec,objectElementValidators:{zoom:Hl,value:ae}}))}else be=be.concat(ae({key:`${Ae}[0]`,value:Se[0],valueSpec:{},validateSpec:pe.validateSpec,style:pe.style,styleSpec:pe.styleSpec},Se));return wi(ro(Se[1]))?be.concat([new $t(`${Ae}[1]`,Se[1],"expressions are not allowed in function stops.")]):be.concat(pe.validateSpec({key:`${Ae}[1]`,value:Se[1],valueSpec:c,validateSpec:pe.validateSpec,style:pe.style,styleSpec:pe.styleSpec}))}function ae(pe,be){const Se=ui(pe.value),Ae=Bi(pe.value),Re=pe.value!==null?pe.value:be;if(_){if(Se!==_)return[new $t(pe.key,Re,`${Se} stop domain type must match previous stop domain type ${_}`)]}else _=Se;if(Se!=="number"&&Se!=="string"&&Se!=="boolean")return[new $t(pe.key,Re,"stop domain value must be a number, string, or boolean")];if(Se!=="number"&&h!=="categorical"){let ot=`number expected, ${Se} found`;return ta(c)&&h===void 0&&(ot+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $t(pe.key,Re,ot)]}return h!=="categorical"||Se!=="number"||isFinite(Ae)&&Math.floor(Ae)===Ae?h!=="categorical"&&Se==="number"&&y!==void 0&&Ae<y?[new $t(pe.key,Re,"stop domain values must appear in ascending order")]:(y=Ae,h==="categorical"&&Ae in T?[new $t(pe.key,Re,"stop domain values must be unique")]:(T[Ae]=!0,[])):[new $t(pe.key,Re,`integer expected, found ${Ae}`)]}}function so(d){const c=(d.expressionContext==="property"?Df:$o)(ro(d.value),d.valueSpec);if(c.result==="error")return c.value.map(_=>new $t(`${d.key}${_.key}`,d.value,_.message));const h=c.value.expression||c.value._styleExpression.expression;if(d.expressionContext==="property"&&d.propertyKey==="text-font"&&!h.outputDefined())return[new $t(d.key,d.value,`Invalid data expression for "${d.propertyKey}". Output values must be contained as literals within the expression.`)];if(d.expressionContext==="property"&&d.propertyType==="layout"&&!Ma(h))return[new $t(d.key,d.value,'"feature-state" data expressions are not supported with layout properties.')];if(d.expressionContext==="filter"&&!Ma(h))return[new $t(d.key,d.value,'"feature-state" data expressions are not supported with filters.')];if(d.expressionContext&&d.expressionContext.indexOf("cluster")===0){if(!Da(h,["zoom","feature-state"]))return[new $t(d.key,d.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(d.expressionContext==="cluster-initial"&&!Pl(h))return[new $t(d.key,d.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function oo(d){const c=d.key,h=d.value,_=d.valueSpec,y=[];return Array.isArray(_.values)?_.values.indexOf(Bi(h))===-1&&y.push(new $t(c,h,`expected one of [${_.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(_.values).indexOf(Bi(h))===-1&&y.push(new $t(c,h,`expected one of [${Object.keys(_.values).join(", ")}], ${JSON.stringify(h)} found`)),y}function na(d){return Nl(ro(d.value))?so(Hn({},d,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Jc(d)}function Jc(d){const c=d.value,h=d.key;if(ui(c)!=="array")return[new $t(h,c,`array expected, ${ui(c)} found`)];const _=d.styleSpec;let y,C=[];if(c.length<1)return[new $t(h,c,"filter array must have at least 1 element")];switch(C=C.concat(oo({key:`${h}[0]`,value:c[0],valueSpec:_.filter_operator,style:d.style,styleSpec:d.styleSpec})),Bi(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&Bi(c[1])==="$type"&&C.push(new $t(h,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&C.push(new $t(h,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(y=ui(c[1]),y!=="string"&&C.push(new $t(`${h}[1]`,c[1],`string expected, ${y} found`)));for(let T=2;T<c.length;T++)y=ui(c[T]),Bi(c[1])==="$type"?C=C.concat(oo({key:`${h}[${T}]`,value:c[T],valueSpec:_.geometry_type,style:d.style,styleSpec:d.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&C.push(new $t(`${h}[${T}]`,c[T],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let T=1;T<c.length;T++)C=C.concat(Jc({key:`${h}[${T}]`,value:c[T],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":y=ui(c[1]),c.length!==2?C.push(new $t(h,c,`filter array for "${c[0]}" operator must have 2 elements`)):y!=="string"&&C.push(new $t(`${h}[1]`,c[1],`string expected, ${y} found`));break;case"within":y=ui(c[1]),c.length!==2?C.push(new $t(h,c,`filter array for "${c[0]}" operator must have 2 elements`)):y!=="object"&&C.push(new $t(`${h}[1]`,c[1],`object expected, ${y} found`))}return C}function Gl(d,c){const h=d.key,_=d.validateSpec,y=d.style,C=d.styleSpec,T=d.value,A=d.objectKey,R=C[`${c}_${d.layerType}`];if(!R)return[];const V=A.match(/^(.*)-transition$/);if(c==="paint"&&V&&R[V[1]]&&R[V[1]].transition)return _({key:h,value:T,valueSpec:C.transition,style:y,styleSpec:C});const K=d.valueSpec||R[A];if(!K)return[new $t(h,T,`unknown property "${A}"`)];let J;if(ui(T)==="string"&&ta(K)&&!K.tokens&&(J=/^{([^}]+)}$/.exec(T)))return[new $t(h,T,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(J[1])} }\`.`)];const ae=[];return d.layerType==="symbol"&&(A==="text-field"&&y&&!y.glyphs&&ae.push(new $t(h,T,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Rl(ro(T))&&Bi(T.type)==="identity"&&ae.push(new $t(h,T,'"text-font" does not support identity functions'))),ae.concat(_({key:d.key,value:T,valueSpec:K,style:y,styleSpec:C,expressionContext:"property",propertyType:c,propertyKey:A}))}function Yc(d){return Gl(d,"paint")}function Qc(d){return Gl(d,"layout")}function La(d){let c=[];const h=d.value,_=d.key,y=d.style,C=d.styleSpec;h.type||h.ref||c.push(new $t(_,h,'either "type" or "ref" is required'));let T=Bi(h.type);const A=Bi(h.ref);if(h.id){const R=Bi(h.id);for(let V=0;V<d.arrayIndex;V++){const K=y.layers[V];Bi(K.id)===R&&c.push(new $t(_,h.id,`duplicate layer id "${h.id}", previously used at line ${K.id.__line__}`))}}if("ref"in h){let R;["type","source","source-layer","filter","layout"].forEach(V=>{V in h&&c.push(new $t(_,h[V],`"${V}" is prohibited for ref layers`))}),y.layers.forEach(V=>{Bi(V.id)===A&&(R=V)}),R?R.ref?c.push(new $t(_,h.ref,"ref cannot reference another ref layer")):T=Bi(R.type):c.push(new $t(_,h.ref,`ref layer "${A}" not found`))}else if(T!=="background")if(h.source){const R=y.sources&&y.sources[h.source],V=R&&Bi(R.type);R?V==="vector"&&T==="raster"?c.push(new $t(_,h.source,`layer "${h.id}" requires a raster source`)):V!=="raster-dem"&&T==="hillshade"?c.push(new $t(_,h.source,`layer "${h.id}" requires a raster-dem source`)):V==="raster"&&T!=="raster"?c.push(new $t(_,h.source,`layer "${h.id}" requires a vector source`)):V!=="vector"||h["source-layer"]?V==="raster-dem"&&T!=="hillshade"?c.push(new $t(_,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!h.paint||!h.paint["line-gradient"]||V==="geojson"&&R.lineMetrics||c.push(new $t(_,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new $t(_,h,`layer "${h.id}" must specify a "source-layer"`)):c.push(new $t(_,h.source,`source "${h.source}" not found`))}else c.push(new $t(_,h,'missing required property "source"'));return c=c.concat(zr({key:_,value:h,valueSpec:C.layer,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,objectElementValidators:{"*":()=>[],type:()=>d.validateSpec({key:`${_}.type`,value:h.type,valueSpec:C.layer.type,style:d.style,styleSpec:d.styleSpec,validateSpec:d.validateSpec,object:h,objectKey:"type"}),filter:na,layout:R=>zr({layer:h,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,validateSpec:R.validateSpec,objectElementValidators:{"*":V=>Qc(Hn({layerType:T},V))}}),paint:R=>zr({layer:h,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,validateSpec:R.validateSpec,objectElementValidators:{"*":V=>Yc(Hn({layerType:T},V))}})}})),c}function Ao(d){const c=d.value,h=d.key,_=ui(c);return _!=="string"?[new $t(h,c,`string expected, ${_} found`)]:[]}const Nf={promoteId:function({key:d,value:c}){if(ui(c)==="string")return Ao({key:d,value:c});{const h=[];for(const _ in c)h.push(...Ao({key:`${d}.${_}`,value:c[_]}));return h}}};function Vf(d){const c=d.value,h=d.key,_=d.styleSpec,y=d.style,C=d.validateSpec;if(!c.type)return[new $t(h,c,'"type" is required')];const T=Bi(c.type);let A;switch(T){case"vector":case"raster":return A=zr({key:h,value:c,valueSpec:_[`source_${T.replace("-","_")}`],style:d.style,styleSpec:_,objectElementValidators:Nf,validateSpec:C}),A;case"raster-dem":return A=function(R){var V;const K=(V=R.sourceName)!==null&&V!==void 0?V:"",J=R.value,ae=R.styleSpec,pe=ae.source_raster_dem,be=R.style;let Se=[];const Ae=ui(J);if(J===void 0)return Se;if(Ae!=="object")return Se.push(new $t("source_raster_dem",J,`object expected, ${Ae} found`)),Se;const Re=Bi(J.encoding)==="custom",ot=["redFactor","greenFactor","blueFactor","baseShift"],Ne=R.value.encoding?`"${R.value.encoding}"`:"Default";for(const Ye in J)!Re&&ot.includes(Ye)?Se.push(new $t(Ye,J[Ye],`In "${K}": "${Ye}" is only valid when "encoding" is set to "custom". ${Ne} encoding found`)):pe[Ye]?Se=Se.concat(R.validateSpec({key:Ye,value:J[Ye],valueSpec:pe[Ye],validateSpec:R.validateSpec,style:be,styleSpec:ae})):Se.push(new $t(Ye,J[Ye],`unknown property "${Ye}"`));return Se}({sourceName:h,value:c,style:d.style,styleSpec:_,validateSpec:C}),A;case"geojson":if(A=zr({key:h,value:c,valueSpec:_.source_geojson,style:y,styleSpec:_,validateSpec:C,objectElementValidators:Nf}),c.cluster)for(const R in c.clusterProperties){const[V,K]=c.clusterProperties[R],J=typeof V=="string"?[V,["accumulated"],["get",R]]:V;A.push(...so({key:`${h}.${R}.map`,value:K,validateSpec:C,expressionContext:"cluster-map"})),A.push(...so({key:`${h}.${R}.reduce`,value:J,validateSpec:C,expressionContext:"cluster-reduce"}))}return A;case"video":return zr({key:h,value:c,valueSpec:_.source_video,style:y,validateSpec:C,styleSpec:_});case"image":return zr({key:h,value:c,valueSpec:_.source_image,style:y,validateSpec:C,styleSpec:_});case"canvas":return[new $t(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return oo({key:`${h}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:C,styleSpec:_})}}function jf(d){const c=d.value,h=d.styleSpec,_=h.light,y=d.style;let C=[];const T=ui(c);if(c===void 0)return C;if(T!=="object")return C=C.concat([new $t("light",c,`object expected, ${T} found`)]),C;for(const A in c){const R=A.match(/^(.*)-transition$/);C=C.concat(R&&_[R[1]]&&_[R[1]].transition?d.validateSpec({key:A,value:c[A],valueSpec:h.transition,validateSpec:d.validateSpec,style:y,styleSpec:h}):_[A]?d.validateSpec({key:A,value:c[A],valueSpec:_[A],validateSpec:d.validateSpec,style:y,styleSpec:h}):[new $t(A,c[A],`unknown property "${A}"`)])}return C}function Uf(d){const c=d.value,h=d.styleSpec,_=h.sky,y=d.style,C=ui(c);if(c===void 0)return[];if(C!=="object")return[new $t("sky",c,`object expected, ${C} found`)];let T=[];for(const A in c)T=T.concat(_[A]?zs({key:A,value:c[A],valueSpec:_[A],style:y,styleSpec:h}):[new $t(A,c[A],`unknown property "${A}"`)]);return T}function Fa(d){const c=d.value,h=d.styleSpec,_=h.terrain,y=d.style;let C=[];const T=ui(c);if(c===void 0)return C;if(T!=="object")return C=C.concat([new $t("terrain",c,`object expected, ${T} found`)]),C;for(const A in c)C=C.concat(_[A]?d.validateSpec({key:A,value:c[A],valueSpec:_[A],validateSpec:d.validateSpec,style:y,styleSpec:h}):[new $t(A,c[A],`unknown property "${A}"`)]);return C}function Ba(d){let c=[];const h=d.value,_=d.key;if(Array.isArray(h)){const y=[],C=[];for(const T in h)h[T].id&&y.includes(h[T].id)&&c.push(new $t(_,h,`all the sprites' ids must be unique, but ${h[T].id} is duplicated`)),y.push(h[T].id),h[T].url&&C.includes(h[T].url)&&c.push(new $t(_,h,`all the sprites' URLs must be unique, but ${h[T].url} is duplicated`)),C.push(h[T].url),c=c.concat(zr({key:`${_}[${T}]`,value:h[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:d.validateSpec}));return c}return Ao({key:_,value:h})}const Ur={"*":()=>[],array:Xc,boolean:function(d){const c=d.value,h=d.key,_=ui(c);return _!=="boolean"?[new $t(h,c,`boolean expected, ${_} found`)]:[]},number:Hl,color:function(d){const c=d.key,h=d.value,_=ui(h);return _!=="string"?[new $t(c,h,`color expected, ${_} found`)]:mi.parse(String(h))?[]:[new $t(c,h,`color expected, "${h}" found`)]},constants:Ff,enum:oo,filter:na,function:Bf,layer:La,object:zr,source:Vf,light:jf,sky:Uf,terrain:Fa,string:Ao,formatted:function(d){return Ao(d).length===0?[]:so(d)},resolvedImage:function(d){return Ao(d).length===0?[]:so(d)},padding:function(d){const c=d.key,h=d.value;if(ui(h)==="array"){if(h.length<1||h.length>4)return[new $t(c,h,`padding requires 1 to 4 values; ${h.length} values found`)];const _={type:"number"};let y=[];for(let C=0;C<h.length;C++)y=y.concat(d.validateSpec({key:`${c}[${C}]`,value:h[C],validateSpec:d.validateSpec,valueSpec:_}));return y}return Hl({key:c,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(d){const c=d.key,h=d.value,_=ui(h),y=d.styleSpec;if(_!=="array"||h.length<1||h.length%2!=0)return[new $t(c,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let C=[];for(let T=0;T<h.length;T+=2)C=C.concat(oo({key:`${c}[${T}]`,value:h[T],valueSpec:y.layout_symbol["text-anchor"]})),C=C.concat(Xc({key:`${c}[${T+1}]`,value:h[T+1],valueSpec:{length:2,value:"number"},validateSpec:d.validateSpec,style:d.style,styleSpec:y}));return C},sprite:Ba};function zs(d){const c=d.value,h=d.valueSpec,_=d.styleSpec;return d.validateSpec=zs,h.expression&&Rl(Bi(c))?Bf(d):h.expression&&wi(ro(c))?so(d):h.type&&Ur[h.type]?Ur[h.type](d):zr(Hn({},d,{valueSpec:h.type?_[h.type]:h}))}function eu(d){const c=d.value,h=d.key,_=Ao(d);return _.length||(c.indexOf("{fontstack}")===-1&&_.push(new $t(h,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&_.push(new $t(h,c,'"glyphs" url must include a "{range}" token'))),_}function xs(d,c=Oe){let h=[];return h=h.concat(zs({key:"",value:d,valueSpec:c.$root,styleSpec:c,style:d,validateSpec:zs,objectElementValidators:{glyphs:eu,"*":()=>[]}})),d.constants&&(h=h.concat(Ff({key:"constants",value:d.constants,style:d,styleSpec:c,validateSpec:zs}))),ia(h)}function Rs(d){return function(c){return d({...c,validateSpec:zs})}}function ia(d){return[].concat(d).sort((c,h)=>c.line-h.line)}function ks(d){return function(...c){return ia(d.apply(this,c))}}xs.source=ks(Rs(Vf)),xs.sprite=ks(Rs(Ba)),xs.glyphs=ks(Rs(eu)),xs.light=ks(Rs(jf)),xs.sky=ks(Rs(Uf)),xs.terrain=ks(Rs(Fa)),xs.layer=ks(Rs(La)),xs.filter=ks(Rs(na)),xs.paintProperty=ks(Rs(Yc)),xs.layoutProperty=ks(Rs(Qc));const Mo=xs,Fh=Mo.light,tu=Mo.paintProperty,Bh=Mo.layoutProperty;function ra(d,c){let h=!1;if(c&&c.length)for(const _ of c)d.fire(new Xt(new Error(_.message))),h=!0;return h}class Na{constructor(c,h,_){const y=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const T=new Int32Array(this.arrayBuffer);c=T[0],this.d=(h=T[1])+2*(_=T[2]);for(let R=0;R<this.d*this.d;R++){const V=T[3+R],K=T[3+R+1];y.push(V===K?null:T.subarray(V,K))}const A=T[3+y.length+1];this.keys=T.subarray(T[3+y.length],A),this.bboxes=T.subarray(A),this.insert=this._insertReadonly}else{this.d=h+2*_;for(let T=0;T<this.d*this.d;T++)y.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=c,this.padding=_,this.scale=h/c,this.uid=0;const C=_/h*c;this.min=-C,this.max=c+C}insert(c,h,_,y,C){this._forEachCell(h,_,y,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(h),this.bboxes.push(_),this.bboxes.push(y),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,h,_,y,C,T){this.cells[C].push(T)}query(c,h,_,y,C){const T=this.min,A=this.max;if(c<=T&&h<=T&&A<=_&&A<=y&&!C)return Array.prototype.slice.call(this.keys);{const R=[];return this._forEachCell(c,h,_,y,this._queryCell,R,{},C),R}}_queryCell(c,h,_,y,C,T,A,R){const V=this.cells[C];if(V!==null){const K=this.keys,J=this.bboxes;for(let ae=0;ae<V.length;ae++){const pe=V[ae];if(A[pe]===void 0){const be=4*pe;(R?R(J[be+0],J[be+1],J[be+2],J[be+3]):c<=J[be+2]&&h<=J[be+3]&&_>=J[be+0]&&y>=J[be+1])?(A[pe]=!0,T.push(K[pe])):A[pe]=!1}}}}_forEachCell(c,h,_,y,C,T,A,R){const V=this._convertToCellCoord(c),K=this._convertToCellCoord(h),J=this._convertToCellCoord(_),ae=this._convertToCellCoord(y);for(let pe=V;pe<=J;pe++)for(let be=K;be<=ae;be++){const Se=this.d*be+pe;if((!R||R(this._convertFromCellCoord(pe),this._convertFromCellCoord(be),this._convertFromCellCoord(pe+1),this._convertFromCellCoord(be+1)))&&C.call(this,c,h,_,y,Se,T,A,R))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,h=3+this.cells.length+1+1;let _=0;for(let T=0;T<this.cells.length;T++)_+=this.cells[T].length;const y=new Int32Array(h+_+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let C=h;for(let T=0;T<c.length;T++){const A=c[T];y[3+T]=C,y.set(A,C),C+=A.length}return y[3+c.length]=C,y.set(this.keys,C),C+=this.keys.length,y[3+c.length+1]=C,y.set(this.bboxes,C),C+=this.bboxes.length,y.buffer}static serialize(c,h){const _=c.toArrayBuffer();return h&&h.push(_),{buffer:_}}static deserialize(c){return new Na(c.buffer)}}const Ls={};function hn(d,c,h={}){if(Ls[d])throw new Error(`${d} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:d,writeable:!1}),Ls[d]={klass:c,omit:h.omit||[],shallow:h.shallow||[]}}hn("Object",Object),hn("TransferableGridIndex",Na),hn("Color",mi),hn("Error",Error),hn("AJAXError",qt),hn("ResolvedImage",ms),hn("StylePropertyFunction",Fl),hn("StyleExpression",ki,{omit:["_evaluator"]}),hn("ZoomDependentExpression",Zc),hn("ZoomConstantExpression",Ll),hn("CompoundExpression",rs,{omit:["_evaluate"]});for(const d in Qo)Qo[d]._classRegistryKey||hn(`Expression_${d}`,Qo[d]);function Zl(d){return d&&typeof ArrayBuffer<"u"&&(d instanceof ArrayBuffer||d.constructor&&d.constructor.name==="ArrayBuffer")}function sa(d,c){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error)return d;if(Zl(d)||pt(d))return c&&c.push(d),d;if(ArrayBuffer.isView(d)){const h=d;return c&&c.push(h.buffer),h}if(d instanceof ImageData)return c&&c.push(d.data.buffer),d;if(Array.isArray(d)){const h=[];for(const _ of d)h.push(sa(_,c));return h}if(typeof d=="object"){const h=d.constructor,_=h._classRegistryKey;if(!_)throw new Error(`can't serialize object of unregistered class ${h.name}`);if(!Ls[_])throw new Error(`${_} is not registered.`);const y=h.serialize?h.serialize(d,c):{};if(h.serialize){if(c&&y===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in d){if(!d.hasOwnProperty(C)||Ls[_].omit.indexOf(C)>=0)continue;const T=d[C];y[C]=Ls[_].shallow.indexOf(C)>=0?T:sa(T,c)}d instanceof Error&&(y.message=d.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return _!=="Object"&&(y.$name=_),y}throw new Error("can't serialize object of type "+typeof d)}function oa(d){if(d==null||typeof d=="boolean"||typeof d=="number"||typeof d=="string"||d instanceof Boolean||d instanceof Number||d instanceof String||d instanceof Date||d instanceof RegExp||d instanceof Blob||d instanceof Error||Zl(d)||pt(d)||ArrayBuffer.isView(d)||d instanceof ImageData)return d;if(Array.isArray(d))return d.map(oa);if(typeof d=="object"){const c=d.$name||"Object";if(!Ls[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:h}=Ls[c];if(!h)throw new Error(`can't deserialize unregistered class ${c}`);if(h.deserialize)return h.deserialize(d);const _=Object.create(h.prototype);for(const y of Object.keys(d)){if(y==="$name")continue;const C=d[y];_[y]=Ls[c].shallow.indexOf(y)>=0?C:oa(C)}return _}throw new Error("can't deserialize object of type "+typeof d)}class qf{constructor(){this.first=!0}update(c,h){const _=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=_,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=_,!0):(this.lastFloorZoom>_?(this.lastIntegerZoom=_+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<_&&(this.lastIntegerZoom=_,this.lastIntegerZoomTime=h),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=_,!0))}}const an={"Latin-1 Supplement":d=>d>=128&&d<=255,Arabic:d=>d>=1536&&d<=1791,"Arabic Supplement":d=>d>=1872&&d<=1919,"Arabic Extended-A":d=>d>=2208&&d<=2303,"Hangul Jamo":d=>d>=4352&&d<=4607,"Unified Canadian Aboriginal Syllabics":d=>d>=5120&&d<=5759,Khmer:d=>d>=6016&&d<=6143,"Unified Canadian Aboriginal Syllabics Extended":d=>d>=6320&&d<=6399,"General Punctuation":d=>d>=8192&&d<=8303,"Letterlike Symbols":d=>d>=8448&&d<=8527,"Number Forms":d=>d>=8528&&d<=8591,"Miscellaneous Technical":d=>d>=8960&&d<=9215,"Control Pictures":d=>d>=9216&&d<=9279,"Optical Character Recognition":d=>d>=9280&&d<=9311,"Enclosed Alphanumerics":d=>d>=9312&&d<=9471,"Geometric Shapes":d=>d>=9632&&d<=9727,"Miscellaneous Symbols":d=>d>=9728&&d<=9983,"Miscellaneous Symbols and Arrows":d=>d>=11008&&d<=11263,"CJK Radicals Supplement":d=>d>=11904&&d<=12031,"Kangxi Radicals":d=>d>=12032&&d<=12255,"Ideographic Description Characters":d=>d>=12272&&d<=12287,"CJK Symbols and Punctuation":d=>d>=12288&&d<=12351,Hiragana:d=>d>=12352&&d<=12447,Katakana:d=>d>=12448&&d<=12543,Bopomofo:d=>d>=12544&&d<=12591,"Hangul Compatibility Jamo":d=>d>=12592&&d<=12687,Kanbun:d=>d>=12688&&d<=12703,"Bopomofo Extended":d=>d>=12704&&d<=12735,"CJK Strokes":d=>d>=12736&&d<=12783,"Katakana Phonetic Extensions":d=>d>=12784&&d<=12799,"Enclosed CJK Letters and Months":d=>d>=12800&&d<=13055,"CJK Compatibility":d=>d>=13056&&d<=13311,"CJK Unified Ideographs Extension A":d=>d>=13312&&d<=19903,"Yijing Hexagram Symbols":d=>d>=19904&&d<=19967,"CJK Unified Ideographs":d=>d>=19968&&d<=40959,"Yi Syllables":d=>d>=40960&&d<=42127,"Yi Radicals":d=>d>=42128&&d<=42191,"Hangul Jamo Extended-A":d=>d>=43360&&d<=43391,"Hangul Syllables":d=>d>=44032&&d<=55215,"Hangul Jamo Extended-B":d=>d>=55216&&d<=55295,"Private Use Area":d=>d>=57344&&d<=63743,"CJK Compatibility Ideographs":d=>d>=63744&&d<=64255,"Arabic Presentation Forms-A":d=>d>=64336&&d<=65023,"Vertical Forms":d=>d>=65040&&d<=65055,"CJK Compatibility Forms":d=>d>=65072&&d<=65103,"Small Form Variants":d=>d>=65104&&d<=65135,"Arabic Presentation Forms-B":d=>d>=65136&&d<=65279,"Halfwidth and Fullwidth Forms":d=>d>=65280&&d<=65519};function aa(d){for(const c of d)if(Wl(c.charCodeAt(0)))return!0;return!1}function Hf(d){for(const c of d)if(!Gf(c.charCodeAt(0)))return!1;return!0}function Gf(d){return!(an.Arabic(d)||an["Arabic Supplement"](d)||an["Arabic Extended-A"](d)||an["Arabic Presentation Forms-A"](d)||an["Arabic Presentation Forms-B"](d))}function Wl(d){return!(d!==746&&d!==747&&(d<4352||!(an["Bopomofo Extended"](d)||an.Bopomofo(d)||an["CJK Compatibility Forms"](d)&&!(d>=65097&&d<=65103)||an["CJK Compatibility Ideographs"](d)||an["CJK Compatibility"](d)||an["CJK Radicals Supplement"](d)||an["CJK Strokes"](d)||!(!an["CJK Symbols and Punctuation"](d)||d>=12296&&d<=12305||d>=12308&&d<=12319||d===12336)||an["CJK Unified Ideographs Extension A"](d)||an["CJK Unified Ideographs"](d)||an["Enclosed CJK Letters and Months"](d)||an["Hangul Compatibility Jamo"](d)||an["Hangul Jamo Extended-A"](d)||an["Hangul Jamo Extended-B"](d)||an["Hangul Jamo"](d)||an["Hangul Syllables"](d)||an.Hiragana(d)||an["Ideographic Description Characters"](d)||an.Kanbun(d)||an["Kangxi Radicals"](d)||an["Katakana Phonetic Extensions"](d)||an.Katakana(d)&&d!==12540||!(!an["Halfwidth and Fullwidth Forms"](d)||d===65288||d===65289||d===65293||d>=65306&&d<=65310||d===65339||d===65341||d===65343||d>=65371&&d<=65503||d===65507||d>=65512&&d<=65519)||!(!an["Small Form Variants"](d)||d>=65112&&d<=65118||d>=65123&&d<=65126)||an["Unified Canadian Aboriginal Syllabics"](d)||an["Unified Canadian Aboriginal Syllabics Extended"](d)||an["Vertical Forms"](d)||an["Yijing Hexagram Symbols"](d)||an["Yi Syllables"](d)||an["Yi Radicals"](d))))}function nu(d){return!(Wl(d)||function(c){return!!(an["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||an["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||an["Letterlike Symbols"](c)||an["Number Forms"](c)||an["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||an["Control Pictures"](c)&&c!==9251||an["Optical Character Recognition"](c)||an["Enclosed Alphanumerics"](c)||an["Geometric Shapes"](c)||an["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||an["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||an["CJK Symbols and Punctuation"](c)||an.Katakana(c)||an["Private Use Area"](c)||an["CJK Compatibility Forms"](c)||an["Small Form Variants"](c)||an["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(d))}function Kl(d){return d>=1424&&d<=2303||an["Arabic Presentation Forms-A"](d)||an["Arabic Presentation Forms-B"](d)}function Zf(d,c){return!(!c&&Kl(d)||d>=2304&&d<=3583||d>=3840&&d<=4255||an.Khmer(d))}function Nh(d){for(const c of d)if(Kl(c.charCodeAt(0)))return!0;return!1}const ao=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(d){this.pluginStatus=d.pluginStatus,this.pluginURL=d.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(d){this.applyArabicShaping=d.applyArabicShaping,this.processBidirectionalText=d.processBidirectionalText,this.processStyledBidirectionalText=d.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Ei{constructor(c,h){this.zoom=c,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qf,this.transition={})}isSupportedScript(c){return function(h,_){for(const y of h)if(!Zf(y.charCodeAt(0),_))return!1;return!0}(c,ao.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,h=c-Math.floor(c),_=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*_}:{fromScale:.5,toScale:1,t:1-(1-_)*h}}}class Va{constructor(c,h){this.property=c,this.value=h,this.expression=function(_,y){if(Rl(_))return new Fl(_,y);if(wi(_)){const C=Df(_,y);if(C.result==="error")throw new Error(C.value.map(T=>`${T.key}: ${T.message}`).join(", "));return C.value}{let C=_;return y.type==="color"&&typeof _=="string"?C=mi.parse(_):y.type!=="padding"||typeof _!="number"&&!Array.isArray(_)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(_)&&(C=hs.parse(_)):C=jr.parse(_),{kind:"constant",evaluate:()=>C}}}(h===void 0?c.specification.default:h,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,h,_){return this.property.possiblyEvaluate(this,c,h,_)}}class Xl{constructor(c){this.property=c,this.value=new Va(c,void 0)}transitioned(c,h){return new Wf(this.property,this.value,h,fe({},c.transition,this.transition),c.now)}untransitioned(){return new Wf(this.property,this.value,null,{},0)}}class iu{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return he(this._values[c].value.value)}setValue(c,h){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Xl(this._values[c].property)),this._values[c].value=new Va(this._values[c].property,h===null?void 0:he(h))}getTransition(c){return he(this._values[c].transition)}setTransition(c,h){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new Xl(this._values[c].property)),this._values[c].transition=he(h)||void 0}serialize(){const c={};for(const h of Object.keys(this._values)){const _=this.getValue(h);_!==void 0&&(c[h]=_);const y=this.getTransition(h);y!==void 0&&(c[`${h}-transition`]=y)}return c}transitioned(c,h){const _=new Kf(this._properties);for(const y of Object.keys(this._values))_._values[y]=this._values[y].transitioned(c,h._values[y]);return _}untransitioned(){const c=new Kf(this._properties);for(const h of Object.keys(this._values))c._values[h]=this._values[h].untransitioned();return c}}class Wf{constructor(c,h,_,y,C){this.property=c,this.value=h,this.begin=C+y.delay||0,this.end=this.begin+y.duration||0,c.specification.transition&&(y.delay||y.duration)&&(this.prior=_)}possiblyEvaluate(c,h,_){const y=c.now||0,C=this.value.possiblyEvaluate(c,h,_),T=this.prior;if(T){if(y>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(y<this.begin)return T.possiblyEvaluate(c,h,_);{const A=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(c,h,_),C,function(R){if(R<=0)return 0;if(R>=1)return 1;const V=R*R,K=V*R;return 4*(R<.5?K:3*(R-V)+K-.75)}(A))}}return C}}class Kf{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,h,_){const y=new ja(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(c,h,_);return y}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class Xf{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}hasValue(c){return this._values[c].value!==void 0}getValue(c){return he(this._values[c].value)}setValue(c,h){this._values[c]=new Va(this._values[c].property,h===null?void 0:he(h))}serialize(){const c={};for(const h of Object.keys(this._values)){const _=this.getValue(h);_!==void 0&&(c[h]=_)}return c}possiblyEvaluate(c,h,_){const y=new ja(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(c,h,_);return y}}class Cs{constructor(c,h,_){this.property=c,this.value=h,this.parameters=_}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,h,_,y){return this.property.evaluate(this.value,this.parameters,c,h,_,y)}}class ja{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class xn{constructor(c){this.specification=c}possiblyEvaluate(c,h){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(h)}interpolate(c,h,_){const y=Or[this.specification.type];return y?y(c,h,_):c}}class An{constructor(c,h){this.specification=c,this.overrides=h}possiblyEvaluate(c,h,_,y){return new Cs(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(h,null,{},_,y)}:c.expression,h)}interpolate(c,h,_){if(c.value.kind!=="constant"||h.value.kind!=="constant")return c;if(c.value.value===void 0||h.value.value===void 0)return new Cs(this,{kind:"constant",value:void 0},c.parameters);const y=Or[this.specification.type];if(y){const C=y(c.value.value,h.value.value,_);return new Cs(this,{kind:"constant",value:C},c.parameters)}return c}evaluate(c,h,_,y,C,T){return c.kind==="constant"?c.value:c.evaluate(h,_,y,C,T)}}class Jl extends An{possiblyEvaluate(c,h,_,y){if(c.value===void 0)return new Cs(this,{kind:"constant",value:void 0},h);if(c.expression.kind==="constant"){const C=c.expression.evaluate(h,null,{},_,y),T=c.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,A=this._calculate(T,T,T,h);return new Cs(this,{kind:"constant",value:A},h)}if(c.expression.kind==="camera"){const C=this._calculate(c.expression.evaluate({zoom:h.zoom-1}),c.expression.evaluate({zoom:h.zoom}),c.expression.evaluate({zoom:h.zoom+1}),h);return new Cs(this,{kind:"constant",value:C},h)}return new Cs(this,c.expression,h)}evaluate(c,h,_,y,C,T){if(c.kind==="source"){const A=c.evaluate(h,_,y,C,T);return this._calculate(A,A,A,h)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(h.zoom)-1},_,y),c.evaluate({zoom:Math.floor(h.zoom)},_,y),c.evaluate({zoom:Math.floor(h.zoom)+1},_,y),h):c.value}_calculate(c,h,_,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:c,to:h}:{from:_,to:h}}interpolate(c){return c}}class Ua{constructor(c){this.specification=c}possiblyEvaluate(c,h,_,y){if(c.value!==void 0){if(c.expression.kind==="constant"){const C=c.expression.evaluate(h,null,{},_,y);return this._calculate(C,C,C,h)}return this._calculate(c.expression.evaluate(new Ei(Math.floor(h.zoom-1),h)),c.expression.evaluate(new Ei(Math.floor(h.zoom),h)),c.expression.evaluate(new Ei(Math.floor(h.zoom+1),h)),h)}}_calculate(c,h,_,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:c,to:h}:{from:_,to:h}}interpolate(c){return c}}class ru{constructor(c){this.specification=c}possiblyEvaluate(c,h,_,y){return!!c.expression.evaluate(h,null,{},_,y)}interpolate(){return!1}}class qr{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in c){const _=c[h];_.specification.overridable&&this.overridableProperties.push(h);const y=this.defaultPropertyValues[h]=new Va(_,void 0),C=this.defaultTransitionablePropertyValues[h]=new Xl(_);this.defaultTransitioningPropertyValues[h]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=y.possiblyEvaluate({})}}}hn("DataDrivenProperty",An),hn("DataConstantProperty",xn),hn("CrossFadedDataDrivenProperty",Jl),hn("CrossFadedProperty",Ua),hn("ColorRampProperty",ru);const su="-transition";class Ts extends En{constructor(c,h){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),h.layout&&(this._unevaluatedLayout=new Xf(h.layout)),h.paint)){this._transitionablePaint=new iu(h.paint);for(const _ in c.paint)this.setPaintProperty(_,c.paint[_],{validate:!1});for(const _ in c.layout)this.setLayoutProperty(_,c.layout[_],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ja(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,h,_={}){h!=null&&this._validate(Bh,`layers.${this.id}.layout.${c}`,c,h,_)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,h):this.visibility=h)}getPaintProperty(c){return c.endsWith(su)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,h,_={}){if(h!=null&&this._validate(tu,`layers.${this.id}.paint.${c}`,c,h,_))return!1;if(c.endsWith(su))return this._transitionablePaint.setTransition(c.slice(0,-11),h||void 0),!1;{const y=this._transitionablePaint._values[c],C=y.property.specification["property-type"]==="cross-faded-data-driven",T=y.value.isDataDriven(),A=y.value;this._transitionablePaint.setValue(c,h),this._handleSpecialPaintPropertyUpdate(c);const R=this._transitionablePaint._values[c].value;return R.isDataDriven()||T||C||this._handleOverridablePaintPropertyUpdate(c,A,R)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,h,_){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,h){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,h)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),de(c,(h,_)=>!(h===void 0||_==="layout"&&!Object.keys(h).length||_==="paint"&&!Object.keys(h).length))}_validate(c,h,_,y,C={}){return(!C||C.validate!==!1)&&ra(this,c.call(Mo,{key:h,layerType:this.type,objectKey:_,value:y,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const h=this.paint.get(c);if(h instanceof Cs&&ta(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const Jf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class qa{constructor(c,h){this._structArray=c,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ni{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,h){return c._trim(),h&&(c.isTransferred=!0,h.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const h=Object.create(this.prototype);return h.arrayBuffer=c.arrayBuffer,h.length=c.length,h.capacity=c.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Yi(d,c=1){let h=0,_=0;return{members:d.map(y=>{const C=Jf[y.type].BYTES_PER_ELEMENT,T=h=Yf(h,Math.max(c,C)),A=y.components||1;return _=Math.max(_,C),h+=C*A,{name:y.name,type:y.type,components:A,offset:T}}),size:Yf(h,Math.max(_,c)),alignment:c}}function Yf(d,c){return Math.ceil(d/c)*c}class Ha extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h){const _=this.length;return this.resize(_+1),this.emplace(_,c,h)}emplace(c,h,_){const y=2*c;return this.int16[y+0]=h,this.int16[y+1]=_,c}}Ha.prototype.bytesPerElement=4,hn("StructArrayLayout2i4",Ha);class Gs extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,_){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,_)}emplace(c,h,_,y){const C=3*c;return this.int16[C+0]=h,this.int16[C+1]=_,this.int16[C+2]=y,c}}Gs.prototype.bytesPerElement=6,hn("StructArrayLayout3i6",Gs);class ou extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,_,y){const C=this.length;return this.resize(C+1),this.emplace(C,c,h,_,y)}emplace(c,h,_,y,C){const T=4*c;return this.int16[T+0]=h,this.int16[T+1]=_,this.int16[T+2]=y,this.int16[T+3]=C,c}}ou.prototype.bytesPerElement=8,hn("StructArrayLayout4i8",ou);class au extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,_,y,C,T){const A=this.length;return this.resize(A+1),this.emplace(A,c,h,_,y,C,T)}emplace(c,h,_,y,C,T,A){const R=6*c;return this.int16[R+0]=h,this.int16[R+1]=_,this.int16[R+2]=y,this.int16[R+3]=C,this.int16[R+4]=T,this.int16[R+5]=A,c}}au.prototype.bytesPerElement=12,hn("StructArrayLayout2i4i12",au);class lu extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,_,y,C,T){const A=this.length;return this.resize(A+1),this.emplace(A,c,h,_,y,C,T)}emplace(c,h,_,y,C,T,A){const R=4*c,V=8*c;return this.int16[R+0]=h,this.int16[R+1]=_,this.uint8[V+4]=y,this.uint8[V+5]=C,this.uint8[V+6]=T,this.uint8[V+7]=A,c}}lu.prototype.bytesPerElement=8,hn("StructArrayLayout2i4ub8",lu);class Ga extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h){const _=this.length;return this.resize(_+1),this.emplace(_,c,h)}emplace(c,h,_){const y=2*c;return this.float32[y+0]=h,this.float32[y+1]=_,c}}Ga.prototype.bytesPerElement=8,hn("StructArrayLayout2f8",Ga);class Yl extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,_,y,C,T,A,R,V,K){const J=this.length;return this.resize(J+1),this.emplace(J,c,h,_,y,C,T,A,R,V,K)}emplace(c,h,_,y,C,T,A,R,V,K,J){const ae=10*c;return this.uint16[ae+0]=h,this.uint16[ae+1]=_,this.uint16[ae+2]=y,this.uint16[ae+3]=C,this.uint16[ae+4]=T,this.uint16[ae+5]=A,this.uint16[ae+6]=R,this.uint16[ae+7]=V,this.uint16[ae+8]=K,this.uint16[ae+9]=J,c}}Yl.prototype.bytesPerElement=20,hn("StructArrayLayout10ui20",Yl);class cu extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,_,y,C,T,A,R,V,K,J,ae){const pe=this.length;return this.resize(pe+1),this.emplace(pe,c,h,_,y,C,T,A,R,V,K,J,ae)}emplace(c,h,_,y,C,T,A,R,V,K,J,ae,pe){const be=12*c;return this.int16[be+0]=h,this.int16[be+1]=_,this.int16[be+2]=y,this.int16[be+3]=C,this.uint16[be+4]=T,this.uint16[be+5]=A,this.uint16[be+6]=R,this.uint16[be+7]=V,this.int16[be+8]=K,this.int16[be+9]=J,this.int16[be+10]=ae,this.int16[be+11]=pe,c}}cu.prototype.bytesPerElement=24,hn("StructArrayLayout4i4ui4i24",cu);class uu extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,_){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,_)}emplace(c,h,_,y){const C=3*c;return this.float32[C+0]=h,this.float32[C+1]=_,this.float32[C+2]=y,c}}uu.prototype.bytesPerElement=12,hn("StructArrayLayout3f12",uu);class Zs extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.uint32[1*c+0]=h,c}}Zs.prototype.bytesPerElement=4,hn("StructArrayLayout1ul4",Zs);class Ql extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,_,y,C,T,A,R,V){const K=this.length;return this.resize(K+1),this.emplace(K,c,h,_,y,C,T,A,R,V)}emplace(c,h,_,y,C,T,A,R,V,K){const J=10*c,ae=5*c;return this.int16[J+0]=h,this.int16[J+1]=_,this.int16[J+2]=y,this.int16[J+3]=C,this.int16[J+4]=T,this.int16[J+5]=A,this.uint32[ae+3]=R,this.uint16[J+8]=V,this.uint16[J+9]=K,c}}Ql.prototype.bytesPerElement=20,hn("StructArrayLayout6i1ul2ui20",Ql);class Za extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,_,y,C,T){const A=this.length;return this.resize(A+1),this.emplace(A,c,h,_,y,C,T)}emplace(c,h,_,y,C,T,A){const R=6*c;return this.int16[R+0]=h,this.int16[R+1]=_,this.int16[R+2]=y,this.int16[R+3]=C,this.int16[R+4]=T,this.int16[R+5]=A,c}}Za.prototype.bytesPerElement=12,hn("StructArrayLayout2i2i2i12",Za);class ec extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,_,y,C){const T=this.length;return this.resize(T+1),this.emplace(T,c,h,_,y,C)}emplace(c,h,_,y,C,T){const A=4*c,R=8*c;return this.float32[A+0]=h,this.float32[A+1]=_,this.float32[A+2]=y,this.int16[R+6]=C,this.int16[R+7]=T,c}}ec.prototype.bytesPerElement=16,hn("StructArrayLayout2f1f2i16",ec);class Wa extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,_,y){const C=this.length;return this.resize(C+1),this.emplace(C,c,h,_,y)}emplace(c,h,_,y,C){const T=12*c,A=3*c;return this.uint8[T+0]=h,this.uint8[T+1]=_,this.float32[A+1]=y,this.float32[A+2]=C,c}}Wa.prototype.bytesPerElement=12,hn("StructArrayLayout2ub2f12",Wa);class tc extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,_){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,_)}emplace(c,h,_,y){const C=3*c;return this.uint16[C+0]=h,this.uint16[C+1]=_,this.uint16[C+2]=y,c}}tc.prototype.bytesPerElement=6,hn("StructArrayLayout3ui6",tc);class la extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,_,y,C,T,A,R,V,K,J,ae,pe,be,Se,Ae,Re){const ot=this.length;return this.resize(ot+1),this.emplace(ot,c,h,_,y,C,T,A,R,V,K,J,ae,pe,be,Se,Ae,Re)}emplace(c,h,_,y,C,T,A,R,V,K,J,ae,pe,be,Se,Ae,Re,ot){const Ne=24*c,Ye=12*c,Ot=48*c;return this.int16[Ne+0]=h,this.int16[Ne+1]=_,this.uint16[Ne+2]=y,this.uint16[Ne+3]=C,this.uint32[Ye+2]=T,this.uint32[Ye+3]=A,this.uint32[Ye+4]=R,this.uint16[Ne+10]=V,this.uint16[Ne+11]=K,this.uint16[Ne+12]=J,this.float32[Ye+7]=ae,this.float32[Ye+8]=pe,this.uint8[Ot+36]=be,this.uint8[Ot+37]=Se,this.uint8[Ot+38]=Ae,this.uint32[Ye+10]=Re,this.int16[Ne+22]=ot,c}}la.prototype.bytesPerElement=48,hn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",la);class Do extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,_,y,C,T,A,R,V,K,J,ae,pe,be,Se,Ae,Re,ot,Ne,Ye,Ot,Bt,fn,vn,ln,on,Qt,mn){const sn=this.length;return this.resize(sn+1),this.emplace(sn,c,h,_,y,C,T,A,R,V,K,J,ae,pe,be,Se,Ae,Re,ot,Ne,Ye,Ot,Bt,fn,vn,ln,on,Qt,mn)}emplace(c,h,_,y,C,T,A,R,V,K,J,ae,pe,be,Se,Ae,Re,ot,Ne,Ye,Ot,Bt,fn,vn,ln,on,Qt,mn,sn){const Wt=32*c,In=16*c;return this.int16[Wt+0]=h,this.int16[Wt+1]=_,this.int16[Wt+2]=y,this.int16[Wt+3]=C,this.int16[Wt+4]=T,this.int16[Wt+5]=A,this.int16[Wt+6]=R,this.int16[Wt+7]=V,this.uint16[Wt+8]=K,this.uint16[Wt+9]=J,this.uint16[Wt+10]=ae,this.uint16[Wt+11]=pe,this.uint16[Wt+12]=be,this.uint16[Wt+13]=Se,this.uint16[Wt+14]=Ae,this.uint16[Wt+15]=Re,this.uint16[Wt+16]=ot,this.uint16[Wt+17]=Ne,this.uint16[Wt+18]=Ye,this.uint16[Wt+19]=Ot,this.uint16[Wt+20]=Bt,this.uint16[Wt+21]=fn,this.uint16[Wt+22]=vn,this.uint32[In+12]=ln,this.float32[In+13]=on,this.float32[In+14]=Qt,this.uint16[Wt+30]=mn,this.uint16[Wt+31]=sn,c}}Do.prototype.bytesPerElement=64,hn("StructArrayLayout8i15ui1ul2f2ui64",Do);class nc extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.float32[1*c+0]=h,c}}nc.prototype.bytesPerElement=4,hn("StructArrayLayout1f4",nc);class ic extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,_){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,_)}emplace(c,h,_,y){const C=3*c;return this.uint16[6*c+0]=h,this.float32[C+1]=_,this.float32[C+2]=y,c}}ic.prototype.bytesPerElement=12,hn("StructArrayLayout1ui2f12",ic);class Oo extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,_){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,_)}emplace(c,h,_,y){const C=4*c;return this.uint32[2*c+0]=h,this.uint16[C+2]=_,this.uint16[C+3]=y,c}}Oo.prototype.bytesPerElement=8,hn("StructArrayLayout1ul2ui8",Oo);class fu extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h){const _=this.length;return this.resize(_+1),this.emplace(_,c,h)}emplace(c,h,_){const y=2*c;return this.uint16[y+0]=h,this.uint16[y+1]=_,c}}fu.prototype.bytesPerElement=4,hn("StructArrayLayout2ui4",fu);class du extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.uint16[1*c+0]=h,c}}du.prototype.bytesPerElement=2,hn("StructArrayLayout1ui2",du);class rc extends Ni{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,_,y){const C=this.length;return this.resize(C+1),this.emplace(C,c,h,_,y)}emplace(c,h,_,y,C){const T=4*c;return this.float32[T+0]=h,this.float32[T+1]=_,this.float32[T+2]=y,this.float32[T+3]=C,c}}rc.prototype.bytesPerElement=16,hn("StructArrayLayout4f16",rc);class Qf extends qa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new g(this.anchorPointX,this.anchorPointY)}}Qf.prototype.size=20;class x extends Ql{get(c){return new Qf(this,c)}}hn("CollisionBoxArray",x);class u extends qa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}u.prototype.size=48;class p extends la{get(c){return new u(this,c)}}hn("PlacedSymbolArray",p);class v extends qa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}v.prototype.size=64;class b extends Do{get(c){return new v(this,c)}}hn("SymbolInstanceArray",b);class k extends nc{getoffsetX(c){return this.float32[1*c+0]}}hn("GlyphOffsetArray",k);class O extends Gs{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}hn("SymbolLineVertexArray",O);class z extends qa{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}z.prototype.size=12;class B extends ic{get(c){return new z(this,c)}}hn("TextAnchorOffsetArray",B);class q extends qa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}q.prototype.size=8;class Y extends Oo{get(c){return new q(this,c)}}hn("FeatureIndexArray",Y);class te extends Ha{}class ge extends Ha{}class $e extends Ha{}class Pe extends au{}class Me extends lu{}class Te extends Ga{}class je extends Yl{}class gt extends cu{}class De extends uu{}class Qe extends Zs{}class vt extends Za{}class xt extends Wa{}class Tt extends tc{}class Ht extends fu{}const jt=Yi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yt}=jt;class nn{constructor(c=[]){this.segments=c}prepareSegment(c,h,_,y){let C=this.segments[this.segments.length-1];return c>nn.MAX_VERTEX_ARRAY_LENGTH&&j(`Max vertices per segment is ${nn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!C||C.vertexLength+c>nn.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==y)&&(C={vertexOffset:h.length,primitiveOffset:_.length,vertexLength:0,primitiveLength:0},y!==void 0&&(C.sortKey=y),this.segments.push(C)),C}get(){return this.segments}destroy(){for(const c of this.segments)for(const h in c.vaos)c.vaos[h].destroy()}static simpleSegment(c,h,_,y){return new nn([{vertexOffset:c,primitiveOffset:h,vertexLength:_,primitiveLength:y,vaos:{},sortKey:0}])}}function Xn(d,c){return 256*(d=se(Math.floor(d),0,255))+se(Math.floor(c),0,255)}nn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,hn("SegmentVector",nn);const rn=Yi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Dn={exports:{}},Jn={exports:{}};Jn.exports=function(d,c){var h,_,y,C,T,A,R,V;for(_=d.length-(h=3&d.length),y=c,T=3432918353,A=461845907,V=0;V<_;)R=255&d.charCodeAt(V)|(255&d.charCodeAt(++V))<<8|(255&d.charCodeAt(++V))<<16|(255&d.charCodeAt(++V))<<24,++V,y=27492+(65535&(C=5*(65535&(y=(y^=R=(65535&(R=(R=(65535&R)*T+(((R>>>16)*T&65535)<<16)&4294967295)<<15|R>>>17))*A+(((R>>>16)*A&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(R=0,h){case 3:R^=(255&d.charCodeAt(V+2))<<16;case 2:R^=(255&d.charCodeAt(V+1))<<8;case 1:y^=R=(65535&(R=(R=(65535&(R^=255&d.charCodeAt(V)))*T+(((R>>>16)*T&65535)<<16)&4294967295)<<15|R>>>17))*A+(((R>>>16)*A&65535)<<16)&4294967295}return y^=d.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var ci=Jn.exports,Fn={exports:{}};Fn.exports=function(d,c){for(var h,_=d.length,y=c^_,C=0;_>=4;)h=1540483477*(65535&(h=255&d.charCodeAt(C)|(255&d.charCodeAt(++C))<<8|(255&d.charCodeAt(++C))<<16|(255&d.charCodeAt(++C))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),_-=4,++C;switch(_){case 3:y^=(255&d.charCodeAt(C+2))<<16;case 2:y^=(255&d.charCodeAt(C+1))<<8;case 1:y=1540483477*(65535&(y^=255&d.charCodeAt(C)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var Qn=ci,ni=Fn.exports;Dn.exports=Qn,Dn.exports.murmur3=Qn,Dn.exports.murmur2=ni;var Vi=l(Dn.exports);class _i{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,h,_,y){this.ids.push(ss(c)),this.positions.push(h,_,y)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=ss(c);let _=0,y=this.ids.length-1;for(;_<y;){const T=_+y>>1;this.ids[T]>=h?y=T:_=T+1}const C=[];for(;this.ids[_]===h;)C.push({index:this.positions[3*_],start:this.positions[3*_+1],end:this.positions[3*_+2]}),_++;return C}static serialize(c,h){const _=new Float64Array(c.ids),y=new Uint32Array(c.positions);return ur(_,y,0,_.length-1),h&&h.push(_.buffer,y.buffer),{ids:_,positions:y}}static deserialize(c){const h=new _i;return h.ids=c.ids,h.positions=c.positions,h.indexed=!0,h}}function ss(d){const c=+d;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:Vi(String(d))}function ur(d,c,h,_){for(;h<_;){const y=d[h+_>>1];let C=h-1,T=_+1;for(;;){do C++;while(d[C]<y);do T--;while(d[T]>y);if(C>=T)break;Mi(d,C,T),Mi(c,3*C,3*T),Mi(c,3*C+1,3*T+1),Mi(c,3*C+2,3*T+2)}T-h<_-T?(ur(d,c,h,T),h=T+1):(ur(d,c,T+1,_),_=T)}}function Mi(d,c,h){const _=d[c];d[c]=d[h],d[h]=_}hn("FeaturePositionMap",_i);class fr{constructor(c,h){this.gl=c.gl,this.location=h}}class os extends fr{constructor(c,h){super(c,h),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class Fs extends fr{constructor(c,h){super(c,h),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class lo extends fr{constructor(c,h){super(c,h),this.current=mi.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const Ka=new Float32Array(16);function co(d){return[Xn(255*d.r,255*d.g),Xn(255*d.b,255*d.a)]}class Bs{constructor(c,h,_){this.value=c,this.uniformNames=h.map(y=>`u_${y}`),this.type=_}setUniform(c,h,_){c.set(_.constantOr(this.value))}getBinding(c,h,_){return this.type==="color"?new lo(c,h):new os(c,h)}}class nr{constructor(c,h){this.uniformNames=h.map(_=>`u_${_}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=c.tlbr}setUniform(c,h,_,y){const C=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&c.set(C)}getBinding(c,h,_){return _.substr(0,9)==="u_pattern"?new Fs(c,h):new os(c,h)}}class Di{constructor(c,h,_,y){this.expression=c,this.type=_,this.maxValue=0,this.paintVertexAttributes=h.map(C=>({name:`a_${C}`,type:"Float32",components:_==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(c,h,_,y,C){const T=this.paintVertexArray.length,A=this.expression.evaluate(new Ei(0),h,{},y,[],C);this.paintVertexArray.resize(c),this._setPaintValue(T,c,A)}updatePaintArray(c,h,_,y){const C=this.expression.evaluate({zoom:0},_,y);this._setPaintValue(c,h,C)}_setPaintValue(c,h,_){if(this.type==="color"){const y=co(_);for(let C=c;C<h;C++)this.paintVertexArray.emplace(C,y[0],y[1])}else{for(let y=c;y<h;y++)this.paintVertexArray.emplace(y,_);this.maxValue=Math.max(this.maxValue,Math.abs(_))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ii{constructor(c,h,_,y,C,T){this.expression=c,this.uniformNames=h.map(A=>`u_${A}_t`),this.type=_,this.useIntegerZoom=y,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=h.map(A=>({name:`a_${A}`,type:"Float32",components:_==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(c,h,_,y,C){const T=this.expression.evaluate(new Ei(this.zoom),h,{},y,[],C),A=this.expression.evaluate(new Ei(this.zoom+1),h,{},y,[],C),R=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(R,c,T,A)}updatePaintArray(c,h,_,y){const C=this.expression.evaluate({zoom:this.zoom},_,y),T=this.expression.evaluate({zoom:this.zoom+1},_,y);this._setPaintValue(c,h,C,T)}_setPaintValue(c,h,_,y){if(this.type==="color"){const C=co(_),T=co(y);for(let A=c;A<h;A++)this.paintVertexArray.emplace(A,C[0],C[1],T[0],T[1])}else{for(let C=c;C<h;C++)this.paintVertexArray.emplace(C,_,y);this.maxValue=Math.max(this.maxValue,Math.abs(_),Math.abs(y))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,h){const _=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,y=se(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);c.set(y)}getBinding(c,h,_){return new os(c,h)}}class ps{constructor(c,h,_,y,C,T){this.expression=c,this.type=h,this.useIntegerZoom=_,this.zoom=y,this.layerId=T,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(c,h,_){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(y,c,h.patterns&&h.patterns[this.layerId],_)}updatePaintArray(c,h,_,y,C){this._setPaintValues(c,h,_.patterns&&_.patterns[this.layerId],C)}_setPaintValues(c,h,_,y){if(!y||!_)return;const{min:C,mid:T,max:A}=_,R=y[C],V=y[T],K=y[A];if(R&&V&&K)for(let J=c;J<h;J++)this.zoomInPaintVertexArray.emplace(J,V.tl[0],V.tl[1],V.br[0],V.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],V.pixelRatio,R.pixelRatio),this.zoomOutPaintVertexArray.emplace(J,V.tl[0],V.tl[1],V.br[0],V.br[1],K.tl[0],K.tl[1],K.br[0],K.br[1],V.pixelRatio,K.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,rn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,rn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ir{constructor(c,h,_){this.binders={},this._buffers=[];const y=[];for(const C in c.paint._values){if(!_(C))continue;const T=c.paint.get(C);if(!(T instanceof Cs&&ta(T.property.specification)))continue;const A=_s(C,c.type),R=T.value,V=T.property.specification.type,K=T.property.useIntegerZoom,J=T.property.specification["property-type"],ae=J==="cross-faded"||J==="cross-faded-data-driven";if(R.kind==="constant")this.binders[C]=ae?new nr(R.value,A):new Bs(R.value,A,V),y.push(`/u_${C}`);else if(R.kind==="source"||ae){const pe=rr(C,V,"source");this.binders[C]=ae?new ps(R,V,K,h,pe,c.id):new Di(R,A,V,pe),y.push(`/a_${C}`)}else{const pe=rr(C,V,"composite");this.binders[C]=new Ii(R,A,V,K,h,pe),y.push(`/z_${C}`)}}this.cacheKey=y.sort().join("")}getMaxValue(c){const h=this.binders[c];return h instanceof Di||h instanceof Ii?h.maxValue:0}populatePaintArrays(c,h,_,y,C){for(const T in this.binders){const A=this.binders[T];(A instanceof Di||A instanceof Ii||A instanceof ps)&&A.populatePaintArray(c,h,_,y,C)}}setConstantPatternPositions(c,h){for(const _ in this.binders){const y=this.binders[_];y instanceof nr&&y.setConstantPatternPositions(c,h)}}updatePaintArrays(c,h,_,y,C){let T=!1;for(const A in c){const R=h.getPositions(A);for(const V of R){const K=_.feature(V.index);for(const J in this.binders){const ae=this.binders[J];if((ae instanceof Di||ae instanceof Ii||ae instanceof ps)&&ae.expression.isStateDependent===!0){const pe=y.paint.get(J);ae.expression=pe.value,ae.updatePaintArray(V.start,V.end,K,c[A],C),T=!0}}}}return T}defines(){const c=[];for(const h in this.binders){const _=this.binders[h];(_ instanceof Bs||_ instanceof nr)&&c.push(..._.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return c}getBinderAttributes(){const c=[];for(const h in this.binders){const _=this.binders[h];if(_ instanceof Di||_ instanceof Ii)for(let y=0;y<_.paintVertexAttributes.length;y++)c.push(_.paintVertexAttributes[y].name);else if(_ instanceof ps)for(let y=0;y<rn.members.length;y++)c.push(rn.members[y].name)}return c}getBinderUniforms(){const c=[];for(const h in this.binders){const _=this.binders[h];if(_ instanceof Bs||_ instanceof nr||_ instanceof Ii)for(const y of _.uniformNames)c.push(y)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,h){const _=[];for(const y in this.binders){const C=this.binders[y];if(C instanceof Bs||C instanceof nr||C instanceof Ii){for(const T of C.uniformNames)if(h[T]){const A=C.getBinding(c,h[T],T);_.push({name:T,property:y,binding:A})}}}return _}setUniforms(c,h,_,y){for(const{name:C,property:T,binding:A}of h)this.binders[T].setUniform(A,y,_.get(T),C)}updatePaintBuffers(c){this._buffers=[];for(const h in this.binders){const _=this.binders[h];if(c&&_ instanceof ps){const y=c.fromScale===2?_.zoomInPaintVertexBuffer:_.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(_ instanceof Di||_ instanceof Ii)&&_.paintVertexBuffer&&this._buffers.push(_.paintVertexBuffer)}}upload(c){for(const h in this.binders){const _=this.binders[h];(_ instanceof Di||_ instanceof Ii||_ instanceof ps)&&_.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const h=this.binders[c];(h instanceof Di||h instanceof Ii||h instanceof ps)&&h.destroy()}}}class Oi{constructor(c,h,_=()=>!0){this.programConfigurations={};for(const y of c)this.programConfigurations[y.id]=new ir(y,h,_);this.needsUpload=!1,this._featureMap=new _i,this._bufferOffset=0}populatePaintArrays(c,h,_,y,C,T){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(c,h,y,C,T);h.id!==void 0&&this._featureMap.add(h.id,_,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,h,_,y){for(const C of _)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(c,this._featureMap,h,C,y)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function _s(d,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[d]||[d.replace(`${c}-`,"").replace(/-/g,"_")]}function rr(d,c,h){const _={color:{source:Ga,composite:rc},number:{source:nc,composite:Ga}},y=function(C){return{"line-pattern":{source:je,composite:je},"fill-pattern":{source:je,composite:je},"fill-extrusion-pattern":{source:je,composite:je}}[C]}(d);return y&&y[h]||_[c][h]}hn("ConstantBinder",Bs),hn("CrossFadedConstantBinder",nr),hn("SourceExpressionBinder",Di),hn("CrossFadedCompositeBinder",ps),hn("CompositeExpressionBinder",Ii),hn("ProgramConfiguration",ir,{omit:["_buffers"]}),hn("ProgramConfigurationSet",Oi);const Ui=8192,hu=Math.pow(2,14)-1,ed=-hu-1;function zo(d){const c=Ui/d.extent,h=d.loadGeometry();for(let _=0;_<h.length;_++){const y=h[_];for(let C=0;C<y.length;C++){const T=y[C],A=Math.round(T.x*c),R=Math.round(T.y*c);T.x=se(A,ed,hu),T.y=se(R,ed,hu),(A<T.x||A>T.x+1||R<T.y||R>T.y+1)&&j("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function Ro(d,c){return{type:d.type,id:d.id,properties:d.properties,geometry:c?zo(d):[]}}function sc(d,c,h,_,y){d.emplaceBack(2*c+(_+1)/2,2*h+(y+1)/2)}class uo{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new ge,this.indexArray=new Tt,this.segments=new nn,this.programConfigurations=new Oi(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,_){const y=this.layers[0],C=[];let T=null,A=!1;y.type==="circle"&&(T=y.layout.get("circle-sort-key"),A=!T.isConstant());for(const{feature:R,id:V,index:K,sourceLayerIndex:J}of c){const ae=this.layers[0]._featureFilter.needGeometry,pe=Ro(R,ae);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),pe,_))continue;const be=A?T.evaluate(pe,{},_):void 0,Se={id:V,properties:R.properties,type:R.type,sourceLayerIndex:J,index:K,geometry:ae?pe.geometry:zo(R),patterns:{},sortKey:be};C.push(Se)}A&&C.sort((R,V)=>R.sortKey-V.sortKey);for(const R of C){const{geometry:V,index:K,sourceLayerIndex:J}=R,ae=c[K].feature;this.addFeature(R,V,K,_),h.featureIndex.insert(ae,V,K,J,this.index)}}update(c,h,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Yt),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,h,_,y){for(const C of h)for(const T of C){const A=T.x,R=T.y;if(A<0||A>=Ui||R<0||R>=Ui)continue;const V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),K=V.vertexLength;sc(this.layoutVertexArray,A,R,-1,-1),sc(this.layoutVertexArray,A,R,1,-1),sc(this.layoutVertexArray,A,R,1,1),sc(this.layoutVertexArray,A,R,-1,1),this.indexArray.emplaceBack(K,K+1,K+2),this.indexArray.emplaceBack(K,K+3,K+2),V.vertexLength+=4,V.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,_,{},y)}}function mu(d,c){for(let h=0;h<d.length;h++)if(ac(c,d[h]))return!0;for(let h=0;h<c.length;h++)if(ac(d,c[h]))return!0;return!!oc(d,c)}function td(d,c,h){return!!ac(d,c)||!!Vh(c,d,h)}function pu(d,c){if(d.length===1)return o_(c,d[0]);for(let h=0;h<c.length;h++){const _=c[h];for(let y=0;y<_.length;y++)if(ac(d,_[y]))return!0}for(let h=0;h<d.length;h++)if(o_(c,d[h]))return!0;for(let h=0;h<c.length;h++)if(oc(d,c[h]))return!0;return!1}function _u(d,c,h){if(d.length>1){if(oc(d,c))return!0;for(let _=0;_<c.length;_++)if(Vh(c[_],d,h))return!0}for(let _=0;_<d.length;_++)if(Vh(d[_],c,h))return!0;return!1}function oc(d,c){if(d.length===0||c.length===0)return!1;for(let h=0;h<d.length-1;h++){const _=d[h],y=d[h+1];for(let C=0;C<c.length-1;C++)if(gu(_,y,c[C],c[C+1]))return!0}return!1}function gu(d,c,h,_){return xe(d,h,_)!==xe(c,h,_)&&xe(d,c,h)!==xe(d,c,_)}function Vh(d,c,h){const _=h*h;if(c.length===1)return d.distSqr(c[0])<_;for(let y=1;y<c.length;y++)if(s_(d,c[y-1],c[y])<_)return!0;return!1}function s_(d,c,h){const _=c.distSqr(h);if(_===0)return d.distSqr(c);const y=((d.x-c.x)*(h.x-c.x)+(d.y-c.y)*(h.y-c.y))/_;return d.distSqr(y<0?c:y>1?h:h.sub(c)._mult(y)._add(c))}function o_(d,c){let h,_,y,C=!1;for(let T=0;T<d.length;T++){h=d[T];for(let A=0,R=h.length-1;A<h.length;R=A++)_=h[A],y=h[R],_.y>c.y!=y.y>c.y&&c.x<(y.x-_.x)*(c.y-_.y)/(y.y-_.y)+_.x&&(C=!C)}return C}function ac(d,c){let h=!1;for(let _=0,y=d.length-1;_<d.length;y=_++){const C=d[_],T=d[y];C.y>c.y!=T.y>c.y&&c.x<(T.x-C.x)*(c.y-C.y)/(T.y-C.y)+C.x&&(h=!h)}return h}function Tx(d,c,h){const _=h[0],y=h[2];if(d.x<_.x&&c.x<_.x||d.x>y.x&&c.x>y.x||d.y<_.y&&c.y<_.y||d.y>y.y&&c.y>y.y)return!1;const C=xe(d,c,h[0]);return C!==xe(d,c,h[1])||C!==xe(d,c,h[2])||C!==xe(d,c,h[3])}function vu(d,c,h){const _=c.paint.get(d).value;return _.kind==="constant"?_.value:h.programConfigurations.get(c.id).getMaxValue(d)}function nd(d){return Math.sqrt(d[0]*d[0]+d[1]*d[1])}function id(d,c,h,_,y){if(!c[0]&&!c[1])return d;const C=g.convert(c)._mult(y);h==="viewport"&&C._rotate(-_);const T=[];for(let A=0;A<d.length;A++)T.push(d[A].sub(C));return T}let a_,l_;hn("CircleBucket",uo,{omit:["layers"]});var Sx={get paint(){return l_=l_||new qr({"circle-radius":new An(Oe.paint_circle["circle-radius"]),"circle-color":new An(Oe.paint_circle["circle-color"]),"circle-blur":new An(Oe.paint_circle["circle-blur"]),"circle-opacity":new An(Oe.paint_circle["circle-opacity"]),"circle-translate":new xn(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new xn(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new xn(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new xn(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new An(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new An(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new An(Oe.paint_circle["circle-stroke-opacity"])})},get layout(){return a_=a_||new qr({"circle-sort-key":new An(Oe.layout_circle["circle-sort-key"])})}},Hr=1e-6,lc=typeof Float32Array<"u"?Float32Array:Array;function jh(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function c_(d,c,h){var _=c[0],y=c[1],C=c[2],T=c[3],A=c[4],R=c[5],V=c[6],K=c[7],J=c[8],ae=c[9],pe=c[10],be=c[11],Se=c[12],Ae=c[13],Re=c[14],ot=c[15],Ne=h[0],Ye=h[1],Ot=h[2],Bt=h[3];return d[0]=Ne*_+Ye*A+Ot*J+Bt*Se,d[1]=Ne*y+Ye*R+Ot*ae+Bt*Ae,d[2]=Ne*C+Ye*V+Ot*pe+Bt*Re,d[3]=Ne*T+Ye*K+Ot*be+Bt*ot,d[4]=(Ne=h[4])*_+(Ye=h[5])*A+(Ot=h[6])*J+(Bt=h[7])*Se,d[5]=Ne*y+Ye*R+Ot*ae+Bt*Ae,d[6]=Ne*C+Ye*V+Ot*pe+Bt*Re,d[7]=Ne*T+Ye*K+Ot*be+Bt*ot,d[8]=(Ne=h[8])*_+(Ye=h[9])*A+(Ot=h[10])*J+(Bt=h[11])*Se,d[9]=Ne*y+Ye*R+Ot*ae+Bt*Ae,d[10]=Ne*C+Ye*V+Ot*pe+Bt*Re,d[11]=Ne*T+Ye*K+Ot*be+Bt*ot,d[12]=(Ne=h[12])*_+(Ye=h[13])*A+(Ot=h[14])*J+(Bt=h[15])*Se,d[13]=Ne*y+Ye*R+Ot*ae+Bt*Ae,d[14]=Ne*C+Ye*V+Ot*pe+Bt*Re,d[15]=Ne*T+Ye*K+Ot*be+Bt*ot,d}Math.hypot||(Math.hypot=function(){for(var d=0,c=arguments.length;c--;)d+=arguments[c]*arguments[c];return Math.sqrt(d)});var bu,Ex=c_;function rd(d,c,h){var _=c[0],y=c[1],C=c[2],T=c[3];return d[0]=h[0]*_+h[4]*y+h[8]*C+h[12]*T,d[1]=h[1]*_+h[5]*y+h[9]*C+h[13]*T,d[2]=h[2]*_+h[6]*y+h[10]*C+h[14]*T,d[3]=h[3]*_+h[7]*y+h[11]*C+h[15]*T,d}bu=new lc(4),lc!=Float32Array&&(bu[0]=0,bu[1]=0,bu[2]=0,bu[3]=0);class Ix extends Ts{constructor(c){super(c,Sx)}createBucket(c){return new uo(c)}queryRadius(c){const h=c;return vu("circle-radius",this,h)+vu("circle-stroke-width",this,h)+nd(this.paint.get("circle-translate"))}queryIntersectsFeature(c,h,_,y,C,T,A,R){const V=id(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,A),K=this.paint.get("circle-radius").evaluate(h,_)+this.paint.get("circle-stroke-width").evaluate(h,_),J=this.paint.get("circle-pitch-alignment")==="map",ae=J?V:function(be,Se){return be.map(Ae=>u_(Ae,Se))}(V,R),pe=J?K*A:K;for(const be of y)for(const Se of be){const Ae=J?Se:u_(Se,R);let Re=pe;const ot=rd([],[Se.x,Se.y,0,1],R);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Re*=ot[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Re*=T.cameraToCenterDistance/ot[3]),td(ae,Ae,Re))return!0}return!1}}function u_(d,c){const h=rd([],[d.x,d.y,0,1],c);return new g(h[0]/h[3],h[1]/h[3])}class f_ extends uo{}let d_;hn("HeatmapBucket",f_,{omit:["layers"]});var Px={get paint(){return d_=d_||new qr({"heatmap-radius":new An(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new An(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new xn(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ru(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new xn(Oe.paint_heatmap["heatmap-opacity"])})}};function Uh(d,{width:c,height:h},_,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==c*h*_)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${c*h*_}`)}else y=new Uint8Array(c*h*_);return d.width=c,d.height=h,d.data=y,d}function h_(d,{width:c,height:h},_){if(c===d.width&&h===d.height)return;const y=Uh({},{width:c,height:h},_);qh(d,y,{x:0,y:0},{x:0,y:0},{width:Math.min(d.width,c),height:Math.min(d.height,h)},_),d.width=c,d.height=h,d.data=y.data}function qh(d,c,h,_,y,C){if(y.width===0||y.height===0)return c;if(y.width>d.width||y.height>d.height||h.x>d.width-y.width||h.y>d.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>c.width||y.height>c.height||_.x>c.width-y.width||_.y>c.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const T=d.data,A=c.data;if(T===A)throw new Error("srcData equals dstData, so image is already copied");for(let R=0;R<y.height;R++){const V=((h.y+R)*d.width+h.x)*C,K=((_.y+R)*c.width+_.x)*C;for(let J=0;J<y.width*C;J++)A[K+J]=T[V+J]}return c}class yu{constructor(c,h){Uh(this,c,1,h)}resize(c){h_(this,c,1)}clone(){return new yu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,h,_,y,C){qh(c,h,_,y,C,1)}}class Ss{constructor(c,h){Uh(this,c,4,h)}resize(c){h_(this,c,4)}replace(c,h){h?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new Ss({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,h,_,y,C){qh(c,h,_,y,C,4)}}function m_(d){const c={},h=d.resolution||256,_=d.clips?d.clips.length:1,y=d.image||new Ss({width:h,height:_});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const C=(T,A,R)=>{c[d.evaluationKey]=R;const V=d.expression.evaluate(c);y.data[T+A+0]=Math.floor(255*V.r/V.a),y.data[T+A+1]=Math.floor(255*V.g/V.a),y.data[T+A+2]=Math.floor(255*V.b/V.a),y.data[T+A+3]=Math.floor(255*V.a)};if(d.clips)for(let T=0,A=0;T<_;++T,A+=4*h)for(let R=0,V=0;R<h;R++,V+=4){const K=R/(h-1),{start:J,end:ae}=d.clips[T];C(A,V,J*(1-K)+ae*K)}else for(let T=0,A=0;T<h;T++,A+=4)C(0,A,T/(h-1));return y}hn("AlphaImage",yu),hn("RGBAImage",Ss);class $x extends Ts{createBucket(c){return new f_(c)}constructor(c){super(c,Px),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=m_({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let p_;var Ax={get paint(){return p_=p_||new qr({"hillshade-illumination-direction":new xn(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new xn(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new xn(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new xn(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new xn(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new xn(Oe.paint_hillshade["hillshade-accent-color"])})}};class Mx extends Ts{constructor(c){super(c,Ax)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Dx=Yi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ox}=Dx;var Hh={exports:{}};function sd(d,c,h){h=h||2;var _,y,C,T,A,R,V,K=c&&c.length,J=K?c[0]*h:d.length,ae=__(d,0,J,h,!0),pe=[];if(!ae||ae.next===ae.prev)return pe;if(K&&(ae=function(Se,Ae,Re,ot){var Ne,Ye,Ot,Bt=[];for(Ne=0,Ye=Ae.length;Ne<Ye;Ne++)(Ot=__(Se,Ae[Ne]*ot,Ne<Ye-1?Ae[Ne+1]*ot:Se.length,ot,!1))===Ot.next&&(Ot.steiner=!0),Bt.push(jx(Ot));for(Bt.sort(Bx),Ne=0;Ne<Bt.length;Ne++)Re=Nx(Bt[Ne],Re);return Re}(d,c,ae,h)),d.length>80*h){_=C=d[0],y=T=d[1];for(var be=h;be<J;be+=h)(A=d[be])<_&&(_=A),(R=d[be+1])<y&&(y=R),A>C&&(C=A),R>T&&(T=R);V=(V=Math.max(C-_,T-y))!==0?32767/V:0}return wu(ae,pe,h,_,y,V,0),pe}function __(d,c,h,_,y){var C,T;if(y===Wh(d,c,h,_)>0)for(C=c;C<h;C+=_)T=b_(C,d[C],d[C+1],T);else for(C=h-_;C>=c;C-=_)T=b_(C,d[C],d[C+1],T);return T&&od(T,T.next)&&(ku(T),T=T.next),T}function Xa(d,c){if(!d)return d;c||(c=d);var h,_=d;do if(h=!1,_.steiner||!od(_,_.next)&&Qi(_.prev,_,_.next)!==0)_=_.next;else{if(ku(_),(_=c=_.prev)===_.next)break;h=!0}while(h||_!==c);return c}function wu(d,c,h,_,y,C,T){if(d){!T&&C&&function(K,J,ae,pe){var be=K;do be.z===0&&(be.z=Gh(be.x,be.y,J,ae,pe)),be.prevZ=be.prev,be.nextZ=be.next,be=be.next;while(be!==K);be.prevZ.nextZ=null,be.prevZ=null,function(Se){var Ae,Re,ot,Ne,Ye,Ot,Bt,fn,vn=1;do{for(Re=Se,Se=null,Ye=null,Ot=0;Re;){for(Ot++,ot=Re,Bt=0,Ae=0;Ae<vn&&(Bt++,ot=ot.nextZ);Ae++);for(fn=vn;Bt>0||fn>0&&ot;)Bt!==0&&(fn===0||!ot||Re.z<=ot.z)?(Ne=Re,Re=Re.nextZ,Bt--):(Ne=ot,ot=ot.nextZ,fn--),Ye?Ye.nextZ=Ne:Se=Ne,Ne.prevZ=Ye,Ye=Ne;Re=ot}Ye.nextZ=null,vn*=2}while(Ot>1)}(be)}(d,_,y,C);for(var A,R,V=d;d.prev!==d.next;)if(A=d.prev,R=d.next,C?Rx(d,_,y,C):zx(d))c.push(A.i/h|0),c.push(d.i/h|0),c.push(R.i/h|0),ku(d),d=R.next,V=R.next;else if((d=R)===V){T?T===1?wu(d=Lx(Xa(d),c,h),c,h,_,y,C,2):T===2&&Fx(d,c,h,_,y,C):wu(Xa(d),c,h,_,y,C,1);break}}}function zx(d){var c=d.prev,h=d,_=d.next;if(Qi(c,h,_)>=0)return!1;for(var y=c.x,C=h.x,T=_.x,A=c.y,R=h.y,V=_.y,K=y<C?y<T?y:T:C<T?C:T,J=A<R?A<V?A:V:R<V?R:V,ae=y>C?y>T?y:T:C>T?C:T,pe=A>R?A>V?A:V:R>V?R:V,be=_.next;be!==c;){if(be.x>=K&&be.x<=ae&&be.y>=J&&be.y<=pe&&cc(y,A,C,R,T,V,be.x,be.y)&&Qi(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function Rx(d,c,h,_){var y=d.prev,C=d,T=d.next;if(Qi(y,C,T)>=0)return!1;for(var A=y.x,R=C.x,V=T.x,K=y.y,J=C.y,ae=T.y,pe=A<R?A<V?A:V:R<V?R:V,be=K<J?K<ae?K:ae:J<ae?J:ae,Se=A>R?A>V?A:V:R>V?R:V,Ae=K>J?K>ae?K:ae:J>ae?J:ae,Re=Gh(pe,be,c,h,_),ot=Gh(Se,Ae,c,h,_),Ne=d.prevZ,Ye=d.nextZ;Ne&&Ne.z>=Re&&Ye&&Ye.z<=ot;){if(Ne.x>=pe&&Ne.x<=Se&&Ne.y>=be&&Ne.y<=Ae&&Ne!==y&&Ne!==T&&cc(A,K,R,J,V,ae,Ne.x,Ne.y)&&Qi(Ne.prev,Ne,Ne.next)>=0||(Ne=Ne.prevZ,Ye.x>=pe&&Ye.x<=Se&&Ye.y>=be&&Ye.y<=Ae&&Ye!==y&&Ye!==T&&cc(A,K,R,J,V,ae,Ye.x,Ye.y)&&Qi(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;Ne&&Ne.z>=Re;){if(Ne.x>=pe&&Ne.x<=Se&&Ne.y>=be&&Ne.y<=Ae&&Ne!==y&&Ne!==T&&cc(A,K,R,J,V,ae,Ne.x,Ne.y)&&Qi(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.prevZ}for(;Ye&&Ye.z<=ot;){if(Ye.x>=pe&&Ye.x<=Se&&Ye.y>=be&&Ye.y<=Ae&&Ye!==y&&Ye!==T&&cc(A,K,R,J,V,ae,Ye.x,Ye.y)&&Qi(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function Lx(d,c,h){var _=d;do{var y=_.prev,C=_.next.next;!od(y,C)&&g_(y,_,_.next,C)&&xu(y,C)&&xu(C,y)&&(c.push(y.i/h|0),c.push(_.i/h|0),c.push(C.i/h|0),ku(_),ku(_.next),_=d=C),_=_.next}while(_!==d);return Xa(_)}function Fx(d,c,h,_,y,C){var T=d;do{for(var A=T.next.next;A!==T.prev;){if(T.i!==A.i&&Ux(T,A)){var R=v_(T,A);return T=Xa(T,T.next),R=Xa(R,R.next),wu(T,c,h,_,y,C,0),void wu(R,c,h,_,y,C,0)}A=A.next}T=T.next}while(T!==d)}function Bx(d,c){return d.x-c.x}function Nx(d,c){var h=function(y,C){var T,A=C,R=y.x,V=y.y,K=-1/0;do{if(V<=A.y&&V>=A.next.y&&A.next.y!==A.y){var J=A.x+(V-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(J<=R&&J>K&&(K=J,T=A.x<A.next.x?A:A.next,J===R))return T}A=A.next}while(A!==C);if(!T)return null;var ae,pe=T,be=T.x,Se=T.y,Ae=1/0;A=T;do R>=A.x&&A.x>=be&&R!==A.x&&cc(V<Se?R:K,V,be,Se,V<Se?K:R,V,A.x,A.y)&&(ae=Math.abs(V-A.y)/(R-A.x),xu(A,y)&&(ae<Ae||ae===Ae&&(A.x>T.x||A.x===T.x&&Vx(T,A)))&&(T=A,Ae=ae)),A=A.next;while(A!==pe);return T}(d,c);if(!h)return c;var _=v_(h,d);return Xa(_,_.next),Xa(h,h.next)}function Vx(d,c){return Qi(d.prev,d,c.prev)<0&&Qi(c.next,d,d.next)<0}function Gh(d,c,h,_,y){return(d=1431655765&((d=858993459&((d=252645135&((d=16711935&((d=(d-h)*y|0)|d<<8))|d<<4))|d<<2))|d<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-_)*y|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function jx(d){var c=d,h=d;do(c.x<h.x||c.x===h.x&&c.y<h.y)&&(h=c),c=c.next;while(c!==d);return h}function cc(d,c,h,_,y,C,T,A){return(y-T)*(c-A)>=(d-T)*(C-A)&&(d-T)*(_-A)>=(h-T)*(c-A)&&(h-T)*(C-A)>=(y-T)*(_-A)}function Ux(d,c){return d.next.i!==c.i&&d.prev.i!==c.i&&!function(h,_){var y=h;do{if(y.i!==h.i&&y.next.i!==h.i&&y.i!==_.i&&y.next.i!==_.i&&g_(y,y.next,h,_))return!0;y=y.next}while(y!==h);return!1}(d,c)&&(xu(d,c)&&xu(c,d)&&function(h,_){var y=h,C=!1,T=(h.x+_.x)/2,A=(h.y+_.y)/2;do y.y>A!=y.next.y>A&&y.next.y!==y.y&&T<(y.next.x-y.x)*(A-y.y)/(y.next.y-y.y)+y.x&&(C=!C),y=y.next;while(y!==h);return C}(d,c)&&(Qi(d.prev,d,c.prev)||Qi(d,c.prev,c))||od(d,c)&&Qi(d.prev,d,d.next)>0&&Qi(c.prev,c,c.next)>0)}function Qi(d,c,h){return(c.y-d.y)*(h.x-c.x)-(c.x-d.x)*(h.y-c.y)}function od(d,c){return d.x===c.x&&d.y===c.y}function g_(d,c,h,_){var y=ld(Qi(d,c,h)),C=ld(Qi(d,c,_)),T=ld(Qi(h,_,d)),A=ld(Qi(h,_,c));return y!==C&&T!==A||!(y!==0||!ad(d,h,c))||!(C!==0||!ad(d,_,c))||!(T!==0||!ad(h,d,_))||!(A!==0||!ad(h,c,_))}function ad(d,c,h){return c.x<=Math.max(d.x,h.x)&&c.x>=Math.min(d.x,h.x)&&c.y<=Math.max(d.y,h.y)&&c.y>=Math.min(d.y,h.y)}function ld(d){return d>0?1:d<0?-1:0}function xu(d,c){return Qi(d.prev,d,d.next)<0?Qi(d,c,d.next)>=0&&Qi(d,d.prev,c)>=0:Qi(d,c,d.prev)<0||Qi(d,d.next,c)<0}function v_(d,c){var h=new Zh(d.i,d.x,d.y),_=new Zh(c.i,c.x,c.y),y=d.next,C=c.prev;return d.next=c,c.prev=d,h.next=y,y.prev=h,_.next=h,h.prev=_,C.next=_,_.prev=C,_}function b_(d,c,h,_){var y=new Zh(d,c,h);return _?(y.next=_.next,y.prev=_,_.next.prev=y,_.next=y):(y.prev=y,y.next=y),y}function ku(d){d.next.prev=d.prev,d.prev.next=d.next,d.prevZ&&(d.prevZ.nextZ=d.nextZ),d.nextZ&&(d.nextZ.prevZ=d.prevZ)}function Zh(d,c,h){this.i=d,this.x=c,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wh(d,c,h,_){for(var y=0,C=c,T=h-_;C<h;C+=_)y+=(d[T]-d[C])*(d[C+1]+d[T+1]),T=C;return y}Hh.exports=sd,Hh.exports.default=sd,sd.deviation=function(d,c,h,_){var y=c&&c.length,C=Math.abs(Wh(d,0,y?c[0]*h:d.length,h));if(y)for(var T=0,A=c.length;T<A;T++)C-=Math.abs(Wh(d,c[T]*h,T<A-1?c[T+1]*h:d.length,h));var R=0;for(T=0;T<_.length;T+=3){var V=_[T]*h,K=_[T+1]*h,J=_[T+2]*h;R+=Math.abs((d[V]-d[J])*(d[K+1]-d[V+1])-(d[V]-d[K])*(d[J+1]-d[V+1]))}return C===0&&R===0?0:Math.abs((R-C)/C)},sd.flatten=function(d){for(var c=d[0][0].length,h={vertices:[],holes:[],dimensions:c},_=0,y=0;y<d.length;y++){for(var C=0;C<d[y].length;C++)for(var T=0;T<c;T++)h.vertices.push(d[y][C][T]);y>0&&h.holes.push(_+=d[y-1].length)}return h};var y_=l(Hh.exports);function qx(d,c,h,_,y){w_(d,c,h||0,_||d.length-1,y||Hx)}function w_(d,c,h,_,y){for(;_>h;){if(_-h>600){var C=_-h+1,T=c-h+1,A=Math.log(C),R=.5*Math.exp(2*A/3),V=.5*Math.sqrt(A*R*(C-R)/C)*(T-C/2<0?-1:1);w_(d,c,Math.max(h,Math.floor(c-T*R/C+V)),Math.min(_,Math.floor(c+(C-T)*R/C+V)),y)}var K=d[c],J=h,ae=_;for(Cu(d,h,c),y(d[_],K)>0&&Cu(d,h,_);J<ae;){for(Cu(d,J,ae),J++,ae--;y(d[J],K)<0;)J++;for(;y(d[ae],K)>0;)ae--}y(d[h],K)===0?Cu(d,h,ae):Cu(d,++ae,_),ae<=c&&(h=ae+1),c<=ae&&(_=ae-1)}}function Cu(d,c,h){var _=d[c];d[c]=d[h],d[h]=_}function Hx(d,c){return d<c?-1:d>c?1:0}function Kh(d,c){const h=d.length;if(h<=1)return[d];const _=[];let y,C;for(let T=0;T<h;T++){const A=ze(d[T]);A!==0&&(d[T].area=Math.abs(A),C===void 0&&(C=A<0),C===A<0?(y&&_.push(y),y=[d[T]]):y.push(d[T]))}if(y&&_.push(y),c>1)for(let T=0;T<_.length;T++)_[T].length<=c||(qx(_[T],c,1,_[T].length-1,Gx),_[T]=_[T].slice(0,c));return _}function Gx(d,c){return c.area-d.area}function Xh(d,c,h){const _=h.patternDependencies;let y=!1;for(const C of c){const T=C.paint.get(`${d}-pattern`);T.isConstant()||(y=!0);const A=T.constantOr(null);A&&(y=!0,_[A.to]=!0,_[A.from]=!0)}return y}function Jh(d,c,h,_,y){const C=y.patternDependencies;for(const T of c){const A=T.paint.get(`${d}-pattern`).value;if(A.kind!=="constant"){let R=A.evaluate({zoom:_-1},h,{},y.availableImages),V=A.evaluate({zoom:_},h,{},y.availableImages),K=A.evaluate({zoom:_+1},h,{},y.availableImages);R=R&&R.name?R.name:R,V=V&&V.name?V.name:V,K=K&&K.name?K.name:K,C[R]=!0,C[V]=!0,C[K]=!0,h.patterns[T.id]={min:R,mid:V,max:K}}}return h}class Yh{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $e,this.indexArray=new Tt,this.indexArray2=new Ht,this.programConfigurations=new Oi(c.layers,c.zoom),this.segments=new nn,this.segments2=new nn,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,_){this.hasPattern=Xh("fill",this.layers,h);const y=this.layers[0].layout.get("fill-sort-key"),C=!y.isConstant(),T=[];for(const{feature:A,id:R,index:V,sourceLayerIndex:K}of c){const J=this.layers[0]._featureFilter.needGeometry,ae=Ro(A,J);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),ae,_))continue;const pe=C?y.evaluate(ae,{},_,h.availableImages):void 0,be={id:R,properties:A.properties,type:A.type,sourceLayerIndex:K,index:V,geometry:J?ae.geometry:zo(A),patterns:{},sortKey:pe};T.push(be)}C&&T.sort((A,R)=>A.sortKey-R.sortKey);for(const A of T){const{geometry:R,index:V,sourceLayerIndex:K}=A;if(this.hasPattern){const J=Jh("fill",this.layers,A,this.zoom,h);this.patternFeatures.push(J)}else this.addFeature(A,R,V,_,{});h.featureIndex.insert(c[V].feature,R,V,K,this.index)}}update(c,h,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,_)}addFeatures(c,h,_){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Ox),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,h,_,y,C){for(const T of Kh(h,500)){let A=0;for(const pe of T)A+=pe.length;const R=this.segments.prepareSegment(A,this.layoutVertexArray,this.indexArray),V=R.vertexLength,K=[],J=[];for(const pe of T){if(pe.length===0)continue;pe!==T[0]&&J.push(K.length/2);const be=this.segments2.prepareSegment(pe.length,this.layoutVertexArray,this.indexArray2),Se=be.vertexLength;this.layoutVertexArray.emplaceBack(pe[0].x,pe[0].y),this.indexArray2.emplaceBack(Se+pe.length-1,Se),K.push(pe[0].x),K.push(pe[0].y);for(let Ae=1;Ae<pe.length;Ae++)this.layoutVertexArray.emplaceBack(pe[Ae].x,pe[Ae].y),this.indexArray2.emplaceBack(Se+Ae-1,Se+Ae),K.push(pe[Ae].x),K.push(pe[Ae].y);be.vertexLength+=pe.length,be.primitiveLength+=pe.length}const ae=y_(K,J);for(let pe=0;pe<ae.length;pe+=3)this.indexArray.emplaceBack(V+ae[pe],V+ae[pe+1],V+ae[pe+2]);R.vertexLength+=A,R.primitiveLength+=ae.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,_,C,y)}}let x_,k_;hn("FillBucket",Yh,{omit:["layers","patternFeatures"]});var Zx={get paint(){return k_=k_||new qr({"fill-antialias":new xn(Oe.paint_fill["fill-antialias"]),"fill-opacity":new An(Oe.paint_fill["fill-opacity"]),"fill-color":new An(Oe.paint_fill["fill-color"]),"fill-outline-color":new An(Oe.paint_fill["fill-outline-color"]),"fill-translate":new xn(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new xn(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Jl(Oe.paint_fill["fill-pattern"])})},get layout(){return x_=x_||new qr({"fill-sort-key":new An(Oe.layout_fill["fill-sort-key"])})}};class Wx extends Ts{constructor(c){super(c,Zx)}recalculate(c,h){super.recalculate(c,h);const _=this.paint._values["fill-outline-color"];_.value.kind==="constant"&&_.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Yh(c)}queryRadius(){return nd(this.paint.get("fill-translate"))}queryIntersectsFeature(c,h,_,y,C,T,A){return pu(id(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,A),y)}isTileClipped(){return!0}}const Kx=Yi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Xx=Yi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Jx}=Kx;var ca={},Yx=f,C_=uc;function uc(d,c,h,_,y){this.properties={},this.extent=h,this.type=0,this._pbf=d,this._geometry=-1,this._keys=_,this._values=y,d.readFields(Qx,this,c)}function Qx(d,c,h){d==1?c.id=h.readVarint():d==2?function(_,y){for(var C=_.readVarint()+_.pos;_.pos<C;){var T=y._keys[_.readVarint()],A=y._values[_.readVarint()];y.properties[T]=A}}(h,c):d==3?c.type=h.readVarint():d==4&&(c._geometry=h.pos)}function ek(d){for(var c,h,_=0,y=0,C=d.length,T=C-1;y<C;T=y++)_+=((h=d[T]).x-(c=d[y]).x)*(c.y+h.y);return _}uc.types=["Unknown","Point","LineString","Polygon"],uc.prototype.loadGeometry=function(){var d=this._pbf;d.pos=this._geometry;for(var c,h=d.readVarint()+d.pos,_=1,y=0,C=0,T=0,A=[];d.pos<h;){if(y<=0){var R=d.readVarint();_=7&R,y=R>>3}if(y--,_===1||_===2)C+=d.readSVarint(),T+=d.readSVarint(),_===1&&(c&&A.push(c),c=[]),c.push(new Yx(C,T));else{if(_!==7)throw new Error("unknown command "+_);c&&c.push(c[0].clone())}}return c&&A.push(c),A},uc.prototype.bbox=function(){var d=this._pbf;d.pos=this._geometry;for(var c=d.readVarint()+d.pos,h=1,_=0,y=0,C=0,T=1/0,A=-1/0,R=1/0,V=-1/0;d.pos<c;){if(_<=0){var K=d.readVarint();h=7&K,_=K>>3}if(_--,h===1||h===2)(y+=d.readSVarint())<T&&(T=y),y>A&&(A=y),(C+=d.readSVarint())<R&&(R=C),C>V&&(V=C);else if(h!==7)throw new Error("unknown command "+h)}return[T,R,A,V]},uc.prototype.toGeoJSON=function(d,c,h){var _,y,C=this.extent*Math.pow(2,h),T=this.extent*d,A=this.extent*c,R=this.loadGeometry(),V=uc.types[this.type];function K(pe){for(var be=0;be<pe.length;be++){var Se=pe[be];pe[be]=[360*(Se.x+T)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(Se.y+A)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var J=[];for(_=0;_<R.length;_++)J[_]=R[_][0];K(R=J);break;case 2:for(_=0;_<R.length;_++)K(R[_]);break;case 3:for(R=function(pe){var be=pe.length;if(be<=1)return[pe];for(var Se,Ae,Re=[],ot=0;ot<be;ot++){var Ne=ek(pe[ot]);Ne!==0&&(Ae===void 0&&(Ae=Ne<0),Ae===Ne<0?(Se&&Re.push(Se),Se=[pe[ot]]):Se.push(pe[ot]))}return Se&&Re.push(Se),Re}(R),_=0;_<R.length;_++)for(y=0;y<R[_].length;y++)K(R[_][y])}R.length===1?R=R[0]:V="Multi"+V;var ae={type:"Feature",geometry:{type:V,coordinates:R},properties:this.properties};return"id"in this&&(ae.id=this.id),ae};var tk=C_,T_=S_;function S_(d,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(nk,this,c),this.length=this._features.length}function nk(d,c,h){d===15?c.version=h.readVarint():d===1?c.name=h.readString():d===5?c.extent=h.readVarint():d===2?c._features.push(h.pos):d===3?c._keys.push(h.readString()):d===4&&c._values.push(function(_){for(var y=null,C=_.readVarint()+_.pos;_.pos<C;){var T=_.readVarint()>>3;y=T===1?_.readString():T===2?_.readFloat():T===3?_.readDouble():T===4?_.readVarint64():T===5?_.readVarint():T===6?_.readSVarint():T===7?_.readBoolean():null}return y}(h))}S_.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var c=this._pbf.readVarint()+this._pbf.pos;return new tk(this._pbf,c,this.extent,this._keys,this._values)};var ik=T_;function rk(d,c,h){if(d===3){var _=new ik(h,h.readVarint()+h.pos);_.length&&(c[_.name]=_)}}ca.VectorTile=function(d,c){this.layers=d.readFields(rk,{},c)},ca.VectorTileFeature=C_,ca.VectorTileLayer=T_;const sk=ca.VectorTileFeature.types,Qh=Math.pow(2,13);function Tu(d,c,h,_,y,C,T,A){d.emplaceBack(c,h,2*Math.floor(_*Qh)+T,y*Qh*2,C*Qh*2,Math.round(A))}class em{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Pe,this.centroidVertexArray=new te,this.indexArray=new Tt,this.programConfigurations=new Oi(c.layers,c.zoom),this.segments=new nn,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,_){this.features=[],this.hasPattern=Xh("fill-extrusion",this.layers,h);for(const{feature:y,id:C,index:T,sourceLayerIndex:A}of c){const R=this.layers[0]._featureFilter.needGeometry,V=Ro(y,R);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),V,_))continue;const K={id:C,sourceLayerIndex:A,index:T,geometry:R?V.geometry:zo(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(Jh("fill-extrusion",this.layers,K,this.zoom,h)):this.addFeature(K,K.geometry,T,_,{}),h.featureIndex.insert(y,K.geometry,T,A,this.index,!0)}}addFeatures(c,h,_){for(const y of this.features){const{geometry:C}=y;this.addFeature(y,C,y.index,h,_)}}update(c,h,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,_)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Jx),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,Xx.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,h,_,y,C){const T={x:0,y:0,vertexCount:0};for(const A of Kh(h,500)){let R=0;for(const be of A)R+=be.length;let V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const be of A){if(be.length===0||ak(be))continue;let Se=0;for(let Ae=0;Ae<be.length;Ae++){const Re=be[Ae];if(Ae>=1){const ot=be[Ae-1];if(!ok(Re,ot)){V.vertexLength+4>nn.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ne=Re.sub(ot)._perp()._unit(),Ye=ot.dist(Re);Se+Ye>32768&&(Se=0),Tu(this.layoutVertexArray,Re.x,Re.y,Ne.x,Ne.y,0,0,Se),Tu(this.layoutVertexArray,Re.x,Re.y,Ne.x,Ne.y,0,1,Se),T.x+=2*Re.x,T.y+=2*Re.y,T.vertexCount+=2,Se+=Ye,Tu(this.layoutVertexArray,ot.x,ot.y,Ne.x,Ne.y,0,0,Se),Tu(this.layoutVertexArray,ot.x,ot.y,Ne.x,Ne.y,0,1,Se),T.x+=2*ot.x,T.y+=2*ot.y,T.vertexCount+=2;const Ot=V.vertexLength;this.indexArray.emplaceBack(Ot,Ot+2,Ot+1),this.indexArray.emplaceBack(Ot+1,Ot+2,Ot+3),V.vertexLength+=4,V.primitiveLength+=2}}}}if(V.vertexLength+R>nn.MAX_VERTEX_ARRAY_LENGTH&&(V=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray)),sk[c.type]!=="Polygon")continue;const K=[],J=[],ae=V.vertexLength;for(const be of A)if(be.length!==0){be!==A[0]&&J.push(K.length/2);for(let Se=0;Se<be.length;Se++){const Ae=be[Se];Tu(this.layoutVertexArray,Ae.x,Ae.y,0,0,1,1,0),T.x+=Ae.x,T.y+=Ae.y,T.vertexCount+=1,K.push(Ae.x),K.push(Ae.y)}}const pe=y_(K,J);for(let be=0;be<pe.length;be+=3)this.indexArray.emplaceBack(ae+pe[be],ae+pe[be+2],ae+pe[be+1]);V.primitiveLength+=pe.length/3,V.vertexLength+=R}for(let A=0;A<T.vertexCount;A++)this.centroidVertexArray.emplaceBack(Math.floor(T.x/T.vertexCount),Math.floor(T.y/T.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,_,C,y)}}function ok(d,c){return d.x===c.x&&(d.x<0||d.x>Ui)||d.y===c.y&&(d.y<0||d.y>Ui)}function ak(d){return d.every(c=>c.x<0)||d.every(c=>c.x>Ui)||d.every(c=>c.y<0)||d.every(c=>c.y>Ui)}let E_;hn("FillExtrusionBucket",em,{omit:["layers","features"]});var lk={get paint(){return E_=E_||new qr({"fill-extrusion-opacity":new xn(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new An(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new xn(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new xn(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Jl(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new An(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new An(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new xn(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ck extends Ts{constructor(c){super(c,lk)}createBucket(c){return new em(c)}queryRadius(){return nd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,h,_,y,C,T,A,R){const V=id(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,A),K=this.paint.get("fill-extrusion-height").evaluate(h,_),J=this.paint.get("fill-extrusion-base").evaluate(h,_),ae=function(be,Se,Ae,Re){const ot=[];for(const Ne of be){const Ye=[Ne.x,Ne.y,0,1];rd(Ye,Ye,Se),ot.push(new g(Ye[0]/Ye[3],Ye[1]/Ye[3]))}return ot}(V,R),pe=function(be,Se,Ae,Re){const ot=[],Ne=[],Ye=Re[8]*Se,Ot=Re[9]*Se,Bt=Re[10]*Se,fn=Re[11]*Se,vn=Re[8]*Ae,ln=Re[9]*Ae,on=Re[10]*Ae,Qt=Re[11]*Ae;for(const mn of be){const sn=[],Wt=[];for(const In of mn){const yn=In.x,ri=In.y,Ci=Re[0]*yn+Re[4]*ri+Re[12],Pi=Re[1]*yn+Re[5]*ri+Re[13],hr=Re[2]*yn+Re[6]*ri+Re[14],gs=Re[3]*yn+Re[7]*ri+Re[15],Gr=hr+Bt,sr=gs+fn,kr=Ci+vn,Pr=Pi+ln,Zr=hr+on,Wr=gs+Qt,mr=new g((Ci+Ye)/sr,(Pi+Ot)/sr);mr.z=Gr/sr,sn.push(mr);const pr=new g(kr/Wr,Pr/Wr);pr.z=Zr/Wr,Wt.push(pr)}ot.push(sn),Ne.push(Wt)}return[ot,Ne]}(y,J,K,R);return function(be,Se,Ae){let Re=1/0;pu(Ae,Se)&&(Re=I_(Ae,Se[0]));for(let ot=0;ot<Se.length;ot++){const Ne=Se[ot],Ye=be[ot];for(let Ot=0;Ot<Ne.length-1;Ot++){const Bt=Ne[Ot],fn=[Bt,Ne[Ot+1],Ye[Ot+1],Ye[Ot],Bt];mu(Ae,fn)&&(Re=Math.min(Re,I_(Ae,fn)))}}return Re!==1/0&&Re}(pe[0],pe[1],ae)}}function Su(d,c){return d.x*c.x+d.y*c.y}function I_(d,c){if(d.length===1){let h=0;const _=c[h++];let y;for(;!y||_.equals(y);)if(y=c[h++],!y)return 1/0;for(;h<c.length;h++){const C=c[h],T=d[0],A=y.sub(_),R=C.sub(_),V=T.sub(_),K=Su(A,A),J=Su(A,R),ae=Su(R,R),pe=Su(V,A),be=Su(V,R),Se=K*ae-J*J,Ae=(ae*pe-J*be)/Se,Re=(K*be-J*pe)/Se,ot=_.z*(1-Ae-Re)+y.z*Ae+C.z*Re;if(isFinite(ot))return ot}return 1/0}{let h=1/0;for(const _ of c)h=Math.min(h,_.z);return h}}const uk=Yi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:fk}=uk,dk=Yi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:hk}=dk,mk=ca.VectorTileFeature.types,pk=Math.cos(Math.PI/180*37.5),P_=Math.pow(2,14)/.5;class tm{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Me,this.layoutVertexArray2=new Te,this.indexArray=new Tt,this.programConfigurations=new Oi(c.layers,c.zoom),this.segments=new nn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,_){this.hasPattern=Xh("line",this.layers,h);const y=this.layers[0].layout.get("line-sort-key"),C=!y.isConstant(),T=[];for(const{feature:A,id:R,index:V,sourceLayerIndex:K}of c){const J=this.layers[0]._featureFilter.needGeometry,ae=Ro(A,J);if(!this.layers[0]._featureFilter.filter(new Ei(this.zoom),ae,_))continue;const pe=C?y.evaluate(ae,{},_):void 0,be={id:R,properties:A.properties,type:A.type,sourceLayerIndex:K,index:V,geometry:J?ae.geometry:zo(A),patterns:{},sortKey:pe};T.push(be)}C&&T.sort((A,R)=>A.sortKey-R.sortKey);for(const A of T){const{geometry:R,index:V,sourceLayerIndex:K}=A;if(this.hasPattern){const J=Jh("line",this.layers,A,this.zoom,h);this.patternFeatures.push(J)}else this.addFeature(A,R,V,_,{});h.featureIndex.insert(c[V].feature,R,V,K,this.index)}}update(c,h,_){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,_)}addFeatures(c,h,_){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,_)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,hk)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,fk),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,h,_,y,C){const T=this.layers[0].layout,A=T.get("line-join").evaluate(c,{}),R=T.get("line-cap"),V=T.get("line-miter-limit"),K=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const J of h)this.addLine(J,c,A,R,V,K);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,_,C,y)}addLine(c,h,_,y,C,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Re=0;Re<c.length-1;Re++)this.totalDistance+=c[Re].dist(c[Re+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A=mk[h.type]==="Polygon";let R=c.length;for(;R>=2&&c[R-1].equals(c[R-2]);)R--;let V=0;for(;V<R-1&&c[V].equals(c[V+1]);)V++;if(R<(A?3:2))return;_==="bevel"&&(C=1.05);const K=this.overscaling<=16?15*Ui/(512*this.overscaling):0,J=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray);let ae,pe,be,Se,Ae;this.e1=this.e2=-1,A&&(ae=c[R-2],Ae=c[V].sub(ae)._unit()._perp());for(let Re=V;Re<R;Re++){if(be=Re===R-1?A?c[V+1]:void 0:c[Re+1],be&&c[Re].equals(be))continue;Ae&&(Se=Ae),ae&&(pe=ae),ae=c[Re],Ae=be?be.sub(ae)._unit()._perp():Se,Se=Se||Ae;let ot=Se.add(Ae);ot.x===0&&ot.y===0||ot._unit();const Ne=Se.x*Ae.x+Se.y*Ae.y,Ye=ot.x*Ae.x+ot.y*Ae.y,Ot=Ye!==0?1/Ye:1/0,Bt=2*Math.sqrt(2-2*Ye),fn=Ye<pk&&pe&&be,vn=Se.x*Ae.y-Se.y*Ae.x>0;if(fn&&Re>V){const Qt=ae.dist(pe);if(Qt>2*K){const mn=ae.sub(ae.sub(pe)._mult(K/Qt)._round());this.updateDistance(pe,mn),this.addCurrentVertex(mn,Se,0,0,J),pe=mn}}const ln=pe&&be;let on=ln?_:A?"butt":y;if(ln&&on==="round"&&(Ot<T?on="miter":Ot<=2&&(on="fakeround")),on==="miter"&&Ot>C&&(on="bevel"),on==="bevel"&&(Ot>2&&(on="flipbevel"),Ot<C&&(on="miter")),pe&&this.updateDistance(pe,ae),on==="miter")ot._mult(Ot),this.addCurrentVertex(ae,ot,0,0,J);else if(on==="flipbevel"){if(Ot>100)ot=Ae.mult(-1);else{const Qt=Ot*Se.add(Ae).mag()/Se.sub(Ae).mag();ot._perp()._mult(Qt*(vn?-1:1))}this.addCurrentVertex(ae,ot,0,0,J),this.addCurrentVertex(ae,ot.mult(-1),0,0,J)}else if(on==="bevel"||on==="fakeround"){const Qt=-Math.sqrt(Ot*Ot-1),mn=vn?Qt:0,sn=vn?0:Qt;if(pe&&this.addCurrentVertex(ae,Se,mn,sn,J),on==="fakeround"){const Wt=Math.round(180*Bt/Math.PI/20);for(let In=1;In<Wt;In++){let yn=In/Wt;if(yn!==.5){const Ci=yn-.5;yn+=yn*Ci*(yn-1)*((1.0904+Ne*(Ne*(3.55645-1.43519*Ne)-3.2452))*Ci*Ci+(.848013+Ne*(.215638*Ne-1.06021)))}const ri=Ae.sub(Se)._mult(yn)._add(Se)._unit()._mult(vn?-1:1);this.addHalfVertex(ae,ri.x,ri.y,!1,vn,0,J)}}be&&this.addCurrentVertex(ae,Ae,-mn,-sn,J)}else if(on==="butt")this.addCurrentVertex(ae,ot,0,0,J);else if(on==="square"){const Qt=pe?1:-1;this.addCurrentVertex(ae,ot,Qt,Qt,J)}else on==="round"&&(pe&&(this.addCurrentVertex(ae,Se,0,0,J),this.addCurrentVertex(ae,Se,1,1,J,!0)),be&&(this.addCurrentVertex(ae,Ae,-1,-1,J,!0),this.addCurrentVertex(ae,Ae,0,0,J)));if(fn&&Re<R-1){const Qt=ae.dist(be);if(Qt>2*K){const mn=ae.add(be.sub(ae)._mult(K/Qt)._round());this.updateDistance(ae,mn),this.addCurrentVertex(mn,Ae,0,0,J),ae=mn}}}}addCurrentVertex(c,h,_,y,C,T=!1){const A=h.y*y-h.x,R=-h.y-h.x*y;this.addHalfVertex(c,h.x+h.y*_,h.y-h.x*_,T,!1,_,C),this.addHalfVertex(c,A,R,T,!0,-y,C),this.distance>P_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(c,h,_,y,C,T))}addHalfVertex({x:c,y:h},_,y,C,T,A,R){const V=.5*(this.lineClips?this.scaledDistance*(P_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(C?1:0),(h<<1)+(T?1:0),Math.round(63*_)+128,Math.round(63*y)+128,1+(A===0?0:A<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const K=R.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,K),R.primitiveLength++),T?this.e2=K:this.e1=K}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,h){this.distance+=c.dist(h),this.updateScaledDistance()}}let $_,A_;hn("LineBucket",tm,{omit:["layers","patternFeatures"]});var M_={get paint(){return A_=A_||new qr({"line-opacity":new An(Oe.paint_line["line-opacity"]),"line-color":new An(Oe.paint_line["line-color"]),"line-translate":new xn(Oe.paint_line["line-translate"]),"line-translate-anchor":new xn(Oe.paint_line["line-translate-anchor"]),"line-width":new An(Oe.paint_line["line-width"]),"line-gap-width":new An(Oe.paint_line["line-gap-width"]),"line-offset":new An(Oe.paint_line["line-offset"]),"line-blur":new An(Oe.paint_line["line-blur"]),"line-dasharray":new Ua(Oe.paint_line["line-dasharray"]),"line-pattern":new Jl(Oe.paint_line["line-pattern"]),"line-gradient":new ru(Oe.paint_line["line-gradient"])})},get layout(){return $_=$_||new qr({"line-cap":new xn(Oe.layout_line["line-cap"]),"line-join":new An(Oe.layout_line["line-join"]),"line-miter-limit":new xn(Oe.layout_line["line-miter-limit"]),"line-round-limit":new xn(Oe.layout_line["line-round-limit"]),"line-sort-key":new An(Oe.layout_line["line-sort-key"])})}};class _k extends An{possiblyEvaluate(c,h){return h=new Ei(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(c,h)}evaluate(c,h,_,y){return h=fe({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(c,h,_,y)}}let cd;class gk extends Ts{constructor(c){super(c,M_),this.gradientVersion=0,cd||(cd=new _k(M_.paint.properties["line-width"].specification),cd.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(_){return _._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof za,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,h){super.recalculate(c,h),this.paint._values["line-floorwidth"]=cd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new tm(c)}queryRadius(c){const h=c,_=D_(vu("line-width",this,h),vu("line-gap-width",this,h)),y=vu("line-offset",this,h);return _/2+Math.abs(y)+nd(this.paint.get("line-translate"))}queryIntersectsFeature(c,h,_,y,C,T,A){const R=id(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,A),V=A/2*D_(this.paint.get("line-width").evaluate(h,_),this.paint.get("line-gap-width").evaluate(h,_)),K=this.paint.get("line-offset").evaluate(h,_);return K&&(y=function(J,ae){const pe=[];for(let be=0;be<J.length;be++){const Se=J[be],Ae=[];for(let Re=0;Re<Se.length;Re++){const ot=Se[Re-1],Ne=Se[Re],Ye=Se[Re+1],Ot=Re===0?new g(0,0):Ne.sub(ot)._unit()._perp(),Bt=Re===Se.length-1?new g(0,0):Ye.sub(Ne)._unit()._perp(),fn=Ot._add(Bt)._unit(),vn=fn.x*Bt.x+fn.y*Bt.y;vn!==0&&fn._mult(1/vn),Ae.push(fn._mult(ae)._add(Ne))}pe.push(Ae)}return pe}(y,K*A)),function(J,ae,pe){for(let be=0;be<ae.length;be++){const Se=ae[be];if(J.length>=3){for(let Ae=0;Ae<Se.length;Ae++)if(ac(J,Se[Ae]))return!0}if(_u(J,Se,pe))return!0}return!1}(R,y,V)}isTileClipped(){return!0}}function D_(d,c){return c>0?c+2*d:d}const vk=Yi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),bk=Yi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Yi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const yk=Yi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Yi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const O_=Yi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wk=Yi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function xk(d,c,h){return d.sections.forEach(_=>{_.text=function(y,C,T){const A=C.layout.get("text-transform").evaluate(T,{});return A==="uppercase"?y=y.toLocaleUpperCase():A==="lowercase"&&(y=y.toLocaleLowerCase()),ao.applyArabicShaping&&(y=ao.applyArabicShaping(y)),y}(_.text,c,h)}),d}Yi([{name:"triangle",components:3,type:"Uint16"}]),Yi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Yi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Yi([{type:"Float32",name:"offsetX"}]),Yi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Yi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Eu={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var dr=24,z_=vi,R_=function(d,c,h,_,y){var C,T,A=8*y-_-1,R=(1<<A)-1,V=R>>1,K=-7,J=h?y-1:0,ae=h?-1:1,pe=d[c+J];for(J+=ae,C=pe&(1<<-K)-1,pe>>=-K,K+=A;K>0;C=256*C+d[c+J],J+=ae,K-=8);for(T=C&(1<<-K)-1,C>>=-K,K+=_;K>0;T=256*T+d[c+J],J+=ae,K-=8);if(C===0)C=1-V;else{if(C===R)return T?NaN:1/0*(pe?-1:1);T+=Math.pow(2,_),C-=V}return(pe?-1:1)*T*Math.pow(2,C-_)},L_=function(d,c,h,_,y,C){var T,A,R,V=8*C-y-1,K=(1<<V)-1,J=K>>1,ae=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,pe=_?0:C-1,be=_?1:-1,Se=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(A=isNaN(c)?1:0,T=K):(T=Math.floor(Math.log(c)/Math.LN2),c*(R=Math.pow(2,-T))<1&&(T--,R*=2),(c+=T+J>=1?ae/R:ae*Math.pow(2,1-J))*R>=2&&(T++,R/=2),T+J>=K?(A=0,T=K):T+J>=1?(A=(c*R-1)*Math.pow(2,y),T+=J):(A=c*Math.pow(2,J-1)*Math.pow(2,y),T=0));y>=8;d[h+pe]=255&A,pe+=be,A/=256,y-=8);for(T=T<<y|A,V+=y;V>0;d[h+pe]=255&T,pe+=be,T/=256,V-=8);d[h+pe-be]|=128*Se};function vi(d){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(d)?d:new Uint8Array(d||0),this.pos=0,this.type=0,this.length=this.buf.length}vi.Varint=0,vi.Fixed64=1,vi.Bytes=2,vi.Fixed32=5;var nm=4294967296,F_=1/nm,B_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Lo(d){return d.type===vi.Bytes?d.readVarint()+d.pos:d.pos+1}function fc(d,c,h){return h?4294967296*c+(d>>>0):4294967296*(c>>>0)+(d>>>0)}function N_(d,c,h){var _=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));h.realloc(_);for(var y=h.pos-1;y>=d;y--)h.buf[y+_]=h.buf[y]}function kk(d,c){for(var h=0;h<d.length;h++)c.writeVarint(d[h])}function Ck(d,c){for(var h=0;h<d.length;h++)c.writeSVarint(d[h])}function Tk(d,c){for(var h=0;h<d.length;h++)c.writeFloat(d[h])}function Sk(d,c){for(var h=0;h<d.length;h++)c.writeDouble(d[h])}function Ek(d,c){for(var h=0;h<d.length;h++)c.writeBoolean(d[h])}function Ik(d,c){for(var h=0;h<d.length;h++)c.writeFixed32(d[h])}function Pk(d,c){for(var h=0;h<d.length;h++)c.writeSFixed32(d[h])}function $k(d,c){for(var h=0;h<d.length;h++)c.writeFixed64(d[h])}function Ak(d,c){for(var h=0;h<d.length;h++)c.writeSFixed64(d[h])}function ud(d,c){return(d[c]|d[c+1]<<8|d[c+2]<<16)+16777216*d[c+3]}function dc(d,c,h){d[h]=c,d[h+1]=c>>>8,d[h+2]=c>>>16,d[h+3]=c>>>24}function V_(d,c){return(d[c]|d[c+1]<<8|d[c+2]<<16)+(d[c+3]<<24)}vi.prototype={destroy:function(){this.buf=null},readFields:function(d,c,h){for(h=h||this.length;this.pos<h;){var _=this.readVarint(),y=_>>3,C=this.pos;this.type=7&_,d(y,c,this),this.pos===C&&this.skip(_)}return c},readMessage:function(d,c){return this.readFields(d,c,this.readVarint()+this.pos)},readFixed32:function(){var d=ud(this.buf,this.pos);return this.pos+=4,d},readSFixed32:function(){var d=V_(this.buf,this.pos);return this.pos+=4,d},readFixed64:function(){var d=ud(this.buf,this.pos)+ud(this.buf,this.pos+4)*nm;return this.pos+=8,d},readSFixed64:function(){var d=ud(this.buf,this.pos)+V_(this.buf,this.pos+4)*nm;return this.pos+=8,d},readFloat:function(){var d=R_(this.buf,this.pos,!0,23,4);return this.pos+=4,d},readDouble:function(){var d=R_(this.buf,this.pos,!0,52,8);return this.pos+=8,d},readVarint:function(d){var c,h,_=this.buf;return c=127&(h=_[this.pos++]),h<128?c:(c|=(127&(h=_[this.pos++]))<<7,h<128?c:(c|=(127&(h=_[this.pos++]))<<14,h<128?c:(c|=(127&(h=_[this.pos++]))<<21,h<128?c:function(y,C,T){var A,R,V=T.buf;if(A=(112&(R=V[T.pos++]))>>4,R<128||(A|=(127&(R=V[T.pos++]))<<3,R<128)||(A|=(127&(R=V[T.pos++]))<<10,R<128)||(A|=(127&(R=V[T.pos++]))<<17,R<128)||(A|=(127&(R=V[T.pos++]))<<24,R<128)||(A|=(1&(R=V[T.pos++]))<<31,R<128))return fc(y,A,C);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(h=_[this.pos]))<<28,d,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var d=this.readVarint();return d%2==1?(d+1)/-2:d/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var d=this.readVarint()+this.pos,c=this.pos;return this.pos=d,d-c>=12&&B_?function(h,_,y){return B_.decode(h.subarray(_,y))}(this.buf,c,d):function(h,_,y){for(var C="",T=_;T<y;){var A,R,V,K=h[T],J=null,ae=K>239?4:K>223?3:K>191?2:1;if(T+ae>y)break;ae===1?K<128&&(J=K):ae===2?(192&(A=h[T+1]))==128&&(J=(31&K)<<6|63&A)<=127&&(J=null):ae===3?(R=h[T+2],(192&(A=h[T+1]))==128&&(192&R)==128&&((J=(15&K)<<12|(63&A)<<6|63&R)<=2047||J>=55296&&J<=57343)&&(J=null)):ae===4&&(R=h[T+2],V=h[T+3],(192&(A=h[T+1]))==128&&(192&R)==128&&(192&V)==128&&((J=(15&K)<<18|(63&A)<<12|(63&R)<<6|63&V)<=65535||J>=1114112)&&(J=null)),J===null?(J=65533,ae=1):J>65535&&(J-=65536,C+=String.fromCharCode(J>>>10&1023|55296),J=56320|1023&J),C+=String.fromCharCode(J),T+=ae}return C}(this.buf,c,d)},readBytes:function(){var d=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,d);return this.pos=d,c},readPackedVarint:function(d,c){if(this.type!==vi.Bytes)return d.push(this.readVarint(c));var h=Lo(this);for(d=d||[];this.pos<h;)d.push(this.readVarint(c));return d},readPackedSVarint:function(d){if(this.type!==vi.Bytes)return d.push(this.readSVarint());var c=Lo(this);for(d=d||[];this.pos<c;)d.push(this.readSVarint());return d},readPackedBoolean:function(d){if(this.type!==vi.Bytes)return d.push(this.readBoolean());var c=Lo(this);for(d=d||[];this.pos<c;)d.push(this.readBoolean());return d},readPackedFloat:function(d){if(this.type!==vi.Bytes)return d.push(this.readFloat());var c=Lo(this);for(d=d||[];this.pos<c;)d.push(this.readFloat());return d},readPackedDouble:function(d){if(this.type!==vi.Bytes)return d.push(this.readDouble());var c=Lo(this);for(d=d||[];this.pos<c;)d.push(this.readDouble());return d},readPackedFixed32:function(d){if(this.type!==vi.Bytes)return d.push(this.readFixed32());var c=Lo(this);for(d=d||[];this.pos<c;)d.push(this.readFixed32());return d},readPackedSFixed32:function(d){if(this.type!==vi.Bytes)return d.push(this.readSFixed32());var c=Lo(this);for(d=d||[];this.pos<c;)d.push(this.readSFixed32());return d},readPackedFixed64:function(d){if(this.type!==vi.Bytes)return d.push(this.readFixed64());var c=Lo(this);for(d=d||[];this.pos<c;)d.push(this.readFixed64());return d},readPackedSFixed64:function(d){if(this.type!==vi.Bytes)return d.push(this.readSFixed64());var c=Lo(this);for(d=d||[];this.pos<c;)d.push(this.readSFixed64());return d},skip:function(d){var c=7&d;if(c===vi.Varint)for(;this.buf[this.pos++]>127;);else if(c===vi.Bytes)this.pos=this.readVarint()+this.pos;else if(c===vi.Fixed32)this.pos+=4;else{if(c!==vi.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(d,c){this.writeVarint(d<<3|c)},realloc:function(d){for(var c=this.length||16;c<this.pos+d;)c*=2;if(c!==this.length){var h=new Uint8Array(c);h.set(this.buf),this.buf=h,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(d){this.realloc(4),dc(this.buf,d,this.pos),this.pos+=4},writeSFixed32:function(d){this.realloc(4),dc(this.buf,d,this.pos),this.pos+=4},writeFixed64:function(d){this.realloc(8),dc(this.buf,-1&d,this.pos),dc(this.buf,Math.floor(d*F_),this.pos+4),this.pos+=8},writeSFixed64:function(d){this.realloc(8),dc(this.buf,-1&d,this.pos),dc(this.buf,Math.floor(d*F_),this.pos+4),this.pos+=8},writeVarint:function(d){(d=+d||0)>268435455||d<0?function(c,h){var _,y;if(c>=0?(_=c%4294967296|0,y=c/4294967296|0):(y=~(-c/4294967296),4294967295^(_=~(-c%4294967296))?_=_+1|0:(_=0,y=y+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(C,T,A){A.buf[A.pos++]=127&C|128,C>>>=7,A.buf[A.pos++]=127&C|128,C>>>=7,A.buf[A.pos++]=127&C|128,C>>>=7,A.buf[A.pos++]=127&C|128,A.buf[A.pos]=127&(C>>>=7)}(_,0,h),function(C,T){var A=(7&C)<<4;T.buf[T.pos++]|=A|((C>>>=3)?128:0),C&&(T.buf[T.pos++]=127&C|((C>>>=7)?128:0),C&&(T.buf[T.pos++]=127&C|((C>>>=7)?128:0),C&&(T.buf[T.pos++]=127&C|((C>>>=7)?128:0),C&&(T.buf[T.pos++]=127&C|((C>>>=7)?128:0),C&&(T.buf[T.pos++]=127&C)))))}(y,h)}(d,this):(this.realloc(4),this.buf[this.pos++]=127&d|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=127&(d>>>=7)|(d>127?128:0),d<=127||(this.buf[this.pos++]=d>>>7&127))))},writeSVarint:function(d){this.writeVarint(d<0?2*-d-1:2*d)},writeBoolean:function(d){this.writeVarint(!!d)},writeString:function(d){d=String(d),this.realloc(4*d.length),this.pos++;var c=this.pos;this.pos=function(_,y,C){for(var T,A,R=0;R<y.length;R++){if((T=y.charCodeAt(R))>55295&&T<57344){if(!A){T>56319||R+1===y.length?(_[C++]=239,_[C++]=191,_[C++]=189):A=T;continue}if(T<56320){_[C++]=239,_[C++]=191,_[C++]=189,A=T;continue}T=A-55296<<10|T-56320|65536,A=null}else A&&(_[C++]=239,_[C++]=191,_[C++]=189,A=null);T<128?_[C++]=T:(T<2048?_[C++]=T>>6|192:(T<65536?_[C++]=T>>12|224:(_[C++]=T>>18|240,_[C++]=T>>12&63|128),_[C++]=T>>6&63|128),_[C++]=63&T|128)}return C}(this.buf,d,this.pos);var h=this.pos-c;h>=128&&N_(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeFloat:function(d){this.realloc(4),L_(this.buf,d,this.pos,!0,23,4),this.pos+=4},writeDouble:function(d){this.realloc(8),L_(this.buf,d,this.pos,!0,52,8),this.pos+=8},writeBytes:function(d){var c=d.length;this.writeVarint(c),this.realloc(c);for(var h=0;h<c;h++)this.buf[this.pos++]=d[h]},writeRawMessage:function(d,c){this.pos++;var h=this.pos;d(c,this);var _=this.pos-h;_>=128&&N_(h,_,this),this.pos=h-1,this.writeVarint(_),this.pos+=_},writeMessage:function(d,c,h){this.writeTag(d,vi.Bytes),this.writeRawMessage(c,h)},writePackedVarint:function(d,c){c.length&&this.writeMessage(d,kk,c)},writePackedSVarint:function(d,c){c.length&&this.writeMessage(d,Ck,c)},writePackedBoolean:function(d,c){c.length&&this.writeMessage(d,Ek,c)},writePackedFloat:function(d,c){c.length&&this.writeMessage(d,Tk,c)},writePackedDouble:function(d,c){c.length&&this.writeMessage(d,Sk,c)},writePackedFixed32:function(d,c){c.length&&this.writeMessage(d,Ik,c)},writePackedSFixed32:function(d,c){c.length&&this.writeMessage(d,Pk,c)},writePackedFixed64:function(d,c){c.length&&this.writeMessage(d,$k,c)},writePackedSFixed64:function(d,c){c.length&&this.writeMessage(d,Ak,c)},writeBytesField:function(d,c){this.writeTag(d,vi.Bytes),this.writeBytes(c)},writeFixed32Field:function(d,c){this.writeTag(d,vi.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(d,c){this.writeTag(d,vi.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(d,c){this.writeTag(d,vi.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(d,c){this.writeTag(d,vi.Fixed64),this.writeSFixed64(c)},writeVarintField:function(d,c){this.writeTag(d,vi.Varint),this.writeVarint(c)},writeSVarintField:function(d,c){this.writeTag(d,vi.Varint),this.writeSVarint(c)},writeStringField:function(d,c){this.writeTag(d,vi.Bytes),this.writeString(c)},writeFloatField:function(d,c){this.writeTag(d,vi.Fixed32),this.writeFloat(c)},writeDoubleField:function(d,c){this.writeTag(d,vi.Fixed64),this.writeDouble(c)},writeBooleanField:function(d,c){this.writeVarintField(d,!!c)}};var im=l(z_);const rm=3;function Mk(d,c,h){d===1&&h.readMessage(Dk,c)}function Dk(d,c,h){if(d===3){const{id:_,bitmap:y,width:C,height:T,left:A,top:R,advance:V}=h.readMessage(Ok,{});c.push({id:_,bitmap:new yu({width:C+2*rm,height:T+2*rm},y),metrics:{width:C,height:T,left:A,top:R,advance:V}})}}function Ok(d,c,h){d===1?c.id=h.readVarint():d===2?c.bitmap=h.readBytes():d===3?c.width=h.readVarint():d===4?c.height=h.readVarint():d===5?c.left=h.readSVarint():d===6?c.top=h.readSVarint():d===7&&(c.advance=h.readVarint())}const j_=rm;function U_(d){let c=0,h=0;for(const T of d)c+=T.w*T.h,h=Math.max(h,T.w);d.sort((T,A)=>A.h-T.h);const _=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),h),h:1/0}];let y=0,C=0;for(const T of d)for(let A=_.length-1;A>=0;A--){const R=_[A];if(!(T.w>R.w||T.h>R.h)){if(T.x=R.x,T.y=R.y,C=Math.max(C,T.y+T.h),y=Math.max(y,T.x+T.w),T.w===R.w&&T.h===R.h){const V=_.pop();A<_.length&&(_[A]=V)}else T.h===R.h?(R.x+=T.w,R.w-=T.w):T.w===R.w?(R.y+=T.h,R.h-=T.h):(_.push({x:R.x+T.w,y:R.y,w:R.w-T.w,h:T.h}),R.y+=T.h,R.h-=T.h);break}}return{w:y,h:C,fill:c/(y*C)||0}}const as=1;class sm{constructor(c,{pixelRatio:h,version:_,stretchX:y,stretchY:C,content:T}){this.paddedRect=c,this.pixelRatio=h,this.stretchX=y,this.stretchY=C,this.content=T,this.version=_}get tl(){return[this.paddedRect.x+as,this.paddedRect.y+as]}get br(){return[this.paddedRect.x+this.paddedRect.w-as,this.paddedRect.y+this.paddedRect.h-as]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*as)/this.pixelRatio,(this.paddedRect.h-2*as)/this.pixelRatio]}}class q_{constructor(c,h){const _={},y={};this.haveRenderCallbacks=[];const C=[];this.addImages(c,_,C),this.addImages(h,y,C);const{w:T,h:A}=U_(C),R=new Ss({width:T||1,height:A||1});for(const V in c){const K=c[V],J=_[V].paddedRect;Ss.copy(K.data,R,{x:0,y:0},{x:J.x+as,y:J.y+as},K.data)}for(const V in h){const K=h[V],J=y[V].paddedRect,ae=J.x+as,pe=J.y+as,be=K.data.width,Se=K.data.height;Ss.copy(K.data,R,{x:0,y:0},{x:ae,y:pe},K.data),Ss.copy(K.data,R,{x:0,y:Se-1},{x:ae,y:pe-1},{width:be,height:1}),Ss.copy(K.data,R,{x:0,y:0},{x:ae,y:pe+Se},{width:be,height:1}),Ss.copy(K.data,R,{x:be-1,y:0},{x:ae-1,y:pe},{width:1,height:Se}),Ss.copy(K.data,R,{x:0,y:0},{x:ae+be,y:pe},{width:1,height:Se})}this.image=R,this.iconPositions=_,this.patternPositions=y}addImages(c,h,_){for(const y in c){const C=c[y],T={x:0,y:0,w:C.data.width+2*as,h:C.data.height+2*as};_.push(T),h[y]=new sm(T,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(c,h){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const _ in c.updatedImages)this.patchUpdatedImage(this.iconPositions[_],c.getImage(_),h),this.patchUpdatedImage(this.patternPositions[_],c.getImage(_),h)}patchUpdatedImage(c,h,_){if(!c||!h||c.version===h.version)return;c.version=h.version;const[y,C]=c.tl;_.update(h.data,void 0,{x:y,y:C})}}var ua;hn("ImagePosition",sm),hn("ImageAtlas",q_),o.ah=void 0,(ua=o.ah||(o.ah={}))[ua.none=0]="none",ua[ua.horizontal=1]="horizontal",ua[ua.vertical=2]="vertical",ua[ua.horizontalOnly=3]="horizontalOnly";const Iu=-17;class Pu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,h){const _=new Pu;return _.scale=c||1,_.fontStack=h,_}static forImage(c){const h=new Pu;return h.imageName=c,h}}class hc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,h){const _=new hc;for(let y=0;y<c.sections.length;y++){const C=c.sections[y];C.image?_.addImageSection(C):_.addTextSection(C,h)}return _}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let h="";for(let _=0;_<c.length;_++){const y=c.charCodeAt(_+1)||null,C=c.charCodeAt(_-1)||null;h+=y&&nu(y)&&!Eu[c[_+1]]||C&&nu(C)&&!Eu[c[_-1]]||!Eu[c[_]]?c[_]:Eu[c[_]]}return h}(this.text)}trim(){let c=0;for(let _=0;_<this.text.length&&dd[this.text.charCodeAt(_)];_++)c++;let h=this.text.length;for(let _=this.text.length-1;_>=0&&_>=c&&dd[this.text.charCodeAt(_)];_--)h--;this.text=this.text.substring(c,h),this.sectionIndex=this.sectionIndex.slice(c,h)}substring(c,h){const _=new hc;return _.text=this.text.substring(c,h),_.sectionIndex=this.sectionIndex.slice(c,h),_.sections=this.sections,_}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,h)=>Math.max(c,this.sections[h].scale),0)}addTextSection(c,h){this.text+=c.text,this.sections.push(Pu.forText(c.scale,c.fontStack||h));const _=this.sections.length-1;for(let y=0;y<c.text.length;++y)this.sectionIndex.push(_)}addImageSection(c){const h=c.image?c.image.name:"";if(h.length===0)return void j("Can't add FormattedSection with an empty image.");const _=this.getNextImageSectionCharCode();_?(this.text+=String.fromCharCode(_),this.sections.push(Pu.forImage(h)),this.sectionIndex.push(this.sections.length-1)):j("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function fd(d,c,h,_,y,C,T,A,R,V,K,J,ae,pe,be,Se){const Ae=hc.fromFeature(d,y);let Re;J===o.ah.vertical&&Ae.verticalizePunctuation();const{processBidirectionalText:ot,processStyledBidirectionalText:Ne}=ao;if(ot&&Ae.sections.length===1){Re=[];const Bt=ot(Ae.toString(),om(Ae,V,C,c,_,pe,be));for(const fn of Bt){const vn=new hc;vn.text=fn,vn.sections=Ae.sections;for(let ln=0;ln<fn.length;ln++)vn.sectionIndex.push(0);Re.push(vn)}}else if(Ne){Re=[];const Bt=Ne(Ae.text,Ae.sectionIndex,om(Ae,V,C,c,_,pe,be));for(const fn of Bt){const vn=new hc;vn.text=fn[0],vn.sectionIndex=fn[1],vn.sections=Ae.sections,Re.push(vn)}}else Re=function(Bt,fn){const vn=[],ln=Bt.text;let on=0;for(const Qt of fn)vn.push(Bt.substring(on,Qt)),on=Qt;return on<ln.length&&vn.push(Bt.substring(on,ln.length)),vn}(Ae,om(Ae,V,C,c,_,pe,be));const Ye=[],Ot={positionedLines:Ye,text:Ae.toString(),top:K[1],bottom:K[1],left:K[0],right:K[0],writingMode:J,iconsInText:!1,verticalizable:!1};return function(Bt,fn,vn,ln,on,Qt,mn,sn,Wt,In,yn,ri){let Ci=0,Pi=Iu,hr=0,gs=0;const Gr=sn==="right"?1:sn==="left"?0:.5;let sr=0;for(const mr of on){mr.trim();const pr=mr.getMaxScale(),Rr=(pr-1)*dr,Kr={positionedGlyphs:[],lineOffset:0};Bt.positionedLines[sr]=Kr;const Lr=Kr.positionedGlyphs;let ls=0;if(!mr.length()){Pi+=Qt,++sr;continue}for(let _r=0;_r<mr.length();_r++){const oi=mr.getSection(_r),Fr=mr.getSectionIndex(_r),$r=mr.getCharCode(_r);let gr=0,Ns=null,Ws=null,Ks=null,Fo=dr;const Vs=!(Wt===o.ah.horizontal||!yn&&!Wl($r)||yn&&(dd[$r]||(kr=$r,an.Arabic(kr)||an["Arabic Supplement"](kr)||an["Arabic Extended-A"](kr)||an["Arabic Presentation Forms-A"](kr)||an["Arabic Presentation Forms-B"](kr))));if(oi.imageName){const Is=ln[oi.imageName];if(!Is)continue;Ks=oi.imageName,Bt.iconsInText=Bt.iconsInText||!0,Ws=Is.paddedRect;const us=Is.displaySize;oi.scale=oi.scale*dr/ri,Ns={width:us[0],height:us[1],left:as,top:-j_,advance:Vs?us[1]:us[0]},gr=Rr+(dr-us[1]*oi.scale),Fo=Ns.advance;const Bo=Vs?us[0]*oi.scale-dr*pr:us[1]*oi.scale-dr*pr;Bo>0&&Bo>ls&&(ls=Bo)}else{const Is=vn[oi.fontStack],us=Is&&Is[$r];if(us&&us.rect)Ws=us.rect,Ns=us.metrics;else{const Bo=fn[oi.fontStack],Ou=Bo&&Bo[$r];if(!Ou)continue;Ns=Ou.metrics}gr=(pr-oi.scale)*dr}Vs?(Bt.verticalizable=!0,Lr.push({glyph:$r,imageName:Ks,x:Ci,y:Pi+gr,vertical:Vs,scale:oi.scale,fontStack:oi.fontStack,sectionIndex:Fr,metrics:Ns,rect:Ws}),Ci+=Fo*oi.scale+In):(Lr.push({glyph:$r,imageName:Ks,x:Ci,y:Pi+gr,vertical:Vs,scale:oi.scale,fontStack:oi.fontStack,sectionIndex:Fr,metrics:Ns,rect:Ws}),Ci+=Ns.advance*oi.scale+In)}Lr.length!==0&&(hr=Math.max(Ci-In,hr),Lk(Lr,0,Lr.length-1,Gr,ls)),Ci=0;const cs=Qt*pr+ls;Kr.lineOffset=Math.max(ls,Rr),Pi+=cs,gs=Math.max(cs,gs),++sr}var kr;const Pr=Pi-Iu,{horizontalAlign:Zr,verticalAlign:Wr}=am(mn);(function(mr,pr,Rr,Kr,Lr,ls,cs,_r,oi){const Fr=(pr-Rr)*Lr;let $r=0;$r=ls!==cs?-_r*Kr-Iu:(-Kr*oi+.5)*cs;for(const gr of mr)for(const Ns of gr.positionedGlyphs)Ns.x+=Fr,Ns.y+=$r})(Bt.positionedLines,Gr,Zr,Wr,hr,gs,Qt,Pr,on.length),Bt.top+=-Wr*Pr,Bt.bottom=Bt.top+Pr,Bt.left+=-Zr*hr,Bt.right=Bt.left+hr}(Ot,c,h,_,Re,T,A,R,J,V,ae,Se),!function(Bt){for(const fn of Bt)if(fn.positionedGlyphs.length!==0)return!1;return!0}(Ye)&&Ot}const dd={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},zk={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function H_(d,c,h,_,y,C){if(c.imageName){const T=_[c.imageName];return T?T.displaySize[0]*c.scale*dr/C+y:0}{const T=h[c.fontStack],A=T&&T[d];return A?A.metrics.advance*c.scale+y:0}}function G_(d,c,h,_){const y=Math.pow(d-c,2);return _?d<c?y/2:2*y:y+Math.abs(h)*h}function Rk(d,c,h){let _=0;return d===10&&(_-=1e4),h&&(_+=150),d!==40&&d!==65288||(_+=50),c!==41&&c!==65289||(_+=50),_}function Z_(d,c,h,_,y,C){let T=null,A=G_(c,h,y,C);for(const R of _){const V=G_(c-R.x,h,y,C)+R.badness;V<=A&&(T=R,A=V)}return{index:d,x:c,priorBreak:T,badness:A}}function W_(d){return d?W_(d.priorBreak).concat(d.index):[]}function om(d,c,h,_,y,C,T){if(C!=="point")return[];if(!d)return[];const A=[],R=function(ae,pe,be,Se,Ae,Re){let ot=0;for(let Ne=0;Ne<ae.length();Ne++){const Ye=ae.getSection(Ne);ot+=H_(ae.getCharCode(Ne),Ye,Se,Ae,pe,Re)}return ot/Math.max(1,Math.ceil(ot/be))}(d,c,h,_,y,T),V=d.text.indexOf("​")>=0;let K=0;for(let ae=0;ae<d.length();ae++){const pe=d.getSection(ae),be=d.getCharCode(ae);if(dd[be]||(K+=H_(be,pe,_,y,c,T)),ae<d.length()-1){const Se=!((J=be)<11904||!(an["Bopomofo Extended"](J)||an.Bopomofo(J)||an["CJK Compatibility Forms"](J)||an["CJK Compatibility Ideographs"](J)||an["CJK Compatibility"](J)||an["CJK Radicals Supplement"](J)||an["CJK Strokes"](J)||an["CJK Symbols and Punctuation"](J)||an["CJK Unified Ideographs Extension A"](J)||an["CJK Unified Ideographs"](J)||an["Enclosed CJK Letters and Months"](J)||an["Halfwidth and Fullwidth Forms"](J)||an.Hiragana(J)||an["Ideographic Description Characters"](J)||an["Kangxi Radicals"](J)||an["Katakana Phonetic Extensions"](J)||an.Katakana(J)||an["Vertical Forms"](J)||an["Yi Radicals"](J)||an["Yi Syllables"](J)));(zk[be]||Se||pe.imageName)&&A.push(Z_(ae+1,K,R,A,Rk(be,d.getCharCode(ae+1),Se&&V),!1))}}var J;return W_(Z_(d.length(),K,R,A,0,!0))}function am(d){let c=.5,h=.5;switch(d){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(d){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:c,verticalAlign:h}}function Lk(d,c,h,_,y){if(!_&&!y)return;const C=d[h],T=(d[h].x+C.metrics.advance*C.scale)*_;for(let A=c;A<=h;A++)d[A].x-=T,d[A].y+=y}function Fk(d,c,h){const{horizontalAlign:_,verticalAlign:y}=am(h),C=c[0]-d.displaySize[0]*_,T=c[1]-d.displaySize[1]*y;return{image:d,top:T,bottom:T+d.displaySize[1],left:C,right:C+d.displaySize[0]}}function K_(d,c,h,_,y,C){const T=d.image;let A;if(T.content){const Ae=T.content,Re=T.pixelRatio||1;A=[Ae[0]/Re,Ae[1]/Re,T.displaySize[0]-Ae[2]/Re,T.displaySize[1]-Ae[3]/Re]}const R=c.left*C,V=c.right*C;let K,J,ae,pe;h==="width"||h==="both"?(pe=y[0]+R-_[3],J=y[0]+V+_[1]):(pe=y[0]+(R+V-T.displaySize[0])/2,J=pe+T.displaySize[0]);const be=c.top*C,Se=c.bottom*C;return h==="height"||h==="both"?(K=y[1]+be-_[0],ae=y[1]+Se+_[2]):(K=y[1]+(be+Se-T.displaySize[1])/2,ae=K+T.displaySize[1]),{image:T,top:K,right:J,bottom:ae,left:pe,collisionPadding:A}}const $u=255,fo=128,fa=$u*fo;function X_(d,c){const{expression:h}=c;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new Ei(d+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:_,interpolationType:y}=h;let C=0;for(;C<_.length&&_[C]<=d;)C++;C=Math.max(0,C-1);let T=C;for(;T<_.length&&_[T]<d+1;)T++;T=Math.min(_.length-1,T);const A=_[C],R=_[T];return h.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:R,interpolationType:y}:{kind:"camera",minZoom:A,maxZoom:R,minSize:h.evaluate(new Ei(A)),maxSize:h.evaluate(new Ei(R)),interpolationType:y}}}function lm(d,c,h){let _="never";const y=d.get(c);return y?_=y:d.get(h)&&(_="always"),_}const Bk=ca.VectorTileFeature.types,Nk=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hd(d,c,h,_,y,C,T,A,R,V,K,J,ae){const pe=A?Math.min(fa,Math.round(A[0])):0,be=A?Math.min(fa,Math.round(A[1])):0;d.emplaceBack(c,h,Math.round(32*_),Math.round(32*y),C,T,(pe<<1)+(R?1:0),be,16*V,16*K,256*J,256*ae)}function cm(d,c,h){d.emplaceBack(c.x,c.y,h),d.emplaceBack(c.x,c.y,h),d.emplaceBack(c.x,c.y,h),d.emplaceBack(c.x,c.y,h)}function Vk(d){for(const c of d.sections)if(Nh(c.text))return!0;return!1}class um{constructor(c){this.layoutVertexArray=new gt,this.indexArray=new Tt,this.programConfigurations=c,this.segments=new nn,this.dynamicLayoutVertexArray=new De,this.opacityVertexArray=new Qe,this.hasVisibleVertices=!1,this.placedSymbolArray=new p}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,h,_,y){this.isEmpty()||(_&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,vk.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,bk.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,Nk,!0),this.opacityVertexBuffer.itemSize=1),(_||y)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}hn("SymbolBuffers",um);class fm{constructor(c,h,_){this.layoutVertexArray=new c,this.layoutAttributes=h,this.indexArray=new _,this.segments=new nn,this.collisionVertexArray=new xt}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,yk.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}hn("CollisionBuffers",fm);class mc{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(T=>T.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=jh([]),this.placementViewportMatrix=jh([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=X_(this.zoom,h["text-size"]),this.iconSizeData=X_(this.zoom,h["icon-size"]);const _=this.layers[0].layout,y=_.get("symbol-sort-key"),C=_.get("symbol-z-order");this.canOverlap=lm(_,"text-overlap","text-allow-overlap")!=="never"||lm(_,"icon-overlap","icon-allow-overlap")!=="never"||_.get("text-ignore-placement")||_.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,_.get("symbol-placement")==="point"&&(this.writingModes=_.get("text-writing-mode").map(T=>o.ah[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=c.sourceID}createArrays(){this.text=new um(new Oi(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new um(new Oi(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new k,this.lineVertexArray=new O,this.symbolInstances=new b,this.textAnchorOffsets=new B}calculateGlyphDependencies(c,h,_,y,C){for(let T=0;T<c.length;T++)if(h[c.charCodeAt(T)]=!0,(_||y)&&C){const A=Eu[c.charAt(T)];A&&(h[A.charCodeAt(0)]=!0)}}populate(c,h,_){const y=this.layers[0],C=y.layout,T=C.get("text-font"),A=C.get("text-field"),R=C.get("icon-image"),V=(A.value.kind!=="constant"||A.value.value instanceof ns&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),K=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,J=C.get("symbol-sort-key");if(this.features=[],!V&&!K)return;const ae=h.iconDependencies,pe=h.glyphDependencies,be=h.availableImages,Se=new Ei(this.zoom);for(const{feature:Ae,id:Re,index:ot,sourceLayerIndex:Ne}of c){const Ye=y._featureFilter.needGeometry,Ot=Ro(Ae,Ye);if(!y._featureFilter.filter(Se,Ot,_))continue;let Bt,fn;if(Ye||(Ot.geometry=zo(Ae)),V){const ln=y.getValueAndResolveTokens("text-field",Ot,_,be),on=ns.factory(ln),Qt=this.hasRTLText=this.hasRTLText||Vk(on);(!Qt||ao.getRTLTextPluginStatus()==="unavailable"||Qt&&ao.isParsed())&&(Bt=xk(on,y,Ot))}if(K){const ln=y.getValueAndResolveTokens("icon-image",Ot,_,be);fn=ln instanceof ms?ln:ms.fromString(ln)}if(!Bt&&!fn)continue;const vn=this.sortFeaturesByKey?J.evaluate(Ot,{},_):void 0;if(this.features.push({id:Re,text:Bt,icon:fn,index:ot,sourceLayerIndex:Ne,geometry:Ot.geometry,properties:Ae.properties,type:Bk[Ae.type],sortKey:vn}),fn&&(ae[fn.name]=!0),Bt){const ln=T.evaluate(Ot,{},_).join(","),on=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ah.vertical)>=0;for(const Qt of Bt.sections)if(Qt.image)ae[Qt.image.name]=!0;else{const mn=aa(Bt.toString()),sn=Qt.fontStack||ln,Wt=pe[sn]=pe[sn]||{};this.calculateGlyphDependencies(Qt.text,Wt,on,this.allowVerticalPlacement,mn)}}}C.get("symbol-placement")==="line"&&(this.features=function(Ae){const Re={},ot={},Ne=[];let Ye=0;function Ot(ln){Ne.push(Ae[ln]),Ye++}function Bt(ln,on,Qt){const mn=ot[ln];return delete ot[ln],ot[on]=mn,Ne[mn].geometry[0].pop(),Ne[mn].geometry[0]=Ne[mn].geometry[0].concat(Qt[0]),mn}function fn(ln,on,Qt){const mn=Re[on];return delete Re[on],Re[ln]=mn,Ne[mn].geometry[0].shift(),Ne[mn].geometry[0]=Qt[0].concat(Ne[mn].geometry[0]),mn}function vn(ln,on,Qt){const mn=Qt?on[0][on[0].length-1]:on[0][0];return`${ln}:${mn.x}:${mn.y}`}for(let ln=0;ln<Ae.length;ln++){const on=Ae[ln],Qt=on.geometry,mn=on.text?on.text.toString():null;if(!mn){Ot(ln);continue}const sn=vn(mn,Qt),Wt=vn(mn,Qt,!0);if(sn in ot&&Wt in Re&&ot[sn]!==Re[Wt]){const In=fn(sn,Wt,Qt),yn=Bt(sn,Wt,Ne[In].geometry);delete Re[sn],delete ot[Wt],ot[vn(mn,Ne[yn].geometry,!0)]=yn,Ne[In].geometry=null}else sn in ot?Bt(sn,Wt,Qt):Wt in Re?fn(sn,Wt,Qt):(Ot(ln),Re[sn]=Ye-1,ot[Wt]=Ye-1)}return Ne.filter(ln=>ln.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ae,Re)=>Ae.sortKey-Re.sortKey)}update(c,h,_){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,h,this.layers,_),this.icon.programConfigurations.updatePaintArrays(c,h,this.layers,_))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,h){const _=this.lineVertexArray.length;if(c.segment!==void 0){let y=c.dist(h[c.segment+1]),C=c.dist(h[c.segment]);const T={};for(let A=c.segment+1;A<h.length;A++)T[A]={x:h[A].x,y:h[A].y,tileUnitDistanceFromAnchor:y},A<h.length-1&&(y+=h[A+1].dist(h[A]));for(let A=c.segment||0;A>=0;A--)T[A]={x:h[A].x,y:h[A].y,tileUnitDistanceFromAnchor:C},A>0&&(C+=h[A-1].dist(h[A]));for(let A=0;A<h.length;A++){const R=T[A];this.lineVertexArray.emplaceBack(R.x,R.y,R.tileUnitDistanceFromAnchor)}}return{lineStartIndex:_,lineLength:this.lineVertexArray.length-_}}addSymbols(c,h,_,y,C,T,A,R,V,K,J,ae){const pe=c.indexArray,be=c.layoutVertexArray,Se=c.segments.prepareSegment(4*h.length,be,pe,this.canOverlap?T.sortKey:void 0),Ae=this.glyphOffsetArray.length,Re=Se.vertexLength,ot=this.allowVerticalPlacement&&A===o.ah.vertical?Math.PI/2:0,Ne=T.text&&T.text.sections;for(let Ye=0;Ye<h.length;Ye++){const{tl:Ot,tr:Bt,bl:fn,br:vn,tex:ln,pixelOffsetTL:on,pixelOffsetBR:Qt,minFontScaleX:mn,minFontScaleY:sn,glyphOffset:Wt,isSDF:In,sectionIndex:yn}=h[Ye],ri=Se.vertexLength,Ci=Wt[1];hd(be,R.x,R.y,Ot.x,Ci+Ot.y,ln.x,ln.y,_,In,on.x,on.y,mn,sn),hd(be,R.x,R.y,Bt.x,Ci+Bt.y,ln.x+ln.w,ln.y,_,In,Qt.x,on.y,mn,sn),hd(be,R.x,R.y,fn.x,Ci+fn.y,ln.x,ln.y+ln.h,_,In,on.x,Qt.y,mn,sn),hd(be,R.x,R.y,vn.x,Ci+vn.y,ln.x+ln.w,ln.y+ln.h,_,In,Qt.x,Qt.y,mn,sn),cm(c.dynamicLayoutVertexArray,R,ot),pe.emplaceBack(ri,ri+1,ri+2),pe.emplaceBack(ri+1,ri+2,ri+3),Se.vertexLength+=4,Se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Wt[0]),Ye!==h.length-1&&yn===h[Ye+1].sectionIndex||c.programConfigurations.populatePaintArrays(be.length,T,T.index,{},ae,Ne&&Ne[yn])}c.placedSymbolArray.emplaceBack(R.x,R.y,Ae,this.glyphOffsetArray.length-Ae,Re,V,K,R.segment,_?_[0]:0,_?_[1]:0,y[0],y[1],A,0,!1,0,J)}_addCollisionDebugVertex(c,h,_,y,C,T){return h.emplaceBack(0,0),c.emplaceBack(_.x,_.y,y,C,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(c,h,_,y,C,T,A){const R=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),V=R.vertexLength,K=C.layoutVertexArray,J=C.collisionVertexArray,ae=A.anchorX,pe=A.anchorY;this._addCollisionDebugVertex(K,J,T,ae,pe,new g(c,h)),this._addCollisionDebugVertex(K,J,T,ae,pe,new g(_,h)),this._addCollisionDebugVertex(K,J,T,ae,pe,new g(_,y)),this._addCollisionDebugVertex(K,J,T,ae,pe,new g(c,y)),R.vertexLength+=4;const be=C.indexArray;be.emplaceBack(V,V+1),be.emplaceBack(V+1,V+2),be.emplaceBack(V+2,V+3),be.emplaceBack(V+3,V),R.primitiveLength+=4}addDebugCollisionBoxes(c,h,_,y){for(let C=c;C<h;C++){const T=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,y?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,_)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fm(vt,O_.members,Ht),this.iconCollisionBox=new fm(vt,O_.members,Ht);for(let c=0;c<this.symbolInstances.length;c++){const h=this.symbolInstances.get(c);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(c,h,_,y,C,T,A,R,V){const K={};for(let J=h;J<_;J++){const ae=c.get(J);K.textBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},K.textFeatureIndex=ae.featureIndex;break}for(let J=y;J<C;J++){const ae=c.get(J);K.verticalTextBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},K.verticalTextFeatureIndex=ae.featureIndex;break}for(let J=T;J<A;J++){const ae=c.get(J);K.iconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},K.iconFeatureIndex=ae.featureIndex;break}for(let J=R;J<V;J++){const ae=c.get(J);K.verticalIconBox={x1:ae.x1,y1:ae.y1,x2:ae.x2,y2:ae.y2,anchorPointX:ae.anchorPointX,anchorPointY:ae.anchorPointY},K.verticalIconFeatureIndex=ae.featureIndex;break}return K}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const _=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,_.textBoxStartIndex,_.textBoxEndIndex,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_.iconBoxStartIndex,_.iconBoxEndIndex,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,h){const _=c.placedSymbolArray.get(h),y=_.vertexStartIndex+4*_.numGlyphs;for(let C=_.vertexStartIndex;C<y;C+=4)c.indexArray.emplaceBack(C,C+1,C+2),c.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(c),_=Math.cos(c),y=[],C=[],T=[];for(let A=0;A<this.symbolInstances.length;++A){T.push(A);const R=this.symbolInstances.get(A);y.push(0|Math.round(h*R.anchorX+_*R.anchorY)),C.push(R.featureIndex)}return T.sort((A,R)=>y[A]-y[R]||C[R]-C[A]),T}addToSortKeyRanges(c,h){const _=this.sortKeyRanges[this.sortKeyRanges.length-1];_&&_.sortKey===h?_.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const _=this.symbolInstances.get(h);this.featureSortOrder.push(_.featureIndex),[_.rightJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.leftJustifiedTextSymbolIndex].forEach((y,C,T)=>{y>=0&&T.indexOf(y)===C&&this.addIndicesForPlacedSymbol(this.text,y)}),_.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,_.verticalPlacedTextSymbolIndex),_.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.placedIconSymbolIndex),_.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,_.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let J_,Y_;hn("SymbolBucket",mc,{omit:["layers","collisionBoxArray","features","compareText"]}),mc.MAX_GLYPHS=65535,mc.addDynamicAttributes=cm;var dm={get paint(){return Y_=Y_||new qr({"icon-opacity":new An(Oe.paint_symbol["icon-opacity"]),"icon-color":new An(Oe.paint_symbol["icon-color"]),"icon-halo-color":new An(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new An(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new An(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new xn(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new xn(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new An(Oe.paint_symbol["text-opacity"]),"text-color":new An(Oe.paint_symbol["text-color"],{runtimeType:On,getOverride:d=>d.textColor,hasOverride:d=>!!d.textColor}),"text-halo-color":new An(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new An(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new An(Oe.paint_symbol["text-halo-blur"]),"text-translate":new xn(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new xn(Oe.paint_symbol["text-translate-anchor"])})},get layout(){return J_=J_||new qr({"symbol-placement":new xn(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new xn(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new xn(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new An(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new xn(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new xn(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new xn(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new xn(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new xn(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new xn(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new An(Oe.layout_symbol["icon-size"]),"icon-text-fit":new xn(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new xn(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new An(Oe.layout_symbol["icon-image"]),"icon-rotate":new An(Oe.layout_symbol["icon-rotate"]),"icon-padding":new An(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new xn(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new An(Oe.layout_symbol["icon-offset"]),"icon-anchor":new An(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new xn(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new xn(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new xn(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new An(Oe.layout_symbol["text-field"]),"text-font":new An(Oe.layout_symbol["text-font"]),"text-size":new An(Oe.layout_symbol["text-size"]),"text-max-width":new An(Oe.layout_symbol["text-max-width"]),"text-line-height":new xn(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new An(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new An(Oe.layout_symbol["text-justify"]),"text-radial-offset":new An(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new xn(Oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new An(Oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new An(Oe.layout_symbol["text-anchor"]),"text-max-angle":new xn(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new xn(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new An(Oe.layout_symbol["text-rotate"]),"text-padding":new xn(Oe.layout_symbol["text-padding"]),"text-keep-upright":new xn(Oe.layout_symbol["text-keep-upright"]),"text-transform":new An(Oe.layout_symbol["text-transform"]),"text-offset":new An(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new xn(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new xn(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new xn(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new xn(Oe.layout_symbol["text-optional"])})}};class Q_{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:xi,this.defaultValue=c}evaluate(c){if(c.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(c.formattedSection))return h.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}hn("FormatSectionOverride",Q_,{omit:["defaultValue"]});class md extends Ts{constructor(c){super(c,dm)}recalculate(c,h){if(super.recalculate(c,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const _=this.layout.get("text-writing-mode");if(_){const y=[];for(const C of _)y.indexOf(C)<0&&y.push(C);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,h,_,y){const C=this.layout.get(c).evaluate(h,{},_,y),T=this._unevaluatedLayout._values[c];return T.isDataDriven()||wi(T.value)||!C?C:function(A,R){return R.replace(/{([^{}]+)}/g,(V,K)=>A&&K in A?String(A[K]):"")}(h.properties,C)}createBucket(c){return new mc(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of dm.paint.overridableProperties){if(!md.hasPaintOverride(this.layout,c))continue;const h=this.paint.get(c),_=new Q_(h),y=new ki(_,h.property.specification);let C=null;C=h.value.kind==="constant"||h.value.kind==="source"?new Ll("source",y):new Zc("composite",y,h.value.zoomStops),this.paint._values[c]=new Cs(h.property,C,h.parameters)}}_handleOverridablePaintPropertyUpdate(c,h,_){return!(!this.layout||h.isDataDriven()||_.isDataDriven())&&md.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,h){const _=c.get("text-field"),y=dm.paint.properties[h];let C=!1;const T=A=>{for(const R of A)if(y.overrides&&y.overrides.hasOverride(R))return void(C=!0)};if(_.value.kind==="constant"&&_.value.value instanceof ns)T(_.value.value.sections);else if(_.value.kind==="source"){const A=V=>{C||(V instanceof no&&tr(V.value)===bn?T(V.value.sections):V instanceof zl?T(V.sections):V.eachChild(A))},R=_.value;R._styleExpression&&A(R._styleExpression.expression)}return C}}let eg;var jk={get paint(){return eg=eg||new qr({"background-color":new xn(Oe.paint_background["background-color"]),"background-pattern":new Ua(Oe.paint_background["background-pattern"]),"background-opacity":new xn(Oe.paint_background["background-opacity"])})}};class Uk extends Ts{constructor(c){super(c,jk)}}let tg;var qk={get paint(){return tg=tg||new qr({"raster-opacity":new xn(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new xn(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new xn(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new xn(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new xn(Oe.paint_raster["raster-saturation"]),"raster-contrast":new xn(Oe.paint_raster["raster-contrast"]),"raster-resampling":new xn(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new xn(Oe.paint_raster["raster-fade-duration"])})}};class Hk extends Ts{constructor(c){super(c,qk)}}class Gk extends Ts{constructor(c){super(c,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Zk{constructor(c){this._methodToThrottle=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const hm=63710088e-1;class da{constructor(c,h){if(isNaN(c)||isNaN(h))throw new Error(`Invalid LngLat object: (${c}, ${h})`);if(this.lng=+c,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new da(ee(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const h=Math.PI/180,_=this.lat*h,y=c.lat*h,C=Math.sin(_)*Math.sin(y)+Math.cos(_)*Math.cos(y)*Math.cos((c.lng-this.lng)*h);return hm*Math.acos(Math.min(C,1))}static convert(c){if(c instanceof da)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new da(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new da(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ng=2*Math.PI*hm;function ig(d){return ng*Math.cos(d*Math.PI/180)}function rg(d){return(180+d)/360}function sg(d){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+d*Math.PI/360)))/360}function og(d,c){return d/ig(c)}function mm(d){return 360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90}class pd{constructor(c,h,_=0){this.x=+c,this.y=+h,this.z=+_}static fromLngLat(c,h=0){const _=da.convert(c);return new pd(rg(_.lng),sg(_.lat),og(h,_.lat))}toLngLat(){return new da(360*this.x-180,mm(this.y))}toAltitude(){return this.z*ig(mm(this.y))}meterInMercatorCoordinateUnits(){return 1/ng*(c=mm(this.y),1/Math.cos(c*Math.PI/180));var c}}function ag(d,c,h){var _=2*Math.PI*6378137/256/Math.pow(2,h);return[d*_-2*Math.PI*6378137/2,c*_-2*Math.PI*6378137/2]}class pm{constructor(c,h,_){if(c<0||c>25||_<0||_>=Math.pow(2,c)||h<0||h>=Math.pow(2,c))throw new Error(`x=${h}, y=${_}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=h,this.y=_,this.key=Au(0,c,c,h,_)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,h,_){const y=(T=this.y,A=this.z,R=ag(256*(C=this.x),256*(T=Math.pow(2,A)-T-1),A),V=ag(256*(C+1),256*(T+1),A),R[0]+","+R[1]+","+V[0]+","+V[1]);var C,T,A,R,V;const K=function(J,ae,pe){let be,Se="";for(let Ae=J;Ae>0;Ae--)be=1<<Ae-1,Se+=(ae&be?1:0)+(pe&be?2:0);return Se}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(_==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,K).replace(/{bbox-epsg-3857}/g,y)}isChildOf(c){const h=this.z-c.z;return h>0&&c.x===this.x>>h&&c.y===this.y>>h}getTilePoint(c){const h=Math.pow(2,this.z);return new g((c.x*h-this.x)*Ui,(c.y*h-this.y)*Ui)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lg{constructor(c,h){this.wrap=c,this.canonical=h,this.key=Au(c,h.z,h.z,h.x,h.y)}}class Es{constructor(c,h,_,y,C){if(c<_)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${_}`);this.overscaledZ=c,this.wrap=h,this.canonical=new pm(_,+y,+C),this.key=Au(h,c,_,y,C)}clone(){return new Es(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-c;return c>this.canonical.z?new Es(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Es(c,this.wrap,c,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(c,h){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const _=this.canonical.z-c;return c>this.canonical.z?Au(this.wrap*+h,c,this.canonical.z,this.canonical.x,this.canonical.y):Au(this.wrap*+h,c,c,this.canonical.x>>_,this.canonical.y>>_)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const h=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>h&&c.canonical.y===this.canonical.y>>h}children(c){if(this.overscaledZ>=c)return[new Es(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,_=2*this.canonical.x,y=2*this.canonical.y;return[new Es(h,this.wrap,h,_,y),new Es(h,this.wrap,h,_+1,y),new Es(h,this.wrap,h,_,y+1),new Es(h,this.wrap,h,_+1,y+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new Es(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new Es(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lg(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new pd(c.x-this.wrap,c.y))}}function Au(d,c,h,_,y){(d*=2)<0&&(d=-1*d-1);const C=1<<h;return(C*C*d+C*y+_).toString(36)+h.toString(36)+c.toString(36)}hn("CanonicalTileID",pm),hn("OverscaledTileID",Es,{omit:["posMatrix"]});class cg{constructor(c,h,_,y=1,C=1,T=1,A=0){if(this.uid=c,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(_&&!["mapbox","terrarium","custom"].includes(_))return void j(`"${_}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const R=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),_){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=C,this.blueFactor=T,this.baseShift=A;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<R;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(R,V)]=this.data[this._idx(R-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,R)]=this.data[this._idx(V,R-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(R,-1)]=this.data[this._idx(R-1,0)],this.data[this._idx(-1,R)]=this.data[this._idx(0,R-1)],this.data[this._idx(R,R)]=this.data[this._idx(R-1,R-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<R;V++)for(let K=0;K<R;K++){const J=this.get(V,K);J>this.max&&(this.max=J),J<this.min&&(this.min=J)}}get(c,h){const _=new Uint8Array(this.data.buffer),y=4*this._idx(c,h);return this.unpack(_[y],_[y+1],_[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(c,h){if(c<-1||c>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(c+1)}unpack(c,h,_){return c*this.redFactor+h*this.greenFactor+_*this.blueFactor-this.baseShift}getPixels(){return new Ss({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,h,_){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let y=h*this.dim,C=h*this.dim+this.dim,T=_*this.dim,A=_*this.dim+this.dim;switch(h){case-1:y=C-1;break;case 1:C=y+1}switch(_){case-1:T=A-1;break;case 1:A=T+1}const R=-h*this.dim,V=-_*this.dim;for(let K=T;K<A;K++)for(let J=y;J<C;J++)this.data[this._idx(J,K)]=c.data[this._idx(J+R,K+V)]}}hn("DEMData",cg);class ug{constructor(c){this._stringToNumber={},this._numberToString=[];for(let h=0;h<c.length;h++){const _=c[h];this._stringToNumber[_]=h,this._numberToString[h]=_}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class fg{constructor(c,h,_,y,C){this.type="Feature",this._vectorTileFeature=c,c._z=h,c._x=_,c._y=y,this.properties=c.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(c[h]=this[h]);return c}}class dg{constructor(c,h){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new Na(Ui,16,0),this.grid3D=new Na(Ui,16,0),this.featureIndexArray=new Y,this.promoteId=h}insert(c,h,_,y,C,T){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(_,y,C);const R=T?this.grid3D:this.grid;for(let V=0;V<h.length;V++){const K=h[V],J=[1/0,1/0,-1/0,-1/0];for(let ae=0;ae<K.length;ae++){const pe=K[ae];J[0]=Math.min(J[0],pe.x),J[1]=Math.min(J[1],pe.y),J[2]=Math.max(J[2],pe.x),J[3]=Math.max(J[3],pe.y)}J[0]<Ui&&J[1]<Ui&&J[2]>=0&&J[3]>=0&&R.insert(A,J[0],J[1],J[2],J[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ca.VectorTile(new im(this.rawTileData)).layers,this.sourceLayerCoder=new ug(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,h,_,y){this.loadVTLayers();const C=c.params||{},T=Ui/c.tileSize/c.scale,A=Vl(C.filter),R=c.queryGeometry,V=c.queryPadding*T,K=mg(R),J=this.grid.query(K.minX-V,K.minY-V,K.maxX+V,K.maxY+V),ae=mg(c.cameraQueryGeometry),pe=this.grid3D.query(ae.minX-V,ae.minY-V,ae.maxX+V,ae.maxY+V,(Ae,Re,ot,Ne)=>function(Ye,Ot,Bt,fn,vn){for(const on of Ye)if(Ot<=on.x&&Bt<=on.y&&fn>=on.x&&vn>=on.y)return!0;const ln=[new g(Ot,Bt),new g(Ot,vn),new g(fn,vn),new g(fn,Bt)];if(Ye.length>2){for(const on of ln)if(ac(Ye,on))return!0}for(let on=0;on<Ye.length-1;on++)if(Tx(Ye[on],Ye[on+1],ln))return!0;return!1}(c.cameraQueryGeometry,Ae-V,Re-V,ot+V,Ne+V));for(const Ae of pe)J.push(Ae);J.sort(Wk);const be={};let Se;for(let Ae=0;Ae<J.length;Ae++){const Re=J[Ae];if(Re===Se)continue;Se=Re;const ot=this.featureIndexArray.get(Re);let Ne=null;this.loadMatchingFeature(be,ot.bucketIndex,ot.sourceLayerIndex,ot.featureIndex,A,C.layers,C.availableImages,h,_,y,(Ye,Ot,Bt)=>(Ne||(Ne=zo(Ye)),Ot.queryIntersectsFeature(R,Ye,Bt,Ne,this.z,c.transform,T,c.pixelPosMatrix)))}return be}loadMatchingFeature(c,h,_,y,C,T,A,R,V,K,J){const ae=this.bucketLayerIDs[h];if(T&&!function(Ae,Re){for(let ot=0;ot<Ae.length;ot++)if(Re.indexOf(Ae[ot])>=0)return!0;return!1}(T,ae))return;const pe=this.sourceLayerCoder.decode(_),be=this.vtLayers[pe].feature(y);if(C.needGeometry){const Ae=Ro(be,!0);if(!C.filter(new Ei(this.tileID.overscaledZ),Ae,this.tileID.canonical))return}else if(!C.filter(new Ei(this.tileID.overscaledZ),be))return;const Se=this.getId(be,pe);for(let Ae=0;Ae<ae.length;Ae++){const Re=ae[Ae];if(T&&T.indexOf(Re)<0)continue;const ot=R[Re];if(!ot)continue;let Ne={};Se&&K&&(Ne=K.getState(ot.sourceLayer||"_geojsonTileLayer",Se));const Ye=fe({},V[Re]);Ye.paint=hg(Ye.paint,ot.paint,be,Ne,A),Ye.layout=hg(Ye.layout,ot.layout,be,Ne,A);const Ot=!J||J(be,ot,Ne);if(!Ot)continue;const Bt=new fg(be,this.z,this.x,this.y,Se);Bt.layer=Ye;let fn=c[Re];fn===void 0&&(fn=c[Re]=[]),fn.push({featureIndex:y,feature:Bt,intersectionZ:Ot})}}lookupSymbolFeatures(c,h,_,y,C,T,A,R){const V={};this.loadVTLayers();const K=Vl(C);for(const J of c)this.loadMatchingFeature(V,_,y,J,K,T,A,R,h);return V}hasLayer(c){for(const h of this.bucketLayerIDs)for(const _ of h)if(c===_)return!0;return!1}getId(c,h){let _=c.id;return this.promoteId&&(_=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof _=="boolean"&&(_=Number(_))),_}}function hg(d,c,h,_,y){return re(d,(C,T)=>{const A=c instanceof ja?c.get(T):null;return A&&A.evaluate?A.evaluate(h,_,y):A})}function mg(d){let c=1/0,h=1/0,_=-1/0,y=-1/0;for(const C of d)c=Math.min(c,C.x),h=Math.min(h,C.y),_=Math.max(_,C.x),y=Math.max(y,C.y);return{minX:c,minY:h,maxX:_,maxY:y}}function Wk(d,c){return c-d}function pg(d,c,h,_,y){const C=[];for(let T=0;T<d.length;T++){const A=d[T];let R;for(let V=0;V<A.length-1;V++){let K=A[V],J=A[V+1];K.x<c&&J.x<c||(K.x<c?K=new g(c,K.y+(c-K.x)/(J.x-K.x)*(J.y-K.y))._round():J.x<c&&(J=new g(c,K.y+(c-K.x)/(J.x-K.x)*(J.y-K.y))._round()),K.y<h&&J.y<h||(K.y<h?K=new g(K.x+(h-K.y)/(J.y-K.y)*(J.x-K.x),h)._round():J.y<h&&(J=new g(K.x+(h-K.y)/(J.y-K.y)*(J.x-K.x),h)._round()),K.x>=_&&J.x>=_||(K.x>=_?K=new g(_,K.y+(_-K.x)/(J.x-K.x)*(J.y-K.y))._round():J.x>=_&&(J=new g(_,K.y+(_-K.x)/(J.x-K.x)*(J.y-K.y))._round()),K.y>=y&&J.y>=y||(K.y>=y?K=new g(K.x+(y-K.y)/(J.y-K.y)*(J.x-K.x),y)._round():J.y>=y&&(J=new g(K.x+(y-K.y)/(J.y-K.y)*(J.x-K.x),y)._round()),R&&K.equals(R[R.length-1])||(R=[K],C.push(R)),R.push(J)))))}}return C}hn("FeatureIndex",dg,{omit:["rawTileData","sourceLayerCoder"]});class ha extends g{constructor(c,h,_,y){super(c,h),this.angle=_,y!==void 0&&(this.segment=y)}clone(){return new ha(this.x,this.y,this.angle,this.segment)}}function _g(d,c,h,_,y){if(c.segment===void 0||h===0)return!0;let C=c,T=c.segment+1,A=0;for(;A>-h/2;){if(T--,T<0)return!1;A-=d[T].dist(C),C=d[T]}A+=d[T].dist(d[T+1]),T++;const R=[];let V=0;for(;A<h/2;){const K=d[T],J=d[T+1];if(!J)return!1;let ae=d[T-1].angleTo(K)-K.angleTo(J);for(ae=Math.abs((ae+3*Math.PI)%(2*Math.PI)-Math.PI),R.push({distance:A,angleDelta:ae}),V+=ae;A-R[0].distance>_;)V-=R.shift().angleDelta;if(V>y)return!1;T++,A+=K.dist(J)}return!0}function gg(d){let c=0;for(let h=0;h<d.length-1;h++)c+=d[h].dist(d[h+1]);return c}function vg(d,c,h){return d?.6*c*h:0}function bg(d,c){return Math.max(d?d.right-d.left:0,c?c.right-c.left:0)}function Kk(d,c,h,_,y,C){const T=vg(h,y,C),A=bg(h,_)*C;let R=0;const V=gg(d)/2;for(let K=0;K<d.length-1;K++){const J=d[K],ae=d[K+1],pe=J.dist(ae);if(R+pe>V){const be=(V-R)/pe,Se=Or.number(J.x,ae.x,be),Ae=Or.number(J.y,ae.y,be),Re=new ha(Se,Ae,ae.angleTo(J),K);return Re._round(),!T||_g(d,Re,A,T,c)?Re:void 0}R+=pe}}function Xk(d,c,h,_,y,C,T,A,R){const V=vg(_,C,T),K=bg(_,y),J=K*T,ae=d[0].x===0||d[0].x===R||d[0].y===0||d[0].y===R;return c-J<c/4&&(c=J+c/4),yg(d,ae?c/2*A%c:(K/2+2*C)*T*A%c,c,V,h,J,ae,!1,R)}function yg(d,c,h,_,y,C,T,A,R){const V=C/2,K=gg(d);let J=0,ae=c-h,pe=[];for(let be=0;be<d.length-1;be++){const Se=d[be],Ae=d[be+1],Re=Se.dist(Ae),ot=Ae.angleTo(Se);for(;ae+h<J+Re;){ae+=h;const Ne=(ae-J)/Re,Ye=Or.number(Se.x,Ae.x,Ne),Ot=Or.number(Se.y,Ae.y,Ne);if(Ye>=0&&Ye<R&&Ot>=0&&Ot<R&&ae-V>=0&&ae+V<=K){const Bt=new ha(Ye,Ot,ot,be);Bt._round(),_&&!_g(d,Bt,C,_,y)||pe.push(Bt)}}J+=Re}return A||pe.length||T||(pe=yg(d,J/2,h,_,y,C,T,!0,R)),pe}hn("Anchor",ha);const pc=as;function wg(d,c,h,_){const y=[],C=d.image,T=C.pixelRatio,A=C.paddedRect.w-2*pc,R=C.paddedRect.h-2*pc,V=d.right-d.left,K=d.bottom-d.top,J=C.stretchX||[[0,A]],ae=C.stretchY||[[0,R]],pe=(Qt,mn)=>Qt+mn[1]-mn[0],be=J.reduce(pe,0),Se=ae.reduce(pe,0),Ae=A-be,Re=R-Se;let ot=0,Ne=be,Ye=0,Ot=Se,Bt=0,fn=Ae,vn=0,ln=Re;if(C.content&&_){const Qt=C.content;ot=_d(J,0,Qt[0]),Ye=_d(ae,0,Qt[1]),Ne=_d(J,Qt[0],Qt[2]),Ot=_d(ae,Qt[1],Qt[3]),Bt=Qt[0]-ot,vn=Qt[1]-Ye,fn=Qt[2]-Qt[0]-Ne,ln=Qt[3]-Qt[1]-Ot}const on=(Qt,mn,sn,Wt)=>{const In=gd(Qt.stretch-ot,Ne,V,d.left),yn=vd(Qt.fixed-Bt,fn,Qt.stretch,be),ri=gd(mn.stretch-Ye,Ot,K,d.top),Ci=vd(mn.fixed-vn,ln,mn.stretch,Se),Pi=gd(sn.stretch-ot,Ne,V,d.left),hr=vd(sn.fixed-Bt,fn,sn.stretch,be),gs=gd(Wt.stretch-Ye,Ot,K,d.top),Gr=vd(Wt.fixed-vn,ln,Wt.stretch,Se),sr=new g(In,ri),kr=new g(Pi,ri),Pr=new g(Pi,gs),Zr=new g(In,gs),Wr=new g(yn/T,Ci/T),mr=new g(hr/T,Gr/T),pr=c*Math.PI/180;if(pr){const Lr=Math.sin(pr),ls=Math.cos(pr),cs=[ls,-Lr,Lr,ls];sr._matMult(cs),kr._matMult(cs),Zr._matMult(cs),Pr._matMult(cs)}const Rr=Qt.stretch+Qt.fixed,Kr=mn.stretch+mn.fixed;return{tl:sr,tr:kr,bl:Zr,br:Pr,tex:{x:C.paddedRect.x+pc+Rr,y:C.paddedRect.y+pc+Kr,w:sn.stretch+sn.fixed-Rr,h:Wt.stretch+Wt.fixed-Kr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Wr,pixelOffsetBR:mr,minFontScaleX:fn/T/V,minFontScaleY:ln/T/K,isSDF:h}};if(_&&(C.stretchX||C.stretchY)){const Qt=xg(J,Ae,be),mn=xg(ae,Re,Se);for(let sn=0;sn<Qt.length-1;sn++){const Wt=Qt[sn],In=Qt[sn+1];for(let yn=0;yn<mn.length-1;yn++)y.push(on(Wt,mn[yn],In,mn[yn+1]))}}else y.push(on({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:R+1}));return y}function _d(d,c,h){let _=0;for(const y of d)_+=Math.max(c,Math.min(h,y[1]))-Math.max(c,Math.min(h,y[0]));return _}function xg(d,c,h){const _=[{fixed:-pc,stretch:0}];for(const[y,C]of d){const T=_[_.length-1];_.push({fixed:y-T.stretch,stretch:T.stretch}),_.push({fixed:y-T.stretch,stretch:T.stretch+(C-y)})}return _.push({fixed:c+pc,stretch:h}),_}function gd(d,c,h,_){return d/c*h+_}function vd(d,c,h,_){return d-c*h/_}class bd{constructor(c,h,_,y,C,T,A,R,V,K){if(this.boxStartIndex=c.length,V){let J=T.top,ae=T.bottom;const pe=T.collisionPadding;pe&&(J-=pe[1],ae+=pe[3]);let be=ae-J;be>0&&(be=Math.max(10,be),this.circleDiameter=be)}else{let J=T.top*A-R[0],ae=T.bottom*A+R[2],pe=T.left*A-R[3],be=T.right*A+R[1];const Se=T.collisionPadding;if(Se&&(pe-=Se[0]*A,J-=Se[1]*A,be+=Se[2]*A,ae+=Se[3]*A),K){const Ae=new g(pe,J),Re=new g(be,J),ot=new g(pe,ae),Ne=new g(be,ae),Ye=K*Math.PI/180;Ae._rotate(Ye),Re._rotate(Ye),ot._rotate(Ye),Ne._rotate(Ye),pe=Math.min(Ae.x,Re.x,ot.x,Ne.x),be=Math.max(Ae.x,Re.x,ot.x,Ne.x),J=Math.min(Ae.y,Re.y,ot.y,Ne.y),ae=Math.max(Ae.y,Re.y,ot.y,Ne.y)}c.emplaceBack(h.x,h.y,pe,J,be,ae,_,y,C)}this.boxEndIndex=c.length}}class Jk{constructor(c=[],h=Yk){if(this.data=c,this.length=this.data.length,this.compare=h,this.length>0)for(let _=(this.length>>1)-1;_>=0;_--)this._down(_)}push(c){this.data.push(c),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const c=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:h,compare:_}=this,y=h[c];for(;c>0;){const C=c-1>>1,T=h[C];if(_(y,T)>=0)break;h[c]=T,c=C}h[c]=y}_down(c){const{data:h,compare:_}=this,y=this.length>>1,C=h[c];for(;c<y;){let T=1+(c<<1),A=h[T];const R=T+1;if(R<this.length&&_(h[R],A)<0&&(T=R,A=h[R]),_(A,C)>=0)break;h[c]=A,c=T}h[c]=C}}function Yk(d,c){return d<c?-1:d>c?1:0}function Qk(d,c=1,h=!1){let _=1/0,y=1/0,C=-1/0,T=-1/0;const A=d[0];for(let pe=0;pe<A.length;pe++){const be=A[pe];(!pe||be.x<_)&&(_=be.x),(!pe||be.y<y)&&(y=be.y),(!pe||be.x>C)&&(C=be.x),(!pe||be.y>T)&&(T=be.y)}const R=Math.min(C-_,T-y);let V=R/2;const K=new Jk([],eC);if(R===0)return new g(_,y);for(let pe=_;pe<C;pe+=R)for(let be=y;be<T;be+=R)K.push(new _c(pe+V,be+V,V,d));let J=function(pe){let be=0,Se=0,Ae=0;const Re=pe[0];for(let ot=0,Ne=Re.length,Ye=Ne-1;ot<Ne;Ye=ot++){const Ot=Re[ot],Bt=Re[Ye],fn=Ot.x*Bt.y-Bt.x*Ot.y;Se+=(Ot.x+Bt.x)*fn,Ae+=(Ot.y+Bt.y)*fn,be+=3*fn}return new _c(Se/be,Ae/be,0,pe)}(d),ae=K.length;for(;K.length;){const pe=K.pop();(pe.d>J.d||!J.d)&&(J=pe,h&&console.log("found best %d after %d probes",Math.round(1e4*pe.d)/1e4,ae)),pe.max-J.d<=c||(V=pe.h/2,K.push(new _c(pe.p.x-V,pe.p.y-V,V,d)),K.push(new _c(pe.p.x+V,pe.p.y-V,V,d)),K.push(new _c(pe.p.x-V,pe.p.y+V,V,d)),K.push(new _c(pe.p.x+V,pe.p.y+V,V,d)),ae+=4)}return h&&(console.log(`num probes: ${ae}`),console.log(`best distance: ${J.d}`)),J.p}function eC(d,c){return c.max-d.max}function _c(d,c,h,_){this.p=new g(d,c),this.h=h,this.d=function(y,C){let T=!1,A=1/0;for(let R=0;R<C.length;R++){const V=C[R];for(let K=0,J=V.length,ae=J-1;K<J;ae=K++){const pe=V[K],be=V[ae];pe.y>y.y!=be.y>y.y&&y.x<(be.x-pe.x)*(y.y-pe.y)/(be.y-pe.y)+pe.x&&(T=!T),A=Math.min(A,s_(y,pe,be))}}return(T?1:-1)*Math.sqrt(A)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}var Ir;o.ap=void 0,(Ir=o.ap||(o.ap={}))[Ir.center=1]="center",Ir[Ir.left=2]="left",Ir[Ir.right=3]="right",Ir[Ir.top=4]="top",Ir[Ir.bottom=5]="bottom",Ir[Ir["top-left"]=6]="top-left",Ir[Ir["top-right"]=7]="top-right",Ir[Ir["bottom-left"]=8]="bottom-left",Ir[Ir["bottom-right"]=9]="bottom-right";const ma=7,_m=Number.POSITIVE_INFINITY;function kg(d,c){return c[1]!==_m?function(h,_,y){let C=0,T=0;switch(_=Math.abs(_),y=Math.abs(y),h){case"top-right":case"top-left":case"top":T=y-ma;break;case"bottom-right":case"bottom-left":case"bottom":T=-y+ma}switch(h){case"top-right":case"bottom-right":case"right":C=-_;break;case"top-left":case"bottom-left":case"left":C=_}return[C,T]}(d,c[0],c[1]):function(h,_){let y=0,C=0;_<0&&(_=0);const T=_/Math.SQRT2;switch(h){case"top-right":case"top-left":C=T-ma;break;case"bottom-right":case"bottom-left":C=-T+ma;break;case"bottom":C=-_+ma;break;case"top":C=_-ma}switch(h){case"top-right":case"bottom-right":y=-T;break;case"top-left":case"bottom-left":y=T;break;case"left":y=_;break;case"right":y=-_}return[y,C]}(d,c[0])}function Cg(d,c,h){var _;const y=d.layout,C=(_=y.get("text-variable-anchor-offset"))===null||_===void 0?void 0:_.evaluate(c,{},h);if(C){const A=C.values,R=[];for(let V=0;V<A.length;V+=2){const K=R[V]=A[V],J=A[V+1].map(ae=>ae*dr);K.startsWith("top")?J[1]-=ma:K.startsWith("bottom")&&(J[1]+=ma),R[V+1]=J}return new hs(R)}const T=y.get("text-variable-anchor");if(T){let A;A=d._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(c,{},h)*dr,_m]:y.get("text-offset").evaluate(c,{},h).map(V=>V*dr);const R=[];for(const V of T)R.push(V,kg(V,A));return new hs(R)}return null}function gm(d){switch(d){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function tC(d,c,h,_,y,C,T,A,R,V,K){let J=C.textMaxSize.evaluate(c,{});J===void 0&&(J=T);const ae=d.layers[0].layout,pe=ae.get("icon-offset").evaluate(c,{},K),be=Sg(h.horizontal),Se=T/24,Ae=d.tilePixelRatio*Se,Re=d.tilePixelRatio*J/24,ot=d.tilePixelRatio*A,Ne=d.tilePixelRatio*ae.get("symbol-spacing"),Ye=ae.get("text-padding")*d.tilePixelRatio,Ot=function(Wt,In,yn,ri=1){const Ci=Wt.get("icon-padding").evaluate(In,{},yn),Pi=Ci&&Ci.values;return[Pi[0]*ri,Pi[1]*ri,Pi[2]*ri,Pi[3]*ri]}(ae,c,K,d.tilePixelRatio),Bt=ae.get("text-max-angle")/180*Math.PI,fn=ae.get("text-rotation-alignment")!=="viewport"&&ae.get("symbol-placement")!=="point",vn=ae.get("icon-rotation-alignment")==="map"&&ae.get("symbol-placement")!=="point",ln=ae.get("symbol-placement"),on=Ne/2,Qt=ae.get("icon-text-fit");let mn;_&&Qt!=="none"&&(d.allowVerticalPlacement&&h.vertical&&(mn=K_(_,h.vertical,Qt,ae.get("icon-text-fit-padding"),pe,Se)),be&&(_=K_(_,be,Qt,ae.get("icon-text-fit-padding"),pe,Se)));const sn=(Wt,In)=>{In.x<0||In.x>=Ui||In.y<0||In.y>=Ui||function(yn,ri,Ci,Pi,hr,gs,Gr,sr,kr,Pr,Zr,Wr,mr,pr,Rr,Kr,Lr,ls,cs,_r,oi,Fr,$r,gr,Ns){const Ws=yn.addToLineVertexArray(ri,Ci);let Ks,Fo,Vs,Is,us=0,Bo=0,Ou=0,$g=0,Tm=-1,Sm=-1;const No={};let Ag=Vi("");if(yn.allowVerticalPlacement&&Pi.vertical){const Br=sr.layout.get("text-rotate").evaluate(oi,{},gr)+90;Vs=new bd(kr,ri,Pr,Zr,Wr,Pi.vertical,mr,pr,Rr,Br),Gr&&(Is=new bd(kr,ri,Pr,Zr,Wr,Gr,Lr,ls,Rr,Br))}if(hr){const Br=sr.layout.get("icon-rotate").evaluate(oi,{}),Ps=sr.layout.get("icon-text-fit")!=="none",Ja=wg(hr,Br,$r,Ps),Js=Gr?wg(Gr,Br,$r,Ps):void 0;Fo=new bd(kr,ri,Pr,Zr,Wr,hr,Lr,ls,!1,Br),us=4*Ja.length;const Ya=yn.iconSizeData;let ho=null;Ya.kind==="source"?(ho=[fo*sr.layout.get("icon-size").evaluate(oi,{})],ho[0]>fa&&j(`${yn.layerIds[0]}: Value for "icon-size" is >= ${$u}. Reduce your "icon-size".`)):Ya.kind==="composite"&&(ho=[fo*Fr.compositeIconSizes[0].evaluate(oi,{},gr),fo*Fr.compositeIconSizes[1].evaluate(oi,{},gr)],(ho[0]>fa||ho[1]>fa)&&j(`${yn.layerIds[0]}: Value for "icon-size" is >= ${$u}. Reduce your "icon-size".`)),yn.addSymbols(yn.icon,Ja,ho,_r,cs,oi,o.ah.none,ri,Ws.lineStartIndex,Ws.lineLength,-1,gr),Tm=yn.icon.placedSymbolArray.length-1,Js&&(Bo=4*Js.length,yn.addSymbols(yn.icon,Js,ho,_r,cs,oi,o.ah.vertical,ri,Ws.lineStartIndex,Ws.lineLength,-1,gr),Sm=yn.icon.placedSymbolArray.length-1)}const Mg=Object.keys(Pi.horizontal);for(const Br of Mg){const Ps=Pi.horizontal[Br];if(!Ks){Ag=Vi(Ps.text);const Js=sr.layout.get("text-rotate").evaluate(oi,{},gr);Ks=new bd(kr,ri,Pr,Zr,Wr,Ps,mr,pr,Rr,Js)}const Ja=Ps.positionedLines.length===1;if(Ou+=Tg(yn,ri,Ps,gs,sr,Rr,oi,Kr,Ws,Pi.vertical?o.ah.horizontal:o.ah.horizontalOnly,Ja?Mg:[Br],No,Tm,Fr,gr),Ja)break}Pi.vertical&&($g+=Tg(yn,ri,Pi.vertical,gs,sr,Rr,oi,Kr,Ws,o.ah.vertical,["vertical"],No,Sm,Fr,gr));const rC=Ks?Ks.boxStartIndex:yn.collisionBoxArray.length,sC=Ks?Ks.boxEndIndex:yn.collisionBoxArray.length,oC=Vs?Vs.boxStartIndex:yn.collisionBoxArray.length,aC=Vs?Vs.boxEndIndex:yn.collisionBoxArray.length,lC=Fo?Fo.boxStartIndex:yn.collisionBoxArray.length,cC=Fo?Fo.boxEndIndex:yn.collisionBoxArray.length,uC=Is?Is.boxStartIndex:yn.collisionBoxArray.length,fC=Is?Is.boxEndIndex:yn.collisionBoxArray.length;let Xs=-1;const wd=(Br,Ps)=>Br&&Br.circleDiameter?Math.max(Br.circleDiameter,Ps):Ps;Xs=wd(Ks,Xs),Xs=wd(Vs,Xs),Xs=wd(Fo,Xs),Xs=wd(Is,Xs);const Dg=Xs>-1?1:0;Dg&&(Xs*=Ns/dr),yn.glyphOffsetArray.length>=mc.MAX_GLYPHS&&j("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),oi.sortKey!==void 0&&yn.addToSortKeyRanges(yn.symbolInstances.length,oi.sortKey);const dC=Cg(sr,oi,gr),[hC,mC]=function(Br,Ps){const Ja=Br.length,Js=Ps==null?void 0:Ps.values;if((Js==null?void 0:Js.length)>0)for(let Ya=0;Ya<Js.length;Ya+=2){const ho=Js[Ya+1];Br.emplaceBack(o.ap[Js[Ya]],ho[0],ho[1])}return[Ja,Br.length]}(yn.textAnchorOffsets,dC);yn.symbolInstances.emplaceBack(ri.x,ri.y,No.right>=0?No.right:-1,No.center>=0?No.center:-1,No.left>=0?No.left:-1,No.vertical||-1,Tm,Sm,Ag,rC,sC,oC,aC,lC,cC,uC,fC,Pr,Ou,$g,us,Bo,Dg,0,mr,Xs,hC,mC)}(d,In,Wt,h,_,y,mn,d.layers[0],d.collisionBoxArray,c.index,c.sourceLayerIndex,d.index,Ae,[Ye,Ye,Ye,Ye],fn,R,ot,Ot,vn,pe,c,C,V,K,T)};if(ln==="line")for(const Wt of pg(c.geometry,0,0,Ui,Ui)){const In=Xk(Wt,Ne,Bt,h.vertical||be,_,24,Re,d.overscaling,Ui);for(const yn of In)be&&nC(d,be.text,on,yn)||sn(Wt,yn)}else if(ln==="line-center"){for(const Wt of c.geometry)if(Wt.length>1){const In=Kk(Wt,Bt,h.vertical||be,_,24,Re);In&&sn(Wt,In)}}else if(c.type==="Polygon")for(const Wt of Kh(c.geometry,0)){const In=Qk(Wt,16);sn(Wt[0],new ha(In.x,In.y,0))}else if(c.type==="LineString")for(const Wt of c.geometry)sn(Wt,new ha(Wt[0].x,Wt[0].y,0));else if(c.type==="Point")for(const Wt of c.geometry)for(const In of Wt)sn([In],new ha(In.x,In.y,0))}function Tg(d,c,h,_,y,C,T,A,R,V,K,J,ae,pe,be){const Se=function(ot,Ne,Ye,Ot,Bt,fn,vn,ln){const on=Ot.layout.get("text-rotate").evaluate(fn,{})*Math.PI/180,Qt=[];for(const mn of Ne.positionedLines)for(const sn of mn.positionedGlyphs){if(!sn.rect)continue;const Wt=sn.rect||{};let In=j_+1,yn=!0,ri=1,Ci=0;const Pi=(Bt||ln)&&sn.vertical,hr=sn.metrics.advance*sn.scale/2;if(ln&&Ne.verticalizable&&(Ci=mn.lineOffset/2-(sn.imageName?-(dr-sn.metrics.width*sn.scale)/2:(sn.scale-1)*dr)),sn.imageName){const _r=vn[sn.imageName];yn=_r.sdf,ri=_r.pixelRatio,In=as/ri}const gs=Bt?[sn.x+hr,sn.y]:[0,0];let Gr=Bt?[0,0]:[sn.x+hr+Ye[0],sn.y+Ye[1]-Ci],sr=[0,0];Pi&&(sr=Gr,Gr=[0,0]);const kr=sn.metrics.isDoubleResolution?2:1,Pr=(sn.metrics.left-In)*sn.scale-hr+Gr[0],Zr=(-sn.metrics.top-In)*sn.scale+Gr[1],Wr=Pr+Wt.w/kr*sn.scale/ri,mr=Zr+Wt.h/kr*sn.scale/ri,pr=new g(Pr,Zr),Rr=new g(Wr,Zr),Kr=new g(Pr,mr),Lr=new g(Wr,mr);if(Pi){const _r=new g(-hr,hr-Iu),oi=-Math.PI/2,Fr=dr/2-hr,$r=new g(5-Iu-Fr,-(sn.imageName?Fr:0)),gr=new g(...sr);pr._rotateAround(oi,_r)._add($r)._add(gr),Rr._rotateAround(oi,_r)._add($r)._add(gr),Kr._rotateAround(oi,_r)._add($r)._add(gr),Lr._rotateAround(oi,_r)._add($r)._add(gr)}if(on){const _r=Math.sin(on),oi=Math.cos(on),Fr=[oi,-_r,_r,oi];pr._matMult(Fr),Rr._matMult(Fr),Kr._matMult(Fr),Lr._matMult(Fr)}const ls=new g(0,0),cs=new g(0,0);Qt.push({tl:pr,tr:Rr,bl:Kr,br:Lr,tex:Wt,writingMode:Ne.writingMode,glyphOffset:gs,sectionIndex:sn.sectionIndex,isSDF:yn,pixelOffsetTL:ls,pixelOffsetBR:cs,minFontScaleX:0,minFontScaleY:0})}return Qt}(0,h,A,y,C,T,_,d.allowVerticalPlacement),Ae=d.textSizeData;let Re=null;Ae.kind==="source"?(Re=[fo*y.layout.get("text-size").evaluate(T,{})],Re[0]>fa&&j(`${d.layerIds[0]}: Value for "text-size" is >= ${$u}. Reduce your "text-size".`)):Ae.kind==="composite"&&(Re=[fo*pe.compositeTextSizes[0].evaluate(T,{},be),fo*pe.compositeTextSizes[1].evaluate(T,{},be)],(Re[0]>fa||Re[1]>fa)&&j(`${d.layerIds[0]}: Value for "text-size" is >= ${$u}. Reduce your "text-size".`)),d.addSymbols(d.text,Se,Re,A,C,T,V,c,R.lineStartIndex,R.lineLength,ae,be);for(const ot of K)J[ot]=d.text.placedSymbolArray.length-1;return 4*Se.length}function Sg(d){for(const c in d)return d[c];return null}function nC(d,c,h,_){const y=d.compareText;if(c in y){const C=y[c];for(let T=C.length-1;T>=0;T--)if(_.dist(C[T])<h)return!0}else y[c]=[];return y[c].push(_),!1}const Eg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class vm{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,_]=new Uint8Array(c,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=_>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const C=Eg[15&_];if(!C)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(c,2,1),[A]=new Uint32Array(c,4,1);return new vm(A,T,C,c)}constructor(c,h=64,_=Float64Array,y){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=_,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const C=Eg.indexOf(this.ArrayType),T=2*c*this.ArrayType.BYTES_PER_ELEMENT,A=c*this.IndexArrayType.BYTES_PER_ELEMENT,R=(8-A%8)%8;if(C<0)throw new Error(`Unexpected typed array class: ${_}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+A+R,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+T+A+R),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+A+R,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+C]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=c)}add(c,h){const _=this._pos>>1;return this.ids[_]=_,this.coords[this._pos++]=c,this.coords[this._pos++]=h,_}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return bm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,h,_,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:C,coords:T,nodeSize:A}=this,R=[0,C.length-1,0],V=[];for(;R.length;){const K=R.pop()||0,J=R.pop()||0,ae=R.pop()||0;if(J-ae<=A){for(let Ae=ae;Ae<=J;Ae++){const Re=T[2*Ae],ot=T[2*Ae+1];Re>=c&&Re<=_&&ot>=h&&ot<=y&&V.push(C[Ae])}continue}const pe=ae+J>>1,be=T[2*pe],Se=T[2*pe+1];be>=c&&be<=_&&Se>=h&&Se<=y&&V.push(C[pe]),(K===0?c<=be:h<=Se)&&(R.push(ae),R.push(pe-1),R.push(1-K)),(K===0?_>=be:y>=Se)&&(R.push(pe+1),R.push(J),R.push(1-K))}return V}within(c,h,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:C,nodeSize:T}=this,A=[0,y.length-1,0],R=[],V=_*_;for(;A.length;){const K=A.pop()||0,J=A.pop()||0,ae=A.pop()||0;if(J-ae<=T){for(let Ae=ae;Ae<=J;Ae++)Pg(C[2*Ae],C[2*Ae+1],c,h)<=V&&R.push(y[Ae]);continue}const pe=ae+J>>1,be=C[2*pe],Se=C[2*pe+1];Pg(be,Se,c,h)<=V&&R.push(y[pe]),(K===0?c-_<=be:h-_<=Se)&&(A.push(ae),A.push(pe-1),A.push(1-K)),(K===0?c+_>=be:h+_>=Se)&&(A.push(pe+1),A.push(J),A.push(1-K))}return R}}function bm(d,c,h,_,y,C){if(y-_<=h)return;const T=_+y>>1;Ig(d,c,T,_,y,C),bm(d,c,h,_,T-1,1-C),bm(d,c,h,T+1,y,1-C)}function Ig(d,c,h,_,y,C){for(;y>_;){if(y-_>600){const V=y-_+1,K=h-_+1,J=Math.log(V),ae=.5*Math.exp(2*J/3),pe=.5*Math.sqrt(J*ae*(V-ae)/V)*(K-V/2<0?-1:1);Ig(d,c,h,Math.max(_,Math.floor(h-K*ae/V+pe)),Math.min(y,Math.floor(h+(V-K)*ae/V+pe)),C)}const T=c[2*h+C];let A=_,R=y;for(Mu(d,c,_,h),c[2*y+C]>T&&Mu(d,c,_,y);A<R;){for(Mu(d,c,A,R),A++,R--;c[2*A+C]<T;)A++;for(;c[2*R+C]>T;)R--}c[2*_+C]===T?Mu(d,c,_,R):(R++,Mu(d,c,R,y)),R<=h&&(_=R+1),h<=R&&(y=R-1)}}function Mu(d,c,h,_){ym(d,h,_),ym(c,2*h,2*_),ym(c,2*h+1,2*_+1)}function ym(d,c,h){const _=d[c];d[c]=d[h],d[h]=_}function Pg(d,c,h,_){const y=d-h,C=c-_;return y*y+C*C}var wm;o.bd=void 0,(wm=o.bd||(o.bd={})).create="create",wm.load="load",wm.fullLoad="fullLoad";let yd=null,Du=[];const xm=1e3/60,km="loadTime",Cm="fullLoadTime",iC={mark(d){performance.mark(d)},frame(d){const c=d;yd!=null&&Du.push(c-yd),yd=c},clearMetrics(){yd=null,Du=[],performance.clearMeasures(km),performance.clearMeasures(Cm);for(const d in o.bd)performance.clearMarks(o.bd[d])},getPerformanceMetrics(){performance.measure(km,o.bd.create,o.bd.load),performance.measure(Cm,o.bd.create,o.bd.fullLoad);const d=performance.getEntriesByName(km)[0].duration,c=performance.getEntriesByName(Cm)[0].duration,h=Du.length,_=1/(Du.reduce((C,T)=>C+T,0)/h/1e3),y=Du.filter(C=>C>xm).reduce((C,T)=>C+(T-xm)/xm,0);return{loadTime:d,fullLoadTime:c,fps:_,percentDroppedFrames:y/(h+y)*100,totalFrames:h}}};o.$=nn,o.A=lc,o.B=function(d){if(We==null){const c=d.navigator?d.navigator.userAgent:null;We=!!d.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return We},o.C=class{constructor(d,c){this.target=d,this.mapId=c,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Zk(()=>this.process()),this.subscription=function(h,_,y,C){return h.addEventListener(_,y,!1),{unsubscribe:()=>{h.removeEventListener(_,y,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=ve(self)?d:window}registerMessageHandler(d,c){this.messageHandlers[d]=c}sendAsync(d,c){return new Promise((h,_)=>{const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[y]={resolve:h,reject:_},c&&c.signal.addEventListener("abort",()=>{delete this.resolveRejects[y];const A={id:y,type:"<cancel>",origin:location.origin,targetMapId:d.targetMapId,sourceMapId:this.mapId};this.target.postMessage(A)},{once:!0});const C=[],T=Object.assign(Object.assign({},d),{id:y,sourceMapId:this.mapId,origin:location.origin,data:sa(d.data,C)});this.target.postMessage(T,{transfer:C})})}receive(d){const c=d.data,h=c.id;if(!(c.origin!=="file://"&&location.origin!=="file://"&&c.origin!==location.origin||c.targetMapId&&this.mapId!==c.targetMapId)){if(c.type==="<cancel>"){delete this.tasks[h];const _=this.abortControllers[h];return delete this.abortControllers[h],void(_&&_.abort())}if(ve(self)||c.mustQueue)return this.tasks[h]=c,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,c)}}process(){if(this.taskQueue.length===0)return;const d=this.taskQueue.shift(),c=this.tasks[d];delete this.tasks[d],this.taskQueue.length>0&&this.invoker.trigger(),c&&this.processTask(d,c)}processTask(d,c){return a(this,void 0,void 0,function*(){if(c.type==="<response>"){const y=this.resolveRejects[d];return delete this.resolveRejects[d],y?void(c.error?y.reject(oa(c.error)):y.resolve(oa(c.data))):void 0}if(!this.messageHandlers[c.type])return void this.completeTask(d,new Error(`Could not find a registered handler for ${c.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=oa(c.data),_=new AbortController;this.abortControllers[d]=_;try{const y=yield this.messageHandlers[c.type](c.sourceMapId,h,_);this.completeTask(d,null,y)}catch(y){this.completeTask(d,y)}})}completeTask(d,c,h){const _=[];delete this.abortControllers[d];const y={id:d,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:c?sa(c):null,data:sa(h,_)};this.target.postMessage(y,{transfer:_})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.D=xn,o.E=En,o.F=function(){var d=new lc(16);return lc!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d},o.G=Rt,o.H=function(d,c,h){var _,y,C,T,A,R,V,K,J,ae,pe,be,Se=h[0],Ae=h[1],Re=h[2];return c===d?(d[12]=c[0]*Se+c[4]*Ae+c[8]*Re+c[12],d[13]=c[1]*Se+c[5]*Ae+c[9]*Re+c[13],d[14]=c[2]*Se+c[6]*Ae+c[10]*Re+c[14],d[15]=c[3]*Se+c[7]*Ae+c[11]*Re+c[15]):(y=c[1],C=c[2],T=c[3],A=c[4],R=c[5],V=c[6],K=c[7],J=c[8],ae=c[9],pe=c[10],be=c[11],d[0]=_=c[0],d[1]=y,d[2]=C,d[3]=T,d[4]=A,d[5]=R,d[6]=V,d[7]=K,d[8]=J,d[9]=ae,d[10]=pe,d[11]=be,d[12]=_*Se+A*Ae+J*Re+c[12],d[13]=y*Se+R*Ae+ae*Re+c[13],d[14]=C*Se+V*Ae+pe*Re+c[14],d[15]=T*Se+K*Ae+be*Re+c[15]),d},o.I=sm,o.J=function(d,c,h){var _=h[0],y=h[1],C=h[2];return d[0]=c[0]*_,d[1]=c[1]*_,d[2]=c[2]*_,d[3]=c[3]*_,d[4]=c[4]*y,d[5]=c[5]*y,d[6]=c[6]*y,d[7]=c[7]*y,d[8]=c[8]*C,d[9]=c[9]*C,d[10]=c[10]*C,d[11]=c[11]*C,d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15],d},o.K=c_,o.L=function(d,c){const h={};for(let _=0;_<c.length;_++){const y=c[_];y in d&&(h[y]=d[y])}return h},o.M=da,o.N=rg,o.O=sg,o.P=g,o.Q=Es,o.R=Ss,o.S=F,o.T=iu,o.U=L,o.V=St,o.W=Ui,o.X=Yi,o.Y=pd,o.Z=class extends ou{},o._=a,o.a=Be,o.a$=function(d,c,h){return d[0]=c[0]*h[0],d[1]=c[1]*h[1],d[2]=c[2]*h[2],d[3]=c[3]*h[3],d},o.a0=pm,o.a1=$t,o.a2=d=>{const c=window.document.createElement("video");return c.muted=!0,new Promise(h=>{c.onloadstart=()=>{h(c)};for(const _ of d){const y=window.document.createElement("source");yt(_)||(c.crossOrigin="Anonymous"),y.src=_,c.appendChild(y)}})},o.a3=function(){return _e++},o.a4=x,o.a5=mc,o.a6=Vl,o.a7=Ro,o.a8=Ei,o.a9=fg,o.aA=he,o.aB=function(d,c){if(!d)return[{command:"setStyle",args:[c]}];let h=[];try{if(!_n(d.version,c.version))return[{command:"setStyle",args:[c]}];_n(d.center,c.center)||h.push({command:"setCenter",args:[c.center]}),_n(d.zoom,c.zoom)||h.push({command:"setZoom",args:[c.zoom]}),_n(d.bearing,c.bearing)||h.push({command:"setBearing",args:[c.bearing]}),_n(d.pitch,c.pitch)||h.push({command:"setPitch",args:[c.pitch]}),_n(d.sprite,c.sprite)||h.push({command:"setSprite",args:[c.sprite]}),_n(d.glyphs,c.glyphs)||h.push({command:"setGlyphs",args:[c.glyphs]}),_n(d.transition,c.transition)||h.push({command:"setTransition",args:[c.transition]}),_n(d.light,c.light)||h.push({command:"setLight",args:[c.light]}),_n(d.terrain,c.terrain)||h.push({command:"setTerrain",args:[c.terrain]}),_n(d.sky,c.sky)||h.push({command:"setSky",args:[c.sky]});const _={},y=[];(function(T,A,R,V){let K;for(K in A=A||{},T=T||{})Object.prototype.hasOwnProperty.call(T,K)&&(Object.prototype.hasOwnProperty.call(A,K)||Kt(K,R,V));for(K in A)Object.prototype.hasOwnProperty.call(A,K)&&(Object.prototype.hasOwnProperty.call(T,K)?_n(T[K],A[K])||(T[K].type==="geojson"&&A[K].type==="geojson"&&Pn(T,A,K)?mt(R,{command:"setGeoJSONSourceData",args:[K,A[K].data]}):en(K,A,R,V)):Zt(K,A,R))})(d.sources,c.sources,y,_);const C=[];d.layers&&d.layers.forEach(T=>{"source"in T&&_[T.source]?h.push({command:"removeLayer",args:[T.id]}):C.push(T)}),h=h.concat(y),function(T,A,R){A=A||[];const V=(T=T||[]).map(yi),K=A.map(yi),J=T.reduce(wt,{}),ae=A.reduce(wt,{}),pe=V.slice(),be=Object.create(null);let Se,Ae,Re,ot,Ne;for(let Ye=0,Ot=0;Ye<V.length;Ye++)Se=V[Ye],Object.prototype.hasOwnProperty.call(ae,Se)?Ot++:(mt(R,{command:"removeLayer",args:[Se]}),pe.splice(pe.indexOf(Se,Ot),1));for(let Ye=0,Ot=0;Ye<K.length;Ye++)Se=K[K.length-1-Ye],pe[pe.length-1-Ye]!==Se&&(Object.prototype.hasOwnProperty.call(J,Se)?(mt(R,{command:"removeLayer",args:[Se]}),pe.splice(pe.lastIndexOf(Se,pe.length-Ot),1)):Ot++,ot=pe[pe.length-Ye],mt(R,{command:"addLayer",args:[ae[Se],ot]}),pe.splice(pe.length-Ye,0,Se),be[Se]=!0);for(let Ye=0;Ye<K.length;Ye++)if(Se=K[Ye],Ae=J[Se],Re=ae[Se],!be[Se]&&!_n(Ae,Re))if(_n(Ae.source,Re.source)&&_n(Ae["source-layer"],Re["source-layer"])&&_n(Ae.type,Re.type)){for(Ne in Vn(Ae.layout,Re.layout,R,Se,null,"setLayoutProperty"),Vn(Ae.paint,Re.paint,R,Se,null,"setPaintProperty"),_n(Ae.filter,Re.filter)||mt(R,{command:"setFilter",args:[Se,Re.filter]}),_n(Ae.minzoom,Re.minzoom)&&_n(Ae.maxzoom,Re.maxzoom)||mt(R,{command:"setLayerZoomRange",args:[Se,Re.minzoom,Re.maxzoom]}),Ae)Object.prototype.hasOwnProperty.call(Ae,Ne)&&Ne!=="layout"&&Ne!=="paint"&&Ne!=="filter"&&Ne!=="metadata"&&Ne!=="minzoom"&&Ne!=="maxzoom"&&(Ne.indexOf("paint.")===0?Vn(Ae[Ne],Re[Ne],R,Se,Ne.slice(6),"setPaintProperty"):_n(Ae[Ne],Re[Ne])||mt(R,{command:"setLayerProperty",args:[Se,Ne,Re[Ne]]}));for(Ne in Re)Object.prototype.hasOwnProperty.call(Re,Ne)&&!Object.prototype.hasOwnProperty.call(Ae,Ne)&&Ne!=="layout"&&Ne!=="paint"&&Ne!=="filter"&&Ne!=="metadata"&&Ne!=="minzoom"&&Ne!=="maxzoom"&&(Ne.indexOf("paint.")===0?Vn(Ae[Ne],Re[Ne],R,Se,Ne.slice(6),"setPaintProperty"):_n(Ae[Ne],Re[Ne])||mt(R,{command:"setLayerProperty",args:[Se,Ne,Re[Ne]]}))}else mt(R,{command:"removeLayer",args:[Se]}),ot=pe[pe.lastIndexOf(Se)+1],mt(R,{command:"addLayer",args:[Re,ot]})}(C,c.layers,h)}catch(_){console.warn("Unable to compute style diff:",_),h=[{command:"setStyle",args:[c]}]}return h},o.aC=function(d){const c=[],h=d.id;return h===void 0&&c.push({message:`layers.${h}: missing required property "id"`}),d.render===void 0&&c.push({message:`layers.${h}: missing required method "render"`}),d.renderingMode&&d.renderingMode!=="2d"&&d.renderingMode!=="3d"&&c.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),c},o.aD=function d(c,h){if(Array.isArray(c)){if(!Array.isArray(h)||c.length!==h.length)return!1;for(let _=0;_<c.length;_++)if(!d(c[_],h[_]))return!1;return!0}if(typeof c=="object"&&c!==null&&h!==null){if(typeof h!="object"||Object.keys(c).length!==Object.keys(h).length)return!1;for(const _ in c)if(!d(c[_],h[_]))return!1;return!0}return c===h},o.aE=re,o.aF=de,o.aG=class extends fr{constructor(d,c){super(d,c),this.current=0}set(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))}},o.aH=os,o.aI=class extends fr{constructor(d,c){super(d,c),this.current=Ka}set(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(let c=1;c<16;c++)if(d[c]!==this.current[c]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}}},o.aJ=Fs,o.aK=class extends fr{constructor(d,c){super(d,c),this.current=[0,0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))}},o.aL=class extends fr{constructor(d,c){super(d,c),this.current=[0,0]}set(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))}},o.aM=lo,o.aN=function(d,c,h,_,y,C,T){var A=1/(c-h),R=1/(_-y),V=1/(C-T);return d[0]=-2*A,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*R,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*V,d[11]=0,d[12]=(c+h)*A,d[13]=(y+_)*R,d[14]=(T+C)*V,d[15]=1,d},o.aO=mi,o.aP=Ex,o.aQ=class extends ec{},o.aR=wk,o.aS=class extends tc{},o.aT=function(d){return d<=1?1:Math.pow(2,Math.ceil(Math.log(d)/Math.LN2))},o.aU=m_,o.aV=te,o.aW=class extends du{},o.aX=Tt,o.aY=function(d,c){return d[0]===c[0]&&d[1]===c[1]&&d[2]===c[2]&&d[3]===c[3]&&d[4]===c[4]&&d[5]===c[5]&&d[6]===c[6]&&d[7]===c[7]&&d[8]===c[8]&&d[9]===c[9]&&d[10]===c[10]&&d[11]===c[11]&&d[12]===c[12]&&d[13]===c[13]&&d[14]===c[14]&&d[15]===c[15]},o.aZ=function(d,c){var h=d[0],_=d[1],y=d[2],C=d[3],T=d[4],A=d[5],R=d[6],V=d[7],K=d[8],J=d[9],ae=d[10],pe=d[11],be=d[12],Se=d[13],Ae=d[14],Re=d[15],ot=c[0],Ne=c[1],Ye=c[2],Ot=c[3],Bt=c[4],fn=c[5],vn=c[6],ln=c[7],on=c[8],Qt=c[9],mn=c[10],sn=c[11],Wt=c[12],In=c[13],yn=c[14],ri=c[15];return Math.abs(h-ot)<=Hr*Math.max(1,Math.abs(h),Math.abs(ot))&&Math.abs(_-Ne)<=Hr*Math.max(1,Math.abs(_),Math.abs(Ne))&&Math.abs(y-Ye)<=Hr*Math.max(1,Math.abs(y),Math.abs(Ye))&&Math.abs(C-Ot)<=Hr*Math.max(1,Math.abs(C),Math.abs(Ot))&&Math.abs(T-Bt)<=Hr*Math.max(1,Math.abs(T),Math.abs(Bt))&&Math.abs(A-fn)<=Hr*Math.max(1,Math.abs(A),Math.abs(fn))&&Math.abs(R-vn)<=Hr*Math.max(1,Math.abs(R),Math.abs(vn))&&Math.abs(V-ln)<=Hr*Math.max(1,Math.abs(V),Math.abs(ln))&&Math.abs(K-on)<=Hr*Math.max(1,Math.abs(K),Math.abs(on))&&Math.abs(J-Qt)<=Hr*Math.max(1,Math.abs(J),Math.abs(Qt))&&Math.abs(ae-mn)<=Hr*Math.max(1,Math.abs(ae),Math.abs(mn))&&Math.abs(pe-sn)<=Hr*Math.max(1,Math.abs(pe),Math.abs(sn))&&Math.abs(be-Wt)<=Hr*Math.max(1,Math.abs(be),Math.abs(Wt))&&Math.abs(Se-In)<=Hr*Math.max(1,Math.abs(Se),Math.abs(In))&&Math.abs(Ae-yn)<=Hr*Math.max(1,Math.abs(Ae),Math.abs(yn))&&Math.abs(Re-ri)<=Hr*Math.max(1,Math.abs(Re),Math.abs(ri))},o.a_=function(d,c){return d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[4]=c[4],d[5]=c[5],d[6]=c[6],d[7]=c[7],d[8]=c[8],d[9]=c[9],d[10]=c[10],d[11]=c[11],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15],d},o.aa=function(d){const c={};if(d.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,_,y,C)=>{const T=y||C;return c[_]=!T||T.toLowerCase(),""}),c["max-age"]){const h=parseInt(c["max-age"],10);isNaN(h)?delete c["max-age"]:c["max-age"]=h}return c},o.ab=function(d,c){const h=[];for(const _ in d)_ in c||h.push(_);return h},o.ac=se,o.ad=function(d,c,h){var _=Math.sin(h),y=Math.cos(h),C=c[0],T=c[1],A=c[2],R=c[3],V=c[4],K=c[5],J=c[6],ae=c[7];return c!==d&&(d[8]=c[8],d[9]=c[9],d[10]=c[10],d[11]=c[11],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15]),d[0]=C*y+V*_,d[1]=T*y+K*_,d[2]=A*y+J*_,d[3]=R*y+ae*_,d[4]=V*y-C*_,d[5]=K*y-T*_,d[6]=J*y-A*_,d[7]=ae*y-R*_,d},o.ae=function(d){var c=new lc(16);return c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],c[9]=d[9],c[10]=d[10],c[11]=d[11],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15],c},o.af=rd,o.ag=function(d,c){let h=0,_=0;if(d.kind==="constant")_=d.layoutSize;else if(d.kind!=="source"){const{interpolationType:y,minZoom:C,maxZoom:T}=d,A=y?se(Er.interpolationFactor(y,c,C,T),0,1):0;d.kind==="camera"?_=Or.number(d.minSize,d.maxSize,A):h=A}return{uSizeT:h,uSize:_}},o.ai=function(d,{uSize:c,uSizeT:h},{lowerSize:_,upperSize:y}){return d.kind==="source"?_/fo:d.kind==="composite"?Or.number(_/fo,y/fo,h):c},o.aj=cm,o.ak=function(d,c,h,_){const y=c.y-d.y,C=c.x-d.x,T=_.y-h.y,A=_.x-h.x,R=T*C-A*y;if(R===0)return null;const V=(A*(d.y-h.y)-T*(d.x-h.x))/R;return new g(d.x+V*C,d.y+V*y)},o.al=pg,o.am=mu,o.an=jh,o.ao=dr,o.aq=lm,o.ar=function(d,c){var h=c[0],_=c[1],y=c[2],C=c[3],T=c[4],A=c[5],R=c[6],V=c[7],K=c[8],J=c[9],ae=c[10],pe=c[11],be=c[12],Se=c[13],Ae=c[14],Re=c[15],ot=h*A-_*T,Ne=h*R-y*T,Ye=h*V-C*T,Ot=_*R-y*A,Bt=_*V-C*A,fn=y*V-C*R,vn=K*Se-J*be,ln=K*Ae-ae*be,on=K*Re-pe*be,Qt=J*Ae-ae*Se,mn=J*Re-pe*Se,sn=ae*Re-pe*Ae,Wt=ot*sn-Ne*mn+Ye*Qt+Ot*on-Bt*ln+fn*vn;return Wt?(d[0]=(A*sn-R*mn+V*Qt)*(Wt=1/Wt),d[1]=(y*mn-_*sn-C*Qt)*Wt,d[2]=(Se*fn-Ae*Bt+Re*Ot)*Wt,d[3]=(ae*Bt-J*fn-pe*Ot)*Wt,d[4]=(R*on-T*sn-V*ln)*Wt,d[5]=(h*sn-y*on+C*ln)*Wt,d[6]=(Ae*Ye-be*fn-Re*Ne)*Wt,d[7]=(K*fn-ae*Ye+pe*Ne)*Wt,d[8]=(T*mn-A*on+V*vn)*Wt,d[9]=(_*on-h*mn-C*vn)*Wt,d[10]=(be*Bt-Se*Ye+Re*ot)*Wt,d[11]=(J*Ye-K*Bt-pe*ot)*Wt,d[12]=(A*ln-T*Qt-R*vn)*Wt,d[13]=(h*Qt-_*ln+y*vn)*Wt,d[14]=(Se*Ne-be*Ot-Ae*ot)*Wt,d[15]=(K*Ot-J*Ne+ae*ot)*Wt,d):null},o.as=gm,o.at=am,o.au=vm,o.av=function(){const d={},c=Oe.$version;for(const h in Oe.$root){const _=Oe.$root[h];if(_.required){let y=null;y=h==="version"?c:_.type==="array"?[]:{},y!=null&&(d[h]=y)}}return d},o.aw=qf,o.ax=et,o.ay=function(d){d=d.slice();const c=Object.create(null);for(let h=0;h<d.length;h++)c[d[h].id]=d[h];for(let h=0;h<d.length;h++)"ref"in d[h]&&(d[h]=qn(d[h],c[d[h].ref]));return d},o.az=function(d){if(d.type==="custom")return new Gk(d);switch(d.type){case"background":return new Uk(d);case"circle":return new Ix(d);case"fill":return new Wx(d);case"fill-extrusion":return new ck(d);case"heatmap":return new $x(d);case"hillshade":return new Mx(d);case"line":return new gk(d);case"raster":return new Hk(d);case"symbol":return new md(d)}},o.b=pt,o.b0=function(d,c){return d[0]*c[0]+d[1]*c[1]+d[2]*c[2]+d[3]*c[3]},o.b1=ee,o.b2=lg,o.b3=og,o.b4=function(d,c,h,_,y){var C,T=1/Math.tan(c/2);return d[0]=T/h,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=T,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,y!=null&&y!==1/0?(d[10]=(y+_)*(C=1/(_-y)),d[14]=2*y*_*C):(d[10]=-1,d[14]=-2*_),d},o.b5=function(d,c,h){var _=Math.sin(h),y=Math.cos(h),C=c[4],T=c[5],A=c[6],R=c[7],V=c[8],K=c[9],J=c[10],ae=c[11];return c!==d&&(d[0]=c[0],d[1]=c[1],d[2]=c[2],d[3]=c[3],d[12]=c[12],d[13]=c[13],d[14]=c[14],d[15]=c[15]),d[4]=C*y+V*_,d[5]=T*y+K*_,d[6]=A*y+J*_,d[7]=R*y+ae*_,d[8]=V*y-C*_,d[9]=K*y-T*_,d[10]=J*y-A*_,d[11]=ae*y-R*_,d},o.b6=U,o.b7=ne,o.b8=function(d){return d*Math.PI/180},o.b9=function(d,c){return d[0]=c[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=c[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=c[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},o.bA=ao,o.ba=class extends Gs{},o.bb=hm,o.bc=iC,o.be=qt,o.bf=function(d,c){Be.REGISTERED_PROTOCOLS[d]=c},o.bg=function(d){delete Be.REGISTERED_PROTOCOLS[d]},o.bh=function(d,c){const h={};for(let y=0;y<d.length;y++){const C=c&&c[d[y].id]||Lh(d[y]);c&&(c[d[y].id]=C);let T=h[C];T||(T=h[C]=[]),T.push(d[y])}const _=[];for(const y in h)_.push(h[y]);return _},o.bi=hn,o.bj=ug,o.bk=dg,o.bl=q_,o.bm=function(d){d.bucket.createArrays(),d.bucket.tilePixelRatio=Ui/(512*d.bucket.overscaling),d.bucket.compareText={},d.bucket.iconsNeedLinear=!1;const c=d.bucket.layers[0],h=c.layout,_=c._unevaluatedLayout._values,y={layoutIconSize:_["icon-size"].possiblyEvaluate(new Ei(d.bucket.zoom+1),d.canonical),layoutTextSize:_["text-size"].possiblyEvaluate(new Ei(d.bucket.zoom+1),d.canonical),textMaxSize:_["text-size"].possiblyEvaluate(new Ei(18))};if(d.bucket.textSizeData.kind==="composite"){const{minZoom:V,maxZoom:K}=d.bucket.textSizeData;y.compositeTextSizes=[_["text-size"].possiblyEvaluate(new Ei(V),d.canonical),_["text-size"].possiblyEvaluate(new Ei(K),d.canonical)]}if(d.bucket.iconSizeData.kind==="composite"){const{minZoom:V,maxZoom:K}=d.bucket.iconSizeData;y.compositeIconSizes=[_["icon-size"].possiblyEvaluate(new Ei(V),d.canonical),_["icon-size"].possiblyEvaluate(new Ei(K),d.canonical)]}const C=h.get("text-line-height")*dr,T=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",A=h.get("text-keep-upright"),R=h.get("text-size");for(const V of d.bucket.features){const K=h.get("text-font").evaluate(V,{},d.canonical).join(","),J=R.evaluate(V,{},d.canonical),ae=y.layoutTextSize.evaluate(V,{},d.canonical),pe=y.layoutIconSize.evaluate(V,{},d.canonical),be={horizontal:{},vertical:void 0},Se=V.text;let Ae,Re=[0,0];if(Se){const Ye=Se.toString(),Ot=h.get("text-letter-spacing").evaluate(V,{},d.canonical)*dr,Bt=Hf(Ye)?Ot:0,fn=h.get("text-anchor").evaluate(V,{},d.canonical),vn=Cg(c,V,d.canonical);if(!vn){const sn=h.get("text-radial-offset").evaluate(V,{},d.canonical);Re=sn?kg(fn,[sn*dr,_m]):h.get("text-offset").evaluate(V,{},d.canonical).map(Wt=>Wt*dr)}let ln=T?"center":h.get("text-justify").evaluate(V,{},d.canonical);const on=h.get("symbol-placement"),Qt=on==="point"?h.get("text-max-width").evaluate(V,{},d.canonical)*dr:0,mn=()=>{d.bucket.allowVerticalPlacement&&aa(Ye)&&(be.vertical=fd(Se,d.glyphMap,d.glyphPositions,d.imagePositions,K,Qt,C,fn,"left",Bt,Re,o.ah.vertical,!0,on,ae,J))};if(!T&&vn){const sn=new Set;if(ln==="auto")for(let In=0;In<vn.values.length;In+=2)sn.add(gm(vn.values[In]));else sn.add(ln);let Wt=!1;for(const In of sn)if(!be.horizontal[In])if(Wt)be.horizontal[In]=be.horizontal[0];else{const yn=fd(Se,d.glyphMap,d.glyphPositions,d.imagePositions,K,Qt,C,"center",In,Bt,Re,o.ah.horizontal,!1,on,ae,J);yn&&(be.horizontal[In]=yn,Wt=yn.positionedLines.length===1)}mn()}else{ln==="auto"&&(ln=gm(fn));const sn=fd(Se,d.glyphMap,d.glyphPositions,d.imagePositions,K,Qt,C,fn,ln,Bt,Re,o.ah.horizontal,!1,on,ae,J);sn&&(be.horizontal[ln]=sn),mn(),aa(Ye)&&T&&A&&(be.vertical=fd(Se,d.glyphMap,d.glyphPositions,d.imagePositions,K,Qt,C,fn,ln,Bt,Re,o.ah.vertical,!1,on,ae,J))}}let ot=!1;if(V.icon&&V.icon.name){const Ye=d.imageMap[V.icon.name];Ye&&(Ae=Fk(d.imagePositions[V.icon.name],h.get("icon-offset").evaluate(V,{},d.canonical),h.get("icon-anchor").evaluate(V,{},d.canonical)),ot=!!Ye.sdf,d.bucket.sdfIcons===void 0?d.bucket.sdfIcons=ot:d.bucket.sdfIcons!==ot&&j("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==d.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(d.bucket.iconsNeedLinear=!0))}const Ne=Sg(be.horizontal)||be.vertical;d.bucket.iconsInText=!!Ne&&Ne.iconsInText,(Ne||Ae)&&tC(d.bucket,V,be,Ae,d.imageMap,y,ae,pe,Re,ot,d.canonical)}d.showCollisionBoxes&&d.bucket.generateCollisionDebugBuffers()},o.bn=tm,o.bo=Yh,o.bp=em,o.bq=ca,o.br=im,o.bs=class{constructor(d){this._marks={start:[d.url,"start"].join("#"),end:[d.url,"end"].join("#"),measure:d.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let d=performance.getEntriesByName(this._marks.measure);return d.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),d=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),d}},o.bt=function(d,c,h,_,y){return a(this,void 0,void 0,function*(){if(L())try{return yield St(d,c,h,_,y)}catch{}return function(C,T,A,R,V){const K=C.width,J=C.height;Dt&&zt||(Dt=new OffscreenCanvas(K,J),zt=Dt.getContext("2d",{willReadFrequently:!0})),Dt.width=K,Dt.height=J,zt.drawImage(C,0,0,K,J);const ae=zt.getImageData(T,A,R,V);return zt.clearRect(0,0,K,J),ae.data}(d,c,h,_,y)})},o.bu=cg,o.bv=l,o.bw=f,o.bx=z_,o.by=$o,o.bz=function(d){return d.message===_t},o.c=ft,o.d=d=>a(void 0,void 0,void 0,function*(){if(d.byteLength===0)return createImageBitmap(new ImageData(1,1));const c=new Blob([new Uint8Array(d)],{type:"image/png"});try{return createImageBitmap(c)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.e=fe,o.f=d=>new Promise((c,h)=>{const _=new Image;_.onload=()=>{c(_),URL.revokeObjectURL(_.src),_.onload=null,window.requestAnimationFrame(()=>{_.src=Mt})},_.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(d)],{type:"image/png"});_.src=d.byteLength?URL.createObjectURL(y):Mt}),o.g=Ut,o.h=(d,c)=>dt(fe(d,{type:"json"}),c),o.i=ve,o.j=Xt,o.k=Ge,o.l=(d,c)=>dt(fe(d,{type:"arrayBuffer"}),c),o.m=dt,o.n=function(d){return new im(d).readFields(Mk,[])},o.o=yu,o.p=U_,o.q=qr,o.r=Fh,o.s=yt,o.t=ra,o.u=an,o.v=Oe,o.w=j,o.x=Mo,o.y=function([d,c,h]){return c+=90,c*=Math.PI/180,h*=Math.PI/180,{x:d*Math.cos(c)*Math.sin(h),y:d*Math.sin(c)*Math.sin(h),z:d*Math.cos(h)}},o.z=Or}),r("worker",["./shared"],function(o){class a{constructor(ie){this.keyCache={},ie&&this.replace(ie)}replace(ie){this._layerConfigs={},this._layers={},this.update(ie,[])}update(ie,le){for(const Ie of ie){this._layerConfigs[Ie.id]=Ie;const qe=this._layers[Ie.id]=o.az(Ie);qe._featureFilter=o.a6(qe.filter),this.keyCache[Ie.id]&&delete this.keyCache[Ie.id]}for(const Ie of le)delete this.keyCache[Ie],delete this._layerConfigs[Ie],delete this._layers[Ie];this.familiesBySource={};const ye=o.bh(Object.values(this._layerConfigs),this.keyCache);for(const Ie of ye){const qe=Ie.map(Lt=>this._layers[Lt.id]),He=qe[0];if(He.visibility==="none")continue;const st=He.source||"";let Ve=this.familiesBySource[st];Ve||(Ve=this.familiesBySource[st]={});const ht=He.sourceLayer||"_geojsonTileLayer";let Vt=Ve[ht];Vt||(Vt=Ve[ht]=[]),Vt.push(qe)}}}class l{constructor(ie){const le={},ye=[];for(const st in ie){const Ve=ie[st],ht=le[st]={};for(const Vt in Ve){const Lt=Ve[+Vt];if(!Lt||Lt.bitmap.width===0||Lt.bitmap.height===0)continue;const Ft={x:0,y:0,w:Lt.bitmap.width+2,h:Lt.bitmap.height+2};ye.push(Ft),ht[Vt]={rect:Ft,metrics:Lt.metrics}}}const{w:Ie,h:qe}=o.p(ye),He=new o.o({width:Ie||1,height:qe||1});for(const st in ie){const Ve=ie[st];for(const ht in Ve){const Vt=Ve[+ht];if(!Vt||Vt.bitmap.width===0||Vt.bitmap.height===0)continue;const Lt=le[st][ht].rect;o.o.copy(Vt.bitmap,He,{x:0,y:0},{x:Lt.x+1,y:Lt.y+1},Vt.bitmap)}}this.image=He,this.positions=le}}o.bi("GlyphAtlas",l);class f{constructor(ie){this.tileID=new o.Q(ie.tileID.overscaledZ,ie.tileID.wrap,ie.tileID.canonical.z,ie.tileID.canonical.x,ie.tileID.canonical.y),this.uid=ie.uid,this.zoom=ie.zoom,this.pixelRatio=ie.pixelRatio,this.tileSize=ie.tileSize,this.source=ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ie.showCollisionBoxes,this.collectResourceTiming=!!ie.collectResourceTiming,this.returnDependencies=!!ie.returnDependencies,this.promoteId=ie.promoteId,this.inFlightDependencies=[]}parse(ie,le,ye,Ie){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=ie,this.collisionBoxArray=new o.a4;const qe=new o.bj(Object.keys(ie.layers).sort()),He=new o.bk(this.tileID,this.promoteId);He.bucketLayerIDs=[];const st={},Ve={featureIndex:He,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ye},ht=le.familiesBySource[this.source];for(const Yn in ht){const Fi=ie.layers[Yn];if(!Fi)continue;Fi.version===1&&o.w(`Vector tile source "${this.source}" layer "${Yn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const cr=qe.encode(Yn),Dr=[];for(let Vr=0;Vr<Fi.length;Vr++){const yr=Fi.feature(Vr),Ds=He.getId(yr,Yn);Dr.push({feature:yr,id:Ds,index:Vr,sourceLayerIndex:cr})}for(const Vr of ht[Yn]){const yr=Vr[0];yr.source!==this.source&&o.w(`layer.source = ${yr.source} does not equal this.source = ${this.source}`),yr.minzoom&&this.zoom<Math.floor(yr.minzoom)||yr.maxzoom&&this.zoom>=yr.maxzoom||yr.visibility!=="none"&&(m(Vr,this.zoom,ye),(st[yr.id]=yr.createBucket({index:He.bucketLayerIDs.length,layers:Vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:cr,sourceID:this.source})).populate(Dr,Ve,this.tileID.canonical),He.bucketLayerIDs.push(Vr.map(Ds=>Ds.id)))}}const Vt=o.aE(Ve.glyphDependencies,Yn=>Object.keys(Yn).map(Number));this.inFlightDependencies.forEach(Yn=>Yn==null?void 0:Yn.abort()),this.inFlightDependencies=[];let Lt=Promise.resolve({});if(Object.keys(Vt).length){const Yn=new AbortController;this.inFlightDependencies.push(Yn),Lt=Ie.sendAsync({type:"GG",data:{stacks:Vt,source:this.source,tileID:this.tileID,type:"glyphs"}},Yn)}const Ft=Object.keys(Ve.iconDependencies);let Sn=Promise.resolve({});if(Ft.length){const Yn=new AbortController;this.inFlightDependencies.push(Yn),Sn=Ie.sendAsync({type:"GI",data:{icons:Ft,source:this.source,tileID:this.tileID,type:"icons"}},Yn)}const $n=Object.keys(Ve.patternDependencies);let Kn=Promise.resolve({});if($n.length){const Yn=new AbortController;this.inFlightDependencies.push(Yn),Kn=Ie.sendAsync({type:"GI",data:{icons:$n,source:this.source,tileID:this.tileID,type:"patterns"}},Yn)}const[jn,ai,gi]=yield Promise.all([Lt,Sn,Kn]),Si=new l(jn),er=new o.bl(ai,gi);for(const Yn in st){const Fi=st[Yn];Fi instanceof o.a5?(m(Fi.layers,this.zoom,ye),o.bm({bucket:Fi,glyphMap:jn,glyphPositions:Si.positions,imageMap:ai,imagePositions:er.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Fi.hasPattern&&(Fi instanceof o.bn||Fi instanceof o.bo||Fi instanceof o.bp)&&(m(Fi.layers,this.zoom,ye),Fi.addFeatures(Ve,this.tileID.canonical,er.patternPositions))}return this.status="done",{buckets:Object.values(st).filter(Yn=>!Yn.isEmpty()),featureIndex:He,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Si.image,imageAtlas:er,glyphMap:this.returnDependencies?jn:null,iconMap:this.returnDependencies?ai:null,glyphPositions:this.returnDependencies?Si.positions:null}})}}function m(Ee,ie,le){const ye=new o.a8(ie);for(const Ie of Ee)Ie.recalculate(ye,le)}class g{constructor(ie,le,ye){this.actor=ie,this.layerIndex=le,this.availableImages=ye,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ie,le){return o._(this,void 0,void 0,function*(){const ye=yield o.l(ie.request,le);try{return{vectorTile:new o.bq.VectorTile(new o.br(ye.data)),rawData:ye.data,cacheControl:ye.cacheControl,expires:ye.expires}}catch(Ie){const qe=new Uint8Array(ye.data);let He=`Unable to parse the tile at ${ie.request.url}, `;throw He+=qe[0]===31&&qe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ie.messge}`,new Error(He)}})}loadTile(ie){return o._(this,void 0,void 0,function*(){const le=ie.uid,ye=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new o.bs(ie.request),Ie=new f(ie);this.loading[le]=Ie;const qe=new AbortController;Ie.abort=qe;try{const He=yield this.loadVectorTile(ie,qe);if(delete this.loading[le],!He)return null;const st=He.rawData,Ve={};He.expires&&(Ve.expires=He.expires),He.cacheControl&&(Ve.cacheControl=He.cacheControl);const ht={};if(ye){const Lt=ye.finish();Lt&&(ht.resourceTiming=JSON.parse(JSON.stringify(Lt)))}Ie.vectorTile=He.vectorTile;const Vt=Ie.parse(He.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[le]=Ie,this.fetching[le]={rawTileData:st,cacheControl:Ve,resourceTiming:ht};try{const Lt=yield Vt;return o.e({rawTileData:st.slice(0)},Lt,Ve,ht)}finally{delete this.fetching[le]}}catch(He){throw delete this.loading[le],Ie.status="done",this.loaded[le]=Ie,He}})}reloadTile(ie){return o._(this,void 0,void 0,function*(){const le=ie.uid;if(!this.loaded||!this.loaded[le])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ye=this.loaded[le];if(ye.showCollisionBoxes=ie.showCollisionBoxes,ye.status==="parsing"){const Ie=yield ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor);let qe;if(this.fetching[le]){const{rawTileData:He,cacheControl:st,resourceTiming:Ve}=this.fetching[le];delete this.fetching[le],qe=o.e({rawTileData:He.slice(0)},Ie,st,Ve)}else qe=Ie;return qe}if(ye.status==="done"&&ye.vectorTile)return ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ie){return o._(this,void 0,void 0,function*(){const le=this.loading,ye=ie.uid;le&&le[ye]&&le[ye].abort&&(le[ye].abort.abort(),delete le[ye])})}removeTile(ie){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ie.uid]&&delete this.loaded[ie.uid]})}}class w{constructor(){this.loaded={}}loadTile(ie){return o._(this,void 0,void 0,function*(){const{uid:le,encoding:ye,rawImageData:Ie,redFactor:qe,greenFactor:He,blueFactor:st,baseShift:Ve}=ie,ht=Ie.width+2,Vt=Ie.height+2,Lt=o.b(Ie)?new o.R({width:ht,height:Vt},yield o.bt(Ie,-1,-1,ht,Vt)):Ie,Ft=new o.bu(le,Lt,ye,qe,He,st,Ve);return this.loaded=this.loaded||{},this.loaded[le]=Ft,Ft})}removeTile(ie){const le=this.loaded,ye=ie.uid;le&&le[ye]&&delete le[ye]}}function S(Ee,ie){if(Ee.length!==0){M(Ee[0],ie);for(var le=1;le<Ee.length;le++)M(Ee[le],!ie)}}function M(Ee,ie){for(var le=0,ye=0,Ie=0,qe=Ee.length,He=qe-1;Ie<qe;He=Ie++){var st=(Ee[Ie][0]-Ee[He][0])*(Ee[He][1]+Ee[Ie][1]),Ve=le+st;ye+=Math.abs(le)>=Math.abs(st)?le-Ve+st:st-Ve+le,le=Ve}le+ye>=0!=!!ie&&Ee.reverse()}var $=o.bv(function Ee(ie,le){var ye,Ie=ie&&ie.type;if(Ie==="FeatureCollection")for(ye=0;ye<ie.features.length;ye++)Ee(ie.features[ye],le);else if(Ie==="GeometryCollection")for(ye=0;ye<ie.geometries.length;ye++)Ee(ie.geometries[ye],le);else if(Ie==="Feature")Ee(ie.geometry,le);else if(Ie==="Polygon")S(ie.coordinates,le);else if(Ie==="MultiPolygon")for(ye=0;ye<ie.coordinates.length;ye++)S(ie.coordinates[ye],le);return ie});const D=o.bq.VectorTileFeature.prototype.toGeoJSON;var F={exports:{}},L=o.bw,U=o.bq.VectorTileFeature,ne=se;function se(Ee,ie){this.options=ie||{},this.features=Ee,this.length=Ee.length}function ee(Ee,ie){this.id=typeof Ee.id=="number"?Ee.id:void 0,this.type=Ee.type,this.rawGeometry=Ee.type===1?[Ee.geometry]:Ee.geometry,this.properties=Ee.tags,this.extent=ie||4096}se.prototype.feature=function(Ee){return new ee(this.features[Ee],this.options.extent)},ee.prototype.loadGeometry=function(){var Ee=this.rawGeometry;this.geometry=[];for(var ie=0;ie<Ee.length;ie++){for(var le=Ee[ie],ye=[],Ie=0;Ie<le.length;Ie++)ye.push(new L(le[Ie][0],le[Ie][1]));this.geometry.push(ye)}return this.geometry},ee.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ee=this.geometry,ie=1/0,le=-1/0,ye=1/0,Ie=-1/0,qe=0;qe<Ee.length;qe++)for(var He=Ee[qe],st=0;st<He.length;st++){var Ve=He[st];ie=Math.min(ie,Ve.x),le=Math.max(le,Ve.x),ye=Math.min(ye,Ve.y),Ie=Math.max(Ie,Ve.y)}return[ie,ye,le,Ie]},ee.prototype.toGeoJSON=U.prototype.toGeoJSON;var fe=o.bx,_e=ne;function re(Ee){var ie=new fe;return function(le,ye){for(var Ie in le.layers)ye.writeMessage(3,de,le.layers[Ie])}(Ee,ie),ie.finish()}function de(Ee,ie){var le;ie.writeVarintField(15,Ee.version||1),ie.writeStringField(1,Ee.name||""),ie.writeVarintField(5,Ee.extent||4096);var ye={keys:[],values:[],keycache:{},valuecache:{}};for(le=0;le<Ee.length;le++)ye.feature=Ee.feature(le),ie.writeMessage(2,he,ye);var Ie=ye.keys;for(le=0;le<Ie.length;le++)ie.writeStringField(3,Ie[le]);var qe=ye.values;for(le=0;le<qe.length;le++)ie.writeMessage(4,ve,qe[le])}function he(Ee,ie){var le=Ee.feature;le.id!==void 0&&ie.writeVarintField(1,le.id),ie.writeMessage(2,X,Ee),ie.writeVarintField(3,le.type),ie.writeMessage(4,ze,le)}function X(Ee,ie){var le=Ee.feature,ye=Ee.keys,Ie=Ee.values,qe=Ee.keycache,He=Ee.valuecache;for(var st in le.properties){var Ve=le.properties[st],ht=qe[st];if(Ve!==null){ht===void 0&&(ye.push(st),qe[st]=ht=ye.length-1),ie.writeVarint(ht);var Vt=typeof Ve;Vt!=="string"&&Vt!=="boolean"&&Vt!=="number"&&(Ve=JSON.stringify(Ve));var Lt=Vt+":"+Ve,Ft=He[Lt];Ft===void 0&&(Ie.push(Ve),He[Lt]=Ft=Ie.length-1),ie.writeVarint(Ft)}}}function j(Ee,ie){return(ie<<3)+(7&Ee)}function xe(Ee){return Ee<<1^Ee>>31}function ze(Ee,ie){for(var le=Ee.loadGeometry(),ye=Ee.type,Ie=0,qe=0,He=le.length,st=0;st<He;st++){var Ve=le[st],ht=1;ye===1&&(ht=Ve.length),ie.writeVarint(j(1,ht));for(var Vt=ye===3?Ve.length-1:Ve.length,Lt=0;Lt<Vt;Lt++){Lt===1&&ye!==1&&ie.writeVarint(j(2,Vt-1));var Ft=Ve[Lt].x-Ie,Sn=Ve[Lt].y-qe;ie.writeVarint(xe(Ft)),ie.writeVarint(xe(Sn)),Ie+=Ft,qe+=Sn}ye===3&&ie.writeVarint(j(7,1))}}function ve(Ee,ie){var le=typeof Ee;le==="string"?ie.writeStringField(1,Ee):le==="boolean"?ie.writeBooleanField(7,Ee):le==="number"&&(Ee%1!=0?ie.writeDoubleField(3,Ee):Ee<0?ie.writeSVarintField(6,Ee):ie.writeVarintField(5,Ee))}F.exports=re,F.exports.fromVectorTileJs=re,F.exports.fromGeojsonVt=function(Ee,ie){ie=ie||{};var le={};for(var ye in Ee)le[ye]=new _e(Ee[ye].features,ie),le[ye].name=ye,le[ye].version=ie.version,le[ye].extent=ie.extent;return re({layers:le})},F.exports.GeoJSONWrapper=_e;var We=o.bv(F.exports);const pt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ee=>Ee},Mt=Math.fround||(St=new Float32Array(1),Ee=>(St[0]=+Ee,St[0]));var St;const Dt=3,zt=5,_t=6;class ft{constructor(ie){this.options=Object.assign(Object.create(pt),ie),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ie){const{log:le,minZoom:ye,maxZoom:Ie}=this.options;le&&console.time("total time");const qe=`prepare ${ie.length} points`;le&&console.time(qe),this.points=ie;const He=[];for(let Ve=0;Ve<ie.length;Ve++){const ht=ie[Ve];if(!ht.geometry)continue;const[Vt,Lt]=ht.geometry.coordinates,Ft=Mt(Rt(Vt)),Sn=Mt(qt(Lt));He.push(Ft,Sn,1/0,Ve,-1,1),this.options.reduce&&He.push(0)}let st=this.trees[Ie+1]=this._createTree(He);le&&console.timeEnd(qe);for(let Ve=Ie;Ve>=ye;Ve--){const ht=+Date.now();st=this.trees[Ve]=this._createTree(this._cluster(st,Ve)),le&&console.log("z%d: %d clusters in %dms",Ve,st.numItems,+Date.now()-ht)}return le&&console.timeEnd("total time"),this}getClusters(ie,le){let ye=((ie[0]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,ie[1]));let qe=ie[2]===180?180:((ie[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,ie[3]));if(ie[2]-ie[0]>=360)ye=-180,qe=180;else if(ye>qe){const Lt=this.getClusters([ye,Ie,180,He],le),Ft=this.getClusters([-180,Ie,qe,He],le);return Lt.concat(Ft)}const st=this.trees[this._limitZoom(le)],Ve=st.range(Rt(ye),qt(He),Rt(qe),qt(Ie)),ht=st.data,Vt=[];for(const Lt of Ve){const Ft=this.stride*Lt;Vt.push(ht[Ft+zt]>1?Be(ht,Ft,this.clusterProps):this.points[ht[Ft+Dt]])}return Vt}getChildren(ie){const le=this._getOriginId(ie),ye=this._getOriginZoom(ie),Ie="No cluster with the specified id.",qe=this.trees[ye];if(!qe)throw new Error(Ie);const He=qe.data;if(le*this.stride>=He.length)throw new Error(Ie);const st=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Ve=qe.within(He[le*this.stride],He[le*this.stride+1],st),ht=[];for(const Vt of Ve){const Lt=Vt*this.stride;He[Lt+4]===ie&&ht.push(He[Lt+zt]>1?Be(He,Lt,this.clusterProps):this.points[He[Lt+Dt]])}if(ht.length===0)throw new Error(Ie);return ht}getLeaves(ie,le,ye){const Ie=[];return this._appendLeaves(Ie,ie,le=le||10,ye=ye||0,0),Ie}getTile(ie,le,ye){const Ie=this.trees[this._limitZoom(ie)],qe=Math.pow(2,ie),{extent:He,radius:st}=this.options,Ve=st/He,ht=(ye-Ve)/qe,Vt=(ye+1+Ve)/qe,Lt={features:[]};return this._addTileFeatures(Ie.range((le-Ve)/qe,ht,(le+1+Ve)/qe,Vt),Ie.data,le,ye,qe,Lt),le===0&&this._addTileFeatures(Ie.range(1-Ve/qe,ht,1,Vt),Ie.data,qe,ye,qe,Lt),le===qe-1&&this._addTileFeatures(Ie.range(0,ht,Ve/qe,Vt),Ie.data,-1,ye,qe,Lt),Lt.features.length?Lt:null}getClusterExpansionZoom(ie){let le=this._getOriginZoom(ie)-1;for(;le<=this.options.maxZoom;){const ye=this.getChildren(ie);if(le++,ye.length!==1)break;ie=ye[0].properties.cluster_id}return le}_appendLeaves(ie,le,ye,Ie,qe){const He=this.getChildren(le);for(const st of He){const Ve=st.properties;if(Ve&&Ve.cluster?qe+Ve.point_count<=Ie?qe+=Ve.point_count:qe=this._appendLeaves(ie,Ve.cluster_id,ye,Ie,qe):qe<Ie?qe++:ie.push(st),ie.length===ye)break}return qe}_createTree(ie){const le=new o.au(ie.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<ie.length;ye+=this.stride)le.add(ie[ye],ie[ye+1]);return le.finish(),le.data=ie,le}_addTileFeatures(ie,le,ye,Ie,qe,He){for(const st of ie){const Ve=st*this.stride,ht=le[Ve+zt]>1;let Vt,Lt,Ft;if(ht)Vt=Ut(le,Ve,this.clusterProps),Lt=le[Ve],Ft=le[Ve+1];else{const Kn=this.points[le[Ve+Dt]];Vt=Kn.properties;const[jn,ai]=Kn.geometry.coordinates;Lt=Rt(jn),Ft=qt(ai)}const Sn={type:1,geometry:[[Math.round(this.options.extent*(Lt*qe-ye)),Math.round(this.options.extent*(Ft*qe-Ie))]],tags:Vt};let $n;$n=ht||this.options.generateId?le[Ve+Dt]:this.points[le[Ve+Dt]].id,$n!==void 0&&(Sn.id=$n),He.features.push(Sn)}}_limitZoom(ie){return Math.max(this.options.minZoom,Math.min(Math.floor(+ie),this.options.maxZoom+1))}_cluster(ie,le){const{radius:ye,extent:Ie,reduce:qe,minPoints:He}=this.options,st=ye/(Ie*Math.pow(2,le)),Ve=ie.data,ht=[],Vt=this.stride;for(let Lt=0;Lt<Ve.length;Lt+=Vt){if(Ve[Lt+2]<=le)continue;Ve[Lt+2]=le;const Ft=Ve[Lt],Sn=Ve[Lt+1],$n=ie.within(Ve[Lt],Ve[Lt+1],st),Kn=Ve[Lt+zt];let jn=Kn;for(const ai of $n){const gi=ai*Vt;Ve[gi+2]>le&&(jn+=Ve[gi+zt])}if(jn>Kn&&jn>=He){let ai,gi=Ft*Kn,Si=Sn*Kn,er=-1;const Yn=((Lt/Vt|0)<<5)+(le+1)+this.points.length;for(const Fi of $n){const cr=Fi*Vt;if(Ve[cr+2]<=le)continue;Ve[cr+2]=le;const Dr=Ve[cr+zt];gi+=Ve[cr]*Dr,Si+=Ve[cr+1]*Dr,Ve[cr+4]=Yn,qe&&(ai||(ai=this._map(Ve,Lt,!0),er=this.clusterProps.length,this.clusterProps.push(ai)),qe(ai,this._map(Ve,cr)))}Ve[Lt+4]=Yn,ht.push(gi/jn,Si/jn,1/0,Yn,-1,jn),qe&&ht.push(er)}else{for(let ai=0;ai<Vt;ai++)ht.push(Ve[Lt+ai]);if(jn>1)for(const ai of $n){const gi=ai*Vt;if(!(Ve[gi+2]<=le)){Ve[gi+2]=le;for(let Si=0;Si<Vt;Si++)ht.push(Ve[gi+Si])}}}}return ht}_getOriginId(ie){return ie-this.points.length>>5}_getOriginZoom(ie){return(ie-this.points.length)%32}_map(ie,le,ye){if(ie[le+zt]>1){const He=this.clusterProps[ie[le+_t]];return ye?Object.assign({},He):He}const Ie=this.points[ie[le+Dt]].properties,qe=this.options.map(Ie);return ye&&qe===Ie?Object.assign({},qe):qe}}function Be(Ee,ie,le){return{type:"Feature",id:Ee[ie+Dt],properties:Ut(Ee,ie,le),geometry:{type:"Point",coordinates:[(ye=Ee[ie],360*(ye-.5)),et(Ee[ie+1])]}};var ye}function Ut(Ee,ie,le){const ye=Ee[ie+zt],Ie=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,qe=Ee[ie+_t],He=qe===-1?{}:Object.assign({},le[qe]);return Object.assign(He,{cluster:!0,cluster_id:Ee[ie+Dt],point_count:ye,point_count_abbreviated:Ie})}function Rt(Ee){return Ee/360+.5}function qt(Ee){const ie=Math.sin(Ee*Math.PI/180),le=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return le<0?0:le>1?1:le}function et(Ee){const ie=(180-360*Ee)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function dt(Ee,ie,le,ye){for(var Ie,qe=ye,He=le-ie>>1,st=le-ie,Ve=Ee[ie],ht=Ee[ie+1],Vt=Ee[le],Lt=Ee[le+1],Ft=ie+3;Ft<le;Ft+=3){var Sn=yt(Ee[Ft],Ee[Ft+1],Ve,ht,Vt,Lt);if(Sn>qe)Ie=Ft,qe=Sn;else if(Sn===qe){var $n=Math.abs(Ft-He);$n<st&&(Ie=Ft,st=$n)}}qe>ye&&(Ie-ie>3&&dt(Ee,ie,Ie,ye),Ee[Ie+2]=qe,le-Ie>3&&dt(Ee,Ie,le,ye))}function yt(Ee,ie,le,ye,Ie,qe){var He=Ie-le,st=qe-ye;if(He!==0||st!==0){var Ve=((Ee-le)*He+(ie-ye)*st)/(He*He+st*st);Ve>1?(le=Ie,ye=qe):Ve>0&&(le+=He*Ve,ye+=st*Ve)}return(He=Ee-le)*He+(st=ie-ye)*st}function Ue(Ee,ie,le,ye){var Ie={id:Ee===void 0?null:Ee,type:ie,geometry:le,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(qe){var He=qe.geometry,st=qe.type;if(st==="Point"||st==="MultiPoint"||st==="LineString")kt(qe,He);else if(st==="Polygon"||st==="MultiLineString")for(var Ve=0;Ve<He.length;Ve++)kt(qe,He[Ve]);else if(st==="MultiPolygon")for(Ve=0;Ve<He.length;Ve++)for(var ht=0;ht<He[Ve].length;ht++)kt(qe,He[Ve][ht])}(Ie),Ie}function kt(Ee,ie){for(var le=0;le<ie.length;le+=3)Ee.minX=Math.min(Ee.minX,ie[le]),Ee.minY=Math.min(Ee.minY,ie[le+1]),Ee.maxX=Math.max(Ee.maxX,ie[le]),Ee.maxY=Math.max(Ee.maxY,ie[le+1])}function Ge(Ee,ie,le,ye){if(ie.geometry){var Ie=ie.geometry.coordinates,qe=ie.geometry.type,He=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2),st=[],Ve=ie.id;if(le.promoteId?Ve=ie.properties[le.promoteId]:le.generateId&&(Ve=ye||0),qe==="Point")Xt(Ie,st);else if(qe==="MultiPoint")for(var ht=0;ht<Ie.length;ht++)Xt(Ie[ht],st);else if(qe==="LineString")En(Ie,st,He,!1);else if(qe==="MultiLineString"){if(le.lineMetrics){for(ht=0;ht<Ie.length;ht++)En(Ie[ht],st=[],He,!1),Ee.push(Ue(Ve,"LineString",st,ie.properties));return}Oe(Ie,st,He,!1)}else if(qe==="Polygon")Oe(Ie,st,He,!0);else{if(qe!=="MultiPolygon"){if(qe==="GeometryCollection"){for(ht=0;ht<ie.geometry.geometries.length;ht++)Ge(Ee,{id:Ve,geometry:ie.geometry.geometries[ht],properties:ie.properties},le,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ht=0;ht<Ie.length;ht++){var Vt=[];Oe(Ie[ht],Vt,He,!0),st.push(Vt)}}Ee.push(Ue(Ve,qe,st,ie.properties))}}function Xt(Ee,ie){ie.push(un(Ee[0])),ie.push(qn(Ee[1])),ie.push(0)}function En(Ee,ie,le,ye){for(var Ie,qe,He=0,st=0;st<Ee.length;st++){var Ve=un(Ee[st][0]),ht=qn(Ee[st][1]);ie.push(Ve),ie.push(ht),ie.push(0),st>0&&(He+=ye?(Ie*ht-Ve*qe)/2:Math.sqrt(Math.pow(Ve-Ie,2)+Math.pow(ht-qe,2))),Ie=Ve,qe=ht}var Vt=ie.length-3;ie[2]=1,dt(ie,0,Vt,le),ie[Vt+2]=1,ie.size=Math.abs(He),ie.start=0,ie.end=ie.size}function Oe(Ee,ie,le,ye){for(var Ie=0;Ie<Ee.length;Ie++){var qe=[];En(Ee[Ie],qe,le,ye),ie.push(qe)}}function un(Ee){return Ee/360+.5}function qn(Ee){var ie=Math.sin(Ee*Math.PI/180),le=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return le<0?0:le>1?1:le}function _n(Ee,ie,le,ye,Ie,qe,He,st){if(ye/=ie,qe>=(le/=ie)&&He<ye)return Ee;if(He<le||qe>=ye)return null;for(var Ve=[],ht=0;ht<Ee.length;ht++){var Vt=Ee[ht],Lt=Vt.geometry,Ft=Vt.type,Sn=Ie===0?Vt.minX:Vt.minY,$n=Ie===0?Vt.maxX:Vt.maxY;if(Sn>=le&&$n<ye)Ve.push(Vt);else if(!($n<le||Sn>=ye)){var Kn=[];if(Ft==="Point"||Ft==="MultiPoint")mt(Lt,Kn,le,ye,Ie);else if(Ft==="LineString")Zt(Lt,Kn,le,ye,Ie,!1,st.lineMetrics);else if(Ft==="MultiLineString")en(Lt,Kn,le,ye,Ie,!1);else if(Ft==="Polygon")en(Lt,Kn,le,ye,Ie,!0);else if(Ft==="MultiPolygon")for(var jn=0;jn<Lt.length;jn++){var ai=[];en(Lt[jn],ai,le,ye,Ie,!0),ai.length&&Kn.push(ai)}if(Kn.length){if(st.lineMetrics&&Ft==="LineString"){for(jn=0;jn<Kn.length;jn++)Ve.push(Ue(Vt.id,Ft,Kn[jn],Vt.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(Kn.length===1?(Ft="LineString",Kn=Kn[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=Kn.length===3?"Point":"MultiPoint"),Ve.push(Ue(Vt.id,Ft,Kn,Vt.tags))}}}return Ve.length?Ve:null}function mt(Ee,ie,le,ye,Ie){for(var qe=0;qe<Ee.length;qe+=3){var He=Ee[qe+Ie];He>=le&&He<=ye&&(ie.push(Ee[qe]),ie.push(Ee[qe+1]),ie.push(Ee[qe+2]))}}function Zt(Ee,ie,le,ye,Ie,qe,He){for(var st,Ve,ht=Kt(Ee),Vt=Ie===0?Vn:yi,Lt=Ee.start,Ft=0;Ft<Ee.length-3;Ft+=3){var Sn=Ee[Ft],$n=Ee[Ft+1],Kn=Ee[Ft+2],jn=Ee[Ft+3],ai=Ee[Ft+4],gi=Ie===0?Sn:$n,Si=Ie===0?jn:ai,er=!1;He&&(st=Math.sqrt(Math.pow(Sn-jn,2)+Math.pow($n-ai,2))),gi<le?Si>le&&(Ve=Vt(ht,Sn,$n,jn,ai,le),He&&(ht.start=Lt+st*Ve)):gi>ye?Si<ye&&(Ve=Vt(ht,Sn,$n,jn,ai,ye),He&&(ht.start=Lt+st*Ve)):Pn(ht,Sn,$n,Kn),Si<le&&gi>=le&&(Ve=Vt(ht,Sn,$n,jn,ai,le),er=!0),Si>ye&&gi<=ye&&(Ve=Vt(ht,Sn,$n,jn,ai,ye),er=!0),!qe&&er&&(He&&(ht.end=Lt+st*Ve),ie.push(ht),ht=Kt(Ee)),He&&(Lt+=st)}var Yn=Ee.length-3;Sn=Ee[Yn],$n=Ee[Yn+1],Kn=Ee[Yn+2],(gi=Ie===0?Sn:$n)>=le&&gi<=ye&&Pn(ht,Sn,$n,Kn),Yn=ht.length-3,qe&&Yn>=3&&(ht[Yn]!==ht[0]||ht[Yn+1]!==ht[1])&&Pn(ht,ht[0],ht[1],ht[2]),ht.length&&ie.push(ht)}function Kt(Ee){var ie=[];return ie.size=Ee.size,ie.start=Ee.start,ie.end=Ee.end,ie}function en(Ee,ie,le,ye,Ie,qe){for(var He=0;He<Ee.length;He++)Zt(Ee[He],ie,le,ye,Ie,qe,!1)}function Pn(Ee,ie,le,ye){Ee.push(ie),Ee.push(le),Ee.push(ye)}function Vn(Ee,ie,le,ye,Ie,qe){var He=(qe-ie)/(ye-ie);return Ee.push(qe),Ee.push(le+(Ie-le)*He),Ee.push(1),He}function yi(Ee,ie,le,ye,Ie,qe){var He=(qe-le)/(Ie-le);return Ee.push(ie+(ye-ie)*He),Ee.push(qe),Ee.push(1),He}function wt(Ee,ie){for(var le=[],ye=0;ye<Ee.length;ye++){var Ie,qe=Ee[ye],He=qe.type;if(He==="Point"||He==="MultiPoint"||He==="LineString")Ie=$t(qe.geometry,ie);else if(He==="MultiLineString"||He==="Polygon"){Ie=[];for(var st=0;st<qe.geometry.length;st++)Ie.push($t(qe.geometry[st],ie))}else if(He==="MultiPolygon")for(Ie=[],st=0;st<qe.geometry.length;st++){for(var Ve=[],ht=0;ht<qe.geometry[st].length;ht++)Ve.push($t(qe.geometry[st][ht],ie));Ie.push(Ve)}le.push(Ue(qe.id,He,Ie,qe.tags))}return le}function $t(Ee,ie){var le=[];le.size=Ee.size,Ee.start!==void 0&&(le.start=Ee.start,le.end=Ee.end);for(var ye=0;ye<Ee.length;ye+=3)le.push(Ee[ye]+ie,Ee[ye+1],Ee[ye+2]);return le}function Hn(Ee,ie){if(Ee.transformed)return Ee;var le,ye,Ie,qe=1<<Ee.z,He=Ee.x,st=Ee.y;for(le=0;le<Ee.features.length;le++){var Ve=Ee.features[le],ht=Ve.geometry,Vt=Ve.type;if(Ve.geometry=[],Vt===1)for(ye=0;ye<ht.length;ye+=2)Ve.geometry.push(Mn(ht[ye],ht[ye+1],ie,qe,He,st));else for(ye=0;ye<ht.length;ye++){var Lt=[];for(Ie=0;Ie<ht[ye].length;Ie+=2)Lt.push(Mn(ht[ye][Ie],ht[ye][Ie+1],ie,qe,He,st));Ve.geometry.push(Lt)}}return Ee.transformed=!0,Ee}function Mn(Ee,ie,le,ye,Ie,qe){return[Math.round(le*(Ee*ye-Ie)),Math.round(le*(ie*ye-qe))]}function ei(Ee,ie,le,ye,Ie){for(var qe=ie===Ie.maxZoom?0:Ie.tolerance/((1<<ie)*Ie.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:le,y:ye,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},st=0;st<Ee.length;st++){He.numFeatures++,xi(He,Ee[st],qe,Ie);var Ve=Ee[st].minX,ht=Ee[st].minY,Vt=Ee[st].maxX,Lt=Ee[st].maxY;Ve<He.minX&&(He.minX=Ve),ht<He.minY&&(He.minY=ht),Vt>He.maxX&&(He.maxX=Vt),Lt>He.maxY&&(He.maxY=Lt)}return He}function xi(Ee,ie,le,ye){var Ie=ie.geometry,qe=ie.type,He=[];if(qe==="Point"||qe==="MultiPoint")for(var st=0;st<Ie.length;st+=3)He.push(Ie[st]),He.push(Ie[st+1]),Ee.numPoints++,Ee.numSimplified++;else if(qe==="LineString")tn(He,Ie,Ee,le,!1,!1);else if(qe==="MultiLineString"||qe==="Polygon")for(st=0;st<Ie.length;st++)tn(He,Ie[st],Ee,le,qe==="Polygon",st===0);else if(qe==="MultiPolygon")for(var Ve=0;Ve<Ie.length;Ve++){var ht=Ie[Ve];for(st=0;st<ht.length;st++)tn(He,ht[st],Ee,le,!0,st===0)}if(He.length){var Vt=ie.tags||null;if(qe==="LineString"&&ye.lineMetrics){for(var Lt in Vt={},ie.tags)Vt[Lt]=ie.tags[Lt];Vt.mapbox_clip_start=Ie.start/Ie.size,Vt.mapbox_clip_end=Ie.end/Ie.size}var Ft={geometry:He,type:qe==="Polygon"||qe==="MultiPolygon"?3:qe==="LineString"||qe==="MultiLineString"?2:1,tags:Vt};ie.id!==null&&(Ft.id=ie.id),Ee.features.push(Ft)}}function tn(Ee,ie,le,ye,Ie,qe){var He=ye*ye;if(ye>0&&ie.size<(Ie?He:ye))le.numPoints+=ie.length/3;else{for(var st=[],Ve=0;Ve<ie.length;Ve+=3)(ye===0||ie[Ve+2]>He)&&(le.numSimplified++,st.push(ie[Ve]),st.push(ie[Ve+1])),le.numPoints++;Ie&&function(ht,Vt){for(var Lt=0,Ft=0,Sn=ht.length,$n=Sn-2;Ft<Sn;$n=Ft,Ft+=2)Lt+=(ht[Ft]-ht[$n])*(ht[Ft+1]+ht[$n+1]);if(Lt>0===Vt)for(Ft=0,Sn=ht.length;Ft<Sn/2;Ft+=2){var Kn=ht[Ft],jn=ht[Ft+1];ht[Ft]=ht[Sn-2-Ft],ht[Ft+1]=ht[Sn-1-Ft],ht[Sn-2-Ft]=Kn,ht[Sn-1-Ft]=jn}}(st,qe),Ee.push(st)}}function Un(Ee,ie){var le=(ie=this.options=function(Ie,qe){for(var He in qe)Ie[He]=qe[He];return Ie}(Object.create(this.options),ie)).debug;if(le&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=function(Ie,qe){var He=[];if(Ie.type==="FeatureCollection")for(var st=0;st<Ie.features.length;st++)Ge(He,Ie.features[st],qe,st);else Ge(He,Ie.type==="Feature"?Ie:{geometry:Ie},qe);return He}(Ee,ie);this.tiles={},this.tileCoords=[],le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(Ie,qe){var He=qe.buffer/qe.extent,st=Ie,Ve=_n(Ie,1,-1-He,He,0,-1,2,qe),ht=_n(Ie,1,1-He,2+He,0,-1,2,qe);return(Ve||ht)&&(st=_n(Ie,1,-He,1+He,0,-1,2,qe)||[],Ve&&(st=wt(Ve,1).concat(st)),ht&&(st=st.concat(wt(ht,-1)))),st}(ye,ie),ye.length&&this.splitTile(ye,0,0,0),le&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Nn(Ee,ie,le){return 32*((1<<Ee)*le+ie)+Ee}function On(Ee,ie){return ie?Ee.properties[ie]:Ee.id}function hi(Ee,ie){if(Ee==null)return!0;if(Ee.type==="Feature")return On(Ee,ie)!=null;if(Ee.type==="FeatureCollection"){const le=new Set;for(const ye of Ee.features){const Ie=On(ye,ie);if(Ie==null||le.has(Ie))return!1;le.add(Ie)}return!0}return!1}function Tn(Ee,ie){const le=new Map;if(Ee!=null)if(Ee.type==="Feature")le.set(On(Ee,ie),Ee);else for(const ye of Ee.features)le.set(On(ye,ie),ye);return le}Un.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Un.prototype.splitTile=function(Ee,ie,le,ye,Ie,qe,He){for(var st=[Ee,ie,le,ye],Ve=this.options,ht=Ve.debug;st.length;){ye=st.pop(),le=st.pop(),ie=st.pop(),Ee=st.pop();var Vt=1<<ie,Lt=Nn(ie,le,ye),Ft=this.tiles[Lt];if(!Ft&&(ht>1&&console.time("creation"),Ft=this.tiles[Lt]=ei(Ee,ie,le,ye,Ve),this.tileCoords.push({z:ie,x:le,y:ye}),ht)){ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,le,ye,Ft.numFeatures,Ft.numPoints,Ft.numSimplified),console.timeEnd("creation"));var Sn="z"+ie;this.stats[Sn]=(this.stats[Sn]||0)+1,this.total++}if(Ft.source=Ee,Ie){if(ie===Ve.maxZoom||ie===Ie)continue;var $n=1<<Ie-ie;if(le!==Math.floor(qe/$n)||ye!==Math.floor(He/$n))continue}else if(ie===Ve.indexMaxZoom||Ft.numPoints<=Ve.indexMaxPoints)continue;if(Ft.source=null,Ee.length!==0){ht>1&&console.time("clipping");var Kn,jn,ai,gi,Si,er,Yn=.5*Ve.buffer/Ve.extent,Fi=.5-Yn,cr=.5+Yn,Dr=1+Yn;Kn=jn=ai=gi=null,Si=_n(Ee,Vt,le-Yn,le+cr,0,Ft.minX,Ft.maxX,Ve),er=_n(Ee,Vt,le+Fi,le+Dr,0,Ft.minX,Ft.maxX,Ve),Ee=null,Si&&(Kn=_n(Si,Vt,ye-Yn,ye+cr,1,Ft.minY,Ft.maxY,Ve),jn=_n(Si,Vt,ye+Fi,ye+Dr,1,Ft.minY,Ft.maxY,Ve),Si=null),er&&(ai=_n(er,Vt,ye-Yn,ye+cr,1,Ft.minY,Ft.maxY,Ve),gi=_n(er,Vt,ye+Fi,ye+Dr,1,Ft.minY,Ft.maxY,Ve),er=null),ht>1&&console.timeEnd("clipping"),st.push(Kn||[],ie+1,2*le,2*ye),st.push(jn||[],ie+1,2*le,2*ye+1),st.push(ai||[],ie+1,2*le+1,2*ye),st.push(gi||[],ie+1,2*le+1,2*ye+1)}}},Un.prototype.getTile=function(Ee,ie,le){var ye=this.options,Ie=ye.extent,qe=ye.debug;if(Ee<0||Ee>24)return null;var He=1<<Ee,st=Nn(Ee,ie=(ie%He+He)%He,le);if(this.tiles[st])return Hn(this.tiles[st],Ie);qe>1&&console.log("drilling down to z%d-%d-%d",Ee,ie,le);for(var Ve,ht=Ee,Vt=ie,Lt=le;!Ve&&ht>0;)ht--,Vt=Math.floor(Vt/2),Lt=Math.floor(Lt/2),Ve=this.tiles[Nn(ht,Vt,Lt)];return Ve&&Ve.source?(qe>1&&console.log("found parent tile z%d-%d-%d",ht,Vt,Lt),qe>1&&console.time("drilling down"),this.splitTile(Ve.source,ht,Vt,Lt,Ee,ie,le),qe>1&&console.timeEnd("drilling down"),this.tiles[st]?Hn(this.tiles[st],Ie):null):null};class ti extends g{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ie,le){return o._(this,void 0,void 0,function*(){const ye=ie.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ie=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!Ie)return null;const qe=new class{constructor(st){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.W,this.length=st.length,this._features=st}feature(st){return new class{constructor(Ve){this._feature=Ve,this.extent=o.W,this.type=Ve.type,this.properties=Ve.tags,"id"in Ve&&!isNaN(Ve.id)&&(this.id=parseInt(Ve.id,10))}loadGeometry(){if(this._feature.type===1){const Ve=[];for(const ht of this._feature.geometry)Ve.push([new o.P(ht[0],ht[1])]);return Ve}{const Ve=[];for(const ht of this._feature.geometry){const Vt=[];for(const Lt of ht)Vt.push(new o.P(Lt[0],Lt[1]));Ve.push(Vt)}return Ve}}toGeoJSON(Ve,ht,Vt){return D.call(this,Ve,ht,Vt)}}(this._features[st])}}(Ie.features);let He=We(qe);return He.byteOffset===0&&He.byteLength===He.buffer.byteLength||(He=new Uint8Array(He)),{vectorTile:qe,rawData:He.buffer}})}loadData(ie){return o._(this,void 0,void 0,function*(){var le;(le=this._pendingRequest)===null||le===void 0||le.abort();const ye=!!(ie&&ie.request&&ie.request.collectResourceTiming)&&new o.bs(ie.request);this._pendingRequest=new AbortController;try{let Ie=yield this.loadGeoJSON(ie,this._pendingRequest);if(delete this._pendingRequest,typeof Ie!="object")throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if($(Ie,!0),ie.filter){const He=o.by(ie.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(He.result==="error")throw new Error(He.value.map(Ve=>`${Ve.key}: ${Ve.message}`).join(", "));Ie={type:"FeatureCollection",features:Ie.features.filter(Ve=>He.value.evaluate({zoom:0},Ve))}}this._geoJSONIndex=ie.cluster?new ft(function({superclusterOptions:He,clusterProperties:st}){if(!st||!He)return He;const Ve={},ht={},Vt={accumulated:null,zoom:0},Lt={properties:null},Ft=Object.keys(st);for(const Sn of Ft){const[$n,Kn]=st[Sn],jn=o.by(Kn),ai=o.by(typeof $n=="string"?[$n,["accumulated"],["get",Sn]]:$n);Ve[Sn]=jn.value,ht[Sn]=ai.value}return He.map=Sn=>{Lt.properties=Sn;const $n={};for(const Kn of Ft)$n[Kn]=Ve[Kn].evaluate(Vt,Lt);return $n},He.reduce=(Sn,$n)=>{Lt.properties=$n;for(const Kn of Ft)Vt.accumulated=Sn[Kn],Sn[Kn]=ht[Kn].evaluate(Vt,Lt)},He}(ie)).load(Ie.features):function(He,st){return new Un(He,st)}(Ie,ie.geojsonVtOptions),this.loaded={};const qe={};if(ye){const He=ye.finish();He&&(qe.resourceTiming={},qe.resourceTiming[ie.source]=JSON.parse(JSON.stringify(He)))}return qe}catch(Ie){if(delete this._pendingRequest,o.bz(Ie))return{abandoned:!0};throw Ie}})}reloadTile(ie){const le=this.loaded;return le&&le[ie.uid]?super.reloadTile(ie):this.loadTile(ie)}loadGeoJSON(ie,le){return o._(this,void 0,void 0,function*(){const{promoteId:ye}=ie;if(ie.request){const Ie=yield o.h(ie.request,le);return this._dataUpdateable=hi(Ie.data,ye)?Tn(Ie.data,ye):void 0,Ie.data}if(typeof ie.data=="string")try{const Ie=JSON.parse(ie.data);return this._dataUpdateable=hi(Ie,ye)?Tn(Ie,ye):void 0,Ie}catch{throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`)}if(!ie.dataDiff)throw new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie.source}`);return function(Ie,qe,He){var st,Ve,ht,Vt;if(qe.removeAll&&Ie.clear(),qe.remove)for(const Lt of qe.remove)Ie.delete(Lt);if(qe.add)for(const Lt of qe.add){const Ft=On(Lt,He);Ft!=null&&Ie.set(Ft,Lt)}if(qe.update)for(const Lt of qe.update){let Ft=Ie.get(Lt.id);if(Ft==null)continue;const Sn=!Lt.removeAllProperties&&(((st=Lt.removeProperties)===null||st===void 0?void 0:st.length)>0||((Ve=Lt.addOrUpdateProperties)===null||Ve===void 0?void 0:Ve.length)>0);if((Lt.newGeometry||Lt.removeAllProperties||Sn)&&(Ft=Object.assign({},Ft),Ie.set(Lt.id,Ft),Sn&&(Ft.properties=Object.assign({},Ft.properties))),Lt.newGeometry&&(Ft.geometry=Lt.newGeometry),Lt.removeAllProperties)Ft.properties={};else if(((ht=Lt.removeProperties)===null||ht===void 0?void 0:ht.length)>0)for(const $n of Lt.removeProperties)Object.prototype.hasOwnProperty.call(Ft.properties,$n)&&delete Ft.properties[$n];if(((Vt=Lt.addOrUpdateProperties)===null||Vt===void 0?void 0:Vt.length)>0)for(const{key:$n,value:Kn}of Lt.addOrUpdateProperties)Ft.properties[$n]=Kn}}(this._dataUpdateable,ie.dataDiff,ye),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ie){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ie){return this._geoJSONIndex.getClusterExpansionZoom(ie.clusterId)}getClusterChildren(ie){return this._geoJSONIndex.getChildren(ie.clusterId)}getClusterLeaves(ie){return this._geoJSONIndex.getLeaves(ie.clusterId,ie.limit,ie.offset)}}class bn{constructor(ie){this.self=ie,this.actor=new o.C(ie),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(le,ye)=>{if(this.externalWorkerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.externalWorkerSourceTypes[le]=ye},this.self.addProtocol=o.bf,this.self.removeProtocol=o.bg,this.self.registerRTLTextPlugin=le=>{if(o.bA.isParsed())throw new Error("RTL text plugin already registered.");o.bA.setMethods(le)},this.actor.registerMessageHandler("LDT",(le,ye)=>this._getDEMWorkerSource(le,ye.source).loadTile(ye)),this.actor.registerMessageHandler("RDT",(le,ye)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(le,ye.source).removeTile(ye)})),this.actor.registerMessageHandler("GCEZ",(le,ye)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(le,ye.type,ye.source).getClusterExpansionZoom(ye)})),this.actor.registerMessageHandler("GCC",(le,ye)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(le,ye.type,ye.source).getClusterChildren(ye)})),this.actor.registerMessageHandler("GCL",(le,ye)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(le,ye.type,ye.source).getClusterLeaves(ye)})),this.actor.registerMessageHandler("LD",(le,ye)=>this._getWorkerSource(le,ye.type,ye.source).loadData(ye)),this.actor.registerMessageHandler("LT",(le,ye)=>this._getWorkerSource(le,ye.type,ye.source).loadTile(ye)),this.actor.registerMessageHandler("RT",(le,ye)=>this._getWorkerSource(le,ye.type,ye.source).reloadTile(ye)),this.actor.registerMessageHandler("AT",(le,ye)=>this._getWorkerSource(le,ye.type,ye.source).abortTile(ye)),this.actor.registerMessageHandler("RMT",(le,ye)=>this._getWorkerSource(le,ye.type,ye.source).removeTile(ye)),this.actor.registerMessageHandler("RS",(le,ye)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[le]||!this.workerSources[le][ye.type]||!this.workerSources[le][ye.type][ye.source])return;const Ie=this.workerSources[le][ye.type][ye.source];delete this.workerSources[le][ye.type][ye.source],Ie.removeSource!==void 0&&Ie.removeSource(ye)})),this.actor.registerMessageHandler("RM",le=>o._(this,void 0,void 0,function*(){delete this.layerIndexes[le],delete this.availableImages[le],delete this.workerSources[le],delete this.demWorkerSources[le]})),this.actor.registerMessageHandler("SR",(le,ye)=>o._(this,void 0,void 0,function*(){this.referrer=ye})),this.actor.registerMessageHandler("SRPS",(le,ye)=>this._syncRTLPluginState(le,ye)),this.actor.registerMessageHandler("IS",(le,ye)=>o._(this,void 0,void 0,function*(){this.self.importScripts(ye)})),this.actor.registerMessageHandler("SI",(le,ye)=>this._setImages(le,ye)),this.actor.registerMessageHandler("UL",(le,ye)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(le).update(ye.layers,ye.removedIds)})),this.actor.registerMessageHandler("SL",(le,ye)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(le).replace(ye)}))}_setImages(ie,le){return o._(this,void 0,void 0,function*(){this.availableImages[ie]=le;for(const ye in this.workerSources[ie]){const Ie=this.workerSources[ie][ye];for(const qe in Ie)Ie[qe].availableImages=le}})}_syncRTLPluginState(ie,le){return o._(this,void 0,void 0,function*(){if(o.bA.isParsed())return o.bA.getState();if(le.pluginStatus!=="loading")return o.bA.setState(le),le;const ye=le.pluginURL;if(this.self.importScripts(ye),o.bA.isParsed()){const Ie={pluginStatus:"loaded",pluginURL:ye};return o.bA.setState(Ie),Ie}throw o.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ye}`)})}_getAvailableImages(ie){let le=this.availableImages[ie];return le||(le=[]),le}_getLayerIndex(ie){let le=this.layerIndexes[ie];return le||(le=this.layerIndexes[ie]=new a),le}_getWorkerSource(ie,le,ye){if(this.workerSources[ie]||(this.workerSources[ie]={}),this.workerSources[ie][le]||(this.workerSources[ie][le]={}),!this.workerSources[ie][le][ye]){const Ie={sendAsync:(qe,He)=>(qe.targetMapId=ie,this.actor.sendAsync(qe,He))};switch(le){case"vector":this.workerSources[ie][le][ye]=new g(Ie,this._getLayerIndex(ie),this._getAvailableImages(ie));break;case"geojson":this.workerSources[ie][le][ye]=new ti(Ie,this._getLayerIndex(ie),this._getAvailableImages(ie));break;default:this.workerSources[ie][le][ye]=new this.externalWorkerSourceTypes[le](Ie,this._getLayerIndex(ie),this._getAvailableImages(ie))}}return this.workerSources[ie][le][ye]}_getDEMWorkerSource(ie,le){return this.demWorkerSources[ie]||(this.demWorkerSources[ie]={}),this.demWorkerSources[ie][le]||(this.demWorkerSources[ie][le]=new w),this.demWorkerSources[ie][le]}}return o.i(self)&&(self.worker=new bn(self)),bn}),r("index",["exports","./shared"],function(o,a){var l="4.1.3";let f,m;const g={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:x=>new Promise((u,p)=>{const v=requestAnimationFrame(u);x.signal.addEventListener("abort",()=>{cancelAnimationFrame(v),p(a.c())})}),getImageData(x,u=0){return this.getImageCanvasContext(x).getImageData(-u,-u,x.width+2*u,x.height+2*u)},getImageCanvasContext(x){const u=window.document.createElement("canvas"),p=u.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return u.width=x.width,u.height=x.height,p.drawImage(x,0,0,x.width,x.height),p},resolveURL:x=>(f||(f=document.createElement("a")),f.href=x,f.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(m==null&&(m=matchMedia("(prefers-reduced-motion: reduce)")),m.matches)}};class w{static testProp(u){if(!w.docStyle)return u[0];for(let p=0;p<u.length;p++)if(u[p]in w.docStyle)return u[p];return u[0]}static create(u,p,v){const b=window.document.createElement(u);return p!==void 0&&(b.className=p),v&&v.appendChild(b),b}static createNS(u,p){return window.document.createElementNS(u,p)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(u,p){u.style[w.transformProp]=p}static addEventListener(u,p,v,b={}){u.addEventListener(p,v,"passive"in b?b:b.capture)}static removeEventListener(u,p,v,b={}){u.removeEventListener(p,v,"passive"in b?b:b.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static getScale(u){const p=u.getBoundingClientRect();return{x:p.width/u.offsetWidth||1,y:p.height/u.offsetHeight||1,boundingClientRect:p}}static getPoint(u,p,v){const b=p.boundingClientRect;return new a.P((v.clientX-b.left)/p.x-u.clientLeft,(v.clientY-b.top)/p.y-u.clientTop)}static mousePos(u,p){const v=w.getScale(u);return w.getPoint(u,v,p)}static touchPos(u,p){const v=[],b=w.getScale(u);for(let k=0;k<p.length;k++)v.push(w.getPoint(u,b,p[k]));return v}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const S={supported:!1,testSupport:function(x){!D&&$&&(F?L(x):M=x)}};let M,$,D=!1,F=!1;function L(x){const u=x.createTexture();x.bindTexture(x.TEXTURE_2D,u);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,$),x.isContextLost())return;S.supported=!0}catch{}x.deleteTexture(u),D=!0}var U;typeof document<"u"&&($=document.createElement("img"),$.onload=function(){M&&L(M),M=null,F=!0},$.onerror=function(){D=!0,M=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(x){let u,p,v,b;x.resetRequestQueue=()=>{u=[],p=0,v=0,b={}},x.addThrottleControl=B=>{const q=v++;return b[q]=B,q},x.removeThrottleControl=B=>{delete b[B],O()},x.getImage=(B,q,Y=!0)=>new Promise((te,ge)=>{S.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*"),a.e(B,{type:"image"}),u.push({abortController:q,requestParameters:B,supportImageRefresh:Y,state:"queued",onError:$e=>{ge($e)},onSuccess:$e=>{te($e)}}),O()});const k=B=>a._(this,void 0,void 0,function*(){B.state="running";const{requestParameters:q,supportImageRefresh:Y,onError:te,onSuccess:ge,abortController:$e}=B,Pe=Y===!1&&!a.i(self)&&!a.g(q.url)&&(!q.headers||Object.keys(q.headers).reduce((je,gt)=>je&&gt==="accept",!0));p++;const Me=Pe?z(q,$e):a.m(q,$e);try{const je=yield Me;delete B.abortController,B.state="completed",je.data instanceof HTMLImageElement||a.b(je.data)?ge(je):je.data&&ge({data:yield(Te=je.data,typeof createImageBitmap=="function"?a.d(Te):a.f(Te)),cacheControl:je.cacheControl,expires:je.expires})}catch(je){delete B.abortController,te(je)}finally{p--,O()}var Te}),O=()=>{const B=(()=>{for(const q of Object.keys(b))if(b[q]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let q=p;q<B&&u.length>0;q++){const Y=u.shift();Y.abortController.signal.aborted?q--:k(Y)}},z=(B,q)=>new Promise((Y,te)=>{const ge=new Image,$e=B.url,Pe=B.credentials;Pe&&Pe==="include"?ge.crossOrigin="use-credentials":(Pe&&Pe==="same-origin"||!a.s($e))&&(ge.crossOrigin="anonymous"),q.signal.addEventListener("abort",()=>{ge.src="",te(a.c())}),ge.fetchPriority="high",ge.onload=()=>{ge.onerror=ge.onload=null,Y({data:ge})},ge.onerror=()=>{ge.onerror=ge.onload=null,q.signal.aborted||te(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ge.src=$e})}(U||(U={})),U.resetRequestQueue();class ne{constructor(u){this._transformRequestFn=u}transformRequest(u,p){return this._transformRequestFn&&this._transformRequestFn(u,p)||{url:u}}normalizeSpriteURL(u,p,v){const b=function(k){const O=k.match(se);if(!O)throw new Error(`Unable to parse URL "${k}"`);return{protocol:O[1],authority:O[2],path:O[3]||"/",params:O[4]?O[4].split("&"):[]}}(u);return b.path+=`${p}${v}`,function(k){const O=k.params.length?`?${k.params.join("&")}`:"";return`${k.protocol}://${k.authority}${k.path}${O}`}(b)}setTransformRequest(u){this._transformRequestFn=u}}const se=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ee(x){var u=new a.A(3);return u[0]=x[0],u[1]=x[1],u[2]=x[2],u}var fe,_e=function(x,u,p){return x[0]=u[0]-p[0],x[1]=u[1]-p[1],x[2]=u[2]-p[2],x};fe=new a.A(3),a.A!=Float32Array&&(fe[0]=0,fe[1]=0,fe[2]=0);var re=function(x){var u=x[0],p=x[1];return u*u+p*p};function de(x){const u=[];if(typeof x=="string")u.push({id:"default",url:x});else if(x&&x.length>0){const p=[];for(const{id:v,url:b}of x){const k=`${v}${b}`;p.indexOf(k)===-1&&(p.push(k),u.push({id:v,url:b}))}}return u}(function(){var x=new a.A(2);a.A!=Float32Array&&(x[0]=0,x[1]=0)})();class he{constructor(u,p,v,b){this.context=u,this.format=v,this.texture=u.gl.createTexture(),this.update(p,b)}update(u,p,v){const{width:b,height:k}=u,O=!(this.size&&this.size[0]===b&&this.size[1]===k||v),{context:z}=this,{gl:B}=z;if(this.useMipmap=!!(p&&p.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!p||p.premultiply!==!1)),O)this.size=[b,k],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.b(u)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,u):B.texImage2D(B.TEXTURE_2D,0,this.format,b,k,0,this.format,B.UNSIGNED_BYTE,u.data);else{const{x:q,y:Y}=v||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||a.b(u)?B.texSubImage2D(B.TEXTURE_2D,0,q,Y,B.RGBA,B.UNSIGNED_BYTE,u):B.texSubImage2D(B.TEXTURE_2D,0,q,Y,b,k,B.RGBA,B.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(u,p,v){const{context:b}=this,{gl:k}=b;k.bindTexture(k.TEXTURE_2D,this.texture),v!==k.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=k.LINEAR),u!==this.filter&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,u),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,v||u),this.filter=u),p!==this.wrap&&(k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,p),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function X(x){const{userImage:u}=x;return!!(u&&u.render&&u.render())&&(x.data.replace(new Uint8Array(u.data.buffer)),!0)}class j extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:p,promiseResolve:v}of this.requestors)v(this._getImagesForIds(p));this.requestors=[]}}getImage(u){const p=this.images[u];if(p&&!p.data&&p.spriteData){const v=p.spriteData;p.data=new a.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),p.spriteData=null}return p}addImage(u,p){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,p)&&(this.images[u]=p)}_validate(u,p){let v=!0;const b=p.data||p.spriteData;return this._validateStretch(p.stretchX,b&&b.width)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchX" value`))),v=!1),this._validateStretch(p.stretchY,b&&b.height)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "stretchY" value`))),v=!1),this._validateContent(p.content,p)||(this.fire(new a.j(new Error(`Image "${u}" has invalid "content" value`))),v=!1),v}_validateStretch(u,p){if(!u)return!0;let v=0;for(const b of u){if(b[0]<v||b[1]<b[0]||p<b[1])return!1;v=b[1]}return!0}_validateContent(u,p){if(!u)return!0;if(u.length!==4)return!1;const v=p.spriteData,b=v&&v.width||p.data.width,k=v&&v.height||p.data.height;return!(u[0]<0||b<u[0]||u[1]<0||k<u[1]||u[2]<0||b<u[2]||u[3]<0||k<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,p,v=!0){const b=this.getImage(u);if(v&&(b.data.width!==p.data.width||b.data.height!==p.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=b.version+1,this.images[u]=p,this.updatedImages[u]=!0}removeImage(u){const p=this.images[u];delete this.images[u],delete this.patterns[u],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise((p,v)=>{let b=!0;if(!this.isLoaded())for(const k of u)this.images[k]||(b=!1);this.isLoaded()||b?p(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:p})})}_getImagesForIds(u){const p={};for(const v of u){let b=this.getImage(v);b||(this.fire(new a.k("styleimagemissing",{id:v})),b=this.getImage(v)),b?p[v]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:a.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:u,height:p}=this.atlasImage;return{width:u,height:p}}getPattern(u){const p=this.patterns[u],v=this.getImage(u);if(!v)return null;if(p&&p.position.version===v.version)return p.position;if(p)p.position.version=v.version;else{const b={w:v.data.width+2,h:v.data.height+2,x:0,y:0},k=new a.I(b,v);this.patterns[u]={bin:b,position:k}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const p=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new he(u,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const k in this.patterns)u.push(this.patterns[k].bin);const{w:p,h:v}=a.p(u),b=this.atlasImage;b.resize({width:p||1,height:v||1});for(const k in this.patterns){const{bin:O}=this.patterns[k],z=O.x+1,B=O.y+1,q=this.getImage(k).data,Y=q.width,te=q.height;a.R.copy(q,b,{x:0,y:0},{x:z,y:B},{width:Y,height:te}),a.R.copy(q,b,{x:0,y:te-1},{x:z,y:B-1},{width:Y,height:1}),a.R.copy(q,b,{x:0,y:0},{x:z,y:B+te},{width:Y,height:1}),a.R.copy(q,b,{x:Y-1,y:0},{x:z-1,y:B},{width:1,height:te}),a.R.copy(q,b,{x:0,y:0},{x:z+Y,y:B},{width:1,height:te})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const p of u){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const v=this.getImage(p);v||a.w(`Image with ID: "${p}" was not found`),X(v)&&this.updateImage(p,v)}}}const xe=1e20;function ze(x,u,p,v,b,k,O,z,B){for(let q=u;q<u+v;q++)ve(x,p*k+q,k,b,O,z,B);for(let q=p;q<p+b;q++)ve(x,q*k+u,1,v,O,z,B)}function ve(x,u,p,v,b,k,O){k[0]=0,O[0]=-xe,O[1]=xe,b[0]=x[u];for(let z=1,B=0,q=0;z<v;z++){b[z]=x[u+z*p];const Y=z*z;do{const te=k[B];q=(b[z]-b[te]+Y-te*te)/(z-te)/2}while(q<=O[B]&&--B>-1);B++,k[B]=z,O[B]=q,O[B+1]=xe}for(let z=0,B=0;z<v;z++){for(;O[B+1]<z;)B++;const q=k[B],Y=z-q;x[u+z*p]=b[q]+Y*Y}}class We{constructor(u,p){this.requestManager=u,this.localIdeographFontFamily=p,this.entries={}}setURL(u){this.url=u}getGlyphs(u){return a._(this,void 0,void 0,function*(){const p=[];for(const k in u)for(const O of u[k])p.push(this._getAndCacheGlyphsPromise(k,O));const v=yield Promise.all(p),b={};for(const{stack:k,id:O,glyph:z}of v)b[k]||(b[k]={}),b[k][O]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};return b})}_getAndCacheGlyphsPromise(u,p){return a._(this,void 0,void 0,function*(){let v=this.entries[u];v||(v=this.entries[u]={glyphs:{},requests:{},ranges:{}});let b=v.glyphs[p];if(b!==void 0)return{stack:u,id:p,glyph:b};if(b=this._tinySDF(v,u,p),b)return v.glyphs[p]=b,{stack:u,id:p,glyph:b};const k=Math.floor(p/256);if(256*k>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[k])return{stack:u,id:p,glyph:b};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[k]){const z=We.loadGlyphRange(u,k,this.url,this.requestManager);v.requests[k]=z}const O=yield v.requests[k];for(const z in O)this._doesCharSupportLocalGlyph(+z)||(v.glyphs[+z]=O[+z]);return v.ranges[k]=!0,{stack:u,id:p,glyph:O[p]||null}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(a.u["CJK Unified Ideographs"](u)||a.u["Hangul Syllables"](u)||a.u.Hiragana(u)||a.u.Katakana(u))}_tinySDF(u,p,v){const b=this.localIdeographFontFamily;if(!b||!this._doesCharSupportLocalGlyph(v))return;let k=u.tinySDF;if(!k){let z="400";/bold/i.test(p)?z="900":/medium/i.test(p)?z="500":/light/i.test(p)&&(z="200"),k=u.tinySDF=new We.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:b,fontWeight:z})}const O=k.draw(String.fromCharCode(v));return{id:v,bitmap:new a.o({width:O.width||60,height:O.height||60},O.data),metrics:{width:O.glyphWidth/2||24,height:O.glyphHeight/2||24,left:O.glyphLeft/2+.5||0,top:O.glyphTop/2-27.5||-8,advance:O.glyphAdvance/2||24,isDoubleResolution:!0}}}}We.loadGlyphRange=function(x,u,p,v){return a._(this,void 0,void 0,function*(){const b=256*u,k=b+255,O=v.transformRequest(p.replace("{fontstack}",x).replace("{range}",`${b}-${k}`),"Glyphs"),z=yield a.l(O,new AbortController);if(!z||!z.data)throw new Error(`Could not load glyph range. range: ${u}, ${b}-${k}`);const B={};for(const q of a.n(z.data))B[q.id]=q;return B})},We.TinySDF=class{constructor({fontSize:x=24,buffer:u=3,radius:p=8,cutoff:v=.25,fontFamily:b="sans-serif",fontWeight:k="normal",fontStyle:O="normal"}={}){this.buffer=u,this.cutoff=v,this.radius=p;const z=this.size=x+4*u,B=this._createCanvas(z),q=this.ctx=B.getContext("2d",{willReadFrequently:!0});q.font=`${O} ${k} ${x}px ${b}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(x){const u=document.createElement("canvas");return u.width=u.height=x,u}draw(x){const{width:u,actualBoundingBoxAscent:p,actualBoundingBoxDescent:v,actualBoundingBoxLeft:b,actualBoundingBoxRight:k}=this.ctx.measureText(x),O=Math.ceil(p),z=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(k-b))),B=Math.min(this.size-this.buffer,O+Math.ceil(v)),q=z+2*this.buffer,Y=B+2*this.buffer,te=Math.max(q*Y,0),ge=new Uint8ClampedArray(te),$e={data:ge,width:q,height:Y,glyphWidth:z,glyphHeight:B,glyphTop:O,glyphLeft:0,glyphAdvance:u};if(z===0||B===0)return $e;const{ctx:Pe,buffer:Me,gridInner:Te,gridOuter:je}=this;Pe.clearRect(Me,Me,z,B),Pe.fillText(x,Me,Me+O);const gt=Pe.getImageData(Me,Me,z,B);je.fill(xe,0,te),Te.fill(0,0,te);for(let De=0;De<B;De++)for(let Qe=0;Qe<z;Qe++){const vt=gt.data[4*(De*z+Qe)+3]/255;if(vt===0)continue;const xt=(De+Me)*q+Qe+Me;if(vt===1)je[xt]=0,Te[xt]=xe;else{const Tt=.5-vt;je[xt]=Tt>0?Tt*Tt:0,Te[xt]=Tt<0?Tt*Tt:0}}ze(je,0,0,q,Y,q,this.f,this.v,this.z),ze(Te,Me,Me,z,B,q,this.f,this.v,this.z);for(let De=0;De<te;De++){const Qe=Math.sqrt(je[De])-Math.sqrt(Te[De]);ge[De]=Math.round(255-255*(Qe/this.radius+this.cutoff))}return $e}};class pt{constructor(){this.specification=a.v.light.position}possiblyEvaluate(u,p){return a.y(u.expression.evaluate(p))}interpolate(u,p,v){return{x:a.z.number(u.x,p.x,v),y:a.z.number(u.y,p.y,v),z:a.z.number(u.z,p.z,v)}}}let Mt;class St extends a.E{constructor(u){super(),Mt=Mt||new a.q({anchor:new a.D(a.v.light.anchor),position:new pt,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(Mt),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,p={}){if(!this._validate(a.r,u,p))for(const v in u){const b=u[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),b):this._transitionable.setValue(v,b)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,v){return(!v||v.validate!==!1)&&a.t(this,u.call(a.x,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}class Dt{constructor(u,p){this.width=u,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,p){const v=u.join(",")+String(p);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(u,p)),this.dashEntry[v]}getDashRanges(u,p,v){const b=[];let k=u.length%2==1?-u[u.length-1]*v:0,O=u[0]*v,z=!0;b.push({left:k,right:O,isDash:z,zeroLength:u[0]===0});let B=u[0];for(let q=1;q<u.length;q++){z=!z;const Y=u[q];k=B*v,B+=Y,O=B*v,b.push({left:k,right:O,isDash:z,zeroLength:Y===0})}return b}addRoundDash(u,p,v){const b=p/2;for(let k=-v;k<=v;k++){const O=this.width*(this.nextRow+v+k);let z=0,B=u[z];for(let q=0;q<this.width;q++){q/B.right>1&&(B=u[++z]);const Y=Math.abs(q-B.left),te=Math.abs(q-B.right),ge=Math.min(Y,te);let $e;const Pe=k/v*(b+1);if(B.isDash){const Me=b-Math.abs(Pe);$e=Math.sqrt(ge*ge+Me*Me)}else $e=b-Math.sqrt(ge*ge+Pe*Pe);this.data[O+q]=Math.max(0,Math.min(255,$e+128))}}}addRegularDash(u){for(let z=u.length-1;z>=0;--z){const B=u[z],q=u[z+1];B.zeroLength?u.splice(z,1):q&&q.isDash===B.isDash&&(q.left=B.left,u.splice(z,1))}const p=u[0],v=u[u.length-1];p.isDash===v.isDash&&(p.left=v.left-this.width,v.right=p.right+this.width);const b=this.width*this.nextRow;let k=0,O=u[k];for(let z=0;z<this.width;z++){z/O.right>1&&(O=u[++k]);const B=Math.abs(z-O.left),q=Math.abs(z-O.right),Y=Math.min(B,q);this.data[b+z]=Math.max(0,Math.min(255,(O.isDash?Y:-Y)+128))}}addDash(u,p){const v=p?7:0,b=2*v+1;if(this.nextRow+b>this.height)return a.w("LineAtlas out of space"),null;let k=0;for(let z=0;z<u.length;z++)k+=u[z];if(k!==0){const z=this.width/k,B=this.getDashRanges(u,this.width,z);p?this.addRoundDash(B,z,v):this.addRegularDash(B)}const O={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:k};return this.nextRow+=b,this.dirty=!0,O}bind(u){const p=u.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const zt="maplibre_preloaded_worker_pool";class _t{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<_t.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const ft=Math.floor(g.hardwareConcurrency/2);let Be,Ut;function Rt(){return Be||(Be=new _t),Be}_t.workerCount=a.B(globalThis)?Math.max(Math.min(ft,3),1):1;class qt{constructor(u,p){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=p;const v=this.workerPool.acquire(p);for(let b=0;b<v.length;b++){const k=new a.C(v[b],p);k.name=`Worker ${b}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,p){const v=[];for(const b of this.actors)v.push(b.sendAsync({type:u,data:p}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,p){for(const v of this.actors)v.registerMessageHandler(u,p)}}function et(){return Ut||(Ut=new qt(Rt(),a.G),Ut.registerMessageHandler("GR",(x,u,p)=>a.m(u,p))),Ut}function dt(x,u){const p=a.F();return a.H(p,p,[1,1,0]),a.J(p,p,[.5*x.width,.5*x.height,1]),a.K(p,p,x.calculatePosMatrix(u.toUnwrapped()))}function yt(x,u,p,v,b,k){const O=function(te,ge,$e){if(te)for(const Pe of te){const Me=ge[Pe];if(Me&&Me.source===$e&&Me.type==="fill-extrusion")return!0}else for(const Pe in ge){const Me=ge[Pe];if(Me.source===$e&&Me.type==="fill-extrusion")return!0}return!1}(b&&b.layers,u,x.id),z=k.maxPitchScaleFactor(),B=x.tilesIn(v,z,O);B.sort(Ue);const q=[];for(const te of B)q.push({wrappedTileID:te.tileID.wrapped().key,queryResults:te.tile.queryRenderedFeatures(u,p,x._state,te.queryGeometry,te.cameraQueryGeometry,te.scale,b,k,z,dt(x.transform,te.tileID))});const Y=function(te){const ge={},$e={};for(const Pe of te){const Me=Pe.queryResults,Te=Pe.wrappedTileID,je=$e[Te]=$e[Te]||{};for(const gt in Me){const De=Me[gt],Qe=je[gt]=je[gt]||{},vt=ge[gt]=ge[gt]||[];for(const xt of De)Qe[xt.featureIndex]||(Qe[xt.featureIndex]=!0,vt.push(xt))}}return ge}(q);for(const te in Y)Y[te].forEach(ge=>{const $e=ge.feature,Pe=x.getFeatureState($e.layer["source-layer"],$e.id);$e.source=$e.layer.source,$e.layer["source-layer"]&&($e.sourceLayer=$e.layer["source-layer"]),$e.state=Pe});return Y}function Ue(x,u){const p=x.tileID,v=u.tileID;return p.overscaledZ-v.overscaledZ||p.canonical.y-v.canonical.y||p.wrap-v.wrap||p.canonical.x-v.canonical.x}function kt(x,u,p){return a._(this,void 0,void 0,function*(){let v=x;if(x.url?v=(yield a.h(u.transformRequest(x.url,"Source"),p)).data:yield g.frameAsync(p),!v)return null;const b=a.L(a.e(v,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(b.vectorLayerIds=v.vector_layers.map(k=>k.id)),b})}class Ge{constructor(u,p){u&&(p?this.setSouthWest(u).setNorthEast(p):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof a.M?new a.M(u.lng,u.lat):a.M.convert(u),this}setSouthWest(u){return this._sw=u instanceof a.M?new a.M(u.lng,u.lat):a.M.convert(u),this}extend(u){const p=this._sw,v=this._ne;let b,k;if(u instanceof a.M)b=u,k=u;else{if(!(u instanceof Ge))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(Ge.convert(u)):this.extend(a.M.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(a.M.convert(u)):this;if(b=u._sw,k=u._ne,!b||!k)return this}return p||v?(p.lng=Math.min(b.lng,p.lng),p.lat=Math.min(b.lat,p.lat),v.lng=Math.max(k.lng,v.lng),v.lat=Math.max(k.lat,v.lat)):(this._sw=new a.M(b.lng,b.lat),this._ne=new a.M(k.lng,k.lat)),this}getCenter(){return new a.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.M(this.getWest(),this.getNorth())}getSouthEast(){return new a.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:p,lat:v}=a.M.convert(u);let b=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&b}static convert(u){return u instanceof Ge?u:u&&new Ge(u)}static fromLngLat(u,p=0){const v=360*p/40075017,b=v/Math.cos(Math.PI/180*u.lat);return new Ge(new a.M(u.lng-b,u.lat-v),new a.M(u.lng+b,u.lat+v))}}class Xt{constructor(u,p,v){this.bounds=Ge.convert(this.validateBounds(u)),this.minzoom=p||0,this.maxzoom=v||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const p=Math.pow(2,u.z),v=Math.floor(a.N(this.bounds.getWest())*p),b=Math.floor(a.O(this.bounds.getNorth())*p),k=Math.ceil(a.N(this.bounds.getEast())*p),O=Math.ceil(a.O(this.bounds.getSouth())*p);return u.x>=v&&u.x<k&&u.y>=b&&u.y<O}}class En extends a.E{constructor(u,p,v,b){if(super(),this.id=u,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.L(p,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield kt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u&&(a.e(this,u),u.bounds&&(this.tileBounds=new Xt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new a.j(u))}})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(u){return a._(this,void 0,void 0,function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(p,"Tile"),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};v.request.collectResourceTiming=this._collectResourceTiming;let b="RT";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise((k,O)=>{u.reloadPromise={resolve:k,reject:O}})}else u.actor=this.dispatcher.getActor(),b="LT";u.abortController=new AbortController;try{const k=yield u.actor.sendAsync({type:b,data:v},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,k)}catch(k){if(delete u.abortController,u.aborted)return;if(k&&k.status!==404)throw k;this._afterTileLoadWorkerResponse(u,null)}})}_afterTileLoadWorkerResponse(u,p){if(p&&p.resourceTiming&&(u.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&u.setExpiryData(p),u.loadVectorData(p,this.map.painter),u.reloadPromise){const v=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(v.resolve).catch(v.reject)}}abortTile(u){return a._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"AT",data:{uid:u.uid,type:this.type,source:this.id}}))})}unloadTile(u){return a._(this,void 0,void 0,function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Oe extends a.E{constructor(u,p,v,b){super(),this.id=u,this.dispatcher=v,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},p),a.e(this,a.L(p,["url","scheme","tileSize"]))}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield kt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(a.e(this,u),u.bounds&&(this.tileBounds=new Xt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new a.j(u))}})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}serialize(){return a.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return a._(this,void 0,void 0,function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const v=yield U.getImage(this.map._requestManager.transformRequest(p,"Tile"),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&u.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const b=this.map.painter.context,k=b.gl,O=v.data;u.texture=this.map.painter.getTileTexture(O.width),u.texture?u.texture.update(O,{useMipmap:!0}):(u.texture=new he(b,O,k.RGBA,{useMipmap:!0}),u.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),b.extTextureFilterAnisotropic&&k.texParameterf(k.TEXTURE_2D,b.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,b.extTextureFilterAnisotropicMax)),u.state="loaded"}}catch(v){if(delete u.abortController,u.aborted)u.state="unloaded";else if(v)throw u.state="errored",v}})}abortTile(u){return a._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)})}unloadTile(u){return a._(this,void 0,void 0,function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)})}hasTransition(){return!1}}class un extends Oe{constructor(u,p,v,b){super(u,p,v,b),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(u){return a._(this,void 0,void 0,function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(p,"Tile");u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const b=yield U.getImage(v,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(b&&b.data){const k=b.data;this.map._refreshExpiredTiles&&b.cacheControl&&b.expires&&u.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const O=a.b(k)&&a.S()?k:yield this.readImageNow(k),z={type:this.type,uid:u.uid,source:this.id,rawImageData:O,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const B=yield u.actor.sendAsync({type:"LDT",data:z});u.dem=B,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(b){if(delete u.abortController,u.aborted)u.state="unloaded";else if(b)throw u.state="errored",b}})}readImageNow(u){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.U()){const p=u.width+2,v=u.height+2;try{return new a.R({width:p,height:v},yield a.V(u,-1,-1,p,v))}catch{}}return g.getImageData(u,1)})}_getNeighboringTiles(u){const p=u.canonical,v=Math.pow(2,p.z),b=(p.x-1+v)%v,k=p.x===0?u.wrap-1:u.wrap,O=(p.x+1+v)%v,z=p.x+1===v?u.wrap+1:u.wrap,B={};return B[new a.Q(u.overscaledZ,k,p.z,b,p.y).key]={backfilled:!1},B[new a.Q(u.overscaledZ,z,p.z,O,p.y).key]={backfilled:!1},p.y>0&&(B[new a.Q(u.overscaledZ,k,p.z,b,p.y-1).key]={backfilled:!1},B[new a.Q(u.overscaledZ,u.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},B[new a.Q(u.overscaledZ,z,p.z,O,p.y-1).key]={backfilled:!1}),p.y+1<v&&(B[new a.Q(u.overscaledZ,k,p.z,b,p.y+1).key]={backfilled:!1},B[new a.Q(u.overscaledZ,u.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},B[new a.Q(u.overscaledZ,z,p.z,O,p.y+1).key]={backfilled:!1}),B}unloadTile(u){return a._(this,void 0,void 0,function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"RDT",data:{type:this.type,uid:u.uid,source:this.id}}))})}}class qn extends a.E{constructor(u,p,v,b){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(b),this._data=p.data,this._options=a.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const k=a.W/this.tileSize;this.workerOptions=a.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*k,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*k,extent:a.W,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:a.W,radius:(p.clusterRadius||50)*k,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,p,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:u,limit:p,offset:v}})}_updateWorkerData(u){return a._(this,void 0,void 0,function*(){const p=a.e({type:this.type},this.workerOptions);u?p.dataDiff=u:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(g.resolveURL(this._data),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.k("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:p});if(this._pendingLoads--,this._removed||v.abandoned)return void this.fire(new a.k("dataabort",{dataType:"source"}));let b=null;v.resourceTiming&&v.resourceTiming[this.id]&&(b=v.resourceTiming[this.id].slice(0));const k={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&a.e(k,{resourceTiming:b}),this.fire(new a.k("data",Object.assign(Object.assign({},k),{sourceDataType:"metadata"}))),this.fire(new a.k("data",Object.assign(Object.assign({},k),{sourceDataType:"content"})))}catch(v){if(this._pendingLoads--,this._removed)return void this.fire(new a.k("dataabort",{dataType:"source"}));this.fire(new a.j(v))}})}loaded(){return this._pendingLoads===0}loadTile(u){return a._(this,void 0,void 0,function*(){const p=u.actor?"RT":"LT";u.actor=this.actor;const v={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.abortController=new AbortController;const b=yield this.actor.sendAsync({type:p,data:v},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(b,this.map.painter,p==="RT")})}abortTile(u){return a._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0})}unloadTile(u){return a._(this,void 0,void 0,function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var _n=a.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class mt extends a.E{constructor(u,p,v,b){super(),this.id=u,this.dispatcher=v,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=p}load(u){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield U.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,u&&(this.coordinates=u),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new a.j(p))}})}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const p=u.map(a.Y.fromLngLat);this.tileID=function(b){let k=1/0,O=1/0,z=-1/0,B=-1/0;for(const ge of b)k=Math.min(k,ge.x),O=Math.min(O,ge.y),z=Math.max(z,ge.x),B=Math.max(B,ge.y);const q=Math.max(z-k,B-O),Y=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),te=Math.pow(2,Y);return new a.a0(Y,Math.floor((k+z)/2*te),Math.floor((O+B)/2*te))}(p),this.minzoom=this.maxzoom=this.tileID.z;const v=p.map(b=>this.tileID.getTilePoint(b)._round());return this._boundsArray=new a.Z,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,a.W,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,a.W),this._boundsArray.emplaceBack(v[2].x,v[2].y,a.W,a.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,_n.members)),this.boundsSegments||(this.boundsSegments=a.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new he(u,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let v=!1;for(const b in this.tiles){const k=this.tiles[b];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,v=!0)}v&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Zt extends mt{constructor(u,p,v,b){super(u,p,v,b),this.roundZoom=!0,this.type="video",this.options=p}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const p of u.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield a.a2(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new a.j(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const p=this.video.seekable;u<p.start(0)||u>p.end(0)?this.fire(new a.j(new a.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,_n.members)),this.boundsSegments||(this.boundsSegments=a.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new he(u,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let v=!1;for(const b in this.tiles){const k=this.tiles[b];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,v=!0)}v&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Kt extends mt{constructor(u,p,v,b){super(u,p,v,b),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(k=>!Array.isArray(k)||k.length!==2||k.some(O=>typeof O!="number"))||this.fire(new a.j(new a.a1(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.j(new a.a1(`sources.${u}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new a.j(new a.a1(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new a.j(new a.a1(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.j(new a.a1(`sources.${u}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,v=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,_n.members)),this.boundsSegments||(this.boundsSegments=a.$.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new he(p,this.canvas,v.RGBA,{premultiply:!0});let b=!1;for(const k in this.tiles){const O=this.tiles[k];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,b=!0)}b&&this.fire(new a.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const en={},Pn=x=>{switch(x){case"geojson":return qn;case"image":return mt;case"raster":return Oe;case"raster-dem":return un;case"vector":return En;case"video":return Zt;case"canvas":return Kt}return en[x]},Vn="RTLPluginLoaded";class yi extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=et()}_syncState(u){return this.status=u,this.dispatcher.broadcast("SRPS",{pluginStatus:u,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return a._(this,arguments,void 0,function*(p,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=g.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.k(Vn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let wt=null;function $t(){return wt||(wt=new yi),wt}class Hn{constructor(u,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=a.a3(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const p=u+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,p,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(b,k){const O={};if(!k)return O;for(const z of b){const B=z.layerIds.map(q=>k.getLayer(q)).filter(Boolean);if(B.length!==0){z.layers=B,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(q=>B.filter(Y=>Y.id===q)[0]));for(const q of B)O[q.id]=z}}return O}(u.buckets,p.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const k=this.buckets[b];if(k instanceof a.a5){if(this.hasSymbolBuckets=!0,!v)break;k.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const k=this.buckets[b];if(k instanceof a.a5&&k.hasRTLText){this.hasRTLText=!0,$t().lazyLoad();break}}this.queryPadding=0;for(const b in this.buckets){const k=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(b).queryRadius(k))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new a.a4}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const v in this.buckets){const b=this.buckets[v];b.uploadPending()&&b.upload(u)}const p=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new he(u,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new he(u,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,p,v,b,k,O,z,B,q,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:k,scale:O,tileSize:this.tileSize,pixelPosMatrix:Y,transform:B,params:z,queryPadding:this.queryPadding*q},u,p,v):{}}querySourceFeatures(u,p){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const b=v.loadVTLayers(),k=p&&p.sourceLayer?p.sourceLayer:"",O=b._geojsonTileLayer||b[k];if(!O)return;const z=a.a6(p&&p.filter),{z:B,x:q,y:Y}=this.tileID.canonical,te={z:B,x:q,y:Y};for(let ge=0;ge<O.length;ge++){const $e=O.feature(ge);if(z.needGeometry){const Te=a.a7($e,!0);if(!z.filter(new a.a8(this.tileID.overscaledZ),Te,this.tileID.canonical))continue}else if(!z.filter(new a.a8(this.tileID.overscaledZ),$e))continue;const Pe=v.getId($e,k),Me=new a.a9($e,B,q,Y,Pe);Me.tile=te,u.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const p=this.expirationTime;if(u.cacheControl){const v=a.aa(u.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const v=Date.now();let b=!1;if(this.expirationTime>v)b=!1;else if(p)if(this.expirationTime<p)b=!0;else{const k=this.expirationTime-p;k?this.expirationTime=v+Math.max(k,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!p.style.hasLayer(b))continue;const k=this.buckets[b],O=k.layers[0].sourceLayer||"_geojsonTileLayer",z=v[O],B=u[O];if(!z||!B||Object.keys(B).length===0)continue;k.update(B,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const q=p&&p.style&&p.style.getLayer(b);q&&(this.queryPadding=Math.max(this.queryPadding,q.queryRadius(k)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<g.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=g.now()+u}setDependencies(u,p){const v={};for(const b of p)v[b]=!0;this.dependencies[u]=v}hasDependency(u,p){for(const v of u){const b=this.dependencies[v];if(b){for(const k of p)if(b[k])return!0}}return!1}}class Mn{constructor(u,p){this.max=u,this.onRemove=p,this.reset()}reset(){for(const u in this.data)for(const p of this.data[u])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(u,p,v){const b=u.wrapped().key;this.data[b]===void 0&&(this.data[b]=[]);const k={value:p,timeout:void 0};if(v!==void 0&&(k.timeout=setTimeout(()=>{this.remove(u,k)},v)),this.data[b].push(k),this.order.push(b),this.order.length>this.max){const O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const p=this.data[u].shift();return p.timeout&&clearTimeout(p.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),p.value}getByKey(u){const p=this.data[u];return p?p[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,p){if(!this.has(u))return this;const v=u.wrapped().key,b=p===void 0?0:this.data[v].indexOf(p),k=this.data[v][b];return this.data[v].splice(b,1),k.timeout&&clearTimeout(k.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(k.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(u){const p=[];for(const v in this.data)for(const b of this.data[v])u(b.value)||p.push(b);for(const v of p)this.remove(v.value.tileID,v)}}class ei{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,p,v){const b=String(p);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][b]=this.stateChanges[u][b]||{},a.e(this.stateChanges[u][b],v),this.deletedStates[u]===null){this.deletedStates[u]={};for(const k in this.state[u])k!==b&&(this.deletedStates[u][k]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][b]===null){this.deletedStates[u][b]={};for(const k in this.state[u][b])v[k]||(this.deletedStates[u][b][k]=null)}else for(const k in v)this.deletedStates[u]&&this.deletedStates[u][b]&&this.deletedStates[u][b][k]===null&&delete this.deletedStates[u][b][k]}removeFeatureState(u,p,v){if(this.deletedStates[u]===null)return;const b=String(p);if(this.deletedStates[u]=this.deletedStates[u]||{},v&&p!==void 0)this.deletedStates[u][b]!==null&&(this.deletedStates[u][b]=this.deletedStates[u][b]||{},this.deletedStates[u][b][v]=null);else if(p!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][b])for(v in this.deletedStates[u][b]={},this.stateChanges[u][b])this.deletedStates[u][b][v]=null;else this.deletedStates[u][b]=null;else this.deletedStates[u]=null}getState(u,p){const v=String(p),b=a.e({},(this.state[u]||{})[v],(this.stateChanges[u]||{})[v]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const k=this.deletedStates[u][p];if(k===null)return{};for(const O in k)delete b[O]}return b}initializeTileState(u,p){u.setFeatureState(this.state,p)}coalesceChanges(u,p){const v={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const k={};for(const O in this.stateChanges[b])this.state[b][O]||(this.state[b][O]={}),a.e(this.state[b][O],this.stateChanges[b][O]),k[O]=this.state[b][O];v[b]=k}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const k={};if(this.deletedStates[b]===null)for(const O in this.state[b])k[O]={},this.state[b][O]={};else for(const O in this.deletedStates[b]){if(this.deletedStates[b][O]===null)this.state[b][O]={};else for(const z of Object.keys(this.deletedStates[b][O]))delete this.state[b][O][z];k[O]=this.state[b][O]}v[b]=v[b]||{},a.e(v[b],k)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const b in u)u[b].setFeatureState(v,p)}}class xi extends a.E{constructor(u,p,v){super(),this.id=u,this.dispatcher=v,this.on("data",b=>this._dataHandler(b)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((b,k,O,z)=>{const B=new(Pn(k.type))(b,k,O,z);if(B.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${B.id}`);return B})(u,p,v,this),this._tiles={},this._cache=new Mn(0,b=>this._unloadTile(b)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ei,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const p=this._tiles[u];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,p,v){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,p,v)}catch(b){u.state="errored",b.status!==404?this._source.fire(new a.j(b,{tile:u})):this.update(this.transform,this.terrain)}})}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new a.k("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const v=this._tiles[p];v.upload(u),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(tn).map(u=>u.key)}getRenderableIds(u){const p=[];for(const v in this._tiles)this._isIdRenderable(v,u)&&p.push(this._tiles[v]);return u?p.sort((v,b)=>{const k=v.tileID,O=b.tileID,z=new a.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle),B=new a.P(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return k.overscaledZ-O.overscaledZ||B.y-z.y||B.x-z.x}).map(v=>v.tileID.key):p.map(v=>v.tileID).sort(tn).map(v=>v.key)}hasRenderableParent(u){const p=this.findLoadedParent(u,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(u,p){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(p||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,p){return a._(this,void 0,void 0,function*(){const v=this._tiles[u];v&&(v.state!=="loading"&&(v.state=p),yield this._loadTile(v,u,p))})}_tileLoaded(u,p,v){u.timeAdded=g.now(),v==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(p,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new a.k("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const p=this.getRenderableIds();for(let b=0;b<p.length;b++){const k=p[b];if(u.neighboringTiles&&u.neighboringTiles[k]){const O=this.getTileByID(k);v(u,O),v(O,u)}}function v(b,k){b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let O=k.tileID.canonical.x-b.tileID.canonical.x;const z=k.tileID.canonical.y-b.tileID.canonical.y,B=Math.pow(2,b.tileID.canonical.z),q=k.tileID.key;O===0&&z===0||Math.abs(z)>1||(Math.abs(O)>1&&(Math.abs(O+B)===1?O+=B:Math.abs(O-B)===1&&(O-=B)),k.dem&&b.dem&&(b.dem.backfillBorder(k.dem,O,z),b.neighboringTiles&&b.neighboringTiles[q]&&(b.neighboringTiles[q].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,p,v,b){for(const k in this._tiles){let O=this._tiles[k];if(b[k]||!O.hasData()||O.tileID.overscaledZ<=p||O.tileID.overscaledZ>v)continue;let z=O.tileID;for(;O&&O.tileID.overscaledZ>p+1;){const q=O.tileID.scaledTo(O.tileID.overscaledZ-1);O=this._tiles[q.key],O&&O.hasData()&&(z=q)}let B=z;for(;B.overscaledZ>p;)if(B=B.scaledTo(B.overscaledZ-1),u[B.key]){b[z.key]=z;break}}}findLoadedParent(u,p){if(u.key in this._loadedParentTiles){const v=this._loadedParentTiles[u.key];return v&&v.tileID.overscaledZ>=p?v:null}for(let v=u.overscaledZ-1;v>=p;v--){const b=u.scaledTo(v),k=this._getLoadedTile(b);if(k)return k}}_getLoadedTile(u){const p=this._tiles[u.key];return p&&p.hasData()?p:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const p=Math.ceil(u.width/this._source.tileSize)+1,v=Math.ceil(u.height/this._source.tileSize)+1,b=Math.floor(p*v*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._cache.setMaxSize(k)}handleWrapJump(u){const p=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,p){const v={};for(const b in this._tiles){const k=this._tiles[b];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+p),v[k.tileID.key]=k}this._tiles=v;for(const b in this._timers)clearTimeout(this._timers[b]),delete this._timers[b];for(const b in this._tiles)this._setTileReloadTimer(b,this._tiles[b])}}update(u,p){if(!this._sourceLoaded||this._paused)return;let v;this.transform=u,this.terrain=p,this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(Y=>new a.Q(Y.canonical.z,Y.wrap,Y.canonical.z,Y.canonical.x,Y.canonical.y)):(v=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(v=v.filter(Y=>this._source.hasTile(Y)))):v=[];const b=u.coveringZoomLevel(this._source),k=Math.max(b-xi.maxOverzooming,this._source.minzoom),O=Math.max(b+xi.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const Y={};for(const te of v)if(te.canonical.z>this._source.minzoom){const ge=te.scaledTo(te.canonical.z-1);Y[ge.key]=ge;const $e=te.scaledTo(Math.max(this._source.minzoom,Math.min(te.canonical.z,5)));Y[$e.key]=$e}v=v.concat(Object.values(Y))}const z=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,z&&this.fire(new a.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=this._updateRetainedTiles(v,b);if(Un(this._source.type)){const Y={},te={},ge=Object.keys(B),$e=g.now();for(const Pe of ge){const Me=B[Pe],Te=this._tiles[Pe];if(!Te||Te.fadeEndTime!==0&&Te.fadeEndTime<=$e)continue;const je=this.findLoadedParent(Me,k);je&&(this._addTile(je.tileID),Y[je.tileID.key]=je.tileID),te[Pe]=Me}this._retainLoadedChildren(te,b,O,B);for(const Pe in Y)B[Pe]||(this._coveredTiles[Pe]=!0,B[Pe]=Y[Pe]);if(p){const Pe={},Me={};for(const Te of v)this._tiles[Te.key].hasData()?Pe[Te.key]=Te:Me[Te.key]=Te;for(const Te in Me){const je=Me[Te].children(this._source.maxzoom);this._tiles[je[0].key]&&this._tiles[je[1].key]&&this._tiles[je[2].key]&&this._tiles[je[3].key]&&(Pe[je[0].key]=B[je[0].key]=je[0],Pe[je[1].key]=B[je[1].key]=je[1],Pe[je[2].key]=B[je[2].key]=je[2],Pe[je[3].key]=B[je[3].key]=je[3],delete Me[Te])}for(const Te in Me){const je=this.findLoadedParent(Me[Te],this._source.minzoom);if(je){Pe[je.tileID.key]=B[je.tileID.key]=je.tileID;for(const gt in Pe)Pe[gt].isChildOf(je.tileID)&&delete Pe[gt]}}for(const Te in this._tiles)Pe[Te]||(this._coveredTiles[Te]=!0)}}for(const Y in B)this._tiles[Y].clearFadeHold();const q=a.ab(this._tiles,B);for(const Y of q){const te=this._tiles[Y];te.hasSymbolBuckets&&!te.holdingForFade()?te.setHoldDuration(this.map._fadeDuration):te.hasSymbolBuckets&&!te.symbolFadeFinished()||this._removeTile(Y)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,p){const v={},b={},k=Math.max(p-xi.maxOverzooming,this._source.minzoom),O=Math.max(p+xi.maxUnderzooming,this._source.minzoom),z={};for(const B of u){const q=this._addTile(B);v[B.key]=B,q.hasData()||p<this._source.maxzoom&&(z[B.key]=B)}this._retainLoadedChildren(z,p,O,v);for(const B of u){let q=this._tiles[B.key];if(q.hasData())continue;if(p+1>this._source.maxzoom){const te=B.children(this._source.maxzoom)[0],ge=this.getTile(te);if(ge&&ge.hasData()){v[te.key]=te;continue}}else{const te=B.children(this._source.maxzoom);if(v[te[0].key]&&v[te[1].key]&&v[te[2].key]&&v[te[3].key])continue}let Y=q.wasRequested();for(let te=B.overscaledZ-1;te>=k;--te){const ge=B.scaledTo(te);if(b[ge.key])break;if(b[ge.key]=!0,q=this.getTile(ge),!q&&Y&&(q=this._addTile(ge)),q){const $e=q.hasData();if((Y||$e)&&(v[ge.key]=ge),Y=q.wasRequested(),$e)break}}}return v}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const p=[];let v,b=this._tiles[u].tileID;for(;b.overscaledZ>0;){if(b.key in this._loadedParentTiles){v=this._loadedParentTiles[b.key];break}p.push(b.key);const k=b.scaledTo(b.overscaledZ-1);if(v=this._getLoadedTile(k),v)break;b=k}for(const k of p)this._loadedParentTiles[k]=v}}_addTile(u){let p=this._tiles[u.key];if(p)return p;p=this._cache.getAndRemove(u),p&&(this._setTileReloadTimer(u.key,p),p.tileID=u,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,p)));const v=p;return p||(p=new Hn(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(p,u.key,p.state)),p.uses++,this._tiles[u.key]=p,v||this._source.fire(new a.k("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(u,p){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const v=p.getExpiryTimeout();v&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},v))}_removeTile(u){const p=this._tiles[u];p&&(p.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(u){const p=u.sourceDataType;u.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&p==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,p,v){const b=[],k=this.transform;if(!k)return b;const O=v?k.getCameraQueryGeometry(u):u,z=u.map(Pe=>k.pointCoordinate(Pe,this.terrain)),B=O.map(Pe=>k.pointCoordinate(Pe,this.terrain)),q=this.getIds();let Y=1/0,te=1/0,ge=-1/0,$e=-1/0;for(const Pe of B)Y=Math.min(Y,Pe.x),te=Math.min(te,Pe.y),ge=Math.max(ge,Pe.x),$e=Math.max($e,Pe.y);for(let Pe=0;Pe<q.length;Pe++){const Me=this._tiles[q[Pe]];if(Me.holdingForFade())continue;const Te=Me.tileID,je=Math.pow(2,k.zoom-Me.tileID.overscaledZ),gt=p*Me.queryPadding*a.W/Me.tileSize/je,De=[Te.getTilePoint(new a.Y(Y,te)),Te.getTilePoint(new a.Y(ge,$e))];if(De[0].x-gt<a.W&&De[0].y-gt<a.W&&De[1].x+gt>=0&&De[1].y+gt>=0){const Qe=z.map(xt=>Te.getTilePoint(xt)),vt=B.map(xt=>Te.getTilePoint(xt));b.push({tile:Me,tileID:Te,queryGeometry:Qe,cameraQueryGeometry:vt,scale:je})}}return b}getVisibleCoordinates(u){const p=this.getRenderableIds(u).map(v=>this._tiles[v].tileID);for(const v of p)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(Un(this._source.type)){const u=g.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=u)return!0}return!1}setFeatureState(u,p,v){this._state.updateState(u=u||"_geojsonTileLayer",p,v)}removeFeatureState(u,p,v){this._state.removeFeatureState(u=u||"_geojsonTileLayer",p,v)}getFeatureState(u,p){return this._state.getState(u=u||"_geojsonTileLayer",p)}setDependencies(u,p,v){const b=this._tiles[u];b&&b.setDependencies(p,v)}reloadTilesForDependencies(u,p){for(const v in this._tiles)this._tiles[v].hasDependency(u,p)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(u,p))}}function tn(x,u){const p=Math.abs(2*x.wrap)-+(x.wrap<0),v=Math.abs(2*u.wrap)-+(u.wrap<0);return x.overscaledZ-u.overscaledZ||v-p||u.canonical.y-x.canonical.y||u.canonical.x-x.canonical.x}function Un(x){return x==="raster"||x==="image"||x==="video"}xi.maxOverzooming=10,xi.maxUnderzooming=3;class Nn{constructor(u,p){this.reset(u,p)}reset(u,p){this.points=u||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=a.ac(u,0,1);let p=1,v=this._distances[p];const b=u*this.paddedLength+this.padding;for(;v<b&&p<this._distances.length;)v=this._distances[++p];const k=p-1,O=this._distances[k],z=v-O,B=z>0?(b-O)/z:0;return this.points[k].mult(1-B).add(this.points[p].mult(B))}}function On(x,u){let p=!0;return x==="always"||x!=="never"&&u!=="never"||(p=!1),p}class hi{constructor(u,p,v){const b=this.boxCells=[],k=this.circleCells=[];this.xCellCount=Math.ceil(u/v),this.yCellCount=Math.ceil(p/v);for(let O=0;O<this.xCellCount*this.yCellCount;O++)b.push([]),k.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=p,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,p,v,b,k){this._forEachCell(p,v,b,k,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(b),this.bboxes.push(k)}insertCircle(u,p,v,b){this._forEachCell(p-b,v-b,p+b,v+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(p),this.circles.push(v),this.circles.push(b)}_insertBoxCell(u,p,v,b,k,O){this.boxCells[k].push(O)}_insertCircleCell(u,p,v,b,k,O){this.circleCells[k].push(O)}_query(u,p,v,b,k,O,z){if(v<0||u>this.width||b<0||p>this.height)return[];const B=[];if(u<=0&&p<=0&&this.width<=v&&this.height<=b){if(k)return[{key:null,x1:u,y1:p,x2:v,y2:b}];for(let q=0;q<this.boxKeys.length;q++)B.push({key:this.boxKeys[q],x1:this.bboxes[4*q],y1:this.bboxes[4*q+1],x2:this.bboxes[4*q+2],y2:this.bboxes[4*q+3]});for(let q=0;q<this.circleKeys.length;q++){const Y=this.circles[3*q],te=this.circles[3*q+1],ge=this.circles[3*q+2];B.push({key:this.circleKeys[q],x1:Y-ge,y1:te-ge,x2:Y+ge,y2:te+ge})}}else this._forEachCell(u,p,v,b,this._queryCell,B,{hitTest:k,overlapMode:O,seenUids:{box:{},circle:{}}},z);return B}query(u,p,v,b){return this._query(u,p,v,b,!1,null)}hitTest(u,p,v,b,k,O){return this._query(u,p,v,b,!0,k,O).length>0}hitTestCircle(u,p,v,b,k){const O=u-v,z=u+v,B=p-v,q=p+v;if(z<0||O>this.width||q<0||B>this.height)return!1;const Y=[];return this._forEachCell(O,B,z,q,this._queryCellCircle,Y,{hitTest:!0,overlapMode:b,circle:{x:u,y:p,radius:v},seenUids:{box:{},circle:{}}},k),Y.length>0}_queryCell(u,p,v,b,k,O,z,B){const{seenUids:q,hitTest:Y,overlapMode:te}=z,ge=this.boxCells[k];if(ge!==null){const Pe=this.bboxes;for(const Me of ge)if(!q.box[Me]){q.box[Me]=!0;const Te=4*Me,je=this.boxKeys[Me];if(u<=Pe[Te+2]&&p<=Pe[Te+3]&&v>=Pe[Te+0]&&b>=Pe[Te+1]&&(!B||B(je))&&(!Y||!On(te,je.overlapMode))&&(O.push({key:je,x1:Pe[Te],y1:Pe[Te+1],x2:Pe[Te+2],y2:Pe[Te+3]}),Y))return!0}}const $e=this.circleCells[k];if($e!==null){const Pe=this.circles;for(const Me of $e)if(!q.circle[Me]){q.circle[Me]=!0;const Te=3*Me,je=this.circleKeys[Me];if(this._circleAndRectCollide(Pe[Te],Pe[Te+1],Pe[Te+2],u,p,v,b)&&(!B||B(je))&&(!Y||!On(te,je.overlapMode))){const gt=Pe[Te],De=Pe[Te+1],Qe=Pe[Te+2];if(O.push({key:je,x1:gt-Qe,y1:De-Qe,x2:gt+Qe,y2:De+Qe}),Y)return!0}}}return!1}_queryCellCircle(u,p,v,b,k,O,z,B){const{circle:q,seenUids:Y,overlapMode:te}=z,ge=this.boxCells[k];if(ge!==null){const Pe=this.bboxes;for(const Me of ge)if(!Y.box[Me]){Y.box[Me]=!0;const Te=4*Me,je=this.boxKeys[Me];if(this._circleAndRectCollide(q.x,q.y,q.radius,Pe[Te+0],Pe[Te+1],Pe[Te+2],Pe[Te+3])&&(!B||B(je))&&!On(te,je.overlapMode))return O.push(!0),!0}}const $e=this.circleCells[k];if($e!==null){const Pe=this.circles;for(const Me of $e)if(!Y.circle[Me]){Y.circle[Me]=!0;const Te=3*Me,je=this.circleKeys[Me];if(this._circlesCollide(Pe[Te],Pe[Te+1],Pe[Te+2],q.x,q.y,q.radius)&&(!B||B(je))&&!On(te,je.overlapMode))return O.push(!0),!0}}}_forEachCell(u,p,v,b,k,O,z,B){const q=this._convertToXCellCoord(u),Y=this._convertToYCellCoord(p),te=this._convertToXCellCoord(v),ge=this._convertToYCellCoord(b);for(let $e=q;$e<=te;$e++)for(let Pe=Y;Pe<=ge;Pe++)if(k.call(this,u,p,v,b,this.xCellCount*Pe+$e,O,z,B))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,p,v,b,k,O){const z=b-u,B=k-p,q=v+O;return q*q>z*z+B*B}_circleAndRectCollide(u,p,v,b,k,O,z){const B=(O-b)/2,q=Math.abs(u-(b+B));if(q>B+v)return!1;const Y=(z-k)/2,te=Math.abs(p-(k+Y));if(te>Y+v)return!1;if(q<=B||te<=Y)return!0;const ge=q-B,$e=te-Y;return ge*ge+$e*$e<=v*v}}function Tn(x,u,p,v,b){const k=a.F();return u?(a.J(k,k,[1/b,1/b,1]),p||a.ad(k,k,v.angle)):a.K(k,v.labelPlaneMatrix,x),k}function ti(x,u,p,v,b){if(u){const k=a.ae(x);return a.J(k,k,[b,b,1]),p||a.ad(k,k,-v.angle),k}return v.glCoordMatrix}function bn(x,u,p){let v;p?(v=[x.x,x.y,p(x.x,x.y),1],a.af(v,v,u)):(v=[x.x,x.y,0,1],Sn(v,v,u));const b=v[3];return{point:new a.P(v[0]/b,v[1]/b),signedDistanceFromCamera:b}}function Ee(x,u){return .5+x/u*.5}function ie(x,u){const p=x[0]/x[3],v=x[1]/x[3];return p>=-u[0]&&p<=u[0]&&v>=-u[1]&&v<=u[1]}function le(x,u,p,v,b,k,O,z,B,q){const Y=v?x.textSizeData:x.iconSizeData,te=a.ag(Y,p.transform.zoom),ge=[256/p.width*2+1,256/p.height*2+1],$e=v?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;$e.clear();const Pe=x.lineVertexArray,Me=v?x.text.placedSymbolArray:x.icon.placedSymbolArray,Te=p.transform.width/p.transform.height;let je=!1;for(let gt=0;gt<Me.length;gt++){const De=Me.get(gt);if(De.hidden||De.writingMode===a.ah.vertical&&!je){Ft(De.numGlyphs,$e);continue}let Qe;if(je=!1,q?(Qe=[De.anchorX,De.anchorY,q(De.anchorX,De.anchorY),1],a.af(Qe,Qe,u)):(Qe=[De.anchorX,De.anchorY,0,1],Sn(Qe,Qe,u)),!ie(Qe,ge)){Ft(De.numGlyphs,$e);continue}const vt=Ee(p.transform.cameraToCenterDistance,Qe[3]),xt=a.ai(Y,te,De),Tt=O?xt/vt:xt*vt,Ht=new a.P(De.anchorX,De.anchorY),jt=bn(Ht,b,q).point,Yt={projections:{},offsets:{}},nn=qe(De,Tt,!1,z,u,b,k,x.glyphOffsetArray,Pe,$e,jt,Ht,Yt,Te,B,q);je=nn.useVertical,(nn.notEnoughRoom||je||nn.needsFlipping&&qe(De,Tt,!0,z,u,b,k,x.glyphOffsetArray,Pe,$e,jt,Ht,Yt,Te,B,q).notEnoughRoom)&&Ft(De.numGlyphs,$e)}v?x.text.dynamicLayoutVertexBuffer.updateData($e):x.icon.dynamicLayoutVertexBuffer.updateData($e)}function ye(x,u,p,v,b,k,O,z,B,q,Y,te,ge){const $e=z.glyphStartIndex+z.numGlyphs,Pe=z.lineStartIndex,Me=z.lineStartIndex+z.lineLength,Te=u.getoffsetX(z.glyphStartIndex),je=u.getoffsetX($e-1),gt=Vt(x*Te,p,v,b,k,O,z.segment,Pe,Me,B,q,Y,te,ge);if(!gt)return null;const De=Vt(x*je,p,v,b,k,O,z.segment,Pe,Me,B,q,Y,te,ge);return De?{first:gt,last:De}:null}function Ie(x,u,p,v){return x===a.ah.horizontal&&Math.abs(p.y-u.y)>Math.abs(p.x-u.x)*v?{useVertical:!0}:(x===a.ah.vertical?u.y<p.y:u.x>p.x)?{needsFlipping:!0}:null}function qe(x,u,p,v,b,k,O,z,B,q,Y,te,ge,$e,Pe,Me){const Te=u/24,je=x.lineOffsetX*Te,gt=x.lineOffsetY*Te;let De;if(x.numGlyphs>1){const Qe=x.glyphStartIndex+x.numGlyphs,vt=x.lineStartIndex,xt=x.lineStartIndex+x.lineLength,Tt=ye(Te,z,je,gt,p,Y,te,x,B,k,ge,Pe,Me);if(!Tt)return{notEnoughRoom:!0};const Ht=bn(Tt.first.point,O,Me).point,jt=bn(Tt.last.point,O,Me).point;if(v&&!p){const Yt=Ie(x.writingMode,Ht,jt,$e);if(Yt)return Yt}De=[Tt.first];for(let Yt=x.glyphStartIndex+1;Yt<Qe-1;Yt++)De.push(Vt(Te*z.getoffsetX(Yt),je,gt,p,Y,te,x.segment,vt,xt,B,k,ge,Pe,Me));De.push(Tt.last)}else{if(v&&!p){const vt=bn(te,b,Me).point,xt=x.lineStartIndex+x.segment+1,Tt=new a.P(B.getx(xt),B.gety(xt)),Ht=bn(Tt,b,Me),jt=Ht.signedDistanceFromCamera>0?Ht.point:He(te,Tt,vt,1,b,Me),Yt=Ie(x.writingMode,vt,jt,$e);if(Yt)return Yt}const Qe=Vt(Te*z.getoffsetX(x.glyphStartIndex),je,gt,p,Y,te,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,B,k,ge,Pe,Me);if(!Qe)return{notEnoughRoom:!0};De=[Qe]}for(const Qe of De)a.aj(q,Qe.point,Qe.angle);return{}}function He(x,u,p,v,b,k){const O=bn(x.add(x.sub(u)._unit()),b,k).point,z=p.sub(O);return p.add(z._mult(v/z.mag()))}function st(x,u){const{projectionCache:p,lineVertexArray:v,labelPlaneMatrix:b,tileAnchorPoint:k,distanceFromAnchor:O,getElevation:z,previousVertex:B,direction:q,absOffsetX:Y}=u;if(p.projections[x])return p.projections[x];const te=new a.P(v.getx(x),v.gety(x)),ge=bn(te,b,z);if(ge.signedDistanceFromCamera>0)return p.projections[x]=ge.point,ge.point;const $e=x-q;return He(O===0?k:new a.P(v.getx($e),v.gety($e)),te,B,Y-O+1,b,z)}function Ve(x,u,p){return x._unit()._perp()._mult(u*p)}function ht(x,u,p,v,b,k,O,z){const{projectionCache:B,direction:q}=z;if(B.offsets[x])return B.offsets[x];const Y=p.add(u);if(x+q<v||x+q>=b)return B.offsets[x]=Y,Y;const te=st(x+q,z),ge=Ve(te.sub(p),O,q),$e=p.add(ge),Pe=te.add(ge);return B.offsets[x]=a.ak(k,Y,$e,Pe)||Y,B.offsets[x]}function Vt(x,u,p,v,b,k,O,z,B,q,Y,te,ge,$e){const Pe=v?x-u:x+u;let Me=Pe>0?1:-1,Te=0;v&&(Me*=-1,Te=Math.PI),Me<0&&(Te+=Math.PI);let je,gt,De=Me>0?z+O:z+O+1,Qe=b,vt=b,xt=0,Tt=0;const Ht=Math.abs(Pe),jt=[];let Yt;for(;xt+Tt<=Ht;){if(De+=Me,De<z||De>=B)return null;xt+=Tt,vt=Qe,gt=je;const rn={projectionCache:te,lineVertexArray:q,labelPlaneMatrix:Y,tileAnchorPoint:k,distanceFromAnchor:xt,getElevation:$e,previousVertex:vt,direction:Me,absOffsetX:Ht};if(Qe=st(De,rn),p===0)jt.push(vt),Yt=Qe.sub(vt);else{let Dn;const Jn=Qe.sub(vt);Dn=Jn.mag()===0?Ve(st(De+Me,rn).sub(Qe),p,Me):Ve(Jn,p,Me),gt||(gt=vt.add(Dn)),je=ht(De,Dn,Qe,z,B,gt,p,rn),jt.push(gt),Yt=je.sub(gt)}Tt=Yt.mag()}const nn=Yt._mult((Ht-xt)/Tt)._add(gt||vt),Xn=Te+Math.atan2(Qe.y-vt.y,Qe.x-vt.x);return jt.push(nn),{point:nn,angle:ge?Xn:0,path:jt}}const Lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ft(x,u){for(let p=0;p<x;p++){const v=u.length;u.resize(v+4),u.float32.set(Lt,3*v)}}function Sn(x,u,p){const v=u[0],b=u[1];return x[0]=p[0]*v+p[4]*b+p[12],x[1]=p[1]*v+p[5]*b+p[13],x[3]=p[3]*v+p[7]*b+p[15],x}const $n=100;class Kn{constructor(u,p=new hi(u.width+200,u.height+200,25),v=new hi(u.width+200,u.height+200,25)){this.transform=u,this.grid=p,this.ignoredGrid=v,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+$n,this.screenBottomBoundary=u.height+$n,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,p,v,b,k,O){const z=this.projectAndGetPerspectiveRatio(b,u.anchorPointX,u.anchorPointY,O),B=v*z.perspectiveRatio,q=u.x1*B+z.point.x,Y=u.y1*B+z.point.y,te=u.x2*B+z.point.x,ge=u.y2*B+z.point.y;return!this.isInsideGrid(q,Y,te,ge)||p!=="always"&&this.grid.hitTest(q,Y,te,ge,p,k)||z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[q,Y,te,ge],offscreen:this.isOffscreen(q,Y,te,ge)}}placeCollisionCircles(u,p,v,b,k,O,z,B,q,Y,te,ge,$e,Pe){const Me=[],Te=new a.P(p.anchorX,p.anchorY),je=bn(Te,O,Pe),gt=Ee(this.transform.cameraToCenterDistance,je.signedDistanceFromCamera),De=(Y?k/gt:k*gt)/a.ao,Qe=bn(Te,z,Pe).point,vt=ye(De,b,p.lineOffsetX*De,p.lineOffsetY*De,!1,Qe,Te,p,v,z,{projections:{},offsets:{}},!1,Pe);let xt=!1,Tt=!1,Ht=!0;if(vt){const jt=.5*ge*gt+$e,Yt=new a.P(-100,-100),nn=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Xn=new Nn,rn=vt.first,Dn=vt.last;let Jn=[];for(let Qn=rn.path.length-1;Qn>=1;Qn--)Jn.push(rn.path[Qn]);for(let Qn=1;Qn<Dn.path.length;Qn++)Jn.push(Dn.path[Qn]);const ci=2.5*jt;if(B){const Qn=Jn.map(ni=>bn(ni,B,Pe));Jn=Qn.some(ni=>ni.signedDistanceFromCamera<=0)?[]:Qn.map(ni=>ni.point)}let Fn=[];if(Jn.length>0){const Qn=Jn[0].clone(),ni=Jn[0].clone();for(let Vi=1;Vi<Jn.length;Vi++)Qn.x=Math.min(Qn.x,Jn[Vi].x),Qn.y=Math.min(Qn.y,Jn[Vi].y),ni.x=Math.max(ni.x,Jn[Vi].x),ni.y=Math.max(ni.y,Jn[Vi].y);Fn=Qn.x>=Yt.x&&ni.x<=nn.x&&Qn.y>=Yt.y&&ni.y<=nn.y?[Jn]:ni.x<Yt.x||Qn.x>nn.x||ni.y<Yt.y||Qn.y>nn.y?[]:a.al([Jn],Yt.x,Yt.y,nn.x,nn.y)}for(const Qn of Fn){Xn.reset(Qn,.25*jt);let ni=0;ni=Xn.length<=.5*jt?1:Math.ceil(Xn.paddedLength/ci)+1;for(let Vi=0;Vi<ni;Vi++){const _i=Vi/Math.max(ni-1,1),ss=Xn.lerp(_i),ur=ss.x+$n,Mi=ss.y+$n;Me.push(ur,Mi,jt,0);const fr=ur-jt,os=Mi-jt,Fs=ur+jt,lo=Mi+jt;if(Ht=Ht&&this.isOffscreen(fr,os,Fs,lo),Tt=Tt||this.isInsideGrid(fr,os,Fs,lo),u!=="always"&&this.grid.hitTestCircle(ur,Mi,jt,u,te)&&(xt=!0,!q))return{circles:[],offscreen:!1,collisionDetected:xt}}}}return{circles:!q&&xt||!Tt||gt<this.perspectiveRatioCutoff?[]:Me,offscreen:Ht,collisionDetected:xt}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let v=1/0,b=1/0,k=-1/0,O=-1/0;for(const Y of u){const te=new a.P(Y.x+$n,Y.y+$n);v=Math.min(v,te.x),b=Math.min(b,te.y),k=Math.max(k,te.x),O=Math.max(O,te.y),p.push(te)}const z=this.grid.query(v,b,k,O).concat(this.ignoredGrid.query(v,b,k,O)),B={},q={};for(const Y of z){const te=Y.key;if(B[te.bucketInstanceId]===void 0&&(B[te.bucketInstanceId]={}),B[te.bucketInstanceId][te.featureIndex])continue;const ge=[new a.P(Y.x1,Y.y1),new a.P(Y.x2,Y.y1),new a.P(Y.x2,Y.y2),new a.P(Y.x1,Y.y2)];a.am(p,ge)&&(B[te.bucketInstanceId][te.featureIndex]=!0,q[te.bucketInstanceId]===void 0&&(q[te.bucketInstanceId]=[]),q[te.bucketInstanceId].push(te.featureIndex))}return q}insertCollisionBox(u,p,v,b,k,O){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:k,collisionGroupID:O,overlapMode:p},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,p,v,b,k,O){const z=v?this.ignoredGrid:this.grid,B={bucketInstanceId:b,featureIndex:k,collisionGroupID:O,overlapMode:p};for(let q=0;q<u.length;q+=4)z.insertCircle(B,u[q],u[q+1],u[q+2])}projectAndGetPerspectiveRatio(u,p,v,b){let k;return b?(k=[p,v,b(p,v),1],a.af(k,k,u)):(k=[p,v,0,1],Sn(k,k,u)),{point:new a.P((k[0]/k[3]+1)/2*this.transform.width+$n,(-k[1]/k[3]+1)/2*this.transform.height+$n),perspectiveRatio:.5+this.transform.cameraToCenterDistance/k[3]*.5}}isOffscreen(u,p,v,b){return v<$n||u>=this.screenRightBoundary||b<$n||p>this.screenBottomBoundary}isInsideGrid(u,p,v,b){return v>=0&&u<this.gridRightBoundary&&b>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const u=a.an([]);return a.H(u,u,[-100,-100,0]),u}}function jn(x,u,p){return u*(a.W/(x.tileSize*Math.pow(2,p-x.tileID.overscaledZ)))}class ai{constructor(u,p,v,b){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?p:-p))):b&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class gi{constructor(u,p,v,b,k){this.text=new ai(u?u.text:null,p,v,k),this.icon=new ai(u?u.icon:null,p,b,k)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Si{constructor(u,p,v){this.text=u,this.icon=p,this.skipFade=v}}class er{constructor(){this.invProjMatrix=a.F(),this.viewportMatrix=a.F(),this.circles=[]}}class Yn{constructor(u,p,v,b,k){this.bucketInstanceId=u,this.featureIndex=p,this.sourceLayerIndex=v,this.bucketIndex=b,this.tileID=k}}class Fi{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const p=++this.maxGroupID;this.collisionGroups[u]={ID:p,predicate:v=>v.collisionGroupID===p}}return this.collisionGroups[u]}}function cr(x,u,p,v,b){const{horizontalAlign:k,verticalAlign:O}=a.at(x);return new a.P(-(k-.5)*u+v[0]*b,-(O-.5)*p+v[1]*b)}function Dr(x,u,p,v,b,k){const{x1:O,x2:z,y1:B,y2:q,anchorPointX:Y,anchorPointY:te}=x,ge=new a.P(u,p);return v&&ge._rotate(b?k:-k),{x1:O+ge.x,y1:B+ge.y,x2:z+ge.x,y2:q+ge.y,anchorPointX:Y,anchorPointY:te}}class Vr{constructor(u,p,v,b,k){this.transform=u.clone(),this.terrain=p,this.collisionIndex=new Kn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new Fi(b),this.collisionCircleArrays={},this.prevPlacement=k,k&&(k.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,p,v,b){const k=v.getBucket(p),O=v.latestFeatureIndex;if(!k||!O||p.id!==k.layerIds[0])return;const z=v.collisionBoxArray,B=k.layers[0].layout,q=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Y=v.tileSize/a.W,te=this.transform.calculatePosMatrix(v.tileID.toUnwrapped()),ge=B.get("text-pitch-alignment")==="map",$e=B.get("text-rotation-alignment")==="map",Pe=jn(v,1,this.transform.zoom),Me=Tn(te,ge,$e,this.transform,Pe);let Te=null;if(ge){const gt=ti(te,ge,$e,this.transform,Pe);Te=a.K([],this.transform.labelPlaneMatrix,gt)}this.retainedQueryData[k.bucketInstanceId]=new Yn(k.bucketInstanceId,O,k.sourceLayerIndex,k.index,v.tileID);const je={bucket:k,layout:B,posMatrix:te,textLabelPlaneMatrix:Me,labelToScreenMatrix:Te,scale:q,textPixelRatio:Y,holdingForFade:v.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:a.ag(k.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(k.sourceID)};if(b)for(const gt of k.sortKeyRanges){const{sortKey:De,symbolInstanceStart:Qe,symbolInstanceEnd:vt}=gt;u.push({sortKey:De,symbolInstanceStart:Qe,symbolInstanceEnd:vt,parameters:je})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:k.symbolInstances.length,parameters:je})}attemptAnchorPlacement(u,p,v,b,k,O,z,B,q,Y,te,ge,$e,Pe,Me,Te){const je=a.ap[u.textAnchor],gt=[u.textOffset0,u.textOffset1],De=cr(je,v,b,gt,k),Qe=this.collisionIndex.placeCollisionBox(Dr(p,De.x,De.y,O,z,this.transform.angle),te,B,q,Y.predicate,Te);if((!Me||this.collisionIndex.placeCollisionBox(Dr(Me,De.x,De.y,O,z,this.transform.angle),te,B,q,Y.predicate,Te).box.length!==0)&&Qe.box.length>0){let vt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID].text&&(vt=this.prevPlacement.variableOffsets[ge.crossTileID].anchor),ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ge.crossTileID]={textOffset:gt,width:v,height:b,anchor:je,textBoxScale:k,prevAnchor:vt},this.markUsedJustification($e,je,ge,Pe),$e.allowVerticalPlacement&&(this.markUsedOrientation($e,Pe,ge),this.placedOrientations[ge.crossTileID]=Pe),{shift:De,placedGlyphBoxes:Qe}}}placeLayerBucketPart(u,p,v){const{bucket:b,layout:k,posMatrix:O,textLabelPlaneMatrix:z,labelToScreenMatrix:B,textPixelRatio:q,holdingForFade:Y,collisionBoxArray:te,partiallyEvaluatedTextSize:ge,collisionGroup:$e}=u.parameters,Pe=k.get("text-optional"),Me=k.get("icon-optional"),Te=a.aq(k,"text-overlap","text-allow-overlap"),je=Te==="always",gt=a.aq(k,"icon-overlap","icon-allow-overlap"),De=gt==="always",Qe=k.get("text-rotation-alignment")==="map",vt=k.get("text-pitch-alignment")==="map",xt=k.get("icon-text-fit")!=="none",Tt=k.get("symbol-z-order")==="viewport-y",Ht=je&&(De||!b.hasIconData()||Me),jt=De&&(je||!b.hasTextData()||Pe);!b.collisionArrays&&te&&b.deserializeCollisionBoxes(te);const Yt=this.retainedQueryData[b.bucketInstanceId].tileID,nn=this.terrain?(rn,Dn)=>this.terrain.getElevation(Yt,rn,Dn):null,Xn=(rn,Dn)=>{var Jn,ci;if(p[rn.crossTileID])return;if(Y)return void(this.placements[rn.crossTileID]=new Si(!1,!1,!1));let Fn=!1,Qn=!1,ni=!0,Vi=null,_i={box:null,offscreen:null},ss={box:null,offscreen:null},ur=null,Mi=null,fr=null,os=0,Fs=0,lo=0;Dn.textFeatureIndex?os=Dn.textFeatureIndex:rn.useRuntimeCollisionCircles&&(os=rn.featureIndex),Dn.verticalTextFeatureIndex&&(Fs=Dn.verticalTextFeatureIndex);const Ka=Dn.textBox;if(Ka){const nr=ir=>{let Oi=a.ah.horizontal;if(b.allowVerticalPlacement&&!ir&&this.prevPlacement){const _s=this.prevPlacement.placedOrientations[rn.crossTileID];_s&&(this.placedOrientations[rn.crossTileID]=_s,Oi=_s,this.markUsedOrientation(b,Oi,rn))}return Oi},Di=(ir,Oi)=>{if(b.allowVerticalPlacement&&rn.numVerticalGlyphVertices>0&&Dn.verticalTextBox){for(const _s of b.writingModes)if(_s===a.ah.vertical?(_i=Oi(),ss=_i):_i=ir(),_i&&_i.box&&_i.box.length)break}else _i=ir()},Ii=rn.textAnchorOffsetStartIndex,ps=rn.textAnchorOffsetEndIndex;if(ps===Ii){const ir=(Oi,_s)=>{const rr=this.collisionIndex.placeCollisionBox(Oi,Te,q,O,$e.predicate,nn);return rr&&rr.box&&rr.box.length&&(this.markUsedOrientation(b,_s,rn),this.placedOrientations[rn.crossTileID]=_s),rr};Di(()=>ir(Ka,a.ah.horizontal),()=>{const Oi=Dn.verticalTextBox;return b.allowVerticalPlacement&&rn.numVerticalGlyphVertices>0&&Oi?ir(Oi,a.ah.vertical):{box:null,offscreen:null}}),nr(_i&&_i.box&&_i.box.length)}else{let ir=a.ap[(ci=(Jn=this.prevPlacement)===null||Jn===void 0?void 0:Jn.variableOffsets[rn.crossTileID])===null||ci===void 0?void 0:ci.anchor];const Oi=(rr,Ui,hu)=>{const ed=rr.x2-rr.x1,zo=rr.y2-rr.y1,Ro=rn.textBoxScale,sc=xt&&gt==="never"?Ui:null;let uo={box:[],offscreen:!1},mu=Te==="never"?1:2,td="never";ir&&mu++;for(let pu=0;pu<mu;pu++){for(let _u=Ii;_u<ps;_u++){const oc=b.textAnchorOffsets.get(_u);if(ir&&oc.textAnchor!==ir)continue;const gu=this.attemptAnchorPlacement(oc,rr,ed,zo,Ro,Qe,vt,q,O,$e,td,rn,b,hu,sc,nn);if(gu&&(uo=gu.placedGlyphBoxes,uo&&uo.box&&uo.box.length))return Fn=!0,Vi=gu.shift,uo}ir?ir=null:td=Te}return uo};Di(()=>Oi(Ka,Dn.iconBox,a.ah.horizontal),()=>{const rr=Dn.verticalTextBox;return b.allowVerticalPlacement&&!(_i&&_i.box&&_i.box.length)&&rn.numVerticalGlyphVertices>0&&rr?Oi(rr,Dn.verticalIconBox,a.ah.vertical):{box:null,offscreen:null}}),_i&&(Fn=_i.box,ni=_i.offscreen);const _s=nr(_i&&_i.box);if(!Fn&&this.prevPlacement){const rr=this.prevPlacement.variableOffsets[rn.crossTileID];rr&&(this.variableOffsets[rn.crossTileID]=rr,this.markUsedJustification(b,rr.anchor,rn,_s))}}}if(ur=_i,Fn=ur&&ur.box&&ur.box.length>0,ni=ur&&ur.offscreen,rn.useRuntimeCollisionCircles){const nr=b.text.placedSymbolArray.get(rn.centerJustifiedTextSymbolIndex),Di=a.ai(b.textSizeData,ge,nr),Ii=k.get("text-padding");Mi=this.collisionIndex.placeCollisionCircles(Te,nr,b.lineVertexArray,b.glyphOffsetArray,Di,O,z,B,v,vt,$e.predicate,rn.collisionCircleDiameter,Ii,nn),Mi.circles.length&&Mi.collisionDetected&&!v&&a.w("Collisions detected, but collision boxes are not shown"),Fn=je||Mi.circles.length>0&&!Mi.collisionDetected,ni=ni&&Mi.offscreen}if(Dn.iconFeatureIndex&&(lo=Dn.iconFeatureIndex),Dn.iconBox){const nr=Di=>{const Ii=xt&&Vi?Dr(Di,Vi.x,Vi.y,Qe,vt,this.transform.angle):Di;return this.collisionIndex.placeCollisionBox(Ii,gt,q,O,$e.predicate,nn)};ss&&ss.box&&ss.box.length&&Dn.verticalIconBox?(fr=nr(Dn.verticalIconBox),Qn=fr.box.length>0):(fr=nr(Dn.iconBox),Qn=fr.box.length>0),ni=ni&&fr.offscreen}const co=Pe||rn.numHorizontalGlyphVertices===0&&rn.numVerticalGlyphVertices===0,Bs=Me||rn.numIconVertices===0;if(co||Bs?Bs?co||(Qn=Qn&&Fn):Fn=Qn&&Fn:Qn=Fn=Qn&&Fn,Fn&&ur&&ur.box&&this.collisionIndex.insertCollisionBox(ur.box,Te,k.get("text-ignore-placement"),b.bucketInstanceId,ss&&ss.box&&Fs?Fs:os,$e.ID),Qn&&fr&&this.collisionIndex.insertCollisionBox(fr.box,gt,k.get("icon-ignore-placement"),b.bucketInstanceId,lo,$e.ID),Mi&&(Fn&&this.collisionIndex.insertCollisionCircles(Mi.circles,Te,k.get("text-ignore-placement"),b.bucketInstanceId,os,$e.ID),v)){const nr=b.bucketInstanceId;let Di=this.collisionCircleArrays[nr];Di===void 0&&(Di=this.collisionCircleArrays[nr]=new er);for(let Ii=0;Ii<Mi.circles.length;Ii+=4)Di.circles.push(Mi.circles[Ii+0]),Di.circles.push(Mi.circles[Ii+1]),Di.circles.push(Mi.circles[Ii+2]),Di.circles.push(Mi.collisionDetected?1:0)}if(rn.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rn.crossTileID]=new Si(Fn||Ht,Qn||jt,ni||b.justReloaded),p[rn.crossTileID]=!0};if(Tt){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rn=b.getSortedSymbolIndexes(this.transform.angle);for(let Dn=rn.length-1;Dn>=0;--Dn){const Jn=rn[Dn];Xn(b.symbolInstances.get(Jn),b.collisionArrays[Jn])}}else for(let rn=u.symbolInstanceStart;rn<u.symbolInstanceEnd;rn++)Xn(b.symbolInstances.get(rn),b.collisionArrays[rn]);if(v&&b.bucketInstanceId in this.collisionCircleArrays){const rn=this.collisionCircleArrays[b.bucketInstanceId];a.ar(rn.invProjMatrix,O),rn.viewportMatrix=this.collisionIndex.getViewportMatrix()}b.justReloaded=!1}markUsedJustification(u,p,v,b){let k;k=b===a.ah.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[a.as(p)];const O=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const z of O)z>=0&&(u.text.placedSymbolArray.get(z).crossTileID=k>=0&&z!==k?0:v.crossTileID)}markUsedOrientation(u,p,v){const b=p===a.ah.horizontal||p===a.ah.horizontalOnly?p:0,k=p===a.ah.vertical?p:0,O=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const z of O)u.text.placedSymbolArray.get(z).placedOrientation=b;v.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=k)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let v=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const b=p?p.symbolFadeChange(u):1,k=p?p.opacities:{},O=p?p.variableOffsets:{},z=p?p.placedOrientations:{};for(const B in this.placements){const q=this.placements[B],Y=k[B];Y?(this.opacities[B]=new gi(Y,b,q.text,q.icon),v=v||q.text!==Y.text.placed||q.icon!==Y.icon.placed):(this.opacities[B]=new gi(null,b,q.text,q.icon,q.skipFade),v=v||q.text||q.icon)}for(const B in k){const q=k[B];if(!this.opacities[B]){const Y=new gi(q,b,!1,!1);Y.isHidden()||(this.opacities[B]=Y,v=v||q.text.placed||q.icon.placed)}}for(const B in O)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=O[B]);for(const B in z)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=z[B]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:u)}updateLayerOpacities(u,p){const v={};for(const b of p){const k=b.getBucket(u);k&&b.latestFeatureIndex&&u.id===k.layerIds[0]&&this.updateBucketOpacities(k,v,b.collisionBoxArray)}}updateBucketOpacities(u,p,v){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const b=u.layers[0],k=b.layout,O=new gi(null,0,!1,!1,!0),z=k.get("text-allow-overlap"),B=k.get("icon-allow-overlap"),q=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Y=k.get("text-rotation-alignment")==="map",te=k.get("text-pitch-alignment")==="map",ge=k.get("icon-text-fit")!=="none",$e=new gi(null,0,z&&(B||!u.hasIconData()||k.get("icon-optional")),B&&(z||!u.hasTextData()||k.get("text-optional")),!0);!u.collisionArrays&&v&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(v);const Pe=(Me,Te,je)=>{for(let gt=0;gt<Te/4;gt++)Me.opacityVertexArray.emplaceBack(je);Me.hasVisibleVertices=Me.hasVisibleVertices||je!==Ea};for(let Me=0;Me<u.symbolInstances.length;Me++){const Te=u.symbolInstances.get(Me),{numHorizontalGlyphVertices:je,numVerticalGlyphVertices:gt,crossTileID:De}=Te;let Qe=this.opacities[De];p[De]?Qe=O:Qe||(Qe=$e,this.opacities[De]=Qe),p[De]=!0;const vt=Te.numIconVertices>0,xt=this.placedOrientations[Te.crossTileID],Tt=xt===a.ah.vertical,Ht=xt===a.ah.horizontal||xt===a.ah.horizontalOnly;if(je>0||gt>0){const jt=jr(Qe.text);Pe(u.text,je,Tt?Ea:jt),Pe(u.text,gt,Ht?Ea:jt);const Yt=Qe.text.isHidden();[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(rn=>{rn>=0&&(u.text.placedSymbolArray.get(rn).hidden=Yt||Tt?1:0)}),Te.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(Te.verticalPlacedTextSymbolIndex).hidden=Yt||Ht?1:0);const nn=this.variableOffsets[Te.crossTileID];nn&&this.markUsedJustification(u,nn.anchor,Te,xt);const Xn=this.placedOrientations[Te.crossTileID];Xn&&(this.markUsedJustification(u,"left",Te,Xn),this.markUsedOrientation(u,Xn,Te))}if(vt){const jt=jr(Qe.icon),Yt=!(ge&&Te.verticalPlacedIconSymbolIndex&&Tt);Te.placedIconSymbolIndex>=0&&(Pe(u.icon,Te.numIconVertices,Yt?jt:Ea),u.icon.placedSymbolArray.get(Te.placedIconSymbolIndex).hidden=Qe.icon.isHidden()),Te.verticalPlacedIconSymbolIndex>=0&&(Pe(u.icon,Te.numVerticalIconVertices,Yt?Ea:jt),u.icon.placedSymbolArray.get(Te.verticalPlacedIconSymbolIndex).hidden=Qe.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const jt=u.collisionArrays[Me];if(jt){let Yt=new a.P(0,0);if(jt.textBox||jt.verticalTextBox){let Xn=!0;if(q){const rn=this.variableOffsets[De];rn?(Yt=cr(rn.anchor,rn.width,rn.height,rn.textOffset,rn.textBoxScale),Y&&Yt._rotate(te?this.transform.angle:-this.transform.angle)):Xn=!1}jt.textBox&&yr(u.textCollisionBox.collisionVertexArray,Qe.text.placed,!Xn||Tt,Yt.x,Yt.y),jt.verticalTextBox&&yr(u.textCollisionBox.collisionVertexArray,Qe.text.placed,!Xn||Ht,Yt.x,Yt.y)}const nn=!!(!Ht&&jt.verticalIconBox);jt.iconBox&&yr(u.iconCollisionBox.collisionVertexArray,Qe.icon.placed,nn,ge?Yt.x:0,ge?Yt.y:0),jt.verticalIconBox&&yr(u.iconCollisionBox.collisionVertexArray,Qe.icon.placed,!nn,ge?Yt.x:0,ge?Yt.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const Me=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Me.invProjMatrix,u.placementViewportMatrix=Me.viewportMatrix,u.collisionCircleArray=Me.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,p){const v=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*v>u}setStale(){this.stale=!0}}function yr(x,u,p,v,b){x.emplaceBack(u?1:0,p?1:0,v||0,b||0),x.emplaceBack(u?1:0,p?1:0,v||0,b||0),x.emplaceBack(u?1:0,p?1:0,v||0,b||0),x.emplaceBack(u?1:0,p?1:0,v||0,b||0)}const Ds=Math.pow(2,25),gf=Math.pow(2,24),xh=Math.pow(2,17),mi=Math.pow(2,16),zc=Math.pow(2,9),Rc=Math.pow(2,8),ns=Math.pow(2,1);function jr(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;const u=x.placed?1:0,p=Math.floor(127*x.opacity);return p*Ds+u*gf+p*xh+u*mi+p*zc+u*Rc+p*ns+u}const Ea=0;class hs{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,p,v,b,k){const O=this._bucketParts;for(;this._currentTileIndex<u.length;)if(p.getBucketParts(O,b,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,k())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort((z,B)=>z.sortKey-B.sortKey));this._currentPartIndex<O.length;)if(p.placeLayerBucketPart(O[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,k())return!0;return!1}}class ms{constructor(u,p,v,b,k,O,z,B){this.placement=new Vr(u,p,O,z,B),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=k,this._done=!1}isDone(){return this._done}continuePlacement(u,p,v){const b=g.now(),k=()=>!this._forceFullPlacement&&g.now()-b>2;for(;this._currentPlacementIndex>=0;){const O=p[u[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=z)&&(!O.maxzoom||O.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new hs(O)),this._inProgressLayer.continuePlacement(v[O.source],this.placement,this._showCollisionBoxes,O,k))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const Xo=512/a.W/2;class yl{constructor(u,p,v){this.tileID=u,this.bucketInstanceId=v,this._symbolsByKey={};const b=new Map;for(let k=0;k<p.length;k++){const O=p.get(k),z=O.key,B=b.get(z);B?B.push(O):b.set(z,[O])}for(const[k,O]of b){const z={positions:O.map(B=>({x:Math.floor(B.anchorX*Xo),y:Math.floor(B.anchorY*Xo)})),crossTileIDs:O.map(B=>B.crossTileID)};if(z.positions.length>128){const B=new a.au(z.positions.length,16,Uint16Array);for(const{x:q,y:Y}of z.positions)B.add(q,Y);B.finish(),delete z.positions,z.index=B}this._symbolsByKey[k]=z}}getScaledCoordinates(u,p){const{x:v,y:b,z:k}=this.tileID.canonical,{x:O,y:z,z:B}=p.canonical,q=Xo/Math.pow(2,B-k),Y=(z*a.W+u.anchorY)*q,te=b*a.W*Xo;return{x:Math.floor((O*a.W+u.anchorX)*q-v*a.W*Xo),y:Math.floor(Y-te)}}findMatches(u,p,v){const b=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let k=0;k<u.length;k++){const O=u.get(k);if(O.crossTileID)continue;const z=this._symbolsByKey[O.key];if(!z)continue;const B=this.getScaledCoordinates(O,p);if(z.index){const q=z.index.range(B.x-b,B.y-b,B.x+b,B.y+b).sort();for(const Y of q){const te=z.crossTileIDs[Y];if(!v[te]){v[te]=!0,O.crossTileID=te;break}}}else if(z.positions)for(let q=0;q<z.positions.length;q++){const Y=z.positions[q],te=z.crossTileIDs[q];if(Math.abs(Y.x-B.x)<=b&&Math.abs(Y.y-B.y)<=b&&!v[te]){v[te]=!0,O.crossTileID=te;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:u})=>u)}}class tr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ia{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const p=Math.round((u-this.lng)/360);if(p!==0)for(const v in this.indexes){const b=this.indexes[v],k={};for(const O in b){const z=b[O];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+p),k[z.tileID.key]=z}this.indexes[v]=k}this.lng=u}addBucket(u,p,v){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let k=0;k<p.symbolInstances.length;k++)p.symbolInstances.get(k).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const b=this.usedCrossTileIDs[u.overscaledZ];for(const k in this.indexes){const O=this.indexes[k];if(Number(k)>u.overscaledZ)for(const z in O){const B=O[z];B.tileID.isChildOf(u)&&B.findMatches(p.symbolInstances,u,b)}else{const z=O[u.scaledTo(Number(k)).key];z&&z.findMatches(p.symbolInstances,u,b)}}for(let k=0;k<p.symbolInstances.length;k++){const O=p.symbolInstances.get(k);O.crossTileID||(O.crossTileID=v.generate(),b[O.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new yl(u,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(u,p){for(const v of p.getCrossTileIDsLists())for(const b of v)delete this.usedCrossTileIDs[u][b]}removeStaleBuckets(u){let p=!1;for(const v in this.indexes){const b=this.indexes[v];for(const k in b)u[b[k].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,b[k]),delete b[k],p=!0)}return p}}class no{constructor(){this.layerIndexes={},this.crossTileIDs=new tr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,p,v){let b=this.layerIndexes[u.id];b===void 0&&(b=this.layerIndexes[u.id]=new Ia);let k=!1;const O={};b.handleWrapJump(v);for(const z of p){const B=z.getBucket(u);B&&u.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(z.tileID,B,this.crossTileIDs)&&(k=!0),O[B.bucketInstanceId]=!0)}return b.removeStaleBuckets(O)&&(k=!0),k}pruneUnusedLayers(u){const p={};u.forEach(v=>{p[v]=!0});for(const v in this.layerIndexes)p[v]||delete this.layerIndexes[v]}}const Ai=(x,u)=>a.t(x,u&&u.filter(p=>p.identifier!=="source.canvas")),wl=a.av();class is extends a.E{constructor(u,p={}){super(),this._rtlPluginLoaded=()=>{for(const v in this.sourceCaches){const b=this.sourceCaches[v].getSource().type;b!=="vector"&&b!=="geojson"||this.sourceCaches[v].reload()}},this.map=u,this.dispatcher=new qt(Rt(),u._getMapId()),this.dispatcher.registerMessageHandler("GG",(v,b)=>this.getGlyphs(v,b)),this.dispatcher.registerMessageHandler("GI",(v,b)=>this.getImages(v,b)),this.imageManager=new j,this.imageManager.setEventedParent(this),this.glyphManager=new We(u._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Dt(256,512),this.crossTileSymbolIndex=new no,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.ax()),$t().on(Vn,this._rtlPluginLoaded),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const b=this.sourceCaches[v.sourceId];if(!b)return;const k=b.getSource();if(k&&k.vectorLayerIds)for(const O in this._layers){const z=this._layers[O];z.source===k.id&&this._validateLayer(z)}})}loadURL(u,p={},v){this.fire(new a.k("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const b=this.map._requestManager.transformRequest(u,"Style");this._loadStyleRequest=new AbortController,a.h(b,this._loadStyleRequest).then(k=>{this._loadStyleRequest=null,this._load(k.data,p,v)}).catch(k=>{this._loadStyleRequest=null,k&&this.fire(new a.j(k))})}loadJSON(u,p={},v){this.fire(new a.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,g.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(u,p,v)}).catch(()=>{})}loadEmpty(){this.fire(new a.k("dataloading",{dataType:"style"})),this._load(wl,{validate:!1})}_load(u,p,v){var b;const k=p.transformStyle?p.transformStyle(v,u):u;if(!p.validate||!Ai(this,a.x(k))){this._loaded=!0,this.stylesheet=k;for(const O in k.sources)this.addSource(O,k.sources[O],{validate:!1});k.sprite?this._loadSprite(k.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(k.glyphs),this._createLayers(),this.light=new St(this.stylesheet.light),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new a.k("data",{dataType:"style"})),this.fire(new a.k("style.load"))}}_createLayers(){const u=a.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",u),this._order=u.map(p=>p.id),this._layers={},this._serializedLayers=null;for(const p of u){const v=a.az(p);v.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=v}}_loadSprite(u,p=!1,v=void 0){let b;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(k,O,z,B){return a._(this,void 0,void 0,function*(){const q=de(k),Y=z>1?"@2x":"",te={},ge={};for(const{id:$e,url:Pe}of q){const Me=O.transformRequest(O.normalizeSpriteURL(Pe,Y,".json"),"SpriteJSON");te[$e]=a.h(Me,B);const Te=O.transformRequest(O.normalizeSpriteURL(Pe,Y,".png"),"SpriteImage");ge[$e]=U.getImage(Te,B)}return yield Promise.all([...Object.values(te),...Object.values(ge)]),function($e,Pe){return a._(this,void 0,void 0,function*(){const Me={};for(const Te in $e){Me[Te]={};const je=g.getImageCanvasContext((yield Pe[Te]).data),gt=(yield $e[Te]).data;for(const De in gt){const{width:Qe,height:vt,x:xt,y:Tt,sdf:Ht,pixelRatio:jt,stretchX:Yt,stretchY:nn,content:Xn}=gt[De];Me[Te][De]={data:null,pixelRatio:jt,sdf:Ht,stretchX:Yt,stretchY:nn,content:Xn,spriteData:{width:Qe,height:vt,x:xt,y:Tt,context:je}}}}return Me})}(te,ge)})}(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(k=>{if(this._spriteRequest=null,k)for(const O in k){this._spritesImagesIds[O]=[];const z=this._spritesImagesIds[O]?this._spritesImagesIds[O].filter(B=>!(B in k)):[];for(const B of z)this.imageManager.removeImage(B),this._changedImages[B]=!0;for(const B in k[O]){const q=O==="default"?B:`${O}:${B}`;this._spritesImagesIds[O].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,k[O][B],!1):this.imageManager.addImage(q,k[O][B]),p&&(this._changedImages[q]=!0)}}}).catch(k=>{this._spriteRequest=null,b=k,this.fire(new a.j(b))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"})),v&&v(b)})}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}_validateLayer(u){const p=this.sourceCaches[u.source];if(!p)return;const v=u.sourceLayer;if(!v)return;const b=p.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(v)===-1)&&this.fire(new a.j(new Error(`Source layer "${v}" does not exist on source "${b.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u){const p=this._serializedAllLayers();if(!u||u.length===0)return Object.values(p);const v=[];for(const b of u)p[b]&&v.push(p[b]);return v}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const p=Object.keys(this._layers);for(const v of p){const b=this._layers[v];b.type!=="custom"&&(u[v]=b.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const p=this._changed;if(p){const b=Object.keys(this._updatedLayers),k=Object.keys(this._removedLayers);(b.length||k.length)&&this._updateWorkerLayers(b,k);for(const O in this._updatedSources){const z=this._updatedSources[O];if(z==="reload")this._reloadSource(O);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(O)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const v={};for(const b in this.sourceCaches){const k=this.sourceCaches[b];v[b]=k.used,k.used=!1}for(const b of this._order){const k=this._layers[b];k.recalculate(u,this._availableImages),!k.isHidden(u.zoom)&&k.source&&(this.sourceCaches[k.source].used=!0)}for(const b in v){const k=this.sourceCaches[b];!!v[b]!=!!k.used&&k.fire(new a.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(u),this.z=u.zoom,p&&this.fire(new a.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(u),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,p={}){var v;this._checkLoaded();const b=this.serialize();if(u=p.transformStyle?p.transformStyle(b,u):u,((v=p.validate)===null||v===void 0||v)&&Ai(this,a.x(u)))return!1;(u=a.aA(u)).layers=a.ay(u.layers);const k=a.aB(b,u),O=this._getOperationsToPerform(k);if(O.unimplemented.length>0)throw new Error(`Unimplemented: ${O.unimplemented.join(", ")}.`);if(O.operations.length===0)return!1;for(const z of O.operations)z();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const p=[],v=[];for(const b of u)switch(b.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,b.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,b.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,b.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,b.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,b.args));break;case"addSource":p.push(()=>this.addSource.apply(this,b.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,b.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,b.args));break;case"setLight":p.push(()=>this.setLight.apply(this,b.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,b.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,b.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,b.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,b.args));break;case"setTransition":p.push(()=>{});break;default:v.push(b.command)}return{operations:p,unimplemented:v}}addImage(u,p){if(this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,p),this._afterImageUpdated(u)}updateImage(u,p){this.imageManager.updateImage(u,p)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new a.j(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,p,v={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(a.x.source,`sources.${u}`,p,null,v))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const b=this.sourceCaches[u]=new xi(u,p,this.dispatcher);b.style=this,b.setEventedParent(this,()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:u})),b.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===u)return this.fire(new a.j(new Error(`Source "${u}" cannot be removed while layer "${v}" is using it.`)));const p=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],p.fire(new a.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,p){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const v=this.sourceCaches[u].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(p),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,p,v={}){this._checkLoaded();const b=u.id;if(this.getLayer(b))return void this.fire(new a.j(new Error(`Layer "${b}" already exists on this map.`)));let k;if(u.type==="custom"){if(Ai(this,a.aC(u)))return;k=a.az(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(b,u.source),u=a.aA(u),u=a.e(u,{source:b})),this._validate(a.x.layer,`layers.${b}`,u,{arrayIndex:-1},v))return;k=a.az(u),this._validateLayer(k),k.setEventedParent(this,{layer:{id:b}})}const O=p?this._order.indexOf(p):this._order.length;if(p&&O===-1)this.fire(new a.j(new Error(`Cannot add layer "${b}" before non-existing layer "${p}".`)));else{if(this._order.splice(O,0,b),this._layerOrderChanged=!0,this._layers[b]=k,this._removedLayers[b]&&k.source&&k.type!=="custom"){const z=this._removedLayers[b];delete this._removedLayers[b],z.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}moveLayer(u,p){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new a.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===p)return;const v=this._order.indexOf(u);this._order.splice(v,1);const b=p?this._order.indexOf(p):this._order.length;p&&b===-1?this.fire(new a.j(new Error(`Cannot move layer "${u}" before non-existing layer "${p}".`))):(this._order.splice(b,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const p=this._layers[u];if(!p)return void this.fire(new a.j(new Error(`Cannot remove non-existing layer "${u}".`)));p.setEventedParent(null);const v=this._order.indexOf(u);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=p,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],p.onRemove&&p.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,p,v){this._checkLoaded();const b=this.getLayer(u);b?b.minzoom===p&&b.maxzoom===v||(p!=null&&(b.minzoom=p),v!=null&&(b.maxzoom=v),this._updateLayer(b)):this.fire(new a.j(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,p,v={}){this._checkLoaded();const b=this.getLayer(u);if(b){if(!a.aD(b.filter,p))return p==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(a.x.filter,`layers.${b.id}.filter`,p,null,v)||(b.filter=a.aA(p),this._updateLayer(b)))}else this.fire(new a.j(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return a.aA(this.getLayer(u).filter)}setLayoutProperty(u,p,v,b={}){this._checkLoaded();const k=this.getLayer(u);k?a.aD(k.getLayoutProperty(p),v)||(k.setLayoutProperty(p,v,b),this._updateLayer(k)):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,p){const v=this.getLayer(u);if(v)return v.getLayoutProperty(p);this.fire(new a.j(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,p,v,b={}){this._checkLoaded();const k=this.getLayer(u);k?a.aD(k.getPaintProperty(p),v)||(k.setPaintProperty(p,v,b)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[u]=!0,this._serializedLayers=null):this.fire(new a.j(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,p){return this.getLayer(u).getPaintProperty(p)}setFeatureState(u,p){this._checkLoaded();const v=u.source,b=u.sourceLayer,k=this.sourceCaches[v];if(k===void 0)return void this.fire(new a.j(new Error(`The source '${v}' does not exist in the map's style.`)));const O=k.getSource().type;O==="geojson"&&b?this.fire(new a.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):O!=="vector"||b?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),k.setFeatureState(b,u.id,p)):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,p){this._checkLoaded();const v=u.source,b=this.sourceCaches[v];if(b===void 0)return void this.fire(new a.j(new Error(`The source '${v}' does not exist in the map's style.`)));const k=b.getSource().type,O=k==="vector"?u.sourceLayer:void 0;k!=="vector"||O?p&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new a.j(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(O,u.id,p):this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const p=u.source,v=u.sourceLayer,b=this.sourceCaches[p];if(b!==void 0)return b.getSource().type!=="vector"||v?(u.id===void 0&&this.fire(new a.j(new Error("The feature id parameter must be provided."))),b.getFeatureState(v,u.id)):void this.fire(new a.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.j(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=a.aE(this.sourceCaches,k=>k.serialize()),p=this._serializeByIds(this._order),v=this.map.getTerrain()||void 0,b=this.stylesheet;return a.aF({version:b.version,name:b.name,metadata:b.metadata,light:b.light,center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,sprite:b.sprite,glyphs:b.glyphs,transition:b.transition,sources:u,layers:p,terrain:v},k=>k!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const p=O=>this._layers[O].type==="fill-extrusion",v={},b=[];for(let O=this._order.length-1;O>=0;O--){const z=this._order[O];if(p(z)){v[z]=O;for(const B of u){const q=B[z];if(q)for(const Y of q)b.push(Y)}}}b.sort((O,z)=>z.intersectionZ-O.intersectionZ);const k=[];for(let O=this._order.length-1;O>=0;O--){const z=this._order[O];if(p(z))for(let B=b.length-1;B>=0;B--){const q=b[B].feature;if(v[q.layer.id]<O)break;k.push(q),b.pop()}else for(const B of u){const q=B[z];if(q)for(const Y of q)k.push(Y.feature)}}return k}queryRenderedFeatures(u,p,v){p&&p.filter&&this._validate(a.x.filter,"queryRenderedFeatures.filter",p.filter,null,p);const b={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new a.j(new Error("parameters.layers must be an Array."))),[];for(const z of p.layers){const B=this._layers[z];if(!B)return this.fire(new a.j(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];b[B.source]=!0}}const k=[];p.availableImages=this._availableImages;const O=this._serializedAllLayers();for(const z in this.sourceCaches)p.layers&&!b[z]||k.push(yt(this.sourceCaches[z],this._layers,O,u,p,v));return this.placement&&k.push(function(z,B,q,Y,te,ge,$e){const Pe={},Me=ge.queryRenderedSymbols(Y),Te=[];for(const je of Object.keys(Me).map(Number))Te.push($e[je]);Te.sort(Ue);for(const je of Te){const gt=je.featureIndex.lookupSymbolFeatures(Me[je.bucketInstanceId],B,je.bucketIndex,je.sourceLayerIndex,te.filter,te.layers,te.availableImages,z);for(const De in gt){const Qe=Pe[De]=Pe[De]||[],vt=gt[De];vt.sort((xt,Tt)=>{const Ht=je.featureSortOrder;if(Ht){const jt=Ht.indexOf(xt.featureIndex);return Ht.indexOf(Tt.featureIndex)-jt}return Tt.featureIndex-xt.featureIndex});for(const xt of vt)Qe.push(xt)}}for(const je in Pe)Pe[je].forEach(gt=>{const De=gt.feature,Qe=q[z[je].source].getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=Qe});return Pe}(this._layers,O,this.sourceCaches,u,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(k)}querySourceFeatures(u,p){p&&p.filter&&this._validate(a.x.filter,"querySourceFeatures.filter",p.filter,null,p);const v=this.sourceCaches[u];return v?function(b,k){const O=b.getRenderableIds().map(q=>b.getTileByID(q)),z=[],B={};for(let q=0;q<O.length;q++){const Y=O[q],te=Y.tileID.canonical.key;B[te]||(B[te]=!0,Y.querySourceFeatures(z,k))}return z}(v,p):[]}getLight(){return this.light.getLight()}setLight(u,p={}){this._checkLoaded();const v=this.light.getLight();let b=!1;for(const O in u)if(!a.aD(u[O],v[O])){b=!0;break}if(!b)return;const k={now:g.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,p),this.light.updateTransitions(k)}_validate(u,p,v,b,k={}){return(!k||k.validate!==!1)&&Ai(this,u.call(a.x,a.e({key:p,style:this.serialize(),value:v,styleSpec:a.v},b)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),$t().off(Vn,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const v=this.sourceCaches[p];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const p in this.sourceCaches)this.sourceCaches[p].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,p,v,b,k=!1){let O=!1,z=!1;const B={};for(const q of this._order){const Y=this._layers[q];if(Y.type!=="symbol")continue;if(!B[Y.source]){const ge=this.sourceCaches[Y.source];B[Y.source]=ge.getRenderableIds(!0).map($e=>ge.getTileByID($e)).sort(($e,Pe)=>Pe.tileID.overscaledZ-$e.tileID.overscaledZ||($e.tileID.isLessThan(Pe.tileID)?-1:1))}const te=this.crossTileSymbolIndex.addLayer(Y,B[Y.source],u.center.lng);O=O||te}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(g.now(),u.zoom))&&(this.pauseablePlacement=new ms(u,this.map.terrain,this._order,k,p,v,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(g.now()),z=!0),O&&this.pauseablePlacement.placement.setStale()),z||O)for(const q of this._order){const Y=this._layers[q];Y.type==="symbol"&&this.placement.updateLayerOpacities(Y,B[Y.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(g.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,p){return a._(this,void 0,void 0,function*(){const v=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const b=this.sourceCaches[p.source];return b&&b.setDependencies(p.tileID.key,p.type,p.icons),v})}getGlyphs(u,p){return a._(this,void 0,void 0,function*(){const v=yield this.glyphManager.getGlyphs(p.stacks),b=this.sourceCaches[p.source];return b&&b.setDependencies(p.tileID.key,p.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,p={}){this._checkLoaded(),u&&this._validate(a.x.glyphs,"glyphs",u,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,p,v={},b){this._checkLoaded();const k=[{id:u,url:p}],O=[...de(this.stylesheet.sprite),...k];this._validate(a.x.sprite,"sprite",O,null,v)||(this.stylesheet.sprite=O,this._loadSprite(k,!0,b))}removeSprite(u){this._checkLoaded();const p=de(this.stylesheet.sprite);if(p.find(v=>v.id===u)){if(this._spritesImagesIds[u])for(const v of this._spritesImagesIds[u])this.imageManager.removeImage(v),this._changedImages[v]=!0;p.splice(p.findIndex(v=>v.id===u),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.k("data",{dataType:"style"}))}else this.fire(new a.j(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return de(this.stylesheet.sprite)}setSprite(u,p={},v){this._checkLoaded(),u&&this._validate(a.x.sprite,"sprite",u,null,p)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,v):(this._unloadSprite(),v&&v(null)))}}var xl=a.X([{name:"a_pos",type:"Int16",components:2}]),Os="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Pa={prelude:pi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:pi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:pi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:pi(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:pi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:pi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:pi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:pi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:pi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:pi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:pi(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:pi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:pi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:pi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:pi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:pi(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:pi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:pi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:pi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:pi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:pi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:pi("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Os),terrainDepth:pi("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Os),terrainCoords:pi("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Os)};function pi(x,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=u.match(/attribute ([\w]+) ([\w]+)/g),b=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=k?k.concat(b):b,z={};return{fragmentSource:x=x.replace(p,(B,q,Y,te,ge)=>(z[ge]=!0,q==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
varying ${Y} ${te} ${ge};
#else
uniform ${Y} ${te} u_${ge};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ge}
    ${Y} ${te} ${ge} = u_${ge};
#endif
`)),vertexSource:u=u.replace(p,(B,q,Y,te,ge)=>{const $e=te==="float"?"vec2":"vec4",Pe=ge.match(/color/)?"color":$e;return z[ge]?q==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
attribute ${Y} ${$e} a_${ge};
varying ${Y} ${te} ${ge};
#else
uniform ${Y} ${te} u_${ge};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = a_${ge};
#else
    ${Y} ${te} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${ge} = unpack_mix_${Pe}(a_${ge}, u_${ge}_t);
#else
    ${Y} ${te} ${ge} = u_${ge};
#endif
`:q==="define"?`
#ifndef HAS_UNIFORM_u_${ge}
uniform lowp float u_${ge}_t;
attribute ${Y} ${$e} a_${ge};
#else
uniform ${Y} ${te} u_${ge};
#endif
`:Pe==="vec4"?`
#ifndef HAS_UNIFORM_u_${ge}
    ${Y} ${te} ${ge} = a_${ge};
#else
    ${Y} ${te} ${ge} = u_${ge};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ge}
    ${Y} ${te} ${ge} = unpack_mix_${Pe}(a_${ge}, u_${ge}_t);
#else
    ${Y} ${te} ${ge} = u_${ge};
#endif
`}),staticAttributes:v,staticUniforms:O}}class kl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,p,v,b,k,O,z,B,q){this.context=u;let Y=this.boundPaintVertexBuffers.length!==b.length;for(let te=0;!Y&&te<b.length;te++)this.boundPaintVertexBuffers[te]!==b[te]&&(Y=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==v||Y||this.boundIndexBuffer!==k||this.boundVertexOffset!==O||this.boundDynamicVertexBuffer!==z||this.boundDynamicVertexBuffer2!==B||this.boundDynamicVertexBuffer3!==q?this.freshBind(p,v,b,k,O,z,B,q):(u.bindVertexArray.set(this.vao),z&&z.bind(),k&&k.dynamicDraw&&k.bind(),B&&B.bind(),q&&q.bind())}freshBind(u,p,v,b,k,O,z,B){const q=u.numAttributes,Y=this.context,te=Y.gl;this.vao&&this.destroy(),this.vao=Y.createVertexArray(),Y.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=b,this.boundVertexOffset=k,this.boundDynamicVertexBuffer=O,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=B,p.enableAttributes(te,u);for(const ge of v)ge.enableAttributes(te,u);O&&O.enableAttributes(te,u),z&&z.enableAttributes(te,u),B&&B.enableAttributes(te,u),p.bind(),p.setVertexAttribPointers(te,u,k);for(const ge of v)ge.bind(),ge.setVertexAttribPointers(te,u,k);O&&(O.bind(),O.setVertexAttribPointers(te,u,k)),b&&b.bind(),z&&(z.bind(),z.setVertexAttribPointers(te,u,k)),B&&(B.bind(),B.setVertexAttribPointers(te,u,k)),Y.currentNumAttributes=q}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Jo(x){const u=[];for(let p=0;p<x.length;p++){if(x[p]===null)continue;const v=x[p].split(" ");u.push(v.pop())}return u}class io{constructor(u,p,v,b,k,O){const z=u.gl;this.program=z.createProgram();const B=Jo(p.staticAttributes),q=v?v.getBinderAttributes():[],Y=B.concat(q),te=Pa.prelude.staticUniforms?Jo(Pa.prelude.staticUniforms):[],ge=p.staticUniforms?Jo(p.staticUniforms):[],$e=v?v.getBinderUniforms():[],Pe=te.concat(ge).concat($e),Me=[];for(const xt of Pe)Me.indexOf(xt)<0&&Me.push(xt);const Te=v?v.defines():[];k&&Te.push("#define OVERDRAW_INSPECTOR;"),O&&Te.push("#define TERRAIN3D;");const je=Te.concat(Pa.prelude.fragmentSource,p.fragmentSource).join(`
`),gt=Te.concat(Pa.prelude.vertexSource,p.vertexSource).join(`
`),De=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(De,je),z.compileShader(De),!z.getShaderParameter(De,z.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${z.getShaderInfoLog(De)}`);z.attachShader(this.program,De);const Qe=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(Qe,gt),z.compileShader(Qe),!z.getShaderParameter(Qe,z.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${z.getShaderInfoLog(Qe)}`);z.attachShader(this.program,Qe),this.attributes={};const vt={};this.numAttributes=Y.length;for(let xt=0;xt<this.numAttributes;xt++)Y[xt]&&(z.bindAttribLocation(this.program,xt,Y[xt]),this.attributes[Y[xt]]=xt);if(z.linkProgram(this.program),!z.getProgramParameter(this.program,z.LINK_STATUS))throw new Error(`Program failed to link: ${z.getProgramInfoLog(this.program)}`);z.deleteShader(Qe),z.deleteShader(De);for(let xt=0;xt<Me.length;xt++){const Tt=Me[xt];if(Tt&&!vt[Tt]){const Ht=z.getUniformLocation(this.program,Tt);Ht&&(vt[Tt]=Ht)}}this.fixedUniforms=b(u,vt),this.terrainUniforms=((xt,Tt)=>({u_depth:new a.aG(xt,Tt.u_depth),u_terrain:new a.aG(xt,Tt.u_terrain),u_terrain_dim:new a.aH(xt,Tt.u_terrain_dim),u_terrain_matrix:new a.aI(xt,Tt.u_terrain_matrix),u_terrain_unpack:new a.aJ(xt,Tt.u_terrain_unpack),u_terrain_exaggeration:new a.aH(xt,Tt.u_terrain_exaggeration)}))(u,vt),this.binderUniforms=v?v.getUniforms(u,vt):[]}draw(u,p,v,b,k,O,z,B,q,Y,te,ge,$e,Pe,Me,Te,je,gt){const De=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(v),u.setStencilMode(b),u.setColorMode(k),u.setCullFace(O),B){u.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,B.depthTexture),u.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,B.texture);for(const vt in this.terrainUniforms)this.terrainUniforms[vt].set(B[vt])}for(const vt in this.fixedUniforms)this.fixedUniforms[vt].set(z[vt]);Me&&Me.setUniforms(u,this.binderUniforms,$e,{zoom:Pe});let Qe=0;switch(p){case De.LINES:Qe=2;break;case De.TRIANGLES:Qe=3;break;case De.LINE_STRIP:Qe=1}for(const vt of ge.get()){const xt=vt.vaos||(vt.vaos={});(xt[q]||(xt[q]=new kl)).bind(u,this,Y,Me?Me.getPaintVertexBuffers():[],te,vt.vertexOffset,Te,je,gt),De.drawElements(p,vt.primitiveLength*Qe,De.UNSIGNED_SHORT,vt.primitiveOffset*Qe*2)}}}function Cl(x,u,p){const v=1/jn(p,1,u.transform.tileZoom),b=Math.pow(2,p.tileID.overscaledZ),k=p.tileSize*Math.pow(2,u.transform.tileZoom)/b,O=k*(p.tileID.canonical.x+p.tileID.wrap*b),z=k*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[v,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[O>>16,z>>16],u_pixel_coord_lower:[65535&O,65535&z]}}const $a=(x,u,p,v)=>{const b=u.style.light,k=b.properties.get("position"),O=[k.x,k.y,k.z],z=function(){var q=new a.A(9);return a.A!=Float32Array&&(q[1]=0,q[2]=0,q[3]=0,q[5]=0,q[6]=0,q[7]=0),q[0]=1,q[4]=1,q[8]=1,q}();b.properties.get("anchor")==="viewport"&&function(q,Y){var te=Math.sin(Y),ge=Math.cos(Y);q[0]=ge,q[1]=te,q[2]=0,q[3]=-te,q[4]=ge,q[5]=0,q[6]=0,q[7]=0,q[8]=1}(z,-u.transform.angle),function(q,Y,te){var ge=Y[0],$e=Y[1],Pe=Y[2];q[0]=ge*te[0]+$e*te[3]+Pe*te[6],q[1]=ge*te[1]+$e*te[4]+Pe*te[7],q[2]=ge*te[2]+$e*te[5]+Pe*te[8]}(O,O,z);const B=b.properties.get("color");return{u_matrix:x,u_lightpos:O,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+p,u_opacity:v}},kh=(x,u,p,v,b,k,O)=>a.e($a(x,u,p,v),Cl(k,u,O),{u_height_factor:-Math.pow(2,b.overscaledZ)/O.tileSize/8}),vf=x=>({u_matrix:x}),Tl=(x,u,p,v)=>a.e(vf(x),Cl(p,u,v)),Ch=(x,u)=>({u_matrix:x,u_world:u}),bf=(x,u,p,v,b)=>a.e(Tl(x,u,p,v),{u_world:b}),Th=(x,u,p,v)=>{const b=x.transform;let k,O;if(v.paint.get("circle-pitch-alignment")==="map"){const z=jn(p,1,b.zoom);k=!0,O=[z,z]}else k=!1,O=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:x.translatePosMatrix(u.posMatrix,p,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+k,u_device_pixel_ratio:x.pixelRatio,u_extrude_scale:O}},yf=(x,u,p)=>{const v=jn(p,1,u.zoom),b=Math.pow(2,u.zoom-p.tileID.overscaledZ),k=p.tileID.overscaleFactor();return{u_matrix:x,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:v,u_extrude_scale:[u.pixelsToGLUnits[0]/(v*b),u.pixelsToGLUnits[1]/(v*b)],u_overscale_factor:k}},wf=(x,u,p=1)=>({u_matrix:x,u_color:u,u_overlay:0,u_overlay_scale:p}),Sl=x=>({u_matrix:x}),xf=(x,u,p,v)=>({u_matrix:x,u_extrude_scale:jn(u,1,p),u_intensity:v});function kf(x,u){const p=Math.pow(2,u.canonical.z),v=u.canonical.y;return[new a.Y(0,v/p).toLngLat().lat,new a.Y(0,(v+1)/p).toLngLat().lat]}const El=(x,u,p,v)=>{const b=x.transform;return{u_matrix:Aa(x,u,p,v),u_ratio:1/jn(u,1,b.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Cf=(x,u,p,v,b)=>a.e(El(x,u,p,b),{u_image:0,u_image_height:v}),Eo=(x,u,p,v,b)=>{const k=x.transform,O=rs(u,k);return{u_matrix:Aa(x,u,p,b),u_texsize:u.imageAtlasTexture.size,u_ratio:1/jn(u,1,k.zoom),u_device_pixel_ratio:x.pixelRatio,u_image:0,u_scale:[O,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]]}},Il=(x,u,p,v,b,k)=>{const O=x.lineAtlas,z=rs(u,x.transform),B=p.layout.get("line-cap")==="round",q=O.getDash(v.from,B),Y=O.getDash(v.to,B),te=q.width*b.fromScale,ge=Y.width*b.toScale;return a.e(El(x,u,p,k),{u_patternscale_a:[z/te,-q.height/2],u_patternscale_b:[z/ge,-Y.height/2],u_sdfgamma:O.width/(256*Math.min(te,ge)*x.pixelRatio)/2,u_image:0,u_tex_y_a:q.y,u_tex_y_b:Y.y,u_mix:b.t})};function rs(x,u){return 1/jn(x,1,u.tileZoom)}function Aa(x,u,p,v){return x.translatePosMatrix(v?v.posMatrix:u.tileID.posMatrix,u,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Pl=(x,u,p,v,b)=>{return{u_matrix:x,u_tl_parent:u,u_scale_parent:p,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(O=b.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(k=b.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:Ma(b.paint.get("raster-hue-rotate"))};var k,O};function Ma(x){x*=Math.PI/180;const u=Math.sin(x),p=Math.cos(x);return[(2*p+1)/3,(-Math.sqrt(3)*u-p+1)/3,(Math.sqrt(3)*u-p+1)/3]}const Da=(x,u,p,v,b,k,O,z,B,q)=>{const Y=b.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:Y.width/Y.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:k,u_label_plane_matrix:O,u_coord_matrix:z,u_is_text:+B,u_pitch_with_map:+v,u_texsize:q,u_texture:0}},Oa=(x,u,p,v,b,k,O,z,B,q,Y)=>{const te=b.transform;return a.e(Da(x,u,p,v,b,k,O,z,B,q),{u_gamma_scale:v?Math.cos(te._pitch)*te.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+Y})},za=(x,u,p,v,b,k,O,z,B,q)=>a.e(Oa(x,u,p,v,b,k,O,z,!0,B,!0),{u_texsize_icon:q,u_texture_icon:1}),Sh=(x,u,p)=>({u_matrix:x,u_opacity:u,u_color:p}),Eh=(x,u,p,v,b,k)=>a.e(function(O,z,B,q){const Y=B.imageManager.getPattern(O.from.toString()),te=B.imageManager.getPattern(O.to.toString()),{width:ge,height:$e}=B.imageManager.getPixelSize(),Pe=Math.pow(2,q.tileID.overscaledZ),Me=q.tileSize*Math.pow(2,B.transform.tileZoom)/Pe,Te=Me*(q.tileID.canonical.x+q.tileID.wrap*Pe),je=Me*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:te.tl,u_pattern_br_b:te.br,u_texsize:[ge,$e],u_mix:z.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:te.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/jn(q,1,B.transform.tileZoom),u_pixel_coord_upper:[Te>>16,je>>16],u_pixel_coord_lower:[65535&Te,65535&je]}}(v,k,p,b),{u_matrix:x,u_opacity:u}),Tf={fillExtrusion:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_lightpos:new a.aK(x,u.u_lightpos),u_lightintensity:new a.aH(x,u.u_lightintensity),u_lightcolor:new a.aK(x,u.u_lightcolor),u_vertical_gradient:new a.aH(x,u.u_vertical_gradient),u_opacity:new a.aH(x,u.u_opacity)}),fillExtrusionPattern:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_lightpos:new a.aK(x,u.u_lightpos),u_lightintensity:new a.aH(x,u.u_lightintensity),u_lightcolor:new a.aK(x,u.u_lightcolor),u_vertical_gradient:new a.aH(x,u.u_vertical_gradient),u_height_factor:new a.aH(x,u.u_height_factor),u_image:new a.aG(x,u.u_image),u_texsize:new a.aL(x,u.u_texsize),u_pixel_coord_upper:new a.aL(x,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aL(x,u.u_pixel_coord_lower),u_scale:new a.aK(x,u.u_scale),u_fade:new a.aH(x,u.u_fade),u_opacity:new a.aH(x,u.u_opacity)}),fill:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix)}),fillPattern:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_image:new a.aG(x,u.u_image),u_texsize:new a.aL(x,u.u_texsize),u_pixel_coord_upper:new a.aL(x,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aL(x,u.u_pixel_coord_lower),u_scale:new a.aK(x,u.u_scale),u_fade:new a.aH(x,u.u_fade)}),fillOutline:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_world:new a.aL(x,u.u_world)}),fillOutlinePattern:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_world:new a.aL(x,u.u_world),u_image:new a.aG(x,u.u_image),u_texsize:new a.aL(x,u.u_texsize),u_pixel_coord_upper:new a.aL(x,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aL(x,u.u_pixel_coord_lower),u_scale:new a.aK(x,u.u_scale),u_fade:new a.aH(x,u.u_fade)}),circle:(x,u)=>({u_camera_to_center_distance:new a.aH(x,u.u_camera_to_center_distance),u_scale_with_map:new a.aG(x,u.u_scale_with_map),u_pitch_with_map:new a.aG(x,u.u_pitch_with_map),u_extrude_scale:new a.aL(x,u.u_extrude_scale),u_device_pixel_ratio:new a.aH(x,u.u_device_pixel_ratio),u_matrix:new a.aI(x,u.u_matrix)}),collisionBox:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_camera_to_center_distance:new a.aH(x,u.u_camera_to_center_distance),u_pixels_to_tile_units:new a.aH(x,u.u_pixels_to_tile_units),u_extrude_scale:new a.aL(x,u.u_extrude_scale),u_overscale_factor:new a.aH(x,u.u_overscale_factor)}),collisionCircle:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_inv_matrix:new a.aI(x,u.u_inv_matrix),u_camera_to_center_distance:new a.aH(x,u.u_camera_to_center_distance),u_viewport_size:new a.aL(x,u.u_viewport_size)}),debug:(x,u)=>({u_color:new a.aM(x,u.u_color),u_matrix:new a.aI(x,u.u_matrix),u_overlay:new a.aG(x,u.u_overlay),u_overlay_scale:new a.aH(x,u.u_overlay_scale)}),clippingMask:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix)}),heatmap:(x,u)=>({u_extrude_scale:new a.aH(x,u.u_extrude_scale),u_intensity:new a.aH(x,u.u_intensity),u_matrix:new a.aI(x,u.u_matrix)}),heatmapTexture:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_world:new a.aL(x,u.u_world),u_image:new a.aG(x,u.u_image),u_color_ramp:new a.aG(x,u.u_color_ramp),u_opacity:new a.aH(x,u.u_opacity)}),hillshade:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_image:new a.aG(x,u.u_image),u_latrange:new a.aL(x,u.u_latrange),u_light:new a.aL(x,u.u_light),u_shadow:new a.aM(x,u.u_shadow),u_highlight:new a.aM(x,u.u_highlight),u_accent:new a.aM(x,u.u_accent)}),hillshadePrepare:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_image:new a.aG(x,u.u_image),u_dimension:new a.aL(x,u.u_dimension),u_zoom:new a.aH(x,u.u_zoom),u_unpack:new a.aJ(x,u.u_unpack)}),line:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_ratio:new a.aH(x,u.u_ratio),u_device_pixel_ratio:new a.aH(x,u.u_device_pixel_ratio),u_units_to_pixels:new a.aL(x,u.u_units_to_pixels)}),lineGradient:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_ratio:new a.aH(x,u.u_ratio),u_device_pixel_ratio:new a.aH(x,u.u_device_pixel_ratio),u_units_to_pixels:new a.aL(x,u.u_units_to_pixels),u_image:new a.aG(x,u.u_image),u_image_height:new a.aH(x,u.u_image_height)}),linePattern:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_texsize:new a.aL(x,u.u_texsize),u_ratio:new a.aH(x,u.u_ratio),u_device_pixel_ratio:new a.aH(x,u.u_device_pixel_ratio),u_image:new a.aG(x,u.u_image),u_units_to_pixels:new a.aL(x,u.u_units_to_pixels),u_scale:new a.aK(x,u.u_scale),u_fade:new a.aH(x,u.u_fade)}),lineSDF:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_ratio:new a.aH(x,u.u_ratio),u_device_pixel_ratio:new a.aH(x,u.u_device_pixel_ratio),u_units_to_pixels:new a.aL(x,u.u_units_to_pixels),u_patternscale_a:new a.aL(x,u.u_patternscale_a),u_patternscale_b:new a.aL(x,u.u_patternscale_b),u_sdfgamma:new a.aH(x,u.u_sdfgamma),u_image:new a.aG(x,u.u_image),u_tex_y_a:new a.aH(x,u.u_tex_y_a),u_tex_y_b:new a.aH(x,u.u_tex_y_b),u_mix:new a.aH(x,u.u_mix)}),raster:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_tl_parent:new a.aL(x,u.u_tl_parent),u_scale_parent:new a.aH(x,u.u_scale_parent),u_buffer_scale:new a.aH(x,u.u_buffer_scale),u_fade_t:new a.aH(x,u.u_fade_t),u_opacity:new a.aH(x,u.u_opacity),u_image0:new a.aG(x,u.u_image0),u_image1:new a.aG(x,u.u_image1),u_brightness_low:new a.aH(x,u.u_brightness_low),u_brightness_high:new a.aH(x,u.u_brightness_high),u_saturation_factor:new a.aH(x,u.u_saturation_factor),u_contrast_factor:new a.aH(x,u.u_contrast_factor),u_spin_weights:new a.aK(x,u.u_spin_weights)}),symbolIcon:(x,u)=>({u_is_size_zoom_constant:new a.aG(x,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aG(x,u.u_is_size_feature_constant),u_size_t:new a.aH(x,u.u_size_t),u_size:new a.aH(x,u.u_size),u_camera_to_center_distance:new a.aH(x,u.u_camera_to_center_distance),u_pitch:new a.aH(x,u.u_pitch),u_rotate_symbol:new a.aG(x,u.u_rotate_symbol),u_aspect_ratio:new a.aH(x,u.u_aspect_ratio),u_fade_change:new a.aH(x,u.u_fade_change),u_matrix:new a.aI(x,u.u_matrix),u_label_plane_matrix:new a.aI(x,u.u_label_plane_matrix),u_coord_matrix:new a.aI(x,u.u_coord_matrix),u_is_text:new a.aG(x,u.u_is_text),u_pitch_with_map:new a.aG(x,u.u_pitch_with_map),u_texsize:new a.aL(x,u.u_texsize),u_texture:new a.aG(x,u.u_texture)}),symbolSDF:(x,u)=>({u_is_size_zoom_constant:new a.aG(x,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aG(x,u.u_is_size_feature_constant),u_size_t:new a.aH(x,u.u_size_t),u_size:new a.aH(x,u.u_size),u_camera_to_center_distance:new a.aH(x,u.u_camera_to_center_distance),u_pitch:new a.aH(x,u.u_pitch),u_rotate_symbol:new a.aG(x,u.u_rotate_symbol),u_aspect_ratio:new a.aH(x,u.u_aspect_ratio),u_fade_change:new a.aH(x,u.u_fade_change),u_matrix:new a.aI(x,u.u_matrix),u_label_plane_matrix:new a.aI(x,u.u_label_plane_matrix),u_coord_matrix:new a.aI(x,u.u_coord_matrix),u_is_text:new a.aG(x,u.u_is_text),u_pitch_with_map:new a.aG(x,u.u_pitch_with_map),u_texsize:new a.aL(x,u.u_texsize),u_texture:new a.aG(x,u.u_texture),u_gamma_scale:new a.aH(x,u.u_gamma_scale),u_device_pixel_ratio:new a.aH(x,u.u_device_pixel_ratio),u_is_halo:new a.aG(x,u.u_is_halo)}),symbolTextAndIcon:(x,u)=>({u_is_size_zoom_constant:new a.aG(x,u.u_is_size_zoom_constant),u_is_size_feature_constant:new a.aG(x,u.u_is_size_feature_constant),u_size_t:new a.aH(x,u.u_size_t),u_size:new a.aH(x,u.u_size),u_camera_to_center_distance:new a.aH(x,u.u_camera_to_center_distance),u_pitch:new a.aH(x,u.u_pitch),u_rotate_symbol:new a.aG(x,u.u_rotate_symbol),u_aspect_ratio:new a.aH(x,u.u_aspect_ratio),u_fade_change:new a.aH(x,u.u_fade_change),u_matrix:new a.aI(x,u.u_matrix),u_label_plane_matrix:new a.aI(x,u.u_label_plane_matrix),u_coord_matrix:new a.aI(x,u.u_coord_matrix),u_is_text:new a.aG(x,u.u_is_text),u_pitch_with_map:new a.aG(x,u.u_pitch_with_map),u_texsize:new a.aL(x,u.u_texsize),u_texsize_icon:new a.aL(x,u.u_texsize_icon),u_texture:new a.aG(x,u.u_texture),u_texture_icon:new a.aG(x,u.u_texture_icon),u_gamma_scale:new a.aH(x,u.u_gamma_scale),u_device_pixel_ratio:new a.aH(x,u.u_device_pixel_ratio),u_is_halo:new a.aG(x,u.u_is_halo)}),background:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_opacity:new a.aH(x,u.u_opacity),u_color:new a.aM(x,u.u_color)}),backgroundPattern:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_opacity:new a.aH(x,u.u_opacity),u_image:new a.aG(x,u.u_image),u_pattern_tl_a:new a.aL(x,u.u_pattern_tl_a),u_pattern_br_a:new a.aL(x,u.u_pattern_br_a),u_pattern_tl_b:new a.aL(x,u.u_pattern_tl_b),u_pattern_br_b:new a.aL(x,u.u_pattern_br_b),u_texsize:new a.aL(x,u.u_texsize),u_mix:new a.aH(x,u.u_mix),u_pattern_size_a:new a.aL(x,u.u_pattern_size_a),u_pattern_size_b:new a.aL(x,u.u_pattern_size_b),u_scale_a:new a.aH(x,u.u_scale_a),u_scale_b:new a.aH(x,u.u_scale_b),u_pixel_coord_upper:new a.aL(x,u.u_pixel_coord_upper),u_pixel_coord_lower:new a.aL(x,u.u_pixel_coord_lower),u_tile_units_to_pixels:new a.aH(x,u.u_tile_units_to_pixels)}),terrain:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_texture:new a.aG(x,u.u_texture),u_ele_delta:new a.aH(x,u.u_ele_delta)}),terrainDepth:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_ele_delta:new a.aH(x,u.u_ele_delta)}),terrainCoords:(x,u)=>({u_matrix:new a.aI(x,u.u_matrix),u_texture:new a.aG(x,u.u_texture),u_terrain_coords_id:new a.aH(x,u.u_terrain_coords_id),u_ele_delta:new a.aH(x,u.u_ele_delta)})};class Ih{constructor(u,p,v){this.context=u;const b=u.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Io={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $l{constructor(u,p,v,b){this.length=p.length,this.attributes=v,this.itemSize=p.bytesPerElement,this.dynamicDraw=b,this.context=u;const k=u.gl;this.buffer=k.createBuffer(),u.bindVertexBuffer.set(this.buffer),k.bufferData(k.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?k.DYNAMIC_DRAW:k.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,p){for(let v=0;v<this.attributes.length;v++){const b=p.attributes[this.attributes[v].name];b!==void 0&&u.enableVertexAttribArray(b)}}setVertexAttribPointers(u,p,v){for(let b=0;b<this.attributes.length;b++){const k=this.attributes[b],O=p.attributes[k.name];O!==void 0&&u.vertexAttribPointer(O,k.components,u[Io[k.type]],!1,this.itemSize,k.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Or=new WeakMap;function Er(x){var u;if(Or.has(x))return Or.get(x);{const p=(u=x.getParameter(x.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return Or.set(x,p),p}}class fi{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Al extends fi{getDefault(){return a.aO.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Ml extends fi{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Lc extends fi{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Fc extends fi{getDefault(){return[!0,!0,!0,!0]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Dl extends fi{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Bc extends fi{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class Nc extends fi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const p=this.current;(u.func!==p.func||u.ref!==p.ref||u.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Ol extends fi{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Sf extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=u,this.dirty=!1}}class Ef extends fi{getDefault(){return[0,1]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Yo extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=u,this.dirty=!1}}class Ph extends fi{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class $h extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.BLEND):p.disable(p.BLEND),this.current=u,this.dirty=!1}}class Ah extends fi{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Mh extends fi{getDefault(){return a.aO.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Dh extends fi{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Oh extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=u,this.dirty=!1}}class Vc extends fi{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class zl extends fi{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class jc extends fi{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class Uc extends fi{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Qo extends fi{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class If extends fi{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class Pf extends fi{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class qc extends fi{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Po extends fi{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class $f extends fi{getDefault(){return null}set(u){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class ea extends fi{getDefault(){return null}set(u){var p;if(u===this.current&&!this.dirty)return;const v=this.gl;Er(v)?v.bindVertexArray(u):(p=v.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class ta extends fi{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Af extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Hc extends fi{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class ui extends fi{constructor(u,p){super(u),this.context=u,this.parent=p}getDefault(){return null}}class Rl extends ui{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class zh extends ui{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Mf extends ui{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Ra{constructor(u,p,v,b,k){this.context=u,this.width=p,this.height=v;const O=u.gl,z=this.framebuffer=O.createFramebuffer();if(this.colorAttachment=new Rl(u,z),b)this.depthAttachment=k?new Mf(u,z):new zh(u,z);else if(k)throw new Error("Stencil cannot be set without depth");if(O.checkFramebufferStatus(O.FRAMEBUFFER)!==O.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,p=this.colorAttachment.get();if(p&&u.deleteTexture(p),this.depthAttachment){const v=this.depthAttachment.get();v&&u.deleteRenderbuffer(v)}u.deleteFramebuffer(this.framebuffer)}}class Ji{constructor(u,p,v){this.blendFunction=u,this.blendColor=p,this.mask=v}}Ji.Replace=[1,0],Ji.disabled=new Ji(Ji.Replace,a.aO.transparent,[!1,!1,!1,!1]),Ji.unblended=new Ji(Ji.Replace,a.aO.transparent,[!0,!0,!0,!0]),Ji.alphaBlended=new Ji([1,771],a.aO.transparent,[!0,!0,!0,!0]);class Rh{constructor(u){var p,v;if(this.gl=u,this.clearColor=new Al(this),this.clearDepth=new Ml(this),this.clearStencil=new Lc(this),this.colorMask=new Fc(this),this.depthMask=new Dl(this),this.stencilMask=new Bc(this),this.stencilFunc=new Nc(this),this.stencilOp=new Ol(this),this.stencilTest=new Sf(this),this.depthRange=new Ef(this),this.depthTest=new Yo(this),this.depthFunc=new Ph(this),this.blend=new $h(this),this.blendFunc=new Ah(this),this.blendColor=new Mh(this),this.blendEquation=new Dh(this),this.cullFace=new Oh(this),this.cullFaceSide=new Vc(this),this.frontFace=new zl(this),this.program=new jc(this),this.activeTexture=new Uc(this),this.viewport=new Qo(this),this.bindFramebuffer=new If(this),this.bindRenderbuffer=new Pf(this),this.bindTexture=new qc(this),this.bindVertexBuffer=new Po(this),this.bindElementBuffer=new $f(this),this.bindVertexArray=new ea(this),this.pixelStoreUnpack=new ta(this),this.pixelStoreUnpackPremultiplyAlpha=new Af(this),this.pixelStoreUnpackFlipY=new Hc(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),Er(u)){this.HALF_FLOAT=u.HALF_FLOAT;const b=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=u.RGBA16F)!==null&&p!==void 0?p:b==null?void 0:b.RGBA16F_EXT,this.RGB16F=(v=u.RGB16F)!==null&&v!==void 0?v:b==null?void 0:b.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const b=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=b==null?void 0:b.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,p){return new Ih(this,u,p)}createVertexBuffer(u,p,v){return new $l(this,u,p,v)}createRenderbuffer(u,p,v){const b=this.gl,k=b.createRenderbuffer();return this.bindRenderbuffer.set(k),b.renderbufferStorage(b.RENDERBUFFER,u,p,v),this.bindRenderbuffer.set(null),k}createFramebuffer(u,p,v,b){return new Ra(this,u,p,v,b)}clear({color:u,depth:p,stencil:v}){const b=this.gl;let k=0;u&&(k|=b.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(k|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),v!==void 0&&(k|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),b.clear(k)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){a.aD(u.blendFunction,Ji.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return Er(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var p;return Er(this.gl)?this.gl.deleteVertexArray(u):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class li{constructor(u,p,v){this.func=u,this.mask=p,this.range=v}}li.ReadOnly=!1,li.ReadWrite=!0,li.disabled=new li(519,li.ReadOnly,[0,1]);const Gc=7680;class ki{constructor(u,p,v,b,k,O){this.test=u,this.ref=p,this.mask=v,this.fail=b,this.depthFail=k,this.pass=O}}ki.disabled=new ki({func:519,mask:0},0,0,Gc,Gc,Gc);class wi{constructor(u,p,v){this.enable=u,this.mode=p,this.frontFace=v}}let $o;function Ll(x,u,p,v,b,k,O){const z=x.context,B=z.gl,q=x.useProgram("collisionBox"),Y=[];let te=0,ge=0;for(let De=0;De<v.length;De++){const Qe=v[De],vt=u.getTile(Qe),xt=vt.getBucket(p);if(!xt)continue;let Tt=Qe.posMatrix;b[0]===0&&b[1]===0||(Tt=x.translatePosMatrix(Qe.posMatrix,vt,b,k));const Ht=O?xt.textCollisionBox:xt.iconCollisionBox,jt=xt.collisionCircleArray;if(jt.length>0){const Yt=a.F(),nn=Tt;a.aP(Yt,xt.placementInvProjMatrix,x.transform.glCoordMatrix),a.aP(Yt,Yt,xt.placementViewportMatrix),Y.push({circleArray:jt,circleOffset:ge,transform:nn,invTransform:Yt,coord:Qe}),te+=jt.length/4,ge=te}Ht&&q.draw(z,B.LINES,li.disabled,ki.disabled,x.colorModeForRenderPass(),wi.disabled,yf(Tt,x.transform,vt),x.style.map.terrain&&x.style.map.terrain.getTerrainData(Qe),p.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,null,x.transform.zoom,null,null,Ht.collisionVertexBuffer)}if(!O||!Y.length)return;const $e=x.useProgram("collisionCircle"),Pe=new a.aQ;Pe.resize(4*te),Pe._trim();let Me=0;for(const De of Y)for(let Qe=0;Qe<De.circleArray.length/4;Qe++){const vt=4*Qe,xt=De.circleArray[vt+0],Tt=De.circleArray[vt+1],Ht=De.circleArray[vt+2],jt=De.circleArray[vt+3];Pe.emplace(Me++,xt,Tt,Ht,jt,0),Pe.emplace(Me++,xt,Tt,Ht,jt,1),Pe.emplace(Me++,xt,Tt,Ht,jt,2),Pe.emplace(Me++,xt,Tt,Ht,jt,3)}(!$o||$o.length<2*te)&&($o=function(De){const Qe=2*De,vt=new a.aS;vt.resize(Qe),vt._trim();for(let xt=0;xt<Qe;xt++){const Tt=6*xt;vt.uint16[Tt+0]=4*xt+0,vt.uint16[Tt+1]=4*xt+1,vt.uint16[Tt+2]=4*xt+2,vt.uint16[Tt+3]=4*xt+2,vt.uint16[Tt+4]=4*xt+3,vt.uint16[Tt+5]=4*xt+0}return vt}(te));const Te=z.createIndexBuffer($o,!0),je=z.createVertexBuffer(Pe,a.aR.members,!0);for(const De of Y){const Qe={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(gt=x.transform).cameraToCenterDistance,u_viewport_size:[gt.width,gt.height]};$e.draw(z,B.TRIANGLES,li.disabled,ki.disabled,x.colorModeForRenderPass(),wi.disabled,Qe,x.style.map.terrain&&x.style.map.terrain.getTerrainData(De.coord),p.id,je,Te,a.$.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,x.transform.zoom,null,null,null)}var gt;je.destroy(),Te.destroy()}wi.disabled=new wi(!1,1029,2305),wi.backCCW=new wi(!0,1029,2305);const Zc=a.an(new Float32Array(16));function Df(x,u,p,v,b,k){const{horizontalAlign:O,verticalAlign:z}=a.at(x);return new a.P((-(O-.5)*u/b+v[0])*k,(-(z-.5)*p/b+v[1])*k)}function Fl(x,u,p,v,b,k,O,z,B,q,Y){const te=x.text.placedSymbolArray,ge=x.text.dynamicLayoutVertexArray,$e=x.icon.dynamicLayoutVertexArray,Pe={};ge.clear();for(let Me=0;Me<te.length;Me++){const Te=te.get(Me),je=Te.hidden||!Te.crossTileID||x.allowVerticalPlacement&&!Te.placedOrientation?null:v[Te.crossTileID];if(je){const gt=new a.P(Te.anchorX,Te.anchorY),De=bn(gt,p?O:k,Y),Qe=Ee(b.cameraToCenterDistance,De.signedDistanceFromCamera);let vt=a.ai(x.textSizeData,B,Te)*Qe/a.ao;p&&(vt*=x.tilePixelRatio/z);const{width:xt,height:Tt,anchor:Ht,textOffset:jt,textBoxScale:Yt}=je,nn=Df(Ht,xt,Tt,jt,Yt,vt),Xn=p?bn(gt.add(nn),k,Y).point:De.point.add(u?nn.rotate(-b.angle):nn),rn=x.allowVerticalPlacement&&Te.placedOrientation===a.ah.vertical?Math.PI/2:0;for(let Dn=0;Dn<Te.numGlyphs;Dn++)a.aj(ge,Xn,rn);q&&Te.associatedIconIndex>=0&&(Pe[Te.associatedIconIndex]={shiftedAnchor:Xn,angle:rn})}else Ft(Te.numGlyphs,ge)}if(q){$e.clear();const Me=x.icon.placedSymbolArray;for(let Te=0;Te<Me.length;Te++){const je=Me.get(Te);if(je.hidden)Ft(je.numGlyphs,$e);else{const gt=Pe[Te];if(gt)for(let De=0;De<je.numGlyphs;De++)a.aj($e,gt.shiftedAnchor,gt.angle);else Ft(je.numGlyphs,$e)}}x.icon.dynamicLayoutVertexBuffer.updateData($e)}x.text.dynamicLayoutVertexBuffer.updateData(ge)}function Bl(x,u,p){return p.iconsInText&&u?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function Nl(x,u,p,v,b,k,O,z,B,q,Y,te){const ge=x.context,$e=ge.gl,Pe=x.transform,Me=z==="map",Te=B==="map",je=z!=="viewport"&&p.layout.get("symbol-placement")!=="point",gt=Me&&!Te&&!je,De=!p.layout.get("symbol-sort-key").isConstant();let Qe=!1;const vt=x.depthModeForSublayer(0,li.ReadOnly),xt=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Tt=[];for(const Ht of v){const jt=u.getTile(Ht),Yt=jt.getBucket(p);if(!Yt)continue;const nn=b?Yt.text:Yt.icon;if(!nn||!nn.segments.get().length||!nn.hasVisibleVertices)continue;const Xn=nn.programConfigurations.get(p.id),rn=b||Yt.sdfIcons,Dn=b?Yt.textSizeData:Yt.iconSizeData,Jn=Te||Pe.pitch!==0,ci=x.useProgram(Bl(rn,b,Yt),Xn),Fn=a.ag(Dn,Pe.zoom),Qn=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ht);let ni,Vi,_i,ss,ur=[0,0],Mi=null;if(b)Vi=jt.glyphAtlasTexture,_i=$e.LINEAR,ni=jt.glyphAtlasTexture.size,Yt.iconsInText&&(ur=jt.imageAtlasTexture.size,Mi=jt.imageAtlasTexture,ss=Jn||x.options.rotating||x.options.zooming||Dn.kind==="composite"||Dn.kind==="camera"?$e.LINEAR:$e.NEAREST);else{const ir=p.layout.get("icon-size").constantOr(0)!==1||Yt.iconsNeedLinear;Vi=jt.imageAtlasTexture,_i=rn||x.options.rotating||x.options.zooming||ir||Jn?$e.LINEAR:$e.NEAREST,ni=jt.imageAtlasTexture.size}const fr=jn(jt,1,x.transform.zoom),os=Tn(Ht.posMatrix,Te,Me,x.transform,fr),Fs=ti(Ht.posMatrix,Te,Me,x.transform,fr),lo=xt&&Yt.hasTextData(),Ka=p.layout.get("icon-text-fit")!=="none"&&lo&&Yt.hasIconData();if(je){const ir=x.style.map.terrain?(_s,rr)=>x.style.map.terrain.getElevation(Ht,_s,rr):null,Oi=p.layout.get("text-rotation-alignment")==="map";le(Yt,Ht.posMatrix,x,b,os,Fs,Te,q,Oi,ir)}const co=x.translatePosMatrix(Ht.posMatrix,jt,k,O),Bs=je||b&&xt||Ka?Zc:os,nr=x.translatePosMatrix(Fs,jt,k,O,!0),Di=rn&&p.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ii;Ii=rn?Yt.iconsInText?za(Dn.kind,Fn,gt,Te,x,co,Bs,nr,ni,ur):Oa(Dn.kind,Fn,gt,Te,x,co,Bs,nr,b,ni,!0):Da(Dn.kind,Fn,gt,Te,x,co,Bs,nr,b,ni);const ps={program:ci,buffers:nn,uniformValues:Ii,atlasTexture:Vi,atlasTextureIcon:Mi,atlasInterpolation:_i,atlasInterpolationIcon:ss,isSDF:rn,hasHalo:Di};if(De&&Yt.canOverlap){Qe=!0;const ir=nn.segments.get();for(const Oi of ir)Tt.push({segments:new a.$([Oi]),sortKey:Oi.sortKey,state:ps,terrainData:Qn})}else Tt.push({segments:nn.segments,sortKey:0,state:ps,terrainData:Qn})}Qe&&Tt.sort((Ht,jt)=>Ht.sortKey-jt.sortKey);for(const Ht of Tt){const jt=Ht.state;if(ge.activeTexture.set($e.TEXTURE0),jt.atlasTexture.bind(jt.atlasInterpolation,$e.CLAMP_TO_EDGE),jt.atlasTextureIcon&&(ge.activeTexture.set($e.TEXTURE1),jt.atlasTextureIcon&&jt.atlasTextureIcon.bind(jt.atlasInterpolationIcon,$e.CLAMP_TO_EDGE)),jt.isSDF){const Yt=jt.uniformValues;jt.hasHalo&&(Yt.u_is_halo=1,Of(jt.buffers,Ht.segments,p,x,jt.program,vt,Y,te,Yt,Ht.terrainData)),Yt.u_is_halo=0}Of(jt.buffers,Ht.segments,p,x,jt.program,vt,Y,te,jt.uniformValues,Ht.terrainData)}}function Of(x,u,p,v,b,k,O,z,B,q){const Y=v.context;b.draw(Y,Y.gl.TRIANGLES,k,O,z,wi.disabled,B,q,p.id,x.layoutVertexBuffer,x.indexBuffer,u,p.paint,v.transform.zoom,x.programConfigurations.get(p.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function Vl(x,u,p,v,b){if(!p||!v||!v.imageAtlas)return;const k=v.imageAtlas.patternPositions;let O=k[p.to.toString()],z=k[p.from.toString()];if(!O&&z&&(O=z),!z&&O&&(z=O),!O||!z){const B=b.getPaintProperty(u);O=k[B],z=k[B]}O&&z&&x.setConstantPatternPositions(O,z)}function zf(x,u,p,v,b,k,O){const z=x.context.gl,B="fill-pattern",q=p.paint.get(B),Y=q&&q.constantOr(1),te=p.getCrossfadeParameters();let ge,$e,Pe,Me,Te;O?($e=Y&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=z.LINES):($e=Y?"fillPattern":"fill",ge=z.TRIANGLES);const je=q.constantOr(null);for(const gt of v){const De=u.getTile(gt);if(Y&&!De.patternsLoaded())continue;const Qe=De.getBucket(p);if(!Qe)continue;const vt=Qe.programConfigurations.get(p.id),xt=x.useProgram($e,vt),Tt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(gt);Y&&(x.context.activeTexture.set(z.TEXTURE0),De.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),vt.updatePaintBuffers(te)),Vl(vt,B,je,De,p);const Ht=Tt?gt:null,jt=x.translatePosMatrix(Ht?Ht.posMatrix:gt.posMatrix,De,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(O){Me=Qe.indexBuffer2,Te=Qe.segments2;const Yt=[z.drawingBufferWidth,z.drawingBufferHeight];Pe=$e==="fillOutlinePattern"&&Y?bf(jt,x,te,De,Yt):Ch(jt,Yt)}else Me=Qe.indexBuffer,Te=Qe.segments,Pe=Y?Tl(jt,x,te,De):vf(jt);xt.draw(x.context,ge,b,x.stencilModeForClipping(gt),k,wi.disabled,Pe,Tt,p.id,Qe.layoutVertexBuffer,Me,Te,p.paint,x.transform.zoom,vt)}}function jl(x,u,p,v,b,k,O){const z=x.context,B=z.gl,q="fill-extrusion-pattern",Y=p.paint.get(q),te=Y.constantOr(1),ge=p.getCrossfadeParameters(),$e=p.paint.get("fill-extrusion-opacity"),Pe=Y.constantOr(null);for(const Me of v){const Te=u.getTile(Me),je=Te.getBucket(p);if(!je)continue;const gt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Me),De=je.programConfigurations.get(p.id),Qe=x.useProgram(te?"fillExtrusionPattern":"fillExtrusion",De);te&&(x.context.activeTexture.set(B.TEXTURE0),Te.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),De.updatePaintBuffers(ge)),Vl(De,q,Pe,Te,p);const vt=x.translatePosMatrix(Me.posMatrix,Te,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),xt=p.paint.get("fill-extrusion-vertical-gradient"),Tt=te?kh(vt,x,xt,$e,Me,ge,Te):$a(vt,x,xt,$e);Qe.draw(z,z.gl.TRIANGLES,b,k,O,wi.backCCW,Tt,gt,p.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,p.paint,x.transform.zoom,De,x.style.map.terrain&&je.centroidVertexBuffer)}}function Ul(x,u,p,v,b,k,O){const z=x.context,B=z.gl,q=p.fbo;if(!q)return;const Y=x.useProgram("hillshade"),te=x.style.map.terrain&&x.style.map.terrain.getTerrainData(u);z.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,q.colorAttachment.get()),Y.draw(z,B.TRIANGLES,b,k,O,wi.disabled,((ge,$e,Pe,Me)=>{const Te=Pe.paint.get("hillshade-shadow-color"),je=Pe.paint.get("hillshade-highlight-color"),gt=Pe.paint.get("hillshade-accent-color");let De=Pe.paint.get("hillshade-illumination-direction")*(Math.PI/180);Pe.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=ge.transform.angle);const Qe=!ge.options.moving;return{u_matrix:Me?Me.posMatrix:ge.transform.calculatePosMatrix($e.tileID.toUnwrapped(),Qe),u_image:0,u_latrange:kf(0,$e.tileID),u_light:[Pe.paint.get("hillshade-exaggeration"),De],u_shadow:Te,u_highlight:je,u_accent:gt}})(x,p,v,te?u:null),te,v.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}function Wc(x,u,p,v,b,k){const O=x.context,z=O.gl,B=u.dem;if(B&&B.data){const q=B.dim,Y=B.stride,te=B.getPixels();if(O.activeTexture.set(z.TEXTURE1),O.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||x.getTileTexture(Y),u.demTexture){const $e=u.demTexture;$e.update(te,{premultiply:!1}),$e.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else u.demTexture=new he(O,te,z.RGBA,{premultiply:!1}),u.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);O.activeTexture.set(z.TEXTURE0);let ge=u.fbo;if(!ge){const $e=new he(O,{width:q,height:q,data:null},z.RGBA);$e.bind(z.LINEAR,z.CLAMP_TO_EDGE),ge=u.fbo=O.createFramebuffer(q,q,!0,!1),ge.colorAttachment.set($e.texture)}O.bindFramebuffer.set(ge.framebuffer),O.viewport.set([0,0,q,q]),x.useProgram("hillshadePrepare").draw(O,z.TRIANGLES,v,b,k,wi.disabled,(($e,Pe)=>{const Me=Pe.stride,Te=a.F();return a.aN(Te,0,a.W,-a.W,0,0,1),a.H(Te,Te,[0,-a.W,0]),{u_matrix:Te,u_image:1,u_dimension:[Me,Me],u_zoom:$e.overscaledZ,u_unpack:Pe.getUnpackVector()}})(u.tileID,B),null,p.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function Rf(x,u,p,v,b,k){const O=v.paint.get("raster-fade-duration");if(!k&&O>0){const z=g.now(),B=(z-x.timeAdded)/O,q=u?(z-u.timeAdded)/O:-1,Y=p.getSource(),te=b.coveringZoomLevel({tileSize:Y.tileSize,roundZoom:Y.roundZoom}),ge=!u||Math.abs(u.tileID.overscaledZ-te)>Math.abs(x.tileID.overscaledZ-te),$e=ge&&x.refreshedUponExpiration?1:a.ac(ge?B:1-q,0,1);return x.refreshedUponExpiration&&B>=1&&(x.refreshedUponExpiration=!1),u?{opacity:1,mix:1-$e}:{opacity:$e,mix:0}}return{opacity:1,mix:0}}const Lf=new a.aO(1,0,0,1),ql=new a.aO(0,1,0,1),Kc=new a.aO(0,0,1,1),Lh=new a.aO(1,0,1,1),Ff=new a.aO(0,1,1,1);function Bi(x,u,p,v){zr(x,0,u+p/2,x.transform.width,p,v)}function ro(x,u,p,v){zr(x,u-p/2,0,p,x.transform.height,v)}function zr(x,u,p,v,b,k){const O=x.context,z=O.gl;z.enable(z.SCISSOR_TEST),z.scissor(u*x.pixelRatio,p*x.pixelRatio,v*x.pixelRatio,b*x.pixelRatio),O.clear({color:k}),z.disable(z.SCISSOR_TEST)}function Xc(x,u,p){const v=x.context,b=v.gl,k=p.posMatrix,O=x.useProgram("debug"),z=li.disabled,B=ki.disabled,q=x.colorModeForRenderPass(),Y="$debug",te=x.style.map.terrain&&x.style.map.terrain.getTerrainData(p);v.activeTexture.set(b.TEXTURE0);const ge=u.getTileByID(p.key).latestRawTileData,$e=Math.floor((ge&&ge.byteLength||0)/1024),Pe=u.getTile(p).tileSize,Me=512/Math.min(Pe,512)*(p.overscaledZ/x.transform.zoom)*.5;let Te=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(Te+=` => ${p.overscaledZ}`),function(je,gt){je.initDebugOverlayCanvas();const De=je.debugOverlayCanvas,Qe=je.context.gl,vt=je.debugOverlayCanvas.getContext("2d");vt.clearRect(0,0,De.width,De.height),vt.shadowColor="white",vt.shadowBlur=2,vt.lineWidth=1.5,vt.strokeStyle="white",vt.textBaseline="top",vt.font="bold 36px Open Sans, sans-serif",vt.fillText(gt,5,5),vt.strokeText(gt,5,5),je.debugOverlayTexture.update(De),je.debugOverlayTexture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE)}(x,`${Te} ${$e}kB`),O.draw(v,b.TRIANGLES,z,B,Ji.alphaBlended,wi.disabled,wf(k,a.aO.transparent,Me),null,Y,x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments),O.draw(v,b.LINE_STRIP,z,B,q,wi.disabled,wf(k,a.aO.red),te,Y,x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments)}function Hl(x,u,p){const v=x.context,b=v.gl,k=x.colorModeForRenderPass(),O=new li(b.LEQUAL,li.ReadWrite,x.depthRangeFor3D),z=x.useProgram("terrain"),B=u.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,x.width,x.height]);for(const q of p){const Y=x.renderToTexture.getTexture(q),te=u.getTerrainData(q.tileID);v.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,Y.texture);const ge={u_matrix:x.transform.calculatePosMatrix(q.tileID.toUnwrapped()),u_texture:0,u_ele_delta:u.getMeshFrameDelta(x.transform.zoom)};z.draw(v,b.TRIANGLES,O,ki.disabled,k,wi.backCCW,ge,te,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}}class Bf{constructor(u,p){this.context=new Rh(u),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=xi.maxUnderzooming+xi.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new no}resize(u,p,v){if(this.width=Math.floor(u*v),this.height=Math.floor(p*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const u=this.context,p=new a.aV;p.emplaceBack(0,0),p.emplaceBack(a.W,0),p.emplaceBack(0,a.W),p.emplaceBack(a.W,a.W),this.tileExtentBuffer=u.createVertexBuffer(p,xl.members),this.tileExtentSegments=a.$.simpleSegment(0,0,4,2);const v=new a.aV;v.emplaceBack(0,0),v.emplaceBack(a.W,0),v.emplaceBack(0,a.W),v.emplaceBack(a.W,a.W),this.debugBuffer=u.createVertexBuffer(v,xl.members),this.debugSegments=a.$.simpleSegment(0,0,4,5);const b=new a.Z;b.emplaceBack(0,0,0,0),b.emplaceBack(a.W,0,a.W,0),b.emplaceBack(0,a.W,0,a.W),b.emplaceBack(a.W,a.W,a.W,a.W),this.rasterBoundsBuffer=u.createVertexBuffer(b,_n.members),this.rasterBoundsSegments=a.$.simpleSegment(0,0,4,2);const k=new a.aV;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(k,xl.members),this.viewportSegments=a.$.simpleSegment(0,0,4,2);const O=new a.aW;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(O);const z=new a.aX;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(z);const B=this.context.gl;this.stencilClearMode=new ki({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const u=this.context,p=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=a.F();a.aN(v,0,this.width,this.height,0,0,1),a.J(v,v,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,p.TRIANGLES,li.disabled,this.stencilClearMode,Ji.disabled,wi.disabled,Sl(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,p){if(this.currentStencilSource===u.source||!u.isTileClipped()||!p||!p.length)return;this.currentStencilSource=u.source;const v=this.context,b=v.gl;this.nextStencilID+p.length>256&&this.clearStencil(),v.setColorMode(Ji.disabled),v.setDepthMode(li.disabled);const k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of p){const z=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O);k.draw(v,b.TRIANGLES,li.disabled,new ki({func:b.ALWAYS,mask:0},z,255,b.KEEP,b.KEEP,b.REPLACE),Ji.disabled,wi.disabled,Sl(O.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,p=this.context.gl;return new ki({func:p.NOTEQUAL,mask:255},u,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(u){const p=this.context.gl;return new ki({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(u){const p=this.context.gl,v=u.sort((O,z)=>z.overscaledZ-O.overscaledZ),b=v[v.length-1].overscaledZ,k=v[0].overscaledZ-b+1;if(k>1){this.currentStencilSource=void 0,this.nextStencilID+k>256&&this.clearStencil();const O={};for(let z=0;z<k;z++)O[z+b]=new ki({func:p.GEQUAL,mask:255},z+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=k,[O,v]}return[{[b]:ki.disabled},v]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new Ji([u.CONSTANT_COLOR,u.ONE],new a.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ji.unblended:Ji.alphaBlended}depthModeForSublayer(u,p,v){if(!this.opaquePassEnabledForLayer())return li.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new li(v||this.context.gl.LEQUAL,p,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,p){this.style=u,this.options=p,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(g.now()),this.imageManager.beginFrame();const v=this.style._order,b=this.style.sourceCaches,k={},O={},z={};for(const B in b){const q=b[B];q.used&&q.prepare(this.context),k[B]=q.getVisibleCoordinates(),O[B]=k[B].slice().reverse(),z[B]=q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<v.length;B++)if(this.style._layers[v[B]].is3D()){this.opaquePassCutoff=B;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const B of v){const q=this.style._layers[B];if(!q.hasOffscreenPass()||q.isHidden(this.transform.zoom))continue;const Y=O[q.source];(q.type==="custom"||Y.length)&&this.renderLayer(this,b[q.source],q,Y)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?a.aO.black:a.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[v[this.currentLayer]],q=b[B.source],Y=k[B.source];this._renderTileClippingMasks(B,Y),this.renderLayer(this,q,B,Y)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const B=this.style._layers[v[this.currentLayer]],q=b[B.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(B))continue;const Y=(B.type==="symbol"?z:O)[B.source];this._renderTileClippingMasks(B,k[B.source]),this.renderLayer(this,q,B,Y)}if(this.options.showTileBoundaries){const B=function(q,Y){let te=null;const ge=Object.values(q._layers).flatMap(Te=>Te.source&&!Te.isHidden(Y)?[q.sourceCaches[Te.source]]:[]),$e=ge.filter(Te=>Te.getSource().type==="vector"),Pe=ge.filter(Te=>Te.getSource().type!=="vector"),Me=Te=>{(!te||te.getSource().maxzoom<Te.getSource().maxzoom)&&(te=Te)};return $e.forEach(Te=>Me(Te)),te||Pe.forEach(Te=>Me(Te)),te}(this.style,this.transform.zoom);B&&function(q,Y,te){for(let ge=0;ge<te.length;ge++)Xc(q,Y,te[ge])}(this,B,B.getVisibleCoordinates())}this.options.showPadding&&function(B){const q=B.transform.padding;Bi(B,B.transform.height-(q.top||0),3,Lf),Bi(B,q.bottom||0,3,ql),ro(B,q.left||0,3,Kc),ro(B,B.transform.width-(q.right||0),3,Lh);const Y=B.transform.centerPoint;(function(te,ge,$e,Pe){zr(te,ge-1,$e-10,2,20,Pe),zr(te,ge-10,$e-1,20,2,Pe)})(B,Y.x,B.transform.height-Y.y,Ff)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,v=this.transform.projMatrix;let b=this.terrainFacilitator.dirty;b||(b=u?!a.aY(p,v):!a.aZ(p,v)),b||(b=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),b&&(a.a_(p,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(k,O){const z=k.context,B=z.gl,q=Ji.unblended,Y=new li(B.LEQUAL,li.ReadWrite,[0,1]),te=O.getTerrainMesh(),ge=O.sourceCache.getRenderableTiles(),$e=k.useProgram("terrainDepth");z.bindFramebuffer.set(O.getFramebuffer("depth").framebuffer),z.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),z.clear({color:a.aO.transparent,depth:1});for(const Pe of ge){const Me=O.getTerrainData(Pe.tileID),Te={u_matrix:k.transform.calculatePosMatrix(Pe.tileID.toUnwrapped()),u_ele_delta:O.getMeshFrameDelta(k.transform.zoom)};$e.draw(z,B.TRIANGLES,Y,ki.disabled,q,wi.backCCW,Te,Me,"terrain",te.vertexBuffer,te.indexBuffer,te.segments)}z.bindFramebuffer.set(null),z.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain),function(k,O){const z=k.context,B=z.gl,q=Ji.unblended,Y=new li(B.LEQUAL,li.ReadWrite,[0,1]),te=O.getTerrainMesh(),ge=O.getCoordsTexture(),$e=O.sourceCache.getRenderableTiles(),Pe=k.useProgram("terrainCoords");z.bindFramebuffer.set(O.getFramebuffer("coords").framebuffer),z.viewport.set([0,0,k.width/devicePixelRatio,k.height/devicePixelRatio]),z.clear({color:a.aO.transparent,depth:1}),O.coordsIndex=[];for(const Me of $e){const Te=O.getTerrainData(Me.tileID);z.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,ge.texture);const je={u_matrix:k.transform.calculatePosMatrix(Me.tileID.toUnwrapped()),u_terrain_coords_id:(255-O.coordsIndex.length)/255,u_texture:0,u_ele_delta:O.getMeshFrameDelta(k.transform.zoom)};Pe.draw(z,B.TRIANGLES,Y,ki.disabled,q,wi.backCCW,je,Te,"terrain",te.vertexBuffer,te.indexBuffer,te.segments),O.coordsIndex.push(Me.tileID.key)}z.bindFramebuffer.set(null),z.viewport.set([0,0,k.width,k.height])}(this,this.style.map.terrain))}renderLayer(u,p,v,b){if(!v.isHidden(this.transform.zoom)&&(v.type==="background"||v.type==="custom"||(b||[]).length))switch(this.id=v.id,v.type){case"symbol":(function(k,O,z,B,q){if(k.renderPass!=="translucent")return;const Y=ki.disabled,te=k.colorModeForRenderPass();(z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ge,$e,Pe,Me,Te,je,gt){const De=$e.transform,Qe=Te==="map",vt=je==="map";for(const xt of ge){const Tt=Me.getTile(xt),Ht=Tt.getBucket(Pe);if(!Ht||!Ht.text||!Ht.text.segments.get().length)continue;const jt=a.ag(Ht.textSizeData,De.zoom),Yt=jn(Tt,1,$e.transform.zoom),nn=Tn(xt.posMatrix,vt,Qe,$e.transform,Yt),Xn=Pe.layout.get("icon-text-fit")!=="none"&&Ht.hasIconData();if(jt){const rn=Math.pow(2,De.zoom-Tt.tileID.overscaledZ);Fl(Ht,Qe,vt,gt,De,nn,xt.posMatrix,rn,jt,Xn,$e.style.map.terrain?(Dn,Jn)=>$e.style.map.terrain.getElevation(xt,Dn,Jn):null)}}}(B,k,z,O,z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),q),z.paint.get("icon-opacity").constantOr(1)!==0&&Nl(k,O,z,B,!1,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),z.layout.get("icon-rotation-alignment"),z.layout.get("icon-pitch-alignment"),z.layout.get("icon-keep-upright"),Y,te),z.paint.get("text-opacity").constantOr(1)!==0&&Nl(k,O,z,B,!0,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.layout.get("text-keep-upright"),Y,te),O.map.showCollisionBoxes&&(Ll(k,O,z,B,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),!0),Ll(k,O,z,B,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),!1))})(u,p,v,b,this.style.placement.variableOffsets);break;case"circle":(function(k,O,z,B){if(k.renderPass!=="translucent")return;const q=z.paint.get("circle-opacity"),Y=z.paint.get("circle-stroke-width"),te=z.paint.get("circle-stroke-opacity"),ge=!z.layout.get("circle-sort-key").isConstant();if(q.constantOr(1)===0&&(Y.constantOr(1)===0||te.constantOr(1)===0))return;const $e=k.context,Pe=$e.gl,Me=k.depthModeForSublayer(0,li.ReadOnly),Te=ki.disabled,je=k.colorModeForRenderPass(),gt=[];for(let De=0;De<B.length;De++){const Qe=B[De],vt=O.getTile(Qe),xt=vt.getBucket(z);if(!xt)continue;const Tt=xt.programConfigurations.get(z.id),Ht=k.useProgram("circle",Tt),jt=xt.layoutVertexBuffer,Yt=xt.indexBuffer,nn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(Qe),Xn={programConfiguration:Tt,program:Ht,layoutVertexBuffer:jt,indexBuffer:Yt,uniformValues:Th(k,Qe,vt,z),terrainData:nn};if(ge){const rn=xt.segments.get();for(const Dn of rn)gt.push({segments:new a.$([Dn]),sortKey:Dn.sortKey,state:Xn})}else gt.push({segments:xt.segments,sortKey:0,state:Xn})}ge&&gt.sort((De,Qe)=>De.sortKey-Qe.sortKey);for(const De of gt){const{programConfiguration:Qe,program:vt,layoutVertexBuffer:xt,indexBuffer:Tt,uniformValues:Ht,terrainData:jt}=De.state;vt.draw($e,Pe.TRIANGLES,Me,Te,je,wi.disabled,Ht,jt,z.id,xt,Tt,De.segments,z.paint,k.transform.zoom,Qe)}})(u,p,v,b);break;case"heatmap":(function(k,O,z,B){if(z.paint.get("heatmap-opacity")!==0)if(k.renderPass==="offscreen"){const q=k.context,Y=q.gl,te=ki.disabled,ge=new Ji([Y.ONE,Y.ONE],a.aO.transparent,[!0,!0,!0,!0]);(function($e,Pe,Me){const Te=$e.gl;$e.activeTexture.set(Te.TEXTURE1),$e.viewport.set([0,0,Pe.width/4,Pe.height/4]);let je=Me.heatmapFbo;if(je)Te.bindTexture(Te.TEXTURE_2D,je.colorAttachment.get()),$e.bindFramebuffer.set(je.framebuffer);else{const gt=Te.createTexture();Te.bindTexture(Te.TEXTURE_2D,gt),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,Te.CLAMP_TO_EDGE),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,Te.LINEAR),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,Te.LINEAR),je=Me.heatmapFbo=$e.createFramebuffer(Pe.width/4,Pe.height/4,!1,!1),function(De,Qe,vt,xt){var Tt,Ht;const jt=De.gl,Yt=(Tt=De.HALF_FLOAT)!==null&&Tt!==void 0?Tt:jt.UNSIGNED_BYTE,nn=(Ht=De.RGBA16F)!==null&&Ht!==void 0?Ht:jt.RGBA;jt.texImage2D(jt.TEXTURE_2D,0,nn,Qe.width/4,Qe.height/4,0,jt.RGBA,Yt,null),xt.colorAttachment.set(vt)}($e,Pe,gt,je)}})(q,k,z),q.clear({color:a.aO.transparent});for(let $e=0;$e<B.length;$e++){const Pe=B[$e];if(O.hasRenderableParent(Pe))continue;const Me=O.getTile(Pe),Te=Me.getBucket(z);if(!Te)continue;const je=Te.programConfigurations.get(z.id),gt=k.useProgram("heatmap",je),{zoom:De}=k.transform;gt.draw(q,Y.TRIANGLES,li.disabled,te,ge,wi.disabled,xf(Pe.posMatrix,Me,De,z.paint.get("heatmap-intensity")),null,z.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,z.paint,k.transform.zoom,je)}q.viewport.set([0,0,k.width,k.height])}else k.renderPass==="translucent"&&(k.context.setColorMode(k.colorModeForRenderPass()),function(q,Y){const te=q.context,ge=te.gl,$e=Y.heatmapFbo;if(!$e)return;te.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,$e.colorAttachment.get()),te.activeTexture.set(ge.TEXTURE1);let Pe=Y.colorRampTexture;Pe||(Pe=Y.colorRampTexture=new he(te,Y.colorRamp,ge.RGBA)),Pe.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),q.useProgram("heatmapTexture").draw(te,ge.TRIANGLES,li.disabled,ki.disabled,q.colorModeForRenderPass(),wi.disabled,((Me,Te,je,gt)=>{const De=a.F();a.aN(De,0,Me.width,Me.height,0,0,1);const Qe=Me.context.gl;return{u_matrix:De,u_world:[Qe.drawingBufferWidth,Qe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Te.paint.get("heatmap-opacity")}})(q,Y),null,Y.id,q.viewportBuffer,q.quadTriangleIndexBuffer,q.viewportSegments,Y.paint,q.transform.zoom)}(k,z))})(u,p,v,b);break;case"line":(function(k,O,z,B){if(k.renderPass!=="translucent")return;const q=z.paint.get("line-opacity"),Y=z.paint.get("line-width");if(q.constantOr(1)===0||Y.constantOr(1)===0)return;const te=k.depthModeForSublayer(0,li.ReadOnly),ge=k.colorModeForRenderPass(),$e=z.paint.get("line-dasharray"),Pe=z.paint.get("line-pattern"),Me=Pe.constantOr(1),Te=z.paint.get("line-gradient"),je=z.getCrossfadeParameters(),gt=Me?"linePattern":$e?"lineSDF":Te?"lineGradient":"line",De=k.context,Qe=De.gl;let vt=!0;for(const xt of B){const Tt=O.getTile(xt);if(Me&&!Tt.patternsLoaded())continue;const Ht=Tt.getBucket(z);if(!Ht)continue;const jt=Ht.programConfigurations.get(z.id),Yt=k.context.program.get(),nn=k.useProgram(gt,jt),Xn=vt||nn.program!==Yt,rn=k.style.map.terrain&&k.style.map.terrain.getTerrainData(xt),Dn=Pe.constantOr(null);if(Dn&&Tt.imageAtlas){const Fn=Tt.imageAtlas,Qn=Fn.patternPositions[Dn.to.toString()],ni=Fn.patternPositions[Dn.from.toString()];Qn&&ni&&jt.setConstantPatternPositions(Qn,ni)}const Jn=rn?xt:null,ci=Me?Eo(k,Tt,z,je,Jn):$e?Il(k,Tt,z,$e,je,Jn):Te?Cf(k,Tt,z,Ht.lineClipsArray.length,Jn):El(k,Tt,z,Jn);if(Me)De.activeTexture.set(Qe.TEXTURE0),Tt.imageAtlasTexture.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),jt.updatePaintBuffers(je);else if($e&&(Xn||k.lineAtlas.dirty))De.activeTexture.set(Qe.TEXTURE0),k.lineAtlas.bind(De);else if(Te){const Fn=Ht.gradients[z.id];let Qn=Fn.texture;if(z.gradientVersion!==Fn.version){let ni=256;if(z.stepInterpolant){const Vi=O.getSource().maxzoom,_i=xt.canonical.z===Vi?Math.ceil(1<<k.transform.maxZoom-xt.canonical.z):1;ni=a.ac(a.aT(Ht.maxLineLength/a.W*1024*_i),256,De.maxTextureSize)}Fn.gradient=a.aU({expression:z.gradientExpression(),evaluationKey:"lineProgress",resolution:ni,image:Fn.gradient||void 0,clips:Ht.lineClipsArray}),Fn.texture?Fn.texture.update(Fn.gradient):Fn.texture=new he(De,Fn.gradient,Qe.RGBA),Fn.version=z.gradientVersion,Qn=Fn.texture}De.activeTexture.set(Qe.TEXTURE0),Qn.bind(z.stepInterpolant?Qe.NEAREST:Qe.LINEAR,Qe.CLAMP_TO_EDGE)}nn.draw(De,Qe.TRIANGLES,te,k.stencilModeForClipping(xt),ge,wi.disabled,ci,rn,z.id,Ht.layoutVertexBuffer,Ht.indexBuffer,Ht.segments,z.paint,k.transform.zoom,jt,Ht.layoutVertexBuffer2),vt=!1}})(u,p,v,b);break;case"fill":(function(k,O,z,B){const q=z.paint.get("fill-color"),Y=z.paint.get("fill-opacity");if(Y.constantOr(1)===0)return;const te=k.colorModeForRenderPass(),ge=z.paint.get("fill-pattern"),$e=k.opaquePassEnabledForLayer()&&!ge.constantOr(1)&&q.constantOr(a.aO.transparent).a===1&&Y.constantOr(0)===1?"opaque":"translucent";if(k.renderPass===$e){const Pe=k.depthModeForSublayer(1,k.renderPass==="opaque"?li.ReadWrite:li.ReadOnly);zf(k,O,z,B,Pe,te,!1)}if(k.renderPass==="translucent"&&z.paint.get("fill-antialias")){const Pe=k.depthModeForSublayer(z.getPaintProperty("fill-outline-color")?2:0,li.ReadOnly);zf(k,O,z,B,Pe,te,!0)}})(u,p,v,b);break;case"fill-extrusion":(function(k,O,z,B){const q=z.paint.get("fill-extrusion-opacity");if(q!==0&&k.renderPass==="translucent"){const Y=new li(k.context.gl.LEQUAL,li.ReadWrite,k.depthRangeFor3D);if(q!==1||z.paint.get("fill-extrusion-pattern").constantOr(1))jl(k,O,z,B,Y,ki.disabled,Ji.disabled),jl(k,O,z,B,Y,k.stencilModeFor3D(),k.colorModeForRenderPass());else{const te=k.colorModeForRenderPass();jl(k,O,z,B,Y,ki.disabled,te)}}})(u,p,v,b);break;case"hillshade":(function(k,O,z,B){if(k.renderPass!=="offscreen"&&k.renderPass!=="translucent")return;const q=k.context,Y=k.depthModeForSublayer(0,li.ReadOnly),te=k.colorModeForRenderPass(),[ge,$e]=k.renderPass==="translucent"?k.stencilConfigForOverlap(B):[{},B];for(const Pe of $e){const Me=O.getTile(Pe);Me.needsHillshadePrepare!==void 0&&Me.needsHillshadePrepare&&k.renderPass==="offscreen"?Wc(k,Me,z,Y,ki.disabled,te):k.renderPass==="translucent"&&Ul(k,Pe,Me,z,Y,ge[Pe.overscaledZ],te)}q.viewport.set([0,0,k.width,k.height])})(u,p,v,b);break;case"raster":(function(k,O,z,B){if(k.renderPass!=="translucent"||z.paint.get("raster-opacity")===0||!B.length)return;const q=k.context,Y=q.gl,te=O.getSource(),ge=k.useProgram("raster"),$e=k.colorModeForRenderPass(),[Pe,Me]=te instanceof mt?[{},B]:k.stencilConfigForOverlap(B),Te=Me[Me.length-1].overscaledZ,je=!k.options.moving;for(const gt of Me){const De=k.depthModeForSublayer(gt.overscaledZ-Te,z.paint.get("raster-opacity")===1?li.ReadWrite:li.ReadOnly,Y.LESS),Qe=O.getTile(gt);Qe.registerFadeDuration(z.paint.get("raster-fade-duration"));const vt=O.findLoadedParent(gt,0),xt=Rf(Qe,vt,O,z,k.transform,k.style.map.terrain);let Tt,Ht;const jt=z.paint.get("raster-resampling")==="nearest"?Y.NEAREST:Y.LINEAR;q.activeTexture.set(Y.TEXTURE0),Qe.texture.bind(jt,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),q.activeTexture.set(Y.TEXTURE1),vt?(vt.texture.bind(jt,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),Tt=Math.pow(2,vt.tileID.overscaledZ-Qe.tileID.overscaledZ),Ht=[Qe.tileID.canonical.x*Tt%1,Qe.tileID.canonical.y*Tt%1]):Qe.texture.bind(jt,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST);const Yt=k.style.map.terrain&&k.style.map.terrain.getTerrainData(gt),nn=Yt?gt:null,Xn=nn?nn.posMatrix:k.transform.calculatePosMatrix(gt.toUnwrapped(),je),rn=Pl(Xn,Ht||[0,0],Tt||1,xt,z);te instanceof mt?ge.draw(q,Y.TRIANGLES,De,ki.disabled,$e,wi.disabled,rn,Yt,z.id,te.boundsBuffer,k.quadTriangleIndexBuffer,te.boundsSegments):ge.draw(q,Y.TRIANGLES,De,Pe[gt.overscaledZ],$e,wi.disabled,rn,Yt,z.id,k.rasterBoundsBuffer,k.quadTriangleIndexBuffer,k.rasterBoundsSegments)}})(u,p,v,b);break;case"background":(function(k,O,z,B){const q=z.paint.get("background-color"),Y=z.paint.get("background-opacity");if(Y===0)return;const te=k.context,ge=te.gl,$e=k.transform,Pe=$e.tileSize,Me=z.paint.get("background-pattern");if(k.isPatternMissing(Me))return;const Te=!Me&&q.a===1&&Y===1&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass!==Te)return;const je=ki.disabled,gt=k.depthModeForSublayer(0,Te==="opaque"?li.ReadWrite:li.ReadOnly),De=k.colorModeForRenderPass(),Qe=k.useProgram(Me?"backgroundPattern":"background"),vt=B||$e.coveringTiles({tileSize:Pe,terrain:k.style.map.terrain});Me&&(te.activeTexture.set(ge.TEXTURE0),k.imageManager.bind(k.context));const xt=z.getCrossfadeParameters();for(const Tt of vt){const Ht=B?Tt.posMatrix:k.transform.calculatePosMatrix(Tt.toUnwrapped()),jt=Me?Eh(Ht,Y,k,Me,{tileID:Tt,tileSize:Pe},xt):Sh(Ht,Y,q),Yt=k.style.map.terrain&&k.style.map.terrain.getTerrainData(Tt);Qe.draw(te,ge.TRIANGLES,gt,je,De,wi.disabled,jt,Yt,z.id,k.tileExtentBuffer,k.quadTriangleIndexBuffer,k.tileExtentSegments)}})(u,0,v,b);break;case"custom":(function(k,O,z){const B=k.context,q=z.implementation;if(k.renderPass==="offscreen"){const Y=q.prerender;Y&&(k.setCustomLayerDefaults(),B.setColorMode(k.colorModeForRenderPass()),Y.call(q,B.gl,k.transform.customLayerMatrix()),B.setDirty(),k.setBaseState())}else if(k.renderPass==="translucent"){k.setCustomLayerDefaults(),B.setColorMode(k.colorModeForRenderPass()),B.setStencilMode(ki.disabled);const Y=q.renderingMode==="3d"?new li(k.context.gl.LEQUAL,li.ReadWrite,k.depthRangeFor3D):k.depthModeForSublayer(0,li.ReadOnly);B.setDepthMode(Y),q.render(B.gl,k.transform.customLayerMatrix()),B.setDirty(),k.setBaseState(),B.bindFramebuffer.set(null)}})(u,0,v)}}translatePosMatrix(u,p,v,b,k){if(!v[0]&&!v[1])return u;const O=k?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(O){const q=Math.sin(O),Y=Math.cos(O);v=[v[0]*Y-v[1]*q,v[0]*q+v[1]*Y]}const z=[k?v[0]:jn(p,v[0],this.transform.zoom),k?v[1]:jn(p,v[1],this.transform.zoom),0],B=new Float32Array(16);return a.H(B,u,z),B}saveTileTexture(u){const p=this._tileTextures[u.size[0]];p?p.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const p=this._tileTextures[u];return p&&p.length>0?p.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const p=this.imageManager.getPattern(u.from.toString()),v=this.imageManager.getPattern(u.to.toString());return!p||!v}useProgram(u,p){this.cache=this.cache||{};const v=u+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new io(this.context,Pa[u],p,Tf[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new he(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:p}=this.context.gl;return this.width!==u||this.height!==p}}class so{constructor(u,p){this.points=u,this.planes=p}static fromInvProjectionMatrix(u,p,v){const b=Math.pow(2,v),k=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const B=1/(z=a.af([],z,u))[3]/p*b;return a.a$(z,z,[B,B,1/z[3],B])}),O=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const B=function(ge,$e){var Pe=$e[0],Me=$e[1],Te=$e[2],je=Pe*Pe+Me*Me+Te*Te;return je>0&&(je=1/Math.sqrt(je)),ge[0]=$e[0]*je,ge[1]=$e[1]*je,ge[2]=$e[2]*je,ge}([],function(ge,$e,Pe){var Me=$e[0],Te=$e[1],je=$e[2],gt=Pe[0],De=Pe[1],Qe=Pe[2];return ge[0]=Te*Qe-je*De,ge[1]=je*gt-Me*Qe,ge[2]=Me*De-Te*gt,ge}([],_e([],k[z[0]],k[z[1]]),_e([],k[z[2]],k[z[1]]))),q=-((Y=B)[0]*(te=k[z[1]])[0]+Y[1]*te[1]+Y[2]*te[2]);var Y,te;return B.concat(q)});return new so(k,O)}}class oo{constructor(u,p){this.min=u,this.max=p,this.center=function(v,b,k){return v[0]=.5*b[0],v[1]=.5*b[1],v[2]=.5*b[2],v}([],function(v,b,k){return v[0]=b[0]+k[0],v[1]=b[1]+k[1],v[2]=b[2]+k[2],v}([],this.min,this.max))}quadrant(u){const p=[u%2==0,u<2],v=ee(this.min),b=ee(this.max);for(let k=0;k<p.length;k++)v[k]=p[k]?this.min[k]:this.center[k],b[k]=p[k]?this.center[k]:this.max[k];return b[2]=this.max[2],new oo(v,b)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let b=0;b<u.planes.length;b++){const k=u.planes[b];let O=0;for(let z=0;z<p.length;z++)a.b0(k,p[z])>=0&&O++;if(O===0)return 0;O!==p.length&&(v=!1)}if(v)return 2;for(let b=0;b<3;b++){let k=Number.MAX_VALUE,O=-Number.MAX_VALUE;for(let z=0;z<u.points.length;z++){const B=u.points[z][b]-this.min[b];k=Math.min(k,B),O=Math.max(O,B)}if(O<0||k>this.max[b]-this.min[b])return 0}return 1}}class na{constructor(u=0,p=0,v=0,b=0){if(isNaN(u)||u<0||isNaN(p)||p<0||isNaN(v)||v<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=p,this.left=v,this.right=b}interpolate(u,p,v){return p.top!=null&&u.top!=null&&(this.top=a.z.number(u.top,p.top,v)),p.bottom!=null&&u.bottom!=null&&(this.bottom=a.z.number(u.bottom,p.bottom,v)),p.left!=null&&u.left!=null&&(this.left=a.z.number(u.left,p.left,v)),p.right!=null&&u.right!=null&&(this.right=a.z.number(u.right,p.right,v)),this}getCenter(u,p){const v=a.ac((this.left+u-this.right)/2,0,u),b=a.ac((this.top+p-this.bottom)/2,0,p);return new a.P(v,b)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new na(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Jc=85.051129;class Gl{constructor(u,p,v,b,k){this.tileSize=512,this._renderWorldCopies=k===void 0||!!k,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=v??0,this._maxPitch=b??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new na,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const u=new Gl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this.minElevationForCurrentTile=u.minElevationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const p=-a.b1(u,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=function(){var v=new a.A(4);return a.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,b,k){var O=b[0],z=b[1],B=b[2],q=b[3],Y=Math.sin(k),te=Math.cos(k);v[0]=O*te+B*Y,v[1]=z*te+q*Y,v[2]=O*-Y+B*te,v[3]=z*-Y+q*te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const p=a.ac(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const p=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.tileZoom=Math.max(0,Math.floor(p)),this.scale=this.zoomScale(p),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,p,v){this._unmodified=!1,this._edgeInsets.interpolate(u,p,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const p=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(u){const p=[new a.b2(0,u)];if(this._renderWorldCopies){const v=this.pointCoordinate(new a.P(0,0)),b=this.pointCoordinate(new a.P(this.width,0)),k=this.pointCoordinate(new a.P(this.width,this.height)),O=this.pointCoordinate(new a.P(0,this.height)),z=Math.floor(Math.min(v.x,b.x,k.x,O.x)),B=Math.floor(Math.max(v.x,b.x,k.x,O.x)),q=1;for(let Y=z-q;Y<=B+q;Y++)Y!==0&&p.push(new a.b2(Y,u))}return p}coveringTiles(u){var p,v;let b=this.coveringZoomLevel(u);const k=b;if(u.minzoom!==void 0&&b<u.minzoom)return[];u.maxzoom!==void 0&&b>u.maxzoom&&(b=u.maxzoom);const O=this.pointCoordinate(this.getCameraPoint()),z=a.Y.fromLngLat(this.center),B=Math.pow(2,b),q=[B*O.x,B*O.y,0],Y=[B*z.x,B*z.y,0],te=so.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,b);let ge=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ge=b);const $e=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,Pe=De=>({aabb:new oo([De*B,0,0],[(De+1)*B,B,0]),zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Me=[],Te=[],je=b,gt=u.reparseOverscaled?k:b;if(this._renderWorldCopies)for(let De=1;De<=3;De++)Me.push(Pe(-De)),Me.push(Pe(De));for(Me.push(Pe(0));Me.length>0;){const De=Me.pop(),Qe=De.x,vt=De.y;let xt=De.fullyVisible;if(!xt){const nn=De.aabb.intersects(te);if(nn===0)continue;xt=nn===2}const Tt=u.terrain?q:Y,Ht=De.aabb.distanceX(Tt),jt=De.aabb.distanceY(Tt),Yt=Math.max(Math.abs(Ht),Math.abs(jt));if(De.zoom===je||Yt>$e+(1<<je-De.zoom)-2&&De.zoom>=ge){const nn=je-De.zoom,Xn=q[0]-.5-(Qe<<nn),rn=q[1]-.5-(vt<<nn);Te.push({tileID:new a.Q(De.zoom===je?gt:De.zoom,De.wrap,De.zoom,Qe,vt),distanceSq:re([Y[0]-.5-Qe,Y[1]-.5-vt]),tileDistanceToCamera:Math.sqrt(Xn*Xn+rn*rn)})}else for(let nn=0;nn<4;nn++){const Xn=(Qe<<1)+nn%2,rn=(vt<<1)+(nn>>1),Dn=De.zoom+1;let Jn=De.aabb.quadrant(nn);if(u.terrain){const ci=new a.Q(Dn,De.wrap,Dn,Xn,rn),Fn=u.terrain.getMinMaxElevation(ci),Qn=(p=Fn.minElevation)!==null&&p!==void 0?p:this.elevation,ni=(v=Fn.maxElevation)!==null&&v!==void 0?v:this.elevation;Jn=new oo([Jn.min[0],Jn.min[1],Qn],[Jn.max[0],Jn.max[1],ni])}Me.push({aabb:Jn,zoom:Dn,x:Xn,y:rn,wrap:De.wrap,fullyVisible:xt})}}return Te.sort((De,Qe)=>De.distanceSq-Qe.distanceSq).map(De=>De.tileID)}resize(u,p){this.width=u,this.height=p,this.pixelsToGLUnits=[2/u,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const p=a.ac(u.lat,-85.051129,Jc);return new a.P(a.N(u.lng)*this.worldSize,a.O(p)*this.worldSize)}unproject(u){return new a.Y(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const p=this.elevation,v=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,b=this.pointLocation(this.centerPoint,u),k=u.getElevationForLngLatZoom(b,this.tileZoom);if(!(this.elevation-k))return;const O=v+p-k,z=Math.cos(this._pitch)*this.cameraToCenterDistance/O/a.b3(1,b.lat),B=this.scaleZoom(z/this.tileSize);this._elevation=k,this._center=b,this.zoom=B}setLocationAtPoint(u,p){const v=this.pointCoordinate(p),b=this.pointCoordinate(this.centerPoint),k=this.locationCoordinate(u),O=new a.Y(k.x-(v.x-b.x),k.y-(v.y-b.y));this.center=this.coordinateLocation(O),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,p){return p?this.coordinatePoint(this.locationCoordinate(u),p.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,p){return this.coordinateLocation(this.pointCoordinate(u,p))}locationCoordinate(u){return a.Y.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,p){if(p){const ge=p.pointCoordinate(u);if(ge!=null)return ge}const v=[u.x,u.y,0,1],b=[u.x,u.y,1,1];a.af(v,v,this.pixelMatrixInverse),a.af(b,b,this.pixelMatrixInverse);const k=v[3],O=b[3],z=v[1]/k,B=b[1]/O,q=v[2]/k,Y=b[2]/O,te=q===Y?0:(0-q)/(Y-q);return new a.Y(a.z.number(v[0]/k,b[0]/O,te)/this.worldSize,a.z.number(z,B,te)/this.worldSize)}coordinatePoint(u,p=0,v=this.pixelMatrix){const b=[u.x*this.worldSize,u.y*this.worldSize,p,1];return a.af(b,b,v),new a.P(b[0]/b[3],b[1]/b[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new Ge().extend(this.pointLocation(new a.P(0,u))).extend(this.pointLocation(new a.P(this.width,u))).extend(this.pointLocation(new a.P(this.width,this.height))).extend(this.pointLocation(new a.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ge([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Jc])}calculatePosMatrix(u,p=!1){const v=u.key,b=p?this._alignedPosMatrixCache:this._posMatrixCache;if(b[v])return b[v];const k=u.canonical,O=this.worldSize/this.zoomScale(k.z),z=k.x+Math.pow(2,k.z)*u.wrap,B=a.an(new Float64Array(16));return a.H(B,B,[z*O,k.y*O,0]),a.J(B,B,[O/a.W,O/a.W,1]),a.K(B,p?this.alignedProjMatrix:this.projMatrix,B),b[v]=new Float32Array(B),b[v]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(u,p){p=a.ac(+p,this.minZoom,this.maxZoom);const v={center:new a.M(u.lng,u.lat),zoom:p};let b=this.lngRange;if(!this._renderWorldCopies&&b===null){const De=179.9999999999;b=[-De,De]}const k=this.tileSize*this.zoomScale(v.zoom);let O=0,z=k,B=0,q=k,Y=0,te=0;const{x:ge,y:$e}=this.size;if(this.latRange){const De=this.latRange;O=a.O(De[1])*k,z=a.O(De[0])*k,z-O<$e&&(Y=$e/(z-O))}b&&(B=a.b1(a.N(b[0])*k,0,k),q=a.b1(a.N(b[1])*k,0,k),q<B&&(q+=k),q-B<ge&&(te=ge/(q-B)));const{x:Pe,y:Me}=this.project.call({worldSize:k},u);let Te,je;const gt=Math.max(te||0,Y||0);if(gt){const De=new a.P(te?(q+B)/2:Pe,Y?(z+O)/2:Me);return v.center=this.unproject.call({worldSize:k},De).wrap(),v.zoom+=this.scaleZoom(gt),v}if(this.latRange){const De=$e/2;Me-De<O&&(je=O+De),Me+De>z&&(je=z-De)}if(b){const De=(B+q)/2;let Qe=Pe;this._renderWorldCopies&&(Qe=a.b1(Pe,De-k/2,De+k/2));const vt=ge/2;Qe-vt<B&&(Te=B+vt),Qe+vt>q&&(Te=q-vt)}if(Te!==void 0||je!==void 0){const De=new a.P(Te??Pe,je??Me);v.center=this.unproject.call({worldSize:k},De).wrap()}return v}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this._unmodified,{center:p,zoom:v}=this.getConstrained(this.center,this.zoom);this.center=p,this.zoom=v,this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,p=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.b3(1,this.center.lat)*this.worldSize;let b=a.an(new Float64Array(16));a.J(b,b,[this.width/2,-this.height/2,1]),a.H(b,b,[1,-1,0]),this.labelPlaneMatrix=b,b=a.an(new Float64Array(16)),a.J(b,b,[1,-1,1]),a.H(b,b,[-1,-1,0]),a.J(b,b,[2/this.width,2/this.height,1]),this.glCoordMatrix=b;const k=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),O=Math.min(this.elevation,this.minElevationForCurrentTile),z=k-O*this._pixelPerMeter/Math.cos(this._pitch),B=O<0?z:k,q=Math.PI/2+this._pitch,Y=this._fov*(.5+u.y/this.height),te=Math.sin(Y)*B/Math.sin(a.ac(Math.PI-q-Y,.01,Math.PI-.01)),ge=this.getHorizon(),$e=2*Math.atan(ge/this.cameraToCenterDistance)*(.5+u.y/(2*ge)),Pe=Math.sin($e)*B/Math.sin(a.ac(Math.PI-q-$e,.01,Math.PI-.01)),Me=Math.min(te,Pe),Te=1.01*(Math.cos(Math.PI/2-this._pitch)*Me+B),je=this.height/50;b=new Float64Array(16),a.b4(b,this._fov,this.width/this.height,je,Te),b[8]=2*-u.x/this.width,b[9]=2*u.y/this.height,a.J(b,b,[1,-1,1]),a.H(b,b,[0,0,-this.cameraToCenterDistance]),a.b5(b,b,this._pitch),a.ad(b,b,this.angle),a.H(b,b,[-p,-v,0]),this.mercatorMatrix=a.J([],b,[this.worldSize,this.worldSize,this.worldSize]),a.J(b,b,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.K(new Float64Array(16),this.labelPlaneMatrix,b),a.H(b,b,[0,0,-this.elevation]),this.projMatrix=b,this.invProjMatrix=a.ar([],b),this.pixelMatrix3D=a.K(new Float64Array(16),this.labelPlaneMatrix,b);const gt=this.width%2/2,De=this.height%2/2,Qe=Math.cos(this.angle),vt=Math.sin(this.angle),xt=p-Math.round(p)+Qe*gt+vt*De,Tt=v-Math.round(v)+Qe*De+vt*gt,Ht=new Float64Array(b);if(a.H(Ht,Ht,[xt>.5?xt-1:xt,Tt>.5?Tt-1:Tt,0]),this.alignedProjMatrix=Ht,b=a.ar(new Float64Array(16),this.pixelMatrix),!b)throw new Error("failed to invert matrix");this.pixelMatrixInverse=b,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new a.P(0,0)),p=[u.x*this.worldSize,u.y*this.worldSize,0,1];return a.af(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(0,u))}getCameraQueryGeometry(u){const p=this.getCameraPoint();if(u.length===1)return[u[0],p];{let v=p.x,b=p.y,k=p.x,O=p.y;for(const z of u)v=Math.min(v,z.x),b=Math.min(b,z.y),k=Math.max(k,z.x),O=Math.max(O,z.y);return[new a.P(v,b),new a.P(k,b),new a.P(k,O),new a.P(v,O),new a.P(v,b)]}}lngLatToCameraDepth(u,p){const v=this.locationCoordinate(u),b=[v.x*this.worldSize,v.y*this.worldSize,p,1];return a.af(b,b,this.projMatrix),b[2]/b[3]}}function Yc(x,u){let p,v=!1,b=null,k=null;const O=()=>{b=null,v&&(x.apply(k,p),b=setTimeout(O,u),v=!1)};return(...z)=>(v=!0,k=this,p=z,b||O(),b)}class Qc{constructor(u){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let v;return p.split("&").map(b=>b.split("=")).forEach(b=>{b[0]===this._hashName&&(v=b)}),(v&&v[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(p.length>=3&&!p.some(v=>isNaN(v))){const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:v,pitch:+(p[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,p)}catch{}},this._updateHash=Yc(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const p=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,b=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),k=Math.pow(10,b),O=Math.round(p.lng*k)/k,z=Math.round(p.lat*k)/k,B=this._map.getBearing(),q=this._map.getPitch();let Y="";if(Y+=u?`/${O}/${z}/${v}`:`${v}/${z}/${O}`,(B||q)&&(Y+="/"+Math.round(10*B)/10),q&&(Y+=`/${Math.round(q)}`),this._hashName){const te=this._hashName;let ge=!1;const $e=window.location.hash.slice(1).split("&").map(Pe=>{const Me=Pe.split("=")[0];return Me===te?(ge=!0,`${Me}=${Y}`):Pe}).filter(Pe=>Pe);return ge||$e.push(`${te}=${Y}`),`#${$e.join("&")}`}return`#${Y}`}}const La={linearity:.3,easing:a.b6(0,0,.3,1)},Ao=a.e({deceleration:2500,maxSpeed:1400},La),Nf=a.e({deceleration:20,maxSpeed:1400},La),Vf=a.e({deceleration:1e3,maxSpeed:360},La),jf=a.e({deceleration:1e3,maxSpeed:90},La);class Uf{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:g.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,p=g.now();for(;u.length>0&&p-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:k}of this._inertiaBuffer)p.zoom+=k.zoomDelta||0,p.bearing+=k.bearingDelta||0,p.pitch+=k.pitchDelta||0,k.panDelta&&p.pan._add(k.panDelta),k.around&&(p.around=k.around),k.pinchAround&&(p.pinchAround=k.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(p.pan.mag()){const k=Ba(p.pan.mag(),v,a.e({},Ao,u||{}));b.offset=p.pan.mult(k.amount/p.pan.mag()),b.center=this._map.transform.center,Fa(b,k)}if(p.zoom){const k=Ba(p.zoom,v,Nf);b.zoom=this._map.transform.zoom+k.amount,Fa(b,k)}if(p.bearing){const k=Ba(p.bearing,v,Vf);b.bearing=this._map.transform.bearing+a.ac(k.amount,-179,179),Fa(b,k)}if(p.pitch){const k=Ba(p.pitch,v,jf);b.pitch=this._map.transform.pitch+k.amount,Fa(b,k)}if(b.zoom||b.bearing){const k=p.pinchAround===void 0?p.around:p.pinchAround;b.around=k?this._map.unproject(k):this._map.getCenter()}return this.clear(),a.e(b,{noMoveStart:!0})}}function Fa(x,u){(!x.duration||x.duration<u.duration)&&(x.duration=u.duration,x.easing=u.easing)}function Ba(x,u,p){const{maxSpeed:v,linearity:b,deceleration:k}=p,O=a.ac(x*b/(u/1e3),-v,v),z=Math.abs(O)/(k*b);return{easing:p.easing,duration:1e3*z,amount:O*(z/2)}}class Ur extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,v,b={}){const k=w.mousePos(p.getCanvas(),v),O=p.unproject(k);super(u,a.e({point:k,lngLat:O,originalEvent:v},b)),this._defaultPrevented=!1,this.target=p}}class zs extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,v){const b=u==="touchend"?v.changedTouches:v.touches,k=w.touchPos(p.getCanvasContainer(),b),O=k.map(B=>p.unproject(B)),z=k.reduce((B,q,Y,te)=>B.add(q.div(te.length)),new a.P(0,0));super(u,{points:k,point:z,lngLats:O,lngLat:p.unproject(z),originalEvent:v}),this._defaultPrevented=!1}}class eu extends a.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,v){super(u,{originalEvent:v}),this._defaultPrevented=!1}}class xs{constructor(u,p){this._map=u,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new eu(u.type,this._map,u))}mousedown(u,p){return this._mousedownPos=p,this._firePreventable(new Ur(u.type,this._map,u))}mouseup(u){this._map.fire(new Ur(u.type,this._map,u))}click(u,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Ur(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Ur(u.type,this._map,u))}mouseover(u){this._map.fire(new Ur(u.type,this._map,u))}mouseout(u){this._map.fire(new Ur(u.type,this._map,u))}touchstart(u){return this._firePreventable(new zs(u.type,this._map,u))}touchmove(u){this._map.fire(new zs(u.type,this._map,u))}touchend(u){this._map.fire(new zs(u.type,this._map,u))}touchcancel(u){this._map.fire(new zs(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rs{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Ur(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ur("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Ur(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ia{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(a.P.convert(u),this._map.terrain)}}class ks{constructor(u,p){this._map=u,this._tr=new ia(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,p){this.isEnabled()&&u.shiftKey&&u.button===0&&(w.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(u,p){if(!this._active)return;const v=p;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=v,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const k=Math.min(b.x,v.x),O=Math.max(b.x,v.x),z=Math.min(b.y,v.y),B=Math.max(b.y,v.y);w.setTransform(this._box,`translate(${k}px,${z}px)`),this._box.style.width=O-k+"px",this._box.style.height=B-z+"px"}mouseupWindow(u,p){if(!this._active||u.button!==0)return;const v=this._startPos,b=p;if(this.reset(),w.suppressClick(),v.x!==b.x||v.y!==b.y)return this._map.fire(new a.k("boxzoomend",{originalEvent:u})),{cameraAnimation:k=>k.fitScreenCoordinates(v,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,p){return this._map.fire(new a.k(u,{originalEvent:p}))}}function Mo(x,u){if(x.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points ${u.length}`);const p={};for(let v=0;v<x.length;v++)p[x[v].identifier]=u[v];return p}class Fh{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,p,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),v.length===this.numTouches&&(this.centroid=function(b){const k=new a.P(0,0);for(const O of b)k._add(O);return k.div(b.length)}(p),this.touches=Mo(v,p)))}touchmove(u,p,v){if(this.aborted||!this.centroid)return;const b=Mo(v,p);for(const k in this.touches){const O=b[k];(!O||O.dist(this.touches[k])>30)&&(this.aborted=!0)}}touchend(u,p,v){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class tu{constructor(u){this.singleTap=new Fh(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,p,v){this.singleTap.touchstart(u,p,v)}touchmove(u,p,v){this.singleTap.touchmove(u,p,v)}touchend(u,p,v){const b=this.singleTap.touchend(u,p,v);if(b){const k=u.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(b)<30;if(k&&O||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class Bh{constructor(u){this._tr=new ia(u),this._zoomIn=new tu({numTouches:1,numTaps:2}),this._zoomOut=new tu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,p,v){this._zoomIn.touchstart(u,p,v),this._zoomOut.touchstart(u,p,v)}touchmove(u,p,v){this._zoomIn.touchmove(u,p,v),this._zoomOut.touchmove(u,p,v)}touchend(u,p,v){const b=this._zoomIn.touchend(u,p,v),k=this._zoomOut.touchend(u,p,v),O=this._tr;return b?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:O.zoom+1,around:O.unproject(b)},{originalEvent:u})}):k?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:O.zoom-1,around:O.unproject(k)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ra{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const p=this._moveFunction(...u);if(p.bearingDelta||p.pitchDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(u,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=p.length?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,p){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const b=p.length?p[0]:p;return!this._moved&&b.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(v,b))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&w.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Na={0:1,2:2};class Ls{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const p=w.mouseButton(u);this._eventButton=p}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!function(p,v){const b=Na[v];return p.buttons===void 0||(p.buttons&b)!==b}(u,this._eventButton)}isValidEndEvent(u){return w.mouseButton(u)===this._eventButton}}class hn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const Zl=x=>{x.mousedown=x.dragStart,x.mousemoveWindow=x.dragMove,x.mouseup=x.dragEnd,x.contextmenu=function(u){u.preventDefault()}},sa=({enable:x,clickTolerance:u,bearingDegreesPerPixelMoved:p=.8})=>{const v=new Ls({checkCorrectEvent:b=>w.mouseButton(b)===0&&b.ctrlKey||w.mouseButton(b)===2});return new ra({clickTolerance:u,move:(b,k)=>({bearingDelta:(k.x-b.x)*p}),moveStateManager:v,enable:x,assignEvents:Zl})},oa=({enable:x,clickTolerance:u,pitchDegreesPerPixelMoved:p=-.5})=>{const v=new Ls({checkCorrectEvent:b=>w.mouseButton(b)===0&&b.ctrlKey||w.mouseButton(b)===2});return new ra({clickTolerance:u,move:(b,k)=>({pitchDelta:(k.y-b.y)*p}),moveStateManager:v,enable:x,assignEvents:Zl})};class qf{constructor(u,p){this._clickTolerance=u.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(u,p,v){return this._calculateTransform(u,p,v)}touchmove(u,p,v){if(this._active&&!(v.length<this.minTouchs()))return u.preventDefault(),this._calculateTransform(u,p,v)}touchend(u,p,v){this._calculateTransform(u,p,v),this._active&&v.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,p,v){v.length>0&&(this._active=!0);const b=Mo(v,p),k=new a.P(0,0),O=new a.P(0,0);let z=0;for(const q in b){const Y=b[q],te=this._touches[q];te&&(k._add(Y),O._add(Y.sub(te)),z++,b[q]=Y)}if(this._touches=b,z<this.minTouchs()||!O.mag())return;const B=O.div(z);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:k.div(z),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class an{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,p,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([p[0],p[1]]))}touchmove(u,p,v){if(!this._firstTwoTouches)return;u.preventDefault();const[b,k]=this._firstTwoTouches,O=aa(v,p,b),z=aa(v,p,k);if(!O||!z)return;const B=this._aroundCenter?null:O.add(z).div(2);return this._move([O,z],B,u)}touchend(u,p,v){if(!this._firstTwoTouches)return;const[b,k]=this._firstTwoTouches,O=aa(v,p,b),z=aa(v,p,k);O&&z||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function aa(x,u,p){for(let v=0;v<x.length;v++)if(x[v].identifier===p)return u[v]}function Hf(x,u){return Math.log(x/u)/Math.LN2}class Gf extends an{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,p){const v=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Hf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hf(this._distance,v),pinchAround:p}}}function Wl(x,u){return 180*x.angleWith(u)/Math.PI}class nu extends an{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,p,v){const b=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Wl(this._vector,b),pinchAround:p}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const p=25/(Math.PI*this._minDiameter)*360,v=Wl(u,this._startVector);return Math.abs(v)<p}}function Kl(x){return Math.abs(x.y)>Math.abs(x.x)}class Zf extends an{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,p,v){super.touchstart(u,p,v),this._currentTouchCount=v.length}_start(u){this._lastPoints=u,Kl(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,p,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const b=u[0].sub(this._lastPoints[0]),k=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,k,v.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(b.y+k.y)/2*-.5}):void 0}gestureBeginsVertically(u,p,v){if(this._valid!==void 0)return this._valid;const b=u.mag()>=2,k=p.mag()>=2;if(!b&&!k)return;if(!b||!k)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const O=u.y>0==p.y>0;return Kl(u)&&Kl(p)&&O}}const Nh={panStep:100,bearingStep:15,pitchStep:10};class ao{constructor(u){this._tr=new ia(u);const p=Nh;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let p=0,v=0,b=0,k=0,O=0;switch(u.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:u.shiftKey?v=-1:(u.preventDefault(),k=-1);break;case 39:u.shiftKey?v=1:(u.preventDefault(),k=1);break;case 38:u.shiftKey?b=1:(u.preventDefault(),O=-1);break;case 40:u.shiftKey?b=-1:(u.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(v=0,b=0),{cameraAnimation:z=>{const B=this._tr;z.easeTo({duration:300,easeId:"keyboardHandler",easing:Ei,zoom:p?Math.round(B.zoom)+p*(u.shiftKey?2:1):B.zoom,bearing:B.bearing+v*this._bearingStep,pitch:B.pitch+b*this._pitchStep,offset:[-k*this._panStep,-O*this._panStep],center:B.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ei(x){return x*(2-x)}const Va=4.000244140625;class Xl{constructor(u,p){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=u,this._tr=new ia(u),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!u[this._map.cooperativeGestures._bypassKey])return;let p=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const v=g.now(),b=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,p!==0&&p%Va==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(b*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),u.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=u,this._delta-=p,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=w.mousePos(this._map.getCanvas(),u),v=this._tr;this._around=p.y>v.transform.height/2-v.transform.getHorizon()?a.M.convert(this._aroundCenter?v.center:v.unproject(p)):a.M.convert(v.center),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>Va?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&B!==0&&(B=1/B);const q=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(q*B))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,v=this._startZoom,b=this._easing;let k,O=!1;if(this._type==="wheel"&&v&&b){const z=Math.min((g.now()-this._lastWheelEventTime)/200,1),B=b(z);k=a.z.number(v,p,B),z<1?this._frameId||(this._frameId=!0):O=!0}else k=p,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:k-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let p=a.b7;if(this._prevEase){const v=this._prevEase,b=(g.now()-v.start)/v.duration,k=v.easing(b+.01)-v.easing(b),O=.27/Math.sqrt(k*k+1e-4)*.01,z=Math.sqrt(.0729-O*O);p=a.b6(O,z,.25,1)}return this._prevEase={start:g.now(),duration:u,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class iu{constructor(u,p){this._clickZoom=u,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Wf{constructor(u){this._tr=new ia(u),this.reset()}reset(){this._active=!1}dblclick(u,p){return u.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kf{constructor(){this._tap=new tu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,p,v){if(!this._swipePoint)if(this._tapTime){const b=p[0],k=u.timeStamp-this._tapTime<500,O=this._tapPoint.dist(b)<30;k&&O?v.length>0&&(this._swipePoint=b,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(u,p,v)}touchmove(u,p,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const b=p[0],k=b.y-this._swipePoint.y;return this._swipePoint=b,u.preventDefault(),this._active=!0,{zoomDelta:k/128}}}else this._tap.touchmove(u,p,v)}touchend(u,p,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const b=this._tap.touchend(u,p,v);b&&(this._tapTime=u.timeStamp,this._tapPoint=b)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xf{constructor(u,p,v){this._el=u,this._mousePan=p,this._touchPan=v}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Cs{constructor(u,p,v){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=p,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ja{constructor(u,p,v,b){this._el=u,this._touchZoom=p,this._touchRotate=v,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class xn{constructor(u,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=w.create("div","maplibregl-cooperative-gesture-screen",u);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),b=document.createElement("div");b.className="maplibregl-desktop-message",b.textContent=p,this._container.appendChild(b);const k=document.createElement("div");k.className="maplibregl-mobile-message",k.textContent=v,this._container.appendChild(k),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(w.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(u){this._onCooperativeGesture(u.touches.length===1)}wheel(u){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!u[this._bypassKey])}_onCooperativeGesture(u){this._enabled&&u&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const An=x=>x.zoom||x.drag||x.pitch||x.rotate;class Jl extends a.k{}function Ua(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta}class ru{constructor(u,p){this.handleWindowEvent=b=>{this.handleEvent(b,`${b.type}Window`)},this.handleEvent=(b,k)=>{if(b.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const O=b.type==="renderFrame"?void 0:b,z={needsRenderFrame:!1},B={},q={},Y=b.touches,te=Y?this._getMapTouches(Y):void 0,ge=te?w.touchPos(this._map.getCanvas(),te):w.mousePos(this._map.getCanvas(),b);for(const{handlerName:Me,handler:Te,allowed:je}of this._handlers){if(!Te.isEnabled())continue;let gt;this._blockedByActive(q,je,Me)?Te.reset():Te[k||b.type]&&(gt=Te[k||b.type](b,ge,te),this.mergeHandlerResult(z,B,gt,Me,O),gt&&gt.needsRenderFrame&&this._triggerRenderFrame()),(gt||Te.isActive())&&(q[Me]=Te)}const $e={};for(const Me in this._previousActiveHandlers)q[Me]||($e[Me]=O);this._previousActiveHandlers=q,(Object.keys($e).length||Ua(z))&&(this._changes.push([z,B,$e]),this._triggerRenderFrame()),(Object.keys(q).length||Ua(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Pe}=z;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Uf(u),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[b,k,O]of this._listeners)w.addEventListener(b,k,b===document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[u,p,v]of this._listeners)w.removeEventListener(u,p,u===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(u){const p=this._map,v=p.getCanvasContainer();this._add("mapEvent",new xs(p,u));const b=p.boxZoom=new ks(p,u);this._add("boxZoom",b),u.interactive&&u.boxZoom&&b.enable();const k=p.cooperativeGestures=new xn(p,u.cooperativeGestures);this._add("cooperativeGestures",k),u.cooperativeGestures&&k.enable();const O=new Bh(p),z=new Wf(p);p.doubleClickZoom=new iu(z,O),this._add("tapZoom",O),this._add("clickZoom",z),u.interactive&&u.doubleClickZoom&&p.doubleClickZoom.enable();const B=new Kf;this._add("tapDragZoom",B);const q=p.touchPitch=new Zf(p);this._add("touchPitch",q),u.interactive&&u.touchPitch&&p.touchPitch.enable(u.touchPitch);const Y=sa(u),te=oa(u);p.dragRotate=new Cs(u,Y,te),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",te,["mouseRotate"]),u.interactive&&u.dragRotate&&p.dragRotate.enable();const ge=(({enable:gt,clickTolerance:De})=>{const Qe=new Ls({checkCorrectEvent:vt=>w.mouseButton(vt)===0&&!vt.ctrlKey});return new ra({clickTolerance:De,move:(vt,xt)=>({around:xt,panDelta:xt.sub(vt)}),activateOnStart:!0,moveStateManager:Qe,enable:gt,assignEvents:Zl})})(u),$e=new qf(u,p);p.dragPan=new Xf(v,ge,$e),this._add("mousePan",ge),this._add("touchPan",$e,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&p.dragPan.enable(u.dragPan);const Pe=new nu,Me=new Gf;p.touchZoomRotate=new ja(v,Me,Pe,B),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Me,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&p.touchZoomRotate.enable(u.touchZoomRotate);const Te=p.scrollZoom=new Xl(p,()=>this._triggerRenderFrame());this._add("scrollZoom",Te,["mousePan"]),u.interactive&&u.scrollZoom&&p.scrollZoom.enable(u.scrollZoom);const je=p.keyboard=new ao(p);this._add("keyboard",je),u.interactive&&u.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new Rs(p))}_add(u,p,v){this._handlers.push({handlerName:u,handler:p,allowed:v}),this._handlersById[u]=p}stop(u){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!An(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,p,v){for(const b in u)if(b!==v&&(!p||p.indexOf(b)<0))return!0;return!1}_getMapTouches(u){const p=[];for(const v of u)this._el.contains(v.target)&&p.push(v);return p}mergeHandlerResult(u,p,v,b,k){if(!v)return;a.e(u,v);const O={handlerName:b,originalEvent:v.originalEvent||k};v.zoomDelta!==void 0&&(p.zoom=O),v.panDelta!==void 0&&(p.drag=O),v.pitchDelta!==void 0&&(p.pitch=O),v.bearingDelta!==void 0&&(p.rotate=O)}_applyChanges(){const u={},p={},v={};for(const[b,k,O]of this._changes)b.panDelta&&(u.panDelta=(u.panDelta||new a.P(0,0))._add(b.panDelta)),b.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(u.around=b.around),b.pinchAround!==void 0&&(u.pinchAround=b.pinchAround),b.noInertia&&(u.noInertia=b.noInertia),a.e(p,k),a.e(v,O);this._updateMapTransform(u,p,v),this._changes=[]}_updateMapTransform(u,p,v){const b=this._map,k=b._getTransformForUpdate(),O=b.terrain;if(!(Ua(u)||O&&this._terrainMovement))return this._fireEvents(p,v,!0);let{panDelta:z,zoomDelta:B,bearingDelta:q,pitchDelta:Y,around:te,pinchAround:ge}=u;ge!==void 0&&(te=ge),b._stop(!0),te=te||b.transform.centerPoint;const $e=k.pointLocation(z?te.sub(z):te);q&&(k.bearing+=q),Y&&(k.pitch+=Y),B&&(k.zoom+=B),O?this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?k.center=k.pointLocation(k.centerPoint.sub(z)):k.setLocationAtPoint($e,te):(this._terrainMovement=!0,this._map._elevationFreeze=!0,k.setLocationAtPoint($e,te),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,k.recalculateZoom(b.terrain)})):k.setLocationAtPoint($e,te),b._applyUpdatedTransform(k),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(p,v,!0)}_fireEvents(u,p,v){const b=An(this._eventsInProgress),k=An(u),O={};for(const Y in u){const{originalEvent:te}=u[Y];this._eventsInProgress[Y]||(O[`${Y}start`]=te),this._eventsInProgress[Y]=u[Y]}!b&&k&&this._fireEvent("movestart",k.originalEvent);for(const Y in O)this._fireEvent(Y,O[Y]);k&&this._fireEvent("move",k.originalEvent);for(const Y in u){const{originalEvent:te}=u[Y];this._fireEvent(Y,te)}const z={};let B;for(const Y in this._eventsInProgress){const{handlerName:te,originalEvent:ge}=this._eventsInProgress[Y];this._handlersById[te].isActive()||(delete this._eventsInProgress[Y],B=p[te]||ge,z[`${Y}end`]=B)}for(const Y in z)this._fireEvent(Y,z[Y]);const q=An(this._eventsInProgress);if(v&&(b||k)&&!q){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ge=>ge!==0&&-this._bearingSnap<ge&&ge<this._bearingSnap;!Y||!Y.essential&&g.prefersReducedMotion?(this._map.fire(new a.k("moveend",{originalEvent:B})),te(this._map.getBearing())&&this._map.resetNorth()):(te(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:B})),this._updatingCamera=!1}}_fireEvent(u,p){this._map.fire(new a.k(u,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new Jl("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class qr extends a.E{constructor(u,p){super(),this._renderFrameCallback=()=>{const v=Math.min((g.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=p.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new a.M(this.transform.center.lng,this.transform.center.lat)}setCenter(u,p){return this.jumpTo({center:u},p)}panBy(u,p,v){return u=a.P.convert(u).mult(-1),this.panTo(this.transform.center,a.e({offset:u},p),v)}panTo(u,p,v){return this.easeTo(a.e({center:u},p),v)}getZoom(){return this.transform.zoom}setZoom(u,p){return this.jumpTo({zoom:u},p),this}zoomTo(u,p,v){return this.easeTo(a.e({zoom:u},p),v)}zoomIn(u,p){return this.zoomTo(this.getZoom()+1,u,p),this}zoomOut(u,p){return this.zoomTo(this.getZoom()-1,u,p),this}getBearing(){return this.transform.bearing}setBearing(u,p){return this.jumpTo({bearing:u},p),this}getPadding(){return this.transform.padding}setPadding(u,p){return this.jumpTo({padding:u},p),this}rotateTo(u,p,v){return this.easeTo(a.e({bearing:u},p),v)}resetNorth(u,p){return this.rotateTo(0,a.e({duration:1e3},u),p),this}resetNorthPitch(u,p){return this.easeTo(a.e({bearing:0,pitch:0,duration:1e3},u),p),this}snapToNorth(u,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,p):this}getPitch(){return this.transform.pitch}setPitch(u,p){return this.jumpTo({pitch:u},p),this}cameraForBounds(u,p){u=Ge.convert(u);const v=p&&p.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),v,p)}_cameraForBoxAndBearing(u,p,v,b){const k={top:0,bottom:0,right:0,left:0};if(typeof(b=a.e({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const nn=b.padding;b.padding={top:nn,bottom:nn,right:nn,left:nn}}b.padding=a.e(k,b.padding);const O=this.transform,z=O.padding,B=new Ge(u,p),q=O.project(B.getNorthWest()),Y=O.project(B.getNorthEast()),te=O.project(B.getSouthEast()),ge=O.project(B.getSouthWest()),$e=a.b8(-v),Pe=q.rotate($e),Me=Y.rotate($e),Te=te.rotate($e),je=ge.rotate($e),gt=new a.P(Math.max(Pe.x,Me.x,je.x,Te.x),Math.max(Pe.y,Me.y,je.y,Te.y)),De=new a.P(Math.min(Pe.x,Me.x,je.x,Te.x),Math.min(Pe.y,Me.y,je.y,Te.y)),Qe=gt.sub(De),vt=(O.width-(z.left+z.right+b.padding.left+b.padding.right))/Qe.x,xt=(O.height-(z.top+z.bottom+b.padding.top+b.padding.bottom))/Qe.y;if(xt<0||vt<0)return void a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Tt=Math.min(O.scaleZoom(O.scale*Math.min(vt,xt)),b.maxZoom),Ht=a.P.convert(b.offset),jt=new a.P((b.padding.left-b.padding.right)/2,(b.padding.top-b.padding.bottom)/2).rotate(a.b8(v)),Yt=Ht.add(jt).mult(O.scale/O.zoomScale(Tt));return{center:O.unproject(q.add(te).div(2).sub(Yt)),zoom:Tt,bearing:v}}fitBounds(u,p,v){return this._fitInternal(this.cameraForBounds(u,p),p,v)}fitScreenCoordinates(u,p,v,b,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.P.convert(u)),this.transform.pointLocation(a.P.convert(p)),v,b),b,k)}_fitInternal(u,p,v){return u?(delete(p=a.e(u,p)).padding,p.linear?this.easeTo(p,v):this.flyTo(p,v)):this}jumpTo(u,p){this.stop();const v=this._getTransformForUpdate();let b=!1,k=!1,O=!1;return"zoom"in u&&v.zoom!==+u.zoom&&(b=!0,v.zoom=+u.zoom),u.center!==void 0&&(v.center=a.M.convert(u.center)),"bearing"in u&&v.bearing!==+u.bearing&&(k=!0,v.bearing=+u.bearing),"pitch"in u&&v.pitch!==+u.pitch&&(O=!0,v.pitch=+u.pitch),u.padding==null||v.isPaddingEqual(u.padding)||(v.padding=u.padding),this._applyUpdatedTransform(v),this.fire(new a.k("movestart",p)).fire(new a.k("move",p)),b&&this.fire(new a.k("zoomstart",p)).fire(new a.k("zoom",p)).fire(new a.k("zoomend",p)),k&&this.fire(new a.k("rotatestart",p)).fire(new a.k("rotate",p)).fire(new a.k("rotateend",p)),O&&this.fire(new a.k("pitchstart",p)).fire(new a.k("pitch",p)).fire(new a.k("pitchend",p)),this.fire(new a.k("moveend",p))}calculateCameraOptionsFromTo(u,p,v,b=0){const k=a.Y.fromLngLat(u,p),O=a.Y.fromLngLat(v,b),z=O.x-k.x,B=O.y-k.y,q=O.z-k.z,Y=Math.hypot(z,B,q);if(Y===0)throw new Error("Can't calculate camera options with same From and To");const te=Math.hypot(z,B),ge=this.transform.scaleZoom(this.transform.cameraToCenterDistance/Y/this.transform.tileSize),$e=180*Math.atan2(z,-B)/Math.PI;let Pe=180*Math.acos(te/Y)/Math.PI;return Pe=q<0?90-Pe:90+Pe,{center:O.toLngLat(),zoom:ge,pitch:Pe,bearing:$e}}easeTo(u,p){var v;this._stop(!1,u.easeId),((u=a.e({offset:[0,0],duration:500,easing:a.b7},u)).animate===!1||!u.essential&&g.prefersReducedMotion)&&(u.duration=0);const b=this._getTransformForUpdate(),k=this.getZoom(),O=this.getBearing(),z=this.getPitch(),B=this.getPadding(),q="bearing"in u?this._normalizeBearing(u.bearing,O):O,Y="pitch"in u?+u.pitch:z,te="padding"in u?u.padding:b.padding,ge=a.P.convert(u.offset);let $e=b.centerPoint.add(ge);const Pe=b.pointLocation($e),{center:Me,zoom:Te}=b.getConstrained(a.M.convert(u.center||Pe),(v=u.zoom)!==null&&v!==void 0?v:k);this._normalizeCenter(Me);const je=b.project(Pe),gt=b.project(Me).sub(je),De=b.zoomScale(Te-k);let Qe,vt;u.around&&(Qe=a.M.convert(u.around),vt=b.locationPoint(Qe));const xt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Te!==k,this._rotating=this._rotating||O!==q,this._pitching=this._pitching||Y!==z,this._padding=!b.isPaddingEqual(te),this._easeId=u.easeId,this._prepareEase(p,u.noMoveStart,xt),this.terrain&&this._prepareElevation(Me),this._ease(Tt=>{if(this._zooming&&(b.zoom=a.z.number(k,Te,Tt)),this._rotating&&(b.bearing=a.z.number(O,q,Tt)),this._pitching&&(b.pitch=a.z.number(z,Y,Tt)),this._padding&&(b.interpolatePadding(B,te,Tt),$e=b.centerPoint.add(ge)),this.terrain&&!u.freezeElevation&&this._updateElevation(Tt),Qe)b.setLocationAtPoint(Qe,vt);else{const Ht=b.zoomScale(b.zoom-k),jt=Te>k?Math.min(2,De):Math.max(.5,De),Yt=Math.pow(jt,1-Tt),nn=b.unproject(je.add(gt.mult(Tt*Yt)).mult(Ht));b.setLocationAtPoint(b.renderWorldCopies?nn.wrap():nn,$e)}this._applyUpdatedTransform(b),this._fireMoveEvents(p)},Tt=>{this.terrain&&this._finalizeElevation(),this._afterEase(p,Tt)},u),this}_prepareEase(u,p,v={}){this._moving=!0,p||v.moving||this.fire(new a.k("movestart",u)),this._zooming&&!v.zooming&&this.fire(new a.k("zoomstart",u)),this._rotating&&!v.rotating&&this.fire(new a.k("rotatestart",u)),this._pitching&&!v.pitching&&this.fire(new a.k("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&p!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(v-(p-(v*u+this._elevationStart))/(1-u)),this._elevationTarget=p}this.transform.elevation=a.z.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(u){if(!this.transformCameraUpdate)return;const p=u.clone(),{center:v,zoom:b,pitch:k,bearing:O,elevation:z}=this.transformCameraUpdate(p);v&&(p.center=v),b!==void 0&&(p.zoom=b),k!==void 0&&(p.pitch=k),O!==void 0&&(p.bearing=O),z!==void 0&&(p.elevation=z),this.transform.apply(p)}_fireMoveEvents(u){this.fire(new a.k("move",u)),this._zooming&&this.fire(new a.k("zoom",u)),this._rotating&&this.fire(new a.k("rotate",u)),this._pitching&&this.fire(new a.k("pitch",u))}_afterEase(u,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const v=this._zooming,b=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new a.k("zoomend",u)),b&&this.fire(new a.k("rotateend",u)),k&&this.fire(new a.k("pitchend",u)),this.fire(new a.k("moveend",u))}flyTo(u,p){var v;if(!u.essential&&g.prefersReducedMotion){const ci=a.L(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ci,p)}this.stop(),u=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.b7},u);const b=this._getTransformForUpdate(),k=this.getZoom(),O=this.getBearing(),z=this.getPitch(),B=this.getPadding(),q="bearing"in u?this._normalizeBearing(u.bearing,O):O,Y="pitch"in u?+u.pitch:z,te="padding"in u?u.padding:b.padding,ge=a.P.convert(u.offset);let $e=b.centerPoint.add(ge);const Pe=b.pointLocation($e),{center:Me,zoom:Te}=b.getConstrained(a.M.convert(u.center||Pe),(v=u.zoom)!==null&&v!==void 0?v:k);this._normalizeCenter(Me);const je=b.zoomScale(Te-k),gt=b.project(Pe),De=b.project(Me).sub(gt);let Qe=u.curve;const vt=Math.max(b.width,b.height),xt=vt/je,Tt=De.mag();if("minZoom"in u){const ci=a.ac(Math.min(u.minZoom,k,Te),b.minZoom,b.maxZoom),Fn=vt/b.zoomScale(ci-k);Qe=Math.sqrt(Fn/Tt*2)}const Ht=Qe*Qe;function jt(ci){const Fn=(xt*xt-vt*vt+(ci?-1:1)*Ht*Ht*Tt*Tt)/(2*(ci?xt:vt)*Ht*Tt);return Math.log(Math.sqrt(Fn*Fn+1)-Fn)}function Yt(ci){return(Math.exp(ci)-Math.exp(-ci))/2}function nn(ci){return(Math.exp(ci)+Math.exp(-ci))/2}const Xn=jt(!1);let rn=function(ci){return nn(Xn)/nn(Xn+Qe*ci)},Dn=function(ci){return vt*((nn(Xn)*(Yt(Fn=Xn+Qe*ci)/nn(Fn))-Yt(Xn))/Ht)/Tt;var Fn},Jn=(jt(!0)-Xn)/Qe;if(Math.abs(Tt)<1e-6||!isFinite(Jn)){if(Math.abs(vt-xt)<1e-6)return this.easeTo(u,p);const ci=xt<vt?-1:1;Jn=Math.abs(Math.log(xt/vt))/Qe,Dn=function(){return 0},rn=function(Fn){return Math.exp(ci*Qe*Fn)}}return u.duration="duration"in u?+u.duration:1e3*Jn/("screenSpeed"in u?+u.screenSpeed/Qe:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=O!==q,this._pitching=Y!==z,this._padding=!b.isPaddingEqual(te),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Me),this._ease(ci=>{const Fn=ci*Jn,Qn=1/rn(Fn);b.zoom=ci===1?Te:k+b.scaleZoom(Qn),this._rotating&&(b.bearing=a.z.number(O,q,ci)),this._pitching&&(b.pitch=a.z.number(z,Y,ci)),this._padding&&(b.interpolatePadding(B,te,ci),$e=b.centerPoint.add(ge)),this.terrain&&!u.freezeElevation&&this._updateElevation(ci);const ni=ci===1?Me:b.unproject(gt.add(De.mult(Dn(Fn))).mult(Qn));b.setLocationAtPoint(b.renderWorldCopies?ni.wrap():ni,$e),this._applyUpdatedTransform(b),this._fireMoveEvents(p)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(p)},u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,p)}if(!u){const v=this.handlers;v&&v.stop(!1)}return this}_ease(u,p,v){v.animate===!1||v.duration===0?(u(1),p()):(this._easeStart=g.now(),this._easeOptions=v,this._onEaseFrame=u,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,p){u=a.b1(u,-180,180);const v=Math.abs(u-p);return Math.abs(u-360-p)<v&&(u-=360),Math.abs(u+360-p)<v&&(u+=360),u}_normalizeCenter(u){const p=this.transform;if(!p.renderWorldCopies||p.lngRange)return;const v=u.lng-p.center.lng;u.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(a.M.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}const su={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ts{constructor(u=su){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,p){const v=this._map._getUIString(`AttributionControl.${p}`);u.title=v,u.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(b=>typeof b!="string"?"":b)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const p=this._map.style.sourceCaches;for(const b in p){const k=p[b];if(k.used||k.usedForTerrain){const O=k.getSource();O.attribution&&u.indexOf(O.attribution)<0&&u.push(O.attribution)}}u=u.filter(b=>String(b).trim()),u.sort((b,k)=>b.length-k.length),u=u.filter((b,k)=>{for(let O=k+1;O<u.length;O++)if(u[O].indexOf(b)>=0)return!1;return!0});const v=u.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,u.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Jf{constructor(u={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const v=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const p=w.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class qa{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const p=++this._id;return this._queue.push({callback:u,id:p,cancelled:!1}),p}remove(u){const p=this._currentlyRunning,v=p?this._queue.concat(p):this._queue;for(const b of v)if(b.id===u)return void(b.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const v of p)if(!v.cancelled&&(v.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Ni=a.X([{name:"a_pos3d",type:"Int16",components:3}]);class Yi extends a.E{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,p){this.sourceCache.update(u,p),this._renderableTilesKeys=[];const v={};for(const b of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))v[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.posMatrix=new Float64Array(16),a.aN(b.posMatrix,0,a.W,0,a.W,0,1),this._tiles[b.key]=new Hn(b,this.tileSize));for(const b in this._tiles)v[b]||delete this._tiles[b]}freeRtt(u){for(const p in this._tiles){const v=this._tiles[p];(!u||v.tileID.equals(u)||v.tileID.isChildOf(u)||u.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const p={};for(const v of this._renderableTilesKeys){const b=this._tiles[v].tileID;if(b.canonical.equals(u.canonical)){const k=u.clone();k.posMatrix=new Float64Array(16),a.aN(k.posMatrix,0,a.W,0,a.W,0,1),p[v]=k}else if(b.canonical.isChildOf(u.canonical)){const k=u.clone();k.posMatrix=new Float64Array(16);const O=b.canonical.z-u.canonical.z,z=b.canonical.x-(b.canonical.x>>O<<O),B=b.canonical.y-(b.canonical.y>>O<<O),q=a.W>>O;a.aN(k.posMatrix,0,q,0,q,0,1),a.H(k.posMatrix,k.posMatrix,[-z*q,-B*q,0]),p[v]=k}else if(u.canonical.isChildOf(b.canonical)){const k=u.clone();k.posMatrix=new Float64Array(16);const O=u.canonical.z-b.canonical.z,z=u.canonical.x-(u.canonical.x>>O<<O),B=u.canonical.y-(u.canonical.y>>O<<O),q=a.W>>O;a.aN(k.posMatrix,0,a.W,0,a.W,0,1),a.H(k.posMatrix,k.posMatrix,[z*q,B*q,0]),a.J(k.posMatrix,k.posMatrix,[1/2**O,1/2**O,0]),p[v]=k}}return p}getSourceTile(u,p){const v=this.sourceCache._source;let b=u.overscaledZ-this.deltaZoom;if(b>v.maxzoom&&(b=v.maxzoom),b<v.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(b).key);let k=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!k||!k.dem)&&p)for(;b>=v.minzoom&&(!k||!k.dem);)k=this.sourceCache.getTileByID(u.scaledTo(b--).key);return k}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(p=>p.timeAdded>=u)}}class Yf{constructor(u,p,v){this.painter=u,this.sourceCache=new Yi(p),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,p,v,b=a.W){var k;if(!(p>=0&&p<b&&v>=0&&v<b))return 0;const O=this.getTerrainData(u),z=(k=O.tile)===null||k===void 0?void 0:k.dem;if(!z)return 0;const B=function(Pe,Me,Te){var je=Me[0],gt=Me[1];return Pe[0]=Te[0]*je+Te[4]*gt+Te[12],Pe[1]=Te[1]*je+Te[5]*gt+Te[13],Pe}([],[p/b*a.W,v/b*a.W],O.u_terrain_matrix),q=[B[0]*z.dim,B[1]*z.dim],Y=Math.floor(q[0]),te=Math.floor(q[1]),ge=q[0]-Y,$e=q[1]-te;return z.get(Y,te)*(1-ge)*(1-$e)+z.get(Y+1,te)*ge*(1-$e)+z.get(Y,te+1)*(1-ge)*$e+z.get(Y+1,te+1)*ge*$e}getElevationForLngLatZoom(u,p){const{tileID:v,mercatorX:b,mercatorY:k}=this._getOverscaledTileIDFromLngLatZoom(u,p);return this.getElevation(v,b%a.W,k%a.W,a.W)}getElevation(u,p,v,b=a.W){return this.getDEMElevation(u,p,v,b)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const b=this.painter.context,k=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new he(b,k,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new he(b,new a.R({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.an([])}const p=this.sourceCache.getSourceTile(u,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const b=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new he(b,p.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),p.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const v=p&&p+p.tileID.key+u.key;if(v&&!this._demMatrixCache[v]){const b=this.sourceCache.sourceCache._source.maxzoom;let k=u.canonical.z-p.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=b?k=u.canonical.z-b:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const O=u.canonical.x-(u.canonical.x>>k<<k),z=u.canonical.y-(u.canonical.y>>k<<k),B=a.b9(new Float64Array(16),[1/(a.W<<k),1/(a.W<<k),0]);a.H(B,B,[O*a.W,z*a.W,0]),this._demMatrixCache[u.key]={matrix:B,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(u){const p=this.painter,v=p.width/devicePixelRatio,b=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new he(p.context,{width:v,height:b,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new he(p.context,{width:v,height:b,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(v,b,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,v,b))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let k=0,O=0;k<this._coordsTextureSize;k++)for(let z=0;z<this._coordsTextureSize;z++,O+=4)p[O+0]=255&z,p[O+1]=255&k,p[O+2]=z>>8<<4|k>>8,p[O+3]=0;const v=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),b=new he(u,v,u.gl.RGBA,{premultiply:!1});return b.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(u){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),v=this.painter.context,b=v.gl,k=Math.round(u.x*this.painter.pixelRatio/devicePixelRatio),O=Math.round(u.y*this.painter.pixelRatio/devicePixelRatio),z=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(k,z-O-1,1,1,b.RGBA,b.UNSIGNED_BYTE,p),v.bindFramebuffer.set(null);const B=p[0]+(p[2]>>4<<8),q=p[1]+((15&p[2])<<8),Y=this.coordsIndex[255-p[3]],te=Y&&this.sourceCache.getTileByID(Y);if(!te)return null;const ge=this._coordsTextureSize,$e=(1<<te.tileID.canonical.z)*ge;return new a.Y((te.tileID.canonical.x*ge+B)/$e+te.tileID.wrap,(te.tileID.canonical.y*ge+q)/$e,this.getElevation(te.tileID,B,q,ge))}depthAtPoint(u){const p=new Uint8Array(4),v=this.painter.context,b=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),b.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,p),v.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.painter.context,p=new a.ba,v=new a.aX,b=this.meshSize,k=a.W/b,O=b*b;for(let te=0;te<=b;te++)for(let ge=0;ge<=b;ge++)p.emplaceBack(ge*k,te*k,0);for(let te=0;te<O;te+=b+1)for(let ge=0;ge<b;ge++)v.emplaceBack(ge+te,b+ge+te+1,b+ge+te+2),v.emplaceBack(ge+te,b+ge+te+2,ge+te+1);const z=p.length,B=z+2*(b+1);for(const te of[0,1])for(let ge=0;ge<=b;ge++)for(const $e of[0,1])p.emplaceBack(ge*k,te*a.W,$e);for(let te=0;te<2*b;te+=2)v.emplaceBack(B+te,B+te+1,B+te+3),v.emplaceBack(B+te,B+te+3,B+te+2),v.emplaceBack(z+te,z+te+3,z+te+1),v.emplaceBack(z+te,z+te+2,z+te+3);const q=p.length,Y=q+2*(b+1);for(const te of[0,1])for(let ge=0;ge<=b;ge++)for(const $e of[0,1])p.emplaceBack(te*a.W,ge*k,$e);for(let te=0;te<2*b;te+=2)v.emplaceBack(q+te,q+te+1,q+te+3),v.emplaceBack(q+te,q+te+3,q+te+2),v.emplaceBack(Y+te,Y+te+3,Y+te+1),v.emplaceBack(Y+te,Y+te+2,Y+te+3);return this._mesh={indexBuffer:u.createIndexBuffer(v),vertexBuffer:u.createVertexBuffer(p,Ni.members),segments:a.$.simpleSegment(0,0,p.length,v.length)},this._mesh}getMeshFrameDelta(u){return 2*Math.PI*a.bb/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,p){var v;const{tileID:b}=this._getOverscaledTileIDFromLngLatZoom(u,p);return(v=this.getMinMaxElevation(b).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(u){const p=this.getTerrainData(u).tile,v={minElevation:null,maxElevation:null};return p&&p.dem&&(v.minElevation=p.dem.min*this.exaggeration,v.maxElevation=p.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(u,p){const v=a.Y.fromLngLat(u.wrap()),b=(1<<p)*a.W,k=v.x*b,O=v.y*b,z=Math.floor(k/a.W),B=Math.floor(O/a.W);return{tileID:new a.Q(p,0,p,z,B),mercatorX:k,mercatorY:O}}}class Ha{constructor(u,p,v){this._context=u,this._size=p,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new he(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(v.texture),{id:u,fbo:p,texture:v,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>u.id!==p),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(u=>!u.inUse)===!1}}const Gs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ou{constructor(u,p){this.painter=u,this.terrain=p,this.pool=new Ha(u.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter(v=>!u._layers[v].isHidden(p)),this._coordsDescendingInv={};for(const v in u.sourceCaches){this._coordsDescendingInv[v]={};const b=u.sourceCaches[v].getVisibleCoordinates();for(const k of b){const O=this.terrain.sourceCache.getTerrainCoords(k);for(const z in O)this._coordsDescendingInv[v][z]||(this._coordsDescendingInv[v][z]=[]),this._coordsDescendingInv[v][z].push(O[z])}}this._coordsDescendingInvStr={};for(const v of u._order){const b=u._layers[v],k=b.source;if(Gs[b.type]&&!this._coordsDescendingInvStr[k]){this._coordsDescendingInvStr[k]={};for(const O in this._coordsDescendingInv[k])this._coordsDescendingInvStr[k][O]=this._coordsDescendingInv[k][O].map(z=>z.key).sort().join()}}for(const v of this._renderableTiles)for(const b in this._coordsDescendingInvStr){const k=this._coordsDescendingInvStr[b][v.tileID.key];k&&k!==v.rttCoords[b]&&(v.rtt=[])}}renderLayer(u){if(u.isHidden(this.painter.transform.zoom))return!1;const p=u.type,v=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if(Gs[p]&&(this._prevType&&Gs[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(u.id),!b))return!0;if(Gs[this._prevType]||Gs[p]&&b){this._prevType=p;const k=this._stacks.length-1,O=this._stacks[k]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(Hl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[k]){const q=this.pool.getObjectForId(z.rtt[k].id);if(q.stamp===z.rtt[k].stamp){this.pool.useObject(q);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),z.rtt[k]={id:B.id,stamp:B.stamp},v.context.bindFramebuffer.set(B.fbo.framebuffer),v.context.clear({color:a.aO.transparent,stencil:0}),v.currentStencilSource=void 0;for(let q=0;q<O.length;q++){const Y=v.style._layers[O[q]],te=Y.source?this._coordsDescendingInv[Y.source][z.tileID.key]:[z.tileID];v.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),v._renderTileClippingMasks(Y,te),v.renderLayer(v,v.style.sourceCaches[Y.source],Y,te),Y.source&&(z.rttCoords[Y.source]=this._coordsDescendingInvStr[Y.source][z.tileID.key])}}return Hl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Gs[p]}return!1}}const au={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},lu=l,Ga={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:su,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Yl=x=>{x.touchstart=x.dragStart,x.touchmoveWindow=x.dragMove,x.touchend=x.dragEnd},cu={showCompass:!0,showZoom:!0,visualizePitch:!1};class uu{constructor(u,p,v=!1){this.mousedown=O=>{this.startMouse(a.e({},O,{ctrlKey:!0,preventDefault:()=>O.preventDefault()}),w.mousePos(this.element,O)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=O=>{this.moveMouse(O,w.mousePos(this.element,O))},this.mouseup=O=>{this.mouseRotate.dragEnd(O),this.mousePitch&&this.mousePitch.dragEnd(O),this.offTemp()},this.touchstart=O=>{O.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,O.targetTouches)[0],this.startTouch(O,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=O=>{O.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,O.targetTouches)[0],this.moveTouch(O,this._lastPos))},this.touchend=O=>{O.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const b=u.dragRotate._mouseRotate.getClickTolerance(),k=u.dragRotate._mousePitch.getClickTolerance();this.element=p,this.mouseRotate=sa({clickTolerance:b,enable:!0}),this.touchRotate=(({enable:O,clickTolerance:z,bearingDegreesPerPixelMoved:B=.8})=>{const q=new hn;return new ra({clickTolerance:z,move:(Y,te)=>({bearingDelta:(te.x-Y.x)*B}),moveStateManager:q,enable:O,assignEvents:Yl})})({clickTolerance:b,enable:!0}),this.map=u,v&&(this.mousePitch=oa({clickTolerance:k,enable:!0}),this.touchPitch=(({enable:O,clickTolerance:z,pitchDegreesPerPixelMoved:B=-.5})=>{const q=new hn;return new ra({clickTolerance:z,move:(Y,te)=>({pitchDelta:(te.y-Y.y)*B}),moveStateManager:q,enable:O,assignEvents:Yl})})({clickTolerance:k,enable:!0})),w.addEventListener(p,"mousedown",this.mousedown),w.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(p,"touchcancel",this.reset)}startMouse(u,p){this.mouseRotate.dragStart(u,p),this.mousePitch&&this.mousePitch.dragStart(u,p),w.disableDrag()}startTouch(u,p){this.touchRotate.dragStart(u,p),this.touchPitch&&this.touchPitch.dragStart(u,p),w.disableDrag()}moveMouse(u,p){const v=this.map,{bearingDelta:b}=this.mouseRotate.dragMove(u,p)||{};if(b&&v.setBearing(v.getBearing()+b),this.mousePitch){const{pitchDelta:k}=this.mousePitch.dragMove(u,p)||{};k&&v.setPitch(v.getPitch()+k)}}moveTouch(u,p){const v=this.map,{bearingDelta:b}=this.touchRotate.dragMove(u,p)||{};if(b&&v.setBearing(v.getBearing()+b),this.touchPitch){const{pitchDelta:k}=this.touchPitch.dragMove(u,p)||{};k&&v.setPitch(v.getPitch()+k)}}off(){const u=this.element;w.removeEventListener(u,"mousedown",this.mousedown),w.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Zs;function Ql(x,u,p){const v=new a.M(x.lng,x.lat);if(x=new a.M(x.lng,x.lat),u){const b=new a.M(x.lng-360,x.lat),k=new a.M(x.lng+360,x.lat),O=p.locationPoint(x).distSqr(u);p.locationPoint(b).distSqr(u)<O?x=b:p.locationPoint(k).distSqr(u)<O&&(x=k)}for(;Math.abs(x.lng-p.center.lng)>180;){const b=p.locationPoint(x);if(b.x>=0&&b.y>=0&&b.x<=p.width&&b.y<=p.height)break;x.lng>p.center.lng?x.lng-=360:x.lng+=360}return x.lng!==v.lng&&p.locationPoint(x).y>p.height/2-p.getHorizon()?x:v}const Za={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ec(x,u,p){const v=x.classList;for(const b in Za)v.remove(`maplibregl-${p}-anchor-${b}`);v.add(`maplibregl-${p}-anchor-${u}`)}class Wa extends a.E{constructor(u){if(super(),this._onKeyPress=p=>{const v=p.code,b=p.charCode||p.keyCode;v!=="Space"&&v!=="Enter"&&b!==32&&b!==13||this.togglePopup()},this._onMapClick=p=>{const v=p.originalEvent.target,b=this._element;this._popup&&(v===b||b.contains(v))&&this.togglePopup()},this._update=p=>{var v;if(!this._map)return;const b=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!b)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Ql(this._lngLat,this._flatPos,this._map.transform):(v=this._lngLat)===null||v===void 0?void 0:v.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let k="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?k=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(k=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let O="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?O="rotateX(0deg)":this._pitchAlignment==="map"&&(O=`rotateX(${this._map.getPitch()}deg)`),p&&p.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Za[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${O} ${k}`),g.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.k("dragstart"))),this.fire(new a.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.k("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(u==null?void 0:u.opacity,u==null?void 0:u.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=a.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const p=w.createNS("http://www.w3.org/2000/svg","svg"),v=41,b=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${v}px`),p.setAttributeNS(null,"width",`${b}px`),p.setAttributeNS(null,"viewBox",`0 0 ${b} ${v}`);const k=w.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const O=w.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill-rule","nonzero");const z=w.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const je of B){const gt=w.createNS("http://www.w3.org/2000/svg","ellipse");gt.setAttributeNS(null,"opacity","0.04"),gt.setAttributeNS(null,"cx","10.5"),gt.setAttributeNS(null,"cy","5.80029008"),gt.setAttributeNS(null,"rx",je.rx),gt.setAttributeNS(null,"ry",je.ry),z.appendChild(gt)}const q=w.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"fill",this._color);const Y=w.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),q.appendChild(Y);const te=w.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"opacity","0.25"),te.setAttributeNS(null,"fill","#000000");const ge=w.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),te.appendChild(ge);const $e=w.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"transform","translate(6.0, 7.0)"),$e.setAttributeNS(null,"fill","#FFFFFF");const Pe=w.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Me=w.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#000000"),Me.setAttributeNS(null,"opacity","0.25"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962");const Te=w.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#FFFFFF"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Me),Pe.appendChild(Te),O.appendChild(z),O.appendChild(q),O.appendChild(te),O.appendChild($e),O.appendChild(Pe),p.appendChild(O),p.setAttributeNS(null,"height",v*this._scale+"px"),p.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(p),this._offset=a.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),ec(this._element,this._anchor,"marker"),u&&u.className)for(const p of u.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=a.M.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const b=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:u?(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map)),this):this}_updateOpacity(u=!1){var p,v;if(!(!((p=this._map)===null||p===void 0)&&p.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const b=this._map,k=b.terrain.depthAtPoint(this._pos),O=b.terrain.getElevationForLngLatZoom(this._lngLat,b.transform.tileZoom);if(b.transform.lngLatToCameraDepth(this._lngLat,O)-k<.006)return void(this._element.style.opacity=this._opacity);const z=-this._offset.y/b.transform._pixelPerMeter,B=Math.sin(b.getPitch()*Math.PI/180)*z,q=b.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),Y=b.transform.lngLatToCameraDepth(this._lngLat,O+B)-q>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&Y&&this._popup.remove(),this._element.style.opacity=Y?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=a.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,p){return u===void 0&&p===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const tc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let la=0,Do=!1;const nc={maxWidth:100,unit:"metric"};function ic(x,u,p){const v=p&&p.maxWidth||100,b=x._container.clientHeight/2,k=x.unproject([0,b]),O=x.unproject([v,b]),z=k.distanceTo(O);if(p&&p.unit==="imperial"){const B=3.2808*z;B>5280?Oo(u,v,B/5280,x._getUIString("ScaleControl.Miles")):Oo(u,v,B,x._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?Oo(u,v,z/1852,x._getUIString("ScaleControl.NauticalMiles")):z>=1e3?Oo(u,v,z/1e3,x._getUIString("ScaleControl.Kilometers")):Oo(u,v,z,x._getUIString("ScaleControl.Meters"))}function Oo(x,u,p,v){const b=function(k){const O=Math.pow(10,`${Math.floor(k)}`.length-1);let z=k/O;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(B){const q=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*q)/q}(z),O*z}(p);x.style.width=u*(b/p)+"px",x.innerHTML=`${b}&nbsp;${v}`}const fu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},du=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rc(x){if(x){if(typeof x=="number"){const u=Math.round(Math.abs(x)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,x),"top-left":new a.P(u,u),"top-right":new a.P(-u,u),bottom:new a.P(0,-x),"bottom-left":new a.P(u,-u),"bottom-right":new a.P(-u,-u),left:new a.P(x,0),right:new a.P(-x,0)}}if(x instanceof a.P||Array.isArray(x)){const u=a.P.convert(x);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:a.P.convert(x.center||[0,0]),top:a.P.convert(x.top||[0,0]),"top-left":a.P.convert(x["top-left"]||[0,0]),"top-right":a.P.convert(x["top-right"]||[0,0]),bottom:a.P.convert(x.bottom||[0,0]),"bottom-left":a.P.convert(x["bottom-left"]||[0,0]),"bottom-right":a.P.convert(x["bottom-right"]||[0,0]),left:a.P.convert(x.left||[0,0]),right:a.P.convert(x.right||[0,0])}}return rc(new a.P(0,0))}const Qf=l;o.AJAXError=a.be,o.Evented=a.E,o.LngLat=a.M,o.MercatorCoordinate=a.Y,o.Point=a.P,o.addProtocol=a.bf,o.config=a.a,o.removeProtocol=a.bg,o.AttributionControl=Ts,o.BoxZoomHandler=ks,o.CanvasSource=Kt,o.CooperativeGesturesHandler=xn,o.DoubleClickZoomHandler=iu,o.DragPanHandler=Xf,o.DragRotateHandler=Cs,o.EdgeInsets=na,o.FullscreenControl=class extends a.E{constructor(x={}){super(),this._onFullscreenChange=()=>{var u;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((u=p==null?void 0:p.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,x&&x.container&&(x.container instanceof HTMLElement?this._container=x.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const x=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=qn,o.GeolocateControl=class extends a.E{constructor(x){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new a.k("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.k("geolocate",u)),this._finish()}},this._updateCamera=u=>{const p=new a.M(u.coords.longitude,u.coords.latitude),v=u.coords.accuracy,b=this._map.getBearing(),k=a.e({bearing:b},this.options.fitBoundsOptions),O=Ge.fromLngLat(p,v);this._map.fitBounds(O,k,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const p=new a.M(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&Do)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.k("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=u=>{if(this._map){if(this._container.addEventListener("contextmenu",p=>p.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Wa({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Wa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.k("trackuserlocationend")))})}},this.options=a.e({},tc,x)}onAdd(x){return this._map=x,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return a._(this,arguments,void 0,function*(u=!1){if(Zs!==void 0&&!u)return Zs;if(window.navigator.permissions===void 0)return Zs=!!window.navigator.geolocation,Zs;try{Zs=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Zs=!!window.navigator.geolocation}return Zs})}().then(u=>this._setupUI(u)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,la=0,Do=!1}_isOutOfMapMaxBounds(x){const u=this._map.getMaxBounds(),p=x.coords;return u&&(p.longitude<u.getWest()||p.longitude>u.getEast()||p.latitude<u.getSouth()||p.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const x=this._map.getBounds(),u=x.getSouthEast(),p=x.getNorthEast(),v=u.distanceTo(p),b=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${b}px`,this._circleElement.style.height=`${b}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":la--,Do=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let x;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),la++,la>1?(x={maximumAge:6e5,timeout:0},Do=!0):(x=this.options.positionOptions,Do=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.Hash=Qc,o.ImageSource=mt,o.KeyboardHandler=ao,o.LngLatBounds=Ge,o.LogoControl=Jf,o.Map=class extends qr{constructor(x){if(a.bc.mark(a.bd.create),(x=a.e({},Ga,x)).minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Gl(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies),{bearingSnap:x.bearingSnap}),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=x.interactive,this._maxTileCacheSize=x.maxTileCacheSize,this._maxTileCacheZoomLevels=x.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=x.collectResourceTiming,this._renderTaskQueue=new qa,this._controls=[],this._mapId=a.a3(),this._locale=a.e({},au,x.locale),this._clickTolerance=x.clickTolerance,this._overridePixelRatio=x.pixelRatio,this._maxCanvasSize=x.maxCanvasSize,this.transformCameraUpdate=x.transformCameraUpdate,this._imageQueueHandle=U.addThrottleControl(()=>this.isMoving()),this._requestManager=new ne(x.transformRequest),typeof x.container=="string"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const p=Yc(v=>{this._trackResize&&!this._removed&&this.resize(v)._update()},50);this._resizeObserver=new ResizeObserver(v=>{u?p(v):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ru(this,x),this._hash=x.hash&&new Qc(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,a.e({},x.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=x.localIdeographFontFamily,this._validateStyle=x.validateStyle,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new Ts(typeof x.attributionControl=="boolean"?void 0:x.attributionControl)),x.maplibreLogo&&this.addControl(new Jf,x.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new a.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new a.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new a.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(x,u){if(u===void 0&&(u=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new a.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=x.onAdd(this);this._controls.push(x);const v=this._controlPositions[u];return u.indexOf("bottom")!==-1?v.insertBefore(p,v.firstChild):v.appendChild(p),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new a.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(x);return u>-1&&this._controls.splice(u,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}calculateCameraOptionsFromTo(x,u,p,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(x,u,p,v)}resize(x){var u;const p=this._containerDimensions(),v=p[0],b=p[1],k=this._getClampedPixelRatio(v,b);if(this._resizeCanvas(v,b,k),this.painter.resize(v,b,k),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const B=this._getClampedPixelRatio(v,b);this._resizeCanvas(v,b,B),this.painter.resize(v,b,B)}this.transform.resize(v,b),(u=this._requestedCameraState)===null||u===void 0||u.resize(v,b);const O=!this._moving;return O&&(this.stop(),this.fire(new a.k("movestart",x)).fire(new a.k("move",x))),this.fire(new a.k("resize",x)),O&&this.fire(new a.k("moveend",x)),this}_getClampedPixelRatio(x,u){const{0:p,1:v}=this._maxCanvasSize,b=this.getPixelRatio(),k=x*b,O=u*b;return Math.min(k>p?p/k:1,O>v?v/O:1)*b}getPixelRatio(){var x;return(x=this._overridePixelRatio)!==null&&x!==void 0?x:devicePixelRatio}setPixelRatio(x){this._overridePixelRatio=x,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(Ge.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.renderWorldCopies=x,this._update()}project(x){return this.transform.locationPoint(a.M.convert(x),this.style&&this.terrain)}unproject(x){return this.transform.pointLocation(a.P.convert(x),this.terrain)}isMoving(){var x;return this._moving||((x=this.handlers)===null||x===void 0?void 0:x.isMoving())}isZooming(){var x;return this._zooming||((x=this.handlers)===null||x===void 0?void 0:x.isZooming())}isRotating(){var x;return this._rotating||((x=this.handlers)===null||x===void 0?void 0:x.isRotating())}_createDelegatedListener(x,u,p){if(x==="mouseenter"||x==="mouseover"){let v=!1;return{layer:u,listener:p,delegates:{mousemove:k=>{const O=this.getLayer(u)?this.queryRenderedFeatures(k.point,{layers:[u]}):[];O.length?v||(v=!0,p.call(this,new Ur(x,this,k.originalEvent,{features:O}))):v=!1},mouseout:()=>{v=!1}}}}if(x==="mouseleave"||x==="mouseout"){let v=!1;return{layer:u,listener:p,delegates:{mousemove:O=>{(this.getLayer(u)?this.queryRenderedFeatures(O.point,{layers:[u]}):[]).length?v=!0:v&&(v=!1,p.call(this,new Ur(x,this,O.originalEvent)))},mouseout:O=>{v&&(v=!1,p.call(this,new Ur(x,this,O.originalEvent)))}}}}{const v=b=>{const k=this.getLayer(u)?this.queryRenderedFeatures(b.point,{layers:[u]}):[];k.length&&(b.features=k,p.call(this,b),delete b.features)};return{layer:u,listener:p,delegates:{[x]:v}}}}on(x,u,p){if(p===void 0)return super.on(x,u);const v=this._createDelegatedListener(x,u,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(v);for(const b in v.delegates)this.on(b,v.delegates[b]);return this}once(x,u,p){if(p===void 0)return super.once(x,u);const v=this._createDelegatedListener(x,u,p);for(const b in v.delegates)this.once(b,v.delegates[b]);return this}off(x,u,p){return p===void 0?super.off(x,u):(this._delegatedListeners&&this._delegatedListeners[x]&&(v=>{const b=this._delegatedListeners[x];for(let k=0;k<b.length;k++){const O=b[k];if(O.layer===u&&O.listener===p){for(const z in O.delegates)this.off(z,O.delegates[z]);return b.splice(k,1),this}}})(),this)}queryRenderedFeatures(x,u){if(!this.style)return[];let p;const v=x instanceof a.P||Array.isArray(x),b=v?x:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(v?{}:x)||{},b instanceof a.P||typeof b[0]=="number")p=[a.P.convert(b)];else{const k=a.P.convert(b[0]),O=a.P.convert(b[1]);p=[k,new a.P(O.x,k.y),O,new a.P(k.x,O.y),k]}return this.style.queryRenderedFeatures(p,u,this.transform)}querySourceFeatures(x,u){return this.style.querySourceFeatures(x,u)}setStyle(x,u){return(u=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(x,u))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){const u=this._locale[x];if(u==null)throw new Error(`Missing UI string '${x}'`);return u}_updateStyle(x,u){if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(x,u));const p=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!x)),x?(this.style=new is(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x,u,p):this.style.loadJSON(x,u,p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new is(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,u){if(typeof x=="string"){const p=this._requestManager.transformRequest(x,"Style");a.h(p,new AbortController).then(v=>{this._updateDiff(v.data,u)}).catch(v=>{v&&this.fire(new a.j(v))})}else typeof x=="object"&&this._updateDiff(x,u)}_updateDiff(x,u){try{this.style.setState(x,u)&&this._update(!0)}catch(p){a.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(x,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(x,u){return this._lazyInitEmptyStyle(),this.style.addSource(x,u),this._update(!0)}isSourceLoaded(x){const u=this.style&&this.style.sourceCaches[x];if(u!==void 0)return u.loaded();this.fire(new a.j(new Error(`There is no source with ID '${x}'`)))}setTerrain(x){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),x){const u=this.style.sourceCaches[x.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${x.source}`);this.terrain===null&&u.reload();for(const p in this.style._layers){const v=this.style._layers[p];v.type==="hillshade"&&v.source===x.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Yf(this.painter,u,x),this.painter.renderToTexture=new ou(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=p=>{p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==x.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new a.k("terrain",{terrain:x})),this}getTerrain(){var x,u;return(u=(x=this.terrain)===null||x===void 0?void 0:x.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const x=this.style&&this.style.sourceCaches;for(const u in x){const p=x[u]._tiles;for(const v in p){const b=p[v];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}addImage(x,u,p={}){const{pixelRatio:v=1,sdf:b=!1,stretchX:k,stretchY:O,content:z}=p;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||a.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:q,data:Y}=u,te=u;return this.style.addImage(x,{data:new a.R({width:B,height:q},new Uint8Array(Y)),pixelRatio:v,stretchX:k,stretchY:O,content:z,sdf:b,version:0,userImage:te}),te.onAdd&&te.onAdd(this,x),this}}{const{width:B,height:q,data:Y}=g.getImageData(u);this.style.addImage(x,{data:new a.R({width:B,height:q},Y),pixelRatio:v,stretchX:k,stretchY:O,content:z,sdf:b,version:0})}}updateImage(x,u){const p=this.style.getImage(x);if(!p)return this.fire(new a.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=u instanceof HTMLImageElement||a.b(u)?g.getImageData(u):u,{width:b,height:k,data:O}=v;if(b===void 0||k===void 0)return this.fire(new a.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==p.data.width||k!==p.data.height)return this.fire(new a.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(u instanceof HTMLImageElement||a.b(u));return p.data.replace(O,z),this.style.updateImage(x,p),this}getImage(x){return this.style.getImage(x)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new a.j(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x){return U.getImage(this._requestManager.transformRequest(x,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(x,u){return this._lazyInitEmptyStyle(),this.style.addLayer(x,u),this._update(!0)}moveLayer(x,u){return this.style.moveLayer(x,u),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(x,u,p){return this.style.setLayerZoomRange(x,u,p),this._update(!0)}setFilter(x,u,p={}){return this.style.setFilter(x,u,p),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,u,p,v={}){return this.style.setPaintProperty(x,u,p,v),this._update(!0)}getPaintProperty(x,u){return this.style.getPaintProperty(x,u)}setLayoutProperty(x,u,p,v={}){return this.style.setLayoutProperty(x,u,p,v),this._update(!0)}getLayoutProperty(x,u){return this.style.getLayoutProperty(x,u)}setGlyphs(x,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(x,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(x,u,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite(x,u,p,v=>{v||this._update(!0)}),this}removeSprite(x){return this._lazyInitEmptyStyle(),this.style.removeSprite(x),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(x,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite(x,u,p=>{p||this._update(!0)}),this}setLight(x,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(x,u){return this.style.setFeatureState(x,u),this._update()}removeFeatureState(x,u){return this.style.removeFeatureState(x,u),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,u=0;return this._container&&(x=this._container.clientWidth||400,u=this._container.clientHeight||300),[x,u]}_setupContainer(){const x=this._container;x.classList.add("maplibregl-map");const u=this._canvasContainer=w.create("div","maplibregl-canvas-container",x);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),v=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],v);const b=this._controlContainer=w.create("div","maplibregl-control-container",x),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(O=>{k[O]=w.create("div",`maplibregl-ctrl-${O} `,b)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(x,u,p){this._canvas.width=Math.floor(p*x),this._canvas.height=Math.floor(p*u),this._canvas.style.width=`${x}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const x={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{u={requestedAttributes:x},v&&(u.statusMessage=v.statusMessage,u.type=v.type)},{once:!0});const p=this._canvas.getContext("webgl2",x)||this._canvas.getContext("webgl",x);if(!p){const v="Failed to initialize WebGL";throw u?(u.message=v,new Error(JSON.stringify(u))):new Error(v)}this.painter=new Bf(p,this.transform),S.testSupport(p)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){const u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),this._removed)return;let p=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const b=this.transform.zoom,k=g.now();this.style.zoomHistory.update(b,k);const O=new a.a8(b,{now:k,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),z=O.crossFadingFactor();z===1&&z===this._crossFadingFactor||(p=!0,this._crossFadingFactor=z),this.style.update(O)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new a.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.bc.mark(a.bd.load),this.fire(new a.k("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,a.bc.mark(a.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var x;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),U.removeThrottleControl(this._imageQueueHandle),(x=this._resizeObserver)===null||x===void 0||x.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),a.bc.clearMetrics(),this._removed=!0,this.fire(new a.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,g.frameAsync(this._frameRequest).then(x=>{a.bc.frame(x),this._frameRequest=null,this._render(x)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get version(){return lu}getCameraTargetElevation(){return this.transform.elevation}},o.MapMouseEvent=Ur,o.MapTouchEvent=zs,o.MapWheelEvent=eu,o.Marker=Wa,o.NavigationControl=class{constructor(x){this._updateZoomButtons=()=>{const u=this._map.getZoom(),p=u===this._map.getMaxZoom(),v=u===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,p)=>{const v=this._map._getUIString(`NavigationControl.${p}`);u.title=v,u.setAttribute("aria-label",v)},this.options=a.e({},cu,x),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new uu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,u){const p=w.create("button",x,this._container);return p.type="button",p.addEventListener("click",u),p}},o.Popup=class extends a.E{constructor(x){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.k("close"))),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{var p;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Ql(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._trackPointer&&!u)return;const v=this._flatPos=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&u?u:this._map.transform.locationPoint(this._lngLat));let b=this.options.anchor;const k=rc(this.options.offset);if(!b){const z=this._container.offsetWidth,B=this._container.offsetHeight;let q;q=v.y+k.bottom.y<B?["top"]:v.y>this._map.transform.height-B?["bottom"]:[],v.x<z/2?q.push("left"):v.x>this._map.transform.width-z/2&&q.push("right"),b=q.length===0?"bottom":q.join("-")}let O=v.add(k[b]);this.options.subpixelPositioning||(O=O.round()),w.setTransform(this._container,`${Za[b]} translate(${O.x}px,${O.y}px)`),ec(this._container,b,"popup")},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(fu),x)}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=a.M.convert(x),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(document.createTextNode(x))}setHTML(x){const u=document.createDocumentFragment(),p=document.createElement("body");let v;for(p.innerHTML=x;v=p.firstChild,v;)u.appendChild(v);return this.setDOMContent(u)}getMaxWidth(){var x;return(x=this._container)===null||x===void 0?void 0:x.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(x){this._container&&this._container.classList.add(x)}removeClassName(x){this._container&&this._container.classList.remove(x)}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){if(this._container)return this._container.classList.toggle(x)}setSubpixelPositioning(x){this.options.subpixelPositioning=x}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(du);x&&x.focus()}},o.RasterDEMTileSource=un,o.RasterTileSource=Oe,o.ScaleControl=class{constructor(x){this._onMove=()=>{ic(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,ic(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},nc),x)}getDefaultPosition(){return"bottom-left"}onAdd(x){return this._map=x,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=Xl,o.Style=is,o.TerrainControl=class{constructor(x){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=x}onAdd(x){return this._map=x,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=Zf,o.TwoFingersTouchRotateHandler=nu,o.TwoFingersTouchZoomHandler=Gf,o.TwoFingersTouchZoomRotateHandler=ja,o.VectorTileSource=En,o.VideoSource=Zt,o.addSourceType=(x,u)=>a._(void 0,void 0,void 0,function*(){if(Pn(x))throw new Error(`A source type called "${x}" already exists.`);((p,v)=>{en[p]=v})(x,u)}),o.clearPrewarmedResources=function(){const x=Be;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(zt),Be=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return $t().getRTLTextPluginStatus()},o.getVersion=function(){return Qf},o.getWorkerCount=function(){return _t.workerCount},o.getWorkerUrl=function(){return a.a.WORKER_URL},o.importScriptInWorkers=function(x){return et().broadcast("IS",x)},o.prewarm=function(){Rt().acquire(zt)},o.setMaxParallelImageRequests=function(x){a.a.MAX_PARALLEL_IMAGE_REQUESTS=x},o.setRTLTextPlugin=function(x,u){return $t().setRTLTextPlugin(x,u)},o.setWorkerCount=function(x){_t.workerCount=x},o.setWorkerUrl=function(x){a.a.WORKER_URL=x}});var s=n;return s})})(D2);var Md=D2.exports;const js=DC(Md);var EM=IM;function IM(i){var e,n,t;if(i){if(Array.isArray(i)){for(e=[],n=i.length,t=0;t<n;t++){var r=i[t];r!=null&&e.push(r)}return e}if(typeof i=="object"){e={};var s=Object.keys(i);for(n=s.length,t=0;t<n;t++){var o=s[t],a=i[o];a!=null&&(e[o]=a)}return e}}}function PM(i,e,n){let t;const{map:r}=Ac();Jt(i,r,l=>n(4,t=l));let{position:s="top-left"}=e,{container:o=void 0}=e,a=null;return hl(()=>{t!=null&&t.loaded()&&a&&t.removeControl(a)}),i.$$set=l=>{"position"in l&&n(1,s=l.position),"container"in l&&n(2,o=l.container)},i.$$.update=()=>{if(i.$$.dirty&30&&t&&!a){let l;typeof o=="string"?l=document.querySelector(o)??void 0:l=o,n(3,a=new js.FullscreenControl({container:l})),t.addControl(a,s)}},[r,s,o,a,t]}class $M extends Xe{constructor(e){super(),Je(this,e,PM,null,Ze,{position:1,container:2})}}function AM(i,e,n){let t;const{map:r}=Ac();Jt(i,r,w=>n(8,t=w));let{position:s="top-left"}=e,{positionOptions:o=void 0}=e,{fitBoundsOptions:a=void 0}=e,{trackUserLocation:l=!1}=e,{showAccuracyCircle:f=!0}=e,{showUserLocation:m=!0}=e,g=null;return hl(()=>{t!=null&&t.loaded()&&g&&t.removeControl(g)}),i.$$set=w=>{"position"in w&&n(1,s=w.position),"positionOptions"in w&&n(2,o=w.positionOptions),"fitBoundsOptions"in w&&n(3,a=w.fitBoundsOptions),"trackUserLocation"in w&&n(4,l=w.trackUserLocation),"showAccuracyCircle"in w&&n(5,f=w.showAccuracyCircle),"showUserLocation"in w&&n(6,m=w.showUserLocation)},i.$$.update=()=>{i.$$.dirty&510&&t&&!g&&(n(7,g=new js.GeolocateControl({positionOptions:o,fitBoundsOptions:a,trackUserLocation:l,showAccuracyCircle:f,showUserLocation:m})),t.addControl(g,s))},[r,s,o,a,l,f,m,g,t]}class MM extends Xe{constructor(e){super(),Je(this,e,AM,null,Ze,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function DM(i){let e=i.getCenter(),n=Math.round(i.getZoom()*100)/100,t=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,t),s=Math.round(e.lat*r)/r,o=Math.round(e.lng*r)/r,a=`${n}/${s}/${o}`,l=i.getBearing(),f=i.getPitch();return(l||f)&&(a+=`/${Math.round(l*10)/10}`),f&&(a+=`/${Math.round(f)}`),`#${a}`}function OM(i){return i.replace("#","").split("/").map(parseFloat)}var Ed=Sp;function Sp(i,e){return i===e||i!==i&&e!==e?!0:typeof i!=typeof e||{}.toString.call(i)!={}.toString.call(e)||i!==Object(i)||!i?!1:Array.isArray(i)?Z0(i,e):{}.toString.call(i)=="[object Set]"?Z0(Array.from(i),Array.from(e)):{}.toString.call(i)=="[object Object]"?RM(i,e):zM(i,e)}function zM(i,e){return i.toString()===e.toString()}function Z0(i,e){var n=i.length;if(n!=e.length)return!1;for(var t=0;t<n;t++)if(!Sp(i[t],e[t]))return!1;return!0}function RM(i,e){var n=Object.keys(i),t=n.length;if(t!=Object.keys(e).length)return!1;for(var r=0;r<t;r++){var s=n[r];if(!(e.hasOwnProperty(s)&&Sp(i[s],e[s])))return!1}return!0}function LM(i,e,n){let t;const{map:r}=Ac();Jt(i,r,m=>n(6,t=m));let{position:s="top-left"}=e,{showCompass:o=!0}=e,{showZoom:a=!0}=e,{visualizePitch:l=!1}=e,f=null;return hl(()=>{t!=null&&t.loaded()&&f&&t.removeControl(f)}),i.$$set=m=>{"position"in m&&n(1,s=m.position),"showCompass"in m&&n(2,o=m.showCompass),"showZoom"in m&&n(3,a=m.showZoom),"visualizePitch"in m&&n(4,l=m.visualizePitch)},i.$$.update=()=>{i.$$.dirty&126&&t&&!f&&(n(5,f=new js.NavigationControl({showCompass:o,showZoom:a,visualizePitch:l})),t.addControl(f,s))},[r,s,o,a,l,f,t]}class FM extends Xe{constructor(e){super(),Je(this,e,LM,null,Ze,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function BM(i,e,n){let t;const{map:r}=Ac();Jt(i,r,f=>n(5,t=f));let{position:s="bottom-left"}=e,{maxWidth:o=void 0}=e,{unit:a="metric"}=e,l=null;return hl(()=>{t!=null&&t.loaded()&&l&&t.removeControl(l)}),i.$$set=f=>{"position"in f&&n(1,s=f.position),"maxWidth"in f&&n(2,o=f.maxWidth),"unit"in f&&n(3,a=f.unit)},i.$$.update=()=>{i.$$.dirty&62&&t&&!l&&(n(4,l=new js.ScaleControl({maxWidth:o,unit:a})),t.addControl(l,s))},[r,s,o,a,l,t]}class NM extends Xe{constructor(e){super(),Je(this,e,BM,null,Ze,{position:1,maxWidth:2,unit:3})}}const{window:VM}=cp,jM=i=>({map:i[0]&8,loadedImages:i[0]&16,allImagesLoaded:i[0]&32}),W0=i=>({map:i[3],loadedImages:i[4],allImagesLoaded:i[5]});function K0(i){let e,n,t=i[2]&&X0(i);const r=i[37].default,s=tt(r,i,i[36],W0);return{c(){t&&t.c(),e=ke(),s&&s.c()},l(o){t&&t.l(o),e=Ce(o),s&&s.l(o)},m(o,a){t&&t.m(o,a),N(o,e,a),s&&s.m(o,a),n=!0},p(o,a){o[2]?t?(t.p(o,a),a[0]&4&&E(t,1)):(t=X0(o),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(It(),P(t,1,1,()=>{t=null}),Pt()),s&&s.p&&(!n||a[0]&56|a[1]&32)&&nt(s,r,o,o[36],n?rt(r,o[36],a,jM):it(o[36]),W0)},i(o){n||(E(t),E(s,o),n=!0)},o(o){P(t),P(s,o),n=!1},d(o){o&&I(e),t&&t.d(o),s&&s.d(o)}}}function X0(i){let e,n,t,r,s,o,a,l;return e=new FM({props:{position:i[6]}}),t=new MM({props:{position:i[6],fitBoundsOptions:{maxZoom:12}}}),s=new $M({props:{position:i[6]}}),a=new NM({props:{position:i[6]}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),H(s.$$.fragment),o=ke(),H(a.$$.fragment)},l(f){W(e.$$.fragment,f),n=Ce(f),W(t.$$.fragment,f),r=Ce(f),W(s.$$.fragment,f),o=Ce(f),W(a.$$.fragment,f)},m(f,m){G(e,f,m),N(f,n,m),G(t,f,m),N(f,r,m),G(s,f,m),N(f,o,m),G(a,f,m),l=!0},p(f,m){const g={};m[0]&64&&(g.position=f[6]),e.$set(g);const w={};m[0]&64&&(w.position=f[6]),t.$set(w);const S={};m[0]&64&&(S.position=f[6]),s.$set(S);const M={};m[0]&64&&(M.position=f[6]),a.$set(M)},i(f){l||(E(e.$$.fragment,f),E(t.$$.fragment,f),E(s.$$.fragment,f),E(a.$$.fragment,f),l=!0)},o(f){P(e.$$.fragment,f),P(t.$$.fragment,f),P(s.$$.fragment,f),P(a.$$.fragment,f),l=!1},d(f){f&&(I(n),I(r),I(o)),Z(e,f),Z(t,f),Z(s,f),Z(a,f)}}}function UM(i){let e,n,t,r,s,o=i[3]&&i[0]&&K0(i);return{c(){e=ce("div"),o&&o.c(),this.h()},l(a){e=ue(a,"DIV",{class:!0,"data-testid":!0});var l=we(e);o&&o.l(l),l.forEach(I),this.h()},h(){oe(e,"class",n=Og(i[1])+" svelte-p00lfq"),oe(e,"data-testid","map-container"),zi(e,"expand-map",!i[1])},m(a,l){N(a,e,l),o&&o.m(e,null),t=!0,r||(s=[Ke(VM,"hashchange",i[10]),Cn(i[9].call(null,e))],r=!0)},p(a,l){a[3]&&a[0]?o?(o.p(a,l),l[0]&9&&E(o,1)):(o=K0(a),o.c(),E(o,1),o.m(e,null)):o&&(It(),P(o,1,1,()=>{o=null}),Pt()),(!t||l[0]&2&&n!==(n=Og(a[1])+" svelte-p00lfq"))&&oe(e,"class",n),(!t||l[0]&2)&&zi(e,"expand-map",!a[1])},i(a){t||(E(o),t=!0)},o(a){P(o),t=!1},d(a){a&&I(e),o&&o.d(),r=!1,Wn(s)}}}function qM(i,e,n){let t,r,s,o,{$$slots:a={},$$scope:l}=e,{map:f=null}=e,{class:m=void 0}=e,{style:g}=e,{diffStyleUpdates:w=!1}=e,{center:S=void 0}=e,{zoom:M=void 0}=e,{pitch:$=0}=e,{bearing:D=0}=e,{bounds:F=void 0}=e,{hash:L=!1}=e,{loaded:U=!1}=e,{minZoom:ne=0}=e,{maxZoom:se=22}=e,{zoomOnDoubleClick:ee=!0}=e,{locale:fe=void 0}=e,{interactive:_e=!0}=e,{attributionControl:re=!0}=e,{cooperativeGestures:de=!1}=e,{preserveDrawingBuffer:he=!1}=e,{maxBounds:X=void 0}=e,{images:j=[]}=e,{standardControls:xe=!1}=e,{filterLayers:ze=void 0}=e,{transformRequest:ve=void 0}=e;const We=dl(),{map:pt,loadedImages:Mt}=kM();Jt(i,pt,et=>n(3,s=et)),Jt(i,Mt,et=>n(4,o=et));let St=new Set;async function Dt(et,dt=!1){if(s&&!(!s.loaded()&&!dt))if("url"in et){St.add(et.id);try{let yt=await s.loadImage(et.url);s==null||s.addImage(et.id,yt.data,et.options),o.add(et.id),Mt.set(o)}catch(yt){We("error",yt)}finally{St.delete(et.id)}}else s.addImage(et.id,et.data,et.options),o.add(et.id),Mt.set(o)}let zt,_t,ft,Be;function Ut(et){return qt(),vr(pt,s=new js.Map(EM({container:et,style:g,locale:fe,center:S,zoom:M,pitch:$,bearing:D,minZoom:ne,maxZoom:se,interactive:_e,preserveDrawingBuffer:he,maxBounds:X,bounds:F,attributionControl:re,transformRequest:ve,cooperativeGestures:de})),s),s.on("load",dt=>{dt.target.getContainer().setAttribute("data-testid","map"),dt.target.getCanvas().setAttribute("data-testid","map-canvas"),n(0,U=!0),We("load",s)}),s.on("error",dt=>We("error",{...dt,map:s})),s.on("movestart",dt=>We("movestart",{...dt,map:s})),s.on("moveend",dt=>{if(n(11,S=dt.target.getCenter()),n(12,M=dt.target.getZoom()),n(13,F=dt.target.getBounds()),We("moveend",{...dt,map:s}),L){let yt=window.location.href.replace(/(#.+)?$/,DM(s));window.history.replaceState(window.history.state,"",yt)}}),s.on("zoomstart",dt=>We("zoomstart",{...dt,map:s})),s.on("zoom",dt=>{n(12,M=dt.target.getZoom()),We("zoom",{...dt,map:s})}),s.on("zoomend",dt=>{n(12,M=dt.target.getZoom()),We("zoomend",{...dt,map:s})}),s.on("style.load",()=>{if(s){const dt=s.getStyle();if(n(33,zt=dt.layers.map(yt=>yt.id)),n(34,_t=Object.keys(dt.sources)),Be)for(const[yt,Ue]of Object.entries(Be))s.addSource(yt,Ue);if(ft)for(const yt of ft)s.addLayer(yt);for(const yt of j)Dt(yt,!0)}}),s.on("styledata",dt=>{if(s&&ze){const yt=s.getStyle().layers;if(yt)for(let Ue of yt)ze(Ue)||s.setLayoutProperty(Ue.id,"visibility","none")}We("styledata",{...dt,map:s})}),{destroy(){n(0,U=!1),s==null||s.remove(),vr(pt,s=null,s)}}}let Rt=g;function qt(){if(L){let et=OM(window.location.hash);et.length>=3&&(n(12,M=et[0]),n(11,S=[et[2],et[1]])),et.length==5&&(n(16,D=et[3]),n(15,$=et[4]))}}return i.$$set=et=>{"map"in et&&n(14,f=et.map),"class"in et&&n(1,m=et.class),"style"in et&&n(17,g=et.style),"diffStyleUpdates"in et&&n(18,w=et.diffStyleUpdates),"center"in et&&n(11,S=et.center),"zoom"in et&&n(12,M=et.zoom),"pitch"in et&&n(15,$=et.pitch),"bearing"in et&&n(16,D=et.bearing),"bounds"in et&&n(13,F=et.bounds),"hash"in et&&n(19,L=et.hash),"loaded"in et&&n(0,U=et.loaded),"minZoom"in et&&n(20,ne=et.minZoom),"maxZoom"in et&&n(21,se=et.maxZoom),"zoomOnDoubleClick"in et&&n(22,ee=et.zoomOnDoubleClick),"locale"in et&&n(23,fe=et.locale),"interactive"in et&&n(24,_e=et.interactive),"attributionControl"in et&&n(25,re=et.attributionControl),"cooperativeGestures"in et&&n(26,de=et.cooperativeGestures),"preserveDrawingBuffer"in et&&n(27,he=et.preserveDrawingBuffer),"maxBounds"in et&&n(28,X=et.maxBounds),"images"in et&&n(29,j=et.images),"standardControls"in et&&n(2,xe=et.standardControls),"filterLayers"in et&&n(30,ze=et.filterLayers),"transformRequest"in et&&n(31,ve=et.transformRequest),"$$scope"in et&&n(36,l=et.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&n(6,t=typeof xe=="boolean"?void 0:xe),i.$$.dirty[0]&8&&n(14,f=s),i.$$.dirty[0]&393224|i.$$.dirty[1]&28&&s&&!Ed(g,Rt)){const et=s.getStyle();if(zt&&(ft=et.layers.filter(dt=>!zt.includes(dt.id))),_t){const dt=Object.keys(et.sources).filter(yt=>!_t.includes(yt));Be={};for(const yt of dt)Be[yt]=et.sources[yt]}n(35,Rt=g),s.setStyle(g,{diff:w}),vr(Mt,o=new Set,o),n(32,St=new Set)}if(i.$$.dirty[0]&536870937|i.$$.dirty[1]&2&&U&&s!=null&&s.loaded())for(let et of j)!o.has(et.id)&&!St.has(et.id)&&!s.hasImage(et.id)&&Dt(et);i.$$.dirty[0]&536870928&&n(5,r=j.every(et=>o.has(et.id))),i.$$.dirty[0]&2056&&S&&!Ed(S,s==null?void 0:s.getCenter())&&(s==null||s.panTo(S)),i.$$.dirty[0]&4104&&M&&!Ed(M,s==null?void 0:s.getZoom())&&(s==null||s.zoomTo(M)),i.$$.dirty[0]&8200&&F&&!Ed(F,s==null?void 0:s.getBounds())&&(s==null||s.fitBounds(F)),i.$$.dirty[0]&4194312&&(ee?s==null||s.doubleClickZoom.enable():s==null||s.doubleClickZoom.disable())},[U,m,xe,s,o,r,t,pt,Mt,Ut,qt,S,M,F,f,$,D,g,w,L,ne,se,ee,fe,_e,re,de,he,X,j,ze,ve,St,zt,_t,Rt,l,a]}class HM extends Xe{constructor(e){super(),Je(this,e,qM,UM,Ze,{map:14,class:1,style:17,diffStyleUpdates:18,center:11,zoom:12,pitch:15,bearing:16,bounds:13,hash:19,loaded:0,minZoom:20,maxZoom:21,zoomOnDoubleClick:22,locale:23,interactive:24,attributionControl:25,cooperativeGestures:26,preserveDrawingBuffer:27,maxBounds:28,images:29,standardControls:2,filterLayers:30,transformRequest:31},null,[-1,-1])}}function GM(i){let e,n,t,r,s,o,a;const l=i[18].default,f=tt(l,i,i[17],null);return{c(){e=ce("div"),f&&f.c(),this.h()},l(m){e=ue(m,"DIV",{tabindex:!0,role:!0});var g=we(e);f&&f.l(g),g.forEach(I),this.h()},h(){oe(e,"tabindex",n=i[1]?0:void 0),oe(e,"role",t=i[1]?"button":void 0),Bd(e,"z-index",i[2])},m(m,g){N(m,e,g),f&&f.m(e,null),s=!0,o||(a=[Cn(i[6].call(null,e)),Cn(r=ZM.call(null,e,i[0])),Ke(e,"click",i[19]),Ke(e,"dblclick",i[20]),Ke(e,"contextmenu",i[21]),Ke(e,"mouseenter",i[22]),Ke(e,"mouseleave",i[23]),Ke(e,"mousemove",i[24]),Ke(e,"keydown",i[7])],o=!0)},p(m,[g]){f&&f.p&&(!s||g&131072)&&nt(f,l,m,m[17],s?rt(l,m[17],g,null):it(m[17]),null),(!s||g&2&&n!==(n=m[1]?0:void 0))&&oe(e,"tabindex",n),(!s||g&2&&t!==(t=m[1]?"button":void 0))&&oe(e,"role",t),r&&lp(r.update)&&g&1&&r.update.call(null,m[0]),g&4&&Bd(e,"z-index",m[2])},i(m){s||(E(f,m),s=!0)},o(m){P(f,m),s=!1},d(m){m&&I(e),f&&f.d(m),o=!1,Wn(a)}}}function ZM(i,e){const n=i.className;function t(r){r?i.className=`${n} ${r}`:i.className=n}return t(e),{update:t}}function WM(i,e,n){let t,r,s,{$$slots:o={},$$scope:a}=e,{lngLat:l}=e,{class:f=void 0}=e,{interactive:m=!0}=e,{asButton:g=!1}=e,{draggable:w=!1}=e,{feature:S=null}=e,{offset:M=void 0}=e,{zIndex:$=void 0}=e,{rotation:D=0}=e,{opacity:F=1}=e;const L=dl(),{map:U,layerEvent:ne,self:se}=TM();Jt(i,U,ve=>n(26,s=ve)),Jt(i,ne,ve=>n(25,t=ve)),Jt(i,se,ve=>n(16,r=ve));function ee(ve){vr(se,r=new js.Marker({element:ve,rotation:D,draggable:w,offset:M,opacity:F.toString()}).setLngLat(l).addTo(s),r);const We=()=>re("dragstart"),pt=()=>{fe(),re("drag")},Mt=()=>{fe(),re("dragend")};return w&&(r.on("dragstart",We),r.on("drag",pt),r.on("dragend",Mt)),{destroy(){w&&(r==null||r.off("dragstart",We),r==null||r.off("drag",pt),r==null||r.off("dragend",Mt)),r==null||r.remove()}}}function fe(){let ve=r==null?void 0:r.getLngLat();ve&&(Array.isArray(l)?n(9,l=[ve.lng,ve.lat]):l&&"lon"in l?n(9,l={lon:ve.lng,lat:ve.lat}):n(9,l=ve))}function _e(ve){ve.key===" "&&(ve.preventDefault(),ve.stopPropagation(),re("click"))}function re(ve){if(!m)return;let We=r==null?void 0:r.getLngLat();if(!We)return;const pt=[We.lng,We.lat];let Mt={map:s,marker:r,lngLat:pt,features:[{type:"Feature",properties:(S==null?void 0:S.properties)??{},geometry:{type:"Point",coordinates:pt}}]};vr(ne,t={...Mt,layerType:"marker",type:ve},t),L(ve,Mt)}const de=()=>re("click"),he=()=>re("dblclick"),X=()=>re("contextmenu"),j=ve=>{re("mouseenter")},xe=()=>{re("mouseleave")},ze=()=>re("mousemove");return i.$$set=ve=>{"lngLat"in ve&&n(9,l=ve.lngLat),"class"in ve&&n(0,f=ve.class),"interactive"in ve&&n(10,m=ve.interactive),"asButton"in ve&&n(1,g=ve.asButton),"draggable"in ve&&n(11,w=ve.draggable),"feature"in ve&&n(12,S=ve.feature),"offset"in ve&&n(13,M=ve.offset),"zIndex"in ve&&n(2,$=ve.zIndex),"rotation"in ve&&n(14,D=ve.rotation),"opacity"in ve&&n(15,F=ve.opacity),"$$scope"in ve&&n(17,a=ve.$$scope)},i.$$.update=()=>{i.$$.dirty&66048&&(r==null||r.setLngLat(l)),i.$$.dirty&73728&&(r==null||r.setOffset(M??[0,0])),i.$$.dirty&81920&&(r==null||r.setRotation(D)),i.$$.dirty&98304&&(r==null||r.setOpacity(F.toString()))},[f,g,$,U,ne,se,ee,_e,re,l,m,w,S,M,D,F,r,a,o,de,he,X,j,xe,ze]}class KM extends Xe{constructor(e){super(),Je(this,e,WM,GM,Ze,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14,opacity:15})}}const XM=i=>({features:i[0]&16,data:i[0]&16,map:i[0]&4,close:i[0]&1}),J0=i=>{var e;return{features:i[4],data:(e=i[4])==null?void 0:e[0],map:i[2],close:i[31]}};function Y0(i){let e,n,t=(i[4]||i[3]instanceof js.Marker)&&Q0(i);return{c(){e=ce("div"),t&&t.c()},l(r){e=ue(r,"DIV",{});var s=we(e);t&&t.l(s),s.forEach(I)},m(r,s){N(r,e,s),t&&t.m(e,null),i[32](e),n=!0},p(r,s){r[4]||r[3]instanceof js.Marker?t?(t.p(r,s),s[0]&24&&E(t,1)):(t=Q0(r),t.c(),E(t,1),t.m(e,null)):t&&(It(),P(t,1,1,()=>{t=null}),Pt())},i(r){n||(E(t),n=!0)},o(r){P(t),n=!1},d(r){r&&I(e),t&&t.d(),i[32](null)}}}function Q0(i){let e;const n=i[30].default,t=tt(n,i,i[29],J0);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&536870933)&&nt(t,n,r,r[29],e?rt(n,r[29],s,XM):it(r[29]),J0)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function JM(i){let e,n,t=i[9].default&&Y0(i);return{c(){t&&t.c(),e=Le()},l(r){t&&t.l(r),e=Le()},m(r,s){t&&t.m(r,s),N(r,e,s),n=!0},p(r,s){r[9].default?t?(t.p(r,s),s[0]&512&&E(t,1)):(t=Y0(r),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(It(),P(t,1,1,()=>{t=null}),Pt())},i(r){n||(E(t),n=!0)},o(r){P(t),n=!1},d(r){r&&I(e),t&&t.d(r)}}}function YM(i,e,n){let t,r,s,o,a,l,{$$slots:f={},$$scope:m}=e;const g=vC(f);let{closeButton:w=void 0}=e,{closeOnClickOutside:S=!0}=e,{closeOnClickInside:M=!1}=e,{closeOnMove:$=!1}=e,{openOn:D="click"}=e,{openIfTopMost:F=!0}=e,{focusAfterOpen:L=!0}=e,{anchor:U=void 0}=e,{offset:ne=void 0}=e,{popupClass:se=void 0}=e,{maxWidth:ee=void 0}=e,{lngLat:fe=void 0}=e,{html:_e=void 0}=e,{open:re=!1}=e;const de=dl(),{map:he,popupTarget:X,layerEvent:j,layer:xe,eventTopMost:ze}=Ac();Jt(i,he,Ge=>n(2,s=Ge)),Jt(i,X,Ge=>n(3,a=Ge)),Jt(i,j,Ge=>n(28,o=Ge)),Jt(i,xe,Ge=>n(35,l=Ge));const ve=["click","dblclick","contextmenu"];let We,pt=!1,Mt;function St(){if(!We)return;let Ge=We.getElement();!Ge||Ge===Mt||(Mt=Ge,D==="hover"&&(Mt.style.pointerEvents="none"),Mt.addEventListener("mouseenter",()=>{n(24,pt=!0)},{passive:!0}),Mt.addEventListener("mouseleave",()=>{n(24,pt=!1)},{passive:!0}),Mt.addEventListener("click",()=>{M&&n(0,re=!1)},{passive:!0}))}Zi(()=>{if(s)return s.on("click",dt),s.on("contextmenu",dt),typeof a=="string"&&(s.on("click",a,ft),s.on("dblclick",a,ft),s.on("contextmenu",a,ft),s.on("mousemove",a,et),s.on("mouseleave",a,qt),s.on("touchstart",a,Ut),s.on("touchend",a,Rt)),()=>{s!=null&&s.loaded()&&(We==null||We.remove(),s.off("click",dt),s.off("contextmenu",dt),a instanceof js.Marker?a.getPopup()===We&&a.setPopup(void 0):typeof a=="string"&&(s.off("click",a,ft),s.off("dblclick",a,ft),s.off("contextmenu",a,ft),s.off("mousemove",a,et),s.off("mouseleave",a,qt),s.off("touchstart",a,Ut),s.off("touchend",a,Rt)))}});function Dt(Ge){return F?!("marker"in Ge)&&!SM(Ge)&&ze(Ge)!==l:!1}let zt=null,_t="normal";function ft(Ge){Ge.type===D&&(Dt(Ge)||("layerType"in Ge?Ge.layerType==="deckgl"?(n(10,fe=Ge.coordinate),n(4,zt=Ge.object?[Ge.object]:null)):(n(10,fe=Ge.lngLat),n(4,zt=Ge.features??[])):(n(10,fe=Ge.lngLat),n(4,zt=Ge.features??[])),setTimeout(()=>n(0,re=!0))))}let Be=null;function Ut(Ge){Be=Ge.point}function Rt(Ge){if(!Be||D!=="hover")return;let Xt=Be.dist(Ge.point);Be=null,Xt<3&&(n(10,fe=Ge.lngLat),n(4,zt=Ge.features??[]),We.isOpen()?n(25,_t="justOpened"):(n(25,_t="opening"),n(0,re=!0)))}function qt(Ge){D!=="hover"||Be||_t!=="normal"||(n(0,re=!1),n(4,zt=null))}function et(Ge){if(!(D!=="hover"||Be||_t!=="normal")){if(Dt(Ge)){n(0,re=!1),n(4,zt=null);return}n(0,re=!0),n(4,zt=Ge.features??[]),n(10,fe=Ge.lngLat)}}function dt(Ge){if(_t==="justOpened"){n(25,_t="normal");return}if(!S)return;let Xt=[Mt,a instanceof js.Marker?a==null?void 0:a.getElement():null];re&&We.isOpen()&&!Xt.some(En=>En==null?void 0:En.contains(Ge.originalEvent.target))&&(Ge.type==="contextmenu"&&D==="contextmenu"||Ge.type!=="contextmenu")&&n(0,re=!1)}hl(()=>{s&&(We!=null&&We.isOpen())&&We.remove()});let yt;const Ue=()=>n(0,re=!1);function kt(Ge){Nt[Ge?"unshift":"push"](()=>{yt=Ge,n(1,yt)})}return i.$$set=Ge=>{"closeButton"in Ge&&n(11,w=Ge.closeButton),"closeOnClickOutside"in Ge&&n(12,S=Ge.closeOnClickOutside),"closeOnClickInside"in Ge&&n(13,M=Ge.closeOnClickInside),"closeOnMove"in Ge&&n(14,$=Ge.closeOnMove),"openOn"in Ge&&n(15,D=Ge.openOn),"openIfTopMost"in Ge&&n(16,F=Ge.openIfTopMost),"focusAfterOpen"in Ge&&n(17,L=Ge.focusAfterOpen),"anchor"in Ge&&n(18,U=Ge.anchor),"offset"in Ge&&n(19,ne=Ge.offset),"popupClass"in Ge&&n(20,se=Ge.popupClass),"maxWidth"in Ge&&n(21,ee=Ge.maxWidth),"lngLat"in Ge&&n(10,fe=Ge.lngLat),"html"in Ge&&n(22,_e=Ge.html),"open"in Ge&&n(0,re=Ge.open),"$$scope"in Ge&&n(29,m=Ge.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&14336&&n(27,t=w??(!S&&!M)),i.$$.dirty[0]&146685952&&(We||(n(23,We=new js.Popup({closeButton:t,closeOnClick:!1,closeOnMove:$,focusAfterOpen:L,maxWidth:ee,className:se,anchor:U,offset:ne})),Mt=We.getElement(),We.on("open",()=>{n(0,re=!0),St(),de("open",We)}),We.on("close",()=>{n(0,re=!1),de("close",We)}),We.on("hover",()=>{de("hover",We)}))),i.$$.dirty[0]&8421384&&We&&a instanceof js.Marker&&(D==="click"?a.setPopup(We):a.getPopup()===We&&a.setPopup(void 0)),i.$$.dirty[0]&268468224&&ve.includes(D)&&(o==null?void 0:o.type)===D&&(ft(o),vr(j,o=null,o)),i.$$.dirty[0]&268468224&&n(26,r=D==="hover"&&((o==null?void 0:o.type)==="mousemove"||(o==null?void 0:o.type)==="mouseenter")),i.$$.dirty[0]&352354304&&D==="hover"&&j&&(r&&o&&(o.layerType==="deckgl"?(n(10,fe=o.coordinate),n(4,zt=o.object?[o.object]:null)):(n(10,fe=o.lngLat),n(4,zt=o.features??[]))),n(0,re=(r||pt)??!1)),i.$$.dirty[0]&12582914&&(yt?We.setDOMContent(yt):_e&&We.setHTML(_e)),i.$$.dirty[0]&8389632&&fe&&We.setLngLat(fe),i.$$.dirty[0]&41943045&&s){let Ge=We.isOpen();re&&!Ge?(We.addTo(s),_t==="opening"&&n(25,_t="justOpened")):!re&&Ge&&We.remove()}},[re,yt,s,a,zt,he,X,j,xe,g,fe,w,S,M,$,D,F,L,U,ne,se,ee,_e,We,pt,_t,r,t,o,m,f,Ue,kt]}class QM extends Xe{constructor(e){super(),Je(this,e,YM,JM,Ze,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}var of=Uint8Array,z2=Uint16Array,e8=Int32Array,t8=new of([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n8=new of([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),R2=function(i,e){for(var n=new z2(31),t=0;t<31;++t)n[t]=e+=1<<i[t-1];for(var r=new e8(n[30]),t=1;t<30;++t)for(var s=n[t];s<n[t+1];++s)r[s]=s-n[t]<<5|t;return{b:n,r}},L2=R2(t8,2),i8=L2.b,r8=L2.r;i8[28]=258,r8[258]=28;R2(n8,0);var s8=new z2(32768);for(bi=0;bi<32768;++bi)Vo=(bi&43690)>>1|(bi&21845)<<1,Vo=(Vo&52428)>>2|(Vo&13107)<<2,Vo=(Vo&61680)>>4|(Vo&3855)<<4,s8[bi]=((Vo&65280)>>8|(Vo&255)<<8)>>1;var Vo,bi,uh=new of(288);for(bi=0;bi<144;++bi)uh[bi]=8;var bi;for(bi=144;bi<256;++bi)uh[bi]=9;var bi;for(bi=256;bi<280;++bi)uh[bi]=7;var bi;for(bi=280;bi<288;++bi)uh[bi]=8;var bi,o8=new of(32);for(bi=0;bi<32;++bi)o8[bi]=5;var bi,a8=new of(0),l8=typeof TextDecoder<"u"&&new TextDecoder,c8=0;try{l8.decode(a8,{stream:!0}),c8=1}catch{}function u8(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[2],null);let o=[{class:n=Et("rounded-lg border bg-card text-card-foreground shadow-sm",i[0])},i[1]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(l){e=ue(l,"DIV",{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&4)&&nt(s,r,l,l[2],t?rt(r,l[2],f,null):it(l[2]),null),ut(e,a=at(o,[(!t||f&1&&n!==(n=Et("rounded-lg border bg-card text-card-foreground shadow-sm",l[0])))&&{class:n},f&2&&l[1]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function f8(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class or extends Xe{constructor(e){super(),Je(this,e,f8,u8,Ze,{class:0})}}function d8(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[2],null);let o=[{class:n=Et("p-6 pt-0",i[0])},i[1]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(l){e=ue(l,"DIV",{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&4)&&nt(s,r,l,l[2],t?rt(r,l[2],f,null):it(l[2]),null),ut(e,a=at(o,[(!t||f&1&&n!==(n=Et("p-6 pt-0",l[0])))&&{class:n},f&2&&l[1]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function h8(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class ts extends Xe{constructor(e){super(),Je(this,e,h8,d8,Ze,{class:0})}}function m8(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[2],null);let o=[{class:n=Et("text-sm text-muted-foreground",i[0])},i[1]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("p"),s&&s.c(),this.h()},l(l){e=ue(l,"P",{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&4)&&nt(s,r,l,l[2],t?rt(r,l[2],f,null):it(l[2]),null),ut(e,a=at(o,[(!t||f&1&&n!==(n=Et("text-sm text-muted-foreground",l[0])))&&{class:n},f&2&&l[1]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function p8(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class Ca extends Xe{constructor(e){super(),Je(this,e,p8,m8,Ze,{class:0})}}function _8(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[2],null);let o=[{class:n=Et("flex items-center p-6 pt-0",i[0])},i[1]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(l){e=ue(l,"DIV",{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&4)&&nt(s,r,l,l[2],t?rt(r,l[2],f,null):it(l[2]),null),ut(e,a=at(o,[(!t||f&1&&n!==(n=Et("flex items-center p-6 pt-0",l[0])))&&{class:n},f&2&&l[1]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function g8(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class v8 extends Xe{constructor(e){super(),Je(this,e,g8,_8,Ze,{class:0})}}function b8(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[2],null);let o=[{class:n=Et("flex flex-col space-y-1.5 p-6",i[0])},i[1]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(l){e=ue(l,"DIV",{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&4)&&nt(s,r,l,l[2],t?rt(r,l[2],f,null):it(l[2]),null),ut(e,a=at(o,[(!t||f&1&&n!==(n=Et("flex flex-col space-y-1.5 p-6",l[0])))&&{class:n},f&2&&l[1]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function y8(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class ws extends Xe{constructor(e){super(),Je(this,e,y8,b8,Ze,{class:0})}}function Rm(i){let e,n,t;const r=i[4].default,s=tt(r,i,i[3],null);let o=[{class:n=Et("text-lg font-semibold leading-none tracking-tight",i[0])},i[2]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce(i[1]),s&&s.c(),this.h()},l(l){e=ue(l,(i[1]||"null").toUpperCase(),{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){vo(i[1])(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,f){s&&s.p&&(!t||f&8)&&nt(s,r,l,l[3],t?rt(r,l[3],f,null):it(l[3]),null),vo(l[1])(e,a=at(o,[(!t||f&1&&n!==(n=Et("text-lg font-semibold leading-none tracking-tight",l[0])))&&{class:n},f&4&&l[2]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function w8(i){let e=i[1],n,t,r=i[1]&&Rm(i);return{c(){r&&r.c(),n=Le()},l(s){r&&r.l(s),n=Le()},m(s,o){r&&r.m(s,o),N(s,n,o),t=!0},p(s,[o]){s[1]?e?Ze(e,s[1])?(r.d(1),r=Rm(s),e=s[1],r.c(),r.m(n.parentNode,n)):r.p(s,o):(r=Rm(s),e=s[1],r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null,e=s[1])},i(s){t||(E(r,s),t=!0)},o(s){P(r,s),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function x8(i,e,n){const t=["class","tag"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{tag:l="h3"}=e;return i.$$set=f=>{e=Q(Q({},e),bt(f)),n(2,r=Fe(e,t)),"class"in f&&n(0,a=f.class),"tag"in f&&n(1,l=f.tag),"$$scope"in f&&n(3,o=f.$$scope)},[a,l,r,o,s]}class Co extends Xe{constructor(e){super(),Je(this,e,x8,w8,Ze,{class:0,tag:1})}}const Qm=Symbol("EMBLA_CAROUSEL_CONTEXT");function k8(i){return Ar(Qm,i),i}function F2(i="This component"){if(!bC(Qm))throw new Error(`${i} must be used within a <Carousel.Root> component`);return Tr(Qm)}function C8(i){let e,n,t,r,s;const o=i[7].default,a=tt(o,i,i[6],null);let l=[{class:n=Et("relative",i[0])},{role:"region"},{"aria-roledescription":"carousel"},i[1]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(m){e=ue(m,"DIV",{class:!0,role:!0,"aria-roledescription":!0});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),t=!0,r||(s=[Ke(e,"mouseenter",i[8]),Ke(e,"mouseleave",i[9])],r=!0)},p(m,[g]){a&&a.p&&(!t||g&64)&&nt(a,o,m,m[6],t?rt(o,m[6],g,null):it(m[6]),null),ut(e,f=at(l,[(!t||g&1&&n!==(n=Et("relative",m[0])))&&{class:n},{role:"region"},{"aria-roledescription":"carousel"},g&2&&m[1]]))},i(m){t||(E(a,m),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),r=!1,Wn(s)}}}function T8(i,e,n){const t=["opts","plugins","api","orientation","class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{opts:a={}}=e,{plugins:l=[]}=e,{api:f=void 0}=e,{orientation:m="horizontal"}=e,{class:g=void 0}=e;const w=wn(void 0),S=wn(m),M=wn(!1),$=wn(!1),D=wn(a),F=wn(l);function L(){f==null||f.scrollPrev()}function U(){f==null||f.scrollNext()}function ne(re){re&&(M.set(re.canScrollPrev()),$.set(re.canScrollNext()))}function se(re){re.key==="ArrowLeft"?(re.preventDefault(),L()):re.key==="ArrowRight"&&(re.preventDefault(),U())}k8({api:w,scrollPrev:L,scrollNext:U,orientation:S,canScrollNext:$,canScrollPrev:M,handleKeyDown:se,options:D,plugins:F,onInit:ee});function ee(re){n(2,f=re.detail),w.set(f)}hl(()=>{f==null||f.off("select",ne)});function fe(re){At.call(this,i,re)}function _e(re){At.call(this,i,re)}return i.$$set=re=>{e=Q(Q({},e),bt(re)),n(1,r=Fe(e,t)),"opts"in re&&n(3,a=re.opts),"plugins"in re&&n(4,l=re.plugins),"api"in re&&n(2,f=re.api),"orientation"in re&&n(5,m=re.orientation),"class"in re&&n(0,g=re.class),"$$scope"in re&&n(6,o=re.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&S.set(m),i.$$.dirty&16&&F.set(l),i.$$.dirty&8&&D.set(a),i.$$.dirty&4&&f&&(ne(f),f.on("select",ne),f.on("reInit",ne))},[g,r,f,a,l,m,o,s,fe,_e]}class S8 extends Xe{constructor(e){super(),Je(this,e,T8,C8,Ze,{opts:3,plugins:4,api:2,orientation:5,class:0})}}function E8(i){return Object.prototype.toString.call(i)==="[object Object]"}function ev(i){return E8(i)||Array.isArray(i)}function I8(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Ep(i,e){const n=Object.keys(i),t=Object.keys(e);if(n.length!==t.length)return!1;const r=JSON.stringify(Object.keys(i.breakpoints||{})),s=JSON.stringify(Object.keys(e.breakpoints||{}));return r!==s?!1:n.every(o=>{const a=i[o],l=e[o];return typeof a=="function"?`${a}`==`${l}`:!ev(a)||!ev(l)?a===l:Ep(a,l)})}function tv(i){return i.concat().sort((e,n)=>e.name>n.name?1:-1).map(e=>e.options)}function P8(i,e){if(i.length!==e.length)return!1;const n=tv(i),t=tv(e);return n.every((r,s)=>{const o=t[s];return Ep(r,o)})}function Ip(i){return typeof i=="number"}function ep(i){return typeof i=="string"}function Pp(i){return typeof i=="boolean"}function nv(i){return Object.prototype.toString.call(i)==="[object Object]"}function Hi(i){return Math.abs(i)}function $p(i){return Math.sign(i)}function qu(i,e){return Hi(i-e)}function $8(i,e){if(i===0||e===0||Hi(i)<=Hi(e))return 0;const n=qu(Hi(i),Hi(e));return Hi(n/i)}function Ju(i){return Yu(i).map(Number)}function to(i){return i[af(i)]}function af(i){return Math.max(0,i.length-1)}function Ap(i,e){return e===af(i)}function iv(i,e=0){return Array.from(Array(i),(n,t)=>e+t)}function Yu(i){return Object.keys(i)}function B2(i,e){return[i,e].reduce((n,t)=>(Yu(t).forEach(r=>{const s=n[r],o=t[r],a=nv(s)&&nv(o);n[r]=a?B2(s,o):o}),n),{})}function N2(i,e){return typeof e.MouseEvent<"u"&&i instanceof e.MouseEvent}function A8(i,e){const n={start:t,center:r,end:s};function t(){return 0}function r(l){return s(l)/2}function s(l){return e-l}function o(l,f){return ep(i)?n[i](l):i(e,l,f)}return{measure:o}}function Qu(){let i=[];function e(r,s,o,a={passive:!0}){let l;if("addEventListener"in r)r.addEventListener(s,o,a),l=()=>r.removeEventListener(s,o,a);else{const f=r;f.addListener(o),l=()=>f.removeListener(o)}return i.push(l),t}function n(){i=i.filter(r=>r())}const t={add:e,clear:n};return t}function M8(i,e,n,t){const r=Qu(),s=1e3/60;let o=null,a=0,l=0;function f(){r.add(i,"visibilitychange",()=>{i.hidden&&M()})}function m(){S(),r.clear()}function g(D){if(!l)return;o||(o=D);const F=D-o;for(o=D,a+=F;a>=s;)n(),a-=s;const L=Hi(a/s);t(L),l&&e.requestAnimationFrame(g)}function w(){l||(l=e.requestAnimationFrame(g))}function S(){e.cancelAnimationFrame(l),o=null,a=0,l=0}function M(){o=null,a=0}return{init:f,destroy:m,start:w,stop:S,update:n,render:t}}function D8(i,e){const n=e==="rtl",t=i==="y",r=t?"y":"x",s=t?"x":"y",o=!t&&n?-1:1,a=m(),l=g();function f(M){const{height:$,width:D}=M;return t?$:D}function m(){return t?"top":n?"right":"left"}function g(){return t?"bottom":n?"left":"right"}function w(M){return M*o}return{scroll:r,cross:s,startEdge:a,endEdge:l,measureSize:f,direction:w}}function fl(i=0,e=0){const n=Hi(i-e);function t(f){return f<i}function r(f){return f>e}function s(f){return t(f)||r(f)}function o(f){return s(f)?t(f)?i:e:f}function a(f){return n?f-n*Math.ceil((f-e)/n):f}return{length:n,max:e,min:i,constrain:o,reachedAny:s,reachedMax:r,reachedMin:t,removeOffset:a}}function V2(i,e,n){const{constrain:t}=fl(0,i),r=i+1;let s=o(e);function o(w){return n?Hi((r+w)%r):t(w)}function a(){return s}function l(w){return s=o(w),g}function f(w){return m().set(a()+w)}function m(){return V2(i,a(),n)}const g={get:a,set:l,add:f,clone:m};return g}function O8(i,e,n,t,r,s,o,a,l,f,m,g,w,S,M,$,D,F,L){const{cross:U,direction:ne}=i,se=["INPUT","SELECT","TEXTAREA"],ee={passive:!1},fe=Qu(),_e=Qu(),re=fl(50,225).constrain(S.measure(20)),de={mouse:300,touch:400},he={mouse:500,touch:600},X=M?43:25;let j=!1,xe=0,ze=0,ve=!1,We=!1,pt=!1,Mt=!1;function St(Ue){if(!L)return;function kt(Xt){(Pp(L)||L(Ue,Xt))&&Ut(Xt)}const Ge=e;fe.add(Ge,"dragstart",Xt=>Xt.preventDefault(),ee).add(Ge,"touchmove",()=>{},ee).add(Ge,"touchend",()=>{}).add(Ge,"touchstart",kt).add(Ge,"mousedown",kt).add(Ge,"touchcancel",qt).add(Ge,"contextmenu",qt).add(Ge,"click",et,!0)}function Dt(){fe.clear(),_e.clear()}function zt(){const Ue=Mt?n:e;_e.add(Ue,"touchmove",Rt,ee).add(Ue,"touchend",qt).add(Ue,"mousemove",Rt,ee).add(Ue,"mouseup",qt)}function _t(Ue){const kt=Ue.nodeName||"";return se.includes(kt)}function ft(){return(M?he:de)[Mt?"mouse":"touch"]}function Be(Ue,kt){const Ge=g.add($p(Ue)*-1),Xt=m.byDistance(Ue,!M).distance;return M||Hi(Ue)<re?Xt:D&&kt?Xt*.5:m.byIndex(Ge.get(),0).distance}function Ut(Ue){const kt=N2(Ue,t);Mt=kt,pt=M&&kt&&!Ue.buttons&&j,j=qu(r.get(),o.get())>=2,!(kt&&Ue.button!==0)&&(_t(Ue.target)||(ve=!0,s.pointerDown(Ue),f.useFriction(0).useDuration(0),r.set(o),zt(),xe=s.readPoint(Ue),ze=s.readPoint(Ue,U),w.emit("pointerDown")))}function Rt(Ue){const kt=s.readPoint(Ue),Ge=s.readPoint(Ue,U),Xt=qu(kt,xe),En=qu(Ge,ze);if(!We&&!Mt&&(!Ue.cancelable||(We=Xt>En,!We)))return qt(Ue);const Oe=s.pointerMove(Ue);Xt>$&&(pt=!0),f.useFriction(.3).useDuration(1),a.start(),r.add(ne(Oe)),Ue.preventDefault()}function qt(Ue){const Ge=m.byDistance(0,!1).index!==g.get(),Xt=s.pointerUp(Ue)*ft(),En=Be(ne(Xt),Ge),Oe=$8(Xt,En),un=X-10*Oe,qn=F+Oe/50;We=!1,ve=!1,_e.clear(),f.useDuration(un).useFriction(qn),l.distance(En,!M),Mt=!1,w.emit("pointerUp")}function et(Ue){pt&&(Ue.stopPropagation(),Ue.preventDefault(),pt=!1)}function dt(){return ve}return{init:St,pointerDown:dt,destroy:Dt}}function z8(i,e){let t,r;function s(g){return g.timeStamp}function o(g,w){const M=`client${(w||i.scroll)==="x"?"X":"Y"}`;return(N2(g,e)?g:g.touches[0])[M]}function a(g){return t=g,r=g,o(g)}function l(g){const w=o(g)-o(r),S=s(g)-s(t)>170;return r=g,S&&(t=g),w}function f(g){if(!t||!r)return 0;const w=o(r)-o(t),S=s(g)-s(t),M=s(g)-s(r)>170,$=w/S;return S&&!M&&Hi($)>.1?$:0}return{pointerDown:a,pointerMove:l,pointerUp:f,readPoint:o}}function R8(){function i(n){const{offsetTop:t,offsetLeft:r,offsetWidth:s,offsetHeight:o}=n;return{top:t,right:r+s,bottom:t+o,left:r,width:s,height:o}}return{measure:i}}function L8(i){function e(t){return i*(t/100)}return{measure:e}}function F8(i,e,n,t,r,s,o){let a,l,f=[],m=!1;function g($){return r.measureSize(o.measure($))}function w($){if(!s)return;l=g(i),f=t.map(g);function D(L){for(const U of L){const ne=U.target===i,se=t.indexOf(U.target),ee=ne?l:f[se],fe=g(ne?i:t[se]);if(Hi(fe-ee)>=.5){n.requestAnimationFrame(()=>{$.reInit(),e.emit("resize")});break}}}a=new ResizeObserver(L=>{m||(Pp(s)||s($,L))&&D(L)}),[i].concat(t).forEach(L=>a.observe(L))}function S(){a&&a.disconnect(),m=!0}return{init:w,destroy:S}}function B8(i,e,n,t,r){let s=0,o=0,a=t,l=r,f=i.get(),m=0;function g(){const se=n.get()-i.get(),ee=!a;let fe=0;return ee?(s=0,i.set(n),fe=se):(s+=se/a,s*=l,f+=s,i.add(s),fe=f-m),o=$p(fe),m=f,ne}function w(){const se=n.get()-e.get();return Hi(se)<.001}function S(){return a}function M(){return o}function $(){return s}function D(){return L(t)}function F(){return U(r)}function L(se){return a=se,ne}function U(se){return l=se,ne}const ne={direction:M,duration:S,velocity:$,seek:g,settled:w,useBaseFriction:F,useBaseDuration:D,useFriction:U,useDuration:L};return ne}function N8(i,e,n,t,r){const s=r.measure(10),o=r.measure(50),a=fl(.1,.99);let l=!1;function f(){return!(l||!i.reachedAny(n.get())||!i.reachedAny(e.get()))}function m(S){if(!f())return;const M=i.reachedMin(e.get())?"min":"max",$=Hi(i[M]-e.get()),D=n.get()-e.get(),F=a.constrain($/o);n.subtract(D*F),!S&&Hi(D)<s&&(n.set(i.constrain(n.get())),t.useDuration(25).useBaseFriction())}function g(S){l=!S}return{constrain:m,toggleActive:g}}function V8(i,e,n,t,r){const s=fl(-e+i,0),o=g(),a=m(),l=w();function f(M,$){return qu(M,$)<1}function m(){const M=o[0],$=to(o),D=o.lastIndexOf(M),F=o.indexOf($)+1;return fl(D,F)}function g(){return n.map((M,$)=>{const{min:D,max:F}=s,L=s.constrain(M),U=!$,ne=Ap(n,$);return U?F:ne||f(D,L)?D:f(F,L)?F:L}).map(M=>parseFloat(M.toFixed(3)))}function w(){if(e<=i+r)return[s.max];if(t==="keepSnaps")return o;const{min:M,max:$}=a;return o.slice(M,$)}return{snapsContained:l,scrollContainLimit:a}}function j8(i,e,n){const t=e[0],r=n?t-i:to(e);return{limit:fl(r,t)}}function U8(i,e,n,t){const s=e.min+.1,o=e.max+.1,{reachedMin:a,reachedMax:l}=fl(s,o);function f(w){return w===1?l(n.get()):w===-1?a(n.get()):!1}function m(w){if(!f(w))return;const S=i*(w*-1);t.forEach(M=>M.add(S))}return{loop:m}}function q8(i){const{max:e,length:n}=i;function t(s){const o=s-e;return n?o/-n:0}return{get:t}}function H8(i,e,n,t,r){const{startEdge:s,endEdge:o}=i,{groupSlides:a}=r,l=g().map(e.measure),f=w(),m=S();function g(){return a(t).map($=>to($)[o]-$[0][s]).map(Hi)}function w(){return t.map($=>n[s]-$[s]).map($=>-Hi($))}function S(){return a(f).map($=>$[0]).map(($,D)=>$+l[D])}return{snaps:f,snapsAligned:m}}function G8(i,e,n,t,r,s){const{groupSlides:o}=r,{min:a,max:l}=t,f=m();function m(){const w=o(s),S=!i||e==="keepSnaps";return n.length===1?[s]:S?w:w.slice(a,l).map((M,$,D)=>{const F=!$,L=Ap(D,$);if(F){const U=to(D[0])+1;return iv(U)}if(L){const U=af(s)-to(D)[0]+1;return iv(U,to(D)[0])}return M})}return{slideRegistry:f}}function Z8(i,e,n,t,r){const{reachedAny:s,removeOffset:o,constrain:a}=t;function l(M){return M.concat().sort(($,D)=>Hi($)-Hi(D))[0]}function f(M){const $=i?o(M):a(M),D=e.map((L,U)=>({diff:m(L-$,0),index:U})).sort((L,U)=>Hi(L.diff)-Hi(U.diff)),{index:F}=D[0];return{index:F,distance:$}}function m(M,$){const D=[M,M+n,M-n];if(!i)return D[0];if(!$)return l(D);const F=D.filter(L=>$p(L)===$);return F.length?l(F):to(D)-n}function g(M,$){const D=e[M]-r.get(),F=m(D,$);return{index:M,distance:F}}function w(M,$){const D=r.get()+M,{index:F,distance:L}=f(D),U=!i&&s(D);if(!$||U)return{index:F,distance:M};const ne=e[F]-L,se=M+m(ne,0);return{index:F,distance:se}}return{byDistance:w,byIndex:g,shortcut:m}}function W8(i,e,n,t,r,s,o){function a(g){const w=g.distance,S=g.index!==e.get();s.add(w),w&&(t.duration()?i.start():(i.update(),i.render(1),i.update())),S&&(n.set(e.get()),e.set(g.index),o.emit("select"))}function l(g,w){const S=r.byDistance(g,w);a(S)}function f(g,w){const S=e.clone().set(g),M=r.byIndex(S.get(),w);a(M)}return{distance:l,index:f}}function K8(i,e,n,t,r,s){let o=0;function a(){s.add(document,"keydown",l,!1),e.forEach(f)}function l(g){g.code==="Tab"&&(o=new Date().getTime())}function f(g){const w=()=>{if(new Date().getTime()-o>10)return;i.scrollLeft=0;const $=e.indexOf(g),D=n.findIndex(F=>F.includes($));Ip(D)&&(r.useDuration(0),t.index(D,0))};s.add(g,"focus",w,{passive:!0,capture:!0})}return{init:a}}function Dd(i){let e=i;function n(){return e}function t(l){e=o(l)}function r(l){e+=o(l)}function s(l){e-=o(l)}function o(l){return Ip(l)?l:l.get()}return{get:n,set:t,add:r,subtract:s}}function j2(i,e){const n=i.scroll==="x"?s:o,t=e.style;let r=!1;function s(g){return`translate3d(${g}px,0px,0px)`}function o(g){return`translate3d(0px,${g}px,0px)`}function a(g){r||(t.transform=n(i.direction(g)))}function l(g){r=!g}function f(){r||(t.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:f,to:a,toggleActive:l}}function X8(i,e,n,t,r,s,o,a,l){const m=Ju(r),g=Ju(r).reverse(),w=F().concat(L());function S(fe,_e){return fe.reduce((re,de)=>re-r[de],_e)}function M(fe,_e){return fe.reduce((re,de)=>S(re,_e)>0?re.concat([de]):re,[])}function $(fe){return s.map((_e,re)=>({start:_e-t[re]+.5+fe,end:_e+e-.5+fe}))}function D(fe,_e,re){const de=$(_e);return fe.map(he=>{const X=re?0:-n,j=re?n:0,xe=re?"end":"start",ze=de[he][xe];return{index:he,loopPoint:ze,slideLocation:Dd(-1),translate:j2(i,l[he]),target:()=>a.get()>ze?X:j}})}function F(){const fe=o[0],_e=M(g,fe);return D(_e,n,!1)}function L(){const fe=e-o[0]-1,_e=M(m,fe);return D(_e,-n,!0)}function U(){return w.every(({index:fe})=>{const _e=m.filter(re=>re!==fe);return S(_e,e)<=.1})}function ne(){w.forEach(fe=>{const{target:_e,translate:re,slideLocation:de}=fe,he=_e();he!==de.get()&&(re.to(he),de.set(he))})}function se(){w.forEach(fe=>fe.translate.clear())}return{canLoop:U,clear:se,loop:ne,loopPoints:w}}function J8(i,e,n){let t,r=!1;function s(l){if(!n)return;function f(m){for(const g of m)if(g.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}t=new MutationObserver(m=>{r||(Pp(n)||n(l,m))&&f(m)}),t.observe(i,{childList:!0})}function o(){t&&t.disconnect(),r=!0}return{init:s,destroy:o}}function Y8(i,e,n,t){const r={};let s=null,o=null,a,l=!1;function f(){a=new IntersectionObserver(M=>{l||(M.forEach($=>{const D=e.indexOf($.target);r[D]=$}),s=null,o=null,n.emit("slidesInView"))},{root:i.parentElement,threshold:t}),e.forEach(M=>a.observe(M))}function m(){a&&a.disconnect(),l=!0}function g(M){return Yu(r).reduce(($,D)=>{const F=parseInt(D),{isIntersecting:L}=r[F];return(M&&L||!M&&!L)&&$.push(F),$},[])}function w(M=!0){if(M&&s)return s;if(!M&&o)return o;const $=g(M);return M&&(s=$),M||(o=$),$}return{init:f,destroy:m,get:w}}function Q8(i,e,n,t,r,s){const{measureSize:o,startEdge:a,endEdge:l}=i,f=n[0]&&r,m=M(),g=$(),w=n.map(o),S=D();function M(){if(!f)return 0;const L=n[0];return Hi(e[a]-L[a])}function $(){if(!f)return 0;const L=s.getComputedStyle(to(t));return parseFloat(L.getPropertyValue(`margin-${l}`))}function D(){return n.map((L,U,ne)=>{const se=!U,ee=Ap(ne,U);return se?w[U]+m:ee?w[U]+g:ne[U+1][a]-L[a]}).map(Hi)}return{slideSizes:w,slideSizesWithGaps:S,startGap:m,endGap:g}}function eD(i,e,n,t,r,s,o,a,l){const{startEdge:f,endEdge:m,direction:g}=i,w=Ip(n);function S(F,L){return Ju(F).filter(U=>U%L===0).map(U=>F.slice(U,U+L))}function M(F){return F.length?Ju(F).reduce((L,U,ne)=>{const se=to(L)||0,ee=se===0,fe=U===af(F),_e=r[f]-s[se][f],re=r[f]-s[U][m],de=!t&&ee?g(o):0,he=!t&&fe?g(a):0,X=Hi(re-he-(_e+de));return ne&&X>e+l&&L.push(U),fe&&L.push(F.length),L},[]).map((L,U,ne)=>{const se=Math.max(ne[U-1]||0);return F.slice(se,L)}):[]}function $(F){return w?S(F,n):M(F)}return{groupSlides:$}}function tD(i,e,n,t,r,s,o){const{align:a,axis:l,direction:f,startIndex:m,loop:g,duration:w,dragFree:S,dragThreshold:M,inViewThreshold:$,slidesToScroll:D,skipSnaps:F,containScroll:L,watchResize:U,watchSlides:ne,watchDrag:se}=s,ee=2,fe=R8(),_e=fe.measure(e),re=n.map(fe.measure),de=D8(l,f),he=de.measureSize(_e),X=L8(he),j=A8(a,he),xe=!g&&!!L,ze=g||!!L,{slideSizes:ve,slideSizesWithGaps:We,startGap:pt,endGap:Mt}=Q8(de,_e,re,n,ze,r),St=eD(de,he,D,g,_e,re,pt,Mt,ee),{snaps:Dt,snapsAligned:zt}=H8(de,j,_e,re,St),_t=-to(Dt)+to(We),{snapsContained:ft,scrollContainLimit:Be}=V8(he,_t,zt,L,ee),Ut=xe?ft:zt,{limit:Rt}=j8(_t,Ut,g),qt=V2(af(Ut),m,g),et=qt.clone(),dt=Ju(n),yt=({dragHandler:wt,scrollBody:$t,scrollBounds:Hn,options:{loop:Mn}})=>{Mn||Hn.constrain(wt.pointerDown()),$t.seek()},Ue=({scrollBody:wt,translate:$t,location:Hn,offsetLocation:Mn,scrollLooper:ei,slideLooper:xi,dragHandler:tn,animation:Un,eventHandler:Nn,options:{loop:On}},hi)=>{const Tn=wt.velocity(),ti=wt.settled();ti&&!tn.pointerDown()&&(Un.stop(),Nn.emit("settle")),ti||Nn.emit("scroll"),Mn.set(Hn.get()-Tn+Tn*hi),On&&(ei.loop(wt.direction()),xi.loop()),$t.to(Mn.get())},kt=M8(t,r,()=>yt(yi),wt=>Ue(yi,wt)),Ge=.68,Xt=Ut[qt.get()],En=Dd(Xt),Oe=Dd(Xt),un=Dd(Xt),qn=B8(En,Oe,un,w,Ge),_n=Z8(g,Ut,_t,Rt,un),mt=W8(kt,qt,et,qn,_n,un,o),Zt=q8(Rt),Kt=Qu(),en=Y8(e,n,o,$),{slideRegistry:Pn}=G8(xe,L,Ut,Be,St,dt),Vn=K8(i,n,Pn,mt,qn,Kt),yi={ownerDocument:t,ownerWindow:r,eventHandler:o,containerRect:_e,slideRects:re,animation:kt,axis:de,dragHandler:O8(de,i,t,r,un,z8(de,r),En,kt,mt,qn,_n,qt,o,X,S,M,F,Ge,se),eventStore:Kt,percentOfView:X,index:qt,indexPrevious:et,limit:Rt,location:En,offsetLocation:Oe,options:s,resizeHandler:F8(e,o,r,n,de,U,fe),scrollBody:qn,scrollBounds:N8(Rt,Oe,un,qn,X),scrollLooper:U8(_t,Rt,Oe,[En,Oe,un]),scrollProgress:Zt,scrollSnapList:Ut.map(Zt.get),scrollSnaps:Ut,scrollTarget:_n,scrollTo:mt,slideLooper:X8(de,he,_t,ve,We,Dt,Ut,Oe,n),slideFocus:Vn,slidesHandler:J8(e,o,ne),slidesInView:en,slideIndexes:dt,slideRegistry:Pn,slidesToScroll:St,target:un,translate:j2(de,e)};return yi}function nD(){const i={};let e;function n(l){e=l}function t(l){return i[l]||[]}function r(l){return t(l).forEach(f=>f(e,l)),a}function s(l,f){return i[l]=t(l).concat([f]),a}function o(l,f){return i[l]=t(l).filter(m=>m!==f),a}const a={init:n,emit:r,off:o,on:s};return a}const iD={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function rD(i){function e(s,o){return B2(s,o||{})}function n(s){const o=s.breakpoints||{},a=Yu(o).filter(l=>i.matchMedia(l).matches).map(l=>o[l]).reduce((l,f)=>e(l,f),{});return e(s,a)}function t(s){return s.map(o=>Yu(o.breakpoints||{})).reduce((o,a)=>o.concat(a),[]).map(i.matchMedia)}return{mergeOptions:e,optionsAtMedia:n,optionsMediaQueries:t}}function sD(i){let e=[];function n(s,o){return e=o.filter(({options:a})=>i.optionsAtMedia(a).active!==!1),e.forEach(a=>a.init(s,i)),o.reduce((a,l)=>Object.assign(a,{[l.name]:l}),{})}function t(){e=e.filter(s=>s.destroy())}return{init:n,destroy:t}}function Xd(i,e,n){const t=i.ownerDocument,r=t.defaultView,s=rD(r),o=sD(s),a=Qu(),l=nD(),{mergeOptions:f,optionsAtMedia:m,optionsMediaQueries:g}=s,{on:w,off:S,emit:M}=l,$=he;let D=!1,F,L=f(iD,Xd.globalOptions),U=f(L),ne=[],se,ee,fe;function _e(){const{container:yt,slides:Ue}=U;ee=(ep(yt)?i.querySelector(yt):yt)||i.children[0];const Ge=ep(Ue)?ee.querySelectorAll(Ue):Ue;fe=[].slice.call(Ge||ee.children)}function re(yt){const Ue=tD(i,ee,fe,t,r,yt,l);if(yt.loop&&!Ue.slideLooper.canLoop()){const kt=Object.assign({},yt,{loop:!1});return re(kt)}return Ue}function de(yt,Ue){D||(L=f(L,yt),U=m(L),ne=Ue||ne,_e(),F=re(U),g([L,...ne.map(({options:kt})=>kt)]).forEach(kt=>a.add(kt,"change",he)),U.active&&(F.translate.to(F.location.get()),F.animation.init(),F.slidesInView.init(),F.slideFocus.init(),F.eventHandler.init(dt),F.resizeHandler.init(dt),F.slidesHandler.init(dt),F.options.loop&&F.slideLooper.loop(),ee.offsetParent&&fe.length&&F.dragHandler.init(dt),se=o.init(dt,ne)))}function he(yt,Ue){const kt=Dt();X(),de(f({startIndex:kt},yt),Ue),l.emit("reInit")}function X(){F.dragHandler.destroy(),F.eventStore.clear(),F.translate.clear(),F.slideLooper.clear(),F.resizeHandler.destroy(),F.slidesHandler.destroy(),F.slidesInView.destroy(),F.animation.destroy(),o.destroy(),a.clear()}function j(){D||(D=!0,a.clear(),X(),l.emit("destroy"))}function xe(yt,Ue,kt){!U.active||D||(F.scrollBody.useBaseFriction().useDuration(Ue===!0?0:U.duration),F.scrollTo.index(yt,kt||0))}function ze(yt){const Ue=F.index.add(1).get();xe(Ue,yt,-1)}function ve(yt){const Ue=F.index.add(-1).get();xe(Ue,yt,1)}function We(){return F.index.add(1).get()!==Dt()}function pt(){return F.index.add(-1).get()!==Dt()}function Mt(){return F.scrollSnapList}function St(){return F.scrollProgress.get(F.location.get())}function Dt(){return F.index.get()}function zt(){return F.indexPrevious.get()}function _t(){return F.slidesInView.get()}function ft(){return F.slidesInView.get(!1)}function Be(){return se}function Ut(){return F}function Rt(){return i}function qt(){return ee}function et(){return fe}const dt={canScrollNext:We,canScrollPrev:pt,containerNode:qt,internalEngine:Ut,destroy:j,off:S,on:w,emit:M,plugins:Be,previousScrollSnap:zt,reInit:$,rootNode:Rt,scrollNext:ze,scrollPrev:ve,scrollProgress:St,scrollSnapList:Mt,scrollTo:xe,selectedScrollSnap:Dt,slideNodes:et,slidesInView:_t,slidesNotInView:ft};return de(e,n),setTimeout(()=>l.emit("init"),0),dt}Xd.globalOptions=void 0;function Mp(i,e={options:{},plugins:[]}){let n=e,t;return I8()&&(Xd.globalOptions=Mp.globalOptions,t=Xd(i,n.options,n.plugins),t.on("init",()=>i.dispatchEvent(new CustomEvent("emblaInit",{detail:t})))),{destroy:()=>{t&&t.destroy()},update:r=>{const s=!Ep(n.options,r.options),o=!P8(n.plugins,r.plugins);!s&&!o||(n=r,t&&t.reInit(n.options,n.plugins))}}}Mp.globalOptions=void 0;function oD(i){let e,n,t,r,s,o,a;const l=i[10].default,f=tt(l,i,i[9],null);let m=[{class:t=Et("flex",i[2]==="horizontal"?"-ml-4":"-mt-4 flex-col",i[0])},{"data-embla-container":""},i[8]],g={};for(let w=0;w<m.length;w+=1)g=Q(g,m[w]);return{c(){e=ce("div"),n=ce("div"),f&&f.c(),this.h()},l(w){e=ue(w,"DIV",{class:!0});var S=we(e);n=ue(S,"DIV",{class:!0,"data-embla-container":!0});var M=we(n);f&&f.l(M),M.forEach(I),S.forEach(I),this.h()},h(){ut(n,g),oe(e,"class","overflow-hidden")},m(w,S){N(w,e,S),me(e,n),f&&f.m(n,null),s=!0,o||(a=[Cn(r=Mp.call(null,e,{options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...i[1],axis:i[2]==="horizontal"?"x":"y"},plugins:i[3]})),Ke(e,"emblaInit",i[7])],o=!0)},p(w,[S]){f&&f.p&&(!s||S&512)&&nt(f,l,w,w[9],s?rt(l,w[9],S,null):it(w[9]),null),ut(n,g=at(m,[(!s||S&5&&t!==(t=Et("flex",w[2]==="horizontal"?"-ml-4":"-mt-4 flex-col",w[0])))&&{class:t},{"data-embla-container":""},S&256&&w[8]])),r&&lp(r.update)&&S&14&&r.update.call(null,{options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...w[1],axis:w[2]==="horizontal"?"x":"y"},plugins:w[3]})},i(w){s||(E(f,w),s=!0)},o(w){P(f,w),s=!1},d(w){w&&I(e),f&&f.d(w),o=!1,Wn(a)}}}function aD(i,e,n){const t=["class"];let r=Fe(e,t),s,o,a,{$$slots:l={},$$scope:f}=e,{class:m=void 0}=e;const{orientation:g,options:w,plugins:S,onInit:M}=F2("<Carousel.Content/>");return Jt(i,g,$=>n(2,o=$)),Jt(i,w,$=>n(1,s=$)),Jt(i,S,$=>n(3,a=$)),i.$$set=$=>{e=Q(Q({},e),bt($)),n(8,r=Fe(e,t)),"class"in $&&n(0,m=$.class),"$$scope"in $&&n(9,f=$.$$scope)},[m,s,o,a,g,w,S,M,r,f,l]}class lD extends Xe{constructor(e){super(),Je(this,e,aD,oD,Ze,{class:0})}}function cD(i){let e,n,t;const r=i[5].default,s=tt(r,i,i[4],null);let o=[{role:"group"},{"aria-roledescription":"slide"},{class:n=Et("min-w-0 shrink-0 grow-0 basis-full",i[1]==="horizontal"?"pl-4":"pt-4",i[0])},{"data-embla-slide":""},i[3]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(l){e=ue(l,"DIV",{role:!0,"aria-roledescription":!0,class:!0,"data-embla-slide":!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&16)&&nt(s,r,l,l[4],t?rt(r,l[4],f,null):it(l[4]),null),ut(e,a=at(o,[{role:"group"},{"aria-roledescription":"slide"},(!t||f&3&&n!==(n=Et("min-w-0 shrink-0 grow-0 basis-full",l[1]==="horizontal"?"pl-4":"pt-4",l[0])))&&{class:n},{"data-embla-slide":""},f&8&&l[3]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function uD(i,e,n){const t=["class"];let r=Fe(e,t),s,{$$slots:o={},$$scope:a}=e,{class:l=void 0}=e;const{orientation:f}=F2("<Carousel.Item/>");return Jt(i,f,m=>n(1,s=m)),i.$$set=m=>{e=Q(Q({},e),bt(m)),n(3,r=Fe(e,t)),"class"in m&&n(0,l=m.class),"$$scope"in m&&n(4,a=m.$$scope)},[l,s,f,r,a,o]}class fD extends Xe{constructor(e){super(),Je(this,e,uD,cD,Ze,{class:0})}}function dD(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function hD(i){let e,n;const t=[{class:Et("text-lg font-semibold leading-none tracking-tight",i[0])},i[1]];let r={$$slots:{default:[dD]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new wI({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("text-lg font-semibold leading-none tracking-tight",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function mD(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}class Dp extends Xe{constructor(e){super(),Je(this,e,mD,hD,Ze,{class:0})}}function pD(i){let e;const n=i[1].default,t=tt(n,i,i[2],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&4)&&nt(t,n,r,r[2],e?rt(n,r[2],s,null):it(r[2]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function _D(i){let e,n;const t=[i[0]];let r={$$slots:{default:[pD]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new zI({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&1?at(t,[dn(s[0])]):{};o&4&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function gD(i,e,n){const t=[];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(0,r=Fe(e,t)),"$$scope"in a&&n(2,o=a.$$scope)},[r,s,o]}class vD extends Xe{constructor(e){super(),Je(this,e,gD,_D,Ze,{})}}function bD(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[2],null);let o=[{class:n=Et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i[0])},i[1]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(l){e=ue(l,"DIV",{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&4)&&nt(s,r,l,l[2],t?rt(r,l[2],f,null):it(l[2]),null),ut(e,a=at(o,[(!t||f&1&&n!==(n=Et("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",l[0])))&&{class:n},f&2&&l[1]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function yD(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class wD extends Xe{constructor(e){super(),Je(this,e,yD,bD,Ze,{class:0})}}function xD(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[2],null);let o=[{class:n=Et("flex flex-col space-y-1.5 text-center sm:text-left",i[0])},i[1]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(l){e=ue(l,"DIV",{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&4)&&nt(s,r,l,l[2],t?rt(r,l[2],f,null):it(l[2]),null),ut(e,a=at(o,[(!t||f&1&&n!==(n=Et("flex flex-col space-y-1.5 text-center sm:text-left",l[0])))&&{class:n},f&2&&l[1]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function kD(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class lf extends Xe{constructor(e){super(),Je(this,e,kD,xD,Ze,{class:0})}}function CD(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{class:Et("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",i[0])},i[3]];let r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new oP({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&15?at(t,[o&2&&{transition:s[1]},o&4&&{transitionConfig:s[2]},o&1&&{class:Et("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",s[0])},o&8&&dn(s[3])]):{};e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function TD(i,e,n){const t=["class","transition","transitionConfig"];let r=Fe(e,t),{class:s=void 0}=e,{transition:o=RC}=e,{transitionConfig:a={duration:150}}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(3,r=Fe(e,t)),"class"in l&&n(0,s=l.class),"transition"in l&&n(1,o=l.transition),"transitionConfig"in l&&n(2,a=l.transitionConfig)},[s,o,a,r]}class SD extends Xe{constructor(e){super(),Je(this,e,TD,CD,Ze,{class:0,transition:1,transitionConfig:2})}}function ED(i){let e,n,t,r="Close",s;return e=new IT({props:{class:"h-4 w-4"}}),{c(){H(e.$$.fragment),n=ke(),t=ce("span"),t.textContent=r,this.h()},l(o){W(e.$$.fragment,o),n=Ce(o),t=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(t)!=="svelte-1pewzs3"&&(t.textContent=r),this.h()},h(){oe(t,"class","sr-only")},m(o,a){G(e,o,a),N(o,n,a),N(o,t,a),s=!0},p:Ct,i(o){s||(E(e.$$.fragment,o),s=!0)},o(o){P(e.$$.fragment,o),s=!1},d(o){o&&(I(n),I(t)),Z(e,o)}}}function ID(i){let e,n,t;const r=i[4].default,s=tt(r,i,i[5],null);return n=new II({props:{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",$$slots:{default:[ED]},$$scope:{ctx:i}}}),{c(){s&&s.c(),e=ke(),H(n.$$.fragment)},l(o){s&&s.l(o),e=Ce(o),W(n.$$.fragment,o)},m(o,a){s&&s.m(o,a),N(o,e,a),G(n,o,a),t=!0},p(o,a){s&&s.p&&(!t||a&32)&&nt(s,r,o,o[5],t?rt(r,o[5],a,null):it(o[5]),null);const l={};a&32&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){t||(E(s,o),E(n.$$.fragment,o),t=!0)},o(o){P(s,o),P(n.$$.fragment,o),t=!1},d(o){o&&I(e),s&&s.d(o),Z(n,o)}}}function PD(i){let e,n,t,r;e=new SD({});const s=[{transition:i[1]},{transitionConfig:i[2]},{class:Et("w-full-dialog-custom fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",i[0])},i[3]];let o={$$slots:{default:[ID]},$$scope:{ctx:i}};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return t=new XI({props:o}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(a){W(e.$$.fragment,a),n=Ce(a),W(t.$$.fragment,a)},m(a,l){G(e,a,l),N(a,n,l),G(t,a,l),r=!0},p(a,l){const f=l&15?at(s,[l&2&&{transition:a[1]},l&4&&{transitionConfig:a[2]},l&1&&{class:Et("w-full-dialog-custom fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",a[0])},l&8&&dn(a[3])]):{};l&32&&(f.$$scope={dirty:l,ctx:a}),t.$set(f)},i(a){r||(E(e.$$.fragment,a),E(t.$$.fragment,a),r=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),r=!1},d(a){a&&I(n),Z(e,a),Z(t,a)}}}function $D(i){let e,n;return e=new vD({props:{$$slots:{default:[PD]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&47&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function AD(i,e,n){const t=["class","transition","transitionConfig"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{transition:l=pl}=e,{transitionConfig:f={duration:200}}=e;return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(3,r=Fe(e,t)),"class"in m&&n(0,a=m.class),"transition"in m&&n(1,l=m.transition),"transitionConfig"in m&&n(2,f=m.transitionConfig),"$$scope"in m&&n(5,o=m.$$scope)},[a,l,f,r,s,o]}class vl extends Xe{constructor(e){super(),Je(this,e,AD,$D,Ze,{class:0,transition:1,transitionConfig:2})}}function MD(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function DD(i){let e,n;const t=[{class:Et("text-sm text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[MD]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new yP({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("text-sm text-muted-foreground",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function OD(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}class cf extends Xe{constructor(e){super(),Je(this,e,OD,DD,Ze,{class:0})}}const bl=mI,U2=hP;function rv(i,e,n){const t=i.slice();return t[19]=e[n],t}function sv(i,e,n){const t=i.slice();return t[22]=e[n],t}function ov(i){let e,n=i[22]+"",t;return{c(){e=ce("li"),t=lt(n)},l(r){e=ue(r,"LI",{});var s=we(e);t=ct(s,n),s.forEach(I)},m(r,s){N(r,e,s),me(e,t)},p:Ct,d(r){r&&I(e)}}}function av(i){let e,n,t=i[19]+"",r,s,o,a="Report",l,f,m;function g(){return i[13](i[19])}return{c(){e=ce("div"),n=ce("div"),r=lt(t),s=ke(),o=ce("button"),o.textContent=a,l=ke(),this.h()},l(w){e=ue(w,"DIV",{class:!0});var S=we(e);n=ue(S,"DIV",{class:!0});var M=we(n);r=ct(M,t),M.forEach(I),s=Ce(S),o=ue(S,"BUTTON",{class:!0,"data-svelte-h":!0}),Rn(o)!=="svelte-1s21ppn"&&(o.textContent=a),l=Ce(S),S.forEach(I),this.h()},h(){oe(n,"class","comment svelte-1i884fn"),oe(o,"class","report-button svelte-1i884fn"),oe(e,"class","comment-wrapper svelte-1i884fn")},m(w,S){N(w,e,S),me(e,n),me(n,r),me(e,s),me(e,o),me(e,l),f||(m=Ke(o,"click",g),f=!0)},p(w,S){i=w,S&2&&t!==(t=i[19]+"")&&cn(r,t)},d(w){w&&I(e),f=!1,m()}}}function zD(i){let e;return{c(){e=lt("Upload Picture")},l(n){e=ct(n,"Upload Picture")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function RD(i){let e,n,t,r,s,o,a,l,f,m,g,w,S,M="Features:",$,D,F,L,U,ne="Comments",se,ee,fe,_e,re,de,he="Add Comment",X,j,xe,ze,ve="Upload a picture of this location!",We,pt,Mt,St,Dt,zt,_t,ft=kn(i[6]),Be=[];for(let qt=0;qt<ft.length;qt+=1)Be[qt]=ov(sv(i,ft,qt));let Ut=kn(i[1]),Rt=[];for(let qt=0;qt<Ut.length;qt+=1)Rt[qt]=av(rv(i,Ut,qt));return St=new qi({props:{variant:"secondary",class:"mt-4",$$slots:{default:[zD]},$$scope:{ctx:i}}}),St.$on("click",i[8]),{c(){e=ce("div"),n=ce("h2"),t=lt(i[4]),r=ke(),s=ce("p"),o=lt("ID: "),a=lt(i[3]),l=ke(),f=ce("p"),m=lt("Description: "),g=lt(i[5]),w=ke(),S=ce("p"),S.textContent=M,$=ke(),D=ce("ul");for(let qt=0;qt<Be.length;qt+=1)Be[qt].c();F=ke(),L=ce("div"),U=ce("h3"),U.textContent=ne,se=ke(),ee=ce("div");for(let qt=0;qt<Rt.length;qt+=1)Rt[qt].c();fe=ke(),_e=ce("textarea"),re=ke(),de=ce("button"),de.textContent=he,X=ke(),j=ce("div"),xe=ce("div"),ze=ce("label"),ze.textContent=ve,We=ke(),pt=ce("input"),Mt=ke(),H(St.$$.fragment),this.h()},l(qt){e=ue(qt,"DIV",{});var et=we(e);n=ue(et,"H2",{class:!0});var dt=we(n);t=ct(dt,i[4]),dt.forEach(I),r=Ce(et),s=ue(et,"P",{});var yt=we(s);o=ct(yt,"ID: "),a=ct(yt,i[3]),yt.forEach(I),l=Ce(et),f=ue(et,"P",{});var Ue=we(f);m=ct(Ue,"Description: "),g=ct(Ue,i[5]),Ue.forEach(I),w=Ce(et),S=ue(et,"P",{"data-svelte-h":!0}),Rn(S)!=="svelte-fn4rp3"&&(S.textContent=M),$=Ce(et),D=ue(et,"UL",{class:!0});var kt=we(D);for(let un=0;un<Be.length;un+=1)Be[un].l(kt);kt.forEach(I),F=Ce(et),L=ue(et,"DIV",{class:!0});var Ge=we(L);U=ue(Ge,"H3",{"data-svelte-h":!0}),Rn(U)!=="svelte-kc6sae"&&(U.textContent=ne),se=Ce(Ge),ee=ue(Ge,"DIV",{class:!0});var Xt=we(ee);for(let un=0;un<Rt.length;un+=1)Rt[un].l(Xt);Xt.forEach(I),fe=Ce(Ge),_e=ue(Ge,"TEXTAREA",{class:!0,placeholder:!0}),we(_e).forEach(I),re=Ce(Ge),de=ue(Ge,"BUTTON",{"data-svelte-h":!0}),Rn(de)!=="svelte-ziv1pu"&&(de.textContent=he),Ge.forEach(I),et.forEach(I),X=Ce(qt),j=ue(qt,"DIV",{class:!0});var En=we(j);xe=ue(En,"DIV",{class:!0});var Oe=we(xe);ze=ue(Oe,"LABEL",{for:!0,"data-svelte-h":!0}),Rn(ze)!=="svelte-14dirxk"&&(ze.textContent=ve),We=Ce(Oe),pt=ue(Oe,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),Oe.forEach(I),Mt=Ce(En),W(St.$$.fragment,En),En.forEach(I),this.h()},h(){oe(n,"class","svelte-1i884fn"),oe(D,"class","svelte-1i884fn"),oe(ee,"class","comments-scroll svelte-1i884fn"),oe(_e,"class","comment-input"),oe(_e,"placeholder","Type your comment here..."),oe(L,"class","comment-container svelte-1i884fn"),oe(ze,"for","poi-picture"),oe(pt,"id","poi-picture"),oe(pt,"type","file"),oe(pt,"accept","image/png, image/jpg, image/jpeg"),oe(pt,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),oe(xe,"class","mb-4"),oe(j,"class","mb-4 text-white rounded shadow-md mt-6 w-full md:w-3/4 lg:w-1/2")},m(qt,et){N(qt,e,et),me(e,n),me(n,t),me(e,r),me(e,s),me(s,o),me(s,a),me(e,l),me(e,f),me(f,m),me(f,g),me(e,w),me(e,S),me(e,$),me(e,D);for(let dt=0;dt<Be.length;dt+=1)Be[dt]&&Be[dt].m(D,null);me(e,F),me(e,L),me(L,U),me(L,se),me(L,ee);for(let dt=0;dt<Rt.length;dt+=1)Rt[dt]&&Rt[dt].m(ee,null);me(L,fe),me(L,_e),bo(_e,i[2]),me(L,re),me(L,de),N(qt,X,et),N(qt,j,et),me(j,xe),me(xe,ze),me(xe,We),me(xe,pt),me(j,Mt),G(St,j,null),Dt=!0,zt||(_t=[Ke(_e,"input",i[14]),Ke(de,"click",i[7]),Ke(pt,"change",i[9])],zt=!0)},p(qt,et){if(et&64){ft=kn(qt[6]);let yt;for(yt=0;yt<ft.length;yt+=1){const Ue=sv(qt,ft,yt);Be[yt]?Be[yt].p(Ue,et):(Be[yt]=ov(Ue),Be[yt].c(),Be[yt].m(D,null))}for(;yt<Be.length;yt+=1)Be[yt].d(1);Be.length=ft.length}if(et&2){Ut=kn(qt[1]);let yt;for(yt=0;yt<Ut.length;yt+=1){const Ue=rv(qt,Ut,yt);Rt[yt]?Rt[yt].p(Ue,et):(Rt[yt]=av(Ue),Rt[yt].c(),Rt[yt].m(ee,null))}for(;yt<Rt.length;yt+=1)Rt[yt].d(1);Rt.length=Ut.length}et&4&&bo(_e,qt[2]);const dt={};et&33554432&&(dt.$$scope={dirty:et,ctx:qt}),St.$set(dt)},i(qt){Dt||(E(St.$$.fragment,qt),Dt=!0)},o(qt){P(St.$$.fragment,qt),Dt=!1},d(qt){qt&&(I(e),I(X),I(j)),fs(Be,qt),fs(Rt,qt),Z(St),zt=!1,Wn(_t)}}}function LD(i){let e,n;return e=new vl({props:{$$slots:{default:[RD]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&33554438&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function FD(i){let e,n;return e=new bl({props:{open:!0,onOpenChange:i[15],$$slots:{default:[LD]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&1&&(s.onOpenChange=t[15]),r&33554438&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function BD(i){throw new Error("Function not implemented.")}function ND(i,e,n){let{poi:t}=e;const{id:r,name:s,description:o,features:a}=t;let{comments:l}=t,{userNickname:f}=e,{onClose:m}=e,{refreshPOIs:g}=e,w="",S;function M(){console.log("NIckname is "+f),w.trim()!==""&&(n(1,l=[...l,{text:w.trim(),nickname:f}]),n(2,w=""))}async function $(){if(S){const ee=new FormData;ee.append("picture",S),ee.append("poi_id",String(t.id));try{(await fetch("/api/poi/poi-image/upload",{method:"POST",body:ee})).ok&&(L(t.id),Km.success("Successfully added picture for POI!"),Fy.checkForUpdates(),m())}catch(fe){console.error("Error uploading file:",fe)}}}const D=["image/png","image/jpg","image/jpeg"];function F(ee){const fe=ee.target;fe&&fe.files&&fe.files.length>0&&D.includes(fe.files[0].type)?S=fe.files[0]:S=void 0}const L=async ee=>{const fe=new URLSearchParams({id:ee.toString()}),_e=await fetch(`/api/poi/get-by-id?${fe.toString()}`);if(_e.ok){const re=await _e.json(),de=ol.decode(re);if(th.isRight(de)){const he=de.right;n(10,t.pictures=he.pictures,t),g()}else console.error("Invalid POI object received from API: ",de.left)}},U=ee=>BD(ee.text);function ne(){w=this.value,n(2,w)}const se=ee=>ee||m();return i.$$set=ee=>{"poi"in ee&&n(10,t=ee.poi),"userNickname"in ee&&n(11,f=ee.userNickname),"onClose"in ee&&n(0,m=ee.onClose),"refreshPOIs"in ee&&n(12,g=ee.refreshPOIs)},[m,l,w,r,s,o,a,M,$,F,t,f,g,U,ne,se]}class VD extends Xe{constructor(e){super(),Je(this,e,ND,FD,Ze,{poi:10,userNickname:11,onClose:0,refreshPOIs:12})}}function jD(i){let e;const n=i[6].default,t=tt(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&nt(t,n,r,r[7],e?rt(n,r[7],s,null):it(r[7]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function UD(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{align:i[3]},{sideOffset:i[4]},{class:Et("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none mt-3",i[0])},i[5]];let r={$$slots:{default:[jD]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new v$({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&63?at(t,[o&2&&{transition:s[1]},o&4&&{transitionConfig:s[2]},o&8&&{align:s[3]},o&16&&{sideOffset:s[4]},o&1&&{class:Et("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none mt-3",s[0])},o&32&&dn(s[5])]):{};o&128&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function qD(i,e,n){const t=["class","transition","transitionConfig","align","sideOffset"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{transition:l=pl}=e,{transitionConfig:f=void 0}=e,{align:m="center"}=e,{sideOffset:g=4}=e;return i.$$set=w=>{e=Q(Q({},e),bt(w)),n(5,r=Fe(e,t)),"class"in w&&n(0,a=w.class),"transition"in w&&n(1,l=w.transition),"transitionConfig"in w&&n(2,f=w.transitionConfig),"align"in w&&n(3,m=w.align),"sideOffset"in w&&n(4,g=w.sideOffset),"$$scope"in w&&n(7,o=w.$$scope)},[a,l,f,m,g,r,s,o]}class Ta extends Xe{constructor(e){super(),Je(this,e,qD,UD,Ze,{class:0,transition:1,transitionConfig:2,align:3,sideOffset:4})}}const va=i$,Sa=S$;function HD(i){let e;const n=i[5].default,t=tt(n,i,i[8],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&256)&&nt(t,n,r,r[8],e?rt(n,r[8],s,null):it(r[8]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function GD(i){let e,n,t;const r=[{class:Et(lv({variant:i[2],size:i[3],className:i[1]}))},i[4]];function s(a){i[6](a)}let o={$$slots:{default:[HD]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)o=Q(o,r[a]);return i[0]!==void 0&&(o.pressed=i[0]),e=new t6({props:o}),Nt.push(()=>Zn(e,"pressed",s)),e.$on("click",i[7]),{c(){H(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,l){G(e,a,l),t=!0},p(a,[l]){const f=l&30?at(r,[l&14&&{class:Et(lv({variant:a[2],size:a[3],className:a[1]}))},l&16&&dn(a[4])]):{};l&256&&(f.$$scope={dirty:l,ctx:a}),!n&&l&1&&(n=!0,f.pressed=a[0],Gn(()=>n=!1)),e.$set(f)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){Z(e,a)}}}function ZD(i,e,n){const t=["class","variant","size","pressed"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{variant:l="default"}=e,{size:f="default"}=e,{pressed:m=void 0}=e;function g(S){m=S,n(0,m)}function w(S){At.call(this,i,S)}return i.$$set=S=>{e=Q(Q({},e),bt(S)),n(4,r=Fe(e,t)),"class"in S&&n(1,a=S.class),"variant"in S&&n(2,l=S.variant),"size"in S&&n(3,f=S.size),"pressed"in S&&n(0,m=S.pressed),"$$scope"in S&&n(8,o=S.$$scope)},[m,a,l,f,r,s,g,w,o]}class Op extends Xe{constructor(e){super(),Je(this,e,ZD,GD,Ze,{class:1,variant:2,size:3,pressed:0})}}const lv=up({base:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background hover:bg-muted hover:text-muted-foreground",variants:{variant:{default:"bg-transparent",outline:"bg-transparent border border-input hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});function WD(i){let e;const n=i[2].default,t=tt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&nt(t,n,r,r[4],e?rt(n,r[4],s,null):it(r[4]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function KD(i){let e,n;const t=[{class:Et("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",i[0])},i[1]];let r={$$slots:{default:[WD]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new JP({props:r}),e.$on("mousedown",i[3]),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s[0])},o&2&&dn(s[1])]):{};o&16&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function XD(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;function l(f){At.call(this,i,f)}return i.$$set=f=>{e=Q(Q({},e),bt(f)),n(1,r=Fe(e,t)),"class"in f&&n(0,a=f.class),"$$scope"in f&&n(4,o=f.$$scope)},[a,r,s,l,o]}class rl extends Xe{constructor(e){super(),Je(this,e,XD,KD,Ze,{class:0})}}function JD(i){let e,n;const t=i[4].default,r=tt(t,i,i[5],null);return{c(){e=ce("div"),r&&r.c(),this.h()},l(s){e=ue(s,"DIV",{class:!0});var o=we(e);r&&r.l(o),o.forEach(I),this.h()},h(){oe(e,"class","pb-4 pt-0")},m(s,o){N(s,e,o),r&&r.m(e,null),n=!0},p(s,o){r&&r.p&&(!n||o&32)&&nt(r,t,s,s[5],n?rt(t,s[5],o,null):it(s[5]),null)},i(s){n||(E(r,s),n=!0)},o(s){P(r,s),n=!1},d(s){s&&I(e),r&&r.d(s)}}}function YD(i){let e,n;const t=[{class:Et("overflow-hidden text-sm transition-all",i[0])},{transition:i[1]},{transitionConfig:i[2]},i[3]];let r={$$slots:{default:[JD]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new FE({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&15?at(t,[o&1&&{class:Et("overflow-hidden text-sm transition-all",s[0])},o&2&&{transition:s[1]},o&4&&{transitionConfig:s[2]},o&8&&dn(s[3])]):{};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function QD(i,e,n){const t=["class","transition","transitionConfig"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{transition:l=LC}=e,{transitionConfig:f={duration:200}}=e;return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(3,r=Fe(e,t)),"class"in m&&n(0,a=m.class),"transition"in m&&n(1,l=m.transition),"transitionConfig"in m&&n(2,f=m.transitionConfig),"$$scope"in m&&n(5,o=m.$$scope)},[a,l,f,r,s,o]}class q2 extends Xe{constructor(e){super(),Je(this,e,QD,YD,Ze,{class:0,transition:1,transitionConfig:2})}}function eO(i){let e;const n=i[3].default,t=tt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&nt(t,n,r,r[4],e?rt(n,r[4],s,null):it(r[4]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function tO(i){let e,n;const t=[{value:i[1]},{class:Et("border-b",i[0])},i[2]];let r={$$slots:{default:[eO]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new cE({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&7?at(t,[o&2&&{value:s[1]},o&1&&{class:Et("border-b",s[0])},o&4&&dn(s[2])]):{};o&16&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function nO(i,e,n){const t=["class","value"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{value:l}=e;return i.$$set=f=>{e=Q(Q({},e),bt(f)),n(2,r=Fe(e,t)),"class"in f&&n(0,a=f.class),"value"in f&&n(1,l=f.value),"$$scope"in f&&n(4,o=f.$$scope)},[a,l,r,s,o]}class H2 extends Xe{constructor(e){super(),Je(this,e,nO,tO,Ze,{class:0,value:1})}}function iO(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[5],null);return n=new WC({props:{class:"h-4 w-4 transition-transform duration-200"}}),{c(){s&&s.c(),e=ke(),H(n.$$.fragment)},l(o){s&&s.l(o),e=Ce(o),W(n.$$.fragment,o)},m(o,a){s&&s.m(o,a),N(o,e,a),G(n,o,a),t=!0},p(o,a){s&&s.p&&(!t||a&32)&&nt(s,r,o,o[5],t?rt(r,o[5],a,null):it(o[5]),null)},i(o){t||(E(s,o),E(n.$$.fragment,o),t=!0)},o(o){P(s,o),P(n.$$.fragment,o),t=!1},d(o){o&&I(e),s&&s.d(o),Z(n,o)}}}function rO(i){let e,n;const t=[{class:Et("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",i[0])},i[2]];let r={$$slots:{default:[iO]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new kE({props:r}),e.$on("click",i[4]),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,o){const a=o&5?at(t,[o&1&&{class:Et("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s[0])},o&4&&dn(s[2])]):{};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function sO(i){let e,n;return e=new _E({props:{level:i[1],class:"flex",$$slots:{default:[rO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&2&&(s.level=t[1]),r&37&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function oO(i,e,n){const t=["class","level"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{level:l=3}=e;function f(m){At.call(this,i,m)}return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(2,r=Fe(e,t)),"class"in m&&n(0,a=m.class),"level"in m&&n(1,l=m.level),"$$scope"in m&&n(5,o=m.$$scope)},[a,l,r,s,f,o]}class G2 extends Xe{constructor(e){super(),Je(this,e,oO,sO,Ze,{class:0,level:1})}}const Z2=nE;function cv(i,e,n){const t=i.slice();return t[25]=e[n],t[27]=n,t}function uv(i,e,n){const t=i.slice();return t[28]=e[n],t}function fv(i,e,n){const t=i.slice();return t[31]=e[n],t[27]=n,t}function aO(i){let e,n=i[0].isFavourite?"Remove From Favourites":"Add To Favourites",t,r,s;return r=new Sc({props:{class:"max-sm:w-4 max-sm:h-4"}}),{c(){e=ce("div"),t=lt(n),H(r.$$.fragment),this.h()},l(o){e=ue(o,"DIV",{class:!0});var a=we(e);t=ct(a,n),W(r.$$.fragment,a),a.forEach(I),this.h()},h(){oe(e,"class","flex gap-2 items-center max-sm:text-xs")},m(o,a){N(o,e,a),me(e,t),G(r,e,null),s=!0},p(o,a){(!s||a[0]&1)&&n!==(n=o[0].isFavourite?"Remove From Favourites":"Add To Favourites")&&cn(t,n)},i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&I(e),Z(r)}}}function lO(i){let e,n;return e=new Op({props:{class:"max-sm:p-2 max-sm:h-auto text-secondary-foreground hover:text-accent-foreground data-[state=off]:hover:bg-accent data-[state=off]:bg-background data-[state=on]:bg-primary data-[state=on]:hover:brightness-90 data-[state=on]:text-error-content",pressed:i[0].isFavourite,onPressedChange:i[9],$$slots:{default:[aO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1&&(s.pressed=t[0].isFavourite),r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function cO(i){let e,n="Add/Remove Favourite";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-17t27y0"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-xs flex items-center")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function uO(i){let e,n,t,r;return e=new Sa({props:{$$slots:{default:[lO]},$$scope:{ctx:i}}}),t=new Ta({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[cO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o[0]&1|o[1]&4&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o[1]&4&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function fO(i){let e,n,t=i[0].name+"",r,s,o,a,l;function f(g){i[11](g)}let m={openDelay:0,closeDelay:0,onOutsideClick:i[10],$$slots:{default:[uO]},$$scope:{ctx:i}};return i[7][0]!==void 0&&(m.open=i[7][0]),o=new va({props:m}),Nt.push(()=>Zn(o,"open",f)),{c(){e=ce("div"),n=ce("p"),r=lt(t),s=ke(),H(o.$$.fragment),this.h()},l(g){e=ue(g,"DIV",{class:!0});var w=we(e);n=ue(w,"P",{class:!0});var S=we(n);r=ct(S,t),S.forEach(I),s=Ce(w),W(o.$$.fragment,w),w.forEach(I),this.h()},h(){oe(n,"class","max-sm:text-sm"),oe(e,"class","flex justify-between items-center gap-2")},m(g,w){N(g,e,w),me(e,n),me(n,r),me(e,s),G(o,e,null),l=!0},p(g,w){(!l||w[0]&1)&&t!==(t=g[0].name+"")&&cn(r,t);const S={};w[0]&1|w[1]&4&&(S.$$scope={dirty:w,ctx:g}),!a&&w[0]&128&&(a=!0,S.open=g[7][0],Gn(()=>a=!1)),o.$set(S)},i(g){l||(E(o.$$.fragment,g),l=!0)},o(g){P(o.$$.fragment,g),l=!1},d(g){g&&I(e),Z(o)}}}function dO(i){let e,n;return e=new Co({props:{$$slots:{default:[fO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&129|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function hO(i){let e,n;return e=new Z2({props:{$$slots:{default:[IO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&97|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function mO(i){let e,n;return e=new or({props:{class:"mb-2",$$slots:{default:[$O]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function pO(i){let e;return{c(){e=lt("All Pictures")},l(n){e=ct(n,"All Pictures")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function _O(i){let e,n,t="Pictures:",r,s,o;return s=new qi({props:{size:"sm",$$slots:{default:[pO]},$$scope:{ctx:i}}}),s.$on("click",i[12]),{c(){e=ce("div"),n=ce("p"),n.textContent=t,r=ke(),H(s.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);n=ue(l,"P",{"data-svelte-h":!0}),Rn(n)!=="svelte-gkyk2r"&&(n.textContent=t),r=Ce(l),W(s.$$.fragment,l),l.forEach(I),this.h()},h(){oe(e,"class","flex justify-between items-center grow mr-4")},m(a,l){N(a,e,l),me(e,n),me(e,r),G(s,e,null),o=!0},p(a,l){const f={};l[1]&4&&(f.$$scope={dirty:l,ctx:a}),s.$set(f)},i(a){o||(E(s.$$.fragment,a),o=!0)},o(a){P(s.$$.fragment,a),o=!1},d(a){a&&I(e),Z(s)}}}function gO(i){let e,n,t;return{c(){e=ce("img"),this.h()},l(r){e=ue(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Li(e.src,n=i[0].pictures[i[27]*3])||oe(e,"src",n),oe(e,"alt",t="Picture "+(i[27]*3+1)),oe(e,"class","object-contain rounded-xl h-full")},m(r,s){N(r,e,s)},p(r,s){s[0]&1&&!Li(e.src,n=r[0].pictures[r[27]*3])&&oe(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+1))&&oe(e,"alt",t)},d(r){r&&I(e)}}}function vO(i){let e,n;return e=new ts({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[gO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function dv(i){let e,n,t,r,s;n=new or({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[yO]},$$scope:{ctx:i}}});function o(){return i[14](i[27])}return{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);W(n.$$.fragment,l),l.forEach(I),this.h()},h(){oe(e,"class","basis-1/3 relative h-full")},m(a,l){N(a,e,l),G(n,e,null),t=!0,r||(s=Ke(e,"click",o),r=!0)},p(a,l){i=a;const f={};l[0]&1|l[1]&4&&(f.$$scope={dirty:l,ctx:i}),n.$set(f)},i(a){t||(E(n.$$.fragment,a),t=!0)},o(a){P(n.$$.fragment,a),t=!1},d(a){a&&I(e),Z(n),r=!1,s()}}}function bO(i){let e,n,t;return{c(){e=ce("img"),this.h()},l(r){e=ue(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Li(e.src,n=i[0].pictures[i[27]*3+1])||oe(e,"src",n),oe(e,"alt",t="Picture "+(i[27]*3+2)),oe(e,"class","object-contain rounded-xl h-full")},m(r,s){N(r,e,s)},p(r,s){s[0]&1&&!Li(e.src,n=r[0].pictures[r[27]*3+1])&&oe(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+2))&&oe(e,"alt",t)},d(r){r&&I(e)}}}function yO(i){let e,n;return e=new ts({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[bO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function hv(i){let e,n,t,r,s;n=new or({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[xO]},$$scope:{ctx:i}}});function o(){return i[15](i[27])}return{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);W(n.$$.fragment,l),l.forEach(I),this.h()},h(){oe(e,"class","basis-1/3 relative h-full")},m(a,l){N(a,e,l),G(n,e,null),t=!0,r||(s=Ke(e,"click",o),r=!0)},p(a,l){i=a;const f={};l[0]&1|l[1]&4&&(f.$$scope={dirty:l,ctx:i}),n.$set(f)},i(a){t||(E(n.$$.fragment,a),t=!0)},o(a){P(n.$$.fragment,a),t=!1},d(a){a&&I(e),Z(n),r=!1,s()}}}function wO(i){let e,n,t;return{c(){e=ce("img"),this.h()},l(r){e=ue(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Li(e.src,n=i[0].pictures[i[27]*3+2])||oe(e,"src",n),oe(e,"alt",t="Picture "+(i[27]*3+3)),oe(e,"class","object-contain rounded-xl h-full")},m(r,s){N(r,e,s)},p(r,s){s[0]&1&&!Li(e.src,n=r[0].pictures[r[27]*3+2])&&oe(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+3))&&oe(e,"alt",t)},d(r){r&&I(e)}}}function xO(i){let e,n;return e=new ts({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[wO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function kO(i){let e,n,t,r,s,o,a,l,f;t=new or({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[vO]},$$scope:{ctx:i}}});function m(){return i[13](i[27])}let g=i[0].pictures[i[27]*3+1]!==void 0&&dv(i),w=i[0].pictures[i[27]*3+2]!==void 0&&hv(i);return{c(){e=ce("div"),n=ce("div"),H(t.$$.fragment),r=ke(),g&&g.c(),s=ke(),w&&w.c(),o=ke(),this.h()},l(S){e=ue(S,"DIV",{class:!0});var M=we(e);n=ue(M,"DIV",{class:!0});var $=we(n);W(t.$$.fragment,$),$.forEach(I),r=Ce(M),g&&g.l(M),s=Ce(M),w&&w.l(M),M.forEach(I),o=Ce(S),this.h()},h(){oe(n,"class","basis-1/3 relative h-full"),oe(e,"class","flex relative gap-4 h-24")},m(S,M){N(S,e,M),me(e,n),G(t,n,null),me(e,r),g&&g.m(e,null),me(e,s),w&&w.m(e,null),N(S,o,M),a=!0,l||(f=Ke(n,"click",m),l=!0)},p(S,M){i=S;const $={};M[0]&1|M[1]&4&&($.$$scope={dirty:M,ctx:i}),t.$set($),i[0].pictures[i[27]*3+1]!==void 0?g?(g.p(i,M),M[0]&1&&E(g,1)):(g=dv(i),g.c(),E(g,1),g.m(e,s)):g&&(It(),P(g,1,1,()=>{g=null}),Pt()),i[0].pictures[i[27]*3+2]!==void 0?w?(w.p(i,M),M[0]&1&&E(w,1)):(w=hv(i),w.c(),E(w,1),w.m(e,null)):w&&(It(),P(w,1,1,()=>{w=null}),Pt())},i(S){a||(E(t.$$.fragment,S),E(g),E(w),a=!0)},o(S){P(t.$$.fragment,S),P(g),P(w),a=!1},d(S){S&&(I(e),I(o)),Z(t),g&&g.d(),w&&w.d(),l=!1,f()}}}function mv(i,e){let n,t,r;return t=new fD({props:{$$slots:{default:[kO]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o[0]&65|o[1]&4&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function CO(i){let e=[],n=new Map,t,r,s=kn(Array(Math.ceil(i[0].pictures.length/3)));const o=a=>a[27];for(let a=0;a<s.length;a+=1){let l=fv(i,s,a),f=o(l);n.set(f,e[a]=mv(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l[0]&65&&(s=kn(Array(Math.ceil(a[0].pictures.length/3))),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,mv,t,fv),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function TO(i){let e,n;return e=new lD({props:{$$slots:{default:[CO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function SO(i){let e,n;return e=new S8({props:{class:"w-full",$$slots:{default:[TO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function EO(i){let e,n,t,r;return e=new G2({props:{class:"hover:no-underline transition-colors hover:bg-secondary/70 rounded-md px-3 py-2",$$slots:{default:[_O]},$$scope:{ctx:i}}}),t=new q2({props:{class:"p-0 *:p-0 mt-2",$$slots:{default:[SO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o[0]&32|o[1]&4&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o[0]&65|o[1]&4&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function IO(i){let e,n;return e=new H2({props:{value:"poi-pictures",class:"border-b-0",$$slots:{default:[EO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&97|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function PO(i){let e,n="No Pictures available for this Point of Interest";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-1ofvg4f"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-center")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function $O(i){let e,n;return e=new ts({props:{class:"p-2",$$slots:{default:[PO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function AO(i){let e;return{c(){e=lt("Description:")},l(n){e=ct(n,"Description:")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function MO(i){let e,n=(i[0].description||"No description…")+"",t;return{c(){e=ce("p"),t=lt(n),this.h()},l(r){e=ue(r,"P",{id:!0,class:!0});var s=we(e);t=ct(s,n),s.forEach(I),this.h()},h(){oe(e,"id","description"),oe(e,"class","text-muted-foreground")},m(r,s){N(r,e,s),me(e,t)},p(r,s){s[0]&1&&n!==(n=(r[0].description||"No description…")+"")&&cn(t,n)},d(r){r&&I(e)}}}function DO(i){let e,n;return e=new ts({props:{class:"px-3 py-2 max-h-16 overflow-y-auto",$$slots:{default:[MO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function OO(i){let e;return{c(){e=lt("Features:")},l(n){e=ct(n,"Features:")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function zO(i){let e,n=kn(i[0].features),t=[];for(let r=0;r<n.length;r+=1)t[r]=pv(uv(i,n,r));return{c(){e=ce("ul");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=ue(r,"UL",{id:!0,class:!0});var s=we(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(I),this.h()},h(){oe(e,"id","features"),oe(e,"class","list-disc ml-2")},m(r,s){N(r,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(r,s){if(s[0]&1){n=kn(r[0].features);let o;for(o=0;o<n.length;o+=1){const a=uv(r,n,o);t[o]?t[o].p(a,s):(t[o]=pv(a),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},d(r){r&&I(e),fs(t,r)}}}function RO(i){let e,n="No features…";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{id:!0,class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-12d3m3b"&&(e.textContent=n),this.h()},h(){oe(e,"id","features"),oe(e,"class","text-muted-foreground")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function pv(i){let e,n=i[28]+"",t;return{c(){e=ce("li"),t=lt(n),this.h()},l(r){e=ue(r,"LI",{class:!0});var s=we(e);t=ct(s,n),s.forEach(I),this.h()},h(){oe(e,"class","text-muted-foreground")},m(r,s){N(r,e,s),me(e,t)},p(r,s){s[0]&1&&n!==(n=r[28]+"")&&cn(t,n)},d(r){r&&I(e)}}}function LO(i){let e;function n(s,o){return s[0].features.length===0?RO:zO}let t=n(i),r=t(i);return{c(){r.c(),e=Le()},l(s){r.l(s),e=Le()},m(s,o){r.m(s,o),N(s,e,o)},p(s,o){t===(t=n(s))&&r?r.p(s,o):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&I(e),r.d(s)}}}function FO(i){let e,n;return e=new ts({props:{class:"px-3 py-2 max-h-16 overflow-y-auto",$$slots:{default:[LO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function BO(i){let e,n,t,r,s,o,a,l,f,m,g;const w=[mO,hO],S=[];function M($,D){return $[0].pictures.length===0?0:1}return e=M(i),n=S[e]=w[e](i),r=new rl({props:{for:"description",$$slots:{default:[AO]},$$scope:{ctx:i}}}),o=new or({props:{class:"p-0",$$slots:{default:[DO]},$$scope:{ctx:i}}}),l=new rl({props:{for:"features",$$slots:{default:[OO]},$$scope:{ctx:i}}}),m=new or({props:{class:"p-0",$$slots:{default:[FO]},$$scope:{ctx:i}}}),{c(){n.c(),t=ke(),H(r.$$.fragment),s=ke(),H(o.$$.fragment),a=ke(),H(l.$$.fragment),f=ke(),H(m.$$.fragment)},l($){n.l($),t=Ce($),W(r.$$.fragment,$),s=Ce($),W(o.$$.fragment,$),a=Ce($),W(l.$$.fragment,$),f=Ce($),W(m.$$.fragment,$)},m($,D){S[e].m($,D),N($,t,D),G(r,$,D),N($,s,D),G(o,$,D),N($,a,D),G(l,$,D),N($,f,D),G(m,$,D),g=!0},p($,D){let F=e;e=M($),e===F?S[e].p($,D):(It(),P(S[F],1,1,()=>{S[F]=null}),Pt(),n=S[e],n?n.p($,D):(n=S[e]=w[e]($),n.c()),E(n,1),n.m(t.parentNode,t));const L={};D[1]&4&&(L.$$scope={dirty:D,ctx:$}),r.$set(L);const U={};D[0]&1|D[1]&4&&(U.$$scope={dirty:D,ctx:$}),o.$set(U);const ne={};D[1]&4&&(ne.$$scope={dirty:D,ctx:$}),l.$set(ne);const se={};D[0]&1|D[1]&4&&(se.$$scope={dirty:D,ctx:$}),m.$set(se)},i($){g||(E(n),E(r.$$.fragment,$),E(o.$$.fragment,$),E(l.$$.fragment,$),E(m.$$.fragment,$),g=!0)},o($){P(n),P(r.$$.fragment,$),P(o.$$.fragment,$),P(l.$$.fragment,$),P(m.$$.fragment,$),g=!1},d($){$&&(I(t),I(s),I(a),I(f)),S[e].d($),Z(r,$),Z(o,$),Z(l,$),Z(m,$)}}}function NO(i){let e;return{c(){e=lt("Navigate")},l(n){e=ct(n,"Navigate")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function VO(i){let e;return{c(){e=lt("View Details")},l(n){e=ct(n,"View Details")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function jO(i){let e;return{c(){e=lt("Close")},l(n){e=ct(n,"Close")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function UO(i){let e,n,t,r,s,o;return e=new qi({props:{size:"sm",class:"basis-1/3",href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(i[0].lngLat.lat)},${encodeURIComponent(i[0].lngLat.lng)}`,target:"_blank",$$slots:{default:[NO]},$$scope:{ctx:i}}}),t=new qi({props:{variant:"secondary",size:"sm",class:"basis-1/3",$$slots:{default:[VO]},$$scope:{ctx:i}}}),t.$on("click",i[16]),s=new qi({props:{variant:"secondary",size:"sm",class:"basis-1/3",$$slots:{default:[jO]},$$scope:{ctx:i}}}),s.$on("click",function(){lp(i[2])&&i[2].apply(this,arguments)}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),H(s.$$.fragment)},l(a){W(e.$$.fragment,a),n=Ce(a),W(t.$$.fragment,a),r=Ce(a),W(s.$$.fragment,a)},m(a,l){G(e,a,l),N(a,n,l),G(t,a,l),N(a,r,l),G(s,a,l),o=!0},p(a,l){i=a;const f={};l[0]&1&&(f.href=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(i[0].lngLat.lat)},${encodeURIComponent(i[0].lngLat.lng)}`),l[1]&4&&(f.$$scope={dirty:l,ctx:i}),e.$set(f);const m={};l[1]&4&&(m.$$scope={dirty:l,ctx:i}),t.$set(m);const g={};l[1]&4&&(g.$$scope={dirty:l,ctx:i}),s.$set(g)},i(a){o||(E(e.$$.fragment,a),E(t.$$.fragment,a),E(s.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),P(s.$$.fragment,a),o=!1},d(a){a&&(I(n),I(r)),Z(e,a),Z(t,a),Z(s,a)}}}function qO(i){let e,n,t,r,s,o;return e=new ws({props:{class:"p-3",$$slots:{default:[dO]},$$scope:{ctx:i}}}),t=new ts({props:{class:"grow p-3 pt-0 flex flex-col overflow-y-auto gap-2",$$slots:{default:[BO]},$$scope:{ctx:i}}}),s=new v8({props:{class:"flex justify-between p-3 grow-0 gap-2",$$slots:{default:[UO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),H(s.$$.fragment)},l(a){W(e.$$.fragment,a),n=Ce(a),W(t.$$.fragment,a),r=Ce(a),W(s.$$.fragment,a)},m(a,l){G(e,a,l),N(a,n,l),G(t,a,l),N(a,r,l),G(s,a,l),o=!0},p(a,l){const f={};l[0]&129|l[1]&4&&(f.$$scope={dirty:l,ctx:a}),e.$set(f);const m={};l[0]&97|l[1]&4&&(m.$$scope={dirty:l,ctx:a}),t.$set(m);const g={};l[0]&21|l[1]&4&&(g.$$scope={dirty:l,ctx:a}),s.$set(g)},i(a){o||(E(e.$$.fragment,a),E(t.$$.fragment,a),E(s.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),P(s.$$.fragment,a),o=!1},d(a){a&&(I(n),I(r)),Z(e,a),Z(t,a),Z(s,a)}}}function _v(i){let e,n,t;function r(o){i[18](o)}let s={refreshPOIs:i[3],onClose:i[17],userNickname:i[1]};return i[0]!==void 0&&(s.poi=i[0]),e=new VD({props:s}),Nt.push(()=>Zn(e,"poi",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,a){const l={};a[0]&8&&(l.refreshPOIs=o[3]),a[0]&16&&(l.onClose=o[17]),a[0]&2&&(l.userNickname=o[1]),!n&&a[0]&1&&(n=!0,l.poi=o[0],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function gv(i){let e,n;return e=new bl({props:{open:!0,onOpenChange:i[20],$$slots:{default:[QO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&32&&(s.onOpenChange=t[20]),r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function HO(i){let e;return{c(){e=lt("All Pictures")},l(n){e=ct(n,"All Pictures")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function GO(i){let e,n,t;return{c(){e=ce("img"),this.h()},l(r){e=ue(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Li(e.src,n=i[25])||oe(e,"src",n),oe(e,"alt",t="Picture "+(i[27]*3+1)),oe(e,"class","object-contain rounded-xl h-full")},m(r,s){N(r,e,s)},p(r,s){s[0]&1&&!Li(e.src,n=r[25])&&oe(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+1))&&oe(e,"alt",t)},d(r){r&&I(e)}}}function ZO(i){let e,n;return e=new ts({props:{class:"p-2 flex justify-center items-center relative h-24",$$slots:{default:[GO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function WO(i){let e,n;return e=new Ca({props:{$$slots:{default:[ZO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function KO(i){let e,n,t,r,s,o;n=new ws({props:{class:"p-2 transition-colors hover:bg-secondary/70 rounded-lg cursor-pointer",$$slots:{default:[WO]},$$scope:{ctx:i}}});function a(){return i[19](i[27])}return{c(){e=ce("div"),H(n.$$.fragment),t=ke()},l(l){e=ue(l,"DIV",{});var f=we(e);W(n.$$.fragment,f),f.forEach(I),t=Ce(l)},m(l,f){N(l,e,f),G(n,e,null),N(l,t,f),r=!0,s||(o=Ke(e,"click",a),s=!0)},p(l,f){i=l;const m={};f[0]&1|f[1]&4&&(m.$$scope={dirty:f,ctx:i}),n.$set(m)},i(l){r||(E(n.$$.fragment,l),r=!0)},o(l){P(n.$$.fragment,l),r=!1},d(l){l&&(I(e),I(t)),Z(n),s=!1,o()}}}function vv(i,e){let n,t,r;return t=new or({props:{$$slots:{default:[KO]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o[0]&65|o[1]&4&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function XO(i){let e,n=[],t=new Map,r,s=kn(i[0].pictures);const o=a=>a[25];for(let a=0;a<s.length;a+=1){let l=cv(i,s,a),f=o(l);t.set(f,n[a]=vv(f,l))}return{c(){e=ce("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);for(let f=0;f<n.length;f+=1)n[f].l(l);l.forEach(I),this.h()},h(){oe(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(a,l){N(a,e,l);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);r=!0},p(a,l){l[0]&65&&(s=kn(a[0].pictures),It(),n=Sr(n,l,o,1,a,s,t,e,Mr,vv,null,cv),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(n[l]);r=!0}},o(a){for(let l=0;l<n.length;l+=1)P(n[l]);r=!1},d(a){a&&I(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function JO(i){let e,n,t,r;return e=new Dp({props:{class:"mb-4",$$slots:{default:[HO]},$$scope:{ctx:i}}}),t=new cf({props:{$$slots:{default:[XO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o[1]&4&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o[0]&65|o[1]&4&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function YO(i){let e,n;return e=new lf({props:{$$slots:{default:[JO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function QO(i){let e,n;return e=new vl({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[YO]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function bv(i){let e,n;return e=new bl({props:{open:!0,onOpenChange:i[21],$$slots:{default:[az]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&64&&(s.onOpenChange=t[21]),r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function ez(i){let e,n;return{c(){e=ce("img"),this.h()},l(t){e=ue(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Li(e.src,n=i[0].pictures[i[6]])||oe(e,"src",n),oe(e,"alt","Fullscreen POI picture"),oe(e,"class","object-contain rounded-xl h-full")},m(t,r){N(t,e,r)},p(t,r){r[0]&65&&!Li(e.src,n=t[0].pictures[t[6]])&&oe(e,"src",n)},d(t){t&&I(e)}}}function tz(i){let e,n;return e=new ts({props:{class:"p-2 flex justify-center items-center grow relative",$$slots:{default:[ez]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function nz(i){let e,n;return e=new Ca({props:{class:"flex grow",$$slots:{default:[tz]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function iz(i){let e,n;return e=new ws({props:{class:"p-2 flex grow",$$slots:{default:[nz]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function rz(i){let e,n;return e=new or({props:{class:"flex grow",$$slots:{default:[iz]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function sz(i){let e,n;return e=new cf({props:{class:"flex grow",$$slots:{default:[rz]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function oz(i){let e,n;return e=new lf({props:{$$slots:{default:[sz]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function az(i){let e,n;return e=new vl({props:{class:"h-[90%] max-w-[90%] p-8",$$slots:{default:[oz]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function lz(i){let e,n,t,r,s,o,a,l,f;n=new or({props:{class:"flex flex-col grow relative w-full",$$slots:{default:[qO]},$$scope:{ctx:i}}});let m=i[4]&&_v(i),g=i[5]&&gv(i),w=i[6]!==null&&bv(i);return{c(){e=ce("div"),H(n.$$.fragment),s=ke(),m&&m.c(),o=ke(),g&&g.c(),a=ke(),w&&w.c(),l=Le(),this.h()},l(S){e=ue(S,"DIV",{class:!0});var M=we(e);W(n.$$.fragment,M),M.forEach(I),s=Ce(S),m&&m.l(S),o=Ce(S),g&&g.l(S),a=Ce(S),w&&w.l(S),l=Le(),this.h()},h(){oe(e,"class",t="z-20 absolute w-full flex pl-4"+(i[0].pictures.length===0?" h-72":" h-80"))},m(S,M){N(S,e,M),G(n,e,null),N(S,s,M),m&&m.m(S,M),N(S,o,M),g&&g.m(S,M),N(S,a,M),w&&w.m(S,M),N(S,l,M),f=!0},p(S,M){const $={};M[0]&245|M[1]&4&&($.$$scope={dirty:M,ctx:S}),n.$set($),(!f||M[0]&1&&t!==(t="z-20 absolute w-full flex pl-4"+(S[0].pictures.length===0?" h-72":" h-80")))&&oe(e,"class",t),S[4]?m?(m.p(S,M),M[0]&16&&E(m,1)):(m=_v(S),m.c(),E(m,1),m.m(o.parentNode,o)):m&&(It(),P(m,1,1,()=>{m=null}),Pt()),S[5]?g?(g.p(S,M),M[0]&32&&E(g,1)):(g=gv(S),g.c(),E(g,1),g.m(a.parentNode,a)):g&&(It(),P(g,1,1,()=>{g=null}),Pt()),S[6]!==null?w?(w.p(S,M),M[0]&64&&E(w,1)):(w=bv(S),w.c(),E(w,1),w.m(l.parentNode,l)):w&&(It(),P(w,1,1,()=>{w=null}),Pt())},i(S){f||(E(n.$$.fragment,S),S&&ar(()=>{f&&(r||(r=Qr(e,Fg,{duration:300,x:200,y:0,opacity:0,easing:Lg},!0)),r.run(1))}),E(m),E(g),E(w),f=!0)},o(S){P(n.$$.fragment,S),S&&(r||(r=Qr(e,Fg,{duration:300,x:200,y:0,opacity:0,easing:Lg},!1)),r.run(0)),P(m),P(g),P(w),f=!1},d(S){S&&(I(e),I(s),I(o),I(a),I(l)),Z(n),S&&r&&r.end(),m&&m.d(S),g&&g.d(S),w&&w.d(S)}}}function cz(i,e,n){let{poi:t}=e,{userNickname:r}=e,{closePOICard:s}=e,{refreshPOIs:o}=e,a=!1,l=!1,f=null,m=[!1];const g=()=>{n(7,m=new Array(m.length).fill(!1))},w=async()=>{const j=await(await fetch("/api/favourites/single?poi_id="+encodeURIComponent(t.id))).json();typeof j=="boolean"&&(n(0,t.isFavourite=!t.isFavourite,t),await Gi(),n(0,t.isFavourite=j,t))},S=async()=>{const X=t.isFavourite;n(0,t.isFavourite=!t.isFavourite,t),await Gi(),n(0,t.isFavourite=X,t)};let M=!1;const $=async X=>{S(),!M&&(M=!0,X?await fetch("/api/favourites?poi_id="+encodeURIComponent(t.id),{method:"POST"}):await fetch("/api/favourites?poi_id="+encodeURIComponent(t.id),{method:"DELETE"}),await w(),o(),M=!1)},D=X=>{g(),X.target.focus()};function F(X){i.$$.not_equal(m[0],X)&&(m[0]=X,n(7,m))}const L=X=>{X.stopPropagation(),n(5,l=!0)},U=X=>n(6,f=X*3),ne=X=>n(6,f=X*3+1),se=X=>n(6,f=X*3+2),ee=()=>n(4,a=!0),fe=()=>n(4,a=!1);function _e(X){t=X,n(0,t)}const re=X=>n(6,f=X),de=X=>X||(()=>n(5,l=!1))(),he=X=>X||(()=>n(6,f=null))();return i.$$set=X=>{"poi"in X&&n(0,t=X.poi),"userNickname"in X&&n(1,r=X.userNickname),"closePOICard"in X&&n(2,s=X.closePOICard),"refreshPOIs"in X&&n(3,o=X.refreshPOIs)},[t,r,s,o,a,l,f,m,g,$,D,F,L,U,ne,se,ee,fe,_e,re,de,he]}class uz extends Xe{constructor(e){super(),Je(this,e,cz,lz,Ze,{poi:0,userNickname:1,closePOICard:2,refreshPOIs:3},null,[-1,-1])}}const fz="https://api.maptiler.com/maps/outdoor-v2/style.json?key=TXpGz6EEUuCZtdUb72gw",dz="https://api.maptiler.com/maps/streets-v2/style.json?key=TXpGz6EEUuCZtdUb72gw",hz="https://api.maptiler.com/maps/hybrid/style.json?key=TXpGz6EEUuCZtdUb72gw",mz="https://api.maptiler.com/maps/dataviz-light/style.json?key=TXpGz6EEUuCZtdUb72gw",pz="https://api.maptiler.com/maps/dataviz-dark/style.json?key=TXpGz6EEUuCZtdUb72gw",_z="6faR3O8R7ilrB_1rMKJyXHy5DYdgnd1v4hS84oSaPt4",sl=[{value:"outdoor",label:"Outdoor",URI:fz},{value:"street",label:"Street",URI:dz},{value:"satellite",label:"Satellite",URI:hz},{value:"light",label:"Light",URI:mz},{value:"dark",label:"Dark",URI:pz}],yv=1,gz=.9,vz=.8,bz=.17,Lm=.1,Fm=.999,yz=.9999,wz=.99,xz=/[\\/_+.#"@[({&]/,kz=/[\\/_+.#"@[({&]/g,Cz=/[\s-]/,W2=/[\s-]/g;function tp(i,e,n,t,r,s,o){if(s===e.length)return r===i.length?yv:wz;const a=`${r},${s}`;if(o[a]!==void 0)return o[a];const l=t.charAt(s);let f=n.indexOf(l,r),m=0,g,w,S,M;for(;f>=0;)g=tp(i,e,n,t,f+1,s+1,o),g>m&&(f===r?g*=yv:xz.test(i.charAt(f-1))?(g*=vz,S=i.slice(r,f-1).match(kz),S&&r>0&&(g*=Math.pow(Fm,S.length))):Cz.test(i.charAt(f-1))?(g*=gz,M=i.slice(r,f-1).match(W2),M&&r>0&&(g*=Math.pow(Fm,M.length))):(g*=bz,r>0&&(g*=Math.pow(Fm,f-r))),i.charAt(f)!==e.charAt(s)&&(g*=yz)),(g<Lm&&n.charAt(f-1)===t.charAt(s+1)||t.charAt(s+1)===t.charAt(s)&&n.charAt(f-1)!==t.charAt(s))&&(w=tp(i,e,n,t,f+1,s+2,o),w*Lm>g&&(g=w*Lm)),g>m&&(m=g),f=n.indexOf(l,f+1);return o[a]=m,m}function wv(i){return i.toLowerCase().replace(W2," ")}function Tz(i,e){return tp(i,e,wv(i),wv(e),0,0,{})}const Sz=typeof document<"u";function _a(i){return i instanceof HTMLElement}function Ez(i){return i instanceof HTMLInputElement}function zp(i){return i===void 0}function eo(){return mp(10)}const Nu={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*"};function Iz(i,...e){const n={};for(const t of Object.keys(i))e.includes(t)||(n[t]=i[t]);return n}function K2(i){const e={};for(const n in i){const t=i[n];t!==void 0&&(e[n]=t)}return e}function Pz(i){const e={};return Object.keys(i).forEach(n=>{const t=n,r=i[t];e[t]=wn(r)}),e}function $z(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}const Az={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Jd(i,e,n,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,n,t)),()=>{r.forEach(s=>i.removeEventListener(s,n,t))}}function X2(...i){return(...e)=>{for(const n of i)typeof n=="function"&&n(...e)}}const J2="Command",Y2="CommandState",Q2="CommandGroup",Mz="[data-cmdk-list-sizer]",Vu="[data-cmdk-group]",xv="[data-cmdk-group-items]",Dz="[data-cmdk-group-heading]",ew="[data-cmdk-item]",Bm=`${ew}:not([aria-disabled="true"])`,mo="data-value",tw=(i,e)=>Tz(i,e);function fh(){return Tr(J2)}function Mc(){return Tr(Y2)}function Oz(i){const e=eo();return Ar(Q2,{id:e,alwaysRender:zp(i)?!1:i}),{id:e}}function zz(){const i=Tr(Q2);if(i)return i}function Rz(i){const e={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};return wn(i?{...e,...K2(i)}:e)}const Lz={label:"Command menu",shouldFilter:!0,loop:!1,onValueChange:void 0,value:void 0,filter:tw,ids:{root:eo(),list:eo(),label:eo(),input:eo()}};function Fz(i){const e={root:eo(),list:eo(),label:eo(),input:eo(),...i.ids},n={...Lz,...K2(i)},t=i.state??Rz({value:n.value}),r=wn(new Set),s=wn(new Map),o=wn(new Map),a=wn(null),l=Pz(Iz(n,"value","ids")),{shouldFilter:f,loop:m,filter:g,label:w}=l,S={value:(xe,ze)=>{ze!==wr(o).get(xe)&&(o.update(ve=>(ve.set(xe,ze),ve)),t.update(ve=>(ve.filtered.items.set(xe,L(ze,ve.search)),D(ve,wr(f)))))},item:(xe,ze)=>(r.update(ve=>ve.add(xe)),ze&&s.update(ve=>{var We;return ve.has(ze)?(We=ve.get(ze))==null||We.add(xe):ve.set(ze,new Set([xe])),ve}),t.update(ve=>{const We=wr(f),pt=$(ve,We),Mt=D(pt,We);if(!Mt.value){const St=F();Mt.value=St??""}return Mt}),()=>{o.update(ve=>(ve.delete(xe),ve)),r.update(ve=>(ve.delete(xe),ve)),t.update(ve=>{ve.filtered.items.delete(xe);const We=se(),pt=$(ve);return(We==null?void 0:We.getAttribute("id"))===xe&&(pt.value=F()??""),ve})}),group:xe=>(s.update(ze=>(ze.has(xe)||ze.set(xe,new Set),ze)),()=>{o.update(ze=>(ze.delete(xe),ze)),s.update(ze=>(ze.delete(xe),ze))}),filter:()=>wr(f),label:wr(w)||i["aria-label"]||"",commandEl:a,ids:e,updateState:M};function M(xe,ze,ve){const We=wr(f);t.update(pt=>{var Mt;return Object.is(pt[xe],ze)||(pt[xe]=ze,xe==="search"?(pt=$(pt,We),pt=D(pt,We),Gi().then(()=>t.update(zt=>(zt.value=F()??"",zt)))):xe==="value"&&((Mt=i.onValueChange)==null||Mt.call(i,pt.value),ve||Gi().then(()=>U()))),pt})}function $(xe,ze){const ve=ze??wr(f),We=wr(r),pt=wr(o);if(!xe.search||!ve)return xe.filtered.count=We.size,xe;xe.filtered.groups=new Set;let Mt=0;for(const St of We){const Dt=pt.get(St),zt=L(Dt,xe.search);xe.filtered.items.set(St,zt),zt>0&&Mt++}for(const[St,Dt]of wr(s))for(const zt of Dt){const _t=xe.filtered.items.get(zt);_t&&_t>0&&xe.filtered.groups.add(St)}return xe.filtered.count=Mt,xe}function D(xe,ze){const ve=ze??wr(f);if(!xe.search||!ve)return xe;const We=xe.filtered.items,pt=[],Mt=wr(s);xe.filtered.groups.forEach(zt=>{const _t=Mt.get(zt);if(!_t)return;let ft=0;_t.forEach(Be=>{const Ut=We.get(Be);zp(Ut)||(ft=Math.max(Ut,ft))}),pt.push([zt,ft])});const St=document.getElementById(e.root);if(!St)return xe;const Dt=St.querySelector(Mz);return ne(St).sort((zt,_t)=>{const ft=zt.getAttribute(mo)??"",Be=_t.getAttribute(mo)??"";return(We.get(ft)??0)-(We.get(Be)??0)}).forEach(zt=>{const _t=zt.closest(xv),ft=zt.closest(`${xv} > *`);if(_a(_t))if(zt.parentElement===_t)_t.appendChild(zt);else{if(!_a(ft))return;_t.appendChild(ft)}else{if(!_a(Dt))return;if(zt.parentElement===Dt)Dt.appendChild(zt);else{if(!_a(ft))return;Dt.appendChild(ft)}}}),pt.sort((zt,_t)=>_t[1]-zt[1]).forEach(zt=>{var ft;const _t=St.querySelector(`${Vu}[${mo}="${zt[0]}"]`);_a(_t)&&((ft=_t.parentElement)==null||ft.appendChild(_t))}),xe}function F(){const xe=ne().find(ve=>!ve.ariaDisabled);if(!xe)return;const ze=xe.getAttribute(mo);if(ze)return ze}function L(xe,ze){const ve=xe==null?void 0:xe.toLowerCase().trim(),We=wr(g);return We?ve?We(ve,ze):0:ve?tw(ve,ze):0}function U(){var ze;const xe=se();xe&&(((ze=xe.parentElement)==null?void 0:ze.firstChild)===xe&&Gi().then(()=>{var ve,We;return(We=(ve=xe.closest(Vu))==null?void 0:ve.querySelector(Dz))==null?void 0:We.scrollIntoView({block:"nearest"})}),Gi().then(()=>xe.scrollIntoView({block:"nearest"})))}function ne(xe){const ze=xe??document.getElementById(e.root);return ze?Array.from(ze.querySelectorAll(Bm)).filter(ve=>_a(ve)):[]}function se(xe){const ze=xe??document.getElementById(e.root);if(!ze)return;const ve=ze.querySelector(`${Bm}[aria-selected="true"]`);return _a(ve)?ve:null}function ee(xe){const ze=document.getElementById(e.root);!ze||ne(ze)[xe]}function fe(xe){const ze=se(),ve=ne(),We=ve.findIndex(Mt=>Mt===ze);let pt=ve[We+xe];wr(m)&&(We+xe<0?pt=ve[ve.length-1]:We+xe===ve.length?pt=ve[0]:pt=ve[We+xe]),pt&&M("value",pt.getAttribute(mo)??"")}function _e(xe){const ze=se();let ve=ze==null?void 0:ze.closest(Vu),We;for(;ve&&!We;)ve=xe>0?Bz(ve,Vu):Nz(ve,Vu),We=ve==null?void 0:ve.querySelector(Bm);We?M("value",We.getAttribute(mo)??""):fe(xe)}function re(){return ee(ne().length-1)}function de(xe){xe.preventDefault(),xe.metaKey?re():xe.altKey?_e(1):fe(1)}function he(xe){xe.preventDefault(),xe.metaKey?ee(0):xe.altKey?_e(-1):fe(-1)}function X(xe){switch(xe.key){case Nu.ARROW_DOWN:de(xe);break;case Nu.ARROW_UP:he(xe);break;case Nu.HOME:xe.preventDefault(),ee(0);break;case Nu.END:xe.preventDefault(),re();break;case Nu.ENTER:{xe.preventDefault();const ze=se();ze&&ze.click()}}}Ar(J2,S);const j={subscribe:t.subscribe,update:t.update,set:t.set,updateState:M};return Ar(Y2,j),{state:j,handleRootKeydown:X,commandEl:a,ids:e}}function Bz(i,e){let n=i.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function Nz(i,e){let n=i.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}const Vz=i=>i&4,jz=i=>({}),kv=i=>({...i[2]}),Uz=i=>i&4,qz=i=>({}),Cv=i=>({...i[2]});function Hz(i){let e,n,t=(i[0]??"")+"",r,s,o,a,l,f=[i[6]],m={};for(let $=0;$<f.length;$+=1)m=Q(m,f[$]);const g=i[18].default,w=tt(g,i,i[17],kv);let S=[i[5],i[7]],M={};for(let $=0;$<S.length;$+=1)M=Q(M,S[$]);return{c(){e=ce("div"),n=ce("label"),r=lt(t),s=ke(),w&&w.c(),this.h()},l($){e=ue($,"DIV",{});var D=we(e);n=ue(D,"LABEL",{});var F=we(n);r=ct(F,t),F.forEach(I),s=Ce(D),w&&w.l(D),D.forEach(I),this.h()},h(){ut(n,m),ut(e,M)},m($,D){N($,e,D),me(e,n),me(n,r),me(e,s),w&&w.m(e,null),o=!0,a||(l=Cn(i[4].call(null,e)),a=!0)},p($,D){(!o||D&1)&&t!==(t=($[0]??"")+"")&&ap(r,t,m.contenteditable),w&&w.p&&(!o||D&131076)&&nt(w,g,$,$[17],Vz(D)||!o?it($[17]):rt(g,$[17],D,jz),kv),ut(e,M=at(S,[$[5],D&128&&$[7]]))},i($){o||(E(w,$),o=!0)},o($){P(w,$),o=!1},d($){$&&I(e),w&&w.d($),a=!1,l()}}}function Gz(i){let e;const n=i[18].default,t=tt(n,i,i[17],Cv);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&131076)&&nt(t,n,r,r[17],Uz(s)||!e?it(r[17]):rt(n,r[17],s,qz),Cv)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function Zz(i){let e,n,t,r;const s=[Gz,Hz],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function Wz(i,e,n){let t;const r=["label","shouldFilter","filter","value","onValueChange","loop","onKeydown","state","ids","asChild"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{label:f=void 0}=e,{shouldFilter:m=!0}=e,{filter:g=void 0}=e,{value:w=void 0}=e,{onValueChange:S=void 0}=e,{loop:M=void 0}=e,{onKeydown:$=void 0}=e,{state:D=void 0}=e,{ids:F=void 0}=e,{asChild:L=!1}=e;const{commandEl:U,handleRootKeydown:ne,ids:se,state:ee}=Fz({label:f,shouldFilter:m,filter:g,value:w,onValueChange:j=>{j!==w&&(n(8,w=j),S==null||S(j))},loop:M,state:D,ids:F});Jt(i,ee,j=>n(16,o=j));function fe(j){j&&j!==o.value&&vr(ee,o.value=j,o)}function _e(j){return U.set(j),{destroy:X2(Jd(j,"keydown",he))}}const re={role:"application",id:se.root,"data-cmdk-root":""},de={"data-cmdk-label":"",for:se.input,id:se.label,style:$z(Az)};function he(j){$==null||$(j),!j.defaultPrevented&&ne(j)}const X={action:_e,attrs:re};return i.$$set=j=>{e=Q(Q({},e),bt(j)),n(7,s=Fe(e,r)),"label"in j&&n(0,f=j.label),"shouldFilter"in j&&n(9,m=j.shouldFilter),"filter"in j&&n(10,g=j.filter),"value"in j&&n(8,w=j.value),"onValueChange"in j&&n(11,S=j.onValueChange),"loop"in j&&n(12,M=j.loop),"onKeydown"in j&&n(13,$=j.onKeydown),"state"in j&&n(14,D=j.state),"ids"in j&&n(15,F=j.ids),"asChild"in j&&n(1,L=j.asChild),"$$scope"in j&&n(17,l=j.$$scope)},i.$$.update=()=>{i.$$.dirty&256&&fe(w),i.$$.dirty&65536&&n(2,t={root:X,label:{attrs:de},stateStore:ee,state:o})},[f,L,t,ee,_e,re,de,s,w,m,g,S,M,$,D,F,o,l,a]}let nw=class extends Xe{constructor(e){super(),Je(this,e,Wz,Zz,Ze,{label:0,shouldFilter:9,filter:10,value:8,onValueChange:11,loop:12,onKeydown:13,state:14,ids:15,asChild:1})}};function Kz(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}Kz({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function iw(i,e,n,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,n,t)),()=>{r.forEach(s=>i.removeEventListener(s,n,t))}}const Xz={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};As(void 0,i=>{function e(t){i(t),i(void 0)}return iw(document,"pointerup",e,{passive:!1,capture:!0})});As(void 0,i=>{function e(t){t&&t.key===Xz.ESCAPE&&i(t),i(void 0)}return iw(document,"keydown",e,{passive:!1,capture:!0})});function lr(i,e){const n={};return e.forEach(t=>{n[t]={[`data-bits-${i}-${t}`]:""}}),t=>n[t]}function rw(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}rw({position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"});rw({position:"absolute",width:"25px",height:"25px",opacity:"0",margin:"0px",pointerEvents:"none",transform:"translateX(-100%)"});const Jz="accordion",Yz=["root","content","header","item","trigger"];lr(Jz,Yz);const Qz="alert-dialog",eR=["action","cancel","content","description","overlay","portal","title","trigger"];lr(Qz,eR);const tR="avatar",nR=["root","image","fallback"];lr(tR,nR);const iR="checkbox",rR=["root","input","indicator"];lr(iR,rR);const sR="collapsible",oR=["root","content","trigger"];lr(sR,oR);const aR="context-menu",lR=["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];lr(aR,lR);const cR="dialog",uR=["close","content","description","overlay","portal","title","trigger"];lr(cR,uR);const fR="dropdown-menu",dR=["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];lr(fR,dR);const hR="link-preview",mR=["arrow","content","trigger"];lr(hR,mR);const pR="label",_R=["root"];lr(pR,_R);const gR="menubar",vR=["root","arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];lr(gR,vR);const bR="popover",yR=["arrow","close","content","trigger"];lr(bR,yR);const wR="progress",xR=["root"];lr(wR,xR);const kR="radio-group",CR=["root","item","input"];lr(kR,CR);const TR="select",SR=["arrow","content","group","item","input","label","trigger","value"];lr(TR,SR);const ER="separator",IR=["root"];lr(ER,IR);const PR="slider",$R=["root","input","range","thumb","tick"];lr(PR,$R);const AR="switch",MR=["root","input","thumb"];lr(AR,MR);const DR="tabs",OR=["root","content","list","trigger"];lr(DR,OR);const zR="toggle",RR=["root","input"];lr(zR,RR);const LR="toggle-group",FR=["root","item"];lr(LR,FR);const BR="tooltip",NR=["arrow","content","trigger"];lr(BR,NR);const VR=i=>({}),Tv=i=>({attrs:i[4]});function Sv(i){let e,n,t,r;const s=[UR,jR],o=[];function a(l,f){return l[0]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function jR(i){let e,n;const t=i[8].default,r=tt(t,i,i[7],null);let s=[i[4],i[5]],o={};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return{c(){e=ce("div"),r&&r.c(),this.h()},l(a){e=ue(a,"DIV",{});var l=we(e);r&&r.l(l),l.forEach(I),this.h()},h(){ut(e,o)},m(a,l){N(a,e,l),r&&r.m(e,null),n=!0},p(a,l){r&&r.p&&(!n||l&128)&&nt(r,t,a,a[7],n?rt(t,a[7],l,null):it(a[7]),null),ut(e,o=at(s,[a[4],l&32&&a[5]]))},i(a){n||(E(r,a),n=!0)},o(a){P(r,a),n=!1},d(a){a&&I(e),r&&r.d(a)}}}function UR(i){let e;const n=i[8].default,t=tt(n,i,i[7],Tv);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&nt(t,n,r,r[7],e?rt(n,r[7],s,VR):it(r[7]),Tv)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function qR(i){let e,n,t=!i[1]&&i[2]&&Sv(i);return{c(){t&&t.c(),e=Le()},l(r){t&&t.l(r),e=Le()},m(r,s){t&&t.m(r,s),N(r,e,s),n=!0},p(r,[s]){!r[1]&&r[2]?t?(t.p(r,s),s&6&&E(t,1)):(t=Sv(r),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(It(),P(t,1,1,()=>{t=null}),Pt())},i(r){n||(E(t),n=!0)},o(r){P(t),n=!1},d(r){r&&I(e),t&&t.d(r)}}}function HR(i,e,n){let t;const r=["asChild"];let s=Fe(e,r),o,{$$slots:a={},$$scope:l}=e,{asChild:f=!1}=e,m=!0;Zi(()=>{n(1,m=!1)});const g=Mc();Jt(i,g,S=>n(6,o=S));const w={"data-cmdk-empty":"",role:"presentation"};return i.$$set=S=>{e=Q(Q({},e),bt(S)),n(5,s=Fe(e,r)),"asChild"in S&&n(0,f=S.asChild),"$$scope"in S&&n(7,l=S.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=o.filtered.count===0)},[f,m,t,g,w,s,o,l,a]}class sw extends Xe{constructor(e){super(),Je(this,e,HR,qR,Ze,{asChild:0})}}const GR=i=>({container:i&32,group:i&16}),Ev=i=>({container:i[5],group:i[4],heading:{attrs:i[8]}}),ZR=i=>({container:i&32,group:i&16}),Iv=i=>({container:i[5],group:i[4],heading:{attrs:i[8]}});function WR(i){let e,n,t,r,s,o,a=i[0]&&Pv(i);const l=i[14].default,f=tt(l,i,i[13],Ev);let m=[i[2]],g={};for(let M=0;M<m.length;M+=1)g=Q(g,m[M]);let w=[i[3],i[9]],S={};for(let M=0;M<w.length;M+=1)S=Q(S,w[M]);return{c(){e=ce("div"),a&&a.c(),n=ke(),t=ce("div"),f&&f.c(),this.h()},l(M){e=ue(M,"DIV",{});var $=we(e);a&&a.l($),n=Ce($),t=ue($,"DIV",{});var D=we(t);f&&f.l(D),D.forEach(I),$.forEach(I),this.h()},h(){ut(t,g),ut(e,S)},m(M,$){N(M,e,$),a&&a.m(e,null),me(e,n),me(e,t),f&&f.m(t,null),r=!0,s||(o=Cn(i[7].call(null,e)),s=!0)},p(M,$){M[0]?a?a.p(M,$):(a=Pv(M),a.c(),a.m(e,n)):a&&(a.d(1),a=null),f&&f.p&&(!r||$&8240)&&nt(f,l,M,M[13],r?rt(l,M[13],$,GR):it(M[13]),Ev),ut(t,g=at(m,[$&4&&M[2]])),ut(e,S=at(w,[$&8&&M[3],$&512&&M[9]]))},i(M){r||(E(f,M),r=!0)},o(M){P(f,M),r=!1},d(M){M&&I(e),a&&a.d(),f&&f.d(M),s=!1,o()}}}function KR(i){let e;const n=i[14].default,t=tt(n,i,i[13],Iv);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8240)&&nt(t,n,r,r[13],e?rt(n,r[13],s,ZR):it(r[13]),Iv)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function Pv(i){let e,n,t=[i[8]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=ce("div"),n=lt(i[0]),this.h()},l(s){e=ue(s,"DIV",{});var o=we(e);n=ct(o,i[0]),o.forEach(I),this.h()},h(){ut(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,o){o&1&&ap(n,s[0],r.contenteditable)},d(s){s&&I(e)}}}function XR(i){let e,n,t,r;const s=[KR,WR],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function JR(i,e,n){let t,r,s,o;const a=["heading","value","alwaysRender","asChild"];let l=Fe(e,a),f,{$$slots:m={},$$scope:g}=e,{heading:w=void 0}=e,{value:S=""}=e,{alwaysRender:M=!1}=e,{asChild:$=!1}=e;const{id:D}=Oz(M),F=fh(),L=Mc(),U=eo(),ne=Bn(L,fe=>M||F.filter()===!1||!fe.search?!0:fe.filtered.groups.has(D));Jt(i,ne,fe=>n(12,f=fe)),Zi(()=>F.group(D));function se(fe){if(S){F.value(D,S),fe.setAttribute(mo,S);return}w?n(10,S=w.trim().toLowerCase()):fe.textContent&&n(10,S=fe.textContent.trim().toLowerCase()),F.value(D,S),fe.setAttribute(mo,S)}const ee={"data-cmdk-group-heading":"","aria-hidden":!0,id:U};return i.$$set=fe=>{e=Q(Q({},e),bt(fe)),n(9,l=Fe(e,a)),"heading"in fe&&n(0,w=fe.heading),"value"in fe&&n(10,S=fe.value),"alwaysRender"in fe&&n(11,M=fe.alwaysRender),"asChild"in fe&&n(1,$=fe.asChild),"$$scope"in fe&&n(13,g=fe.$$scope)},i.$$.update=()=>{i.$$.dirty&5120&&n(3,t={"data-cmdk-group":"",role:"presentation",hidden:f?void 0:!0,"data-value":S}),i.$$.dirty&1&&n(2,r={"data-cmdk-group-items":"",role:"group","aria-labelledby":w?U:void 0}),i.$$.dirty&8&&n(5,s={action:se,attrs:t}),i.$$.dirty&4&&n(4,o={attrs:r})},[w,$,r,t,o,s,ne,se,ee,l,S,M,f,g,m]}class ow extends Xe{constructor(e){super(),Je(this,e,JR,XR,Ze,{heading:0,value:10,alwaysRender:11,asChild:1})}}function YR(i){return new Promise(e=>setTimeout(e,i))}const QR=i=>({attrs:i&8}),$v=i=>({action:i[6],attrs:i[3]});function eL(i){let e,n,t,r=[i[3],i[7]],s={};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return{c(){e=ce("input"),this.h()},l(o){e=ue(o,"INPUT",{}),this.h()},h(){ut(e,s)},m(o,a){N(o,e,a),e.autofocus&&e.focus(),i[17](e),bo(e,i[0]),n||(t=[Ke(e,"input",i[18]),Cn(i[6].call(null,e)),Ke(e,"keydown",i[12]),Ke(e,"input",i[13]),Ke(e,"focus",i[14]),Ke(e,"blur",i[15]),Ke(e,"change",i[16])],n=!0)},p(o,a){ut(e,s=at(r,[a&8&&o[3],a&128&&o[7]])),a&1&&e.value!==o[0]&&bo(e,o[0])},i:Ct,o:Ct,d(o){o&&I(e),i[17](null),n=!1,Wn(t)}}}function tL(i){let e;const n=i[11].default,t=tt(n,i,i[10],$v);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1032)&&nt(t,n,r,r[10],e?rt(n,r[10],s,QR):it(r[10]),$v)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function nL(i){let e,n,t,r;const s=[tL,eL],o=[];function a(l,f){return l[2]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function iL(i,e,n){const t=["autofocus","value","asChild","el"];let r=Fe(e,t),s,o,{$$slots:a={},$$scope:l}=e;const{ids:f,commandEl:m}=fh(),g=Mc(),w=Bn(g,j=>j.search);Jt(i,w,j=>n(19,o=j));const S=Bn(g,j=>j.value);let{autofocus:M=void 0}=e,{value:$=o}=e,{asChild:D=!1}=e,{el:F=void 0}=e;const L=Bn([S,m],([j,xe])=>{if(!Sz)return;const ze=xe==null?void 0:xe.querySelector(`${ew}[${mo}="${j}"]`);return ze==null?void 0:ze.getAttribute("id")});Jt(i,L,j=>n(9,s=j));function U(j){g.updateState("search",j)}function ne(j){return M&&YR(10).then(()=>j.focus()),{destroy:Jd(j,"change",ze=>{Ez(ze.target)&&g.updateState("search",ze.target.value)})}}let se;function ee(j){At.call(this,i,j)}function fe(j){At.call(this,i,j)}function _e(j){At.call(this,i,j)}function re(j){At.call(this,i,j)}function de(j){At.call(this,i,j)}function he(j){Nt[j?"unshift":"push"](()=>{F=j,n(1,F)})}function X(){$=this.value,n(0,$)}return i.$$set=j=>{e=Q(Q({},e),bt(j)),n(7,r=Fe(e,t)),"autofocus"in j&&n(8,M=j.autofocus),"value"in j&&n(0,$=j.value),"asChild"in j&&n(2,D=j.asChild),"el"in j&&n(1,F=j.el),"$$scope"in j&&n(10,l=j.$$scope)},i.$$.update=()=>{i.$$.dirty&1&&U($),i.$$.dirty&512&&n(3,se={type:"text","data-cmdk-input":"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.list,"aria-labelledby":f.label,"aria-activedescendant":s??void 0,id:f.input})},[$,F,D,se,w,L,ne,r,M,s,l,a,ee,fe,_e,re,de,he,X]}class aw extends Xe{constructor(e){super(),Je(this,e,iL,nL,Ze,{autofocus:8,value:0,asChild:2,el:1})}}const rL=i=>({attrs:i&4}),Av=i=>({action:i[6],attrs:i[2]}),sL=i=>({attrs:i&4}),Mv=i=>({action:i[6],attrs:i[2]});function Dv(i){let e,n,t,r;const s=[aL,oL],o=[];function a(l,f){return l[0]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function oL(i){let e,n,t,r;const s=i[15].default,o=tt(s,i,i[14],Av);let a=[i[2],i[7]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{});var m=we(e);o&&o.l(m),m.forEach(I),this.h()},h(){ut(e,l)},m(f,m){N(f,e,m),o&&o.m(e,null),n=!0,t||(r=Cn(i[6].call(null,e)),t=!0)},p(f,m){o&&o.p&&(!n||m&16388)&&nt(o,s,f,f[14],n?rt(s,f[14],m,rL):it(f[14]),Av),ut(e,l=at(a,[m&4&&f[2],m&128&&f[7]]))},i(f){n||(E(o,f),n=!0)},o(f){P(o,f),n=!1},d(f){f&&I(e),o&&o.d(f),t=!1,r()}}}function aL(i){let e;const n=i[15].default,t=tt(n,i,i[14],Mv);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16388)&&nt(t,n,r,r[14],e?rt(n,r[14],s,sL):it(r[14]),Mv)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function lL(i){let e,n,t=(i[3]||i[1])&&Dv(i);return{c(){t&&t.c(),e=Le()},l(r){t&&t.l(r),e=Le()},m(r,s){t&&t.m(r,s),N(r,e,s),n=!0},p(r,[s]){r[3]||r[1]?t?(t.p(r,s),s&10&&E(t,1)):(t=Dv(r),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(It(),P(t,1,1,()=>{t=null}),Pt())},i(r){n||(E(t),n=!0)},o(r){P(t),n=!1},d(r){r&&I(e),t&&t.d(r)}}}function cL(i,e,n){let t;const r=["disabled","value","onSelect","alwaysRender","asChild","id"];let s=Fe(e,r),o,a,{$$slots:l={},$$scope:f}=e,{disabled:m=!1}=e,{value:g=""}=e,{onSelect:w=void 0}=e,{alwaysRender:S=!1}=e,{asChild:M=!1}=e,{id:$=eo()}=e;const D=zz(),F=fh(),L=Mc(),U=S??(D==null?void 0:D.alwaysRender),ne=Bn(L,de=>{if(U||F.filter()===!1||!de.search)return!0;const he=de.filtered.items.get($);return zp(he)?!1:he>0});Jt(i,ne,de=>n(3,a=de));let se=!0;Zi(()=>(n(1,se=!1),F.item($,D==null?void 0:D.id)));const ee=Bn(L,de=>de.value===g);Jt(i,ee,de=>n(13,o=de));function fe(de){!g&&de.textContent&&n(8,g=de.textContent.trim().toLowerCase()),F.value($,g),de.setAttribute(mo,g);const he=X2(Jd(de,"pointermove",()=>{m||re()}),Jd(de,"click",()=>{m||_e()}));return{destroy(){he()}}}function _e(){re(),w==null||w(g)}function re(){L.updateState("value",g,!0)}return i.$$set=de=>{e=Q(Q({},e),bt(de)),n(7,s=Fe(e,r)),"disabled"in de&&n(9,m=de.disabled),"value"in de&&n(8,g=de.value),"onSelect"in de&&n(10,w=de.onSelect),"alwaysRender"in de&&n(11,S=de.alwaysRender),"asChild"in de&&n(0,M=de.asChild),"id"in de&&n(12,$=de.id),"$$scope"in de&&n(14,f=de.$$scope)},i.$$.update=()=>{i.$$.dirty&13056&&n(2,t={"aria-disabled":m?!0:void 0,"aria-selected":o?!0:void 0,"data-disabled":m?!0:void 0,"data-selected":o?!0:void 0,"data-cmdk-item":"","data-value":g,role:"option",id:$})},[M,se,t,a,ne,ee,fe,s,g,m,w,S,$,o,f,l]}class lw extends Xe{constructor(e){super(),Je(this,e,cL,lL,Ze,{disabled:9,value:8,onSelect:10,alwaysRender:11,asChild:0,id:12})}}const uL=i=>({}),Ov=i=>({list:i[7],sizer:i[8]});function fL(i){let e,n,t=i[2].search==="",r,s,o,a=zv(i),l=[i[6]],f={};for(let w=0;w<l.length;w+=1)f=Q(f,l[w]);let m=[i[5],i[9]],g={};for(let w=0;w<m.length;w+=1)g=Q(g,m[w]);return{c(){e=ce("div"),n=ce("div"),a.c(),this.h()},l(w){e=ue(w,"DIV",{});var S=we(e);n=ue(S,"DIV",{});var M=we(n);a.l(M),M.forEach(I),S.forEach(I),this.h()},h(){ut(n,f),ut(e,g)},m(w,S){N(w,e,S),me(e,n),a.m(n,null),i[12](e),r=!0,s||(o=Cn(i[4].call(null,n)),s=!0)},p(w,S){S&4&&Ze(t,t=w[2].search==="")?(It(),P(a,1,1,Ct),Pt(),a=zv(w),a.c(),E(a,1),a.m(n,null)):a.p(w,S),ut(e,g=at(m,[w[5],S&512&&w[9]]))},i(w){r||(E(a),r=!0)},o(w){P(a),r=!1},d(w){w&&I(e),a.d(w),i[12](null),s=!1,o()}}}function dL(i){let e=i[2].search==="",n,t,r=Rv(i);return{c(){r.c(),n=Le()},l(s){r.l(s),n=Le()},m(s,o){r.m(s,o),N(s,n,o),t=!0},p(s,o){o&4&&Ze(e,e=s[2].search==="")?(It(),P(r,1,1,Ct),Pt(),r=Rv(s),r.c(),E(r,1),r.m(n.parentNode,n)):r.p(s,o)},i(s){t||(E(r),t=!0)},o(s){P(r),t=!1},d(s){s&&I(n),r.d(s)}}}function zv(i){let e;const n=i[11].default,t=tt(n,i,i[10],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&nt(t,n,r,r[10],e?rt(n,r[10],s,null):it(r[10]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function Rv(i){let e;const n=i[11].default,t=tt(n,i,i[10],Ov);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&nt(t,n,r,r[10],e?rt(n,r[10],s,uL):it(r[10]),Ov)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function hL(i){let e,n,t,r;const s=[dL,fL],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function mL(i,e,n){const t=["el","asChild"];let r=Fe(e,t),s,{$$slots:o={},$$scope:a}=e;const{ids:l}=fh(),f=Mc();Jt(i,f,L=>n(2,s=L));let{el:m=void 0}=e,{asChild:g=!1}=e;function w(L){let U;const ne=L.closest("[data-cmdk-list]");if(!_a(ne))return;const se=new ResizeObserver(()=>{U=requestAnimationFrame(()=>{const ee=L.offsetHeight;ne.style.setProperty("--cmdk-list-height",ee.toFixed(1)+"px")})});return se.observe(L),{destroy(){cancelAnimationFrame(U),se.unobserve(L)}}}const S={"data-cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:l.list,"aria-labelledby":l.input},M={"data-cmdk-list-sizer":""},$={attrs:S},D={attrs:M,action:w};function F(L){Nt[L?"unshift":"push"](()=>{m=L,n(0,m)})}return i.$$set=L=>{e=Q(Q({},e),bt(L)),n(9,r=Fe(e,t)),"el"in L&&n(0,m=L.el),"asChild"in L&&n(1,g=L.asChild),"$$scope"in L&&n(10,a=L.$$scope)},[m,g,s,f,w,S,M,$,D,r,a,o,F]}class cw extends Xe{constructor(e){super(),Je(this,e,mL,hL,Ze,{el:0,asChild:1})}}const pL=i=>({attrs:i&2}),Lv=i=>({attrs:i[1]}),_L=i=>({attrs:i&2}),Fv=i=>({attrs:i[1]});function gL(i){let e,n,t;const r=i[5].default,s=tt(r,i,i[4],Lv);let o=[i[1],i[2]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("div"),n=ce("div"),s&&s.c(),this.h()},l(l){e=ue(l,"DIV",{});var f=we(e);n=ue(f,"DIV",{"aria-hidden":!0});var m=we(n);s&&s.l(m),m.forEach(I),f.forEach(I),this.h()},h(){oe(n,"aria-hidden",""),ut(e,a)},m(l,f){N(l,e,f),me(e,n),s&&s.m(n,null),t=!0},p(l,f){s&&s.p&&(!t||f&18)&&nt(s,r,l,l[4],t?rt(r,l[4],f,pL):it(l[4]),Lv),ut(e,a=at(o,[f&2&&l[1],f&4&&l[2]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function vL(i){let e;const n=i[5].default,t=tt(n,i,i[4],Fv);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&18)&&nt(t,n,r,r[4],e?rt(n,r[4],s,_L):it(r[4]),Fv)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function bL(i){let e,n,t,r;const s=[vL,gL],o=[];function a(l,f){return l[0]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function yL(i,e,n){let t;const r=["progress","asChild"];let s=Fe(e,r),{$$slots:o={},$$scope:a}=e,{progress:l=0}=e,{asChild:f=!1}=e;return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(2,s=Fe(e,r)),"progress"in m&&n(3,l=m.progress),"asChild"in m&&n(0,f=m.asChild),"$$scope"in m&&n(4,a=m.$$scope)},i.$$.update=()=>{i.$$.dirty&8&&n(1,t={"data-cmdk-loading":"",role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."})},[f,t,s,l,a,o]}class wL extends Xe{constructor(e){super(),Je(this,e,yL,bL,Ze,{progress:3,asChild:0})}}const xL=i=>({}),Bv=i=>({attrs:i[4]});function Nv(i){let e,n,t,r;const s=[CL,kL],o=[];function a(l,f){return l[1]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function kL(i){let e,n=[i[4],i[5]],t={};for(let r=0;r<n.length;r+=1)t=Q(t,n[r]);return{c(){e=ce("div"),this.h()},l(r){e=ue(r,"DIV",{}),we(e).forEach(I),this.h()},h(){ut(e,t)},m(r,s){N(r,e,s)},p(r,s){ut(e,t=at(n,[r[4],s&32&&r[5]]))},i:Ct,o:Ct,d(r){r&&I(e)}}}function CL(i){let e;const n=i[7].default,t=tt(n,i,i[6],Bv);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&64)&&nt(t,n,r,r[6],e?rt(n,r[6],s,xL):it(r[6]),Bv)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function TL(i){let e,n,t=(i[2]||i[0])&&Nv(i);return{c(){t&&t.c(),e=Le()},l(r){t&&t.l(r),e=Le()},m(r,s){t&&t.m(r,s),N(r,e,s),n=!0},p(r,[s]){r[2]||r[0]?t?(t.p(r,s),s&5&&E(t,1)):(t=Nv(r),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(It(),P(t,1,1,()=>{t=null}),Pt())},i(r){n||(E(t),n=!0)},o(r){P(t),n=!1},d(r){r&&I(e),t&&t.d(r)}}}function SL(i,e,n){const t=["alwaysRender","asChild"];let r=Fe(e,t),s,{$$slots:o={},$$scope:a}=e,{alwaysRender:l=!1}=e,{asChild:f=!1}=e;const m=Mc(),g=Bn(m,S=>!S.search);Jt(i,g,S=>n(2,s=S));const w={"data-cmdk-separator":"",role:"separator"};return i.$$set=S=>{e=Q(Q({},e),bt(S)),n(5,r=Fe(e,t)),"alwaysRender"in S&&n(0,l=S.alwaysRender),"asChild"in S&&n(1,f=S.asChild),"$$scope"in S&&n(6,a=S.$$scope)},[l,f,s,g,w,r,a,o]}class EL extends Xe{constructor(e){super(),Je(this,e,SL,TL,Ze,{alwaysRender:0,asChild:1})}}function IL(i){let e;const n=i[3].default,t=tt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&nt(t,n,r,r[5],e?rt(n,r[5],s,null):it(r[5]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function PL(i){let e,n,t;const r=[{class:Et("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",i[1])},i[2]];function s(a){i[4](a)}let o={$$slots:{default:[IL]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)o=Q(o,r[a]);return i[0]!==void 0&&(o.value=i[0]),e=new nw({props:o}),Nt.push(()=>Zn(e,"value",s)),{c(){H(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,l){G(e,a,l),t=!0},p(a,[l]){const f=l&6?at(r,[l&2&&{class:Et("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a[1])},l&4&&dn(a[2])]):{};l&32&&(f.$$scope={dirty:l,ctx:a}),!n&&l&1&&(n=!0,f.value=a[0],Gn(()=>n=!1)),e.$set(f)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){Z(e,a)}}}function $L(i,e,n){const t=["value","class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{value:a=void 0}=e,{class:l=void 0}=e;function f(m){a=m,n(0,a)}return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(2,r=Fe(e,t)),"value"in m&&n(0,a=m.value),"class"in m&&n(1,l=m.class),"$$scope"in m&&n(5,o=m.$$scope)},[a,l,r,s,f,o]}let Rp=class extends Xe{constructor(e){super(),Je(this,e,$L,PL,Ze,{value:0,class:1})}};function AL(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function ML(i){let e,n;const t=[{class:Et("py-6 text-center text-sm",i[0])},i[1]];let r={$$slots:{default:[AL]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new sw({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("py-6 text-center text-sm",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function DL(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}let Lp=class extends Xe{constructor(e){super(),Je(this,e,DL,ML,Ze,{class:0})}};function OL(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function zL(i){let e,n;const t=[{class:Et("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[OL]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new ow({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function RL(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}let Fp=class extends Xe{constructor(e){super(),Je(this,e,RL,zL,Ze,{class:0})}};function LL(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function FL(i){let e,n;const t=[{class:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[0])},i[1]];let r={$$slots:{default:[LL]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new lw({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function BL(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}let Dc=class extends Xe{constructor(e){super(),Je(this,e,BL,FL,Ze,{class:0})}};function NL(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M7.5 2C7.77614 2 8 2.22386 8 2.5L8 11.2929L11.1464 8.14645C11.3417 7.95118 11.6583 7.95118 11.8536 8.14645C12.0488 8.34171 12.0488 8.65829 11.8536 8.85355L7.85355 12.8536C7.75979 12.9473 7.63261 13 7.5 13C7.36739 13 7.24021 12.9473 7.14645 12.8536L3.14645 8.85355C2.95118 8.65829 2.95118 8.34171 3.14645 8.14645C3.34171 7.95118 3.65829 7.95118 3.85355 8.14645L7 11.2929L7 2.5C7 2.22386 7.22386 2 7.5 2Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function VL(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class jL extends Xe{constructor(e){super(),Je(this,e,VL,NL,Ze,{color:0,size:1})}}const uw=jL;function UL(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M7.14645 2.14645C7.34171 1.95118 7.65829 1.95118 7.85355 2.14645L11.8536 6.14645C12.0488 6.34171 12.0488 6.65829 11.8536 6.85355C11.6583 7.04882 11.3417 7.04882 11.1464 6.85355L8 3.70711L8 12.5C8 12.7761 7.77614 13 7.5 13C7.22386 13 7 12.7761 7 12.5L7 3.70711L3.85355 6.85355C3.65829 7.04882 3.34171 7.04882 3.14645 6.85355C2.95118 6.65829 2.95118 6.34171 3.14645 6.14645L7.14645 2.14645Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function qL(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class HL extends Xe{constructor(e){super(),Je(this,e,qL,UL,Ze,{color:0,size:1})}}const fw=HL;function GL(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function ZL(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class WL extends Xe{constructor(e){super(),Je(this,e,ZL,GL,Ze,{color:0,size:1})}}const Bp=WL;function KL(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function XL(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class JL extends Xe{constructor(e){super(),Je(this,e,XL,KL,Ze,{color:0,size:1})}}const dw=JL;function YL(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function QL(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class eF extends Xe{constructor(e){super(),Je(this,e,QL,YL,Ze,{color:0,size:1})}}const hw=eF;function tF(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function nF(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class iF extends Xe{constructor(e){super(),Je(this,e,nF,tF,Ze,{color:0,size:1})}}const mw=iF;function rF(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function sF(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class oF extends Xe{constructor(e){super(),Je(this,e,sF,rF,Ze,{color:0,size:1})}}const pw=oF;function aF(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function lF(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class cF extends Xe{constructor(e){super(),Je(this,e,lF,aF,Ze,{color:0,size:1})}}const uF=cF;function fF(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function dF(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class hF extends Xe{constructor(e){super(),Je(this,e,dF,fF,Ze,{color:0,size:1})}}const _w=hF;function mF(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function pF(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class _F extends Xe{constructor(e){super(),Je(this,e,pF,mF,Ze,{color:0,size:1})}}const gw=_F;function gF(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function vF(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class bF extends Xe{constructor(e){super(),Je(this,e,vF,gF,Ze,{color:0,size:1})}}const yF=bF;function wF(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return{c(){e=Wi("svg"),n=Wi("path"),this.h()},l(s){e=Ki(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=we(e);n=Ki(o,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),we(n).forEach(I),o.forEach(I),this.h()},h(){oe(n,"fill-rule","evenodd"),oe(n,"clip-rule","evenodd"),oe(n,"d","M5.5 3C4.67157 3 4 3.67157 4 4.5C4 5.32843 4.67157 6 5.5 6C6.32843 6 7 5.32843 7 4.5C7 3.67157 6.32843 3 5.5 3ZM3 5C3.01671 5 3.03323 4.99918 3.04952 4.99758C3.28022 6.1399 4.28967 7 5.5 7C6.71033 7 7.71978 6.1399 7.95048 4.99758C7.96677 4.99918 7.98329 5 8 5H13.5C13.7761 5 14 4.77614 14 4.5C14 4.22386 13.7761 4 13.5 4H8C7.98329 4 7.96677 4.00082 7.95048 4.00242C7.71978 2.86009 6.71033 2 5.5 2C4.28967 2 3.28022 2.86009 3.04952 4.00242C3.03323 4.00082 3.01671 4 3 4H1.5C1.22386 4 1 4.22386 1 4.5C1 4.77614 1.22386 5 1.5 5H3ZM11.9505 10.9976C11.7198 12.1399 10.7103 13 9.5 13C8.28967 13 7.28022 12.1399 7.04952 10.9976C7.03323 10.9992 7.01671 11 7 11H1.5C1.22386 11 1 10.7761 1 10.5C1 10.2239 1.22386 10 1.5 10H7C7.01671 10 7.03323 10.0008 7.04952 10.0024C7.28022 8.8601 8.28967 8 9.5 8C10.7103 8 11.7198 8.8601 11.9505 10.0024C11.9668 10.0008 11.9833 10 12 10H13.5C13.7761 10 14 10.2239 14 10.5C14 10.7761 13.7761 11 13.5 11H12C11.9833 11 11.9668 10.9992 11.9505 10.9976ZM8 10.5C8 9.67157 8.67157 9 9.5 9C10.3284 9 11 9.67157 11 10.5C11 11.3284 10.3284 12 9.5 12C8.67157 12 8 11.3284 8 10.5Z"),oe(n,"fill",i[0]),Xi(e,r)},m(s,o){N(s,e,o),me(e,n)},p(s,[o]){o&1&&oe(n,"fill",s[0]),Xi(e,r=at(t,[o&2&&{width:s[1]},o&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},o&4&&s[2]]))},i:Ct,o:Ct,d(s){s&&I(e)}}}function xF(i,e,n){const t=["color","size"];let r=Fe(e,t),{color:s="currentColor"}=e,{size:o=15}=e;return i.$$set=a=>{e=Q(Q({},e),bt(a)),n(2,r=Fe(e,t)),"color"in a&&n(0,s=a.color),"size"in a&&n(1,o=a.size)},[s,o,r]}class kF extends Xe{constructor(e){super(),Je(this,e,xF,wF,Ze,{color:0,size:1})}}const vw=kF;function CF(i){let e,n,t,r,s,o;n=new yF({props:{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}});const a=[{class:Et("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]];function l(m){i[3](m)}let f={};for(let m=0;m<a.length;m+=1)f=Q(f,a[m]);return i[0]!==void 0&&(f.value=i[0]),r=new aw({props:f}),Nt.push(()=>Zn(r,"value",l)),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),H(r.$$.fragment),this.h()},l(m){e=ue(m,"DIV",{class:!0,"data-cmdk-input-wrapper":!0});var g=we(e);W(n.$$.fragment,g),t=Ce(g),W(r.$$.fragment,g),g.forEach(I),this.h()},h(){oe(e,"class","flex items-center border-b px-3"),oe(e,"data-cmdk-input-wrapper","")},m(m,g){N(m,e,g),G(n,e,null),me(e,t),G(r,e,null),o=!0},p(m,[g]){const w=g&6?at(a,[g&2&&{class:Et("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",m[1])},g&4&&dn(m[2])]):{};!s&&g&1&&(s=!0,w.value=m[0],Gn(()=>s=!1)),r.$set(w)},i(m){o||(E(n.$$.fragment,m),E(r.$$.fragment,m),o=!0)},o(m){P(n.$$.fragment,m),P(r.$$.fragment,m),o=!1},d(m){m&&I(e),Z(n),Z(r)}}}function TF(i,e,n){const t=["class","value"];let r=Fe(e,t),{class:s=void 0}=e,{value:o=""}=e;function a(l){o=l,n(0,o)}return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(2,r=Fe(e,t)),"class"in l&&n(1,s=l.class),"value"in l&&n(0,o=l.value)},[o,s,r,a]}let Np=class extends Xe{constructor(e){super(),Je(this,e,TF,CF,Ze,{class:1,value:0})}};function SF(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function EF(i){let e,n;const t=[{class:Et("max-h-[300px] overflow-y-auto overflow-x-hidden",i[0])},i[1]];let r={$$slots:{default:[SF]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new cw({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("max-h-[300px] overflow-y-auto overflow-x-hidden",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function IF(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}let Vp=class extends Xe{constructor(e){super(),Je(this,e,IF,EF,Ze,{class:0})}};function PF(i){let e,n;const t=[{class:Et("-mx-1 h-px bg-border",i[0])},i[1]];let r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new EL({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("-mx-1 h-px bg-border",s[0])},o&2&&dn(s[1])]):{};e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function $F(i,e,n){const t=["class"];let r=Fe(e,t),{class:s=void 0}=e;return i.$$set=o=>{e=Q(Q({},e),bt(o)),n(1,r=Fe(e,t)),"class"in o&&n(0,s=o.class)},[s,r]}class jp extends Xe{constructor(e){super(),Je(this,e,$F,PF,Ze,{class:0})}}function AF(i){let e;const n=i[6].default,t=tt(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&nt(t,n,r,r[7],e?rt(n,r[7],s,null):it(r[7]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function MF(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{align:i[3]},{sideOffset:i[4]},i[5],{class:Et("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",i[0])}];let r={$$slots:{default:[AF]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new P2({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&63?at(t,[o&2&&{transition:s[1]},o&4&&{transitionConfig:s[2]},o&8&&{align:s[3]},o&16&&{sideOffset:s[4]},o&32&&dn(s[5]),o&1&&{class:Et("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",s[0])}]):{};o&128&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function DF(i,e,n){const t=["class","transition","transitionConfig","align","sideOffset"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{transition:l=pl}=e,{transitionConfig:f=void 0}=e,{align:m="center"}=e,{sideOffset:g=4}=e;return i.$$set=w=>{e=Q(Q({},e),bt(w)),n(5,r=Fe(e,t)),"class"in w&&n(0,a=w.class),"transition"in w&&n(1,l=w.transition),"transitionConfig"in w&&n(2,f=w.transitionConfig),"align"in w&&n(3,m=w.align),"sideOffset"in w&&n(4,g=w.sideOffset),"$$scope"in w&&n(7,o=w.$$scope)},[a,l,f,m,g,r,s,o]}let Up=class extends Xe{constructor(e){super(),Je(this,e,DF,MF,Ze,{class:0,transition:1,transitionConfig:2,align:3,sideOffset:4})}};const qp=I2,Hp=$2;function OF(i){let e;const n=i[5].default,t=tt(n,i,i[8],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&256)&&nt(t,n,r,r[8],e?rt(n,r[8],s,null):it(r[8]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function zF(i){let e,n;const t=[{builders:i[3]},{class:Et(Vv({variant:i[1],size:i[2],className:i[0]}))},{type:"button"},i[4]];let r={$$slots:{default:[OF]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new IC({props:r}),e.$on("click",i[6]),e.$on("keydown",i[7]),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&31?at(t,[o&8&&{builders:s[3]},o&7&&{class:Et(Vv({variant:s[1],size:s[2],className:s[0]}))},t[2],o&16&&dn(s[4])]):{};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function RF(i,e,n){const t=["class","variant","size","builders"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{variant:l="default"}=e,{size:f="default"}=e,{builders:m=[]}=e;function g(S){At.call(this,i,S)}function w(S){At.call(this,i,S)}return i.$$set=S=>{e=Q(Q({},e),bt(S)),n(4,r=Fe(e,t)),"class"in S&&n(0,a=S.class),"variant"in S&&n(1,l=S.variant),"size"in S&&n(2,f=S.size),"builders"in S&&n(3,m=S.builders),"$$scope"in S&&n(8,o=S.$$scope)},[a,l,f,m,r,s,g,w,o]}class Cr extends Xe{constructor(e){super(),Je(this,e,RF,zF,Ze,{class:0,variant:1,size:2,builders:3})}}const Vv=up({base:"inline-flex items-center justify-center rounded-md text-sm font-medium whitespace-nowrap transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}});function LF(i){let e,n;const t=[{class:Et("shrink-0 bg-border",i[1]==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",i[0])},{orientation:i[1]},{decorative:i[2]},i[3]];let r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new g5({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&15?at(t,[o&3&&{class:Et("shrink-0 bg-border",s[1]==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s[0])},o&2&&{orientation:s[1]},o&4&&{decorative:s[2]},o&8&&dn(s[3])]):{};e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function FF(i,e,n){const t=["class","orientation","decorative"];let r=Fe(e,t),{class:s=void 0}=e,{orientation:o="horizontal"}=e,{decorative:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(3,r=Fe(e,t)),"class"in l&&n(0,s=l.class),"orientation"in l&&n(1,o=l.orientation),"decorative"in l&&n(2,a=l.decorative)},[s,o,a,r]}class To extends Xe{constructor(e){super(),Je(this,e,FF,LF,Ze,{class:0,orientation:1,decorative:2})}}function Nm(i){let e,n,t;const r=i[5].default,s=tt(r,i,i[4],null);let o=[{href:i[1]},{class:n=Et(jv({variant:i[2],className:i[0]}))},i[3]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce(i[1]?"a":"span"),s&&s.c(),this.h()},l(l){e=ue(l,((i[1]?"a":"span")||"null").toUpperCase(),{href:!0,class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){vo(i[1]?"a":"span")(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,f){s&&s.p&&(!t||f&16)&&nt(s,r,l,l[4],t?rt(r,l[4],f,null):it(l[4]),null),vo(l[1]?"a":"span")(e,a=at(o,[(!t||f&2)&&{href:l[1]},(!t||f&5&&n!==(n=Et(jv({variant:l[2],className:l[0]}))))&&{class:n},f&8&&l[3]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function BF(i){let e=i[1]?"a":"span",n,t,r=(i[1]?"a":"span")&&Nm(i);return{c(){r&&r.c(),n=Le()},l(s){r&&r.l(s),n=Le()},m(s,o){r&&r.m(s,o),N(s,n,o),t=!0},p(s,[o]){s[1],e?Ze(e,s[1]?"a":"span")?(r.d(1),r=Nm(s),e=s[1]?"a":"span",r.c(),r.m(n.parentNode,n)):r.p(s,o):(r=Nm(s),e=s[1]?"a":"span",r.c(),r.m(n.parentNode,n))},i(s){t||(E(r,s),t=!0)},o(s){P(r,s),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function NF(i,e,n){const t=["class","href","variant"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{href:l=void 0}=e,{variant:f="default"}=e;return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(3,r=Fe(e,t)),"class"in m&&n(0,a=m.class),"href"in m&&n(1,l=m.href),"variant"in m&&n(2,f=m.variant),"$$scope"in m&&n(4,o=m.$$scope)},[a,l,f,r,o,s]}class Wo extends Xe{constructor(e){super(),Je(this,e,NF,BF,Ze,{class:0,href:1,variant:2})}}const jv=up({base:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 select-none",variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Uv(i,e,n){const t=i.slice();return t[10]=e[n],t}function qv(i,e,n){const t=i.slice();return t[10]=e[n],t}function Hv(i){let e,n,t,r,s,o,a,l;e=new To({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new Wo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[VF]},$$scope:{ctx:i}}});const f=[UF,jF],m=[];function g(w,S){return w[0].length>2?0:1}return o=g(i),a=m[o]=f[o](i),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),s=ce("div"),a.c(),this.h()},l(w){W(e.$$.fragment,w),n=Ce(w),W(t.$$.fragment,w),r=Ce(w),s=ue(w,"DIV",{class:!0});var S=we(s);a.l(S),S.forEach(I),this.h()},h(){oe(s,"class","hidden space-x-1 lg:flex")},m(w,S){G(e,w,S),N(w,n,S),G(t,w,S),N(w,r,S),N(w,s,S),m[o].m(s,null),l=!0},p(w,S){const M={};S&65537&&(M.$$scope={dirty:S,ctx:w}),t.$set(M);let $=o;o=g(w),o===$?m[o].p(w,S):(It(),P(m[$],1,1,()=>{m[$]=null}),Pt(),a=m[o],a?a.p(w,S):(a=m[o]=f[o](w),a.c()),E(a,1),a.m(s,null))},i(w){l||(E(e.$$.fragment,w),E(t.$$.fragment,w),E(a),l=!0)},o(w){P(e.$$.fragment,w),P(t.$$.fragment,w),P(a),l=!1},d(w){w&&(I(n),I(r),I(s)),Z(e,w),Z(t,w),m[o].d()}}}function VF(i){let e=i[0].length+"",n;return{c(){n=lt(e)},l(t){n=ct(t,e)},m(t,r){N(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&cn(n,e)},d(t){t&&I(n)}}}function jF(i){let e,n,t=kn(i[0]),r=[];for(let o=0;o<t.length;o+=1)r[o]=Gv(qv(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&1){t=kn(o[0]);let l;for(l=0;l<t.length;l+=1){const f=qv(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=Gv(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function UF(i){let e,n;return e=new Wo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[HF]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function qF(i){let e=i[10]+"",n,t;return{c(){n=lt(e),t=ke()},l(r){n=ct(r,e),t=Ce(r)},m(r,s){N(r,n,s),N(r,t,s)},p(r,s){s&1&&e!==(e=r[10]+"")&&cn(n,e)},d(r){r&&(I(n),I(t))}}}function Gv(i){let e,n;return e=new Wo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[qF]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function HF(i){let e=i[0].length+"",n,t;return{c(){n=lt(e),t=lt(" Selected")},l(r){n=ct(r,e),t=ct(r," Selected")},m(r,s){N(r,n,s),N(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&cn(n,e)},d(r){r&&(I(n),I(t))}}}function GF(i){let e,n,t,r,s,o,a;e=new dp({props:{class:"mr-2 h-5 w-5"}});let l=i[0].length>0&&Hv(i);return{c(){H(e.$$.fragment),n=ke(),t=ce("p"),r=lt(i[1]),s=ke(),l&&l.c(),o=Le(),this.h()},l(f){W(e.$$.fragment,f),n=Ce(f),t=ue(f,"P",{class:!0});var m=we(t);r=ct(m,i[1]),m.forEach(I),s=Ce(f),l&&l.l(f),o=Le(),this.h()},h(){oe(t,"class","text-sm")},m(f,m){G(e,f,m),N(f,n,m),N(f,t,m),me(t,r),N(f,s,m),l&&l.m(f,m),N(f,o,m),a=!0},p(f,m){(!a||m&2)&&cn(r,f[1]),f[0].length>0?l?(l.p(f,m),m&1&&E(l,1)):(l=Hv(f),l.c(),E(l,1),l.m(o.parentNode,o)):l&&(It(),P(l,1,1,()=>{l=null}),Pt())},i(f){a||(E(e.$$.fragment,f),E(l),a=!0)},o(f){P(e.$$.fragment,f),P(l),a=!1},d(f){f&&(I(n),I(t),I(s),I(o)),Z(e,f),l&&l.d(f)}}}function ZF(i){let e,n;return e=new Cr({props:{builders:[i[13]],variant:"outline",class:"h-10 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[GF]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&8192&&(s.builders=[t[13]]),r&65539&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function WF(i){let e;return{c(){e=lt("No results found.")},l(n){e=ct(n,"No results found.")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Zv(i){let e,n=i[3][i[10]]+"",t;return{c(){e=ce("span"),t=lt(n),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=we(e);t=ct(s,n),s.forEach(I),this.h()},h(){oe(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){N(r,e,s),me(e,t)},p(r,s){s&12&&n!==(n=r[3][r[10]]+"")&&cn(t,n)},d(r){r&&I(e)}}}function KF(i){let e,n,t,r,s,o=i[10]+"",a,l,f,m;n=new hp({props:{className:Et("h-4 w-4")}});let g=i[3][i[10]]&&Zv(i);return{c(){e=ce("div"),H(n.$$.fragment),r=ke(),s=ce("span"),a=lt(o),l=ke(),g&&g.c(),f=ke(),this.h()},l(w){e=ue(w,"DIV",{class:!0});var S=we(e);W(n.$$.fragment,S),S.forEach(I),r=Ce(w),s=ue(w,"SPAN",{});var M=we(s);a=ct(M,o),M.forEach(I),l=Ce(w),g&&g.l(w),f=Ce(w),this.h()},h(){oe(e,"class",t=Et("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[10])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m(w,S){N(w,e,S),G(n,e,null),N(w,r,S),N(w,s,S),me(s,a),N(w,l,S),g&&g.m(w,S),N(w,f,S),m=!0},p(w,S){(!m||S&5&&t!==(t=Et("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",w[0].includes(w[10])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&oe(e,"class",t),(!m||S&4)&&o!==(o=w[10]+"")&&cn(a,o),w[3][w[10]]?g?g.p(w,S):(g=Zv(w),g.c(),g.m(f.parentNode,f)):g&&(g.d(1),g=null)},i(w){m||(E(n.$$.fragment,w),m=!0)},o(w){P(n.$$.fragment,w),m=!1},d(w){w&&(I(e),I(r),I(s),I(l),I(f)),Z(n),g&&g.d(w)}}}function Wv(i){let e,n;return e=new Dc({props:{class:"cursor-pointer",value:i[10],onSelect:i[7],$$slots:{default:[KF]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[10]),r&65549&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function XF(i){let e,n,t=kn(i[2]),r=[];for(let o=0;o<t.length;o+=1)r[o]=Wv(Uv(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&77){t=kn(o[2]);let l;for(l=0;l<t.length;l+=1){const f=Uv(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=Wv(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function Kv(i){let e,n,t,r;return e=new jp({}),t=new Dc({props:{class:"justify-center text-center cursor-pointer",onSelect:i[8],$$slots:{default:[JF]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&1&&(a.onSelect=s[8]),o&65536&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function JF(i){let e;return{c(){e=lt("Clear Filter")},l(n){e=ct(n,"Clear Filter")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function YF(i){let e,n,t,r,s,o;e=new Lp({props:{$$slots:{default:[WF]},$$scope:{ctx:i}}}),t=new Fp({props:{$$slots:{default:[XF]},$$scope:{ctx:i}}});let a=i[0].length>0&&Kv(i);return{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),a&&a.c(),s=Le()},l(l){W(e.$$.fragment,l),n=Ce(l),W(t.$$.fragment,l),r=Ce(l),a&&a.l(l),s=Le()},m(l,f){G(e,l,f),N(l,n,f),G(t,l,f),N(l,r,f),a&&a.m(l,f),N(l,s,f),o=!0},p(l,f){const m={};f&65536&&(m.$$scope={dirty:f,ctx:l}),e.$set(m);const g={};f&65549&&(g.$$scope={dirty:f,ctx:l}),t.$set(g),l[0].length>0?a?(a.p(l,f),f&1&&E(a,1)):(a=Kv(l),a.c(),E(a,1),a.m(s.parentNode,s)):a&&(It(),P(a,1,1,()=>{a=null}),Pt())},i(l){o||(E(e.$$.fragment,l),E(t.$$.fragment,l),E(a),o=!0)},o(l){P(e.$$.fragment,l),P(t.$$.fragment,l),P(a),o=!1},d(l){l&&(I(n),I(r),I(s)),Z(e,l),Z(t,l),a&&a.d(l)}}}function QF(i){let e,n,t,r;return e=new Np({props:{placeholder:i[1]}}),t=new Vp({props:{$$slots:{default:[YF]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&2&&(a.placeholder=s[1]),e.$set(a);const l={};o&65549&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function e7(i){let e,n;return e=new Rp({props:{loop:!0,$$slots:{default:[QF]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65551&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function t7(i){let e,n,t,r;return e=new Hp({props:{asChild:!0,$$slots:{default:[ZF,({builder:s})=>({13:s}),({builder:s})=>s?8192:0]},$$scope:{ctx:i}}}),t=new Up({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[e7]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&73731&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&65551&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function n7(i){let e,n,t;function r(o){i[9](o)}let s={disableFocusTrap:!0,onOutsideClick:i[4],$$slots:{default:[t7]},$$scope:{ctx:i}};return i[5]!==void 0&&(s.open=i[5]),e=new qp({props:s}),Nt.push(()=>Zn(e,"open",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,[a]){const l={};a&65551&&(l.$$scope={dirty:a,ctx:o}),!n&&a&32&&(n=!0,l.open=o[5],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function i7(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{poiFeatureOptions:s}=e,{counts:o={}}=e,a=!1;const l=()=>n(5,a=!1);function f(S){Array.isArray(t)&&t.includes(S)?n(0,t=t.filter(M=>M!==S)):n(0,t=[...Array.isArray(t)?t:[],S])}const m=S=>{f(S)},g=()=>{n(0,t=[])};function w(S){a=S,n(5,a)}return i.$$set=S=>{"filterValues"in S&&n(0,t=S.filterValues),"title"in S&&n(1,r=S.title),"poiFeatureOptions"in S&&n(2,s=S.poiFeatureOptions),"counts"in S&&n(3,o=S.counts)},[t,r,s,o,l,a,f,m,g,w]}class r7 extends Xe{constructor(e){super(),Je(this,e,i7,n7,Ze,{filterValues:0,title:1,poiFeatureOptions:2,counts:3,forceClosePopover:4})}get forceClosePopover(){return this.$$.ctx[4]}}function s7(i){let e;const n=i[3].default,t=tt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&nt(t,n,r,r[5],e?rt(n,r[5],s,null):it(r[5]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function o7(i){let e,n,t;const r=[{class:Et("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",i[1])},i[2]];function s(a){i[4](a)}let o={$$slots:{default:[s7]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)o=Q(o,r[a]);return i[0]!==void 0&&(o.value=i[0]),e=new nw({props:o}),Nt.push(()=>Zn(e,"value",s)),{c(){H(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,l){G(e,a,l),t=!0},p(a,[l]){const f=l&6?at(r,[l&2&&{class:Et("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a[1])},l&4&&dn(a[2])]):{};l&32&&(f.$$scope={dirty:l,ctx:a}),!n&&l&1&&(n=!0,f.value=a[0],Gn(()=>n=!1)),e.$set(f)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){Z(e,a)}}}function a7(i,e,n){const t=["value","class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{value:a=void 0}=e,{class:l=void 0}=e;function f(m){a=m,n(0,a)}return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(2,r=Fe(e,t)),"value"in m&&n(0,a=m.value),"class"in m&&n(1,l=m.class),"$$scope"in m&&n(5,o=m.$$scope)},[a,l,r,s,f,o]}class bw extends Xe{constructor(e){super(),Je(this,e,a7,o7,Ze,{value:0,class:1})}}function l7(i){let e;const n=i[3].default,t=tt(n,i,i[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&64)&&nt(t,n,r,r[6],e?rt(n,r[6],s,null):it(r[6]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function c7(i){let e,n,t;const r=[{class:"[&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground [&_[data-cmdk-group]:not([hidden])_~[data-cmdk-group]]:pt-0 [&_[data-cmdk-group]]:px-2 [&_[data-cmdk-input-wrapper]_svg]:h-5 [&_[data-cmdk-input-wrapper]_svg]:w-5 [&_[data-cmdk-input]]:h-12 [&_[data-cmdk-item]]:px-2 [&_[data-cmdk-item]]:py-3 [&_[data-cmdk-item]_svg]:h-5 [&_[data-cmdk-item]_svg]:w-5"},i[2]];function s(a){i[4](a)}let o={$$slots:{default:[l7]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)o=Q(o,r[a]);return i[1]!==void 0&&(o.value=i[1]),e=new bw({props:o}),Nt.push(()=>Zn(e,"value",s)),{c(){H(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,l){G(e,a,l),t=!0},p(a,l){const f=l&4?at(r,[r[0],dn(a[2])]):{};l&64&&(f.$$scope={dirty:l,ctx:a}),!n&&l&2&&(n=!0,f.value=a[1],Gn(()=>n=!1)),e.$set(f)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){Z(e,a)}}}function u7(i){let e,n;return e=new vl({props:{class:"overflow-hidden p-0 shadow-lg",$$slots:{default:[c7]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&70&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function f7(i){let e,n,t;const r=[i[2]];function s(a){i[5](a)}let o={$$slots:{default:[u7]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)o=Q(o,r[a]);return i[0]!==void 0&&(o.open=i[0]),e=new bl({props:o}),Nt.push(()=>Zn(e,"open",s)),{c(){H(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,l){G(e,a,l),t=!0},p(a,[l]){const f=l&4?at(r,[dn(a[2])]):{};l&70&&(f.$$scope={dirty:l,ctx:a}),!n&&l&1&&(n=!0,f.open=a[0],Gn(()=>n=!1)),e.$set(f)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){Z(e,a)}}}function d7(i,e,n){const t=["open","value"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{open:a=!1}=e,{value:l=void 0}=e;function f(g){l=g,n(1,l)}function m(g){a=g,n(0,a)}return i.$$set=g=>{e=Q(Q({},e),bt(g)),n(2,r=Fe(e,t)),"open"in g&&n(0,a=g.open),"value"in g&&n(1,l=g.value),"$$scope"in g&&n(6,o=g.$$scope)},[a,l,r,s,f,m,o]}class h7 extends Xe{constructor(e){super(),Je(this,e,d7,f7,Ze,{open:0,value:1})}}function m7(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function p7(i){let e,n;const t=[{class:Et("py-6 text-center text-sm",i[0])},i[1]];let r={$$slots:{default:[m7]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new sw({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("py-6 text-center text-sm",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function _7(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}class yw extends Xe{constructor(e){super(),Je(this,e,_7,p7,Ze,{class:0})}}function g7(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function v7(i){let e,n;const t=[{class:Et("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[g7]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new ow({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function b7(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}class ef extends Xe{constructor(e){super(),Je(this,e,b7,v7,Ze,{class:0})}}function y7(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function w7(i){let e,n;const t=[{class:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[0])},i[1]];let r={$$slots:{default:[y7]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new lw({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function x7(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}class uf extends Xe{constructor(e){super(),Je(this,e,x7,w7,Ze,{class:0})}}function k7(i){let e,n,t,r,s,o;n=new jy({props:{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}});const a=[{class:Et("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]];function l(m){i[3](m)}let f={};for(let m=0;m<a.length;m+=1)f=Q(f,a[m]);return i[0]!==void 0&&(f.value=i[0]),r=new aw({props:f}),Nt.push(()=>Zn(r,"value",l)),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),H(r.$$.fragment),this.h()},l(m){e=ue(m,"DIV",{class:!0,"data-cmdk-input-wrapper":!0});var g=we(e);W(n.$$.fragment,g),t=Ce(g),W(r.$$.fragment,g),g.forEach(I),this.h()},h(){oe(e,"class","flex items-center border-b px-2"),oe(e,"data-cmdk-input-wrapper","")},m(m,g){N(m,e,g),G(n,e,null),me(e,t),G(r,e,null),o=!0},p(m,[g]){const w=g&6?at(a,[g&2&&{class:Et("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",m[1])},g&4&&dn(m[2])]):{};!s&&g&1&&(s=!0,w.value=m[0],Gn(()=>s=!1)),r.$set(w)},i(m){o||(E(n.$$.fragment,m),E(r.$$.fragment,m),o=!0)},o(m){P(n.$$.fragment,m),P(r.$$.fragment,m),o=!1},d(m){m&&I(e),Z(n),Z(r)}}}function C7(i,e,n){const t=["class","value"];let r=Fe(e,t),{class:s=void 0}=e,{value:o=""}=e;function a(l){o=l,n(0,o)}return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(2,r=Fe(e,t)),"class"in l&&n(1,s=l.class),"value"in l&&n(0,o=l.value)},[o,s,r,a]}class ww extends Xe{constructor(e){super(),Je(this,e,C7,k7,Ze,{class:1,value:0})}}function T7(i){let e;const n=i[2].default,t=tt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&nt(t,n,r,r[3],e?rt(n,r[3],s,null):it(r[3]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function S7(i){let e,n;const t=[{class:Et("max-h-[300px] overflow-y-auto overflow-x-hidden",i[0])},i[1]];let r={$$slots:{default:[T7]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new cw({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("max-h-[300px] overflow-y-auto overflow-x-hidden",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function E7(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}class I7 extends Xe{constructor(e){super(),Je(this,e,E7,S7,Ze,{class:0})}}const P7=wL;function $7(i){let e;const n=i[4].default,t=tt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&nt(t,n,r,r[5],e?rt(n,r[5],s,null):it(r[5]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function A7(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{class:Et("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",i[0])},i[3]];let r={$$slots:{default:[$7]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new P2({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&15?at(t,[o&2&&{transition:s[1]},o&4&&{transitionConfig:s[2]},o&1&&{class:Et("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",s[0])},o&8&&dn(s[3])]):{};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function M7(i,e,n){const t=["class","transition","transitionConfig"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{transition:l=pl}=e,{transitionConfig:f=void 0}=e;return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(3,r=Fe(e,t)),"class"in m&&n(0,a=m.class),"transition"in m&&n(1,l=m.transition),"transitionConfig"in m&&n(2,f=m.transitionConfig),"$$scope"in m&&n(5,o=m.$$scope)},[a,l,f,r,s,o]}class xw extends Xe{constructor(e){super(),Je(this,e,M7,A7,Ze,{class:0,transition:1,transitionConfig:2})}}const kw=I2,Cw=$2;function Xv(i,e,n){const t=i.slice();return t[8]=e[n],t}function D7(i){let e,n,t,r,s=i[0].label+"",o,a,l,f;return n=new T3({props:{class:"h-5 w-5"}}),l=new QC({props:{class:"ml-2 h-4 w-4 shrink-0 opacity-50"}}),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),r=ce("p"),o=lt(s),a=ke(),H(l.$$.fragment),this.h()},l(m){e=ue(m,"DIV",{class:!0});var g=we(e);W(n.$$.fragment,g),t=Ce(g),r=ue(g,"P",{class:!0});var w=we(r);o=ct(w,s),w.forEach(I),g.forEach(I),a=Ce(m),W(l.$$.fragment,m),this.h()},h(){oe(r,"class","max-lg:hidden text-sm"),oe(e,"class","flex gap-2")},m(m,g){N(m,e,g),G(n,e,null),me(e,t),me(e,r),me(r,o),N(m,a,g),G(l,m,g),f=!0},p(m,g){(!f||g&1)&&s!==(s=m[0].label+"")&&cn(o,s)},i(m){f||(E(n.$$.fragment,m),E(l.$$.fragment,m),f=!0)},o(m){P(n.$$.fragment,m),P(l.$$.fragment,m),f=!1},d(m){m&&(I(e),I(a)),Z(n),Z(l,m)}}}function O7(i){let e,n;return e=new qi({props:{builders:[i[11]],variant:"outline",role:"combobox","aria-expanded":i[3],$$slots:{default:[D7]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&2048&&(s.builders=[t[11]]),r&8&&(s["aria-expanded"]=t[3]),r&4097&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function z7(i){let e;return{c(){e=lt("No map layer found.")},l(n){e=ct(n,"No map layer found.")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function R7(i){let e,n,t=i[8].label+"",r,s,o;return e=new fp({props:{class:Et("mr-2 h-4 w-4",i[2]!==i[8].value&&"text-transparent")}}),{c(){H(e.$$.fragment),n=ke(),r=lt(t),s=ke()},l(a){W(e.$$.fragment,a),n=Ce(a),r=ct(a,t),s=Ce(a)},m(a,l){G(e,a,l),N(a,n,l),N(a,r,l),N(a,s,l),o=!0},p(a,l){const f={};l&4&&(f.class=Et("mr-2 h-4 w-4",a[2]!==a[8].value&&"text-transparent")),e.$set(f)},i(a){o||(E(e.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),o=!1},d(a){a&&(I(n),I(r),I(s)),Z(e,a)}}}function Jv(i){let e,n;function t(...r){return i[5](i[7],...r)}return e=new uf({props:{class:"cursor-pointer",value:i[8].value,onSelect:t,$$slots:{default:[R7]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(r){W(e.$$.fragment,r)},m(r,s){G(e,r,s),n=!0},p(r,s){i=r;const o={};s&132&&(o.onSelect=t),s&4100&&(o.$$scope={dirty:s,ctx:i}),e.$set(o)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){P(e.$$.fragment,r),n=!1},d(r){Z(e,r)}}}function L7(i){let e,n,t=kn(sl),r=[];for(let o=0;o<t.length;o+=1)r[o]=Jv(Xv(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&148){t=kn(sl);let l;for(l=0;l<t.length;l+=1){const f=Xv(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=Jv(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function F7(i){let e,n,t,r,s,o;return e=new ww({props:{placeholder:"Search map layers…"}}),t=new yw({props:{$$slots:{default:[z7]},$$scope:{ctx:i}}}),s=new ef({props:{$$slots:{default:[L7]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),H(s.$$.fragment)},l(a){W(e.$$.fragment,a),n=Ce(a),W(t.$$.fragment,a),r=Ce(a),W(s.$$.fragment,a)},m(a,l){G(e,a,l),N(a,n,l),G(t,a,l),N(a,r,l),G(s,a,l),o=!0},p(a,l){const f={};l&4096&&(f.$$scope={dirty:l,ctx:a}),t.$set(f);const m={};l&4228&&(m.$$scope={dirty:l,ctx:a}),s.$set(m)},i(a){o||(E(e.$$.fragment,a),E(t.$$.fragment,a),E(s.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),P(s.$$.fragment,a),o=!1},d(a){a&&(I(n),I(r)),Z(e,a),Z(t,a),Z(s,a)}}}function B7(i){let e,n;return e=new bw({props:{$$slots:{default:[F7]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4228&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function N7(i){let e,n,t,r;return e=new Cw({props:{asChild:!0,$$slots:{default:[O7,({builder:s})=>({11:s}),({builder:s})=>s?2048:0]},$$scope:{ctx:i}}}),t=new xw({props:{class:"w-[200px] p-0 mt-1",align:"end",$$slots:{default:[B7]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&6153&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&4228&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function V7(i){let e,n,t;function r(o){i[6](o)}let s={disableFocusTrap:!0,onOutsideClick:i[1],$$slots:{default:[N7,({ids:o})=>({7:o}),({ids:o})=>o?128:0]},$$scope:{ctx:i}};return i[3]!==void 0&&(s.open=i[3]),e=new kw({props:s}),Nt.push(()=>Zn(e,"open",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,[a]){const l={};a&4237&&(l.$$scope={dirty:a,ctx:o}),!n&&a&8&&(n=!0,l.open=o[3],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function j7(i,e,n){let{selectedMapLayer:t}=e,r=!1;const s=()=>n(3,r=!1);let o="";function a(m){n(3,r=!1),Gi().then(()=>{var g;(g=document.getElementById(m))==null||g.focus()})}const l=(m,g)=>{n(2,o=g),localStorage.setItem("preferredMapLayer",g),a(m.trigger)};function f(m){r=m,n(3,r)}return i.$$set=m=>{"selectedMapLayer"in m&&n(0,t=m.selectedMapLayer)},i.$$.update=()=>{i.$$.dirty&5&&(sl.find(m=>m.value===o)?n(0,t=sl.find(m=>m.value===o)):n(2,o=t.value))},[t,s,o,r,a,l,f]}class U7 extends Xe{constructor(e){super(),Je(this,e,j7,V7,Ze,{selectedMapLayer:0,forceClosePopover:1})}get forceClosePopover(){return this.$$.ctx[1]}}function Tw(i,e){return function(){return i.apply(e,arguments)}}const{toString:q7}=Object.prototype,{getPrototypeOf:Gp}=Object,dh=(i=>e=>{const n=q7.call(e);return i[n]||(i[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),So=i=>(i=i.toLowerCase(),e=>dh(e)===i),hh=i=>e=>typeof e===i,{isArray:Oc}=Array,tf=hh("undefined");function H7(i){return i!==null&&!tf(i)&&i.constructor!==null&&!tf(i.constructor)&&qs(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const Sw=So("ArrayBuffer");function G7(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&Sw(i.buffer),e}const Z7=hh("string"),qs=hh("function"),Ew=hh("number"),mh=i=>i!==null&&typeof i=="object",W7=i=>i===!0||i===!1,Od=i=>{if(dh(i)!=="object")return!1;const e=Gp(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},K7=So("Date"),X7=So("File"),J7=So("Blob"),Y7=So("FileList"),Q7=i=>mh(i)&&qs(i.pipe),eB=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||qs(i.append)&&((e=dh(i))==="formdata"||e==="object"&&qs(i.toString)&&i.toString()==="[object FormData]"))},tB=So("URLSearchParams"),nB=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ff(i,e,{allOwnKeys:n=!1}={}){if(i===null||typeof i>"u")return;let t,r;if(typeof i!="object"&&(i=[i]),Oc(i))for(t=0,r=i.length;t<r;t++)e.call(null,i[t],t,i);else{const s=n?Object.getOwnPropertyNames(i):Object.keys(i),o=s.length;let a;for(t=0;t<o;t++)a=s[t],e.call(null,i[a],a,i)}}function Iw(i,e){e=e.toLowerCase();const n=Object.keys(i);let t=n.length,r;for(;t-- >0;)if(r=n[t],e===r.toLowerCase())return r;return null}const Pw=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),$w=i=>!tf(i)&&i!==Pw;function np(){const{caseless:i}=$w(this)&&this||{},e={},n=(t,r)=>{const s=i&&Iw(e,r)||r;Od(e[s])&&Od(t)?e[s]=np(e[s],t):Od(t)?e[s]=np({},t):Oc(t)?e[s]=t.slice():e[s]=t};for(let t=0,r=arguments.length;t<r;t++)arguments[t]&&ff(arguments[t],n);return e}const iB=(i,e,n,{allOwnKeys:t}={})=>(ff(e,(r,s)=>{n&&qs(r)?i[s]=Tw(r,n):i[s]=r},{allOwnKeys:t}),i),rB=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),sB=(i,e,n,t)=>{i.prototype=Object.create(e.prototype,t),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),n&&Object.assign(i.prototype,n)},oB=(i,e,n,t)=>{let r,s,o;const a={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),s=r.length;s-- >0;)o=r[s],(!t||t(o,i,e))&&!a[o]&&(e[o]=i[o],a[o]=!0);i=n!==!1&&Gp(i)}while(i&&(!n||n(i,e))&&i!==Object.prototype);return e},aB=(i,e,n)=>{i=String(i),(n===void 0||n>i.length)&&(n=i.length),n-=e.length;const t=i.indexOf(e,n);return t!==-1&&t===n},lB=i=>{if(!i)return null;if(Oc(i))return i;let e=i.length;if(!Ew(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=i[e];return n},cB=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&Gp(Uint8Array)),uB=(i,e)=>{const t=(i&&i[Symbol.iterator]).call(i);let r;for(;(r=t.next())&&!r.done;){const s=r.value;e.call(i,s[0],s[1])}},fB=(i,e)=>{let n;const t=[];for(;(n=i.exec(e))!==null;)t.push(n);return t},dB=So("HTMLFormElement"),hB=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,t,r){return t.toUpperCase()+r}),Yv=(({hasOwnProperty:i})=>(e,n)=>i.call(e,n))(Object.prototype),mB=So("RegExp"),Aw=(i,e)=>{const n=Object.getOwnPropertyDescriptors(i),t={};ff(n,(r,s)=>{let o;(o=e(r,s,i))!==!1&&(t[s]=o||r)}),Object.defineProperties(i,t)},pB=i=>{Aw(i,(e,n)=>{if(qs(i)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const t=i[n];if(qs(t)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},_B=(i,e)=>{const n={},t=r=>{r.forEach(s=>{n[s]=!0})};return Oc(i)?t(i):t(String(i).split(e)),n},gB=()=>{},vB=(i,e)=>(i=+i,Number.isFinite(i)?i:e),Vm="abcdefghijklmnopqrstuvwxyz",Qv="0123456789",Mw={DIGIT:Qv,ALPHA:Vm,ALPHA_DIGIT:Vm+Vm.toUpperCase()+Qv},bB=(i=16,e=Mw.ALPHA_DIGIT)=>{let n="";const{length:t}=e;for(;i--;)n+=e[Math.random()*t|0];return n};function yB(i){return!!(i&&qs(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const wB=i=>{const e=new Array(10),n=(t,r)=>{if(mh(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const s=Oc(t)?[]:{};return ff(t,(o,a)=>{const l=n(o,r+1);!tf(l)&&(s[a]=l)}),e[r]=void 0,s}}return t};return n(i,0)},xB=So("AsyncFunction"),kB=i=>i&&(mh(i)||qs(i))&&qs(i.then)&&qs(i.catch),Gt={isArray:Oc,isArrayBuffer:Sw,isBuffer:H7,isFormData:eB,isArrayBufferView:G7,isString:Z7,isNumber:Ew,isBoolean:W7,isObject:mh,isPlainObject:Od,isUndefined:tf,isDate:K7,isFile:X7,isBlob:J7,isRegExp:mB,isFunction:qs,isStream:Q7,isURLSearchParams:tB,isTypedArray:cB,isFileList:Y7,forEach:ff,merge:np,extend:iB,trim:nB,stripBOM:rB,inherits:sB,toFlatObject:oB,kindOf:dh,kindOfTest:So,endsWith:aB,toArray:lB,forEachEntry:uB,matchAll:fB,isHTMLForm:dB,hasOwnProperty:Yv,hasOwnProp:Yv,reduceDescriptors:Aw,freezeMethods:pB,toObjectSet:_B,toCamelCase:hB,noop:gB,toFiniteNumber:vB,findKey:Iw,global:Pw,isContextDefined:$w,ALPHABET:Mw,generateString:bB,isSpecCompliantForm:yB,toJSONObject:wB,isAsyncFn:xB,isThenable:kB};function di(i,e,n,t,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),t&&(this.request=t),r&&(this.response=r)}Gt.inherits(di,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Gt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Dw=di.prototype,Ow={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Ow[i]={value:i}});Object.defineProperties(di,Ow);Object.defineProperty(Dw,"isAxiosError",{value:!0});di.from=(i,e,n,t,r,s)=>{const o=Object.create(Dw);return Gt.toFlatObject(i,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),di.call(o,i.message,e,n,t,r),o.cause=i,o.name=i.name,s&&Object.assign(o,s),o};const CB=null;function ip(i){return Gt.isPlainObject(i)||Gt.isArray(i)}function zw(i){return Gt.endsWith(i,"[]")?i.slice(0,-2):i}function eb(i,e,n){return i?i.concat(e).map(function(r,s){return r=zw(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function TB(i){return Gt.isArray(i)&&!i.some(ip)}const SB=Gt.toFlatObject(Gt,{},null,function(e){return/^is[A-Z]/.test(e)});function ph(i,e,n){if(!Gt.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,n=Gt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function($,D){return!Gt.isUndefined(D[$])});const t=n.metaTokens,r=n.visitor||m,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Gt.isSpecCompliantForm(e);if(!Gt.isFunction(r))throw new TypeError("visitor must be a function");function f(M){if(M===null)return"";if(Gt.isDate(M))return M.toISOString();if(!l&&Gt.isBlob(M))throw new di("Blob is not supported. Use a Buffer instead.");return Gt.isArrayBuffer(M)||Gt.isTypedArray(M)?l&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function m(M,$,D){let F=M;if(M&&!D&&typeof M=="object"){if(Gt.endsWith($,"{}"))$=t?$:$.slice(0,-2),M=JSON.stringify(M);else if(Gt.isArray(M)&&TB(M)||(Gt.isFileList(M)||Gt.endsWith($,"[]"))&&(F=Gt.toArray(M)))return $=zw($),F.forEach(function(U,ne){!(Gt.isUndefined(U)||U===null)&&e.append(o===!0?eb([$],ne,s):o===null?$:$+"[]",f(U))}),!1}return ip(M)?!0:(e.append(eb(D,$,s),f(M)),!1)}const g=[],w=Object.assign(SB,{defaultVisitor:m,convertValue:f,isVisitable:ip});function S(M,$){if(!Gt.isUndefined(M)){if(g.indexOf(M)!==-1)throw Error("Circular reference detected in "+$.join("."));g.push(M),Gt.forEach(M,function(F,L){(!(Gt.isUndefined(F)||F===null)&&r.call(e,F,Gt.isString(L)?L.trim():L,$,w))===!0&&S(F,$?$.concat(L):[L])}),g.pop()}}if(!Gt.isObject(i))throw new TypeError("data must be an object");return S(i),e}function tb(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function Zp(i,e){this._pairs=[],i&&ph(i,this,e)}const Rw=Zp.prototype;Rw.append=function(e,n){this._pairs.push([e,n])};Rw.toString=function(e){const n=e?function(t){return e.call(this,t,tb)}:tb;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function EB(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Lw(i,e,n){if(!e)return i;const t=n&&n.encode||EB,r=n&&n.serialize;let s;if(r?s=r(e,n):s=Gt.isURLSearchParams(e)?e.toString():new Zp(e,n).toString(t),s){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}class IB{constructor(){this.handlers=[]}use(e,n,t){return this.handlers.push({fulfilled:e,rejected:n,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Gt.forEach(this.handlers,function(t){t!==null&&e(t)})}}const nb=IB,Fw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PB=typeof URLSearchParams<"u"?URLSearchParams:Zp,$B=typeof FormData<"u"?FormData:null,AB=typeof Blob<"u"?Blob:null,MB={isBrowser:!0,classes:{URLSearchParams:PB,FormData:$B,Blob:AB},protocols:["http","https","file","blob","url","data"]},Bw=typeof window<"u"&&typeof document<"u",DB=(i=>Bw&&["ReactNative","NativeScript","NS"].indexOf(i)<0)(typeof navigator<"u"&&navigator.product),OB=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),zB=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Bw,hasStandardBrowserEnv:DB,hasStandardBrowserWebWorkerEnv:OB},Symbol.toStringTag,{value:"Module"})),go={...zB,...MB};function RB(i,e){return ph(i,new go.classes.URLSearchParams,Object.assign({visitor:function(n,t,r,s){return go.isNode&&Gt.isBuffer(n)?(this.append(t,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function LB(i){return Gt.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FB(i){const e={},n=Object.keys(i);let t;const r=n.length;let s;for(t=0;t<r;t++)s=n[t],e[s]=i[s];return e}function Nw(i){function e(n,t,r,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Gt.isArray(r)?r.length:o,l?(Gt.hasOwnProp(r,o)?r[o]=[r[o],t]:r[o]=t,!a):((!r[o]||!Gt.isObject(r[o]))&&(r[o]=[]),e(n,t,r[o],s)&&Gt.isArray(r[o])&&(r[o]=FB(r[o])),!a)}if(Gt.isFormData(i)&&Gt.isFunction(i.entries)){const n={};return Gt.forEachEntry(i,(t,r)=>{e(LB(t),r,n,0)}),n}return null}function BB(i,e,n){if(Gt.isString(i))try{return(e||JSON.parse)(i),Gt.trim(i)}catch(t){if(t.name!=="SyntaxError")throw t}return(n||JSON.stringify)(i)}const Wp={transitional:Fw,adapter:["xhr","http"],transformRequest:[function(e,n){const t=n.getContentType()||"",r=t.indexOf("application/json")>-1,s=Gt.isObject(e);if(s&&Gt.isHTMLForm(e)&&(e=new FormData(e)),Gt.isFormData(e))return r?JSON.stringify(Nw(e)):e;if(Gt.isArrayBuffer(e)||Gt.isBuffer(e)||Gt.isStream(e)||Gt.isFile(e)||Gt.isBlob(e))return e;if(Gt.isArrayBufferView(e))return e.buffer;if(Gt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(t.indexOf("application/x-www-form-urlencoded")>-1)return RB(e,this.formSerializer).toString();if((a=Gt.isFileList(e))||t.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ph(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),BB(e)):e}],transformResponse:[function(e){const n=this.transitional||Wp.transitional,t=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&Gt.isString(e)&&(t&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?di.from(a,di.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:go.classes.FormData,Blob:go.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Gt.forEach(["delete","get","head","post","put","patch"],i=>{Wp.headers[i]={}});const Kp=Wp,NB=Gt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VB=i=>{const e={};let n,t,r;return i&&i.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),t=o.substring(r+1).trim(),!(!n||e[n]&&NB[n])&&(n==="set-cookie"?e[n]?e[n].push(t):e[n]=[t]:e[n]=e[n]?e[n]+", "+t:t)}),e},ib=Symbol("internals");function ju(i){return i&&String(i).trim().toLowerCase()}function zd(i){return i===!1||i==null?i:Gt.isArray(i)?i.map(zd):String(i)}function jB(i){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=n.exec(i);)e[t[1]]=t[2];return e}const UB=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function jm(i,e,n,t,r){if(Gt.isFunction(t))return t.call(this,e,n);if(r&&(e=n),!!Gt.isString(e)){if(Gt.isString(t))return e.indexOf(t)!==-1;if(Gt.isRegExp(t))return t.test(e)}}function qB(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,t)=>n.toUpperCase()+t)}function HB(i,e){const n=Gt.toCamelCase(" "+e);["get","set","has"].forEach(t=>{Object.defineProperty(i,t+n,{value:function(r,s,o){return this[t].call(this,e,r,s,o)},configurable:!0})})}class _h{constructor(e){e&&this.set(e)}set(e,n,t){const r=this;function s(a,l,f){const m=ju(l);if(!m)throw new Error("header name must be a non-empty string");const g=Gt.findKey(r,m);(!g||r[g]===void 0||f===!0||f===void 0&&r[g]!==!1)&&(r[g||l]=zd(a))}const o=(a,l)=>Gt.forEach(a,(f,m)=>s(f,m,l));return Gt.isPlainObject(e)||e instanceof this.constructor?o(e,n):Gt.isString(e)&&(e=e.trim())&&!UB(e)?o(VB(e),n):e!=null&&s(n,e,t),this}get(e,n){if(e=ju(e),e){const t=Gt.findKey(this,e);if(t){const r=this[t];if(!n)return r;if(n===!0)return jB(r);if(Gt.isFunction(n))return n.call(this,r,t);if(Gt.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ju(e),e){const t=Gt.findKey(this,e);return!!(t&&this[t]!==void 0&&(!n||jm(this,this[t],t,n)))}return!1}delete(e,n){const t=this;let r=!1;function s(o){if(o=ju(o),o){const a=Gt.findKey(t,o);a&&(!n||jm(t,t[a],a,n))&&(delete t[a],r=!0)}}return Gt.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let t=n.length,r=!1;for(;t--;){const s=n[t];(!e||jm(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,t={};return Gt.forEach(this,(r,s)=>{const o=Gt.findKey(t,s);if(o){n[o]=zd(r),delete n[s];return}const a=e?qB(s):String(s).trim();a!==s&&delete n[s],n[a]=zd(r),t[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Gt.forEach(this,(t,r)=>{t!=null&&t!==!1&&(n[r]=e&&Gt.isArray(t)?t.join(", "):t)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const t=new this(e);return n.forEach(r=>t.set(r)),t}static accessor(e){const t=(this[ib]=this[ib]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=ju(o);t[a]||(HB(r,o),t[a]=!0)}return Gt.isArray(e)?e.forEach(s):s(e),this}}_h.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Gt.reduceDescriptors(_h.prototype,({value:i},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(t){this[n]=t}}});Gt.freezeMethods(_h);const Uo=_h;function Um(i,e){const n=this||Kp,t=e||n,r=Uo.from(t.headers);let s=t.data;return Gt.forEach(i,function(a){s=a.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function Vw(i){return!!(i&&i.__CANCEL__)}function df(i,e,n){di.call(this,i??"canceled",di.ERR_CANCELED,e,n),this.name="CanceledError"}Gt.inherits(df,di,{__CANCEL__:!0});function GB(i,e,n){const t=n.config.validateStatus;!n.status||!t||t(n.status)?i(n):e(new di("Request failed with status code "+n.status,[di.ERR_BAD_REQUEST,di.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const ZB=go.hasStandardBrowserEnv?{write(i,e,n,t,r,s){const o=[i+"="+encodeURIComponent(e)];Gt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Gt.isString(t)&&o.push("path="+t),Gt.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function WB(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function KB(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function jw(i,e){return i&&!WB(e)?KB(i,e):e}const XB=go.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let t;function r(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(o){const a=Gt.isString(o)?r(o):o;return a.protocol===t.protocol&&a.host===t.host}}():function(){return function(){return!0}}();function JB(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function YB(i,e){i=i||10;const n=new Array(i),t=new Array(i);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const f=Date.now(),m=t[s];o||(o=f),n[r]=l,t[r]=f;let g=s,w=0;for(;g!==r;)w+=n[g++],g=g%i;if(r=(r+1)%i,r===s&&(s=(s+1)%i),f-o<e)return;const S=m&&f-m;return S?Math.round(w*1e3/S):void 0}}function rb(i,e){let n=0;const t=YB(50,250);return r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,a=s-n,l=t(a),f=s<=o;n=s;const m={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&f?(o-s)/l:void 0,event:r};m[e?"download":"upload"]=!0,i(m)}}const QB=typeof XMLHttpRequest<"u",eN=QB&&function(i){return new Promise(function(n,t){let r=i.data;const s=Uo.from(i.headers).normalize();let{responseType:o,withXSRFToken:a}=i,l;function f(){i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let m;if(Gt.isFormData(r)){if(go.hasStandardBrowserEnv||go.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((m=s.getContentType())!==!1){const[$,...D]=m?m.split(";").map(F=>F.trim()).filter(Boolean):[];s.setContentType([$||"multipart/form-data",...D].join("; "))}}let g=new XMLHttpRequest;if(i.auth){const $=i.auth.username||"",D=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";s.set("Authorization","Basic "+btoa($+":"+D))}const w=jw(i.baseURL,i.url);g.open(i.method.toUpperCase(),Lw(w,i.params,i.paramsSerializer),!0),g.timeout=i.timeout;function S(){if(!g)return;const $=Uo.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),F={data:!o||o==="text"||o==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:$,config:i,request:g};GB(function(U){n(U),f()},function(U){t(U),f()},F),g=null}if("onloadend"in g?g.onloadend=S:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(S)},g.onabort=function(){g&&(t(new di("Request aborted",di.ECONNABORTED,i,g)),g=null)},g.onerror=function(){t(new di("Network Error",di.ERR_NETWORK,i,g)),g=null},g.ontimeout=function(){let D=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const F=i.transitional||Fw;i.timeoutErrorMessage&&(D=i.timeoutErrorMessage),t(new di(D,F.clarifyTimeoutError?di.ETIMEDOUT:di.ECONNABORTED,i,g)),g=null},go.hasStandardBrowserEnv&&(a&&Gt.isFunction(a)&&(a=a(i)),a||a!==!1&&XB(w))){const $=i.xsrfHeaderName&&i.xsrfCookieName&&ZB.read(i.xsrfCookieName);$&&s.set(i.xsrfHeaderName,$)}r===void 0&&s.setContentType(null),"setRequestHeader"in g&&Gt.forEach(s.toJSON(),function(D,F){g.setRequestHeader(F,D)}),Gt.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),o&&o!=="json"&&(g.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&g.addEventListener("progress",rb(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&g.upload&&g.upload.addEventListener("progress",rb(i.onUploadProgress)),(i.cancelToken||i.signal)&&(l=$=>{g&&(t(!$||$.type?new df(null,i,g):$),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const M=JB(w);if(M&&go.protocols.indexOf(M)===-1){t(new di("Unsupported protocol "+M+":",di.ERR_BAD_REQUEST,i));return}g.send(r||null)})},rp={http:CB,xhr:eN};Gt.forEach(rp,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const sb=i=>`- ${i}`,tN=i=>Gt.isFunction(i)||i===null||i===!1,Uw={getAdapter:i=>{i=Gt.isArray(i)?i:[i];const{length:e}=i;let n,t;const r={};for(let s=0;s<e;s++){n=i[s];let o;if(t=n,!tN(n)&&(t=rp[(o=String(n)).toLowerCase()],t===void 0))throw new di(`Unknown adapter '${o}'`);if(t)break;r[o||"#"+s]=t}if(!t){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(sb).join(`
`):" "+sb(s[0]):"as no adapter specified";throw new di("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return t},adapters:rp};function qm(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new df(null,i)}function ob(i){return qm(i),i.headers=Uo.from(i.headers),i.data=Um.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),Uw.getAdapter(i.adapter||Kp.adapter)(i).then(function(t){return qm(i),t.data=Um.call(i,i.transformResponse,t),t.headers=Uo.from(t.headers),t},function(t){return Vw(t)||(qm(i),t&&t.response&&(t.response.data=Um.call(i,i.transformResponse,t.response),t.response.headers=Uo.from(t.response.headers))),Promise.reject(t)})}const ab=i=>i instanceof Uo?{...i}:i;function Cc(i,e){e=e||{};const n={};function t(f,m,g){return Gt.isPlainObject(f)&&Gt.isPlainObject(m)?Gt.merge.call({caseless:g},f,m):Gt.isPlainObject(m)?Gt.merge({},m):Gt.isArray(m)?m.slice():m}function r(f,m,g){if(Gt.isUndefined(m)){if(!Gt.isUndefined(f))return t(void 0,f,g)}else return t(f,m,g)}function s(f,m){if(!Gt.isUndefined(m))return t(void 0,m)}function o(f,m){if(Gt.isUndefined(m)){if(!Gt.isUndefined(f))return t(void 0,f)}else return t(void 0,m)}function a(f,m,g){if(g in e)return t(f,m);if(g in i)return t(void 0,f)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(f,m)=>r(ab(f),ab(m),!0)};return Gt.forEach(Object.keys(Object.assign({},i,e)),function(m){const g=l[m]||r,w=g(i[m],e[m],m);Gt.isUndefined(w)&&g!==a||(n[m]=w)}),n}const qw="1.6.8",Xp={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{Xp[i]=function(t){return typeof t===i||"a"+(e<1?"n ":" ")+i}});const lb={};Xp.transitional=function(e,n,t){function r(s,o){return"[Axios v"+qw+"] Transitional option '"+s+"'"+o+(t?". "+t:"")}return(s,o,a)=>{if(e===!1)throw new di(r(o," has been removed"+(n?" in "+n:"")),di.ERR_DEPRECATED);return n&&!lb[o]&&(lb[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function nN(i,e,n){if(typeof i!="object")throw new di("options must be an object",di.ERR_BAD_OPTION_VALUE);const t=Object.keys(i);let r=t.length;for(;r-- >0;){const s=t[r],o=e[s];if(o){const a=i[s],l=a===void 0||o(a,s,i);if(l!==!0)throw new di("option "+s+" must be "+l,di.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new di("Unknown option "+s,di.ERR_BAD_OPTION)}}const sp={assertOptions:nN,validators:Xp},pa=sp.validators;class Yd{constructor(e){this.defaults=e,this.interceptors={request:new nb,response:new nb}}async request(e,n){try{return await this._request(e,n)}catch(t){if(t instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";t.stack?s&&!String(t.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(t.stack+=`
`+s):t.stack=s}throw t}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Cc(this.defaults,n);const{transitional:t,paramsSerializer:r,headers:s}=n;t!==void 0&&sp.assertOptions(t,{silentJSONParsing:pa.transitional(pa.boolean),forcedJSONParsing:pa.transitional(pa.boolean),clarifyTimeoutError:pa.transitional(pa.boolean)},!1),r!=null&&(Gt.isFunction(r)?n.paramsSerializer={serialize:r}:sp.assertOptions(r,{encode:pa.function,serialize:pa.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Gt.merge(s.common,s[n.method]);s&&Gt.forEach(["delete","get","head","post","put","patch","common"],M=>{delete s[M]}),n.headers=Uo.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(n)===!1||(l=l&&$.synchronous,a.unshift($.fulfilled,$.rejected))});const f=[];this.interceptors.response.forEach(function($){f.push($.fulfilled,$.rejected)});let m,g=0,w;if(!l){const M=[ob.bind(this),void 0];for(M.unshift.apply(M,a),M.push.apply(M,f),w=M.length,m=Promise.resolve(n);g<w;)m=m.then(M[g++],M[g++]);return m}w=a.length;let S=n;for(g=0;g<w;){const M=a[g++],$=a[g++];try{S=M(S)}catch(D){$.call(this,D);break}}try{m=ob.call(this,S)}catch(M){return Promise.reject(M)}for(g=0,w=f.length;g<w;)m=m.then(f[g++],f[g++]);return m}getUri(e){e=Cc(this.defaults,e);const n=jw(e.baseURL,e.url);return Lw(n,e.params,e.paramsSerializer)}}Gt.forEach(["delete","get","head","options"],function(e){Yd.prototype[e]=function(n,t){return this.request(Cc(t||{},{method:e,url:n,data:(t||{}).data}))}});Gt.forEach(["post","put","patch"],function(e){function n(t){return function(s,o,a){return this.request(Cc(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Yd.prototype[e]=n(),Yd.prototype[e+"Form"]=n(!0)});const Rd=Yd;class Jp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const t=this;this.promise.then(r=>{if(!t._listeners)return;let s=t._listeners.length;for(;s-- >0;)t._listeners[s](r);t._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{t.subscribe(a),s=a}).then(r);return o.cancel=function(){t.unsubscribe(s)},o},e(function(s,o,a){t.reason||(t.reason=new df(s,o,a),n(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Jp(function(r){e=r}),cancel:e}}}const iN=Jp;function rN(i){return function(n){return i.apply(null,n)}}function sN(i){return Gt.isObject(i)&&i.isAxiosError===!0}const op={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(op).forEach(([i,e])=>{op[e]=i});const oN=op;function Hw(i){const e=new Rd(i),n=Tw(Rd.prototype.request,e);return Gt.extend(n,Rd.prototype,e,{allOwnKeys:!0}),Gt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return Hw(Cc(i,r))},n}const xr=Hw(Kp);xr.Axios=Rd;xr.CanceledError=df;xr.CancelToken=iN;xr.isCancel=Vw;xr.VERSION=qw;xr.toFormData=ph;xr.AxiosError=di;xr.Cancel=xr.CanceledError;xr.all=function(e){return Promise.all(e)};xr.spread=rN;xr.isAxiosError=sN;xr.mergeConfig=Cc;xr.AxiosHeaders=Uo;xr.formToJSON=i=>Nw(Gt.isHTMLForm(i)?new FormData(i):i);xr.getAdapter=Uw.getAdapter;xr.HttpStatusCode=oN;xr.default=xr;const jo=xr;function cb(i,e,n){const t=i.slice();return t[19]=e[n],t}function ub(i,e,n){const t=i.slice();return t[22]=e[n],t}function fb(i,e,n){const t=i.slice();return t[22]=e[n],t}function db(i,e,n){const t=i.slice();return t[19]=e[n],t}function aN(i){let e,n,t,r,s="Search By Name Or Location…",o;return n=new jy({}),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),r=ce("p"),r.textContent=s,this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);W(n.$$.fragment,l),t=Ce(l),r=ue(l,"P",{class:!0,"data-svelte-h":!0}),Rn(r)!=="svelte-1imatsx"&&(r.textContent=s),l.forEach(I),this.h()},h(){oe(r,"class","text-sm"),oe(e,"class","flex gap-2 items-center")},m(a,l){N(a,e,l),G(n,e,null),me(e,t),me(e,r),o=!0},p:Ct,i(a){o||(E(n.$$.fragment,a),o=!0)},o(a){P(n.$$.fragment,a),o=!1},d(a){a&&I(e),Z(n)}}}function lN(i){let e,n="Points Of Interest",t,r,s,o,a,l,f="Locations",m,g,w,S,M='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',$;return r=new ef({props:{$$slots:{default:[mN]},$$scope:{ctx:i}}}),g=new ef({props:{$$slots:{default:[_N]},$$scope:{ctx:i}}}),{c(){e=ce("p"),e.textContent=n,t=ke(),H(r.$$.fragment),s=ke(),o=ce("div"),a=ke(),l=ce("p"),l.textContent=f,m=ke(),H(g.$$.fragment),w=ke(),S=ce("div"),S.innerHTML=M,this.h()},l(D){e=ue(D,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-x03xac"&&(e.textContent=n),t=Ce(D),W(r.$$.fragment,D),s=Ce(D),o=ue(D,"DIV",{class:!0}),we(o).forEach(I),a=Ce(D),l=ue(D,"P",{class:!0,"data-svelte-h":!0}),Rn(l)!=="svelte-wt03ge"&&(l.textContent=f),m=Ce(D),W(g.$$.fragment,D),w=Ce(D),S=ue(D,"DIV",{class:!0,"data-svelte-h":!0}),Rn(S)!=="svelte-160hzgv"&&(S.innerHTML=M),this.h()},h(){oe(e,"class","px-4 py-2 font-medium leading-none"),oe(o,"class","divider my-0 mx-4"),oe(l,"class","px-4 py-2 font-medium leading-none"),oe(S,"class","flex w-full justify-end p-2")},m(D,F){N(D,e,F),N(D,t,F),G(r,D,F),N(D,s,F),N(D,o,F),N(D,a,F),N(D,l,F),N(D,m,F),G(g,D,F),N(D,w,F),N(D,S,F),$=!0},p(D,F){const L={};F&536870921&&(L.$$scope={dirty:F,ctx:D}),r.$set(L);const U={};F&536870929&&(U.$$scope={dirty:F,ctx:D}),g.$set(U)},i(D){$||(E(r.$$.fragment,D),E(g.$$.fragment,D),$=!0)},o(D){P(r.$$.fragment,D),P(g.$$.fragment,D),$=!1},d(D){D&&(I(e),I(t),I(s),I(o),I(a),I(l),I(m),I(w),I(S)),Z(r,D),Z(g,D)}}}function cN(i){let e,n="Points Of Interest",t,r,s,o,a='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',l;return r=new ef({props:{$$slots:{default:[vN]},$$scope:{ctx:i}}}),{c(){e=ce("p"),e.textContent=n,t=ke(),H(r.$$.fragment),s=ke(),o=ce("div"),o.innerHTML=a,this.h()},l(f){e=ue(f,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-x03xac"&&(e.textContent=n),t=Ce(f),W(r.$$.fragment,f),s=Ce(f),o=ue(f,"DIV",{class:!0,"data-svelte-h":!0}),Rn(o)!=="svelte-160hzgv"&&(o.innerHTML=a),this.h()},h(){oe(e,"class","px-4 py-2 font-medium leading-none"),oe(o,"class","flex w-full justify-end p-2")},m(f,m){N(f,e,m),N(f,t,m),G(r,f,m),N(f,s,m),N(f,o,m),l=!0},p(f,m){const g={};m&536870921&&(g.$$scope={dirty:m,ctx:f}),r.$set(g)},i(f){l||(E(r.$$.fragment,f),l=!0)},o(f){P(r.$$.fragment,f),l=!1},d(f){f&&(I(e),I(t),I(s),I(o)),Z(r,f)}}}function uN(i){let e,n="Locations",t,r,s,o,a='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',l;return r=new ef({props:{$$slots:{default:[yN]},$$scope:{ctx:i}}}),{c(){e=ce("p"),e.textContent=n,t=ke(),H(r.$$.fragment),s=ke(),o=ce("div"),o.innerHTML=a,this.h()},l(f){e=ue(f,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-wt03ge"&&(e.textContent=n),t=Ce(f),W(r.$$.fragment,f),s=Ce(f),o=ue(f,"DIV",{class:!0,"data-svelte-h":!0}),Rn(o)!=="svelte-160hzgv"&&(o.innerHTML=a),this.h()},h(){oe(e,"class","px-4 py-2 font-medium leading-none"),oe(o,"class","flex w-full justify-end p-2")},m(f,m){N(f,e,m),N(f,t,m),G(r,f,m),N(f,s,m),N(f,o,m),l=!0},p(f,m){const g={};m&536870929&&(g.$$scope={dirty:m,ctx:f}),r.$set(g)},i(f){l||(E(r.$$.fragment,f),l=!0)},o(f){P(r.$$.fragment,f),l=!1},d(f){f&&(I(e),I(t),I(s),I(o)),Z(r,f)}}}function fN(i){let e,n;return e=new yw({props:{class:"h-[300px] flex items-center justify-center",$$slots:{default:[wN]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function dN(i){let e,n;return e=new P7({props:{$$slots:{default:[xN]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function hb(i){let e,n,t;return n=new Sc({props:{class:"h-3 w-3 text-primary"}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","flex gap-2")},m(r,s){N(r,e,s),G(n,e,null),t=!0},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function hN(i){let e,n,t,r=i[22].name+"",s,o,a,l=Math.round(i[8](i[22].lngLat,i[0].getCenter())/100)/10+"",f,m,g,w,S,M,$,D=i[22].features.join(", ")+"",F,L,U,ne,se,ee,fe,_e,re=i[22].likes+"",de,he,X,j,xe,ze,ve=i[22].comments.length+"",We,pt,Mt,St=i[22].isFavourite&&hb();return ee=new Uy({props:{class:"h-3 w-3"}}),j=new Vy({props:{class:"h-3 w-3"}}),{c(){e=ce("div"),n=ce("div"),t=ce("p"),s=lt(r),o=ke(),a=ce("p"),f=lt(l),m=lt(" Km"),g=ke(),w=ce("div"),S=ce("div"),M=ce("p"),$=lt("Features: "),F=lt(D),L=ke(),U=ce("div"),St&&St.c(),ne=ke(),se=ce("div"),H(ee.$$.fragment),fe=ke(),_e=ce("p"),de=lt(re),he=ke(),X=ce("div"),H(j.$$.fragment),xe=ke(),ze=ce("p"),We=lt(ve),pt=ke(),this.h()},l(Dt){e=ue(Dt,"DIV",{class:!0});var zt=we(e);n=ue(zt,"DIV",{class:!0});var _t=we(n);t=ue(_t,"P",{});var ft=we(t);s=ct(ft,r),ft.forEach(I),o=Ce(_t),a=ue(_t,"P",{class:!0});var Be=we(a);f=ct(Be,l),m=ct(Be," Km"),Be.forEach(I),_t.forEach(I),g=Ce(zt),w=ue(zt,"DIV",{class:!0});var Ut=we(w);S=ue(Ut,"DIV",{class:!0});var Rt=we(S);M=ue(Rt,"P",{class:!0});var qt=we(M);$=ct(qt,"Features: "),F=ct(qt,D),qt.forEach(I),Rt.forEach(I),L=Ce(Ut),U=ue(Ut,"DIV",{class:!0});var et=we(U);St&&St.l(et),ne=Ce(et),se=ue(et,"DIV",{class:!0});var dt=we(se);W(ee.$$.fragment,dt),fe=Ce(dt),_e=ue(dt,"P",{class:!0});var yt=we(_e);de=ct(yt,re),yt.forEach(I),dt.forEach(I),he=Ce(et),X=ue(et,"DIV",{class:!0});var Ue=we(X);W(j.$$.fragment,Ue),xe=Ce(Ue),ze=ue(Ue,"P",{class:!0});var kt=we(ze);We=ct(kt,ve),kt.forEach(I),Ue.forEach(I),et.forEach(I),Ut.forEach(I),zt.forEach(I),pt=Ce(Dt),this.h()},h(){oe(a,"class","text-sm text-muted-foreground"),oe(n,"class","flex justify-between gap-4"),oe(M,"class","text-xs text-muted-foreground"),oe(S,"class","flex"),oe(_e,"class","text-muted-foreground"),oe(se,"class","flex gap-2"),oe(ze,"class","text-muted-foreground"),oe(X,"class","flex gap-2"),oe(U,"class","flex gap-4"),oe(w,"class","flex justify-between gap-2"),oe(e,"class","flex flex-col w-full gap-2")},m(Dt,zt){N(Dt,e,zt),me(e,n),me(n,t),me(t,s),me(n,o),me(n,a),me(a,f),me(a,m),me(e,g),me(e,w),me(w,S),me(S,M),me(M,$),me(M,F),me(w,L),me(w,U),St&&St.m(U,null),me(U,ne),me(U,se),G(ee,se,null),me(se,fe),me(se,_e),me(_e,de),me(U,he),me(U,X),G(j,X,null),me(X,xe),me(X,ze),me(ze,We),N(Dt,pt,zt),Mt=!0},p(Dt,zt){(!Mt||zt&8)&&r!==(r=Dt[22].name+"")&&cn(s,r),(!Mt||zt&9)&&l!==(l=Math.round(Dt[8](Dt[22].lngLat,Dt[0].getCenter())/100)/10+"")&&cn(f,l),(!Mt||zt&8)&&D!==(D=Dt[22].features.join(", ")+"")&&cn(F,D),Dt[22].isFavourite?St?zt&8&&E(St,1):(St=hb(),St.c(),E(St,1),St.m(U,ne)):St&&(It(),P(St,1,1,()=>{St=null}),Pt()),(!Mt||zt&8)&&re!==(re=Dt[22].likes+"")&&cn(de,re),(!Mt||zt&8)&&ve!==(ve=Dt[22].comments.length+"")&&cn(We,ve)},i(Dt){Mt||(E(St),E(ee.$$.fragment,Dt),E(j.$$.fragment,Dt),Mt=!0)},o(Dt){P(St),P(ee.$$.fragment,Dt),P(j.$$.fragment,Dt),Mt=!1},d(Dt){Dt&&(I(e),I(pt)),St&&St.d(),Z(ee),Z(j)}}}function mb(i,e){let n,t,r;return t=new uf({props:{value:e[22].id.toString(),onSelect:e[7],class:"cursor-pointer",$$slots:{default:[hN]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&8&&(a.value=e[22].id.toString()),o&536870921&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function mN(i){let e=[],n=new Map,t,r,s=kn(i[3]);const o=a=>a[22].id;for(let a=0;a<s.length;a+=1){let l=ub(i,s,a),f=o(l);n.set(f,e[a]=mb(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&393&&(s=kn(a[3]),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,mb,t,ub),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function pb(i){let e,n=i[19].address.label+"",t;return{c(){e=ce("p"),t=lt(n),this.h()},l(r){e=ue(r,"P",{class:!0});var s=we(e);t=ct(s,n),s.forEach(I),this.h()},h(){oe(e,"class","text-xs text-muted-foreground")},m(r,s){N(r,e,s),me(e,t)},p(r,s){s&16&&n!==(n=r[19].address.label+"")&&cn(t,n)},d(r){r&&I(e)}}}function pN(i){let e,n,t,r=i[19].title+"",s,o,a,l=Math.round(i[8](i[19].position,i[0].getCenter())/100)/10+"",f,m,g,w,S=i[19].address.label!==i[19].title&&pb(i);return{c(){e=ce("div"),n=ce("div"),t=ce("p"),s=lt(r),o=ke(),a=ce("p"),f=lt(l),m=lt(" Km"),g=ke(),S&&S.c(),w=ke(),this.h()},l(M){e=ue(M,"DIV",{class:!0});var $=we(e);n=ue($,"DIV",{class:!0});var D=we(n);t=ue(D,"P",{});var F=we(t);s=ct(F,r),F.forEach(I),o=Ce(D),a=ue(D,"P",{class:!0});var L=we(a);f=ct(L,l),m=ct(L," Km"),L.forEach(I),D.forEach(I),g=Ce($),S&&S.l($),$.forEach(I),w=Ce(M),this.h()},h(){oe(a,"class","text-sm text-muted-foreground"),oe(n,"class","flex justify-between gap-4"),oe(e,"class","flex flex-col w-full gap-0.5")},m(M,$){N(M,e,$),me(e,n),me(n,t),me(t,s),me(n,o),me(n,a),me(a,f),me(a,m),me(e,g),S&&S.m(e,null),N(M,w,$)},p(M,$){$&16&&r!==(r=M[19].title+"")&&cn(s,r),$&17&&l!==(l=Math.round(M[8](M[19].position,M[0].getCenter())/100)/10+"")&&cn(f,l),M[19].address.label!==M[19].title?S?S.p(M,$):(S=pb(M),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(M){M&&(I(e),I(w)),S&&S.d()}}}function _b(i,e){let n,t,r;return t=new uf({props:{value:e[19].id,onSelect:e[6],class:"cursor-pointer",$$slots:{default:[pN]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&16&&(a.value=e[19].id),o&536870929&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function _N(i){let e=[],n=new Map,t,r,s=kn(i[4]);const o=a=>a[19].id;for(let a=0;a<s.length;a+=1){let l=cb(i,s,a),f=o(l);n.set(f,e[a]=_b(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&337&&(s=kn(a[4]),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,_b,t,cb),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function gb(i){let e,n,t;return n=new Sc({props:{class:"h-3 w-3 text-primary"}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","flex gap-2")},m(r,s){N(r,e,s),G(n,e,null),t=!0},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function gN(i){let e,n,t,r=i[22].name+"",s,o,a,l=Math.round(i[8](i[22].lngLat,i[0].getCenter())/100)/10+"",f,m,g,w,S,M,$,D=i[22].features.join(", ")+"",F,L,U,ne,se,ee,fe,_e,re=i[22].likes+"",de,he,X,j,xe,ze,ve=i[22].comments.length+"",We,pt,Mt,St=i[22].isFavourite&&gb();return ee=new Uy({props:{class:"h-3 w-3"}}),j=new Vy({props:{class:"h-3 w-3"}}),{c(){e=ce("div"),n=ce("div"),t=ce("p"),s=lt(r),o=ke(),a=ce("p"),f=lt(l),m=lt(" Km"),g=ke(),w=ce("div"),S=ce("div"),M=ce("p"),$=lt("Features: "),F=lt(D),L=ke(),U=ce("div"),St&&St.c(),ne=ke(),se=ce("div"),H(ee.$$.fragment),fe=ke(),_e=ce("p"),de=lt(re),he=ke(),X=ce("div"),H(j.$$.fragment),xe=ke(),ze=ce("p"),We=lt(ve),pt=ke(),this.h()},l(Dt){e=ue(Dt,"DIV",{class:!0});var zt=we(e);n=ue(zt,"DIV",{class:!0});var _t=we(n);t=ue(_t,"P",{});var ft=we(t);s=ct(ft,r),ft.forEach(I),o=Ce(_t),a=ue(_t,"P",{class:!0});var Be=we(a);f=ct(Be,l),m=ct(Be," Km"),Be.forEach(I),_t.forEach(I),g=Ce(zt),w=ue(zt,"DIV",{class:!0});var Ut=we(w);S=ue(Ut,"DIV",{class:!0});var Rt=we(S);M=ue(Rt,"P",{class:!0});var qt=we(M);$=ct(qt,"Features: "),F=ct(qt,D),qt.forEach(I),Rt.forEach(I),L=Ce(Ut),U=ue(Ut,"DIV",{class:!0});var et=we(U);St&&St.l(et),ne=Ce(et),se=ue(et,"DIV",{class:!0});var dt=we(se);W(ee.$$.fragment,dt),fe=Ce(dt),_e=ue(dt,"P",{class:!0});var yt=we(_e);de=ct(yt,re),yt.forEach(I),dt.forEach(I),he=Ce(et),X=ue(et,"DIV",{class:!0});var Ue=we(X);W(j.$$.fragment,Ue),xe=Ce(Ue),ze=ue(Ue,"P",{class:!0});var kt=we(ze);We=ct(kt,ve),kt.forEach(I),Ue.forEach(I),et.forEach(I),Ut.forEach(I),zt.forEach(I),pt=Ce(Dt),this.h()},h(){oe(a,"class","text-sm text-muted-foreground"),oe(n,"class","flex justify-between gap-4"),oe(M,"class","text-xs text-muted-foreground"),oe(S,"class","flex"),oe(_e,"class","text-muted-foreground"),oe(se,"class","flex gap-2"),oe(ze,"class","text-muted-foreground"),oe(X,"class","flex gap-2"),oe(U,"class","flex gap-4"),oe(w,"class","flex justify-between gap-2"),oe(e,"class","flex flex-col w-full gap-2")},m(Dt,zt){N(Dt,e,zt),me(e,n),me(n,t),me(t,s),me(n,o),me(n,a),me(a,f),me(a,m),me(e,g),me(e,w),me(w,S),me(S,M),me(M,$),me(M,F),me(w,L),me(w,U),St&&St.m(U,null),me(U,ne),me(U,se),G(ee,se,null),me(se,fe),me(se,_e),me(_e,de),me(U,he),me(U,X),G(j,X,null),me(X,xe),me(X,ze),me(ze,We),N(Dt,pt,zt),Mt=!0},p(Dt,zt){(!Mt||zt&8)&&r!==(r=Dt[22].name+"")&&cn(s,r),(!Mt||zt&9)&&l!==(l=Math.round(Dt[8](Dt[22].lngLat,Dt[0].getCenter())/100)/10+"")&&cn(f,l),(!Mt||zt&8)&&D!==(D=Dt[22].features.join(", ")+"")&&cn(F,D),Dt[22].isFavourite?St?zt&8&&E(St,1):(St=gb(),St.c(),E(St,1),St.m(U,ne)):St&&(It(),P(St,1,1,()=>{St=null}),Pt()),(!Mt||zt&8)&&re!==(re=Dt[22].likes+"")&&cn(de,re),(!Mt||zt&8)&&ve!==(ve=Dt[22].comments.length+"")&&cn(We,ve)},i(Dt){Mt||(E(St),E(ee.$$.fragment,Dt),E(j.$$.fragment,Dt),Mt=!0)},o(Dt){P(St),P(ee.$$.fragment,Dt),P(j.$$.fragment,Dt),Mt=!1},d(Dt){Dt&&(I(e),I(pt)),St&&St.d(),Z(ee),Z(j)}}}function vb(i,e){let n,t,r;return t=new uf({props:{value:e[22].id.toString(),onSelect:e[7],class:"cursor-pointer",$$slots:{default:[gN]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&8&&(a.value=e[22].id.toString()),o&536870921&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function vN(i){let e=[],n=new Map,t,r,s=kn(i[3]);const o=a=>a[22].id;for(let a=0;a<s.length;a+=1){let l=fb(i,s,a),f=o(l);n.set(f,e[a]=vb(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&393&&(s=kn(a[3]),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,vb,t,fb),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function bb(i){let e,n=i[19].address.label+"",t;return{c(){e=ce("p"),t=lt(n),this.h()},l(r){e=ue(r,"P",{class:!0});var s=we(e);t=ct(s,n),s.forEach(I),this.h()},h(){oe(e,"class","text-xs text-muted-foreground")},m(r,s){N(r,e,s),me(e,t)},p(r,s){s&16&&n!==(n=r[19].address.label+"")&&cn(t,n)},d(r){r&&I(e)}}}function bN(i){let e,n,t,r=i[19].title+"",s,o,a,l=Math.round(i[8](i[19].position,i[0].getCenter())/100)/10+"",f,m,g,w,S=i[19].address.label!==i[19].title&&bb(i);return{c(){e=ce("div"),n=ce("div"),t=ce("p"),s=lt(r),o=ke(),a=ce("p"),f=lt(l),m=lt(" Km"),g=ke(),S&&S.c(),w=ke(),this.h()},l(M){e=ue(M,"DIV",{class:!0});var $=we(e);n=ue($,"DIV",{class:!0});var D=we(n);t=ue(D,"P",{});var F=we(t);s=ct(F,r),F.forEach(I),o=Ce(D),a=ue(D,"P",{class:!0});var L=we(a);f=ct(L,l),m=ct(L," Km"),L.forEach(I),D.forEach(I),g=Ce($),S&&S.l($),$.forEach(I),w=Ce(M),this.h()},h(){oe(a,"class","text-sm text-muted-foreground"),oe(n,"class","flex justify-between gap-4"),oe(e,"class","flex flex-col w-full gap-0.5")},m(M,$){N(M,e,$),me(e,n),me(n,t),me(t,s),me(n,o),me(n,a),me(a,f),me(a,m),me(e,g),S&&S.m(e,null),N(M,w,$)},p(M,$){$&16&&r!==(r=M[19].title+"")&&cn(s,r),$&17&&l!==(l=Math.round(M[8](M[19].position,M[0].getCenter())/100)/10+"")&&cn(f,l),M[19].address.label!==M[19].title?S?S.p(M,$):(S=bb(M),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},d(M){M&&(I(e),I(w)),S&&S.d()}}}function yb(i,e){let n,t,r;return t=new uf({props:{value:e[19].id,onSelect:e[6],class:"cursor-pointer",$$slots:{default:[bN]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&16&&(a.value=e[19].id),o&536870929&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function yN(i){let e=[],n=new Map,t,r,s=kn(i[4]);const o=a=>a[19].id;for(let a=0;a<s.length;a+=1){let l=db(i,s,a),f=o(l);n.set(f,e[a]=yb(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&337&&(s=kn(a[4]),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,yb,t,db),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function wN(i){let e;return{c(){e=lt("No results found.")},l(n){e=ct(n,"No results found.")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function xN(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-11244tn"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","h-[300px] w-full flex items-center justify-center")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function kN(i){let e,n,t,r;const s=[dN,fN,uN,cN,lN],o=[];function a(l,f){return l[5]?0:l[4].length===0&&l[3].length===0?1:l[3].length===0?2:l[4].length===0?3:4}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function CN(i){let e,n,t,r,s;function o(l){i[12](l)}let a={placeholder:"Search by POI name or location…"};return i[1]!==void 0&&(a.value=i[1]),e=new ww({props:a}),Nt.push(()=>Zn(e,"value",o)),r=new I7({props:{class:"my-2",$$slots:{default:[kN]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),t=ke(),H(r.$$.fragment)},l(l){W(e.$$.fragment,l),t=Ce(l),W(r.$$.fragment,l)},m(l,f){G(e,l,f),N(l,t,f),G(r,l,f),s=!0},p(l,f){const m={};!n&&f&2&&(n=!0,m.value=l[1],Gn(()=>n=!1)),e.$set(m);const g={};f&536870969&&(g.$$scope={dirty:f,ctx:l}),r.$set(g)},i(l){s||(E(e.$$.fragment,l),E(r.$$.fragment,l),s=!0)},o(l){P(e.$$.fragment,l),P(r.$$.fragment,l),s=!1},d(l){l&&I(t),Z(e,l),Z(r,l)}}}function TN(i){let e,n,t,r,s;e=new qi({props:{class:"text-secondary-foreground w-full sm:max-w-md bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[aN]},$$scope:{ctx:i}}}),e.$on("click",i[11]);function o(l){i[13](l)}let a={shouldFilter:!1,loop:!0,$$slots:{default:[CN]},$$scope:{ctx:i}};return i[2]!==void 0&&(a.open=i[2]),t=new h7({props:a}),Nt.push(()=>Zn(t,"open",o)),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(l){W(e.$$.fragment,l),n=Ce(l),W(t.$$.fragment,l)},m(l,f){G(e,l,f),N(l,n,f),G(t,l,f),s=!0},p(l,[f]){const m={};f&536870912&&(m.$$scope={dirty:f,ctx:l}),e.$set(m);const g={};f&536870971&&(g.$$scope={dirty:f,ctx:l}),!r&&f&4&&(r=!0,g.open=l[2],Gn(()=>r=!1)),t.$set(g)},i(l){s||(E(e.$$.fragment,l),E(t.$$.fragment,l),s=!0)},o(l){P(e.$$.fragment,l),P(t.$$.fragment,l),s=!1},d(l){l&&I(n),Z(e,l),Z(t,l)}}}const SN=30;function EN(i,e,n){let t,{map:r}=e;const s=dl();let o=!1,a=!1,l,f=!1,m=jo.CancelToken.source(),g=jo.CancelToken.source(),w=[];const S=async()=>{n(9,o=!0),m&&m.cancel(),m=jo.CancelToken.source();const ee=m.token,fe=new URLSearchParams({name:l}),_e=await jo.get(`/api/poi/search?${fe.toString()}`,{cancelToken:ee}).catch(re=>re);if(_e!=null&&_e.data){let re=_e.data;re=re.map(de=>{const he=ol.decode(de);return Pd(he)?he.right:{error:!0,message:"Invalid POI object received from API: "+he.left}}),re=re.filter(de=>"error"in de&&de.error?(console.error(de.message),!1):!0),n(3,w=re)}n(9,o=!1)};let M=[];const $=async()=>{var de;n(10,a=!0),g&&g.cancel(),g=jo.CancelToken.source();const ee=g.token,fe=r.getCenter(),_e=new URLSearchParams({q:l,at:`${fe.lat},${fe.lng}`,limit:SN.toString(),lang:"en",apiKey:_z}),re=await jo.get(`https://autosuggest.search.hereapi.com/v1/autosuggest?${_e.toString()}`,{cancelToken:ee}).catch(he=>he);if((de=re==null?void 0:re.data)!=null&&de.items){const he=re.data.items;n(4,M=he.filter(X=>{var j;return X.id!==void 0&&X.title!==void 0&&((j=X.address)==null?void 0:j.label)!==void 0&&X.position!==void 0&&X.distance!==void 0}))}n(10,a=!1)},D=ee=>{const fe=M.find(({id:_e})=>_e===ee);fe&&r.flyTo({center:{lat:fe.position.lat,lng:fe.position.lng},zoom:Math.min(16,Math.max(14,r.getZoom())),padding:{top:300}}),n(2,f=!1)},F=ee=>{const fe=w.find(({id:_e})=>_e===parseInt(ee));fe&&(r.flyTo({center:fe.lngLat,zoom:Math.min(16,Math.max(14,r.getZoom())),padding:{top:300}}),s("poiSelected",parseInt(ee))),n(2,f=!1)},L=(ee,fe)=>{const re=ee.lat*Math.PI/180,de=fe.lat*Math.PI/180,he=(fe.lat-ee.lat)*Math.PI/180,X=(fe.lng-ee.lng)*Math.PI/180,j=Math.sin(he/2)*Math.sin(he/2)+Math.cos(re)*Math.cos(de)*Math.sin(X/2)*Math.sin(X/2);return 6371e3*(2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j)))},U=()=>n(2,f=!0);function ne(ee){l=ee,n(1,l)}function se(ee){f=ee,n(2,f)}return i.$$set=ee=>{"map"in ee&&n(0,r=ee.map)},i.$$.update=()=>{i.$$.dirty&1536&&n(5,t=o||a),i.$$.dirty&2&&l&&(S(),$())},[r,l,f,w,M,t,D,F,L,o,a,U,ne,se]}class IN extends Xe{constructor(e){super(),Je(this,e,EN,TN,Ze,{map:0})}}function PN(i){let e,n;return e=new IN({props:{map:i[4]}}),e.$on("poiSelected",i[9]),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.map=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function $N(i){let e,n="Search By POI Name Or Location";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-1fty8wh"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-xs flex items-center")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function AN(i){let e,n,t,r;return e=new Sa({props:{class:"w-full sm:max-w-md",$$slots:{default:[PN]},$$scope:{ctx:i}}}),t=new Ta({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[$N]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&67108880&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&67108864&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function MN(i){let e,n,t,r;function s(l){i[12](l)}function o(l){i[13](l)}let a={title:"POI Features",poiFeatureOptions:i[3]};return i[1]!==void 0&&(a.filterValues=i[1]),i[6]!==void 0&&(a.forceClosePopover=i[6]),e=new r7({props:a}),Nt.push(()=>Zn(e,"filterValues",s)),Nt.push(()=>Zn(e,"forceClosePopover",o)),{c(){H(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,f){G(e,l,f),r=!0},p(l,f){const m={};f&8&&(m.poiFeatureOptions=l[3]),!n&&f&2&&(n=!0,m.filterValues=l[1],Gn(()=>n=!1)),!t&&f&64&&(t=!0,m.forceClosePopover=l[6],Gn(()=>t=!1)),e.$set(m)},i(l){r||(E(e.$$.fragment,l),r=!0)},o(l){P(e.$$.fragment,l),r=!1},d(l){Z(e,l)}}}function DN(i){let e,n="Filter By POI Features";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-1oglnlj"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-xs flex items-center")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function ON(i){let e,n,t,r;return e=new Sa({props:{$$slots:{default:[MN]},$$scope:{ctx:i}}}),t=new Ta({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[DN]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&67108938&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&67108864&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function wb(i){let e,n,t;function r(o){i[18](o)}let s={openDelay:0,closeDelay:0,onOutsideClick:i[17],$$slots:{default:[FN]},$$scope:{ctx:i}};return i[5][2]!==void 0&&(s.open=i[5][2]),e=new va({props:s}),Nt.push(()=>Zn(e,"open",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,a){const l={};a&192&&(l.onOutsideClick=o[17]),a&67108866&&(l.$$scope={dirty:a,ctx:o}),!n&&a&32&&(n=!0,l.open=o[5][2],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function zN(i){let e,n;return e=new r3({}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function RN(i){let e,n;return e=new Op({props:{class:"bg-background",onPressedChange:i[16],$$slots:{default:[zN]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.onPressedChange=t[16]),r&67108864&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function LN(i){let e,n="Clear POI Features Filter";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-r3d05h"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-xs flex items-center")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function FN(i){let e,n,t,r;return e=new Sa({props:{$$slots:{default:[RN]},$$scope:{ctx:i}}}),t=new Ta({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[LN]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&67108866&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&67108864&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function BN(i){let e,n;return e=new Sc({}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function NN(i){let e,n,t;function r(o){i[19](o)}let s={class:"text-secondary-foreground hover:text-accent-foreground data-[state=off]:hover:bg-accent data-[state=off]:bg-background data-[state=on]:bg-primary data-[state=on]:hover:brightness-90 data-[state=on]:text-error-content",$$slots:{default:[BN]},$$scope:{ctx:i}};return i[2]!==void 0&&(s.pressed=i[2]),e=new Op({props:s}),Nt.push(()=>Zn(e,"pressed",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,a){const l={};a&67108864&&(l.$$scope={dirty:a,ctx:o}),!n&&a&4&&(n=!0,l.pressed=o[2],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function VN(i){let e,n="Show Favourites Only";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-14grtso"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-xs flex items-center")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function jN(i){let e,n,t,r;return e=new Sa({props:{$$slots:{default:[NN]},$$scope:{ctx:i}}}),t=new Ta({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[VN]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&67108868&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&67108864&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function UN(i){let e,n,t,r;function s(l){i[22](l)}function o(l){i[23](l)}let a={};return i[0]!==void 0&&(a.selectedMapLayer=i[0]),i[7]!==void 0&&(a.forceClosePopover=i[7]),e=new U7({props:a}),Nt.push(()=>Zn(e,"selectedMapLayer",s)),Nt.push(()=>Zn(e,"forceClosePopover",o)),{c(){H(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,f){G(e,l,f),r=!0},p(l,f){const m={};!n&&f&1&&(n=!0,m.selectedMapLayer=l[0],Gn(()=>n=!1)),!t&&f&128&&(t=!0,m.forceClosePopover=l[7],Gn(()=>t=!1)),e.$set(m)},i(l){r||(E(e.$$.fragment,l),r=!0)},o(l){P(e.$$.fragment,l),r=!1},d(l){Z(e,l)}}}function qN(i){let e,n="Change Map Layer";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-1habla0"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-xs flex items-center")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function HN(i){let e,n,t,r;return e=new Sa({props:{$$slots:{default:[UN]},$$scope:{ctx:i}}}),t=new Ta({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[qN]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&67108993&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&67108864&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function GN(i){let e,n,t,r,s,o,a,l,f,m,g,w,S,M,$,D;function F(de){i[11](de)}let L={openDelay:0,closeDelay:0,onOutsideClick:i[10],$$slots:{default:[AN]},$$scope:{ctx:i}};i[5][0]!==void 0&&(L.open=i[5][0]),n=new va({props:L}),Nt.push(()=>Zn(n,"open",F));function U(de){i[15](de)}let ne={openDelay:0,closeDelay:0,onOutsideClick:i[14],$$slots:{default:[ON]},$$scope:{ctx:i}};i[5][1]!==void 0&&(ne.open=i[5][1]),a=new va({props:ne}),Nt.push(()=>Zn(a,"open",U));let se=i[1].length>0&&wb(i);function ee(de){i[21](de)}let fe={openDelay:0,closeDelay:0,onOutsideClick:i[20],$$slots:{default:[jN]},$$scope:{ctx:i}};i[5][3]!==void 0&&(fe.open=i[5][3]),g=new va({props:fe}),Nt.push(()=>Zn(g,"open",ee));function _e(de){i[25](de)}let re={openDelay:0,closeDelay:0,onOutsideClick:i[24],$$slots:{default:[HN]},$$scope:{ctx:i}};return i[5][4]!==void 0&&(re.open=i[5][4]),M=new va({props:re}),Nt.push(()=>Zn(M,"open",_e)),{c(){e=ce("div"),H(n.$$.fragment),r=ke(),s=ce("div"),o=ce("div"),H(a.$$.fragment),f=ke(),se&&se.c(),m=ke(),H(g.$$.fragment),S=ke(),H(M.$$.fragment),this.h()},l(de){e=ue(de,"DIV",{class:!0});var he=we(e);W(n.$$.fragment,he),r=Ce(he),s=ue(he,"DIV",{class:!0});var X=we(s);o=ue(X,"DIV",{class:!0});var j=we(o);W(a.$$.fragment,j),f=Ce(j),se&&se.l(j),m=Ce(j),W(g.$$.fragment,j),j.forEach(I),S=Ce(X),W(M.$$.fragment,X),X.forEach(I),he.forEach(I),this.h()},h(){oe(o,"class","flex gap-2"),oe(s,"class","flex justify-between gap-2 grow max-sm:w-full max-sm:overflow-x-auto"),oe(e,"class","flex gap-2 max-sm:flex-col w-full sm:overflow-x-auto")},m(de,he){N(de,e,he),G(n,e,null),me(e,r),me(e,s),me(s,o),G(a,o,null),me(o,f),se&&se.m(o,null),me(o,m),G(g,o,null),me(s,S),G(M,s,null),D=!0},p(de,[he]){const X={};he&192&&(X.onOutsideClick=de[10]),he&67108880&&(X.$$scope={dirty:he,ctx:de}),!t&&he&32&&(t=!0,X.open=de[5][0],Gn(()=>t=!1)),n.$set(X);const j={};he&128&&(j.onOutsideClick=de[14]),he&67108938&&(j.$$scope={dirty:he,ctx:de}),!l&&he&32&&(l=!0,j.open=de[5][1],Gn(()=>l=!1)),a.$set(j),de[1].length>0?se?(se.p(de,he),he&2&&E(se,1)):(se=wb(de),se.c(),E(se,1),se.m(o,m)):se&&(It(),P(se,1,1,()=>{se=null}),Pt());const xe={};he&192&&(xe.onOutsideClick=de[20]),he&67108868&&(xe.$$scope={dirty:he,ctx:de}),!w&&he&32&&(w=!0,xe.open=de[5][3],Gn(()=>w=!1)),g.$set(xe);const ze={};he&64&&(ze.onOutsideClick=de[24]),he&67108993&&(ze.$$scope={dirty:he,ctx:de}),!$&&he&32&&($=!0,ze.open=de[5][4],Gn(()=>$=!1)),M.$set(ze)},i(de){D||(E(n.$$.fragment,de),E(a.$$.fragment,de),E(se),E(g.$$.fragment,de),E(M.$$.fragment,de),D=!0)},o(de){P(n.$$.fragment,de),P(a.$$.fragment,de),P(se),P(g.$$.fragment,de),P(M.$$.fragment,de),D=!1},d(de){de&&I(e),Z(n),Z(a),se&&se.d(),Z(g),Z(M)}}}function ZN(i,e,n){let{selectedMapLayer:t}=e,{poiFeatureOptions:r}=e,{poiFeaturesFilter:s}=e,{onlyShowFavourites:o}=e,{map:a}=e,l=[!1,!1,!1,!1,!1],f,m;const g=()=>{n(5,l=new Array(l.length).fill(!1))};function w(j){At.call(this,i,j)}const S=j=>{g(),f(),m(),j.target.focus()};function M(j){i.$$.not_equal(l[0],j)&&(l[0]=j,n(5,l))}function $(j){s=j,n(1,s)}function D(j){f=j,n(6,f)}const F=j=>{g(),m(),j.target.focus()};function L(j){i.$$.not_equal(l[1],j)&&(l[1]=j,n(5,l))}const U=j=>{j&&n(1,s=[])},ne=j=>{g(),f(),m(),j.target.focus()};function se(j){i.$$.not_equal(l[2],j)&&(l[2]=j,n(5,l))}function ee(j){o=j,n(2,o)}const fe=j=>{g(),f(),m(),j.target.focus()};function _e(j){i.$$.not_equal(l[3],j)&&(l[3]=j,n(5,l))}function re(j){t=j,n(0,t)}function de(j){m=j,n(7,m)}const he=j=>{g(),f(),j.target.focus()};function X(j){i.$$.not_equal(l[4],j)&&(l[4]=j,n(5,l))}return i.$$set=j=>{"selectedMapLayer"in j&&n(0,t=j.selectedMapLayer),"poiFeatureOptions"in j&&n(3,r=j.poiFeatureOptions),"poiFeaturesFilter"in j&&n(1,s=j.poiFeaturesFilter),"onlyShowFavourites"in j&&n(2,o=j.onlyShowFavourites),"map"in j&&n(4,a=j.map)},[t,s,o,r,a,l,f,m,g,w,S,M,$,D,F,L,U,ne,se,ee,fe,_e,re,de,he,X]}class WN extends Xe{constructor(e){super(),Je(this,e,ZN,GN,Ze,{selectedMapLayer:0,poiFeatureOptions:3,poiFeaturesFilter:1,onlyShowFavourites:2,map:4})}}function xb(i,e,n){const t=i.slice();return t[29]=e[n],t}function kb(i,e,n){const t=i.slice();return t[32]=e[n],t[34]=n,t}function Cb(i){let e,n,t;function r(o){i[26](o)}let s={onValueChange:i[25],$$slots:{default:[n9]},$$scope:{ctx:i}};return i[10]!==void 0&&(s.value=i[10]),e=new Z2({props:s}),Nt.push(()=>Zn(e,"value",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,a){const l={};a[0]&2561&&(l.onValueChange=o[25]),a[0]&128|a[1]&16&&(l.$$scope={dirty:a,ctx:o}),!n&&a[0]&1024&&(n=!0,l.value=o[10],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function KN(i){let e,n=i[7].length>1?"s":"",t,r;return{c(){e=lt("Check-in to nearby POI"),t=lt(n),r=lt(":")},l(s){e=ct(s,"Check-in to nearby POI"),t=ct(s,n),r=ct(s,":")},m(s,o){N(s,e,o),N(s,t,o),N(s,r,o)},p(s,o){o[0]&128&&n!==(n=s[7].length>1?"s":"")&&cn(t,n)},d(s){s&&(I(e),I(t),I(r))}}}function XN(i){let e,n=i[32]+"",t;return{c(){e=lt(" "),t=lt(n)},l(r){e=ct(r," "),t=ct(r,n)},m(r,s){N(r,e,s),N(r,t,s)},p(r,s){s[0]&128&&n!==(n=r[32]+"")&&cn(t,n)},d(r){r&&(I(e),I(t))}}}function JN(i){let e=i[32]+"",n;return{c(){n=lt(e)},l(t){n=ct(t,e)},m(t,r){N(t,n,r)},p(t,r){r[0]&128&&e!==(e=t[32]+"")&&cn(n,e)},d(t){t&&I(n)}}}function Tb(i,e){let n,t;function r(a,l){return a[34]===0?JN:XN}let s=r(e),o=s(e);return{key:i,first:null,c(){n=Le(),o.c(),t=Le(),this.h()},l(a){n=Le(),o.l(a),t=Le(),this.h()},h(){this.first=n},m(a,l){N(a,n,l),o.m(a,l),N(a,t,l)},p(a,l){e=a,s===(s=r(e))&&o?o.p(e,l):(o.d(1),o=s(e),o&&(o.c(),o.m(t.parentNode,t)))},d(a){a&&(I(n),I(t)),o.d(a)}}}function YN(i){let e;return{c(){e=lt("View")},l(n){e=ct(n,"View")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function QN(i){let e;return{c(){e=lt("Check-in")},l(n){e=ct(n,"Check-in")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Sb(i,e){let n,t,r=[],s=new Map,o,a,l,f,m,g,w,S=kn(e[29].name.split(" "));const M=F=>F[34];for(let F=0;F<S.length;F+=1){let L=kb(e,S,F),U=M(L);s.set(U,r[F]=Tb(U,L))}function $(){return e[23](e[29])}l=new qi({props:{size:"sm",variant:"secondary",$$slots:{default:[YN]},$$scope:{ctx:e}}}),l.$on("click",$);function D(){return e[24](e[29])}return m=new qi({props:{size:"sm",$$slots:{default:[QN]},$$scope:{ctx:e}}}),m.$on("click",D),{key:i,first:null,c(){n=ce("div"),t=ce("p");for(let F=0;F<r.length;F+=1)r[F].c();o=ke(),a=ce("div"),H(l.$$.fragment),f=ke(),H(m.$$.fragment),g=ke(),this.h()},l(F){n=ue(F,"DIV",{class:!0});var L=we(n);t=ue(L,"P",{class:!0});var U=we(t);for(let se=0;se<r.length;se+=1)r[se].l(U);U.forEach(I),o=Ce(L),a=ue(L,"DIV",{class:!0});var ne=we(a);W(l.$$.fragment,ne),f=Ce(ne),W(m.$$.fragment,ne),ne.forEach(I),g=Ce(L),L.forEach(I),this.h()},h(){oe(t,"class","max-sm:text-ellipsis max-sm:max-w-48 max-sm:overflow-hidden"),oe(a,"class","flex items-center gap-2"),oe(n,"class","flex justify-between items-center gap-4 px-4 py-2"),this.first=n},m(F,L){N(F,n,L),me(n,t);for(let U=0;U<r.length;U+=1)r[U]&&r[U].m(t,null);me(n,o),me(n,a),G(l,a,null),me(a,f),G(m,a,null),me(n,g),w=!0},p(F,L){e=F,L[0]&128&&(S=kn(e[29].name.split(" ")),r=Sr(r,L,M,1,e,S,s,t,PC,Tb,null,kb));const U={};L[1]&16&&(U.$$scope={dirty:L,ctx:e}),l.$set(U);const ne={};L[1]&16&&(ne.$$scope={dirty:L,ctx:e}),m.$set(ne)},i(F){w||(E(l.$$.fragment,F),E(m.$$.fragment,F),w=!0)},o(F){P(l.$$.fragment,F),P(m.$$.fragment,F),w=!1},d(F){F&&I(n);for(let L=0;L<r.length;L+=1)r[L].d();Z(l),Z(m)}}}function e9(i){let e=[],n=new Map,t,r,s=kn(i[7]);const o=a=>a[29].id;for(let a=0;a<s.length;a+=1){let l=xb(i,s,a),f=o(l);n.set(f,e[a]=Sb(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l[0]&12416&&(s=kn(a[7]),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,Sb,t,xb),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function t9(i){let e,n,t,r;return e=new G2({props:{class:"hover:no-underline hover:backdrop-opacity-75 active:backdrop-opacity-95 rounded-md h-10 px-4 py-2",$$slots:{default:[KN]},$$scope:{ctx:i}}}),t=new q2({props:{class:"*:p-0 max-h-32 overflow-y-auto",$$slots:{default:[e9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o[0]&128|o[1]&16&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o[0]&128|o[1]&16&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function n9(i){let e,n;return e=new H2({props:{value:"check-in-prompt",class:"border-b-0",$$slots:{default:[t9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&128|r[1]&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function i9(i){let e,n,t,r,s,o,a,l,f;function m($){i[19]($)}function g($){i[20]($)}function w($){i[21]($)}let S={poiFeatureOptions:i[5],map:i[6]};i[1]!==void 0&&(S.selectedMapLayer=i[1]),i[3]!==void 0&&(S.poiFeaturesFilter=i[3]),i[4]!==void 0&&(S.onlyShowFavourites=i[4]),n=new WN({props:S}),Nt.push(()=>Zn(n,"selectedMapLayer",m)),Nt.push(()=>Zn(n,"poiFeaturesFilter",g)),Nt.push(()=>Zn(n,"onlyShowFavourites",w)),n.$on("poiSelected",i[22]);let M=i[7].length>0&&Cb(i);return{c(){e=ce("div"),H(n.$$.fragment),o=ke(),M&&M.c(),this.h()},l($){e=ue($,"DIV",{class:!0});var D=we(e);W(n.$$.fragment,D),o=Ce(D),M&&M.l(D),D.forEach(I),this.h()},h(){oe(e,"class","z-10 absolute w-full p-2 border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex flex-col gap-2 justify-between")},m($,D){N($,e,D),G(n,e,null),me(e,o),M&&M.m(e,null),i[27](e),a=!0,l||(f=Ke(window,"resize",i[18]),l=!0)},p($,D){const F={};D[0]&32&&(F.poiFeatureOptions=$[5]),D[0]&64&&(F.map=$[6]),!t&&D[0]&2&&(t=!0,F.selectedMapLayer=$[1],Gn(()=>t=!1)),!r&&D[0]&8&&(r=!0,F.poiFeaturesFilter=$[3],Gn(()=>r=!1)),!s&&D[0]&16&&(s=!0,F.onlyShowFavourites=$[4],Gn(()=>s=!1)),n.$set(F),$[7].length>0?M?(M.p($,D),D[0]&128&&E(M,1)):(M=Cb($),M.c(),E(M,1),M.m(e,null)):M&&(It(),P(M,1,1,()=>{M=null}),Pt())},i($){a||(E(n.$$.fragment,$),E(M),a=!0)},o($){P(n.$$.fragment,$),P(M),a=!1},d($){$&&I(e),Z(n),M&&M.d(),i[27](null),l=!1,f()}}}function r9(i,e,n){let{selectedMapLayer:t}=e,{searchBar:r}=e,{poiFeatureOptions:s}=e,{poiFeaturesFilter:o}=e,{onlyShowFavourites:a}=e,{map:l}=e,{checkInCandidates:f}=e,{updateSearchBarOffset:m}=e,{idOfSelectedPOI:g}=e,{userLocation:w}=e,{fetchCheckInCandidates:S}=e,{pointsOfInterest:M}=e,$="",D=null;const F=dl(),L=ve=>{n(10,$="");const We=M.find(({id:pt})=>pt===ve);We&&l.flyTo({center:We.lngLat,zoom:Math.min(16,Math.max(14,l.getZoom())),padding:{top:300}}),F("poiSelected",ve)};let U=!0,ne=0;const se=async ve=>{if(w===void 0)return;if((await fetch("/api/check-in",{method:"POST",body:JSON.stringify({poi_id:ve,latitude:w.lat,longitude:w.lat,accuracy_meters:w.accuracyMeters}),headers:{"Content-Type":"application/json"}})).ok||Km.error("Failed to check-in at POI, contact admin for details."),S(),await(await fetch("/api/check-in/single?poi_id="+encodeURIComponent(ve))).json()){Km.success("Successfully checked in at POI!"),Fy.checkForUpdates();const St=M.find(({id:Dt})=>ve===Dt);St!==void 0&&(St.checkedIn=!0,n(14,M))}},ee=async()=>{if(l==null||l.resize(),$!==""){const ve=$;n(10,$=""),await BC(250),m(),n(10,$=ve)}else m()};function fe(ve){t=ve,n(1,t)}function _e(ve){o=ve,n(3,o)}function re(ve){a=ve,n(4,a)}function de(ve){At.call(this,i,ve)}const he=ve=>L(ve.id),X=ve=>se(ve.id),j=ve=>{ve!==void 0&&ve!==""?(n(9,U=!1),n(11,D=g),n(0,g=null)):D!==null&&(n(9,U=!1),n(0,g=D))};function xe(ve){$=ve,n(10,$),n(7,f),n(0,g),n(9,U)}function ze(ve){Nt[ve?"unshift":"push"](()=>{r=ve,n(2,r)})}return i.$$set=ve=>{"selectedMapLayer"in ve&&n(1,t=ve.selectedMapLayer),"searchBar"in ve&&n(2,r=ve.searchBar),"poiFeatureOptions"in ve&&n(5,s=ve.poiFeatureOptions),"poiFeaturesFilter"in ve&&n(3,o=ve.poiFeaturesFilter),"onlyShowFavourites"in ve&&n(4,a=ve.onlyShowFavourites),"map"in ve&&n(6,l=ve.map),"checkInCandidates"in ve&&n(7,f=ve.checkInCandidates),"updateSearchBarOffset"in ve&&n(8,m=ve.updateSearchBarOffset),"idOfSelectedPOI"in ve&&n(0,g=ve.idOfSelectedPOI),"userLocation"in ve&&n(15,w=ve.userLocation),"fetchCheckInCandidates"in ve&&n(16,S=ve.fetchCheckInCandidates),"pointsOfInterest"in ve&&n(14,M=ve.pointsOfInterest)},i.$$.update=()=>{i.$$.dirty[0]&128&&f.length===0&&n(10,$=""),i.$$.dirty[0]&513&&(g!==null?n(10,$=""):U?n(11,D=null):n(9,U=!0)),i.$$.dirty[0]&131456&&(async()=>(f.length>0&&ne===0||f.length===0&&ne>0)&&(n(17,ne=f.length),await Gi(),m()))()},[g,t,r,o,a,s,l,f,m,U,$,D,L,se,M,w,S,ne,ee,fe,_e,re,de,he,X,j,xe,ze]}class s9 extends Xe{constructor(e){super(),Je(this,e,r9,i9,Ze,{selectedMapLayer:1,searchBar:2,poiFeatureOptions:5,poiFeaturesFilter:3,onlyShowFavourites:4,map:6,checkInCandidates:7,updateSearchBarOffset:8,idOfSelectedPOI:0,userLocation:15,fetchCheckInCandidates:16,pointsOfInterest:14},null,[-1,-1])}}const{Map:o9}=cp;function Hm(i){const e=i.slice(),n=e[21](e[3]);return e[44]=n,e}function Eb(i,e,n){const t=i.slice();return t[45]=e[n].lngLat,t[46]=e[n].name,t[47]=e[n].id,t[48]=e[n].isFavourite,t[49]=e[n].checkedIn,t}function a9(i){let e,n,t,r,s,o,a,l,f,m,g,w,S,M,$;function D(X){i[23](X)}let F={style:i[5].URI,class:"h-full w-full absolute",zoom:i[11]?6:1,center:[i[10].lon,i[10].lat],attributionControl:!1,$$slots:{default:[m9]},$$scope:{ctx:i}};i[6]!==void 0&&(F.map=i[6]),e=new HM({props:F}),Nt.push(()=>Zn(e,"map",D)),e.$on("moveend",i[19]),e.$on("zoomend",i[19]);function L(X){i[24](X)}function U(X){i[25](X)}function ne(X){i[26](X)}function se(X){i[27](X)}function ee(X){i[28](X)}function fe(X){i[29](X)}let _e={poiFeatureOptions:i[7],map:i[6],checkInCandidates:i[13],updateSearchBarOffset:i[17],userLocation:i[4],fetchCheckInCandidates:i[18]};i[8]!==void 0&&(_e.searchBar=i[8]),i[5]!==void 0&&(_e.selectedMapLayer=i[5]),i[0]!==void 0&&(_e.poiFeaturesFilter=i[0]),i[1]!==void 0&&(_e.onlyShowFavourites=i[1]),i[3]!==void 0&&(_e.idOfSelectedPOI=i[3]),i[2]!==void 0&&(_e.pointsOfInterest=i[2]),r=new s9({props:_e}),Nt.push(()=>Zn(r,"searchBar",L)),Nt.push(()=>Zn(r,"selectedMapLayer",U)),Nt.push(()=>Zn(r,"poiFeaturesFilter",ne)),Nt.push(()=>Zn(r,"onlyShowFavourites",se)),Nt.push(()=>Zn(r,"idOfSelectedPOI",ee)),Nt.push(()=>Zn(r,"pointsOfInterest",fe)),r.$on("poiSelected",i[30]);let re=i[3]!==null&&Pb(Hm(i));function de(X){i[35](X)}let he={onOpenChange:i[34],$$slots:{default:[y9]},$$scope:{ctx:i}};return i[15]!==void 0&&(he.open=i[15]),S=new bl({props:he}),Nt.push(()=>Zn(S,"open",de)),{c(){H(e.$$.fragment),t=ke(),H(r.$$.fragment),g=ke(),re&&re.c(),w=ke(),H(S.$$.fragment)},l(X){W(e.$$.fragment,X),t=Ce(X),W(r.$$.fragment,X),g=Ce(X),re&&re.l(X),w=Ce(X),W(S.$$.fragment,X)},m(X,j){G(e,X,j),N(X,t,j),G(r,X,j),N(X,g,j),re&&re.m(X,j),N(X,w,j),G(S,X,j),$=!0},p(X,j){const xe={};j[0]&32&&(xe.style=X[5].URI),j[0]&2048&&(xe.zoom=X[11]?6:1),j[0]&1024&&(xe.center=[X[10].lon,X[10].lat]),j[0]&65608|j[1]&2097152&&(xe.$$scope={dirty:j,ctx:X}),!n&&j[0]&64&&(n=!0,xe.map=X[6],Gn(()=>n=!1)),e.$set(xe);const ze={};j[0]&128&&(ze.poiFeatureOptions=X[7]),j[0]&64&&(ze.map=X[6]),j[0]&8192&&(ze.checkInCandidates=X[13]),j[0]&16&&(ze.userLocation=X[4]),!s&&j[0]&256&&(s=!0,ze.searchBar=X[8],Gn(()=>s=!1)),!o&&j[0]&32&&(o=!0,ze.selectedMapLayer=X[5],Gn(()=>o=!1)),!a&&j[0]&1&&(a=!0,ze.poiFeaturesFilter=X[0],Gn(()=>a=!1)),!l&&j[0]&2&&(l=!0,ze.onlyShowFavourites=X[1],Gn(()=>l=!1)),!f&&j[0]&8&&(f=!0,ze.idOfSelectedPOI=X[3],Gn(()=>f=!1)),!m&&j[0]&4&&(m=!0,ze.pointsOfInterest=X[2],Gn(()=>m=!1)),r.$set(ze),X[3]!==null?re?(re.p(Hm(X),j),j[0]&8&&E(re,1)):(re=Pb(Hm(X)),re.c(),E(re,1),re.m(w.parentNode,w)):re&&(It(),P(re,1,1,()=>{re=null}),Pt());const ve={};j[1]&2097152&&(ve.$$scope={dirty:j,ctx:X}),!M&&j[0]&32768&&(M=!0,ve.open=X[15],Gn(()=>M=!1)),S.$set(ve)},i(X){$||(E(e.$$.fragment,X),E(r.$$.fragment,X),E(re),E(S.$$.fragment,X),$=!0)},o(X){P(e.$$.fragment,X),P(r.$$.fragment,X),P(re),P(S.$$.fragment,X),$=!1},d(X){X&&(I(t),I(g),I(w)),Z(e,X),Z(r,X),re&&re.d(X),Z(S,X)}}}function l9(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-ava9pj"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","grow flex items-center justify-center")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function c9(i){let e,n,t;return n=new lT({props:{class:"h-5 w-5"}}),{c(){e=ce("span"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","text-xl")},m(r,s){N(r,e,s),G(n,e,null),t=!0},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function u9(i){let e,n,t;return n=new Sc({props:{class:"h-5 w-5"}}),{c(){e=ce("span"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","text-xl")},m(r,s){N(r,e,s),G(n,e,null),t=!0},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function f9(i){let e,n,t;return n=new fp({props:{class:"h-5 w-5"}}),{c(){e=ce("span"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","text-xl")},m(r,s){N(r,e,s),G(n,e,null),t=!0},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function d9(i){let e,n=i[46]+"",t;return{c(){e=ce("div"),t=lt(n),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=we(e);t=ct(s,n),s.forEach(I),this.h()},h(){oe(e,"class","text-lg font-bold text-black")},m(r,s){N(r,e,s),me(e,t)},p(r,s){s[0]&65536&&n!==(n=r[46]+"")&&cn(t,n)},d(r){r&&I(e)}}}function h9(i){let e,n,t,r,s,o;const a=[f9,u9,c9],l=[];function f(m,g){return m[49]?0:m[48]?1:2}return e=f(i),n=l[e]=a[e](i),r=new QM({props:{openOn:"hover",offset:[0,-10],$$slots:{default:[d9]},$$scope:{ctx:i}}}),{c(){n.c(),t=ke(),H(r.$$.fragment),s=ke()},l(m){n.l(m),t=Ce(m),W(r.$$.fragment,m),s=Ce(m)},m(m,g){l[e].m(m,g),N(m,t,g),G(r,m,g),N(m,s,g),o=!0},p(m,g){let w=e;e=f(m),e!==w&&(It(),P(l[w],1,1,()=>{l[w]=null}),Pt(),n=l[e],n||(n=l[e]=a[e](m),n.c()),E(n,1),n.m(t.parentNode,t));const S={};g[0]&65536|g[1]&2097152&&(S.$$scope={dirty:g,ctx:m}),r.$set(S)},i(m){o||(E(n),E(r.$$.fragment,m),o=!0)},o(m){P(n),P(r.$$.fragment,m),o=!1},d(m){m&&(I(t),I(s)),l[e].d(m),Z(r,m)}}}function Ib(i,e){let n,t,r;function s(){return e[22](e[47],e[45])}return t=new KM({props:{lngLat:e[45],class:"z-10 grid h-8 w-8 place-items-center rounded-full border border-zinc-600 text-black shadow-2xl focus:outline-2 focus:outline-black"+(e[3]===e[47]?" border-4 box-content":"")+(e[49]?" bg-cyan-300":e[48]?" bg-green-300":" bg-red-300"),$$slots:{default:[h9]},$$scope:{ctx:e}}}),t.$on("click",s),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(o){n=Le(),W(t.$$.fragment,o),this.h()},h(){this.first=n},m(o,a){N(o,n,a),G(t,o,a),r=!0},p(o,a){e=o;const l={};a[0]&65536&&(l.lngLat=e[45]),a[0]&65544&&(l.class="z-10 grid h-8 w-8 place-items-center rounded-full border border-zinc-600 text-black shadow-2xl focus:outline-2 focus:outline-black"+(e[3]===e[47]?" border-4 box-content":"")+(e[49]?" bg-cyan-300":e[48]?" bg-green-300":" bg-red-300")),a[0]&65536|a[1]&2097152&&(l.$$scope={dirty:a,ctx:e}),t.$set(l)},i(o){r||(E(t.$$.fragment,o),r=!0)},o(o){P(t.$$.fragment,o),r=!1},d(o){o&&I(n),Z(t,o)}}}function m9(i){let e=[],n=new o9,t,r,s=kn(i[16]);const o=a=>a[47];for(let a=0;a<s.length;a+=1){let l=Eb(i,s,a),f=o(l);n.set(f,e[a]=Ib(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l[0]&65608&&(s=kn(a[16]),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,Ib,t,Eb),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Pb(i){let e,n,t,r;return n=new uz({props:{closePOICard:i[31],poi:i[44],userNickname:i[14],refreshPOIs:i[32]}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(s){e=ue(s,"DIV",{class:!0,style:!0});var o=we(e);W(n.$$.fragment,o),o.forEach(I),this.h()},h(){oe(e,"class","absolute w-full max-w-md md:max-w-xl top-2 right-2"),oe(e,"style",t=`margin-top: ${i[9]}px;`)},m(s,o){N(s,e,o),G(n,e,null),r=!0},p(s,o){const a={};o[0]&8&&(a.closePOICard=s[31]),o[0]&8&&(a.poi=s[44]),o[0]&16384&&(a.userNickname=s[14]),o[0]&4&&(a.refreshPOIs=s[32]),n.$set(a),(!r||o[0]&512&&t!==(t=`margin-top: ${s[9]}px;`))&&oe(e,"style",t)},i(s){r||(E(n.$$.fragment,s),r=!0)},o(s){P(n.$$.fragment,s),r=!1},d(s){s&&I(e),Z(n)}}}function p9(i){let e;return{c(){e=lt("Please allow geolocation permissions and turn on location services.")},l(n){e=ct(n,"Please allow geolocation permissions and turn on location services.")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function _9(i){let e,n;return e=new cf({props:{$$slots:{default:[p9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function g9(i){let e;return{c(){e=lt("Confirm & Refresh Page")},l(n){e=ct(n,"Confirm & Refresh Page")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function v9(i){let e,n;return e=new qi({props:{$$slots:{default:[g9]},$$scope:{ctx:i}}}),e.$on("click",i[33]),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function b9(i){let e,n,t,r;return e=new lf({props:{$$slots:{default:[_9]},$$scope:{ctx:i}}}),t=new wD({props:{$$slots:{default:[v9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o[1]&2097152&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o[1]&2097152&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function y9(i){let e,n;return e=new vl({props:{$$slots:{default:[b9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&2097152&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function w9(i){let e,n,t,r;const s=[l9,a9],o=[];function a(l,f){return l[12]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}const ol=$d({id:yc,isFavourite:Rg,lngLat:$d({lng:yc,lat:yc}),name:gc,description:gc,features:Em(gc),likes:yc,comments:Em($d({text:gc,nickname:gc})),pictures:Em(gc),checkedIn:Rg});function x9(i,e,n){let t,r;Jt(i,By,yt=>n(41,r=yt));const s=r.url.searchParams.get("focus-poi");let o=sl.find(({value:yt})=>yt==="outdoor");Zi(()=>{const yt=localStorage.getItem("preferredMapLayer");yt&&sl.map(({value:Ue})=>Ue).includes(yt)&&n(5,o=sl.find(({value:Ue})=>Ue===yt))});let a,l,f,m,g,w=[],S=!1,M,$=64,D=[],F=null,L={lon:0,lat:0},U=!1,ne=!0,se,ee=[],fe=jo.CancelToken.source();const _e=()=>{M&&n(9,$=M.offsetHeight)},re=async()=>{fe&&fe.cancel(),fe=jo.CancelToken.source();const yt=fe.token,Ue=new URLSearchParams({latitude:se.lat.toString(),longitude:se.lng.toString(),accuracy_meters:se.accuracyMeters.toString()}),kt=await jo.get(`/api/check-in/candidates?${Ue.toString()}`,{cancelToken:yt}).catch(Ge=>Ge);if(kt!=null&&kt.data){let Ge=kt.data;Ge=Ge.map(Xt=>{const En=ol.decode(Xt);return Pd(En)?En.right:{error:!0,message:"Invalid POI object received from API: "+En.left}}),Ge=Ge.filter(Xt=>"error"in Xt&&Xt.error?(console.error(Xt.message),!1):!0),n(13,ee=Ge)}};let de=null;const he=yt=>JSON.stringify(yt,Object.keys(yt).sort()),X=async()=>{const yt=a.getBounds(),Ue=yt._ne.lat,kt=yt._sw.lat,Ge=yt._ne.lng,Xt=yt._sw.lng,En={north:Ue>90?"90":Ue.toString(),south:kt<-90?"-90":kt.toString(),east:Ge>180?"180":Ge.toString(),west:Xt<-180?"-180":Xt.toString()};if(de!==null&&he(de)===he(En))return;de=En;const Oe=new URLSearchParams(En),un=await fetch(`/api/poi?${Oe.toString()}`);un.ok&&(await un.json()).forEach(_n=>{const mt=ol.decode(_n);if(Pd(mt)){const Zt=mt.right;D.some(Kt=>Kt.id===Zt.id)||n(2,D=[...D,Zt])}else console.error("Invalid POI object received from API: ",mt.left)})},j=async yt=>{if(D.some(Ge=>Ge.id===yt)){n(3,F=yt);return}const Ue=new URLSearchParams({id:yt.toString()}),kt=await fetch(`/api/poi/get-by-id?${Ue.toString()}`);if(kt.ok){const Ge=await kt.json(),Xt=ol.decode(Ge);if(Pd(Xt)){const En=Xt.right;D.some(Oe=>Oe.id===En.id)||(n(2,D=[...D,En]),n(3,F=En.id))}else console.error("Invalid POI object received from API: ",Xt.left)}},xe=yt=>D.find(({id:Ue})=>yt===Ue);let ze,ve=!1;Zi(async()=>{const yt=async()=>{try{const Ge=await fetch("/api/utils/geolocation");if(Ge.ok){const Xt=await Ge.json();!isNaN(parseFloat(Xt.lon))&&!isNaN(parseFloat(Xt.lat))&&(n(10,[L.lon,L.lat]=[parseFloat(Xt.lon),parseFloat(Xt.lat)],L),n(11,U=!0))}else{const Xt=await fetch("https://api.ipify.org?format=json"),Oe=(await Xt.json()).ip;if(!Xt.ok)return;const un=await fetch("/api/utils/geolocation-with-ip-param",{method:"POST",body:JSON.stringify({ip:Oe}),headers:{"Content-Type":"application/json"}});if(!un.ok)return;const qn=await un.json();!isNaN(parseFloat(qn.lon))&&!isNaN(parseFloat(qn.lat))&&(n(10,[L.lon,L.lat]=[parseFloat(qn.lon),parseFloat(qn.lat)],L),n(11,U=!0))}}catch(Ge){console.error(Ge)}},Ue=async()=>{try{const Xt=await(await fetch("/api/poi/features")).json();n(7,g=Xt.allPOIFeatures)}catch(Ge){console.error(Ge)}},kt=async()=>{const Ge=await fetch("/api/settings/profile"),{nickname:Xt}=await Ge.json();Xt===void 0&&typeof Xt!="string"||n(14,ze=Xt)};await Promise.allSettled([yt(),Ue(),kt()]),n(12,ne=!1),await Gi(),l=new Md.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),a.addControl(l,"bottom-right"),l._container.parentElement.style.zIndex="10",f=new Md.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),a.addControl(f,"bottom-right"),f._container.parentElement.style.zIndex="10",m=new Md.ScaleControl({maxWidth:160,unit:"metric"}),a.addControl(m,"bottom-left"),m._container.parentElement.style.zIndex="10",a.on("load",async()=>{if(a.resize(),s){await j(parseInt(s));const Ge=D.find(({id:Xt})=>Xt===parseInt(s));if(Ge){await new Promise(En=>{f.on("trackuserlocationstart",()=>a.once("movestart",En)),f.trigger()}),a.stop();const Xt=14;a.flyTo({center:Ge.lngLat,zoom:Xt,padding:{top:300}}),n(3,F=parseInt(s))}else f.trigger()}else f.trigger()}),a.on("pitchend",X),_e(),f.on("error",()=>n(15,ve=!0)),f.on("trackuserlocationend",Ge=>Ge.target._watchState==="OFF"&&f.trigger()),f.on("geolocate",Ge=>{const Xt=Ge.coords;n(4,se={lat:Xt.latitude,lng:Xt.longitude,accuracyMeters:Xt.accuracy})}),a.on("click",Ge=>{Ge.originalEvent.target.dataset.testid==="map-canvas"&&n(3,F=null)})});const We=(yt,Ue)=>{n(3,F=yt),a.flyTo({center:Ue,padding:{top:300}})};function pt(yt){a=yt,n(6,a)}function Mt(yt){M=yt,n(8,M)}function St(yt){o=yt,n(5,o)}function Dt(yt){w=yt,n(0,w)}function zt(yt){S=yt,n(1,S)}function _t(yt){F=yt,n(3,F)}function ft(yt){D=yt,n(2,D)}const Be=({detail:yt})=>j(yt),Ut=()=>n(3,F=null),Rt=()=>n(2,D=[...D]),qt=()=>location.reload(),et=yt=>yt||location.reload();function dt(yt){ve=yt,n(15,ve)}return i.$$.update=()=>{i.$$.dirty[0]&15&&n(16,t=D.filter(({features:yt,isFavourite:Ue,id:kt})=>kt===F?!0:!(w.length>0&&!yt.some(Ge=>w.includes(Ge))||S&&!Ue))),i.$$.dirty[0]&16&&se!==void 0&&re()},[w,S,D,F,se,o,a,g,M,$,L,U,ne,ee,ze,ve,t,_e,re,X,j,xe,We,pt,Mt,St,Dt,zt,_t,ft,Be,Ut,Rt,qt,et,dt]}class k9 extends Xe{constructor(e){super(),Je(this,e,x9,w9,Ze,{},null,[-1,-1])}}function C9(i){let e,n;return e=new k9({}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function T9(i,e,n){let{slug:t}=e;return i.$$set=r=>{"slug"in r&&n(0,t=r.slug)},[t]}class S9 extends Xe{constructor(e){super(),Je(this,e,T9,C9,Ze,{slug:0})}}class E9 extends Xe{constructor(e){super(),Je(this,e,null,null,Ze,{})}}class I9 extends Xe{constructor(e){super(),Je(this,e,null,null,Ze,{})}}function P9(i){let e;return{c(){e=lt(i[2])},l(n){e=ct(n,i[2])},m(n,t){N(n,e,t)},p(n,t){t&4&&cn(e,n[2])},d(n){n&&I(e)}}}function $9(i){let e,n,t,r;return e=new Co({props:{class:"mb-3",$$slots:{default:[P9]},$$scope:{ctx:i}}}),t=new To({}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&1028&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function A9(i){let e,n,t;var r=i[1];function s(o,a){return{}}return r&&(e=ba(r,s())),{c(){e&&H(e.$$.fragment),n=Le()},l(o){e&&W(e.$$.fragment,o),n=Le()},m(o,a){e&&G(e,o,a),N(o,n,a),t=!0},p(o,a){if(a&2&&r!==(r=o[1])){if(e){It();const l=e;P(l.$$.fragment,1,0,()=>{Z(l,1)}),Pt()}r?(e=ba(r,s()),H(e.$$.fragment),E(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}},i(o){t||(e&&E(e.$$.fragment,o),t=!0)},o(o){e&&P(e.$$.fragment,o),t=!1},d(o){o&&I(n),e&&Z(e,o)}}}function M9(i){let e,n,t,r,s;return n=new ws({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[$9]},$$scope:{ctx:i}}}),r=new ts({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[6]}px);`,$$slots:{default:[A9]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),H(r.$$.fragment)},l(o){e=ue(o,"DIV",{});var a=we(e);W(n.$$.fragment,a),a.forEach(I),t=Ce(o),W(r.$$.fragment,o)},m(o,a){N(o,e,a),G(n,e,null),i[8](e),N(o,t,a),G(r,o,a),s=!0},p(o,a){const l={};a&1028&&(l.$$scope={dirty:a,ctx:o}),n.$set(l);const f={};a&64&&(f.style=`height: calc(100% - ${o[6]}px);`),a&1026&&(f.$$scope={dirty:a,ctx:o}),r.$set(f)},i(o){s||(E(n.$$.fragment,o),E(r.$$.fragment,o),s=!0)},o(o){P(n.$$.fragment,o),P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(n),i[8](null),Z(r,o)}}}function D9(i){let e,n,t,r,s,o,a,l,f,m,g,w,S="Feed",M,$,D,F,L,U,ne="Connections",se,ee,fe,_e;return document.title=e=i[2]+" - Social Network",s=new or({props:{class:"relative p-4 h-full",$$slots:{default:[M9]},$$scope:{ctx:i}}}),m=new B3({props:{class:"h-5 w-5"}}),F=new hT({props:{class:"h-5 w-5"}}),{c(){n=ke(),t=ce("div"),r=ce("div"),H(s.$$.fragment),a=ke(),l=ce("div"),f=ce("a"),H(m.$$.fragment),g=ke(),w=ce("span"),w.textContent=S,$=ke(),D=ce("a"),H(F.$$.fragment),L=ke(),U=ce("span"),U.textContent=ne,this.h()},l(re){Ry("svelte-hbok3p",document.head).forEach(I),n=Ce(re),t=ue(re,"DIV",{class:!0});var he=we(t);r=ue(he,"DIV",{class:!0,style:!0});var X=we(r);W(s.$$.fragment,X),X.forEach(I),a=Ce(he),l=ue(he,"DIV",{class:!0});var j=we(l);f=ue(j,"A",{class:!0,href:!0,"data-testid":!0});var xe=we(f);W(m.$$.fragment,xe),g=Ce(xe),w=ue(xe,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(w)!=="svelte-oj2kup"&&(w.textContent=S),xe.forEach(I),$=Ce(j),D=ue(j,"A",{class:!0,href:!0,"data-testid":!0});var ze=we(D);W(F.$$.fragment,ze),L=Ce(ze),U=ue(ze,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(U)!=="svelte-s36po"&&(U.textContent=ne),ze.forEach(I),j.forEach(I),he.forEach(I),this.h()},h(){oe(r,"class","flex flex-col p-4 relative"),oe(r,"style",o=`height: calc(100% - ${i[4]}px);`),oe(w,"class","btm-nav-label text-neutral-content font-medium"),oe(f,"class",M="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(i[0]===si.SOCIAL_NETWORK_FEED?" bg-secondary/30":"")),oe(f,"href",`/app/${si.SOCIAL_NETWORK_FEED}`),oe(f,"data-testid","social-network-feed-button"),zi(f,"active",i[0]===si.SOCIAL_NETWORK_FEED),oe(U,"class","btm-nav-label text-neutral-content font-medium"),oe(D,"class",se="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(i[0]===si.SOCIAL_NETWORK_CONNECTIONS?" bg-secondary/30":"")),oe(D,"href",`/app/${si.SOCIAL_NETWORK_CONNECTIONS}`),oe(D,"data-testid","social-network-connections-button"),zi(D,"active",i[0]===si.SOCIAL_NETWORK_CONNECTIONS),oe(l,"class","btm-nav static max-sm:btm-nav-md"),oe(t,"class","flex grow flex-col relative h-full")},m(re,de){N(re,n,de),N(re,t,de),me(t,r),G(s,r,null),me(t,a),me(t,l),me(l,f),G(m,f,null),me(f,g),me(f,w),me(l,$),me(l,D),G(F,D,null),me(D,L),me(D,U),i[9](l),ee=!0,fe||(_e=Ke(window,"resize",i[7]),fe=!0)},p(re,[de]){(!ee||de&4)&&e!==(e=re[2]+" - Social Network")&&(document.title=e);const he={};de&1126&&(he.$$scope={dirty:de,ctx:re}),s.$set(he),(!ee||de&16&&o!==(o=`height: calc(100% - ${re[4]}px);`))&&oe(r,"style",o),(!ee||de&1&&M!==(M="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(re[0]===si.SOCIAL_NETWORK_FEED?" bg-secondary/30":"")))&&oe(f,"class",M),(!ee||de&1)&&zi(f,"active",re[0]===si.SOCIAL_NETWORK_FEED),(!ee||de&1&&se!==(se="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(re[0]===si.SOCIAL_NETWORK_CONNECTIONS?" bg-secondary/30":"")))&&oe(D,"class",se),(!ee||de&1)&&zi(D,"active",re[0]===si.SOCIAL_NETWORK_CONNECTIONS)},i(re){ee||(E(s.$$.fragment,re),E(m.$$.fragment,re),E(F.$$.fragment,re),ee=!0)},o(re){P(s.$$.fragment,re),P(m.$$.fragment,re),P(F.$$.fragment,re),ee=!1},d(re){re&&(I(n),I(t)),Z(s),Z(m),Z(F),i[9](null),fe=!1,_e()}}}function O9(i,e,n){let{slug:t}=e,r=null,s="",o,a=64,l,f=64;const m=()=>{let S=o.offsetHeight;S!==void 0&&n(4,a=S),S=l.offsetHeight,S!==void 0&&n(6,f=S)};Zi(m);function g(S){Nt[S?"unshift":"push"](()=>{l=S,n(5,l)})}function w(S){Nt[S?"unshift":"push"](()=>{o=S,n(3,o)})}return i.$$set=S=>{"slug"in S&&n(0,t=S.slug)},i.$$.update=()=>{if(i.$$.dirty&1)switch(t){case si.SOCIAL_NETWORK_FEED:n(1,r=E9),n(2,s="Feed");break;case si.SOCIAL_NETWORK_CONNECTIONS:n(1,r=I9),n(2,s="Connections");break;default:il("/app/"+si.SOCIAL_NETWORK_FEED);break}},[t,r,s,o,a,l,f,m,g,w]}class z9 extends Xe{constructor(e){super(),Je(this,e,O9,D9,Ze,{slug:0})}}function R9(i){let e,n;return{c(){e=lt("Total Points: "),n=lt(i[0])},l(t){e=ct(t,"Total Points: "),n=ct(t,i[0])},m(t,r){N(t,e,r),N(t,n,r)},p(t,r){r&1&&cn(n,t[0])},d(t){t&&(I(e),I(n))}}}function L9(i){let e,n;return e=new _l({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function F9(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Li(e.src,n=es[i[1].badge])||oe(e,"src",n),oe(e,"class","h-14 w-14 -ml-0.5"),oe(e,"alt","Badge Icon")},m(s,o){N(s,e,o),t||(r=Ke(e,"error",i[4]),t=!0)},p(s,o){o&2&&!Li(e.src,n=es[s[1].badge])&&oe(e,"src",n)},i:Ct,o:Ct,d(s){s&&I(e),t=!1,r()}}}function B9(i){let e,n,t,r,s,o,a=i[1].badge+"",l,f,m,g,w=i[1].previous_threshold+"",S,M,$,D,F,L=i[1].threshold+"",U,ne;const se=[F9,L9],ee=[];function fe(_e,re){return _e[2]?1:0}return t=fe(i),r=ee[t]=se[t](i),{c(){e=ce("div"),n=ce("div"),r.c(),s=ke(),o=ce("p"),l=lt(a),f=ke(),m=ce("div"),g=ce("p"),S=lt(w),M=ke(),$=ce("progress"),D=ke(),F=ce("p"),U=lt(L),this.h()},l(_e){e=ue(_e,"DIV",{class:!0});var re=we(e);n=ue(re,"DIV",{class:!0});var de=we(n);r.l(de),de.forEach(I),s=Ce(re),o=ue(re,"P",{class:!0});var he=we(o);l=ct(he,a),he.forEach(I),f=Ce(re),m=ue(re,"DIV",{class:!0});var X=we(m);g=ue(X,"P",{class:!0});var j=we(g);S=ct(j,w),j.forEach(I),M=Ce(X),$=ue(X,"PROGRESS",{class:!0,max:!0}),we($).forEach(I),D=Ce(X),F=ue(X,"P",{class:!0});var xe=we(F);U=ct(xe,L),xe.forEach(I),X.forEach(I),re.forEach(I),this.h()},h(){oe(n,"class","shrink-0"),oe(o,"class","text-sm font-medium leading-none"),oe(g,"class","text-sm font-medium leading-none text-muted-foreground"),oe($,"class","progress progress-error grow"),$.value=i[3],oe($,"max","100"),oe(F,"class","text-sm font-medium leading-none text-muted-foreground"),oe(m,"class","flex self-stretch gap-2 items-center"),oe(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(_e,re){N(_e,e,re),me(e,n),ee[t].m(n,null),me(e,s),me(e,o),me(o,l),me(e,f),me(e,m),me(m,g),me(g,S),me(m,M),me(m,$),me(m,D),me(m,F),me(F,U),ne=!0},p(_e,re){let de=t;t=fe(_e),t===de?ee[t].p(_e,re):(It(),P(ee[de],1,1,()=>{ee[de]=null}),Pt(),r=ee[t],r?r.p(_e,re):(r=ee[t]=se[t](_e),r.c()),E(r,1),r.m(n,null)),(!ne||re&2)&&a!==(a=_e[1].badge+"")&&cn(l,a),(!ne||re&2)&&w!==(w=_e[1].previous_threshold+"")&&cn(S,w),(!ne||re&8)&&($.value=_e[3]),(!ne||re&2)&&L!==(L=_e[1].threshold+"")&&cn(U,L)},i(_e){ne||(E(r),ne=!0)},o(_e){P(r),ne=!1},d(_e){_e&&I(e),ee[t].d()}}}function N9(i){let e,n,t,r;return e=new Co({props:{class:"text-xs",$$slots:{default:[R9]},$$scope:{ctx:i}}}),t=new Ca({props:{$$slots:{default:[B9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&257&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&270&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function V9(i){let e,n;return e=new ws({props:{class:"p-2",$$slots:{default:[N9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function j9(i){let e,n;return e=new or({props:{$$slots:{default:[V9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}let $b=2e3;function U9(i,e,n){let{totalPoints:t}=e,{inProgressTotalPoints:r}=e,s=!1,o,a=0,l,f;Zi(()=>(o=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),o>100&&(o=100),f=Date.now(),l=setInterval(()=>{const w=Date.now()-f;if(w<$b){const S=w/$b;n(3,a=o*nf(S))}else n(3,a=o),clearInterval(l)},2),()=>clearInterval(l)));const m=()=>n(2,s=!0);return i.$$set=g=>{"totalPoints"in g&&n(0,t=g.totalPoints),"inProgressTotalPoints"in g&&n(1,r=g.inProgressTotalPoints)},[t,r,s,a,m]}class q9 extends Xe{constructor(e){super(),Je(this,e,U9,j9,Ze,{totalPoints:0,inProgressTotalPoints:1})}}function H9(i){let e,n;return{c(){e=lt("Total Check-ins: "),n=lt(i[0])},l(t){e=ct(t,"Total Check-ins: "),n=ct(t,i[0])},m(t,r){N(t,e,r),N(t,n,r)},p(t,r){r&1&&cn(n,t[0])},d(t){t&&(I(e),I(n))}}}function G9(i){let e,n;return e=new _l({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Z9(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Li(e.src,n=es[i[1].badge])||oe(e,"src",n),oe(e,"class","h-14 w-14 -ml-0.5"),oe(e,"alt","Badge Icon")},m(s,o){N(s,e,o),t||(r=Ke(e,"error",i[4]),t=!0)},p(s,o){o&2&&!Li(e.src,n=es[s[1].badge])&&oe(e,"src",n)},i:Ct,o:Ct,d(s){s&&I(e),t=!1,r()}}}function W9(i){let e,n,t,r,s,o,a=i[1].badge+"",l,f,m,g,w=i[1].previous_threshold+"",S,M,$,D,F,L=i[1].threshold+"",U,ne;const se=[Z9,G9],ee=[];function fe(_e,re){return _e[2]?1:0}return t=fe(i),r=ee[t]=se[t](i),{c(){e=ce("div"),n=ce("div"),r.c(),s=ke(),o=ce("p"),l=lt(a),f=ke(),m=ce("div"),g=ce("p"),S=lt(w),M=ke(),$=ce("progress"),D=ke(),F=ce("p"),U=lt(L),this.h()},l(_e){e=ue(_e,"DIV",{class:!0});var re=we(e);n=ue(re,"DIV",{class:!0});var de=we(n);r.l(de),de.forEach(I),s=Ce(re),o=ue(re,"P",{class:!0});var he=we(o);l=ct(he,a),he.forEach(I),f=Ce(re),m=ue(re,"DIV",{class:!0});var X=we(m);g=ue(X,"P",{class:!0});var j=we(g);S=ct(j,w),j.forEach(I),M=Ce(X),$=ue(X,"PROGRESS",{class:!0,max:!0}),we($).forEach(I),D=Ce(X),F=ue(X,"P",{class:!0});var xe=we(F);U=ct(xe,L),xe.forEach(I),X.forEach(I),re.forEach(I),this.h()},h(){oe(n,"class","shrink-0"),oe(o,"class","text-sm font-medium leading-none"),oe(g,"class","text-sm font-medium leading-none text-muted-foreground"),oe($,"class","progress progress-error grow"),$.value=i[3],oe($,"max","100"),oe(F,"class","text-sm font-medium leading-none text-muted-foreground"),oe(m,"class","flex self-stretch gap-2 items-center"),oe(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(_e,re){N(_e,e,re),me(e,n),ee[t].m(n,null),me(e,s),me(e,o),me(o,l),me(e,f),me(e,m),me(m,g),me(g,S),me(m,M),me(m,$),me(m,D),me(m,F),me(F,U),ne=!0},p(_e,re){let de=t;t=fe(_e),t===de?ee[t].p(_e,re):(It(),P(ee[de],1,1,()=>{ee[de]=null}),Pt(),r=ee[t],r?r.p(_e,re):(r=ee[t]=se[t](_e),r.c()),E(r,1),r.m(n,null)),(!ne||re&2)&&a!==(a=_e[1].badge+"")&&cn(l,a),(!ne||re&2)&&w!==(w=_e[1].previous_threshold+"")&&cn(S,w),(!ne||re&8)&&($.value=_e[3]),(!ne||re&2)&&L!==(L=_e[1].threshold+"")&&cn(U,L)},i(_e){ne||(E(r),ne=!0)},o(_e){P(r),ne=!1},d(_e){_e&&I(e),ee[t].d()}}}function K9(i){let e,n,t,r;return e=new Co({props:{class:"text-xs",$$slots:{default:[H9]},$$scope:{ctx:i}}}),t=new Ca({props:{$$slots:{default:[W9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&257&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&270&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function X9(i){let e,n;return e=new ws({props:{class:"p-2",$$slots:{default:[K9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function J9(i){let e,n;return e=new or({props:{$$slots:{default:[X9]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}let Ab=2e3;function Y9(i,e,n){let{totalCheckInCounts:t}=e,{inProgressTotalCheckIns:r}=e,s=!1,o,a=0,l,f;Zi(()=>(o=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),o>100&&(o=100),f=Date.now(),l=setInterval(()=>{const w=Date.now()-f;if(w<Ab){const S=w/Ab;n(3,a=o*nf(S))}else n(3,a=o),clearInterval(l)},2),()=>clearInterval(l)));const m=()=>n(2,s=!0);return i.$$set=g=>{"totalCheckInCounts"in g&&n(0,t=g.totalCheckInCounts),"inProgressTotalCheckIns"in g&&n(1,r=g.inProgressTotalCheckIns)},[t,r,s,a,m]}class Q9 extends Xe{constructor(e){super(),Je(this,e,Y9,J9,Ze,{totalCheckInCounts:0,inProgressTotalCheckIns:1})}}function eV(i){let e,n;return{c(){e=lt("Total Photos: "),n=lt(i[0])},l(t){e=ct(t,"Total Photos: "),n=ct(t,i[0])},m(t,r){N(t,e,r),N(t,n,r)},p(t,r){r&1&&cn(n,t[0])},d(t){t&&(I(e),I(n))}}}function tV(i){let e,n;return e=new _l({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function nV(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Li(e.src,n=es[i[1].badge])||oe(e,"src",n),oe(e,"class","h-14 w-14 -ml-0.5"),oe(e,"alt","Badge Icon")},m(s,o){N(s,e,o),t||(r=Ke(e,"error",i[4]),t=!0)},p(s,o){o&2&&!Li(e.src,n=es[s[1].badge])&&oe(e,"src",n)},i:Ct,o:Ct,d(s){s&&I(e),t=!1,r()}}}function iV(i){let e,n,t,r,s,o,a=i[1].badge+"",l,f,m,g,w=i[1].previous_threshold+"",S,M,$,D,F,L=i[1].threshold+"",U,ne;const se=[nV,tV],ee=[];function fe(_e,re){return _e[2]?1:0}return t=fe(i),r=ee[t]=se[t](i),{c(){e=ce("div"),n=ce("div"),r.c(),s=ke(),o=ce("p"),l=lt(a),f=ke(),m=ce("div"),g=ce("p"),S=lt(w),M=ke(),$=ce("progress"),D=ke(),F=ce("p"),U=lt(L),this.h()},l(_e){e=ue(_e,"DIV",{class:!0});var re=we(e);n=ue(re,"DIV",{class:!0});var de=we(n);r.l(de),de.forEach(I),s=Ce(re),o=ue(re,"P",{class:!0});var he=we(o);l=ct(he,a),he.forEach(I),f=Ce(re),m=ue(re,"DIV",{class:!0});var X=we(m);g=ue(X,"P",{class:!0});var j=we(g);S=ct(j,w),j.forEach(I),M=Ce(X),$=ue(X,"PROGRESS",{class:!0,max:!0}),we($).forEach(I),D=Ce(X),F=ue(X,"P",{class:!0});var xe=we(F);U=ct(xe,L),xe.forEach(I),X.forEach(I),re.forEach(I),this.h()},h(){oe(n,"class","shrink-0"),oe(o,"class","text-sm font-medium leading-none"),oe(g,"class","text-sm font-medium leading-none text-muted-foreground"),oe($,"class","progress progress-error grow"),$.value=i[3],oe($,"max","100"),oe(F,"class","text-sm font-medium leading-none text-muted-foreground"),oe(m,"class","flex self-stretch gap-2 items-center"),oe(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(_e,re){N(_e,e,re),me(e,n),ee[t].m(n,null),me(e,s),me(e,o),me(o,l),me(e,f),me(e,m),me(m,g),me(g,S),me(m,M),me(m,$),me(m,D),me(m,F),me(F,U),ne=!0},p(_e,re){let de=t;t=fe(_e),t===de?ee[t].p(_e,re):(It(),P(ee[de],1,1,()=>{ee[de]=null}),Pt(),r=ee[t],r?r.p(_e,re):(r=ee[t]=se[t](_e),r.c()),E(r,1),r.m(n,null)),(!ne||re&2)&&a!==(a=_e[1].badge+"")&&cn(l,a),(!ne||re&2)&&w!==(w=_e[1].previous_threshold+"")&&cn(S,w),(!ne||re&8)&&($.value=_e[3]),(!ne||re&2)&&L!==(L=_e[1].threshold+"")&&cn(U,L)},i(_e){ne||(E(r),ne=!0)},o(_e){P(r),ne=!1},d(_e){_e&&I(e),ee[t].d()}}}function rV(i){let e,n,t,r;return e=new Co({props:{class:"text-xs",$$slots:{default:[eV]},$$scope:{ctx:i}}}),t=new Ca({props:{$$slots:{default:[iV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&257&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&270&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function sV(i){let e,n;return e=new ws({props:{class:"p-2",$$slots:{default:[rV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function oV(i){let e,n;return e=new or({props:{$$slots:{default:[sV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}let Mb=2e3;function aV(i,e,n){let{totalPoiPhotoCounts:t}=e,{inProgressTotalPoiPhotos:r}=e,s=!1,o,a=0,l,f;Zi(()=>(o=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),o>100&&(o=100),f=Date.now(),l=setInterval(()=>{const w=Date.now()-f;if(w<Mb){const S=w/Mb;n(3,a=o*nf(S))}else n(3,a=o),clearInterval(l)},2),()=>clearInterval(l)));const m=()=>n(2,s=!0);return i.$$set=g=>{"totalPoiPhotoCounts"in g&&n(0,t=g.totalPoiPhotoCounts),"inProgressTotalPoiPhotos"in g&&n(1,r=g.inProgressTotalPoiPhotos)},[t,r,s,a,m]}class lV extends Xe{constructor(e){super(),Je(this,e,aV,oV,Ze,{totalPoiPhotoCounts:0,inProgressTotalPoiPhotos:1})}}function cV(i){let e,n;return{c(){e=lt("Total Reviews: "),n=lt(i[0])},l(t){e=ct(t,"Total Reviews: "),n=ct(t,i[0])},m(t,r){N(t,e,r),N(t,n,r)},p(t,r){r&1&&cn(n,t[0])},d(t){t&&(I(e),I(n))}}}function uV(i){let e,n;return e=new _l({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function fV(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Li(e.src,n=es[i[1].badge])||oe(e,"src",n),oe(e,"class","h-14 w-14 -ml-0.5"),oe(e,"alt","Badge Icon")},m(s,o){N(s,e,o),t||(r=Ke(e,"error",i[4]),t=!0)},p(s,o){o&2&&!Li(e.src,n=es[s[1].badge])&&oe(e,"src",n)},i:Ct,o:Ct,d(s){s&&I(e),t=!1,r()}}}function dV(i){let e,n,t,r,s,o,a=i[1].badge+"",l,f,m,g,w=i[1].previous_threshold+"",S,M,$,D,F,L=i[1].threshold+"",U,ne;const se=[fV,uV],ee=[];function fe(_e,re){return _e[2]?1:0}return t=fe(i),r=ee[t]=se[t](i),{c(){e=ce("div"),n=ce("div"),r.c(),s=ke(),o=ce("p"),l=lt(a),f=ke(),m=ce("div"),g=ce("p"),S=lt(w),M=ke(),$=ce("progress"),D=ke(),F=ce("p"),U=lt(L),this.h()},l(_e){e=ue(_e,"DIV",{class:!0});var re=we(e);n=ue(re,"DIV",{class:!0});var de=we(n);r.l(de),de.forEach(I),s=Ce(re),o=ue(re,"P",{class:!0});var he=we(o);l=ct(he,a),he.forEach(I),f=Ce(re),m=ue(re,"DIV",{class:!0});var X=we(m);g=ue(X,"P",{class:!0});var j=we(g);S=ct(j,w),j.forEach(I),M=Ce(X),$=ue(X,"PROGRESS",{class:!0,max:!0}),we($).forEach(I),D=Ce(X),F=ue(X,"P",{class:!0});var xe=we(F);U=ct(xe,L),xe.forEach(I),X.forEach(I),re.forEach(I),this.h()},h(){oe(n,"class","shrink-0"),oe(o,"class","text-sm font-medium leading-none"),oe(g,"class","text-sm font-medium leading-none text-muted-foreground"),oe($,"class","progress progress-error grow"),$.value=i[3],oe($,"max","100"),oe(F,"class","text-sm font-medium leading-none text-muted-foreground"),oe(m,"class","flex self-stretch gap-2 items-center"),oe(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(_e,re){N(_e,e,re),me(e,n),ee[t].m(n,null),me(e,s),me(e,o),me(o,l),me(e,f),me(e,m),me(m,g),me(g,S),me(m,M),me(m,$),me(m,D),me(m,F),me(F,U),ne=!0},p(_e,re){let de=t;t=fe(_e),t===de?ee[t].p(_e,re):(It(),P(ee[de],1,1,()=>{ee[de]=null}),Pt(),r=ee[t],r?r.p(_e,re):(r=ee[t]=se[t](_e),r.c()),E(r,1),r.m(n,null)),(!ne||re&2)&&a!==(a=_e[1].badge+"")&&cn(l,a),(!ne||re&2)&&w!==(w=_e[1].previous_threshold+"")&&cn(S,w),(!ne||re&8)&&($.value=_e[3]),(!ne||re&2)&&L!==(L=_e[1].threshold+"")&&cn(U,L)},i(_e){ne||(E(r),ne=!0)},o(_e){P(r),ne=!1},d(_e){_e&&I(e),ee[t].d()}}}function hV(i){let e,n,t,r;return e=new Co({props:{class:"text-xs",$$slots:{default:[cV]},$$scope:{ctx:i}}}),t=new Ca({props:{$$slots:{default:[dV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&257&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&270&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function mV(i){let e,n;return e=new ws({props:{class:"p-2",$$slots:{default:[hV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function pV(i){let e,n;return e=new or({props:{$$slots:{default:[mV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}let Db=2e3;function _V(i,e,n){let{totalPoiReviewCounts:t}=e,{inProgressTotalPoiReviews:r}=e,s=!1,o,a=0,l,f;Zi(()=>(o=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),o>100&&(o=100),f=Date.now(),l=setInterval(()=>{const w=Date.now()-f;if(w<Db){const S=w/Db;n(3,a=o*nf(S))}else n(3,a=o),clearInterval(l)},2),()=>clearInterval(l)));const m=()=>n(2,s=!0);return i.$$set=g=>{"totalPoiReviewCounts"in g&&n(0,t=g.totalPoiReviewCounts),"inProgressTotalPoiReviews"in g&&n(1,r=g.inProgressTotalPoiReviews)},[t,r,s,a,m]}class gV extends Xe{constructor(e){super(),Je(this,e,_V,pV,Ze,{totalPoiReviewCounts:0,inProgressTotalPoiReviews:1})}}function vV(i){let e,n="Your Progression",t,r,s,o,a,l,f,m,g,w,S,M;return s=new q9({props:{totalPoints:i[0],inProgressTotalPoints:i[4]}}),a=new Q9({props:{totalCheckInCounts:i[1],inProgressTotalCheckIns:i[5]}}),f=new lV({props:{totalPoiPhotoCounts:i[2],inProgressTotalPoiPhotos:i[6]}}),g=new gV({props:{totalPoiReviewCounts:i[3],inProgressTotalPoiReviews:i[7]}}),S=new To({props:{class:"mt-3 mb-4"}}),{c(){e=ce("p"),e.textContent=n,t=ke(),r=ce("div"),H(s.$$.fragment),o=ke(),H(a.$$.fragment),l=ke(),H(f.$$.fragment),m=ke(),H(g.$$.fragment),w=ke(),H(S.$$.fragment),this.h()},l($){e=ue($,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-cul2s5"&&(e.textContent=n),t=Ce($),r=ue($,"DIV",{class:!0});var D=we(r);W(s.$$.fragment,D),o=Ce(D),W(a.$$.fragment,D),l=Ce(D),W(f.$$.fragment,D),m=Ce(D),W(g.$$.fragment,D),D.forEach(I),w=Ce($),W(S.$$.fragment,$),this.h()},h(){oe(e,"class","text-sm font-medium leading-none text-muted-foreground mb-3"),oe(r,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m($,D){N($,e,D),N($,t,D),N($,r,D),G(s,r,null),me(r,o),G(a,r,null),me(r,l),G(f,r,null),me(r,m),G(g,r,null),N($,w,D),G(S,$,D),M=!0},p($,[D]){const F={};D&1&&(F.totalPoints=$[0]),D&16&&(F.inProgressTotalPoints=$[4]),s.$set(F);const L={};D&2&&(L.totalCheckInCounts=$[1]),D&32&&(L.inProgressTotalCheckIns=$[5]),a.$set(L);const U={};D&4&&(U.totalPoiPhotoCounts=$[2]),D&64&&(U.inProgressTotalPoiPhotos=$[6]),f.$set(U);const ne={};D&8&&(ne.totalPoiReviewCounts=$[3]),D&128&&(ne.inProgressTotalPoiReviews=$[7]),g.$set(ne)},i($){M||(E(s.$$.fragment,$),E(a.$$.fragment,$),E(f.$$.fragment,$),E(g.$$.fragment,$),E(S.$$.fragment,$),M=!0)},o($){P(s.$$.fragment,$),P(a.$$.fragment,$),P(f.$$.fragment,$),P(g.$$.fragment,$),P(S.$$.fragment,$),M=!1},d($){$&&(I(e),I(t),I(r),I(w)),Z(s),Z(a),Z(f),Z(g),Z(S,$)}}}function bV(i,e,n){let{totalPoints:t}=e,{totalCheckInCounts:r}=e,{totalPoiPhotoCounts:s}=e,{totalPoiReviewCounts:o}=e,{inProgressTotalPoints:a}=e,{inProgressTotalCheckIns:l}=e,{inProgressTotalPoiPhotos:f}=e,{inProgressTotalPoiReviews:m}=e;return i.$$set=g=>{"totalPoints"in g&&n(0,t=g.totalPoints),"totalCheckInCounts"in g&&n(1,r=g.totalCheckInCounts),"totalPoiPhotoCounts"in g&&n(2,s=g.totalPoiPhotoCounts),"totalPoiReviewCounts"in g&&n(3,o=g.totalPoiReviewCounts),"inProgressTotalPoints"in g&&n(4,a=g.inProgressTotalPoints),"inProgressTotalCheckIns"in g&&n(5,l=g.inProgressTotalCheckIns),"inProgressTotalPoiPhotos"in g&&n(6,f=g.inProgressTotalPoiPhotos),"inProgressTotalPoiReviews"in g&&n(7,m=g.inProgressTotalPoiReviews)},[t,r,s,o,a,l,f,m]}class yV extends Xe{constructor(e){super(),Je(this,e,bV,vV,Ze,{totalPoints:0,totalCheckInCounts:1,totalPoiPhotoCounts:2,totalPoiReviewCounts:3,inProgressTotalPoints:4,inProgressTotalCheckIns:5,inProgressTotalPoiPhotos:6,inProgressTotalPoiReviews:7})}}function wV(i){let e,n;return e=new _l({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function xV(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Li(e.src,n=es[i[0].badge])||oe(e,"src",n),oe(e,"class","h-14 w-14 -ml-0.5"),oe(e,"alt","Badge Icon")},m(s,o){N(s,e,o),t||(r=Ke(e,"error",i[3]),t=!0)},p(s,o){o&1&&!Li(e.src,n=es[s[0].badge])&&oe(e,"src",n)},i:Ct,o:Ct,d(s){s&&I(e),t=!1,r()}}}function kV(i){let e,n,t=i[0].badge+"",r,s,o,a,l,f,m,g=i[0].threshold+"",w,S,M,$;const D=[xV,wV],F=[];function L(U,ne){return U[2]?1:0}return a=L(i),l=F[a]=D[a](i),{c(){e=ce("div"),n=ce("p"),r=lt(t),s=ke(),o=ce("div"),l.c(),f=ke(),m=ce("p"),w=lt(g),S=ke(),M=lt(i[1]),this.h()},l(U){e=ue(U,"DIV",{class:!0});var ne=we(e);n=ue(ne,"P",{class:!0});var se=we(n);r=ct(se,t),se.forEach(I),s=Ce(ne),o=ue(ne,"DIV",{class:!0});var ee=we(o);l.l(ee),ee.forEach(I),f=Ce(ne),m=ue(ne,"P",{class:!0});var fe=we(m);w=ct(fe,g),S=Ce(fe),M=ct(fe,i[1]),fe.forEach(I),ne.forEach(I),this.h()},h(){oe(n,"class","text-sm font-medium leading-none"),oe(o,"class","shrink-0"),oe(m,"class","text-xs"),oe(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(U,ne){N(U,e,ne),me(e,n),me(n,r),me(e,s),me(e,o),F[a].m(o,null),me(e,f),me(e,m),me(m,w),me(m,S),me(m,M),$=!0},p(U,ne){(!$||ne&1)&&t!==(t=U[0].badge+"")&&cn(r,t);let se=a;a=L(U),a===se?F[a].p(U,ne):(It(),P(F[se],1,1,()=>{F[se]=null}),Pt(),l=F[a],l?l.p(U,ne):(l=F[a]=D[a](U),l.c()),E(l,1),l.m(o,null)),(!$||ne&1)&&g!==(g=U[0].threshold+"")&&cn(w,g),(!$||ne&2)&&cn(M,U[1])},i(U){$||(E(l),$=!0)},o(U){P(l),$=!1},d(U){U&&I(e),F[a].d()}}}function CV(i){let e,n;return e=new Ca({props:{$$slots:{default:[kV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function TV(i){let e,n;return e=new ws({props:{class:"p-2",$$slots:{default:[CV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function SV(i){let e,n;return e=new or({props:{$$slots:{default:[TV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function EV(i,e,n){let{badgeStatus:t}=e,{appendix:r}=e,s=!1;const o=()=>n(2,s=!0);return i.$$set=a=>{"badgeStatus"in a&&n(0,t=a.badgeStatus),"appendix"in a&&n(1,r=a.appendix)},[t,r,s,o]}class Gw extends Xe{constructor(e){super(),Je(this,e,EV,SV,Ze,{badgeStatus:0,appendix:1})}}function Ob(i,e,n){const t=i.slice();return t[7]=e[n],t}function zb(i,e,n){const t=i.slice();return t[7]=e[n],t}function IV(i){let e,n=[],t=new Map,r,s=kn(i[0]);const o=a=>a[7];for(let a=0;a<s.length;a+=1){let l=zb(i,s,a),f=o(l);t.set(f,n[a]=Rb(f,l))}return{c(){e=ce("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);for(let f=0;f<n.length;f+=1)n[f].l(l);l.forEach(I),this.h()},h(){oe(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2 mb-3")},m(a,l){N(a,e,l);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);r=!0},p(a,l){l&1&&(s=kn(a[0]),It(),n=Sr(n,l,o,1,a,s,t,e,Mr,Rb,null,zb),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(n[l]);r=!0}},o(a){for(let l=0;l<n.length;l+=1)P(n[l]);r=!1},d(a){a&&I(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function PV(i){let e,n="<p>You have achieved all possible milestones, congratulations!</p>";return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-apfzai"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","flex justify-center items-center p-4")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function Rb(i,e){let n,t,r;return t=new Gw({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function $V(i){let e,n;return e=new bl({props:{$$slots:{default:[LV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function AV(i){let e;return{c(){e=lt("Show All Others")},l(n){e=ct(n,"Show All Others")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function MV(i){let e,n;return e=new qi({props:{class:"grow",variant:"outline",$$slots:{default:[AV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function DV(i){let e;return{c(){e=lt("All Other Upcoming Milestones")},l(n){e=ct(n,"All Other Upcoming Milestones")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Lb(i,e){let n,t,r;return t=new Gw({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function OV(i){let e,n=[],t=new Map,r,s=kn(i[1]);const o=a=>a[7];for(let a=0;a<s.length;a+=1){let l=Ob(i,s,a),f=o(l);t.set(f,n[a]=Lb(f,l))}return{c(){e=ce("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);for(let f=0;f<n.length;f+=1)n[f].l(l);l.forEach(I),this.h()},h(){oe(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(a,l){N(a,e,l);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);r=!0},p(a,l){l&2&&(s=kn(a[1]),It(),n=Sr(n,l,o,1,a,s,t,e,Mr,Lb,null,Ob),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(n[l]);r=!0}},o(a){for(let l=0;l<n.length;l+=1)P(n[l]);r=!1},d(a){a&&I(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function zV(i){let e,n,t,r;return e=new Dp({props:{class:"mb-4",$$slots:{default:[DV]},$$scope:{ctx:i}}}),t=new cf({props:{$$slots:{default:[OV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&4096&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&4096&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function RV(i){let e,n;return e=new lf({props:{$$slots:{default:[zV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function LV(i){let e,n,t,r;return e=new U2({props:{class:"flex",$$slots:{default:[MV]},$$scope:{ctx:i}}}),t=new vl({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[RV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&4096&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&4096&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function FV(i){let e,n="Upcoming Milestones",t,r,s,o,a,l,f;const m=[PV,IV],g=[];function w(M,$){return M[0].length===0?0:1}r=w(i),s=g[r]=m[r](i);let S=i[1].length>0&&$V(i);return l=new To({props:{class:"mt-3 mb-4"}}),{c(){e=ce("p"),e.textContent=n,t=ke(),s.c(),o=ke(),S&&S.c(),a=ke(),H(l.$$.fragment),this.h()},l(M){e=ue(M,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-aoi7vs"&&(e.textContent=n),t=Ce(M),s.l(M),o=Ce(M),S&&S.l(M),a=Ce(M),W(l.$$.fragment,M),this.h()},h(){oe(e,"class","text-sm font-medium leading-none text-muted-foreground mb-3")},m(M,$){N(M,e,$),N(M,t,$),g[r].m(M,$),N(M,o,$),S&&S.m(M,$),N(M,a,$),G(l,M,$),f=!0},p(M,[$]){s.p(M,$),M[1].length>0&&S.p(M,$)},i(M){f||(E(s),E(S),E(l.$$.fragment,M),f=!0)},o(M){P(s),P(S),P(l.$$.fragment,M),f=!1},d(M){M&&(I(e),I(t),I(o),I(a)),g[r].d(M),S&&S.d(M),Z(l,M)}}}function BV(i,e,n){let{lockedTotalPoints:t}=e,{lockedTotalCheckIns:r}=e,{lockedTotalPoiPhotos:s}=e,{lockedTotalPoiReviews:o}=e;const a=(m,g)=>m.map(w=>({value:w,appendix:g})),l=[a(t,"Total Points")[0],a(r,"Total Check-ins")[0],a(s,"Total Photos")[0],a(o,"Total Reviews")[0]].concat([...a(t.slice(1),"Total Points"),...a(r.slice(1),"Total Check-ins"),...a(s.slice(1),"Total Photos"),...a(o.slice(1),"Total Reviews")]).filter(m=>m!==void 0).slice(0,4),f=[...a(t,"Total Points"),...a(r,"Total Check-ins"),...a(s,"Total Photos"),...a(o,"Total Reviews")].filter(m=>m!==void 0&&!l.some(({value:g})=>g===m.value));return i.$$set=m=>{"lockedTotalPoints"in m&&n(2,t=m.lockedTotalPoints),"lockedTotalCheckIns"in m&&n(3,r=m.lockedTotalCheckIns),"lockedTotalPoiPhotos"in m&&n(4,s=m.lockedTotalPoiPhotos),"lockedTotalPoiReviews"in m&&n(5,o=m.lockedTotalPoiReviews)},[l,f,t,r,s,o]}class NV extends Xe{constructor(e){super(),Je(this,e,BV,FV,Ze,{lockedTotalPoints:2,lockedTotalCheckIns:3,lockedTotalPoiPhotos:4,lockedTotalPoiReviews:5})}}function VV(i){let e,n;return e=new _l({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function jV(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){Li(e.src,n=es[i[0].badge])||oe(e,"src",n),oe(e,"class","h-14 w-14 -ml-0.5"),oe(e,"alt","Badge Icon")},m(s,o){N(s,e,o),t||(r=Ke(e,"error",i[3]),t=!0)},p(s,o){o&1&&!Li(e.src,n=es[s[0].badge])&&oe(e,"src",n)},i:Ct,o:Ct,d(s){s&&I(e),t=!1,r()}}}function UV(i){let e,n,t=i[0].badge+"",r,s,o,a,l,f,m,g=i[0].threshold+"",w,S,M,$;const D=[jV,VV],F=[];function L(U,ne){return U[2]?1:0}return a=L(i),l=F[a]=D[a](i),{c(){e=ce("div"),n=ce("p"),r=lt(t),s=ke(),o=ce("div"),l.c(),f=ke(),m=ce("p"),w=lt(g),S=ke(),M=lt(i[1]),this.h()},l(U){e=ue(U,"DIV",{class:!0});var ne=we(e);n=ue(ne,"P",{class:!0});var se=we(n);r=ct(se,t),se.forEach(I),s=Ce(ne),o=ue(ne,"DIV",{class:!0});var ee=we(o);l.l(ee),ee.forEach(I),f=Ce(ne),m=ue(ne,"P",{class:!0});var fe=we(m);w=ct(fe,g),S=Ce(fe),M=ct(fe,i[1]),fe.forEach(I),ne.forEach(I),this.h()},h(){oe(n,"class","text-sm font-medium leading-none"),oe(o,"class","shrink-0"),oe(m,"class","text-xs"),oe(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(U,ne){N(U,e,ne),me(e,n),me(n,r),me(e,s),me(e,o),F[a].m(o,null),me(e,f),me(e,m),me(m,w),me(m,S),me(m,M),$=!0},p(U,ne){(!$||ne&1)&&t!==(t=U[0].badge+"")&&cn(r,t);let se=a;a=L(U),a===se?F[a].p(U,ne):(It(),P(F[se],1,1,()=>{F[se]=null}),Pt(),l=F[a],l?l.p(U,ne):(l=F[a]=D[a](U),l.c()),E(l,1),l.m(o,null)),(!$||ne&1)&&g!==(g=U[0].threshold+"")&&cn(w,g),(!$||ne&2)&&cn(M,U[1])},i(U){$||(E(l),$=!0)},o(U){P(l),$=!1},d(U){U&&I(e),F[a].d()}}}function qV(i){let e,n;return e=new Ca({props:{$$slots:{default:[UV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function HV(i){let e,n;return e=new ws({props:{class:"p-2",$$slots:{default:[qV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function GV(i){let e,n;return e=new or({props:{$$slots:{default:[HV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function ZV(i,e,n){let{badgeStatus:t}=e,{appendix:r}=e,s=!1;const o=()=>n(2,s=!0);return i.$$set=a=>{"badgeStatus"in a&&n(0,t=a.badgeStatus),"appendix"in a&&n(1,r=a.appendix)},[t,r,s,o]}class Zw extends Xe{constructor(e){super(),Je(this,e,ZV,GV,Ze,{badgeStatus:0,appendix:1})}}function Fb(i,e,n){const t=i.slice();return t[7]=e[n],t}function Bb(i,e,n){const t=i.slice();return t[7]=e[n],t}function WV(i){let e,n=[],t=new Map,r,s=kn(i[0]);const o=a=>a[7];for(let a=0;a<s.length;a+=1){let l=Bb(i,s,a),f=o(l);t.set(f,n[a]=Nb(f,l))}return{c(){e=ce("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);for(let f=0;f<n.length;f+=1)n[f].l(l);l.forEach(I),this.h()},h(){oe(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2 mb-3")},m(a,l){N(a,e,l);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);r=!0},p(a,l){l&1&&(s=kn(a[0]),It(),n=Sr(n,l,o,1,a,s,t,e,Mr,Nb,null,Bb),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(n[l]);r=!0}},o(a){for(let l=0;l<n.length;l+=1)P(n[l]);r=!1},d(a){a&&I(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function KV(i){let e,n="<p>Currently you do not have any past achievements…</p>";return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-mb704s"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","flex justify-center items-center p-4")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function Nb(i,e){let n,t,r;return t=new Zw({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function XV(i){let e,n;return e=new bl({props:{$$slots:{default:[ij]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function JV(i){let e;return{c(){e=lt("Show All Others")},l(n){e=ct(n,"Show All Others")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function YV(i){let e,n;return e=new qi({props:{class:"grow",variant:"outline",$$slots:{default:[JV]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function QV(i){let e;return{c(){e=lt("All Other Past Achievements")},l(n){e=ct(n,"All Other Past Achievements")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Vb(i,e){let n,t,r;return t=new Zw({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function ej(i){let e,n=[],t=new Map,r,s=kn(i[1]);const o=a=>a[7];for(let a=0;a<s.length;a+=1){let l=Fb(i,s,a),f=o(l);t.set(f,n[a]=Vb(f,l))}return{c(){e=ce("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);for(let f=0;f<n.length;f+=1)n[f].l(l);l.forEach(I),this.h()},h(){oe(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(a,l){N(a,e,l);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);r=!0},p(a,l){l&2&&(s=kn(a[1]),It(),n=Sr(n,l,o,1,a,s,t,e,Mr,Vb,null,Fb),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(n[l]);r=!0}},o(a){for(let l=0;l<n.length;l+=1)P(n[l]);r=!1},d(a){a&&I(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function tj(i){let e,n,t,r;return e=new Dp({props:{class:"mb-4",$$slots:{default:[QV]},$$scope:{ctx:i}}}),t=new cf({props:{$$slots:{default:[ej]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&4096&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&4096&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function nj(i){let e,n;return e=new lf({props:{$$slots:{default:[tj]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function ij(i){let e,n,t,r;return e=new U2({props:{class:"flex",$$slots:{default:[YV]},$$scope:{ctx:i}}}),t=new vl({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[nj]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&4096&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&4096&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function rj(i){let e,n="Past Achievements",t,r,s,o,a,l;const f=[KV,WV],m=[];function g(S,M){return S[0].length===0?0:1}r=g(i),s=m[r]=f[r](i);let w=i[1].length>0&&XV(i);return{c(){e=ce("p"),e.textContent=n,t=ke(),s.c(),o=ke(),w&&w.c(),a=Le(),this.h()},l(S){e=ue(S,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-tls7dx"&&(e.textContent=n),t=Ce(S),s.l(S),o=Ce(S),w&&w.l(S),a=Le(),this.h()},h(){oe(e,"class","text-sm font-medium leading-none text-muted-foreground mb-3")},m(S,M){N(S,e,M),N(S,t,M),m[r].m(S,M),N(S,o,M),w&&w.m(S,M),N(S,a,M),l=!0},p(S,[M]){s.p(S,M),S[1].length>0&&w.p(S,M)},i(S){l||(E(s),E(w),l=!0)},o(S){P(s),P(w),l=!1},d(S){S&&(I(e),I(t),I(o),I(a)),m[r].d(S),w&&w.d(S)}}}function sj(i,e,n){let{achievedTotalPoints:t}=e,{achievedTotalCheckIns:r}=e,{achievedTotalPoiPhotos:s}=e,{achievedTotalPoiReviews:o}=e;const a=(m,g)=>m.map(w=>({value:w,appendix:g})),l=[a(t,"Total Points")[0],a(r,"Total Check-ins")[0],a(s,"Total Photos")[0],a(o,"Total Reviews")[0]].concat([...a(t.slice(1),"Total Points"),...a(r.slice(1),"Total Check-ins"),...a(s.slice(1),"Total Photos"),...a(o.slice(1),"Total Reviews")]).filter(m=>m!==void 0).slice(0,4),f=[...a(t,"Total Points"),...a(r,"Total Check-ins"),...a(s,"Total Photos"),...a(o,"Total Reviews")].filter(m=>m!==void 0&&!l.some(({value:g})=>g===m.value));return i.$$set=m=>{"achievedTotalPoints"in m&&n(2,t=m.achievedTotalPoints),"achievedTotalCheckIns"in m&&n(3,r=m.achievedTotalCheckIns),"achievedTotalPoiPhotos"in m&&n(4,s=m.achievedTotalPoiPhotos),"achievedTotalPoiReviews"in m&&n(5,o=m.achievedTotalPoiReviews)},[l,f,t,r,s,o]}class oj extends Xe{constructor(e){super(),Je(this,e,sj,rj,Ze,{achievedTotalPoints:2,achievedTotalCheckIns:3,achievedTotalPoiPhotos:4,achievedTotalPoiReviews:5})}}function aj(i){let e;return{c(){e=lt("Points & Badges")},l(n){e=ct(n,"Points & Badges")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function lj(i){let e,n;return e=new Ny({props:{class:"h-5 w-5"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function cj(i){let e,n;return e=new qi({props:{builders:[i[19]],variant:"secondary",size:"icon",$$slots:{default:[lj]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.builders=[t[19]]),r&1048576&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function uj(i){let e,n,t,r,s,o='<h4 class="text-sm font-semibold">Note</h4> <p class="text-sm">Total Points are calculated according to this formula:</p> <p class="italic text-xs">total_points = 20 * total_check_ins + 10 * total_photos + 5 * total_reviews</p>',a;return t=new Ny({props:{className:"h-4 w-4"}}),{c(){e=ce("div"),n=ce("div"),H(t.$$.fragment),r=ke(),s=ce("div"),s.innerHTML=o,this.h()},l(l){e=ue(l,"DIV",{class:!0});var f=we(e);n=ue(f,"DIV",{class:!0});var m=we(n);W(t.$$.fragment,m),m.forEach(I),r=Ce(f),s=ue(f,"DIV",{class:!0,"data-svelte-h":!0}),Rn(s)!=="svelte-4zeadu"&&(s.innerHTML=o),f.forEach(I),this.h()},h(){oe(n,"class","shrink-0"),oe(s,"class","space-y-1"),oe(e,"class","flex justify-between space-x-4")},m(l,f){N(l,e,f),me(e,n),G(t,n,null),me(e,r),me(e,s),a=!0},p:Ct,i(l){a||(E(t.$$.fragment,l),a=!0)},o(l){P(t.$$.fragment,l),a=!1},d(l){l&&I(e),Z(t)}}}function fj(i){let e,n,t,r;return e=new Cw({props:{asChild:!0,$$slots:{default:[cj,({builder:s})=>({19:s}),({builder:s})=>s?524288:0]},$$scope:{ctx:i}}}),t=new xw({props:{class:"w-80",$$slots:{default:[uj]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&1572864&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&1048576&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function dj(i){let e,n,t,r,s,o,a;return n=new Co({props:{$$slots:{default:[aj]},$$scope:{ctx:i}}}),r=new kw({props:{portal:null,$$slots:{default:[fj]},$$scope:{ctx:i}}}),o=new To({}),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),H(r.$$.fragment),s=ke(),H(o.$$.fragment),this.h()},l(l){e=ue(l,"DIV",{class:!0});var f=we(e);W(n.$$.fragment,f),t=Ce(f),W(r.$$.fragment,f),f.forEach(I),s=Ce(l),W(o.$$.fragment,l),this.h()},h(){oe(e,"class","flex justify-between mb-3 items-center")},m(l,f){N(l,e,f),G(n,e,null),me(e,t),G(r,e,null),N(l,s,f),G(o,l,f),a=!0},p(l,f){const m={};f&1048576&&(m.$$scope={dirty:f,ctx:l}),n.$set(m);const g={};f&1048576&&(g.$$scope={dirty:f,ctx:l}),r.$set(g)},i(l){a||(E(n.$$.fragment,l),E(r.$$.fragment,l),E(o.$$.fragment,l),a=!0)},o(l){P(n.$$.fragment,l),P(r.$$.fragment,l),P(o.$$.fragment,l),a=!1},d(l){l&&(I(e),I(s)),Z(n),Z(r),Z(o,l)}}}function hj(i){let e,n,t,r,s,o;return e=new yV({props:{totalPoints:i[3],totalCheckInCounts:i[4],totalPoiPhotoCounts:i[5],totalPoiReviewCounts:i[6],inProgressTotalPoints:i[12](i[7]),inProgressTotalCheckIns:i[12](i[8]),inProgressTotalPoiPhotos:i[12](i[9]),inProgressTotalPoiReviews:i[12](i[10])}}),t=new NV({props:{lockedTotalPoints:i[13](i[7]),lockedTotalCheckIns:i[13](i[8]),lockedTotalPoiPhotos:i[13](i[9]),lockedTotalPoiReviews:i[13](i[10])}}),s=new oj({props:{achievedTotalPoints:i[14](i[7]),achievedTotalCheckIns:i[14](i[8]),achievedTotalPoiPhotos:i[14](i[9]),achievedTotalPoiReviews:i[14](i[10])}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),H(s.$$.fragment)},l(a){W(e.$$.fragment,a),n=Ce(a),W(t.$$.fragment,a),r=Ce(a),W(s.$$.fragment,a)},m(a,l){G(e,a,l),N(a,n,l),G(t,a,l),N(a,r,l),G(s,a,l),o=!0},p(a,l){const f={};l&8&&(f.totalPoints=a[3]),l&16&&(f.totalCheckInCounts=a[4]),l&32&&(f.totalPoiPhotoCounts=a[5]),l&64&&(f.totalPoiReviewCounts=a[6]),l&128&&(f.inProgressTotalPoints=a[12](a[7])),l&256&&(f.inProgressTotalCheckIns=a[12](a[8])),l&512&&(f.inProgressTotalPoiPhotos=a[12](a[9])),l&1024&&(f.inProgressTotalPoiReviews=a[12](a[10])),e.$set(f);const m={};l&128&&(m.lockedTotalPoints=a[13](a[7])),l&256&&(m.lockedTotalCheckIns=a[13](a[8])),l&512&&(m.lockedTotalPoiPhotos=a[13](a[9])),l&1024&&(m.lockedTotalPoiReviews=a[13](a[10])),t.$set(m);const g={};l&128&&(g.achievedTotalPoints=a[14](a[7])),l&256&&(g.achievedTotalCheckIns=a[14](a[8])),l&512&&(g.achievedTotalPoiPhotos=a[14](a[9])),l&1024&&(g.achievedTotalPoiReviews=a[14](a[10])),s.$set(g)},i(a){o||(E(e.$$.fragment,a),E(t.$$.fragment,a),E(s.$$.fragment,a),o=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),P(s.$$.fragment,a),o=!1},d(a){a&&(I(n),I(r)),Z(e,a),Z(t,a),Z(s,a)}}}function mj(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","grow flex items-center justify-center")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function pj(i){let e,n,t,r;const s=[mj,hj],o=[];function a(l,f){return l[2]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function _j(i){let e,n,t,r,s;return n=new ws({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[dj]},$$scope:{ctx:i}}}),r=new ts({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[pj]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),H(r.$$.fragment)},l(o){e=ue(o,"DIV",{});var a=we(e);W(n.$$.fragment,a),a.forEach(I),t=Ce(o),W(r.$$.fragment,o)},m(o,a){N(o,e,a),G(n,e,null),i[16](e),N(o,t,a),G(r,o,a),s=!0},p(o,a){const l={};a&1048576&&(l.$$scope={dirty:a,ctx:o}),n.$set(l);const f={};a&2&&(f.style=`height: calc(100% - ${o[1]}px);`),a&1050620&&(f.$$scope={dirty:a,ctx:o}),r.$set(f)},i(o){s||(E(n.$$.fragment,o),E(r.$$.fragment,o),s=!0)},o(o){P(n.$$.fragment,o),P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(n),i[16](null),Z(r,o)}}}function gj(i){let e,n,t,r,s;return n=new or({props:{class:"relative p-4 h-full",$$slots:{default:[_j]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(o){e=ue(o,"DIV",{class:!0});var a=we(e);W(n.$$.fragment,a),a.forEach(I),this.h()},h(){oe(e,"class","flex flex-col p-4 relative h-full")},m(o,a){N(o,e,a),G(n,e,null),t=!0,r||(s=Ke(window,"resize",i[11]),r=!0)},p(o,[a]){const l={};a&1050623&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){t||(E(n.$$.fragment,o),t=!0)},o(o){P(n.$$.fragment,o),t=!1},d(o){o&&I(e),Z(n),r=!1,s()}}}const vj=$d({status:OC([Im("ACHIEVED"),Im("IN PROGRESS"),Im("LOCKED")]),badge:zC(es),threshold:yc,previous_threshold:yc});function bj(i,e,n){let{slug:t}=e,r,s=64;const o=()=>{const ee=r.offsetHeight;ee!==void 0&&n(1,s=ee)};Zi(o);let a=!0,l,f,m,g,w,S,M,$;const D=ee=>{if(!Array.isArray(ee))return console.error("Badge statuses are not an array"),[];const fe=[];return ee.forEach(_e=>{const re=vj.decode(_e);if(th.isRight(re)){const de=re.right;fe.push(de)}else console.error("Invalid BadgeStatus object received from API: ",re.left)}),fe};Zi(async()=>{const ee=["totalPoints","totalCheckInCounts","totalPoiPhotoCounts","totalPoiReviewCounts","badgeStatusesForTotalPoints","badgeStatusesForTotalCheckInCounts","badgeStatusesForTotalPoiPhotoCounts","badgeStatusesForTotalPoiReviewCounts"],fe=await fetch("/api/points-badges");if(fe.ok){const _e=await fe.json();if(ee.some(re=>_e[re]===void 0)){console.error("Undefined data returned from API");return}if(typeof _e.totalPoints!="number"||typeof _e.totalCheckInCounts!="number"||typeof _e.totalPoiPhotoCounts!="number"||typeof _e.totalPoiReviewCounts!="number"){console.error("Data returned from API has unexpected type");return}n(7,w=D(_e.badgeStatusesForTotalPoints)),n(8,S=D(_e.badgeStatusesForTotalCheckInCounts)),n(9,M=D(_e.badgeStatusesForTotalPoiPhotoCounts)),n(10,$=D(_e.badgeStatusesForTotalPoiReviewCounts)),n(3,{totalPoints:l,totalCheckInCounts:f,totalPoiPhotoCounts:m,totalPoiReviewCounts:g}=_e,l,n(4,f),n(5,m),n(6,g)),n(2,a=!1)}});const L=ee=>ee.find(({status:fe})=>fe==="IN PROGRESS")??ee.slice(-1)[0],U=ee=>ee.filter(({status:fe})=>fe==="LOCKED"),ne=ee=>ee.filter(({status:fe})=>fe==="ACHIEVED").reverse();function se(ee){Nt[ee?"unshift":"push"](()=>{r=ee,n(0,r)})}return i.$$set=ee=>{"slug"in ee&&n(15,t=ee.slug)},[r,s,a,l,f,m,g,w,S,M,$,o,L,U,ne,t,se]}class yj extends Xe{constructor(e){super(),Je(this,e,bj,gj,Ze,{slug:15})}}const Ww=i=>{const e=Object.entries(i),n=e.map(([t])=>t);return Bn(e.map(([,t])=>t),t=>Object.fromEntries(t.map((r,s)=>[n[s],r])))},wj=i=>i&1,xj=i=>({}),jb=i=>({...i[0]});function kj(i){let e;const n=i[3].default,t=tt(n,i,i[2],jb);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&5)&&nt(t,n,r,r[2],wj(s)||!e?it(r[2]):rt(n,r[2],s,xj),jb)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function Cj(i,e,n){const t=[];let r=Fe(e,t),s,{$$slots:o={},$$scope:a}=e;const l=Ww(r);return Jt(i,l,f=>n(0,s=f)),i.$$set=f=>{e=Q(Q({},e),bt(f)),n(4,r=Fe(e,t)),"$$scope"in f&&n(2,a=f.$$scope)},[s,l,a,o]}class Ko extends Xe{constructor(e){super(),Je(this,e,Cj,kj,Ze,{})}}function Ub(i,e,n){const t=i.slice();return t[5]=e[n],t}function Tj(i){let e,n,t;const r=[i[2]??{}];var s=i[1].component;function o(a,l){let f={$$slots:{default:[Ej]},$$scope:{ctx:a}};for(let m=0;m<r.length;m+=1)f=Q(f,r[m]);return l!==void 0&&l&4&&(f=Q(f,at(r,[dn(a[2]??{})]))),{props:f}}return s&&(e=ba(s,o(i)),i[4](e)),{c(){e&&H(e.$$.fragment),n=Le()},l(a){e&&W(e.$$.fragment,a),n=Le()},m(a,l){e&&G(e,a,l),N(a,n,l),t=!0},p(a,l){if(l&2&&s!==(s=a[1].component)){if(e){It();const f=e;P(f.$$.fragment,1,0,()=>{Z(f,1)}),Pt()}s?(e=ba(s,o(a,l)),a[4](e),H(e.$$.fragment),E(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}else if(s){const f=l&4?at(r,[dn(a[2]??{})]):{};l&258&&(f.$$scope={dirty:l,ctx:a}),e.$set(f)}},i(a){t||(e&&E(e.$$.fragment,a),t=!0)},o(a){e&&P(e.$$.fragment,a),t=!1},d(a){a&&I(n),i[4](null),e&&Z(e,a)}}}function Sj(i){let e,n,t;const r=[i[2]??{}];var s=i[1].component;function o(a,l){let f={};for(let m=0;m<r.length;m+=1)f=Q(f,r[m]);return l!==void 0&&l&4&&(f=Q(f,at(r,[dn(a[2]??{})]))),{props:f}}return s&&(e=ba(s,o(i)),i[3](e)),{c(){e&&H(e.$$.fragment),n=Le()},l(a){e&&W(e.$$.fragment,a),n=Le()},m(a,l){e&&G(e,a,l),N(a,n,l),t=!0},p(a,l){if(l&2&&s!==(s=a[1].component)){if(e){It();const f=e;P(f.$$.fragment,1,0,()=>{Z(f,1)}),Pt()}s?(e=ba(s,o(a,l)),a[3](e),H(e.$$.fragment),E(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}else if(s){const f=l&4?at(r,[dn(a[2]??{})]):{};e.$set(f)}},i(a){t||(e&&E(e.$$.fragment,a),t=!0)},o(a){e&&P(e.$$.fragment,a),t=!1},d(a){a&&I(n),i[3](null),e&&Z(e,a)}}}function qb(i){let e,n;return e=new hf({props:{of:i[5]}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.of=t[5]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Ej(i){let e,n,t=kn(i[1].children),r=[];for(let o=0;o<t.length;o+=1)r[o]=qb(Ub(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&2){t=kn(o[1].children);let l;for(l=0;l<t.length;l+=1){const f=Ub(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=qb(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function Ij(i){let e,n,t,r;const s=[Sj,Tj],o=[];function a(l,f){return l[1].children.length===0?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function Pj(i,e,n){let{instance:t=void 0}=e,{config:r}=e,{props:s=void 0}=e;function o(l){Nt[l?"unshift":"push"](()=>{t=l,n(0,t)})}function a(l){Nt[l?"unshift":"push"](()=>{t=l,n(0,t)})}return i.$$set=l=>{"instance"in l&&n(0,t=l.instance),"config"in l&&n(1,r=l.config),"props"in l&&n(2,s=l.props)},[t,r,s,o,a]}class Kw extends Xe{constructor(e){super(),Je(this,e,Pj,Ij,Ze,{instance:0,config:1,props:2})}}const Yp=i=>(i==null?void 0:i.subscribe)instanceof Function,$j=As(void 0);function Aj(i){let e,n,t;function r(o){i[3](o)}let s={config:i[0],props:i[0].props};return i[1]!==void 0&&(s.instance=i[1]),e=new Kw({props:s}),Nt.push(()=>Zn(e,"instance",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,a){const l={};a&1&&(l.config=o[0]),a&1&&(l.props=o[0].props),!n&&a&2&&(n=!0,l.instance=o[1],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function Mj(i){let e,n;return e=new Ko({props:{props:i[0].props,$$slots:{default:[Dj,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.props=t[0].props),r&51&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Dj(i){let e,n,t;function r(o){i[2](o)}let s={config:i[0],props:i[4]};return i[1]!==void 0&&(s.instance=i[1]),e=new Kw({props:s}),Nt.push(()=>Zn(e,"instance",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,a){const l={};a&1&&(l.config=o[0]),a&16&&(l.props=o[4]),!n&&a&2&&(n=!0,l.instance=o[1],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function Oj(i){let e,n,t,r,s;const o=[Mj,Aj],a=[];function l(f,m){return m&1&&(e=null),e==null&&(e=!!Yp(f[0].props)),e?0:1}return n=l(i,-1),t=a[n]=o[n](i),{c(){t.c(),r=Le()},l(f){t.l(f),r=Le()},m(f,m){a[n].m(f,m),N(f,r,m),s=!0},p(f,[m]){let g=n;n=l(f,m),n===g?a[n].p(f,m):(It(),P(a[g],1,1,()=>{a[g]=null}),Pt(),t=a[n],t?t.p(f,m):(t=a[n]=o[n](f),t.c()),E(t,1),t.m(r.parentNode,r))},i(f){s||(E(t),s=!0)},o(f){P(t),s=!1},d(f){f&&I(r),a[n].d(f)}}}function zj(i,e,n){let{config:t}=e,r;Zi(function(){return t.eventHandlers.forEach(([l,f])=>{const m=r.$$.callbacks[l]??[];m.push(f),n(1,r.$$.callbacks[l]=m,r)}),function(){t.eventHandlers.forEach(([f,m])=>{const g=r.$$.callbacks[f],w=g.findIndex(S=>S===m);g.splice(w,1)})}});function s(a){r=a,n(1,r)}function o(a){r=a,n(1,r)}return i.$$set=a=>{"config"in a&&n(0,t=a.config)},[t,r,s,o]}class Rj extends Xe{constructor(e){super(),Je(this,e,zj,Oj,Ze,{config:0})}}function Lj(i){let e,n;return e=new Rj({props:{config:i[0]}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.config=t[0]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Fj(i){let e;return{c(){e=lt(i[0])},l(n){e=ct(n,i[0])},m(n,t){N(n,e,t)},p(n,t){t&1&&cn(e,n[0])},i:Ct,o:Ct,d(n){n&&I(e)}}}function Bj(i){let e;return{c(){e=lt(i[1])},l(n){e=ct(n,i[1])},m(n,t){N(n,e,t)},p(n,t){t&2&&cn(e,n[1])},i:Ct,o:Ct,d(n){n&&I(e)}}}function Nj(i){let e,n,t,r,s;const o=[Bj,Fj,Lj],a=[];function l(f,m){return m&1&&(e=null),e==null&&(e=!!Yp(f[0])),e?0:typeof f[0]!="object"?1:2}return n=l(i,-1),t=a[n]=o[n](i),{c(){t.c(),r=Le()},l(f){t.l(f),r=Le()},m(f,m){a[n].m(f,m),N(f,r,m),s=!0},p(f,[m]){let g=n;n=l(f,m),n===g?a[n].p(f,m):(It(),P(a[g],1,1,()=>{a[g]=null}),Pt(),t=a[n],t?t.p(f,m):(t=a[n]=o[n](f),t.c()),E(t,1),t.m(r.parentNode,r))},i(f){s||(E(t),s=!0)},o(f){P(t),s=!1},d(f){f&&I(r),a[n].d(f)}}}function Vj(i,e,n){let t,{of:r}=e;const s=Yp(r)?r:$j;return Jt(i,s,o=>n(1,t=o)),i.$$set=o=>{"of"in o&&n(0,r=o.of)},[r,t,s]}class hf extends Xe{constructor(e){super(),Je(this,e,Vj,Nj,Ze,{of:0})}}class jj{constructor(e,n){Ln(this,"component");Ln(this,"props");Ln(this,"eventHandlers",[]);Ln(this,"children",[]);this.component=e,this.props=n}on(e,n){return this.eventHandlers.push([e,n]),this}slot(...e){return this.children=e,this}}function Hu(i,e){return new jj(i,e)}class Xw{constructor({header:e,footer:n,height:t,plugins:r}){Ln(this,"header");Ln(this,"footer");Ln(this,"height");Ln(this,"plugins");this.header=e,this.footer=n,this.height=t,this.plugins=r}isFlat(){return"__flat"in this}isData(){return"__data"in this}isDisplay(){return"__display"in this}isGroup(){return"__group"in this}}class Jw extends Xw{constructor({header:n,footer:t,plugins:r,id:s}){super({header:n,footer:t,plugins:r,height:1});Ln(this,"__flat",!0);Ln(this,"id");this.id=s??String(n)}}class Uj extends Jw{constructor({header:n,footer:t,plugins:r,cell:s,accessor:o,id:a}){super({header:n,footer:t,plugins:r,id:"Initialization not complete"});Ln(this,"__data",!0);Ln(this,"cell");Ln(this,"accessorKey");Ln(this,"accessorFn");if(this.cell=s,o instanceof Function?this.accessorFn=o:this.accessorKey=o,a===void 0&&this.accessorKey===void 0&&n===void 0)throw new Error("A column id, string accessor, or header is required");const l=typeof this.accessorKey=="string"?this.accessorKey:null;this.id=a??l??String(n)}getValue(n){if(this.accessorFn!==void 0)return this.accessorFn(n);if(this.accessorKey!==void 0)return n[this.accessorKey]}}class qj extends Jw{constructor({header:n,footer:t,plugins:r,id:s,cell:o,data:a}){super({header:n,footer:t,plugins:r,id:s});Ln(this,"__display",!0);Ln(this,"cell");Ln(this,"data");this.cell=o,this.data=a}}class Hj extends Xw{constructor({header:n,footer:t,columns:r,plugins:s}){const o=Math.max(...r.map(a=>a.height))+1;super({header:n,footer:t,height:o,plugins:s});Ln(this,"__group",!0);Ln(this,"columns");Ln(this,"ids");this.columns=r,this.ids=Yw(r)}}const Yw=i=>i.flatMap(e=>e.isFlat()?[e.id]:e.isGroup()?e.ids:[]),Qw=i=>i.flatMap(e=>e.isFlat()?[e]:e.isGroup()?Qw(e.columns):[]),Gj=i=>{const e=new Map;return i.forEach(n=>{e.set(n,(e.get(n)??0)+1)}),e},Zj=i=>Array.from(Gj(i).entries()).filter(([,e])=>e!==1).map(([e])=>e),Wj=i=>Object.entries(i).map(([e,n])=>`${e}:${n}`).join(";"),Kj=(i,e)=>i.style===void 0&&e.style===void 0?{...i,...e}:{...i,...e,style:{...typeof i.style=="object"?i.style:{},...typeof e.style=="object"?e.style:{}}},Ld=i=>i.style===void 0||typeof i.style!="object"?i:{...i,style:Wj(i.style)};class gh{constructor({id:e}){Ln(this,"id");Ln(this,"attrsForName",{});Ln(this,"propsForName",{});Ln(this,"state");this.id=e}attrs(){return Bn(Object.values(this.attrsForName),e=>{let n={};return e.forEach(t=>{n=Kj(n,t)}),Ld(n)})}props(){return Ww(this.propsForName)}injectState(e){this.state=e}applyHook(e,n){n.props!==void 0&&(this.propsForName[e]=n.props),n.attrs!==void 0&&(this.attrsForName[e]=n.attrs)}}class ex extends gh{constructor({id:n,row:t}){super({id:n});Ln(this,"row");this.row=t}attrs(){return Bn(super.attrs(),n=>({...n,role:"cell"}))}rowColId(){return`${this.row.id}:${this.column.id}`}dataRowColId(){if(this.row.isData())return`${this.row.dataId}:${this.column.id}`}isData(){return"__data"in this}isDisplay(){return"__display"in this}}class Qp extends ex{constructor({row:n,column:t,label:r,value:s}){super({id:t.id,row:n});Ln(this,"__data",!0);Ln(this,"column");Ln(this,"label");Ln(this,"value");this.column=t,this.label=r,this.value=s}render(){if(this.label===void 0)return`${this.value}`;if(this.state===void 0)throw new Error("Missing `state` reference");return this.label(this,this.state)}clone(){return new Qp({row:this.row,column:this.column,label:this.label,value:this.value})}}class e_ extends ex{constructor({row:n,column:t,label:r}){super({id:t.id,row:n});Ln(this,"__display",!0);Ln(this,"column");Ln(this,"label");this.column=t,this.label=r}render(){if(this.state===void 0)throw new Error("Missing `state` reference");return this.label(this,this.state)}clone(){return new e_({row:this.row,column:this.column,label:this.label})}}const ga=i=>i!==void 0;class Xj extends gh{constructor({id:n,cells:t,cellForId:r,depth:s=0,parentRow:o}){super({id:n});Ln(this,"cells");Ln(this,"cellForId");Ln(this,"depth");Ln(this,"parentRow");Ln(this,"subRows");this.cells=t,this.cellForId=r,this.depth=s,this.parentRow=o}attrs(){return Bn(super.attrs(),n=>({...n,role:"row"}))}isData(){return"__data"in this}isDisplay(){return"__display"in this}}class t_ extends Xj{constructor({id:n,dataId:t,original:r,cells:s,cellForId:o,depth:a=0,parentRow:l}){super({id:n,cells:s,cellForId:o,depth:a,parentRow:l});Ln(this,"__data",!0);Ln(this,"dataId");Ln(this,"original");this.dataId=t,this.original=r}clone({includeCells:n=!1,includeSubRows:t=!1}={}){var s;const r=new t_({id:this.id,dataId:this.dataId,cellForId:this.cellForId,cells:this.cells,original:this.original,depth:this.depth});if(n){const o=Object.fromEntries(Object.entries(r.cellForId).map(([l,f])=>{const m=f.clone();return m.row=r,[l,m]})),a=r.cells.map(({id:l})=>o[l]);r.cellForId=o,r.cells=a}if(t){const o=(s=this.subRows)==null?void 0:s.map(a=>a.clone({includeCells:n,includeSubRows:t}));r.subRows=o}else r.subRows=this.subRows;return r}}const Jj=(i,e,{rowDataId:n}={})=>{const t=i.map((r,s)=>{const o=s.toString();return new t_({id:o,dataId:n!==void 0?n(r,s):o,original:r,cells:[],cellForId:{}})});return i.forEach((r,s)=>{const o=e.map(a=>{if(a.isData()){const l=a,f=l.getValue(r);return new Qp({row:t[s],column:l,label:a.cell,value:f})}if(a.isDisplay()){const l=a;return new e_({row:t[s],column:l,label:a.cell})}throw new Error("Unrecognized `FlatColumn` implementation")});t[s].cells=o,e.forEach((a,l)=>{t[s].cellForId[a.id]=o[l]})}),t},Yj=(i,e)=>{const n=i.map(t=>{const r=t.clone();return r.cells=[],r.cellForId={},r});return i.length===0||e.length===0?i:(i.forEach((t,r)=>{const s=t.cells.map(a=>{const l=a.clone();return l.row=n[r],l}),o=e.map(a=>s.find(l=>l.id===a)).filter(ga);n[r].cells=o,s.forEach(a=>{n[r].cellForId[a.id]=a})}),n)},tx=" ";class nx extends gh{constructor({id:n,label:t,colspan:r,colstart:s}){super({id:n});Ln(this,"label");Ln(this,"colspan");Ln(this,"colstart");this.label=t,this.colspan=r,this.colstart=s}render(){if(this.label instanceof Function){if(this.state===void 0)throw new Error("Missing `state` reference");return this.label(this,this.state)}return this.label}attrs(){return Bn(super.attrs(),n=>({...n,role:"columnheader",colspan:this.colspan}))}isFlat(){return"__flat"in this}isData(){return"__data"in this}isFlatDisplay(){return"__flat"in this&&"__display"in this}isGroup(){return"__group"in this}isGroupDisplay(){return"__group"in this&&"__display"in this}}class vh extends nx{constructor({id:n,label:t,colstart:r}){super({id:n,label:t,colspan:1,colstart:r});Ln(this,"__flat",!0)}clone(){return new vh({id:this.id,label:this.label,colstart:this.colstart})}}class n_ extends vh{constructor({id:n,label:t,accessorKey:r,accessorFn:s,colstart:o}){super({id:n,label:t,colstart:o});Ln(this,"__data",!0);Ln(this,"accessorKey");Ln(this,"accessorFn");this.accessorKey=r,this.accessorFn=s}clone(){return new n_({id:this.id,label:this.label,accessorFn:this.accessorFn,accessorKey:this.accessorKey,colstart:this.colstart})}}class bh extends vh{constructor({id:n,label:t=tx,colstart:r}){super({id:n,label:t,colstart:r});Ln(this,"__display",!0)}clone(){return new bh({id:this.id,label:this.label,colstart:this.colstart})}}class yh extends nx{constructor({label:n,ids:t,allIds:r,colspan:s,colstart:o}){super({id:`[${t.join(",")}]`,label:n,colspan:s,colstart:o});Ln(this,"__group",!0);Ln(this,"ids");Ln(this,"allId");Ln(this,"allIds");this.ids=t,this.allId=`[${r.join(",")}]`,this.allIds=r}setIds(n){this.ids=n,this.id=`[${this.ids.join(",")}]`}pushId(n){this.ids=[...this.ids,n],this.id=`[${this.ids.join(",")}]`}clone(){return new yh({label:this.label,ids:this.ids,allIds:this.allIds,colspan:this.colspan,colstart:this.colstart})}}class i_ extends yh{constructor({label:n=tx,ids:t,allIds:r,colspan:s=1,colstart:o}){super({label:n,ids:t,allIds:r,colspan:s,colstart:o});Ln(this,"__display",!0)}clone(){return new i_({label:this.label,ids:this.ids,allIds:this.allIds,colspan:this.colspan,colstart:this.colstart})}}const Qj=i=>i.reduce((e,n)=>e+n,0),ix=(i,e)=>{const n=[];for(let t=0;t<e;t++)n.push(Array(i).fill(null));return n},Hb=i=>{const e=i.length;if(e===0)return i;const n=i[0].length,t=ix(e,n);for(let r=0;r<n;r++)for(let s=0;s<e;s++)t[r][s]=i[s][r];return t};class r_ extends gh{constructor({id:n,cells:t}){super({id:n});Ln(this,"cells");this.cells=t}attrs(){return Bn(super.attrs(),n=>({...n,role:"row"}))}clone(){return new r_({id:this.id,cells:this.cells})}}const eU=(i,e=[])=>{const n=tU(i);let t=Hb(n);return t=nU(t,e),iU(t),rU(Hb(t))},tU=i=>{const e=Qj(i.map(s=>s.isGroup()?s.ids.length:1)),n=Math.max(...i.map(s=>s.height)),t=ix(e,n);let r=0;return i.forEach(s=>{const o=n-s.height;rx(t,s,o,r),r+=s.isGroup()?s.ids.length:1}),t.map((s,o)=>s.map((a,l)=>{var m;if(a!==null)return a;if(o===n-1)return new bh({id:l.toString(),colstart:l});const f=((m=t[n-1][l])==null?void 0:m.id)??l.toString();return new i_({ids:[],allIds:[f],colstart:l})}))},rx=(i,e,n,t)=>{if(e.isData()){i[i.length-1][t]=new n_({label:e.header,accessorFn:e.accessorFn,accessorKey:e.accessorKey,id:e.id,colstart:t});return}if(e.isDisplay()){i[i.length-1][t]=new bh({id:e.id,label:e.header,colstart:t});return}if(e.isGroup()){for(let s=0;s<e.ids.length;s++)i[n][t+s]=new yh({label:e.header,colspan:1,allIds:e.ids,ids:[],colstart:t});let r=0;e.columns.forEach(s=>{rx(i,s,n+1,t+r),r+=s.isGroup()?s.ids.length:1});return}},nU=(i,e)=>{if(e.length===0)return i;const n=[];return e.forEach((t,r)=>{const s=i.find(o=>{const a=o[o.length-1];if(!a.isFlat())throw new Error("The last element of each column must be a `FlatHeaderCell`");return a.id===t});s!==void 0&&n.push(s.map(o=>{const a=o.clone();return a.colstart=r,a}))}),n},iU=i=>{i.forEach(e=>{const n=e[e.length-1];if(!n.isFlat())throw new Error("The last element of each column must be a `FlatHeaderCell`");e.forEach(t=>{t.isGroup()&&t.pushId(n.id)})})},rU=i=>i.map((e,n)=>new r_({id:n.toString(),cells:sU(e)})),sU=i=>{if(i.length===0)return i;const e=[];let n=0,t=1;for(;n<i.length;){const r=i[n].clone();if(!r.isGroup()){e.push(r),n++;continue}t=n+1;const s=[...r.ids];for(;t<i.length;){const o=i[t];if(!o.isGroup()||r.allId!==o.allId)break;s.push(...o.ids),t++}r.setIds(s),r.colspan=t-n,e.push(r),n=t}return e},oU=(i,e,{rowDataId:n}={})=>{const{data:t,plugins:r}=i,s=Qw(e),o=As(s),a=Bn([t,o],([_t,ft])=>Jj(_t,ft,{rowDataId:n})),l=wn([]),f=wn(),m=wn([]),g=wn([]),w=wn({role:"table"}),S=wn({}),M=wn({role:"rowgroup"}),$={data:t,columns:e,flatColumns:s,tableAttrs:w,tableHeadAttrs:S,tableBodyAttrs:M,visibleColumns:l,headerRows:f,originalRows:a,rows:m,pageRows:g},D=Object.fromEntries(Object.entries(r).map(([_t,ft])=>{const Be=Object.fromEntries(s.map(Ut=>{var qt;const Rt=(qt=Ut.plugins)==null?void 0:qt[_t];if(Rt!==void 0)return[Ut.id,Rt]}).filter(ga));return[_t,ft({pluginName:_t,tableState:$,columnOptions:Be})]})),F=Object.fromEntries(Object.entries(D).map(([_t,ft])=>[_t,ft.pluginState])),L={data:t,columns:e,flatColumns:s,tableAttrs:w,tableHeadAttrs:S,tableBodyAttrs:M,visibleColumns:l,headerRows:f,originalRows:a,rows:m,pageRows:g,pluginStates:F},U=Object.values(D).map(_t=>_t.deriveTableAttrs).filter(ga);let ne=As({role:"table"});U.forEach(_t=>{ne=_t(ne)});const se=Bn(ne,_t=>{const ft=Ld(_t);return w.set(ft),ft}),ee=Object.values(D).map(_t=>_t.deriveTableBodyAttrs).filter(ga);let fe=As({});ee.forEach(_t=>{fe=_t(fe)});const _e=Bn(fe,_t=>{const ft=Ld(_t);return S.set(ft),ft}),re=Object.values(D).map(_t=>_t.deriveTableBodyAttrs).filter(ga);let de=As({role:"rowgroup"});re.forEach(_t=>{de=_t(de)});const he=Bn(de,_t=>{const ft=Ld(_t);return M.set(ft),ft}),X=Object.values(D).map(_t=>_t.deriveFlatColumns).filter(ga);let j=o;X.forEach(_t=>{j=_t(j)});const xe=Bn(j,_t=>(l.set(_t),_t)),ze=Bn([a,xe],([_t,ft])=>Yj(_t,ft.map(Be=>Be.id))),ve=Object.values(D).map(_t=>_t.deriveRows).filter(ga);let We=ze;ve.forEach(_t=>{We=_t(We)});const pt=Bn(We,_t=>(_t.forEach(ft=>{ft.injectState(L),ft.cells.forEach(Be=>{Be.injectState(L)})}),Object.entries(D).forEach(([ft,Be])=>{_t.forEach(Ut=>{var Rt;((Rt=Be.hooks)==null?void 0:Rt["tbody.tr"])!==void 0&&Ut.applyHook(ft,Be.hooks["tbody.tr"](Ut)),Ut.cells.forEach(qt=>{var et;((et=Be.hooks)==null?void 0:et["tbody.tr.td"])!==void 0&&qt.applyHook(ft,Be.hooks["tbody.tr.td"](qt))})})}),m.set(_t),_t)),Mt=Object.values(D).map(_t=>_t.derivePageRows).filter(ga);let St=pt;Mt.forEach(_t=>{St=_t(St)});const Dt=Bn(St,_t=>(_t.forEach(ft=>{ft.injectState(L),ft.cells.forEach(Be=>{Be.injectState(L)})}),Object.entries(D).forEach(([ft,Be])=>{_t.forEach(Ut=>{var Rt;((Rt=Be.hooks)==null?void 0:Rt["tbody.tr"])!==void 0&&Ut.applyHook(ft,Be.hooks["tbody.tr"](Ut)),Ut.cells.forEach(qt=>{var et;((et=Be.hooks)==null?void 0:et["tbody.tr.td"])!==void 0&&qt.applyHook(ft,Be.hooks["tbody.tr.td"](qt))})})}),g.set(_t),_t)),zt=Bn(xe,_t=>{const ft=eU(e,_t.map(Be=>Be.id));return ft.forEach(Be=>{Be.injectState(L),Be.cells.forEach(Ut=>{Ut.injectState(L)})}),Object.entries(D).forEach(([Be,Ut])=>{ft.forEach(Rt=>{var qt;((qt=Ut.hooks)==null?void 0:qt["thead.tr"])!==void 0&&Rt.applyHook(Be,Ut.hooks["thead.tr"](Rt)),Rt.cells.forEach(et=>{var dt;((dt=Ut.hooks)==null?void 0:dt["thead.tr.th"])!==void 0&&et.applyHook(Be,Ut.hooks["thead.tr.th"](et))})})}),f.set(ft),ft});return{tableAttrs:se,tableHeadAttrs:_e,tableBodyAttrs:he,visibleColumns:xe,flatColumns:s,headerRows:zt,originalRows:a,rows:pt,pageRows:Dt,pluginStates:F}};let aU=class{constructor(e,n){Ln(this,"data");Ln(this,"plugins");this.data=e,this.plugins=n}createColumns(e){const n=Yw(e),t=Zj(n);if(t.length!==0)throw new Error(`Duplicate column ids not allowed: "${t.join('", "')}"`);return e}column(e){return new Uj(e)}group(e){return new Hj(e)}display(e){return new qj(e)}createViewModel(e,n){return oU(this,e,n)}};const sx=(i,e={})=>new aU(i,e);function lU(i){let e,n,t,r;const s=i[3].default,o=tt(s,i,i[2],null);let a=[{class:t=Et("w-full caption-bottom text-sm",i[0])},i[1]],l={};for(let f=0;f<a.length;f+=1)l=Q(l,a[f]);return{c(){e=ce("div"),n=ce("table"),o&&o.c(),this.h()},l(f){e=ue(f,"DIV",{class:!0});var m=we(e);n=ue(m,"TABLE",{class:!0});var g=we(n);o&&o.l(g),g.forEach(I),m.forEach(I),this.h()},h(){ut(n,l),oe(e,"class","w-full overflow-auto")},m(f,m){N(f,e,m),me(e,n),o&&o.m(n,null),r=!0},p(f,[m]){o&&o.p&&(!r||m&4)&&nt(o,s,f,f[2],r?rt(s,f[2],m,null):it(f[2]),null),ut(n,l=at(a,[(!r||m&1&&t!==(t=Et("w-full caption-bottom text-sm",f[0])))&&{class:t},m&2&&f[1]]))},i(f){r||(E(o,f),r=!0)},o(f){P(o,f),r=!1},d(f){f&&I(e),o&&o.d(f)}}}function cU(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class ox extends Xe{constructor(e){super(),Je(this,e,cU,lU,Ze,{class:0})}}function uU(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[2],null);let o=[{class:n=Et("[&_tr:last-child]:border-0",i[0])},i[1]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("tbody"),s&&s.c(),this.h()},l(l){e=ue(l,"TBODY",{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&4)&&nt(s,r,l,l[2],t?rt(r,l[2],f,null):it(l[2]),null),ut(e,a=at(o,[(!t||f&1&&n!==(n=Et("[&_tr:last-child]:border-0",l[0])))&&{class:n},f&2&&l[1]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function fU(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class ax extends Xe{constructor(e){super(),Je(this,e,fU,uU,Ze,{class:0})}}function dU(i){let e,n,t,r,s;const o=i[3].default,a=tt(o,i,i[2],null);let l=[{class:n=Et("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",i[0])},i[1]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("td"),a&&a.c(),this.h()},l(m){e=ue(m,"TD",{class:!0});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),t=!0,r||(s=[Ke(e,"click",i[4]),Ke(e,"keydown",i[5])],r=!0)},p(m,[g]){a&&a.p&&(!t||g&4)&&nt(a,o,m,m[2],t?rt(o,m[2],g,null):it(m[2]),null),ut(e,f=at(l,[(!t||g&1&&n!==(n=Et("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",m[0])))&&{class:n},g&2&&m[1]]))},i(m){t||(E(a,m),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),r=!1,Wn(s)}}}function hU(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;function l(m){At.call(this,i,m)}function f(m){At.call(this,i,m)}return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(1,r=Fe(e,t)),"class"in m&&n(0,a=m.class),"$$scope"in m&&n(2,o=m.$$scope)},[a,r,o,s,l,f]}class lx extends Xe{constructor(e){super(),Je(this,e,hU,dU,Ze,{class:0})}}function mU(i){let e,n,t;const r=i[3].default,s=tt(r,i,i[2],null);let o=[{class:n=Et("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",i[0])},i[1]],a={};for(let l=0;l<o.length;l+=1)a=Q(a,o[l]);return{c(){e=ce("th"),s&&s.c(),this.h()},l(l){e=ue(l,"TH",{class:!0});var f=we(e);s&&s.l(f),f.forEach(I),this.h()},h(){ut(e,a)},m(l,f){N(l,e,f),s&&s.m(e,null),t=!0},p(l,[f]){s&&s.p&&(!t||f&4)&&nt(s,r,l,l[2],t?rt(r,l[2],f,null):it(l[2]),null),ut(e,a=at(o,[(!t||f&1&&n!==(n=Et("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l[0])))&&{class:n},f&2&&l[1]]))},i(l){t||(E(s,l),t=!0)},o(l){P(s,l),t=!1},d(l){l&&I(e),s&&s.d(l)}}}function pU(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(2,o=l.$$scope)},[a,r,o,s]}class cx extends Xe{constructor(e){super(),Je(this,e,pU,mU,Ze,{class:0})}}function _U(i){let e,n,t,r,s;const o=i[3].default,a=tt(o,i,i[2],null);let l=[{class:n=Et("[&_tr]:border-b",i[0])},i[1]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("thead"),a&&a.c(),this.h()},l(m){e=ue(m,"THEAD",{class:!0});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),t=!0,r||(s=[Ke(e,"click",i[4]),Ke(e,"keydown",i[5])],r=!0)},p(m,[g]){a&&a.p&&(!t||g&4)&&nt(a,o,m,m[2],t?rt(o,m[2],g,null):it(m[2]),null),ut(e,f=at(l,[(!t||g&1&&n!==(n=Et("[&_tr]:border-b",m[0])))&&{class:n},g&2&&m[1]]))},i(m){t||(E(a,m),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),r=!1,Wn(s)}}}function gU(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;function l(m){At.call(this,i,m)}function f(m){At.call(this,i,m)}return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(1,r=Fe(e,t)),"class"in m&&n(0,a=m.class),"$$scope"in m&&n(2,o=m.$$scope)},[a,r,o,s,l,f]}class ux extends Xe{constructor(e){super(),Je(this,e,gU,_U,Ze,{class:0})}}function vU(i){let e,n,t,r,s;const o=i[3].default,a=tt(o,i,i[2],null);let l=[{class:n=Et("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",i[0])},i[1]],f={};for(let m=0;m<l.length;m+=1)f=Q(f,l[m]);return{c(){e=ce("tr"),a&&a.c(),this.h()},l(m){e=ue(m,"TR",{class:!0});var g=we(e);a&&a.l(g),g.forEach(I),this.h()},h(){ut(e,f)},m(m,g){N(m,e,g),a&&a.m(e,null),t=!0,r||(s=[Ke(e,"click",i[4]),Ke(e,"keydown",i[5])],r=!0)},p(m,[g]){a&&a.p&&(!t||g&4)&&nt(a,o,m,m[2],t?rt(o,m[2],g,null):it(m[2]),null),ut(e,f=at(l,[(!t||g&1&&n!==(n=Et("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",m[0])))&&{class:n},g&2&&m[1]]))},i(m){t||(E(a,m),t=!0)},o(m){P(a,m),t=!1},d(m){m&&I(e),a&&a.d(m),r=!1,Wn(s)}}}function bU(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;function l(m){At.call(this,i,m)}function f(m){At.call(this,i,m)}return i.$$set=m=>{e=Q(Q({},e),bt(m)),n(1,r=Fe(e,t)),"class"in m&&n(0,a=m.class),"$$scope"in m&&n(2,o=m.$$scope)},[a,r,o,s,l,f]}class wh extends Xe{constructor(e){super(),Je(this,e,bU,vU,Ze,{class:0})}}const yU=i=>{let e=i.replace(/\[(\d+)\]/g,".$1");return e.startsWith(".")&&(e=e.slice(1)),e.split(".")},Id=(i,e)=>{let n=i;for(const t of e){if(n==null)return;n=n[t]}return n},Gb=i=>{const e=Object.create(i);return Object.assign(e,i),e};function wU(i,e){const n=yU(e);if(n.some(l=>l==="__proto__"))throw new Error('key cannot include "__proto__"');const t=n.slice(0,n.length-1),r=n[n.length-1],s=Bn(i,l=>Id(l,n)),o=l=>{i.update(f=>{if(f==null)return f;const m=Array.isArray(f)?[...f]:Gb(f);return Id(m,t)[r]=l,m})},a=l=>{i.update(f=>{if(f==null)return f;const m=l(Id(f,n)),g=Array.isArray(f)?[...f]:Gb(f);return Id(g,t)[r]=m,g})};return{subscribe:s.subscribe,set:o,update:a}}const fx=(i,e,n)=>i.map(r=>{const{subRows:s}=r;if(s===void 0)return r;const o=fx(s,e,n),a=r.clone();return a.subRows=o,a}).filter(r=>{var s;if((((s=r.subRows)==null?void 0:s.length)??0)!==0)return!0;for(const[o,a]of Object.entries(n)){const l=r.cellForId[o];if(!l.isData())continue;const{value:f}=l,m=e[o];if(m===void 0)continue;if(!a.fn({value:f,filterValue:m}))return!1}return!0}),dx=({serverSide:i=!1}={})=>({columnOptions:e,tableState:n})=>{const t=wn({}),r=wn([]),s=wn([]);return{pluginState:{filterValues:t,preFilteredRows:r},deriveRows:l=>Bn([l,t],([f,m])=>{if(r.set(f),i)return s.set(f),f;const g=fx(f,m,e);return s.set(g),g}),hooks:{"thead.tr.th":l=>{const f=wU(t,l.id);return{props:Bn([],()=>{var $;const g=e[l.id];if(g===void 0)return;f.set(g.initialFilterValue);const w=Bn(r,D=>l.isData()?D.map(F=>{const L=F.cellForId[l.id];return L==null?void 0:L.value}):[]),S=Bn(s,D=>l.isData()?D.map(F=>{const L=F.cellForId[l.id];return L==null?void 0:L.value}):[]);return{render:($=g.render)==null?void 0:$.call(g,{id:l.id,filterValue:f,...n,values:S,preFilteredRows:r,preFilteredValues:w})}})}}}}};As(void 0);const xU=i=>i instanceof MouseEvent?i.shiftKey:!1,hx=({initialHiddenColumnIds:i=[]}={})=>()=>{const e=wn(i);return{pluginState:{hiddenColumnIds:e},deriveFlatColumns:r=>Bn([r,e],([s,o])=>o.length===0?s:s.filter(a=>!o.includes(a.id)))}},kU=1,CU=({items:i,initialPageSize:e,initialPageIndex:n,serverSide:t,serverItemCount:r})=>{const s=wn(e),o=S=>{s.update(M=>{const $=S(M);return Math.max($,kU)})},a=S=>o(()=>S),l=wn(n);function f([S,M]){const $=Math.ceil(M/S);return l.update(D=>$>0&&D>=$?$-1:D),$}let m;if(t&&r!=null)m=Bn([s,r],f);else{const S=Bn(i,M=>M.length);m=Bn([s,S],f)}const g=Bn(l,S=>S>0),w=Bn([l,m],([S,M])=>S<M-1);return{pageSize:{subscribe:s.subscribe,update:o,set:a},pageIndex:l,pageCount:m,serverItemCount:r,hasPreviousPage:g,hasNextPage:w}},mx=({initialPageIndex:i=0,initialPageSize:e=10,serverSide:n=!1,serverItemCount:t}={})=>()=>{const r=wn([]),s=wn([]),{pageSize:o,pageIndex:a,pageCount:l,hasPreviousPage:f,hasNextPage:m}=CU({items:r,initialPageIndex:i,initialPageSize:e,serverSide:n,serverItemCount:t});return{pluginState:{pageSize:o,pageIndex:a,pageCount:l,hasPreviousPage:f,hasNextPage:m},derivePageRows:S=>Bn([S,o,a],([M,$,D])=>{if(r.set(M),n)return s.set(M),M;const F=D*$,L=M.slice(F,F+$);return s.set(L),L})}},Fd=(i,e)=>Array.isArray(i)&&Array.isArray(e)?TU(i,e):typeof i=="number"&&typeof e=="number"?i-e:i<e?-1:i>e?1:0,TU=(i,e)=>{const n=Math.min(i.length,e.length);for(let t=0;t<n;t++){const r=Fd(i[t],e[t]);if(r!==0)return r}return 0},SU=["asc","desc",void 0],EU=i=>{const{subscribe:e,update:n,set:t}=wn(i);return{subscribe:e,update:n,set:t,toggleId:(o,{multiSort:a=!0,toggleOrder:l=SU}={})=>{n(f=>{const m=f.findIndex(D=>D.id===o),g=f[m],w=g==null?void 0:g.order,M=(l.findIndex(D=>D===w)+1)%l.length,$=l[M];return a?m===-1&&$!==void 0?[...f,{id:o,order:$}]:$===void 0?[...f.slice(0,m),...f.slice(m+1)]:[...f.slice(0,m),{id:o,order:$},...f.slice(m+1)]:$===void 0?[]:[{id:o,order:$}]})},clearId:o=>{n(a=>{const l=a.findIndex(f=>f.id===o);return l===-1?a:[...a.slice(0,l),...a.slice(l+1)]})}}},px=(i,e,n)=>{const t=[...i];t.sort((r,s)=>{var o,a,l;for(const f of e){const m=((o=n[f.id])==null?void 0:o.invert)??!1,g=r.cellForId[f.id],w=s.cellForId[f.id];let S=0;const M=(a=n[f.id])==null?void 0:a.compareFn,$=(l=n[f.id])==null?void 0:l.getSortValue;if(!g.isData())return 0;const D=g.value,F=w.value;if(M!==void 0)S=M(D,F);else if($!==void 0){const L=$(D),U=$(F);S=Fd(L,U)}else if(typeof D=="string"||typeof D=="number")S=Fd(D,F);else if(D instanceof Date||F instanceof Date){const L=D instanceof Date?D.getTime():0,U=F instanceof Date?F.getTime():0;S=Fd(L,U)}if(S!==0){let L=1;return f.order==="desc"&&(L*=-1),m&&(L*=-1),S*L}}return 0});for(let r=0;r<t.length;r++){const{subRows:s}=t[r];if(s===void 0)continue;const o=px(s,e,n),a=t[r].clone();a.subRows=o,t[r]=a}return t},_x=({initialSortKeys:i=[],disableMultiSort:e=!1,isMultiSortEvent:n=xU,toggleOrder:t,serverSide:r=!1}={})=>({columnOptions:s})=>{const o=Object.entries(s).filter(([,g])=>g.disable===!0).map(([g])=>g),a=EU(i),l=wn([]);return{pluginState:{sortKeys:a,preSortedRows:l},deriveRows:g=>Bn([g,a],([w,S])=>(l.set(w),r?w:px(w,S,s))),hooks:{"thead.tr.th":g=>{const w=o.includes(g.id);return{props:Bn(a,M=>{const $=M.find(L=>L.id===g.id),D=L=>{g.isData()&&(w||a.toggleId(g.id,{multiSort:e?!1:n(L),toggleOrder:t}))},F=()=>{g.isData()&&(o.includes(g.id)||a.clearId(g.id))};return{order:$==null?void 0:$.order,toggle:D,clear:F,disabled:w}})}},"tbody.tr.td":g=>({props:Bn(a,S=>{const M=S.find($=>$.id===g.id);return{order:M==null?void 0:M.order}})})}}};function IU(i){let e,n;return{c(){e=ce("span"),n=lt(i[0]),this.h()},l(t){e=ue(t,"SPAN",{class:!0});var r=we(e);n=ct(r,i[0]),r.forEach(I),this.h()},h(){oe(e,"class","lg:max-w-[320px] sm:max-w-[160px] max-w-[80px] truncate font-medium")},m(t,r){N(t,e,r),me(e,n)},p(t,r){r&1&&cn(n,t[0])},d(t){t&&I(e)}}}function PU(i){let e,n;return{c(){e=ce("div"),n=lt(i[0]),this.h()},l(t){e=ue(t,"DIV",{class:!0});var r=we(e);n=ct(r,i[0]),r.forEach(I),this.h()},h(){oe(e,"class","text-xs flex items-center")},m(t,r){N(t,e,r),me(e,n)},p(t,r){r&1&&cn(n,t[0])},d(t){t&&I(e)}}}function $U(i){let e,n,t,r;return e=new Sa({props:{$$slots:{default:[IU]},$$scope:{ctx:i}}}),t=new Ta({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[PU]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&3&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&3&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function AU(i){let e,n,t;return n=new va({props:{$$slots:{default:[$U]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","flex space-x-2")},m(r,s){N(r,e,s),G(n,e,null),t=!0},p(r,[s]){const o={};s&3&&(o.$$scope={dirty:s,ctx:r}),n.$set(o)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function MU(i,e,n){let{value:t}=e;return i.$$set=r=>{"value"in r&&n(0,t=r.value)},[t]}let Zb=class extends Xe{constructor(e){super(),Je(this,e,MU,AU,Ze,{value:0})}};function DU(i){let e;const n=i[3].default,t=tt(n,i,i[11],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&2048)&&nt(t,n,r,r[11],e?rt(n,r[11],s,null):it(r[11]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function OU(i){let e,n;const t=[{class:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[DU]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new b2({props:r}),e.$on("click",i[4]),e.$on("keydown",i[5]),e.$on("focusin",i[6]),e.$on("focusout",i[7]),e.$on("pointerdown",i[8]),e.$on("pointerleave",i[9]),e.$on("pointermove",i[10]),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&7?at(t,[o&3&&{class:Et("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[1]&&"pl-8",s[0])},o&4&&dn(s[2])]):{};o&2048&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function zU(i,e,n){const t=["class","inset"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{inset:l=void 0}=e;function f(D){At.call(this,i,D)}function m(D){At.call(this,i,D)}function g(D){At.call(this,i,D)}function w(D){At.call(this,i,D)}function S(D){At.call(this,i,D)}function M(D){At.call(this,i,D)}function $(D){At.call(this,i,D)}return i.$$set=D=>{e=Q(Q({},e),bt(D)),n(2,r=Fe(e,t)),"class"in D&&n(0,a=D.class),"inset"in D&&n(1,l=D.inset),"$$scope"in D&&n(11,o=D.$$scope)},[a,l,r,s,f,m,g,w,S,M,$,o]}class Qd extends Xe{constructor(e){super(),Je(this,e,zU,OU,Ze,{class:0,inset:1})}}function RU(i){let e;const n=i[3].default,t=tt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&nt(t,n,r,r[4],e?rt(n,r[4],s,null):it(r[4]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function LU(i){let e,n;const t=[{class:Et("px-2 py-1.5 text-sm font-semibold",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[RU]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new y2({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&7?at(t,[o&3&&{class:Et("px-2 py-1.5 text-sm font-semibold",s[1]&&"pl-8",s[0])},o&4&&dn(s[2])]):{};o&16&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function FU(i,e,n){const t=["class","inset"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{inset:l=void 0}=e;return i.$$set=f=>{e=Q(Q({},e),bt(f)),n(2,r=Fe(e,t)),"class"in f&&n(0,a=f.class),"inset"in f&&n(1,l=f.inset),"$$scope"in f&&n(4,o=f.$$scope)},[a,l,r,s,o]}class gx extends Xe{constructor(e){super(),Je(this,e,FU,LU,Ze,{class:0,inset:1})}}function BU(i){let e;const n=i[5].default,t=tt(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&nt(t,n,r,r[7],e?rt(n,r[7],s,null):it(r[7]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function NU(i){let e,n;const t=[{transition:i[2]},{transitionConfig:i[3]},{sideOffset:i[1]},{class:Et("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",i[0])},i[4]];let r={$$slots:{default:[BU]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new T2({props:r}),e.$on("keydown",i[6]),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&31?at(t,[o&4&&{transition:s[2]},o&8&&{transitionConfig:s[3]},o&2&&{sideOffset:s[1]},o&1&&{class:Et("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",s[0])},o&16&&dn(s[4])]):{};o&128&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function VU(i,e,n){const t=["class","sideOffset","transition","transitionConfig"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{sideOffset:l=4}=e,{transition:f=pl}=e,{transitionConfig:m=void 0}=e;function g(w){At.call(this,i,w)}return i.$$set=w=>{e=Q(Q({},e),bt(w)),n(4,r=Fe(e,t)),"class"in w&&n(0,a=w.class),"sideOffset"in w&&n(1,l=w.sideOffset),"transition"in w&&n(2,f=w.transition),"transitionConfig"in w&&n(3,m=w.transitionConfig),"$$scope"in w&&n(7,o=w.$$scope)},[a,l,f,m,r,s,g,o]}class mf extends Xe{constructor(e){super(),Je(this,e,VU,NU,Ze,{class:0,sideOffset:1,transition:2,transitionConfig:3})}}function jU(i){let e,n;const t=[{class:Et("-mx-1 my-1 h-px bg-muted",i[0])},i[1]];let r={};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new w2({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("-mx-1 my-1 h-px bg-muted",s[0])},o&2&&dn(s[1])]):{};e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function UU(i,e,n){const t=["class"];let r=Fe(e,t),{class:s=void 0}=e;return i.$$set=o=>{e=Q(Q({},e),bt(o)),n(1,r=Fe(e,t)),"class"in o&&n(0,s=o.class)},[s,r]}class vx extends Xe{constructor(e){super(),Je(this,e,UU,jU,Ze,{class:0})}}function qU(i){let e,n;return e=new dw({props:{class:"h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function HU(i){let e,n,t,r;n=new aI({props:{$$slots:{default:[qU]},$$scope:{ctx:i}}});const s=i[3].default,o=tt(s,i,i[12],null);return{c(){e=ce("span"),H(n.$$.fragment),t=ke(),o&&o.c(),this.h()},l(a){e=ue(a,"SPAN",{class:!0});var l=we(e);W(n.$$.fragment,l),l.forEach(I),t=Ce(a),o&&o.l(a),this.h()},h(){oe(e,"class","absolute left-2 flex h-3.5 w-3.5 items-center justify-center")},m(a,l){N(a,e,l),G(n,e,null),N(a,t,l),o&&o.m(a,l),r=!0},p(a,l){const f={};l&4096&&(f.$$scope={dirty:l,ctx:a}),n.$set(f),o&&o.p&&(!r||l&4096)&&nt(o,s,a,a[12],r?rt(s,a[12],l,null):it(a[12]),null)},i(a){r||(E(n.$$.fragment,a),E(o,a),r=!0)},o(a){P(n.$$.fragment,a),P(o,a),r=!1},d(a){a&&(I(e),I(t)),Z(n),o&&o.d(a)}}}function GU(i){let e,n,t;const r=[{class:Et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[1])},i[2]];function s(a){i[4](a)}let o={$$slots:{default:[HU]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)o=Q(o,r[a]);return i[0]!==void 0&&(o.checked=i[0]),e=new eI({props:o}),Nt.push(()=>Zn(e,"checked",s)),e.$on("click",i[5]),e.$on("keydown",i[6]),e.$on("focusin",i[7]),e.$on("focusout",i[8]),e.$on("pointerdown",i[9]),e.$on("pointerleave",i[10]),e.$on("pointermove",i[11]),{c(){H(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,l){G(e,a,l),t=!0},p(a,[l]){const f=l&6?at(r,[l&2&&{class:Et("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a[1])},l&4&&dn(a[2])]):{};l&4096&&(f.$$scope={dirty:l,ctx:a}),!n&&l&1&&(n=!0,f.checked=a[0],Gn(()=>n=!1)),e.$set(f)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){Z(e,a)}}}function ZU(i,e,n){const t=["class","checked"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{checked:l=void 0}=e;function f(F){l=F,n(0,l)}function m(F){At.call(this,i,F)}function g(F){At.call(this,i,F)}function w(F){At.call(this,i,F)}function S(F){At.call(this,i,F)}function M(F){At.call(this,i,F)}function $(F){At.call(this,i,F)}function D(F){At.call(this,i,F)}return i.$$set=F=>{e=Q(Q({},e),bt(F)),n(2,r=Fe(e,t)),"class"in F&&n(1,a=F.class),"checked"in F&&n(0,l=F.checked),"$$scope"in F&&n(12,o=F.$$scope)},[l,a,r,s,f,m,g,w,S,M,$,D,o]}class bx extends Xe{constructor(e){super(),Je(this,e,ZU,GU,Ze,{class:1,checked:0})}}const pf=C2,_f=S2;function WU(i){let e;const n=i[4].default,t=tt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&nt(t,n,r,r[5],e?rt(n,r[5],s,null):it(r[5]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function KU(i){let e,n,t,r;return n=new pf({props:{$$slots:{default:[rq]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(s){e=ue(s,"DIV",{class:!0});var o=we(e);W(n.$$.fragment,o),o.forEach(I),this.h()},h(){oe(e,"class",t=Et("flex items-center",i[0]))},m(s,o){N(s,e,o),G(n,e,null),r=!0},p(s,o){const a={};o&34&&(a.$$scope={dirty:o,ctx:s}),n.$set(a),(!r||o&1&&t!==(t=Et("flex items-center",s[0])))&&oe(e,"class",t)},i(s){r||(E(n.$$.fragment,s),r=!0)},o(s){P(n.$$.fragment,s),r=!1},d(s){s&&I(e),Z(n)}}}function XU(i){let e,n;return e=new Bp({props:{class:"ml-2 h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function JU(i){let e,n;return e=new fw({props:{class:"ml-2 h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function YU(i){let e,n;return e=new uw({props:{class:"ml-2 h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function QU(i){let e,n,t,r,s;const o=i[4].default,a=tt(o,i,i[5],null),l=[YU,JU,XU],f=[];function m(g,w){return g[1].sort.order==="desc"?0:g[1].sort.order==="asc"?1:2}return n=m(i),t=f[n]=l[n](i),{c(){a&&a.c(),e=ke(),t.c(),r=Le()},l(g){a&&a.l(g),e=Ce(g),t.l(g),r=Le()},m(g,w){a&&a.m(g,w),N(g,e,w),f[n].m(g,w),N(g,r,w),s=!0},p(g,w){a&&a.p&&(!s||w&32)&&nt(a,o,g,g[5],s?rt(o,g[5],w,null):it(g[5]),null);let S=n;n=m(g),n!==S&&(It(),P(f[S],1,1,()=>{f[S]=null}),Pt(),t=f[n],t||(t=f[n]=l[n](g),t.c()),E(t,1),t.m(r.parentNode,r))},i(g){s||(E(a,g),E(t),s=!0)},o(g){P(a,g),P(t),s=!1},d(g){g&&(I(e),I(r)),a&&a.d(g),f[n].d(g)}}}function eq(i){let e,n;return e=new Cr({props:{variant:"ghost",builders:[i[6]],class:"-ml-3 h-8 data-[state=open]:bg-accent",$$slots:{default:[QU]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&64&&(s.builders=[t[6]]),r&34&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function tq(i){let e;return{c(){e=lt("Asc")},l(n){e=ct(n,"Asc")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function nq(i){let e;return{c(){e=lt("Desc")},l(n){e=ct(n,"Desc")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function iq(i){let e,n,t,r;return e=new Qd({props:{$$slots:{default:[tq]},$$scope:{ctx:i}}}),e.$on("click",i[2]),t=new Qd({props:{$$slots:{default:[nq]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function rq(i){let e,n,t,r;return e=new _f({props:{asChild:!0,$$slots:{default:[eq,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:i}}}),t=new mf({props:{align:"start",$$slots:{default:[iq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&98&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function sq(i){let e,n,t,r;const s=[KU,WU],o=[];function a(l,f){return l[1].sort.disabled?1:0}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function oq(i,e,n){let{$$slots:t={},$$scope:r}=e,{class:s=void 0}=e,{props:o}=e;function a(f){o.sort.order!=="asc"&&o.sort.toggle(f)}function l(f){o.sort.order!=="desc"&&o.sort.toggle(f)}return i.$$set=f=>{"class"in f&&n(0,s=f.class),"props"in f&&n(1,o=f.props),"$$scope"in f&&n(5,r=f.$$scope)},[s,o,a,l,t,r]}let aq=class extends Xe{constructor(e){super(),Je(this,e,oq,sq,Ze,{class:0,props:1})}};function lq(i){let e,n,t,r,s=[{class:n=Et("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]],o={};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return{c(){e=ce("input"),this.h()},l(a){e=ue(a,"INPUT",{class:!0}),this.h()},h(){ut(e,o)},m(a,l){N(a,e,l),e.autofocus&&e.focus(),bo(e,i[0]),t||(r=[Ke(e,"input",i[17]),Ke(e,"blur",i[3]),Ke(e,"change",i[4]),Ke(e,"click",i[5]),Ke(e,"focus",i[6]),Ke(e,"focusin",i[7]),Ke(e,"focusout",i[8]),Ke(e,"keydown",i[9]),Ke(e,"keypress",i[10]),Ke(e,"keyup",i[11]),Ke(e,"mouseover",i[12]),Ke(e,"mouseenter",i[13]),Ke(e,"mouseleave",i[14]),Ke(e,"paste",i[15]),Ke(e,"input",i[16])],t=!0)},p(a,[l]){ut(e,o=at(s,[l&2&&n!==(n=Et("flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a[1]))&&{class:n},l&4&&a[2]])),l&1&&e.value!==a[0]&&bo(e,a[0])},i:Ct,o:Ct,d(a){a&&I(e),t=!1,Wn(r)}}}function cq(i,e,n){const t=["class","value"];let r=Fe(e,t),{class:s=void 0}=e,{value:o=void 0}=e;function a(ee){At.call(this,i,ee)}function l(ee){At.call(this,i,ee)}function f(ee){At.call(this,i,ee)}function m(ee){At.call(this,i,ee)}function g(ee){At.call(this,i,ee)}function w(ee){At.call(this,i,ee)}function S(ee){At.call(this,i,ee)}function M(ee){At.call(this,i,ee)}function $(ee){At.call(this,i,ee)}function D(ee){At.call(this,i,ee)}function F(ee){At.call(this,i,ee)}function L(ee){At.call(this,i,ee)}function U(ee){At.call(this,i,ee)}function ne(ee){At.call(this,i,ee)}function se(){o=this.value,n(0,o)}return i.$$set=ee=>{e=Q(Q({},e),bt(ee)),n(2,r=Fe(e,t)),"class"in ee&&n(1,s=ee.class),"value"in ee&&n(0,o=ee.value)},[o,s,r,a,l,f,m,g,w,S,M,$,D,F,L,U,ne,se]}let yx=class extends Xe{constructor(e){super(),Je(this,e,cq,lq,Ze,{class:1,value:0})}};function Wb(i){let e,n;return e=new Cr({props:{variant:"outline",class:"h-8 px-2 lg:px-3",$$slots:{default:[uq]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function uq(i){let e,n;return e=new pw({props:{class:"h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function fq(i){let e,n,t,r,s,o,a,l,f,m,g,w,S;function M(U){i[5](U)}let $={placeholder:"Filter by name...",class:"h-8 sm:w-[250px] lg:w-[350px] grow sm:grow-0 lg:grow-0 md:grow hover:bg-accent hover:text-accent-foreground bg-background focus-visible:m-0.5",type:"search"};i[1].name!==void 0&&($.value=i[1].name),n=new yx({props:$}),Nt.push(()=>Zn(n,"value",M));function D(U){i[6](U)}let F={title:"POI Features",options:i[2]};i[1].features!==void 0&&(F.filterValues=i[1].features),l=new nH({props:F}),Nt.push(()=>Zn(l,"filterValues",D));let L=i[3]&&Wb(i);return w=new dH({props:{tableModel:i[0]}}),{c(){e=ce("div"),H(n.$$.fragment),r=ke(),s=ce("div"),o=ce("div"),a=ce("div"),H(l.$$.fragment),m=ke(),L&&L.c(),g=ke(),H(w.$$.fragment),this.h()},l(U){e=ue(U,"DIV",{class:!0});var ne=we(e);W(n.$$.fragment,ne),r=Ce(ne),s=ue(ne,"DIV",{class:!0});var se=we(s);o=ue(se,"DIV",{class:!0});var ee=we(o);a=ue(ee,"DIV",{class:!0});var fe=we(a);W(l.$$.fragment,fe),m=Ce(fe),L&&L.l(fe),fe.forEach(I),ee.forEach(I),g=Ce(se),W(w.$$.fragment,se),se.forEach(I),ne.forEach(I),this.h()},h(){oe(a,"class","flex items-center gap-2 w-full"),oe(o,"class","relative overflow-x-auto flex sm:overflow-x-visible"),oe(s,"class","flex flex-1 sm:items-center grow justify-between gap-2 flex-col sm:flex-row relative overflow-x-auto sm:overflow-x-visible"),oe(e,"class","flex items-center gap-2 flex-wrap")},m(U,ne){N(U,e,ne),G(n,e,null),me(e,r),me(e,s),me(s,o),me(o,a),G(l,a,null),me(a,m),L&&L.m(a,null),me(s,g),G(w,s,null),S=!0},p(U,[ne]){const se={};!t&&ne&2&&(t=!0,se.value=U[1].name,Gn(()=>t=!1)),n.$set(se);const ee={};ne&4&&(ee.options=U[2]),!f&&ne&2&&(f=!0,ee.filterValues=U[1].features,Gn(()=>f=!1)),l.$set(ee),U[3]?L?(L.p(U,ne),ne&8&&E(L,1)):(L=Wb(U),L.c(),E(L,1),L.m(a,null)):L&&(It(),P(L,1,1,()=>{L=null}),Pt());const fe={};ne&1&&(fe.tableModel=U[0]),w.$set(fe)},i(U){S||(E(n.$$.fragment,U),E(l.$$.fragment,U),E(L),E(w.$$.fragment,U),S=!0)},o(U){P(n.$$.fragment,U),P(l.$$.fragment,U),P(L),P(w.$$.fragment,U),S=!1},d(U){U&&I(e),Z(n),Z(l),L&&L.d(),Z(w)}}}function dq(i,e,n){let t,r,{tableModel:s}=e,o;Zi(async()=>{try{const M=await(await fetch("/api/poi/features")).json();n(2,o=M.allPOIFeatures)}catch(S){console.error(S)}});const{pluginStates:l}=s,{filterValues:f}=l.colFilter;Jt(i,f,S=>n(1,r=S));function m(S){i.$$.not_equal(r.name,S)&&(r.name=S,f.set(r))}function g(S){i.$$.not_equal(r.features,S)&&(r.features=S,f.set(r))}const w=()=>{vr(f,r.name="",r),vr(f,r.features=[],r)};return i.$$set=S=>{"tableModel"in S&&n(0,s=S.tableModel)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=Object.values({...r}).some(S=>S.length>0||typeof S=="string"&&S.length>0))},[s,r,o,t,f,m,g,w]}let hq=class extends Xe{constructor(e){super(),Je(this,e,dq,fq,Ze,{tableModel:0})}};function mq(i){let e,n;return e=new dw({props:{class:"h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function pq(i){let e,n,t,r;n=new DA({props:{$$slots:{default:[mq]},$$scope:{ctx:i}}});const s=i[5].default,o=tt(s,i,i[9],null);return{c(){e=ce("span"),H(n.$$.fragment),t=ke(),o&&o.c(),this.h()},l(a){e=ue(a,"SPAN",{class:!0});var l=we(e);W(n.$$.fragment,l),l.forEach(I),t=Ce(a),o&&o.l(a),this.h()},h(){oe(e,"class","absolute right-2 flex h-3.5 w-3.5 items-center justify-center")},m(a,l){N(a,e,l),G(n,e,null),N(a,t,l),o&&o.m(a,l),r=!0},p(a,l){const f={};l&512&&(f.$$scope={dirty:l,ctx:a}),n.$set(f),o&&o.p&&(!r||l&512)&&nt(o,s,a,a[9],r?rt(s,a[9],l,null):it(a[9]),null)},i(a){r||(E(n.$$.fragment,a),E(o,a),r=!0)},o(a){P(n.$$.fragment,a),P(o,a),r=!1},d(a){a&&(I(e),I(t)),Z(n),o&&o.d(a)}}}function _q(i){let e,n;const t=[{value:i[1]},{disabled:i[3]},{label:i[2]},{class:Et("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[0])},i[4]];let r={$$slots:{default:[pq]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new SA({props:r}),e.$on("click",i[6]),e.$on("pointermove",i[7]),e.$on("focusin",i[8]),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&31?at(t,[o&2&&{value:s[1]},o&8&&{disabled:s[3]},o&4&&{label:s[2]},o&1&&{class:Et("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[0])},o&16&&dn(s[4])]):{};o&512&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function gq(i,e,n){const t=["class","value","label","disabled"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{value:l}=e,{label:f=void 0}=e,{disabled:m=void 0}=e;function g(M){At.call(this,i,M)}function w(M){At.call(this,i,M)}function S(M){At.call(this,i,M)}return i.$$set=M=>{e=Q(Q({},e),bt(M)),n(4,r=Fe(e,t)),"class"in M&&n(0,a=M.class),"value"in M&&n(1,l=M.value),"label"in M&&n(2,f=M.label),"disabled"in M&&n(3,m=M.disabled),"$$scope"in M&&n(9,o=M.$$scope)},[a,l,f,m,r,s,g,w,S,o]}class po extends Xe{constructor(e){super(),Je(this,e,gq,_q,Ze,{class:0,value:1,label:2,disabled:3})}}function vq(i){let e,n;const t=i[7].default,r=tt(t,i,i[8],null);return{c(){e=ce("div"),r&&r.c(),this.h()},l(s){e=ue(s,"DIV",{class:!0});var o=we(e);r&&r.l(o),o.forEach(I),this.h()},h(){oe(e,"class","w-full p-1")},m(s,o){N(s,e,o),r&&r.m(e,null),n=!0},p(s,o){r&&r.p&&(!n||o&256)&&nt(r,t,s,s[8],n?rt(t,s[8],o,null):it(s[8]),null)},i(s){n||(E(r,s),n=!0)},o(s){P(r,s),n=!1},d(s){s&&I(e),r&&r.d(s)}}}function bq(i){let e,n;const t=[{inTransition:i[2]},{inTransitionConfig:i[3]},{outTransition:i[4]},{outTransitionConfig:i[5]},{sideOffset:i[1]},{class:Et("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md focus:outline-none",i[0])},i[6]];let r={$$slots:{default:[vq]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new vA({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&127?at(t,[o&4&&{inTransition:s[2]},o&8&&{inTransitionConfig:s[3]},o&16&&{outTransition:s[4]},o&32&&{outTransitionConfig:s[5]},o&2&&{sideOffset:s[1]},o&1&&{class:Et("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md focus:outline-none",s[0])},o&64&&dn(s[6])]):{};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function yq(i,e,n){const t=["class","sideOffset","inTransition","inTransitionConfig","outTransition","outTransitionConfig"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e,{sideOffset:l=4}=e,{inTransition:f=pl}=e,{inTransitionConfig:m=void 0}=e,{outTransition:g=FC}=e,{outTransitionConfig:w={start:.95,opacity:0,duration:50}}=e;return i.$$set=S=>{e=Q(Q({},e),bt(S)),n(6,r=Fe(e,t)),"class"in S&&n(0,a=S.class),"sideOffset"in S&&n(1,l=S.sideOffset),"inTransition"in S&&n(2,f=S.inTransition),"inTransitionConfig"in S&&n(3,m=S.inTransitionConfig),"outTransition"in S&&n(4,g=S.outTransition),"outTransitionConfig"in S&&n(5,w=S.outTransitionConfig),"$$scope"in S&&n(8,o=S.$$scope)},[a,l,f,m,g,w,r,s,o]}class wx extends Xe{constructor(e){super(),Je(this,e,yq,bq,Ze,{class:0,sideOffset:1,inTransition:2,inTransitionConfig:3,outTransition:4,outTransitionConfig:5})}}function wq(i){let e,n,t,r;const s=i[2].default,o=tt(s,i,i[3],null);return t=new Bp({props:{class:"h-4 w-4 opacity-50"}}),{c(){o&&o.c(),e=ke(),n=ce("div"),H(t.$$.fragment)},l(a){o&&o.l(a),e=Ce(a),n=ue(a,"DIV",{});var l=we(n);W(t.$$.fragment,l),l.forEach(I)},m(a,l){o&&o.m(a,l),N(a,e,l),N(a,n,l),G(t,n,null),r=!0},p(a,l){o&&o.p&&(!r||l&8)&&nt(o,s,a,a[3],r?rt(s,a[3],l,null):it(a[3]),null)},i(a){r||(E(o,a),E(t.$$.fragment,a),r=!0)},o(a){P(o,a),P(t.$$.fragment,a),r=!1},d(a){a&&(I(e),I(n)),o&&o.d(a),Z(t)}}}function xq(i){let e,n;const t=[{class:Et("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 line-clamp-1 truncate",i[0])},i[1]];let r={$$slots:{default:[wq]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Q(r,t[s]);return e=new NA({props:r}),{c(){H(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,o){G(e,s,o),n=!0},p(s,[o]){const a=o&3?at(t,[o&1&&{class:Et("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 line-clamp-1 truncate",s[0])},o&2&&dn(s[1])]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Z(e,s)}}}function kq(i,e,n){const t=["class"];let r=Fe(e,t),{$$slots:s={},$$scope:o}=e,{class:a=void 0}=e;return i.$$set=l=>{e=Q(Q({},e),bt(l)),n(1,r=Fe(e,t)),"class"in l&&n(0,a=l.class),"$$scope"in l&&n(3,o=l.$$scope)},[a,r,s,o]}class xx extends Xe{constructor(e){super(),Je(this,e,kq,xq,Ze,{class:0})}}const kx=iA,Cx=GA;function Cq(i){let e,n;return e=new Cx({props:{placeholder:"Select page size"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Tq(i){let e;return{c(){e=lt("10")},l(n){e=ct(n,"10")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Sq(i){let e;return{c(){e=lt("20")},l(n){e=ct(n,"20")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Eq(i){let e;return{c(){e=lt("30")},l(n){e=ct(n,"30")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Iq(i){let e;return{c(){e=lt("40")},l(n){e=ct(n,"40")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Pq(i){let e;return{c(){e=lt("50")},l(n){e=ct(n,"50")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function $q(i){let e,n,t,r,s,o,a,l,f,m;return e=new po({props:{value:"10",$$slots:{default:[Tq]},$$scope:{ctx:i}}}),t=new po({props:{value:"20",$$slots:{default:[Sq]},$$scope:{ctx:i}}}),s=new po({props:{value:"30",$$slots:{default:[Eq]},$$scope:{ctx:i}}}),a=new po({props:{value:"40",$$slots:{default:[Iq]},$$scope:{ctx:i}}}),f=new po({props:{value:"50",$$slots:{default:[Pq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),H(s.$$.fragment),o=ke(),H(a.$$.fragment),l=ke(),H(f.$$.fragment)},l(g){W(e.$$.fragment,g),n=Ce(g),W(t.$$.fragment,g),r=Ce(g),W(s.$$.fragment,g),o=Ce(g),W(a.$$.fragment,g),l=Ce(g),W(f.$$.fragment,g)},m(g,w){G(e,g,w),N(g,n,w),G(t,g,w),N(g,r,w),G(s,g,w),N(g,o,w),G(a,g,w),N(g,l,w),G(f,g,w),m=!0},p(g,w){const S={};w&1048576&&(S.$$scope={dirty:w,ctx:g}),e.$set(S);const M={};w&1048576&&(M.$$scope={dirty:w,ctx:g}),t.$set(M);const $={};w&1048576&&($.$$scope={dirty:w,ctx:g}),s.$set($);const D={};w&1048576&&(D.$$scope={dirty:w,ctx:g}),a.$set(D);const F={};w&1048576&&(F.$$scope={dirty:w,ctx:g}),f.$set(F)},i(g){m||(E(e.$$.fragment,g),E(t.$$.fragment,g),E(s.$$.fragment,g),E(a.$$.fragment,g),E(f.$$.fragment,g),m=!0)},o(g){P(e.$$.fragment,g),P(t.$$.fragment,g),P(s.$$.fragment,g),P(a.$$.fragment,g),P(f.$$.fragment,g),m=!1},d(g){g&&(I(n),I(r),I(o),I(l)),Z(e,g),Z(t,g),Z(s,g),Z(a,g),Z(f,g)}}}function Aq(i){let e,n,t,r;return e=new xx({props:{class:"w-[180px]",$$slots:{default:[Cq]},$$scope:{ctx:i}}}),t=new wx({props:{$$slots:{default:[$q]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&1048576&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&1048576&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function Mq(i){let e,n="Go to first page",t,r,s;return r=new _w({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ke(),H(r.$$.fragment),this.h()},l(o){e=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-lc32pz"&&(e.textContent=n),t=Ce(o),W(r.$$.fragment,o),this.h()},h(){oe(e,"class","sr-only")},m(o,a){N(o,e,a),N(o,t,a),G(r,o,a),s=!0},p:Ct,i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(r,o)}}}function Dq(i){let e,n="Go to previous page",t,r,s;return r=new hw({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ke(),H(r.$$.fragment),this.h()},l(o){e=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-2don1e"&&(e.textContent=n),t=Ce(o),W(r.$$.fragment,o),this.h()},h(){oe(e,"class","sr-only")},m(o,a){N(o,e,a),N(o,t,a),G(r,o,a),s=!0},p:Ct,i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(r,o)}}}function Oq(i){let e,n="Go to next page",t,r,s;return r=new mw({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ke(),H(r.$$.fragment),this.h()},l(o){e=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-10zd0e2"&&(e.textContent=n),t=Ce(o),W(r.$$.fragment,o),this.h()},h(){oe(e,"class","sr-only")},m(o,a){N(o,e,a),N(o,t,a),G(r,o,a),s=!0},p:Ct,i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(r,o)}}}function zq(i){let e,n="Go to last page",t,r,s;return r=new gw({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ke(),H(r.$$.fragment),this.h()},l(o){e=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-17pj58n"&&(e.textContent=n),t=Ce(o),W(r.$$.fragment,o),this.h()},h(){oe(e,"class","sr-only")},m(o,a){N(o,e,a),N(o,t,a),G(r,o,a),s=!0},p:Ct,i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(r,o)}}}function Rq(i){let e,n,t,r="Rows per page",s,o,a,l,f,m=i[0]+1+"",g,w,S,M,$,D,F,L,U,ne,se,ee,fe;return o=new kx({props:{onSelectedChange:i[14],selected:{value:10,label:"10"},$$slots:{default:[Aq]},$$scope:{ctx:i}}}),D=new Cr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[Mq]},$$scope:{ctx:i}}}),D.$on("click",i[15]),L=new Cr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[Dq]},$$scope:{ctx:i}}}),L.$on("click",i[16]),ne=new Cr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[Oq]},$$scope:{ctx:i}}}),ne.$on("click",i[17]),ee=new Cr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[zq]},$$scope:{ctx:i}}}),ee.$on("click",i[18]),{c(){e=ce("div"),n=ce("div"),t=ce("p"),t.textContent=r,s=ke(),H(o.$$.fragment),a=ke(),l=ce("div"),f=lt("Page "),g=lt(m),w=lt(" of "),S=lt(i[1]),M=ke(),$=ce("div"),H(D.$$.fragment),F=ke(),H(L.$$.fragment),U=ke(),H(ne.$$.fragment),se=ke(),H(ee.$$.fragment),this.h()},l(_e){e=ue(_e,"DIV",{class:!0});var re=we(e);n=ue(re,"DIV",{class:!0});var de=we(n);t=ue(de,"P",{class:!0,"data-svelte-h":!0}),Rn(t)!=="svelte-opj3eb"&&(t.textContent=r),s=Ce(de),W(o.$$.fragment,de),de.forEach(I),a=Ce(re),l=ue(re,"DIV",{class:!0});var he=we(l);f=ct(he,"Page "),g=ct(he,m),w=ct(he," of "),S=ct(he,i[1]),he.forEach(I),M=Ce(re),$=ue(re,"DIV",{class:!0});var X=we($);W(D.$$.fragment,X),F=Ce(X),W(L.$$.fragment,X),U=Ce(X),W(ne.$$.fragment,X),se=Ce(X),W(ee.$$.fragment,X),X.forEach(I),re.forEach(I),this.h()},h(){oe(t,"class","text-sm font-medium"),oe(n,"class","flex items-center space-x-2"),oe(l,"class","flex w-[100px] items-center justify-center text-sm font-medium"),oe($,"class","flex items-center space-x-2"),oe(e,"class","flex items-center space-x-6 lg:space-x-8 flex-wrap gap-2")},m(_e,re){N(_e,e,re),me(e,n),me(n,t),me(n,s),G(o,n,null),me(e,a),me(e,l),me(l,f),me(l,g),me(l,w),me(l,S),me(e,M),me(e,$),G(D,$,null),me($,F),G(L,$,null),me($,U),G(ne,$,null),me($,se),G(ee,$,null),fe=!0},p(_e,[re]){const de={};re&1048576&&(de.$$scope={dirty:re,ctx:_e}),o.$set(de),(!fe||re&1)&&m!==(m=_e[0]+1+"")&&cn(g,m),(!fe||re&2)&&cn(S,_e[1]);const he={};re&4&&(he.disabled=!_e[2]),re&1048576&&(he.$$scope={dirty:re,ctx:_e}),D.$set(he);const X={};re&4&&(X.disabled=!_e[2]),re&1048576&&(X.$$scope={dirty:re,ctx:_e}),L.$set(X);const j={};re&8&&(j.disabled=!_e[3]),re&1048576&&(j.$$scope={dirty:re,ctx:_e}),ne.$set(j);const xe={};re&8&&(xe.disabled=!_e[3]),re&1048576&&(xe.$$scope={dirty:re,ctx:_e}),ee.$set(xe)},i(_e){fe||(E(o.$$.fragment,_e),E(D.$$.fragment,_e),E(L.$$.fragment,_e),E(ne.$$.fragment,_e),E(ee.$$.fragment,_e),fe=!0)},o(_e){P(o.$$.fragment,_e),P(D.$$.fragment,_e),P(L.$$.fragment,_e),P(ne.$$.fragment,_e),P(ee.$$.fragment,_e),fe=!1},d(_e){_e&&I(e),Z(o),Z(D),Z(L),Z(ne),Z(ee)}}}function Lq(i,e,n){let t,r,s,o,a,l,{tableModel:f}=e;const{pageRows:m,pluginStates:g,rows:w}=f;Jt(i,m,fe=>n(5,l=fe)),Jt(i,w,fe=>n(4,a=fe));const{hasNextPage:S,hasPreviousPage:M,pageIndex:$,pageCount:D,pageSize:F}=g.page;Jt(i,S,fe=>n(3,o=fe)),Jt(i,M,fe=>n(2,s=fe)),Jt(i,$,fe=>n(0,t=fe)),Jt(i,D,fe=>n(1,r=fe));const L=fe=>F.set(Number(fe==null?void 0:fe.value)),U=()=>vr($,t=0,t),ne=()=>vr($,t=t-1,t),se=()=>vr($,t=t+1,t),ee=()=>vr($,t=Math.ceil(a.length/l.length)-1,t);return i.$$set=fe=>{"tableModel"in fe&&n(13,f=fe.tableModel)},[t,r,s,o,a,l,m,w,S,M,$,D,F,f,L,U,ne,se,ee]}let Fq=class extends Xe{constructor(e){super(),Je(this,e,Lq,Rq,Ze,{tableModel:13})}};function Kb(i,e,n){const t=i.slice();return t[9]=e[n],t}function Xb(i,e,n){const t=i.slice();return t[9]=e[n],t}function Jb(i){let e,n,t,r,s,o,a,l;e=new To({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new Wo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[Bq]},$$scope:{ctx:i}}});const f=[Vq,Nq],m=[];function g(w,S){return w[0].length>2?0:1}return o=g(i),a=m[o]=f[o](i),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),s=ce("div"),a.c(),this.h()},l(w){W(e.$$.fragment,w),n=Ce(w),W(t.$$.fragment,w),r=Ce(w),s=ue(w,"DIV",{class:!0});var S=we(s);a.l(S),S.forEach(I),this.h()},h(){oe(s,"class","hidden space-x-1 lg:flex")},m(w,S){G(e,w,S),N(w,n,S),G(t,w,S),N(w,r,S),N(w,s,S),m[o].m(s,null),l=!0},p(w,S){const M={};S&32769&&(M.$$scope={dirty:S,ctx:w}),t.$set(M);let $=o;o=g(w),o===$?m[o].p(w,S):(It(),P(m[$],1,1,()=>{m[$]=null}),Pt(),a=m[o],a?a.p(w,S):(a=m[o]=f[o](w),a.c()),E(a,1),a.m(s,null))},i(w){l||(E(e.$$.fragment,w),E(t.$$.fragment,w),E(a),l=!0)},o(w){P(e.$$.fragment,w),P(t.$$.fragment,w),P(a),l=!1},d(w){w&&(I(n),I(r),I(s)),Z(e,w),Z(t,w),m[o].d()}}}function Bq(i){let e=i[0].length+"",n;return{c(){n=lt(e)},l(t){n=ct(t,e)},m(t,r){N(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&cn(n,e)},d(t){t&&I(n)}}}function Nq(i){let e,n,t=kn(i[0]),r=[];for(let o=0;o<t.length;o+=1)r[o]=Yb(Xb(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&1){t=kn(o[0]);let l;for(l=0;l<t.length;l+=1){const f=Xb(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=Yb(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function Vq(i){let e,n;return e=new Wo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[Uq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function jq(i){let e=i[9]+"",n,t;return{c(){n=lt(e),t=ke()},l(r){n=ct(r,e),t=Ce(r)},m(r,s){N(r,n,s),N(r,t,s)},p(r,s){s&1&&e!==(e=r[9]+"")&&cn(n,e)},d(r){r&&(I(n),I(t))}}}function Yb(i){let e,n;return e=new Wo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[jq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Uq(i){let e=i[0].length+"",n,t;return{c(){n=lt(e),t=lt(" Selected")},l(r){n=ct(r,e),t=ct(r," Selected")},m(r,s){N(r,n,s),N(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&cn(n,e)},d(r){r&&(I(n),I(t))}}}function qq(i){let e,n,t,r,s,o;e=new dp({props:{class:"mr-2 h-4 w-4"}});let a=i[0].length>0&&Jb(i);return{c(){H(e.$$.fragment),n=ke(),t=lt(i[1]),r=ke(),a&&a.c(),s=Le()},l(l){W(e.$$.fragment,l),n=Ce(l),t=ct(l,i[1]),r=Ce(l),a&&a.l(l),s=Le()},m(l,f){G(e,l,f),N(l,n,f),N(l,t,f),N(l,r,f),a&&a.m(l,f),N(l,s,f),o=!0},p(l,f){(!o||f&2)&&cn(t,l[1]),l[0].length>0?a?(a.p(l,f),f&1&&E(a,1)):(a=Jb(l),a.c(),E(a,1),a.m(s.parentNode,s)):a&&(It(),P(a,1,1,()=>{a=null}),Pt())},i(l){o||(E(e.$$.fragment,l),E(a),o=!0)},o(l){P(e.$$.fragment,l),P(a),o=!1},d(l){l&&(I(n),I(t),I(r),I(s)),Z(e,l),a&&a.d(l)}}}function Hq(i){let e,n;return e=new Cr({props:{builders:[i[12]],variant:"outline",size:"sm",class:"h-8 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[qq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&32771&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Gq(i){let e;return{c(){e=lt("No results found.")},l(n){e=ct(n,"No results found.")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Qb(i){let e,n=i[3][i[9]]+"",t;return{c(){e=ce("span"),t=lt(n),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=we(e);t=ct(s,n),s.forEach(I),this.h()},h(){oe(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){N(r,e,s),me(e,t)},p(r,s){s&12&&n!==(n=r[3][r[9]]+"")&&cn(t,n)},d(r){r&&I(e)}}}function Zq(i){let e,n,t,r,s,o=i[9]+"",a,l,f,m;n=new hp({props:{className:Et("h-4 w-4")}});let g=i[3][i[9]]&&Qb(i);return{c(){e=ce("div"),H(n.$$.fragment),r=ke(),s=ce("span"),a=lt(o),l=ke(),g&&g.c(),f=ke(),this.h()},l(w){e=ue(w,"DIV",{class:!0});var S=we(e);W(n.$$.fragment,S),S.forEach(I),r=Ce(w),s=ue(w,"SPAN",{});var M=we(s);a=ct(M,o),M.forEach(I),l=Ce(w),g&&g.l(w),f=Ce(w),this.h()},h(){oe(e,"class",t=Et("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m(w,S){N(w,e,S),G(n,e,null),N(w,r,S),N(w,s,S),me(s,a),N(w,l,S),g&&g.m(w,S),N(w,f,S),m=!0},p(w,S){(!m||S&5&&t!==(t=Et("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",w[0].includes(w[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&oe(e,"class",t),(!m||S&4)&&o!==(o=w[9]+"")&&cn(a,o),w[3][w[9]]?g?g.p(w,S):(g=Qb(w),g.c(),g.m(f.parentNode,f)):g&&(g.d(1),g=null)},i(w){m||(E(n.$$.fragment,w),m=!0)},o(w){P(n.$$.fragment,w),m=!1},d(w){w&&(I(e),I(r),I(s),I(l),I(f)),Z(n),g&&g.d(w)}}}function ey(i){let e,n;return e=new Dc({props:{class:"cursor-pointer",value:i[9],onSelect:i[6],$$slots:{default:[Zq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[9]),r&32781&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Wq(i){let e,n,t=kn(i[2]),r=[];for(let o=0;o<t.length;o+=1)r[o]=ey(Kb(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&45){t=kn(o[2]);let l;for(l=0;l<t.length;l+=1){const f=Kb(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=ey(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function ty(i){let e,n,t,r;return e=new jp({}),t=new Dc({props:{class:"justify-center text-center cursor-pointer",onSelect:i[7],$$slots:{default:[Kq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&1&&(a.onSelect=s[7]),o&32768&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function Kq(i){let e;return{c(){e=lt("Clear Filter")},l(n){e=ct(n,"Clear Filter")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Xq(i){let e,n,t,r,s,o;e=new Lp({props:{$$slots:{default:[Gq]},$$scope:{ctx:i}}}),t=new Fp({props:{$$slots:{default:[Wq]},$$scope:{ctx:i}}});let a=i[0].length>0&&ty(i);return{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),a&&a.c(),s=Le()},l(l){W(e.$$.fragment,l),n=Ce(l),W(t.$$.fragment,l),r=Ce(l),a&&a.l(l),s=Le()},m(l,f){G(e,l,f),N(l,n,f),G(t,l,f),N(l,r,f),a&&a.m(l,f),N(l,s,f),o=!0},p(l,f){const m={};f&32768&&(m.$$scope={dirty:f,ctx:l}),e.$set(m);const g={};f&32781&&(g.$$scope={dirty:f,ctx:l}),t.$set(g),l[0].length>0?a?(a.p(l,f),f&1&&E(a,1)):(a=ty(l),a.c(),E(a,1),a.m(s.parentNode,s)):a&&(It(),P(a,1,1,()=>{a=null}),Pt())},i(l){o||(E(e.$$.fragment,l),E(t.$$.fragment,l),E(a),o=!0)},o(l){P(e.$$.fragment,l),P(t.$$.fragment,l),P(a),o=!1},d(l){l&&(I(n),I(r),I(s)),Z(e,l),Z(t,l),a&&a.d(l)}}}function Jq(i){let e,n,t,r;return e=new Np({props:{placeholder:i[1]}}),t=new Vp({props:{$$slots:{default:[Xq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&2&&(a.placeholder=s[1]),e.$set(a);const l={};o&32781&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function Yq(i){let e,n;return e=new Rp({props:{loop:!0,$$slots:{default:[Jq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function Qq(i){let e,n,t,r;return e=new Hp({props:{asChild:!0,$$slots:{default:[Hq,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new Up({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[Yq]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&36867&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32783&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function eH(i){let e,n,t;function r(o){i[8](o)}let s={$$slots:{default:[Qq]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.open=i[4]),e=new qp({props:s}),Nt.push(()=>Zn(e,"open",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,[a]){const l={};a&32783&&(l.$$scope={dirty:a,ctx:o}),!n&&a&16&&(n=!0,l.open=o[4],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function tH(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{options:s}=e,{counts:o={}}=e,a=!1;const l=w=>{Array.isArray(t)&&t.includes(w)?n(0,t=t.filter(S=>S!==w)):n(0,t=[...Array.isArray(t)?t:[],w])},f=w=>{l(w)},m=()=>{n(0,t=[])};function g(w){a=w,n(4,a)}return i.$$set=w=>{"filterValues"in w&&n(0,t=w.filterValues),"title"in w&&n(1,r=w.title),"options"in w&&n(2,s=w.options),"counts"in w&&n(3,o=w.counts)},[t,r,s,o,a,l,f,m,g]}let nH=class extends Xe{constructor(e){super(),Je(this,e,tH,eH,Ze,{filterValues:0,title:1,options:2,counts:3})}};function ny(i,e,n){const t=i.slice();return t[9]=e[n],t[10]=e,t[11]=n,t}function iH(i){let e,n,t;return e=new vw({props:{class:"mr-2 h-4 w-4"}}),{c(){H(e.$$.fragment),n=lt(`
			View`)},l(r){W(e.$$.fragment,r),n=ct(r,`
			View`)},m(r,s){G(e,r,s),N(r,n,s),t=!0},p:Ct,i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function rH(i){let e,n;return e=new Cr({props:{variant:"outline",size:"sm",class:"h-8 flex hover:bg-accent hover:text-accent-foreground bg-background",builders:[i[12]],$$slots:{default:[iH]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&8192&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function sH(i){let e;return{c(){e=lt("Toggle columns")},l(n){e=ct(n,"Toggle columns")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function oH(i){let e,n,t;function r(o){i[5](o,i[9])}let s={$$slots:{default:[aH]},$$scope:{ctx:i}};return i[0][i[9].id]!==void 0&&(s.checked=i[0][i[9].id]),e=new bx({props:s}),Nt.push(()=>Zn(e,"checked",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,a){i=o;const l={};a&8192&&(l.$$scope={dirty:a,ctx:i}),!n&&a&3&&(n=!0,l.checked=i[0][i[9].id],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function aH(i){let e=i[9].header+"",n,t;return{c(){n=lt(e),t=ke()},l(r){n=ct(r,e),t=Ce(r)},m(r,s){N(r,n,s),N(r,t,s)},p:Ct,d(r){r&&(I(n),I(t))}}}function iy(i){let e=i[3].includes(i[9].id),n,t,r=e&&oH(i);return{c(){r&&r.c(),n=Le()},l(s){r&&r.l(s),n=Le()},m(s,o){r&&r.m(s,o),N(s,n,o),t=!0},p(s,o){e&&r.p(s,o)},i(s){t||(E(r),t=!0)},o(s){P(r),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function lH(i){let e,n,t,r,s,o;e=new gx({props:{$$slots:{default:[sH]},$$scope:{ctx:i}}}),t=new vx({});let a=kn(i[1]),l=[];for(let m=0;m<a.length;m+=1)l[m]=iy(ny(i,a,m));const f=m=>P(l[m],1,1,()=>{l[m]=null});return{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke();for(let m=0;m<l.length;m+=1)l[m].c();s=Le()},l(m){W(e.$$.fragment,m),n=Ce(m),W(t.$$.fragment,m),r=Ce(m);for(let g=0;g<l.length;g+=1)l[g].l(m);s=Le()},m(m,g){G(e,m,g),N(m,n,g),G(t,m,g),N(m,r,g);for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(m,g);N(m,s,g),o=!0},p(m,g){const w={};if(g&8192&&(w.$$scope={dirty:g,ctx:m}),e.$set(w),g&11){a=kn(m[1]);let S;for(S=0;S<a.length;S+=1){const M=ny(m,a,S);l[S]?(l[S].p(M,g),E(l[S],1)):(l[S]=iy(M),l[S].c(),E(l[S],1),l[S].m(s.parentNode,s))}for(It(),S=a.length;S<l.length;S+=1)f(S);Pt()}},i(m){if(!o){E(e.$$.fragment,m),E(t.$$.fragment,m);for(let g=0;g<a.length;g+=1)E(l[g]);o=!0}},o(m){P(e.$$.fragment,m),P(t.$$.fragment,m),l=l.filter(Boolean);for(let g=0;g<l.length;g+=1)P(l[g]);o=!1},d(m){m&&(I(n),I(r),I(s)),Z(e,m),Z(t,m),fs(l,m)}}}function cH(i){let e,n,t,r;return e=new _f({props:{asChild:!0,$$slots:{default:[rH,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new mf({props:{$$slots:{default:[lH]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&12288&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&8193&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function uH(i){let e,n;return e=new pf({props:{$$slots:{default:[cH]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&8193&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function fH(i,e,n){let t,{tableModel:r}=e;const{pluginStates:s,flatColumns:o}=r,{hiddenColumnIds:a}=s.hide;Jt(i,a,w=>n(6,t=w));const l=o.map(w=>w.id);let f=Object.fromEntries(l.map(w=>[w,!0]));const m=["name","features"];function g(w,S){i.$$.not_equal(f[S.id],w)&&(f[S.id]=w,n(0,f))}return i.$$set=w=>{"tableModel"in w&&n(4,r=w.tableModel)},i.$$.update=()=>{i.$$.dirty&1&&vr(a,t=Object.entries(f).filter(([,w])=>!w).map(([w])=>w),t)},[f,o,a,m,r,g]}let dH=class extends Xe{constructor(e){super(),Je(this,e,fH,uH,Ze,{tableModel:4})}};function ry(i,e,n){const t=i.slice();return t[14]=e[n],t}function sy(i,e,n){const t=i.slice();return t[18]=e[n],t}function oy(i,e,n){const t=i.slice();return t[22]=e[n],t}function ay(i,e,n){const t=i.slice();return t[18]=e[n],t}function hH(i){let e,n;return e=new hf({props:{of:i[18].render()}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.of=t[18].render()),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function mH(i){let e,n;return e=new aq({props:{props:i[27],$$slots:{default:[hH]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&134217728&&(s.props=t[27]),r&268435460&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function pH(i){let e,n,t;const r=[i[21]];let s={$$slots:{default:[mH]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return e=new cx({props:s}),{c(){H(e.$$.fragment),n=ke()},l(o){W(e.$$.fragment,o),n=Ce(o)},m(o,a){G(e,o,a),N(o,n,a),t=!0},p(o,a){const l=a&2097152?at(r,[dn(o[21])]):{};a&402653188&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){o&&I(n),Z(e,o)}}}function ly(i,e){let n,t,r;return t=new Ko({props:{attrs:e[18].attrs(),props:e[18].props(),$$slots:{default:[pH,({attrs:s,props:o})=>({21:s,27:o}),({attrs:s,props:o})=>(s?2097152:0)|(o?134217728:0)]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&4&&(a.attrs=e[18].attrs()),o&4&&(a.props=e[18].props()),o&404750340&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function _H(i){let e=[],n=new Map,t,r,s=kn(i[22].cells);const o=a=>a[18].id;for(let a=0;a<s.length;a+=1){let l=ay(i,s,a),f=o(l);n.set(f,e[a]=ly(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&136314884&&(s=kn(a[22].cells),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,ly,t,ay),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function gH(i){let e,n,t;return e=new wh({props:{$$slots:{default:[_H]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke()},l(r){W(e.$$.fragment,r),n=Ce(r)},m(r,s){G(e,r,s),N(r,n,s),t=!0},p(r,s){const o={};s&268435460&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function cy(i){let e,n;return e=new Ko({props:{rowAttrs:i[22].attrs(),$$slots:{default:[gH]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.rowAttrs=t[22].attrs()),r&268435460&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function vH(i){let e,n,t=kn(i[2]),r=[];for(let o=0;o<t.length;o+=1)r[o]=cy(oy(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&136314884){t=kn(o[2]);let l;for(l=0;l<t.length;l+=1){const f=oy(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=cy(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function bH(i){let e,n;return e=new hf({props:{of:i[18].render()}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.of=t[18].render()),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function yH(i){let e,n,t;const r=[i[21]];let s={$$slots:{default:[bH]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return e=new lx({props:s}),{c(){H(e.$$.fragment),n=ke()},l(o){W(e.$$.fragment,o),n=Ce(o)},m(o,a){G(e,o,a),N(o,n,a),t=!0},p(o,a){const l=a&2097152?at(r,[dn(o[21])]):{};a&268435472&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){o&&I(n),Z(e,o)}}}function uy(i,e){let n,t,r;return t=new Ko({props:{attrs:e[18].attrs(),$$slots:{default:[yH,({attrs:s})=>({21:s}),({attrs:s})=>s?2097152:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&16&&(a.attrs=e[18].attrs()),o&270532624&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function wH(i){let e=[],n=new Map,t,r,s=kn(i[14].cells);const o=a=>a[18].id;for(let a=0;a<s.length;a+=1){let l=sy(i,s,a),f=o(l);n.set(f,e[a]=uy(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&2097168&&(s=kn(a[14].cells),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,uy,t,sy),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function xH(i){let e,n,t;const r=[i[17],{class:"cursor-pointer"}];function s(){return i[11](i[14])}let o={$$slots:{default:[wH]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)o=Q(o,r[a]);return e=new wh({props:o}),e.$on("click",s),{c(){H(e.$$.fragment),n=ke()},l(a){W(e.$$.fragment,a),n=Ce(a)},m(a,l){G(e,a,l),N(a,n,l),t=!0},p(a,l){i=a;const f=l&131072?at(r,[dn(i[17]),r[1]]):{};l&268435472&&(f.$$scope={dirty:l,ctx:i}),e.$set(f)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){a&&I(n),Z(e,a)}}}function fy(i,e){let n,t,r;return t=new Ko({props:{rowAttrs:e[14].attrs(),$$slots:{default:[xH,({rowAttrs:s})=>({17:s}),({rowAttrs:s})=>s?131072:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&16&&(a.rowAttrs=e[14].attrs()),o&268566544&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function kH(i){let e=[],n=new Map,t,r,s=kn(i[4]);const o=a=>a[14].id;for(let a=0;a<s.length;a+=1){let l=ry(i,s,a),f=o(l);n.set(f,e[a]=fy(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&2228272&&(s=kn(a[4]),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,fy,t,ry),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function CH(i){let e,n,t,r;e=new ux({props:{$$slots:{default:[vH]},$$scope:{ctx:i}}});const s=[i[3]];let o={$$slots:{default:[kH]},$$scope:{ctx:i}};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return t=new ax({props:o}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(a){W(e.$$.fragment,a),n=Ce(a),W(t.$$.fragment,a)},m(a,l){G(e,a,l),N(a,n,l),G(t,a,l),r=!0},p(a,l){const f={};l&268435460&&(f.$$scope={dirty:l,ctx:a}),e.$set(f);const m=l&8?at(s,[dn(a[3])]):{};l&268435472&&(m.$$scope={dirty:l,ctx:a}),t.$set(m)},i(a){r||(E(e.$$.fragment,a),E(t.$$.fragment,a),r=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),r=!1},d(a){a&&I(n),Z(e,a),Z(t,a)}}}function TH(i){let e,n;return e=new Fq({props:{tableModel:i[6]}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function SH(i){let e,n="No POIs in Favourites…";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-cqoewt"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-center text-xl")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function EH(i){let e,n,t,r,s,o,a,l,f;n=new hq({props:{tableModel:i[6]}});const m=[i[1]];let g={$$slots:{default:[CH]},$$scope:{ctx:i}};for(let $=0;$<m.length;$+=1)g=Q(g,m[$]);s=new ox({props:g});const w=[SH,TH],S=[];function M($,D){return $[0].length===0?0:1}return a=M(i),l=S[a]=w[a](i),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),r=ce("div"),H(s.$$.fragment),o=ke(),l.c(),this.h()},l($){e=ue($,"DIV",{class:!0});var D=we(e);W(n.$$.fragment,D),t=Ce(D),r=ue(D,"DIV",{class:!0});var F=we(r);W(s.$$.fragment,F),F.forEach(I),o=Ce(D),l.l(D),D.forEach(I),this.h()},h(){oe(r,"class","rounded-md border"),oe(e,"class","space-y-4")},m($,D){N($,e,D),G(n,e,null),me(e,t),me(e,r),G(s,r,null),me(e,o),S[a].m(e,null),f=!0},p($,[D]){const F=D&2?at(m,[dn($[1])]):{};D&268435484&&(F.$$scope={dirty:D,ctx:$}),s.$set(F);let L=a;a=M($),a===L?S[a].p($,D):(It(),P(S[L],1,1,()=>{S[L]=null}),Pt(),l=S[a],l?l.p($,D):(l=S[a]=w[a]($),l.c()),E(l,1),l.m(e,null))},i($){f||(E(n.$$.fragment,$),E(s.$$.fragment,$),E(l),f=!0)},o($){P(n.$$.fragment,$),P(s.$$.fragment,$),P(l),f=!1},d($){$&&I(e),Z(n),Z(s),S[a].d()}}}function IH(i,e,n){let t,r,s,o,{data:a}=e;const l=sx(As(a),{sort:_x({toggleOrder:["asc","desc"]}),page:mx(),colFilter:dx(),hide:hx()}),f=l.createColumns([l.column({accessor:"name",header:"Name",id:"name",cell:({value:F,row:L})=>L.isData()?Hu(Zb,{value:F}):F,plugins:{colFilter:{fn:({filterValue:F,value:L})=>L.toLowerCase().includes(F.toLowerCase()),initialFilterValue:"",render:({filterValue:F})=>wr(F)}}}),l.column({accessor:"features",header:"Features",id:"features",cell:({value:F,row:L})=>L.isData()?Hu(Zb,{value:F.join(", ")}):F.join(""),plugins:{colFilter:{fn:({filterValue:F,value:L})=>F.length===0||!Array.isArray(F)?!0:F.some(U=>L.includes(U)),initialFilterValue:[],render:({filterValue:F})=>wr(F)},sort:{disable:!0}}})]),m=F=>F.original,g=l.createViewModel(f),{headerRows:w,pageRows:S,tableAttrs:M,tableBodyAttrs:$}=g;Jt(i,w,F=>n(2,r=F)),Jt(i,S,F=>n(4,o=F)),Jt(i,M,F=>n(1,t=F)),Jt(i,$,F=>n(3,s=F));const D=F=>il("/app?focus-poi="+encodeURIComponent(m(F).id));return i.$$set=F=>{"data"in F&&n(0,a=F.data)},[a,t,r,s,o,m,g,w,S,M,$,D]}let PH=class extends Xe{constructor(e){super(),Je(this,e,IH,EH,Ze,{data:0})}};function $H(i){let e;return{c(){e=lt("Check-ins")},l(n){e=ct(n,"Check-ins")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function AH(i){let e,n,t,r;return e=new Co({props:{class:"mb-3",$$slots:{default:[$H]},$$scope:{ctx:i}}}),t=new To({}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function MH(i){let e,n;return e=new PH({props:{data:i[2]}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.data=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function DH(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","grow flex items-center justify-center")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function OH(i){let e,n,t,r;const s=[DH,MH],o=[];function a(l,f){return l[3]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function zH(i){let e,n,t,r,s;return n=new ws({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[AH]},$$scope:{ctx:i}}}),r=new ts({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[OH]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),H(r.$$.fragment)},l(o){e=ue(o,"DIV",{});var a=we(e);W(n.$$.fragment,a),a.forEach(I),t=Ce(o),W(r.$$.fragment,o)},m(o,a){N(o,e,a),G(n,e,null),i[6](e),N(o,t,a),G(r,o,a),s=!0},p(o,a){const l={};a&256&&(l.$$scope={dirty:a,ctx:o}),n.$set(l);const f={};a&2&&(f.style=`height: calc(100% - ${o[1]}px);`),a&268&&(f.$$scope={dirty:a,ctx:o}),r.$set(f)},i(o){s||(E(n.$$.fragment,o),E(r.$$.fragment,o),s=!0)},o(o){P(n.$$.fragment,o),P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(n),i[6](null),Z(r,o)}}}function RH(i){let e,n,t,r,s;return n=new or({props:{class:"relative p-4 h-full",$$slots:{default:[zH]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(o){e=ue(o,"DIV",{class:!0});var a=we(e);W(n.$$.fragment,a),a.forEach(I),this.h()},h(){oe(e,"class","flex flex-col p-4 relative h-full")},m(o,a){N(o,e,a),G(n,e,null),t=!0,r||(s=Ke(window,"resize",i[4]),r=!0)},p(o,[a]){const l={};a&271&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){t||(E(n.$$.fragment,o),t=!0)},o(o){P(n.$$.fragment,o),t=!1},d(o){o&&I(e),Z(n),r=!1,s()}}}function LH(i,e,n){let{slug:t}=e,r,s=64;const o=()=>{const g=r.offsetHeight;g!==void 0&&n(1,s=g)};Zi(o);let a=[],l=!0;Zi(async()=>{const g=await fetch("/api/check-in");if(g.ok){const w=await g.json(),S=[];w.forEach(M=>{const $=ol.decode(M);if(th.isRight($)){const D=$.right;S.push(D)}else console.error("Invalid POI object received from API: ",$.left)}),n(2,a=S),n(3,l=!1)}});function m(g){Nt[g?"unshift":"push"](()=>{r=g,n(0,r)})}return i.$$set=g=>{"slug"in g&&n(5,t=g.slug)},[r,s,a,l,o,t,m]}class FH extends Xe{constructor(e){super(),Je(this,e,LH,RH,Ze,{slug:5})}}function BH(i){let e,n;return{c(){e=ce("span"),n=lt(i[0]),this.h()},l(t){e=ue(t,"SPAN",{class:!0});var r=we(e);n=ct(r,i[0]),r.forEach(I),this.h()},h(){oe(e,"class","lg:max-w-[320px] sm:max-w-[160px] max-w-[80px] truncate font-medium")},m(t,r){N(t,e,r),me(e,n)},p(t,r){r&1&&cn(n,t[0])},d(t){t&&I(e)}}}function NH(i){let e,n;return{c(){e=ce("div"),n=lt(i[0]),this.h()},l(t){e=ue(t,"DIV",{class:!0});var r=we(e);n=ct(r,i[0]),r.forEach(I),this.h()},h(){oe(e,"class","text-xs flex items-center")},m(t,r){N(t,e,r),me(e,n)},p(t,r){r&1&&cn(n,t[0])},d(t){t&&I(e)}}}function VH(i){let e,n,t,r;return e=new Sa({props:{$$slots:{default:[BH]},$$scope:{ctx:i}}}),t=new Ta({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[NH]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&3&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&3&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function jH(i){let e,n,t;return n=new va({props:{$$slots:{default:[VH]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","flex space-x-2")},m(r,s){N(r,e,s),G(n,e,null),t=!0},p(r,[s]){const o={};s&3&&(o.$$scope={dirty:s,ctx:r}),n.$set(o)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function UH(i,e,n){let{value:t}=e;return i.$$set=r=>{"value"in r&&n(0,t=r.value)},[t]}class dy extends Xe{constructor(e){super(),Je(this,e,UH,jH,Ze,{value:0})}}function qH(i){let e,n,t,r="Open menu",s;return e=new uF({props:{class:"h-4 w-4"}}),{c(){H(e.$$.fragment),n=ke(),t=ce("span"),t.textContent=r,this.h()},l(o){W(e.$$.fragment,o),n=Ce(o),t=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(t)!=="svelte-rsbkxi"&&(t.textContent=r),this.h()},h(){oe(t,"class","sr-only")},m(o,a){G(e,o,a),N(o,n,a),N(o,t,a),s=!0},p:Ct,i(o){s||(E(e.$$.fragment,o),s=!0)},o(o){P(e.$$.fragment,o),s=!1},d(o){o&&(I(n),I(t)),Z(e,o)}}}function HH(i){let e,n;return e=new Cr({props:{variant:"ghost",builders:[i[4]],class:"flex h-8 w-8 p-0 data-[state=open]:bg-muted ml-auto hover:bg-accent hover:text-accent-foreground bg-background",$$slots:{default:[qH]},$$scope:{ctx:i}}}),e.$on("click",XH),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.builders=[t[4]]),r&32&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function GH(i){let e;return{c(){e=lt("Remove From Favourites")},l(n){e=ct(n,"Remove From Favourites")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function ZH(i){let e,n;return e=new Cr({props:{variant:"destructive",$$slots:{default:[GH]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function WH(i){let e,n,t,r;return e=new _f({props:{asChild:!0,$$slots:{default:[HH,({builder:s})=>({4:s}),({builder:s})=>s?16:0]},$$scope:{ctx:i}}}),t=new mf({props:{class:"w-[160px]",align:"end",$$slots:{default:[ZH]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&48&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&35&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function KH(i){let e,n;return e=new pf({props:{$$slots:{default:[WH]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&35&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}const XH=i=>i.stopPropagation();function JH(i,e,n){let{row:t}=e,{rowId:r}=e,{removeFavourite:s}=e;const o=()=>s(r);return i.$$set=a=>{"row"in a&&n(2,t=a.row),"rowId"in a&&n(0,r=a.rowId),"removeFavourite"in a&&n(1,s=a.removeFavourite)},[r,s,t,o]}class YH extends Xe{constructor(e){super(),Je(this,e,JH,KH,Ze,{row:2,rowId:0,removeFavourite:1})}}function QH(i){let e;const n=i[4].default,t=tt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&nt(t,n,r,r[5],e?rt(n,r[5],s,null):it(r[5]),null)},i(r){e||(E(t,r),e=!0)},o(r){P(t,r),e=!1},d(r){t&&t.d(r)}}}function eG(i){let e,n,t,r;return n=new pf({props:{$$slots:{default:[cG]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(s){e=ue(s,"DIV",{class:!0});var o=we(e);W(n.$$.fragment,o),o.forEach(I),this.h()},h(){oe(e,"class",t=Et("flex items-center",i[0]))},m(s,o){N(s,e,o),G(n,e,null),r=!0},p(s,o){const a={};o&34&&(a.$$scope={dirty:o,ctx:s}),n.$set(a),(!r||o&1&&t!==(t=Et("flex items-center",s[0])))&&oe(e,"class",t)},i(s){r||(E(n.$$.fragment,s),r=!0)},o(s){P(n.$$.fragment,s),r=!1},d(s){s&&I(e),Z(n)}}}function tG(i){let e,n;return e=new Bp({props:{class:"ml-2 h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function nG(i){let e,n;return e=new fw({props:{class:"ml-2 h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function iG(i){let e,n;return e=new uw({props:{class:"ml-2 h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function rG(i){let e,n,t,r,s;const o=i[4].default,a=tt(o,i,i[5],null),l=[iG,nG,tG],f=[];function m(g,w){return g[1].sort.order==="desc"?0:g[1].sort.order==="asc"?1:2}return n=m(i),t=f[n]=l[n](i),{c(){a&&a.c(),e=ke(),t.c(),r=Le()},l(g){a&&a.l(g),e=Ce(g),t.l(g),r=Le()},m(g,w){a&&a.m(g,w),N(g,e,w),f[n].m(g,w),N(g,r,w),s=!0},p(g,w){a&&a.p&&(!s||w&32)&&nt(a,o,g,g[5],s?rt(o,g[5],w,null):it(g[5]),null);let S=n;n=m(g),n!==S&&(It(),P(f[S],1,1,()=>{f[S]=null}),Pt(),t=f[n],t||(t=f[n]=l[n](g),t.c()),E(t,1),t.m(r.parentNode,r))},i(g){s||(E(a,g),E(t),s=!0)},o(g){P(a,g),P(t),s=!1},d(g){g&&(I(e),I(r)),a&&a.d(g),f[n].d(g)}}}function sG(i){let e,n;return e=new Cr({props:{variant:"ghost",builders:[i[6]],class:"-ml-3 h-8 data-[state=open]:bg-accent",$$slots:{default:[rG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&64&&(s.builders=[t[6]]),r&34&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function oG(i){let e;return{c(){e=lt("Asc")},l(n){e=ct(n,"Asc")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function aG(i){let e;return{c(){e=lt("Desc")},l(n){e=ct(n,"Desc")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function lG(i){let e,n,t,r;return e=new Qd({props:{$$slots:{default:[oG]},$$scope:{ctx:i}}}),e.$on("click",i[2]),t=new Qd({props:{$$slots:{default:[aG]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function cG(i){let e,n,t,r;return e=new _f({props:{asChild:!0,$$slots:{default:[sG,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:i}}}),t=new mf({props:{align:"start",$$slots:{default:[lG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&98&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function uG(i){let e,n,t,r;const s=[eG,QH],o=[];function a(l,f){return l[1].sort.disabled?1:0}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,[f]){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function fG(i,e,n){let{$$slots:t={},$$scope:r}=e,{class:s=void 0}=e,{props:o}=e;function a(f){o.sort.order!=="asc"&&o.sort.toggle(f)}function l(f){o.sort.order!=="desc"&&o.sort.toggle(f)}return i.$$set=f=>{"class"in f&&n(0,s=f.class),"props"in f&&n(1,o=f.props),"$$scope"in f&&n(5,r=f.$$scope)},[s,o,a,l,t,r]}class dG extends Xe{constructor(e){super(),Je(this,e,fG,uG,Ze,{class:0,props:1})}}function hy(i){let e,n;return e=new Cr({props:{variant:"outline",class:"h-8 px-2 lg:px-3",$$slots:{default:[hG]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function hG(i){let e,n;return e=new pw({props:{class:"h-4 w-4"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function mG(i){let e,n,t,r,s,o,a,l,f,m,g,w,S;function M(U){i[5](U)}let $={placeholder:"Filter by name...",class:"h-8 sm:w-[250px] lg:w-[350px] grow sm:grow-0 lg:grow-0 md:grow hover:bg-accent hover:text-accent-foreground bg-background focus-visible:m-0.5",type:"search"};i[1].name!==void 0&&($.value=i[1].name),n=new yx({props:$}),Nt.push(()=>Zn(n,"value",M));function D(U){i[6](U)}let F={title:"POI Features",options:i[2]};i[1].features!==void 0&&(F.filterValues=i[1].features),l=new KG({props:F}),Nt.push(()=>Zn(l,"filterValues",D));let L=i[3]&&hy(i);return w=new sZ({props:{tableModel:i[0]}}),{c(){e=ce("div"),H(n.$$.fragment),r=ke(),s=ce("div"),o=ce("div"),a=ce("div"),H(l.$$.fragment),m=ke(),L&&L.c(),g=ke(),H(w.$$.fragment),this.h()},l(U){e=ue(U,"DIV",{class:!0});var ne=we(e);W(n.$$.fragment,ne),r=Ce(ne),s=ue(ne,"DIV",{class:!0});var se=we(s);o=ue(se,"DIV",{class:!0});var ee=we(o);a=ue(ee,"DIV",{class:!0});var fe=we(a);W(l.$$.fragment,fe),m=Ce(fe),L&&L.l(fe),fe.forEach(I),ee.forEach(I),g=Ce(se),W(w.$$.fragment,se),se.forEach(I),ne.forEach(I),this.h()},h(){oe(a,"class","flex items-center gap-2 w-full"),oe(o,"class","relative overflow-x-auto flex sm:overflow-x-visible"),oe(s,"class","flex flex-1 sm:items-center grow justify-between gap-2 flex-col sm:flex-row relative overflow-x-auto sm:overflow-x-visible"),oe(e,"class","flex items-center gap-2 flex-wrap")},m(U,ne){N(U,e,ne),G(n,e,null),me(e,r),me(e,s),me(s,o),me(o,a),G(l,a,null),me(a,m),L&&L.m(a,null),me(s,g),G(w,s,null),S=!0},p(U,[ne]){const se={};!t&&ne&2&&(t=!0,se.value=U[1].name,Gn(()=>t=!1)),n.$set(se);const ee={};ne&4&&(ee.options=U[2]),!f&&ne&2&&(f=!0,ee.filterValues=U[1].features,Gn(()=>f=!1)),l.$set(ee),U[3]?L?(L.p(U,ne),ne&8&&E(L,1)):(L=hy(U),L.c(),E(L,1),L.m(a,null)):L&&(It(),P(L,1,1,()=>{L=null}),Pt());const fe={};ne&1&&(fe.tableModel=U[0]),w.$set(fe)},i(U){S||(E(n.$$.fragment,U),E(l.$$.fragment,U),E(L),E(w.$$.fragment,U),S=!0)},o(U){P(n.$$.fragment,U),P(l.$$.fragment,U),P(L),P(w.$$.fragment,U),S=!1},d(U){U&&I(e),Z(n),Z(l),L&&L.d(),Z(w)}}}function pG(i,e,n){let t,r,{tableModel:s}=e,o;Zi(async()=>{try{const M=await(await fetch("/api/poi/features")).json();n(2,o=M.allPOIFeatures)}catch(S){console.error(S)}});const{pluginStates:l}=s,{filterValues:f}=l.colFilter;Jt(i,f,S=>n(1,r=S));function m(S){i.$$.not_equal(r.name,S)&&(r.name=S,f.set(r))}function g(S){i.$$.not_equal(r.features,S)&&(r.features=S,f.set(r))}const w=()=>{vr(f,r.name="",r),vr(f,r.features=[],r)};return i.$$set=S=>{"tableModel"in S&&n(0,s=S.tableModel)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=Object.values({...r}).some(S=>S.length>0||typeof S=="string"&&S.length>0))},[s,r,o,t,f,m,g,w]}class _G extends Xe{constructor(e){super(),Je(this,e,pG,mG,Ze,{tableModel:0})}}function gG(i){let e,n;return e=new Cx({props:{placeholder:"Select page size"}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function vG(i){let e;return{c(){e=lt("10")},l(n){e=ct(n,"10")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function bG(i){let e;return{c(){e=lt("20")},l(n){e=ct(n,"20")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function yG(i){let e;return{c(){e=lt("30")},l(n){e=ct(n,"30")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function wG(i){let e;return{c(){e=lt("40")},l(n){e=ct(n,"40")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function xG(i){let e;return{c(){e=lt("50")},l(n){e=ct(n,"50")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function kG(i){let e,n,t,r,s,o,a,l,f,m;return e=new po({props:{value:"10",$$slots:{default:[vG]},$$scope:{ctx:i}}}),t=new po({props:{value:"20",$$slots:{default:[bG]},$$scope:{ctx:i}}}),s=new po({props:{value:"30",$$slots:{default:[yG]},$$scope:{ctx:i}}}),a=new po({props:{value:"40",$$slots:{default:[wG]},$$scope:{ctx:i}}}),f=new po({props:{value:"50",$$slots:{default:[xG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),H(s.$$.fragment),o=ke(),H(a.$$.fragment),l=ke(),H(f.$$.fragment)},l(g){W(e.$$.fragment,g),n=Ce(g),W(t.$$.fragment,g),r=Ce(g),W(s.$$.fragment,g),o=Ce(g),W(a.$$.fragment,g),l=Ce(g),W(f.$$.fragment,g)},m(g,w){G(e,g,w),N(g,n,w),G(t,g,w),N(g,r,w),G(s,g,w),N(g,o,w),G(a,g,w),N(g,l,w),G(f,g,w),m=!0},p(g,w){const S={};w&1048576&&(S.$$scope={dirty:w,ctx:g}),e.$set(S);const M={};w&1048576&&(M.$$scope={dirty:w,ctx:g}),t.$set(M);const $={};w&1048576&&($.$$scope={dirty:w,ctx:g}),s.$set($);const D={};w&1048576&&(D.$$scope={dirty:w,ctx:g}),a.$set(D);const F={};w&1048576&&(F.$$scope={dirty:w,ctx:g}),f.$set(F)},i(g){m||(E(e.$$.fragment,g),E(t.$$.fragment,g),E(s.$$.fragment,g),E(a.$$.fragment,g),E(f.$$.fragment,g),m=!0)},o(g){P(e.$$.fragment,g),P(t.$$.fragment,g),P(s.$$.fragment,g),P(a.$$.fragment,g),P(f.$$.fragment,g),m=!1},d(g){g&&(I(n),I(r),I(o),I(l)),Z(e,g),Z(t,g),Z(s,g),Z(a,g),Z(f,g)}}}function CG(i){let e,n,t,r;return e=new xx({props:{class:"w-[180px]",$$slots:{default:[gG]},$$scope:{ctx:i}}}),t=new wx({props:{$$slots:{default:[kG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&1048576&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&1048576&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function TG(i){let e,n="Go to first page",t,r,s;return r=new _w({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ke(),H(r.$$.fragment),this.h()},l(o){e=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-lc32pz"&&(e.textContent=n),t=Ce(o),W(r.$$.fragment,o),this.h()},h(){oe(e,"class","sr-only")},m(o,a){N(o,e,a),N(o,t,a),G(r,o,a),s=!0},p:Ct,i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(r,o)}}}function SG(i){let e,n="Go to previous page",t,r,s;return r=new hw({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ke(),H(r.$$.fragment),this.h()},l(o){e=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-2don1e"&&(e.textContent=n),t=Ce(o),W(r.$$.fragment,o),this.h()},h(){oe(e,"class","sr-only")},m(o,a){N(o,e,a),N(o,t,a),G(r,o,a),s=!0},p:Ct,i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(r,o)}}}function EG(i){let e,n="Go to next page",t,r,s;return r=new mw({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ke(),H(r.$$.fragment),this.h()},l(o){e=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-10zd0e2"&&(e.textContent=n),t=Ce(o),W(r.$$.fragment,o),this.h()},h(){oe(e,"class","sr-only")},m(o,a){N(o,e,a),N(o,t,a),G(r,o,a),s=!0},p:Ct,i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(r,o)}}}function IG(i){let e,n="Go to last page",t,r,s;return r=new gw({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ke(),H(r.$$.fragment),this.h()},l(o){e=ue(o,"SPAN",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-17pj58n"&&(e.textContent=n),t=Ce(o),W(r.$$.fragment,o),this.h()},h(){oe(e,"class","sr-only")},m(o,a){N(o,e,a),N(o,t,a),G(r,o,a),s=!0},p:Ct,i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(r,o)}}}function PG(i){let e,n,t,r="Rows per page",s,o,a,l,f,m=i[0]+1+"",g,w,S,M,$,D,F,L,U,ne,se,ee,fe;return o=new kx({props:{onSelectedChange:i[14],selected:{value:10,label:"10"},$$slots:{default:[CG]},$$scope:{ctx:i}}}),D=new Cr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[TG]},$$scope:{ctx:i}}}),D.$on("click",i[15]),L=new Cr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[SG]},$$scope:{ctx:i}}}),L.$on("click",i[16]),ne=new Cr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[EG]},$$scope:{ctx:i}}}),ne.$on("click",i[17]),ee=new Cr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[IG]},$$scope:{ctx:i}}}),ee.$on("click",i[18]),{c(){e=ce("div"),n=ce("div"),t=ce("p"),t.textContent=r,s=ke(),H(o.$$.fragment),a=ke(),l=ce("div"),f=lt("Page "),g=lt(m),w=lt(" of "),S=lt(i[1]),M=ke(),$=ce("div"),H(D.$$.fragment),F=ke(),H(L.$$.fragment),U=ke(),H(ne.$$.fragment),se=ke(),H(ee.$$.fragment),this.h()},l(_e){e=ue(_e,"DIV",{class:!0});var re=we(e);n=ue(re,"DIV",{class:!0});var de=we(n);t=ue(de,"P",{class:!0,"data-svelte-h":!0}),Rn(t)!=="svelte-opj3eb"&&(t.textContent=r),s=Ce(de),W(o.$$.fragment,de),de.forEach(I),a=Ce(re),l=ue(re,"DIV",{class:!0});var he=we(l);f=ct(he,"Page "),g=ct(he,m),w=ct(he," of "),S=ct(he,i[1]),he.forEach(I),M=Ce(re),$=ue(re,"DIV",{class:!0});var X=we($);W(D.$$.fragment,X),F=Ce(X),W(L.$$.fragment,X),U=Ce(X),W(ne.$$.fragment,X),se=Ce(X),W(ee.$$.fragment,X),X.forEach(I),re.forEach(I),this.h()},h(){oe(t,"class","text-sm font-medium"),oe(n,"class","flex items-center space-x-2"),oe(l,"class","flex w-[100px] items-center justify-center text-sm font-medium"),oe($,"class","flex items-center space-x-2"),oe(e,"class","flex items-center space-x-6 lg:space-x-8 flex-wrap gap-2")},m(_e,re){N(_e,e,re),me(e,n),me(n,t),me(n,s),G(o,n,null),me(e,a),me(e,l),me(l,f),me(l,g),me(l,w),me(l,S),me(e,M),me(e,$),G(D,$,null),me($,F),G(L,$,null),me($,U),G(ne,$,null),me($,se),G(ee,$,null),fe=!0},p(_e,[re]){const de={};re&1048576&&(de.$$scope={dirty:re,ctx:_e}),o.$set(de),(!fe||re&1)&&m!==(m=_e[0]+1+"")&&cn(g,m),(!fe||re&2)&&cn(S,_e[1]);const he={};re&4&&(he.disabled=!_e[2]),re&1048576&&(he.$$scope={dirty:re,ctx:_e}),D.$set(he);const X={};re&4&&(X.disabled=!_e[2]),re&1048576&&(X.$$scope={dirty:re,ctx:_e}),L.$set(X);const j={};re&8&&(j.disabled=!_e[3]),re&1048576&&(j.$$scope={dirty:re,ctx:_e}),ne.$set(j);const xe={};re&8&&(xe.disabled=!_e[3]),re&1048576&&(xe.$$scope={dirty:re,ctx:_e}),ee.$set(xe)},i(_e){fe||(E(o.$$.fragment,_e),E(D.$$.fragment,_e),E(L.$$.fragment,_e),E(ne.$$.fragment,_e),E(ee.$$.fragment,_e),fe=!0)},o(_e){P(o.$$.fragment,_e),P(D.$$.fragment,_e),P(L.$$.fragment,_e),P(ne.$$.fragment,_e),P(ee.$$.fragment,_e),fe=!1},d(_e){_e&&I(e),Z(o),Z(D),Z(L),Z(ne),Z(ee)}}}function $G(i,e,n){let t,r,s,o,a,l,{tableModel:f}=e;const{pageRows:m,pluginStates:g,rows:w}=f;Jt(i,m,fe=>n(5,l=fe)),Jt(i,w,fe=>n(4,a=fe));const{hasNextPage:S,hasPreviousPage:M,pageIndex:$,pageCount:D,pageSize:F}=g.page;Jt(i,S,fe=>n(3,o=fe)),Jt(i,M,fe=>n(2,s=fe)),Jt(i,$,fe=>n(0,t=fe)),Jt(i,D,fe=>n(1,r=fe));const L=fe=>F.set(Number(fe==null?void 0:fe.value)),U=()=>vr($,t=0,t),ne=()=>vr($,t=t-1,t),se=()=>vr($,t=t+1,t),ee=()=>vr($,t=Math.ceil(a.length/l.length)-1,t);return i.$$set=fe=>{"tableModel"in fe&&n(13,f=fe.tableModel)},[t,r,s,o,a,l,m,w,S,M,$,D,F,f,L,U,ne,se,ee]}class AG extends Xe{constructor(e){super(),Je(this,e,$G,PG,Ze,{tableModel:13})}}function my(i,e,n){const t=i.slice();return t[9]=e[n],t}function py(i,e,n){const t=i.slice();return t[9]=e[n],t}function _y(i){let e,n,t,r,s,o,a,l;e=new To({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new Wo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[MG]},$$scope:{ctx:i}}});const f=[OG,DG],m=[];function g(w,S){return w[0].length>2?0:1}return o=g(i),a=m[o]=f[o](i),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),s=ce("div"),a.c(),this.h()},l(w){W(e.$$.fragment,w),n=Ce(w),W(t.$$.fragment,w),r=Ce(w),s=ue(w,"DIV",{class:!0});var S=we(s);a.l(S),S.forEach(I),this.h()},h(){oe(s,"class","hidden space-x-1 lg:flex")},m(w,S){G(e,w,S),N(w,n,S),G(t,w,S),N(w,r,S),N(w,s,S),m[o].m(s,null),l=!0},p(w,S){const M={};S&32769&&(M.$$scope={dirty:S,ctx:w}),t.$set(M);let $=o;o=g(w),o===$?m[o].p(w,S):(It(),P(m[$],1,1,()=>{m[$]=null}),Pt(),a=m[o],a?a.p(w,S):(a=m[o]=f[o](w),a.c()),E(a,1),a.m(s,null))},i(w){l||(E(e.$$.fragment,w),E(t.$$.fragment,w),E(a),l=!0)},o(w){P(e.$$.fragment,w),P(t.$$.fragment,w),P(a),l=!1},d(w){w&&(I(n),I(r),I(s)),Z(e,w),Z(t,w),m[o].d()}}}function MG(i){let e=i[0].length+"",n;return{c(){n=lt(e)},l(t){n=ct(t,e)},m(t,r){N(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&cn(n,e)},d(t){t&&I(n)}}}function DG(i){let e,n,t=kn(i[0]),r=[];for(let o=0;o<t.length;o+=1)r[o]=gy(py(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&1){t=kn(o[0]);let l;for(l=0;l<t.length;l+=1){const f=py(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=gy(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function OG(i){let e,n;return e=new Wo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[RG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function zG(i){let e=i[9]+"",n,t;return{c(){n=lt(e),t=ke()},l(r){n=ct(r,e),t=Ce(r)},m(r,s){N(r,n,s),N(r,t,s)},p(r,s){s&1&&e!==(e=r[9]+"")&&cn(n,e)},d(r){r&&(I(n),I(t))}}}function gy(i){let e,n;return e=new Wo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[zG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function RG(i){let e=i[0].length+"",n,t;return{c(){n=lt(e),t=lt(" Selected")},l(r){n=ct(r,e),t=ct(r," Selected")},m(r,s){N(r,n,s),N(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&cn(n,e)},d(r){r&&(I(n),I(t))}}}function LG(i){let e,n,t,r,s,o;e=new dp({props:{class:"mr-2 h-4 w-4"}});let a=i[0].length>0&&_y(i);return{c(){H(e.$$.fragment),n=ke(),t=lt(i[1]),r=ke(),a&&a.c(),s=Le()},l(l){W(e.$$.fragment,l),n=Ce(l),t=ct(l,i[1]),r=Ce(l),a&&a.l(l),s=Le()},m(l,f){G(e,l,f),N(l,n,f),N(l,t,f),N(l,r,f),a&&a.m(l,f),N(l,s,f),o=!0},p(l,f){(!o||f&2)&&cn(t,l[1]),l[0].length>0?a?(a.p(l,f),f&1&&E(a,1)):(a=_y(l),a.c(),E(a,1),a.m(s.parentNode,s)):a&&(It(),P(a,1,1,()=>{a=null}),Pt())},i(l){o||(E(e.$$.fragment,l),E(a),o=!0)},o(l){P(e.$$.fragment,l),P(a),o=!1},d(l){l&&(I(n),I(t),I(r),I(s)),Z(e,l),a&&a.d(l)}}}function FG(i){let e,n;return e=new Cr({props:{builders:[i[12]],variant:"outline",size:"sm",class:"h-8 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[LG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&32771&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function BG(i){let e;return{c(){e=lt("No results found.")},l(n){e=ct(n,"No results found.")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function vy(i){let e,n=i[3][i[9]]+"",t;return{c(){e=ce("span"),t=lt(n),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=we(e);t=ct(s,n),s.forEach(I),this.h()},h(){oe(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){N(r,e,s),me(e,t)},p(r,s){s&12&&n!==(n=r[3][r[9]]+"")&&cn(t,n)},d(r){r&&I(e)}}}function NG(i){let e,n,t,r,s,o=i[9]+"",a,l,f,m;n=new hp({props:{className:Et("h-4 w-4")}});let g=i[3][i[9]]&&vy(i);return{c(){e=ce("div"),H(n.$$.fragment),r=ke(),s=ce("span"),a=lt(o),l=ke(),g&&g.c(),f=ke(),this.h()},l(w){e=ue(w,"DIV",{class:!0});var S=we(e);W(n.$$.fragment,S),S.forEach(I),r=Ce(w),s=ue(w,"SPAN",{});var M=we(s);a=ct(M,o),M.forEach(I),l=Ce(w),g&&g.l(w),f=Ce(w),this.h()},h(){oe(e,"class",t=Et("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m(w,S){N(w,e,S),G(n,e,null),N(w,r,S),N(w,s,S),me(s,a),N(w,l,S),g&&g.m(w,S),N(w,f,S),m=!0},p(w,S){(!m||S&5&&t!==(t=Et("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",w[0].includes(w[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&oe(e,"class",t),(!m||S&4)&&o!==(o=w[9]+"")&&cn(a,o),w[3][w[9]]?g?g.p(w,S):(g=vy(w),g.c(),g.m(f.parentNode,f)):g&&(g.d(1),g=null)},i(w){m||(E(n.$$.fragment,w),m=!0)},o(w){P(n.$$.fragment,w),m=!1},d(w){w&&(I(e),I(r),I(s),I(l),I(f)),Z(n),g&&g.d(w)}}}function by(i){let e,n;return e=new Dc({props:{class:"cursor-pointer",value:i[9],onSelect:i[6],$$slots:{default:[NG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[9]),r&32781&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function VG(i){let e,n,t=kn(i[2]),r=[];for(let o=0;o<t.length;o+=1)r[o]=by(my(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&45){t=kn(o[2]);let l;for(l=0;l<t.length;l+=1){const f=my(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=by(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function yy(i){let e,n,t,r;return e=new jp({}),t=new Dc({props:{class:"justify-center text-center cursor-pointer",onSelect:i[7],$$slots:{default:[jG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&1&&(a.onSelect=s[7]),o&32768&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function jG(i){let e;return{c(){e=lt("Clear Filter")},l(n){e=ct(n,"Clear Filter")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function UG(i){let e,n,t,r,s,o;e=new Lp({props:{$$slots:{default:[BG]},$$scope:{ctx:i}}}),t=new Fp({props:{$$slots:{default:[VG]},$$scope:{ctx:i}}});let a=i[0].length>0&&yy(i);return{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke(),a&&a.c(),s=Le()},l(l){W(e.$$.fragment,l),n=Ce(l),W(t.$$.fragment,l),r=Ce(l),a&&a.l(l),s=Le()},m(l,f){G(e,l,f),N(l,n,f),G(t,l,f),N(l,r,f),a&&a.m(l,f),N(l,s,f),o=!0},p(l,f){const m={};f&32768&&(m.$$scope={dirty:f,ctx:l}),e.$set(m);const g={};f&32781&&(g.$$scope={dirty:f,ctx:l}),t.$set(g),l[0].length>0?a?(a.p(l,f),f&1&&E(a,1)):(a=yy(l),a.c(),E(a,1),a.m(s.parentNode,s)):a&&(It(),P(a,1,1,()=>{a=null}),Pt())},i(l){o||(E(e.$$.fragment,l),E(t.$$.fragment,l),E(a),o=!0)},o(l){P(e.$$.fragment,l),P(t.$$.fragment,l),P(a),o=!1},d(l){l&&(I(n),I(r),I(s)),Z(e,l),Z(t,l),a&&a.d(l)}}}function qG(i){let e,n,t,r;return e=new Np({props:{placeholder:i[1]}}),t=new Vp({props:{$$slots:{default:[UG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&2&&(a.placeholder=s[1]),e.$set(a);const l={};o&32781&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function HG(i){let e,n;return e=new Rp({props:{loop:!0,$$slots:{default:[qG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function GG(i){let e,n,t,r;return e=new Hp({props:{asChild:!0,$$slots:{default:[FG,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new Up({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[HG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&36867&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&32783&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function ZG(i){let e,n,t;function r(o){i[8](o)}let s={$$slots:{default:[GG]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.open=i[4]),e=new qp({props:s}),Nt.push(()=>Zn(e,"open",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,[a]){const l={};a&32783&&(l.$$scope={dirty:a,ctx:o}),!n&&a&16&&(n=!0,l.open=o[4],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function WG(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{options:s}=e,{counts:o={}}=e,a=!1;const l=w=>{Array.isArray(t)&&t.includes(w)?n(0,t=t.filter(S=>S!==w)):n(0,t=[...Array.isArray(t)?t:[],w])},f=w=>{l(w)},m=()=>{n(0,t=[])};function g(w){a=w,n(4,a)}return i.$$set=w=>{"filterValues"in w&&n(0,t=w.filterValues),"title"in w&&n(1,r=w.title),"options"in w&&n(2,s=w.options),"counts"in w&&n(3,o=w.counts)},[t,r,s,o,a,l,f,m,g]}class KG extends Xe{constructor(e){super(),Je(this,e,WG,ZG,Ze,{filterValues:0,title:1,options:2,counts:3})}}function wy(i,e,n){const t=i.slice();return t[9]=e[n],t[10]=e,t[11]=n,t}function XG(i){let e,n,t;return e=new vw({props:{class:"mr-2 h-4 w-4"}}),{c(){H(e.$$.fragment),n=lt(`
			View`)},l(r){W(e.$$.fragment,r),n=ct(r,`
			View`)},m(r,s){G(e,r,s),N(r,n,s),t=!0},p:Ct,i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function JG(i){let e,n;return e=new Cr({props:{variant:"outline",size:"sm",class:"h-8 flex hover:bg-accent hover:text-accent-foreground bg-background",builders:[i[12]],$$slots:{default:[XG]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&8192&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function YG(i){let e;return{c(){e=lt("Toggle columns")},l(n){e=ct(n,"Toggle columns")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function QG(i){let e,n,t;function r(o){i[5](o,i[9])}let s={$$slots:{default:[eZ]},$$scope:{ctx:i}};return i[0][i[9].id]!==void 0&&(s.checked=i[0][i[9].id]),e=new bx({props:s}),Nt.push(()=>Zn(e,"checked",r)),{c(){H(e.$$.fragment)},l(o){W(e.$$.fragment,o)},m(o,a){G(e,o,a),t=!0},p(o,a){i=o;const l={};a&8192&&(l.$$scope={dirty:a,ctx:i}),!n&&a&3&&(n=!0,l.checked=i[0][i[9].id],Gn(()=>n=!1)),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){Z(e,o)}}}function eZ(i){let e=i[9].header+"",n,t;return{c(){n=lt(e),t=ke()},l(r){n=ct(r,e),t=Ce(r)},m(r,s){N(r,n,s),N(r,t,s)},p:Ct,d(r){r&&(I(n),I(t))}}}function xy(i){let e=i[3].includes(i[9].id),n,t,r=e&&QG(i);return{c(){r&&r.c(),n=Le()},l(s){r&&r.l(s),n=Le()},m(s,o){r&&r.m(s,o),N(s,n,o),t=!0},p(s,o){e&&r.p(s,o)},i(s){t||(E(r),t=!0)},o(s){P(r),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function tZ(i){let e,n,t,r,s,o;e=new gx({props:{$$slots:{default:[YG]},$$scope:{ctx:i}}}),t=new vx({});let a=kn(i[1]),l=[];for(let m=0;m<a.length;m+=1)l[m]=xy(wy(i,a,m));const f=m=>P(l[m],1,1,()=>{l[m]=null});return{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment),r=ke();for(let m=0;m<l.length;m+=1)l[m].c();s=Le()},l(m){W(e.$$.fragment,m),n=Ce(m),W(t.$$.fragment,m),r=Ce(m);for(let g=0;g<l.length;g+=1)l[g].l(m);s=Le()},m(m,g){G(e,m,g),N(m,n,g),G(t,m,g),N(m,r,g);for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(m,g);N(m,s,g),o=!0},p(m,g){const w={};if(g&8192&&(w.$$scope={dirty:g,ctx:m}),e.$set(w),g&11){a=kn(m[1]);let S;for(S=0;S<a.length;S+=1){const M=wy(m,a,S);l[S]?(l[S].p(M,g),E(l[S],1)):(l[S]=xy(M),l[S].c(),E(l[S],1),l[S].m(s.parentNode,s))}for(It(),S=a.length;S<l.length;S+=1)f(S);Pt()}},i(m){if(!o){E(e.$$.fragment,m),E(t.$$.fragment,m);for(let g=0;g<a.length;g+=1)E(l[g]);o=!0}},o(m){P(e.$$.fragment,m),P(t.$$.fragment,m),l=l.filter(Boolean);for(let g=0;g<l.length;g+=1)P(l[g]);o=!1},d(m){m&&(I(n),I(r),I(s)),Z(e,m),Z(t,m),fs(l,m)}}}function nZ(i){let e,n,t,r;return e=new _f({props:{asChild:!0,$$slots:{default:[JG,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new mf({props:{$$slots:{default:[tZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&12288&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const l={};o&8193&&(l.$$scope={dirty:o,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function iZ(i){let e,n;return e=new pf({props:{$$slots:{default:[nZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&8193&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function rZ(i,e,n){let t,{tableModel:r}=e;const{pluginStates:s,flatColumns:o}=r,{hiddenColumnIds:a}=s.hide;Jt(i,a,w=>n(6,t=w));const l=o.map(w=>w.id);let f=Object.fromEntries(l.map(w=>[w,!0]));const m=["name","features"];function g(w,S){i.$$.not_equal(f[S.id],w)&&(f[S.id]=w,n(0,f))}return i.$$set=w=>{"tableModel"in w&&n(4,r=w.tableModel)},i.$$.update=()=>{i.$$.dirty&1&&vr(a,t=Object.entries(f).filter(([,w])=>!w).map(([w])=>w),t)},[f,o,a,m,r,g]}class sZ extends Xe{constructor(e){super(),Je(this,e,rZ,iZ,Ze,{tableModel:4})}}function ky(i,e,n){const t=i.slice();return t[15]=e[n],t}function Cy(i,e,n){const t=i.slice();return t[19]=e[n],t}function Ty(i,e,n){const t=i.slice();return t[23]=e[n],t}function Sy(i,e,n){const t=i.slice();return t[19]=e[n],t}function oZ(i){let e,n;return e=new hf({props:{of:i[19].render()}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.of=t[19].render()),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function aZ(i){let e,n;return e=new dG({props:{props:i[28],$$slots:{default:[oZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&268435456&&(s.props=t[28]),r&536870916&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function lZ(i){let e,n,t;const r=[i[22]];let s={$$slots:{default:[aZ]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return e=new cx({props:s}),{c(){H(e.$$.fragment),n=ke()},l(o){W(e.$$.fragment,o),n=Ce(o)},m(o,a){G(e,o,a),N(o,n,a),t=!0},p(o,a){const l=a&4194304?at(r,[dn(o[22])]):{};a&805306372&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){o&&I(n),Z(e,o)}}}function Ey(i,e){let n,t,r;return t=new Ko({props:{attrs:e[19].attrs(),props:e[19].props(),$$slots:{default:[lZ,({attrs:s,props:o})=>({22:s,28:o}),({attrs:s,props:o})=>(s?4194304:0)|(o?268435456:0)]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&4&&(a.attrs=e[19].attrs()),o&4&&(a.props=e[19].props()),o&809500676&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function cZ(i){let e=[],n=new Map,t,r,s=kn(i[23].cells);const o=a=>a[19].id;for(let a=0;a<s.length;a+=1){let l=Sy(i,s,a),f=o(l);n.set(f,e[a]=Ey(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&272629764&&(s=kn(a[23].cells),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,Ey,t,Sy),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function uZ(i){let e,n,t;return e=new wh({props:{$$slots:{default:[cZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment),n=ke()},l(r){W(e.$$.fragment,r),n=Ce(r)},m(r,s){G(e,r,s),N(r,n,s),t=!0},p(r,s){const o={};s&536870916&&(o.$$scope={dirty:s,ctx:r}),e.$set(o)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){r&&I(n),Z(e,r)}}}function Iy(i){let e,n;return e=new Ko({props:{rowAttrs:i[23].attrs(),$$slots:{default:[uZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.rowAttrs=t[23].attrs()),r&536870916&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function fZ(i){let e,n,t=kn(i[2]),r=[];for(let o=0;o<t.length;o+=1)r[o]=Iy(Ty(i,t,o));const s=o=>P(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Le()},l(o){for(let a=0;a<r.length;a+=1)r[a].l(o);e=Le()},m(o,a){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(o,a);N(o,e,a),n=!0},p(o,a){if(a&272629764){t=kn(o[2]);let l;for(l=0;l<t.length;l+=1){const f=Ty(o,t,l);r[l]?(r[l].p(f,a),E(r[l],1)):(r[l]=Iy(f),r[l].c(),E(r[l],1),r[l].m(e.parentNode,e))}for(It(),l=t.length;l<r.length;l+=1)s(l);Pt()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)E(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)P(r[a]);n=!1},d(o){o&&I(e),fs(r,o)}}}function dZ(i){let e,n;return e=new hf({props:{of:i[19].render()}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.of=t[19].render()),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function hZ(i){let e,n,t;const r=[i[22]];let s={$$slots:{default:[dZ]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)s=Q(s,r[o]);return e=new lx({props:s}),{c(){H(e.$$.fragment),n=ke()},l(o){W(e.$$.fragment,o),n=Ce(o)},m(o,a){G(e,o,a),N(o,n,a),t=!0},p(o,a){const l=a&4194304?at(r,[dn(o[22])]):{};a&536870928&&(l.$$scope={dirty:a,ctx:o}),e.$set(l)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){P(e.$$.fragment,o),t=!1},d(o){o&&I(n),Z(e,o)}}}function Py(i,e){let n,t,r;return t=new Ko({props:{attrs:e[19].attrs(),$$slots:{default:[hZ,({attrs:s})=>({22:s}),({attrs:s})=>s?4194304:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&16&&(a.attrs=e[19].attrs()),o&541065232&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function mZ(i){let e=[],n=new Map,t,r,s=kn(i[15].cells);const o=a=>a[19].id;for(let a=0;a<s.length;a+=1){let l=Cy(i,s,a),f=o(l);n.set(f,e[a]=Py(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&4194320&&(s=kn(a[15].cells),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,Py,t,Cy),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function pZ(i){let e,n,t;const r=[i[18],{class:"cursor-pointer"}];function s(){return i[12](i[15])}let o={$$slots:{default:[mZ]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)o=Q(o,r[a]);return e=new wh({props:o}),e.$on("click",s),{c(){H(e.$$.fragment),n=ke()},l(a){W(e.$$.fragment,a),n=Ce(a)},m(a,l){G(e,a,l),N(a,n,l),t=!0},p(a,l){i=a;const f=l&262144?at(r,[dn(i[18]),r[1]]):{};l&536870928&&(f.$$scope={dirty:l,ctx:i}),e.$set(f)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){a&&I(n),Z(e,a)}}}function $y(i,e){let n,t,r;return t=new Ko({props:{rowAttrs:e[15].attrs(),$$slots:{default:[pZ,({rowAttrs:s})=>({18:s}),({rowAttrs:s})=>s?262144:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Le(),H(t.$$.fragment),this.h()},l(s){n=Le(),W(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,o){N(s,n,o),G(t,s,o),r=!0},p(s,o){e=s;const a={};o&16&&(a.rowAttrs=e[15].attrs()),o&537133072&&(a.$$scope={dirty:o,ctx:e}),t.$set(a)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(t,s)}}}function _Z(i){let e=[],n=new Map,t,r,s=kn(i[4]);const o=a=>a[15].id;for(let a=0;a<s.length;a+=1){let l=ky(i,s,a),f=o(l);n.set(f,e[a]=$y(f,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Le()},l(a){for(let l=0;l<e.length;l+=1)e[l].l(a);t=Le()},m(a,l){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,l);N(a,t,l),r=!0},p(a,l){l&4456496&&(s=kn(a[4]),It(),e=Sr(e,l,o,1,a,s,n,t.parentNode,Mr,$y,t,ky),Pt())},i(a){if(!r){for(let l=0;l<s.length;l+=1)E(e[l]);r=!0}},o(a){for(let l=0;l<e.length;l+=1)P(e[l]);r=!1},d(a){a&&I(t);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function gZ(i){let e,n,t,r;e=new ux({props:{$$slots:{default:[fZ]},$$scope:{ctx:i}}});const s=[i[3]];let o={$$slots:{default:[_Z]},$$scope:{ctx:i}};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return t=new ax({props:o}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(a){W(e.$$.fragment,a),n=Ce(a),W(t.$$.fragment,a)},m(a,l){G(e,a,l),N(a,n,l),G(t,a,l),r=!0},p(a,l){const f={};l&536870916&&(f.$$scope={dirty:l,ctx:a}),e.$set(f);const m=l&8?at(s,[dn(a[3])]):{};l&536870928&&(m.$$scope={dirty:l,ctx:a}),t.$set(m)},i(a){r||(E(e.$$.fragment,a),E(t.$$.fragment,a),r=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),r=!1},d(a){a&&I(n),Z(e,a),Z(t,a)}}}function vZ(i){let e,n;return e=new AG({props:{tableModel:i[6]}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:Ct,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function bZ(i){let e,n="No POIs in Favourites…";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-cqoewt"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-center text-xl")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function yZ(i){let e,n,t,r,s,o,a,l,f;n=new _G({props:{tableModel:i[6]}});const m=[i[1]];let g={$$slots:{default:[gZ]},$$scope:{ctx:i}};for(let $=0;$<m.length;$+=1)g=Q(g,m[$]);s=new ox({props:g});const w=[bZ,vZ],S=[];function M($,D){return $[0].length===0?0:1}return a=M(i),l=S[a]=w[a](i),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),r=ce("div"),H(s.$$.fragment),o=ke(),l.c(),this.h()},l($){e=ue($,"DIV",{class:!0});var D=we(e);W(n.$$.fragment,D),t=Ce(D),r=ue(D,"DIV",{class:!0});var F=we(r);W(s.$$.fragment,F),F.forEach(I),o=Ce(D),l.l(D),D.forEach(I),this.h()},h(){oe(r,"class","rounded-md border"),oe(e,"class","space-y-4")},m($,D){N($,e,D),G(n,e,null),me(e,t),me(e,r),G(s,r,null),me(e,o),S[a].m(e,null),f=!0},p($,[D]){const F=D&2?at(m,[dn($[1])]):{};D&536870940&&(F.$$scope={dirty:D,ctx:$}),s.$set(F);let L=a;a=M($),a===L?S[a].p($,D):(It(),P(S[L],1,1,()=>{S[L]=null}),Pt(),l=S[a],l?l.p($,D):(l=S[a]=w[a]($),l.c()),E(l,1),l.m(e,null))},i($){f||(E(n.$$.fragment,$),E(s.$$.fragment,$),E(l),f=!0)},o($){P(n.$$.fragment,$),P(s.$$.fragment,$),P(l),f=!1},d($){$&&I(e),Z(n),Z(s),S[a].d()}}}function wZ(i,e,n){let t,r,s,o,{data:a}=e,{removeFavourite:l}=e;const f=sx(As(a),{sort:_x({toggleOrder:["asc","desc"]}),page:mx(),colFilter:dx(),hide:hx()}),m=f.createColumns([f.column({accessor:"name",header:"Name",id:"name",cell:({value:L,row:U})=>U.isData()?Hu(dy,{value:L}):L,plugins:{colFilter:{fn:({filterValue:L,value:U})=>U.toLowerCase().includes(L.toLowerCase()),initialFilterValue:"",render:({filterValue:L})=>wr(L)}}}),f.column({accessor:"features",header:"Features",id:"features",cell:({value:L,row:U})=>U.isData()?Hu(dy,{value:L.join(", ")}):L.join(""),plugins:{colFilter:{fn:({filterValue:L,value:U})=>L.length===0||!Array.isArray(L)?!0:L.some(ne=>U.includes(ne)),initialFilterValue:[],render:({filterValue:L})=>wr(L)},sort:{disable:!0}}}),f.display({id:"actions",header:()=>"",cell:({row:L})=>L.isData()&&L.original?Hu(YH,{row:L.original,rowId:parseInt(L.id),removeFavourite:l}):"",plugins:{sort:{disable:!0}}})]),g=L=>L.original,w=f.createViewModel(m),{headerRows:S,pageRows:M,tableAttrs:$,tableBodyAttrs:D}=w;Jt(i,S,L=>n(2,r=L)),Jt(i,M,L=>n(4,o=L)),Jt(i,$,L=>n(1,t=L)),Jt(i,D,L=>n(3,s=L));const F=L=>il("/app?focus-poi="+encodeURIComponent(g(L).id));return i.$$set=L=>{"data"in L&&n(0,a=L.data),"removeFavourite"in L&&n(11,l=L.removeFavourite)},[a,t,r,s,o,g,w,S,M,$,D,l,F]}class xZ extends Xe{constructor(e){super(),Je(this,e,wZ,yZ,Ze,{data:0,removeFavourite:11})}}function kZ(i){let e;return{c(){e=lt("Favourites")},l(n){e=ct(n,"Favourites")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function CZ(i){let e,n,t,r;return e=new Co({props:{class:"mb-3",$$slots:{default:[kZ]},$$scope:{ctx:i}}}),t=new To({}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&512&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function TZ(i){let e,n;return e=new xZ({props:{data:i[3],removeFavourite:i[0]}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.data=t[3]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function SZ(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","grow flex items-center justify-center")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function EZ(i){let e,n,t,r;const s=[SZ,TZ],o=[];function a(l,f){return l[4]?0:1}return e=a(i),n=o[e]=s[e](i),{c(){n.c(),t=Le()},l(l){n.l(l),t=Le()},m(l,f){o[e].m(l,f),N(l,t,f),r=!0},p(l,f){let m=e;e=a(l),e===m?o[e].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),n=o[e],n?n.p(l,f):(n=o[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){P(n),r=!1},d(l){l&&I(t),o[e].d(l)}}}function IZ(i){let e,n,t,r,s;return n=new ws({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[CZ]},$$scope:{ctx:i}}}),r=new ts({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[2]}px);`,$$slots:{default:[EZ]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),H(r.$$.fragment)},l(o){e=ue(o,"DIV",{});var a=we(e);W(n.$$.fragment,a),a.forEach(I),t=Ce(o),W(r.$$.fragment,o)},m(o,a){N(o,e,a),G(n,e,null),i[7](e),N(o,t,a),G(r,o,a),s=!0},p(o,a){const l={};a&512&&(l.$$scope={dirty:a,ctx:o}),n.$set(l);const f={};a&4&&(f.style=`height: calc(100% - ${o[2]}px);`),a&536&&(f.$$scope={dirty:a,ctx:o}),r.$set(f)},i(o){s||(E(n.$$.fragment,o),E(r.$$.fragment,o),s=!0)},o(o){P(n.$$.fragment,o),P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(n),i[7](null),Z(r,o)}}}function PZ(i){let e,n,t,r,s;return n=new or({props:{class:"relative p-4 h-full",$$slots:{default:[IZ]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(o){e=ue(o,"DIV",{class:!0});var a=we(e);W(n.$$.fragment,a),a.forEach(I),this.h()},h(){oe(e,"class","flex flex-col p-4 relative h-full")},m(o,a){N(o,e,a),G(n,e,null),t=!0,r||(s=Ke(window,"resize",i[5]),r=!0)},p(o,[a]){const l={};a&542&&(l.$$scope={dirty:a,ctx:o}),n.$set(l)},i(o){t||(E(n.$$.fragment,o),t=!0)},o(o){P(n.$$.fragment,o),t=!1},d(o){o&&I(e),Z(n),r=!1,s()}}}function $Z(i,e,n){let{slug:t}=e,r,s=64;const o=()=>{const w=r.offsetHeight;w!==void 0&&n(2,s=w)};Zi(o);let a=[],l=!0;const f=async()=>{const w=await fetch("/api/favourites");if(w.ok){const S=await w.json(),M=[];S.forEach($=>{const D=ol.decode($);if(th.isRight(D)){const F=D.right;M.push(F)}else console.error("Invalid POI object received from API: ",D.left)}),n(3,a=M),n(4,l=!1)}},m=async w=>{n(4,l=!0);const S=a[w].id,M=await fetch("/api/favourites?poi_id="+encodeURIComponent(S),{method:"DELETE"});M.ok||console.error(await M.json()),await Gi(),f()};Zi(f);function g(w){Nt[w?"unshift":"push"](()=>{r=w,n(1,r)})}return i.$$set=w=>{"slug"in w&&n(6,t=w.slug)},[m,r,s,a,l,o,t,g]}class AZ extends Xe{constructor(e){super(),Je(this,e,$Z,PZ,Ze,{slug:6,removeFavourite:0})}get removeFavourite(){return this.$$.ctx[0]}}function MZ(i){let e,n,t,r,s=[{class:n=Et("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0  file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]],o={};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return{c(){e=ce("input"),this.h()},l(a){e=ue(a,"INPUT",{class:!0}),this.h()},h(){ut(e,o)},m(a,l){N(a,e,l),e.autofocus&&e.focus(),bo(e,i[0]),t||(r=[Ke(e,"input",i[17]),Ke(e,"blur",i[3]),Ke(e,"change",i[4]),Ke(e,"click",i[5]),Ke(e,"focus",i[6]),Ke(e,"focusin",i[7]),Ke(e,"focusout",i[8]),Ke(e,"keydown",i[9]),Ke(e,"keypress",i[10]),Ke(e,"keyup",i[11]),Ke(e,"mouseover",i[12]),Ke(e,"mouseenter",i[13]),Ke(e,"mouseleave",i[14]),Ke(e,"paste",i[15]),Ke(e,"input",i[16])],t=!0)},p(a,[l]){ut(e,o=at(s,[l&2&&n!==(n=Et("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0  file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a[1]))&&{class:n},l&4&&a[2]])),l&1&&e.value!==a[0]&&bo(e,a[0])},i:Ct,o:Ct,d(a){a&&I(e),t=!1,Wn(r)}}}function DZ(i,e,n){const t=["class","value"];let r=Fe(e,t),{class:s=void 0}=e,{value:o=void 0}=e;function a(ee){At.call(this,i,ee)}function l(ee){At.call(this,i,ee)}function f(ee){At.call(this,i,ee)}function m(ee){At.call(this,i,ee)}function g(ee){At.call(this,i,ee)}function w(ee){At.call(this,i,ee)}function S(ee){At.call(this,i,ee)}function M(ee){At.call(this,i,ee)}function $(ee){At.call(this,i,ee)}function D(ee){At.call(this,i,ee)}function F(ee){At.call(this,i,ee)}function L(ee){At.call(this,i,ee)}function U(ee){At.call(this,i,ee)}function ne(ee){At.call(this,i,ee)}function se(){o=this.value,n(0,o)}return i.$$set=ee=>{e=Q(Q({},e),bt(ee)),n(2,r=Fe(e,t)),"class"in ee&&n(1,s=ee.class),"value"in ee&&n(0,o=ee.value)},[o,s,r,a,l,f,m,g,w,S,M,$,D,F,L,U,ne,se]}class Ay extends Xe{constructor(e){super(),Je(this,e,DZ,MZ,Ze,{class:1,value:0})}}function OZ(i){let e,n,t,r,s=[{class:n=Et("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i[1])},{readOnly:i[2]},i[3]],o={};for(let a=0;a<s.length;a+=1)o=Q(o,s[a]);return{c(){e=ce("textarea"),this.h()},l(a){e=ue(a,"TEXTAREA",{class:!0}),we(e).forEach(I),this.h()},h(){ut(e,o)},m(a,l){N(a,e,l),e.autofocus&&e.focus(),bo(e,i[0]),t||(r=[Ke(e,"input",i[16]),Ke(e,"blur",i[4]),Ke(e,"change",i[5]),Ke(e,"click",i[6]),Ke(e,"focus",i[7]),Ke(e,"keydown",i[8]),Ke(e,"keypress",i[9]),Ke(e,"keyup",i[10]),Ke(e,"mouseover",i[11]),Ke(e,"mouseenter",i[12]),Ke(e,"mouseleave",i[13]),Ke(e,"paste",i[14]),Ke(e,"input",i[15])],t=!0)},p(a,[l]){ut(e,o=at(s,[l&2&&n!==(n=Et("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a[1]))&&{class:n},l&4&&{readOnly:a[2]},l&8&&a[3]])),l&1&&bo(e,a[0])},i:Ct,o:Ct,d(a){a&&I(e),t=!1,Wn(r)}}}function zZ(i,e,n){const t=["class","value","readonly"];let r=Fe(e,t),{class:s=void 0}=e,{value:o=void 0}=e,{readonly:a=void 0}=e;function l(se){At.call(this,i,se)}function f(se){At.call(this,i,se)}function m(se){At.call(this,i,se)}function g(se){At.call(this,i,se)}function w(se){At.call(this,i,se)}function S(se){At.call(this,i,se)}function M(se){At.call(this,i,se)}function $(se){At.call(this,i,se)}function D(se){At.call(this,i,se)}function F(se){At.call(this,i,se)}function L(se){At.call(this,i,se)}function U(se){At.call(this,i,se)}function ne(){o=this.value,n(0,o)}return i.$$set=se=>{e=Q(Q({},e),bt(se)),n(3,r=Fe(e,t)),"class"in se&&n(1,s=se.class),"value"in se&&n(0,o=se.value),"readonly"in se&&n(2,a=se.readonly)},[o,s,a,r,l,f,m,g,w,S,M,$,D,F,L,U,ne]}class RZ extends Xe{constructor(e){super(),Je(this,e,zZ,OZ,Ze,{class:1,value:0,readonly:2})}}function LZ(i){let e,n,t,r="Details",s,o,a,l,f,m,g,w,S,M,$,D,F,L,U,ne,se,ee,fe,_e,re,de,he,X,j="Profile Picture",xe,ze,ve,We,pt,Mt="Profile Picture:",St,Dt,zt,_t,ft,Be,Ut;a=new rl({props:{for:"nickname",$$slots:{default:[NZ]},$$scope:{ctx:i}}});function Rt(Oe){i[10](Oe)}let qt={id:"nickname",readonly:i[1]&&void 0,class:"mt-1 block w-full rounded-md shadow-sm focus:border-green-300 "+(i[1]?"bg-card":"bg-muted")};i[0].nickname!==void 0&&(qt.value=i[0].nickname),f=new Ay({props:qt}),Nt.push(()=>Zn(f,"value",Rt));let et=i[2]&&My(i);M=new rl({props:{for:"email",$$slots:{default:[jZ]},$$scope:{ctx:i}}}),D=new Ay({props:{id:"email",type:"text",value:i[0].email,readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm focus:border-green-300 bg-muted"}}),U=new rl({props:{for:"description",$$slots:{default:[UZ]},$$scope:{ctx:i}}});function dt(Oe){i[11](Oe)}let yt={id:"description",rows:5,cols:50,readonly:i[1]&&void 0,class:"mt-1 block w-full rounded-md shadow-sm focus:border-green-300 "+(i[1]?"bg-card":"bg-muted")};i[0].description!==void 0&&(yt.value=i[0].description),se=new RZ({props:yt}),Nt.push(()=>Zn(se,"value",dt));let Ue=!i[1]&&Dy(i),kt=i[1]&&Oy(i);const Ge=[ZZ,GZ],Xt=[];function En(Oe,un){return Oe[0].profile_picture===void 0?0:1}return ze=En(i),ve=Xt[ze]=Ge[ze](i),_t=new qi({props:{variant:"outline",class:"mt-4",$$slots:{default:[YZ]},$$scope:{ctx:i}}}),_t.$on("click",i[8]),{c(){e=ce("div"),n=ce("div"),t=ce("h2"),t.textContent=r,s=ke(),o=ce("div"),H(a.$$.fragment),l=ke(),H(f.$$.fragment),g=ke(),et&&et.c(),w=ke(),S=ce("div"),H(M.$$.fragment),$=ke(),H(D.$$.fragment),F=ke(),L=ce("div"),H(U.$$.fragment),ne=ke(),H(se.$$.fragment),fe=ke(),Ue&&Ue.c(),_e=ke(),kt&&kt.c(),re=ke(),de=ce("div"),he=ce("div"),X=ce("h2"),X.textContent=j,xe=ke(),ve.c(),We=ke(),pt=ce("label"),pt.textContent=Mt,St=ke(),Dt=ce("input"),zt=ke(),H(_t.$$.fragment),this.h()},l(Oe){e=ue(Oe,"DIV",{class:!0});var un=we(e);n=ue(un,"DIV",{class:!0});var qn=we(n);t=ue(qn,"H2",{class:!0,"data-svelte-h":!0}),Rn(t)!=="svelte-mri6fi"&&(t.textContent=r),s=Ce(qn),o=ue(qn,"DIV",{});var _n=we(o);W(a.$$.fragment,_n),l=Ce(_n),W(f.$$.fragment,_n),g=Ce(_n),et&&et.l(_n),_n.forEach(I),qn.forEach(I),w=Ce(un),S=ue(un,"DIV",{class:!0});var mt=we(S);W(M.$$.fragment,mt),$=Ce(mt),W(D.$$.fragment,mt),mt.forEach(I),F=Ce(un),L=ue(un,"DIV",{});var Zt=we(L);W(U.$$.fragment,Zt),ne=Ce(Zt),W(se.$$.fragment,Zt),Zt.forEach(I),fe=Ce(un),Ue&&Ue.l(un),_e=Ce(un),kt&&kt.l(un),un.forEach(I),re=Ce(Oe),de=ue(Oe,"DIV",{class:!0});var Kt=we(de);he=ue(Kt,"DIV",{class:!0});var en=we(he);X=ue(en,"H2",{class:!0,"data-svelte-h":!0}),Rn(X)!=="svelte-1qatzt5"&&(X.textContent=j),xe=Ce(en),ve.l(en),We=Ce(en),pt=ue(en,"LABEL",{for:!0,"data-svelte-h":!0}),Rn(pt)!=="svelte-1j5ep21"&&(pt.textContent=Mt),St=Ce(en),Dt=ue(en,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),en.forEach(I),zt=Ce(Kt),W(_t.$$.fragment,Kt),Kt.forEach(I),this.h()},h(){oe(t,"class","text-2xl font-bold mb-2"),oe(n,"class","mb-4"),oe(S,"class","mb-4"),oe(e,"class","p-6 bg-green-700 rounded shadow-md w-full md:w-3/4 lg:w-1/2"),oe(X,"class","text-2xl font-bold mb-2"),oe(pt,"for","profile-picture"),oe(Dt,"id","profile-picture"),oe(Dt,"type","file"),oe(Dt,"accept","image/png, image/jpg, image/jpeg"),oe(Dt,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),oe(he,"class","mb-4"),oe(de,"class","mb-4 p-6 bg-green-700 text-white rounded shadow-md mt-6 w-full md:w-3/4 lg:w-1/2")},m(Oe,un){N(Oe,e,un),me(e,n),me(n,t),me(n,s),me(n,o),G(a,o,null),me(o,l),G(f,o,null),me(o,g),et&&et.m(o,null),me(e,w),me(e,S),G(M,S,null),me(S,$),G(D,S,null),me(e,F),me(e,L),G(U,L,null),me(L,ne),G(se,L,null),me(e,fe),Ue&&Ue.m(e,null),me(e,_e),kt&&kt.m(e,null),N(Oe,re,un),N(Oe,de,un),me(de,he),me(he,X),me(he,xe),Xt[ze].m(he,null),me(he,We),me(he,pt),me(he,St),me(he,Dt),me(de,zt),G(_t,de,null),ft=!0,Be||(Ut=Ke(Dt,"change",i[9]),Be=!0)},p(Oe,un){const qn={};un&65536&&(qn.$$scope={dirty:un,ctx:Oe}),a.$set(qn);const _n={};un&2&&(_n.readonly=Oe[1]&&void 0),un&2&&(_n.class="mt-1 block w-full rounded-md shadow-sm focus:border-green-300 "+(Oe[1]?"bg-card":"bg-muted")),!m&&un&1&&(m=!0,_n.value=Oe[0].nickname,Gn(()=>m=!1)),f.$set(_n),Oe[2]?et?(et.p(Oe,un),un&4&&E(et,1)):(et=My(Oe),et.c(),E(et,1),et.m(o,null)):et&&(It(),P(et,1,1,()=>{et=null}),Pt());const mt={};un&65536&&(mt.$$scope={dirty:un,ctx:Oe}),M.$set(mt);const Zt={};un&1&&(Zt.value=Oe[0].email),D.$set(Zt);const Kt={};un&65536&&(Kt.$$scope={dirty:un,ctx:Oe}),U.$set(Kt);const en={};un&2&&(en.readonly=Oe[1]&&void 0),un&2&&(en.class="mt-1 block w-full rounded-md shadow-sm focus:border-green-300 "+(Oe[1]?"bg-card":"bg-muted")),!ee&&un&1&&(ee=!0,en.value=Oe[0].description,Gn(()=>ee=!1)),se.$set(en),Oe[1]?Ue&&(It(),P(Ue,1,1,()=>{Ue=null}),Pt()):Ue?(Ue.p(Oe,un),un&2&&E(Ue,1)):(Ue=Dy(Oe),Ue.c(),E(Ue,1),Ue.m(e,_e)),Oe[1]?kt?(kt.p(Oe,un),un&2&&E(kt,1)):(kt=Oy(Oe),kt.c(),E(kt,1),kt.m(e,null)):kt&&(It(),P(kt,1,1,()=>{kt=null}),Pt());let Pn=ze;ze=En(Oe),ze===Pn?Xt[ze].p(Oe,un):(It(),P(Xt[Pn],1,1,()=>{Xt[Pn]=null}),Pt(),ve=Xt[ze],ve?ve.p(Oe,un):(ve=Xt[ze]=Ge[ze](Oe),ve.c()),E(ve,1),ve.m(he,We));const Vn={};un&65536&&(Vn.$$scope={dirty:un,ctx:Oe}),_t.$set(Vn)},i(Oe){ft||(E(a.$$.fragment,Oe),E(f.$$.fragment,Oe),E(et),E(M.$$.fragment,Oe),E(D.$$.fragment,Oe),E(U.$$.fragment,Oe),E(se.$$.fragment,Oe),E(Ue),E(kt),E(ve),E(_t.$$.fragment,Oe),ft=!0)},o(Oe){P(a.$$.fragment,Oe),P(f.$$.fragment,Oe),P(et),P(M.$$.fragment,Oe),P(D.$$.fragment,Oe),P(U.$$.fragment,Oe),P(se.$$.fragment,Oe),P(Ue),P(kt),P(ve),P(_t.$$.fragment,Oe),ft=!1},d(Oe){Oe&&(I(e),I(re),I(de)),Z(a),Z(f),et&&et.d(),Z(M),Z(D),Z(U),Z(se),Ue&&Ue.d(),kt&&kt.d(),Xt[ze].d(),Z(_t),Be=!1,Ut()}}}function FZ(i){let e,n,t;return n=new rl({props:{class:"text-error",$$slots:{default:[QZ]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=we(e);W(n.$$.fragment,s),s.forEach(I),this.h()},h(){oe(e,"class","grow flex items-center justify-center")},m(r,s){N(r,e,s),G(n,e,null),t=!0},p(r,s){const o={};s&65536&&(o.$$scope={dirty:s,ctx:r}),n.$set(o)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&I(e),Z(n)}}}function BZ(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-y7ubrx"&&(e.innerHTML=n),this.h()},h(){oe(e,"class","grow flex items-center justify-center")},m(t,r){N(t,e,r)},p:Ct,i:Ct,o:Ct,d(t){t&&I(e)}}}function NZ(i){let e;return{c(){e=lt("Nickname:")},l(n){e=ct(n,"Nickname:")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function My(i){let e,n;return e=new rl({props:{class:"text-error",$$slots:{default:[VZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65540&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function VZ(i){let e;return{c(){e=lt(i[2])},l(n){e=ct(n,i[2])},m(n,t){N(n,e,t)},p(n,t){t&4&&cn(e,n[2])},d(n){n&&I(e)}}}function jZ(i){let e;return{c(){e=lt("Email:")},l(n){e=ct(n,"Email:")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function UZ(i){let e;return{c(){e=lt("Description:")},l(n){e=ct(n,"Description:")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Dy(i){let e,n;return e=new qi({props:{variant:"outline",class:"mt-4",$$slots:{default:[qZ]},$$scope:{ctx:i}}}),e.$on("click",i[6]),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function qZ(i){let e;return{c(){e=lt("Edit Profile")},l(n){e=ct(n,"Edit Profile")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function Oy(i){let e,n="Editing Profile",t,r,s;return r=new qi({props:{variant:"outline",class:"mt-4",$$slots:{default:[HZ]},$$scope:{ctx:i}}}),r.$on("click",i[7]),{c(){e=ce("div"),e.textContent=n,t=ke(),H(r.$$.fragment),this.h()},l(o){e=ue(o,"DIV",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-n2dxpm"&&(e.textContent=n),t=Ce(o),W(r.$$.fragment,o),this.h()},h(){oe(e,"class","text-white text-2xl text-center mt-2")},m(o,a){N(o,e,a),N(o,t,a),G(r,o,a),s=!0},p(o,a){const l={};a&65536&&(l.$$scope={dirty:a,ctx:o}),r.$set(l)},i(o){s||(E(r.$$.fragment,o),s=!0)},o(o){P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(r,o)}}}function HZ(i){let e;return{c(){e=lt("Save Changes")},l(n){e=ct(n,"Save Changes")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function GZ(i){let e,n;return e=new or({props:{class:"mb-2",$$slots:{default:[KZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function ZZ(i){let e,n;return e=new or({props:{class:"mb-2",$$slots:{default:[JZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function WZ(i){let e,n;return{c(){e=ce("img"),this.h()},l(t){e=ue(t,"IMG",{src:!0,class:!0,alt:!0,style:!0}),this.h()},h(){Li(e.src,n=i[0].profile_picture)||oe(e,"src",n),oe(e,"class","object-contain rounded-xl"),oe(e,"alt","Profile Picture"),Bd(e,"width","max(200px, 75%)"),Bd(e,"max-height","320px")},m(t,r){N(t,e,r)},p(t,r){r&1&&!Li(e.src,n=t[0].profile_picture)&&oe(e,"src",n)},d(t){t&&I(e)}}}function KZ(i){let e,n;return e=new ts({props:{class:"p-2 flex justify-center relative",$$slots:{default:[WZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function XZ(i){let e,n="You do not currently have a profile picture...";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{class:!0,"data-svelte-h":!0}),Rn(e)!=="svelte-n8lb6d"&&(e.textContent=n),this.h()},h(){oe(e,"class","text-center")},m(t,r){N(t,e,r)},p:Ct,d(t){t&&I(e)}}}function JZ(i){let e,n;return e=new ts({props:{class:"p-2",$$slots:{default:[XZ]},$$scope:{ctx:i}}}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function YZ(i){let e;return{c(){e=lt("Upload Profile Picture")},l(n){e=ct(n,"Upload Profile Picture")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function QZ(i){let e;return{c(){e=lt("Failed to fetch or update data. Contact admin for more details.")},l(n){e=ct(n,"Failed to fetch or update data. Contact admin for more details.")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function eW(i){let e,n,t,r;const s=[BZ,FZ,LZ],o=[];function a(l,f){return l[4]?0:l[3]?1:2}return n=a(i),t=o[n]=s[n](i),{c(){e=ce("div"),t.c(),this.h()},l(l){e=ue(l,"DIV",{class:!0});var f=we(e);t.l(f),f.forEach(I),this.h()},h(){oe(e,"class","grow flex flex-col items-center justify-center")},m(l,f){N(l,e,f),o[n].m(e,null),r=!0},p(l,[f]){let m=n;n=a(l),n===m?o[n].p(l,f):(It(),P(o[m],1,1,()=>{o[m]=null}),Pt(),t=o[n],t?t.p(l,f):(t=o[n]=s[n](l),t.c()),E(t,1),t.m(e,null))},i(l){r||(E(t),r=!0)},o(l){P(t),r=!1},d(l){l&&I(e),o[n].d()}}}function tW(i,e,n){let t;const r=Tr("refreshAvatarData");Jt(i,r,U=>n(13,t=U));let s=!1,o,a="",l=!1,f=!0,m;async function g(){const ne=await(await fetch("/api/settings/profile")).json();n(0,m=ne),((m==null?void 0:m.nickname)===void 0||(m==null?void 0:m.email)===void 0||(m==null?void 0:m.description)===void 0)&&n(3,l=!0),n(4,f=!1)}function w(){n(1,s=!s)}async function S(){if(a)return;n(4,f=!0);const ne=await(await fetch("/api/settings/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{...m,email:void 0,profile_picture:void 0}})})).json();n(0,m=ne),((m==null?void 0:m.nickname)===void 0||(m==null?void 0:m.email)===void 0||(m==null?void 0:m.description)===void 0)&&n(3,l=!0),n(4,f=!1),n(1,s=!1),t!==null&&t()}async function M(){if(o){const U=new FormData;U.append("profile_picture",o),n(4,f=!0);const ne=await fetch("/api/settings/profile/update-picture",{method:"POST",body:U});if(ne.ok){const se=await ne.json();n(0,m=se),((m==null?void 0:m.nickname)===void 0||(m==null?void 0:m.email)===void 0||(m==null?void 0:m.description)===void 0)&&n(3,l=!0),n(1,s=!1)}else n(3,l=!0);n(4,f=!1),t!==null&&t()}}const $=["image/png","image/jpg","image/jpeg"];function D(U){const ne=U.target;ne&&ne.files&&ne.files.length>0&&$.includes(ne.files[0].type)?o=ne.files[0]:o=void 0}Zi(g);function F(U){i.$$.not_equal(m.nickname,U)&&(m.nickname=U,n(0,m))}function L(U){i.$$.not_equal(m.description,U)&&(m.description=U,n(0,m))}return i.$$.update=()=>{i.$$.dirty&1&&(m&&typeof m.nickname=="string"&&m.nickname.length<3?n(2,a="Nickname must be at least 3 characters long"):n(2,a=""))},[m,s,a,l,f,r,w,S,M,D,F,L]}class nW extends Xe{constructor(e){super(),Je(this,e,tW,eW,Ze,{})}}function iW(i){let e;return{c(){e=lt("Profile Settings")},l(n){e=ct(n,"Profile Settings")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function rW(i){let e,n,t,r;return e=new Co({props:{class:"mb-3",$$slots:{default:[iW]},$$scope:{ctx:i}}}),t=new To({}),{c(){H(e.$$.fragment),n=ke(),H(t.$$.fragment)},l(s){W(e.$$.fragment,s),n=Ce(s),W(t.$$.fragment,s)},m(s,o){G(e,s,o),N(s,n,o),G(t,s,o),r=!0},p(s,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),r=!1},d(s){s&&I(n),Z(e,s),Z(t,s)}}}function sW(i){let e,n;return e=new nW({}),{c(){H(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){Z(e,t)}}}function oW(i){let e,n,t,r,s;return n=new ws({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[rW]},$$scope:{ctx:i}}}),r=new ts({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[sW]},$$scope:{ctx:i}}}),{c(){e=ce("div"),H(n.$$.fragment),t=ke(),H(r.$$.fragment)},l(o){e=ue(o,"DIV",{});var a=we(e);W(n.$$.fragment,a),a.forEach(I),t=Ce(o),W(r.$$.fragment,o)},m(o,a){N(o,e,a),G(n,e,null),i[4](e),N(o,t,a),G(r,o,a),s=!0},p(o,a){const l={};a&32&&(l.$$scope={dirty:a,ctx:o}),n.$set(l);const f={};a&2&&(f.style=`height: calc(100% - ${o[1]}px);`),a&32&&(f.$$scope={dirty:a,ctx:o}),r.$set(f)},i(o){s||(E(n.$$.fragment,o),E(r.$$.fragment,o),s=!0)},o(o){P(n.$$.fragment,o),P(r.$$.fragment,o),s=!1},d(o){o&&(I(e),I(t)),Z(n),i[4](null),Z(r,o)}}}function aW(i){let e,n,t,r,s,o;return t=new or({props:{class:"relative p-4 h-full",$$slots:{default:[oW]},$$scope:{ctx:i}}}),{c(){e=ce("div"),n=ce("div"),H(t.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var l=we(e);n=ue(l,"DIV",{class:!0});var f=we(n);W(t.$$.fragment,f),f.forEach(I),l.forEach(I),this.h()},h(){oe(n,"class","flex flex-col p-4 relative h-full"),oe(e,"class","flex grow flex-col relative h-full")},m(a,l){N(a,e,l),me(e,n),G(t,n,null),r=!0,s||(o=Ke(window,"resize",i[2]),s=!0)},p(a,[l]){const f={};l&35&&(f.$$scope={dirty:l,ctx:a}),t.$set(f)},i(a){r||(E(t.$$.fragment,a),r=!0)},o(a){P(t.$$.fragment,a),r=!1},d(a){a&&I(e),Z(t),s=!1,o()}}}function lW(i,e,n){let{slug:t}=e,r,s=64;const o=()=>{const l=r.offsetHeight;l!==void 0&&n(1,s=l)};Zi(o);function a(l){Nt[l?"unshift":"push"](()=>{r=l,n(0,r)})}return i.$$set=l=>{"slug"in l&&n(3,t=l.slug)},[r,s,o,t,a]}class cW extends Xe{constructor(e){super(),Je(this,e,lW,aW,Ze,{slug:3})}}const{document:Gm}=cp;function zy(i){let e;return{c(){e=ce("div"),this.h()},l(n){e=ue(n,"DIV",{class:!0}),we(e).forEach(I),this.h()},h(){oe(e,"class","absolute w-full h-full md:hidden backdrop-blur")},m(n,t){N(n,e,t)},d(n){n&&I(e)}}}function uW(i){let e,n,t,r,s,o,a,l,f,m,g,w,S,M,$,D,F;Gm.title=e=i[3];function L(re){i[6](re)}let U={};i[1]!==void 0&&(U.menuClosed=i[1]),t=new rM({props:U}),Nt.push(()=>Zn(t,"menuClosed",L));function ne(re){i[7](re)}let se={slug:i[0].slug};i[1]!==void 0&&(se.menuClosed=i[1]),l=new wM({props:se}),Nt.push(()=>Zn(l,"menuClosed",ne));var ee=i[2];function fe(re,de){return{props:{slug:re[0].slug}}}ee&&(w=ba(ee,fe(i)));let _e=!i[1]&&zy();return{c(){n=ke(),H(t.$$.fragment),s=ke(),o=ce("div"),a=ce("div"),H(l.$$.fragment),m=ke(),g=ce("div"),w&&H(w.$$.fragment),S=ke(),_e&&_e.c(),this.h()},l(re){Ry("svelte-a7ezgp",Gm.head).forEach(I),n=Ce(re),W(t.$$.fragment,re),s=Ce(re),o=ue(re,"DIV",{class:!0,style:!0});var he=we(o);a=ue(he,"DIV",{class:!0});var X=we(a);W(l.$$.fragment,X),X.forEach(I),m=Ce(he),g=ue(he,"DIV",{class:!0});var j=we(g);w&&W(w.$$.fragment,j),S=Ce(j),_e&&_e.l(j),j.forEach(I),he.forEach(I),this.h()},h(){oe(a,"class","overflow-y-auto shrink-0"),oe(g,"class","relative flex flex-col grow bg-base-300 md:brightness-100 overflow-x-hidden"),zi(g,"brightness-50",!i[1]),oe(o,"class","relative flex"),oe(o,"style",M=`height: calc(100% - ${i[4]}px);`)},m(re,de){N(re,n,de),G(t,re,de),N(re,s,de),N(re,o,de),me(o,a),G(l,a,null),me(o,m),me(o,g),w&&G(w,g,null),me(g,S),_e&&_e.m(g,null),$=!0,D||(F=[Ke(window,"resize",i[5]),Ke(g,"click",i[8])],D=!0)},p(re,[de]){(!$||de&8)&&e!==(e=re[3])&&(Gm.title=e);const he={};!r&&de&2&&(r=!0,he.menuClosed=re[1],Gn(()=>r=!1)),t.$set(he);const X={};if(de&1&&(X.slug=re[0].slug),!f&&de&2&&(f=!0,X.menuClosed=re[1],Gn(()=>f=!1)),l.$set(X),de&4&&ee!==(ee=re[2])){if(w){It();const j=w;P(j.$$.fragment,1,0,()=>{Z(j,1)}),Pt()}ee?(w=ba(ee,fe(re)),H(w.$$.fragment),E(w.$$.fragment,1),G(w,g,S)):w=null}else if(ee){const j={};de&1&&(j.slug=re[0].slug),w.$set(j)}re[1]?_e&&(_e.d(1),_e=null):_e||(_e=zy(),_e.c(),_e.m(g,null)),(!$||de&2)&&zi(g,"brightness-50",!re[1]),(!$||de&16&&M!==(M=`height: calc(100% - ${re[4]}px);`))&&oe(o,"style",M)},i(re){$||(E(t.$$.fragment,re),E(l.$$.fragment,re),w&&E(w.$$.fragment,re),$=!0)},o(re){P(t.$$.fragment,re),P(l.$$.fragment,re),w&&P(w.$$.fragment,re),$=!1},d(re){re&&(I(n),I(s),I(o)),Z(t,re),Z(l),w&&Z(w),_e&&_e.d(),D=!1,Wn(F)}}}function fW(i,e,n){let{data:t}=e,r=!0,s=null,o="",a=64;const l=()=>{const w=document.getElementById("app-header"),S=w==null?void 0:w.offsetHeight;S!==void 0&&n(4,a=S)};Zi(l);function f(w){r=w,n(1,r)}function m(w){r=w,n(1,r)}const g=()=>n(1,r=!0);return i.$$set=w=>{"data"in w&&n(0,t=w.data)},i.$$.update=()=>{if(i.$$.dirty&1)switch(t.slug.split("/")[0]){case si.HOME:n(2,s=S9),n(3,o="Home");break;case si.SOCIAL_NETWORK:n(2,s=z9),n(3,o="Social Network");break;case si.POINTS_AND_BADGES:n(2,s=yj),n(3,o="Points & Badges");break;case si.CHECK_INS:n(2,s=FH),n(3,o="Check-ins");break;case si.FAVOURITES:n(2,s=AZ),n(3,o="Favourites");break;case si.SETTINGS:n(2,s=cW),n(3,o="Settings");break;default:il("/app");break}},[t,r,s,o,a,l,f,m,g]}class dK extends Xe{constructor(e){super(),Je(this,e,fW,uW,Ze,{data:0})}}export{dK as component,qW as universal};
