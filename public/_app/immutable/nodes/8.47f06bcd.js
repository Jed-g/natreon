import{s as dt,f as _,a as T,g as h,h as g,A as J,c as I,d as f,j as b,R as ve,i as P,x as o,O as he,B as oe,P as pt,S as mt,C as ze,o as bt,p as kt,I as gt,T as lt,l as ee,m as te,E as Ce,U as je,n as be,y as pe,e as Ue}from"../chunks/scheduler.de25b927.js";import{S as _t,i as ht,b as Le,d as Ae,m as Qe,a as X,t as ie,e as qe,c as Pe,j as Et,g as Be,f as Ye}from"../chunks/index.da899c38.js";import{e as Re,u as vt,d as wt,o as Ct}from"../chunks/each.df2080c5.js";import{I as He}from"../chunks/Icon.1740bf94.js";import{d as yt,a as Tt,b as It}from"../chunks/window-close.fe4b2900.js";import{c as Fe,f as Je}from"../chunks/index.78027e64.js";function St(i){let e,t,s,r,m="Ask Question",p,l,u,k,c,a,n,d,S='<span class="label-text">Question*</span>',M,x,Y,B,R="*Required",D,y,A,j="Cancel",W,U,q="Submit",H,v,L;return u=new He({props:{icon:yt,height:24}}),{c(){e=_("div"),t=_("form"),s=_("div"),r=_("p"),r.textContent=m,p=T(),l=_("button"),Le(u.$$.fragment),k=T(),c=_("div"),a=T(),n=_("div"),d=_("label"),d.innerHTML=S,M=T(),x=_("textarea"),Y=T(),B=_("p"),B.textContent=R,D=T(),y=_("div"),A=_("button"),A.textContent=j,W=T(),U=_("button"),U.textContent=q,this.h()},l(E){e=h(E,"DIV",{class:!0});var C=g(e);t=h(C,"FORM",{class:!0});var Q=g(t);s=h(Q,"DIV",{class:!0});var se=g(s);r=h(se,"P",{"data-svelte-h":!0}),J(r)!=="svelte-1ppjczx"&&(r.textContent=m),p=I(se),l=h(se,"BUTTON",{class:!0});var K=g(l);Ae(u.$$.fragment,K),K.forEach(f),se.forEach(f),k=I(Q),c=h(Q,"DIV",{class:!0}),g(c).forEach(f),a=I(Q),n=h(Q,"DIV",{class:!0});var G=g(n);d=h(G,"LABEL",{class:!0,"data-svelte-h":!0}),J(d)!=="svelte-1t25sq6"&&(d.innerHTML=S),M=I(G),x=h(G,"TEXTAREA",{class:!0,placeholder:!0,maxlength:!0}),g(x).forEach(f),G.forEach(f),Y=I(Q),B=h(Q,"P",{class:!0,"data-svelte-h":!0}),J(B)!=="svelte-16ayxtg"&&(B.textContent=R),D=I(Q),y=h(Q,"DIV",{class:!0});var ue=g(y);A=h(ue,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),J(A)!=="svelte-1j2aynd"&&(A.textContent=j),W=I(ue),U=h(ue,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),J(U)!=="svelte-klbj1b"&&(U.textContent=q),ue.forEach(f),Q.forEach(f),C.forEach(f),this.h()},h(){b(l,"class","btn btn-circle"),b(s,"class","flex items-center justify-between"),b(c,"class","divider my-2"),b(d,"class","label"),b(x,"class","textarea textarea-bordered h-24"),b(x,"placeholder","Type here"),b(x,"maxlength",600),ve(x,"textarea-error",i[2]),b(n,"class","form-control mt-2"),b(B,"class","self-end mt-4 label-text"),b(A,"class","btn"),b(A,"type","button"),b(U,"class","btn btn-primary"),b(U,"type","submit"),ve(U,"btn-error",i[2]),b(y,"class","flex justify-between grow items-end mt-2"),b(t,"class","card h-full w-full md:w-3/4 max-w-3xl md:max-h-[32rem] max-h-none p-6 bg-base-100 flex flex-col overflow-auto"),b(e,"class","absolute h-full w-full flex items-center justify-center p-12 backdrop-blur-sm backdrop-brightness-50")},m(E,C){P(E,e,C),o(e,t),o(t,s),o(s,r),o(s,p),o(s,l),Qe(u,l,null),o(t,k),o(t,c),o(t,a),o(t,n),o(n,d),o(n,M),o(n,x),he(x,i[1]),o(t,Y),o(t,B),o(t,D),o(t,y),o(y,A),o(y,W),o(y,U),H=!0,v||(L=[oe(l,"click",i[5]),oe(x,"input",i[6]),oe(A,"click",i[7]),oe(t,"submit",pt(i[3])),oe(e,"click",mt(i[8]))],v=!0)},p(E,[C]){C&2&&he(x,E[1]),(!H||C&4)&&ve(x,"textarea-error",E[2]),(!H||C&4)&&ve(U,"btn-error",E[2])},i(E){H||(X(u.$$.fragment,E),H=!0)},o(E){ie(u.$$.fragment,E),H=!1},d(E){E&&f(e),qe(u),v=!1,ze(L)}}}function xt(i,e,t){let{showAddQuestion:s}=e,{refreshCallback:r}=e,m="",p=!1;const l=async()=>{if(!(await fetch("/api/questions",{method:"POST",body:JSON.stringify({question:m.length>0?m:void 0}),headers:{"Content-Type":"application/json"}})).ok){t(2,p=!0);return}r(),t(0,s=!1)},u=()=>t(0,s=!1);function k(){m=this.value,t(1,m)}const c=()=>t(0,s=!1),a=()=>t(0,s=!1);return i.$$set=n=>{"showAddQuestion"in n&&t(0,s=n.showAddQuestion),"refreshCallback"in n&&t(4,r=n.refreshCallback)},[s,m,p,l,r,u,k,c,a]}class Nt extends _t{constructor(e){super(),ht(this,e,xt,St,dt,{showAddQuestion:0,refreshCallback:4})}}function nt(i,e,t){const s=i.slice();return s[25]=e[t].id,s[26]=e[t].question,s[27]=e[t].answer,s[28]=e[t].upvotes,s[29]=e[t].downvotes,s[31]=t,s}function ot(i,e,t){const s=i.slice();return s[25]=e[t].id,s[26]=e[t].question,s[31]=t,s}function Dt(i){let e,t,s,r,m='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"></path></svg>',p,l,u="No. of Questions Answered",k,c,a=i[0].length+"",n,d,S,M,x,Y,B,R,D,y,A="Order By",j,W,U,q,H,v,L,E,C,Q="Ask Question",se,K,G,ue="Ask Question",F,O,N,fe="Order By",Z,ke,ae,$,ge,me,ye,Ee,Te,re,Ie,le,ne,ce,Me,Xe,z=i[5].length>0&&at(i);const Ge=[jt,Vt],de=[];function Ke(w,V){return w[0].length>0?0:1}return le=Ke(i),ne=de[le]=Ge[le](i),{c(){e=_("div"),t=_("div"),s=_("div"),r=_("div"),r.innerHTML=m,p=T(),l=_("div"),l.textContent=u,k=T(),c=_("div"),n=ee(a),d=T(),S=_("div"),M=ee("Out of "),x=ee(i[6]),Y=ee(" Total"),B=T(),R=_("div"),D=_("select"),y=_("option"),y.textContent=A,j=_("option"),W=ee("Recency"),q=_("option"),H=ee("Usefullness"),L=T(),E=_("div"),C=_("button"),C.textContent=Q,se=T(),K=_("div"),G=_("button"),G.textContent=ue,F=T(),O=_("select"),N=_("option"),N.textContent=fe,Z=_("option"),ke=ee("Recency"),$=_("option"),ge=ee("Usefullness"),ye=T(),Ee=_("div"),Te=T(),re=_("div"),z&&z.c(),Ie=T(),ne.c(),this.h()},l(w){e=h(w,"DIV",{class:!0});var V=g(e);t=h(V,"DIV",{class:!0});var we=g(t);s=h(we,"DIV",{class:!0});var _e=g(s);r=h(_e,"DIV",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-37racg"&&(r.innerHTML=m),p=I(_e),l=h(_e,"DIV",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-1nie11w"&&(l.textContent=u),k=I(_e),c=h(_e,"DIV",{class:!0});var We=g(c);n=te(We,a),We.forEach(f),d=I(_e),S=h(_e,"DIV",{class:!0});var Se=g(S);M=te(Se,"Out of "),x=te(Se,i[6]),Y=te(Se," Total"),Se.forEach(f),_e.forEach(f),we.forEach(f),B=I(V),R=h(V,"DIV",{class:!0});var xe=g(R);D=h(xe,"SELECT",{class:!0});var Ne=g(D);y=h(Ne,"OPTION",{"data-svelte-h":!0}),J(y)!=="svelte-16y6kh5"&&(y.textContent=A),j=h(Ne,"OPTION",{});var Ze=g(j);W=te(Ze,"Recency"),Ze.forEach(f),q=h(Ne,"OPTION",{});var $e=g(q);H=te($e,"Usefullness"),$e.forEach(f),Ne.forEach(f),L=I(xe),E=h(xe,"DIV",{class:!0});var et=g(E);C=h(et,"BUTTON",{class:!0,"data-svelte-h":!0}),J(C)!=="svelte-urakl4"&&(C.textContent=Q),et.forEach(f),xe.forEach(f),se=I(V),K=h(V,"DIV",{class:!0});var De=g(K);G=h(De,"BUTTON",{class:!0,"data-svelte-h":!0}),J(G)!=="svelte-1yt1tfn"&&(G.textContent=ue),F=I(De),O=h(De,"SELECT",{class:!0});var Oe=g(O);N=h(Oe,"OPTION",{"data-svelte-h":!0}),J(N)!=="svelte-16y6kh5"&&(N.textContent=fe),Z=h(Oe,"OPTION",{});var tt=g(Z);ke=te(tt,"Recency"),tt.forEach(f),$=h(Oe,"OPTION",{});var st=g($);ge=te(st,"Usefullness"),st.forEach(f),Oe.forEach(f),De.forEach(f),V.forEach(f),ye=I(w),Ee=h(w,"DIV",{class:!0}),g(Ee).forEach(f),Te=I(w),re=h(w,"DIV",{class:!0});var Ve=g(re);z&&z.l(Ve),Ie=I(Ve),ne.l(Ve),Ve.forEach(f),this.h()},h(){b(r,"class","stat-figure text-secondary hidden sm:block"),b(l,"class","stat-title text-xs sm:text-base whitespace-break-spaces"),b(c,"class","stat-value"),b(S,"class","stat-desc"),b(s,"class","stat py-0 pl-0"),b(t,"class","flex"),y.disabled=!0,y.__value="Order By",he(y,y.__value),j.selected=U=i[1]===i[9].RECENCY,j.__value=i[9].RECENCY,he(j,j.__value),q.selected=v=i[1]===i[9].USEFULLNESS,q.__value=i[9].USEFULLNESS,he(q,q.__value),b(D,"class","select select-bordered join-item"),i[1]===void 0&&Ce(()=>i[16].call(D)),b(C,"class","btn join-item btn-primary"),b(E,"class","indicator"),b(R,"class","join hidden sm:inline-flex"),b(G,"class","btn btn-primary btn-sm"),N.disabled=!0,N.__value="Order By",he(N,N.__value),Z.selected=ae=i[1]===i[9].RECENCY,Z.__value=i[9].RECENCY,he(Z,Z.__value),$.selected=me=i[1]===i[9].USEFULLNESS,$.__value=i[9].USEFULLNESS,he($,$.__value),b(O,"class","select select-bordered select-sm mt-2"),i[1]===void 0&&Ce(()=>i[19].call(O)),b(K,"class","flex flex-col sm:hidden"),b(e,"class","flex justify-between items-center"),b(Ee,"class","divider my-2 sm:my-3 h-3"),b(re,"class","flex grow flex-col relative overflow-y-auto")},m(w,V){P(w,e,V),o(e,t),o(t,s),o(s,r),o(s,p),o(s,l),o(s,k),o(s,c),o(c,n),o(s,d),o(s,S),o(S,M),o(S,x),o(S,Y),o(e,B),o(e,R),o(R,D),o(D,y),o(D,j),o(j,W),o(D,q),o(q,H),je(D,i[1],!0),o(R,L),o(R,E),o(E,C),o(e,se),o(e,K),o(K,G),o(K,F),o(K,O),o(O,N),o(O,Z),o(Z,ke),o(O,$),o($,ge),je(O,i[1],!0),P(w,ye,V),P(w,Ee,V),P(w,Te,V),P(w,re,V),z&&z.m(re,null),o(re,Ie),de[le].m(re,null),ce=!0,Me||(Xe=[oe(D,"change",i[16]),oe(C,"click",i[17]),oe(G,"click",i[18]),oe(O,"change",i[19])],Me=!0)},p(w,V){(!ce||V[0]&1)&&a!==(a=w[0].length+"")&&be(n,a),(!ce||V[0]&64)&&be(x,w[6]),(!ce||V[0]&514&&U!==(U=w[1]===w[9].RECENCY))&&(j.selected=U),(!ce||V[0]&514&&v!==(v=w[1]===w[9].USEFULLNESS))&&(q.selected=v),V[0]&514&&je(D,w[1]),(!ce||V[0]&514&&ae!==(ae=w[1]===w[9].RECENCY))&&(Z.selected=ae),(!ce||V[0]&514&&me!==(me=w[1]===w[9].USEFULLNESS))&&($.selected=me),V[0]&514&&je(O,w[1]),w[5].length>0?z?z.p(w,V):(z=at(w),z.c(),z.m(re,Ie)):z&&(z.d(1),z=null);let we=le;le=Ke(w),le===we?de[le].p(w,V):(Be(),ie(de[we],1,1,()=>{de[we]=null}),Pe(),ne=de[le],ne?ne.p(w,V):(ne=de[le]=Ge[le](w),ne.c()),X(ne,1),ne.m(re,null))},i(w){ce||(X(ne),ce=!0)},o(w){ie(ne),ce=!1},d(w){w&&(f(e),f(ye),f(Ee),f(Te),f(re)),z&&z.d(),de[le].d(),Me=!1,ze(Xe)}}}function Ot(i){let e,t='<span class="loading loading-ring loading-lg"></span>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1foj6e5"&&(e.innerHTML=t),this.h()},h(){b(e,"class","grow flex items-center justify-center")},m(s,r){P(s,e,r)},p:pe,i:pe,o:pe,d(s){s&&f(e)}}}function at(i){let e,t,s=i[3]?"Hide":"Show Your Questions",r,m,p,l,u,k,c=i[3]&&rt(),a=i[3]&&it(i);return{c(){e=_("div"),t=_("button"),r=ee(s),m=T(),c&&c.c(),p=T(),a&&a.c(),l=Ue(),this.h()},l(n){e=h(n,"DIV",{class:!0});var d=g(e);t=h(d,"BUTTON",{class:!0});var S=g(t);r=te(S,s),S.forEach(f),m=I(d),c&&c.l(d),d.forEach(f),p=I(n),a&&a.l(n),l=Ue(),this.h()},h(){b(t,"class","btn btn-primary max-sm:btn-sm ml-2"),b(e,"class","flex justify-between items-center flex-row-reverse mb-4")},m(n,d){P(n,e,d),o(e,t),o(t,r),o(e,m),c&&c.m(e,null),P(n,p,d),a&&a.m(n,d),P(n,l,d),u||(k=oe(t,"click",i[20]),u=!0)},p(n,d){d[0]&8&&s!==(s=n[3]?"Hide":"Show Your Questions")&&be(r,s),n[3]?c?d[0]&8&&X(c,1):(c=rt(),c.c(),X(c,1),c.m(e,null)):c&&(c.d(1),c=null),n[3]?a?(a.p(n,d),d[0]&8&&X(a,1)):(a=it(n),a.c(),X(a,1),a.m(l.parentNode,l)):a&&(a.d(1),a=null)},d(n){n&&(f(e),f(p),f(l)),c&&c.d(),a&&a.d(n),u=!1,k()}}}function rt(i){let e,t="Your Questions (Pending Approval)",s;return{c(){e=_("p"),e.textContent=t,this.h()},l(r){e=h(r,"P",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-n32xvn"&&(e.textContent=t),this.h()},h(){b(e,"class","text-sm sm:text-base")},m(r,m){P(r,e,m)},i(r){r&&(s||Ce(()=>{s=Ye(e,Je,{duration:800,easing:Fe}),s.start()}))},o:pe,d(r){r&&f(e)}}}function it(i){let e,t=[],s=new Map,r,m,p,l,u=Re(i[5]);const k=c=>c[25];for(let c=0;c<u.length;c+=1){let a=ot(i,u,c),n=k(a);s.set(n,t[c]=ct(n,a))}return{c(){e=_("div");for(let c=0;c<t.length;c+=1)t[c].c();m=T(),p=_("div"),this.h()},l(c){e=h(c,"DIV",{});var a=g(e);for(let n=0;n<t.length;n+=1)t[n].l(a);a.forEach(f),m=I(c),p=h(c,"DIV",{class:!0}),g(p).forEach(f),this.h()},h(){b(p,"class","divider")},m(c,a){P(c,e,a);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null);P(c,m,a),P(c,p,a)},p(c,a){a[0]&32&&(u=Re(c[5]),t=vt(t,a,k,1,c,u,s,e,wt,ct,null,ot))},i(c){c&&(r||Ce(()=>{r=Ye(e,Je,{duration:800,easing:Fe}),r.start()})),c&&(l||Ce(()=>{l=Ye(p,Je,{duration:800,easing:Fe}),l.start()}))},o:pe,d(c){c&&(f(e),f(m),f(p));for(let a=0;a<t.length;a+=1)t[a].d()}}}function ct(i,e){let t,s,r,m="Question",p,l,u=(e[26].length>600?Array.from(e[26]).slice(0,600).join("")+"...":e[26])+"",k,c;return{key:i,first:null,c(){t=_("div"),s=_("div"),r=_("p"),r.textContent=m,p=T(),l=_("p"),k=ee(u),c=T(),this.h()},l(a){t=h(a,"DIV",{class:!0});var n=g(t);s=h(n,"DIV",{class:!0});var d=g(s);r=h(d,"P",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-xf0ujr"&&(r.textContent=m),p=I(d),l=h(d,"P",{});var S=g(l);k=te(S,u),S.forEach(f),d.forEach(f),c=I(n),n.forEach(f),this.h()},h(){b(r,"class","text-xs sm:text-sm label-text mb-1"),b(s,"class","flex flex-col grow overflow-x-auto"),b(t,"class","card p-4 flex items-center flex-row glass"),ve(t,"mt-4",e[31]>0),this.first=t},m(a,n){P(a,t,n),o(t,s),o(s,r),o(s,p),o(s,l),o(l,k),o(t,c)},p(a,n){e=a,n[0]&32&&u!==(u=(e[26].length>600?Array.from(e[26]).slice(0,600).join("")+"...":e[26])+"")&&be(k,u),n[0]&32&&ve(t,"mt-4",e[31]>0)},d(a){a&&f(t)}}}function Vt(i){let e,t='<p class="text-lg">No questions...</p>';return{c(){e=_("div"),e.innerHTML=t,this.h()},l(s){e=h(s,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-jkehdr"&&(e.innerHTML=t),this.h()},h(){b(e,"class","grow flex items-center justify-center")},m(s,r){P(s,e,r)},p:pe,i:pe,o:pe,d(s){s&&f(e)}}}function jt(i){let e=[],t=new Map,s,r,m=Re(i[0]);const p=l=>l[25];for(let l=0;l<m.length;l+=1){let u=nt(i,m,l),k=p(u);t.set(k,e[l]=ut(k,u))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();s=Ue()},l(l){for(let u=0;u<e.length;u+=1)e[u].l(l);s=Ue()},m(l,u){for(let k=0;k<e.length;k+=1)e[k]&&e[k].m(l,u);P(l,s,u),r=!0},p(l,u){u[0]&15745&&(m=Re(l[0]),Be(),e=vt(e,u,p,1,l,m,t,s.parentNode,Ct,ut,s,nt),Pe())},i(l){if(!r){for(let u=0;u<m.length;u+=1)X(e[u]);r=!0}},o(l){for(let u=0;u<e.length;u+=1)ie(e[u]);r=!1},d(l){l&&f(s);for(let u=0;u<e.length;u+=1)e[u].d(l)}}}function ut(i,e){let t,s,r,m="Question",p,l,u=(e[26].length>600?Array.from(e[26]).slice(0,600).join("")+"...":e[26])+"",k,c,a,n,d,S="Answer",M,x,Y=e[27]+"",B,R,D,y,A,j,W,U,q=e[28]-e[29]+"",H,v,L,E,C,Q,se,K;j=new He({props:{icon:Tt,height:18,class:"max-sm:scale-75",color:e[7].includes(e[25])?"oklch(var(--su))":void 0}});function G(){return e[21](e[25])}E=new He({props:{icon:It,height:18,class:"max-sm:scale-75",color:e[8].includes(e[25])?"oklch(var(--er))":void 0}});function ue(){return e[22](e[25])}return{key:i,first:null,c(){t=_("div"),s=_("div"),r=_("p"),r.textContent=m,p=T(),l=_("p"),k=ee(u),c=T(),a=_("div"),n=T(),d=_("p"),d.textContent=S,M=T(),x=_("p"),B=ee(Y),R=T(),D=_("div"),y=_("div"),A=_("button"),Le(j.$$.fragment),W=T(),U=_("p"),H=ee(q),v=T(),L=_("button"),Le(E.$$.fragment),C=T(),this.h()},l(F){t=h(F,"DIV",{class:!0});var O=g(t);s=h(O,"DIV",{class:!0});var N=g(s);r=h(N,"P",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-xf0ujr"&&(r.textContent=m),p=I(N),l=h(N,"P",{});var fe=g(l);k=te(fe,u),fe.forEach(f),c=I(N),a=h(N,"DIV",{class:!0}),g(a).forEach(f),n=I(N),d=h(N,"P",{class:!0,"data-svelte-h":!0}),J(d)!=="svelte-uf51bh"&&(d.textContent=S),M=I(N),x=h(N,"P",{});var Z=g(x);B=te(Z,Y),Z.forEach(f),R=I(N),D=h(N,"DIV",{class:!0});var ke=g(D);y=h(ke,"DIV",{class:!0});var ae=g(y);A=h(ae,"BUTTON",{class:!0});var $=g(A);Ae(j.$$.fragment,$),$.forEach(f),W=I(ae),U=h(ae,"P",{class:!0});var ge=g(U);H=te(ge,q),ge.forEach(f),v=I(ae),L=h(ae,"BUTTON",{class:!0});var me=g(L);Ae(E.$$.fragment,me),me.forEach(f),ae.forEach(f),ke.forEach(f),N.forEach(f),C=I(O),O.forEach(f),this.h()},h(){b(r,"class","text-xs sm:text-sm label-text mb-1"),b(a,"class","divider my-0"),b(d,"class","text-xs sm:text-sm label-text mb-1"),b(A,"class","btn sm:btn-sm btn-circle btn-xs"),b(U,"class","mx-2 max-sm:text-xs"),b(L,"class","btn sm:btn-sm btn-circle btn-xs"),b(y,"class","flex items-center"),b(D,"class","flex justify-between items-center pt-4 max-sm:pt-2"),b(s,"class","flex flex-col grow overflow-x-auto"),b(t,"class","card p-4 flex items-center flex-row glass"),ve(t,"mt-4",e[31]>0),this.first=t},m(F,O){P(F,t,O),o(t,s),o(s,r),o(s,p),o(s,l),o(l,k),o(s,c),o(s,a),o(s,n),o(s,d),o(s,M),o(s,x),o(x,B),o(s,R),o(s,D),o(D,y),o(y,A),Qe(j,A,null),o(y,W),o(y,U),o(U,H),o(y,v),o(y,L),Qe(E,L,null),o(t,C),Q=!0,se||(K=[oe(A,"click",G),oe(L,"click",ue)],se=!0)},p(F,O){e=F,(!Q||O[0]&1)&&u!==(u=(e[26].length>600?Array.from(e[26]).slice(0,600).join("")+"...":e[26])+"")&&be(k,u),(!Q||O[0]&1)&&Y!==(Y=e[27]+"")&&be(B,Y);const N={};O[0]&129&&(N.color=e[7].includes(e[25])?"oklch(var(--su))":void 0),j.$set(N),(!Q||O[0]&1)&&q!==(q=e[28]-e[29]+"")&&be(H,q);const fe={};O[0]&257&&(fe.color=e[8].includes(e[25])?"oklch(var(--er))":void 0),E.$set(fe),(!Q||O[0]&1)&&ve(t,"mt-4",e[31]>0)},i(F){Q||(X(j.$$.fragment,F),X(E.$$.fragment,F),Q=!0)},o(F){ie(j.$$.fragment,F),ie(E.$$.fragment,F),Q=!1},d(F){F&&f(t),qe(j),qe(E),se=!1,ze(K)}}}function ft(i){let e,t,s;function r(p){i[23](p)}let m={refreshCallback:i[14]};return i[2]!==void 0&&(m.showAddQuestion=i[2]),e=new Nt({props:m}),kt.push(()=>Et(e,"showAddQuestion",r)),{c(){Le(e.$$.fragment)},l(p){Ae(e.$$.fragment,p)},m(p,l){Qe(e,p,l),s=!0},p(p,l){const u={};!t&&l[0]&4&&(t=!0,u.showAddQuestion=p[2],gt(()=>t=!1)),e.$set(u)},i(p){s||(X(e.$$.fragment,p),s=!0)},o(p){ie(e.$$.fragment,p),s=!1},d(p){qe(e,p)}}}function Ut(i){let e,t,s,r,m,p,l;const u=[Ot,Dt],k=[];function c(n,d){return n[4]?0:1}r=c(i),m=k[r]=u[r](i);let a=i[2]&&ft(i);return{c(){e=_("div"),t=_("div"),s=_("div"),m.c(),p=T(),a&&a.c(),this.h()},l(n){e=h(n,"DIV",{class:!0});var d=g(e);t=h(d,"DIV",{class:!0});var S=g(t);s=h(S,"DIV",{class:!0});var M=g(s);m.l(M),M.forEach(f),S.forEach(f),p=I(d),a&&a.l(d),d.forEach(f),this.h()},h(){b(s,"class","card p-6 bg-base-200 flex h-full overflow-x-auto opacity-95"),b(t,"class","relative p-6 h-full w-full"),b(e,"class","flex h-full items-center justify-center relative background-image svelte-fxiz4z")},m(n,d){P(n,e,d),o(e,t),o(t,s),k[r].m(s,null),o(e,p),a&&a.m(e,null),l=!0},p(n,d){let S=r;r=c(n),r===S?k[r].p(n,d):(Be(),ie(k[S],1,1,()=>{k[S]=null}),Pe(),m=k[r],m?m.p(n,d):(m=k[r]=u[r](n),m.c()),X(m,1),m.m(s,null)),n[2]?a?(a.p(n,d),d[0]&4&&X(a,1)):(a=ft(n),a.c(),X(a,1),a.m(e,null)):a&&(Be(),ie(a,1,1,()=>{a=null}),Pe())},i(n){l||(X(m),X(a),l=!0)},o(n){ie(m),ie(a),l=!1},d(n){n&&f(e),k[r].d(),a&&a.d()}}}function Lt(i,e,t){var s=(v=>(v[v.RECENCY=0]="RECENCY",v[v.USEFULLNESS=1]="USEFULLNESS",v))(s||{});let r=!1,m=!1,p=!0,l=[],u=[],k=0,c=0,a=[],n=[],d=[];const S=async v=>{if(d.includes(v)&&Y(v,!1),!(await fetch("/api/questions/upvote",{method:"POST",body:JSON.stringify({id:v}),headers:{"Content-Type":"application/json"}})).ok)return;const E=l.findIndex(({id:C})=>C===v);E!==-1&&t(0,l[E].upvotes+=1,l),t(7,n=[...n,v])},M=async v=>{if(n.includes(v)&&x(v,!1),!(await fetch("/api/questions/downvote",{method:"POST",body:JSON.stringify({id:v}),headers:{"Content-Type":"application/json"}})).ok)return;const E=l.findIndex(({id:C})=>C===v);E!==-1&&t(0,l[E].downvotes+=1,l),t(8,d=[...d,v])},x=async(v,L=!0)=>{if(L&&!(await fetch("/api/questions/upvote",{method:"DELETE",body:JSON.stringify({id:v}),headers:{"Content-Type":"application/json"}})).ok)return;const E=l.findIndex(({id:C})=>C===v);E!==-1&&t(0,l[E].upvotes-=1,l),t(7,n=n.filter(C=>C!==v))},Y=async(v,L=!0)=>{if(L&&!(await fetch("/api/questions/downvote",{method:"DELETE",body:JSON.stringify({id:v}),headers:{"Content-Type":"application/json"}})).ok)return;const E=l.findIndex(({id:C})=>C===v);E!==-1&&t(0,l[E].downvotes-=1,l),t(8,d=d.filter(C=>C!==v))},B=async()=>await(await fetch("/api/questions")).json(),R=async()=>{t(4,p=!0);const v=await B();t(0,l=v.questions),t(7,n=v.upvoted),t(8,d=v.downvoted),t(5,u=v.awaiting_approval),t(6,k=v.total_number_of_questions),t(15,a=[...l]),t(4,p=!1)};bt(R);function D(){c=lt(this),t(1,c),t(9,s)}const y=()=>t(2,r=!0),A=()=>t(2,r=!0);function j(){c=lt(this),t(1,c),t(9,s)}const W=()=>t(3,m=!m),U=v=>n.includes(v)?x(v):S(v),q=v=>d.includes(v)?Y(v):M(v);function H(v){r=v,t(2,r)}return i.$$.update=()=>{if(i.$$.dirty[0]&32771)switch(c){case 0:t(0,l=a);break;case 1:t(0,l=l.toSorted((v,L)=>L.upvotes-L.downvotes-(v.upvotes-v.downvotes)));break;default:t(0,l=a);break}},[l,c,r,m,p,u,k,n,d,s,S,M,x,Y,R,a,D,y,A,j,W,U,q,H]}class Mt extends _t{constructor(e){super(),ht(this,e,Lt,Ut,dt,{},null,[-1,-1])}}export{Mt as component};
