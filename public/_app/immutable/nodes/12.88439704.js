import{s as st,I as Ie,J as Dt,r as xt,u as $t,v as kt,w as Ct,t as pi,R as Si,a2 as gi,e as Ue,i as B,d as I,O as at,z as on,p as Zt,f as ce,g as ue,h as $e,Q as Bt,X as jn,B as mt,C as wr,G as Ui,y as gt,N as nw,a4 as kf,a3 as Wt,K as Cf,L as Sf,j as se,a5 as If,x as ae,o as Sr,F as xa,a as ge,c as ve,A as bn,l as He,m as Ze,n as Qt,U as fr,_ as ur,S as Tl,a6 as zm,E as Gr,k as Tf,M as Cd,a7 as rw,a8 as sw,Y as Ro,P as Hs,T as En,a9 as rs,aa as _0,D as g0,q as Pf}from"../chunks/scheduler.eb6498a9.js";import{S as it,i as ot,b as q,d as Z,m as G,a as T,t as E,e as H,g as vt,c as yt,h as Pl,f as El,k as Oo,j as An}from"../chunks/index.82256df8.js";import{g as Sd}from"../chunks/globals.7f7f1b26.js";import{o as Lf,m as Os,d as Cl,e as Nc,a as zo,k as Cs,h as iw,i as Vc,s as qc,c as v0,j as _a,b as y0,w as ow,u as Lm,n as pa,p as aw,f as jt,l as Id,B as yr,L as lw,q as b0}from"../chunks/LogoutButton.facaec57.js";import{g as St,a as vn,e as dn,u as Yr,o as ss,d as cw}from"../chunks/spread.f2caccfb.js";import{t as Gc,a9 as w0,o as Rf,aa as Rm,ab as uw,ac as fw,ad as hw,ae as dw,af as pw,ag as Om,r as Of,c as Jc,g as Ff,ah as mw,a as Yc,ai as _w,aj as gw,ak as vw,al as yw,am as bw,an as ww,ao as xw,ap as $w,a7 as kw,C as Td,X as Cw,a3 as Dr,a4 as Zs,a8 as Is,a5 as ji,R as Lo,T as Fo,H as Bo,a6 as No,aq as Sw,ar as Iw,as as Tw,at as Pw,B as Jr,a2 as qi,_ as x0,$ as $0,a0 as k0,a1 as C0,e as Qc,f as eu,D as tu,h as Ef,i as S0,A as I0,j as T0,I as P0,k as E0,m as A0,S as M0,q as D0,s as z0,u as L0,v as R0,w as O0,V as F0,x as Bi,y as B0,z as N0,M as V0,E as U0,F as j0,G as q0,J as Uc,K as G0,L as H0,au as Z0,N as W0,O as K0,P as X0,Q as Vo,U as Bf,W as J0,Y as Y0,Z as Nf}from"../chunks/card-title.4e6a1846.js";import{w as _r,d as Vi,r as ga}from"../chunks/paths.c144d70f.js";import{g as va}from"../chunks/navigation.5ce63b76.js";import{I as ds,B as Ss,h as Ew,a as Aw,S as $a,b as Mw,j as Dw,m as md,i as Q0,E as Vf,o as gf,d as vf,e as Sl,q as Fm,f as kl,g as nd,r as zw,v as rd,k as Lw}from"../chunks/index.0c91108c.js";import{p as ev}from"../chunks/stores.215e7fe1.js";import{c as nu,f as Rw,e as Ow,q as Bm,a as Nm}from"../chunks/index.ad941f6a.js";import{s as Fw}from"../chunks/index.903ad25d.js";function Bw(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Nw(i){let e,n;const t=[{name:"chevron-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Bw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function Vw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m6 9 6 6 6-6"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class Uw extends it{constructor(e){super(),ot(this,e,Vw,Nw,st,{})}}const jw=Uw;function qw(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Gw(i){let e,n;const t=[{name:"chevrons-up-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[qw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function Hw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m7 15 5 5 5-5"}],["path",{d:"m7 9 5-5 5 5"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class Zw extends it{constructor(e){super(),ot(this,e,Hw,Gw,st,{})}}const Ww=Zw;function Kw(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Xw(i){let e,n;const t=[{name:"filter-x"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Kw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function Jw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055"}],["path",{d:"m22 3-5 5"}],["path",{d:"m17 3 5 5"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class Yw extends it{constructor(e){super(),ot(this,e,Jw,Xw,st,{})}}const Qw=Yw;function e2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function t2(i){let e,n;const t=[{name:"filter"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[e2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function n2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class r2 extends it{constructor(e){super(),ot(this,e,n2,t2,st,{})}}const Pd=r2;function s2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function i2(i){let e,n;const t=[{name:"glasses"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[s2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function o2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"6",cy:"15",r:"4"}],["circle",{cx:"18",cy:"15",r:"4"}],["path",{d:"M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2"}],["path",{d:"M2.5 13 5 7c.7-1.3 1.4-2 3-2"}],["path",{d:"M21.5 13 19 7c-.7-1.3-1.5-2-3-2"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class a2 extends it{constructor(e){super(),ot(this,e,o2,i2,st,{})}}const Ed=a2;function l2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function c2(i){let e,n;const t=[{name:"heart"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[l2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function u2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class f2 extends it{constructor(e){super(),ot(this,e,u2,c2,st,{})}}const Al=f2;function h2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function d2(i){let e,n;const t=[{name:"layers"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[h2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function p2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class m2 extends it{constructor(e){super(),ot(this,e,p2,d2,st,{})}}const _2=m2;function g2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function v2(i){let e,n;const t=[{name:"map"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[g2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function y2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}let b2=class extends it{constructor(e){super(),ot(this,e,y2,v2,st,{})}};const w2=b2;function x2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function $2(i){let e,n;const t=[{name:"message-circle-more"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[x2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function k2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"}],["path",{d:"M8 12h.01"}],["path",{d:"M12 12h.01"}],["path",{d:"M16 12h.01"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class C2 extends it{constructor(e){super(),ot(this,e,k2,$2,st,{})}}const tv=C2;function S2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function I2(i){let e,n;const t=[{name:"messages-square"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[S2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function T2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2z"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class P2 extends it{constructor(e){super(),ot(this,e,T2,I2,st,{})}}const E2=P2;function A2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function M2(i){let e,n;const t=[{name:"search"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[A2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function D2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class z2 extends it{constructor(e){super(),ot(this,e,D2,M2,st,{})}}const nv=z2;function L2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function R2(i){let e,n;const t=[{name:"settings-2"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[L2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function O2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M20 7h-9"}],["path",{d:"M14 17H5"}],["circle",{cx:"17",cy:"17",r:"3"}],["circle",{cx:"7",cy:"7",r:"3"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class F2 extends it{constructor(e){super(),ot(this,e,O2,R2,st,{})}}const B2=F2;function N2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function V2(i){let e,n;const t=[{name:"thumbs-up"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[N2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function U2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M7 10v12"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class j2 extends it{constructor(e){super(),ot(this,e,U2,V2,st,{})}}const rv=j2;function q2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function G2(i){let e,n;const t=[{name:"tree-pine"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[q2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function H2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z"}],["path",{d:"M12 22v-3"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class Z2 extends it{constructor(e){super(),ot(this,e,H2,G2,st,{})}}const W2=Z2;function K2(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function X2(i){let e,n;const t=[{name:"user-round-search"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[K2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function J2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M2 21a8 8 0 0 1 10.434-7.62"}],["circle",{cx:"18",cy:"18",r:"3"}],["path",{d:"m22 22-1.9-1.9"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class Y2 extends it{constructor(e){super(),ot(this,e,J2,X2,st,{})}}const Q2=Y2;function ex(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function tx(i){let e,n;const t=[{name:"user"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ex]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function nx(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class rx extends it{constructor(e){super(),ot(this,e,nx,tx,st,{})}}const sx=rx;function ix(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function ox(i){let e,n;const t=[{name:"users-round"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ix]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ds({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[t[0],a&2&&vn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function ax(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];return i.$$set=a=>{n(1,e=Ie(Ie({},e),Dt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Dt(e),[s,e,t,r]}class lx extends it{constructor(e){super(),ot(this,e,ax,ox,st,{})}}const cx=lx,{name:Rc,selector:Vm}=v0("accordion"),ux={multiple:!1,disabled:!1,forceVisible:!1},fx=i=>{const e={...ux,...i},n=Gc(Lf(e,"value","onValueChange","defaultValue")),t=w0(["root"]),{disabled:r,forceVisible:s}=n,a=e.value??_r(e.defaultValue),o=Rf(a,e==null?void 0:e.onValueChange),u=(j,J)=>J===void 0?!1:typeof J=="string"?J===j:J.includes(j),p=Vi(o,j=>J=>u(J,j)),_=Os(Rc(),{returned:()=>({"data-melt-id":t.root})}),b=j=>typeof j=="string"?{value:j}:j,$=j=>typeof j=="number"?{level:j}:j,P=Os(Rc("item"),{stores:o,returned:j=>J=>{const{value:pe,disabled:re}=b(J);return{"data-state":u(pe,j)?"open":"closed","data-disabled":Cl(re)}}}),L=Os(Rc("trigger"),{stores:[o,r],returned:([j,J])=>pe=>{const{value:re,disabled:te}=b(pe);return{disabled:Cl(J||te),"aria-expanded":!!u(re,j),"aria-disabled":!!te,"data-disabled":Cl(te),"data-value":re,"data-state":u(re,j)?"open":"closed"}},action:j=>({destroy:Nc(zo(j,"click",()=>{const pe=j.dataset.disabled==="true",re=j.dataset.value;pe||!re||U(re)}),zo(j,"keydown",pe=>{if(![Cs.ARROW_DOWN,Cs.ARROW_UP,Cs.HOME,Cs.END].includes(pe.key))return;if(pe.preventDefault(),pe.key===Cs.SPACE||pe.key===Cs.ENTER){const we=j.dataset.disabled==="true",Ce=j.dataset.value;if(we||!Ce)return;U(Ce);return}const re=pe.target,te=iw(t.root);if(!te||!Vc(re))return;const me=Array.from(te.querySelectorAll(Vm("trigger"))).filter(we=>Vc(we)?we.dataset.disabled!=="true":!1);if(!me.length)return;const Y=me.indexOf(re);pe.key===Cs.ARROW_DOWN&&me[(Y+1)%me.length].focus(),pe.key===Cs.ARROW_UP&&me[(Y-1+me.length)%me.length].focus(),pe.key===Cs.HOME&&me[0].focus(),pe.key===Cs.END&&me[me.length-1].focus()}))})}),z=Os(Rc("content"),{stores:[o,r,s],returned:([j,J,pe])=>re=>{const{value:te}=b(re),de=u(te,j)||pe;return{"data-state":de?"open":"closed","data-disabled":Cl(J),"data-value":te,hidden:de?void 0:!0,style:qc({display:de?void 0:"none"})}},action:j=>{pi().then(()=>{const J=Rm(),pe=Rm(),re=document.querySelector(`${Vm("trigger")}, [data-value="${j.dataset.value}"]`);Vc(re)&&(j.id=J,re.setAttribute("aria-controls",J),re.id=pe)})}}),F=Os(Rc("heading"),{returned:()=>j=>{const{level:J}=$(j);return{role:"heading","aria-level":J,"data-heading-level":J}}});function U(j){o.update(J=>J===void 0?e.multiple?[j]:j:Array.isArray(J)?J.includes(j)?J.filter(pe=>pe!==j):(J.push(j),J):J===j?void 0:j)}return{ids:t,elements:{root:_,item:P,trigger:L,content:z,heading:F},states:{value:o},helpers:{isSelected:p},options:n}},hx={src:"",delayMs:0,onLoadingStatusChange:void 0},dx=i=>{const e={...hx,...i},n=Gc(Lf(e,"loadingStatus","onLoadingStatusChange")),{src:t,delayMs:r}=n,s=e.loadingStatus??_r("loading"),a=Rf(s,e==null?void 0:e.onLoadingStatusChange);_a([t,r],([p,_])=>{if(y0){const b=new Image;b.src=p,b.onload=()=>{if(r!==void 0){const $=window.setTimeout(()=>{a.set("loaded")},_);return()=>window.clearTimeout($)}else a.set("loaded")},b.onerror=()=>{a.set("error")}}});const o=Os("avatar-image",{stores:[t,a],returned:([p,_])=>{const b=qc({display:_==="loaded"?"block":"none"});return{src:p,style:b}}}),u=Os("avatar-fallback",{stores:[a],returned:([p])=>({style:p==="loaded"?qc({display:"none"}):void 0,hidden:p==="loaded"?!0:void 0})});return{elements:{image:o,fallback:u},states:{loadingStatus:a},options:n}},{name:ma}=v0("dialog"),px={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},mx=["content","title","description"];function _x(i){const e={...px,...i},n=Gc(Lf(e,"ids")),{preventScroll:t,closeOnEscape:r,closeOnOutsideClick:s,role:a,portal:o,forceVisible:u,openFocus:p,closeFocus:_,onOutsideClick:b}=n,$=ow.writable(null),P=Gc({...w0(mx),...e.ids}),L=e.open??_r(e.defaultOpen),z=Rf(L,e==null?void 0:e.onOpenChange),F=Vi([z,u],([Ce,_e])=>Ce||_e);let U=pa;function j(Ce){const _e=Ce.currentTarget,fe=Ce.currentTarget;!Vc(_e)||!Vc(fe)||(z.set(!0),$.set(fe))}function J(){z.set(!1),Om({prop:_.get(),defaultEl:$.get()})}const pe=Os(ma("trigger"),{stores:[z],returned:([Ce])=>({"aria-haspopup":"dialog","aria-expanded":Ce,type:"button"}),action:Ce=>({destroy:Nc(zo(Ce,"click",fe=>{j(fe)}),zo(Ce,"keydown",fe=>{fe.key!==Cs.ENTER&&fe.key!==Cs.SPACE||(fe.preventDefault(),j(fe))}))})}),re=Os(ma("overlay"),{stores:[F,z],returned:([Ce,_e])=>({hidden:Ce?void 0:!0,tabindex:-1,style:qc({display:Ce?void 0:"none"}),"aria-hidden":!0,"data-state":_e?"open":"closed"}),action:Ce=>{let _e=pa;if(r.get()){const fe=Lm(Ce,{handler:()=>{J()}});fe&&fe.destroy&&(_e=fe.destroy)}return{destroy(){_e()}}}}),te=Os(ma("content"),{stores:[F,P.content,P.description,P.title,z],returned:([Ce,_e,fe,Ee,je])=>({id:_e,role:a.get(),"aria-describedby":fe,"aria-labelledby":Ee,"aria-modal":Ce?"true":void 0,"data-state":je?"open":"closed",tabindex:-1,hidden:Ce?void 0:!0,style:qc({display:Ce?void 0:"none"})}),action:Ce=>{let _e=pa,fe=pa;const Ee=Nc(_a([z,s,r],([je,ke,nt])=>{if(!je)return;const bt=fw({immediate:!1,escapeDeactivates:nt,clickOutsideDeactivates:ke,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:Ce});_e=bt.activate,fe=bt.deactivate;const zt=bt.useFocusTrap(Ce);return zt&&zt.destroy?zt.destroy:bt.deactivate}),_a([s,z],([je,ke])=>uw(Ce,{open:ke,closeOnInteractOutside:je,onClose(){J()},shouldCloseOnInteractOutside(nt){var bt;return(bt=b.get())==null||bt(nt),!nt.defaultPrevented}}).destroy),_a([r],([je])=>je?Lm(Ce,{handler:J}).destroy:pa),_a([F],([je])=>{pi().then(()=>{je?_e():fe()})}));return{destroy:()=>{U(),Ee()}}}}),de=Os(ma("portalled"),{stores:o,returned:Ce=>({"data-portal":aw(Ce)}),action:Ce=>{const _e=_a([o],([fe])=>{if(fe===null)return pa;const Ee=hw(Ce,fe);return Ee===null?pa:dw(Ce,Ee).destroy});return{destroy(){_e()}}}}),me=Os(ma("title"),{stores:[P.title],returned:([Ce])=>({id:Ce})}),Y=Os(ma("description"),{stores:[P.description],returned:([Ce])=>({id:Ce})}),we=Os(ma("close"),{returned:()=>({type:"button"}),action:Ce=>({destroy:Nc(zo(Ce,"click",()=>{J()}),zo(Ce,"keydown",fe=>{fe.key!==Cs.SPACE&&fe.key!==Cs.ENTER||(fe.preventDefault(),J())}))})});return _a([z,t],([Ce,_e])=>{if(y0){if(_e&&Ce&&(U=pw()),Ce){const fe=document.getElementById(P.content.get());Om({prop:p.get(),defaultEl:fe})}return()=>{u.get()||U()}}}),{ids:P,elements:{content:te,trigger:pe,title:me,description:Y,overlay:re,close:we,portalled:de},states:{open:z},options:n}}const gx={defaultPressed:!1,disabled:!1};function vx(i){const e={...gx,...i},n=Gc(Lf(e,"pressed")),{disabled:t}=n,r=e.pressed??_r(e.defaultPressed),s=Rf(r,e==null?void 0:e.onPressedChange);function a(){t.get()||s.update(p=>!p)}return{elements:{root:Os("toggle",{stores:[s,t],returned:([u,p])=>({"data-disabled":Cl(p),disabled:Cl(p),"data-state":u?"on":"off","aria-pressed":u,type:"button"}),action:u=>({destroy:Nc(zo(u,"click",()=>{a()}),zo(u,"keydown",_=>{_.key!==Cs.ENTER&&_.key!==Cs.SPACE||(_.preventDefault(),a())}))})})},states:{pressed:s},options:n}}function Uf(){return{NAME:"accordion",ITEM_NAME:"accordion-item",PARTS:["root","content","header","item","trigger"]}}function yx(i){const e=fx(Of(i)),{NAME:n,PARTS:t}=Uf(),r=Jc(n,t),s={...e,getAttrs:r,updateOption:Ff(e.options)};return Si(n,s),s}function jf(){const{NAME:i}=Uf();return gi(i)}function bx(i){const{ITEM_NAME:e}=Uf();return Si(e,{...i}),{...jf(),props:i}}function sv(){const{ITEM_NAME:i}=Uf();return gi(i)}function wx(){const i=jf(),{value:e}=sv();return{...i,props:e}}function xx(){const i=jf(),{value:e,disabled:n}=sv();return{...i,props:{value:e,disabled:n}}}const $x=i=>({builder:i&4}),Um=i=>({builder:i[2]}),kx=i=>({builder:i&4}),jm=i=>({builder:i[2]});function Cx(i){let e,n,t,r;const s=i[11].default,a=xt(s,i,i[10],Um);let o=[i[2],i[4]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(p){e=ue(p,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[12](e),n=!0,t||(r=jn(i[2].action(e)),t=!0)},p(p,_){a&&a.p&&(!n||_&1028)&&$t(a,s,p,p[10],n?Ct(s,p[10],_,$x):kt(p[10]),Um),Bt(e,u=St(o,[_&4&&p[2],_&16&&p[4]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[12](null),t=!1,r()}}}function Sx(i){let e;const n=i[11].default,t=xt(n,i,i[10],jm);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1028)&&$t(t,n,r,r[10],e?Ct(n,r[10],s,kx):kt(r[10]),jm)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Ix(i){let e,n,t,r;const s=[Sx,Cx],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function Tx(i,e,n){let t;const r=["multiple","value","onValueChange","disabled","asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{multiple:p=!1}=e,{value:_=void 0}=e,{onValueChange:b=void 0}=e,{disabled:$=!1}=e,{asChild:P=!1}=e,{el:L=void 0}=e;const{elements:{root:z},states:{value:F},updateOption:U,getAttrs:j}=yx({multiple:p,disabled:$,defaultValue:_,onValueChange:({next:re})=>Array.isArray(re)?((!Array.isArray(_)||!mw(_,re))&&(b==null||b(re),n(5,_=re)),re):(_!==re&&(b==null||b(re),n(5,_=re)),re)});on(i,z,re=>n(9,a=re));const J=j("root");function pe(re){Zt[re?"unshift":"push"](()=>{L=re,n(0,L)})}return i.$$set=re=>{e=Ie(Ie({},e),Dt(re)),n(4,s=at(e,r)),"multiple"in re&&n(6,p=re.multiple),"value"in re&&n(5,_=re.value),"onValueChange"in re&&n(7,b=re.onValueChange),"disabled"in re&&n(8,$=re.disabled),"asChild"in re&&n(1,P=re.asChild),"el"in re&&n(0,L=re.el),"$$scope"in re&&n(10,u=re.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&_!==void 0&&F.set(Array.isArray(_)?[..._]:_),i.$$.dirty&64&&U("multiple",p),i.$$.dirty&256&&U("disabled",$),i.$$.dirty&512&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,J)},[L,P,t,z,s,_,p,b,$,a,u,o,pe]}class Px extends it{constructor(e){super(),ot(this,e,Tx,Ix,st,{multiple:6,value:5,onValueChange:7,disabled:8,asChild:1,el:0})}}const Ex=i=>({builder:i&4}),qm=i=>({builder:i[2]}),Ax=i=>({builder:i&4}),Gm=i=>({builder:i[2]});function Mx(i){let e,n,t,r;const s=i[9].default,a=xt(s,i,i[8],qm);let o=[i[2],i[4]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(p){e=ue(p,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[10](e),n=!0,t||(r=jn(i[2].action(e)),t=!0)},p(p,_){a&&a.p&&(!n||_&260)&&$t(a,s,p,p[8],n?Ct(s,p[8],_,Ex):kt(p[8]),qm),Bt(e,u=St(o,[_&4&&p[2],_&16&&p[4]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[10](null),t=!1,r()}}}function Dx(i){let e;const n=i[9].default,t=xt(n,i,i[8],Gm);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&$t(t,n,r,r[8],e?Ct(n,r[8],s,Ax):kt(r[8]),Gm)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function zx(i){let e,n,t,r;const s=[Dx,Mx],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function Lx(i,e,n){let t;const r=["value","disabled","asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{value:p}=e,{disabled:_=void 0}=e,{asChild:b=!1}=e,{el:$=void 0}=e;const{elements:{item:P},props:L,getAttrs:z}=bx({value:p,disabled:_});on(i,P,j=>n(7,a=j));const F=z("item");function U(j){Zt[j?"unshift":"push"](()=>{$=j,n(0,$)})}return i.$$set=j=>{e=Ie(Ie({},e),Dt(j)),n(4,s=at(e,r)),"value"in j&&n(5,p=j.value),"disabled"in j&&n(6,_=j.disabled),"asChild"in j&&n(1,b=j.asChild),"el"in j&&n(0,$=j.el),"$$scope"in j&&n(8,u=j.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&n(2,t=a(L)),i.$$.dirty&4&&Object.assign(t,F)},[$,b,t,P,s,p,_,a,u,o,U]}let Rx=class extends it{constructor(e){super(),ot(this,e,Lx,zx,st,{value:5,disabled:6,asChild:1,el:0})}};const Ox=i=>({builder:i&4}),Hm=i=>({builder:i[2]}),Fx=i=>({builder:i&4}),Zm=i=>({builder:i[2]});function Bx(i){let e,n,t,r;const s=i[8].default,a=xt(s,i,i[7],Hm);let o=[i[2],i[4]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(p){e=ue(p,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[9](e),n=!0,t||(r=jn(i[2].action(e)),t=!0)},p(p,_){a&&a.p&&(!n||_&132)&&$t(a,s,p,p[7],n?Ct(s,p[7],_,Ox):kt(p[7]),Hm),Bt(e,u=St(o,[_&4&&p[2],_&16&&p[4]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[9](null),t=!1,r()}}}function Nx(i){let e;const n=i[8].default,t=xt(n,i,i[7],Zm);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,Fx):kt(r[7]),Zm)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Vx(i){let e,n,t,r;const s=[Nx,Bx],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function Ux(i,e,n){let t;const r=["level","asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{level:p=3}=e,{asChild:_=!1}=e,{el:b=void 0}=e;const{elements:{heading:$},getAttrs:P}=jf();on(i,$,F=>n(6,a=F));const L=P("header");function z(F){Zt[F?"unshift":"push"](()=>{b=F,n(0,b)})}return i.$$set=F=>{e=Ie(Ie({},e),Dt(F)),n(4,s=at(e,r)),"level"in F&&n(5,p=F.level),"asChild"in F&&n(1,_=F.asChild),"el"in F&&n(0,b=F.el),"$$scope"in F&&n(7,u=F.$$scope)},i.$$.update=()=>{i.$$.dirty&96&&n(2,t=a(p)),i.$$.dirty&4&&Object.assign(t,L)},[b,_,t,$,s,p,a,u,o,z]}class jx extends it{constructor(e){super(),ot(this,e,Ux,Vx,st,{level:5,asChild:1,el:0})}}const qx=i=>({builder:i&4}),Wm=i=>({builder:i[2]}),Gx=i=>({builder:i&4}),Km=i=>({builder:i[2]});function Hx(i){let e,n,t,r;const s=i[8].default,a=xt(s,i,i[7],Wm);let o=[i[2],{type:"button"},i[5]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("button"),a&&a.c(),this.h()},l(p){e=ue(p,"BUTTON",{type:!0});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[jn(i[2].action(e)),mt(e,"m-keydown",i[4]),mt(e,"m-click",i[4])],t=!0)},p(p,_){a&&a.p&&(!n||_&132)&&$t(a,s,p,p[7],n?Ct(s,p[7],_,qx):kt(p[7]),Wm),Bt(e,u=St(o,[_&4&&p[2],{type:"button"},_&32&&p[5]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[9](null),t=!1,wr(r)}}}function Zx(i){let e;const n=i[8].default,t=xt(n,i,i[7],Km);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,Gx):kt(r[7]),Km)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Wx(i){let e,n,t,r;const s=[Zx,Hx],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function Kx(i,e,n){let t;const r=["asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{asChild:p=!1}=e,{el:_=void 0}=e;const{elements:{trigger:b},props:$,getAttrs:P}=xx();on(i,b,U=>n(6,a=U));const L=Yc(),z=P("trigger");function F(U){Zt[U?"unshift":"push"](()=>{_=U,n(0,_)})}return i.$$set=U=>{e=Ie(Ie({},e),Dt(U)),n(5,s=at(e,r)),"asChild"in U&&n(1,p=U.asChild),"el"in U&&n(0,_=U.el),"$$scope"in U&&n(7,u=U.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a($)),i.$$.dirty&4&&Object.assign(t,z)},[_,p,t,b,L,s,a,u,o,F]}let Xx=class extends it{constructor(e){super(),ot(this,e,Kx,Wx,st,{asChild:1,el:0})}};const Jx=i=>({builder:i&256}),Xm=i=>({builder:i[8]}),Yx=i=>({builder:i&256}),Jm=i=>({builder:i[8]}),Qx=i=>({builder:i&256}),Ym=i=>({builder:i[8]}),e$=i=>({builder:i&256}),Qm=i=>({builder:i[8]}),t$=i=>({builder:i&256}),e_=i=>({builder:i[8]}),n$=i=>({builder:i&256}),t_=i=>({builder:i[8]});function r$(i){let e,n,t,r;const s=i[16].default,a=xt(s,i,i[15],Xm);let o=[i[8],i[13]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(p){e=ue(p,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[21](e),n=!0,t||(r=jn(i[8].action(e)),t=!0)},p(p,_){a&&a.p&&(!n||_&33024)&&$t(a,s,p,p[15],n?Ct(s,p[15],_,Jx):kt(p[15]),Xm),Bt(e,u=St(o,[_&256&&p[8],_&8192&&p[13]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[21](null),t=!1,r()}}}function s$(i){let e,n,t,r,s;const a=i[16].default,o=xt(a,i,i[15],Jm);let u=[i[8],i[13]],p={};for(let _=0;_<u.length;_+=1)p=Ie(p,u[_]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(_){e=ue(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(I),this.h()},h(){Bt(e,p)},m(_,b){B(_,e,b),o&&o.m(e,null),i[20](e),t=!0,r||(s=jn(i[8].action(e)),r=!0)},p(_,b){i=_,o&&o.p&&(!t||b&33024)&&$t(o,a,i,i[15],t?Ct(a,i[15],b,Yx):kt(i[15]),Jm),Bt(e,p=St(u,[b&256&&i[8],b&8192&&i[13]]))},i(_){t||(T(o,_),n&&n.end(1),t=!0)},o(_){E(o,_),_&&(n=Pl(e,i[5],i[6])),t=!1},d(_){_&&I(e),o&&o.d(_),i[20](null),_&&n&&n.end(),r=!1,s()}}}function i$(i){let e,n,t,r,s;const a=i[16].default,o=xt(a,i,i[15],Ym);let u=[i[8],i[13]],p={};for(let _=0;_<u.length;_+=1)p=Ie(p,u[_]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(_){e=ue(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(I),this.h()},h(){Bt(e,p)},m(_,b){B(_,e,b),o&&o.m(e,null),i[19](e),t=!0,r||(s=jn(i[8].action(e)),r=!0)},p(_,b){i=_,o&&o.p&&(!t||b&33024)&&$t(o,a,i,i[15],t?Ct(a,i[15],b,Qx):kt(i[15]),Ym),Bt(e,p=St(u,[b&256&&i[8],b&8192&&i[13]]))},i(_){t||(T(o,_),_&&(n||Ui(()=>{n=El(e,i[3],i[4]),n.start()})),t=!0)},o(_){E(o,_),t=!1},d(_){_&&I(e),o&&o.d(_),i[19](null),r=!1,s()}}}function o$(i){let e,n,t,r,s,a;const o=i[16].default,u=xt(o,i,i[15],Qm);let p=[i[8],i[13]],_={};for(let b=0;b<p.length;b+=1)_=Ie(_,p[b]);return{c(){e=ce("div"),u&&u.c(),this.h()},l(b){e=ue(b,"DIV",{});var $=$e(e);u&&u.l($),$.forEach(I),this.h()},h(){Bt(e,_)},m(b,$){B(b,e,$),u&&u.m(e,null),i[18](e),r=!0,s||(a=jn(i[8].action(e)),s=!0)},p(b,$){i=b,u&&u.p&&(!r||$&33024)&&$t(u,o,i,i[15],r?Ct(o,i[15],$,e$):kt(i[15]),Qm),Bt(e,_=St(p,[$&256&&i[8],$&8192&&i[13]]))},i(b){r||(T(u,b),b&&Ui(()=>{r&&(t&&t.end(1),n=El(e,i[3],i[4]),n.start())}),r=!0)},o(b){E(u,b),n&&n.invalidate(),b&&(t=Pl(e,i[5],i[6])),r=!1},d(b){b&&I(e),u&&u.d(b),i[18](null),b&&t&&t.end(),s=!1,a()}}}function a$(i){let e,n,t,r,s;const a=i[16].default,o=xt(a,i,i[15],e_);let u=[i[8],i[13]],p={};for(let _=0;_<u.length;_+=1)p=Ie(p,u[_]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(_){e=ue(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(I),this.h()},h(){Bt(e,p)},m(_,b){B(_,e,b),o&&o.m(e,null),i[17](e),t=!0,r||(s=jn(i[8].action(e)),r=!0)},p(_,b){i=_,o&&o.p&&(!t||b&33024)&&$t(o,a,i,i[15],t?Ct(a,i[15],b,t$):kt(i[15]),e_),Bt(e,p=St(u,[b&256&&i[8],b&8192&&i[13]]))},i(_){t||(T(o,_),_&&Ui(()=>{t&&(n||(n=Oo(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(_){E(o,_),_&&(n||(n=Oo(e,i[1],i[2],!1)),n.run(0)),t=!1},d(_){_&&I(e),o&&o.d(_),i[17](null),_&&n&&n.end(),r=!1,s()}}}function l$(i){let e;const n=i[16].default,t=xt(n,i,i[15],t_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&33024)&&$t(t,n,r,r[15],e?Ct(n,r[15],s,n$):kt(r[15]),t_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function c$(i){let e,n,t,r,s,a,o,u,p,_;const b=[l$,a$,o$,i$,s$,r$],$=[];function P(L,z){return z&640&&(e=null),z&514&&(n=null),z&552&&(t=null),z&520&&(r=null),z&544&&(s=null),z&512&&(a=null),e==null&&(e=!!(L[7]&&L[9](L[12]))),e?0:(n==null&&(n=!!(L[1]&&L[9](L[12]))),n?1:(t==null&&(t=!!(L[3]&&L[5]&&L[9](L[12]))),t?2:(r==null&&(r=!!(L[3]&&L[9](L[12]))),r?3:(s==null&&(s=!!(L[5]&&L[9](L[12]))),s?4:(a==null&&(a=!!L[9](L[12])),a?5:-1)))))}return~(o=P(i,-1))&&(u=$[o]=b[o](i)),{c(){u&&u.c(),p=Ue()},l(L){u&&u.l(L),p=Ue()},m(L,z){~o&&$[o].m(L,z),B(L,p,z),_=!0},p(L,[z]){let F=o;o=P(L,z),o===F?~o&&$[o].p(L,z):(u&&(vt(),E($[F],1,1,()=>{$[F]=null}),yt()),~o?(u=$[o],u?u.p(L,z):(u=$[o]=b[o](L),u.c()),T(u,1),u.m(p.parentNode,p)):u=null)},i(L){_||(T(u),_=!0)},o(L){E(u),_=!1},d(L){L&&I(p),~o&&$[o].d(L)}}}function u$(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let s=at(e,r),a,o,{$$slots:u={},$$scope:p}=e,{transition:_=void 0}=e,{transitionConfig:b=void 0}=e,{inTransition:$=void 0}=e,{inTransitionConfig:P=void 0}=e,{outTransition:L=void 0}=e,{outTransitionConfig:z=void 0}=e,{asChild:F=!1}=e,{el:U=void 0}=e;const{elements:{content:j},helpers:{isSelected:J},props:pe,getAttrs:re}=wx();on(i,j,_e=>n(14,a=_e)),on(i,J,_e=>n(9,o=_e));const te=re("content");function de(_e){Zt[_e?"unshift":"push"](()=>{U=_e,n(0,U)})}function me(_e){Zt[_e?"unshift":"push"](()=>{U=_e,n(0,U)})}function Y(_e){Zt[_e?"unshift":"push"](()=>{U=_e,n(0,U)})}function we(_e){Zt[_e?"unshift":"push"](()=>{U=_e,n(0,U)})}function Ce(_e){Zt[_e?"unshift":"push"](()=>{U=_e,n(0,U)})}return i.$$set=_e=>{e=Ie(Ie({},e),Dt(_e)),n(13,s=at(e,r)),"transition"in _e&&n(1,_=_e.transition),"transitionConfig"in _e&&n(2,b=_e.transitionConfig),"inTransition"in _e&&n(3,$=_e.inTransition),"inTransitionConfig"in _e&&n(4,P=_e.inTransitionConfig),"outTransition"in _e&&n(5,L=_e.outTransition),"outTransitionConfig"in _e&&n(6,z=_e.outTransitionConfig),"asChild"in _e&&n(7,F=_e.asChild),"el"in _e&&n(0,U=_e.el),"$$scope"in _e&&n(15,p=_e.$$scope)},i.$$.update=()=>{i.$$.dirty&16384&&n(8,t=a(pe)),i.$$.dirty&256&&Object.assign(t,te)},[U,_,b,$,P,L,z,F,t,o,j,J,pe,s,a,p,u,de,me,Y,we,Ce]}let f$=class extends it{constructor(e){super(),ot(this,e,u$,c$,st,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};function Ad(){return{NAME:"avatar",PARTS:["root","image","fallback"]}}function h$(i){const{NAME:e,PARTS:n}=Ad(),t=Jc(e,n),r={...dx(Of(i)),getAttrs:t};return Si(e,r),{...r,updateOption:Ff(r.options)}}function d$(i=""){const{NAME:e}=Ad(),n=gi(e);return i?n.options.src.set(i):n.options.src.set(""),n}function p$(){const{NAME:i}=Ad();return gi(i)}const m$=i=>({}),n_=i=>({attrs:i[2]}),_$=i=>({}),r_=i=>({attrs:i[2]});function g$(i){let e,n;const t=i[8].default,r=xt(t,i,i[7],n_);let s=[i[3],i[2]],a={};for(let o=0;o<s.length;o+=1)a=Ie(a,s[o]);return{c(){e=ce("div"),r&&r.c(),this.h()},l(o){e=ue(o,"DIV",{});var u=$e(e);r&&r.l(u),u.forEach(I),this.h()},h(){Bt(e,a)},m(o,u){B(o,e,u),r&&r.m(e,null),i[9](e),n=!0},p(o,u){r&&r.p&&(!n||u&128)&&$t(r,t,o,o[7],n?Ct(t,o[7],u,m$):kt(o[7]),n_),Bt(e,a=St(s,[u&8&&o[3],o[2]]))},i(o){n||(T(r,o),n=!0)},o(o){E(r,o),n=!1},d(o){o&&I(e),r&&r.d(o),i[9](null)}}}function v$(i){let e;const n=i[8].default,t=xt(n,i,i[7],r_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,_$):kt(r[7]),r_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function y$(i){let e,n,t,r;const s=[v$,g$],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function b$(i,e,n){const t=["delayMs","loadingStatus","onLoadingStatusChange","asChild","el"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{delayMs:o=void 0}=e,{loadingStatus:u=void 0}=e,{onLoadingStatusChange:p=void 0}=e,{asChild:_=!1}=e,{el:b=void 0}=e;const{states:{loadingStatus:$},updateOption:P,getAttrs:L}=h$({src:"",delayMs:o,onLoadingStatusChange:({next:U})=>(n(4,u=U),p==null||p(U),U)}),z=L("root");function F(U){Zt[U?"unshift":"push"](()=>{b=U,n(0,b)})}return i.$$set=U=>{e=Ie(Ie({},e),Dt(U)),n(3,r=at(e,t)),"delayMs"in U&&n(5,o=U.delayMs),"loadingStatus"in U&&n(4,u=U.loadingStatus),"onLoadingStatusChange"in U&&n(6,p=U.onLoadingStatusChange),"asChild"in U&&n(1,_=U.asChild),"el"in U&&n(0,b=U.el),"$$scope"in U&&n(7,a=U.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&u!==void 0&&$.set(u),i.$$.dirty&32&&P("delayMs",o)},[b,_,z,r,u,o,p,a,s,F]}let w$=class extends it{constructor(e){super(),ot(this,e,b$,y$,st,{delayMs:5,loadingStatus:4,onLoadingStatusChange:6,asChild:1,el:0})}};const x$=i=>({builder:i&8}),s_=i=>({builder:i[3]});function $$(i){let e,n,t,r=[i[3],{alt:i[1]},i[5]],s={};for(let a=0;a<r.length;a+=1)s=Ie(s,r[a]);return{c(){e=ce("img"),this.h()},l(a){e=ue(a,"IMG",{alt:!0}),this.h()},h(){Bt(e,s)},m(a,o){B(a,e,o),i[10](e),n||(t=jn(i[3].action(e)),n=!0)},p(a,o){Bt(e,s=St(r,[o&8&&a[3],o&2&&{alt:a[1]},o&32&&a[5]]))},i:gt,o:gt,d(a){a&&I(e),i[10](null),n=!1,t()}}}function k$(i){let e;const n=i[9].default,t=xt(n,i,i[8],s_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&$t(t,n,r,r[8],e?Ct(n,r[8],s,x$):kt(r[8]),s_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function C$(i){let e,n,t,r;const s=[k$,$$],a=[];function o(u,p){return u[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function S$(i,e,n){let t,r;const s=["src","alt","asChild","el"];let a=at(e,s),o,u=gt,p=()=>(u(),u=nw(t,j=>n(7,o=j)),t);i.$$.on_destroy.push(()=>u());let{$$slots:_={},$$scope:b}=e,{src:$=void 0}=e,{alt:P=void 0}=e,{asChild:L=!1}=e,{el:z=void 0}=e;const F={"data-bits-avatar-image":""};function U(j){Zt[j?"unshift":"push"](()=>{z=j,n(0,z)})}return i.$$set=j=>{e=Ie(Ie({},e),Dt(j)),n(5,a=at(e,s)),"src"in j&&n(6,$=j.src),"alt"in j&&n(1,P=j.alt),"asChild"in j&&n(2,L=j.asChild),"el"in j&&n(0,z=j.el),"$$scope"in j&&n(8,b=j.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&p(n(4,t=d$($).elements.image)),i.$$.dirty&128&&n(3,r=o),i.$$.dirty&8&&Object.assign(r,F)},[z,P,L,r,t,a,$,o,b,_,U]}let I$=class extends it{constructor(e){super(),ot(this,e,S$,C$,st,{src:6,alt:1,asChild:2,el:0})}};const T$=i=>({builder:i&4}),i_=i=>({builder:i[2]}),P$=i=>({builder:i&4}),o_=i=>({builder:i[2]});function E$(i){let e,n,t,r;const s=i[7].default,a=xt(s,i,i[6],i_);let o=[i[2],i[4]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("span"),a&&a.c(),this.h()},l(p){e=ue(p,"SPAN",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[8](e),n=!0,t||(r=jn(i[2].action(e)),t=!0)},p(p,_){a&&a.p&&(!n||_&68)&&$t(a,s,p,p[6],n?Ct(s,p[6],_,T$):kt(p[6]),i_),Bt(e,u=St(o,[_&4&&p[2],_&16&&p[4]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[8](null),t=!1,r()}}}function A$(i){let e;const n=i[7].default,t=xt(n,i,i[6],o_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&$t(t,n,r,r[6],e?Ct(n,r[6],s,P$):kt(r[6]),o_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function M$(i){let e,n,t,r;const s=[A$,E$],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function D$(i,e,n){let t;const r=["asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{asChild:p=!1}=e,{el:_=void 0}=e;const{elements:{fallback:b},getAttrs:$}=p$();on(i,b,z=>n(5,a=z));const P=$("fallback");function L(z){Zt[z?"unshift":"push"](()=>{_=z,n(0,_)})}return i.$$set=z=>{e=Ie(Ie({},e),Dt(z)),n(4,s=at(e,r)),"asChild"in z&&n(1,p=z.asChild),"el"in z&&n(0,_=z.el),"$$scope"in z&&n(6,u=z.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,P)},[_,p,t,b,s,a,u,o,L]}let z$=class extends it{constructor(e){super(),ot(this,e,D$,M$,st,{asChild:1,el:0})}};const L$=i=>({builder:i&4}),a_=i=>({builder:i[2]}),R$=i=>({builder:i&4}),l_=i=>({builder:i[2]});function O$(i){let e,n,t,r;const s=i[7].default,a=xt(s,i,i[6],a_);let o=[i[2],i[4]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(p){e=ue(p,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[8](e),n=!0,t||(r=jn(i[2].action(e)),t=!0)},p(p,_){a&&a.p&&(!n||_&68)&&$t(a,s,p,p[6],n?Ct(s,p[6],_,L$):kt(p[6]),a_),Bt(e,u=St(o,[_&4&&p[2],_&16&&p[4]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[8](null),t=!1,r()}}}function F$(i){let e;const n=i[7].default,t=xt(n,i,i[6],l_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&$t(t,n,r,r[6],e?Ct(n,r[6],s,R$):kt(r[6]),l_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function B$(i){let e,n,t,r;const s=[F$,O$],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function N$(i,e,n){let t;const r=["asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{asChild:p=!1}=e,{el:_=void 0}=e;const{group:b,id:$,getAttrs:P}=_w();on(i,b,F=>n(5,a=F));const L=P("group");function z(F){Zt[F?"unshift":"push"](()=>{_=F,n(0,_)})}return i.$$set=F=>{e=Ie(Ie({},e),Dt(F)),n(4,s=at(e,r)),"asChild"in F&&n(1,p=F.asChild),"el"in F&&n(0,_=F.el),"$$scope"in F&&n(6,u=F.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=a($)),i.$$.dirty&4&&Object.assign(t,L)},[_,p,t,b,s,a,u,o,z]}class V$ extends it{constructor(e){super(),ot(this,e,N$,B$,st,{asChild:1,el:0})}}function iv(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function U$(i){const{NAME:e,PARTS:n}=iv(),t=Jc(e,n),r={..._x({...Of(i),role:"dialog",forceVisible:!0}),getAttrs:t};return Si(e,r),{...r,updateOption:Ff(r.options)}}function ka(){const{NAME:i}=iv();return gi(i)}const j$=i=>({ids:i&1}),c_=i=>({ids:i[0]});function q$(i){let e;const n=i[12].default,t=xt(n,i,i[11],c_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&2049)&&$t(t,n,r,r[11],e?Ct(n,r[11],s,j$):kt(r[11]),c_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function G$(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{preventScroll:a=void 0}=e,{closeOnEscape:o=void 0}=e,{closeOnOutsideClick:u=void 0}=e,{portal:p=void 0}=e,{open:_=void 0}=e,{onOpenChange:b=void 0}=e,{openFocus:$=void 0}=e,{closeFocus:P=void 0}=e,{onOutsideClick:L=void 0}=e;const{states:{open:z},updateOption:F,ids:U}=U$({closeOnEscape:o,preventScroll:a,closeOnOutsideClick:u,portal:p,forceVisible:!0,defaultOpen:_,openFocus:$,closeFocus:P,onOutsideClick:L,onOpenChange:({next:J})=>(_!==J&&(b==null||b(J),n(2,_=J)),J)}),j=Vi([U.content,U.description,U.title],([J,pe,re])=>({content:J,description:pe,title:re}));return on(i,j,J=>n(0,t=J)),i.$$set=J=>{"preventScroll"in J&&n(3,a=J.preventScroll),"closeOnEscape"in J&&n(4,o=J.closeOnEscape),"closeOnOutsideClick"in J&&n(5,u=J.closeOnOutsideClick),"portal"in J&&n(6,p=J.portal),"open"in J&&n(2,_=J.open),"onOpenChange"in J&&n(7,b=J.onOpenChange),"openFocus"in J&&n(8,$=J.openFocus),"closeFocus"in J&&n(9,P=J.closeFocus),"onOutsideClick"in J&&n(10,L=J.onOutsideClick),"$$scope"in J&&n(11,s=J.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&_!==void 0&&z.set(_),i.$$.dirty&8&&F("preventScroll",a),i.$$.dirty&16&&F("closeOnEscape",o),i.$$.dirty&32&&F("closeOnOutsideClick",u),i.$$.dirty&64&&F("portal",p),i.$$.dirty&256&&F("openFocus",$),i.$$.dirty&512&&F("closeFocus",P),i.$$.dirty&1024&&F("onOutsideClick",L)},[t,j,_,a,o,u,p,b,$,P,L,s,r]}class H$ extends it{constructor(e){super(),ot(this,e,G$,q$,st,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}const Z$=i=>({builder:i&8}),u_=i=>({builder:i[3]}),W$=i=>({builder:i&8}),f_=i=>({builder:i[3]});function K$(i){let e=i[1],n,t,r=i[1]&&sd(i);return{c(){r&&r.c(),n=Ue()},l(s){r&&r.l(s),n=Ue()},m(s,a){r&&r.m(s,a),B(s,n,a),t=!0},p(s,a){s[1]?e?st(e,s[1])?(r.d(1),r=sd(s),e=s[1],r.c(),r.m(n.parentNode,n)):r.p(s,a):(r=sd(s),e=s[1],r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null,e=s[1])},i(s){t||(T(r,s),t=!0)},o(s){E(r,s),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function X$(i){let e;const n=i[9].default,t=xt(n,i,i[8],f_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&$t(t,n,r,r[8],e?Ct(n,r[8],s,W$):kt(r[8]),f_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function sd(i){let e,n,t,r;const s=i[9].default,a=xt(s,i,i[8],u_);let o=[i[3],i[5]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce(i[1]),a&&a.c(),this.h()},l(p){e=ue(p,(i[1]||"null").toUpperCase(),{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){kf(i[1])(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[10](e),n=!0,t||(r=jn(i[3].action(e)),t=!0)},p(p,_){a&&a.p&&(!n||_&264)&&$t(a,s,p,p[8],n?Ct(s,p[8],_,Z$):kt(p[8]),u_),kf(p[1])(e,u=St(o,[_&8&&p[3],_&32&&p[5]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[10](null),t=!1,r()}}}function J$(i){let e,n,t,r;const s=[X$,K$],a=[];function o(u,p){return u[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function Y$(i,e,n){let t;const r=["level","asChild","id","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{level:p="h2"}=e,{asChild:_=!1}=e,{id:b=void 0}=e,{el:$=void 0}=e;const{elements:{title:P},ids:L,getAttrs:z}=ka();on(i,P,j=>n(7,a=j));const F=z("title");function U(j){Zt[j?"unshift":"push"](()=>{$=j,n(0,$)})}return i.$$set=j=>{e=Ie(Ie({},e),Dt(j)),n(5,s=at(e,r)),"level"in j&&n(1,p=j.level),"asChild"in j&&n(2,_=j.asChild),"id"in j&&n(6,b=j.id),"el"in j&&n(0,$=j.el),"$$scope"in j&&n(8,u=j.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&b&&L.title.set(b),i.$$.dirty&128&&n(3,t=a),i.$$.dirty&8&&Object.assign(t,F)},[$,p,_,t,P,s,b,a,u,o,U]}let Q$=class extends it{constructor(e){super(),ot(this,e,Y$,J$,st,{level:1,asChild:2,id:6,el:0})}};const ek=i=>({builder:i&4}),h_=i=>({builder:i[2]}),tk=i=>({builder:i&4}),d_=i=>({builder:i[2]});function nk(i){let e,n,t,r;const s=i[8].default,a=xt(s,i,i[7],h_);let o=[i[2],{type:"button"},i[5]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("button"),a&&a.c(),this.h()},l(p){e=ue(p,"BUTTON",{type:!0});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[jn(i[2].action(e)),mt(e,"m-click",i[4]),mt(e,"m-keydown",i[4])],t=!0)},p(p,_){a&&a.p&&(!n||_&132)&&$t(a,s,p,p[7],n?Ct(s,p[7],_,ek):kt(p[7]),h_),Bt(e,u=St(o,[_&4&&p[2],{type:"button"},_&32&&p[5]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[9](null),t=!1,wr(r)}}}function rk(i){let e;const n=i[8].default,t=xt(n,i,i[7],d_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,tk):kt(r[7]),d_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function sk(i){let e,n,t,r;const s=[rk,nk],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function ik(i,e,n){let t;const r=["asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{asChild:p=!1}=e,{el:_=void 0}=e;const{elements:{close:b},getAttrs:$}=ka();on(i,b,F=>n(6,a=F));const P=Yc(),L=$("close");function z(F){Zt[F?"unshift":"push"](()=>{_=F,n(0,_)})}return i.$$set=F=>{e=Ie(Ie({},e),Dt(F)),n(5,s=at(e,r)),"asChild"in F&&n(1,p=F.asChild),"el"in F&&n(0,_=F.el),"$$scope"in F&&n(7,u=F.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,L)},[_,p,t,b,P,s,a,u,o,z]}class ok extends it{constructor(e){super(),ot(this,e,ik,sk,st,{asChild:1,el:0})}}const ak=i=>({builder:i&4}),p_=i=>({builder:i[2]}),lk=i=>({builder:i&4}),m_=i=>({builder:i[2]});function ck(i){let e,n,t,r;const s=i[7].default,a=xt(s,i,i[6],p_);let o=[i[2],i[4]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(p){e=ue(p,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[8](e),n=!0,t||(r=jn(i[2].action(e)),t=!0)},p(p,_){a&&a.p&&(!n||_&68)&&$t(a,s,p,p[6],n?Ct(s,p[6],_,ak):kt(p[6]),p_),Bt(e,u=St(o,[_&4&&p[2],_&16&&p[4]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[8](null),t=!1,r()}}}function uk(i){let e;const n=i[7].default,t=xt(n,i,i[6],m_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&$t(t,n,r,r[6],e?Ct(n,r[6],s,lk):kt(r[6]),m_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function fk(i){let e,n,t,r;const s=[uk,ck],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function hk(i,e,n){let t;const r=["asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{asChild:p=!1}=e,{el:_=void 0}=e;const{elements:{portalled:b},getAttrs:$}=ka();on(i,b,z=>n(5,a=z));const P=$("portal");function L(z){Zt[z?"unshift":"push"](()=>{_=z,n(0,_)})}return i.$$set=z=>{e=Ie(Ie({},e),Dt(z)),n(4,s=at(e,r)),"asChild"in z&&n(1,p=z.asChild),"el"in z&&n(0,_=z.el),"$$scope"in z&&n(6,u=z.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,P)},[_,p,t,b,s,a,u,o,L]}let dk=class extends it{constructor(e){super(),ot(this,e,hk,fk,st,{asChild:1,el:0})}};const pk=i=>({builder:i[0]&256}),__=i=>({builder:i[8]}),mk=i=>({builder:i[0]&256}),g_=i=>({builder:i[8]}),_k=i=>({builder:i[0]&256}),v_=i=>({builder:i[8]}),gk=i=>({builder:i[0]&256}),y_=i=>({builder:i[8]}),vk=i=>({builder:i[0]&256}),b_=i=>({builder:i[8]}),yk=i=>({builder:i[0]&256}),w_=i=>({builder:i[8]});function bk(i){let e,n,t,r;const s=i[16].default,a=xt(s,i,i[15],__);let o=[i[8],i[12]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(p){e=ue(p,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[56](e),n=!0,t||(r=[jn(i[8].action(e)),mt(e,"pointerdown",i[45]),mt(e,"pointermove",i[46]),mt(e,"pointerup",i[47]),mt(e,"touchend",i[48]),mt(e,"touchstart",i[49]),mt(e,"touchcancel",i[50]),mt(e,"touchmove",i[51])],t=!0)},p(p,_){a&&a.p&&(!n||_[0]&33024)&&$t(a,s,p,p[15],n?Ct(s,p[15],_,pk):kt(p[15]),__),Bt(e,u=St(o,[_[0]&256&&p[8],_[0]&4096&&p[12]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[56](null),t=!1,wr(r)}}}function wk(i){let e,n,t,r,s;const a=i[16].default,o=xt(a,i,i[15],g_);let u=[i[8],i[12]],p={};for(let _=0;_<u.length;_+=1)p=Ie(p,u[_]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(_){e=ue(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(I),this.h()},h(){Bt(e,p)},m(_,b){B(_,e,b),o&&o.m(e,null),i[55](e),t=!0,r||(s=[jn(i[8].action(e)),mt(e,"pointerdown",i[38]),mt(e,"pointermove",i[39]),mt(e,"pointerup",i[40]),mt(e,"touchend",i[41]),mt(e,"touchstart",i[42]),mt(e,"touchcancel",i[43]),mt(e,"touchmove",i[44])],r=!0)},p(_,b){i=_,o&&o.p&&(!t||b[0]&33024)&&$t(o,a,i,i[15],t?Ct(a,i[15],b,mk):kt(i[15]),g_),Bt(e,p=St(u,[b[0]&256&&i[8],b[0]&4096&&i[12]]))},i(_){t||(T(o,_),n&&n.end(1),t=!0)},o(_){E(o,_),_&&(n=Pl(e,i[5],i[6])),t=!1},d(_){_&&I(e),o&&o.d(_),i[55](null),_&&n&&n.end(),r=!1,wr(s)}}}function xk(i){let e,n,t,r,s;const a=i[16].default,o=xt(a,i,i[15],v_);let u=[i[8],i[12]],p={};for(let _=0;_<u.length;_+=1)p=Ie(p,u[_]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(_){e=ue(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(I),this.h()},h(){Bt(e,p)},m(_,b){B(_,e,b),o&&o.m(e,null),i[54](e),t=!0,r||(s=[jn(i[8].action(e)),mt(e,"pointerdown",i[31]),mt(e,"pointermove",i[32]),mt(e,"pointerup",i[33]),mt(e,"touchend",i[34]),mt(e,"touchstart",i[35]),mt(e,"touchcancel",i[36]),mt(e,"touchmove",i[37])],r=!0)},p(_,b){i=_,o&&o.p&&(!t||b[0]&33024)&&$t(o,a,i,i[15],t?Ct(a,i[15],b,_k):kt(i[15]),v_),Bt(e,p=St(u,[b[0]&256&&i[8],b[0]&4096&&i[12]]))},i(_){t||(T(o,_),_&&(n||Ui(()=>{n=El(e,i[3],i[4]),n.start()})),t=!0)},o(_){E(o,_),t=!1},d(_){_&&I(e),o&&o.d(_),i[54](null),r=!1,wr(s)}}}function $k(i){let e,n,t,r,s,a;const o=i[16].default,u=xt(o,i,i[15],y_);let p=[i[8],i[12]],_={};for(let b=0;b<p.length;b+=1)_=Ie(_,p[b]);return{c(){e=ce("div"),u&&u.c(),this.h()},l(b){e=ue(b,"DIV",{});var $=$e(e);u&&u.l($),$.forEach(I),this.h()},h(){Bt(e,_)},m(b,$){B(b,e,$),u&&u.m(e,null),i[53](e),r=!0,s||(a=[jn(i[8].action(e)),mt(e,"pointerdown",i[24]),mt(e,"pointermove",i[25]),mt(e,"pointerup",i[26]),mt(e,"touchend",i[27]),mt(e,"touchstart",i[28]),mt(e,"touchcancel",i[29]),mt(e,"touchmove",i[30])],s=!0)},p(b,$){i=b,u&&u.p&&(!r||$[0]&33024)&&$t(u,o,i,i[15],r?Ct(o,i[15],$,gk):kt(i[15]),y_),Bt(e,_=St(p,[$[0]&256&&i[8],$[0]&4096&&i[12]]))},i(b){r||(T(u,b),b&&Ui(()=>{r&&(t&&t.end(1),n=El(e,i[3],i[4]),n.start())}),r=!0)},o(b){E(u,b),n&&n.invalidate(),b&&(t=Pl(e,i[5],i[6])),r=!1},d(b){b&&I(e),u&&u.d(b),i[53](null),b&&t&&t.end(),s=!1,wr(a)}}}function kk(i){let e,n,t,r,s;const a=i[16].default,o=xt(a,i,i[15],b_);let u=[i[8],i[12]],p={};for(let _=0;_<u.length;_+=1)p=Ie(p,u[_]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(_){e=ue(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(I),this.h()},h(){Bt(e,p)},m(_,b){B(_,e,b),o&&o.m(e,null),i[52](e),t=!0,r||(s=[jn(i[8].action(e)),mt(e,"pointerdown",i[17]),mt(e,"pointermove",i[18]),mt(e,"pointerup",i[19]),mt(e,"touchend",i[20]),mt(e,"touchstart",i[21]),mt(e,"touchcancel",i[22]),mt(e,"touchmove",i[23])],r=!0)},p(_,b){i=_,o&&o.p&&(!t||b[0]&33024)&&$t(o,a,i,i[15],t?Ct(a,i[15],b,vk):kt(i[15]),b_),Bt(e,p=St(u,[b[0]&256&&i[8],b[0]&4096&&i[12]]))},i(_){t||(T(o,_),_&&Ui(()=>{t&&(n||(n=Oo(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(_){E(o,_),_&&(n||(n=Oo(e,i[1],i[2],!1)),n.run(0)),t=!1},d(_){_&&I(e),o&&o.d(_),i[52](null),_&&n&&n.end(),r=!1,wr(s)}}}function Ck(i){let e;const n=i[16].default,t=xt(n,i,i[15],w_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&33024)&&$t(t,n,r,r[15],e?Ct(n,r[15],s,yk):kt(r[15]),w_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Sk(i){let e,n,t,r;const s=[Ck,kk,$k,xk,wk,bk],a=[];function o(u,p){return u[7]&&u[9]?0:u[1]&&u[9]?1:u[3]&&u[5]&&u[9]?2:u[3]&&u[9]?3:u[5]&&u[9]?4:u[9]?5:-1}return~(e=o(i))&&(n=a[e]=s[e](i)),{c(){n&&n.c(),t=Ue()},l(u){n&&n.l(u),t=Ue()},m(u,p){~e&&a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?~e&&a[e].p(u,p):(n&&(vt(),E(a[_],1,1,()=>{a[_]=null}),yt()),~e?(n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t)):n=null)},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),~e&&a[e].d(u)}}}function Ik(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","el"];let s=at(e,r),a,o,{$$slots:u={},$$scope:p}=e,{transition:_=void 0}=e,{transitionConfig:b=void 0}=e,{inTransition:$=void 0}=e,{inTransitionConfig:P=void 0}=e,{outTransition:L=void 0}=e,{outTransitionConfig:z=void 0}=e,{asChild:F=!1}=e,{id:U=void 0}=e,{el:j=void 0}=e;const{elements:{content:J},states:{open:pe},ids:re,getAttrs:te}=ka();on(i,J,ft=>n(14,a=ft)),on(i,pe,ft=>n(9,o=ft));const de=te("content");function me(ft){Wt.call(this,i,ft)}function Y(ft){Wt.call(this,i,ft)}function we(ft){Wt.call(this,i,ft)}function Ce(ft){Wt.call(this,i,ft)}function _e(ft){Wt.call(this,i,ft)}function fe(ft){Wt.call(this,i,ft)}function Ee(ft){Wt.call(this,i,ft)}function je(ft){Wt.call(this,i,ft)}function ke(ft){Wt.call(this,i,ft)}function nt(ft){Wt.call(this,i,ft)}function bt(ft){Wt.call(this,i,ft)}function zt(ft){Wt.call(this,i,ft)}function At(ft){Wt.call(this,i,ft)}function Et(ft){Wt.call(this,i,ft)}function It(ft){Wt.call(this,i,ft)}function nn(ft){Wt.call(this,i,ft)}function yn(ft){Wt.call(this,i,ft)}function un(ft){Wt.call(this,i,ft)}function Kt(ft){Wt.call(this,i,ft)}function Tt(ft){Wt.call(this,i,ft)}function Vt(ft){Wt.call(this,i,ft)}function Ye(ft){Wt.call(this,i,ft)}function Nt(ft){Wt.call(this,i,ft)}function Mt(ft){Wt.call(this,i,ft)}function Qe(ft){Wt.call(this,i,ft)}function en(ft){Wt.call(this,i,ft)}function et(ft){Wt.call(this,i,ft)}function sn(ft){Wt.call(this,i,ft)}function ln(ft){Wt.call(this,i,ft)}function We(ft){Wt.call(this,i,ft)}function Vn(ft){Wt.call(this,i,ft)}function xr(ft){Wt.call(this,i,ft)}function xn(ft){Wt.call(this,i,ft)}function Qn(ft){Wt.call(this,i,ft)}function is(ft){Wt.call(this,i,ft)}function ps(ft){Zt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}function Fs(ft){Zt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}function Ws(ft){Zt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}function Bs(ft){Zt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}function ri(ft){Zt[ft?"unshift":"push"](()=>{j=ft,n(0,j)})}return i.$$set=ft=>{e=Ie(Ie({},e),Dt(ft)),n(12,s=at(e,r)),"transition"in ft&&n(1,_=ft.transition),"transitionConfig"in ft&&n(2,b=ft.transitionConfig),"inTransition"in ft&&n(3,$=ft.inTransition),"inTransitionConfig"in ft&&n(4,P=ft.inTransitionConfig),"outTransition"in ft&&n(5,L=ft.outTransition),"outTransitionConfig"in ft&&n(6,z=ft.outTransitionConfig),"asChild"in ft&&n(7,F=ft.asChild),"id"in ft&&n(13,U=ft.id),"el"in ft&&n(0,j=ft.el),"$$scope"in ft&&n(15,p=ft.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8192&&U&&re.content.set(U),i.$$.dirty[0]&16384&&n(8,t=a),i.$$.dirty[0]&256&&Object.assign(t,de)},[j,_,b,$,P,L,z,F,t,o,J,pe,s,U,a,p,u,me,Y,we,Ce,_e,fe,Ee,je,ke,nt,bt,zt,At,Et,It,nn,yn,un,Kt,Tt,Vt,Ye,Nt,Mt,Qe,en,et,sn,ln,We,Vn,xr,xn,Qn,is,ps,Fs,Ws,Bs,ri]}let Tk=class extends it{constructor(e){super(),ot(this,e,Ik,Sk,st,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:13,el:0},null,[-1,-1])}};const Pk=i=>({builder:i&256}),x_=i=>({builder:i[8]});function Ek(i){let e,n,t,r=[i[8],i[12]],s={};for(let a=0;a<r.length;a+=1)s=Ie(s,r[a]);return{c(){e=ce("div"),this.h()},l(a){e=ue(a,"DIV",{}),$e(e).forEach(I),this.h()},h(){Bt(e,s)},m(a,o){B(a,e,o),i[25](e),n||(t=[jn(i[8].action(e)),mt(e,"mouseup",i[20])],n=!0)},p(a,o){Bt(e,s=St(r,[o&256&&a[8],o&4096&&a[12]]))},i:gt,o:gt,d(a){a&&I(e),i[25](null),n=!1,wr(t)}}}function Ak(i){let e,n,t,r,s,a=[i[8],i[12]],o={};for(let u=0;u<a.length;u+=1)o=Ie(o,a[u]);return{c(){e=ce("div"),this.h()},l(u){e=ue(u,"DIV",{}),$e(e).forEach(I),this.h()},h(){Bt(e,o)},m(u,p){B(u,e,p),i[24](e),t=!0,r||(s=[jn(i[8].action(e)),mt(e,"mouseup",i[19])],r=!0)},p(u,p){i=u,Bt(e,o=St(a,[p&256&&i[8],p&4096&&i[12]]))},i(u){t||(n&&n.end(1),t=!0)},o(u){u&&(n=Pl(e,i[5],i[6])),t=!1},d(u){u&&I(e),i[24](null),u&&n&&n.end(),r=!1,wr(s)}}}function Mk(i){let e,n,t,r,s=[i[8],i[12]],a={};for(let o=0;o<s.length;o+=1)a=Ie(a,s[o]);return{c(){e=ce("div"),this.h()},l(o){e=ue(o,"DIV",{}),$e(e).forEach(I),this.h()},h(){Bt(e,a)},m(o,u){B(o,e,u),i[23](e),t||(r=[jn(i[8].action(e)),mt(e,"mouseup",i[18])],t=!0)},p(o,u){i=o,Bt(e,a=St(s,[u&256&&i[8],u&4096&&i[12]]))},i(o){o&&(n||Ui(()=>{n=El(e,i[3],i[4]),n.start()}))},o:gt,d(o){o&&I(e),i[23](null),t=!1,wr(r)}}}function Dk(i){let e,n,t,r,s,a,o=[i[8],i[12]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),this.h()},l(p){e=ue(p,"DIV",{}),$e(e).forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),i[22](e),r=!0,s||(a=[jn(i[8].action(e)),mt(e,"mouseup",i[17])],s=!0)},p(p,_){i=p,Bt(e,u=St(o,[_&256&&i[8],_&4096&&i[12]]))},i(p){r||(p&&Ui(()=>{r&&(t&&t.end(1),n=El(e,i[3],i[4]),n.start())}),r=!0)},o(p){n&&n.invalidate(),p&&(t=Pl(e,i[5],i[6])),r=!1},d(p){p&&I(e),i[22](null),p&&t&&t.end(),s=!1,wr(a)}}}function zk(i){let e,n,t,r,s,a=[i[8],i[12]],o={};for(let u=0;u<a.length;u+=1)o=Ie(o,a[u]);return{c(){e=ce("div"),this.h()},l(u){e=ue(u,"DIV",{}),$e(e).forEach(I),this.h()},h(){Bt(e,o)},m(u,p){B(u,e,p),i[21](e),t=!0,r||(s=[mt(e,"mouseup",i[16]),jn(i[8].action(e))],r=!0)},p(u,p){i=u,Bt(e,o=St(a,[p&256&&i[8],p&4096&&i[12]]))},i(u){t||(u&&Ui(()=>{t&&(n||(n=Oo(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(u){u&&(n||(n=Oo(e,i[1],i[2],!1)),n.run(0)),t=!1},d(u){u&&I(e),i[21](null),u&&n&&n.end(),r=!1,wr(s)}}}function Lk(i){let e;const n=i[15].default,t=xt(n,i,i[14],x_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16640)&&$t(t,n,r,r[14],e?Ct(n,r[14],s,Pk):kt(r[14]),x_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Rk(i){let e,n,t,r;const s=[Lk,zk,Dk,Mk,Ak,Ek],a=[];function o(u,p){return u[7]&&u[9]?0:u[1]&&u[9]?1:u[3]&&u[5]&&u[9]?2:u[3]&&u[9]?3:u[5]&&u[9]?4:u[9]?5:-1}return~(e=o(i))&&(n=a[e]=s[e](i)),{c(){n&&n.c(),t=Ue()},l(u){n&&n.l(u),t=Ue()},m(u,p){~e&&a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?~e&&a[e].p(u,p):(n&&(vt(),E(a[_],1,1,()=>{a[_]=null}),yt()),~e?(n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t)):n=null)},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),~e&&a[e].d(u)}}}function Ok(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let s=at(e,r),a,o,{$$slots:u={},$$scope:p}=e,{transition:_=void 0}=e,{transitionConfig:b=void 0}=e,{inTransition:$=void 0}=e,{inTransitionConfig:P=void 0}=e,{outTransition:L=void 0}=e,{outTransitionConfig:z=void 0}=e,{asChild:F=!1}=e,{el:U=void 0}=e;const{elements:{overlay:j},states:{open:J},getAttrs:pe}=ka();on(i,j,ke=>n(13,a=ke)),on(i,J,ke=>n(9,o=ke));const re=pe("overlay");function te(ke){Wt.call(this,i,ke)}function de(ke){Wt.call(this,i,ke)}function me(ke){Wt.call(this,i,ke)}function Y(ke){Wt.call(this,i,ke)}function we(ke){Wt.call(this,i,ke)}function Ce(ke){Zt[ke?"unshift":"push"](()=>{U=ke,n(0,U)})}function _e(ke){Zt[ke?"unshift":"push"](()=>{U=ke,n(0,U)})}function fe(ke){Zt[ke?"unshift":"push"](()=>{U=ke,n(0,U)})}function Ee(ke){Zt[ke?"unshift":"push"](()=>{U=ke,n(0,U)})}function je(ke){Zt[ke?"unshift":"push"](()=>{U=ke,n(0,U)})}return i.$$set=ke=>{e=Ie(Ie({},e),Dt(ke)),n(12,s=at(e,r)),"transition"in ke&&n(1,_=ke.transition),"transitionConfig"in ke&&n(2,b=ke.transitionConfig),"inTransition"in ke&&n(3,$=ke.inTransition),"inTransitionConfig"in ke&&n(4,P=ke.inTransitionConfig),"outTransition"in ke&&n(5,L=ke.outTransition),"outTransitionConfig"in ke&&n(6,z=ke.outTransitionConfig),"asChild"in ke&&n(7,F=ke.asChild),"el"in ke&&n(0,U=ke.el),"$$scope"in ke&&n(14,p=ke.$$scope)},i.$$.update=()=>{i.$$.dirty&8192&&n(8,t=a),i.$$.dirty&256&&Object.assign(t,re)},[U,_,b,$,P,L,z,F,t,o,j,J,s,a,p,u,te,de,me,Y,we,Ce,_e,fe,Ee,je]}let Fk=class extends it{constructor(e){super(),ot(this,e,Ok,Rk,st,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};const Bk=i=>({builder:i&4}),$_=i=>({builder:i[2]}),Nk=i=>({builder:i&4}),k_=i=>({builder:i[2]});function Vk(i){let e,n,t,r;const s=i[8].default,a=xt(s,i,i[7],$_);let o=[i[2],{type:"button"},i[5]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("button"),a&&a.c(),this.h()},l(p){e=ue(p,"BUTTON",{type:!0});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[jn(i[2].action(e)),mt(e,"m-click",i[4]),mt(e,"m-keydown",i[4])],t=!0)},p(p,_){a&&a.p&&(!n||_&132)&&$t(a,s,p,p[7],n?Ct(s,p[7],_,Bk):kt(p[7]),$_),Bt(e,u=St(o,[_&4&&p[2],{type:"button"},_&32&&p[5]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[9](null),t=!1,wr(r)}}}function Uk(i){let e;const n=i[8].default,t=xt(n,i,i[7],k_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,Nk):kt(r[7]),k_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function jk(i){let e,n,t,r;const s=[Uk,Vk],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function qk(i,e,n){let t;const r=["asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{asChild:p=!1}=e,{el:_=void 0}=e;const{elements:{trigger:b},getAttrs:$}=ka();on(i,b,F=>n(6,a=F));const P=Yc(),L=$("trigger");function z(F){Zt[F?"unshift":"push"](()=>{_=F,n(0,_)})}return i.$$set=F=>{e=Ie(Ie({},e),Dt(F)),n(5,s=at(e,r)),"asChild"in F&&n(1,p=F.asChild),"el"in F&&n(0,_=F.el),"$$scope"in F&&n(7,u=F.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,L)},[_,p,t,b,P,s,a,u,o,z]}class Gk extends it{constructor(e){super(),ot(this,e,qk,jk,st,{asChild:1,el:0})}}const Hk=i=>({builder:i&4}),C_=i=>({builder:i[2]}),Zk=i=>({builder:i&4}),S_=i=>({builder:i[2]});function Wk(i){let e,n,t,r;const s=i[8].default,a=xt(s,i,i[7],C_);let o=[i[2],i[4]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(p){e=ue(p,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[9](e),n=!0,t||(r=jn(i[2].action(e)),t=!0)},p(p,_){a&&a.p&&(!n||_&132)&&$t(a,s,p,p[7],n?Ct(s,p[7],_,Hk):kt(p[7]),C_),Bt(e,u=St(o,[_&4&&p[2],_&16&&p[4]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[9](null),t=!1,r()}}}function Kk(i){let e;const n=i[8].default,t=xt(n,i,i[7],S_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,Zk):kt(r[7]),S_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Xk(i){let e,n,t,r;const s=[Kk,Wk],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function Jk(i,e,n){let t;const r=["asChild","id","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{asChild:p=!1}=e,{id:_=void 0}=e,{el:b=void 0}=e;const{elements:{description:$},ids:P,getAttrs:L}=ka();on(i,$,U=>n(6,a=U));const z=L("description");function F(U){Zt[U?"unshift":"push"](()=>{b=U,n(0,b)})}return i.$$set=U=>{e=Ie(Ie({},e),Dt(U)),n(4,s=at(e,r)),"asChild"in U&&n(1,p=U.asChild),"id"in U&&n(5,_=U.id),"el"in U&&n(0,b=U.el),"$$scope"in U&&n(7,u=U.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&_&&P.description.set(_),i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,z)},[b,p,t,$,s,_,a,u,o,F]}let Yk=class extends it{constructor(e){super(),ot(this,e,Jk,Xk,st,{asChild:1,id:5,el:0})}};function Qk(){const i="label",n=Jc(i,["root"]);return{NAME:i,getAttrs:n}}const eC=i=>({builder:i&4}),I_=i=>({builder:i[2]}),tC=i=>({builder:i&4}),T_=i=>({builder:i[2]});function nC(i){let e,n,t,r;const s=i[8].default,a=xt(s,i,i[7],I_);let o=[i[2],i[5]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("label"),a&&a.c(),this.h()},l(p){e=ue(p,"LABEL",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),i[9](e),n=!0,t||(r=[jn(i[2].action(e)),mt(e,"m-mousedown",i[4])],t=!0)},p(p,_){a&&a.p&&(!n||_&132)&&$t(a,s,p,p[7],n?Ct(s,p[7],_,eC):kt(p[7]),I_),Bt(e,u=St(o,[_&4&&p[2],_&32&&p[5]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[9](null),t=!1,wr(r)}}}function rC(i){let e;const n=i[8].default,t=xt(n,i,i[7],T_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,tC):kt(r[7]),T_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function sC(i){let e,n,t,r;const s=[rC,nC],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function iC(i,e,n){let t;const r=["asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{asChild:p=!1}=e,{el:_=void 0}=e;const{elements:{root:b}}=gw();on(i,b,F=>n(6,a=F));const $=Yc(),{getAttrs:P}=Qk(),L=P("root");function z(F){Zt[F?"unshift":"push"](()=>{_=F,n(0,_)})}return i.$$set=F=>{e=Ie(Ie({},e),Dt(F)),n(5,s=at(e,r)),"asChild"in F&&n(1,p=F.asChild),"el"in F&&n(0,_=F.el),"$$scope"in F&&n(7,u=F.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,L)},[_,p,t,b,$,s,a,u,o,z]}let oC=class extends it{constructor(e){super(),ot(this,e,iC,sC,st,{asChild:1,el:0})}};function aC(){return{NAME:"toggle",PARTS:["root","input"]}}function lC(i){const{NAME:e,PARTS:n}=aC(),t=Jc(e,n),r={...vx(Of(i)),getAttrs:t};return Si(e,r),{...r,updateOption:Ff(r.options)}}const cC=i=>({builder:i&4}),P_=i=>({builder:i[2]}),uC=i=>({builder:i&4}),E_=i=>({builder:i[2]});function fC(i){let e,n,t,r;const s=i[11].default,a=xt(s,i,i[10],P_);let o=[i[2],{type:"button"},i[5]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("button"),a&&a.c(),this.h()},l(p){e=ue(p,"BUTTON",{type:!0});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[12](e),n=!0,t||(r=[jn(i[2].action(e)),mt(e,"m-click",i[4]),mt(e,"m-keydown",i[4])],t=!0)},p(p,_){a&&a.p&&(!n||_&1028)&&$t(a,s,p,p[10],n?Ct(s,p[10],_,cC):kt(p[10]),P_),Bt(e,u=St(o,[_&4&&p[2],{type:"button"},_&32&&p[5]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),i[12](null),t=!1,wr(r)}}}function hC(i){let e;const n=i[11].default,t=xt(n,i,i[10],E_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1028)&&$t(t,n,r,r[10],e?Ct(n,r[10],s,uC):kt(r[10]),E_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function dC(i){let e,n,t,r;const s=[hC,fC],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function pC(i,e,n){let t;const r=["disabled","pressed","onPressedChange","asChild","el"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{disabled:p=void 0}=e,{pressed:_=void 0}=e,{onPressedChange:b=void 0}=e,{asChild:$=!1}=e,{el:P=void 0}=e;const{elements:{root:L},states:{pressed:z},updateOption:F,getAttrs:U}=lC({disabled:p,defaultPressed:_,onPressedChange:({next:re})=>(_!==re&&(b==null||b(re),n(6,_=re)),re)});on(i,L,re=>n(9,a=re));const j=Yc(),J=U("root");function pe(re){Zt[re?"unshift":"push"](()=>{P=re,n(0,P)})}return i.$$set=re=>{e=Ie(Ie({},e),Dt(re)),n(5,s=at(e,r)),"disabled"in re&&n(7,p=re.disabled),"pressed"in re&&n(6,_=re.pressed),"onPressedChange"in re&&n(8,b=re.onPressedChange),"asChild"in re&&n(1,$=re.asChild),"el"in re&&n(0,P=re.el),"$$scope"in re&&n(10,u=re.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&_!==void 0&&z.set(_),i.$$.dirty&128&&F("disabled",p),i.$$.dirty&512&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,J)},[P,$,t,L,j,s,_,p,b,a,u,o,pe]}let mC=class extends it{constructor(e){super(),ot(this,e,pC,dC,st,{disabled:7,pressed:6,onPressedChange:8,asChild:1,el:0})}};function _C(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return{c(){e=Cf("svg"),n=Cf("path"),this.h()},l(s){e=Sf(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=$e(e);n=Sf(a,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),$e(n).forEach(I),a.forEach(I),this.h()},h(){se(n,"fill-rule","evenodd"),se(n,"clip-rule","evenodd"),se(n,"d","M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z"),se(n,"fill",i[0]),If(e,r)},m(s,a){B(s,e,a),ae(e,n)},p(s,[a]){a&1&&se(n,"fill",s[0]),If(e,r=St(t,[a&2&&{width:s[1]},a&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a&4&&s[2]]))},i:gt,o:gt,d(s){s&&I(e)}}}function gC(i,e,n){const t=["color","size"];let r=at(e,t),{color:s="currentColor"}=e,{size:a=15}=e;return i.$$set=o=>{e=Ie(Ie({},e),Dt(o)),n(2,r=at(e,t)),"color"in o&&n(0,s=o.color),"size"in o&&n(1,a=o.size)},[s,a,r]}class vC extends it{constructor(e){super(),ot(this,e,gC,_C,st,{color:0,size:1})}}const yC=vC;function bC(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return{c(){e=Cf("svg"),n=Cf("path"),this.h()},l(s){e=Sf(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=$e(e);n=Sf(a,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),$e(n).forEach(I),a.forEach(I),this.h()},h(){se(n,"fill-rule","evenodd"),se(n,"clip-rule","evenodd"),se(n,"d","M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z"),se(n,"fill",i[0]),If(e,r)},m(s,a){B(s,e,a),ae(e,n)},p(s,[a]){a&1&&se(n,"fill",s[0]),If(e,r=St(t,[a&2&&{width:s[1]},a&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a&4&&s[2]]))},i:gt,o:gt,d(s){s&&I(e)}}}function wC(i,e,n){const t=["color","size"];let r=at(e,t),{color:s="currentColor"}=e,{size:a=15}=e;return i.$$set=o=>{e=Ie(Ie({},e),Dt(o)),n(2,r=at(e,t)),"color"in o&&n(0,s=o.color),"size"in o&&n(1,a=o.size)},[s,a,r]}class xC extends it{constructor(e){super(),ot(this,e,wC,bC,st,{color:0,size:1})}}const $C=xC;function kC(i){let e,n,t;const r=i[3].default,s=xt(r,i,i[2],null);let a=[{class:n=jt("flex items-center p-6 pt-0",i[0])},i[1]],o={};for(let u=0;u<a.length;u+=1)o=Ie(o,a[u]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(u){e=ue(u,"DIV",{class:!0});var p=$e(e);s&&s.l(p),p.forEach(I),this.h()},h(){Bt(e,o)},m(u,p){B(u,e,p),s&&s.m(e,null),t=!0},p(u,[p]){s&&s.p&&(!t||p&4)&&$t(s,r,u,u[2],t?Ct(r,u[2],p,null):kt(u[2]),null),Bt(e,o=St(a,[(!t||p&1&&n!==(n=jt("flex items-center p-6 pt-0",u[0])))&&{class:n},p&2&&u[1]]))},i(u){t||(T(s,u),t=!0)},o(u){E(s,u),t=!1},d(u){u&&I(e),s&&s.d(u)}}}function CC(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(2,a=u.$$scope)},[o,r,a,s]}class SC extends it{constructor(e){super(),ot(this,e,CC,kC,st,{class:0})}}var Rn=(i=>(i.HOME="",i.SOCIAL_NETWORK="social",i.SOCIAL_NETWORK_FEED="social/feed",i.SOCIAL_NETWORK_CONNECTIONS="social/connections",i.POINTS_AND_BADGES="points-badges",i.CHECK_INS="check-ins",i.FAVOURITES="favourites",i.SETTINGS="settings",i))(Rn||{});const IC=({params:i})=>({slug:i.slug});function TC(){return Object.values(Rn).map(i=>({slug:i}))}const x8=Object.freeze(Object.defineProperty({__proto__:null,entries:TC,load:IC},Symbol.toStringTag,{value:"Module"}));function PC(i){let e;const n=i[3].default,t=xt(n,i,i[11],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&2048)&&$t(t,n,r,r[11],e?Ct(n,r[11],s,null):kt(r[11]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function EC(i){let e,n;const t=[{class:jt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[PC]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new vw({props:r}),e.$on("click",i[4]),e.$on("keydown",i[5]),e.$on("focusin",i[6]),e.$on("focusout",i[7]),e.$on("pointerdown",i[8]),e.$on("pointerleave",i[9]),e.$on("pointermove",i[10]),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&7?St(t,[a&3&&{class:jt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[1]&&"pl-8",s[0])},a&4&&vn(s[2])]):{};a&2048&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function AC(i,e,n){const t=["class","inset"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{inset:u=void 0}=e;function p(F){Wt.call(this,i,F)}function _(F){Wt.call(this,i,F)}function b(F){Wt.call(this,i,F)}function $(F){Wt.call(this,i,F)}function P(F){Wt.call(this,i,F)}function L(F){Wt.call(this,i,F)}function z(F){Wt.call(this,i,F)}return i.$$set=F=>{e=Ie(Ie({},e),Dt(F)),n(2,r=at(e,t)),"class"in F&&n(0,o=F.class),"inset"in F&&n(1,u=F.inset),"$$scope"in F&&n(11,a=F.$$scope)},[o,u,r,s,p,_,b,$,P,L,z,a]}class Af extends it{constructor(e){super(),ot(this,e,AC,EC,st,{class:0,inset:1})}}function MC(i){let e;const n=i[3].default,t=xt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&$t(t,n,r,r[4],e?Ct(n,r[4],s,null):kt(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function DC(i){let e,n;const t=[{class:jt("px-2 py-1.5 text-sm font-semibold",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[MC]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new yw({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&7?St(t,[a&3&&{class:jt("px-2 py-1.5 text-sm font-semibold",s[1]&&"pl-8",s[0])},a&4&&vn(s[2])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function zC(i,e,n){const t=["class","inset"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{inset:u=void 0}=e;return i.$$set=p=>{e=Ie(Ie({},e),Dt(p)),n(2,r=at(e,t)),"class"in p&&n(0,o=p.class),"inset"in p&&n(1,u=p.inset),"$$scope"in p&&n(4,a=p.$$scope)},[o,u,r,s,a]}class LC extends it{constructor(e){super(),ot(this,e,zC,DC,st,{class:0,inset:1})}}function RC(i){let e;const n=i[5].default,t=xt(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,null):kt(r[7]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function OC(i){let e,n;const t=[{transition:i[2]},{transitionConfig:i[3]},{sideOffset:i[1]},{class:jt("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",i[0])},i[4]];let r={$$slots:{default:[RC]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new bw({props:r}),e.$on("keydown",i[6]),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&31?St(t,[a&4&&{transition:s[2]},a&8&&{transitionConfig:s[3]},a&2&&{sideOffset:s[1]},a&1&&{class:jt("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",s[0])},a&16&&vn(s[4])]):{};a&128&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function FC(i,e,n){const t=["class","sideOffset","transition","transitionConfig"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{sideOffset:u=4}=e,{transition:p=Id}=e,{transitionConfig:_=void 0}=e;function b($){Wt.call(this,i,$)}return i.$$set=$=>{e=Ie(Ie({},e),Dt($)),n(4,r=at(e,t)),"class"in $&&n(0,o=$.class),"sideOffset"in $&&n(1,u=$.sideOffset),"transition"in $&&n(2,p=$.transition),"transitionConfig"in $&&n(3,_=$.transitionConfig),"$$scope"in $&&n(7,a=$.$$scope)},[o,u,p,_,r,s,b,a]}class BC extends it{constructor(e){super(),ot(this,e,FC,OC,st,{class:0,sideOffset:1,transition:2,transitionConfig:3})}}function NC(i){let e,n;const t=[{class:jt("-mx-1 my-1 h-px bg-muted",i[0])},i[1]];let r={};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new ww({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("-mx-1 my-1 h-px bg-muted",s[0])},a&2&&vn(s[1])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function VC(i,e,n){const t=["class"];let r=at(e,t),{class:s=void 0}=e;return i.$$set=a=>{e=Ie(Ie({},e),Dt(a)),n(1,r=at(e,t)),"class"in a&&n(0,s=a.class)},[s,r]}class ov extends it{constructor(e){super(),ot(this,e,VC,NC,st,{class:0})}}const UC=xw,jC=$w,qC=V$;function GC(i){let e;const n=i[3].default,t=xt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&$t(t,n,r,r[4],e?Ct(n,r[4],s,null):kt(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function HC(i){let e,n;const t=[{delayMs:i[1]},{class:jt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",i[0])},i[2]];let r={$$slots:{default:[GC]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new w$({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&7?St(t,[a&2&&{delayMs:s[1]},a&1&&{class:jt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s[0])},a&4&&vn(s[2])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function ZC(i,e,n){const t=["class","delayMs"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{delayMs:u=void 0}=e;return i.$$set=p=>{e=Ie(Ie({},e),Dt(p)),n(2,r=at(e,t)),"class"in p&&n(0,o=p.class),"delayMs"in p&&n(1,u=p.delayMs),"$$scope"in p&&n(4,a=p.$$scope)},[o,u,r,s,a]}class WC extends it{constructor(e){super(),ot(this,e,ZC,HC,st,{class:0,delayMs:1})}}function KC(i){let e,n;const t=[{src:i[1]},{alt:i[2]},{class:jt("aspect-square h-full w-full",i[0])},i[3]];let r={};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new I$({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&15?St(t,[a&2&&{src:s[1]},a&4&&{alt:s[2]},a&1&&{class:jt("aspect-square h-full w-full",s[0])},a&8&&vn(s[3])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function XC(i,e,n){const t=["class","src","alt"];let r=at(e,t),{class:s=void 0}=e,{src:a=void 0}=e,{alt:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(3,r=at(e,t)),"class"in u&&n(0,s=u.class),"src"in u&&n(1,a=u.src),"alt"in u&&n(2,o=u.alt)},[s,a,o,r]}class JC extends it{constructor(e){super(),ot(this,e,XC,KC,st,{class:0,src:1,alt:2})}}function YC(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function QC(i){let e,n;const t=[{class:jt("flex h-full w-full items-center justify-center rounded-full bg-muted",i[0])},i[1]];let r={$$slots:{default:[YC]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new z$({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("flex h-full w-full items-center justify-center rounded-full bg-muted",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function eS(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}class Md extends it{constructor(e){super(),ot(this,e,eS,QC,st,{class:0})}}function tS(i){let e,n;return e=new Md({props:{"aria-label":"Profile Picture",class:"bg-error text-2xl",$$slots:{default:[sS]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function nS(i){let e,n,t,r=i[1].profile_picture!==void 0&&A_(i);return n=new Md({props:{"aria-label":"Profile Picture",$$slots:{default:[iS]},$$scope:{ctx:i}}}),{c(){r&&r.c(),e=ge(),q(n.$$.fragment)},l(s){r&&r.l(s),e=ve(s),Z(n.$$.fragment,s)},m(s,a){r&&r.m(s,a),B(s,e,a),G(n,s,a),t=!0},p(s,a){s[1].profile_picture!==void 0?r?(r.p(s,a),a&2&&T(r,1)):(r=A_(s),r.c(),T(r,1),r.m(e.parentNode,e)):r&&(vt(),E(r,1,1,()=>{r=null}),yt());const o={};a&524288&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){t||(T(r),T(n.$$.fragment,s),t=!0)},o(s){E(r),E(n.$$.fragment,s),t=!1},d(s){s&&I(e),r&&r.d(s),H(n,s)}}}function rS(i){let e,n;return e=new Md({props:{$$slots:{default:[oS]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function sS(i){let e;return{c(){e=He("!")},l(n){e=Ze(n,"!")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function A_(i){let e,n;return e=new JC({props:{src:i[1].profile_picture,alt:"Profile Picture","aria-label":"Profile Picture",class:"bg-card"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.src=t[1].profile_picture),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function iS(i){let e,n;return e=new sx({props:{class:"h-5 w-5"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function oS(i){let e;return{c(){e=ce("span"),this.h()},l(n){e=ue(n,"SPAN",{class:!0}),$e(e).forEach(I),this.h()},h(){se(e,"class","loading loading-ring loading-lg")},m(n,t){B(n,e,t)},p:gt,d(n){n&&I(e)}}}function aS(i){let e,n,t,r;const s=[rS,nS,tS],a=[];function o(u,p){return u[0]?0:u[3]?2:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function lS(i){let e,n;return e=new WC({props:{class:"h-10 w-10",$$slots:{default:[aS]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524299&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function cS(i){let e,n;return e=new yr({props:{variant:"ghost",builders:[i[18]],class:"relative h-8 w-8 rounded-full mx-1",$$slots:{default:[lS]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.builders=[t[18]]),r&524299&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function uS(i){let e,n,t,r,s,a;return e=new Af({props:{class:"font-normal cursor-pointer",$$slots:{default:[dS]},$$scope:{ctx:i}}}),e.$on("click",i[11]),t=new ov({}),s=new Af({props:{class:"font-normal cursor-pointer flex-col items-start gap-2",$$slots:{default:[_S]},$$scope:{ctx:i}}}),s.$on("click",i[13]),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),q(s.$$.fragment)},l(o){Z(e.$$.fragment,o),n=ve(o),Z(t.$$.fragment,o),r=ve(o),Z(s.$$.fragment,o)},m(o,u){G(e,o,u),B(o,n,u),G(t,o,u),B(o,r,u),G(s,o,u),a=!0},p(o,u){const p={};u&524290&&(p.$$scope={dirty:u,ctx:o}),e.$set(p);const _={};u&524340&&(_.$$scope={dirty:u,ctx:o}),s.$set(_)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(I(n),I(r)),H(e,o),H(t,o),H(s,o)}}}function fS(i){let e,n;return e=new LC({props:{class:"font-normal",$$slots:{default:[gS]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function hS(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-1hn9b8o"&&(e.innerHTML=n),this.h()},h(){se(e,"class","h-16 flex items-center justify-center")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function dS(i){let e,n,t=i[1].nickname+"",r,s,a,o,u=i[1].nickname+"",p;return{c(){e=ce("div"),n=ce("p"),r=He(t),s=ge(),a=ce("p"),o=He("@"),p=He(u),this.h()},l(_){e=ue(_,"DIV",{class:!0});var b=$e(e);n=ue(b,"P",{class:!0});var $=$e(n);r=Ze($,t),$.forEach(I),s=ve(b),a=ue(b,"P",{class:!0});var P=$e(a);o=Ze(P,"@"),p=Ze(P,u),P.forEach(I),b.forEach(I),this.h()},h(){se(n,"class","text-sm font-medium leading-none"),se(a,"class","text-xs leading-none text-muted-foreground"),se(e,"class","flex flex-col space-y-1")},m(_,b){B(_,e,b),ae(e,n),ae(n,r),ae(e,s),ae(e,a),ae(a,o),ae(a,p)},p(_,b){b&2&&t!==(t=_[1].nickname+"")&&Qt(r,t),b&2&&u!==(u=_[1].nickname+"")&&Qt(p,u)},d(_){_&&I(e)}}}function pS(i){let e,n;return e=new $a({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function mS(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){fr(e.src,n=Ss[i[2].badge])||se(e,"src",n),se(e,"class","h-14 w-14 -ml-0.5"),se(e,"alt","Current Total Points Badge Icon")},m(s,a){B(s,e,a),t||(r=mt(e,"error",i[12]),t=!0)},p(s,a){a&4&&!fr(e.src,n=Ss[s[2].badge])&&se(e,"src",n)},i:gt,o:gt,d(s){s&&I(e),t=!1,r()}}}function _S(i){let e,n,t=i[2].totalPoints+"",r,s,a,o,u,p,_,b,$=i[2].badge+"",P,L,z,F,U=i[2].previousThreshold+"",j,J,pe,re,te,de=i[2].threshold+"",me,Y;const we=[mS,pS],Ce=[];function _e(fe,Ee){return fe[4]?1:0}return u=_e(i),p=Ce[u]=we[u](i),{c(){e=ce("p"),n=He("Total Points: "),r=He(t),s=ge(),a=ce("div"),o=ce("div"),p.c(),_=ge(),b=ce("p"),P=He($),L=ge(),z=ce("div"),F=ce("p"),j=He(U),J=ge(),pe=ce("progress"),re=ge(),te=ce("p"),me=He(de),this.h()},l(fe){e=ue(fe,"P",{class:!0});var Ee=$e(e);n=Ze(Ee,"Total Points: "),r=Ze(Ee,t),Ee.forEach(I),s=ve(fe),a=ue(fe,"DIV",{class:!0});var je=$e(a);o=ue(je,"DIV",{class:!0});var ke=$e(o);p.l(ke),ke.forEach(I),_=ve(je),b=ue(je,"P",{class:!0});var nt=$e(b);P=Ze(nt,$),nt.forEach(I),L=ve(je),z=ue(je,"DIV",{class:!0});var bt=$e(z);F=ue(bt,"P",{class:!0});var zt=$e(F);j=Ze(zt,U),zt.forEach(I),J=ve(bt),pe=ue(bt,"PROGRESS",{class:!0,max:!0}),$e(pe).forEach(I),re=ve(bt),te=ue(bt,"P",{class:!0});var At=$e(te);me=Ze(At,de),At.forEach(I),bt.forEach(I),je.forEach(I),this.h()},h(){se(e,"class","text-sm font-medium leading-none"),se(o,"class","shrink-0"),se(b,"class","text-sm font-medium leading-none"),se(F,"class","text-sm font-medium leading-none text-muted-foreground"),se(pe,"class","progress progress-error grow"),pe.value=i[5],se(pe,"max","100"),se(te,"class","text-sm font-medium leading-none text-muted-foreground"),se(z,"class","flex self-stretch gap-2 items-center"),se(a,"class","flex flex-col space-y-1 items-center self-stretch")},m(fe,Ee){B(fe,e,Ee),ae(e,n),ae(e,r),B(fe,s,Ee),B(fe,a,Ee),ae(a,o),Ce[u].m(o,null),ae(a,_),ae(a,b),ae(b,P),ae(a,L),ae(a,z),ae(z,F),ae(F,j),ae(z,J),ae(z,pe),ae(z,re),ae(z,te),ae(te,me),Y=!0},p(fe,Ee){(!Y||Ee&4)&&t!==(t=fe[2].totalPoints+"")&&Qt(r,t);let je=u;u=_e(fe),u===je?Ce[u].p(fe,Ee):(vt(),E(Ce[je],1,1,()=>{Ce[je]=null}),yt(),p=Ce[u],p?p.p(fe,Ee):(p=Ce[u]=we[u](fe),p.c()),T(p,1),p.m(o,null)),(!Y||Ee&4)&&$!==($=fe[2].badge+"")&&Qt(P,$),(!Y||Ee&4)&&U!==(U=fe[2].previousThreshold+"")&&Qt(j,U),(!Y||Ee&32)&&(pe.value=fe[5]),(!Y||Ee&4)&&de!==(de=fe[2].threshold+"")&&Qt(me,de)},i(fe){Y||(T(p),Y=!0)},o(fe){E(p),Y=!1},d(fe){fe&&(I(e),I(s),I(a)),Ce[u].d()}}}function gS(i){let e,n='<p class="text-xs leading-none text-error">Failed To Fetch</p>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-5us5t3"&&(e.innerHTML=n),this.h()},h(){se(e,"class","flex flex-col space-y-1")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function vS(i){let e;return{c(){e=He("Settings")},l(n){e=Ze(n,"Settings")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function yS(i){let e;return{c(){e=He("Log out")},l(n){e=Ze(n,"Log out")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function bS(i){let e,n,t,r;return e=new Af({props:{class:"cursor-pointer",$$slots:{default:[vS]},$$scope:{ctx:i}}}),e.$on("click",i[14]),t=new Af({props:{class:"cursor-pointer",$$slots:{default:[yS]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&524288&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&524288&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function wS(i){let e,n,t,r,s,a,o;const u=[hS,fS,uS],p=[];function _(b,$){return b[0]?0:b[3]?1:2}return e=_(i),n=p[e]=u[e](i),r=new ov({}),a=new qC({props:{$$slots:{default:[bS]},$$scope:{ctx:i}}}),{c(){n.c(),t=ge(),q(r.$$.fragment),s=ge(),q(a.$$.fragment)},l(b){n.l(b),t=ve(b),Z(r.$$.fragment,b),s=ve(b),Z(a.$$.fragment,b)},m(b,$){p[e].m(b,$),B(b,t,$),G(r,b,$),B(b,s,$),G(a,b,$),o=!0},p(b,$){let P=e;e=_(b),e===P?p[e].p(b,$):(vt(),E(p[P],1,1,()=>{p[P]=null}),yt(),n=p[e],n?n.p(b,$):(n=p[e]=u[e](b),n.c()),T(n,1),n.m(t.parentNode,t));const L={};$&524288&&(L.$$scope={dirty:$,ctx:b}),a.$set(L)},i(b){o||(T(n),T(r.$$.fragment,b),T(a.$$.fragment,b),o=!0)},o(b){E(n),E(r.$$.fragment,b),E(a.$$.fragment,b),o=!1},d(b){b&&(I(t),I(s)),p[e].d(b),H(r,b),H(a,b)}}}function xS(i){let e,n,t,r;return e=new jC({props:{asChild:!0,$$slots:{default:[cS,({builder:s})=>({18:s}),({builder:s})=>s?262144:0]},$$scope:{ctx:i}}}),t=new BC({props:{class:"w-56",align:"end",$$slots:{default:[wS]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&786443&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&524351&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function $S(i){let e,n;return e=new UC({props:{$$slots:{default:[xS]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&524351&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}let M_=2e3;function kS(i,e,n){let t,r,s=!1,a=!0,o=!1;const u=gi("refreshAvatarData");let p;const _=async()=>{const te=await(await fetch("/api/settings/profile")).json();n(1,t=te),(typeof(t==null?void 0:t.nickname)!="string"||typeof(t==null?void 0:t.email)!="string"||typeof(t==null?void 0:t.description)!="string")&&n(3,s=!0);const me=await(await fetch("/api/points-badges/avatar")).json();n(2,r=me),(typeof(r==null?void 0:r.totalPoints)!="number"||typeof(r==null?void 0:r.badge)!="string"||!((r==null?void 0:r.badge)in Ss)||typeof(r==null?void 0:r.threshold)!="number"||typeof(r==null?void 0:r.previousThreshold)!="number")&&n(3,s=!0),n(7,p=Math.round((r.totalPoints-r.previousThreshold)*100/(r.threshold-r.previousThreshold))),p>100&&n(7,p=100),n(0,a=!1)};u.set(_);const b=async()=>{await Ew()&&Aw.verify()};let $;Sr(()=>(_(),$=ev.subscribe(_),()=>$()));let P=0,L,z,F=!1;xa(()=>clearInterval(L));const U=()=>va("/app"),j=()=>n(4,o=!0),J=()=>va("/app/points-badges"),pe=()=>va("/app/settings");return i.$$.update=()=>{i.$$.dirty&1921&&!a&&!F&&(n(10,F=!0),n(9,z=Date.now()),n(8,L=setInterval(()=>{const te=Date.now()-z;if(te<M_){const de=te/M_;n(5,P=p*nu(de))}else n(5,P=p),clearInterval(L)},2)))},[a,t,r,s,o,P,b,p,L,z,F,U,j,J,pe]}class CS extends it{constructor(e){super(),ot(this,e,kS,$S,st,{})}}function SS(i){let e,n,t,r,s,a,o,u;return{c(){e=ce("div"),n=ge(),t=ce("div"),r=ce("div"),s=ge(),a=ce("div"),o=ge(),u=ce("div"),this.h()},l(p){e=ue(p,"DIV",{class:!0}),$e(e).forEach(I),n=ve(p),t=ue(p,"DIV",{class:!0});var _=$e(t);r=ue(_,"DIV",{class:!0}),$e(r).forEach(I),s=ve(_),a=ue(_,"DIV",{class:!0}),$e(a).forEach(I),_.forEach(I),o=ve(p),u=ue(p,"DIV",{class:!0}),$e(u).forEach(I),this.h()},h(){se(e,"class","h-1 w-7 rounded bg-base-content transition-all"),ur(e,"w-0",!i[0]),ur(e,"opacity-0",!i[0]),ur(e,"opacity-100",i[0]),se(r,"class","absolute h-1 w-7 -translate-x-1/2 -translate-y-1/2 rounded bg-base-content transition-all"),ur(r,"rotate-45",!i[0]),se(a,"class","absolute h-1 w-7 -translate-x-1/2 -translate-y-1/2 rounded bg-base-content transition-all"),ur(a,"-rotate-45",!i[0]),se(t,"class","relative"),se(u,"class","h-1 w-7 rounded bg-base-content transition-all"),ur(u,"w-0",!i[0]),ur(u,"opacity-0",!i[0]),ur(u,"opacity-100",i[0])},m(p,_){B(p,e,_),B(p,n,_),B(p,t,_),ae(t,r),ae(t,s),ae(t,a),B(p,o,_),B(p,u,_)},p(p,_){_&1&&ur(e,"w-0",!p[0]),_&1&&ur(e,"opacity-0",!p[0]),_&1&&ur(e,"opacity-100",p[0]),_&1&&ur(r,"rotate-45",!p[0]),_&1&&ur(a,"-rotate-45",!p[0]),_&1&&ur(u,"w-0",!p[0]),_&1&&ur(u,"opacity-0",!p[0]),_&1&&ur(u,"opacity-100",p[0])},d(p){p&&(I(e),I(n),I(t),I(o),I(u))}}}function IS(i){let e,n,t,r,s,a="Natreon",o,u,p="Natreon",_,b,$;return t=new yr({props:{variant:"outline",size:"none",class:"flex-col btn btn-square p-0",$$slots:{default:[SS]},$$scope:{ctx:i}}}),t.$on("click",i[1]),b=new CS({}),{c(){e=ce("header"),n=ce("div"),q(t.$$.fragment),r=ge(),s=ce("h1"),s.textContent=a,o=ge(),u=ce("h1"),u.textContent=p,_=ge(),q(b.$$.fragment),this.h()},l(P){e=ue(P,"HEADER",{id:!0,class:!0});var L=$e(e);n=ue(L,"DIV",{class:!0});var z=$e(n);Z(t.$$.fragment,z),z.forEach(I),r=ve(L),s=ue(L,"H1",{class:!0,"data-svelte-h":!0}),bn(s)!=="svelte-1i53c1w"&&(s.textContent=a),o=ve(L),u=ue(L,"H1",{class:!0,"data-svelte-h":!0}),bn(u)!=="svelte-8xrexm"&&(u.textContent=p),_=ve(L),Z(b.$$.fragment,L),L.forEach(I),this.h()},h(){se(n,"class","px-1 md:hidden"),se(s,"class","select-none px-4 hidden md:block"),se(u,"class","select-none md:hidden absolute left-1/2 -translate-x-1/2"),se(e,"id","app-header"),se(e,"class","p-2 flex items-center justify-between sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60")},m(P,L){B(P,e,L),ae(e,n),G(t,n,null),ae(e,r),ae(e,s),ae(e,o),ae(e,u),ae(e,_),G(b,e,null),$=!0},p(P,[L]){const z={};L&5&&(z.$$scope={dirty:L,ctx:P}),t.$set(z)},i(P){$||(T(t.$$.fragment,P),T(b.$$.fragment,P),$=!0)},o(P){E(t.$$.fragment,P),E(b.$$.fragment,P),$=!1},d(P){P&&I(e),H(t),H(b)}}}function TS(i,e,n){let{menuClosed:t}=e;const r=()=>n(0,t=!t);return i.$$set=s=>{"menuClosed"in s&&n(0,t=s.menuClosed)},[t,r]}class PS extends it{constructor(e){super(),ot(this,e,TS,IS,st,{menuClosed:0})}}function ES(i){let e,n,t;return e=new w2({props:{class:"h-5 w-5 mr-2"}}),{c(){q(e.$$.fragment),n=He("Home")},l(r){Z(e.$$.fragment,r),n=Ze(r,"Home")},m(r,s){G(e,r,s),B(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function AS(i){let e,n,t;return e=new cx({props:{class:"h-5 w-5 mr-2"}}),{c(){q(e.$$.fragment),n=He("Social Network")},l(r){Z(e.$$.fragment,r),n=Ze(r,"Social Network")},m(r,s){G(e,r,s),B(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function MS(i){let e,n,t;return e=new kw({props:{class:"h-5 w-5 mr-2"}}),{c(){q(e.$$.fragment),n=He("Points & Badges")},l(r){Z(e.$$.fragment,r),n=Ze(r,"Points & Badges")},m(r,s){G(e,r,s),B(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function DS(i){let e,n,t;return e=new Td({props:{class:"h-5 w-5 mr-2"}}),{c(){q(e.$$.fragment),n=He("Checked-in POIs")},l(r){Z(e.$$.fragment,r),n=Ze(r,"Checked-in POIs")},m(r,s){G(e,r,s),B(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function zS(i){let e,n,t;return e=new Al({props:{class:"h-5 w-5 mr-2"}}),{c(){q(e.$$.fragment),n=He("Favourite POIs")},l(r){Z(e.$$.fragment,r),n=Ze(r,"Favourite POIs")},m(r,s){G(e,r,s),B(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function LS(i){let e,n,t;return e=new B2({props:{class:"h-5 w-5 mr-2"}}),{c(){q(e.$$.fragment),n=He("Profile Settings")},l(r){Z(e.$$.fragment,r),n=Ze(r,"Profile Settings")},m(r,s){G(e,r,s),B(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function RS(i){var Et,It,nn,yn,un;let e,n,t,r,s,a,o,u,p,_,b,$,P,L,z,F,U,j,J,pe,re,te,de,me,Y,we,Ce,_e,fe,Ee,je,ke,nt,bt,zt,At;return t=new yr({props:{variant:i[0]?"outline":"secondary",href:`/app${Rn.HOME?"/"+Rn.HOME:""}`,"data-testid":"home-button",class:"flex items-center text-sm justify-start",$$slots:{default:[ES]},$$scope:{ctx:i}}}),t.$on("click",i[2]),u=new yr({props:{variant:((Et=i[0])==null?void 0:Et.split("/")[0])===Rn.SOCIAL_NETWORK?"secondary":"outline",href:`/app${Rn.SOCIAL_NETWORK?"/"+Rn.SOCIAL_NETWORK:""}`,"data-testid":"social-network-button",class:"flex items-center text-sm justify-start",$$slots:{default:[AS]},$$scope:{ctx:i}}}),u.$on("click",i[3]),P=new yr({props:{variant:((It=i[0])==null?void 0:It.split("/")[0])===Rn.POINTS_AND_BADGES?"secondary":"outline",href:`/app${Rn.POINTS_AND_BADGES?"/"+Rn.POINTS_AND_BADGES:""}`,"data-testid":"points-and-badges-button",class:"flex items-center text-sm justify-start",$$slots:{default:[MS]},$$scope:{ctx:i}}}),P.$on("click",i[4]),j=new yr({props:{variant:((nn=i[0])==null?void 0:nn.split("/")[0])===Rn.CHECK_INS?"secondary":"outline",href:`/app${Rn.CHECK_INS?"/"+Rn.CHECK_INS:""}`,"data-testid":"checked-in-pois-button",class:"flex items-center text-sm justify-start",$$slots:{default:[DS]},$$scope:{ctx:i}}}),j.$on("click",i[5]),de=new yr({props:{variant:((yn=i[0])==null?void 0:yn.split("/")[0])===Rn.FAVOURITES?"secondary":"outline",href:`/app${Rn.FAVOURITES?"/"+Rn.FAVOURITES:""}`,"data-testid":"favourite-pois-button",class:"flex items-center text-sm justify-start",$$slots:{default:[zS]},$$scope:{ctx:i}}}),de.$on("click",i[6]),_e=new yr({props:{variant:((un=i[0])==null?void 0:un.split("/")[0])===Rn.SETTINGS?"secondary":"outline",href:`/app${Rn.SETTINGS?"/"+Rn.SETTINGS:""}`,"data-testid":"settings-button",class:"flex items-center text-sm justify-start",$$slots:{default:[LS]},$$scope:{ctx:i}}}),_e.$on("click",i[7]),zt=new lw({props:{variant:"secondary"}}),{c(){e=ce("ul"),n=ce("li"),q(t.$$.fragment),r=ge(),s=ce("div"),a=ge(),o=ce("li"),q(u.$$.fragment),p=ge(),_=ce("div"),b=ge(),$=ce("li"),q(P.$$.fragment),L=ge(),z=ce("div"),F=ge(),U=ce("li"),q(j.$$.fragment),J=ge(),pe=ce("div"),re=ge(),te=ce("li"),q(de.$$.fragment),me=ge(),Y=ce("div"),we=ge(),Ce=ce("li"),q(_e.$$.fragment),fe=ge(),Ee=ce("div"),je=ge(),ke=ce("div"),nt=ge(),bt=ce("li"),q(zt.$$.fragment),this.h()},l(Kt){e=ue(Kt,"UL",{class:!0,role:!0});var Tt=$e(e);n=ue(Tt,"LI",{role:!0});var Vt=$e(n);Z(t.$$.fragment,Vt),Vt.forEach(I),r=ve(Tt),s=ue(Tt,"DIV",{class:!0}),$e(s).forEach(I),a=ve(Tt),o=ue(Tt,"LI",{role:!0});var Ye=$e(o);Z(u.$$.fragment,Ye),Ye.forEach(I),p=ve(Tt),_=ue(Tt,"DIV",{class:!0}),$e(_).forEach(I),b=ve(Tt),$=ue(Tt,"LI",{role:!0});var Nt=$e($);Z(P.$$.fragment,Nt),Nt.forEach(I),L=ve(Tt),z=ue(Tt,"DIV",{class:!0}),$e(z).forEach(I),F=ve(Tt),U=ue(Tt,"LI",{role:!0});var Mt=$e(U);Z(j.$$.fragment,Mt),Mt.forEach(I),J=ve(Tt),pe=ue(Tt,"DIV",{class:!0}),$e(pe).forEach(I),re=ve(Tt),te=ue(Tt,"LI",{role:!0});var Qe=$e(te);Z(de.$$.fragment,Qe),Qe.forEach(I),me=ve(Tt),Y=ue(Tt,"DIV",{class:!0}),$e(Y).forEach(I),we=ve(Tt),Ce=ue(Tt,"LI",{role:!0});var en=$e(Ce);Z(_e.$$.fragment,en),en.forEach(I),fe=ve(Tt),Ee=ue(Tt,"DIV",{class:!0}),$e(Ee).forEach(I),je=ve(Tt),ke=ue(Tt,"DIV",{class:!0}),$e(ke).forEach(I),nt=ve(Tt),bt=ue(Tt,"LI",{role:!0});var et=$e(bt);Z(zt.$$.fragment,et),et.forEach(I),Tt.forEach(I),this.h()},h(){se(n,"role","tab"),se(s,"class","my-1"),se(o,"role","tab"),se(_,"class","my-1"),se($,"role","tab"),se(z,"class","my-1"),se(U,"role","tab"),se(pe,"class","my-1"),se(te,"role","tab"),se(Y,"class","my-1"),se(Ce,"role","tab"),se(Ee,"class","grow"),se(ke,"class","my-2"),se(bt,"role","tab"),se(e,"class","menu menu-lg p-4 min-h-full text-base-content flex-nowrap"),se(e,"role","tablist")},m(Kt,Tt){B(Kt,e,Tt),ae(e,n),G(t,n,null),ae(e,r),ae(e,s),ae(e,a),ae(e,o),G(u,o,null),ae(e,p),ae(e,_),ae(e,b),ae(e,$),G(P,$,null),ae(e,L),ae(e,z),ae(e,F),ae(e,U),G(j,U,null),ae(e,J),ae(e,pe),ae(e,re),ae(e,te),G(de,te,null),ae(e,me),ae(e,Y),ae(e,we),ae(e,Ce),G(_e,Ce,null),ae(e,fe),ae(e,Ee),ae(e,je),ae(e,ke),ae(e,nt),ae(e,bt),G(zt,bt,null),At=!0},p(Kt,[Tt]){var et,sn,ln,We,Vn;const Vt={};Tt&1&&(Vt.variant=Kt[0]?"outline":"secondary"),Tt&256&&(Vt.$$scope={dirty:Tt,ctx:Kt}),t.$set(Vt);const Ye={};Tt&1&&(Ye.variant=((et=Kt[0])==null?void 0:et.split("/")[0])===Rn.SOCIAL_NETWORK?"secondary":"outline"),Tt&256&&(Ye.$$scope={dirty:Tt,ctx:Kt}),u.$set(Ye);const Nt={};Tt&1&&(Nt.variant=((sn=Kt[0])==null?void 0:sn.split("/")[0])===Rn.POINTS_AND_BADGES?"secondary":"outline"),Tt&256&&(Nt.$$scope={dirty:Tt,ctx:Kt}),P.$set(Nt);const Mt={};Tt&1&&(Mt.variant=((ln=Kt[0])==null?void 0:ln.split("/")[0])===Rn.CHECK_INS?"secondary":"outline"),Tt&256&&(Mt.$$scope={dirty:Tt,ctx:Kt}),j.$set(Mt);const Qe={};Tt&1&&(Qe.variant=((We=Kt[0])==null?void 0:We.split("/")[0])===Rn.FAVOURITES?"secondary":"outline"),Tt&256&&(Qe.$$scope={dirty:Tt,ctx:Kt}),de.$set(Qe);const en={};Tt&1&&(en.variant=((Vn=Kt[0])==null?void 0:Vn.split("/")[0])===Rn.SETTINGS?"secondary":"outline"),Tt&256&&(en.$$scope={dirty:Tt,ctx:Kt}),_e.$set(en)},i(Kt){At||(T(t.$$.fragment,Kt),T(u.$$.fragment,Kt),T(P.$$.fragment,Kt),T(j.$$.fragment,Kt),T(de.$$.fragment,Kt),T(_e.$$.fragment,Kt),T(zt.$$.fragment,Kt),At=!0)},o(Kt){E(t.$$.fragment,Kt),E(u.$$.fragment,Kt),E(P.$$.fragment,Kt),E(j.$$.fragment,Kt),E(de.$$.fragment,Kt),E(_e.$$.fragment,Kt),E(zt.$$.fragment,Kt),At=!1},d(Kt){Kt&&I(e),H(t),H(u),H(P),H(j),H(de),H(_e),H(zt)}}}function OS(i,e,n){let{slug:t}=e;const r=Tl(),s=()=>r("sideMenuItemClicked"),a=()=>r("sideMenuItemClicked"),o=()=>r("sideMenuItemClicked"),u=()=>r("sideMenuItemClicked"),p=()=>r("sideMenuItemClicked"),_=()=>r("sideMenuItemClicked");return i.$$set=b=>{"slug"in b&&n(0,t=b.slug)},[t,r,s,a,o,u,p,_]}class av extends it{constructor(e){super(),ot(this,e,OS,RS,st,{slug:0})}}function FS(i){let e,n,t;return n=new av({props:{slug:i[0]}}),n.$on("sideMenuItemClicked",i[1]),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","hidden w-64 h-full flex-col md:flex shrink-0")},m(r,s){B(r,e,s),G(n,e,null),t=!0},p(r,[s]){const a={};s&1&&(a.slug=r[0]),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function BS(i,e,n){let{slug:t}=e;function r(s){Wt.call(this,i,s)}return i.$$set=s=>{"slug"in s&&n(0,t=s.slug)},[t,r]}class NS extends it{constructor(e){super(),ot(this,e,BS,FS,st,{slug:0})}}function VS(i){let e,n,t;return n=new av({props:{slug:i[1]}}),n.$on("sideMenuItemClicked",i[2]),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","absolute left-0 z-20 flex h-full w-64 flex-col transition-all md:hidden shrink-0 bg-background svelte-v8wrex"),ur(e,"menuClosed",i[0])},m(r,s){B(r,e,s),G(n,e,null),t=!0},p(r,[s]){const a={};s&2&&(a.slug=r[1]),n.$set(a),(!t||s&1)&&ur(e,"menuClosed",r[0])},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function US(i,e,n){let{menuClosed:t}=e,{slug:r}=e;function s(a){Wt.call(this,i,a)}return i.$$set=a=>{"menuClosed"in a&&n(0,t=a.menuClosed),"slug"in a&&n(1,r=a.slug)},[t,r,s]}class jS extends it{constructor(e){super(),ot(this,e,US,VS,st,{menuClosed:0,slug:1})}}function qS(i){let e,n,t,r;return e=new NS({props:{slug:i[1]}}),e.$on("sideMenuItemClicked",i[2]),t=new jS({props:{menuClosed:i[0],slug:i[1]}}),t.$on("sideMenuItemClicked",i[2]),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,[a]){const o={};a&2&&(o.slug=s[1]),e.$set(o);const u={};a&1&&(u.menuClosed=s[0]),a&2&&(u.slug=s[1]),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function GS(i,e,n){let{menuClosed:t}=e,{slug:r}=e;const s=()=>n(0,t=!0);return i.$$set=a=>{"menuClosed"in a&&n(0,t=a.menuClosed),"slug"in a&&n(1,r=a.slug)},[t,r,s]}class HS extends it{constructor(e){super(),ot(this,e,GS,qS,st,{menuClosed:0,slug:1})}}const Dd=Symbol.for("svelte-maplibre");function Ml(){return gi(Dd)}function ZS(i){let e=new WeakMap;return n=>{var a;let t=e.get(n.originalEvent);if(t!==void 0)return t;let s=(a=n.target.queryRenderedFeatures(n.point).find(o=>{var u;return(u=i.get(o.layer.id))==null?void 0:u.interactive}))==null?void 0:a.layer.id;return e.set(n.originalEvent,s),s}}function WS(){let i=new Map;return Si(Dd,{map:_r(null),source:ga(null),layer:ga(null),popupTarget:ga(null),cluster:_r(),loadedImages:_r(new Set),minzoom:_r(0),maxzoom:_r(24),layerEvent:_r(null),layerInfo:i,eventTopMost:ZS(i)})}function D_(i){return{subscribe:i.subscribe}}function KS({key:i,setPopupTarget:e=!1,setCluster:n=!1,setMouseEvent:t=!1}){let r=Ml(),s=_r(null),a=D_(s),o={...r,[i]:D_(s)};if(e&&(o.popupTarget=a),t){let u=_r(null);o.layerEvent=u,r.layerEvent=u}return n&&(o.cluster=_r()),Si(Dd,o),{...r,self:s}}function XS(){return KS({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function JS(i){return"layerType"in i&&i.layerType==="deckgl"}var lv={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.3/LICENSE.txt
 */(function(i,e){(function(n,t){i.exports=t()})(Mw,function(){var n={},t={};function r(a,o,u){if(t[a]=u,a==="index"){var p="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",_={};return t.shared(_),t.index(n,_),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([p],{type:"text/javascript"}))),n}}r("shared",["exports"],function(a){function o(f,l,h,m){return new(h||(h=Promise))(function(y,k){function C(O){try{D(m.next(O))}catch(V){k(V)}}function S(O){try{D(m.throw(O))}catch(V){k(V)}}function D(O){var V;O.done?y(O.value):(V=O.value,V instanceof h?V:new h(function(W){W(V)})).then(C,S)}D((m=m.apply(f,l||[])).next())})}function u(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}typeof SuppressedError=="function"&&SuppressedError;var p=_;function _(f,l){this.x=f,this.y=l}_.prototype={clone:function(){return new _(this.x,this.y)},add:function(f){return this.clone()._add(f)},sub:function(f){return this.clone()._sub(f)},multByPoint:function(f){return this.clone()._multByPoint(f)},divByPoint:function(f){return this.clone()._divByPoint(f)},mult:function(f){return this.clone()._mult(f)},div:function(f){return this.clone()._div(f)},rotate:function(f){return this.clone()._rotate(f)},rotateAround:function(f,l){return this.clone()._rotateAround(f,l)},matMult:function(f){return this.clone()._matMult(f)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(f){return this.x===f.x&&this.y===f.y},dist:function(f){return Math.sqrt(this.distSqr(f))},distSqr:function(f){var l=f.x-this.x,h=f.y-this.y;return l*l+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith:function(f){return this.angleWithSep(f.x,f.y)},angleWithSep:function(f,l){return Math.atan2(this.x*l-this.y*f,this.x*f+this.y*l)},_matMult:function(f){var l=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=l,this},_add:function(f){return this.x+=f.x,this.y+=f.y,this},_sub:function(f){return this.x-=f.x,this.y-=f.y,this},_mult:function(f){return this.x*=f,this.y*=f,this},_div:function(f){return this.x/=f,this.y/=f,this},_multByPoint:function(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint:function(f){return this.x/=f.x,this.y/=f.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var f=this.y;return this.y=this.x,this.x=-f,this},_rotate:function(f){var l=Math.cos(f),h=Math.sin(f),m=h*this.x+l*this.y;return this.x=l*this.x-h*this.y,this.y=m,this},_rotateAround:function(f,l){var h=Math.cos(f),m=Math.sin(f),y=l.y+m*(this.x-l.x)+h*(this.y-l.y);return this.x=l.x+h*(this.x-l.x)-m*(this.y-l.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},_.convert=function(f){return f instanceof _?f:Array.isArray(f)?new _(f[0],f[1]):f};var b=u(p),$=P;function P(f,l,h,m){this.cx=3*f,this.bx=3*(h-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=l,this.p2x=h,this.p2y=m}P.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,l){if(l===void 0&&(l=1e-6),f<0)return 0;if(f>1)return 1;for(var h=f,m=0;m<8;m++){var y=this.sampleCurveX(h)-f;if(Math.abs(y)<l)return h;var k=this.sampleCurveDerivativeX(h);if(Math.abs(k)<1e-6)break;h-=y/k}var C=0,S=1;for(h=f,m=0;m<20&&(y=this.sampleCurveX(h),!(Math.abs(y-f)<l));m++)f>y?C=h:S=h,h=.5*(S-C)+C;return h},solve:function(f,l){return this.sampleCurveY(this.solveCurveX(f,l))}};var L=u($);let z,F;function U(){return z==null&&(z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),z}function j(){if(F==null&&(F=!1,U())){const l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<5*5;m++){const y=4*m;l.fillStyle=`rgb(${y},${y+1},${y+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}const h=l.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&h[m]!==m){F=!0;break}}}return F||!1}function J(f,l,h,m){const y=new L(f,l,h,m);return function(k){return y.solve(k)}}const pe=J(.25,.1,.25,1);function re(f,l,h){return Math.min(h,Math.max(l,f))}function te(f,l,h){const m=h-l,y=((f-l)%m+m)%m+l;return y===l?h:y}function de(f,...l){for(const h of l)for(const m in h)f[m]=h[m];return f}let me=1;function Y(f,l,h){const m={};for(const y in f)m[y]=l.call(h||this,f[y],y,f);return m}function we(f,l,h){const m={};for(const y in f)l.call(h||this,f[y],y,f)&&(m[y]=f[y]);return m}function Ce(f){return Array.isArray(f)?f.map(Ce):typeof f=="object"&&f?Y(f,Ce):f}const _e={};function fe(f){_e[f]||(typeof console<"u"&&console.warn(f),_e[f]=!0)}function Ee(f,l,h){return(h.y-f.y)*(l.x-f.x)>(l.y-f.y)*(h.x-f.x)}function je(f){let l=0;for(let h,m,y=0,k=f.length,C=k-1;y<k;C=y++)h=f[y],m=f[C],l+=(m.x-h.x)*(h.y+m.y);return l}function ke(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let nt=null;function bt(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function At(f,l,h,m,y){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const k=new VideoFrame(f,{timestamp:0});try{const C=k==null?void 0:k.format;if(!C||!C.startsWith("BGR")&&!C.startsWith("RGB"))throw new Error(`Unrecognized format ${C}`);const S=C.startsWith("BGR"),D=new Uint8ClampedArray(m*y*4);if(yield k.copyTo(D,function(O,V,W,ee,ie){const le=4*Math.max(-V,0),be=(Math.max(0,W)-W)*ee*4+le,Pe=4*ee,ze=Math.max(0,V),Ge=Math.max(0,W);return{rect:{x:ze,y:Ge,width:Math.min(O.width,V+ee)-ze,height:Math.min(O.height,W+ie)-Ge},layout:[{offset:be,stride:Pe}]}}(f,l,h,m,y)),S)for(let O=0;O<D.length;O+=4){const V=D[O];D[O]=D[O+2],D[O+2]=V}return D}finally{k.close()}})}let Et,It;const nn="AbortError";function yn(){return new Error(nn)}const un={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Kt(f){return un.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Tt="global-dispatcher";class Vt extends Error{constructor(l,h,m,y){super(`AJAXError: ${h} (${l}): ${m}`),this.status=l,this.statusText=h,this.url=m,this.body=y}}const Ye=()=>ke(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Nt=function(f,l){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const m=Kt(f.url);if(m)return m(f,l);if(ke(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Tt},l)}if(!(/^file:/.test(h=f.url)||/^file:/.test(Ye())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,y){return o(this,void 0,void 0,function*(){const k=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:Ye(),signal:y.signal});m.type==="json"&&k.headers.set("Accept","application/json");const C=yield fetch(k);if(!C.ok){const O=yield C.blob();throw new Vt(C.status,C.statusText,m.url,O)}let S;S=m.type==="arrayBuffer"||m.type==="image"?C.arrayBuffer():m.type==="json"?C.json():C.text();const D=yield S;if(y.signal.aborted)throw yn();return{data:D,cacheControl:C.headers.get("Cache-Control"),expires:C.headers.get("Expires")}})}(f,l);if(ke(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Tt},l)}var h;return function(m,y){return new Promise((k,C)=>{const S=new XMLHttpRequest;S.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(S.responseType="arraybuffer");for(const D in m.headers)S.setRequestHeader(D,m.headers[D]);m.type==="json"&&(S.responseType="text",S.setRequestHeader("Accept","application/json")),S.withCredentials=m.credentials==="include",S.onerror=()=>{C(new Error(S.statusText))},S.onload=()=>{if(!y.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let D=S.response;if(m.type==="json")try{D=JSON.parse(S.response)}catch(O){return void C(O)}k({data:D,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{const D=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});C(new Vt(S.status,S.statusText,m.url,D))}},y.signal.addEventListener("abort",()=>{S.abort(),C(yn())}),S.send(m.body)})}(f,l)};function Mt(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const l=new URL(f),h=window.location;return l.protocol===h.protocol&&l.host===h.host}function Qe(f,l,h){h[f]&&h[f].indexOf(l)!==-1||(h[f]=h[f]||[],h[f].push(l))}function en(f,l,h){if(h&&h[f]){const m=h[f].indexOf(l);m!==-1&&h[f].splice(m,1)}}class et{constructor(l,h={}){de(this,h),this.type=l}}class sn extends et{constructor(l,h={}){super("error",de({error:l},h))}}class ln{on(l,h){return this._listeners=this._listeners||{},Qe(l,h,this._listeners),this}off(l,h){return en(l,h,this._listeners),en(l,h,this._oneTimeListeners),this}once(l,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Qe(l,h,this._oneTimeListeners),this):new Promise(m=>this.once(l,m))}fire(l,h){typeof l=="string"&&(l=new et(l,h||{}));const m=l.type;if(this.listens(m)){l.target=this;const y=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const S of y)S.call(this,l);const k=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const S of k)en(m,S,this._oneTimeListeners),S.call(this,l);const C=this._eventedParent;C&&(de(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(l))}else l instanceof sn&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,h){return this._eventedParent=l,this._eventedParentData=h,this}}var We={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Vn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function xr(f,l){const h={};for(const m in f)m!=="ref"&&(h[m]=f[m]);return Vn.forEach(m=>{m in l&&(h[m]=l[m])}),h}function xn(f,l){if(Array.isArray(f)){if(!Array.isArray(l)||f.length!==l.length)return!1;for(let h=0;h<f.length;h++)if(!xn(f[h],l[h]))return!1;return!0}if(typeof f=="object"&&f!==null&&l!==null){if(typeof l!="object"||Object.keys(f).length!==Object.keys(l).length)return!1;for(const h in f)if(!xn(f[h],l[h]))return!1;return!0}return f===l}function Qn(f,l){f.push(l)}function is(f,l,h){Qn(h,{command:"addSource",args:[f,l[f]]})}function ps(f,l,h){Qn(l,{command:"removeSource",args:[f]}),h[f]=!0}function Fs(f,l,h,m){ps(f,h,m),is(f,l,h)}function Ws(f,l,h){let m;for(m in f[h])if(Object.prototype.hasOwnProperty.call(f[h],m)&&m!=="data"&&!xn(f[h][m],l[h][m]))return!1;for(m in l[h])if(Object.prototype.hasOwnProperty.call(l[h],m)&&m!=="data"&&!xn(f[h][m],l[h][m]))return!1;return!0}function Bs(f,l,h,m,y,k){f=f||{},l=l||{};for(const C in f)Object.prototype.hasOwnProperty.call(f,C)&&(xn(f[C],l[C])||h.push({command:k,args:[m,C,l[C],y]}));for(const C in l)Object.prototype.hasOwnProperty.call(l,C)&&!Object.prototype.hasOwnProperty.call(f,C)&&(xn(f[C],l[C])||h.push({command:k,args:[m,C,l[C],y]}))}function ri(f){return f.id}function ft(f,l){return f[l.id]=l,f}class Lt{constructor(l,h,m,y){this.message=(l?`${l}: `:"")+m,y&&(this.identifier=y),h!=null&&h.__line__&&(this.line=h.__line__)}}function ms(f,...l){for(const h of l)for(const m in h)f[m]=h[m];return f}class Hr extends Error{constructor(l,h){super(h),this.message=h,this.key=l}}class Hi{constructor(l,h=[]){this.parent=l,this.bindings={};for(const[m,y]of h)this.bindings[m]=y}concat(l){return new Hi(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}const Zr={kind:"null"},Ut={kind:"number"},Sn={kind:"string"},Cn={kind:"boolean"},gr={kind:"color"},Ns={kind:"object"},$n={kind:"value"},si={kind:"collator"},Lr={kind:"formatted"},Ae={kind:"padding"},Q={kind:"resolvedImage"},ne={kind:"variableAnchorOffsetCollection"};function he(f,l){return{kind:"array",itemType:f,N:l}}function xe(f){if(f.kind==="array"){const l=xe(f.itemType);return typeof f.N=="number"?`array<${l}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${l}>`}return f.kind}const Fe=[Zr,Ut,Sn,Cn,gr,Lr,Ns,he($n),Ae,Q,ne];function Be(f,l){if(l.kind==="error")return null;if(f.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Be(f.itemType,l.itemType))&&(typeof f.N!="number"||f.N===l.N))return null}else{if(f.kind===l.kind)return null;if(f.kind==="value"){for(const h of Fe)if(!Be(h,l))return null}}return`Expected ${xe(f)} but found ${xe(l)} instead.`}function qe(f,l){return l.some(h=>h.kind===f.kind)}function Re(f,l){return l.some(h=>h==="null"?f===null:h==="array"?Array.isArray(f):h==="object"?f&&!Array.isArray(f)&&typeof f=="object":h===typeof f)}function Ke(f,l){return f.kind==="array"&&l.kind==="array"?f.itemType.kind===l.itemType.kind&&typeof f.N=="number":f.kind===l.kind}const dt=.96422,ct=.82521,ut=4/29,hn=6/29,mn=3*hn*hn,In=hn*hn*hn,kn=Math.PI/180,Fn=180/Math.PI;function Kn(f){return(f%=360)<0&&(f+=360),f}function nr([f,l,h,m]){let y,k;const C=Mn((.2225045*(f=Ir(f))+.7168786*(l=Ir(l))+.0606169*(h=Ir(h)))/1);f===l&&l===h?y=k=C:(y=Mn((.4360747*f+.3850649*l+.1430804*h)/dt),k=Mn((.0139322*f+.0971045*l+.7141733*h)/ct));const S=116*C-16;return[S<0?0:S,500*(y-C),200*(C-k),m]}function Ir(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Mn(f){return f>In?Math.pow(f,1/3):f/mn+ut}function hr([f,l,h,m]){let y=(f+16)/116,k=isNaN(l)?y:y+l/500,C=isNaN(h)?y:y-h/200;return y=1*os(y),k=dt*os(k),C=ct*os(C),[Rr(3.1338561*k-1.6168667*y-.4906146*C),Rr(-.9787684*k+1.9161415*y+.033454*C),Rr(.0719453*k-.2289914*y+1.4052427*C),m]}function Rr(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function os(f){return f>hn?f*f*f:mn*(f-ut)}function _s(f){return parseInt(f.padEnd(2,f),16)/255}function Wr(f,l){return ii(l?f/100:f,0,1)}function ii(f,l,h){return Math.min(Math.max(l,f),h)}function uu(f){return!f.some(Number.isNaN)}const Jf={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Hn{constructor(l,h,m,y=1,k=!0){this.r=l,this.g=h,this.b=m,this.a=y,k||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[l,h,m,y]))}static parse(l){if(l instanceof Hn)return l;if(typeof l!="string")return;const h=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const y=Jf[m];if(y){const[C,S,D]=y;return[C/255,S/255,D/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const C=m.length<6?1:2;let S=1;return[_s(m.slice(S,S+=C)),_s(m.slice(S,S+=C)),_s(m.slice(S,S+=C)),_s(m.slice(S,S+C)||"ff")]}if(m.startsWith("rgb")){const C=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[S,D,O,V,W,ee,ie,le,be,Pe,ze,Ge]=C,Le=[V||" ",ie||" ",Pe].join("");if(Le==="  "||Le==="  /"||Le===",,"||Le===",,,"){const Ne=[O,ee,be].join(""),lt=Ne==="%%%"?100:Ne===""?255:0;if(lt){const ht=[ii(+D/lt,0,1),ii(+W/lt,0,1),ii(+le/lt,0,1),ze?Wr(+ze,Ge):1];if(uu(ht))return ht}}return}}const k=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[C,S,D,O,V,W,ee,ie,le]=k,be=[D||" ",V||" ",ee].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Pe=[+S,ii(+O,0,100),ii(+W,0,100),ie?Wr(+ie,le):1];if(uu(Pe))return function([ze,Ge,Le,Ne]){function lt(ht){const Yt=(ht+ze/30)%12,an=Ge*Math.min(Le,1-Le);return Le-an*Math.max(-1,Math.min(Yt-3,9-Yt,1))}return ze=Kn(ze),Ge/=100,Le/=100,[lt(0),lt(8),lt(4),Ne]}(Pe)}}}(l);return h?new Hn(...h,!1):void 0}get rgb(){const{r:l,g:h,b:m,a:y}=this,k=y||1/0;return this.overwriteGetter("rgb",[l/k,h/k,m/k,y])}get hcl(){return this.overwriteGetter("hcl",function(l){const[h,m,y,k]=nr(l),C=Math.sqrt(m*m+y*y);return[Math.round(1e4*C)?Kn(Math.atan2(y,m)*Fn):NaN,C,h,k]}(this.rgb))}get lab(){return this.overwriteGetter("lab",nr(this.rgb))}overwriteGetter(l,h){return Object.defineProperty(this,l,{value:h}),h}toString(){const[l,h,m,y]=this.rgb;return`rgba(${[l,h,m].map(k=>Math.round(255*k)).join(",")},${y})`}}Hn.black=new Hn(0,0,0,1),Hn.white=new Hn(1,1,1,1),Hn.transparent=new Hn(0,0,0,0),Hn.red=new Hn(1,0,0,1);class Rl{constructor(l,h,m){this.sensitivity=l?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,h){return this.collator.compare(l,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ol{constructor(l,h,m,y,k){this.text=l,this.image=h,this.scale=m,this.fontStack=y,this.textColor=k}}class Ts{constructor(l){this.sections=l}static fromString(l){return new Ts([new Ol(l,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof Ts?l:Ts.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class gs{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof gs)return l;if(typeof l=="number")return new gs([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(const h of l)if(typeof h!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new gs(l)}}toString(){return JSON.stringify(this.values)}}const Uo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Vs{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Vs)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let h=0;h<l.length;h+=2){const m=l[h],y=l[h+1];if(typeof m!="string"||!Uo.has(m)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new Vs(l)}}toString(){return JSON.stringify(this.values)}}class Us{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Us({name:l,available:!1}):null}}function ho(f,l,h,m){return typeof f=="number"&&f>=0&&f<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof h=="number"&&h>=0&&h<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[f,l,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[f,l,h,m]:[f,l,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ia(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Hn||f instanceof Rl||f instanceof Ts||f instanceof gs||f instanceof Vs||f instanceof Us)return!0;if(Array.isArray(f)){for(const l of f)if(!Ia(l))return!1;return!0}if(typeof f=="object"){for(const l in f)if(!Ia(f[l]))return!1;return!0}return!1}function Tr(f){if(f===null)return Zr;if(typeof f=="string")return Sn;if(typeof f=="boolean")return Cn;if(typeof f=="number")return Ut;if(f instanceof Hn)return gr;if(f instanceof Rl)return si;if(f instanceof Ts)return Lr;if(f instanceof gs)return Ae;if(f instanceof Vs)return ne;if(f instanceof Us)return Q;if(Array.isArray(f)){const l=f.length;let h;for(const m of f){const y=Tr(m);if(h){if(h===y)continue;h=$n;break}h=y}return he(h||$n,l)}return Ns}function jo(f){const l=typeof f;return f===null?"":l==="string"||l==="number"||l==="boolean"?String(f):f instanceof Hn||f instanceof Ts||f instanceof gs||f instanceof Vs||f instanceof Us?f.toString():JSON.stringify(f)}class Ii{constructor(l,h){this.type=l,this.value=h}static parse(l,h){if(l.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Ia(l[1]))return h.error("invalid value");const m=l[1];let y=Tr(m);const k=h.expectedType;return y.kind!=="array"||y.N!==0||!k||k.kind!=="array"||typeof k.N=="number"&&k.N!==0||(y=k),new Ii(y,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class or{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}const Ta={string:Sn,number:Ut,boolean:Cn,object:Ns};class Ps{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");let m,y=1;const k=l[0];if(k==="array"){let S,D;if(l.length>2){const O=l[1];if(typeof O!="string"||!(O in Ta)||O==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);S=Ta[O],y++}else S=$n;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return h.error('The length argument to "array" must be a positive integer literal',2);D=l[2],y++}m=he(S,D)}else{if(!Ta[k])throw new Error(`Types doesn't contain name = ${k}`);m=Ta[k]}const C=[];for(;y<l.length;y++){const S=h.parse(l[y],y,$n);if(!S)return null;C.push(S)}return new Ps(m,C)}evaluate(l){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(l);if(!Be(this.type,Tr(m)))return m;if(h===this.args.length-1)throw new or(`Expected value to be of type ${xe(this.type)}, but found ${xe(Tr(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const Pa={"to-boolean":Cn,"to-color":gr,"to-number":Ut,"to-string":Sn};class oi{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const m=l[0];if(!Pa[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return h.error("Expected one argument.");const y=Pa[m],k=[];for(let C=1;C<l.length;C++){const S=h.parse(l[C],C,$n);if(!S)return null;k.push(S)}return new oi(y,k)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let h,m;for(const y of this.args){if(h=y.evaluate(l),m=null,h instanceof Hn)return h;if(typeof h=="string"){const k=l.parseColor(h);if(k)return k}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:ho(h[0],h[1],h[2],h[3]),!m))return new Hn(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new or(m||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const m of this.args){h=m.evaluate(l);const y=gs.parse(h);if(y)return y}throw new or(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const m of this.args){h=m.evaluate(l);const y=Vs.parse(h);if(y)return y}throw new or(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const m of this.args){if(h=m.evaluate(l),h===null)return 0;const y=Number(h);if(!isNaN(y))return y}throw new or(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Ts.fromString(jo(this.args[0].evaluate(l)));case"resolvedImage":return Us.fromString(jo(this.args[0].evaluate(l)));default:return jo(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}const qo=["Unknown","Point","LineString","Polygon"];class Zn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?qo[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let h=this._parseColorCache[l];return h||(h=this._parseColorCache[l]=Hn.parse(l)),h}}class Ea{constructor(l,h,m=[],y,k=new Hi,C=[]){this.registry=l,this.path=m,this.key=m.map(S=>`[${S}]`).join(""),this.scope=k,this.errors=C,this.expectedType=y,this._isConstant=h}parse(l,h,m,y,k={}){return h?this.concat(h,m,y)._parse(l,k):this._parse(l,k)}_parse(l,h){function m(y,k,C){return C==="assert"?new Ps(k,[y]):C==="coerce"?new oi(k,[y]):y}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=l[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const k=this.registry[y];if(k){let C=k.parse(l,this);if(!C)return null;if(this.expectedType){const S=this.expectedType,D=C.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||D.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||D.kind!=="value"&&D.kind!=="string")if(S.kind!=="padding"||D.kind!=="value"&&D.kind!=="number"&&D.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||D.kind!=="value"&&D.kind!=="array"){if(this.checkSubtype(S,D))return null}else C=m(C,S,h.typeAnnotation||"coerce");else C=m(C,S,h.typeAnnotation||"coerce");else C=m(C,S,h.typeAnnotation||"coerce");else C=m(C,S,h.typeAnnotation||"assert")}if(!(C instanceof Ii)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){const S=new Zn;try{C=new Ii(C.type,C.evaluate(S))}catch(D){return this.error(D.message),null}}return C}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof l} instead.`)}concat(l,h,m){const y=typeof l=="number"?this.path.concat(l):this.path,k=m?this.scope.concat(m):this.scope;return new Ea(this.registry,this._isConstant,y,h||null,k,this.errors)}error(l,...h){const m=`${this.key}${h.map(y=>`[${y}]`).join("")}`;this.errors.push(new Hr(m,l))}checkSubtype(l,h){const m=Be(l,h);return m&&this.error(m),m}}class po{constructor(l,h,m){this.type=si,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=h}static parse(l,h){if(l.length!==2)return h.error("Expected one argument.");const m=l[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");const y=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Cn);if(!y)return null;const k=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Cn);if(!k)return null;let C=null;return m.locale&&(C=h.parse(m.locale,1,Sn),!C)?null:new po(y,k,C)}evaluate(l){return new Rl(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}const Ti=8192;function Aa(f,l){f[0]=Math.min(f[0],l[0]),f[1]=Math.min(f[1],l[1]),f[2]=Math.max(f[2],l[0]),f[3]=Math.max(f[3],l[1])}function Go(f,l){return!(f[0]<=l[0]||f[2]>=l[2]||f[1]<=l[1]||f[3]>=l[3])}function Yf(f,l){const h=(180+f[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,y=Math.pow(2,l.z);return[Math.round(h*y*Ti),Math.round(m*y*Ti)]}function fu(f,l,h){const m=f[0]-l[0],y=f[1]-l[1],k=f[0]-h[0],C=f[1]-h[1];return m*C-k*y==0&&m*k<=0&&y*C<=0}function Ma(f,l){let h=!1;for(let C=0,S=l.length;C<S;C++){const D=l[C];for(let O=0,V=D.length;O<V-1;O++){if(fu(f,D[O],D[O+1]))return!1;(y=D[O])[1]>(m=f)[1]!=(k=D[O+1])[1]>m[1]&&m[0]<(k[0]-y[0])*(m[1]-y[1])/(k[1]-y[1])+y[0]&&(h=!h)}}var m,y,k;return h}function Qf(f,l){for(let h=0;h<l.length;h++)if(Ma(f,l[h]))return!0;return!1}function hu(f,l,h,m){const y=m[0]-h[0],k=m[1]-h[1],C=(f[0]-h[0])*k-y*(f[1]-h[1]),S=(l[0]-h[0])*k-y*(l[1]-h[1]);return C>0&&S<0||C<0&&S>0}function eh(f,l,h){for(const O of h)for(let V=0;V<O.length-1;++V)if((S=[(C=O[V+1])[0]-(k=O[V])[0],C[1]-k[1]])[0]*(D=[(y=l)[0]-(m=f)[0],y[1]-m[1]])[1]-S[1]*D[0]!=0&&hu(m,y,k,C)&&hu(k,C,m,y))return!0;var m,y,k,C,S,D;return!1}function du(f,l){for(let h=0;h<f.length;++h)if(!Ma(f[h],l))return!1;for(let h=0;h<f.length-1;++h)if(eh(f[h],f[h+1],l))return!1;return!0}function pu(f,l){for(let h=0;h<l.length;h++)if(du(f,l[h]))return!0;return!1}function Da(f,l,h){const m=[];for(let y=0;y<f.length;y++){const k=[];for(let C=0;C<f[y].length;C++){const S=Yf(f[y][C],h);Aa(l,S),k.push(S)}m.push(k)}return m}function mu(f,l,h){const m=[];for(let y=0;y<f.length;y++){const k=Da(f[y],l,h);m.push(k)}return m}function _u(f,l,h,m){if(f[0]<h[0]||f[0]>h[2]){const y=.5*m;let k=f[0]-h[0]>y?-m:h[0]-f[0]>y?m:0;k===0&&(k=f[0]-h[2]>y?-m:h[2]-f[0]>y?m:0),f[0]+=k}Aa(l,f)}function za(f,l,h,m){const y=Math.pow(2,m.z)*Ti,k=[m.x*Ti,m.y*Ti],C=[];for(const S of f)for(const D of S){const O=[D.x+k[0],D.y+k[1]];_u(O,l,h,y),C.push(O)}return C}function gu(f,l,h,m){const y=Math.pow(2,m.z)*Ti,k=[m.x*Ti,m.y*Ti],C=[];for(const D of f){const O=[];for(const V of D){const W=[V.x+k[0],V.y+k[1]];Aa(l,W),O.push(W)}C.push(O)}if(l[2]-l[0]<=y/2){(S=l)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const D of C)for(const O of D)_u(O,l,h,y)}var S;return C}class Zi{constructor(l,h){this.type=Cn,this.geojson=l,this.geometries=h}static parse(l,h){if(l.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Ia(l[1])){const m=l[1];if(m.type==="FeatureCollection"){const y=[];for(const k of m.features){const{type:C,coordinates:S}=k.geometry;C==="Polygon"&&y.push(S),C==="MultiPolygon"&&y.push(...S)}if(y.length)return new Zi(m,{type:"MultiPolygon",coordinates:y})}else if(m.type==="Feature"){const y=m.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Zi(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Zi(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(h,m){const y=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],C=h.canonicalID();if(m.type==="Polygon"){const S=Da(m.coordinates,k,C),D=za(h.geometry(),y,k,C);if(!Go(y,k))return!1;for(const O of D)if(!Ma(O,S))return!1}if(m.type==="MultiPolygon"){const S=mu(m.coordinates,k,C),D=za(h.geometry(),y,k,C);if(!Go(y,k))return!1;for(const O of D)if(!Qf(O,S))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(h,m){const y=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],C=h.canonicalID();if(m.type==="Polygon"){const S=Da(m.coordinates,k,C),D=gu(h.geometry(),y,k,C);if(!Go(y,k))return!1;for(const O of D)if(!du(O,S))return!1}if(m.type==="MultiPolygon"){const S=mu(m.coordinates,k,C),D=gu(h.geometry(),y,k,C);if(!Go(y,k))return!1;for(const O of D)if(!pu(O,S))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class La{constructor(l,h){this.type=h.type,this.name=l,this.boundExpression=h}static parse(l,h){if(l.length!==2||typeof l[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const m=l[1];return h.scope.has(m)?new La(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class Es{constructor(l,h,m,y){this.name=l,this.type=h,this._evaluate=m,this.args=y}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,h){const m=l[0],y=Es.definitions[m];if(!y)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const k=Array.isArray(y)?y[0]:y.type,C=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,S=C.filter(([O])=>!Array.isArray(O)||O.length===l.length-1);let D=null;for(const[O,V]of S){D=new Ea(h.registry,Ho,h.path,null,h.scope);const W=[];let ee=!1;for(let ie=1;ie<l.length;ie++){const le=l[ie],be=Array.isArray(O)?O[ie-1]:O.type,Pe=D.parse(le,1+W.length,be);if(!Pe){ee=!0;break}W.push(Pe)}if(!ee)if(Array.isArray(O)&&O.length!==W.length)D.error(`Expected ${O.length} arguments, but found ${W.length} instead.`);else{for(let ie=0;ie<W.length;ie++){const le=Array.isArray(O)?O[ie]:O.type,be=W[ie];D.concat(ie+1).checkSubtype(le,be.type)}if(D.errors.length===0)return new Es(m,k,V,W)}}if(S.length===1)h.errors.push(...D.errors);else{const O=(S.length?S:C).map(([W])=>{return ee=W,Array.isArray(ee)?`(${ee.map(xe).join(", ")})`:`(${xe(ee.type)}...)`;var ee}).join(" | "),V=[];for(let W=1;W<l.length;W++){const ee=h.parse(l[W],1+V.length);if(!ee)return null;V.push(xe(ee.type))}h.error(`Expected arguments of type ${O}, but found (${V.join(", ")}) instead.`)}return null}static register(l,h){Es.definitions=h;for(const m in h)l[m]=Es}}function Ho(f){if(f instanceof La)return Ho(f.boundExpression);if(f instanceof Es&&f.name==="error"||f instanceof po||f instanceof Zi)return!1;const l=f instanceof oi||f instanceof Ps;let h=!0;return f.eachChild(m=>{h=l?h&&Ho(m):h&&m instanceof Ii}),!!h&&Ra(f)&&Wo(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ra(f){if(f instanceof Es&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof Zi)return!1;let l=!0;return f.eachChild(h=>{l&&!Ra(h)&&(l=!1)}),l}function Zo(f){if(f instanceof Es&&f.name==="feature-state")return!1;let l=!0;return f.eachChild(h=>{l&&!Zo(h)&&(l=!1)}),l}function Wo(f,l){if(f instanceof Es&&l.indexOf(f.name)>=0)return!1;let h=!0;return f.eachChild(m=>{h&&!Wo(m,l)&&(h=!1)}),h}function Ko(f,l){const h=f.length-1;let m,y,k=0,C=h,S=0;for(;k<=C;)if(S=Math.floor((k+C)/2),m=f[S],y=f[S+1],m<=l){if(S===h||l<y)return S;k=S+1}else{if(!(m>l))throw new or("Input is not a number.");C=S-1}return 0}class Xo{constructor(l,h,m){this.type=l,this.input=h,this.labels=[],this.outputs=[];for(const[y,k]of m)this.labels.push(y),this.outputs.push(k)}static parse(l,h){if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(l[1],1,Ut);if(!m)return null;const y=[];let k=null;h.expectedType&&h.expectedType.kind!=="value"&&(k=h.expectedType);for(let C=1;C<l.length;C+=2){const S=C===1?-1/0:l[C],D=l[C+1],O=C,V=C+1;if(typeof S!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(y.length&&y[y.length-1][0]>=S)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',O);const W=h.parse(D,V,k);if(!W)return null;k=k||W.type,y.push([S,W])}return new Xo(k,m,y)}evaluate(l){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(l);const y=this.input.evaluate(l);if(y<=h[0])return m[0].evaluate(l);const k=h.length;return y>=h[k-1]?m[k-1].evaluate(l):m[Ko(h,y)].evaluate(l)}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function th(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var nh=vu;function vu(f,l,h,m){this.cx=3*f,this.bx=3*(h-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=l,this.p2x=h,this.p2y=m}vu.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,l){if(l===void 0&&(l=1e-6),f<0)return 0;if(f>1)return 1;for(var h=f,m=0;m<8;m++){var y=this.sampleCurveX(h)-f;if(Math.abs(y)<l)return h;var k=this.sampleCurveDerivativeX(h);if(Math.abs(k)<1e-6)break;h-=y/k}var C=0,S=1;for(h=f,m=0;m<20&&(y=this.sampleCurveX(h),!(Math.abs(y-f)<l));m++)f>y?C=h:S=h,h=.5*(S-C)+C;return h},solve:function(f,l){return this.sampleCurveY(this.solveCurveX(f,l))}};var rh=th(nh);function Wi(f,l,h){return f+h*(l-f)}function Oa(f,l,h){return f.map((m,y)=>Wi(m,l[y],h))}const as={number:Wi,color:function(f,l,h,m="rgb"){switch(m){case"rgb":{const[y,k,C,S]=Oa(f.rgb,l.rgb,h);return new Hn(y,k,C,S,!1)}case"hcl":{const[y,k,C,S]=f.hcl,[D,O,V,W]=l.hcl;let ee,ie;if(isNaN(y)||isNaN(D))isNaN(y)?isNaN(D)?ee=NaN:(ee=D,C!==1&&C!==0||(ie=O)):(ee=y,V!==1&&V!==0||(ie=k));else{let Ge=D-y;D>y&&Ge>180?Ge-=360:D<y&&y-D>180&&(Ge+=360),ee=y+h*Ge}const[le,be,Pe,ze]=function([Ge,Le,Ne,lt]){return Ge=isNaN(Ge)?0:Ge*kn,hr([Ne,Math.cos(Ge)*Le,Math.sin(Ge)*Le,lt])}([ee,ie??Wi(k,O,h),Wi(C,V,h),Wi(S,W,h)]);return new Hn(le,be,Pe,ze,!1)}case"lab":{const[y,k,C,S]=hr(Oa(f.lab,l.lab,h));return new Hn(y,k,C,S,!1)}}},array:Oa,padding:function(f,l,h){return new gs(Oa(f.values,l.values,h))},variableAnchorOffsetCollection:function(f,l,h){const m=f.values,y=l.values;if(m.length!==y.length)throw new or(`Cannot interpolate values of different length. from: ${f.toString()}, to: ${l.toString()}`);const k=[];for(let C=0;C<m.length;C+=2){if(m[C]!==y[C])throw new or(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${m[C]}, to[${C}]: ${y[C]}`);k.push(m[C]);const[S,D]=m[C+1],[O,V]=y[C+1];k.push([Wi(S,O,h),Wi(D,V,h)])}return new Vs(k)}};class Qr{constructor(l,h,m,y,k){this.type=l,this.operator=h,this.interpolation=m,this.input=y,this.labels=[],this.outputs=[];for(const[C,S]of k)this.labels.push(C),this.outputs.push(S)}static interpolationFactor(l,h,m,y){let k=0;if(l.name==="exponential")k=qn(h,l.base,m,y);else if(l.name==="linear")k=qn(h,1,m,y);else if(l.name==="cubic-bezier"){const C=l.controlPoints;k=new rh(C[0],C[1],C[2],C[3]).solve(qn(h,1,m,y))}return k}static parse(l,h){let[m,y,k,...C]=l;if(!Array.isArray(y)||y.length===0)return h.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const O=y[1];if(typeof O!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:O}}else{if(y[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const O=y.slice(1);if(O.length!==4||O.some(V=>typeof V!="number"||V<0||V>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:O}}}if(l.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(k=h.parse(k,2,Ut),!k)return null;const S=[];let D=null;m==="interpolate-hcl"||m==="interpolate-lab"?D=gr:h.expectedType&&h.expectedType.kind!=="value"&&(D=h.expectedType);for(let O=0;O<C.length;O+=2){const V=C[O],W=C[O+1],ee=O+3,ie=O+4;if(typeof V!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(S.length&&S[S.length-1][0]>=V)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ee);const le=h.parse(W,ie,D);if(!le)return null;D=D||le.type,S.push([V,le])}return Ke(D,Ut)||Ke(D,gr)||Ke(D,Ae)||Ke(D,ne)||Ke(D,he(Ut))?new Qr(D,m,y,k,S):h.error(`Type ${xe(D)} is not interpolatable.`)}evaluate(l){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(l);const y=this.input.evaluate(l);if(y<=h[0])return m[0].evaluate(l);const k=h.length;if(y>=h[k-1])return m[k-1].evaluate(l);const C=Ko(h,y),S=Qr.interpolationFactor(this.interpolation,y,h[C],h[C+1]),D=m[C].evaluate(l),O=m[C+1].evaluate(l);switch(this.operator){case"interpolate":return as[this.type.kind](D,O,S);case"interpolate-hcl":return as.color(D,O,S,"hcl");case"interpolate-lab":return as.color(D,O,S,"lab")}}eachChild(l){l(this.input);for(const h of this.outputs)l(h)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function qn(f,l,h,m){const y=m-h,k=f-h;return y===0?0:l===1?k/y:(Math.pow(l,k)-1)/(Math.pow(l,y)-1)}class Fa{constructor(l,h){this.type=l,this.args=h}static parse(l,h){if(l.length<2)return h.error("Expectected at least one argument.");let m=null;const y=h.expectedType;y&&y.kind!=="value"&&(m=y);const k=[];for(const S of l.slice(1)){const D=h.parse(S,1+k.length,m,void 0,{typeAnnotation:"omit"});if(!D)return null;m=m||D.type,k.push(D)}if(!m)throw new Error("No output type");const C=y&&k.some(S=>Be(y,S.type));return new Fa(C?$n:m,k)}evaluate(l){let h,m=null,y=0;for(const k of this.args)if(y++,m=k.evaluate(l),m&&m instanceof Us&&!m.available&&(h||(h=m.name),m=null,y===this.args.length&&(m=h)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}class Ba{constructor(l,h){this.type=h.type,this.bindings=[].concat(l),this.result=h}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(const h of this.bindings)l(h[1]);l(this.result)}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);const m=[];for(let k=1;k<l.length-1;k+=2){const C=l[k];if(typeof C!="string")return h.error(`Expected string, but found ${typeof C} instead.`,k);if(/[^a-zA-Z0-9_]/.test(C))return h.error("Variable names must contain only alphanumeric characters or '_'.",k);const S=h.parse(l[k+1],k+1);if(!S)return null;m.push([C,S])}const y=h.parse(l[l.length-1],l.length-1,h.expectedType,m);return y?new Ba(m,y):null}outputDefined(){return this.result.outputDefined()}}class Fl{constructor(l,h,m){this.type=l,this.index=h,this.input=m}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,Ut),y=h.parse(l[2],2,he(h.expectedType||$n));return m&&y?new Fl(y.type.itemType,m,y):null}evaluate(l){const h=this.index.evaluate(l),m=this.input.evaluate(l);if(h<0)throw new or(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new or(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new or(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class Bl{constructor(l,h){this.type=Cn,this.needle=l,this.haystack=h}static parse(l,h){if(l.length!==3)return h.error(`Expected 2 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,$n),y=h.parse(l[2],2,$n);return m&&y?qe(m.type,[Cn,Sn,Ut,Zr,$n])?new Bl(m,y):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${xe(m.type)} instead`):null}evaluate(l){const h=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!Re(h,["boolean","string","number","null"]))throw new or(`Expected first argument to be of type boolean, string, number or null, but found ${xe(Tr(h))} instead.`);if(!Re(m,["string","array"]))throw new or(`Expected second argument to be of type array or string, but found ${xe(Tr(m))} instead.`);return m.indexOf(h)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Na{constructor(l,h,m){this.type=Ut,this.needle=l,this.haystack=h,this.fromIndex=m}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,$n),y=h.parse(l[2],2,$n);if(!m||!y)return null;if(!qe(m.type,[Cn,Sn,Ut,Zr,$n]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${xe(m.type)} instead`);if(l.length===4){const k=h.parse(l[3],3,Ut);return k?new Na(m,y,k):null}return new Na(m,y)}evaluate(l){const h=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!Re(h,["boolean","string","number","null"]))throw new or(`Expected first argument to be of type boolean, string, number or null, but found ${xe(Tr(h))} instead.`);if(!Re(m,["string","array"]))throw new or(`Expected second argument to be of type array or string, but found ${xe(Tr(m))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(l);return m.indexOf(h,y)}return m.indexOf(h)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class Nl{constructor(l,h,m,y,k,C){this.inputType=l,this.type=h,this.input=m,this.cases=y,this.outputs=k,this.otherwise=C}static parse(l,h){if(l.length<5)return h.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return h.error("Expected an even number of arguments.");let m,y;h.expectedType&&h.expectedType.kind!=="value"&&(y=h.expectedType);const k={},C=[];for(let O=2;O<l.length-1;O+=2){let V=l[O];const W=l[O+1];Array.isArray(V)||(V=[V]);const ee=h.concat(O);if(V.length===0)return ee.error("Expected at least one branch label.");for(const le of V){if(typeof le!="number"&&typeof le!="string")return ee.error("Branch labels must be numbers or strings.");if(typeof le=="number"&&Math.abs(le)>Number.MAX_SAFE_INTEGER)return ee.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof le=="number"&&Math.floor(le)!==le)return ee.error("Numeric branch labels must be integer values.");if(m){if(ee.checkSubtype(m,Tr(le)))return null}else m=Tr(le);if(k[String(le)]!==void 0)return ee.error("Branch labels must be unique.");k[String(le)]=C.length}const ie=h.parse(W,O,y);if(!ie)return null;y=y||ie.type,C.push(ie)}const S=h.parse(l[1],1,$n);if(!S)return null;const D=h.parse(l[l.length-1],l.length-1,y);return D?S.type.kind!=="value"&&h.concat(1).checkSubtype(m,S.type)?null:new Nl(m,y,S,k,C,D):null}evaluate(l){const h=this.input.evaluate(l);return(Tr(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Vl{constructor(l,h,m){this.type=l,this.branches=h,this.otherwise=m}static parse(l,h){if(l.length<4)return h.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);const y=[];for(let C=1;C<l.length-1;C+=2){const S=h.parse(l[C],C,Cn);if(!S)return null;const D=h.parse(l[C+1],C+1,m);if(!D)return null;y.push([S,D]),m=m||D.type}const k=h.parse(l[l.length-1],l.length-1,m);if(!k)return null;if(!m)throw new Error("Can't infer output type");return new Vl(m,y,k)}evaluate(l){for(const[h,m]of this.branches)if(h.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(const[h,m]of this.branches)l(h),l(m);l(this.otherwise)}outputDefined(){return this.branches.every(([l,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Va{constructor(l,h,m,y){this.type=l,this.input=h,this.beginIndex=m,this.endIndex=y}static parse(l,h){if(l.length<=2||l.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);const m=h.parse(l[1],1,$n),y=h.parse(l[2],2,Ut);if(!m||!y)return null;if(!qe(m.type,[he($n),Sn,$n]))return h.error(`Expected first argument to be of type array or string, but found ${xe(m.type)} instead`);if(l.length===4){const k=h.parse(l[3],3,Ut);return k?new Va(m.type,m,y,k):null}return new Va(m.type,m,y)}evaluate(l){const h=this.input.evaluate(l),m=this.beginIndex.evaluate(l);if(!Re(h,["string","array"]))throw new or(`Expected first argument to be of type array or string, but found ${xe(Tr(h))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(l);return h.slice(m,y)}return h.slice(m)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function yu(f,l){return f==="=="||f==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function bu(f,l,h,m){return m.compare(l,h)===0}function mo(f,l,h){const m=f!=="=="&&f!=="!=";return class cv{constructor(k,C,S){this.type=Cn,this.lhs=k,this.rhs=C,this.collator=S,this.hasUntypedArgument=k.type.kind==="value"||C.type.kind==="value"}static parse(k,C){if(k.length!==3&&k.length!==4)return C.error("Expected two or three arguments.");const S=k[0];let D=C.parse(k[1],1,$n);if(!D)return null;if(!yu(S,D.type))return C.concat(1).error(`"${S}" comparisons are not supported for type '${xe(D.type)}'.`);let O=C.parse(k[2],2,$n);if(!O)return null;if(!yu(S,O.type))return C.concat(2).error(`"${S}" comparisons are not supported for type '${xe(O.type)}'.`);if(D.type.kind!==O.type.kind&&D.type.kind!=="value"&&O.type.kind!=="value")return C.error(`Cannot compare types '${xe(D.type)}' and '${xe(O.type)}'.`);m&&(D.type.kind==="value"&&O.type.kind!=="value"?D=new Ps(O.type,[D]):D.type.kind!=="value"&&O.type.kind==="value"&&(O=new Ps(D.type,[O])));let V=null;if(k.length===4){if(D.type.kind!=="string"&&O.type.kind!=="string"&&D.type.kind!=="value"&&O.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(V=C.parse(k[3],3,si),!V)return null}return new cv(D,O,V)}evaluate(k){const C=this.lhs.evaluate(k),S=this.rhs.evaluate(k);if(m&&this.hasUntypedArgument){const D=Tr(C),O=Tr(S);if(D.kind!==O.kind||D.kind!=="string"&&D.kind!=="number")throw new or(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${D.kind}, ${O.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const D=Tr(C),O=Tr(S);if(D.kind!=="string"||O.kind!=="string")return l(k,C,S)}return this.collator?h(k,C,S,this.collator.evaluate(k)):l(k,C,S)}eachChild(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)}outputDefined(){return!0}}}const sh=mo("==",function(f,l,h){return l===h},bu),ih=mo("!=",function(f,l,h){return l!==h},function(f,l,h,m){return!bu(0,l,h,m)}),oh=mo("<",function(f,l,h){return l<h},function(f,l,h,m){return m.compare(l,h)<0}),ah=mo(">",function(f,l,h){return l>h},function(f,l,h,m){return m.compare(l,h)>0}),lh=mo("<=",function(f,l,h){return l<=h},function(f,l,h,m){return m.compare(l,h)<=0}),ch=mo(">=",function(f,l,h){return l>=h},function(f,l,h,m){return m.compare(l,h)>=0});class Ul{constructor(l,h,m,y,k){this.type=Sn,this.number=l,this.locale=h,this.currency=m,this.minFractionDigits=y,this.maxFractionDigits=k}static parse(l,h){if(l.length!==3)return h.error("Expected two arguments.");const m=h.parse(l[1],1,Ut);if(!m)return null;const y=l[2];if(typeof y!="object"||Array.isArray(y))return h.error("NumberFormat options argument must be an object.");let k=null;if(y.locale&&(k=h.parse(y.locale,1,Sn),!k))return null;let C=null;if(y.currency&&(C=h.parse(y.currency,1,Sn),!C))return null;let S=null;if(y["min-fraction-digits"]&&(S=h.parse(y["min-fraction-digits"],1,Ut),!S))return null;let D=null;return y["max-fraction-digits"]&&(D=h.parse(y["max-fraction-digits"],1,Ut),!D)?null:new Ul(m,k,C,S,D)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Ua{constructor(l){this.type=Lr,this.sections=l}static parse(l,h){if(l.length<2)return h.error("Expected at least one argument.");const m=l[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");const y=[];let k=!1;for(let C=1;C<=l.length-1;++C){const S=l[C];if(k&&typeof S=="object"&&!Array.isArray(S)){k=!1;let D=null;if(S["font-scale"]&&(D=h.parse(S["font-scale"],1,Ut),!D))return null;let O=null;if(S["text-font"]&&(O=h.parse(S["text-font"],1,he(Sn)),!O))return null;let V=null;if(S["text-color"]&&(V=h.parse(S["text-color"],1,gr),!V))return null;const W=y[y.length-1];W.scale=D,W.font=O,W.textColor=V}else{const D=h.parse(l[C],1,$n);if(!D)return null;const O=D.type.kind;if(O!=="string"&&O!=="value"&&O!=="null"&&O!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");k=!0,y.push({content:D,scale:null,font:null,textColor:null})}}return new Ua(y)}evaluate(l){return new Ts(this.sections.map(h=>{const m=h.content.evaluate(l);return Tr(m)===Q?new Ol("",m,null,null,null):new Ol(jo(m),null,h.scale?h.scale.evaluate(l):null,h.font?h.font.evaluate(l).join(","):null,h.textColor?h.textColor.evaluate(l):null)}))}eachChild(l){for(const h of this.sections)l(h.content),h.scale&&l(h.scale),h.font&&l(h.font),h.textColor&&l(h.textColor)}outputDefined(){return!1}}class jl{constructor(l){this.type=Q,this.input=l}static parse(l,h){if(l.length!==2)return h.error("Expected two arguments.");const m=h.parse(l[1],1,Sn);return m?new jl(m):h.error("No image name provided.")}evaluate(l){const h=this.input.evaluate(l),m=Us.fromString(h);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(h)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class ql{constructor(l){this.type=Ut,this.input=l}static parse(l,h){if(l.length!==2)return h.error(`Expected 1 argument, but found ${l.length-1} instead.`);const m=h.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${xe(m.type)} instead.`):new ql(m):null}evaluate(l){const h=this.input.evaluate(l);if(typeof h=="string"||Array.isArray(h))return h.length;throw new or(`Expected value to be of type string or array, but found ${xe(Tr(h))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}const _o={"==":sh,"!=":ih,">":ah,"<":oh,">=":ch,"<=":lh,array:Ps,at:Fl,boolean:Ps,case:Vl,coalesce:Fa,collator:po,format:Ua,image:jl,in:Bl,"index-of":Na,interpolate:Qr,"interpolate-hcl":Qr,"interpolate-lab":Qr,length:ql,let:Ba,literal:Ii,match:Nl,number:Ps,"number-format":Ul,object:Ps,slice:Va,step:Xo,string:Ps,"to-boolean":oi,"to-color":oi,"to-number":oi,"to-string":oi,var:La,within:Zi};function wu(f,[l,h,m,y]){l=l.evaluate(f),h=h.evaluate(f),m=m.evaluate(f);const k=y?y.evaluate(f):1,C=ho(l,h,m,k);if(C)throw new or(C);return new Hn(l/255,h/255,m/255,k,!1)}function xu(f,l){return f in l}function Gl(f,l){const h=l[f];return h===void 0?null:h}function Ki(f){return{type:f}}function $u(f){return{result:"success",value:f}}function go(f){return{result:"error",value:f}}function vo(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function ku(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Hl(f){return!!f.expression&&f.expression.interpolated}function Un(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function ja(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function uh(f){return f}function Cu(f,l){const h=l.type==="color",m=f.stops&&typeof f.stops[0][0]=="object",y=m||!(m||f.property!==void 0),k=f.type||(Hl(l)?"exponential":"interval");if(h||l.type==="padding"){const V=h?Hn.parse:gs.parse;(f=ms({},f)).stops&&(f.stops=f.stops.map(W=>[W[0],V(W[1])])),f.default=V(f.default?f.default:l.default)}if(f.colorSpace&&(C=f.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var C;let S,D,O;if(k==="exponential")S=Bn;else if(k==="interval")S=fh;else if(k==="categorical"){S=$r,D=Object.create(null);for(const V of f.stops)D[V[0]]=V[1];O=typeof f.stops[0][0]}else{if(k!=="identity")throw new Error(`Unknown function type "${k}"`);S=Zl}if(m){const V={},W=[];for(let le=0;le<f.stops.length;le++){const be=f.stops[le],Pe=be[0].zoom;V[Pe]===void 0&&(V[Pe]={zoom:Pe,type:f.type,property:f.property,default:f.default,stops:[]},W.push(Pe)),V[Pe].stops.push([be[0].value,be[1]])}const ee=[];for(const le of W)ee.push([V[le].zoom,Cu(V[le],l)]);const ie={name:"linear"};return{kind:"composite",interpolationType:ie,interpolationFactor:Qr.interpolationFactor.bind(void 0,ie),zoomStops:ee.map(le=>le[0]),evaluate:({zoom:le},be)=>Bn({stops:ee,base:f.base},l,le).evaluate(le,be)}}if(y){const V=k==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:V,interpolationFactor:Qr.interpolationFactor.bind(void 0,V),zoomStops:f.stops.map(W=>W[0]),evaluate:({zoom:W})=>S(f,l,W,D,O)}}return{kind:"source",evaluate(V,W){const ee=W&&W.properties?W.properties[f.property]:void 0;return ee===void 0?Jo(f.default,l.default):S(f,l,ee,D,O)}}}function Jo(f,l,h){return f!==void 0?f:l!==void 0?l:h!==void 0?h:void 0}function $r(f,l,h,m,y){return Jo(typeof h===y?m[h]:void 0,f.default,l.default)}function fh(f,l,h){if(Un(h)!=="number")return Jo(f.default,l.default);const m=f.stops.length;if(m===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[m-1][0])return f.stops[m-1][1];const y=Ko(f.stops.map(k=>k[0]),h);return f.stops[y][1]}function Bn(f,l,h){const m=f.base!==void 0?f.base:1;if(Un(h)!=="number")return Jo(f.default,l.default);const y=f.stops.length;if(y===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[y-1][0])return f.stops[y-1][1];const k=Ko(f.stops.map(V=>V[0]),h),C=function(V,W,ee,ie){const le=ie-ee,be=V-ee;return le===0?0:W===1?be/le:(Math.pow(W,be)-1)/(Math.pow(W,le)-1)}(h,m,f.stops[k][0],f.stops[k+1][0]),S=f.stops[k][1],D=f.stops[k+1][1],O=as[l.type]||uh;return typeof S.evaluate=="function"?{evaluate(...V){const W=S.evaluate.apply(void 0,V),ee=D.evaluate.apply(void 0,V);if(W!==void 0&&ee!==void 0)return O(W,ee,C,f.colorSpace)}}:O(S,D,C,f.colorSpace)}function Zl(f,l,h){switch(l.type){case"color":h=Hn.parse(h);break;case"formatted":h=Ts.fromString(h.toString());break;case"resolvedImage":h=Us.fromString(h.toString());break;case"padding":h=gs.parse(h);break;default:Un(h)===l.type||l.type==="enum"&&l.values[h]||(h=void 0)}return Jo(h,f.default,l.default)}Es.register(_o,{error:[{kind:"error"},[Sn],(f,[l])=>{throw new or(l.evaluate(f))}],typeof:[Sn,[$n],(f,[l])=>xe(Tr(l.evaluate(f)))],"to-rgba":[he(Ut,4),[gr],(f,[l])=>{const[h,m,y,k]=l.evaluate(f).rgb;return[255*h,255*m,255*y,k]}],rgb:[gr,[Ut,Ut,Ut],wu],rgba:[gr,[Ut,Ut,Ut,Ut],wu],has:{type:Cn,overloads:[[[Sn],(f,[l])=>xu(l.evaluate(f),f.properties())],[[Sn,Ns],(f,[l,h])=>xu(l.evaluate(f),h.evaluate(f))]]},get:{type:$n,overloads:[[[Sn],(f,[l])=>Gl(l.evaluate(f),f.properties())],[[Sn,Ns],(f,[l,h])=>Gl(l.evaluate(f),h.evaluate(f))]]},"feature-state":[$n,[Sn],(f,[l])=>Gl(l.evaluate(f),f.featureState||{})],properties:[Ns,[],f=>f.properties()],"geometry-type":[Sn,[],f=>f.geometryType()],id:[$n,[],f=>f.id()],zoom:[Ut,[],f=>f.globals.zoom],"heatmap-density":[Ut,[],f=>f.globals.heatmapDensity||0],"line-progress":[Ut,[],f=>f.globals.lineProgress||0],accumulated:[$n,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[Ut,Ki(Ut),(f,l)=>{let h=0;for(const m of l)h+=m.evaluate(f);return h}],"*":[Ut,Ki(Ut),(f,l)=>{let h=1;for(const m of l)h*=m.evaluate(f);return h}],"-":{type:Ut,overloads:[[[Ut,Ut],(f,[l,h])=>l.evaluate(f)-h.evaluate(f)],[[Ut],(f,[l])=>-l.evaluate(f)]]},"/":[Ut,[Ut,Ut],(f,[l,h])=>l.evaluate(f)/h.evaluate(f)],"%":[Ut,[Ut,Ut],(f,[l,h])=>l.evaluate(f)%h.evaluate(f)],ln2:[Ut,[],()=>Math.LN2],pi:[Ut,[],()=>Math.PI],e:[Ut,[],()=>Math.E],"^":[Ut,[Ut,Ut],(f,[l,h])=>Math.pow(l.evaluate(f),h.evaluate(f))],sqrt:[Ut,[Ut],(f,[l])=>Math.sqrt(l.evaluate(f))],log10:[Ut,[Ut],(f,[l])=>Math.log(l.evaluate(f))/Math.LN10],ln:[Ut,[Ut],(f,[l])=>Math.log(l.evaluate(f))],log2:[Ut,[Ut],(f,[l])=>Math.log(l.evaluate(f))/Math.LN2],sin:[Ut,[Ut],(f,[l])=>Math.sin(l.evaluate(f))],cos:[Ut,[Ut],(f,[l])=>Math.cos(l.evaluate(f))],tan:[Ut,[Ut],(f,[l])=>Math.tan(l.evaluate(f))],asin:[Ut,[Ut],(f,[l])=>Math.asin(l.evaluate(f))],acos:[Ut,[Ut],(f,[l])=>Math.acos(l.evaluate(f))],atan:[Ut,[Ut],(f,[l])=>Math.atan(l.evaluate(f))],min:[Ut,Ki(Ut),(f,l)=>Math.min(...l.map(h=>h.evaluate(f)))],max:[Ut,Ki(Ut),(f,l)=>Math.max(...l.map(h=>h.evaluate(f)))],abs:[Ut,[Ut],(f,[l])=>Math.abs(l.evaluate(f))],round:[Ut,[Ut],(f,[l])=>{const h=l.evaluate(f);return h<0?-Math.round(-h):Math.round(h)}],floor:[Ut,[Ut],(f,[l])=>Math.floor(l.evaluate(f))],ceil:[Ut,[Ut],(f,[l])=>Math.ceil(l.evaluate(f))],"filter-==":[Cn,[Sn,$n],(f,[l,h])=>f.properties()[l.value]===h.value],"filter-id-==":[Cn,[$n],(f,[l])=>f.id()===l.value],"filter-type-==":[Cn,[Sn],(f,[l])=>f.geometryType()===l.value],"filter-<":[Cn,[Sn,$n],(f,[l,h])=>{const m=f.properties()[l.value],y=h.value;return typeof m==typeof y&&m<y}],"filter-id-<":[Cn,[$n],(f,[l])=>{const h=f.id(),m=l.value;return typeof h==typeof m&&h<m}],"filter->":[Cn,[Sn,$n],(f,[l,h])=>{const m=f.properties()[l.value],y=h.value;return typeof m==typeof y&&m>y}],"filter-id->":[Cn,[$n],(f,[l])=>{const h=f.id(),m=l.value;return typeof h==typeof m&&h>m}],"filter-<=":[Cn,[Sn,$n],(f,[l,h])=>{const m=f.properties()[l.value],y=h.value;return typeof m==typeof y&&m<=y}],"filter-id-<=":[Cn,[$n],(f,[l])=>{const h=f.id(),m=l.value;return typeof h==typeof m&&h<=m}],"filter->=":[Cn,[Sn,$n],(f,[l,h])=>{const m=f.properties()[l.value],y=h.value;return typeof m==typeof y&&m>=y}],"filter-id->=":[Cn,[$n],(f,[l])=>{const h=f.id(),m=l.value;return typeof h==typeof m&&h>=m}],"filter-has":[Cn,[$n],(f,[l])=>l.value in f.properties()],"filter-has-id":[Cn,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Cn,[he(Sn)],(f,[l])=>l.value.indexOf(f.geometryType())>=0],"filter-id-in":[Cn,[he($n)],(f,[l])=>l.value.indexOf(f.id())>=0],"filter-in-small":[Cn,[Sn,he($n)],(f,[l,h])=>h.value.indexOf(f.properties()[l.value])>=0],"filter-in-large":[Cn,[Sn,he($n)],(f,[l,h])=>function(m,y,k,C){for(;k<=C;){const S=k+C>>1;if(y[S]===m)return!0;y[S]>m?C=S-1:k=S+1}return!1}(f.properties()[l.value],h.value,0,h.value.length-1)],all:{type:Cn,overloads:[[[Cn,Cn],(f,[l,h])=>l.evaluate(f)&&h.evaluate(f)],[Ki(Cn),(f,l)=>{for(const h of l)if(!h.evaluate(f))return!1;return!0}]]},any:{type:Cn,overloads:[[[Cn,Cn],(f,[l,h])=>l.evaluate(f)||h.evaluate(f)],[Ki(Cn),(f,l)=>{for(const h of l)if(h.evaluate(f))return!0;return!1}]]},"!":[Cn,[Cn],(f,[l])=>!l.evaluate(f)],"is-supported-script":[Cn,[Sn],(f,[l])=>{const h=f.globals&&f.globals.isSupportedScript;return!h||h(l.evaluate(f))}],upcase:[Sn,[Sn],(f,[l])=>l.evaluate(f).toUpperCase()],downcase:[Sn,[Sn],(f,[l])=>l.evaluate(f).toLowerCase()],concat:[Sn,Ki($n),(f,l)=>l.map(h=>jo(h.evaluate(f))).join("")],"resolved-locale":[Sn,[si],(f,[l])=>l.evaluate(f).resolvedLocale()]});class er{constructor(l,h){var m;this.expression=l,this._warningHistory={},this._evaluator=new Zn,this._defaultValue=h?(m=h).type==="color"&&ja(m.default)?new Hn(0,0,0,0):m.type==="color"?Hn.parse(m.default)||null:m.type==="padding"?gs.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?Vs.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(l,h,m,y,k,C){return this._evaluator.globals=l,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=y,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(l,h,m,y,k,C){this._evaluator.globals=l,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=y,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=C||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new or(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Yn(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in _o}function Xi(f,l){const h=new Ea(_o,Ho,[],l?function(y){const k={color:gr,string:Sn,number:Ut,enum:Sn,boolean:Cn,formatted:Lr,padding:Ae,resolvedImage:Q,variableAnchorOffsetCollection:ne};return y.type==="array"?he(k[y.value]||$n,y.length):k[y.type]}(l):void 0),m=h.parse(f,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?$u(new er(m,l)):go(h.errors)}class qa{constructor(l,h){this.kind=l,this._styleExpression=h,this.isStateDependent=l!=="constant"&&!Zo(h.expression)}evaluateWithoutErrorHandling(l,h,m,y,k,C){return this._styleExpression.evaluateWithoutErrorHandling(l,h,m,y,k,C)}evaluate(l,h,m,y,k,C){return this._styleExpression.evaluate(l,h,m,y,k,C)}}class Wl{constructor(l,h,m,y){this.kind=l,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=l!=="camera"&&!Zo(h.expression),this.interpolationType=y}evaluateWithoutErrorHandling(l,h,m,y,k,C){return this._styleExpression.evaluateWithoutErrorHandling(l,h,m,y,k,C)}evaluate(l,h,m,y,k,C){return this._styleExpression.evaluate(l,h,m,y,k,C)}interpolationFactor(l,h,m){return this.interpolationType?Qr.interpolationFactor(this.interpolationType,l,h,m):0}}function Su(f,l){const h=Xi(f,l);if(h.result==="error")return h;const m=h.value.expression,y=Ra(m);if(!y&&!vo(l))return go([new Hr("","data expressions not supported")]);const k=Wo(m,["zoom"]);if(!k&&!ku(l))return go([new Hr("","zoom expressions not supported")]);const C=Ha(m);return C||k?C instanceof Hr?go([C]):C instanceof Qr&&!Hl(l)?go([new Hr("",'"interpolate" expressions cannot be used with this property')]):$u(C?new Wl(y?"camera":"composite",h.value,C.labels,C instanceof Qr?C.interpolation:void 0):new qa(y?"constant":"source",h.value)):go([new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ga{constructor(l,h){this._parameters=l,this._specification=h,ms(this,Cu(this._parameters,this._specification))}static deserialize(l){return new Ga(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function Ha(f){let l=null;if(f instanceof Ba)l=Ha(f.result);else if(f instanceof Fa){for(const h of f.args)if(l=Ha(h),l)break}else(f instanceof Xo||f instanceof Qr)&&f.input instanceof Es&&f.input.name==="zoom"&&(l=f);return l instanceof Hr||f.eachChild(h=>{const m=Ha(h);m instanceof Hr?l=m:!l&&m?l=new Hr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):l&&m&&l!==m&&(l=new Hr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),l}function Za(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const l of f.slice(1))if(!Za(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}const Iu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Wa(f){if(f==null)return{filter:()=>!0,needGeometry:!1};Za(f)||(f=Xa(f));const l=Xi(f,Iu);if(l.result==="error")throw new Error(l.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,m,y)=>l.value.evaluate(h,m,{},y),needGeometry:Ka(f)}}function Tu(f,l){return f<l?-1:f>l?1:0}function Ka(f){if(!Array.isArray(f))return!1;if(f[0]==="within")return!0;for(let l=1;l<f.length;l++)if(Ka(f[l]))return!0;return!1}function Xa(f){if(!f)return!0;const l=f[0];return f.length<=1?l!=="any":l==="=="?Kl(f[1],f[2],"=="):l==="!="?Ja(Kl(f[1],f[2],"==")):l==="<"||l===">"||l==="<="||l===">="?Kl(f[1],f[2],l):l==="any"?(h=f.slice(1),["any"].concat(h.map(Xa))):l==="all"?["all"].concat(f.slice(1).map(Xa)):l==="none"?["all"].concat(f.slice(1).map(Xa).map(Ja)):l==="in"?Pu(f[1],f.slice(2)):l==="!in"?Ja(Pu(f[1],f.slice(2))):l==="has"?Eu(f[1]):l==="!has"?Ja(Eu(f[1])):l!=="within"||f;var h}function Kl(f,l,h){switch(f){case"$type":return[`filter-type-${h}`,l];case"$id":return[`filter-id-${h}`,l];default:return[`filter-${h}`,f,l]}}function Pu(f,l){if(l.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(h=>typeof h!=typeof l[0])?["filter-in-large",f,["literal",l.sort(Tu)]]:["filter-in-small",f,["literal",l]]}}function Eu(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Ja(f){return["!",f]}function Xl(f){const l=typeof f;if(l==="number"||l==="boolean"||l==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let y="[";for(const k of f)y+=`${Xl(k)},`;return`${y}]`}const h=Object.keys(f).sort();let m="{";for(let y=0;y<h.length;y++)m+=`${JSON.stringify(h[y])}:${Xl(f[h[y]])},`;return`${m}}`}function hh(f){let l="";for(const h of Vn)l+=`/${Xl(f[h])}`;return l}function Au(f){const l=f.value;return l?[new Lt(f.key,l,"constants have been deprecated as of v8")]:[]}function dr(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Pi(f){if(Array.isArray(f))return f.map(Pi);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const l={};for(const h in f)l[h]=Pi(f[h]);return l}return dr(f)}function ls(f){const l=f.key,h=f.value,m=f.valueSpec||{},y=f.objectElementValidators||{},k=f.style,C=f.styleSpec,S=f.validateSpec;let D=[];const O=Un(h);if(O!=="object")return[new Lt(l,h,`object expected, ${O} found`)];for(const V in h){const W=V.split(".")[0],ee=m[W]||m["*"];let ie;if(y[W])ie=y[W];else if(m[W])ie=S;else if(y["*"])ie=y["*"];else{if(!m["*"]){D.push(new Lt(l,h[V],`unknown property "${V}"`));continue}ie=S}D=D.concat(ie({key:(l&&`${l}.`)+V,value:h[V],valueSpec:ee,style:k,styleSpec:C,object:h,objectKey:V,validateSpec:S},h))}for(const V in m)y[V]||m[V].required&&m[V].default===void 0&&h[V]===void 0&&D.push(new Lt(l,h,`missing required property "${V}"`));return D}function Jl(f){const l=f.value,h=f.valueSpec,m=f.style,y=f.styleSpec,k=f.key,C=f.arrayElementValidator||f.validateSpec;if(Un(l)!=="array")return[new Lt(k,l,`array expected, ${Un(l)} found`)];if(h.length&&l.length!==h.length)return[new Lt(k,l,`array length ${h.length} expected, length ${l.length} found`)];if(h["min-length"]&&l.length<h["min-length"])return[new Lt(k,l,`array length at least ${h["min-length"]} expected, length ${l.length} found`)];let S={type:h.value,values:h.values};y.$version<7&&(S.function=h.function),Un(h.value)==="object"&&(S=h.value);let D=[];for(let O=0;O<l.length;O++)D=D.concat(C({array:l,arrayIndex:O,value:l[O],valueSpec:S,validateSpec:f.validateSpec,style:m,styleSpec:y,key:`${k}[${O}]`}));return D}function Ya(f){const l=f.key,h=f.value,m=f.valueSpec;let y=Un(h);return y==="number"&&h!=h&&(y="NaN"),y!=="number"?[new Lt(l,h,`number expected, ${y} found`)]:"minimum"in m&&h<m.minimum?[new Lt(l,h,`${h} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&h>m.maximum?[new Lt(l,h,`${h} is greater than the maximum value ${m.maximum}`)]:[]}function Mu(f){const l=f.valueSpec,h=dr(f.value.type);let m,y,k,C={};const S=h!=="categorical"&&f.value.property===void 0,D=!S,O=Un(f.value.stops)==="array"&&Un(f.value.stops[0])==="array"&&Un(f.value.stops[0][0])==="object",V=ls({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(ie){if(h==="identity")return[new Lt(ie.key,ie.value,'identity function may not have a "stops" property')];let le=[];const be=ie.value;return le=le.concat(Jl({key:ie.key,value:be,valueSpec:ie.valueSpec,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,arrayElementValidator:W})),Un(be)==="array"&&be.length===0&&le.push(new Lt(ie.key,be,"array must have at least one stop")),le},default:function(ie){return ie.validateSpec({key:ie.key,value:ie.value,valueSpec:l,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec})}}});return h==="identity"&&S&&V.push(new Lt(f.key,f.value,'missing required property "property"')),h==="identity"||f.value.stops||V.push(new Lt(f.key,f.value,'missing required property "stops"')),h==="exponential"&&f.valueSpec.expression&&!Hl(f.valueSpec)&&V.push(new Lt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(D&&!vo(f.valueSpec)?V.push(new Lt(f.key,f.value,"property functions not supported")):S&&!ku(f.valueSpec)&&V.push(new Lt(f.key,f.value,"zoom functions not supported"))),h!=="categorical"&&!O||f.value.property!==void 0||V.push(new Lt(f.key,f.value,'"property" property is required')),V;function W(ie){let le=[];const be=ie.value,Pe=ie.key;if(Un(be)!=="array")return[new Lt(Pe,be,`array expected, ${Un(be)} found`)];if(be.length!==2)return[new Lt(Pe,be,`array length 2 expected, length ${be.length} found`)];if(O){if(Un(be[0])!=="object")return[new Lt(Pe,be,`object expected, ${Un(be[0])} found`)];if(be[0].zoom===void 0)return[new Lt(Pe,be,"object stop key must have zoom")];if(be[0].value===void 0)return[new Lt(Pe,be,"object stop key must have value")];if(k&&k>dr(be[0].zoom))return[new Lt(Pe,be[0].zoom,"stop zoom values must appear in ascending order")];dr(be[0].zoom)!==k&&(k=dr(be[0].zoom),y=void 0,C={}),le=le.concat(ls({key:`${Pe}[0]`,value:be[0],valueSpec:{zoom:{}},validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{zoom:Ya,value:ee}}))}else le=le.concat(ee({key:`${Pe}[0]`,value:be[0],valueSpec:{},validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec},be));return Yn(Pi(be[1]))?le.concat([new Lt(`${Pe}[1]`,be[1],"expressions are not allowed in function stops.")]):le.concat(ie.validateSpec({key:`${Pe}[1]`,value:be[1],valueSpec:l,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec}))}function ee(ie,le){const be=Un(ie.value),Pe=dr(ie.value),ze=ie.value!==null?ie.value:le;if(m){if(be!==m)return[new Lt(ie.key,ze,`${be} stop domain type must match previous stop domain type ${m}`)]}else m=be;if(be!=="number"&&be!=="string"&&be!=="boolean")return[new Lt(ie.key,ze,"stop domain value must be a number, string, or boolean")];if(be!=="number"&&h!=="categorical"){let Ge=`number expected, ${be} found`;return vo(l)&&h===void 0&&(Ge+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Lt(ie.key,ze,Ge)]}return h!=="categorical"||be!=="number"||isFinite(Pe)&&Math.floor(Pe)===Pe?h!=="categorical"&&be==="number"&&y!==void 0&&Pe<y?[new Lt(ie.key,ze,"stop domain values must appear in ascending order")]:(y=Pe,h==="categorical"&&Pe in C?[new Lt(ie.key,ze,"stop domain values must be unique")]:(C[Pe]=!0,[])):[new Lt(ie.key,ze,`integer expected, found ${Pe}`)]}}function Ei(f){const l=(f.expressionContext==="property"?Su:Xi)(Pi(f.value),f.valueSpec);if(l.result==="error")return l.value.map(m=>new Lt(`${f.key}${m.key}`,f.value,m.message));const h=l.value.expression||l.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!h.outputDefined())return[new Lt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Zo(h))return[new Lt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Zo(h))return[new Lt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Wo(h,["zoom","feature-state"]))return[new Lt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!Ra(h))return[new Lt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ai(f){const l=f.key,h=f.value,m=f.valueSpec,y=[];return Array.isArray(m.values)?m.values.indexOf(dr(h))===-1&&y.push(new Lt(l,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(m.values).indexOf(dr(h))===-1&&y.push(new Lt(l,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),y}function yo(f){return Za(Pi(f.value))?Ei(ms({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Yl(f)}function Yl(f){const l=f.value,h=f.key;if(Un(l)!=="array")return[new Lt(h,l,`array expected, ${Un(l)} found`)];const m=f.styleSpec;let y,k=[];if(l.length<1)return[new Lt(h,l,"filter array must have at least 1 element")];switch(k=k.concat(Ai({key:`${h}[0]`,value:l[0],valueSpec:m.filter_operator,style:f.style,styleSpec:f.styleSpec})),dr(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&dr(l[1])==="$type"&&k.push(new Lt(h,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&k.push(new Lt(h,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(y=Un(l[1]),y!=="string"&&k.push(new Lt(`${h}[1]`,l[1],`string expected, ${y} found`)));for(let C=2;C<l.length;C++)y=Un(l[C]),dr(l[1])==="$type"?k=k.concat(Ai({key:`${h}[${C}]`,value:l[C],valueSpec:m.geometry_type,style:f.style,styleSpec:f.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&k.push(new Lt(`${h}[${C}]`,l[C],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let C=1;C<l.length;C++)k=k.concat(Yl({key:`${h}[${C}]`,value:l[C],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":y=Un(l[1]),l.length!==2?k.push(new Lt(h,l,`filter array for "${l[0]}" operator must have 2 elements`)):y!=="string"&&k.push(new Lt(`${h}[1]`,l[1],`string expected, ${y} found`));break;case"within":y=Un(l[1]),l.length!==2?k.push(new Lt(h,l,`filter array for "${l[0]}" operator must have 2 elements`)):y!=="object"&&k.push(new Lt(`${h}[1]`,l[1],`object expected, ${y} found`))}return k}function Qa(f,l){const h=f.key,m=f.validateSpec,y=f.style,k=f.styleSpec,C=f.value,S=f.objectKey,D=k[`${l}_${f.layerType}`];if(!D)return[];const O=S.match(/^(.*)-transition$/);if(l==="paint"&&O&&D[O[1]]&&D[O[1]].transition)return m({key:h,value:C,valueSpec:k.transition,style:y,styleSpec:k});const V=f.valueSpec||D[S];if(!V)return[new Lt(h,C,`unknown property "${S}"`)];let W;if(Un(C)==="string"&&vo(V)&&!V.tokens&&(W=/^{([^}]+)}$/.exec(C)))return[new Lt(h,C,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(W[1])} }\`.`)];const ee=[];return f.layerType==="symbol"&&(S==="text-field"&&y&&!y.glyphs&&ee.push(new Lt(h,C,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&ja(Pi(C))&&dr(C.type)==="identity"&&ee.push(new Lt(h,C,'"text-font" does not support identity functions'))),ee.concat(m({key:f.key,value:C,valueSpec:V,style:y,styleSpec:k,expressionContext:"property",propertyType:l,propertyKey:S}))}function Ql(f){return Qa(f,"paint")}function ec(f){return Qa(f,"layout")}function Yo(f){let l=[];const h=f.value,m=f.key,y=f.style,k=f.styleSpec;h.type||h.ref||l.push(new Lt(m,h,'either "type" or "ref" is required'));let C=dr(h.type);const S=dr(h.ref);if(h.id){const D=dr(h.id);for(let O=0;O<f.arrayIndex;O++){const V=y.layers[O];dr(V.id)===D&&l.push(new Lt(m,h.id,`duplicate layer id "${h.id}", previously used at line ${V.id.__line__}`))}}if("ref"in h){let D;["type","source","source-layer","filter","layout"].forEach(O=>{O in h&&l.push(new Lt(m,h[O],`"${O}" is prohibited for ref layers`))}),y.layers.forEach(O=>{dr(O.id)===S&&(D=O)}),D?D.ref?l.push(new Lt(m,h.ref,"ref cannot reference another ref layer")):C=dr(D.type):l.push(new Lt(m,h.ref,`ref layer "${S}" not found`))}else if(C!=="background")if(h.source){const D=y.sources&&y.sources[h.source],O=D&&dr(D.type);D?O==="vector"&&C==="raster"?l.push(new Lt(m,h.source,`layer "${h.id}" requires a raster source`)):O!=="raster-dem"&&C==="hillshade"?l.push(new Lt(m,h.source,`layer "${h.id}" requires a raster-dem source`)):O==="raster"&&C!=="raster"?l.push(new Lt(m,h.source,`layer "${h.id}" requires a vector source`)):O!=="vector"||h["source-layer"]?O==="raster-dem"&&C!=="hillshade"?l.push(new Lt(m,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!h.paint||!h.paint["line-gradient"]||O==="geojson"&&D.lineMetrics||l.push(new Lt(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Lt(m,h,`layer "${h.id}" must specify a "source-layer"`)):l.push(new Lt(m,h.source,`source "${h.source}" not found`))}else l.push(new Lt(m,h,'missing required property "source"'));return l=l.concat(ls({key:m,value:h,valueSpec:k.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${m}.type`,value:h.type,valueSpec:k.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:h,objectKey:"type"}),filter:yo,layout:D=>ls({layer:h,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":O=>ec(ms({layerType:C},O))}}),paint:D=>ls({layer:h,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":O=>Ql(ms({layerType:C},O))}})}})),l}function Ji(f){const l=f.value,h=f.key,m=Un(l);return m!=="string"?[new Lt(h,l,`string expected, ${m} found`)]:[]}const Du={promoteId:function({key:f,value:l}){if(Un(l)==="string")return Ji({key:f,value:l});{const h=[];for(const m in l)h.push(...Ji({key:`${f}.${m}`,value:l[m]}));return h}}};function zu(f){const l=f.value,h=f.key,m=f.styleSpec,y=f.style,k=f.validateSpec;if(!l.type)return[new Lt(h,l,'"type" is required')];const C=dr(l.type);let S;switch(C){case"vector":case"raster":return S=ls({key:h,value:l,valueSpec:m[`source_${C.replace("-","_")}`],style:f.style,styleSpec:m,objectElementValidators:Du,validateSpec:k}),S;case"raster-dem":return S=function(D){var O;const V=(O=D.sourceName)!==null&&O!==void 0?O:"",W=D.value,ee=D.styleSpec,ie=ee.source_raster_dem,le=D.style;let be=[];const Pe=Un(W);if(W===void 0)return be;if(Pe!=="object")return be.push(new Lt("source_raster_dem",W,`object expected, ${Pe} found`)),be;const ze=dr(W.encoding)==="custom",Ge=["redFactor","greenFactor","blueFactor","baseShift"],Le=D.value.encoding?`"${D.value.encoding}"`:"Default";for(const Ne in W)!ze&&Ge.includes(Ne)?be.push(new Lt(Ne,W[Ne],`In "${V}": "${Ne}" is only valid when "encoding" is set to "custom". ${Le} encoding found`)):ie[Ne]?be=be.concat(D.validateSpec({key:Ne,value:W[Ne],valueSpec:ie[Ne],validateSpec:D.validateSpec,style:le,styleSpec:ee})):be.push(new Lt(Ne,W[Ne],`unknown property "${Ne}"`));return be}({sourceName:h,value:l,style:f.style,styleSpec:m,validateSpec:k}),S;case"geojson":if(S=ls({key:h,value:l,valueSpec:m.source_geojson,style:y,styleSpec:m,validateSpec:k,objectElementValidators:Du}),l.cluster)for(const D in l.clusterProperties){const[O,V]=l.clusterProperties[D],W=typeof O=="string"?[O,["accumulated"],["get",D]]:O;S.push(...Ei({key:`${h}.${D}.map`,value:V,validateSpec:k,expressionContext:"cluster-map"})),S.push(...Ei({key:`${h}.${D}.reduce`,value:W,validateSpec:k,expressionContext:"cluster-reduce"}))}return S;case"video":return ls({key:h,value:l,valueSpec:m.source_video,style:y,validateSpec:k,styleSpec:m});case"image":return ls({key:h,value:l,valueSpec:m.source_image,style:y,validateSpec:k,styleSpec:m});case"canvas":return[new Lt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ai({key:`${h}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:k,styleSpec:m})}}function Lu(f){const l=f.value,h=f.styleSpec,m=h.light,y=f.style;let k=[];const C=Un(l);if(l===void 0)return k;if(C!=="object")return k=k.concat([new Lt("light",l,`object expected, ${C} found`)]),k;for(const S in l){const D=S.match(/^(.*)-transition$/);k=k.concat(D&&m[D[1]]&&m[D[1]].transition?f.validateSpec({key:S,value:l[S],valueSpec:h.transition,validateSpec:f.validateSpec,style:y,styleSpec:h}):m[S]?f.validateSpec({key:S,value:l[S],valueSpec:m[S],validateSpec:f.validateSpec,style:y,styleSpec:h}):[new Lt(S,l[S],`unknown property "${S}"`)])}return k}function Ru(f){const l=f.value,h=f.styleSpec,m=h.sky,y=f.style,k=Un(l);if(l===void 0)return[];if(k!=="object")return[new Lt("sky",l,`object expected, ${k} found`)];let C=[];for(const S in l)C=C.concat(m[S]?ai({key:S,value:l[S],valueSpec:m[S],style:y,styleSpec:h}):[new Lt(S,l[S],`unknown property "${S}"`)]);return C}function Qo(f){const l=f.value,h=f.styleSpec,m=h.terrain,y=f.style;let k=[];const C=Un(l);if(l===void 0)return k;if(C!=="object")return k=k.concat([new Lt("terrain",l,`object expected, ${C} found`)]),k;for(const S in l)k=k.concat(m[S]?f.validateSpec({key:S,value:l[S],valueSpec:m[S],validateSpec:f.validateSpec,style:y,styleSpec:h}):[new Lt(S,l[S],`unknown property "${S}"`)]);return k}function ea(f){let l=[];const h=f.value,m=f.key;if(Array.isArray(h)){const y=[],k=[];for(const C in h)h[C].id&&y.includes(h[C].id)&&l.push(new Lt(m,h,`all the sprites' ids must be unique, but ${h[C].id} is duplicated`)),y.push(h[C].id),h[C].url&&k.includes(h[C].url)&&l.push(new Lt(m,h,`all the sprites' URLs must be unique, but ${h[C].url} is duplicated`)),k.push(h[C].url),l=l.concat(ls({key:`${m}[${C}]`,value:h[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return l}return Ji({key:m,value:h})}const vs={"*":()=>[],array:Jl,boolean:function(f){const l=f.value,h=f.key,m=Un(l);return m!=="boolean"?[new Lt(h,l,`boolean expected, ${m} found`)]:[]},number:Ya,color:function(f){const l=f.key,h=f.value,m=Un(h);return m!=="string"?[new Lt(l,h,`color expected, ${m} found`)]:Hn.parse(String(h))?[]:[new Lt(l,h,`color expected, "${h}" found`)]},constants:Au,enum:Ai,filter:yo,function:Mu,layer:Yo,object:ls,source:zu,light:Lu,sky:Ru,terrain:Qo,string:Ji,formatted:function(f){return Ji(f).length===0?[]:Ei(f)},resolvedImage:function(f){return Ji(f).length===0?[]:Ei(f)},padding:function(f){const l=f.key,h=f.value;if(Un(h)==="array"){if(h.length<1||h.length>4)return[new Lt(l,h,`padding requires 1 to 4 values; ${h.length} values found`)];const m={type:"number"};let y=[];for(let k=0;k<h.length;k++)y=y.concat(f.validateSpec({key:`${l}[${k}]`,value:h[k],validateSpec:f.validateSpec,valueSpec:m}));return y}return Ya({key:l,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(f){const l=f.key,h=f.value,m=Un(h),y=f.styleSpec;if(m!=="array"||h.length<1||h.length%2!=0)return[new Lt(l,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let k=[];for(let C=0;C<h.length;C+=2)k=k.concat(Ai({key:`${l}[${C}]`,value:h[C],valueSpec:y.layout_symbol["text-anchor"]})),k=k.concat(Jl({key:`${l}[${C+1}]`,value:h[C+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:y}));return k},sprite:ea};function ai(f){const l=f.value,h=f.valueSpec,m=f.styleSpec;return f.validateSpec=ai,h.expression&&ja(dr(l))?Mu(f):h.expression&&Yn(Pi(l))?Ei(f):h.type&&vs[h.type]?vs[h.type](f):ls(ms({},f,{valueSpec:h.type?m[h.type]:h}))}function tc(f){const l=f.value,h=f.key,m=Ji(f);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new Lt(h,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&m.push(new Lt(h,l,'"glyphs" url must include a "{range}" token'))),m}function Ks(f,l=We){let h=[];return h=h.concat(ai({key:"",value:f,valueSpec:l.$root,styleSpec:l,style:f,validateSpec:ai,objectElementValidators:{glyphs:tc,"*":()=>[]}})),f.constants&&(h=h.concat(Au({key:"constants",value:f.constants,style:f,styleSpec:l,validateSpec:ai}))),bo(h)}function li(f){return function(l){return f({...l,validateSpec:ai})}}function bo(f){return[].concat(f).sort((l,h)=>l.line-h.line)}function Xs(f){return function(...l){return bo(f.apply(this,l))}}Ks.source=Xs(li(zu)),Ks.sprite=Xs(li(ea)),Ks.glyphs=Xs(li(tc)),Ks.light=Xs(li(Lu)),Ks.sky=Xs(li(Ru)),Ks.terrain=Xs(li(Qo)),Ks.layer=Xs(li(Yo)),Ks.filter=Xs(li(yo)),Ks.paintProperty=Xs(li(Ql)),Ks.layoutProperty=Xs(li(ec));const Yi=Ks,dh=Yi.light,nc=Yi.paintProperty,ph=Yi.layoutProperty;function wo(f,l){let h=!1;if(l&&l.length)for(const m of l)f.fire(new sn(new Error(m.message))),h=!0;return h}class ta{constructor(l,h,m){const y=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;const C=new Int32Array(this.arrayBuffer);l=C[0],this.d=(h=C[1])+2*(m=C[2]);for(let D=0;D<this.d*this.d;D++){const O=C[3+D],V=C[3+D+1];y.push(O===V?null:C.subarray(O,V))}const S=C[3+y.length+1];this.keys=C.subarray(C[3+y.length],S),this.bboxes=C.subarray(S),this.insert=this._insertReadonly}else{this.d=h+2*m;for(let C=0;C<this.d*this.d;C++)y.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=l,this.padding=m,this.scale=h/l,this.uid=0;const k=m/h*l;this.min=-k,this.max=l+k}insert(l,h,m,y,k){this._forEachCell(h,m,y,k,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(k)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,h,m,y,k,C){this.cells[k].push(C)}query(l,h,m,y,k){const C=this.min,S=this.max;if(l<=C&&h<=C&&S<=m&&S<=y&&!k)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(l,h,m,y,this._queryCell,D,{},k),D}}_queryCell(l,h,m,y,k,C,S,D){const O=this.cells[k];if(O!==null){const V=this.keys,W=this.bboxes;for(let ee=0;ee<O.length;ee++){const ie=O[ee];if(S[ie]===void 0){const le=4*ie;(D?D(W[le+0],W[le+1],W[le+2],W[le+3]):l<=W[le+2]&&h<=W[le+3]&&m>=W[le+0]&&y>=W[le+1])?(S[ie]=!0,C.push(V[ie])):S[ie]=!1}}}}_forEachCell(l,h,m,y,k,C,S,D){const O=this._convertToCellCoord(l),V=this._convertToCellCoord(h),W=this._convertToCellCoord(m),ee=this._convertToCellCoord(y);for(let ie=O;ie<=W;ie++)for(let le=V;le<=ee;le++){const be=this.d*le+ie;if((!D||D(this._convertFromCellCoord(ie),this._convertFromCellCoord(le),this._convertFromCellCoord(ie+1),this._convertFromCellCoord(le+1)))&&k.call(this,l,h,m,y,be,C,S,D))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const l=this.cells,h=3+this.cells.length+1+1;let m=0;for(let C=0;C<this.cells.length;C++)m+=this.cells[C].length;const y=new Int32Array(h+m+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let k=h;for(let C=0;C<l.length;C++){const S=l[C];y[3+C]=k,y.set(S,k),k+=S.length}return y[3+l.length]=k,y.set(this.keys,k),k+=this.keys.length,y[3+l.length+1]=k,y.set(this.bboxes,k),k+=this.bboxes.length,y.buffer}static serialize(l,h){const m=l.toArrayBuffer();return h&&h.push(m),{buffer:m}}static deserialize(l){return new ta(l.buffer)}}const ci={};function tn(f,l,h={}){if(ci[f])throw new Error(`${f} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:f,writeable:!1}),ci[f]={klass:l,omit:h.omit||[],shallow:h.shallow||[]}}tn("Object",Object),tn("TransferableGridIndex",ta),tn("Color",Hn),tn("Error",Error),tn("AJAXError",Vt),tn("ResolvedImage",Us),tn("StylePropertyFunction",Ga),tn("StyleExpression",er,{omit:["_evaluator"]}),tn("ZoomDependentExpression",Wl),tn("ZoomConstantExpression",qa),tn("CompoundExpression",Es,{omit:["_evaluate"]});for(const f in _o)_o[f]._classRegistryKey||tn(`Expression_${f}`,_o[f]);function el(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function xo(f,l){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error)return f;if(el(f)||bt(f))return l&&l.push(f),f;if(ArrayBuffer.isView(f)){const h=f;return l&&l.push(h.buffer),h}if(f instanceof ImageData)return l&&l.push(f.data.buffer),f;if(Array.isArray(f)){const h=[];for(const m of f)h.push(xo(m,l));return h}if(typeof f=="object"){const h=f.constructor,m=h._classRegistryKey;if(!m)throw new Error(`can't serialize object of unregistered class ${h.name}`);if(!ci[m])throw new Error(`${m} is not registered.`);const y=h.serialize?h.serialize(f,l):{};if(h.serialize){if(l&&y===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const k in f){if(!f.hasOwnProperty(k)||ci[m].omit.indexOf(k)>=0)continue;const C=f[k];y[k]=ci[m].shallow.indexOf(k)>=0?C:xo(C,l)}f instanceof Error&&(y.message=f.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(y.$name=m),y}throw new Error("can't serialize object of type "+typeof f)}function $o(f){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||el(f)||bt(f)||ArrayBuffer.isView(f)||f instanceof ImageData)return f;if(Array.isArray(f))return f.map($o);if(typeof f=="object"){const l=f.$name||"Object";if(!ci[l])throw new Error(`can't deserialize unregistered class ${l}`);const{klass:h}=ci[l];if(!h)throw new Error(`can't deserialize unregistered class ${l}`);if(h.deserialize)return h.deserialize(f);const m=Object.create(h.prototype);for(const y of Object.keys(f)){if(y==="$name")continue;const k=f[y];m[y]=ci[l].shallow.indexOf(y)>=0?k:$o(k)}return m}throw new Error("can't deserialize object of type "+typeof f)}class Ou{constructor(){this.first=!0}update(l,h){const m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}const Xt={"Latin-1 Supplement":f=>f>=128&&f<=255,Arabic:f=>f>=1536&&f<=1791,"Arabic Supplement":f=>f>=1872&&f<=1919,"Arabic Extended-A":f=>f>=2208&&f<=2303,"Hangul Jamo":f=>f>=4352&&f<=4607,"Unified Canadian Aboriginal Syllabics":f=>f>=5120&&f<=5759,Khmer:f=>f>=6016&&f<=6143,"Unified Canadian Aboriginal Syllabics Extended":f=>f>=6320&&f<=6399,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"CJK Radicals Supplement":f=>f>=11904&&f<=12031,"Kangxi Radicals":f=>f>=12032&&f<=12255,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Bopomofo:f=>f>=12544&&f<=12591,"Hangul Compatibility Jamo":f=>f>=12592&&f<=12687,Kanbun:f=>f>=12688&&f<=12703,"Bopomofo Extended":f=>f>=12704&&f<=12735,"CJK Strokes":f=>f>=12736&&f<=12783,"Katakana Phonetic Extensions":f=>f>=12784&&f<=12799,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"CJK Unified Ideographs Extension A":f=>f>=13312&&f<=19903,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Yi Syllables":f=>f>=40960&&f<=42127,"Yi Radicals":f=>f>=42128&&f<=42191,"Hangul Jamo Extended-A":f=>f>=43360&&f<=43391,"Hangul Syllables":f=>f>=44032&&f<=55215,"Hangul Jamo Extended-B":f=>f>=55216&&f<=55295,"Private Use Area":f=>f>=57344&&f<=63743,"CJK Compatibility Ideographs":f=>f>=63744&&f<=64255,"Arabic Presentation Forms-A":f=>f>=64336&&f<=65023,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Arabic Presentation Forms-B":f=>f>=65136&&f<=65279,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function ko(f){for(const l of f)if(tl(l.charCodeAt(0)))return!0;return!1}function Fu(f){for(const l of f)if(!Bu(l.charCodeAt(0)))return!1;return!0}function Bu(f){return!(Xt.Arabic(f)||Xt["Arabic Supplement"](f)||Xt["Arabic Extended-A"](f)||Xt["Arabic Presentation Forms-A"](f)||Xt["Arabic Presentation Forms-B"](f))}function tl(f){return!(f!==746&&f!==747&&(f<4352||!(Xt["Bopomofo Extended"](f)||Xt.Bopomofo(f)||Xt["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Xt["CJK Compatibility Ideographs"](f)||Xt["CJK Compatibility"](f)||Xt["CJK Radicals Supplement"](f)||Xt["CJK Strokes"](f)||!(!Xt["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Xt["CJK Unified Ideographs Extension A"](f)||Xt["CJK Unified Ideographs"](f)||Xt["Enclosed CJK Letters and Months"](f)||Xt["Hangul Compatibility Jamo"](f)||Xt["Hangul Jamo Extended-A"](f)||Xt["Hangul Jamo Extended-B"](f)||Xt["Hangul Jamo"](f)||Xt["Hangul Syllables"](f)||Xt.Hiragana(f)||Xt["Ideographic Description Characters"](f)||Xt.Kanbun(f)||Xt["Kangxi Radicals"](f)||Xt["Katakana Phonetic Extensions"](f)||Xt.Katakana(f)&&f!==12540||!(!Xt["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Xt["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Xt["Unified Canadian Aboriginal Syllabics"](f)||Xt["Unified Canadian Aboriginal Syllabics Extended"](f)||Xt["Vertical Forms"](f)||Xt["Yijing Hexagram Symbols"](f)||Xt["Yi Syllables"](f)||Xt["Yi Radicals"](f))))}function rc(f){return!(tl(f)||function(l){return!!(Xt["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||Xt["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||Xt["Letterlike Symbols"](l)||Xt["Number Forms"](l)||Xt["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||Xt["Control Pictures"](l)&&l!==9251||Xt["Optical Character Recognition"](l)||Xt["Enclosed Alphanumerics"](l)||Xt["Geometric Shapes"](l)||Xt["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||Xt["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||Xt["CJK Symbols and Punctuation"](l)||Xt.Katakana(l)||Xt["Private Use Area"](l)||Xt["CJK Compatibility Forms"](l)||Xt["Small Form Variants"](l)||Xt["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(f))}function nl(f){return f>=1424&&f<=2303||Xt["Arabic Presentation Forms-A"](f)||Xt["Arabic Presentation Forms-B"](f)}function Nu(f,l){return!(!l&&nl(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Xt.Khmer(f))}function mh(f){for(const l of f)if(nl(l.charCodeAt(0)))return!0;return!1}const Mi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class rr{constructor(l,h){this.zoom=l,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ou,this.transition={})}isSupportedScript(l){return function(h,m){for(const y of h)if(!Nu(y.charCodeAt(0),m))return!1;return!0}(l,Mi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const l=this.zoom,h=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}}}class na{constructor(l,h){this.property=l,this.value=h,this.expression=function(m,y){if(ja(m))return new Ga(m,y);if(Yn(m)){const k=Su(m,y);if(k.result==="error")throw new Error(k.value.map(C=>`${C.key}: ${C.message}`).join(", "));return k.value}{let k=m;return y.type==="color"&&typeof m=="string"?k=Hn.parse(m):y.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(k=Vs.parse(m)):k=gs.parse(m),{kind:"constant",evaluate:()=>k}}}(h===void 0?l.specification.default:h,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,h,m){return this.property.possiblyEvaluate(this,l,h,m)}}class rl{constructor(l){this.property=l,this.value=new na(l,void 0)}transitioned(l,h){return new Vu(this.property,this.value,h,de({},l.transition,this.transition),l.now)}untransitioned(){return new Vu(this.property,this.value,null,{},0)}}class sc{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return Ce(this._values[l].value.value)}setValue(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new rl(this._values[l].property)),this._values[l].value=new na(this._values[l].property,h===null?void 0:Ce(h))}getTransition(l){return Ce(this._values[l].transition)}setTransition(l,h){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new rl(this._values[l].property)),this._values[l].transition=Ce(h)||void 0}serialize(){const l={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(l[h]=m);const y=this.getTransition(h);y!==void 0&&(l[`${h}-transition`]=y)}return l}transitioned(l,h){const m=new Uu(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].transitioned(l,h._values[y]);return m}untransitioned(){const l=new Uu(this._properties);for(const h of Object.keys(this._values))l._values[h]=this._values[h].untransitioned();return l}}class Vu{constructor(l,h,m,y,k){this.property=l,this.value=h,this.begin=k+y.delay||0,this.end=this.begin+y.duration||0,l.specification.transition&&(y.delay||y.duration)&&(this.prior=m)}possiblyEvaluate(l,h,m){const y=l.now||0,k=this.value.possiblyEvaluate(l,h,m),C=this.prior;if(C){if(y>this.end)return this.prior=null,k;if(this.value.isDataDriven())return this.prior=null,k;if(y<this.begin)return C.possiblyEvaluate(l,h,m);{const S=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(l,h,m),k,function(D){if(D<=0)return 0;if(D>=1)return 1;const O=D*D,V=O*D;return 4*(D<.5?V:3*(D-O)+V-.75)}(S))}}return k}}class Uu{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,h,m){const y=new ra(this._properties);for(const k of Object.keys(this._values))y._values[k]=this._values[k].possiblyEvaluate(l,h,m);return y}hasTransition(){for(const l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class ju{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return Ce(this._values[l].value)}setValue(l,h){this._values[l]=new na(this._values[l].property,h===null?void 0:Ce(h))}serialize(){const l={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(l[h]=m)}return l}possiblyEvaluate(l,h,m){const y=new ra(this._properties);for(const k of Object.keys(this._values))y._values[k]=this._values[k].possiblyEvaluate(l,h,m);return y}}class Js{constructor(l,h,m){this.property=l,this.value=h,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,h,m,y){return this.property.evaluate(this.value,this.parameters,l,h,m,y)}}class ra{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class fn{constructor(l){this.specification=l}possiblyEvaluate(l,h){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(h)}interpolate(l,h,m){const y=as[this.specification.type];return y?y(l,h,m):l}}class _n{constructor(l,h){this.specification=l,this.overrides=h}possiblyEvaluate(l,h,m,y){return new Js(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(h,null,{},m,y)}:l.expression,h)}interpolate(l,h,m){if(l.value.kind!=="constant"||h.value.kind!=="constant")return l;if(l.value.value===void 0||h.value.value===void 0)return new Js(this,{kind:"constant",value:void 0},l.parameters);const y=as[this.specification.type];if(y){const k=y(l.value.value,h.value.value,m);return new Js(this,{kind:"constant",value:k},l.parameters)}return l}evaluate(l,h,m,y,k,C){return l.kind==="constant"?l.value:l.evaluate(h,m,y,k,C)}}class sl extends _n{possiblyEvaluate(l,h,m,y){if(l.value===void 0)return new Js(this,{kind:"constant",value:void 0},h);if(l.expression.kind==="constant"){const k=l.expression.evaluate(h,null,{},m,y),C=l.property.specification.type==="resolvedImage"&&typeof k!="string"?k.name:k,S=this._calculate(C,C,C,h);return new Js(this,{kind:"constant",value:S},h)}if(l.expression.kind==="camera"){const k=this._calculate(l.expression.evaluate({zoom:h.zoom-1}),l.expression.evaluate({zoom:h.zoom}),l.expression.evaluate({zoom:h.zoom+1}),h);return new Js(this,{kind:"constant",value:k},h)}return new Js(this,l.expression,h)}evaluate(l,h,m,y,k,C){if(l.kind==="source"){const S=l.evaluate(h,m,y,k,C);return this._calculate(S,S,S,h)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(h.zoom)-1},m,y),l.evaluate({zoom:Math.floor(h.zoom)},m,y),l.evaluate({zoom:Math.floor(h.zoom)+1},m,y),h):l.value}_calculate(l,h,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:m,to:h}}interpolate(l){return l}}class sa{constructor(l){this.specification=l}possiblyEvaluate(l,h,m,y){if(l.value!==void 0){if(l.expression.kind==="constant"){const k=l.expression.evaluate(h,null,{},m,y);return this._calculate(k,k,k,h)}return this._calculate(l.expression.evaluate(new rr(Math.floor(h.zoom-1),h)),l.expression.evaluate(new rr(Math.floor(h.zoom),h)),l.expression.evaluate(new rr(Math.floor(h.zoom+1),h)),h)}}_calculate(l,h,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:l,to:h}:{from:m,to:h}}interpolate(l){return l}}class ic{constructor(l){this.specification=l}possiblyEvaluate(l,h,m,y){return!!l.expression.evaluate(h,null,{},m,y)}interpolate(){return!1}}class ys{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in l){const m=l[h];m.specification.overridable&&this.overridableProperties.push(h);const y=this.defaultPropertyValues[h]=new na(m,void 0),k=this.defaultTransitionablePropertyValues[h]=new rl(m);this.defaultTransitioningPropertyValues[h]=k.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=y.possiblyEvaluate({})}}}tn("DataDrivenProperty",_n),tn("DataConstantProperty",fn),tn("CrossFadedDataDrivenProperty",sl),tn("CrossFadedProperty",sa),tn("ColorRampProperty",ic);const oc="-transition";class Ys extends ln{constructor(l,h){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),h.layout&&(this._unevaluatedLayout=new ju(h.layout)),h.paint)){this._transitionablePaint=new sc(h.paint);for(const m in l.paint)this.setPaintProperty(m,l.paint[m],{validate:!1});for(const m in l.layout)this.setLayoutProperty(m,l.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ra(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,h,m={}){h!=null&&this._validate(ph,`layers.${this.id}.layout.${l}`,l,h,m)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,h):this.visibility=h)}getPaintProperty(l){return l.endsWith(oc)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,h,m={}){if(h!=null&&this._validate(nc,`layers.${this.id}.paint.${l}`,l,h,m))return!1;if(l.endsWith(oc))return this._transitionablePaint.setTransition(l.slice(0,-11),h||void 0),!1;{const y=this._transitionablePaint._values[l],k=y.property.specification["property-type"]==="cross-faded-data-driven",C=y.value.isDataDriven(),S=y.value;this._transitionablePaint.setValue(l,h),this._handleSpecialPaintPropertyUpdate(l);const D=this._transitionablePaint._values[l].value;return D.isDataDriven()||C||k||this._handleOverridablePaintPropertyUpdate(l,S,D)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,h,m){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,h){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,h)}serialize(){const l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),we(l,(h,m)=>!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length))}_validate(l,h,m,y,k={}){return(!k||k.validate!==!1)&&wo(this,l.call(Yi,{key:h,layerType:this.type,objectKey:m,value:y,styleSpec:We,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const l in this.paint._values){const h=this.paint.get(l);if(h instanceof Js&&vo(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const qu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ia{constructor(l,h){this._structArray=l,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class pr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,h){return l._trim(),h&&(l.isTransferred=!0,h.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){const h=Object.create(this.prototype);return h.arrayBuffer=l.arrayBuffer,h.length=l.length,h.capacity=l.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function kr(f,l=1){let h=0,m=0;return{members:f.map(y=>{const k=qu[y.type].BYTES_PER_ELEMENT,C=h=Gu(h,Math.max(l,k)),S=y.components||1;return m=Math.max(m,k),h+=k*S,{name:y.name,type:y.type,components:S,offset:C}}),size:Gu(h,Math.max(m,l)),alignment:l}}function Gu(f,l){return Math.ceil(f/l)*l}class oa extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h){const m=this.length;return this.resize(m+1),this.emplace(m,l,h)}emplace(l,h,m){const y=2*l;return this.int16[y+0]=h,this.int16[y+1]=m,l}}oa.prototype.bytesPerElement=4,tn("StructArrayLayout2i4",oa);class vi extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,l,h,m)}emplace(l,h,m,y){const k=3*l;return this.int16[k+0]=h,this.int16[k+1]=m,this.int16[k+2]=y,l}}vi.prototype.bytesPerElement=6,tn("StructArrayLayout3i6",vi);class ac extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,y){const k=this.length;return this.resize(k+1),this.emplace(k,l,h,m,y)}emplace(l,h,m,y,k){const C=4*l;return this.int16[C+0]=h,this.int16[C+1]=m,this.int16[C+2]=y,this.int16[C+3]=k,l}}ac.prototype.bytesPerElement=8,tn("StructArrayLayout4i8",ac);class lc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,y,k,C){const S=this.length;return this.resize(S+1),this.emplace(S,l,h,m,y,k,C)}emplace(l,h,m,y,k,C,S){const D=6*l;return this.int16[D+0]=h,this.int16[D+1]=m,this.int16[D+2]=y,this.int16[D+3]=k,this.int16[D+4]=C,this.int16[D+5]=S,l}}lc.prototype.bytesPerElement=12,tn("StructArrayLayout2i4i12",lc);class cc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,y,k,C){const S=this.length;return this.resize(S+1),this.emplace(S,l,h,m,y,k,C)}emplace(l,h,m,y,k,C,S){const D=4*l,O=8*l;return this.int16[D+0]=h,this.int16[D+1]=m,this.uint8[O+4]=y,this.uint8[O+5]=k,this.uint8[O+6]=C,this.uint8[O+7]=S,l}}cc.prototype.bytesPerElement=8,tn("StructArrayLayout2i4ub8",cc);class aa extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h){const m=this.length;return this.resize(m+1),this.emplace(m,l,h)}emplace(l,h,m){const y=2*l;return this.float32[y+0]=h,this.float32[y+1]=m,l}}aa.prototype.bytesPerElement=8,tn("StructArrayLayout2f8",aa);class il extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,y,k,C,S,D,O,V){const W=this.length;return this.resize(W+1),this.emplace(W,l,h,m,y,k,C,S,D,O,V)}emplace(l,h,m,y,k,C,S,D,O,V,W){const ee=10*l;return this.uint16[ee+0]=h,this.uint16[ee+1]=m,this.uint16[ee+2]=y,this.uint16[ee+3]=k,this.uint16[ee+4]=C,this.uint16[ee+5]=S,this.uint16[ee+6]=D,this.uint16[ee+7]=O,this.uint16[ee+8]=V,this.uint16[ee+9]=W,l}}il.prototype.bytesPerElement=20,tn("StructArrayLayout10ui20",il);class uc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,y,k,C,S,D,O,V,W,ee){const ie=this.length;return this.resize(ie+1),this.emplace(ie,l,h,m,y,k,C,S,D,O,V,W,ee)}emplace(l,h,m,y,k,C,S,D,O,V,W,ee,ie){const le=12*l;return this.int16[le+0]=h,this.int16[le+1]=m,this.int16[le+2]=y,this.int16[le+3]=k,this.uint16[le+4]=C,this.uint16[le+5]=S,this.uint16[le+6]=D,this.uint16[le+7]=O,this.int16[le+8]=V,this.int16[le+9]=W,this.int16[le+10]=ee,this.int16[le+11]=ie,l}}uc.prototype.bytesPerElement=24,tn("StructArrayLayout4i4ui4i24",uc);class fc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,l,h,m)}emplace(l,h,m,y){const k=3*l;return this.float32[k+0]=h,this.float32[k+1]=m,this.float32[k+2]=y,l}}fc.prototype.bytesPerElement=12,tn("StructArrayLayout3f12",fc);class yi extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint32[1*l+0]=h,l}}yi.prototype.bytesPerElement=4,tn("StructArrayLayout1ul4",yi);class ol extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m,y,k,C,S,D,O){const V=this.length;return this.resize(V+1),this.emplace(V,l,h,m,y,k,C,S,D,O)}emplace(l,h,m,y,k,C,S,D,O,V){const W=10*l,ee=5*l;return this.int16[W+0]=h,this.int16[W+1]=m,this.int16[W+2]=y,this.int16[W+3]=k,this.int16[W+4]=C,this.int16[W+5]=S,this.uint32[ee+3]=D,this.uint16[W+8]=O,this.uint16[W+9]=V,l}}ol.prototype.bytesPerElement=20,tn("StructArrayLayout6i1ul2ui20",ol);class la extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,y,k,C){const S=this.length;return this.resize(S+1),this.emplace(S,l,h,m,y,k,C)}emplace(l,h,m,y,k,C,S){const D=6*l;return this.int16[D+0]=h,this.int16[D+1]=m,this.int16[D+2]=y,this.int16[D+3]=k,this.int16[D+4]=C,this.int16[D+5]=S,l}}la.prototype.bytesPerElement=12,tn("StructArrayLayout2i2i2i12",la);class al extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,h,m,y,k){const C=this.length;return this.resize(C+1),this.emplace(C,l,h,m,y,k)}emplace(l,h,m,y,k,C){const S=4*l,D=8*l;return this.float32[S+0]=h,this.float32[S+1]=m,this.float32[S+2]=y,this.int16[D+6]=k,this.int16[D+7]=C,l}}al.prototype.bytesPerElement=16,tn("StructArrayLayout2f1f2i16",al);class ca extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,y){const k=this.length;return this.resize(k+1),this.emplace(k,l,h,m,y)}emplace(l,h,m,y,k){const C=12*l,S=3*l;return this.uint8[C+0]=h,this.uint8[C+1]=m,this.float32[S+1]=y,this.float32[S+2]=k,l}}ca.prototype.bytesPerElement=12,tn("StructArrayLayout2ub2f12",ca);class ll extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,l,h,m)}emplace(l,h,m,y){const k=3*l;return this.uint16[k+0]=h,this.uint16[k+1]=m,this.uint16[k+2]=y,l}}ll.prototype.bytesPerElement=6,tn("StructArrayLayout3ui6",ll);class Co extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,y,k,C,S,D,O,V,W,ee,ie,le,be,Pe,ze){const Ge=this.length;return this.resize(Ge+1),this.emplace(Ge,l,h,m,y,k,C,S,D,O,V,W,ee,ie,le,be,Pe,ze)}emplace(l,h,m,y,k,C,S,D,O,V,W,ee,ie,le,be,Pe,ze,Ge){const Le=24*l,Ne=12*l,lt=48*l;return this.int16[Le+0]=h,this.int16[Le+1]=m,this.uint16[Le+2]=y,this.uint16[Le+3]=k,this.uint32[Ne+2]=C,this.uint32[Ne+3]=S,this.uint32[Ne+4]=D,this.uint16[Le+10]=O,this.uint16[Le+11]=V,this.uint16[Le+12]=W,this.float32[Ne+7]=ee,this.float32[Ne+8]=ie,this.uint8[lt+36]=le,this.uint8[lt+37]=be,this.uint8[lt+38]=Pe,this.uint32[Ne+10]=ze,this.int16[Le+22]=Ge,l}}Co.prototype.bytesPerElement=48,tn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Co);class Qi extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,y,k,C,S,D,O,V,W,ee,ie,le,be,Pe,ze,Ge,Le,Ne,lt,ht,Yt,an,Jt,Ht,Ot,rn){const Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,l,h,m,y,k,C,S,D,O,V,W,ee,ie,le,be,Pe,ze,Ge,Le,Ne,lt,ht,Yt,an,Jt,Ht,Ot,rn)}emplace(l,h,m,y,k,C,S,D,O,V,W,ee,ie,le,be,Pe,ze,Ge,Le,Ne,lt,ht,Yt,an,Jt,Ht,Ot,rn,Gt){const Pt=32*l,pn=16*l;return this.int16[Pt+0]=h,this.int16[Pt+1]=m,this.int16[Pt+2]=y,this.int16[Pt+3]=k,this.int16[Pt+4]=C,this.int16[Pt+5]=S,this.int16[Pt+6]=D,this.int16[Pt+7]=O,this.uint16[Pt+8]=V,this.uint16[Pt+9]=W,this.uint16[Pt+10]=ee,this.uint16[Pt+11]=ie,this.uint16[Pt+12]=le,this.uint16[Pt+13]=be,this.uint16[Pt+14]=Pe,this.uint16[Pt+15]=ze,this.uint16[Pt+16]=Ge,this.uint16[Pt+17]=Le,this.uint16[Pt+18]=Ne,this.uint16[Pt+19]=lt,this.uint16[Pt+20]=ht,this.uint16[Pt+21]=Yt,this.uint16[Pt+22]=an,this.uint32[pn+12]=Jt,this.float32[pn+13]=Ht,this.float32[pn+14]=Ot,this.uint16[Pt+30]=rn,this.uint16[Pt+31]=Gt,l}}Qi.prototype.bytesPerElement=64,tn("StructArrayLayout8i15ui1ul2f2ui64",Qi);class cl extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.float32[1*l+0]=h,l}}cl.prototype.bytesPerElement=4,tn("StructArrayLayout1f4",cl);class ul extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,l,h,m)}emplace(l,h,m,y){const k=3*l;return this.uint16[6*l+0]=h,this.float32[k+1]=m,this.float32[k+2]=y,l}}ul.prototype.bytesPerElement=12,tn("StructArrayLayout1ui2f12",ul);class eo extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,l,h,m)}emplace(l,h,m,y){const k=4*l;return this.uint32[2*l+0]=h,this.uint16[k+2]=m,this.uint16[k+3]=y,l}}eo.prototype.bytesPerElement=8,tn("StructArrayLayout1ul2ui8",eo);class hc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,h){const m=this.length;return this.resize(m+1),this.emplace(m,l,h)}emplace(l,h,m){const y=2*l;return this.uint16[y+0]=h,this.uint16[y+1]=m,l}}hc.prototype.bytesPerElement=4,tn("StructArrayLayout2ui4",hc);class dc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){const h=this.length;return this.resize(h+1),this.emplace(h,l)}emplace(l,h){return this.uint16[1*l+0]=h,l}}dc.prototype.bytesPerElement=2,tn("StructArrayLayout1ui2",dc);class fl extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,h,m,y){const k=this.length;return this.resize(k+1),this.emplace(k,l,h,m,y)}emplace(l,h,m,y,k){const C=4*l;return this.float32[C+0]=h,this.float32[C+1]=m,this.float32[C+2]=y,this.float32[C+3]=k,l}}fl.prototype.bytesPerElement=16,tn("StructArrayLayout4f16",fl);class Hu extends ia{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}Hu.prototype.size=20;class w extends ol{get(l){return new Hu(this,l)}}tn("CollisionBoxArray",w);class c extends ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}c.prototype.size=48;class d extends Co{get(l){return new c(this,l)}}tn("PlacedSymbolArray",d);class g extends ia{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}g.prototype.size=64;class v extends Qi{get(l){return new g(this,l)}}tn("SymbolInstanceArray",v);class x extends cl{getoffsetX(l){return this.float32[1*l+0]}}tn("GlyphOffsetArray",x);class A extends vi{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}tn("SymbolLineVertexArray",A);class M extends ia{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}M.prototype.size=12;class R extends ul{get(l){return new M(this,l)}}tn("TextAnchorOffsetArray",R);class N extends ia{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}N.prototype.size=8;class K extends eo{get(l){return new N(this,l)}}tn("FeatureIndexArray",K);class X extends oa{}class oe extends oa{}class Te extends oa{}class Se extends lc{}class Me extends cc{}class ye extends aa{}class Oe extends il{}class Xe extends uc{}class De extends fc{}class Ve extends yi{}class Je extends la{}class tt extends ca{}class rt extends ll{}class _t extends hc{}const pt=kr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rt}=pt;class Ft{constructor(l=[]){this.segments=l}prepareSegment(l,h,m,y){let k=this.segments[this.segments.length-1];return l>Ft.MAX_VERTEX_ARRAY_LENGTH&&fe(`Max vertices per segment is ${Ft.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!k||k.vertexLength+l>Ft.MAX_VERTEX_ARRAY_LENGTH||k.sortKey!==y)&&(k={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},y!==void 0&&(k.sortKey=y),this.segments.push(k)),k}get(){return this.segments}destroy(){for(const l of this.segments)for(const h in l.vaos)l.vaos[h].destroy()}static simpleSegment(l,h,m,y){return new Ft([{vertexOffset:l,primitiveOffset:h,vertexLength:m,primitiveLength:y,vaos:{},sortKey:0}])}}function Tn(f,l){return 256*(f=re(Math.floor(f),0,255))+re(Math.floor(l),0,255)}Ft.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,tn("SegmentVector",Ft);const qt=kr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var gn={exports:{}},Pn={exports:{}};Pn.exports=function(f,l){var h,m,y,k,C,S,D,O;for(m=f.length-(h=3&f.length),y=l,C=3432918353,S=461845907,O=0;O<m;)D=255&f.charCodeAt(O)|(255&f.charCodeAt(++O))<<8|(255&f.charCodeAt(++O))<<16|(255&f.charCodeAt(++O))<<24,++O,y=27492+(65535&(k=5*(65535&(y=(y^=D=(65535&(D=(D=(65535&D)*C+(((D>>>16)*C&65535)<<16)&4294967295)<<15|D>>>17))*S+(((D>>>16)*S&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(k>>>16)&65535)<<16);switch(D=0,h){case 3:D^=(255&f.charCodeAt(O+2))<<16;case 2:D^=(255&f.charCodeAt(O+1))<<8;case 1:y^=D=(65535&(D=(D=(65535&(D^=255&f.charCodeAt(O)))*C+(((D>>>16)*C&65535)<<16)&4294967295)<<15|D>>>17))*S+(((D>>>16)*S&65535)<<16)&4294967295}return y^=f.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var Nn=Pn.exports,wn={exports:{}};wn.exports=function(f,l){for(var h,m=f.length,y=l^m,k=0;m>=4;)h=1540483477*(65535&(h=255&f.charCodeAt(k)|(255&f.charCodeAt(++k))<<8|(255&f.charCodeAt(++k))<<16|(255&f.charCodeAt(++k))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++k;switch(m){case 3:y^=(255&f.charCodeAt(k+2))<<16;case 2:y^=(255&f.charCodeAt(k+1))<<8;case 1:y=1540483477*(65535&(y^=255&f.charCodeAt(k)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var Dn=Nn,zn=wn.exports;gn.exports=Dn,gn.exports.murmur3=Dn,gn.exports.murmur2=zn;var mr=u(gn.exports);class Wn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,h,m,y){this.ids.push(As(l)),this.positions.push(h,m,y)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=As(l);let m=0,y=this.ids.length-1;for(;m<y;){const C=m+y>>1;this.ids[C]>=h?y=C:m=C+1}const k=[];for(;this.ids[m]===h;)k.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return k}static serialize(l,h){const m=new Float64Array(l.ids),y=new Uint32Array(l.positions);return Or(m,y,0,m.length-1),h&&h.push(m.buffer,y.buffer),{ids:m,positions:y}}static deserialize(l){const h=new Wn;return h.ids=l.ids,h.positions=l.positions,h.indexed=!0,h}}function As(f){const l=+f;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:mr(String(f))}function Or(f,l,h,m){for(;h<m;){const y=f[h+m>>1];let k=h-1,C=m+1;for(;;){do k++;while(f[k]<y);do C--;while(f[C]>y);if(k>=C)break;ar(f,k,C),ar(l,3*k,3*C),ar(l,3*k+1,3*C+1),ar(l,3*k+2,3*C+2)}C-h<m-C?(Or(f,l,h,C),h=C+1):(Or(f,l,C+1,m),m=C)}}function ar(f,l,h){const m=f[l];f[l]=f[h],f[h]=m}tn("FeaturePositionMap",Wn);class Fr{constructor(l,h){this.gl=l.gl,this.location=h}}class Ms extends Fr{constructor(l,h){super(l,h),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class ui extends Fr{constructor(l,h){super(l,h),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Di extends Fr{constructor(l,h){super(l,h),this.current=Hn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}const ua=new Float32Array(16);function zi(f){return[Tn(255*f.r,255*f.g),Tn(255*f.b,255*f.a)]}class fi{constructor(l,h,m){this.value=l,this.uniformNames=h.map(y=>`u_${y}`),this.type=m}setUniform(l,h,m){l.set(m.constantOr(this.value))}getBinding(l,h,m){return this.type==="color"?new Di(l,h):new Ms(l,h)}}class Pr{constructor(l,h){this.uniformNames=h.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=l.tlbr}setUniform(l,h,m,y){const k=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;k&&l.set(k)}getBinding(l,h,m){return m.substr(0,9)==="u_pattern"?new ui(l,h):new Ms(l,h)}}class lr{constructor(l,h,m,y){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(k=>({name:`a_${k}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(l,h,m,y,k){const C=this.paintVertexArray.length,S=this.expression.evaluate(new rr(0),h,{},y,[],k);this.paintVertexArray.resize(l),this._setPaintValue(C,l,S)}updatePaintArray(l,h,m,y){const k=this.expression.evaluate({zoom:0},m,y);this._setPaintValue(l,h,k)}_setPaintValue(l,h,m){if(this.type==="color"){const y=zi(m);for(let k=l;k<h;k++)this.paintVertexArray.emplace(k,y[0],y[1])}else{for(let y=l;y<h;y++)this.paintVertexArray.emplace(y,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class sr{constructor(l,h,m,y,k,C){this.expression=l,this.uniformNames=h.map(S=>`u_${S}_t`),this.type=m,this.useIntegerZoom=y,this.zoom=k,this.maxValue=0,this.paintVertexAttributes=h.map(S=>({name:`a_${S}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(l,h,m,y,k){const C=this.expression.evaluate(new rr(this.zoom),h,{},y,[],k),S=this.expression.evaluate(new rr(this.zoom+1),h,{},y,[],k),D=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(D,l,C,S)}updatePaintArray(l,h,m,y){const k=this.expression.evaluate({zoom:this.zoom},m,y),C=this.expression.evaluate({zoom:this.zoom+1},m,y);this._setPaintValue(l,h,k,C)}_setPaintValue(l,h,m,y){if(this.type==="color"){const k=zi(m),C=zi(y);for(let S=l;S<h;S++)this.paintVertexArray.emplace(S,k[0],k[1],C[0],C[1])}else{for(let k=l;k<h;k++)this.paintVertexArray.emplace(k,m,y);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(y))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,h){const m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,y=re(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(y)}getBinding(l,h,m){return new Ms(l,h)}}class js{constructor(l,h,m,y,k,C){this.expression=l,this.type=h,this.useIntegerZoom=m,this.zoom=y,this.layerId=C,this.zoomInPaintVertexArray=new k,this.zoomOutPaintVertexArray=new k}populatePaintArray(l,h,m){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(y,l,h.patterns&&h.patterns[this.layerId],m)}updatePaintArray(l,h,m,y,k){this._setPaintValues(l,h,m.patterns&&m.patterns[this.layerId],k)}_setPaintValues(l,h,m,y){if(!y||!m)return;const{min:k,mid:C,max:S}=m,D=y[k],O=y[C],V=y[S];if(D&&O&&V)for(let W=l;W<h;W++)this.zoomInPaintVertexArray.emplace(W,O.tl[0],O.tl[1],O.br[0],O.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],O.pixelRatio,D.pixelRatio),this.zoomOutPaintVertexArray.emplace(W,O.tl[0],O.tl[1],O.br[0],O.br[1],V.tl[0],V.tl[1],V.br[0],V.br[1],O.pixelRatio,V.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,qt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,qt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Er{constructor(l,h,m){this.binders={},this._buffers=[];const y=[];for(const k in l.paint._values){if(!m(k))continue;const C=l.paint.get(k);if(!(C instanceof Js&&vo(C.property.specification)))continue;const S=qs(k,l.type),D=C.value,O=C.property.specification.type,V=C.property.useIntegerZoom,W=C.property.specification["property-type"],ee=W==="cross-faded"||W==="cross-faded-data-driven";if(D.kind==="constant")this.binders[k]=ee?new Pr(D.value,S):new fi(D.value,S,O),y.push(`/u_${k}`);else if(D.kind==="source"||ee){const ie=Ar(k,O,"source");this.binders[k]=ee?new js(D,O,V,h,ie,l.id):new lr(D,S,O,ie),y.push(`/a_${k}`)}else{const ie=Ar(k,O,"composite");this.binders[k]=new sr(D,S,O,V,h,ie),y.push(`/z_${k}`)}}this.cacheKey=y.sort().join("")}getMaxValue(l){const h=this.binders[l];return h instanceof lr||h instanceof sr?h.maxValue:0}populatePaintArrays(l,h,m,y,k){for(const C in this.binders){const S=this.binders[C];(S instanceof lr||S instanceof sr||S instanceof js)&&S.populatePaintArray(l,h,m,y,k)}}setConstantPatternPositions(l,h){for(const m in this.binders){const y=this.binders[m];y instanceof Pr&&y.setConstantPatternPositions(l,h)}}updatePaintArrays(l,h,m,y,k){let C=!1;for(const S in l){const D=h.getPositions(S);for(const O of D){const V=m.feature(O.index);for(const W in this.binders){const ee=this.binders[W];if((ee instanceof lr||ee instanceof sr||ee instanceof js)&&ee.expression.isStateDependent===!0){const ie=y.paint.get(W);ee.expression=ie.value,ee.updatePaintArray(O.start,O.end,V,l[S],k),C=!0}}}}return C}defines(){const l=[];for(const h in this.binders){const m=this.binders[h];(m instanceof fi||m instanceof Pr)&&l.push(...m.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return l}getBinderAttributes(){const l=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof lr||m instanceof sr)for(let y=0;y<m.paintVertexAttributes.length;y++)l.push(m.paintVertexAttributes[y].name);else if(m instanceof js)for(let y=0;y<qt.members.length;y++)l.push(qt.members[y].name)}return l}getBinderUniforms(){const l=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof fi||m instanceof Pr||m instanceof sr)for(const y of m.uniformNames)l.push(y)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,h){const m=[];for(const y in this.binders){const k=this.binders[y];if(k instanceof fi||k instanceof Pr||k instanceof sr){for(const C of k.uniformNames)if(h[C]){const S=k.getBinding(l,h[C],C);m.push({name:C,property:y,binding:S})}}}return m}setUniforms(l,h,m,y){for(const{name:k,property:C,binding:S}of h)this.binders[C].setUniform(S,y,m.get(C),k)}updatePaintBuffers(l){this._buffers=[];for(const h in this.binders){const m=this.binders[h];if(l&&m instanceof js){const y=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(m instanceof lr||m instanceof sr)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(const h in this.binders){const m=this.binders[h];(m instanceof lr||m instanceof sr||m instanceof js)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(const l in this.binders){const h=this.binders[l];(h instanceof lr||h instanceof sr||h instanceof js)&&h.destroy()}}}class cr{constructor(l,h,m=()=>!0){this.programConfigurations={};for(const y of l)this.programConfigurations[y.id]=new Er(y,h,m);this.needsUpload=!1,this._featureMap=new Wn,this._bufferOffset=0}populatePaintArrays(l,h,m,y,k,C){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(l,h,y,k,C);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,h,m,y){for(const k of m)this.needsUpload=this.programConfigurations[k.id].updatePaintArrays(l,this._featureMap,h,k,y)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(l);this.needsUpload=!1}}destroy(){for(const l in this.programConfigurations)this.programConfigurations[l].destroy()}}function qs(f,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${l}-`,"").replace(/-/g,"_")]}function Ar(f,l,h){const m={color:{source:aa,composite:fl},number:{source:cl,composite:aa}},y=function(k){return{"line-pattern":{source:Oe,composite:Oe},"fill-pattern":{source:Oe,composite:Oe},"fill-extrusion-pattern":{source:Oe,composite:Oe}}[k]}(f);return y&&y[h]||m[l][h]}tn("ConstantBinder",fi),tn("CrossFadedConstantBinder",Pr),tn("SourceExpressionBinder",lr),tn("CrossFadedCompositeBinder",js),tn("CompositeExpressionBinder",sr),tn("ProgramConfiguration",Er,{omit:["_buffers"]}),tn("ProgramConfigurationSet",cr);const vr=8192,pc=Math.pow(2,14)-1,Zu=-pc-1;function to(f){const l=vr/f.extent,h=f.loadGeometry();for(let m=0;m<h.length;m++){const y=h[m];for(let k=0;k<y.length;k++){const C=y[k],S=Math.round(C.x*l),D=Math.round(C.y*l);C.x=re(S,Zu,pc),C.y=re(D,Zu,pc),(S<C.x||S>C.x+1||D<C.y||D>C.y+1)&&fe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function no(f,l){return{type:f.type,id:f.id,properties:f.properties,geometry:l?to(f):[]}}function hl(f,l,h,m,y){f.emplaceBack(2*l+(m+1)/2,2*h+(y+1)/2)}class Li{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(h=>h.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new oe,this.indexArray=new rt,this.segments=new Ft,this.programConfigurations=new cr(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(l,h,m){const y=this.layers[0],k=[];let C=null,S=!1;y.type==="circle"&&(C=y.layout.get("circle-sort-key"),S=!C.isConstant());for(const{feature:D,id:O,index:V,sourceLayerIndex:W}of l){const ee=this.layers[0]._featureFilter.needGeometry,ie=no(D,ee);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),ie,m))continue;const le=S?C.evaluate(ie,{},m):void 0,be={id:O,properties:D.properties,type:D.type,sourceLayerIndex:W,index:V,geometry:ee?ie.geometry:to(D),patterns:{},sortKey:le};k.push(be)}S&&k.sort((D,O)=>D.sortKey-O.sortKey);for(const D of k){const{geometry:O,index:V,sourceLayerIndex:W}=D,ee=l[V].feature;this.addFeature(D,O,V,m),h.featureIndex.insert(ee,O,V,W,this.index)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Rt),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,h,m,y){for(const k of h)for(const C of k){const S=C.x,D=C.y;if(S<0||S>=vr||D<0||D>=vr)continue;const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),V=O.vertexLength;hl(this.layoutVertexArray,S,D,-1,-1),hl(this.layoutVertexArray,S,D,1,-1),hl(this.layoutVertexArray,S,D,1,1),hl(this.layoutVertexArray,S,D,-1,1),this.indexArray.emplaceBack(V,V+1,V+2),this.indexArray.emplaceBack(V,V+3,V+2),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{},y)}}function mc(f,l){for(let h=0;h<f.length;h++)if(pl(l,f[h]))return!0;for(let h=0;h<l.length;h++)if(pl(f,l[h]))return!0;return!!dl(f,l)}function Wu(f,l,h){return!!pl(f,l)||!!_h(l,f,h)}function _c(f,l){if(f.length===1)return op(l,f[0]);for(let h=0;h<l.length;h++){const m=l[h];for(let y=0;y<m.length;y++)if(pl(f,m[y]))return!0}for(let h=0;h<f.length;h++)if(op(l,f[h]))return!0;for(let h=0;h<l.length;h++)if(dl(f,l[h]))return!0;return!1}function gc(f,l,h){if(f.length>1){if(dl(f,l))return!0;for(let m=0;m<l.length;m++)if(_h(l[m],f,h))return!0}for(let m=0;m<f.length;m++)if(_h(f[m],l,h))return!0;return!1}function dl(f,l){if(f.length===0||l.length===0)return!1;for(let h=0;h<f.length-1;h++){const m=f[h],y=f[h+1];for(let k=0;k<l.length-1;k++)if(vc(m,y,l[k],l[k+1]))return!0}return!1}function vc(f,l,h,m){return Ee(f,h,m)!==Ee(l,h,m)&&Ee(f,l,h)!==Ee(f,l,m)}function _h(f,l,h){const m=h*h;if(l.length===1)return f.distSqr(l[0])<m;for(let y=1;y<l.length;y++)if(ip(f,l[y-1],l[y])<m)return!0;return!1}function ip(f,l,h){const m=l.distSqr(h);if(m===0)return f.distSqr(l);const y=((f.x-l.x)*(h.x-l.x)+(f.y-l.y)*(h.y-l.y))/m;return f.distSqr(y<0?l:y>1?h:h.sub(l)._mult(y)._add(l))}function op(f,l){let h,m,y,k=!1;for(let C=0;C<f.length;C++){h=f[C];for(let S=0,D=h.length-1;S<h.length;D=S++)m=h[S],y=h[D],m.y>l.y!=y.y>l.y&&l.x<(y.x-m.x)*(l.y-m.y)/(y.y-m.y)+m.x&&(k=!k)}return k}function pl(f,l){let h=!1;for(let m=0,y=f.length-1;m<f.length;y=m++){const k=f[m],C=f[y];k.y>l.y!=C.y>l.y&&l.x<(C.x-k.x)*(l.y-k.y)/(C.y-k.y)+k.x&&(h=!h)}return h}function hy(f,l,h){const m=h[0],y=h[2];if(f.x<m.x&&l.x<m.x||f.x>y.x&&l.x>y.x||f.y<m.y&&l.y<m.y||f.y>y.y&&l.y>y.y)return!1;const k=Ee(f,l,h[0]);return k!==Ee(f,l,h[1])||k!==Ee(f,l,h[2])||k!==Ee(f,l,h[3])}function yc(f,l,h){const m=l.paint.get(f).value;return m.kind==="constant"?m.value:h.programConfigurations.get(l.id).getMaxValue(f)}function Ku(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Xu(f,l,h,m,y){if(!l[0]&&!l[1])return f;const k=b.convert(l)._mult(y);h==="viewport"&&k._rotate(-m);const C=[];for(let S=0;S<f.length;S++)C.push(f[S].sub(k));return C}let ap,lp;tn("CircleBucket",Li,{omit:["layers"]});var dy={get paint(){return lp=lp||new ys({"circle-radius":new _n(We.paint_circle["circle-radius"]),"circle-color":new _n(We.paint_circle["circle-color"]),"circle-blur":new _n(We.paint_circle["circle-blur"]),"circle-opacity":new _n(We.paint_circle["circle-opacity"]),"circle-translate":new fn(We.paint_circle["circle-translate"]),"circle-translate-anchor":new fn(We.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fn(We.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fn(We.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _n(We.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _n(We.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _n(We.paint_circle["circle-stroke-opacity"])})},get layout(){return ap=ap||new ys({"circle-sort-key":new _n(We.layout_circle["circle-sort-key"])})}},bs=1e-6,ml=typeof Float32Array<"u"?Float32Array:Array;function gh(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function cp(f,l,h){var m=l[0],y=l[1],k=l[2],C=l[3],S=l[4],D=l[5],O=l[6],V=l[7],W=l[8],ee=l[9],ie=l[10],le=l[11],be=l[12],Pe=l[13],ze=l[14],Ge=l[15],Le=h[0],Ne=h[1],lt=h[2],ht=h[3];return f[0]=Le*m+Ne*S+lt*W+ht*be,f[1]=Le*y+Ne*D+lt*ee+ht*Pe,f[2]=Le*k+Ne*O+lt*ie+ht*ze,f[3]=Le*C+Ne*V+lt*le+ht*Ge,f[4]=(Le=h[4])*m+(Ne=h[5])*S+(lt=h[6])*W+(ht=h[7])*be,f[5]=Le*y+Ne*D+lt*ee+ht*Pe,f[6]=Le*k+Ne*O+lt*ie+ht*ze,f[7]=Le*C+Ne*V+lt*le+ht*Ge,f[8]=(Le=h[8])*m+(Ne=h[9])*S+(lt=h[10])*W+(ht=h[11])*be,f[9]=Le*y+Ne*D+lt*ee+ht*Pe,f[10]=Le*k+Ne*O+lt*ie+ht*ze,f[11]=Le*C+Ne*V+lt*le+ht*Ge,f[12]=(Le=h[12])*m+(Ne=h[13])*S+(lt=h[14])*W+(ht=h[15])*be,f[13]=Le*y+Ne*D+lt*ee+ht*Pe,f[14]=Le*k+Ne*O+lt*ie+ht*ze,f[15]=Le*C+Ne*V+lt*le+ht*Ge,f}Math.hypot||(Math.hypot=function(){for(var f=0,l=arguments.length;l--;)f+=arguments[l]*arguments[l];return Math.sqrt(f)});var bc,py=cp;function Ju(f,l,h){var m=l[0],y=l[1],k=l[2],C=l[3];return f[0]=h[0]*m+h[4]*y+h[8]*k+h[12]*C,f[1]=h[1]*m+h[5]*y+h[9]*k+h[13]*C,f[2]=h[2]*m+h[6]*y+h[10]*k+h[14]*C,f[3]=h[3]*m+h[7]*y+h[11]*k+h[15]*C,f}bc=new ml(4),ml!=Float32Array&&(bc[0]=0,bc[1]=0,bc[2]=0,bc[3]=0);class my extends Ys{constructor(l){super(l,dy)}createBucket(l){return new Li(l)}queryRadius(l){const h=l;return yc("circle-radius",this,h)+yc("circle-stroke-width",this,h)+Ku(this.paint.get("circle-translate"))}queryIntersectsFeature(l,h,m,y,k,C,S,D){const O=Xu(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,S),V=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),W=this.paint.get("circle-pitch-alignment")==="map",ee=W?O:function(le,be){return le.map(Pe=>up(Pe,be))}(O,D),ie=W?V*S:V;for(const le of y)for(const be of le){const Pe=W?be:up(be,D);let ze=ie;const Ge=Ju([],[be.x,be.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ze*=Ge[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ze*=C.cameraToCenterDistance/Ge[3]),Wu(ee,Pe,ze))return!0}return!1}}function up(f,l){const h=Ju([],[f.x,f.y,0,1],l);return new b(h[0]/h[3],h[1]/h[3])}class fp extends Li{}let hp;tn("HeatmapBucket",fp,{omit:["layers"]});var _y={get paint(){return hp=hp||new ys({"heatmap-radius":new _n(We.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _n(We.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fn(We.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ic(We.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fn(We.paint_heatmap["heatmap-opacity"])})}};function vh(f,{width:l,height:h},m,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==l*h*m)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${l*h*m}`)}else y=new Uint8Array(l*h*m);return f.width=l,f.height=h,f.data=y,f}function dp(f,{width:l,height:h},m){if(l===f.width&&h===f.height)return;const y=vh({},{width:l,height:h},m);yh(f,y,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,l),height:Math.min(f.height,h)},m),f.width=l,f.height=h,f.data=y.data}function yh(f,l,h,m,y,k){if(y.width===0||y.height===0)return l;if(y.width>f.width||y.height>f.height||h.x>f.width-y.width||h.y>f.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>l.width||y.height>l.height||m.x>l.width-y.width||m.y>l.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const C=f.data,S=l.data;if(C===S)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<y.height;D++){const O=((h.y+D)*f.width+h.x)*k,V=((m.y+D)*l.width+m.x)*k;for(let W=0;W<y.width*k;W++)S[V+W]=C[O+W]}return l}class wc{constructor(l,h){vh(this,l,1,h)}resize(l){dp(this,l,1)}clone(){return new wc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,m,y,k){yh(l,h,m,y,k,1)}}class Qs{constructor(l,h){vh(this,l,4,h)}resize(l){dp(this,l,4)}replace(l,h){h?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Qs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,h,m,y,k){yh(l,h,m,y,k,4)}}function pp(f){const l={},h=f.resolution||256,m=f.clips?f.clips.length:1,y=f.image||new Qs({width:h,height:m});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const k=(C,S,D)=>{l[f.evaluationKey]=D;const O=f.expression.evaluate(l);y.data[C+S+0]=Math.floor(255*O.r/O.a),y.data[C+S+1]=Math.floor(255*O.g/O.a),y.data[C+S+2]=Math.floor(255*O.b/O.a),y.data[C+S+3]=Math.floor(255*O.a)};if(f.clips)for(let C=0,S=0;C<m;++C,S+=4*h)for(let D=0,O=0;D<h;D++,O+=4){const V=D/(h-1),{start:W,end:ee}=f.clips[C];k(S,O,W*(1-V)+ee*V)}else for(let C=0,S=0;C<h;C++,S+=4)k(0,S,C/(h-1));return y}tn("AlphaImage",wc),tn("RGBAImage",Qs);class gy extends Ys{createBucket(l){return new fp(l)}constructor(l){super(l,_y),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=pp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let mp;var vy={get paint(){return mp=mp||new ys({"hillshade-illumination-direction":new fn(We.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fn(We.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fn(We.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fn(We.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fn(We.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fn(We.paint_hillshade["hillshade-accent-color"])})}};class yy extends Ys{constructor(l){super(l,vy)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const by=kr([{name:"a_pos",components:2,type:"Int16"}],4),{members:wy}=by;var bh={exports:{}};function Yu(f,l,h){h=h||2;var m,y,k,C,S,D,O,V=l&&l.length,W=V?l[0]*h:f.length,ee=_p(f,0,W,h,!0),ie=[];if(!ee||ee.next===ee.prev)return ie;if(V&&(ee=function(be,Pe,ze,Ge){var Le,Ne,lt,ht=[];for(Le=0,Ne=Pe.length;Le<Ne;Le++)(lt=_p(be,Pe[Le]*Ge,Le<Ne-1?Pe[Le+1]*Ge:be.length,Ge,!1))===lt.next&&(lt.steiner=!0),ht.push(Py(lt));for(ht.sort(Sy),Le=0;Le<ht.length;Le++)ze=Iy(ht[Le],ze);return ze}(f,l,ee,h)),f.length>80*h){m=k=f[0],y=C=f[1];for(var le=h;le<W;le+=h)(S=f[le])<m&&(m=S),(D=f[le+1])<y&&(y=D),S>k&&(k=S),D>C&&(C=D);O=(O=Math.max(k-m,C-y))!==0?32767/O:0}return xc(ee,ie,h,m,y,O,0),ie}function _p(f,l,h,m,y){var k,C;if(y===$h(f,l,h,m)>0)for(k=l;k<h;k+=m)C=yp(k,f[k],f[k+1],C);else for(k=h-m;k>=l;k-=m)C=yp(k,f[k],f[k+1],C);return C&&Qu(C,C.next)&&(kc(C),C=C.next),C}function fa(f,l){if(!f)return f;l||(l=f);var h,m=f;do if(h=!1,m.steiner||!Qu(m,m.next)&&Cr(m.prev,m,m.next)!==0)m=m.next;else{if(kc(m),(m=l=m.prev)===m.next)break;h=!0}while(h||m!==l);return l}function xc(f,l,h,m,y,k,C){if(f){!C&&k&&function(V,W,ee,ie){var le=V;do le.z===0&&(le.z=wh(le.x,le.y,W,ee,ie)),le.prevZ=le.prev,le.nextZ=le.next,le=le.next;while(le!==V);le.prevZ.nextZ=null,le.prevZ=null,function(be){var Pe,ze,Ge,Le,Ne,lt,ht,Yt,an=1;do{for(ze=be,be=null,Ne=null,lt=0;ze;){for(lt++,Ge=ze,ht=0,Pe=0;Pe<an&&(ht++,Ge=Ge.nextZ);Pe++);for(Yt=an;ht>0||Yt>0&&Ge;)ht!==0&&(Yt===0||!Ge||ze.z<=Ge.z)?(Le=ze,ze=ze.nextZ,ht--):(Le=Ge,Ge=Ge.nextZ,Yt--),Ne?Ne.nextZ=Le:be=Le,Le.prevZ=Ne,Ne=Le;ze=Ge}Ne.nextZ=null,an*=2}while(lt>1)}(le)}(f,m,y,k);for(var S,D,O=f;f.prev!==f.next;)if(S=f.prev,D=f.next,k?$y(f,m,y,k):xy(f))l.push(S.i/h|0),l.push(f.i/h|0),l.push(D.i/h|0),kc(f),f=D.next,O=D.next;else if((f=D)===O){C?C===1?xc(f=ky(fa(f),l,h),l,h,m,y,k,2):C===2&&Cy(f,l,h,m,y,k):xc(fa(f),l,h,m,y,k,1);break}}}function xy(f){var l=f.prev,h=f,m=f.next;if(Cr(l,h,m)>=0)return!1;for(var y=l.x,k=h.x,C=m.x,S=l.y,D=h.y,O=m.y,V=y<k?y<C?y:C:k<C?k:C,W=S<D?S<O?S:O:D<O?D:O,ee=y>k?y>C?y:C:k>C?k:C,ie=S>D?S>O?S:O:D>O?D:O,le=m.next;le!==l;){if(le.x>=V&&le.x<=ee&&le.y>=W&&le.y<=ie&&_l(y,S,k,D,C,O,le.x,le.y)&&Cr(le.prev,le,le.next)>=0)return!1;le=le.next}return!0}function $y(f,l,h,m){var y=f.prev,k=f,C=f.next;if(Cr(y,k,C)>=0)return!1;for(var S=y.x,D=k.x,O=C.x,V=y.y,W=k.y,ee=C.y,ie=S<D?S<O?S:O:D<O?D:O,le=V<W?V<ee?V:ee:W<ee?W:ee,be=S>D?S>O?S:O:D>O?D:O,Pe=V>W?V>ee?V:ee:W>ee?W:ee,ze=wh(ie,le,l,h,m),Ge=wh(be,Pe,l,h,m),Le=f.prevZ,Ne=f.nextZ;Le&&Le.z>=ze&&Ne&&Ne.z<=Ge;){if(Le.x>=ie&&Le.x<=be&&Le.y>=le&&Le.y<=Pe&&Le!==y&&Le!==C&&_l(S,V,D,W,O,ee,Le.x,Le.y)&&Cr(Le.prev,Le,Le.next)>=0||(Le=Le.prevZ,Ne.x>=ie&&Ne.x<=be&&Ne.y>=le&&Ne.y<=Pe&&Ne!==y&&Ne!==C&&_l(S,V,D,W,O,ee,Ne.x,Ne.y)&&Cr(Ne.prev,Ne,Ne.next)>=0))return!1;Ne=Ne.nextZ}for(;Le&&Le.z>=ze;){if(Le.x>=ie&&Le.x<=be&&Le.y>=le&&Le.y<=Pe&&Le!==y&&Le!==C&&_l(S,V,D,W,O,ee,Le.x,Le.y)&&Cr(Le.prev,Le,Le.next)>=0)return!1;Le=Le.prevZ}for(;Ne&&Ne.z<=Ge;){if(Ne.x>=ie&&Ne.x<=be&&Ne.y>=le&&Ne.y<=Pe&&Ne!==y&&Ne!==C&&_l(S,V,D,W,O,ee,Ne.x,Ne.y)&&Cr(Ne.prev,Ne,Ne.next)>=0)return!1;Ne=Ne.nextZ}return!0}function ky(f,l,h){var m=f;do{var y=m.prev,k=m.next.next;!Qu(y,k)&&gp(y,m,m.next,k)&&$c(y,k)&&$c(k,y)&&(l.push(y.i/h|0),l.push(m.i/h|0),l.push(k.i/h|0),kc(m),kc(m.next),m=f=k),m=m.next}while(m!==f);return fa(m)}function Cy(f,l,h,m,y,k){var C=f;do{for(var S=C.next.next;S!==C.prev;){if(C.i!==S.i&&Ey(C,S)){var D=vp(C,S);return C=fa(C,C.next),D=fa(D,D.next),xc(C,l,h,m,y,k,0),void xc(D,l,h,m,y,k,0)}S=S.next}C=C.next}while(C!==f)}function Sy(f,l){return f.x-l.x}function Iy(f,l){var h=function(y,k){var C,S=k,D=y.x,O=y.y,V=-1/0;do{if(O<=S.y&&O>=S.next.y&&S.next.y!==S.y){var W=S.x+(O-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(W<=D&&W>V&&(V=W,C=S.x<S.next.x?S:S.next,W===D))return C}S=S.next}while(S!==k);if(!C)return null;var ee,ie=C,le=C.x,be=C.y,Pe=1/0;S=C;do D>=S.x&&S.x>=le&&D!==S.x&&_l(O<be?D:V,O,le,be,O<be?V:D,O,S.x,S.y)&&(ee=Math.abs(O-S.y)/(D-S.x),$c(S,y)&&(ee<Pe||ee===Pe&&(S.x>C.x||S.x===C.x&&Ty(C,S)))&&(C=S,Pe=ee)),S=S.next;while(S!==ie);return C}(f,l);if(!h)return l;var m=vp(h,f);return fa(m,m.next),fa(h,h.next)}function Ty(f,l){return Cr(f.prev,f,l.prev)<0&&Cr(l.next,f,f.next)<0}function wh(f,l,h,m,y){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-h)*y|0)|f<<8))|f<<4))|f<<2))|f<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*y|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Py(f){var l=f,h=f;do(l.x<h.x||l.x===h.x&&l.y<h.y)&&(h=l),l=l.next;while(l!==f);return h}function _l(f,l,h,m,y,k,C,S){return(y-C)*(l-S)>=(f-C)*(k-S)&&(f-C)*(m-S)>=(h-C)*(l-S)&&(h-C)*(k-S)>=(y-C)*(m-S)}function Ey(f,l){return f.next.i!==l.i&&f.prev.i!==l.i&&!function(h,m){var y=h;do{if(y.i!==h.i&&y.next.i!==h.i&&y.i!==m.i&&y.next.i!==m.i&&gp(y,y.next,h,m))return!0;y=y.next}while(y!==h);return!1}(f,l)&&($c(f,l)&&$c(l,f)&&function(h,m){var y=h,k=!1,C=(h.x+m.x)/2,S=(h.y+m.y)/2;do y.y>S!=y.next.y>S&&y.next.y!==y.y&&C<(y.next.x-y.x)*(S-y.y)/(y.next.y-y.y)+y.x&&(k=!k),y=y.next;while(y!==h);return k}(f,l)&&(Cr(f.prev,f,l.prev)||Cr(f,l.prev,l))||Qu(f,l)&&Cr(f.prev,f,f.next)>0&&Cr(l.prev,l,l.next)>0)}function Cr(f,l,h){return(l.y-f.y)*(h.x-l.x)-(l.x-f.x)*(h.y-l.y)}function Qu(f,l){return f.x===l.x&&f.y===l.y}function gp(f,l,h,m){var y=tf(Cr(f,l,h)),k=tf(Cr(f,l,m)),C=tf(Cr(h,m,f)),S=tf(Cr(h,m,l));return y!==k&&C!==S||!(y!==0||!ef(f,h,l))||!(k!==0||!ef(f,m,l))||!(C!==0||!ef(h,f,m))||!(S!==0||!ef(h,l,m))}function ef(f,l,h){return l.x<=Math.max(f.x,h.x)&&l.x>=Math.min(f.x,h.x)&&l.y<=Math.max(f.y,h.y)&&l.y>=Math.min(f.y,h.y)}function tf(f){return f>0?1:f<0?-1:0}function $c(f,l){return Cr(f.prev,f,f.next)<0?Cr(f,l,f.next)>=0&&Cr(f,f.prev,l)>=0:Cr(f,l,f.prev)<0||Cr(f,f.next,l)<0}function vp(f,l){var h=new xh(f.i,f.x,f.y),m=new xh(l.i,l.x,l.y),y=f.next,k=l.prev;return f.next=l,l.prev=f,h.next=y,y.prev=h,m.next=h,h.prev=m,k.next=m,m.prev=k,m}function yp(f,l,h,m){var y=new xh(f,l,h);return m?(y.next=m.next,y.prev=m,m.next.prev=y,m.next=y):(y.prev=y,y.next=y),y}function kc(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function xh(f,l,h){this.i=f,this.x=l,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $h(f,l,h,m){for(var y=0,k=l,C=h-m;k<h;k+=m)y+=(f[C]-f[k])*(f[k+1]+f[C+1]),C=k;return y}bh.exports=Yu,bh.exports.default=Yu,Yu.deviation=function(f,l,h,m){var y=l&&l.length,k=Math.abs($h(f,0,y?l[0]*h:f.length,h));if(y)for(var C=0,S=l.length;C<S;C++)k-=Math.abs($h(f,l[C]*h,C<S-1?l[C+1]*h:f.length,h));var D=0;for(C=0;C<m.length;C+=3){var O=m[C]*h,V=m[C+1]*h,W=m[C+2]*h;D+=Math.abs((f[O]-f[W])*(f[V+1]-f[O+1])-(f[O]-f[V])*(f[W+1]-f[O+1]))}return k===0&&D===0?0:Math.abs((D-k)/k)},Yu.flatten=function(f){for(var l=f[0][0].length,h={vertices:[],holes:[],dimensions:l},m=0,y=0;y<f.length;y++){for(var k=0;k<f[y].length;k++)for(var C=0;C<l;C++)h.vertices.push(f[y][k][C]);y>0&&h.holes.push(m+=f[y-1].length)}return h};var bp=u(bh.exports);function Ay(f,l,h,m,y){wp(f,l,h||0,m||f.length-1,y||My)}function wp(f,l,h,m,y){for(;m>h;){if(m-h>600){var k=m-h+1,C=l-h+1,S=Math.log(k),D=.5*Math.exp(2*S/3),O=.5*Math.sqrt(S*D*(k-D)/k)*(C-k/2<0?-1:1);wp(f,l,Math.max(h,Math.floor(l-C*D/k+O)),Math.min(m,Math.floor(l+(k-C)*D/k+O)),y)}var V=f[l],W=h,ee=m;for(Cc(f,h,l),y(f[m],V)>0&&Cc(f,h,m);W<ee;){for(Cc(f,W,ee),W++,ee--;y(f[W],V)<0;)W++;for(;y(f[ee],V)>0;)ee--}y(f[h],V)===0?Cc(f,h,ee):Cc(f,++ee,m),ee<=l&&(h=ee+1),l<=ee&&(m=ee-1)}}function Cc(f,l,h){var m=f[l];f[l]=f[h],f[h]=m}function My(f,l){return f<l?-1:f>l?1:0}function kh(f,l){const h=f.length;if(h<=1)return[f];const m=[];let y,k;for(let C=0;C<h;C++){const S=je(f[C]);S!==0&&(f[C].area=Math.abs(S),k===void 0&&(k=S<0),k===S<0?(y&&m.push(y),y=[f[C]]):y.push(f[C]))}if(y&&m.push(y),l>1)for(let C=0;C<m.length;C++)m[C].length<=l||(Ay(m[C],l,1,m[C].length-1,Dy),m[C]=m[C].slice(0,l));return m}function Dy(f,l){return l.area-f.area}function Ch(f,l,h){const m=h.patternDependencies;let y=!1;for(const k of l){const C=k.paint.get(`${f}-pattern`);C.isConstant()||(y=!0);const S=C.constantOr(null);S&&(y=!0,m[S.to]=!0,m[S.from]=!0)}return y}function Sh(f,l,h,m,y){const k=y.patternDependencies;for(const C of l){const S=C.paint.get(`${f}-pattern`).value;if(S.kind!=="constant"){let D=S.evaluate({zoom:m-1},h,{},y.availableImages),O=S.evaluate({zoom:m},h,{},y.availableImages),V=S.evaluate({zoom:m+1},h,{},y.availableImages);D=D&&D.name?D.name:D,O=O&&O.name?O.name:O,V=V&&V.name?V.name:V,k[D]=!0,k[O]=!0,k[V]=!0,h.patterns[C.id]={min:D,mid:O,max:V}}}return h}class Ih{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(h=>h.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Te,this.indexArray=new rt,this.indexArray2=new _t,this.programConfigurations=new cr(l.layers,l.zoom),this.segments=new Ft,this.segments2=new Ft,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(l,h,m){this.hasPattern=Ch("fill",this.layers,h);const y=this.layers[0].layout.get("fill-sort-key"),k=!y.isConstant(),C=[];for(const{feature:S,id:D,index:O,sourceLayerIndex:V}of l){const W=this.layers[0]._featureFilter.needGeometry,ee=no(S,W);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),ee,m))continue;const ie=k?y.evaluate(ee,{},m,h.availableImages):void 0,le={id:D,properties:S.properties,type:S.type,sourceLayerIndex:V,index:O,geometry:W?ee.geometry:to(S),patterns:{},sortKey:ie};C.push(le)}k&&C.sort((S,D)=>S.sortKey-D.sortKey);for(const S of C){const{geometry:D,index:O,sourceLayerIndex:V}=S;if(this.hasPattern){const W=Sh("fill",this.layers,S,this.zoom,h);this.patternFeatures.push(W)}else this.addFeature(S,D,O,m,{});h.featureIndex.insert(l[O].feature,D,O,V,this.index)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,m)}addFeatures(l,h,m){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,wy),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,h,m,y,k){for(const C of kh(h,500)){let S=0;for(const ie of C)S+=ie.length;const D=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),O=D.vertexLength,V=[],W=[];for(const ie of C){if(ie.length===0)continue;ie!==C[0]&&W.push(V.length/2);const le=this.segments2.prepareSegment(ie.length,this.layoutVertexArray,this.indexArray2),be=le.vertexLength;this.layoutVertexArray.emplaceBack(ie[0].x,ie[0].y),this.indexArray2.emplaceBack(be+ie.length-1,be),V.push(ie[0].x),V.push(ie[0].y);for(let Pe=1;Pe<ie.length;Pe++)this.layoutVertexArray.emplaceBack(ie[Pe].x,ie[Pe].y),this.indexArray2.emplaceBack(be+Pe-1,be+Pe),V.push(ie[Pe].x),V.push(ie[Pe].y);le.vertexLength+=ie.length,le.primitiveLength+=ie.length}const ee=bp(V,W);for(let ie=0;ie<ee.length;ie+=3)this.indexArray.emplaceBack(O+ee[ie],O+ee[ie+1],O+ee[ie+2]);D.vertexLength+=S,D.primitiveLength+=ee.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,k,y)}}let xp,$p;tn("FillBucket",Ih,{omit:["layers","patternFeatures"]});var zy={get paint(){return $p=$p||new ys({"fill-antialias":new fn(We.paint_fill["fill-antialias"]),"fill-opacity":new _n(We.paint_fill["fill-opacity"]),"fill-color":new _n(We.paint_fill["fill-color"]),"fill-outline-color":new _n(We.paint_fill["fill-outline-color"]),"fill-translate":new fn(We.paint_fill["fill-translate"]),"fill-translate-anchor":new fn(We.paint_fill["fill-translate-anchor"]),"fill-pattern":new sl(We.paint_fill["fill-pattern"])})},get layout(){return xp=xp||new ys({"fill-sort-key":new _n(We.layout_fill["fill-sort-key"])})}};class Ly extends Ys{constructor(l){super(l,zy)}recalculate(l,h){super.recalculate(l,h);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new Ih(l)}queryRadius(){return Ku(this.paint.get("fill-translate"))}queryIntersectsFeature(l,h,m,y,k,C,S){return _c(Xu(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,S),y)}isTileClipped(){return!0}}const Ry=kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Oy=kr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Fy}=Ry;var So={},By=p,kp=gl;function gl(f,l,h,m,y){this.properties={},this.extent=h,this.type=0,this._pbf=f,this._geometry=-1,this._keys=m,this._values=y,f.readFields(Ny,this,l)}function Ny(f,l,h){f==1?l.id=h.readVarint():f==2?function(m,y){for(var k=m.readVarint()+m.pos;m.pos<k;){var C=y._keys[m.readVarint()],S=y._values[m.readVarint()];y.properties[C]=S}}(h,l):f==3?l.type=h.readVarint():f==4&&(l._geometry=h.pos)}function Vy(f){for(var l,h,m=0,y=0,k=f.length,C=k-1;y<k;C=y++)m+=((h=f[C]).x-(l=f[y]).x)*(l.y+h.y);return m}gl.types=["Unknown","Point","LineString","Polygon"],gl.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var l,h=f.readVarint()+f.pos,m=1,y=0,k=0,C=0,S=[];f.pos<h;){if(y<=0){var D=f.readVarint();m=7&D,y=D>>3}if(y--,m===1||m===2)k+=f.readSVarint(),C+=f.readSVarint(),m===1&&(l&&S.push(l),l=[]),l.push(new By(k,C));else{if(m!==7)throw new Error("unknown command "+m);l&&l.push(l[0].clone())}}return l&&S.push(l),S},gl.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var l=f.readVarint()+f.pos,h=1,m=0,y=0,k=0,C=1/0,S=-1/0,D=1/0,O=-1/0;f.pos<l;){if(m<=0){var V=f.readVarint();h=7&V,m=V>>3}if(m--,h===1||h===2)(y+=f.readSVarint())<C&&(C=y),y>S&&(S=y),(k+=f.readSVarint())<D&&(D=k),k>O&&(O=k);else if(h!==7)throw new Error("unknown command "+h)}return[C,D,S,O]},gl.prototype.toGeoJSON=function(f,l,h){var m,y,k=this.extent*Math.pow(2,h),C=this.extent*f,S=this.extent*l,D=this.loadGeometry(),O=gl.types[this.type];function V(ie){for(var le=0;le<ie.length;le++){var be=ie[le];ie[le]=[360*(be.x+C)/k-180,360/Math.PI*Math.atan(Math.exp((180-360*(be.y+S)/k)*Math.PI/180))-90]}}switch(this.type){case 1:var W=[];for(m=0;m<D.length;m++)W[m]=D[m][0];V(D=W);break;case 2:for(m=0;m<D.length;m++)V(D[m]);break;case 3:for(D=function(ie){var le=ie.length;if(le<=1)return[ie];for(var be,Pe,ze=[],Ge=0;Ge<le;Ge++){var Le=Vy(ie[Ge]);Le!==0&&(Pe===void 0&&(Pe=Le<0),Pe===Le<0?(be&&ze.push(be),be=[ie[Ge]]):be.push(ie[Ge]))}return be&&ze.push(be),ze}(D),m=0;m<D.length;m++)for(y=0;y<D[m].length;y++)V(D[m][y])}D.length===1?D=D[0]:O="Multi"+O;var ee={type:"Feature",geometry:{type:O,coordinates:D},properties:this.properties};return"id"in this&&(ee.id=this.id),ee};var Uy=kp,Cp=Sp;function Sp(f,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(jy,this,l),this.length=this._features.length}function jy(f,l,h){f===15?l.version=h.readVarint():f===1?l.name=h.readString():f===5?l.extent=h.readVarint():f===2?l._features.push(h.pos):f===3?l._keys.push(h.readString()):f===4&&l._values.push(function(m){for(var y=null,k=m.readVarint()+m.pos;m.pos<k;){var C=m.readVarint()>>3;y=C===1?m.readString():C===2?m.readFloat():C===3?m.readDouble():C===4?m.readVarint64():C===5?m.readVarint():C===6?m.readSVarint():C===7?m.readBoolean():null}return y}(h))}Sp.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var l=this._pbf.readVarint()+this._pbf.pos;return new Uy(this._pbf,l,this.extent,this._keys,this._values)};var qy=Cp;function Gy(f,l,h){if(f===3){var m=new qy(h,h.readVarint()+h.pos);m.length&&(l[m.name]=m)}}So.VectorTile=function(f,l){this.layers=f.readFields(Gy,{},l)},So.VectorTileFeature=kp,So.VectorTileLayer=Cp;const Hy=So.VectorTileFeature.types,Th=Math.pow(2,13);function Sc(f,l,h,m,y,k,C,S){f.emplaceBack(l,h,2*Math.floor(m*Th)+C,y*Th*2,k*Th*2,Math.round(S))}class Ph{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(h=>h.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Se,this.centroidVertexArray=new X,this.indexArray=new rt,this.programConfigurations=new cr(l.layers,l.zoom),this.segments=new Ft,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(l,h,m){this.features=[],this.hasPattern=Ch("fill-extrusion",this.layers,h);for(const{feature:y,id:k,index:C,sourceLayerIndex:S}of l){const D=this.layers[0]._featureFilter.needGeometry,O=no(y,D);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),O,m))continue;const V={id:k,sourceLayerIndex:S,index:C,geometry:D?O.geometry:to(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(Sh("fill-extrusion",this.layers,V,this.zoom,h)):this.addFeature(V,V.geometry,C,m,{}),h.featureIndex.insert(y,V.geometry,C,S,this.index,!0)}}addFeatures(l,h,m){for(const y of this.features){const{geometry:k}=y;this.addFeature(y,k,y.index,h,m)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Fy),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,Oy.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,h,m,y,k){const C={x:0,y:0,vertexCount:0};for(const S of kh(h,500)){let D=0;for(const le of S)D+=le.length;let O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const le of S){if(le.length===0||Wy(le))continue;let be=0;for(let Pe=0;Pe<le.length;Pe++){const ze=le[Pe];if(Pe>=1){const Ge=le[Pe-1];if(!Zy(ze,Ge)){O.vertexLength+4>Ft.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Le=ze.sub(Ge)._perp()._unit(),Ne=Ge.dist(ze);be+Ne>32768&&(be=0),Sc(this.layoutVertexArray,ze.x,ze.y,Le.x,Le.y,0,0,be),Sc(this.layoutVertexArray,ze.x,ze.y,Le.x,Le.y,0,1,be),C.x+=2*ze.x,C.y+=2*ze.y,C.vertexCount+=2,be+=Ne,Sc(this.layoutVertexArray,Ge.x,Ge.y,Le.x,Le.y,0,0,be),Sc(this.layoutVertexArray,Ge.x,Ge.y,Le.x,Le.y,0,1,be),C.x+=2*Ge.x,C.y+=2*Ge.y,C.vertexCount+=2;const lt=O.vertexLength;this.indexArray.emplaceBack(lt,lt+2,lt+1),this.indexArray.emplaceBack(lt+1,lt+2,lt+3),O.vertexLength+=4,O.primitiveLength+=2}}}}if(O.vertexLength+D>Ft.MAX_VERTEX_ARRAY_LENGTH&&(O=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),Hy[l.type]!=="Polygon")continue;const V=[],W=[],ee=O.vertexLength;for(const le of S)if(le.length!==0){le!==S[0]&&W.push(V.length/2);for(let be=0;be<le.length;be++){const Pe=le[be];Sc(this.layoutVertexArray,Pe.x,Pe.y,0,0,1,1,0),C.x+=Pe.x,C.y+=Pe.y,C.vertexCount+=1,V.push(Pe.x),V.push(Pe.y)}}const ie=bp(V,W);for(let le=0;le<ie.length;le+=3)this.indexArray.emplaceBack(ee+ie[le],ee+ie[le+2],ee+ie[le+1]);O.primitiveLength+=ie.length/3,O.vertexLength+=D}for(let S=0;S<C.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(C.x/C.vertexCount),Math.floor(C.y/C.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,k,y)}}function Zy(f,l){return f.x===l.x&&(f.x<0||f.x>vr)||f.y===l.y&&(f.y<0||f.y>vr)}function Wy(f){return f.every(l=>l.x<0)||f.every(l=>l.x>vr)||f.every(l=>l.y<0)||f.every(l=>l.y>vr)}let Ip;tn("FillExtrusionBucket",Ph,{omit:["layers","features"]});var Ky={get paint(){return Ip=Ip||new ys({"fill-extrusion-opacity":new fn(We["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _n(We["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fn(We["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fn(We["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sl(We["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _n(We["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _n(We["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fn(We["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Xy extends Ys{constructor(l){super(l,Ky)}createBucket(l){return new Ph(l)}queryRadius(){return Ku(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,h,m,y,k,C,S,D){const O=Xu(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,S),V=this.paint.get("fill-extrusion-height").evaluate(h,m),W=this.paint.get("fill-extrusion-base").evaluate(h,m),ee=function(le,be,Pe,ze){const Ge=[];for(const Le of le){const Ne=[Le.x,Le.y,0,1];Ju(Ne,Ne,be),Ge.push(new b(Ne[0]/Ne[3],Ne[1]/Ne[3]))}return Ge}(O,D),ie=function(le,be,Pe,ze){const Ge=[],Le=[],Ne=ze[8]*be,lt=ze[9]*be,ht=ze[10]*be,Yt=ze[11]*be,an=ze[8]*Pe,Jt=ze[9]*Pe,Ht=ze[10]*Pe,Ot=ze[11]*Pe;for(const rn of le){const Gt=[],Pt=[];for(const pn of rn){const cn=pn.x,Ln=pn.y,tr=ze[0]*cn+ze[4]*Ln+ze[12],ir=ze[1]*cn+ze[5]*Ln+ze[13],Nr=ze[2]*cn+ze[6]*Ln+ze[14],Gs=ze[3]*cn+ze[7]*Ln+ze[15],ws=Nr+ht,Mr=Gs+Yt,Xr=tr+an,ts=ir+Jt,xs=Nr+Ht,$s=Gs+Ot,Vr=new b((tr+Ne)/Mr,(ir+lt)/Mr);Vr.z=ws/Mr,Gt.push(Vr);const Ur=new b(Xr/$s,ts/$s);Ur.z=xs/$s,Pt.push(Ur)}Ge.push(Gt),Le.push(Pt)}return[Ge,Le]}(y,W,V,D);return function(le,be,Pe){let ze=1/0;_c(Pe,be)&&(ze=Tp(Pe,be[0]));for(let Ge=0;Ge<be.length;Ge++){const Le=be[Ge],Ne=le[Ge];for(let lt=0;lt<Le.length-1;lt++){const ht=Le[lt],Yt=[ht,Le[lt+1],Ne[lt+1],Ne[lt],ht];mc(Pe,Yt)&&(ze=Math.min(ze,Tp(Pe,Yt)))}}return ze!==1/0&&ze}(ie[0],ie[1],ee)}}function Ic(f,l){return f.x*l.x+f.y*l.y}function Tp(f,l){if(f.length===1){let h=0;const m=l[h++];let y;for(;!y||m.equals(y);)if(y=l[h++],!y)return 1/0;for(;h<l.length;h++){const k=l[h],C=f[0],S=y.sub(m),D=k.sub(m),O=C.sub(m),V=Ic(S,S),W=Ic(S,D),ee=Ic(D,D),ie=Ic(O,S),le=Ic(O,D),be=V*ee-W*W,Pe=(ee*ie-W*le)/be,ze=(V*le-W*ie)/be,Ge=m.z*(1-Pe-ze)+y.z*Pe+k.z*ze;if(isFinite(Ge))return Ge}return 1/0}{let h=1/0;for(const m of l)h=Math.min(h,m.z);return h}}const Jy=kr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Yy}=Jy,Qy=kr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:eb}=Qy,tb=So.VectorTileFeature.types,nb=Math.cos(Math.PI/180*37.5),Pp=Math.pow(2,14)/.5;class Eh{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(h=>h.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Me,this.layoutVertexArray2=new ye,this.indexArray=new rt,this.programConfigurations=new cr(l.layers,l.zoom),this.segments=new Ft,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(l,h,m){this.hasPattern=Ch("line",this.layers,h);const y=this.layers[0].layout.get("line-sort-key"),k=!y.isConstant(),C=[];for(const{feature:S,id:D,index:O,sourceLayerIndex:V}of l){const W=this.layers[0]._featureFilter.needGeometry,ee=no(S,W);if(!this.layers[0]._featureFilter.filter(new rr(this.zoom),ee,m))continue;const ie=k?y.evaluate(ee,{},m):void 0,le={id:D,properties:S.properties,type:S.type,sourceLayerIndex:V,index:O,geometry:W?ee.geometry:to(S),patterns:{},sortKey:ie};C.push(le)}k&&C.sort((S,D)=>S.sortKey-D.sortKey);for(const S of C){const{geometry:D,index:O,sourceLayerIndex:V}=S;if(this.hasPattern){const W=Sh("line",this.layers,S,this.zoom,h);this.patternFeatures.push(W)}else this.addFeature(S,D,O,m,{});h.featureIndex.insert(l[O].feature,D,O,V,this.index)}}update(l,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,h,this.stateDependentLayers,m)}addFeatures(l,h,m){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,eb)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Yy),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,h,m,y,k){const C=this.layers[0].layout,S=C.get("line-join").evaluate(l,{}),D=C.get("line-cap"),O=C.get("line-miter-limit"),V=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(const W of h)this.addLine(W,l,S,D,O,V);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,k,y)}addLine(l,h,m,y,k,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ze=0;ze<l.length-1;ze++)this.totalDistance+=l[ze].dist(l[ze+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=tb[h.type]==="Polygon";let D=l.length;for(;D>=2&&l[D-1].equals(l[D-2]);)D--;let O=0;for(;O<D-1&&l[O].equals(l[O+1]);)O++;if(D<(S?3:2))return;m==="bevel"&&(k=1.05);const V=this.overscaling<=16?15*vr/(512*this.overscaling):0,W=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let ee,ie,le,be,Pe;this.e1=this.e2=-1,S&&(ee=l[D-2],Pe=l[O].sub(ee)._unit()._perp());for(let ze=O;ze<D;ze++){if(le=ze===D-1?S?l[O+1]:void 0:l[ze+1],le&&l[ze].equals(le))continue;Pe&&(be=Pe),ee&&(ie=ee),ee=l[ze],Pe=le?le.sub(ee)._unit()._perp():be,be=be||Pe;let Ge=be.add(Pe);Ge.x===0&&Ge.y===0||Ge._unit();const Le=be.x*Pe.x+be.y*Pe.y,Ne=Ge.x*Pe.x+Ge.y*Pe.y,lt=Ne!==0?1/Ne:1/0,ht=2*Math.sqrt(2-2*Ne),Yt=Ne<nb&&ie&&le,an=be.x*Pe.y-be.y*Pe.x>0;if(Yt&&ze>O){const Ot=ee.dist(ie);if(Ot>2*V){const rn=ee.sub(ee.sub(ie)._mult(V/Ot)._round());this.updateDistance(ie,rn),this.addCurrentVertex(rn,be,0,0,W),ie=rn}}const Jt=ie&&le;let Ht=Jt?m:S?"butt":y;if(Jt&&Ht==="round"&&(lt<C?Ht="miter":lt<=2&&(Ht="fakeround")),Ht==="miter"&&lt>k&&(Ht="bevel"),Ht==="bevel"&&(lt>2&&(Ht="flipbevel"),lt<k&&(Ht="miter")),ie&&this.updateDistance(ie,ee),Ht==="miter")Ge._mult(lt),this.addCurrentVertex(ee,Ge,0,0,W);else if(Ht==="flipbevel"){if(lt>100)Ge=Pe.mult(-1);else{const Ot=lt*be.add(Pe).mag()/be.sub(Pe).mag();Ge._perp()._mult(Ot*(an?-1:1))}this.addCurrentVertex(ee,Ge,0,0,W),this.addCurrentVertex(ee,Ge.mult(-1),0,0,W)}else if(Ht==="bevel"||Ht==="fakeround"){const Ot=-Math.sqrt(lt*lt-1),rn=an?Ot:0,Gt=an?0:Ot;if(ie&&this.addCurrentVertex(ee,be,rn,Gt,W),Ht==="fakeround"){const Pt=Math.round(180*ht/Math.PI/20);for(let pn=1;pn<Pt;pn++){let cn=pn/Pt;if(cn!==.5){const tr=cn-.5;cn+=cn*tr*(cn-1)*((1.0904+Le*(Le*(3.55645-1.43519*Le)-3.2452))*tr*tr+(.848013+Le*(.215638*Le-1.06021)))}const Ln=Pe.sub(be)._mult(cn)._add(be)._unit()._mult(an?-1:1);this.addHalfVertex(ee,Ln.x,Ln.y,!1,an,0,W)}}le&&this.addCurrentVertex(ee,Pe,-rn,-Gt,W)}else if(Ht==="butt")this.addCurrentVertex(ee,Ge,0,0,W);else if(Ht==="square"){const Ot=ie?1:-1;this.addCurrentVertex(ee,Ge,Ot,Ot,W)}else Ht==="round"&&(ie&&(this.addCurrentVertex(ee,be,0,0,W),this.addCurrentVertex(ee,be,1,1,W,!0)),le&&(this.addCurrentVertex(ee,Pe,-1,-1,W,!0),this.addCurrentVertex(ee,Pe,0,0,W)));if(Yt&&ze<D-1){const Ot=ee.dist(le);if(Ot>2*V){const rn=ee.add(le.sub(ee)._mult(V/Ot)._round());this.updateDistance(ee,rn),this.addCurrentVertex(rn,Pe,0,0,W),ee=rn}}}}addCurrentVertex(l,h,m,y,k,C=!1){const S=h.y*y-h.x,D=-h.y-h.x*y;this.addHalfVertex(l,h.x+h.y*m,h.y-h.x*m,C,!1,m,k),this.addHalfVertex(l,S,D,C,!0,-y,k),this.distance>Pp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,h,m,y,k,C))}addHalfVertex({x:l,y:h},m,y,k,C,S,D){const O=.5*(this.lineClips?this.scaledDistance*(Pp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(k?1:0),(h<<1)+(C?1:0),Math.round(63*m)+128,Math.round(63*y)+128,1+(S===0?0:S<0?-1:1)|(63&O)<<2,O>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const V=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,V),D.primitiveLength++),C?this.e2=V:this.e1=V}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,h){this.distance+=l.dist(h),this.updateScaledDistance()}}let Ep,Ap;tn("LineBucket",Eh,{omit:["layers","patternFeatures"]});var Mp={get paint(){return Ap=Ap||new ys({"line-opacity":new _n(We.paint_line["line-opacity"]),"line-color":new _n(We.paint_line["line-color"]),"line-translate":new fn(We.paint_line["line-translate"]),"line-translate-anchor":new fn(We.paint_line["line-translate-anchor"]),"line-width":new _n(We.paint_line["line-width"]),"line-gap-width":new _n(We.paint_line["line-gap-width"]),"line-offset":new _n(We.paint_line["line-offset"]),"line-blur":new _n(We.paint_line["line-blur"]),"line-dasharray":new sa(We.paint_line["line-dasharray"]),"line-pattern":new sl(We.paint_line["line-pattern"]),"line-gradient":new ic(We.paint_line["line-gradient"])})},get layout(){return Ep=Ep||new ys({"line-cap":new fn(We.layout_line["line-cap"]),"line-join":new _n(We.layout_line["line-join"]),"line-miter-limit":new fn(We.layout_line["line-miter-limit"]),"line-round-limit":new fn(We.layout_line["line-round-limit"]),"line-sort-key":new _n(We.layout_line["line-sort-key"])})}};class rb extends _n{possiblyEvaluate(l,h){return h=new rr(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(l,h)}evaluate(l,h,m,y){return h=de({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(l,h,m,y)}}let nf;class sb extends Ys{constructor(l){super(l,Mp),this.gradientVersion=0,nf||(nf=new rb(Mp.paint.properties["line-width"].specification),nf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof Xo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,h){super.recalculate(l,h),this.paint._values["line-floorwidth"]=nf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Eh(l)}queryRadius(l){const h=l,m=Dp(yc("line-width",this,h),yc("line-gap-width",this,h)),y=yc("line-offset",this,h);return m/2+Math.abs(y)+Ku(this.paint.get("line-translate"))}queryIntersectsFeature(l,h,m,y,k,C,S){const D=Xu(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,S),O=S/2*Dp(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),V=this.paint.get("line-offset").evaluate(h,m);return V&&(y=function(W,ee){const ie=[];for(let le=0;le<W.length;le++){const be=W[le],Pe=[];for(let ze=0;ze<be.length;ze++){const Ge=be[ze-1],Le=be[ze],Ne=be[ze+1],lt=ze===0?new b(0,0):Le.sub(Ge)._unit()._perp(),ht=ze===be.length-1?new b(0,0):Ne.sub(Le)._unit()._perp(),Yt=lt._add(ht)._unit(),an=Yt.x*ht.x+Yt.y*ht.y;an!==0&&Yt._mult(1/an),Pe.push(Yt._mult(ee)._add(Le))}ie.push(Pe)}return ie}(y,V*S)),function(W,ee,ie){for(let le=0;le<ee.length;le++){const be=ee[le];if(W.length>=3){for(let Pe=0;Pe<be.length;Pe++)if(pl(W,be[Pe]))return!0}if(gc(W,be,ie))return!0}return!1}(D,y,O)}isTileClipped(){return!0}}function Dp(f,l){return l>0?l+2*f:f}const ib=kr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ob=kr([{name:"a_projected_pos",components:3,type:"Float32"}],4);kr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ab=kr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);kr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const zp=kr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),lb=kr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function cb(f,l,h){return f.sections.forEach(m=>{m.text=function(y,k,C){const S=k.layout.get("text-transform").evaluate(C,{});return S==="uppercase"?y=y.toLocaleUpperCase():S==="lowercase"&&(y=y.toLocaleLowerCase()),Mi.applyArabicShaping&&(y=Mi.applyArabicShaping(y)),y}(m.text,l,h)}),f}kr([{name:"triangle",components:3,type:"Uint16"}]),kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),kr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),kr([{type:"Float32",name:"offsetX"}]),kr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),kr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Tc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Br=24,Lp=Xn,Rp=function(f,l,h,m,y){var k,C,S=8*y-m-1,D=(1<<S)-1,O=D>>1,V=-7,W=h?y-1:0,ee=h?-1:1,ie=f[l+W];for(W+=ee,k=ie&(1<<-V)-1,ie>>=-V,V+=S;V>0;k=256*k+f[l+W],W+=ee,V-=8);for(C=k&(1<<-V)-1,k>>=-V,V+=m;V>0;C=256*C+f[l+W],W+=ee,V-=8);if(k===0)k=1-O;else{if(k===D)return C?NaN:1/0*(ie?-1:1);C+=Math.pow(2,m),k-=O}return(ie?-1:1)*C*Math.pow(2,k-m)},Op=function(f,l,h,m,y,k){var C,S,D,O=8*k-y-1,V=(1<<O)-1,W=V>>1,ee=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=m?0:k-1,le=m?1:-1,be=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(S=isNaN(l)?1:0,C=V):(C=Math.floor(Math.log(l)/Math.LN2),l*(D=Math.pow(2,-C))<1&&(C--,D*=2),(l+=C+W>=1?ee/D:ee*Math.pow(2,1-W))*D>=2&&(C++,D/=2),C+W>=V?(S=0,C=V):C+W>=1?(S=(l*D-1)*Math.pow(2,y),C+=W):(S=l*Math.pow(2,W-1)*Math.pow(2,y),C=0));y>=8;f[h+ie]=255&S,ie+=le,S/=256,y-=8);for(C=C<<y|S,O+=y;O>0;f[h+ie]=255&C,ie+=le,C/=256,O-=8);f[h+ie-le]|=128*be};function Xn(f){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(f)?f:new Uint8Array(f||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0,Xn.Fixed64=1,Xn.Bytes=2,Xn.Fixed32=5;var Ah=4294967296,Fp=1/Ah,Bp=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ro(f){return f.type===Xn.Bytes?f.readVarint()+f.pos:f.pos+1}function vl(f,l,h){return h?4294967296*l+(f>>>0):4294967296*(l>>>0)+(f>>>0)}function Np(f,l,h){var m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));h.realloc(m);for(var y=h.pos-1;y>=f;y--)h.buf[y+m]=h.buf[y]}function ub(f,l){for(var h=0;h<f.length;h++)l.writeVarint(f[h])}function fb(f,l){for(var h=0;h<f.length;h++)l.writeSVarint(f[h])}function hb(f,l){for(var h=0;h<f.length;h++)l.writeFloat(f[h])}function db(f,l){for(var h=0;h<f.length;h++)l.writeDouble(f[h])}function pb(f,l){for(var h=0;h<f.length;h++)l.writeBoolean(f[h])}function mb(f,l){for(var h=0;h<f.length;h++)l.writeFixed32(f[h])}function _b(f,l){for(var h=0;h<f.length;h++)l.writeSFixed32(f[h])}function gb(f,l){for(var h=0;h<f.length;h++)l.writeFixed64(f[h])}function vb(f,l){for(var h=0;h<f.length;h++)l.writeSFixed64(f[h])}function rf(f,l){return(f[l]|f[l+1]<<8|f[l+2]<<16)+16777216*f[l+3]}function yl(f,l,h){f[h]=l,f[h+1]=l>>>8,f[h+2]=l>>>16,f[h+3]=l>>>24}function Vp(f,l){return(f[l]|f[l+1]<<8|f[l+2]<<16)+(f[l+3]<<24)}Xn.prototype={destroy:function(){this.buf=null},readFields:function(f,l,h){for(h=h||this.length;this.pos<h;){var m=this.readVarint(),y=m>>3,k=this.pos;this.type=7&m,f(y,l,this),this.pos===k&&this.skip(m)}return l},readMessage:function(f,l){return this.readFields(f,l,this.readVarint()+this.pos)},readFixed32:function(){var f=rf(this.buf,this.pos);return this.pos+=4,f},readSFixed32:function(){var f=Vp(this.buf,this.pos);return this.pos+=4,f},readFixed64:function(){var f=rf(this.buf,this.pos)+rf(this.buf,this.pos+4)*Ah;return this.pos+=8,f},readSFixed64:function(){var f=rf(this.buf,this.pos)+Vp(this.buf,this.pos+4)*Ah;return this.pos+=8,f},readFloat:function(){var f=Rp(this.buf,this.pos,!0,23,4);return this.pos+=4,f},readDouble:function(){var f=Rp(this.buf,this.pos,!0,52,8);return this.pos+=8,f},readVarint:function(f){var l,h,m=this.buf;return l=127&(h=m[this.pos++]),h<128?l:(l|=(127&(h=m[this.pos++]))<<7,h<128?l:(l|=(127&(h=m[this.pos++]))<<14,h<128?l:(l|=(127&(h=m[this.pos++]))<<21,h<128?l:function(y,k,C){var S,D,O=C.buf;if(S=(112&(D=O[C.pos++]))>>4,D<128||(S|=(127&(D=O[C.pos++]))<<3,D<128)||(S|=(127&(D=O[C.pos++]))<<10,D<128)||(S|=(127&(D=O[C.pos++]))<<17,D<128)||(S|=(127&(D=O[C.pos++]))<<24,D<128)||(S|=(1&(D=O[C.pos++]))<<31,D<128))return vl(y,S,k);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(h=m[this.pos]))<<28,f,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var f=this.readVarint();return f%2==1?(f+1)/-2:f/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var f=this.readVarint()+this.pos,l=this.pos;return this.pos=f,f-l>=12&&Bp?function(h,m,y){return Bp.decode(h.subarray(m,y))}(this.buf,l,f):function(h,m,y){for(var k="",C=m;C<y;){var S,D,O,V=h[C],W=null,ee=V>239?4:V>223?3:V>191?2:1;if(C+ee>y)break;ee===1?V<128&&(W=V):ee===2?(192&(S=h[C+1]))==128&&(W=(31&V)<<6|63&S)<=127&&(W=null):ee===3?(D=h[C+2],(192&(S=h[C+1]))==128&&(192&D)==128&&((W=(15&V)<<12|(63&S)<<6|63&D)<=2047||W>=55296&&W<=57343)&&(W=null)):ee===4&&(D=h[C+2],O=h[C+3],(192&(S=h[C+1]))==128&&(192&D)==128&&(192&O)==128&&((W=(15&V)<<18|(63&S)<<12|(63&D)<<6|63&O)<=65535||W>=1114112)&&(W=null)),W===null?(W=65533,ee=1):W>65535&&(W-=65536,k+=String.fromCharCode(W>>>10&1023|55296),W=56320|1023&W),k+=String.fromCharCode(W),C+=ee}return k}(this.buf,l,f)},readBytes:function(){var f=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,f);return this.pos=f,l},readPackedVarint:function(f,l){if(this.type!==Xn.Bytes)return f.push(this.readVarint(l));var h=ro(this);for(f=f||[];this.pos<h;)f.push(this.readVarint(l));return f},readPackedSVarint:function(f){if(this.type!==Xn.Bytes)return f.push(this.readSVarint());var l=ro(this);for(f=f||[];this.pos<l;)f.push(this.readSVarint());return f},readPackedBoolean:function(f){if(this.type!==Xn.Bytes)return f.push(this.readBoolean());var l=ro(this);for(f=f||[];this.pos<l;)f.push(this.readBoolean());return f},readPackedFloat:function(f){if(this.type!==Xn.Bytes)return f.push(this.readFloat());var l=ro(this);for(f=f||[];this.pos<l;)f.push(this.readFloat());return f},readPackedDouble:function(f){if(this.type!==Xn.Bytes)return f.push(this.readDouble());var l=ro(this);for(f=f||[];this.pos<l;)f.push(this.readDouble());return f},readPackedFixed32:function(f){if(this.type!==Xn.Bytes)return f.push(this.readFixed32());var l=ro(this);for(f=f||[];this.pos<l;)f.push(this.readFixed32());return f},readPackedSFixed32:function(f){if(this.type!==Xn.Bytes)return f.push(this.readSFixed32());var l=ro(this);for(f=f||[];this.pos<l;)f.push(this.readSFixed32());return f},readPackedFixed64:function(f){if(this.type!==Xn.Bytes)return f.push(this.readFixed64());var l=ro(this);for(f=f||[];this.pos<l;)f.push(this.readFixed64());return f},readPackedSFixed64:function(f){if(this.type!==Xn.Bytes)return f.push(this.readSFixed64());var l=ro(this);for(f=f||[];this.pos<l;)f.push(this.readSFixed64());return f},skip:function(f){var l=7&f;if(l===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(l===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(l===Xn.Fixed32)this.pos+=4;else{if(l!==Xn.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(f,l){this.writeVarint(f<<3|l)},realloc:function(f){for(var l=this.length||16;l<this.pos+f;)l*=2;if(l!==this.length){var h=new Uint8Array(l);h.set(this.buf),this.buf=h,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(f){this.realloc(4),yl(this.buf,f,this.pos),this.pos+=4},writeSFixed32:function(f){this.realloc(4),yl(this.buf,f,this.pos),this.pos+=4},writeFixed64:function(f){this.realloc(8),yl(this.buf,-1&f,this.pos),yl(this.buf,Math.floor(f*Fp),this.pos+4),this.pos+=8},writeSFixed64:function(f){this.realloc(8),yl(this.buf,-1&f,this.pos),yl(this.buf,Math.floor(f*Fp),this.pos+4),this.pos+=8},writeVarint:function(f){(f=+f||0)>268435455||f<0?function(l,h){var m,y;if(l>=0?(m=l%4294967296|0,y=l/4294967296|0):(y=~(-l/4294967296),4294967295^(m=~(-l%4294967296))?m=m+1|0:(m=0,y=y+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(k,C,S){S.buf[S.pos++]=127&k|128,k>>>=7,S.buf[S.pos++]=127&k|128,k>>>=7,S.buf[S.pos++]=127&k|128,k>>>=7,S.buf[S.pos++]=127&k|128,S.buf[S.pos]=127&(k>>>=7)}(m,0,h),function(k,C){var S=(7&k)<<4;C.buf[C.pos++]|=S|((k>>>=3)?128:0),k&&(C.buf[C.pos++]=127&k|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=127&k|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=127&k|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=127&k|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=127&k)))))}(y,h)}(f,this):(this.realloc(4),this.buf[this.pos++]=127&f|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=f>>>7&127))))},writeSVarint:function(f){this.writeVarint(f<0?2*-f-1:2*f)},writeBoolean:function(f){this.writeVarint(!!f)},writeString:function(f){f=String(f),this.realloc(4*f.length),this.pos++;var l=this.pos;this.pos=function(m,y,k){for(var C,S,D=0;D<y.length;D++){if((C=y.charCodeAt(D))>55295&&C<57344){if(!S){C>56319||D+1===y.length?(m[k++]=239,m[k++]=191,m[k++]=189):S=C;continue}if(C<56320){m[k++]=239,m[k++]=191,m[k++]=189,S=C;continue}C=S-55296<<10|C-56320|65536,S=null}else S&&(m[k++]=239,m[k++]=191,m[k++]=189,S=null);C<128?m[k++]=C:(C<2048?m[k++]=C>>6|192:(C<65536?m[k++]=C>>12|224:(m[k++]=C>>18|240,m[k++]=C>>12&63|128),m[k++]=C>>6&63|128),m[k++]=63&C|128)}return k}(this.buf,f,this.pos);var h=this.pos-l;h>=128&&Np(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeFloat:function(f){this.realloc(4),Op(this.buf,f,this.pos,!0,23,4),this.pos+=4},writeDouble:function(f){this.realloc(8),Op(this.buf,f,this.pos,!0,52,8),this.pos+=8},writeBytes:function(f){var l=f.length;this.writeVarint(l),this.realloc(l);for(var h=0;h<l;h++)this.buf[this.pos++]=f[h]},writeRawMessage:function(f,l){this.pos++;var h=this.pos;f(l,this);var m=this.pos-h;m>=128&&Np(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeMessage:function(f,l,h){this.writeTag(f,Xn.Bytes),this.writeRawMessage(l,h)},writePackedVarint:function(f,l){l.length&&this.writeMessage(f,ub,l)},writePackedSVarint:function(f,l){l.length&&this.writeMessage(f,fb,l)},writePackedBoolean:function(f,l){l.length&&this.writeMessage(f,pb,l)},writePackedFloat:function(f,l){l.length&&this.writeMessage(f,hb,l)},writePackedDouble:function(f,l){l.length&&this.writeMessage(f,db,l)},writePackedFixed32:function(f,l){l.length&&this.writeMessage(f,mb,l)},writePackedSFixed32:function(f,l){l.length&&this.writeMessage(f,_b,l)},writePackedFixed64:function(f,l){l.length&&this.writeMessage(f,gb,l)},writePackedSFixed64:function(f,l){l.length&&this.writeMessage(f,vb,l)},writeBytesField:function(f,l){this.writeTag(f,Xn.Bytes),this.writeBytes(l)},writeFixed32Field:function(f,l){this.writeTag(f,Xn.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(f,l){this.writeTag(f,Xn.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(f,l){this.writeTag(f,Xn.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(f,l){this.writeTag(f,Xn.Fixed64),this.writeSFixed64(l)},writeVarintField:function(f,l){this.writeTag(f,Xn.Varint),this.writeVarint(l)},writeSVarintField:function(f,l){this.writeTag(f,Xn.Varint),this.writeSVarint(l)},writeStringField:function(f,l){this.writeTag(f,Xn.Bytes),this.writeString(l)},writeFloatField:function(f,l){this.writeTag(f,Xn.Fixed32),this.writeFloat(l)},writeDoubleField:function(f,l){this.writeTag(f,Xn.Fixed64),this.writeDouble(l)},writeBooleanField:function(f,l){this.writeVarintField(f,!!l)}};var Mh=u(Lp);const Dh=3;function yb(f,l,h){f===1&&h.readMessage(bb,l)}function bb(f,l,h){if(f===3){const{id:m,bitmap:y,width:k,height:C,left:S,top:D,advance:O}=h.readMessage(wb,{});l.push({id:m,bitmap:new wc({width:k+2*Dh,height:C+2*Dh},y),metrics:{width:k,height:C,left:S,top:D,advance:O}})}}function wb(f,l,h){f===1?l.id=h.readVarint():f===2?l.bitmap=h.readBytes():f===3?l.width=h.readVarint():f===4?l.height=h.readVarint():f===5?l.left=h.readSVarint():f===6?l.top=h.readSVarint():f===7&&(l.advance=h.readVarint())}const Up=Dh;function jp(f){let l=0,h=0;for(const C of f)l+=C.w*C.h,h=Math.max(h,C.w);f.sort((C,S)=>S.h-C.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),h),h:1/0}];let y=0,k=0;for(const C of f)for(let S=m.length-1;S>=0;S--){const D=m[S];if(!(C.w>D.w||C.h>D.h)){if(C.x=D.x,C.y=D.y,k=Math.max(k,C.y+C.h),y=Math.max(y,C.x+C.w),C.w===D.w&&C.h===D.h){const O=m.pop();S<m.length&&(m[S]=O)}else C.h===D.h?(D.x+=C.w,D.w-=C.w):C.w===D.w?(D.y+=C.h,D.h-=C.h):(m.push({x:D.x+C.w,y:D.y,w:D.w-C.w,h:C.h}),D.y+=C.h,D.h-=C.h);break}}return{w:y,h:k,fill:l/(y*k)||0}}const Ds=1;class zh{constructor(l,{pixelRatio:h,version:m,stretchX:y,stretchY:k,content:C}){this.paddedRect=l,this.pixelRatio=h,this.stretchX=y,this.stretchY=k,this.content=C,this.version=m}get tl(){return[this.paddedRect.x+Ds,this.paddedRect.y+Ds]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ds,this.paddedRect.y+this.paddedRect.h-Ds]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ds)/this.pixelRatio,(this.paddedRect.h-2*Ds)/this.pixelRatio]}}class qp{constructor(l,h){const m={},y={};this.haveRenderCallbacks=[];const k=[];this.addImages(l,m,k),this.addImages(h,y,k);const{w:C,h:S}=jp(k),D=new Qs({width:C||1,height:S||1});for(const O in l){const V=l[O],W=m[O].paddedRect;Qs.copy(V.data,D,{x:0,y:0},{x:W.x+Ds,y:W.y+Ds},V.data)}for(const O in h){const V=h[O],W=y[O].paddedRect,ee=W.x+Ds,ie=W.y+Ds,le=V.data.width,be=V.data.height;Qs.copy(V.data,D,{x:0,y:0},{x:ee,y:ie},V.data),Qs.copy(V.data,D,{x:0,y:be-1},{x:ee,y:ie-1},{width:le,height:1}),Qs.copy(V.data,D,{x:0,y:0},{x:ee,y:ie+be},{width:le,height:1}),Qs.copy(V.data,D,{x:le-1,y:0},{x:ee-1,y:ie},{width:1,height:be}),Qs.copy(V.data,D,{x:0,y:0},{x:ee+le,y:ie},{width:1,height:be})}this.image=D,this.iconPositions=m,this.patternPositions=y}addImages(l,h,m){for(const y in l){const k=l[y],C={x:0,y:0,w:k.data.width+2*Ds,h:k.data.height+2*Ds};m.push(C),h[y]=new zh(C,k),k.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(l,h){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),h)}patchUpdatedImage(l,h,m){if(!l||!h||l.version===h.version)return;l.version=h.version;const[y,k]=l.tl;m.update(h.data,void 0,{x:y,y:k})}}var Io;tn("ImagePosition",zh),tn("ImageAtlas",qp),a.ah=void 0,(Io=a.ah||(a.ah={}))[Io.none=0]="none",Io[Io.horizontal=1]="horizontal",Io[Io.vertical=2]="vertical",Io[Io.horizontalOnly=3]="horizontalOnly";const Pc=-17;class Ec{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,h){const m=new Ec;return m.scale=l||1,m.fontStack=h,m}static forImage(l){const h=new Ec;return h.imageName=l,h}}class bl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,h){const m=new bl;for(let y=0;y<l.sections.length;y++){const k=l.sections[y];k.image?m.addImageSection(k):m.addTextSection(k,h)}return m}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let h="";for(let m=0;m<l.length;m++){const y=l.charCodeAt(m+1)||null,k=l.charCodeAt(m-1)||null;h+=y&&rc(y)&&!Tc[l[m+1]]||k&&rc(k)&&!Tc[l[m-1]]||!Tc[l[m]]?l[m]:Tc[l[m]]}return h}(this.text)}trim(){let l=0;for(let m=0;m<this.text.length&&of[this.text.charCodeAt(m)];m++)l++;let h=this.text.length;for(let m=this.text.length-1;m>=0&&m>=l&&of[this.text.charCodeAt(m)];m--)h--;this.text=this.text.substring(l,h),this.sectionIndex=this.sectionIndex.slice(l,h)}substring(l,h){const m=new bl;return m.text=this.text.substring(l,h),m.sectionIndex=this.sectionIndex.slice(l,h),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,h)=>Math.max(l,this.sections[h].scale),0)}addTextSection(l,h){this.text+=l.text,this.sections.push(Ec.forText(l.scale,l.fontStack||h));const m=this.sections.length-1;for(let y=0;y<l.text.length;++y)this.sectionIndex.push(m)}addImageSection(l){const h=l.image?l.image.name:"";if(h.length===0)return void fe("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(Ec.forImage(h)),this.sectionIndex.push(this.sections.length-1)):fe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sf(f,l,h,m,y,k,C,S,D,O,V,W,ee,ie,le,be){const Pe=bl.fromFeature(f,y);let ze;W===a.ah.vertical&&Pe.verticalizePunctuation();const{processBidirectionalText:Ge,processStyledBidirectionalText:Le}=Mi;if(Ge&&Pe.sections.length===1){ze=[];const ht=Ge(Pe.toString(),Lh(Pe,O,k,l,m,ie,le));for(const Yt of ht){const an=new bl;an.text=Yt,an.sections=Pe.sections;for(let Jt=0;Jt<Yt.length;Jt++)an.sectionIndex.push(0);ze.push(an)}}else if(Le){ze=[];const ht=Le(Pe.text,Pe.sectionIndex,Lh(Pe,O,k,l,m,ie,le));for(const Yt of ht){const an=new bl;an.text=Yt[0],an.sectionIndex=Yt[1],an.sections=Pe.sections,ze.push(an)}}else ze=function(ht,Yt){const an=[],Jt=ht.text;let Ht=0;for(const Ot of Yt)an.push(ht.substring(Ht,Ot)),Ht=Ot;return Ht<Jt.length&&an.push(ht.substring(Ht,Jt.length)),an}(Pe,Lh(Pe,O,k,l,m,ie,le));const Ne=[],lt={positionedLines:Ne,text:Pe.toString(),top:V[1],bottom:V[1],left:V[0],right:V[0],writingMode:W,iconsInText:!1,verticalizable:!1};return function(ht,Yt,an,Jt,Ht,Ot,rn,Gt,Pt,pn,cn,Ln){let tr=0,ir=Pc,Nr=0,Gs=0;const ws=Gt==="right"?1:Gt==="left"?0:.5;let Mr=0;for(const Vr of Ht){Vr.trim();const Ur=Vr.getMaxScale(),cs=(Ur-1)*Br,ks={positionedGlyphs:[],lineOffset:0};ht.positionedLines[Mr]=ks;const us=ks.positionedGlyphs;let zs=0;if(!Vr.length()){ir+=Ot,++Mr;continue}for(let jr=0;jr<Vr.length();jr++){const On=Vr.getSection(jr),fs=Vr.getSectionIndex(jr),ns=Vr.getCharCode(jr);let qr=0,hi=null,bi=null,wi=null,so=Br;const di=!(Pt===a.ah.horizontal||!cn&&!tl(ns)||cn&&(of[ns]||(Xr=ns,Xt.Arabic(Xr)||Xt["Arabic Supplement"](Xr)||Xt["Arabic Extended-A"](Xr)||Xt["Arabic Presentation Forms-A"](Xr)||Xt["Arabic Presentation Forms-B"](Xr))));if(On.imageName){const ti=Jt[On.imageName];if(!ti)continue;wi=On.imageName,ht.iconsInText=ht.iconsInText||!0,bi=ti.paddedRect;const Rs=ti.displaySize;On.scale=On.scale*Br/Ln,hi={width:Rs[0],height:Rs[1],left:Ds,top:-Up,advance:di?Rs[1]:Rs[0]},qr=cs+(Br-Rs[1]*On.scale),so=hi.advance;const io=di?Rs[0]*On.scale-Br*Ur:Rs[1]*On.scale-Br*Ur;io>0&&io>zs&&(zs=io)}else{const ti=an[On.fontStack],Rs=ti&&ti[ns];if(Rs&&Rs.rect)bi=Rs.rect,hi=Rs.metrics;else{const io=Yt[On.fontStack],Lc=io&&io[ns];if(!Lc)continue;hi=Lc.metrics}qr=(Ur-On.scale)*Br}di?(ht.verticalizable=!0,us.push({glyph:ns,imageName:wi,x:tr,y:ir+qr,vertical:di,scale:On.scale,fontStack:On.fontStack,sectionIndex:fs,metrics:hi,rect:bi}),tr+=so*On.scale+pn):(us.push({glyph:ns,imageName:wi,x:tr,y:ir+qr,vertical:di,scale:On.scale,fontStack:On.fontStack,sectionIndex:fs,metrics:hi,rect:bi}),tr+=hi.advance*On.scale+pn)}us.length!==0&&(Nr=Math.max(tr-pn,Nr),kb(us,0,us.length-1,ws,zs)),tr=0;const Ls=Ot*Ur+zs;ks.lineOffset=Math.max(zs,cs),ir+=Ls,Gs=Math.max(Ls,Gs),++Mr}var Xr;const ts=ir-Pc,{horizontalAlign:xs,verticalAlign:$s}=Rh(rn);(function(Vr,Ur,cs,ks,us,zs,Ls,jr,On){const fs=(Ur-cs)*us;let ns=0;ns=zs!==Ls?-jr*ks-Pc:(-ks*On+.5)*Ls;for(const qr of Vr)for(const hi of qr.positionedGlyphs)hi.x+=fs,hi.y+=ns})(ht.positionedLines,ws,xs,$s,Nr,Gs,Ot,ts,Ht.length),ht.top+=-$s*ts,ht.bottom=ht.top+ts,ht.left+=-xs*Nr,ht.right=ht.left+Nr}(lt,l,h,m,ze,C,S,D,W,O,ee,be),!function(ht){for(const Yt of ht)if(Yt.positionedGlyphs.length!==0)return!1;return!0}(Ne)&&lt}const of={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xb={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gp(f,l,h,m,y,k){if(l.imageName){const C=m[l.imageName];return C?C.displaySize[0]*l.scale*Br/k+y:0}{const C=h[l.fontStack],S=C&&C[f];return S?S.metrics.advance*l.scale+y:0}}function Hp(f,l,h,m){const y=Math.pow(f-l,2);return m?f<l?y/2:2*y:y+Math.abs(h)*h}function $b(f,l,h){let m=0;return f===10&&(m-=1e4),h&&(m+=150),f!==40&&f!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function Zp(f,l,h,m,y,k){let C=null,S=Hp(l,h,y,k);for(const D of m){const O=Hp(l-D.x,h,y,k)+D.badness;O<=S&&(C=D,S=O)}return{index:f,x:l,priorBreak:C,badness:S}}function Wp(f){return f?Wp(f.priorBreak).concat(f.index):[]}function Lh(f,l,h,m,y,k,C){if(k!=="point")return[];if(!f)return[];const S=[],D=function(ee,ie,le,be,Pe,ze){let Ge=0;for(let Le=0;Le<ee.length();Le++){const Ne=ee.getSection(Le);Ge+=Gp(ee.getCharCode(Le),Ne,be,Pe,ie,ze)}return Ge/Math.max(1,Math.ceil(Ge/le))}(f,l,h,m,y,C),O=f.text.indexOf("")>=0;let V=0;for(let ee=0;ee<f.length();ee++){const ie=f.getSection(ee),le=f.getCharCode(ee);if(of[le]||(V+=Gp(le,ie,m,y,l,C)),ee<f.length()-1){const be=!((W=le)<11904||!(Xt["Bopomofo Extended"](W)||Xt.Bopomofo(W)||Xt["CJK Compatibility Forms"](W)||Xt["CJK Compatibility Ideographs"](W)||Xt["CJK Compatibility"](W)||Xt["CJK Radicals Supplement"](W)||Xt["CJK Strokes"](W)||Xt["CJK Symbols and Punctuation"](W)||Xt["CJK Unified Ideographs Extension A"](W)||Xt["CJK Unified Ideographs"](W)||Xt["Enclosed CJK Letters and Months"](W)||Xt["Halfwidth and Fullwidth Forms"](W)||Xt.Hiragana(W)||Xt["Ideographic Description Characters"](W)||Xt["Kangxi Radicals"](W)||Xt["Katakana Phonetic Extensions"](W)||Xt.Katakana(W)||Xt["Vertical Forms"](W)||Xt["Yi Radicals"](W)||Xt["Yi Syllables"](W)));(xb[le]||be||ie.imageName)&&S.push(Zp(ee+1,V,D,S,$b(le,f.getCharCode(ee+1),be&&O),!1))}}var W;return Wp(Zp(f.length(),V,D,S,0,!0))}function Rh(f){let l=.5,h=.5;switch(f){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:l,verticalAlign:h}}function kb(f,l,h,m,y){if(!m&&!y)return;const k=f[h],C=(f[h].x+k.metrics.advance*k.scale)*m;for(let S=l;S<=h;S++)f[S].x-=C,f[S].y+=y}function Cb(f,l,h){const{horizontalAlign:m,verticalAlign:y}=Rh(h),k=l[0]-f.displaySize[0]*m,C=l[1]-f.displaySize[1]*y;return{image:f,top:C,bottom:C+f.displaySize[1],left:k,right:k+f.displaySize[0]}}function Kp(f,l,h,m,y,k){const C=f.image;let S;if(C.content){const Pe=C.content,ze=C.pixelRatio||1;S=[Pe[0]/ze,Pe[1]/ze,C.displaySize[0]-Pe[2]/ze,C.displaySize[1]-Pe[3]/ze]}const D=l.left*k,O=l.right*k;let V,W,ee,ie;h==="width"||h==="both"?(ie=y[0]+D-m[3],W=y[0]+O+m[1]):(ie=y[0]+(D+O-C.displaySize[0])/2,W=ie+C.displaySize[0]);const le=l.top*k,be=l.bottom*k;return h==="height"||h==="both"?(V=y[1]+le-m[0],ee=y[1]+be+m[2]):(V=y[1]+(le+be-C.displaySize[1])/2,ee=V+C.displaySize[1]),{image:C,top:V,right:W,bottom:ee,left:ie,collisionPadding:S}}const Ac=255,Ri=128,To=Ac*Ri;function Xp(f,l){const{expression:h}=l;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new rr(f+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:y}=h;let k=0;for(;k<m.length&&m[k]<=f;)k++;k=Math.max(0,k-1);let C=k;for(;C<m.length&&m[C]<f+1;)C++;C=Math.min(m.length-1,C);const S=m[k],D=m[C];return h.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:D,interpolationType:y}:{kind:"camera",minZoom:S,maxZoom:D,minSize:h.evaluate(new rr(S)),maxSize:h.evaluate(new rr(D)),interpolationType:y}}}function Oh(f,l,h){let m="never";const y=f.get(l);return y?m=y:f.get(h)&&(m="always"),m}const Sb=So.VectorTileFeature.types,Ib=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function af(f,l,h,m,y,k,C,S,D,O,V,W,ee){const ie=S?Math.min(To,Math.round(S[0])):0,le=S?Math.min(To,Math.round(S[1])):0;f.emplaceBack(l,h,Math.round(32*m),Math.round(32*y),k,C,(ie<<1)+(D?1:0),le,16*O,16*V,256*W,256*ee)}function Fh(f,l,h){f.emplaceBack(l.x,l.y,h),f.emplaceBack(l.x,l.y,h),f.emplaceBack(l.x,l.y,h),f.emplaceBack(l.x,l.y,h)}function Tb(f){for(const l of f.sections)if(mh(l.text))return!0;return!1}class Bh{constructor(l){this.layoutVertexArray=new Xe,this.indexArray=new rt,this.programConfigurations=l,this.segments=new Ft,this.dynamicLayoutVertexArray=new De,this.opacityVertexArray=new Ve,this.hasVisibleVertices=!1,this.placedSymbolArray=new d}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,h,m,y){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,ib.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,ob.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,Ib,!0),this.opacityVertexBuffer.itemSize=1),(m||y)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}tn("SymbolBuffers",Bh);class Nh{constructor(l,h,m){this.layoutVertexArray=new l,this.layoutAttributes=h,this.indexArray=new m,this.segments=new Ft,this.collisionVertexArray=new tt}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,ab.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}tn("CollisionBuffers",Nh);class wl{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(C=>C.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=gh([]),this.placementViewportMatrix=gh([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xp(this.zoom,h["text-size"]),this.iconSizeData=Xp(this.zoom,h["icon-size"]);const m=this.layers[0].layout,y=m.get("symbol-sort-key"),k=m.get("symbol-z-order");this.canOverlap=Oh(m,"text-overlap","text-allow-overlap")!=="never"||Oh(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(C=>a.ah[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=l.sourceID}createArrays(){this.text=new Bh(new cr(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new Bh(new cr(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new x,this.lineVertexArray=new A,this.symbolInstances=new v,this.textAnchorOffsets=new R}calculateGlyphDependencies(l,h,m,y,k){for(let C=0;C<l.length;C++)if(h[l.charCodeAt(C)]=!0,(m||y)&&k){const S=Tc[l.charAt(C)];S&&(h[S.charCodeAt(0)]=!0)}}populate(l,h,m){const y=this.layers[0],k=y.layout,C=k.get("text-font"),S=k.get("text-field"),D=k.get("icon-image"),O=(S.value.kind!=="constant"||S.value.value instanceof Ts&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),V=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,W=k.get("symbol-sort-key");if(this.features=[],!O&&!V)return;const ee=h.iconDependencies,ie=h.glyphDependencies,le=h.availableImages,be=new rr(this.zoom);for(const{feature:Pe,id:ze,index:Ge,sourceLayerIndex:Le}of l){const Ne=y._featureFilter.needGeometry,lt=no(Pe,Ne);if(!y._featureFilter.filter(be,lt,m))continue;let ht,Yt;if(Ne||(lt.geometry=to(Pe)),O){const Jt=y.getValueAndResolveTokens("text-field",lt,m,le),Ht=Ts.factory(Jt),Ot=this.hasRTLText=this.hasRTLText||Tb(Ht);(!Ot||Mi.getRTLTextPluginStatus()==="unavailable"||Ot&&Mi.isParsed())&&(ht=cb(Ht,y,lt))}if(V){const Jt=y.getValueAndResolveTokens("icon-image",lt,m,le);Yt=Jt instanceof Us?Jt:Us.fromString(Jt)}if(!ht&&!Yt)continue;const an=this.sortFeaturesByKey?W.evaluate(lt,{},m):void 0;if(this.features.push({id:ze,text:ht,icon:Yt,index:Ge,sourceLayerIndex:Le,geometry:lt.geometry,properties:Pe.properties,type:Sb[Pe.type],sortKey:an}),Yt&&(ee[Yt.name]=!0),ht){const Jt=C.evaluate(lt,{},m).join(","),Ht=k.get("text-rotation-alignment")!=="viewport"&&k.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ah.vertical)>=0;for(const Ot of ht.sections)if(Ot.image)ee[Ot.image.name]=!0;else{const rn=ko(ht.toString()),Gt=Ot.fontStack||Jt,Pt=ie[Gt]=ie[Gt]||{};this.calculateGlyphDependencies(Ot.text,Pt,Ht,this.allowVerticalPlacement,rn)}}}k.get("symbol-placement")==="line"&&(this.features=function(Pe){const ze={},Ge={},Le=[];let Ne=0;function lt(Jt){Le.push(Pe[Jt]),Ne++}function ht(Jt,Ht,Ot){const rn=Ge[Jt];return delete Ge[Jt],Ge[Ht]=rn,Le[rn].geometry[0].pop(),Le[rn].geometry[0]=Le[rn].geometry[0].concat(Ot[0]),rn}function Yt(Jt,Ht,Ot){const rn=ze[Ht];return delete ze[Ht],ze[Jt]=rn,Le[rn].geometry[0].shift(),Le[rn].geometry[0]=Ot[0].concat(Le[rn].geometry[0]),rn}function an(Jt,Ht,Ot){const rn=Ot?Ht[0][Ht[0].length-1]:Ht[0][0];return`${Jt}:${rn.x}:${rn.y}`}for(let Jt=0;Jt<Pe.length;Jt++){const Ht=Pe[Jt],Ot=Ht.geometry,rn=Ht.text?Ht.text.toString():null;if(!rn){lt(Jt);continue}const Gt=an(rn,Ot),Pt=an(rn,Ot,!0);if(Gt in Ge&&Pt in ze&&Ge[Gt]!==ze[Pt]){const pn=Yt(Gt,Pt,Ot),cn=ht(Gt,Pt,Le[pn].geometry);delete ze[Gt],delete Ge[Pt],Ge[an(rn,Le[cn].geometry,!0)]=cn,Le[pn].geometry=null}else Gt in Ge?ht(Gt,Pt,Ot):Pt in ze?Yt(Gt,Pt,Ot):(lt(Jt),ze[Gt]=Ne-1,Ge[Pt]=Ne-1)}return Le.filter(Jt=>Jt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Pe,ze)=>Pe.sortKey-ze.sortKey)}update(l,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,h,this.layers,m),this.icon.programConfigurations.updatePaintArrays(l,h,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,h){const m=this.lineVertexArray.length;if(l.segment!==void 0){let y=l.dist(h[l.segment+1]),k=l.dist(h[l.segment]);const C={};for(let S=l.segment+1;S<h.length;S++)C[S]={x:h[S].x,y:h[S].y,tileUnitDistanceFromAnchor:y},S<h.length-1&&(y+=h[S+1].dist(h[S]));for(let S=l.segment||0;S>=0;S--)C[S]={x:h[S].x,y:h[S].y,tileUnitDistanceFromAnchor:k},S>0&&(k+=h[S-1].dist(h[S]));for(let S=0;S<h.length;S++){const D=C[S];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,h,m,y,k,C,S,D,O,V,W,ee){const ie=l.indexArray,le=l.layoutVertexArray,be=l.segments.prepareSegment(4*h.length,le,ie,this.canOverlap?C.sortKey:void 0),Pe=this.glyphOffsetArray.length,ze=be.vertexLength,Ge=this.allowVerticalPlacement&&S===a.ah.vertical?Math.PI/2:0,Le=C.text&&C.text.sections;for(let Ne=0;Ne<h.length;Ne++){const{tl:lt,tr:ht,bl:Yt,br:an,tex:Jt,pixelOffsetTL:Ht,pixelOffsetBR:Ot,minFontScaleX:rn,minFontScaleY:Gt,glyphOffset:Pt,isSDF:pn,sectionIndex:cn}=h[Ne],Ln=be.vertexLength,tr=Pt[1];af(le,D.x,D.y,lt.x,tr+lt.y,Jt.x,Jt.y,m,pn,Ht.x,Ht.y,rn,Gt),af(le,D.x,D.y,ht.x,tr+ht.y,Jt.x+Jt.w,Jt.y,m,pn,Ot.x,Ht.y,rn,Gt),af(le,D.x,D.y,Yt.x,tr+Yt.y,Jt.x,Jt.y+Jt.h,m,pn,Ht.x,Ot.y,rn,Gt),af(le,D.x,D.y,an.x,tr+an.y,Jt.x+Jt.w,Jt.y+Jt.h,m,pn,Ot.x,Ot.y,rn,Gt),Fh(l.dynamicLayoutVertexArray,D,Ge),ie.emplaceBack(Ln,Ln+1,Ln+2),ie.emplaceBack(Ln+1,Ln+2,Ln+3),be.vertexLength+=4,be.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Pt[0]),Ne!==h.length-1&&cn===h[Ne+1].sectionIndex||l.programConfigurations.populatePaintArrays(le.length,C,C.index,{},ee,Le&&Le[cn])}l.placedSymbolArray.emplaceBack(D.x,D.y,Pe,this.glyphOffsetArray.length-Pe,ze,O,V,D.segment,m?m[0]:0,m?m[1]:0,y[0],y[1],S,0,!1,0,W)}_addCollisionDebugVertex(l,h,m,y,k,C){return h.emplaceBack(0,0),l.emplaceBack(m.x,m.y,y,k,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(l,h,m,y,k,C,S){const D=k.segments.prepareSegment(4,k.layoutVertexArray,k.indexArray),O=D.vertexLength,V=k.layoutVertexArray,W=k.collisionVertexArray,ee=S.anchorX,ie=S.anchorY;this._addCollisionDebugVertex(V,W,C,ee,ie,new b(l,h)),this._addCollisionDebugVertex(V,W,C,ee,ie,new b(m,h)),this._addCollisionDebugVertex(V,W,C,ee,ie,new b(m,y)),this._addCollisionDebugVertex(V,W,C,ee,ie,new b(l,y)),D.vertexLength+=4;const le=k.indexArray;le.emplaceBack(O,O+1),le.emplaceBack(O+1,O+2),le.emplaceBack(O+2,O+3),le.emplaceBack(O+3,O),D.primitiveLength+=4}addDebugCollisionBoxes(l,h,m,y){for(let k=l;k<h;k++){const C=this.collisionBoxArray.get(k);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,y?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Nh(Je,zp.members,_t),this.iconCollisionBox=new Nh(Je,zp.members,_t);for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(l,h,m,y,k,C,S,D,O){const V={};for(let W=h;W<m;W++){const ee=l.get(W);V.textBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},V.textFeatureIndex=ee.featureIndex;break}for(let W=y;W<k;W++){const ee=l.get(W);V.verticalTextBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},V.verticalTextFeatureIndex=ee.featureIndex;break}for(let W=C;W<S;W++){const ee=l.get(W);V.iconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},V.iconFeatureIndex=ee.featureIndex;break}for(let W=D;W<O;W++){const ee=l.get(W);V.verticalIconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},V.verticalIconFeatureIndex=ee.featureIndex;break}return V}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,h){const m=l.placedSymbolArray.get(h),y=m.vertexStartIndex+4*m.numGlyphs;for(let k=m.vertexStartIndex;k<y;k+=4)l.indexArray.emplaceBack(k,k+1,k+2),l.indexArray.emplaceBack(k+1,k+2,k+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(l),m=Math.cos(l),y=[],k=[],C=[];for(let S=0;S<this.symbolInstances.length;++S){C.push(S);const D=this.symbolInstances.get(S);y.push(0|Math.round(h*D.anchorX+m*D.anchorY)),k.push(D.featureIndex)}return C.sort((S,D)=>y[S]-y[D]||k[D]-k[S]),C}addToSortKeyRanges(l,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((y,k,C)=>{y>=0&&C.indexOf(y)===k&&this.addIndicesForPlacedSymbol(this.text,y)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Jp,Yp;tn("SymbolBucket",wl,{omit:["layers","collisionBoxArray","features","compareText"]}),wl.MAX_GLYPHS=65535,wl.addDynamicAttributes=Fh;var Vh={get paint(){return Yp=Yp||new ys({"icon-opacity":new _n(We.paint_symbol["icon-opacity"]),"icon-color":new _n(We.paint_symbol["icon-color"]),"icon-halo-color":new _n(We.paint_symbol["icon-halo-color"]),"icon-halo-width":new _n(We.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _n(We.paint_symbol["icon-halo-blur"]),"icon-translate":new fn(We.paint_symbol["icon-translate"]),"icon-translate-anchor":new fn(We.paint_symbol["icon-translate-anchor"]),"text-opacity":new _n(We.paint_symbol["text-opacity"]),"text-color":new _n(We.paint_symbol["text-color"],{runtimeType:gr,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new _n(We.paint_symbol["text-halo-color"]),"text-halo-width":new _n(We.paint_symbol["text-halo-width"]),"text-halo-blur":new _n(We.paint_symbol["text-halo-blur"]),"text-translate":new fn(We.paint_symbol["text-translate"]),"text-translate-anchor":new fn(We.paint_symbol["text-translate-anchor"])})},get layout(){return Jp=Jp||new ys({"symbol-placement":new fn(We.layout_symbol["symbol-placement"]),"symbol-spacing":new fn(We.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fn(We.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _n(We.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fn(We.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fn(We.layout_symbol["icon-allow-overlap"]),"icon-overlap":new fn(We.layout_symbol["icon-overlap"]),"icon-ignore-placement":new fn(We.layout_symbol["icon-ignore-placement"]),"icon-optional":new fn(We.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fn(We.layout_symbol["icon-rotation-alignment"]),"icon-size":new _n(We.layout_symbol["icon-size"]),"icon-text-fit":new fn(We.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fn(We.layout_symbol["icon-text-fit-padding"]),"icon-image":new _n(We.layout_symbol["icon-image"]),"icon-rotate":new _n(We.layout_symbol["icon-rotate"]),"icon-padding":new _n(We.layout_symbol["icon-padding"]),"icon-keep-upright":new fn(We.layout_symbol["icon-keep-upright"]),"icon-offset":new _n(We.layout_symbol["icon-offset"]),"icon-anchor":new _n(We.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fn(We.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fn(We.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fn(We.layout_symbol["text-rotation-alignment"]),"text-field":new _n(We.layout_symbol["text-field"]),"text-font":new _n(We.layout_symbol["text-font"]),"text-size":new _n(We.layout_symbol["text-size"]),"text-max-width":new _n(We.layout_symbol["text-max-width"]),"text-line-height":new fn(We.layout_symbol["text-line-height"]),"text-letter-spacing":new _n(We.layout_symbol["text-letter-spacing"]),"text-justify":new _n(We.layout_symbol["text-justify"]),"text-radial-offset":new _n(We.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fn(We.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new _n(We.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new _n(We.layout_symbol["text-anchor"]),"text-max-angle":new fn(We.layout_symbol["text-max-angle"]),"text-writing-mode":new fn(We.layout_symbol["text-writing-mode"]),"text-rotate":new _n(We.layout_symbol["text-rotate"]),"text-padding":new fn(We.layout_symbol["text-padding"]),"text-keep-upright":new fn(We.layout_symbol["text-keep-upright"]),"text-transform":new _n(We.layout_symbol["text-transform"]),"text-offset":new _n(We.layout_symbol["text-offset"]),"text-allow-overlap":new fn(We.layout_symbol["text-allow-overlap"]),"text-overlap":new fn(We.layout_symbol["text-overlap"]),"text-ignore-placement":new fn(We.layout_symbol["text-ignore-placement"]),"text-optional":new fn(We.layout_symbol["text-optional"])})}};class Qp{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:Zr,this.defaultValue=l}evaluate(l){if(l.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(l.formattedSection))return h.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}tn("FormatSectionOverride",Qp,{omit:["defaultValue"]});class lf extends Ys{constructor(l){super(l,Vh)}recalculate(l,h){if(super.recalculate(l,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const y=[];for(const k of m)y.indexOf(k)<0&&y.push(k);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,h,m,y){const k=this.layout.get(l).evaluate(h,{},m,y),C=this._unevaluatedLayout._values[l];return C.isDataDriven()||Yn(C.value)||!k?k:function(S,D){return D.replace(/{([^{}]+)}/g,(O,V)=>S&&V in S?String(S[V]):"")}(h.properties,k)}createBucket(l){return new wl(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const l of Vh.paint.overridableProperties){if(!lf.hasPaintOverride(this.layout,l))continue;const h=this.paint.get(l),m=new Qp(h),y=new er(m,h.property.specification);let k=null;k=h.value.kind==="constant"||h.value.kind==="source"?new qa("source",y):new Wl("composite",y,h.value.zoomStops),this.paint._values[l]=new Js(h.property,k,h.parameters)}}_handleOverridablePaintPropertyUpdate(l,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&lf.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,h){const m=l.get("text-field"),y=Vh.paint.properties[h];let k=!1;const C=S=>{for(const D of S)if(y.overrides&&y.overrides.hasOverride(D))return void(k=!0)};if(m.value.kind==="constant"&&m.value.value instanceof Ts)C(m.value.value.sections);else if(m.value.kind==="source"){const S=O=>{k||(O instanceof Ii&&Tr(O.value)===Lr?C(O.value.sections):O instanceof Ua?C(O.sections):O.eachChild(S))},D=m.value;D._styleExpression&&S(D._styleExpression.expression)}return k}}let em;var Pb={get paint(){return em=em||new ys({"background-color":new fn(We.paint_background["background-color"]),"background-pattern":new sa(We.paint_background["background-pattern"]),"background-opacity":new fn(We.paint_background["background-opacity"])})}};class Eb extends Ys{constructor(l){super(l,Pb)}}let tm;var Ab={get paint(){return tm=tm||new ys({"raster-opacity":new fn(We.paint_raster["raster-opacity"]),"raster-hue-rotate":new fn(We.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fn(We.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fn(We.paint_raster["raster-brightness-max"]),"raster-saturation":new fn(We.paint_raster["raster-saturation"]),"raster-contrast":new fn(We.paint_raster["raster-contrast"]),"raster-resampling":new fn(We.paint_raster["raster-resampling"]),"raster-fade-duration":new fn(We.paint_raster["raster-fade-duration"])})}};class Mb extends Ys{constructor(l){super(l,Ab)}}class Db extends Ys{constructor(l){super(l,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class zb{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Uh=63710088e-1;class Po{constructor(l,h){if(isNaN(l)||isNaN(h))throw new Error(`Invalid LngLat object: (${l}, ${h})`);if(this.lng=+l,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Po(te(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){const h=Math.PI/180,m=this.lat*h,y=l.lat*h,k=Math.sin(m)*Math.sin(y)+Math.cos(m)*Math.cos(y)*Math.cos((l.lng-this.lng)*h);return Uh*Math.acos(Math.min(k,1))}static convert(l){if(l instanceof Po)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Po(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Po(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const nm=2*Math.PI*Uh;function rm(f){return nm*Math.cos(f*Math.PI/180)}function sm(f){return(180+f)/360}function im(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function om(f,l){return f/rm(l)}function jh(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}class cf{constructor(l,h,m=0){this.x=+l,this.y=+h,this.z=+m}static fromLngLat(l,h=0){const m=Po.convert(l);return new cf(sm(m.lng),im(m.lat),om(h,m.lat))}toLngLat(){return new Po(360*this.x-180,jh(this.y))}toAltitude(){return this.z*rm(jh(this.y))}meterInMercatorCoordinateUnits(){return 1/nm*(l=jh(this.y),1/Math.cos(l*Math.PI/180));var l}}function am(f,l,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[f*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class qh{constructor(l,h,m){if(l<0||l>25||m<0||m>=Math.pow(2,l)||h<0||h>=Math.pow(2,l))throw new Error(`x=${h}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=h,this.y=m,this.key=Mc(0,l,l,h,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,h,m){const y=(C=this.y,S=this.z,D=am(256*(k=this.x),256*(C=Math.pow(2,S)-C-1),S),O=am(256*(k+1),256*(C+1),S),D[0]+","+D[1]+","+O[0]+","+O[1]);var k,C,S,D,O;const V=function(W,ee,ie){let le,be="";for(let Pe=W;Pe>0;Pe--)le=1<<Pe-1,be+=(ee&le?1:0)+(ie&le?2:0);return be}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,V).replace(/{bbox-epsg-3857}/g,y)}isChildOf(l){const h=this.z-l.z;return h>0&&l.x===this.x>>h&&l.y===this.y>>h}getTilePoint(l){const h=Math.pow(2,this.z);return new b((l.x*h-this.x)*vr,(l.y*h-this.y)*vr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class lm{constructor(l,h){this.wrap=l,this.canonical=h,this.key=Mc(l,h.z,h.z,h.x,h.y)}}class ei{constructor(l,h,m,y,k){if(l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=h,this.canonical=new qh(m,+y,+k),this.key=Mc(h,l,m,y,k)}clone(){return new ei(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-l;return l>this.canonical.z?new ei(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ei(l,this.wrap,l,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(l,h){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-l;return l>this.canonical.z?Mc(this.wrap*+h,l,this.canonical.z,this.canonical.x,this.canonical.y):Mc(this.wrap*+h,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap)return!1;const h=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>h&&l.canonical.y===this.canonical.y>>h}children(l){if(this.overscaledZ>=l)return[new ei(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,y=2*this.canonical.y;return[new ei(h,this.wrap,h,m,y),new ei(h,this.wrap,h,m+1,y),new ei(h,this.wrap,h,m,y+1),new ei(h,this.wrap,h,m+1,y+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new ei(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new ei(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new lm(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new cf(l.x-this.wrap,l.y))}}function Mc(f,l,h,m,y){(f*=2)<0&&(f=-1*f-1);const k=1<<h;return(k*k*f+k*y+m).toString(36)+h.toString(36)+l.toString(36)}tn("CanonicalTileID",qh),tn("OverscaledTileID",ei,{omit:["posMatrix"]});class cm{constructor(l,h,m,y=1,k=1,C=1,S=0){if(this.uid=l,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void fe(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const D=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=k,this.blueFactor=C,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let O=0;O<D;O++)this.data[this._idx(-1,O)]=this.data[this._idx(0,O)],this.data[this._idx(D,O)]=this.data[this._idx(D-1,O)],this.data[this._idx(O,-1)]=this.data[this._idx(O,0)],this.data[this._idx(O,D)]=this.data[this._idx(O,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let O=0;O<D;O++)for(let V=0;V<D;V++){const W=this.get(O,V);W>this.max&&(this.max=W),W<this.min&&(this.min=W)}}get(l,h){const m=new Uint8Array(this.data.buffer),y=4*this._idx(l,h);return this.unpack(m[y],m[y+1],m[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,h){if(l<-1||l>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(l+1)}unpack(l,h,m){return l*this.redFactor+h*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new Qs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,h,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let y=h*this.dim,k=h*this.dim+this.dim,C=m*this.dim,S=m*this.dim+this.dim;switch(h){case-1:y=k-1;break;case 1:k=y+1}switch(m){case-1:C=S-1;break;case 1:S=C+1}const D=-h*this.dim,O=-m*this.dim;for(let V=C;V<S;V++)for(let W=y;W<k;W++)this.data[this._idx(W,V)]=l.data[this._idx(W+D,V+O)]}}tn("DEMData",cm);class um{constructor(l){this._stringToNumber={},this._numberToString=[];for(let h=0;h<l.length;h++){const m=l[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class fm{constructor(l,h,m,y,k){this.type="Feature",this._vectorTileFeature=l,l._z=h,l._x=m,l._y=y,this.properties=l.properties,this.id=k}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){const l={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(l[h]=this[h]);return l}}class hm{constructor(l,h){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new ta(vr,16,0),this.grid3D=new ta(vr,16,0),this.featureIndexArray=new K,this.promoteId=h}insert(l,h,m,y,k,C){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,y,k);const D=C?this.grid3D:this.grid;for(let O=0;O<h.length;O++){const V=h[O],W=[1/0,1/0,-1/0,-1/0];for(let ee=0;ee<V.length;ee++){const ie=V[ee];W[0]=Math.min(W[0],ie.x),W[1]=Math.min(W[1],ie.y),W[2]=Math.max(W[2],ie.x),W[3]=Math.max(W[3],ie.y)}W[0]<vr&&W[1]<vr&&W[2]>=0&&W[3]>=0&&D.insert(S,W[0],W[1],W[2],W[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new So.VectorTile(new Mh(this.rawTileData)).layers,this.sourceLayerCoder=new um(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,h,m,y){this.loadVTLayers();const k=l.params||{},C=vr/l.tileSize/l.scale,S=Wa(k.filter),D=l.queryGeometry,O=l.queryPadding*C,V=pm(D),W=this.grid.query(V.minX-O,V.minY-O,V.maxX+O,V.maxY+O),ee=pm(l.cameraQueryGeometry),ie=this.grid3D.query(ee.minX-O,ee.minY-O,ee.maxX+O,ee.maxY+O,(Pe,ze,Ge,Le)=>function(Ne,lt,ht,Yt,an){for(const Ht of Ne)if(lt<=Ht.x&&ht<=Ht.y&&Yt>=Ht.x&&an>=Ht.y)return!0;const Jt=[new b(lt,ht),new b(lt,an),new b(Yt,an),new b(Yt,ht)];if(Ne.length>2){for(const Ht of Jt)if(pl(Ne,Ht))return!0}for(let Ht=0;Ht<Ne.length-1;Ht++)if(hy(Ne[Ht],Ne[Ht+1],Jt))return!0;return!1}(l.cameraQueryGeometry,Pe-O,ze-O,Ge+O,Le+O));for(const Pe of ie)W.push(Pe);W.sort(Lb);const le={};let be;for(let Pe=0;Pe<W.length;Pe++){const ze=W[Pe];if(ze===be)continue;be=ze;const Ge=this.featureIndexArray.get(ze);let Le=null;this.loadMatchingFeature(le,Ge.bucketIndex,Ge.sourceLayerIndex,Ge.featureIndex,S,k.layers,k.availableImages,h,m,y,(Ne,lt,ht)=>(Le||(Le=to(Ne)),lt.queryIntersectsFeature(D,Ne,ht,Le,this.z,l.transform,C,l.pixelPosMatrix)))}return le}loadMatchingFeature(l,h,m,y,k,C,S,D,O,V,W){const ee=this.bucketLayerIDs[h];if(C&&!function(Pe,ze){for(let Ge=0;Ge<Pe.length;Ge++)if(ze.indexOf(Pe[Ge])>=0)return!0;return!1}(C,ee))return;const ie=this.sourceLayerCoder.decode(m),le=this.vtLayers[ie].feature(y);if(k.needGeometry){const Pe=no(le,!0);if(!k.filter(new rr(this.tileID.overscaledZ),Pe,this.tileID.canonical))return}else if(!k.filter(new rr(this.tileID.overscaledZ),le))return;const be=this.getId(le,ie);for(let Pe=0;Pe<ee.length;Pe++){const ze=ee[Pe];if(C&&C.indexOf(ze)<0)continue;const Ge=D[ze];if(!Ge)continue;let Le={};be&&V&&(Le=V.getState(Ge.sourceLayer||"_geojsonTileLayer",be));const Ne=de({},O[ze]);Ne.paint=dm(Ne.paint,Ge.paint,le,Le,S),Ne.layout=dm(Ne.layout,Ge.layout,le,Le,S);const lt=!W||W(le,Ge,Le);if(!lt)continue;const ht=new fm(le,this.z,this.x,this.y,be);ht.layer=Ne;let Yt=l[ze];Yt===void 0&&(Yt=l[ze]=[]),Yt.push({featureIndex:y,feature:ht,intersectionZ:lt})}}lookupSymbolFeatures(l,h,m,y,k,C,S,D){const O={};this.loadVTLayers();const V=Wa(k);for(const W of l)this.loadMatchingFeature(O,m,y,W,V,C,S,D,h);return O}hasLayer(l){for(const h of this.bucketLayerIDs)for(const m of h)if(l===m)return!0;return!1}getId(l,h){let m=l.id;return this.promoteId&&(m=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof m=="boolean"&&(m=Number(m))),m}}function dm(f,l,h,m,y){return Y(f,(k,C)=>{const S=l instanceof ra?l.get(C):null;return S&&S.evaluate?S.evaluate(h,m,y):S})}function pm(f){let l=1/0,h=1/0,m=-1/0,y=-1/0;for(const k of f)l=Math.min(l,k.x),h=Math.min(h,k.y),m=Math.max(m,k.x),y=Math.max(y,k.y);return{minX:l,minY:h,maxX:m,maxY:y}}function Lb(f,l){return l-f}function mm(f,l,h,m,y){const k=[];for(let C=0;C<f.length;C++){const S=f[C];let D;for(let O=0;O<S.length-1;O++){let V=S[O],W=S[O+1];V.x<l&&W.x<l||(V.x<l?V=new b(l,V.y+(l-V.x)/(W.x-V.x)*(W.y-V.y))._round():W.x<l&&(W=new b(l,V.y+(l-V.x)/(W.x-V.x)*(W.y-V.y))._round()),V.y<h&&W.y<h||(V.y<h?V=new b(V.x+(h-V.y)/(W.y-V.y)*(W.x-V.x),h)._round():W.y<h&&(W=new b(V.x+(h-V.y)/(W.y-V.y)*(W.x-V.x),h)._round()),V.x>=m&&W.x>=m||(V.x>=m?V=new b(m,V.y+(m-V.x)/(W.x-V.x)*(W.y-V.y))._round():W.x>=m&&(W=new b(m,V.y+(m-V.x)/(W.x-V.x)*(W.y-V.y))._round()),V.y>=y&&W.y>=y||(V.y>=y?V=new b(V.x+(y-V.y)/(W.y-V.y)*(W.x-V.x),y)._round():W.y>=y&&(W=new b(V.x+(y-V.y)/(W.y-V.y)*(W.x-V.x),y)._round()),D&&V.equals(D[D.length-1])||(D=[V],k.push(D)),D.push(W)))))}}return k}tn("FeatureIndex",hm,{omit:["rawTileData","sourceLayerCoder"]});class Eo extends b{constructor(l,h,m,y){super(l,h),this.angle=m,y!==void 0&&(this.segment=y)}clone(){return new Eo(this.x,this.y,this.angle,this.segment)}}function _m(f,l,h,m,y){if(l.segment===void 0||h===0)return!0;let k=l,C=l.segment+1,S=0;for(;S>-h/2;){if(C--,C<0)return!1;S-=f[C].dist(k),k=f[C]}S+=f[C].dist(f[C+1]),C++;const D=[];let O=0;for(;S<h/2;){const V=f[C],W=f[C+1];if(!W)return!1;let ee=f[C-1].angleTo(V)-V.angleTo(W);for(ee=Math.abs((ee+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:S,angleDelta:ee}),O+=ee;S-D[0].distance>m;)O-=D.shift().angleDelta;if(O>y)return!1;C++,S+=V.dist(W)}return!0}function gm(f){let l=0;for(let h=0;h<f.length-1;h++)l+=f[h].dist(f[h+1]);return l}function vm(f,l,h){return f?.6*l*h:0}function ym(f,l){return Math.max(f?f.right-f.left:0,l?l.right-l.left:0)}function Rb(f,l,h,m,y,k){const C=vm(h,y,k),S=ym(h,m)*k;let D=0;const O=gm(f)/2;for(let V=0;V<f.length-1;V++){const W=f[V],ee=f[V+1],ie=W.dist(ee);if(D+ie>O){const le=(O-D)/ie,be=as.number(W.x,ee.x,le),Pe=as.number(W.y,ee.y,le),ze=new Eo(be,Pe,ee.angleTo(W),V);return ze._round(),!C||_m(f,ze,S,C,l)?ze:void 0}D+=ie}}function Ob(f,l,h,m,y,k,C,S,D){const O=vm(m,k,C),V=ym(m,y),W=V*C,ee=f[0].x===0||f[0].x===D||f[0].y===0||f[0].y===D;return l-W<l/4&&(l=W+l/4),bm(f,ee?l/2*S%l:(V/2+2*k)*C*S%l,l,O,h,W,ee,!1,D)}function bm(f,l,h,m,y,k,C,S,D){const O=k/2,V=gm(f);let W=0,ee=l-h,ie=[];for(let le=0;le<f.length-1;le++){const be=f[le],Pe=f[le+1],ze=be.dist(Pe),Ge=Pe.angleTo(be);for(;ee+h<W+ze;){ee+=h;const Le=(ee-W)/ze,Ne=as.number(be.x,Pe.x,Le),lt=as.number(be.y,Pe.y,Le);if(Ne>=0&&Ne<D&&lt>=0&&lt<D&&ee-O>=0&&ee+O<=V){const ht=new Eo(Ne,lt,Ge,le);ht._round(),m&&!_m(f,ht,k,m,y)||ie.push(ht)}}W+=ze}return S||ie.length||C||(ie=bm(f,W/2,h,m,y,k,C,!0,D)),ie}tn("Anchor",Eo);const xl=Ds;function wm(f,l,h,m){const y=[],k=f.image,C=k.pixelRatio,S=k.paddedRect.w-2*xl,D=k.paddedRect.h-2*xl,O=f.right-f.left,V=f.bottom-f.top,W=k.stretchX||[[0,S]],ee=k.stretchY||[[0,D]],ie=(Ot,rn)=>Ot+rn[1]-rn[0],le=W.reduce(ie,0),be=ee.reduce(ie,0),Pe=S-le,ze=D-be;let Ge=0,Le=le,Ne=0,lt=be,ht=0,Yt=Pe,an=0,Jt=ze;if(k.content&&m){const Ot=k.content;Ge=uf(W,0,Ot[0]),Ne=uf(ee,0,Ot[1]),Le=uf(W,Ot[0],Ot[2]),lt=uf(ee,Ot[1],Ot[3]),ht=Ot[0]-Ge,an=Ot[1]-Ne,Yt=Ot[2]-Ot[0]-Le,Jt=Ot[3]-Ot[1]-lt}const Ht=(Ot,rn,Gt,Pt)=>{const pn=ff(Ot.stretch-Ge,Le,O,f.left),cn=hf(Ot.fixed-ht,Yt,Ot.stretch,le),Ln=ff(rn.stretch-Ne,lt,V,f.top),tr=hf(rn.fixed-an,Jt,rn.stretch,be),ir=ff(Gt.stretch-Ge,Le,O,f.left),Nr=hf(Gt.fixed-ht,Yt,Gt.stretch,le),Gs=ff(Pt.stretch-Ne,lt,V,f.top),ws=hf(Pt.fixed-an,Jt,Pt.stretch,be),Mr=new b(pn,Ln),Xr=new b(ir,Ln),ts=new b(ir,Gs),xs=new b(pn,Gs),$s=new b(cn/C,tr/C),Vr=new b(Nr/C,ws/C),Ur=l*Math.PI/180;if(Ur){const us=Math.sin(Ur),zs=Math.cos(Ur),Ls=[zs,-us,us,zs];Mr._matMult(Ls),Xr._matMult(Ls),xs._matMult(Ls),ts._matMult(Ls)}const cs=Ot.stretch+Ot.fixed,ks=rn.stretch+rn.fixed;return{tl:Mr,tr:Xr,bl:xs,br:ts,tex:{x:k.paddedRect.x+xl+cs,y:k.paddedRect.y+xl+ks,w:Gt.stretch+Gt.fixed-cs,h:Pt.stretch+Pt.fixed-ks},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$s,pixelOffsetBR:Vr,minFontScaleX:Yt/C/O,minFontScaleY:Jt/C/V,isSDF:h}};if(m&&(k.stretchX||k.stretchY)){const Ot=xm(W,Pe,le),rn=xm(ee,ze,be);for(let Gt=0;Gt<Ot.length-1;Gt++){const Pt=Ot[Gt],pn=Ot[Gt+1];for(let cn=0;cn<rn.length-1;cn++)y.push(Ht(Pt,rn[cn],pn,rn[cn+1]))}}else y.push(Ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:D+1}));return y}function uf(f,l,h){let m=0;for(const y of f)m+=Math.max(l,Math.min(h,y[1]))-Math.max(l,Math.min(h,y[0]));return m}function xm(f,l,h){const m=[{fixed:-xl,stretch:0}];for(const[y,k]of f){const C=m[m.length-1];m.push({fixed:y-C.stretch,stretch:C.stretch}),m.push({fixed:y-C.stretch,stretch:C.stretch+(k-y)})}return m.push({fixed:l+xl,stretch:h}),m}function ff(f,l,h,m){return f/l*h+m}function hf(f,l,h,m){return f-l*h/m}class df{constructor(l,h,m,y,k,C,S,D,O,V){if(this.boxStartIndex=l.length,O){let W=C.top,ee=C.bottom;const ie=C.collisionPadding;ie&&(W-=ie[1],ee+=ie[3]);let le=ee-W;le>0&&(le=Math.max(10,le),this.circleDiameter=le)}else{let W=C.top*S-D[0],ee=C.bottom*S+D[2],ie=C.left*S-D[3],le=C.right*S+D[1];const be=C.collisionPadding;if(be&&(ie-=be[0]*S,W-=be[1]*S,le+=be[2]*S,ee+=be[3]*S),V){const Pe=new b(ie,W),ze=new b(le,W),Ge=new b(ie,ee),Le=new b(le,ee),Ne=V*Math.PI/180;Pe._rotate(Ne),ze._rotate(Ne),Ge._rotate(Ne),Le._rotate(Ne),ie=Math.min(Pe.x,ze.x,Ge.x,Le.x),le=Math.max(Pe.x,ze.x,Ge.x,Le.x),W=Math.min(Pe.y,ze.y,Ge.y,Le.y),ee=Math.max(Pe.y,ze.y,Ge.y,Le.y)}l.emplaceBack(h.x,h.y,ie,W,le,ee,m,y,k)}this.boxEndIndex=l.length}}class Fb{constructor(l=[],h=Bb){if(this.data=l,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const l=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:h,compare:m}=this,y=h[l];for(;l>0;){const k=l-1>>1,C=h[k];if(m(y,C)>=0)break;h[l]=C,l=k}h[l]=y}_down(l){const{data:h,compare:m}=this,y=this.length>>1,k=h[l];for(;l<y;){let C=1+(l<<1),S=h[C];const D=C+1;if(D<this.length&&m(h[D],S)<0&&(C=D,S=h[D]),m(S,k)>=0)break;h[l]=S,l=C}h[l]=k}}function Bb(f,l){return f<l?-1:f>l?1:0}function Nb(f,l=1,h=!1){let m=1/0,y=1/0,k=-1/0,C=-1/0;const S=f[0];for(let ie=0;ie<S.length;ie++){const le=S[ie];(!ie||le.x<m)&&(m=le.x),(!ie||le.y<y)&&(y=le.y),(!ie||le.x>k)&&(k=le.x),(!ie||le.y>C)&&(C=le.y)}const D=Math.min(k-m,C-y);let O=D/2;const V=new Fb([],Vb);if(D===0)return new b(m,y);for(let ie=m;ie<k;ie+=D)for(let le=y;le<C;le+=D)V.push(new $l(ie+O,le+O,O,f));let W=function(ie){let le=0,be=0,Pe=0;const ze=ie[0];for(let Ge=0,Le=ze.length,Ne=Le-1;Ge<Le;Ne=Ge++){const lt=ze[Ge],ht=ze[Ne],Yt=lt.x*ht.y-ht.x*lt.y;be+=(lt.x+ht.x)*Yt,Pe+=(lt.y+ht.y)*Yt,le+=3*Yt}return new $l(be/le,Pe/le,0,ie)}(f),ee=V.length;for(;V.length;){const ie=V.pop();(ie.d>W.d||!W.d)&&(W=ie,h&&console.log("found best %d after %d probes",Math.round(1e4*ie.d)/1e4,ee)),ie.max-W.d<=l||(O=ie.h/2,V.push(new $l(ie.p.x-O,ie.p.y-O,O,f)),V.push(new $l(ie.p.x+O,ie.p.y-O,O,f)),V.push(new $l(ie.p.x-O,ie.p.y+O,O,f)),V.push(new $l(ie.p.x+O,ie.p.y+O,O,f)),ee+=4)}return h&&(console.log(`num probes: ${ee}`),console.log(`best distance: ${W.d}`)),W.p}function Vb(f,l){return l.max-f.max}function $l(f,l,h,m){this.p=new b(f,l),this.h=h,this.d=function(y,k){let C=!1,S=1/0;for(let D=0;D<k.length;D++){const O=k[D];for(let V=0,W=O.length,ee=W-1;V<W;ee=V++){const ie=O[V],le=O[ee];ie.y>y.y!=le.y>y.y&&y.x<(le.x-ie.x)*(y.y-ie.y)/(le.y-ie.y)+ie.x&&(C=!C),S=Math.min(S,ip(y,ie,le))}}return(C?1:-1)*Math.sqrt(S)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var es;a.ap=void 0,(es=a.ap||(a.ap={}))[es.center=1]="center",es[es.left=2]="left",es[es.right=3]="right",es[es.top=4]="top",es[es.bottom=5]="bottom",es[es["top-left"]=6]="top-left",es[es["top-right"]=7]="top-right",es[es["bottom-left"]=8]="bottom-left",es[es["bottom-right"]=9]="bottom-right";const Ao=7,Gh=Number.POSITIVE_INFINITY;function $m(f,l){return l[1]!==Gh?function(h,m,y){let k=0,C=0;switch(m=Math.abs(m),y=Math.abs(y),h){case"top-right":case"top-left":case"top":C=y-Ao;break;case"bottom-right":case"bottom-left":case"bottom":C=-y+Ao}switch(h){case"top-right":case"bottom-right":case"right":k=-m;break;case"top-left":case"bottom-left":case"left":k=m}return[k,C]}(f,l[0],l[1]):function(h,m){let y=0,k=0;m<0&&(m=0);const C=m/Math.SQRT2;switch(h){case"top-right":case"top-left":k=C-Ao;break;case"bottom-right":case"bottom-left":k=-C+Ao;break;case"bottom":k=-m+Ao;break;case"top":k=m-Ao}switch(h){case"top-right":case"bottom-right":y=-C;break;case"top-left":case"bottom-left":y=C;break;case"left":y=m;break;case"right":y=-m}return[y,k]}(f,l[0])}function km(f,l,h){var m;const y=f.layout,k=(m=y.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},h);if(k){const S=k.values,D=[];for(let O=0;O<S.length;O+=2){const V=D[O]=S[O],W=S[O+1].map(ee=>ee*Br);V.startsWith("top")?W[1]-=Ao:V.startsWith("bottom")&&(W[1]+=Ao),D[O+1]=W}return new Vs(D)}const C=y.get("text-variable-anchor");if(C){let S;S=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(l,{},h)*Br,Gh]:y.get("text-offset").evaluate(l,{},h).map(O=>O*Br);const D=[];for(const O of C)D.push(O,$m(O,S));return new Vs(D)}return null}function Hh(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ub(f,l,h,m,y,k,C,S,D,O,V){let W=k.textMaxSize.evaluate(l,{});W===void 0&&(W=C);const ee=f.layers[0].layout,ie=ee.get("icon-offset").evaluate(l,{},V),le=Sm(h.horizontal),be=C/24,Pe=f.tilePixelRatio*be,ze=f.tilePixelRatio*W/24,Ge=f.tilePixelRatio*S,Le=f.tilePixelRatio*ee.get("symbol-spacing"),Ne=ee.get("text-padding")*f.tilePixelRatio,lt=function(Pt,pn,cn,Ln=1){const tr=Pt.get("icon-padding").evaluate(pn,{},cn),ir=tr&&tr.values;return[ir[0]*Ln,ir[1]*Ln,ir[2]*Ln,ir[3]*Ln]}(ee,l,V,f.tilePixelRatio),ht=ee.get("text-max-angle")/180*Math.PI,Yt=ee.get("text-rotation-alignment")!=="viewport"&&ee.get("symbol-placement")!=="point",an=ee.get("icon-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",Jt=ee.get("symbol-placement"),Ht=Le/2,Ot=ee.get("icon-text-fit");let rn;m&&Ot!=="none"&&(f.allowVerticalPlacement&&h.vertical&&(rn=Kp(m,h.vertical,Ot,ee.get("icon-text-fit-padding"),ie,be)),le&&(m=Kp(m,le,Ot,ee.get("icon-text-fit-padding"),ie,be)));const Gt=(Pt,pn)=>{pn.x<0||pn.x>=vr||pn.y<0||pn.y>=vr||function(cn,Ln,tr,ir,Nr,Gs,ws,Mr,Xr,ts,xs,$s,Vr,Ur,cs,ks,us,zs,Ls,jr,On,fs,ns,qr,hi){const bi=cn.addToLineVertexArray(Ln,tr);let wi,so,di,ti,Rs=0,io=0,Lc=0,Em=0,ed=-1,td=-1;const oo={};let Am=mr("");if(cn.allowVerticalPlacement&&ir.vertical){const hs=Mr.layout.get("text-rotate").evaluate(On,{},qr)+90;di=new df(Xr,Ln,ts,xs,$s,ir.vertical,Vr,Ur,cs,hs),ws&&(ti=new df(Xr,Ln,ts,xs,$s,ws,us,zs,cs,hs))}if(Nr){const hs=Mr.layout.get("icon-rotate").evaluate(On,{}),ni=Mr.layout.get("icon-text-fit")!=="none",ha=wm(Nr,hs,ns,ni),$i=ws?wm(ws,hs,ns,ni):void 0;so=new df(Xr,Ln,ts,xs,$s,Nr,us,zs,!1,hs),Rs=4*ha.length;const da=cn.iconSizeData;let Oi=null;da.kind==="source"?(Oi=[Ri*Mr.layout.get("icon-size").evaluate(On,{})],Oi[0]>To&&fe(`${cn.layerIds[0]}: Value for "icon-size" is >= ${Ac}. Reduce your "icon-size".`)):da.kind==="composite"&&(Oi=[Ri*fs.compositeIconSizes[0].evaluate(On,{},qr),Ri*fs.compositeIconSizes[1].evaluate(On,{},qr)],(Oi[0]>To||Oi[1]>To)&&fe(`${cn.layerIds[0]}: Value for "icon-size" is >= ${Ac}. Reduce your "icon-size".`)),cn.addSymbols(cn.icon,ha,Oi,jr,Ls,On,a.ah.none,Ln,bi.lineStartIndex,bi.lineLength,-1,qr),ed=cn.icon.placedSymbolArray.length-1,$i&&(io=4*$i.length,cn.addSymbols(cn.icon,$i,Oi,jr,Ls,On,a.ah.vertical,Ln,bi.lineStartIndex,bi.lineLength,-1,qr),td=cn.icon.placedSymbolArray.length-1)}const Mm=Object.keys(ir.horizontal);for(const hs of Mm){const ni=ir.horizontal[hs];if(!wi){Am=mr(ni.text);const $i=Mr.layout.get("text-rotate").evaluate(On,{},qr);wi=new df(Xr,Ln,ts,xs,$s,ni,Vr,Ur,cs,$i)}const ha=ni.positionedLines.length===1;if(Lc+=Cm(cn,Ln,ni,Gs,Mr,cs,On,ks,bi,ir.vertical?a.ah.horizontal:a.ah.horizontalOnly,ha?Mm:[hs],oo,ed,fs,qr),ha)break}ir.vertical&&(Em+=Cm(cn,Ln,ir.vertical,Gs,Mr,cs,On,ks,bi,a.ah.vertical,["vertical"],oo,td,fs,qr));const Gb=wi?wi.boxStartIndex:cn.collisionBoxArray.length,Hb=wi?wi.boxEndIndex:cn.collisionBoxArray.length,Zb=di?di.boxStartIndex:cn.collisionBoxArray.length,Wb=di?di.boxEndIndex:cn.collisionBoxArray.length,Kb=so?so.boxStartIndex:cn.collisionBoxArray.length,Xb=so?so.boxEndIndex:cn.collisionBoxArray.length,Jb=ti?ti.boxStartIndex:cn.collisionBoxArray.length,Yb=ti?ti.boxEndIndex:cn.collisionBoxArray.length;let xi=-1;const mf=(hs,ni)=>hs&&hs.circleDiameter?Math.max(hs.circleDiameter,ni):ni;xi=mf(wi,xi),xi=mf(di,xi),xi=mf(so,xi),xi=mf(ti,xi);const Dm=xi>-1?1:0;Dm&&(xi*=hi/Br),cn.glyphOffsetArray.length>=wl.MAX_GLYPHS&&fe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),On.sortKey!==void 0&&cn.addToSortKeyRanges(cn.symbolInstances.length,On.sortKey);const Qb=km(Mr,On,qr),[ew,tw]=function(hs,ni){const ha=hs.length,$i=ni==null?void 0:ni.values;if(($i==null?void 0:$i.length)>0)for(let da=0;da<$i.length;da+=2){const Oi=$i[da+1];hs.emplaceBack(a.ap[$i[da]],Oi[0],Oi[1])}return[ha,hs.length]}(cn.textAnchorOffsets,Qb);cn.symbolInstances.emplaceBack(Ln.x,Ln.y,oo.right>=0?oo.right:-1,oo.center>=0?oo.center:-1,oo.left>=0?oo.left:-1,oo.vertical||-1,ed,td,Am,Gb,Hb,Zb,Wb,Kb,Xb,Jb,Yb,ts,Lc,Em,Rs,io,Dm,0,Vr,xi,ew,tw)}(f,pn,Pt,h,m,y,rn,f.layers[0],f.collisionBoxArray,l.index,l.sourceLayerIndex,f.index,Pe,[Ne,Ne,Ne,Ne],Yt,D,Ge,lt,an,ie,l,k,O,V,C)};if(Jt==="line")for(const Pt of mm(l.geometry,0,0,vr,vr)){const pn=Ob(Pt,Le,ht,h.vertical||le,m,24,ze,f.overscaling,vr);for(const cn of pn)le&&jb(f,le.text,Ht,cn)||Gt(Pt,cn)}else if(Jt==="line-center"){for(const Pt of l.geometry)if(Pt.length>1){const pn=Rb(Pt,ht,h.vertical||le,m,24,ze);pn&&Gt(Pt,pn)}}else if(l.type==="Polygon")for(const Pt of kh(l.geometry,0)){const pn=Nb(Pt,16);Gt(Pt[0],new Eo(pn.x,pn.y,0))}else if(l.type==="LineString")for(const Pt of l.geometry)Gt(Pt,new Eo(Pt[0].x,Pt[0].y,0));else if(l.type==="Point")for(const Pt of l.geometry)for(const pn of Pt)Gt([pn],new Eo(pn.x,pn.y,0))}function Cm(f,l,h,m,y,k,C,S,D,O,V,W,ee,ie,le){const be=function(Ge,Le,Ne,lt,ht,Yt,an,Jt){const Ht=lt.layout.get("text-rotate").evaluate(Yt,{})*Math.PI/180,Ot=[];for(const rn of Le.positionedLines)for(const Gt of rn.positionedGlyphs){if(!Gt.rect)continue;const Pt=Gt.rect||{};let pn=Up+1,cn=!0,Ln=1,tr=0;const ir=(ht||Jt)&&Gt.vertical,Nr=Gt.metrics.advance*Gt.scale/2;if(Jt&&Le.verticalizable&&(tr=rn.lineOffset/2-(Gt.imageName?-(Br-Gt.metrics.width*Gt.scale)/2:(Gt.scale-1)*Br)),Gt.imageName){const jr=an[Gt.imageName];cn=jr.sdf,Ln=jr.pixelRatio,pn=Ds/Ln}const Gs=ht?[Gt.x+Nr,Gt.y]:[0,0];let ws=ht?[0,0]:[Gt.x+Nr+Ne[0],Gt.y+Ne[1]-tr],Mr=[0,0];ir&&(Mr=ws,ws=[0,0]);const Xr=Gt.metrics.isDoubleResolution?2:1,ts=(Gt.metrics.left-pn)*Gt.scale-Nr+ws[0],xs=(-Gt.metrics.top-pn)*Gt.scale+ws[1],$s=ts+Pt.w/Xr*Gt.scale/Ln,Vr=xs+Pt.h/Xr*Gt.scale/Ln,Ur=new b(ts,xs),cs=new b($s,xs),ks=new b(ts,Vr),us=new b($s,Vr);if(ir){const jr=new b(-Nr,Nr-Pc),On=-Math.PI/2,fs=Br/2-Nr,ns=new b(5-Pc-fs,-(Gt.imageName?fs:0)),qr=new b(...Mr);Ur._rotateAround(On,jr)._add(ns)._add(qr),cs._rotateAround(On,jr)._add(ns)._add(qr),ks._rotateAround(On,jr)._add(ns)._add(qr),us._rotateAround(On,jr)._add(ns)._add(qr)}if(Ht){const jr=Math.sin(Ht),On=Math.cos(Ht),fs=[On,-jr,jr,On];Ur._matMult(fs),cs._matMult(fs),ks._matMult(fs),us._matMult(fs)}const zs=new b(0,0),Ls=new b(0,0);Ot.push({tl:Ur,tr:cs,bl:ks,br:us,tex:Pt,writingMode:Le.writingMode,glyphOffset:Gs,sectionIndex:Gt.sectionIndex,isSDF:cn,pixelOffsetTL:zs,pixelOffsetBR:Ls,minFontScaleX:0,minFontScaleY:0})}return Ot}(0,h,S,y,k,C,m,f.allowVerticalPlacement),Pe=f.textSizeData;let ze=null;Pe.kind==="source"?(ze=[Ri*y.layout.get("text-size").evaluate(C,{})],ze[0]>To&&fe(`${f.layerIds[0]}: Value for "text-size" is >= ${Ac}. Reduce your "text-size".`)):Pe.kind==="composite"&&(ze=[Ri*ie.compositeTextSizes[0].evaluate(C,{},le),Ri*ie.compositeTextSizes[1].evaluate(C,{},le)],(ze[0]>To||ze[1]>To)&&fe(`${f.layerIds[0]}: Value for "text-size" is >= ${Ac}. Reduce your "text-size".`)),f.addSymbols(f.text,be,ze,S,k,C,O,l,D.lineStartIndex,D.lineLength,ee,le);for(const Ge of V)W[Ge]=f.text.placedSymbolArray.length-1;return 4*be.length}function Sm(f){for(const l in f)return f[l];return null}function jb(f,l,h,m){const y=f.compareText;if(l in y){const k=y[l];for(let C=k.length-1;C>=0;C--)if(m.dist(k[C])<h)return!0}else y[l]=[];return y[l].push(m),!1}const Im=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Zh{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,m]=new Uint8Array(l,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=m>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const k=Im[15&m];if(!k)throw new Error("Unrecognized array type.");const[C]=new Uint16Array(l,2,1),[S]=new Uint32Array(l,4,1);return new Zh(S,C,k,l)}constructor(l,h=64,m=Float64Array,y){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;const k=Im.indexOf(this.ArrayType),C=2*l*this.ArrayType.BYTES_PER_ELEMENT,S=l*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-S%8)%8;if(k<0)throw new Error(`Unexpected typed array class: ${m}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+S+D,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+C+S+D),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+S+D,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+k]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=l)}add(l,h){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=h,m}finish(){const l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return Wh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,h,m,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:C,nodeSize:S}=this,D=[0,k.length-1,0],O=[];for(;D.length;){const V=D.pop()||0,W=D.pop()||0,ee=D.pop()||0;if(W-ee<=S){for(let Pe=ee;Pe<=W;Pe++){const ze=C[2*Pe],Ge=C[2*Pe+1];ze>=l&&ze<=m&&Ge>=h&&Ge<=y&&O.push(k[Pe])}continue}const ie=ee+W>>1,le=C[2*ie],be=C[2*ie+1];le>=l&&le<=m&&be>=h&&be<=y&&O.push(k[ie]),(V===0?l<=le:h<=be)&&(D.push(ee),D.push(ie-1),D.push(1-V)),(V===0?m>=le:y>=be)&&(D.push(ie+1),D.push(W),D.push(1-V))}return O}within(l,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:k,nodeSize:C}=this,S=[0,y.length-1,0],D=[],O=m*m;for(;S.length;){const V=S.pop()||0,W=S.pop()||0,ee=S.pop()||0;if(W-ee<=C){for(let Pe=ee;Pe<=W;Pe++)Pm(k[2*Pe],k[2*Pe+1],l,h)<=O&&D.push(y[Pe]);continue}const ie=ee+W>>1,le=k[2*ie],be=k[2*ie+1];Pm(le,be,l,h)<=O&&D.push(y[ie]),(V===0?l-m<=le:h-m<=be)&&(S.push(ee),S.push(ie-1),S.push(1-V)),(V===0?l+m>=le:h+m>=be)&&(S.push(ie+1),S.push(W),S.push(1-V))}return D}}function Wh(f,l,h,m,y,k){if(y-m<=h)return;const C=m+y>>1;Tm(f,l,C,m,y,k),Wh(f,l,h,m,C-1,1-k),Wh(f,l,h,C+1,y,1-k)}function Tm(f,l,h,m,y,k){for(;y>m;){if(y-m>600){const O=y-m+1,V=h-m+1,W=Math.log(O),ee=.5*Math.exp(2*W/3),ie=.5*Math.sqrt(W*ee*(O-ee)/O)*(V-O/2<0?-1:1);Tm(f,l,h,Math.max(m,Math.floor(h-V*ee/O+ie)),Math.min(y,Math.floor(h+(O-V)*ee/O+ie)),k)}const C=l[2*h+k];let S=m,D=y;for(Dc(f,l,m,h),l[2*y+k]>C&&Dc(f,l,m,y);S<D;){for(Dc(f,l,S,D),S++,D--;l[2*S+k]<C;)S++;for(;l[2*D+k]>C;)D--}l[2*m+k]===C?Dc(f,l,m,D):(D++,Dc(f,l,D,y)),D<=h&&(m=D+1),h<=D&&(y=D-1)}}function Dc(f,l,h,m){Kh(f,h,m),Kh(l,2*h,2*m),Kh(l,2*h+1,2*m+1)}function Kh(f,l,h){const m=f[l];f[l]=f[h],f[h]=m}function Pm(f,l,h,m){const y=f-h,k=l-m;return y*y+k*k}var Xh;a.bd=void 0,(Xh=a.bd||(a.bd={})).create="create",Xh.load="load",Xh.fullLoad="fullLoad";let pf=null,zc=[];const Jh=1e3/60,Yh="loadTime",Qh="fullLoadTime",qb={mark(f){performance.mark(f)},frame(f){const l=f;pf!=null&&zc.push(l-pf),pf=l},clearMetrics(){pf=null,zc=[],performance.clearMeasures(Yh),performance.clearMeasures(Qh);for(const f in a.bd)performance.clearMarks(a.bd[f])},getPerformanceMetrics(){performance.measure(Yh,a.bd.create,a.bd.load),performance.measure(Qh,a.bd.create,a.bd.fullLoad);const f=performance.getEntriesByName(Yh)[0].duration,l=performance.getEntriesByName(Qh)[0].duration,h=zc.length,m=1/(zc.reduce((k,C)=>k+C,0)/h/1e3),y=zc.filter(k=>k>Jh).reduce((k,C)=>k+(C-Jh)/Jh,0);return{loadTime:f,fullLoadTime:l,fps:m,percentDroppedFrames:y/(h+y)*100,totalFrames:h}}};a.$=Ft,a.A=ml,a.B=function(f){if(nt==null){const l=f.navigator?f.navigator.userAgent:null;nt=!!f.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return nt},a.C=class{constructor(f,l){this.target=f,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new zb(()=>this.process()),this.subscription=function(h,m,y,k){return h.addEventListener(m,y,!1),{unsubscribe:()=>{h.removeEventListener(m,y,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=ke(self)?f:window}registerMessageHandler(f,l){this.messageHandlers[f]=l}sendAsync(f,l){return new Promise((h,m)=>{const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[y]={resolve:h,reject:m},l&&l.signal.addEventListener("abort",()=>{delete this.resolveRejects[y];const S={id:y,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const k=[],C=Object.assign(Object.assign({},f),{id:y,sourceMapId:this.mapId,origin:location.origin,data:xo(f.data,k)});this.target.postMessage(C,{transfer:k})})}receive(f){const l=f.data,h=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[h];const m=this.abortControllers[h];return delete this.abortControllers[h],void(m&&m.abort())}if(ke(self)||l.mustQueue)return this.tasks[h]=l,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,l)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),l=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(f,l)}processTask(f,l){return o(this,void 0,void 0,function*(){if(l.type==="<response>"){const y=this.resolveRejects[f];return delete this.resolveRejects[f],y?void(l.error?y.reject($o(l.error)):y.resolve($o(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=$o(l.data),m=new AbortController;this.abortControllers[f]=m;try{const y=yield this.messageHandlers[l.type](l.sourceMapId,h,m);this.completeTask(f,null,y)}catch(y){this.completeTask(f,y)}})}completeTask(f,l,h){const m=[];delete this.abortControllers[f];const y={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?xo(l):null,data:xo(h,m)};this.target.postMessage(y,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.D=fn,a.E=ln,a.F=function(){var f=new ml(16);return ml!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},a.G=Tt,a.H=function(f,l,h){var m,y,k,C,S,D,O,V,W,ee,ie,le,be=h[0],Pe=h[1],ze=h[2];return l===f?(f[12]=l[0]*be+l[4]*Pe+l[8]*ze+l[12],f[13]=l[1]*be+l[5]*Pe+l[9]*ze+l[13],f[14]=l[2]*be+l[6]*Pe+l[10]*ze+l[14],f[15]=l[3]*be+l[7]*Pe+l[11]*ze+l[15]):(y=l[1],k=l[2],C=l[3],S=l[4],D=l[5],O=l[6],V=l[7],W=l[8],ee=l[9],ie=l[10],le=l[11],f[0]=m=l[0],f[1]=y,f[2]=k,f[3]=C,f[4]=S,f[5]=D,f[6]=O,f[7]=V,f[8]=W,f[9]=ee,f[10]=ie,f[11]=le,f[12]=m*be+S*Pe+W*ze+l[12],f[13]=y*be+D*Pe+ee*ze+l[13],f[14]=k*be+O*Pe+ie*ze+l[14],f[15]=C*be+V*Pe+le*ze+l[15]),f},a.I=zh,a.J=function(f,l,h){var m=h[0],y=h[1],k=h[2];return f[0]=l[0]*m,f[1]=l[1]*m,f[2]=l[2]*m,f[3]=l[3]*m,f[4]=l[4]*y,f[5]=l[5]*y,f[6]=l[6]*y,f[7]=l[7]*y,f[8]=l[8]*k,f[9]=l[9]*k,f[10]=l[10]*k,f[11]=l[11]*k,f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},a.K=cp,a.L=function(f,l){const h={};for(let m=0;m<l.length;m++){const y=l[m];y in f&&(h[y]=f[y])}return h},a.M=Po,a.N=sm,a.O=im,a.P=b,a.Q=ei,a.R=Qs,a.S=U,a.T=sc,a.U=j,a.V=At,a.W=vr,a.X=kr,a.Y=cf,a.Z=class extends ac{},a._=o,a.a=un,a.a$=function(f,l,h){return f[0]=l[0]*h[0],f[1]=l[1]*h[1],f[2]=l[2]*h[2],f[3]=l[3]*h[3],f},a.a0=qh,a.a1=Lt,a.a2=f=>{const l=window.document.createElement("video");return l.muted=!0,new Promise(h=>{l.onloadstart=()=>{h(l)};for(const m of f){const y=window.document.createElement("source");Mt(m)||(l.crossOrigin="Anonymous"),y.src=m,l.appendChild(y)}})},a.a3=function(){return me++},a.a4=w,a.a5=wl,a.a6=Wa,a.a7=no,a.a8=rr,a.a9=fm,a.aA=Ce,a.aB=function(f,l){if(!f)return[{command:"setStyle",args:[l]}];let h=[];try{if(!xn(f.version,l.version))return[{command:"setStyle",args:[l]}];xn(f.center,l.center)||h.push({command:"setCenter",args:[l.center]}),xn(f.zoom,l.zoom)||h.push({command:"setZoom",args:[l.zoom]}),xn(f.bearing,l.bearing)||h.push({command:"setBearing",args:[l.bearing]}),xn(f.pitch,l.pitch)||h.push({command:"setPitch",args:[l.pitch]}),xn(f.sprite,l.sprite)||h.push({command:"setSprite",args:[l.sprite]}),xn(f.glyphs,l.glyphs)||h.push({command:"setGlyphs",args:[l.glyphs]}),xn(f.transition,l.transition)||h.push({command:"setTransition",args:[l.transition]}),xn(f.light,l.light)||h.push({command:"setLight",args:[l.light]}),xn(f.terrain,l.terrain)||h.push({command:"setTerrain",args:[l.terrain]}),xn(f.sky,l.sky)||h.push({command:"setSky",args:[l.sky]});const m={},y=[];(function(C,S,D,O){let V;for(V in S=S||{},C=C||{})Object.prototype.hasOwnProperty.call(C,V)&&(Object.prototype.hasOwnProperty.call(S,V)||ps(V,D,O));for(V in S)Object.prototype.hasOwnProperty.call(S,V)&&(Object.prototype.hasOwnProperty.call(C,V)?xn(C[V],S[V])||(C[V].type==="geojson"&&S[V].type==="geojson"&&Ws(C,S,V)?Qn(D,{command:"setGeoJSONSourceData",args:[V,S[V].data]}):Fs(V,S,D,O)):is(V,S,D))})(f.sources,l.sources,y,m);const k=[];f.layers&&f.layers.forEach(C=>{"source"in C&&m[C.source]?h.push({command:"removeLayer",args:[C.id]}):k.push(C)}),h=h.concat(y),function(C,S,D){S=S||[];const O=(C=C||[]).map(ri),V=S.map(ri),W=C.reduce(ft,{}),ee=S.reduce(ft,{}),ie=O.slice(),le=Object.create(null);let be,Pe,ze,Ge,Le;for(let Ne=0,lt=0;Ne<O.length;Ne++)be=O[Ne],Object.prototype.hasOwnProperty.call(ee,be)?lt++:(Qn(D,{command:"removeLayer",args:[be]}),ie.splice(ie.indexOf(be,lt),1));for(let Ne=0,lt=0;Ne<V.length;Ne++)be=V[V.length-1-Ne],ie[ie.length-1-Ne]!==be&&(Object.prototype.hasOwnProperty.call(W,be)?(Qn(D,{command:"removeLayer",args:[be]}),ie.splice(ie.lastIndexOf(be,ie.length-lt),1)):lt++,Ge=ie[ie.length-Ne],Qn(D,{command:"addLayer",args:[ee[be],Ge]}),ie.splice(ie.length-Ne,0,be),le[be]=!0);for(let Ne=0;Ne<V.length;Ne++)if(be=V[Ne],Pe=W[be],ze=ee[be],!le[be]&&!xn(Pe,ze))if(xn(Pe.source,ze.source)&&xn(Pe["source-layer"],ze["source-layer"])&&xn(Pe.type,ze.type)){for(Le in Bs(Pe.layout,ze.layout,D,be,null,"setLayoutProperty"),Bs(Pe.paint,ze.paint,D,be,null,"setPaintProperty"),xn(Pe.filter,ze.filter)||Qn(D,{command:"setFilter",args:[be,ze.filter]}),xn(Pe.minzoom,ze.minzoom)&&xn(Pe.maxzoom,ze.maxzoom)||Qn(D,{command:"setLayerZoomRange",args:[be,ze.minzoom,ze.maxzoom]}),Pe)Object.prototype.hasOwnProperty.call(Pe,Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?Bs(Pe[Le],ze[Le],D,be,Le.slice(6),"setPaintProperty"):xn(Pe[Le],ze[Le])||Qn(D,{command:"setLayerProperty",args:[be,Le,ze[Le]]}));for(Le in ze)Object.prototype.hasOwnProperty.call(ze,Le)&&!Object.prototype.hasOwnProperty.call(Pe,Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?Bs(Pe[Le],ze[Le],D,be,Le.slice(6),"setPaintProperty"):xn(Pe[Le],ze[Le])||Qn(D,{command:"setLayerProperty",args:[be,Le,ze[Le]]}))}else Qn(D,{command:"removeLayer",args:[be]}),Ge=ie[ie.lastIndexOf(be)+1],Qn(D,{command:"addLayer",args:[ze,Ge]})}(k,l.layers,h)}catch(m){console.warn("Unable to compute style diff:",m),h=[{command:"setStyle",args:[l]}]}return h},a.aC=function(f){const l=[],h=f.id;return h===void 0&&l.push({message:`layers.${h}: missing required property "id"`}),f.render===void 0&&l.push({message:`layers.${h}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&l.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),l},a.aD=function f(l,h){if(Array.isArray(l)){if(!Array.isArray(h)||l.length!==h.length)return!1;for(let m=0;m<l.length;m++)if(!f(l[m],h[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&h!==null){if(typeof h!="object"||Object.keys(l).length!==Object.keys(h).length)return!1;for(const m in l)if(!f(l[m],h[m]))return!1;return!0}return l===h},a.aE=Y,a.aF=we,a.aG=class extends Fr{constructor(f,l){super(f,l),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},a.aH=Ms,a.aI=class extends Fr{constructor(f,l){super(f,l),this.current=ua}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let l=1;l<16;l++)if(f[l]!==this.current[l]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},a.aJ=ui,a.aK=class extends Fr{constructor(f,l){super(f,l),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},a.aL=class extends Fr{constructor(f,l){super(f,l),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},a.aM=Di,a.aN=function(f,l,h,m,y,k,C){var S=1/(l-h),D=1/(m-y),O=1/(k-C);return f[0]=-2*S,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*D,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*O,f[11]=0,f[12]=(l+h)*S,f[13]=(y+m)*D,f[14]=(C+k)*O,f[15]=1,f},a.aO=Hn,a.aP=py,a.aQ=class extends al{},a.aR=lb,a.aS=class extends ll{},a.aT=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},a.aU=pp,a.aV=X,a.aW=class extends dc{},a.aX=rt,a.aY=function(f,l){return f[0]===l[0]&&f[1]===l[1]&&f[2]===l[2]&&f[3]===l[3]&&f[4]===l[4]&&f[5]===l[5]&&f[6]===l[6]&&f[7]===l[7]&&f[8]===l[8]&&f[9]===l[9]&&f[10]===l[10]&&f[11]===l[11]&&f[12]===l[12]&&f[13]===l[13]&&f[14]===l[14]&&f[15]===l[15]},a.aZ=function(f,l){var h=f[0],m=f[1],y=f[2],k=f[3],C=f[4],S=f[5],D=f[6],O=f[7],V=f[8],W=f[9],ee=f[10],ie=f[11],le=f[12],be=f[13],Pe=f[14],ze=f[15],Ge=l[0],Le=l[1],Ne=l[2],lt=l[3],ht=l[4],Yt=l[5],an=l[6],Jt=l[7],Ht=l[8],Ot=l[9],rn=l[10],Gt=l[11],Pt=l[12],pn=l[13],cn=l[14],Ln=l[15];return Math.abs(h-Ge)<=bs*Math.max(1,Math.abs(h),Math.abs(Ge))&&Math.abs(m-Le)<=bs*Math.max(1,Math.abs(m),Math.abs(Le))&&Math.abs(y-Ne)<=bs*Math.max(1,Math.abs(y),Math.abs(Ne))&&Math.abs(k-lt)<=bs*Math.max(1,Math.abs(k),Math.abs(lt))&&Math.abs(C-ht)<=bs*Math.max(1,Math.abs(C),Math.abs(ht))&&Math.abs(S-Yt)<=bs*Math.max(1,Math.abs(S),Math.abs(Yt))&&Math.abs(D-an)<=bs*Math.max(1,Math.abs(D),Math.abs(an))&&Math.abs(O-Jt)<=bs*Math.max(1,Math.abs(O),Math.abs(Jt))&&Math.abs(V-Ht)<=bs*Math.max(1,Math.abs(V),Math.abs(Ht))&&Math.abs(W-Ot)<=bs*Math.max(1,Math.abs(W),Math.abs(Ot))&&Math.abs(ee-rn)<=bs*Math.max(1,Math.abs(ee),Math.abs(rn))&&Math.abs(ie-Gt)<=bs*Math.max(1,Math.abs(ie),Math.abs(Gt))&&Math.abs(le-Pt)<=bs*Math.max(1,Math.abs(le),Math.abs(Pt))&&Math.abs(be-pn)<=bs*Math.max(1,Math.abs(be),Math.abs(pn))&&Math.abs(Pe-cn)<=bs*Math.max(1,Math.abs(Pe),Math.abs(cn))&&Math.abs(ze-Ln)<=bs*Math.max(1,Math.abs(ze),Math.abs(Ln))},a.a_=function(f,l){return f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},a.aa=function(f){const l={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,m,y,k)=>{const C=y||k;return l[m]=!C||C.toLowerCase(),""}),l["max-age"]){const h=parseInt(l["max-age"],10);isNaN(h)?delete l["max-age"]:l["max-age"]=h}return l},a.ab=function(f,l){const h=[];for(const m in f)m in l||h.push(m);return h},a.ac=re,a.ad=function(f,l,h){var m=Math.sin(h),y=Math.cos(h),k=l[0],C=l[1],S=l[2],D=l[3],O=l[4],V=l[5],W=l[6],ee=l[7];return l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=k*y+O*m,f[1]=C*y+V*m,f[2]=S*y+W*m,f[3]=D*y+ee*m,f[4]=O*y-k*m,f[5]=V*y-C*m,f[6]=W*y-S*m,f[7]=ee*y-D*m,f},a.ae=function(f){var l=new ml(16);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],l},a.af=Ju,a.ag=function(f,l){let h=0,m=0;if(f.kind==="constant")m=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:y,minZoom:k,maxZoom:C}=f,S=y?re(Qr.interpolationFactor(y,l,k,C),0,1):0;f.kind==="camera"?m=as.number(f.minSize,f.maxSize,S):h=S}return{uSizeT:h,uSize:m}},a.ai=function(f,{uSize:l,uSizeT:h},{lowerSize:m,upperSize:y}){return f.kind==="source"?m/Ri:f.kind==="composite"?as.number(m/Ri,y/Ri,h):l},a.aj=Fh,a.ak=function(f,l,h,m){const y=l.y-f.y,k=l.x-f.x,C=m.y-h.y,S=m.x-h.x,D=C*k-S*y;if(D===0)return null;const O=(S*(f.y-h.y)-C*(f.x-h.x))/D;return new b(f.x+O*k,f.y+O*y)},a.al=mm,a.am=mc,a.an=gh,a.ao=Br,a.aq=Oh,a.ar=function(f,l){var h=l[0],m=l[1],y=l[2],k=l[3],C=l[4],S=l[5],D=l[6],O=l[7],V=l[8],W=l[9],ee=l[10],ie=l[11],le=l[12],be=l[13],Pe=l[14],ze=l[15],Ge=h*S-m*C,Le=h*D-y*C,Ne=h*O-k*C,lt=m*D-y*S,ht=m*O-k*S,Yt=y*O-k*D,an=V*be-W*le,Jt=V*Pe-ee*le,Ht=V*ze-ie*le,Ot=W*Pe-ee*be,rn=W*ze-ie*be,Gt=ee*ze-ie*Pe,Pt=Ge*Gt-Le*rn+Ne*Ot+lt*Ht-ht*Jt+Yt*an;return Pt?(f[0]=(S*Gt-D*rn+O*Ot)*(Pt=1/Pt),f[1]=(y*rn-m*Gt-k*Ot)*Pt,f[2]=(be*Yt-Pe*ht+ze*lt)*Pt,f[3]=(ee*ht-W*Yt-ie*lt)*Pt,f[4]=(D*Ht-C*Gt-O*Jt)*Pt,f[5]=(h*Gt-y*Ht+k*Jt)*Pt,f[6]=(Pe*Ne-le*Yt-ze*Le)*Pt,f[7]=(V*Yt-ee*Ne+ie*Le)*Pt,f[8]=(C*rn-S*Ht+O*an)*Pt,f[9]=(m*Ht-h*rn-k*an)*Pt,f[10]=(le*ht-be*Ne+ze*Ge)*Pt,f[11]=(W*Ne-V*ht-ie*Ge)*Pt,f[12]=(S*Jt-C*Ot-D*an)*Pt,f[13]=(h*Ot-m*Jt+y*an)*Pt,f[14]=(be*Le-le*lt-Pe*Ge)*Pt,f[15]=(V*lt-W*Le+ee*Ge)*Pt,f):null},a.as=Hh,a.at=Rh,a.au=Zh,a.av=function(){const f={},l=We.$version;for(const h in We.$root){const m=We.$root[h];if(m.required){let y=null;y=h==="version"?l:m.type==="array"?[]:{},y!=null&&(f[h]=y)}}return f},a.aw=Ou,a.ax=Ye,a.ay=function(f){f=f.slice();const l=Object.create(null);for(let h=0;h<f.length;h++)l[f[h].id]=f[h];for(let h=0;h<f.length;h++)"ref"in f[h]&&(f[h]=xr(f[h],l[f[h].ref]));return f},a.az=function(f){if(f.type==="custom")return new Db(f);switch(f.type){case"background":return new Eb(f);case"circle":return new my(f);case"fill":return new Ly(f);case"fill-extrusion":return new Xy(f);case"heatmap":return new gy(f);case"hillshade":return new yy(f);case"line":return new sb(f);case"raster":return new Mb(f);case"symbol":return new lf(f)}},a.b=bt,a.b0=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]+f[3]*l[3]},a.b1=te,a.b2=lm,a.b3=om,a.b4=function(f,l,h,m,y){var k,C=1/Math.tan(l/2);return f[0]=C/h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=C,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,y!=null&&y!==1/0?(f[10]=(y+m)*(k=1/(m-y)),f[14]=2*y*m*k):(f[10]=-1,f[14]=-2*m),f},a.b5=function(f,l,h){var m=Math.sin(h),y=Math.cos(h),k=l[4],C=l[5],S=l[6],D=l[7],O=l[8],V=l[9],W=l[10],ee=l[11];return l!==f&&(f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[4]=k*y+O*m,f[5]=C*y+V*m,f[6]=S*y+W*m,f[7]=D*y+ee*m,f[8]=O*y-k*m,f[9]=V*y-C*m,f[10]=W*y-S*m,f[11]=ee*y-D*m,f},a.b6=J,a.b7=pe,a.b8=function(f){return f*Math.PI/180},a.b9=function(f,l){return f[0]=l[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=l[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=l[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},a.bA=Mi,a.ba=class extends vi{},a.bb=Uh,a.bc=qb,a.be=Vt,a.bf=function(f,l){un.REGISTERED_PROTOCOLS[f]=l},a.bg=function(f){delete un.REGISTERED_PROTOCOLS[f]},a.bh=function(f,l){const h={};for(let y=0;y<f.length;y++){const k=l&&l[f[y].id]||hh(f[y]);l&&(l[f[y].id]=k);let C=h[k];C||(C=h[k]=[]),C.push(f[y])}const m=[];for(const y in h)m.push(h[y]);return m},a.bi=tn,a.bj=um,a.bk=hm,a.bl=qp,a.bm=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=vr/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const l=f.bucket.layers[0],h=l.layout,m=l._unevaluatedLayout._values,y={layoutIconSize:m["icon-size"].possiblyEvaluate(new rr(f.bucket.zoom+1),f.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new rr(f.bucket.zoom+1),f.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new rr(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:O,maxZoom:V}=f.bucket.textSizeData;y.compositeTextSizes=[m["text-size"].possiblyEvaluate(new rr(O),f.canonical),m["text-size"].possiblyEvaluate(new rr(V),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:O,maxZoom:V}=f.bucket.iconSizeData;y.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new rr(O),f.canonical),m["icon-size"].possiblyEvaluate(new rr(V),f.canonical)]}const k=h.get("text-line-height")*Br,C=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",S=h.get("text-keep-upright"),D=h.get("text-size");for(const O of f.bucket.features){const V=h.get("text-font").evaluate(O,{},f.canonical).join(","),W=D.evaluate(O,{},f.canonical),ee=y.layoutTextSize.evaluate(O,{},f.canonical),ie=y.layoutIconSize.evaluate(O,{},f.canonical),le={horizontal:{},vertical:void 0},be=O.text;let Pe,ze=[0,0];if(be){const Ne=be.toString(),lt=h.get("text-letter-spacing").evaluate(O,{},f.canonical)*Br,ht=Fu(Ne)?lt:0,Yt=h.get("text-anchor").evaluate(O,{},f.canonical),an=km(l,O,f.canonical);if(!an){const Gt=h.get("text-radial-offset").evaluate(O,{},f.canonical);ze=Gt?$m(Yt,[Gt*Br,Gh]):h.get("text-offset").evaluate(O,{},f.canonical).map(Pt=>Pt*Br)}let Jt=C?"center":h.get("text-justify").evaluate(O,{},f.canonical);const Ht=h.get("symbol-placement"),Ot=Ht==="point"?h.get("text-max-width").evaluate(O,{},f.canonical)*Br:0,rn=()=>{f.bucket.allowVerticalPlacement&&ko(Ne)&&(le.vertical=sf(be,f.glyphMap,f.glyphPositions,f.imagePositions,V,Ot,k,Yt,"left",ht,ze,a.ah.vertical,!0,Ht,ee,W))};if(!C&&an){const Gt=new Set;if(Jt==="auto")for(let pn=0;pn<an.values.length;pn+=2)Gt.add(Hh(an.values[pn]));else Gt.add(Jt);let Pt=!1;for(const pn of Gt)if(!le.horizontal[pn])if(Pt)le.horizontal[pn]=le.horizontal[0];else{const cn=sf(be,f.glyphMap,f.glyphPositions,f.imagePositions,V,Ot,k,"center",pn,ht,ze,a.ah.horizontal,!1,Ht,ee,W);cn&&(le.horizontal[pn]=cn,Pt=cn.positionedLines.length===1)}rn()}else{Jt==="auto"&&(Jt=Hh(Yt));const Gt=sf(be,f.glyphMap,f.glyphPositions,f.imagePositions,V,Ot,k,Yt,Jt,ht,ze,a.ah.horizontal,!1,Ht,ee,W);Gt&&(le.horizontal[Jt]=Gt),rn(),ko(Ne)&&C&&S&&(le.vertical=sf(be,f.glyphMap,f.glyphPositions,f.imagePositions,V,Ot,k,Yt,Jt,ht,ze,a.ah.vertical,!1,Ht,ee,W))}}let Ge=!1;if(O.icon&&O.icon.name){const Ne=f.imageMap[O.icon.name];Ne&&(Pe=Cb(f.imagePositions[O.icon.name],h.get("icon-offset").evaluate(O,{},f.canonical),h.get("icon-anchor").evaluate(O,{},f.canonical)),Ge=!!Ne.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Ge:f.bucket.sdfIcons!==Ge&&fe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ne.pixelRatio!==f.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const Le=Sm(le.horizontal)||le.vertical;f.bucket.iconsInText=!!Le&&Le.iconsInText,(Le||Pe)&&Ub(f.bucket,O,le,Pe,f.imageMap,y,ee,ie,ze,Ge,f.canonical)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},a.bn=Eh,a.bo=Ih,a.bp=Ph,a.bq=So,a.br=Mh,a.bs=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},a.bt=function(f,l,h,m,y){return o(this,void 0,void 0,function*(){if(j())try{return yield At(f,l,h,m,y)}catch{}return function(k,C,S,D,O){const V=k.width,W=k.height;Et&&It||(Et=new OffscreenCanvas(V,W),It=Et.getContext("2d",{willReadFrequently:!0})),Et.width=V,Et.height=W,It.drawImage(k,0,0,V,W);const ee=It.getImageData(C,S,D,O);return It.clearRect(0,0,V,W),ee.data}(f,l,h,m,y)})},a.bu=cm,a.bv=u,a.bw=p,a.bx=Lp,a.by=Xi,a.bz=function(f){return f.message===nn},a.c=yn,a.d=f=>o(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const l=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(l)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=de,a.f=f=>new Promise((l,h)=>{const m=new Image;m.onload=()=>{l(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=zt})},m.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(f)],{type:"image/png"});m.src=f.byteLength?URL.createObjectURL(y):zt}),a.g=Kt,a.h=(f,l)=>Nt(de(f,{type:"json"}),l),a.i=ke,a.j=sn,a.k=et,a.l=(f,l)=>Nt(de(f,{type:"arrayBuffer"}),l),a.m=Nt,a.n=function(f){return new Mh(f).readFields(yb,[])},a.o=wc,a.p=jp,a.q=ys,a.r=dh,a.s=Mt,a.t=wo,a.u=Xt,a.v=We,a.w=fe,a.x=Yi,a.y=function([f,l,h]){return l+=90,l*=Math.PI/180,h*=Math.PI/180,{x:f*Math.cos(l)*Math.sin(h),y:f*Math.sin(l)*Math.sin(h),z:f*Math.cos(h)}},a.z=as}),r("worker",["./shared"],function(a){class o{constructor(Q){this.keyCache={},Q&&this.replace(Q)}replace(Q){this._layerConfigs={},this._layers={},this.update(Q,[])}update(Q,ne){for(const xe of Q){this._layerConfigs[xe.id]=xe;const Fe=this._layers[xe.id]=a.az(xe);Fe._featureFilter=a.a6(Fe.filter),this.keyCache[xe.id]&&delete this.keyCache[xe.id]}for(const xe of ne)delete this.keyCache[xe],delete this._layerConfigs[xe],delete this._layers[xe];this.familiesBySource={};const he=a.bh(Object.values(this._layerConfigs),this.keyCache);for(const xe of he){const Fe=xe.map(ct=>this._layers[ct.id]),Be=Fe[0];if(Be.visibility==="none")continue;const qe=Be.source||"";let Re=this.familiesBySource[qe];Re||(Re=this.familiesBySource[qe]={});const Ke=Be.sourceLayer||"_geojsonTileLayer";let dt=Re[Ke];dt||(dt=Re[Ke]=[]),dt.push(Fe)}}}class u{constructor(Q){const ne={},he=[];for(const qe in Q){const Re=Q[qe],Ke=ne[qe]={};for(const dt in Re){const ct=Re[+dt];if(!ct||ct.bitmap.width===0||ct.bitmap.height===0)continue;const ut={x:0,y:0,w:ct.bitmap.width+2,h:ct.bitmap.height+2};he.push(ut),Ke[dt]={rect:ut,metrics:ct.metrics}}}const{w:xe,h:Fe}=a.p(he),Be=new a.o({width:xe||1,height:Fe||1});for(const qe in Q){const Re=Q[qe];for(const Ke in Re){const dt=Re[+Ke];if(!dt||dt.bitmap.width===0||dt.bitmap.height===0)continue;const ct=ne[qe][Ke].rect;a.o.copy(dt.bitmap,Be,{x:0,y:0},{x:ct.x+1,y:ct.y+1},dt.bitmap)}}this.image=Be,this.positions=ne}}a.bi("GlyphAtlas",u);class p{constructor(Q){this.tileID=new a.Q(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.uid=Q.uid,this.zoom=Q.zoom,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Q.showCollisionBoxes,this.collectResourceTiming=!!Q.collectResourceTiming,this.returnDependencies=!!Q.returnDependencies,this.promoteId=Q.promoteId,this.inFlightDependencies=[]}parse(Q,ne,he,xe){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=Q,this.collisionBoxArray=new a.a4;const Fe=new a.bj(Object.keys(Q.layers).sort()),Be=new a.bk(this.tileID,this.promoteId);Be.bucketLayerIDs=[];const qe={},Re={featureIndex:Be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:he},Ke=ne.familiesBySource[this.source];for(const Mn in Ke){const hr=Q.layers[Mn];if(!hr)continue;hr.version===1&&a.w(`Vector tile source "${this.source}" layer "${Mn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Rr=Fe.encode(Mn),os=[];for(let _s=0;_s<hr.length;_s++){const Wr=hr.feature(_s),ii=Be.getId(Wr,Mn);os.push({feature:Wr,id:ii,index:_s,sourceLayerIndex:Rr})}for(const _s of Ke[Mn]){const Wr=_s[0];Wr.source!==this.source&&a.w(`layer.source = ${Wr.source} does not equal this.source = ${this.source}`),Wr.minzoom&&this.zoom<Math.floor(Wr.minzoom)||Wr.maxzoom&&this.zoom>=Wr.maxzoom||Wr.visibility!=="none"&&(_(_s,this.zoom,he),(qe[Wr.id]=Wr.createBucket({index:Be.bucketLayerIDs.length,layers:_s,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Rr,sourceID:this.source})).populate(os,Re,this.tileID.canonical),Be.bucketLayerIDs.push(_s.map(ii=>ii.id)))}}const dt=a.aE(Re.glyphDependencies,Mn=>Object.keys(Mn).map(Number));this.inFlightDependencies.forEach(Mn=>Mn==null?void 0:Mn.abort()),this.inFlightDependencies=[];let ct=Promise.resolve({});if(Object.keys(dt).length){const Mn=new AbortController;this.inFlightDependencies.push(Mn),ct=xe.sendAsync({type:"GG",data:{stacks:dt,source:this.source,tileID:this.tileID,type:"glyphs"}},Mn)}const ut=Object.keys(Re.iconDependencies);let hn=Promise.resolve({});if(ut.length){const Mn=new AbortController;this.inFlightDependencies.push(Mn),hn=xe.sendAsync({type:"GI",data:{icons:ut,source:this.source,tileID:this.tileID,type:"icons"}},Mn)}const mn=Object.keys(Re.patternDependencies);let In=Promise.resolve({});if(mn.length){const Mn=new AbortController;this.inFlightDependencies.push(Mn),In=xe.sendAsync({type:"GI",data:{icons:mn,source:this.source,tileID:this.tileID,type:"patterns"}},Mn)}const[kn,Fn,Kn]=yield Promise.all([ct,hn,In]),nr=new u(kn),Ir=new a.bl(Fn,Kn);for(const Mn in qe){const hr=qe[Mn];hr instanceof a.a5?(_(hr.layers,this.zoom,he),a.bm({bucket:hr,glyphMap:kn,glyphPositions:nr.positions,imageMap:Fn,imagePositions:Ir.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):hr.hasPattern&&(hr instanceof a.bn||hr instanceof a.bo||hr instanceof a.bp)&&(_(hr.layers,this.zoom,he),hr.addFeatures(Re,this.tileID.canonical,Ir.patternPositions))}return this.status="done",{buckets:Object.values(qe).filter(Mn=>!Mn.isEmpty()),featureIndex:Be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:nr.image,imageAtlas:Ir,glyphMap:this.returnDependencies?kn:null,iconMap:this.returnDependencies?Fn:null,glyphPositions:this.returnDependencies?nr.positions:null}})}}function _(Ae,Q,ne){const he=new a.a8(Q);for(const xe of Ae)xe.recalculate(he,ne)}class b{constructor(Q,ne,he){this.actor=Q,this.layerIndex=ne,this.availableImages=he,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Q,ne){return a._(this,void 0,void 0,function*(){const he=yield a.l(Q.request,ne);try{return{vectorTile:new a.bq.VectorTile(new a.br(he.data)),rawData:he.data,cacheControl:he.cacheControl,expires:he.expires}}catch(xe){const Fe=new Uint8Array(he.data);let Be=`Unable to parse the tile at ${Q.request.url}, `;throw Be+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${xe.messge}`,new Error(Be)}})}loadTile(Q){return a._(this,void 0,void 0,function*(){const ne=Q.uid,he=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new a.bs(Q.request),xe=new p(Q);this.loading[ne]=xe;const Fe=new AbortController;xe.abort=Fe;try{const Be=yield this.loadVectorTile(Q,Fe);if(delete this.loading[ne],!Be)return null;const qe=Be.rawData,Re={};Be.expires&&(Re.expires=Be.expires),Be.cacheControl&&(Re.cacheControl=Be.cacheControl);const Ke={};if(he){const ct=he.finish();ct&&(Ke.resourceTiming=JSON.parse(JSON.stringify(ct)))}xe.vectorTile=Be.vectorTile;const dt=xe.parse(Be.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ne]=xe,this.fetching[ne]={rawTileData:qe,cacheControl:Re,resourceTiming:Ke};try{const ct=yield dt;return a.e({rawTileData:qe.slice(0)},ct,Re,Ke)}finally{delete this.fetching[ne]}}catch(Be){throw delete this.loading[ne],xe.status="done",this.loaded[ne]=xe,Be}})}reloadTile(Q){return a._(this,void 0,void 0,function*(){const ne=Q.uid;if(!this.loaded||!this.loaded[ne])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const he=this.loaded[ne];if(he.showCollisionBoxes=Q.showCollisionBoxes,he.status==="parsing"){const xe=yield he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor);let Fe;if(this.fetching[ne]){const{rawTileData:Be,cacheControl:qe,resourceTiming:Re}=this.fetching[ne];delete this.fetching[ne],Fe=a.e({rawTileData:Be.slice(0)},xe,qe,Re)}else Fe=xe;return Fe}if(he.status==="done"&&he.vectorTile)return he.parse(he.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(Q){return a._(this,void 0,void 0,function*(){const ne=this.loading,he=Q.uid;ne&&ne[he]&&ne[he].abort&&(ne[he].abort.abort(),delete ne[he])})}removeTile(Q){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Q.uid]&&delete this.loaded[Q.uid]})}}class ${constructor(){this.loaded={}}loadTile(Q){return a._(this,void 0,void 0,function*(){const{uid:ne,encoding:he,rawImageData:xe,redFactor:Fe,greenFactor:Be,blueFactor:qe,baseShift:Re}=Q,Ke=xe.width+2,dt=xe.height+2,ct=a.b(xe)?new a.R({width:Ke,height:dt},yield a.bt(xe,-1,-1,Ke,dt)):xe,ut=new a.bu(ne,ct,he,Fe,Be,qe,Re);return this.loaded=this.loaded||{},this.loaded[ne]=ut,ut})}removeTile(Q){const ne=this.loaded,he=Q.uid;ne&&ne[he]&&delete ne[he]}}function P(Ae,Q){if(Ae.length!==0){L(Ae[0],Q);for(var ne=1;ne<Ae.length;ne++)L(Ae[ne],!Q)}}function L(Ae,Q){for(var ne=0,he=0,xe=0,Fe=Ae.length,Be=Fe-1;xe<Fe;Be=xe++){var qe=(Ae[xe][0]-Ae[Be][0])*(Ae[Be][1]+Ae[xe][1]),Re=ne+qe;he+=Math.abs(ne)>=Math.abs(qe)?ne-Re+qe:qe-Re+ne,ne=Re}ne+he>=0!=!!Q&&Ae.reverse()}var z=a.bv(function Ae(Q,ne){var he,xe=Q&&Q.type;if(xe==="FeatureCollection")for(he=0;he<Q.features.length;he++)Ae(Q.features[he],ne);else if(xe==="GeometryCollection")for(he=0;he<Q.geometries.length;he++)Ae(Q.geometries[he],ne);else if(xe==="Feature")Ae(Q.geometry,ne);else if(xe==="Polygon")P(Q.coordinates,ne);else if(xe==="MultiPolygon")for(he=0;he<Q.coordinates.length;he++)P(Q.coordinates[he],ne);return Q});const F=a.bq.VectorTileFeature.prototype.toGeoJSON;var U={exports:{}},j=a.bw,J=a.bq.VectorTileFeature,pe=re;function re(Ae,Q){this.options=Q||{},this.features=Ae,this.length=Ae.length}function te(Ae,Q){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=Q||4096}re.prototype.feature=function(Ae){return new te(this.features[Ae],this.options.extent)},te.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var Q=0;Q<Ae.length;Q++){for(var ne=Ae[Q],he=[],xe=0;xe<ne.length;xe++)he.push(new j(ne[xe][0],ne[xe][1]));this.geometry.push(he)}return this.geometry},te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,Q=1/0,ne=-1/0,he=1/0,xe=-1/0,Fe=0;Fe<Ae.length;Fe++)for(var Be=Ae[Fe],qe=0;qe<Be.length;qe++){var Re=Be[qe];Q=Math.min(Q,Re.x),ne=Math.max(ne,Re.x),he=Math.min(he,Re.y),xe=Math.max(xe,Re.y)}return[Q,he,ne,xe]},te.prototype.toGeoJSON=J.prototype.toGeoJSON;var de=a.bx,me=pe;function Y(Ae){var Q=new de;return function(ne,he){for(var xe in ne.layers)he.writeMessage(3,we,ne.layers[xe])}(Ae,Q),Q.finish()}function we(Ae,Q){var ne;Q.writeVarintField(15,Ae.version||1),Q.writeStringField(1,Ae.name||""),Q.writeVarintField(5,Ae.extent||4096);var he={keys:[],values:[],keycache:{},valuecache:{}};for(ne=0;ne<Ae.length;ne++)he.feature=Ae.feature(ne),Q.writeMessage(2,Ce,he);var xe=he.keys;for(ne=0;ne<xe.length;ne++)Q.writeStringField(3,xe[ne]);var Fe=he.values;for(ne=0;ne<Fe.length;ne++)Q.writeMessage(4,ke,Fe[ne])}function Ce(Ae,Q){var ne=Ae.feature;ne.id!==void 0&&Q.writeVarintField(1,ne.id),Q.writeMessage(2,_e,Ae),Q.writeVarintField(3,ne.type),Q.writeMessage(4,je,ne)}function _e(Ae,Q){var ne=Ae.feature,he=Ae.keys,xe=Ae.values,Fe=Ae.keycache,Be=Ae.valuecache;for(var qe in ne.properties){var Re=ne.properties[qe],Ke=Fe[qe];if(Re!==null){Ke===void 0&&(he.push(qe),Fe[qe]=Ke=he.length-1),Q.writeVarint(Ke);var dt=typeof Re;dt!=="string"&&dt!=="boolean"&&dt!=="number"&&(Re=JSON.stringify(Re));var ct=dt+":"+Re,ut=Be[ct];ut===void 0&&(xe.push(Re),Be[ct]=ut=xe.length-1),Q.writeVarint(ut)}}}function fe(Ae,Q){return(Q<<3)+(7&Ae)}function Ee(Ae){return Ae<<1^Ae>>31}function je(Ae,Q){for(var ne=Ae.loadGeometry(),he=Ae.type,xe=0,Fe=0,Be=ne.length,qe=0;qe<Be;qe++){var Re=ne[qe],Ke=1;he===1&&(Ke=Re.length),Q.writeVarint(fe(1,Ke));for(var dt=he===3?Re.length-1:Re.length,ct=0;ct<dt;ct++){ct===1&&he!==1&&Q.writeVarint(fe(2,dt-1));var ut=Re[ct].x-xe,hn=Re[ct].y-Fe;Q.writeVarint(Ee(ut)),Q.writeVarint(Ee(hn)),xe+=ut,Fe+=hn}he===3&&Q.writeVarint(fe(7,1))}}function ke(Ae,Q){var ne=typeof Ae;ne==="string"?Q.writeStringField(1,Ae):ne==="boolean"?Q.writeBooleanField(7,Ae):ne==="number"&&(Ae%1!=0?Q.writeDoubleField(3,Ae):Ae<0?Q.writeSVarintField(6,Ae):Q.writeVarintField(5,Ae))}U.exports=Y,U.exports.fromVectorTileJs=Y,U.exports.fromGeojsonVt=function(Ae,Q){Q=Q||{};var ne={};for(var he in Ae)ne[he]=new me(Ae[he].features,Q),ne[he].name=he,ne[he].version=Q.version,ne[he].extent=Q.extent;return Y({layers:ne})},U.exports.GeoJSONWrapper=me;var nt=a.bv(U.exports);const bt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ae=>Ae},zt=Math.fround||(At=new Float32Array(1),Ae=>(At[0]=+Ae,At[0]));var At;const Et=3,It=5,nn=6;class yn{constructor(Q){this.options=Object.assign(Object.create(bt),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){const{log:ne,minZoom:he,maxZoom:xe}=this.options;ne&&console.time("total time");const Fe=`prepare ${Q.length} points`;ne&&console.time(Fe),this.points=Q;const Be=[];for(let Re=0;Re<Q.length;Re++){const Ke=Q[Re];if(!Ke.geometry)continue;const[dt,ct]=Ke.geometry.coordinates,ut=zt(Tt(dt)),hn=zt(Vt(ct));Be.push(ut,hn,1/0,Re,-1,1),this.options.reduce&&Be.push(0)}let qe=this.trees[xe+1]=this._createTree(Be);ne&&console.timeEnd(Fe);for(let Re=xe;Re>=he;Re--){const Ke=+Date.now();qe=this.trees[Re]=this._createTree(this._cluster(qe,Re)),ne&&console.log("z%d: %d clusters in %dms",Re,qe.numItems,+Date.now()-Ke)}return ne&&console.timeEnd("total time"),this}getClusters(Q,ne){let he=((Q[0]+180)%360+360)%360-180;const xe=Math.max(-90,Math.min(90,Q[1]));let Fe=Q[2]===180?180:((Q[2]+180)%360+360)%360-180;const Be=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)he=-180,Fe=180;else if(he>Fe){const ct=this.getClusters([he,xe,180,Be],ne),ut=this.getClusters([-180,xe,Fe,Be],ne);return ct.concat(ut)}const qe=this.trees[this._limitZoom(ne)],Re=qe.range(Tt(he),Vt(Be),Tt(Fe),Vt(xe)),Ke=qe.data,dt=[];for(const ct of Re){const ut=this.stride*ct;dt.push(Ke[ut+It]>1?un(Ke,ut,this.clusterProps):this.points[Ke[ut+Et]])}return dt}getChildren(Q){const ne=this._getOriginId(Q),he=this._getOriginZoom(Q),xe="No cluster with the specified id.",Fe=this.trees[he];if(!Fe)throw new Error(xe);const Be=Fe.data;if(ne*this.stride>=Be.length)throw new Error(xe);const qe=this.options.radius/(this.options.extent*Math.pow(2,he-1)),Re=Fe.within(Be[ne*this.stride],Be[ne*this.stride+1],qe),Ke=[];for(const dt of Re){const ct=dt*this.stride;Be[ct+4]===Q&&Ke.push(Be[ct+It]>1?un(Be,ct,this.clusterProps):this.points[Be[ct+Et]])}if(Ke.length===0)throw new Error(xe);return Ke}getLeaves(Q,ne,he){const xe=[];return this._appendLeaves(xe,Q,ne=ne||10,he=he||0,0),xe}getTile(Q,ne,he){const xe=this.trees[this._limitZoom(Q)],Fe=Math.pow(2,Q),{extent:Be,radius:qe}=this.options,Re=qe/Be,Ke=(he-Re)/Fe,dt=(he+1+Re)/Fe,ct={features:[]};return this._addTileFeatures(xe.range((ne-Re)/Fe,Ke,(ne+1+Re)/Fe,dt),xe.data,ne,he,Fe,ct),ne===0&&this._addTileFeatures(xe.range(1-Re/Fe,Ke,1,dt),xe.data,Fe,he,Fe,ct),ne===Fe-1&&this._addTileFeatures(xe.range(0,Ke,Re/Fe,dt),xe.data,-1,he,Fe,ct),ct.features.length?ct:null}getClusterExpansionZoom(Q){let ne=this._getOriginZoom(Q)-1;for(;ne<=this.options.maxZoom;){const he=this.getChildren(Q);if(ne++,he.length!==1)break;Q=he[0].properties.cluster_id}return ne}_appendLeaves(Q,ne,he,xe,Fe){const Be=this.getChildren(ne);for(const qe of Be){const Re=qe.properties;if(Re&&Re.cluster?Fe+Re.point_count<=xe?Fe+=Re.point_count:Fe=this._appendLeaves(Q,Re.cluster_id,he,xe,Fe):Fe<xe?Fe++:Q.push(qe),Q.length===he)break}return Fe}_createTree(Q){const ne=new a.au(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let he=0;he<Q.length;he+=this.stride)ne.add(Q[he],Q[he+1]);return ne.finish(),ne.data=Q,ne}_addTileFeatures(Q,ne,he,xe,Fe,Be){for(const qe of Q){const Re=qe*this.stride,Ke=ne[Re+It]>1;let dt,ct,ut;if(Ke)dt=Kt(ne,Re,this.clusterProps),ct=ne[Re],ut=ne[Re+1];else{const In=this.points[ne[Re+Et]];dt=In.properties;const[kn,Fn]=In.geometry.coordinates;ct=Tt(kn),ut=Vt(Fn)}const hn={type:1,geometry:[[Math.round(this.options.extent*(ct*Fe-he)),Math.round(this.options.extent*(ut*Fe-xe))]],tags:dt};let mn;mn=Ke||this.options.generateId?ne[Re+Et]:this.points[ne[Re+Et]].id,mn!==void 0&&(hn.id=mn),Be.features.push(hn)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,ne){const{radius:he,extent:xe,reduce:Fe,minPoints:Be}=this.options,qe=he/(xe*Math.pow(2,ne)),Re=Q.data,Ke=[],dt=this.stride;for(let ct=0;ct<Re.length;ct+=dt){if(Re[ct+2]<=ne)continue;Re[ct+2]=ne;const ut=Re[ct],hn=Re[ct+1],mn=Q.within(Re[ct],Re[ct+1],qe),In=Re[ct+It];let kn=In;for(const Fn of mn){const Kn=Fn*dt;Re[Kn+2]>ne&&(kn+=Re[Kn+It])}if(kn>In&&kn>=Be){let Fn,Kn=ut*In,nr=hn*In,Ir=-1;const Mn=((ct/dt|0)<<5)+(ne+1)+this.points.length;for(const hr of mn){const Rr=hr*dt;if(Re[Rr+2]<=ne)continue;Re[Rr+2]=ne;const os=Re[Rr+It];Kn+=Re[Rr]*os,nr+=Re[Rr+1]*os,Re[Rr+4]=Mn,Fe&&(Fn||(Fn=this._map(Re,ct,!0),Ir=this.clusterProps.length,this.clusterProps.push(Fn)),Fe(Fn,this._map(Re,Rr)))}Re[ct+4]=Mn,Ke.push(Kn/kn,nr/kn,1/0,Mn,-1,kn),Fe&&Ke.push(Ir)}else{for(let Fn=0;Fn<dt;Fn++)Ke.push(Re[ct+Fn]);if(kn>1)for(const Fn of mn){const Kn=Fn*dt;if(!(Re[Kn+2]<=ne)){Re[Kn+2]=ne;for(let nr=0;nr<dt;nr++)Ke.push(Re[Kn+nr])}}}}return Ke}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,ne,he){if(Q[ne+It]>1){const Be=this.clusterProps[Q[ne+nn]];return he?Object.assign({},Be):Be}const xe=this.points[Q[ne+Et]].properties,Fe=this.options.map(xe);return he&&Fe===xe?Object.assign({},Fe):Fe}}function un(Ae,Q,ne){return{type:"Feature",id:Ae[Q+Et],properties:Kt(Ae,Q,ne),geometry:{type:"Point",coordinates:[(he=Ae[Q],360*(he-.5)),Ye(Ae[Q+1])]}};var he}function Kt(Ae,Q,ne){const he=Ae[Q+It],xe=he>=1e4?`${Math.round(he/1e3)}k`:he>=1e3?Math.round(he/100)/10+"k":he,Fe=Ae[Q+nn],Be=Fe===-1?{}:Object.assign({},ne[Fe]);return Object.assign(Be,{cluster:!0,cluster_id:Ae[Q+Et],point_count:he,point_count_abbreviated:xe})}function Tt(Ae){return Ae/360+.5}function Vt(Ae){const Q=Math.sin(Ae*Math.PI/180),ne=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return ne<0?0:ne>1?1:ne}function Ye(Ae){const Q=(180-360*Ae)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}function Nt(Ae,Q,ne,he){for(var xe,Fe=he,Be=ne-Q>>1,qe=ne-Q,Re=Ae[Q],Ke=Ae[Q+1],dt=Ae[ne],ct=Ae[ne+1],ut=Q+3;ut<ne;ut+=3){var hn=Mt(Ae[ut],Ae[ut+1],Re,Ke,dt,ct);if(hn>Fe)xe=ut,Fe=hn;else if(hn===Fe){var mn=Math.abs(ut-Be);mn<qe&&(xe=ut,qe=mn)}}Fe>he&&(xe-Q>3&&Nt(Ae,Q,xe,he),Ae[xe+2]=Fe,ne-xe>3&&Nt(Ae,xe,ne,he))}function Mt(Ae,Q,ne,he,xe,Fe){var Be=xe-ne,qe=Fe-he;if(Be!==0||qe!==0){var Re=((Ae-ne)*Be+(Q-he)*qe)/(Be*Be+qe*qe);Re>1?(ne=xe,he=Fe):Re>0&&(ne+=Be*Re,he+=qe*Re)}return(Be=Ae-ne)*Be+(qe=Q-he)*qe}function Qe(Ae,Q,ne,he){var xe={id:Ae===void 0?null:Ae,type:Q,geometry:ne,tags:he,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Fe){var Be=Fe.geometry,qe=Fe.type;if(qe==="Point"||qe==="MultiPoint"||qe==="LineString")en(Fe,Be);else if(qe==="Polygon"||qe==="MultiLineString")for(var Re=0;Re<Be.length;Re++)en(Fe,Be[Re]);else if(qe==="MultiPolygon")for(Re=0;Re<Be.length;Re++)for(var Ke=0;Ke<Be[Re].length;Ke++)en(Fe,Be[Re][Ke])}(xe),xe}function en(Ae,Q){for(var ne=0;ne<Q.length;ne+=3)Ae.minX=Math.min(Ae.minX,Q[ne]),Ae.minY=Math.min(Ae.minY,Q[ne+1]),Ae.maxX=Math.max(Ae.maxX,Q[ne]),Ae.maxY=Math.max(Ae.maxY,Q[ne+1])}function et(Ae,Q,ne,he){if(Q.geometry){var xe=Q.geometry.coordinates,Fe=Q.geometry.type,Be=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2),qe=[],Re=Q.id;if(ne.promoteId?Re=Q.properties[ne.promoteId]:ne.generateId&&(Re=he||0),Fe==="Point")sn(xe,qe);else if(Fe==="MultiPoint")for(var Ke=0;Ke<xe.length;Ke++)sn(xe[Ke],qe);else if(Fe==="LineString")ln(xe,qe,Be,!1);else if(Fe==="MultiLineString"){if(ne.lineMetrics){for(Ke=0;Ke<xe.length;Ke++)ln(xe[Ke],qe=[],Be,!1),Ae.push(Qe(Re,"LineString",qe,Q.properties));return}We(xe,qe,Be,!1)}else if(Fe==="Polygon")We(xe,qe,Be,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(Ke=0;Ke<Q.geometry.geometries.length;Ke++)et(Ae,{id:Re,geometry:Q.geometry.geometries[Ke],properties:Q.properties},ne,he);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ke=0;Ke<xe.length;Ke++){var dt=[];We(xe[Ke],dt,Be,!0),qe.push(dt)}}Ae.push(Qe(Re,Fe,qe,Q.properties))}}function sn(Ae,Q){Q.push(Vn(Ae[0])),Q.push(xr(Ae[1])),Q.push(0)}function ln(Ae,Q,ne,he){for(var xe,Fe,Be=0,qe=0;qe<Ae.length;qe++){var Re=Vn(Ae[qe][0]),Ke=xr(Ae[qe][1]);Q.push(Re),Q.push(Ke),Q.push(0),qe>0&&(Be+=he?(xe*Ke-Re*Fe)/2:Math.sqrt(Math.pow(Re-xe,2)+Math.pow(Ke-Fe,2))),xe=Re,Fe=Ke}var dt=Q.length-3;Q[2]=1,Nt(Q,0,dt,ne),Q[dt+2]=1,Q.size=Math.abs(Be),Q.start=0,Q.end=Q.size}function We(Ae,Q,ne,he){for(var xe=0;xe<Ae.length;xe++){var Fe=[];ln(Ae[xe],Fe,ne,he),Q.push(Fe)}}function Vn(Ae){return Ae/360+.5}function xr(Ae){var Q=Math.sin(Ae*Math.PI/180),ne=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return ne<0?0:ne>1?1:ne}function xn(Ae,Q,ne,he,xe,Fe,Be,qe){if(he/=Q,Fe>=(ne/=Q)&&Be<he)return Ae;if(Be<ne||Fe>=he)return null;for(var Re=[],Ke=0;Ke<Ae.length;Ke++){var dt=Ae[Ke],ct=dt.geometry,ut=dt.type,hn=xe===0?dt.minX:dt.minY,mn=xe===0?dt.maxX:dt.maxY;if(hn>=ne&&mn<he)Re.push(dt);else if(!(mn<ne||hn>=he)){var In=[];if(ut==="Point"||ut==="MultiPoint")Qn(ct,In,ne,he,xe);else if(ut==="LineString")is(ct,In,ne,he,xe,!1,qe.lineMetrics);else if(ut==="MultiLineString")Fs(ct,In,ne,he,xe,!1);else if(ut==="Polygon")Fs(ct,In,ne,he,xe,!0);else if(ut==="MultiPolygon")for(var kn=0;kn<ct.length;kn++){var Fn=[];Fs(ct[kn],Fn,ne,he,xe,!0),Fn.length&&In.push(Fn)}if(In.length){if(qe.lineMetrics&&ut==="LineString"){for(kn=0;kn<In.length;kn++)Re.push(Qe(dt.id,ut,In[kn],dt.tags));continue}ut!=="LineString"&&ut!=="MultiLineString"||(In.length===1?(ut="LineString",In=In[0]):ut="MultiLineString"),ut!=="Point"&&ut!=="MultiPoint"||(ut=In.length===3?"Point":"MultiPoint"),Re.push(Qe(dt.id,ut,In,dt.tags))}}}return Re.length?Re:null}function Qn(Ae,Q,ne,he,xe){for(var Fe=0;Fe<Ae.length;Fe+=3){var Be=Ae[Fe+xe];Be>=ne&&Be<=he&&(Q.push(Ae[Fe]),Q.push(Ae[Fe+1]),Q.push(Ae[Fe+2]))}}function is(Ae,Q,ne,he,xe,Fe,Be){for(var qe,Re,Ke=ps(Ae),dt=xe===0?Bs:ri,ct=Ae.start,ut=0;ut<Ae.length-3;ut+=3){var hn=Ae[ut],mn=Ae[ut+1],In=Ae[ut+2],kn=Ae[ut+3],Fn=Ae[ut+4],Kn=xe===0?hn:mn,nr=xe===0?kn:Fn,Ir=!1;Be&&(qe=Math.sqrt(Math.pow(hn-kn,2)+Math.pow(mn-Fn,2))),Kn<ne?nr>ne&&(Re=dt(Ke,hn,mn,kn,Fn,ne),Be&&(Ke.start=ct+qe*Re)):Kn>he?nr<he&&(Re=dt(Ke,hn,mn,kn,Fn,he),Be&&(Ke.start=ct+qe*Re)):Ws(Ke,hn,mn,In),nr<ne&&Kn>=ne&&(Re=dt(Ke,hn,mn,kn,Fn,ne),Ir=!0),nr>he&&Kn<=he&&(Re=dt(Ke,hn,mn,kn,Fn,he),Ir=!0),!Fe&&Ir&&(Be&&(Ke.end=ct+qe*Re),Q.push(Ke),Ke=ps(Ae)),Be&&(ct+=qe)}var Mn=Ae.length-3;hn=Ae[Mn],mn=Ae[Mn+1],In=Ae[Mn+2],(Kn=xe===0?hn:mn)>=ne&&Kn<=he&&Ws(Ke,hn,mn,In),Mn=Ke.length-3,Fe&&Mn>=3&&(Ke[Mn]!==Ke[0]||Ke[Mn+1]!==Ke[1])&&Ws(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&Q.push(Ke)}function ps(Ae){var Q=[];return Q.size=Ae.size,Q.start=Ae.start,Q.end=Ae.end,Q}function Fs(Ae,Q,ne,he,xe,Fe){for(var Be=0;Be<Ae.length;Be++)is(Ae[Be],Q,ne,he,xe,Fe,!1)}function Ws(Ae,Q,ne,he){Ae.push(Q),Ae.push(ne),Ae.push(he)}function Bs(Ae,Q,ne,he,xe,Fe){var Be=(Fe-Q)/(he-Q);return Ae.push(Fe),Ae.push(ne+(xe-ne)*Be),Ae.push(1),Be}function ri(Ae,Q,ne,he,xe,Fe){var Be=(Fe-ne)/(xe-ne);return Ae.push(Q+(he-Q)*Be),Ae.push(Fe),Ae.push(1),Be}function ft(Ae,Q){for(var ne=[],he=0;he<Ae.length;he++){var xe,Fe=Ae[he],Be=Fe.type;if(Be==="Point"||Be==="MultiPoint"||Be==="LineString")xe=Lt(Fe.geometry,Q);else if(Be==="MultiLineString"||Be==="Polygon"){xe=[];for(var qe=0;qe<Fe.geometry.length;qe++)xe.push(Lt(Fe.geometry[qe],Q))}else if(Be==="MultiPolygon")for(xe=[],qe=0;qe<Fe.geometry.length;qe++){for(var Re=[],Ke=0;Ke<Fe.geometry[qe].length;Ke++)Re.push(Lt(Fe.geometry[qe][Ke],Q));xe.push(Re)}ne.push(Qe(Fe.id,Be,xe,Fe.tags))}return ne}function Lt(Ae,Q){var ne=[];ne.size=Ae.size,Ae.start!==void 0&&(ne.start=Ae.start,ne.end=Ae.end);for(var he=0;he<Ae.length;he+=3)ne.push(Ae[he]+Q,Ae[he+1],Ae[he+2]);return ne}function ms(Ae,Q){if(Ae.transformed)return Ae;var ne,he,xe,Fe=1<<Ae.z,Be=Ae.x,qe=Ae.y;for(ne=0;ne<Ae.features.length;ne++){var Re=Ae.features[ne],Ke=Re.geometry,dt=Re.type;if(Re.geometry=[],dt===1)for(he=0;he<Ke.length;he+=2)Re.geometry.push(Hr(Ke[he],Ke[he+1],Q,Fe,Be,qe));else for(he=0;he<Ke.length;he++){var ct=[];for(xe=0;xe<Ke[he].length;xe+=2)ct.push(Hr(Ke[he][xe],Ke[he][xe+1],Q,Fe,Be,qe));Re.geometry.push(ct)}}return Ae.transformed=!0,Ae}function Hr(Ae,Q,ne,he,xe,Fe){return[Math.round(ne*(Ae*he-xe)),Math.round(ne*(Q*he-Fe))]}function Hi(Ae,Q,ne,he,xe){for(var Fe=Q===xe.maxZoom?0:xe.tolerance/((1<<Q)*xe.extent),Be={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ne,y:he,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},qe=0;qe<Ae.length;qe++){Be.numFeatures++,Zr(Be,Ae[qe],Fe,xe);var Re=Ae[qe].minX,Ke=Ae[qe].minY,dt=Ae[qe].maxX,ct=Ae[qe].maxY;Re<Be.minX&&(Be.minX=Re),Ke<Be.minY&&(Be.minY=Ke),dt>Be.maxX&&(Be.maxX=dt),ct>Be.maxY&&(Be.maxY=ct)}return Be}function Zr(Ae,Q,ne,he){var xe=Q.geometry,Fe=Q.type,Be=[];if(Fe==="Point"||Fe==="MultiPoint")for(var qe=0;qe<xe.length;qe+=3)Be.push(xe[qe]),Be.push(xe[qe+1]),Ae.numPoints++,Ae.numSimplified++;else if(Fe==="LineString")Ut(Be,xe,Ae,ne,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(qe=0;qe<xe.length;qe++)Ut(Be,xe[qe],Ae,ne,Fe==="Polygon",qe===0);else if(Fe==="MultiPolygon")for(var Re=0;Re<xe.length;Re++){var Ke=xe[Re];for(qe=0;qe<Ke.length;qe++)Ut(Be,Ke[qe],Ae,ne,!0,qe===0)}if(Be.length){var dt=Q.tags||null;if(Fe==="LineString"&&he.lineMetrics){for(var ct in dt={},Q.tags)dt[ct]=Q.tags[ct];dt.mapbox_clip_start=xe.start/xe.size,dt.mapbox_clip_end=xe.end/xe.size}var ut={geometry:Be,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:dt};Q.id!==null&&(ut.id=Q.id),Ae.features.push(ut)}}function Ut(Ae,Q,ne,he,xe,Fe){var Be=he*he;if(he>0&&Q.size<(xe?Be:he))ne.numPoints+=Q.length/3;else{for(var qe=[],Re=0;Re<Q.length;Re+=3)(he===0||Q[Re+2]>Be)&&(ne.numSimplified++,qe.push(Q[Re]),qe.push(Q[Re+1])),ne.numPoints++;xe&&function(Ke,dt){for(var ct=0,ut=0,hn=Ke.length,mn=hn-2;ut<hn;mn=ut,ut+=2)ct+=(Ke[ut]-Ke[mn])*(Ke[ut+1]+Ke[mn+1]);if(ct>0===dt)for(ut=0,hn=Ke.length;ut<hn/2;ut+=2){var In=Ke[ut],kn=Ke[ut+1];Ke[ut]=Ke[hn-2-ut],Ke[ut+1]=Ke[hn-1-ut],Ke[hn-2-ut]=In,Ke[hn-1-ut]=kn}}(qe,Fe),Ae.push(qe)}}function Sn(Ae,Q){var ne=(Q=this.options=function(xe,Fe){for(var Be in Fe)xe[Be]=Fe[Be];return xe}(Object.create(this.options),Q)).debug;if(ne&&console.time("preprocess data"),Q.maxZoom<0||Q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Q.promoteId&&Q.generateId)throw new Error("promoteId and generateId cannot be used together.");var he=function(xe,Fe){var Be=[];if(xe.type==="FeatureCollection")for(var qe=0;qe<xe.features.length;qe++)et(Be,xe.features[qe],Fe,qe);else et(Be,xe.type==="Feature"?xe:{geometry:xe},Fe);return Be}(Ae,Q);this.tiles={},this.tileCoords=[],ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Q.indexMaxZoom,Q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),he=function(xe,Fe){var Be=Fe.buffer/Fe.extent,qe=xe,Re=xn(xe,1,-1-Be,Be,0,-1,2,Fe),Ke=xn(xe,1,1-Be,2+Be,0,-1,2,Fe);return(Re||Ke)&&(qe=xn(xe,1,-Be,1+Be,0,-1,2,Fe)||[],Re&&(qe=ft(Re,1).concat(qe)),Ke&&(qe=qe.concat(ft(Ke,-1)))),qe}(he,Q),he.length&&this.splitTile(he,0,0,0),ne&&(he.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Cn(Ae,Q,ne){return 32*((1<<Ae)*ne+Q)+Ae}function gr(Ae,Q){return Q?Ae.properties[Q]:Ae.id}function Ns(Ae,Q){if(Ae==null)return!0;if(Ae.type==="Feature")return gr(Ae,Q)!=null;if(Ae.type==="FeatureCollection"){const ne=new Set;for(const he of Ae.features){const xe=gr(he,Q);if(xe==null||ne.has(xe))return!1;ne.add(xe)}return!0}return!1}function $n(Ae,Q){const ne=new Map;if(Ae!=null)if(Ae.type==="Feature")ne.set(gr(Ae,Q),Ae);else for(const he of Ae.features)ne.set(gr(he,Q),he);return ne}Sn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Sn.prototype.splitTile=function(Ae,Q,ne,he,xe,Fe,Be){for(var qe=[Ae,Q,ne,he],Re=this.options,Ke=Re.debug;qe.length;){he=qe.pop(),ne=qe.pop(),Q=qe.pop(),Ae=qe.pop();var dt=1<<Q,ct=Cn(Q,ne,he),ut=this.tiles[ct];if(!ut&&(Ke>1&&console.time("creation"),ut=this.tiles[ct]=Hi(Ae,Q,ne,he,Re),this.tileCoords.push({z:Q,x:ne,y:he}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Q,ne,he,ut.numFeatures,ut.numPoints,ut.numSimplified),console.timeEnd("creation"));var hn="z"+Q;this.stats[hn]=(this.stats[hn]||0)+1,this.total++}if(ut.source=Ae,xe){if(Q===Re.maxZoom||Q===xe)continue;var mn=1<<xe-Q;if(ne!==Math.floor(Fe/mn)||he!==Math.floor(Be/mn))continue}else if(Q===Re.indexMaxZoom||ut.numPoints<=Re.indexMaxPoints)continue;if(ut.source=null,Ae.length!==0){Ke>1&&console.time("clipping");var In,kn,Fn,Kn,nr,Ir,Mn=.5*Re.buffer/Re.extent,hr=.5-Mn,Rr=.5+Mn,os=1+Mn;In=kn=Fn=Kn=null,nr=xn(Ae,dt,ne-Mn,ne+Rr,0,ut.minX,ut.maxX,Re),Ir=xn(Ae,dt,ne+hr,ne+os,0,ut.minX,ut.maxX,Re),Ae=null,nr&&(In=xn(nr,dt,he-Mn,he+Rr,1,ut.minY,ut.maxY,Re),kn=xn(nr,dt,he+hr,he+os,1,ut.minY,ut.maxY,Re),nr=null),Ir&&(Fn=xn(Ir,dt,he-Mn,he+Rr,1,ut.minY,ut.maxY,Re),Kn=xn(Ir,dt,he+hr,he+os,1,ut.minY,ut.maxY,Re),Ir=null),Ke>1&&console.timeEnd("clipping"),qe.push(In||[],Q+1,2*ne,2*he),qe.push(kn||[],Q+1,2*ne,2*he+1),qe.push(Fn||[],Q+1,2*ne+1,2*he),qe.push(Kn||[],Q+1,2*ne+1,2*he+1)}}},Sn.prototype.getTile=function(Ae,Q,ne){var he=this.options,xe=he.extent,Fe=he.debug;if(Ae<0||Ae>24)return null;var Be=1<<Ae,qe=Cn(Ae,Q=(Q%Be+Be)%Be,ne);if(this.tiles[qe])return ms(this.tiles[qe],xe);Fe>1&&console.log("drilling down to z%d-%d-%d",Ae,Q,ne);for(var Re,Ke=Ae,dt=Q,ct=ne;!Re&&Ke>0;)Ke--,dt=Math.floor(dt/2),ct=Math.floor(ct/2),Re=this.tiles[Cn(Ke,dt,ct)];return Re&&Re.source?(Fe>1&&console.log("found parent tile z%d-%d-%d",Ke,dt,ct),Fe>1&&console.time("drilling down"),this.splitTile(Re.source,Ke,dt,ct,Ae,Q,ne),Fe>1&&console.timeEnd("drilling down"),this.tiles[qe]?ms(this.tiles[qe],xe):null):null};class si extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Q,ne){return a._(this,void 0,void 0,function*(){const he=Q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const xe=this._geoJSONIndex.getTile(he.z,he.x,he.y);if(!xe)return null;const Fe=new class{constructor(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.W,this.length=qe.length,this._features=qe}feature(qe){return new class{constructor(Re){this._feature=Re,this.extent=a.W,this.type=Re.type,this.properties=Re.tags,"id"in Re&&!isNaN(Re.id)&&(this.id=parseInt(Re.id,10))}loadGeometry(){if(this._feature.type===1){const Re=[];for(const Ke of this._feature.geometry)Re.push([new a.P(Ke[0],Ke[1])]);return Re}{const Re=[];for(const Ke of this._feature.geometry){const dt=[];for(const ct of Ke)dt.push(new a.P(ct[0],ct[1]));Re.push(dt)}return Re}}toGeoJSON(Re,Ke,dt){return F.call(this,Re,Ke,dt)}}(this._features[qe])}}(xe.features);let Be=nt(Fe);return Be.byteOffset===0&&Be.byteLength===Be.buffer.byteLength||(Be=new Uint8Array(Be)),{vectorTile:Fe,rawData:Be.buffer}})}loadData(Q){return a._(this,void 0,void 0,function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort();const he=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new a.bs(Q.request);this._pendingRequest=new AbortController;try{let xe=yield this.loadGeoJSON(Q,this._pendingRequest);if(delete this._pendingRequest,typeof xe!="object")throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);if(z(xe,!0),Q.filter){const Be=a.by(Q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Be.result==="error")throw new Error(Be.value.map(Re=>`${Re.key}: ${Re.message}`).join(", "));xe={type:"FeatureCollection",features:xe.features.filter(Re=>Be.value.evaluate({zoom:0},Re))}}this._geoJSONIndex=Q.cluster?new yn(function({superclusterOptions:Be,clusterProperties:qe}){if(!qe||!Be)return Be;const Re={},Ke={},dt={accumulated:null,zoom:0},ct={properties:null},ut=Object.keys(qe);for(const hn of ut){const[mn,In]=qe[hn],kn=a.by(In),Fn=a.by(typeof mn=="string"?[mn,["accumulated"],["get",hn]]:mn);Re[hn]=kn.value,Ke[hn]=Fn.value}return Be.map=hn=>{ct.properties=hn;const mn={};for(const In of ut)mn[In]=Re[In].evaluate(dt,ct);return mn},Be.reduce=(hn,mn)=>{ct.properties=mn;for(const In of ut)dt.accumulated=hn[In],hn[In]=Ke[In].evaluate(dt,ct)},Be}(Q)).load(xe.features):function(Be,qe){return new Sn(Be,qe)}(xe,Q.geojsonVtOptions),this.loaded={};const Fe={};if(he){const Be=he.finish();Be&&(Fe.resourceTiming={},Fe.resourceTiming[Q.source]=JSON.parse(JSON.stringify(Be)))}return Fe}catch(xe){if(delete this._pendingRequest,a.bz(xe))return{abandoned:!0};throw xe}})}reloadTile(Q){const ne=this.loaded;return ne&&ne[Q.uid]?super.reloadTile(Q):this.loadTile(Q)}loadGeoJSON(Q,ne){return a._(this,void 0,void 0,function*(){const{promoteId:he}=Q;if(Q.request){const xe=yield a.h(Q.request,ne);return this._dataUpdateable=Ns(xe.data,he)?$n(xe.data,he):void 0,xe.data}if(typeof Q.data=="string")try{const xe=JSON.parse(Q.data);return this._dataUpdateable=Ns(xe,he)?$n(xe,he):void 0,xe}catch{throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`)}if(!Q.dataDiff)throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Q.source}`);return function(xe,Fe,Be){var qe,Re,Ke,dt;if(Fe.removeAll&&xe.clear(),Fe.remove)for(const ct of Fe.remove)xe.delete(ct);if(Fe.add)for(const ct of Fe.add){const ut=gr(ct,Be);ut!=null&&xe.set(ut,ct)}if(Fe.update)for(const ct of Fe.update){let ut=xe.get(ct.id);if(ut==null)continue;const hn=!ct.removeAllProperties&&(((qe=ct.removeProperties)===null||qe===void 0?void 0:qe.length)>0||((Re=ct.addOrUpdateProperties)===null||Re===void 0?void 0:Re.length)>0);if((ct.newGeometry||ct.removeAllProperties||hn)&&(ut=Object.assign({},ut),xe.set(ct.id,ut),hn&&(ut.properties=Object.assign({},ut.properties))),ct.newGeometry&&(ut.geometry=ct.newGeometry),ct.removeAllProperties)ut.properties={};else if(((Ke=ct.removeProperties)===null||Ke===void 0?void 0:Ke.length)>0)for(const mn of ct.removeProperties)Object.prototype.hasOwnProperty.call(ut.properties,mn)&&delete ut.properties[mn];if(((dt=ct.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:mn,value:In}of ct.addOrUpdateProperties)ut.properties[mn]=In}}(this._dataUpdateable,Q.dataDiff,he),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(Q){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Q){return this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId)}getClusterChildren(Q){return this._geoJSONIndex.getChildren(Q.clusterId)}getClusterLeaves(Q){return this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset)}}class Lr{constructor(Q){this.self=Q,this.actor=new a.C(Q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ne,he)=>{if(this.externalWorkerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.externalWorkerSourceTypes[ne]=he},this.self.addProtocol=a.bf,this.self.removeProtocol=a.bg,this.self.registerRTLTextPlugin=ne=>{if(a.bA.isParsed())throw new Error("RTL text plugin already registered.");a.bA.setMethods(ne)},this.actor.registerMessageHandler("LDT",(ne,he)=>this._getDEMWorkerSource(ne,he.source).loadTile(he)),this.actor.registerMessageHandler("RDT",(ne,he)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ne,he.source).removeTile(he)})),this.actor.registerMessageHandler("GCEZ",(ne,he)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ne,he.type,he.source).getClusterExpansionZoom(he)})),this.actor.registerMessageHandler("GCC",(ne,he)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ne,he.type,he.source).getClusterChildren(he)})),this.actor.registerMessageHandler("GCL",(ne,he)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ne,he.type,he.source).getClusterLeaves(he)})),this.actor.registerMessageHandler("LD",(ne,he)=>this._getWorkerSource(ne,he.type,he.source).loadData(he)),this.actor.registerMessageHandler("LT",(ne,he)=>this._getWorkerSource(ne,he.type,he.source).loadTile(he)),this.actor.registerMessageHandler("RT",(ne,he)=>this._getWorkerSource(ne,he.type,he.source).reloadTile(he)),this.actor.registerMessageHandler("AT",(ne,he)=>this._getWorkerSource(ne,he.type,he.source).abortTile(he)),this.actor.registerMessageHandler("RMT",(ne,he)=>this._getWorkerSource(ne,he.type,he.source).removeTile(he)),this.actor.registerMessageHandler("RS",(ne,he)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[ne]||!this.workerSources[ne][he.type]||!this.workerSources[ne][he.type][he.source])return;const xe=this.workerSources[ne][he.type][he.source];delete this.workerSources[ne][he.type][he.source],xe.removeSource!==void 0&&xe.removeSource(he)})),this.actor.registerMessageHandler("RM",ne=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[ne],delete this.availableImages[ne],delete this.workerSources[ne],delete this.demWorkerSources[ne]})),this.actor.registerMessageHandler("SR",(ne,he)=>a._(this,void 0,void 0,function*(){this.referrer=he})),this.actor.registerMessageHandler("SRPS",(ne,he)=>this._syncRTLPluginState(ne,he)),this.actor.registerMessageHandler("IS",(ne,he)=>a._(this,void 0,void 0,function*(){this.self.importScripts(he)})),this.actor.registerMessageHandler("SI",(ne,he)=>this._setImages(ne,he)),this.actor.registerMessageHandler("UL",(ne,he)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ne).update(he.layers,he.removedIds)})),this.actor.registerMessageHandler("SL",(ne,he)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ne).replace(he)}))}_setImages(Q,ne){return a._(this,void 0,void 0,function*(){this.availableImages[Q]=ne;for(const he in this.workerSources[Q]){const xe=this.workerSources[Q][he];for(const Fe in xe)xe[Fe].availableImages=ne}})}_syncRTLPluginState(Q,ne){return a._(this,void 0,void 0,function*(){if(a.bA.isParsed())return a.bA.getState();if(ne.pluginStatus!=="loading")return a.bA.setState(ne),ne;const he=ne.pluginURL;if(this.self.importScripts(he),a.bA.isParsed()){const xe={pluginStatus:"loaded",pluginURL:he};return a.bA.setState(xe),xe}throw a.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${he}`)})}_getAvailableImages(Q){let ne=this.availableImages[Q];return ne||(ne=[]),ne}_getLayerIndex(Q){let ne=this.layerIndexes[Q];return ne||(ne=this.layerIndexes[Q]=new o),ne}_getWorkerSource(Q,ne,he){if(this.workerSources[Q]||(this.workerSources[Q]={}),this.workerSources[Q][ne]||(this.workerSources[Q][ne]={}),!this.workerSources[Q][ne][he]){const xe={sendAsync:(Fe,Be)=>(Fe.targetMapId=Q,this.actor.sendAsync(Fe,Be))};switch(ne){case"vector":this.workerSources[Q][ne][he]=new b(xe,this._getLayerIndex(Q),this._getAvailableImages(Q));break;case"geojson":this.workerSources[Q][ne][he]=new si(xe,this._getLayerIndex(Q),this._getAvailableImages(Q));break;default:this.workerSources[Q][ne][he]=new this.externalWorkerSourceTypes[ne](xe,this._getLayerIndex(Q),this._getAvailableImages(Q))}}return this.workerSources[Q][ne][he]}_getDEMWorkerSource(Q,ne){return this.demWorkerSources[Q]||(this.demWorkerSources[Q]={}),this.demWorkerSources[Q][ne]||(this.demWorkerSources[Q][ne]=new $),this.demWorkerSources[Q][ne]}}return a.i(self)&&(self.worker=new Lr(self)),Lr}),r("index",["exports","./shared"],function(a,o){var u="4.1.3";let p,_;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:w=>new Promise((c,d)=>{const g=requestAnimationFrame(c);w.signal.addEventListener("abort",()=>{cancelAnimationFrame(g),d(o.c())})}),getImageData(w,c=0){return this.getImageCanvasContext(w).getImageData(-c,-c,w.width+2*c,w.height+2*c)},getImageCanvasContext(w){const c=window.document.createElement("canvas"),d=c.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return c.width=w.width,c.height=w.height,d.drawImage(w,0,0,w.width,w.height),d},resolveURL:w=>(p||(p=document.createElement("a")),p.href=w,p.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(_==null&&(_=matchMedia("(prefers-reduced-motion: reduce)")),_.matches)}};class ${static testProp(c){if(!$.docStyle)return c[0];for(let d=0;d<c.length;d++)if(c[d]in $.docStyle)return c[d];return c[0]}static create(c,d,g){const v=window.document.createElement(c);return d!==void 0&&(v.className=d),g&&g.appendChild(v),v}static createNS(c,d){return window.document.createElementNS(c,d)}static disableDrag(){$.docStyle&&$.selectProp&&($.userSelect=$.docStyle[$.selectProp],$.docStyle[$.selectProp]="none")}static enableDrag(){$.docStyle&&$.selectProp&&($.docStyle[$.selectProp]=$.userSelect)}static setTransform(c,d){c.style[$.transformProp]=d}static addEventListener(c,d,g,v={}){c.addEventListener(d,g,"passive"in v?v:v.capture)}static removeEventListener(c,d,g,v={}){c.removeEventListener(d,g,"passive"in v?v:v.capture)}static suppressClickInternal(c){c.preventDefault(),c.stopPropagation(),window.removeEventListener("click",$.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",$.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",$.suppressClickInternal,!0)},0)}static getScale(c){const d=c.getBoundingClientRect();return{x:d.width/c.offsetWidth||1,y:d.height/c.offsetHeight||1,boundingClientRect:d}}static getPoint(c,d,g){const v=d.boundingClientRect;return new o.P((g.clientX-v.left)/d.x-c.clientLeft,(g.clientY-v.top)/d.y-c.clientTop)}static mousePos(c,d){const g=$.getScale(c);return $.getPoint(c,g,d)}static touchPos(c,d){const g=[],v=$.getScale(c);for(let x=0;x<d.length;x++)g.push($.getPoint(c,v,d[x]));return g}static mouseButton(c){return c.button}static remove(c){c.parentNode&&c.parentNode.removeChild(c)}}$.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,$.selectProp=$.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),$.transformProp=$.testProp(["transform","WebkitTransform"]);const P={supported:!1,testSupport:function(w){!F&&z&&(U?j(w):L=w)}};let L,z,F=!1,U=!1;function j(w){const c=w.createTexture();w.bindTexture(w.TEXTURE_2D,c);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,z),w.isContextLost())return;P.supported=!0}catch{}w.deleteTexture(c),F=!0}var J;typeof document<"u"&&(z=document.createElement("img"),z.onload=function(){L&&j(L),L=null,U=!0},z.onerror=function(){F=!0,L=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let c,d,g,v;w.resetRequestQueue=()=>{c=[],d=0,g=0,v={}},w.addThrottleControl=R=>{const N=g++;return v[N]=R,N},w.removeThrottleControl=R=>{delete v[R],A()},w.getImage=(R,N,K=!0)=>new Promise((X,oe)=>{P.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),o.e(R,{type:"image"}),c.push({abortController:N,requestParameters:R,supportImageRefresh:K,state:"queued",onError:Te=>{oe(Te)},onSuccess:Te=>{X(Te)}}),A()});const x=R=>o._(this,void 0,void 0,function*(){R.state="running";const{requestParameters:N,supportImageRefresh:K,onError:X,onSuccess:oe,abortController:Te}=R,Se=K===!1&&!o.i(self)&&!o.g(N.url)&&(!N.headers||Object.keys(N.headers).reduce((Oe,Xe)=>Oe&&Xe==="accept",!0));d++;const Me=Se?M(N,Te):o.m(N,Te);try{const Oe=yield Me;delete R.abortController,R.state="completed",Oe.data instanceof HTMLImageElement||o.b(Oe.data)?oe(Oe):Oe.data&&oe({data:yield(ye=Oe.data,typeof createImageBitmap=="function"?o.d(ye):o.f(ye)),cacheControl:Oe.cacheControl,expires:Oe.expires})}catch(Oe){delete R.abortController,X(Oe)}finally{d--,A()}var ye}),A=()=>{const R=(()=>{for(const N of Object.keys(v))if(v[N]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let N=d;N<R&&c.length>0;N++){const K=c.shift();K.abortController.signal.aborted?N--:x(K)}},M=(R,N)=>new Promise((K,X)=>{const oe=new Image,Te=R.url,Se=R.credentials;Se&&Se==="include"?oe.crossOrigin="use-credentials":(Se&&Se==="same-origin"||!o.s(Te))&&(oe.crossOrigin="anonymous"),N.signal.addEventListener("abort",()=>{oe.src="",X(o.c())}),oe.fetchPriority="high",oe.onload=()=>{oe.onerror=oe.onload=null,K({data:oe})},oe.onerror=()=>{oe.onerror=oe.onload=null,N.signal.aborted||X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},oe.src=Te})}(J||(J={})),J.resetRequestQueue();class pe{constructor(c){this._transformRequestFn=c}transformRequest(c,d){return this._transformRequestFn&&this._transformRequestFn(c,d)||{url:c}}normalizeSpriteURL(c,d,g){const v=function(x){const A=x.match(re);if(!A)throw new Error(`Unable to parse URL "${x}"`);return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("&"):[]}}(c);return v.path+=`${d}${g}`,function(x){const A=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${A}`}(v)}setTransformRequest(c){this._transformRequestFn=c}}const re=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function te(w){var c=new o.A(3);return c[0]=w[0],c[1]=w[1],c[2]=w[2],c}var de,me=function(w,c,d){return w[0]=c[0]-d[0],w[1]=c[1]-d[1],w[2]=c[2]-d[2],w};de=new o.A(3),o.A!=Float32Array&&(de[0]=0,de[1]=0,de[2]=0);var Y=function(w){var c=w[0],d=w[1];return c*c+d*d};function we(w){const c=[];if(typeof w=="string")c.push({id:"default",url:w});else if(w&&w.length>0){const d=[];for(const{id:g,url:v}of w){const x=`${g}${v}`;d.indexOf(x)===-1&&(d.push(x),c.push({id:g,url:v}))}}return c}(function(){var w=new o.A(2);o.A!=Float32Array&&(w[0]=0,w[1]=0)})();class Ce{constructor(c,d,g,v){this.context=c,this.format=g,this.texture=c.gl.createTexture(),this.update(d,v)}update(c,d,g){const{width:v,height:x}=c,A=!(this.size&&this.size[0]===v&&this.size[1]===x||g),{context:M}=this,{gl:R}=M;if(this.useMipmap=!!(d&&d.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!d||d.premultiply!==!1)),A)this.size=[v,x],c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||o.b(c)?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,c):R.texImage2D(R.TEXTURE_2D,0,this.format,v,x,0,this.format,R.UNSIGNED_BYTE,c.data);else{const{x:N,y:K}=g||{x:0,y:0};c instanceof HTMLImageElement||c instanceof HTMLCanvasElement||c instanceof HTMLVideoElement||c instanceof ImageData||o.b(c)?R.texSubImage2D(R.TEXTURE_2D,0,N,K,R.RGBA,R.UNSIGNED_BYTE,c):R.texSubImage2D(R.TEXTURE_2D,0,N,K,v,x,R.RGBA,R.UNSIGNED_BYTE,c.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)}bind(c,d,g){const{context:v}=this,{gl:x}=v;x.bindTexture(x.TEXTURE_2D,this.texture),g!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=x.LINEAR),c!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,g||c),this.filter=c),d!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,d),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:c}=this.context;c.deleteTexture(this.texture),this.texture=null}}function _e(w){const{userImage:c}=w;return!!(c&&c.render&&c.render())&&(w.data.replace(new Uint8Array(c.data.buffer)),!0)}class fe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:d,promiseResolve:g}of this.requestors)g(this._getImagesForIds(d));this.requestors=[]}}getImage(c){const d=this.images[c];if(d&&!d.data&&d.spriteData){const g=d.spriteData;d.data=new o.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),d.spriteData=null}return d}addImage(c,d){if(this.images[c])throw new Error(`Image id ${c} already exist, use updateImage instead`);this._validate(c,d)&&(this.images[c]=d)}_validate(c,d){let g=!0;const v=d.data||d.spriteData;return this._validateStretch(d.stretchX,v&&v.width)||(this.fire(new o.j(new Error(`Image "${c}" has invalid "stretchX" value`))),g=!1),this._validateStretch(d.stretchY,v&&v.height)||(this.fire(new o.j(new Error(`Image "${c}" has invalid "stretchY" value`))),g=!1),this._validateContent(d.content,d)||(this.fire(new o.j(new Error(`Image "${c}" has invalid "content" value`))),g=!1),g}_validateStretch(c,d){if(!c)return!0;let g=0;for(const v of c){if(v[0]<g||v[1]<v[0]||d<v[1])return!1;g=v[1]}return!0}_validateContent(c,d){if(!c)return!0;if(c.length!==4)return!1;const g=d.spriteData,v=g&&g.width||d.data.width,x=g&&g.height||d.data.height;return!(c[0]<0||v<c[0]||c[1]<0||x<c[1]||c[2]<0||v<c[2]||c[3]<0||x<c[3]||c[2]<c[0]||c[3]<c[1])}updateImage(c,d,g=!0){const v=this.getImage(c);if(g&&(v.data.width!==d.data.width||v.data.height!==d.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=v.version+1,this.images[c]=d,this.updatedImages[c]=!0}removeImage(c){const d=this.images[c];delete this.images[c],delete this.patterns[c],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c){return new Promise((d,g)=>{let v=!0;if(!this.isLoaded())for(const x of c)this.images[x]||(v=!1);this.isLoaded()||v?d(this._getImagesForIds(c)):this.requestors.push({ids:c,promiseResolve:d})})}_getImagesForIds(c){const d={};for(const g of c){let v=this.getImage(g);v||(this.fire(new o.k("styleimagemissing",{id:g})),v=this.getImage(g)),v?d[g]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:c,height:d}=this.atlasImage;return{width:c,height:d}}getPattern(c){const d=this.patterns[c],g=this.getImage(c);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{const v={w:g.data.width+2,h:g.data.height+2,x:0,y:0},x=new o.I(v,g);this.patterns[c]={bin:v,position:x}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const d=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ce(c,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const x in this.patterns)c.push(this.patterns[x].bin);const{w:d,h:g}=o.p(c),v=this.atlasImage;v.resize({width:d||1,height:g||1});for(const x in this.patterns){const{bin:A}=this.patterns[x],M=A.x+1,R=A.y+1,N=this.getImage(x).data,K=N.width,X=N.height;o.R.copy(N,v,{x:0,y:0},{x:M,y:R},{width:K,height:X}),o.R.copy(N,v,{x:0,y:X-1},{x:M,y:R-1},{width:K,height:1}),o.R.copy(N,v,{x:0,y:0},{x:M,y:R+X},{width:K,height:1}),o.R.copy(N,v,{x:K-1,y:0},{x:M-1,y:R},{width:1,height:X}),o.R.copy(N,v,{x:0,y:0},{x:M+K,y:R},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const d of c){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const g=this.getImage(d);g||o.w(`Image with ID: "${d}" was not found`),_e(g)&&this.updateImage(d,g)}}}const Ee=1e20;function je(w,c,d,g,v,x,A,M,R){for(let N=c;N<c+g;N++)ke(w,d*x+N,x,v,A,M,R);for(let N=d;N<d+v;N++)ke(w,N*x+c,1,g,A,M,R)}function ke(w,c,d,g,v,x,A){x[0]=0,A[0]=-Ee,A[1]=Ee,v[0]=w[c];for(let M=1,R=0,N=0;M<g;M++){v[M]=w[c+M*d];const K=M*M;do{const X=x[R];N=(v[M]-v[X]+K-X*X)/(M-X)/2}while(N<=A[R]&&--R>-1);R++,x[R]=M,A[R]=N,A[R+1]=Ee}for(let M=0,R=0;M<g;M++){for(;A[R+1]<M;)R++;const N=x[R],K=M-N;w[c+M*d]=v[N]+K*K}}class nt{constructor(c,d){this.requestManager=c,this.localIdeographFontFamily=d,this.entries={}}setURL(c){this.url=c}getGlyphs(c){return o._(this,void 0,void 0,function*(){const d=[];for(const x in c)for(const A of c[x])d.push(this._getAndCacheGlyphsPromise(x,A));const g=yield Promise.all(d),v={};for(const{stack:x,id:A,glyph:M}of g)v[x]||(v[x]={}),v[x][A]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return v})}_getAndCacheGlyphsPromise(c,d){return o._(this,void 0,void 0,function*(){let g=this.entries[c];g||(g=this.entries[c]={glyphs:{},requests:{},ranges:{}});let v=g.glyphs[d];if(v!==void 0)return{stack:c,id:d,glyph:v};if(v=this._tinySDF(g,c,d),v)return g.glyphs[d]=v,{stack:c,id:d,glyph:v};const x=Math.floor(d/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[x])return{stack:c,id:d,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[x]){const M=nt.loadGlyphRange(c,x,this.url,this.requestManager);g.requests[x]=M}const A=yield g.requests[x];for(const M in A)this._doesCharSupportLocalGlyph(+M)||(g.glyphs[+M]=A[+M]);return g.ranges[x]=!0,{stack:c,id:d,glyph:A[d]||null}})}_doesCharSupportLocalGlyph(c){return!!this.localIdeographFontFamily&&(o.u["CJK Unified Ideographs"](c)||o.u["Hangul Syllables"](c)||o.u.Hiragana(c)||o.u.Katakana(c))}_tinySDF(c,d,g){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(g))return;let x=c.tinySDF;if(!x){let M="400";/bold/i.test(d)?M="900":/medium/i.test(d)?M="500":/light/i.test(d)&&(M="200"),x=c.tinySDF=new nt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:M})}const A=x.draw(String.fromCharCode(g));return{id:g,bitmap:new o.o({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}nt.loadGlyphRange=function(w,c,d,g){return o._(this,void 0,void 0,function*(){const v=256*c,x=v+255,A=g.transformRequest(d.replace("{fontstack}",w).replace("{range}",`${v}-${x}`),"Glyphs"),M=yield o.l(A,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${c}, ${v}-${x}`);const R={};for(const N of o.n(M.data))R[N.id]=N;return R})},nt.TinySDF=class{constructor({fontSize:w=24,buffer:c=3,radius:d=8,cutoff:g=.25,fontFamily:v="sans-serif",fontWeight:x="normal",fontStyle:A="normal"}={}){this.buffer=c,this.cutoff=g,this.radius=d;const M=this.size=w+4*c,R=this._createCanvas(M),N=this.ctx=R.getContext("2d",{willReadFrequently:!0});N.font=`${A} ${x} ${w}px ${v}`,N.textBaseline="alphabetic",N.textAlign="left",N.fillStyle="black",this.gridOuter=new Float64Array(M*M),this.gridInner=new Float64Array(M*M),this.f=new Float64Array(M),this.z=new Float64Array(M+1),this.v=new Uint16Array(M)}_createCanvas(w){const c=document.createElement("canvas");return c.width=c.height=w,c}draw(w){const{width:c,actualBoundingBoxAscent:d,actualBoundingBoxDescent:g,actualBoundingBoxLeft:v,actualBoundingBoxRight:x}=this.ctx.measureText(w),A=Math.ceil(d),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-v))),R=Math.min(this.size-this.buffer,A+Math.ceil(g)),N=M+2*this.buffer,K=R+2*this.buffer,X=Math.max(N*K,0),oe=new Uint8ClampedArray(X),Te={data:oe,width:N,height:K,glyphWidth:M,glyphHeight:R,glyphTop:A,glyphLeft:0,glyphAdvance:c};if(M===0||R===0)return Te;const{ctx:Se,buffer:Me,gridInner:ye,gridOuter:Oe}=this;Se.clearRect(Me,Me,M,R),Se.fillText(w,Me,Me+A);const Xe=Se.getImageData(Me,Me,M,R);Oe.fill(Ee,0,X),ye.fill(0,0,X);for(let De=0;De<R;De++)for(let Ve=0;Ve<M;Ve++){const Je=Xe.data[4*(De*M+Ve)+3]/255;if(Je===0)continue;const tt=(De+Me)*N+Ve+Me;if(Je===1)Oe[tt]=0,ye[tt]=Ee;else{const rt=.5-Je;Oe[tt]=rt>0?rt*rt:0,ye[tt]=rt<0?rt*rt:0}}je(Oe,0,0,N,K,N,this.f,this.v,this.z),je(ye,Me,Me,M,R,N,this.f,this.v,this.z);for(let De=0;De<X;De++){const Ve=Math.sqrt(Oe[De])-Math.sqrt(ye[De]);oe[De]=Math.round(255-255*(Ve/this.radius+this.cutoff))}return Te}};class bt{constructor(){this.specification=o.v.light.position}possiblyEvaluate(c,d){return o.y(c.expression.evaluate(d))}interpolate(c,d,g){return{x:o.z.number(c.x,d.x,g),y:o.z.number(c.y,d.y,g),z:o.z.number(c.z,d.z,g)}}}let zt;class At extends o.E{constructor(c){super(),zt=zt||new o.q({anchor:new o.D(o.v.light.anchor),position:new bt,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(zt),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,d={}){if(!this._validate(o.r,c,d))for(const g in c){const v=c[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),v):this._transitionable.setValue(g,v)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,d,g){return(!g||g.validate!==!1)&&o.t(this,c.call(o.x,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}class Et{constructor(c,d){this.width=c,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(c,d){const g=c.join(",")+String(d);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(c,d)),this.dashEntry[g]}getDashRanges(c,d,g){const v=[];let x=c.length%2==1?-c[c.length-1]*g:0,A=c[0]*g,M=!0;v.push({left:x,right:A,isDash:M,zeroLength:c[0]===0});let R=c[0];for(let N=1;N<c.length;N++){M=!M;const K=c[N];x=R*g,R+=K,A=R*g,v.push({left:x,right:A,isDash:M,zeroLength:K===0})}return v}addRoundDash(c,d,g){const v=d/2;for(let x=-g;x<=g;x++){const A=this.width*(this.nextRow+g+x);let M=0,R=c[M];for(let N=0;N<this.width;N++){N/R.right>1&&(R=c[++M]);const K=Math.abs(N-R.left),X=Math.abs(N-R.right),oe=Math.min(K,X);let Te;const Se=x/g*(v+1);if(R.isDash){const Me=v-Math.abs(Se);Te=Math.sqrt(oe*oe+Me*Me)}else Te=v-Math.sqrt(oe*oe+Se*Se);this.data[A+N]=Math.max(0,Math.min(255,Te+128))}}}addRegularDash(c){for(let M=c.length-1;M>=0;--M){const R=c[M],N=c[M+1];R.zeroLength?c.splice(M,1):N&&N.isDash===R.isDash&&(N.left=R.left,c.splice(M,1))}const d=c[0],g=c[c.length-1];d.isDash===g.isDash&&(d.left=g.left-this.width,g.right=d.right+this.width);const v=this.width*this.nextRow;let x=0,A=c[x];for(let M=0;M<this.width;M++){M/A.right>1&&(A=c[++x]);const R=Math.abs(M-A.left),N=Math.abs(M-A.right),K=Math.min(R,N);this.data[v+M]=Math.max(0,Math.min(255,(A.isDash?K:-K)+128))}}addDash(c,d){const g=d?7:0,v=2*g+1;if(this.nextRow+v>this.height)return o.w("LineAtlas out of space"),null;let x=0;for(let M=0;M<c.length;M++)x+=c[M];if(x!==0){const M=this.width/x,R=this.getDashRanges(c,this.width,M);d?this.addRoundDash(R,M,g):this.addRegularDash(R)}const A={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:x};return this.nextRow+=v,this.dirty=!0,A}bind(c){const d=c.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const It="maplibre_preloaded_worker_pool";class nn{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<nn.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[It]}numActive(){return Object.keys(this.active).length}}const yn=Math.floor(b.hardwareConcurrency/2);let un,Kt;function Tt(){return un||(un=new nn),un}nn.workerCount=o.B(globalThis)?Math.max(Math.min(yn,3),1):1;class Vt{constructor(c,d){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=d;const g=this.workerPool.acquire(d);for(let v=0;v<g.length;v++){const x=new o.C(g[v],d);x.name=`Worker ${v}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(c,d){const g=[];for(const v of this.actors)g.push(v.sendAsync({type:c,data:d}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(c=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],c&&this.workerPool.release(this.id)}registerMessageHandler(c,d){for(const g of this.actors)g.registerMessageHandler(c,d)}}function Ye(){return Kt||(Kt=new Vt(Tt(),o.G),Kt.registerMessageHandler("GR",(w,c,d)=>o.m(c,d))),Kt}function Nt(w,c){const d=o.F();return o.H(d,d,[1,1,0]),o.J(d,d,[.5*w.width,.5*w.height,1]),o.K(d,d,w.calculatePosMatrix(c.toUnwrapped()))}function Mt(w,c,d,g,v,x){const A=function(X,oe,Te){if(X)for(const Se of X){const Me=oe[Se];if(Me&&Me.source===Te&&Me.type==="fill-extrusion")return!0}else for(const Se in oe){const Me=oe[Se];if(Me.source===Te&&Me.type==="fill-extrusion")return!0}return!1}(v&&v.layers,c,w.id),M=x.maxPitchScaleFactor(),R=w.tilesIn(g,M,A);R.sort(Qe);const N=[];for(const X of R)N.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(c,d,w._state,X.queryGeometry,X.cameraQueryGeometry,X.scale,v,x,M,Nt(w.transform,X.tileID))});const K=function(X){const oe={},Te={};for(const Se of X){const Me=Se.queryResults,ye=Se.wrappedTileID,Oe=Te[ye]=Te[ye]||{};for(const Xe in Me){const De=Me[Xe],Ve=Oe[Xe]=Oe[Xe]||{},Je=oe[Xe]=oe[Xe]||[];for(const tt of De)Ve[tt.featureIndex]||(Ve[tt.featureIndex]=!0,Je.push(tt))}}return oe}(N);for(const X in K)K[X].forEach(oe=>{const Te=oe.feature,Se=w.getFeatureState(Te.layer["source-layer"],Te.id);Te.source=Te.layer.source,Te.layer["source-layer"]&&(Te.sourceLayer=Te.layer["source-layer"]),Te.state=Se});return K}function Qe(w,c){const d=w.tileID,g=c.tileID;return d.overscaledZ-g.overscaledZ||d.canonical.y-g.canonical.y||d.wrap-g.wrap||d.canonical.x-g.canonical.x}function en(w,c,d){return o._(this,void 0,void 0,function*(){let g=w;if(w.url?g=(yield o.h(c.transformRequest(w.url,"Source"),d)).data:yield b.frameAsync(d),!g)return null;const v=o.L(o.e(g,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(v.vectorLayerIds=g.vector_layers.map(x=>x.id)),v})}class et{constructor(c,d){c&&(d?this.setSouthWest(c).setNorthEast(d):Array.isArray(c)&&(c.length===4?this.setSouthWest([c[0],c[1]]).setNorthEast([c[2],c[3]]):this.setSouthWest(c[0]).setNorthEast(c[1])))}setNorthEast(c){return this._ne=c instanceof o.M?new o.M(c.lng,c.lat):o.M.convert(c),this}setSouthWest(c){return this._sw=c instanceof o.M?new o.M(c.lng,c.lat):o.M.convert(c),this}extend(c){const d=this._sw,g=this._ne;let v,x;if(c instanceof o.M)v=c,x=c;else{if(!(c instanceof et))return Array.isArray(c)?c.length===4||c.every(Array.isArray)?this.extend(et.convert(c)):this.extend(o.M.convert(c)):c&&("lng"in c||"lon"in c)&&"lat"in c?this.extend(o.M.convert(c)):this;if(v=c._sw,x=c._ne,!v||!x)return this}return d||g?(d.lng=Math.min(v.lng,d.lng),d.lat=Math.min(v.lat,d.lat),g.lng=Math.max(x.lng,g.lng),g.lat=Math.max(x.lat,g.lat)):(this._sw=new o.M(v.lng,v.lat),this._ne=new o.M(x.lng,x.lat)),this}getCenter(){return new o.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.M(this.getWest(),this.getNorth())}getSouthEast(){return new o.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(c){const{lng:d,lat:g}=o.M.convert(c);let v=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&v}static convert(c){return c instanceof et?c:c&&new et(c)}static fromLngLat(c,d=0){const g=360*d/40075017,v=g/Math.cos(Math.PI/180*c.lat);return new et(new o.M(c.lng-v,c.lat-g),new o.M(c.lng+v,c.lat+g))}}class sn{constructor(c,d,g){this.bounds=et.convert(this.validateBounds(c)),this.minzoom=d||0,this.maxzoom=g||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const d=Math.pow(2,c.z),g=Math.floor(o.N(this.bounds.getWest())*d),v=Math.floor(o.O(this.bounds.getNorth())*d),x=Math.ceil(o.N(this.bounds.getEast())*d),A=Math.ceil(o.O(this.bounds.getSouth())*d);return c.x>=g&&c.x<x&&c.y>=v&&c.y<A}}class ln extends o.E{constructor(c,d,g,v){if(super(),this.id=c,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.L(d,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield en(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),c&&(o.e(this,c),c.bounds&&(this.tileBounds=new sn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(c){this._tileJSONRequest=null,this.fire(new o.j(c))}})}loaded(){return this._loaded}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}onAdd(c){this.map=c,this.load()}setSourceProperty(c){this._tileJSONRequest&&this._tileJSONRequest.abort(),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}setUrl(c){return this.setSourceProperty(()=>{this.url=c,this._options.url=c}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(c){return o._(this,void 0,void 0,function*(){const d=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(d,"Tile"),uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,tileSize:this.tileSize*c.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(c.actor&&c.state!=="expired"){if(c.state==="loading")return new Promise((x,A)=>{c.reloadPromise={resolve:x,reject:A}})}else c.actor=this.dispatcher.getActor(),v="LT";c.abortController=new AbortController;try{const x=yield c.actor.sendAsync({type:v,data:g},c.abortController);if(delete c.abortController,c.aborted)return;this._afterTileLoadWorkerResponse(c,x)}catch(x){if(delete c.abortController,c.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(c,null)}})}_afterTileLoadWorkerResponse(c,d){if(d&&d.resourceTiming&&(c.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&c.setExpiryData(d),c.loadVectorData(d,this.map.painter),c.reloadPromise){const g=c.reloadPromise;c.reloadPromise=null,this.loadTile(c).then(g.resolve).catch(g.reject)}}abortTile(c){return o._(this,void 0,void 0,function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.actor&&(yield c.actor.sendAsync({type:"AT",data:{uid:c.uid,type:this.type,source:this.id}}))})}unloadTile(c){return o._(this,void 0,void 0,function*(){c.unloadVectorData(),c.actor&&(yield c.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class We extends o.E{constructor(c,d,g,v){super(),this.id=c,this.dispatcher=g,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},d),o.e(this,o.L(d,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield en(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new sn(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(c){this._tileJSONRequest=null,this.fire(new o.j(c))}})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(c){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),c(),this.load()}setTiles(c){return this.setSourceProperty(()=>{this._options.tiles=c}),this}setUrl(c){return this.setSourceProperty(()=>{this.url=c,this._options.url=c}),this}serialize(){return o.e({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c){return o._(this,void 0,void 0,function*(){const d=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);c.abortController=new AbortController;try{const g=yield J.getImage(this.map._requestManager.transformRequest(d,"Tile"),c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&c.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const v=this.map.painter.context,x=v.gl,A=g.data;c.texture=this.map.painter.getTileTexture(A.width),c.texture?c.texture.update(A,{useMipmap:!0}):(c.texture=new Ce(v,A,x.RGBA,{useMipmap:!0}),c.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),v.extTextureFilterAnisotropic&&x.texParameterf(x.TEXTURE_2D,v.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,v.extTextureFilterAnisotropicMax)),c.state="loaded"}}catch(g){if(delete c.abortController,c.aborted)c.state="unloaded";else if(g)throw c.state="errored",g}})}abortTile(c){return o._(this,void 0,void 0,function*(){c.abortController&&(c.abortController.abort(),delete c.abortController)})}unloadTile(c){return o._(this,void 0,void 0,function*(){c.texture&&this.map.painter.saveTileTexture(c.texture)})}hasTransition(){return!1}}class Vn extends We{constructor(c,d,g,v){super(c,d,g,v),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(c){return o._(this,void 0,void 0,function*(){const d=c.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(d,"Tile");c.neighboringTiles=this._getNeighboringTiles(c.tileID),c.abortController=new AbortController;try{const v=yield J.getImage(g,c.abortController,this.map._refreshExpiredTiles);if(delete c.abortController,c.aborted)return void(c.state="unloaded");if(v&&v.data){const x=v.data;this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&c.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const A=o.b(x)&&o.S()?x:yield this.readImageNow(x),M={type:this.type,uid:c.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!c.actor||c.state==="expired"){c.actor=this.dispatcher.getActor();const R=yield c.actor.sendAsync({type:"LDT",data:M});c.dem=R,c.needsHillshadePrepare=!0,c.needsTerrainPrepare=!0,c.state="loaded"}}}catch(v){if(delete c.abortController,c.aborted)c.state="unloaded";else if(v)throw c.state="errored",v}})}readImageNow(c){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.U()){const d=c.width+2,g=c.height+2;try{return new o.R({width:d,height:g},yield o.V(c,-1,-1,d,g))}catch{}}return b.getImageData(c,1)})}_getNeighboringTiles(c){const d=c.canonical,g=Math.pow(2,d.z),v=(d.x-1+g)%g,x=d.x===0?c.wrap-1:c.wrap,A=(d.x+1+g)%g,M=d.x+1===g?c.wrap+1:c.wrap,R={};return R[new o.Q(c.overscaledZ,x,d.z,v,d.y).key]={backfilled:!1},R[new o.Q(c.overscaledZ,M,d.z,A,d.y).key]={backfilled:!1},d.y>0&&(R[new o.Q(c.overscaledZ,x,d.z,v,d.y-1).key]={backfilled:!1},R[new o.Q(c.overscaledZ,c.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},R[new o.Q(c.overscaledZ,M,d.z,A,d.y-1).key]={backfilled:!1}),d.y+1<g&&(R[new o.Q(c.overscaledZ,x,d.z,v,d.y+1).key]={backfilled:!1},R[new o.Q(c.overscaledZ,c.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},R[new o.Q(c.overscaledZ,M,d.z,A,d.y+1).key]={backfilled:!1}),R}unloadTile(c){return o._(this,void 0,void 0,function*(){c.demTexture&&this.map.painter.saveTileTexture(c.demTexture),c.fbo&&(c.fbo.destroy(),delete c.fbo),c.dem&&delete c.dem,delete c.neighboringTiles,c.state="unloaded",c.actor&&(yield c.actor.sendAsync({type:"RDT",data:{type:this.type,uid:c.uid,source:this.id}}))})}}class xr extends o.E{constructor(c,d,g,v){super(),this.id=c,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(v),this._data=d.data,this._options=o.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const x=o.W/this.tileSize;this.workerOptions=o.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*x,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*x,extent:o.W,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:o.W,radius:(d.clusterRadius||50)*x,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(c){this.map=c,this.load()}setData(c){return this._data=c,this._updateWorkerData(),this}updateData(c){return this._updateWorkerData(c),this}setClusterOptions(c){return this.workerOptions.cluster=c.cluster,c&&(c.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=c.clusterRadius),c.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=c.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(c){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:c,source:this.id}})}getClusterChildren(c){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:c,source:this.id}})}getClusterLeaves(c,d,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:c,limit:d,offset:g}})}_updateWorkerData(c){return o._(this,void 0,void 0,function*(){const d=o.e({type:this.type},this.workerOptions);c?d.dataDiff=c:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let v=null;g.resourceTiming&&g.resourceTiming[this.id]&&(v=g.resourceTiming[this.id].slice(0));const x={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&o.e(x,{resourceTiming:v}),this.fire(new o.k("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(g))}})}loaded(){return this._pendingLoads===0}loadTile(c){return o._(this,void 0,void 0,function*(){const d=c.actor?"RT":"LT";c.actor=this.actor;const g={type:this.type,uid:c.uid,tileID:c.tileID,zoom:c.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.abortController=new AbortController;const v=yield this.actor.sendAsync({type:d,data:g},c.abortController);delete c.abortController,c.unloadVectorData(),c.aborted||c.loadVectorData(v,this.map.painter,d==="RT")})}abortTile(c){return o._(this,void 0,void 0,function*(){c.abortController&&(c.abortController.abort(),delete c.abortController),c.aborted=!0})}unloadTile(c){return o._(this,void 0,void 0,function*(){c.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:c.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var xn=o.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Qn extends o.E{constructor(c,d,g,v){super(),this.id=c,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=d}load(c){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield J.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,c&&(this.coordinates=c),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new o.j(d))}})}loaded(){return this._loaded}updateImage(c){return c.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=c.url,this.load(c.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(c){this.coordinates=c;const d=c.map(o.Y.fromLngLat);this.tileID=function(v){let x=1/0,A=1/0,M=-1/0,R=-1/0;for(const oe of v)x=Math.min(x,oe.x),A=Math.min(A,oe.y),M=Math.max(M,oe.x),R=Math.max(R,oe.y);const N=Math.max(M-x,R-A),K=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),X=Math.pow(2,K);return new o.a0(K,Math.floor((x+M)/2*X),Math.floor((A+R)/2*X))}(d),this.minzoom=this.maxzoom=this.tileID.z;const g=d.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new o.Z,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,o.W,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,o.W),this._boundsArray.emplaceBack(g[2].x,g[2].y,o.W,o.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,d=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,xn.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ce(c,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let g=!1;for(const v in this.tiles){const x=this.tiles[v];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(c){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={}):c.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class is extends Qn{constructor(c,d,g,v){super(c,d,g,v),this.roundZoom=!0,this.type="video",this.options=d}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const c=this.options;this.urls=[];for(const d of c.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield o.a2(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new o.j(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(c){if(this.video){const d=this.video.seekable;c<d.start(0)||c>d.end(0)?this.fire(new o.j(new o.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=c}}getVideo(){return this.video}onAdd(c){this.map||(this.map=c,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const c=this.map.painter.context,d=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,xn.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new Ce(c,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let g=!1;for(const v in this.tiles){const x=this.tiles[v];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ps extends Qn{constructor(c,d,g,v){super(c,d,g,v),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(A=>typeof A!="number"))||this.fire(new o.j(new o.a1(`sources.${c}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.a1(`sources.${c}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new o.j(new o.a1(`sources.${c}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a1(`sources.${c}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.a1(`sources.${c}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(c){this.map=c,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let c=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,c=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,c=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,g=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,xn.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture?(c||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ce(d,this.canvas,g.RGBA,{premultiply:!0});let v=!1;for(const x in this.tiles){const A=this.tiles[x];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,v=!0)}v&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const c of[this.canvas.width,this.canvas.height])if(isNaN(c)||c<=0)return!0;return!1}}const Fs={},Ws=w=>{switch(w){case"geojson":return xr;case"image":return Qn;case"raster":return We;case"raster-dem":return Vn;case"vector":return ln;case"video":return is;case"canvas":return ps}return Fs[w]},Bs="RTLPluginLoaded";class ri extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ye()}_syncState(c){return this.status=c,this.dispatcher.broadcast("SRPS",{pluginStatus:c,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(c){return o._(this,arguments,void 0,function*(d,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(Bs))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ft=null;function Lt(){return ft||(ft=new ri),ft}class ms{constructor(c,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=c,this.uid=o.a3(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(c){const d=c+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(c){this.demTexture&&c.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(c,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",c){c.featureIndex&&(this.latestFeatureIndex=c.featureIndex,c.rawTileData?(this.latestRawTileData=c.rawTileData,this.latestFeatureIndex.rawTileData=c.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=c.collisionBoxArray,this.buckets=function(v,x){const A={};if(!x)return A;for(const M of v){const R=M.layerIds.map(N=>x.getLayer(N)).filter(Boolean);if(R.length!==0){M.layers=R,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map(N=>R.filter(K=>K.id===N)[0]));for(const N of R)A[N.id]=M}}return A}(c.buckets,d.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const x=this.buckets[v];if(x instanceof o.a5){if(this.hasSymbolBuckets=!0,!g)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const x=this.buckets[v];if(x instanceof o.a5&&x.hasRTLText){this.hasRTLText=!0,Lt().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const x=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(v).queryRadius(x))}c.imageAtlas&&(this.imageAtlas=c.imageAtlas),c.glyphAtlasImage&&(this.glyphAtlasImage=c.glyphAtlasImage)}else this.collisionBoxArray=new o.a4}unloadVectorData(){for(const c in this.buckets)this.buckets[c].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(c){return this.buckets[c.id]}upload(c){for(const g in this.buckets){const v=this.buckets[g];v.uploadPending()&&v.upload(c)}const d=c.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ce(c,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ce(c,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(c){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(c,this.imageAtlasTexture)}queryRenderedFeatures(c,d,g,v,x,A,M,R,N,K){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:x,scale:A,tileSize:this.tileSize,pixelPosMatrix:K,transform:R,params:M,queryPadding:this.queryPadding*N},c,d,g):{}}querySourceFeatures(c,d){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const v=g.loadVTLayers(),x=d&&d.sourceLayer?d.sourceLayer:"",A=v._geojsonTileLayer||v[x];if(!A)return;const M=o.a6(d&&d.filter),{z:R,x:N,y:K}=this.tileID.canonical,X={z:R,x:N,y:K};for(let oe=0;oe<A.length;oe++){const Te=A.feature(oe);if(M.needGeometry){const ye=o.a7(Te,!0);if(!M.filter(new o.a8(this.tileID.overscaledZ),ye,this.tileID.canonical))continue}else if(!M.filter(new o.a8(this.tileID.overscaledZ),Te))continue;const Se=g.getId(Te,x),Me=new o.a9(Te,R,N,K,Se);Me.tile=X,c.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(c){const d=this.expirationTime;if(c.cacheControl){const g=o.aa(c.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else c.expires&&(this.expirationTime=new Date(c.expires).getTime());if(this.expirationTime){const g=Date.now();let v=!1;if(this.expirationTime>g)v=!1;else if(d)if(this.expirationTime<d)v=!0;else{const x=this.expirationTime-d;x?this.expirationTime=g+Math.max(x,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(c,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(c).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!d.style.hasLayer(v))continue;const x=this.buckets[v],A=x.layers[0].sourceLayer||"_geojsonTileLayer",M=g[A],R=c[A];if(!M||!R||Object.keys(R).length===0)continue;x.update(R,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});const N=d&&d.style&&d.style.getLayer(v);N&&(this.queryPadding=Math.max(this.queryPadding,N.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(c){this.symbolFadeHoldUntil=b.now()+c}setDependencies(c,d){const g={};for(const v of d)g[v]=!0;this.dependencies[c]=g}hasDependency(c,d){for(const g of c){const v=this.dependencies[g];if(v){for(const x of d)if(v[x])return!0}}return!1}}class Hr{constructor(c,d){this.max=c,this.onRemove=d,this.reset()}reset(){for(const c in this.data)for(const d of this.data[c])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(c,d,g){const v=c.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const x={value:d,timeout:void 0};if(g!==void 0&&(x.timeout=setTimeout(()=>{this.remove(c,x)},g)),this.data[v].push(x),this.order.push(v),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){const d=this.data[c].shift();return d.timeout&&clearTimeout(d.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),d.value}getByKey(c){const d=this.data[c];return d?d[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,d){if(!this.has(c))return this;const g=c.wrapped().key,v=d===void 0?0:this.data[g].indexOf(d),x=this.data[g][v];return this.data[g].splice(v,1),x.timeout&&clearTimeout(x.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(x.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(c){const d=[];for(const g in this.data)for(const v of this.data[g])c(v.value)||d.push(v);for(const g of d)this.remove(g.value.tileID,g)}}class Hi{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(c,d,g){const v=String(d);if(this.stateChanges[c]=this.stateChanges[c]||{},this.stateChanges[c][v]=this.stateChanges[c][v]||{},o.e(this.stateChanges[c][v],g),this.deletedStates[c]===null){this.deletedStates[c]={};for(const x in this.state[c])x!==v&&(this.deletedStates[c][x]=null)}else if(this.deletedStates[c]&&this.deletedStates[c][v]===null){this.deletedStates[c][v]={};for(const x in this.state[c][v])g[x]||(this.deletedStates[c][v][x]=null)}else for(const x in g)this.deletedStates[c]&&this.deletedStates[c][v]&&this.deletedStates[c][v][x]===null&&delete this.deletedStates[c][v][x]}removeFeatureState(c,d,g){if(this.deletedStates[c]===null)return;const v=String(d);if(this.deletedStates[c]=this.deletedStates[c]||{},g&&d!==void 0)this.deletedStates[c][v]!==null&&(this.deletedStates[c][v]=this.deletedStates[c][v]||{},this.deletedStates[c][v][g]=null);else if(d!==void 0)if(this.stateChanges[c]&&this.stateChanges[c][v])for(g in this.deletedStates[c][v]={},this.stateChanges[c][v])this.deletedStates[c][v][g]=null;else this.deletedStates[c][v]=null;else this.deletedStates[c]=null}getState(c,d){const g=String(d),v=o.e({},(this.state[c]||{})[g],(this.stateChanges[c]||{})[g]);if(this.deletedStates[c]===null)return{};if(this.deletedStates[c]){const x=this.deletedStates[c][d];if(x===null)return{};for(const A in x)delete v[A]}return v}initializeTileState(c,d){c.setFeatureState(this.state,d)}coalesceChanges(c,d){const g={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const x={};for(const A in this.stateChanges[v])this.state[v][A]||(this.state[v][A]={}),o.e(this.state[v][A],this.stateChanges[v][A]),x[A]=this.state[v][A];g[v]=x}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const x={};if(this.deletedStates[v]===null)for(const A in this.state[v])x[A]={},this.state[v][A]={};else for(const A in this.deletedStates[v]){if(this.deletedStates[v][A]===null)this.state[v][A]={};else for(const M of Object.keys(this.deletedStates[v][A]))delete this.state[v][A][M];x[A]=this.state[v][A]}g[v]=g[v]||{},o.e(g[v],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const v in c)c[v].setFeatureState(g,d)}}class Zr extends o.E{constructor(c,d,g){super(),this.id=c,this.dispatcher=g,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,x,A,M)=>{const R=new(Ws(x.type))(v,x,A,M);if(R.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${R.id}`);return R})(c,d,g,this),this._tiles={},this._cache=new Hr(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Hi,this._didEmitContent=!1,this._updated=!1}onAdd(c){this.map=c,this._maxTileCacheSize=c?c._maxTileCacheSize:null,this._maxTileCacheZoomLevels=c?c._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(c)}onRemove(c){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(c)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const c in this._tiles){const d=this._tiles[c];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const c=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,c&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(c,d,g){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(c),this._tileLoaded(c,d,g)}catch(v){c.state="errored",v.status!==404?this._source.fire(new o.j(v,{tile:c})):this.update(this.transform,this.terrain)}})}_unloadTile(c){this._source.unloadTile&&this._source.unloadTile(c)}_abortTile(c){this._source.abortTile&&this._source.abortTile(c),this._source.fire(new o.k("dataabort",{tile:c,coord:c.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(c){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const g=this._tiles[d];g.upload(c),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(c=>c.tileID).sort(Ut).map(c=>c.key)}getRenderableIds(c){const d=[];for(const g in this._tiles)this._isIdRenderable(g,c)&&d.push(this._tiles[g]);return c?d.sort((g,v)=>{const x=g.tileID,A=v.tileID,M=new o.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),R=new o.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-A.overscaledZ||R.y-M.y||R.x-M.x}).map(g=>g.tileID.key):d.map(g=>g.tileID).sort(Ut).map(g=>g.key)}hasRenderableParent(c){const d=this.findLoadedParent(c,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(c,d){return this._tiles[c]&&this._tiles[c].hasData()&&!this._coveredTiles[c]&&(d||!this._tiles[c].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const c in this._tiles)this._tiles[c].state!=="errored"&&this._reloadTile(c,"reloading")}}_reloadTile(c,d){return o._(this,void 0,void 0,function*(){const g=this._tiles[c];g&&(g.state!=="loading"&&(g.state=d),yield this._loadTile(g,c,d))})}_tileLoaded(c,d,g){c.timeAdded=b.now(),g==="expired"&&(c.refreshedUponExpiration=!0),this._setTileReloadTimer(d,c),this.getSource().type==="raster-dem"&&c.dem&&this._backfillDEM(c),this._state.initializeTileState(c,this.map?this.map.painter:null),c.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:c,coord:c.tileID}))}_backfillDEM(c){const d=this.getRenderableIds();for(let v=0;v<d.length;v++){const x=d[v];if(c.neighboringTiles&&c.neighboringTiles[x]){const A=this.getTileByID(x);g(c,A),g(A,c)}}function g(v,x){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let A=x.tileID.canonical.x-v.tileID.canonical.x;const M=x.tileID.canonical.y-v.tileID.canonical.y,R=Math.pow(2,v.tileID.canonical.z),N=x.tileID.key;A===0&&M===0||Math.abs(M)>1||(Math.abs(A)>1&&(Math.abs(A+R)===1?A+=R:Math.abs(A-R)===1&&(A-=R)),x.dem&&v.dem&&(v.dem.backfillBorder(x.dem,A,M),v.neighboringTiles&&v.neighboringTiles[N]&&(v.neighboringTiles[N].backfilled=!0)))}}getTile(c){return this.getTileByID(c.key)}getTileByID(c){return this._tiles[c]}_retainLoadedChildren(c,d,g,v){for(const x in this._tiles){let A=this._tiles[x];if(v[x]||!A.hasData()||A.tileID.overscaledZ<=d||A.tileID.overscaledZ>g)continue;let M=A.tileID;for(;A&&A.tileID.overscaledZ>d+1;){const N=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[N.key],A&&A.hasData()&&(M=N)}let R=M;for(;R.overscaledZ>d;)if(R=R.scaledTo(R.overscaledZ-1),c[R.key]){v[M.key]=M;break}}}findLoadedParent(c,d){if(c.key in this._loadedParentTiles){const g=this._loadedParentTiles[c.key];return g&&g.tileID.overscaledZ>=d?g:null}for(let g=c.overscaledZ-1;g>=d;g--){const v=c.scaledTo(g),x=this._getLoadedTile(v);if(x)return x}}_getLoadedTile(c){const d=this._tiles[c.key];return d&&d.hasData()?d:this._cache.getByKey(c.wrapped().key)}updateCacheSize(c){const d=Math.ceil(c.width/this._source.tileSize)+1,g=Math.ceil(c.height/this._source.tileSize)+1,v=Math.floor(d*g*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)}handleWrapJump(c){const d=Math.round((c-(this._prevLng===void 0?c:this._prevLng))/360);if(this._prevLng=c,d){const g={};for(const v in this._tiles){const x=this._tiles[v];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+d),g[x.tileID.key]=x}this._tiles=g;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}update(c,d){if(!this._sourceLoaded||this._paused)return;let g;this.transform=c,this.terrain=d,this.updateCacheSize(c),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=c.getVisibleUnwrappedCoordinates(this._source.tileID).map(K=>new o.Q(K.canonical.z,K.wrap,K.canonical.z,K.canonical.x,K.canonical.y)):(g=c.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(g=g.filter(K=>this._source.hasTile(K)))):g=[];const v=c.coveringZoomLevel(this._source),x=Math.max(v-Zr.maxOverzooming,this._source.minzoom),A=Math.max(v+Zr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const K={};for(const X of g)if(X.canonical.z>this._source.minzoom){const oe=X.scaledTo(X.canonical.z-1);K[oe.key]=oe;const Te=X.scaledTo(Math.max(this._source.minzoom,Math.min(X.canonical.z,5)));K[Te.key]=Te}g=g.concat(Object.values(K))}const M=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,M&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const R=this._updateRetainedTiles(g,v);if(Sn(this._source.type)){const K={},X={},oe=Object.keys(R),Te=b.now();for(const Se of oe){const Me=R[Se],ye=this._tiles[Se];if(!ye||ye.fadeEndTime!==0&&ye.fadeEndTime<=Te)continue;const Oe=this.findLoadedParent(Me,x);Oe&&(this._addTile(Oe.tileID),K[Oe.tileID.key]=Oe.tileID),X[Se]=Me}this._retainLoadedChildren(X,v,A,R);for(const Se in K)R[Se]||(this._coveredTiles[Se]=!0,R[Se]=K[Se]);if(d){const Se={},Me={};for(const ye of g)this._tiles[ye.key].hasData()?Se[ye.key]=ye:Me[ye.key]=ye;for(const ye in Me){const Oe=Me[ye].children(this._source.maxzoom);this._tiles[Oe[0].key]&&this._tiles[Oe[1].key]&&this._tiles[Oe[2].key]&&this._tiles[Oe[3].key]&&(Se[Oe[0].key]=R[Oe[0].key]=Oe[0],Se[Oe[1].key]=R[Oe[1].key]=Oe[1],Se[Oe[2].key]=R[Oe[2].key]=Oe[2],Se[Oe[3].key]=R[Oe[3].key]=Oe[3],delete Me[ye])}for(const ye in Me){const Oe=this.findLoadedParent(Me[ye],this._source.minzoom);if(Oe){Se[Oe.tileID.key]=R[Oe.tileID.key]=Oe.tileID;for(const Xe in Se)Se[Xe].isChildOf(Oe.tileID)&&delete Se[Xe]}}for(const ye in this._tiles)Se[ye]||(this._coveredTiles[ye]=!0)}}for(const K in R)this._tiles[K].clearFadeHold();const N=o.ab(this._tiles,R);for(const K of N){const X=this._tiles[K];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(K)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const c in this._tiles)this._tiles[c].holdingForFade()&&this._removeTile(c)}_updateRetainedTiles(c,d){const g={},v={},x=Math.max(d-Zr.maxOverzooming,this._source.minzoom),A=Math.max(d+Zr.maxUnderzooming,this._source.minzoom),M={};for(const R of c){const N=this._addTile(R);g[R.key]=R,N.hasData()||d<this._source.maxzoom&&(M[R.key]=R)}this._retainLoadedChildren(M,d,A,g);for(const R of c){let N=this._tiles[R.key];if(N.hasData())continue;if(d+1>this._source.maxzoom){const X=R.children(this._source.maxzoom)[0],oe=this.getTile(X);if(oe&&oe.hasData()){g[X.key]=X;continue}}else{const X=R.children(this._source.maxzoom);if(g[X[0].key]&&g[X[1].key]&&g[X[2].key]&&g[X[3].key])continue}let K=N.wasRequested();for(let X=R.overscaledZ-1;X>=x;--X){const oe=R.scaledTo(X);if(v[oe.key])break;if(v[oe.key]=!0,N=this.getTile(oe),!N&&K&&(N=this._addTile(oe)),N){const Te=N.hasData();if((K||Te)&&(g[oe.key]=oe),K=N.wasRequested(),Te)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const c in this._tiles){const d=[];let g,v=this._tiles[c].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){g=this._loadedParentTiles[v.key];break}d.push(v.key);const x=v.scaledTo(v.overscaledZ-1);if(g=this._getLoadedTile(x),g)break;v=x}for(const x of d)this._loadedParentTiles[x]=g}}_addTile(c){let d=this._tiles[c.key];if(d)return d;d=this._cache.getAndRemove(c),d&&(this._setTileReloadTimer(c.key,d),d.tileID=c,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[c.key]&&(clearTimeout(this._cacheTimers[c.key]),delete this._cacheTimers[c.key],this._setTileReloadTimer(c.key,d)));const g=d;return d||(d=new ms(c,this._source.tileSize*c.overscaleFactor()),this._loadTile(d,c.key,d.state)),d.uses++,this._tiles[c.key]=d,g||this._source.fire(new o.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(c,d){c in this._timers&&(clearTimeout(this._timers[c]),delete this._timers[c]);const g=d.getExpiryTimeout();g&&(this._timers[c]=setTimeout(()=>{this._reloadTile(c,"expired"),delete this._timers[c]},g))}_removeTile(c){const d=this._tiles[c];d&&(d.uses--,delete this._tiles[c],this._timers[c]&&(clearTimeout(this._timers[c]),delete this._timers[c]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(c){const d=c.sourceDataType;c.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&c.dataType==="source"&&d==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const c in this._tiles)this._removeTile(c);this._cache.reset()}tilesIn(c,d,g){const v=[],x=this.transform;if(!x)return v;const A=g?x.getCameraQueryGeometry(c):c,M=c.map(Se=>x.pointCoordinate(Se,this.terrain)),R=A.map(Se=>x.pointCoordinate(Se,this.terrain)),N=this.getIds();let K=1/0,X=1/0,oe=-1/0,Te=-1/0;for(const Se of R)K=Math.min(K,Se.x),X=Math.min(X,Se.y),oe=Math.max(oe,Se.x),Te=Math.max(Te,Se.y);for(let Se=0;Se<N.length;Se++){const Me=this._tiles[N[Se]];if(Me.holdingForFade())continue;const ye=Me.tileID,Oe=Math.pow(2,x.zoom-Me.tileID.overscaledZ),Xe=d*Me.queryPadding*o.W/Me.tileSize/Oe,De=[ye.getTilePoint(new o.Y(K,X)),ye.getTilePoint(new o.Y(oe,Te))];if(De[0].x-Xe<o.W&&De[0].y-Xe<o.W&&De[1].x+Xe>=0&&De[1].y+Xe>=0){const Ve=M.map(tt=>ye.getTilePoint(tt)),Je=R.map(tt=>ye.getTilePoint(tt));v.push({tile:Me,tileID:ye,queryGeometry:Ve,cameraQueryGeometry:Je,scale:Oe})}}return v}getVisibleCoordinates(c){const d=this.getRenderableIds(c).map(g=>this._tiles[g].tileID);for(const g of d)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(Sn(this._source.type)){const c=b.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=c)return!0}return!1}setFeatureState(c,d,g){this._state.updateState(c=c||"_geojsonTileLayer",d,g)}removeFeatureState(c,d,g){this._state.removeFeatureState(c=c||"_geojsonTileLayer",d,g)}getFeatureState(c,d){return this._state.getState(c=c||"_geojsonTileLayer",d)}setDependencies(c,d,g){const v=this._tiles[c];v&&v.setDependencies(d,g)}reloadTilesForDependencies(c,d){for(const g in this._tiles)this._tiles[g].hasDependency(c,d)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(c,d))}}function Ut(w,c){const d=Math.abs(2*w.wrap)-+(w.wrap<0),g=Math.abs(2*c.wrap)-+(c.wrap<0);return w.overscaledZ-c.overscaledZ||g-d||c.canonical.y-w.canonical.y||c.canonical.x-w.canonical.x}function Sn(w){return w==="raster"||w==="image"||w==="video"}Zr.maxOverzooming=10,Zr.maxUnderzooming=3;class Cn{constructor(c,d){this.reset(c,d)}reset(c,d){this.points=c||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=o.ac(c,0,1);let d=1,g=this._distances[d];const v=c*this.paddedLength+this.padding;for(;g<v&&d<this._distances.length;)g=this._distances[++d];const x=d-1,A=this._distances[x],M=g-A,R=M>0?(v-A)/M:0;return this.points[x].mult(1-R).add(this.points[d].mult(R))}}function gr(w,c){let d=!0;return w==="always"||w!=="never"&&c!=="never"||(d=!1),d}class Ns{constructor(c,d,g){const v=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(c/g),this.yCellCount=Math.ceil(d/g);for(let A=0;A<this.xCellCount*this.yCellCount;A++)v.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=d,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,d,g,v,x){this._forEachCell(d,g,v,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(v),this.bboxes.push(x)}insertCircle(c,d,g,v){this._forEachCell(d-v,g-v,d+v,g+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(d),this.circles.push(g),this.circles.push(v)}_insertBoxCell(c,d,g,v,x,A){this.boxCells[x].push(A)}_insertCircleCell(c,d,g,v,x,A){this.circleCells[x].push(A)}_query(c,d,g,v,x,A,M){if(g<0||c>this.width||v<0||d>this.height)return[];const R=[];if(c<=0&&d<=0&&this.width<=g&&this.height<=v){if(x)return[{key:null,x1:c,y1:d,x2:g,y2:v}];for(let N=0;N<this.boxKeys.length;N++)R.push({key:this.boxKeys[N],x1:this.bboxes[4*N],y1:this.bboxes[4*N+1],x2:this.bboxes[4*N+2],y2:this.bboxes[4*N+3]});for(let N=0;N<this.circleKeys.length;N++){const K=this.circles[3*N],X=this.circles[3*N+1],oe=this.circles[3*N+2];R.push({key:this.circleKeys[N],x1:K-oe,y1:X-oe,x2:K+oe,y2:X+oe})}}else this._forEachCell(c,d,g,v,this._queryCell,R,{hitTest:x,overlapMode:A,seenUids:{box:{},circle:{}}},M);return R}query(c,d,g,v){return this._query(c,d,g,v,!1,null)}hitTest(c,d,g,v,x,A){return this._query(c,d,g,v,!0,x,A).length>0}hitTestCircle(c,d,g,v,x){const A=c-g,M=c+g,R=d-g,N=d+g;if(M<0||A>this.width||N<0||R>this.height)return!1;const K=[];return this._forEachCell(A,R,M,N,this._queryCellCircle,K,{hitTest:!0,overlapMode:v,circle:{x:c,y:d,radius:g},seenUids:{box:{},circle:{}}},x),K.length>0}_queryCell(c,d,g,v,x,A,M,R){const{seenUids:N,hitTest:K,overlapMode:X}=M,oe=this.boxCells[x];if(oe!==null){const Se=this.bboxes;for(const Me of oe)if(!N.box[Me]){N.box[Me]=!0;const ye=4*Me,Oe=this.boxKeys[Me];if(c<=Se[ye+2]&&d<=Se[ye+3]&&g>=Se[ye+0]&&v>=Se[ye+1]&&(!R||R(Oe))&&(!K||!gr(X,Oe.overlapMode))&&(A.push({key:Oe,x1:Se[ye],y1:Se[ye+1],x2:Se[ye+2],y2:Se[ye+3]}),K))return!0}}const Te=this.circleCells[x];if(Te!==null){const Se=this.circles;for(const Me of Te)if(!N.circle[Me]){N.circle[Me]=!0;const ye=3*Me,Oe=this.circleKeys[Me];if(this._circleAndRectCollide(Se[ye],Se[ye+1],Se[ye+2],c,d,g,v)&&(!R||R(Oe))&&(!K||!gr(X,Oe.overlapMode))){const Xe=Se[ye],De=Se[ye+1],Ve=Se[ye+2];if(A.push({key:Oe,x1:Xe-Ve,y1:De-Ve,x2:Xe+Ve,y2:De+Ve}),K)return!0}}}return!1}_queryCellCircle(c,d,g,v,x,A,M,R){const{circle:N,seenUids:K,overlapMode:X}=M,oe=this.boxCells[x];if(oe!==null){const Se=this.bboxes;for(const Me of oe)if(!K.box[Me]){K.box[Me]=!0;const ye=4*Me,Oe=this.boxKeys[Me];if(this._circleAndRectCollide(N.x,N.y,N.radius,Se[ye+0],Se[ye+1],Se[ye+2],Se[ye+3])&&(!R||R(Oe))&&!gr(X,Oe.overlapMode))return A.push(!0),!0}}const Te=this.circleCells[x];if(Te!==null){const Se=this.circles;for(const Me of Te)if(!K.circle[Me]){K.circle[Me]=!0;const ye=3*Me,Oe=this.circleKeys[Me];if(this._circlesCollide(Se[ye],Se[ye+1],Se[ye+2],N.x,N.y,N.radius)&&(!R||R(Oe))&&!gr(X,Oe.overlapMode))return A.push(!0),!0}}}_forEachCell(c,d,g,v,x,A,M,R){const N=this._convertToXCellCoord(c),K=this._convertToYCellCoord(d),X=this._convertToXCellCoord(g),oe=this._convertToYCellCoord(v);for(let Te=N;Te<=X;Te++)for(let Se=K;Se<=oe;Se++)if(x.call(this,c,d,g,v,this.xCellCount*Se+Te,A,M,R))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,d,g,v,x,A){const M=v-c,R=x-d,N=g+A;return N*N>M*M+R*R}_circleAndRectCollide(c,d,g,v,x,A,M){const R=(A-v)/2,N=Math.abs(c-(v+R));if(N>R+g)return!1;const K=(M-x)/2,X=Math.abs(d-(x+K));if(X>K+g)return!1;if(N<=R||X<=K)return!0;const oe=N-R,Te=X-K;return oe*oe+Te*Te<=g*g}}function $n(w,c,d,g,v){const x=o.F();return c?(o.J(x,x,[1/v,1/v,1]),d||o.ad(x,x,g.angle)):o.K(x,g.labelPlaneMatrix,w),x}function si(w,c,d,g,v){if(c){const x=o.ae(w);return o.J(x,x,[v,v,1]),d||o.ad(x,x,-g.angle),x}return g.glCoordMatrix}function Lr(w,c,d){let g;d?(g=[w.x,w.y,d(w.x,w.y),1],o.af(g,g,c)):(g=[w.x,w.y,0,1],hn(g,g,c));const v=g[3];return{point:new o.P(g[0]/v,g[1]/v),signedDistanceFromCamera:v}}function Ae(w,c){return .5+w/c*.5}function Q(w,c){const d=w[0]/w[3],g=w[1]/w[3];return d>=-c[0]&&d<=c[0]&&g>=-c[1]&&g<=c[1]}function ne(w,c,d,g,v,x,A,M,R,N){const K=g?w.textSizeData:w.iconSizeData,X=o.ag(K,d.transform.zoom),oe=[256/d.width*2+1,256/d.height*2+1],Te=g?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;Te.clear();const Se=w.lineVertexArray,Me=g?w.text.placedSymbolArray:w.icon.placedSymbolArray,ye=d.transform.width/d.transform.height;let Oe=!1;for(let Xe=0;Xe<Me.length;Xe++){const De=Me.get(Xe);if(De.hidden||De.writingMode===o.ah.vertical&&!Oe){ut(De.numGlyphs,Te);continue}let Ve;if(Oe=!1,N?(Ve=[De.anchorX,De.anchorY,N(De.anchorX,De.anchorY),1],o.af(Ve,Ve,c)):(Ve=[De.anchorX,De.anchorY,0,1],hn(Ve,Ve,c)),!Q(Ve,oe)){ut(De.numGlyphs,Te);continue}const Je=Ae(d.transform.cameraToCenterDistance,Ve[3]),tt=o.ai(K,X,De),rt=A?tt/Je:tt*Je,_t=new o.P(De.anchorX,De.anchorY),pt=Lr(_t,v,N).point,Rt={projections:{},offsets:{}},Ft=Fe(De,rt,!1,M,c,v,x,w.glyphOffsetArray,Se,Te,pt,_t,Rt,ye,R,N);Oe=Ft.useVertical,(Ft.notEnoughRoom||Oe||Ft.needsFlipping&&Fe(De,rt,!0,M,c,v,x,w.glyphOffsetArray,Se,Te,pt,_t,Rt,ye,R,N).notEnoughRoom)&&ut(De.numGlyphs,Te)}g?w.text.dynamicLayoutVertexBuffer.updateData(Te):w.icon.dynamicLayoutVertexBuffer.updateData(Te)}function he(w,c,d,g,v,x,A,M,R,N,K,X,oe){const Te=M.glyphStartIndex+M.numGlyphs,Se=M.lineStartIndex,Me=M.lineStartIndex+M.lineLength,ye=c.getoffsetX(M.glyphStartIndex),Oe=c.getoffsetX(Te-1),Xe=dt(w*ye,d,g,v,x,A,M.segment,Se,Me,R,N,K,X,oe);if(!Xe)return null;const De=dt(w*Oe,d,g,v,x,A,M.segment,Se,Me,R,N,K,X,oe);return De?{first:Xe,last:De}:null}function xe(w,c,d,g){return w===o.ah.horizontal&&Math.abs(d.y-c.y)>Math.abs(d.x-c.x)*g?{useVertical:!0}:(w===o.ah.vertical?c.y<d.y:c.x>d.x)?{needsFlipping:!0}:null}function Fe(w,c,d,g,v,x,A,M,R,N,K,X,oe,Te,Se,Me){const ye=c/24,Oe=w.lineOffsetX*ye,Xe=w.lineOffsetY*ye;let De;if(w.numGlyphs>1){const Ve=w.glyphStartIndex+w.numGlyphs,Je=w.lineStartIndex,tt=w.lineStartIndex+w.lineLength,rt=he(ye,M,Oe,Xe,d,K,X,w,R,x,oe,Se,Me);if(!rt)return{notEnoughRoom:!0};const _t=Lr(rt.first.point,A,Me).point,pt=Lr(rt.last.point,A,Me).point;if(g&&!d){const Rt=xe(w.writingMode,_t,pt,Te);if(Rt)return Rt}De=[rt.first];for(let Rt=w.glyphStartIndex+1;Rt<Ve-1;Rt++)De.push(dt(ye*M.getoffsetX(Rt),Oe,Xe,d,K,X,w.segment,Je,tt,R,x,oe,Se,Me));De.push(rt.last)}else{if(g&&!d){const Je=Lr(X,v,Me).point,tt=w.lineStartIndex+w.segment+1,rt=new o.P(R.getx(tt),R.gety(tt)),_t=Lr(rt,v,Me),pt=_t.signedDistanceFromCamera>0?_t.point:Be(X,rt,Je,1,v,Me),Rt=xe(w.writingMode,Je,pt,Te);if(Rt)return Rt}const Ve=dt(ye*M.getoffsetX(w.glyphStartIndex),Oe,Xe,d,K,X,w.segment,w.lineStartIndex,w.lineStartIndex+w.lineLength,R,x,oe,Se,Me);if(!Ve)return{notEnoughRoom:!0};De=[Ve]}for(const Ve of De)o.aj(N,Ve.point,Ve.angle);return{}}function Be(w,c,d,g,v,x){const A=Lr(w.add(w.sub(c)._unit()),v,x).point,M=d.sub(A);return d.add(M._mult(g/M.mag()))}function qe(w,c){const{projectionCache:d,lineVertexArray:g,labelPlaneMatrix:v,tileAnchorPoint:x,distanceFromAnchor:A,getElevation:M,previousVertex:R,direction:N,absOffsetX:K}=c;if(d.projections[w])return d.projections[w];const X=new o.P(g.getx(w),g.gety(w)),oe=Lr(X,v,M);if(oe.signedDistanceFromCamera>0)return d.projections[w]=oe.point,oe.point;const Te=w-N;return Be(A===0?x:new o.P(g.getx(Te),g.gety(Te)),X,R,K-A+1,v,M)}function Re(w,c,d){return w._unit()._perp()._mult(c*d)}function Ke(w,c,d,g,v,x,A,M){const{projectionCache:R,direction:N}=M;if(R.offsets[w])return R.offsets[w];const K=d.add(c);if(w+N<g||w+N>=v)return R.offsets[w]=K,K;const X=qe(w+N,M),oe=Re(X.sub(d),A,N),Te=d.add(oe),Se=X.add(oe);return R.offsets[w]=o.ak(x,K,Te,Se)||K,R.offsets[w]}function dt(w,c,d,g,v,x,A,M,R,N,K,X,oe,Te){const Se=g?w-c:w+c;let Me=Se>0?1:-1,ye=0;g&&(Me*=-1,ye=Math.PI),Me<0&&(ye+=Math.PI);let Oe,Xe,De=Me>0?M+A:M+A+1,Ve=v,Je=v,tt=0,rt=0;const _t=Math.abs(Se),pt=[];let Rt;for(;tt+rt<=_t;){if(De+=Me,De<M||De>=R)return null;tt+=rt,Je=Ve,Xe=Oe;const qt={projectionCache:X,lineVertexArray:N,labelPlaneMatrix:K,tileAnchorPoint:x,distanceFromAnchor:tt,getElevation:Te,previousVertex:Je,direction:Me,absOffsetX:_t};if(Ve=qe(De,qt),d===0)pt.push(Je),Rt=Ve.sub(Je);else{let gn;const Pn=Ve.sub(Je);gn=Pn.mag()===0?Re(qe(De+Me,qt).sub(Ve),d,Me):Re(Pn,d,Me),Xe||(Xe=Je.add(gn)),Oe=Ke(De,gn,Ve,M,R,Xe,d,qt),pt.push(Xe),Rt=Oe.sub(Xe)}rt=Rt.mag()}const Ft=Rt._mult((_t-tt)/rt)._add(Xe||Je),Tn=ye+Math.atan2(Ve.y-Je.y,Ve.x-Je.x);return pt.push(Ft),{point:Ft,angle:oe?Tn:0,path:pt}}const ct=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ut(w,c){for(let d=0;d<w;d++){const g=c.length;c.resize(g+4),c.float32.set(ct,3*g)}}function hn(w,c,d){const g=c[0],v=c[1];return w[0]=d[0]*g+d[4]*v+d[12],w[1]=d[1]*g+d[5]*v+d[13],w[3]=d[3]*g+d[7]*v+d[15],w}const mn=100;class In{constructor(c,d=new Ns(c.width+200,c.height+200,25),g=new Ns(c.width+200,c.height+200,25)){this.transform=c,this.grid=d,this.ignoredGrid=g,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+mn,this.screenBottomBoundary=c.height+mn,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(c,d,g,v,x,A){const M=this.projectAndGetPerspectiveRatio(v,c.anchorPointX,c.anchorPointY,A),R=g*M.perspectiveRatio,N=c.x1*R+M.point.x,K=c.y1*R+M.point.y,X=c.x2*R+M.point.x,oe=c.y2*R+M.point.y;return!this.isInsideGrid(N,K,X,oe)||d!=="always"&&this.grid.hitTest(N,K,X,oe,d,x)||M.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[N,K,X,oe],offscreen:this.isOffscreen(N,K,X,oe)}}placeCollisionCircles(c,d,g,v,x,A,M,R,N,K,X,oe,Te,Se){const Me=[],ye=new o.P(d.anchorX,d.anchorY),Oe=Lr(ye,A,Se),Xe=Ae(this.transform.cameraToCenterDistance,Oe.signedDistanceFromCamera),De=(K?x/Xe:x*Xe)/o.ao,Ve=Lr(ye,M,Se).point,Je=he(De,v,d.lineOffsetX*De,d.lineOffsetY*De,!1,Ve,ye,d,g,M,{projections:{},offsets:{}},!1,Se);let tt=!1,rt=!1,_t=!0;if(Je){const pt=.5*oe*Xe+Te,Rt=new o.P(-100,-100),Ft=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Tn=new Cn,qt=Je.first,gn=Je.last;let Pn=[];for(let Dn=qt.path.length-1;Dn>=1;Dn--)Pn.push(qt.path[Dn]);for(let Dn=1;Dn<gn.path.length;Dn++)Pn.push(gn.path[Dn]);const Nn=2.5*pt;if(R){const Dn=Pn.map(zn=>Lr(zn,R,Se));Pn=Dn.some(zn=>zn.signedDistanceFromCamera<=0)?[]:Dn.map(zn=>zn.point)}let wn=[];if(Pn.length>0){const Dn=Pn[0].clone(),zn=Pn[0].clone();for(let mr=1;mr<Pn.length;mr++)Dn.x=Math.min(Dn.x,Pn[mr].x),Dn.y=Math.min(Dn.y,Pn[mr].y),zn.x=Math.max(zn.x,Pn[mr].x),zn.y=Math.max(zn.y,Pn[mr].y);wn=Dn.x>=Rt.x&&zn.x<=Ft.x&&Dn.y>=Rt.y&&zn.y<=Ft.y?[Pn]:zn.x<Rt.x||Dn.x>Ft.x||zn.y<Rt.y||Dn.y>Ft.y?[]:o.al([Pn],Rt.x,Rt.y,Ft.x,Ft.y)}for(const Dn of wn){Tn.reset(Dn,.25*pt);let zn=0;zn=Tn.length<=.5*pt?1:Math.ceil(Tn.paddedLength/Nn)+1;for(let mr=0;mr<zn;mr++){const Wn=mr/Math.max(zn-1,1),As=Tn.lerp(Wn),Or=As.x+mn,ar=As.y+mn;Me.push(Or,ar,pt,0);const Fr=Or-pt,Ms=ar-pt,ui=Or+pt,Di=ar+pt;if(_t=_t&&this.isOffscreen(Fr,Ms,ui,Di),rt=rt||this.isInsideGrid(Fr,Ms,ui,Di),c!=="always"&&this.grid.hitTestCircle(Or,ar,pt,c,X)&&(tt=!0,!N))return{circles:[],offscreen:!1,collisionDetected:tt}}}}return{circles:!N&&tt||!rt||Xe<this.perspectiveRatioCutoff?[]:Me,offscreen:_t,collisionDetected:tt}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let g=1/0,v=1/0,x=-1/0,A=-1/0;for(const K of c){const X=new o.P(K.x+mn,K.y+mn);g=Math.min(g,X.x),v=Math.min(v,X.y),x=Math.max(x,X.x),A=Math.max(A,X.y),d.push(X)}const M=this.grid.query(g,v,x,A).concat(this.ignoredGrid.query(g,v,x,A)),R={},N={};for(const K of M){const X=K.key;if(R[X.bucketInstanceId]===void 0&&(R[X.bucketInstanceId]={}),R[X.bucketInstanceId][X.featureIndex])continue;const oe=[new o.P(K.x1,K.y1),new o.P(K.x2,K.y1),new o.P(K.x2,K.y2),new o.P(K.x1,K.y2)];o.am(d,oe)&&(R[X.bucketInstanceId][X.featureIndex]=!0,N[X.bucketInstanceId]===void 0&&(N[X.bucketInstanceId]=[]),N[X.bucketInstanceId].push(X.featureIndex))}return N}insertCollisionBox(c,d,g,v,x,A){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:x,collisionGroupID:A,overlapMode:d},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,d,g,v,x,A){const M=g?this.ignoredGrid:this.grid,R={bucketInstanceId:v,featureIndex:x,collisionGroupID:A,overlapMode:d};for(let N=0;N<c.length;N+=4)M.insertCircle(R,c[N],c[N+1],c[N+2])}projectAndGetPerspectiveRatio(c,d,g,v){let x;return v?(x=[d,g,v(d,g),1],o.af(x,x,c)):(x=[d,g,0,1],hn(x,x,c)),{point:new o.P((x[0]/x[3]+1)/2*this.transform.width+mn,(-x[1]/x[3]+1)/2*this.transform.height+mn),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(c,d,g,v){return g<mn||c>=this.screenRightBoundary||v<mn||d>this.screenBottomBoundary}isInsideGrid(c,d,g,v){return g>=0&&c<this.gridRightBoundary&&v>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const c=o.an([]);return o.H(c,c,[-100,-100,0]),c}}function kn(w,c,d){return c*(o.W/(w.tileSize*Math.pow(2,d-w.tileID.overscaledZ)))}class Fn{constructor(c,d,g,v){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?d:-d))):v&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Kn{constructor(c,d,g,v,x){this.text=new Fn(c?c.text:null,d,g,x),this.icon=new Fn(c?c.icon:null,d,v,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class nr{constructor(c,d,g){this.text=c,this.icon=d,this.skipFade=g}}class Ir{constructor(){this.invProjMatrix=o.F(),this.viewportMatrix=o.F(),this.circles=[]}}class Mn{constructor(c,d,g,v,x){this.bucketInstanceId=c,this.featureIndex=d,this.sourceLayerIndex=g,this.bucketIndex=v,this.tileID=x}}class hr{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const d=++this.maxGroupID;this.collisionGroups[c]={ID:d,predicate:g=>g.collisionGroupID===d}}return this.collisionGroups[c]}}function Rr(w,c,d,g,v){const{horizontalAlign:x,verticalAlign:A}=o.at(w);return new o.P(-(x-.5)*c+g[0]*v,-(A-.5)*d+g[1]*v)}function os(w,c,d,g,v,x){const{x1:A,x2:M,y1:R,y2:N,anchorPointX:K,anchorPointY:X}=w,oe=new o.P(c,d);return g&&oe._rotate(v?x:-x),{x1:A+oe.x,y1:R+oe.y,x2:M+oe.x,y2:N+oe.y,anchorPointX:K,anchorPointY:X}}class _s{constructor(c,d,g,v,x){this.transform=c.clone(),this.terrain=d,this.collisionIndex=new In(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new hr(v),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,d,g,v){const x=g.getBucket(d),A=g.latestFeatureIndex;if(!x||!A||d.id!==x.layerIds[0])return;const M=g.collisionBoxArray,R=x.layers[0].layout,N=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),K=g.tileSize/o.W,X=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),oe=R.get("text-pitch-alignment")==="map",Te=R.get("text-rotation-alignment")==="map",Se=kn(g,1,this.transform.zoom),Me=$n(X,oe,Te,this.transform,Se);let ye=null;if(oe){const Xe=si(X,oe,Te,this.transform,Se);ye=o.K([],this.transform.labelPlaneMatrix,Xe)}this.retainedQueryData[x.bucketInstanceId]=new Mn(x.bucketInstanceId,A,x.sourceLayerIndex,x.index,g.tileID);const Oe={bucket:x,layout:R,posMatrix:X,textLabelPlaneMatrix:Me,labelToScreenMatrix:ye,scale:N,textPixelRatio:K,holdingForFade:g.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:o.ag(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(v)for(const Xe of x.sortKeyRanges){const{sortKey:De,symbolInstanceStart:Ve,symbolInstanceEnd:Je}=Xe;c.push({sortKey:De,symbolInstanceStart:Ve,symbolInstanceEnd:Je,parameters:Oe})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:Oe})}attemptAnchorPlacement(c,d,g,v,x,A,M,R,N,K,X,oe,Te,Se,Me,ye){const Oe=o.ap[c.textAnchor],Xe=[c.textOffset0,c.textOffset1],De=Rr(Oe,g,v,Xe,x),Ve=this.collisionIndex.placeCollisionBox(os(d,De.x,De.y,A,M,this.transform.angle),X,R,N,K.predicate,ye);if((!Me||this.collisionIndex.placeCollisionBox(os(Me,De.x,De.y,A,M,this.transform.angle),X,R,N,K.predicate,ye).box.length!==0)&&Ve.box.length>0){let Je;if(this.prevPlacement&&this.prevPlacement.variableOffsets[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID]&&this.prevPlacement.placements[oe.crossTileID].text&&(Je=this.prevPlacement.variableOffsets[oe.crossTileID].anchor),oe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[oe.crossTileID]={textOffset:Xe,width:g,height:v,anchor:Oe,textBoxScale:x,prevAnchor:Je},this.markUsedJustification(Te,Oe,oe,Se),Te.allowVerticalPlacement&&(this.markUsedOrientation(Te,Se,oe),this.placedOrientations[oe.crossTileID]=Se),{shift:De,placedGlyphBoxes:Ve}}}placeLayerBucketPart(c,d,g){const{bucket:v,layout:x,posMatrix:A,textLabelPlaneMatrix:M,labelToScreenMatrix:R,textPixelRatio:N,holdingForFade:K,collisionBoxArray:X,partiallyEvaluatedTextSize:oe,collisionGroup:Te}=c.parameters,Se=x.get("text-optional"),Me=x.get("icon-optional"),ye=o.aq(x,"text-overlap","text-allow-overlap"),Oe=ye==="always",Xe=o.aq(x,"icon-overlap","icon-allow-overlap"),De=Xe==="always",Ve=x.get("text-rotation-alignment")==="map",Je=x.get("text-pitch-alignment")==="map",tt=x.get("icon-text-fit")!=="none",rt=x.get("symbol-z-order")==="viewport-y",_t=Oe&&(De||!v.hasIconData()||Me),pt=De&&(Oe||!v.hasTextData()||Se);!v.collisionArrays&&X&&v.deserializeCollisionBoxes(X);const Rt=this.retainedQueryData[v.bucketInstanceId].tileID,Ft=this.terrain?(qt,gn)=>this.terrain.getElevation(Rt,qt,gn):null,Tn=(qt,gn)=>{var Pn,Nn;if(d[qt.crossTileID])return;if(K)return void(this.placements[qt.crossTileID]=new nr(!1,!1,!1));let wn=!1,Dn=!1,zn=!0,mr=null,Wn={box:null,offscreen:null},As={box:null,offscreen:null},Or=null,ar=null,Fr=null,Ms=0,ui=0,Di=0;gn.textFeatureIndex?Ms=gn.textFeatureIndex:qt.useRuntimeCollisionCircles&&(Ms=qt.featureIndex),gn.verticalTextFeatureIndex&&(ui=gn.verticalTextFeatureIndex);const ua=gn.textBox;if(ua){const Pr=Er=>{let cr=o.ah.horizontal;if(v.allowVerticalPlacement&&!Er&&this.prevPlacement){const qs=this.prevPlacement.placedOrientations[qt.crossTileID];qs&&(this.placedOrientations[qt.crossTileID]=qs,cr=qs,this.markUsedOrientation(v,cr,qt))}return cr},lr=(Er,cr)=>{if(v.allowVerticalPlacement&&qt.numVerticalGlyphVertices>0&&gn.verticalTextBox){for(const qs of v.writingModes)if(qs===o.ah.vertical?(Wn=cr(),As=Wn):Wn=Er(),Wn&&Wn.box&&Wn.box.length)break}else Wn=Er()},sr=qt.textAnchorOffsetStartIndex,js=qt.textAnchorOffsetEndIndex;if(js===sr){const Er=(cr,qs)=>{const Ar=this.collisionIndex.placeCollisionBox(cr,ye,N,A,Te.predicate,Ft);return Ar&&Ar.box&&Ar.box.length&&(this.markUsedOrientation(v,qs,qt),this.placedOrientations[qt.crossTileID]=qs),Ar};lr(()=>Er(ua,o.ah.horizontal),()=>{const cr=gn.verticalTextBox;return v.allowVerticalPlacement&&qt.numVerticalGlyphVertices>0&&cr?Er(cr,o.ah.vertical):{box:null,offscreen:null}}),Pr(Wn&&Wn.box&&Wn.box.length)}else{let Er=o.ap[(Nn=(Pn=this.prevPlacement)===null||Pn===void 0?void 0:Pn.variableOffsets[qt.crossTileID])===null||Nn===void 0?void 0:Nn.anchor];const cr=(Ar,vr,pc)=>{const Zu=Ar.x2-Ar.x1,to=Ar.y2-Ar.y1,no=qt.textBoxScale,hl=tt&&Xe==="never"?vr:null;let Li={box:[],offscreen:!1},mc=ye==="never"?1:2,Wu="never";Er&&mc++;for(let _c=0;_c<mc;_c++){for(let gc=sr;gc<js;gc++){const dl=v.textAnchorOffsets.get(gc);if(Er&&dl.textAnchor!==Er)continue;const vc=this.attemptAnchorPlacement(dl,Ar,Zu,to,no,Ve,Je,N,A,Te,Wu,qt,v,pc,hl,Ft);if(vc&&(Li=vc.placedGlyphBoxes,Li&&Li.box&&Li.box.length))return wn=!0,mr=vc.shift,Li}Er?Er=null:Wu=ye}return Li};lr(()=>cr(ua,gn.iconBox,o.ah.horizontal),()=>{const Ar=gn.verticalTextBox;return v.allowVerticalPlacement&&!(Wn&&Wn.box&&Wn.box.length)&&qt.numVerticalGlyphVertices>0&&Ar?cr(Ar,gn.verticalIconBox,o.ah.vertical):{box:null,offscreen:null}}),Wn&&(wn=Wn.box,zn=Wn.offscreen);const qs=Pr(Wn&&Wn.box);if(!wn&&this.prevPlacement){const Ar=this.prevPlacement.variableOffsets[qt.crossTileID];Ar&&(this.variableOffsets[qt.crossTileID]=Ar,this.markUsedJustification(v,Ar.anchor,qt,qs))}}}if(Or=Wn,wn=Or&&Or.box&&Or.box.length>0,zn=Or&&Or.offscreen,qt.useRuntimeCollisionCircles){const Pr=v.text.placedSymbolArray.get(qt.centerJustifiedTextSymbolIndex),lr=o.ai(v.textSizeData,oe,Pr),sr=x.get("text-padding");ar=this.collisionIndex.placeCollisionCircles(ye,Pr,v.lineVertexArray,v.glyphOffsetArray,lr,A,M,R,g,Je,Te.predicate,qt.collisionCircleDiameter,sr,Ft),ar.circles.length&&ar.collisionDetected&&!g&&o.w("Collisions detected, but collision boxes are not shown"),wn=Oe||ar.circles.length>0&&!ar.collisionDetected,zn=zn&&ar.offscreen}if(gn.iconFeatureIndex&&(Di=gn.iconFeatureIndex),gn.iconBox){const Pr=lr=>{const sr=tt&&mr?os(lr,mr.x,mr.y,Ve,Je,this.transform.angle):lr;return this.collisionIndex.placeCollisionBox(sr,Xe,N,A,Te.predicate,Ft)};As&&As.box&&As.box.length&&gn.verticalIconBox?(Fr=Pr(gn.verticalIconBox),Dn=Fr.box.length>0):(Fr=Pr(gn.iconBox),Dn=Fr.box.length>0),zn=zn&&Fr.offscreen}const zi=Se||qt.numHorizontalGlyphVertices===0&&qt.numVerticalGlyphVertices===0,fi=Me||qt.numIconVertices===0;if(zi||fi?fi?zi||(Dn=Dn&&wn):wn=Dn&&wn:Dn=wn=Dn&&wn,wn&&Or&&Or.box&&this.collisionIndex.insertCollisionBox(Or.box,ye,x.get("text-ignore-placement"),v.bucketInstanceId,As&&As.box&&ui?ui:Ms,Te.ID),Dn&&Fr&&this.collisionIndex.insertCollisionBox(Fr.box,Xe,x.get("icon-ignore-placement"),v.bucketInstanceId,Di,Te.ID),ar&&(wn&&this.collisionIndex.insertCollisionCircles(ar.circles,ye,x.get("text-ignore-placement"),v.bucketInstanceId,Ms,Te.ID),g)){const Pr=v.bucketInstanceId;let lr=this.collisionCircleArrays[Pr];lr===void 0&&(lr=this.collisionCircleArrays[Pr]=new Ir);for(let sr=0;sr<ar.circles.length;sr+=4)lr.circles.push(ar.circles[sr+0]),lr.circles.push(ar.circles[sr+1]),lr.circles.push(ar.circles[sr+2]),lr.circles.push(ar.collisionDetected?1:0)}if(qt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[qt.crossTileID]=new nr(wn||_t,Dn||pt,zn||v.justReloaded),d[qt.crossTileID]=!0};if(rt){if(c.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const qt=v.getSortedSymbolIndexes(this.transform.angle);for(let gn=qt.length-1;gn>=0;--gn){const Pn=qt[gn];Tn(v.symbolInstances.get(Pn),v.collisionArrays[Pn])}}else for(let qt=c.symbolInstanceStart;qt<c.symbolInstanceEnd;qt++)Tn(v.symbolInstances.get(qt),v.collisionArrays[qt]);if(g&&v.bucketInstanceId in this.collisionCircleArrays){const qt=this.collisionCircleArrays[v.bucketInstanceId];o.ar(qt.invProjMatrix,A),qt.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(c,d,g,v){let x;x=v===o.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.as(d)];const A=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const M of A)M>=0&&(c.text.placedSymbolArray.get(M).crossTileID=x>=0&&M!==x?0:g.crossTileID)}markUsedOrientation(c,d,g){const v=d===o.ah.horizontal||d===o.ah.horizontalOnly?d:0,x=d===o.ah.vertical?d:0,A=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const M of A)c.text.placedSymbolArray.get(M).placedOrientation=v;g.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let g=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const v=d?d.symbolFadeChange(c):1,x=d?d.opacities:{},A=d?d.variableOffsets:{},M=d?d.placedOrientations:{};for(const R in this.placements){const N=this.placements[R],K=x[R];K?(this.opacities[R]=new Kn(K,v,N.text,N.icon),g=g||N.text!==K.text.placed||N.icon!==K.icon.placed):(this.opacities[R]=new Kn(null,v,N.text,N.icon,N.skipFade),g=g||N.text||N.icon)}for(const R in x){const N=x[R];if(!this.opacities[R]){const K=new Kn(N,v,!1,!1);K.isHidden()||(this.opacities[R]=K,g=g||N.text.placed||N.icon.placed)}}for(const R in A)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=A[R]);for(const R in M)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=M[R]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:c)}updateLayerOpacities(c,d){const g={};for(const v of d){const x=v.getBucket(c);x&&v.latestFeatureIndex&&c.id===x.layerIds[0]&&this.updateBucketOpacities(x,g,v.collisionBoxArray)}}updateBucketOpacities(c,d,g){c.hasTextData()&&(c.text.opacityVertexArray.clear(),c.text.hasVisibleVertices=!1),c.hasIconData()&&(c.icon.opacityVertexArray.clear(),c.icon.hasVisibleVertices=!1),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const v=c.layers[0],x=v.layout,A=new Kn(null,0,!1,!1,!0),M=x.get("text-allow-overlap"),R=x.get("icon-allow-overlap"),N=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),K=x.get("text-rotation-alignment")==="map",X=x.get("text-pitch-alignment")==="map",oe=x.get("icon-text-fit")!=="none",Te=new Kn(null,0,M&&(R||!c.hasIconData()||x.get("icon-optional")),R&&(M||!c.hasTextData()||x.get("text-optional")),!0);!c.collisionArrays&&g&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(g);const Se=(Me,ye,Oe)=>{for(let Xe=0;Xe<ye/4;Xe++)Me.opacityVertexArray.emplaceBack(Oe);Me.hasVisibleVertices=Me.hasVisibleVertices||Oe!==Uo};for(let Me=0;Me<c.symbolInstances.length;Me++){const ye=c.symbolInstances.get(Me),{numHorizontalGlyphVertices:Oe,numVerticalGlyphVertices:Xe,crossTileID:De}=ye;let Ve=this.opacities[De];d[De]?Ve=A:Ve||(Ve=Te,this.opacities[De]=Ve),d[De]=!0;const Je=ye.numIconVertices>0,tt=this.placedOrientations[ye.crossTileID],rt=tt===o.ah.vertical,_t=tt===o.ah.horizontal||tt===o.ah.horizontalOnly;if(Oe>0||Xe>0){const pt=gs(Ve.text);Se(c.text,Oe,rt?Uo:pt),Se(c.text,Xe,_t?Uo:pt);const Rt=Ve.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(qt=>{qt>=0&&(c.text.placedSymbolArray.get(qt).hidden=Rt||rt?1:0)}),ye.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=Rt||_t?1:0);const Ft=this.variableOffsets[ye.crossTileID];Ft&&this.markUsedJustification(c,Ft.anchor,ye,tt);const Tn=this.placedOrientations[ye.crossTileID];Tn&&(this.markUsedJustification(c,"left",ye,Tn),this.markUsedOrientation(c,Tn,ye))}if(Je){const pt=gs(Ve.icon),Rt=!(oe&&ye.verticalPlacedIconSymbolIndex&&rt);ye.placedIconSymbolIndex>=0&&(Se(c.icon,ye.numIconVertices,Rt?pt:Uo),c.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=Ve.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(Se(c.icon,ye.numVerticalIconVertices,Rt?Uo:pt),c.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=Ve.icon.isHidden())}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const pt=c.collisionArrays[Me];if(pt){let Rt=new o.P(0,0);if(pt.textBox||pt.verticalTextBox){let Tn=!0;if(N){const qt=this.variableOffsets[De];qt?(Rt=Rr(qt.anchor,qt.width,qt.height,qt.textOffset,qt.textBoxScale),K&&Rt._rotate(X?this.transform.angle:-this.transform.angle)):Tn=!1}pt.textBox&&Wr(c.textCollisionBox.collisionVertexArray,Ve.text.placed,!Tn||rt,Rt.x,Rt.y),pt.verticalTextBox&&Wr(c.textCollisionBox.collisionVertexArray,Ve.text.placed,!Tn||_t,Rt.x,Rt.y)}const Ft=!!(!_t&&pt.verticalIconBox);pt.iconBox&&Wr(c.iconCollisionBox.collisionVertexArray,Ve.icon.placed,Ft,oe?Rt.x:0,oe?Rt.y:0),pt.verticalIconBox&&Wr(c.iconCollisionBox.collisionVertexArray,Ve.icon.placed,!Ft,oe?Rt.x:0,oe?Rt.y:0)}}}if(c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.text.opacityVertexArray.length!==c.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${c.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${c.text.layoutVertexArray.length}) / 4`);if(c.icon.opacityVertexArray.length!==c.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${c.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${c.icon.layoutVertexArray.length}) / 4`);if(c.bucketInstanceId in this.collisionCircleArrays){const Me=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=Me.invProjMatrix,c.placementViewportMatrix=Me.viewportMatrix,c.collisionCircleArray=Me.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,d){const g=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*g>c}setStale(){this.stale=!0}}function Wr(w,c,d,g,v){w.emplaceBack(c?1:0,d?1:0,g||0,v||0),w.emplaceBack(c?1:0,d?1:0,g||0,v||0),w.emplaceBack(c?1:0,d?1:0,g||0,v||0),w.emplaceBack(c?1:0,d?1:0,g||0,v||0)}const ii=Math.pow(2,25),uu=Math.pow(2,24),Jf=Math.pow(2,17),Hn=Math.pow(2,16),Rl=Math.pow(2,9),Ol=Math.pow(2,8),Ts=Math.pow(2,1);function gs(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const c=w.placed?1:0,d=Math.floor(127*w.opacity);return d*ii+c*uu+d*Jf+c*Hn+d*Rl+c*Ol+d*Ts+c}const Uo=0;class Vs{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&!c.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,d,g,v,x){const A=this._bucketParts;for(;this._currentTileIndex<c.length;)if(d.getBucketParts(A,v,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((M,R)=>M.sortKey-R.sortKey));this._currentPartIndex<A.length;)if(d.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,x())return!0;return!1}}class Us{constructor(c,d,g,v,x,A,M,R){this.placement=new _s(c,d,A,M,R),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(c,d,g){const v=b.now(),x=()=>!this._forceFullPlacement&&b.now()-v>2;for(;this._currentPlacementIndex>=0;){const A=d[c[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=M)&&(!A.maxzoom||A.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new Vs(A)),this._inProgressLayer.continuePlacement(g[A.source],this.placement,this._showCollisionBoxes,A,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const ho=512/o.W/2;class Ia{constructor(c,d,g){this.tileID=c,this.bucketInstanceId=g,this._symbolsByKey={};const v=new Map;for(let x=0;x<d.length;x++){const A=d.get(x),M=A.key,R=v.get(M);R?R.push(A):v.set(M,[A])}for(const[x,A]of v){const M={positions:A.map(R=>({x:Math.floor(R.anchorX*ho),y:Math.floor(R.anchorY*ho)})),crossTileIDs:A.map(R=>R.crossTileID)};if(M.positions.length>128){const R=new o.au(M.positions.length,16,Uint16Array);for(const{x:N,y:K}of M.positions)R.add(N,K);R.finish(),delete M.positions,M.index=R}this._symbolsByKey[x]=M}}getScaledCoordinates(c,d){const{x:g,y:v,z:x}=this.tileID.canonical,{x:A,y:M,z:R}=d.canonical,N=ho/Math.pow(2,R-x),K=(M*o.W+c.anchorY)*N,X=v*o.W*ho;return{x:Math.floor((A*o.W+c.anchorX)*N-g*o.W*ho),y:Math.floor(K-X)}}findMatches(c,d,g){const v=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let x=0;x<c.length;x++){const A=c.get(x);if(A.crossTileID)continue;const M=this._symbolsByKey[A.key];if(!M)continue;const R=this.getScaledCoordinates(A,d);if(M.index){const N=M.index.range(R.x-v,R.y-v,R.x+v,R.y+v).sort();for(const K of N){const X=M.crossTileIDs[K];if(!g[X]){g[X]=!0,A.crossTileID=X;break}}}else if(M.positions)for(let N=0;N<M.positions.length;N++){const K=M.positions[N],X=M.crossTileIDs[N];if(Math.abs(K.x-R.x)<=v&&Math.abs(K.y-R.y)<=v&&!g[X]){g[X]=!0,A.crossTileID=X;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:c})=>c)}}class Tr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class jo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const d=Math.round((c-this.lng)/360);if(d!==0)for(const g in this.indexes){const v=this.indexes[g],x={};for(const A in v){const M=v[A];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+d),x[M.tileID.key]=M}this.indexes[g]=x}this.lng=c}addBucket(c,d,g){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let x=0;x<d.symbolInstances.length;x++)d.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const v=this.usedCrossTileIDs[c.overscaledZ];for(const x in this.indexes){const A=this.indexes[x];if(Number(x)>c.overscaledZ)for(const M in A){const R=A[M];R.tileID.isChildOf(c)&&R.findMatches(d.symbolInstances,c,v)}else{const M=A[c.scaledTo(Number(x)).key];M&&M.findMatches(d.symbolInstances,c,v)}}for(let x=0;x<d.symbolInstances.length;x++){const A=d.symbolInstances.get(x);A.crossTileID||(A.crossTileID=g.generate(),v[A.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new Ia(c,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(c,d){for(const g of d.getCrossTileIDsLists())for(const v of g)delete this.usedCrossTileIDs[c][v]}removeStaleBuckets(c){let d=!1;for(const g in this.indexes){const v=this.indexes[g];for(const x in v)c[v[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,v[x]),delete v[x],d=!0)}return d}}class Ii{constructor(){this.layerIndexes={},this.crossTileIDs=new Tr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,d,g){let v=this.layerIndexes[c.id];v===void 0&&(v=this.layerIndexes[c.id]=new jo);let x=!1;const A={};v.handleWrapJump(g);for(const M of d){const R=M.getBucket(c);R&&c.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(M.tileID,R,this.crossTileIDs)&&(x=!0),A[R.bucketInstanceId]=!0)}return v.removeStaleBuckets(A)&&(x=!0),x}pruneUnusedLayers(c){const d={};c.forEach(g=>{d[g]=!0});for(const g in this.layerIndexes)d[g]||delete this.layerIndexes[g]}}const or=(w,c)=>o.t(w,c&&c.filter(d=>d.identifier!=="source.canvas")),Ta=o.av();class Ps extends o.E{constructor(c,d={}){super(),this._rtlPluginLoaded=()=>{for(const g in this.sourceCaches){const v=this.sourceCaches[g].getSource().type;v!=="vector"&&v!=="geojson"||this.sourceCaches[g].reload()}},this.map=c,this.dispatcher=new Vt(Tt(),c._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,v)=>this.getGlyphs(g,v)),this.dispatcher.registerMessageHandler("GI",(g,v)=>this.getImages(g,v)),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new nt(c._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Et(256,512),this.crossTileSymbolIndex=new Ii,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ax()),Lt().on(Bs,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const v=this.sourceCaches[g.sourceId];if(!v)return;const x=v.getSource();if(x&&x.vectorLayerIds)for(const A in this._layers){const M=this._layers[A];M.source===x.id&&this._validateLayer(M)}})}loadURL(c,d={},g){this.fire(new o.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const v=this.map._requestManager.transformRequest(c,"Style");this._loadStyleRequest=new AbortController,o.h(v,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,d,g)}).catch(x=>{this._loadStyleRequest=null,x&&this.fire(new o.j(x))})}loadJSON(c,d={},g){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(c,d,g)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Ta,{validate:!1})}_load(c,d,g){var v;const x=d.transformStyle?d.transformStyle(g,c):c;if(!d.validate||!or(this,o.x(x))){this._loaded=!0,this.stylesheet=x;for(const A in x.sources)this.addSource(A,x.sources[A],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new At(this.stylesheet.light),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const c=o.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",c),this._order=c.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of c){const g=o.az(d);g.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=g}}_loadSprite(c,d=!1,g=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,A,M,R){return o._(this,void 0,void 0,function*(){const N=we(x),K=M>1?"@2x":"",X={},oe={};for(const{id:Te,url:Se}of N){const Me=A.transformRequest(A.normalizeSpriteURL(Se,K,".json"),"SpriteJSON");X[Te]=o.h(Me,R);const ye=A.transformRequest(A.normalizeSpriteURL(Se,K,".png"),"SpriteImage");oe[Te]=J.getImage(ye,R)}return yield Promise.all([...Object.values(X),...Object.values(oe)]),function(Te,Se){return o._(this,void 0,void 0,function*(){const Me={};for(const ye in Te){Me[ye]={};const Oe=b.getImageCanvasContext((yield Se[ye]).data),Xe=(yield Te[ye]).data;for(const De in Xe){const{width:Ve,height:Je,x:tt,y:rt,sdf:_t,pixelRatio:pt,stretchX:Rt,stretchY:Ft,content:Tn}=Xe[De];Me[ye][De]={data:null,pixelRatio:pt,sdf:_t,stretchX:Rt,stretchY:Ft,content:Tn,spriteData:{width:Ve,height:Je,x:tt,y:rt,context:Oe}}}}return Me})}(X,oe)})}(c,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const A in x){this._spritesImagesIds[A]=[];const M=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(R=>!(R in x)):[];for(const R of M)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in x[A]){const N=A==="default"?R:`${A}:${R}`;this._spritesImagesIds[A].push(N),N in this.imageManager.images?this.imageManager.updateImage(N,x[A][R],!1):this.imageManager.addImage(N,x[A][R]),d&&(this._changedImages[N]=!0)}}}).catch(x=>{this._spriteRequest=null,v=x,this.fire(new o.j(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),g&&g(v)})}_unloadSprite(){for(const c of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(c),this._changedImages[c]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(c){const d=this.sourceCaches[c.source];if(!d)return;const g=c.sourceLayer;if(!g)return;const v=d.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.j(new Error(`Source layer "${g}" does not exist on source "${v.id}" as specified by style layer "${c.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this.sourceCaches)if(!this.sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(c){const d=this._serializedAllLayers();if(!c||c.length===0)return Object.values(d);const g=[];for(const v of c)d[v]&&g.push(d[v]);return g}_serializedAllLayers(){let c=this._serializedLayers;if(c)return c;c=this._serializedLayers={};const d=Object.keys(this._layers);for(const g of d){const v=this._layers[g];v.type!=="custom"&&(c[g]=v.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const c in this.sourceCaches)if(this.sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(c){if(!this._loaded)return;const d=this._changed;if(d){const v=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(v.length||x.length)&&this._updateWorkerLayers(v,x);for(const A in this._updatedSources){const M=this._updatedSources[A];if(M==="reload")this._reloadSource(A);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(c);this.light.updateTransitions(c),this._resetUpdates()}const g={};for(const v in this.sourceCaches){const x=this.sourceCaches[v];g[v]=x.used,x.used=!1}for(const v of this._order){const x=this._layers[v];x.recalculate(c,this._availableImages),!x.isHidden(c.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const v in g){const x=this.sourceCaches[v];!!g[v]!=!!x.used&&x.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(c),this.z=c.zoom,d&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(c,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(c),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(c,d={}){var g;this._checkLoaded();const v=this.serialize();if(c=d.transformStyle?d.transformStyle(v,c):c,((g=d.validate)===null||g===void 0||g)&&or(this,o.x(c)))return!1;(c=o.aA(c)).layers=o.ay(c.layers);const x=o.aB(v,c),A=this._getOperationsToPerform(x);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const M of A.operations)M();return this.stylesheet=c,this._serializedLayers=null,!0}_getOperationsToPerform(c){const d=[],g=[];for(const v of c)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":d.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":d.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,v.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setTransition":d.push(()=>{});break;default:g.push(v.command)}return{operations:d,unimplemented:g}}addImage(c,d){if(this.getImage(c))return this.fire(new o.j(new Error(`An image named "${c}" already exists.`)));this.imageManager.addImage(c,d),this._afterImageUpdated(c)}updateImage(c,d){this.imageManager.updateImage(c,d)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){if(!this.getImage(c))return this.fire(new o.j(new Error(`An image named "${c}" does not exist.`)));this.imageManager.removeImage(c),this._afterImageUpdated(c)}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(c,d,g={}){if(this._checkLoaded(),this.sourceCaches[c]!==void 0)throw new Error(`Source "${c}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.x.source,`sources.${c}`,d,null,g))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const v=this.sourceCaches[c]=new Zr(c,d,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:c})),v.onAdd(this.map),this._changed=!0}removeSource(c){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===c)return this.fire(new o.j(new Error(`Source "${c}" cannot be removed while layer "${g}" is using it.`)));const d=this.sourceCaches[c];delete this.sourceCaches[c],delete this._updatedSources[c],d.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:c})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(c,d){if(this._checkLoaded(),this.sourceCaches[c]===void 0)throw new Error(`There is no source with this ID=${c}`);const g=this.sourceCaches[c].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(d),this._changed=!0}getSource(c){return this.sourceCaches[c]&&this.sourceCaches[c].getSource()}addLayer(c,d,g={}){this._checkLoaded();const v=c.id;if(this.getLayer(v))return void this.fire(new o.j(new Error(`Layer "${v}" already exists on this map.`)));let x;if(c.type==="custom"){if(or(this,o.aC(c)))return;x=o.az(c)}else{if("source"in c&&typeof c.source=="object"&&(this.addSource(v,c.source),c=o.aA(c),c=o.e(c,{source:v})),this._validate(o.x.layer,`layers.${v}`,c,{arrayIndex:-1},g))return;x=o.az(c),this._validateLayer(x),x.setEventedParent(this,{layer:{id:v}})}const A=d?this._order.indexOf(d):this._order.length;if(d&&A===-1)this.fire(new o.j(new Error(`Cannot add layer "${v}" before non-existing layer "${d}".`)));else{if(this._order.splice(A,0,v),this._layerOrderChanged=!0,this._layers[v]=x,this._removedLayers[v]&&x.source&&x.type!=="custom"){const M=this._removedLayers[v];delete this._removedLayers[v],M.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(c,d){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new o.j(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===d)return;const g=this._order.indexOf(c);this._order.splice(g,1);const v=d?this._order.indexOf(d):this._order.length;d&&v===-1?this.fire(new o.j(new Error(`Cannot move layer "${c}" before non-existing layer "${d}".`))):(this._order.splice(v,0,c),this._layerOrderChanged=!0)}removeLayer(c){this._checkLoaded();const d=this._layers[c];if(!d)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${c}".`)));d.setEventedParent(null);const g=this._order.indexOf(c);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=d,delete this._layers[c],this._serializedLayers&&delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],d.onRemove&&d.onRemove(this.map)}getLayer(c){return this._layers[c]}getLayersOrder(){return[...this._order]}hasLayer(c){return c in this._layers}setLayerZoomRange(c,d,g){this._checkLoaded();const v=this.getLayer(c);v?v.minzoom===d&&v.maxzoom===g||(d!=null&&(v.minzoom=d),g!=null&&(v.maxzoom=g),this._updateLayer(v)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${c}".`)))}setFilter(c,d,g={}){this._checkLoaded();const v=this.getLayer(c);if(v){if(!o.aD(v.filter,d))return d==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(o.x.filter,`layers.${v.id}.filter`,d,null,g)||(v.filter=o.aA(d),this._updateLayer(v)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${c}".`)))}getFilter(c){return o.aA(this.getLayer(c).filter)}setLayoutProperty(c,d,g,v={}){this._checkLoaded();const x=this.getLayer(c);x?o.aD(x.getLayoutProperty(d),g)||(x.setLayoutProperty(d,g,v),this._updateLayer(x)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${c}".`)))}getLayoutProperty(c,d){const g=this.getLayer(c);if(g)return g.getLayoutProperty(d);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${c}".`)))}setPaintProperty(c,d,g,v={}){this._checkLoaded();const x=this.getLayer(c);x?o.aD(x.getPaintProperty(d),g)||(x.setPaintProperty(d,g,v)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[c]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${c}".`)))}getPaintProperty(c,d){return this.getLayer(c).getPaintProperty(d)}setFeatureState(c,d){this._checkLoaded();const g=c.source,v=c.sourceLayer,x=this.sourceCaches[g];if(x===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));const A=x.getSource().type;A==="geojson"&&v?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||v?(c.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(v,c.id,d)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(c,d){this._checkLoaded();const g=c.source,v=this.sourceCaches[g];if(v===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));const x=v.getSource().type,A=x==="vector"?c.sourceLayer:void 0;x!=="vector"||A?d&&typeof c.id!="string"&&typeof c.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(A,c.id,d):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(c){this._checkLoaded();const d=c.source,g=c.sourceLayer,v=this.sourceCaches[d];if(v!==void 0)return v.getSource().type!=="vector"||g?(c.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),v.getFeatureState(g,c.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const c=o.aE(this.sourceCaches,x=>x.serialize()),d=this._serializeByIds(this._order),g=this.map.getTerrain()||void 0,v=this.stylesheet;return o.aF({version:v.version,name:v.name,metadata:v.metadata,light:v.light,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,sources:c,layers:d,terrain:g},x=>x!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0,c.source&&!this._updatedSources[c.source]&&this.sourceCaches[c.source].getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",this.sourceCaches[c.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(c){const d=A=>this._layers[A].type==="fill-extrusion",g={},v=[];for(let A=this._order.length-1;A>=0;A--){const M=this._order[A];if(d(M)){g[M]=A;for(const R of c){const N=R[M];if(N)for(const K of N)v.push(K)}}}v.sort((A,M)=>M.intersectionZ-A.intersectionZ);const x=[];for(let A=this._order.length-1;A>=0;A--){const M=this._order[A];if(d(M))for(let R=v.length-1;R>=0;R--){const N=v[R].feature;if(g[N.layer.id]<A)break;x.push(N),v.pop()}else for(const R of c){const N=R[M];if(N)for(const K of N)x.push(K.feature)}}return x}queryRenderedFeatures(c,d,g){d&&d.filter&&this._validate(o.x.filter,"queryRenderedFeatures.filter",d.filter,null,d);const v={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const M of d.layers){const R=this._layers[M];if(!R)return this.fire(new o.j(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];v[R.source]=!0}}const x=[];d.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const M in this.sourceCaches)d.layers&&!v[M]||x.push(Mt(this.sourceCaches[M],this._layers,A,c,d,g));return this.placement&&x.push(function(M,R,N,K,X,oe,Te){const Se={},Me=oe.queryRenderedSymbols(K),ye=[];for(const Oe of Object.keys(Me).map(Number))ye.push(Te[Oe]);ye.sort(Qe);for(const Oe of ye){const Xe=Oe.featureIndex.lookupSymbolFeatures(Me[Oe.bucketInstanceId],R,Oe.bucketIndex,Oe.sourceLayerIndex,X.filter,X.layers,X.availableImages,M);for(const De in Xe){const Ve=Se[De]=Se[De]||[],Je=Xe[De];Je.sort((tt,rt)=>{const _t=Oe.featureSortOrder;if(_t){const pt=_t.indexOf(tt.featureIndex);return _t.indexOf(rt.featureIndex)-pt}return rt.featureIndex-tt.featureIndex});for(const tt of Je)Ve.push(tt)}}for(const Oe in Se)Se[Oe].forEach(Xe=>{const De=Xe.feature,Ve=N[M[Oe].source].getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=Ve});return Se}(this._layers,A,this.sourceCaches,c,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(c,d){d&&d.filter&&this._validate(o.x.filter,"querySourceFeatures.filter",d.filter,null,d);const g=this.sourceCaches[c];return g?function(v,x){const A=v.getRenderableIds().map(N=>v.getTileByID(N)),M=[],R={};for(let N=0;N<A.length;N++){const K=A[N],X=K.tileID.canonical.key;R[X]||(R[X]=!0,K.querySourceFeatures(M,x))}return M}(g,d):[]}getLight(){return this.light.getLight()}setLight(c,d={}){this._checkLoaded();const g=this.light.getLight();let v=!1;for(const A in c)if(!o.aD(c[A],g[A])){v=!0;break}if(!v)return;const x={now:b.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(c,d),this.light.updateTransitions(x)}_validate(c,d,g,v,x={}){return(!x||x.validate!==!1)&&or(this,c.call(o.x,o.e({key:d,style:this.serialize(),value:g,styleSpec:o.v},v)))}_remove(c=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Lt().off(Bs,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const g=this.sourceCaches[d];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),c&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(c)}_clearSource(c){this.sourceCaches[c].clearTiles()}_reloadSource(c){this.sourceCaches[c].resume(),this.sourceCaches[c].reload()}_updateSources(c){for(const d in this.sourceCaches)this.sourceCaches[d].update(c,this.map.terrain)}_generateCollisionBoxes(){for(const c in this.sourceCaches)this._reloadSource(c)}_updatePlacement(c,d,g,v,x=!1){let A=!1,M=!1;const R={};for(const N of this._order){const K=this._layers[N];if(K.type!=="symbol")continue;if(!R[K.source]){const oe=this.sourceCaches[K.source];R[K.source]=oe.getRenderableIds(!0).map(Te=>oe.getTileByID(Te)).sort((Te,Se)=>Se.tileID.overscaledZ-Te.tileID.overscaledZ||(Te.tileID.isLessThan(Se.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer(K,R[K.source],c.center.lng);A=A||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),c.zoom))&&(this.pauseablePlacement=new Us(c,this.map.terrain,this._order,x,d,g,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),M=!0),A&&this.pauseablePlacement.placement.setStale()),M||A)for(const N of this._order){const K=this._layers[N];K.type==="symbol"&&this.placement.updateLayerOpacities(K,R[K.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const c in this.sourceCaches)this.sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,d){return o._(this,void 0,void 0,function*(){const g=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[d.source];return v&&v.setDependencies(d.tileID.key,d.type,d.icons),g})}getGlyphs(c,d){return o._(this,void 0,void 0,function*(){const g=yield this.glyphManager.getGlyphs(d.stacks),v=this.sourceCaches[d.source];return v&&v.setDependencies(d.tileID.key,d.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(c,d={}){this._checkLoaded(),c&&this._validate(o.x.glyphs,"glyphs",c,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=c,this.glyphManager.entries={},this.glyphManager.setURL(c))}addSprite(c,d,g={},v){this._checkLoaded();const x=[{id:c,url:d}],A=[...we(this.stylesheet.sprite),...x];this._validate(o.x.sprite,"sprite",A,null,g)||(this.stylesheet.sprite=A,this._loadSprite(x,!0,v))}removeSprite(c){this._checkLoaded();const d=we(this.stylesheet.sprite);if(d.find(g=>g.id===c)){if(this._spritesImagesIds[c])for(const g of this._spritesImagesIds[c])this.imageManager.removeImage(g),this._changedImages[g]=!0;d.splice(d.findIndex(g=>g.id===c),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[c],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${c}" doesn't exists on this map.`)))}getSprite(){return we(this.stylesheet.sprite)}setSprite(c,d={},g){this._checkLoaded(),c&&this._validate(o.x.sprite,"sprite",c,null,d)||(this.stylesheet.sprite=c,c?this._loadSprite(c,!0,g):(this._unloadSprite(),g&&g(null)))}}var Pa=o.X([{name:"a_pos",type:"Int16",components:2}]),oi="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const qo={prelude:Zn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Zn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Zn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Zn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Zn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Zn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Zn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Zn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Zn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Zn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Zn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Zn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Zn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Zn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Zn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Zn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Zn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Zn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Zn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Zn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Zn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Zn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Zn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Zn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Zn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",oi),terrainDepth:Zn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",oi),terrainCoords:Zn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",oi)};function Zn(w,c){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=c.match(/attribute ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=c.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=x?x.concat(v):v,M={};return{fragmentSource:w=w.replace(d,(R,N,K,X,oe)=>(M[oe]=!0,N==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
varying ${K} ${X} ${oe};
#else
uniform ${K} ${X} u_${oe};
#endif
`:`
#ifdef HAS_UNIFORM_u_${oe}
    ${K} ${X} ${oe} = u_${oe};
#endif
`)),vertexSource:c=c.replace(d,(R,N,K,X,oe)=>{const Te=X==="float"?"vec2":"vec4",Se=oe.match(/color/)?"color":Te;return M[oe]?N==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
attribute ${K} ${Te} a_${oe};
varying ${K} ${X} ${oe};
#else
uniform ${K} ${X} u_${oe};
#endif
`:Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = a_${oe};
#else
    ${K} ${X} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${oe} = unpack_mix_${Se}(a_${oe}, u_${oe}_t);
#else
    ${K} ${X} ${oe} = u_${oe};
#endif
`:N==="define"?`
#ifndef HAS_UNIFORM_u_${oe}
uniform lowp float u_${oe}_t;
attribute ${K} ${Te} a_${oe};
#else
uniform ${K} ${X} u_${oe};
#endif
`:Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${oe}
    ${K} ${X} ${oe} = a_${oe};
#else
    ${K} ${X} ${oe} = u_${oe};
#endif
`:`
#ifndef HAS_UNIFORM_u_${oe}
    ${K} ${X} ${oe} = unpack_mix_${Se}(a_${oe}, u_${oe}_t);
#else
    ${K} ${X} ${oe} = u_${oe};
#endif
`}),staticAttributes:g,staticUniforms:A}}class Ea{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(c,d,g,v,x,A,M,R,N){this.context=c;let K=this.boundPaintVertexBuffers.length!==v.length;for(let X=0;!K&&X<v.length;X++)this.boundPaintVertexBuffers[X]!==v[X]&&(K=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==g||K||this.boundIndexBuffer!==x||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==N?this.freshBind(d,g,v,x,A,M,R,N):(c.bindVertexArray.set(this.vao),M&&M.bind(),x&&x.dynamicDraw&&x.bind(),R&&R.bind(),N&&N.bind())}freshBind(c,d,g,v,x,A,M,R){const N=c.numAttributes,K=this.context,X=K.gl;this.vao&&this.destroy(),this.vao=K.createVertexArray(),K.bindVertexArray.set(this.vao),this.boundProgram=c,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=v,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=R,d.enableAttributes(X,c);for(const oe of g)oe.enableAttributes(X,c);A&&A.enableAttributes(X,c),M&&M.enableAttributes(X,c),R&&R.enableAttributes(X,c),d.bind(),d.setVertexAttribPointers(X,c,x);for(const oe of g)oe.bind(),oe.setVertexAttribPointers(X,c,x);A&&(A.bind(),A.setVertexAttribPointers(X,c,x)),v&&v.bind(),M&&(M.bind(),M.setVertexAttribPointers(X,c,x)),R&&(R.bind(),R.setVertexAttribPointers(X,c,x)),K.currentNumAttributes=N}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function po(w){const c=[];for(let d=0;d<w.length;d++){if(w[d]===null)continue;const g=w[d].split(" ");c.push(g.pop())}return c}class Ti{constructor(c,d,g,v,x,A){const M=c.gl;this.program=M.createProgram();const R=po(d.staticAttributes),N=g?g.getBinderAttributes():[],K=R.concat(N),X=qo.prelude.staticUniforms?po(qo.prelude.staticUniforms):[],oe=d.staticUniforms?po(d.staticUniforms):[],Te=g?g.getBinderUniforms():[],Se=X.concat(oe).concat(Te),Me=[];for(const tt of Se)Me.indexOf(tt)<0&&Me.push(tt);const ye=g?g.defines():[];x&&ye.push("#define OVERDRAW_INSPECTOR;"),A&&ye.push("#define TERRAIN3D;");const Oe=ye.concat(qo.prelude.fragmentSource,d.fragmentSource).join(`
`),Xe=ye.concat(qo.prelude.vertexSource,d.vertexSource).join(`
`),De=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(De,Oe),M.compileShader(De),!M.getShaderParameter(De,M.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${M.getShaderInfoLog(De)}`);M.attachShader(this.program,De);const Ve=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);if(M.shaderSource(Ve,Xe),M.compileShader(Ve),!M.getShaderParameter(Ve,M.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${M.getShaderInfoLog(Ve)}`);M.attachShader(this.program,Ve),this.attributes={};const Je={};this.numAttributes=K.length;for(let tt=0;tt<this.numAttributes;tt++)K[tt]&&(M.bindAttribLocation(this.program,tt,K[tt]),this.attributes[K[tt]]=tt);if(M.linkProgram(this.program),!M.getProgramParameter(this.program,M.LINK_STATUS))throw new Error(`Program failed to link: ${M.getProgramInfoLog(this.program)}`);M.deleteShader(Ve),M.deleteShader(De);for(let tt=0;tt<Me.length;tt++){const rt=Me[tt];if(rt&&!Je[rt]){const _t=M.getUniformLocation(this.program,rt);_t&&(Je[rt]=_t)}}this.fixedUniforms=v(c,Je),this.terrainUniforms=((tt,rt)=>({u_depth:new o.aG(tt,rt.u_depth),u_terrain:new o.aG(tt,rt.u_terrain),u_terrain_dim:new o.aH(tt,rt.u_terrain_dim),u_terrain_matrix:new o.aI(tt,rt.u_terrain_matrix),u_terrain_unpack:new o.aJ(tt,rt.u_terrain_unpack),u_terrain_exaggeration:new o.aH(tt,rt.u_terrain_exaggeration)}))(c,Je),this.binderUniforms=g?g.getUniforms(c,Je):[]}draw(c,d,g,v,x,A,M,R,N,K,X,oe,Te,Se,Me,ye,Oe,Xe){const De=c.gl;if(this.failedToCreate)return;if(c.program.set(this.program),c.setDepthMode(g),c.setStencilMode(v),c.setColorMode(x),c.setCullFace(A),R){c.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,R.depthTexture),c.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,R.texture);for(const Je in this.terrainUniforms)this.terrainUniforms[Je].set(R[Je])}for(const Je in this.fixedUniforms)this.fixedUniforms[Je].set(M[Je]);Me&&Me.setUniforms(c,this.binderUniforms,Te,{zoom:Se});let Ve=0;switch(d){case De.LINES:Ve=2;break;case De.TRIANGLES:Ve=3;break;case De.LINE_STRIP:Ve=1}for(const Je of oe.get()){const tt=Je.vaos||(Je.vaos={});(tt[N]||(tt[N]=new Ea)).bind(c,this,K,Me?Me.getPaintVertexBuffers():[],X,Je.vertexOffset,ye,Oe,Xe),De.drawElements(d,Je.primitiveLength*Ve,De.UNSIGNED_SHORT,Je.primitiveOffset*Ve*2)}}}function Aa(w,c,d){const g=1/kn(d,1,c.transform.tileZoom),v=Math.pow(2,d.tileID.overscaledZ),x=d.tileSize*Math.pow(2,c.transform.tileZoom)/v,A=x*(d.tileID.canonical.x+d.tileID.wrap*v),M=x*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[g,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[A>>16,M>>16],u_pixel_coord_lower:[65535&A,65535&M]}}const Go=(w,c,d,g)=>{const v=c.style.light,x=v.properties.get("position"),A=[x.x,x.y,x.z],M=function(){var N=new o.A(9);return o.A!=Float32Array&&(N[1]=0,N[2]=0,N[3]=0,N[5]=0,N[6]=0,N[7]=0),N[0]=1,N[4]=1,N[8]=1,N}();v.properties.get("anchor")==="viewport"&&function(N,K){var X=Math.sin(K),oe=Math.cos(K);N[0]=oe,N[1]=X,N[2]=0,N[3]=-X,N[4]=oe,N[5]=0,N[6]=0,N[7]=0,N[8]=1}(M,-c.transform.angle),function(N,K,X){var oe=K[0],Te=K[1],Se=K[2];N[0]=oe*X[0]+Te*X[3]+Se*X[6],N[1]=oe*X[1]+Te*X[4]+Se*X[7],N[2]=oe*X[2]+Te*X[5]+Se*X[8]}(A,A,M);const R=v.properties.get("color");return{u_matrix:w,u_lightpos:A,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+d,u_opacity:g}},Yf=(w,c,d,g,v,x,A)=>o.e(Go(w,c,d,g),Aa(x,c,A),{u_height_factor:-Math.pow(2,v.overscaledZ)/A.tileSize/8}),fu=w=>({u_matrix:w}),Ma=(w,c,d,g)=>o.e(fu(w),Aa(d,c,g)),Qf=(w,c)=>({u_matrix:w,u_world:c}),hu=(w,c,d,g,v)=>o.e(Ma(w,c,d,g),{u_world:v}),eh=(w,c,d,g)=>{const v=w.transform;let x,A;if(g.paint.get("circle-pitch-alignment")==="map"){const M=kn(d,1,v.zoom);x=!0,A=[M,M]}else x=!1,A=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:w.translatePosMatrix(c.posMatrix,d,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:A}},du=(w,c,d)=>{const g=kn(d,1,c.zoom),v=Math.pow(2,c.zoom-d.tileID.overscaledZ),x=d.tileID.overscaleFactor();return{u_matrix:w,u_camera_to_center_distance:c.cameraToCenterDistance,u_pixels_to_tile_units:g,u_extrude_scale:[c.pixelsToGLUnits[0]/(g*v),c.pixelsToGLUnits[1]/(g*v)],u_overscale_factor:x}},pu=(w,c,d=1)=>({u_matrix:w,u_color:c,u_overlay:0,u_overlay_scale:d}),Da=w=>({u_matrix:w}),mu=(w,c,d,g)=>({u_matrix:w,u_extrude_scale:kn(c,1,d),u_intensity:g});function _u(w,c){const d=Math.pow(2,c.canonical.z),g=c.canonical.y;return[new o.Y(0,g/d).toLngLat().lat,new o.Y(0,(g+1)/d).toLngLat().lat]}const za=(w,c,d,g)=>{const v=w.transform;return{u_matrix:Ho(w,c,d,g),u_ratio:1/kn(c,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},gu=(w,c,d,g,v)=>o.e(za(w,c,d,v),{u_image:0,u_image_height:g}),Zi=(w,c,d,g,v)=>{const x=w.transform,A=Es(c,x);return{u_matrix:Ho(w,c,d,v),u_texsize:c.imageAtlasTexture.size,u_ratio:1/kn(c,1,x.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[A,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},La=(w,c,d,g,v,x)=>{const A=w.lineAtlas,M=Es(c,w.transform),R=d.layout.get("line-cap")==="round",N=A.getDash(g.from,R),K=A.getDash(g.to,R),X=N.width*v.fromScale,oe=K.width*v.toScale;return o.e(za(w,c,d,x),{u_patternscale_a:[M/X,-N.height/2],u_patternscale_b:[M/oe,-K.height/2],u_sdfgamma:A.width/(256*Math.min(X,oe)*w.pixelRatio)/2,u_image:0,u_tex_y_a:N.y,u_tex_y_b:K.y,u_mix:v.t})};function Es(w,c){return 1/kn(w,1,c.tileZoom)}function Ho(w,c,d,g){return w.translatePosMatrix(g?g.posMatrix:c.tileID.posMatrix,c,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Ra=(w,c,d,g,v)=>{return{u_matrix:w,u_tl_parent:c,u_scale_parent:d,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(A=v.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(x=v.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:Zo(v.paint.get("raster-hue-rotate"))};var x,A};function Zo(w){w*=Math.PI/180;const c=Math.sin(w),d=Math.cos(w);return[(2*d+1)/3,(-Math.sqrt(3)*c-d+1)/3,(Math.sqrt(3)*c-d+1)/3]}const Wo=(w,c,d,g,v,x,A,M,R,N)=>{const K=v.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:K.width/K.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:A,u_coord_matrix:M,u_is_text:+R,u_pitch_with_map:+g,u_texsize:N,u_texture:0}},Ko=(w,c,d,g,v,x,A,M,R,N,K)=>{const X=v.transform;return o.e(Wo(w,c,d,g,v,x,A,M,R,N),{u_gamma_scale:g?Math.cos(X._pitch)*X.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:+K})},Xo=(w,c,d,g,v,x,A,M,R,N)=>o.e(Ko(w,c,d,g,v,x,A,M,!0,R,!0),{u_texsize_icon:N,u_texture_icon:1}),th=(w,c,d)=>({u_matrix:w,u_opacity:c,u_color:d}),nh=(w,c,d,g,v,x)=>o.e(function(A,M,R,N){const K=R.imageManager.getPattern(A.from.toString()),X=R.imageManager.getPattern(A.to.toString()),{width:oe,height:Te}=R.imageManager.getPixelSize(),Se=Math.pow(2,N.tileID.overscaledZ),Me=N.tileSize*Math.pow(2,R.transform.tileZoom)/Se,ye=Me*(N.tileID.canonical.x+N.tileID.wrap*Se),Oe=Me*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:K.tl,u_pattern_br_a:K.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[oe,Te],u_mix:M.t,u_pattern_size_a:K.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/kn(N,1,R.transform.tileZoom),u_pixel_coord_upper:[ye>>16,Oe>>16],u_pixel_coord_lower:[65535&ye,65535&Oe]}}(g,x,d,v),{u_matrix:w,u_opacity:c}),vu={fillExtrusion:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_lightpos:new o.aK(w,c.u_lightpos),u_lightintensity:new o.aH(w,c.u_lightintensity),u_lightcolor:new o.aK(w,c.u_lightcolor),u_vertical_gradient:new o.aH(w,c.u_vertical_gradient),u_opacity:new o.aH(w,c.u_opacity)}),fillExtrusionPattern:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_lightpos:new o.aK(w,c.u_lightpos),u_lightintensity:new o.aH(w,c.u_lightintensity),u_lightcolor:new o.aK(w,c.u_lightcolor),u_vertical_gradient:new o.aH(w,c.u_vertical_gradient),u_height_factor:new o.aH(w,c.u_height_factor),u_image:new o.aG(w,c.u_image),u_texsize:new o.aL(w,c.u_texsize),u_pixel_coord_upper:new o.aL(w,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL(w,c.u_pixel_coord_lower),u_scale:new o.aK(w,c.u_scale),u_fade:new o.aH(w,c.u_fade),u_opacity:new o.aH(w,c.u_opacity)}),fill:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix)}),fillPattern:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_image:new o.aG(w,c.u_image),u_texsize:new o.aL(w,c.u_texsize),u_pixel_coord_upper:new o.aL(w,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL(w,c.u_pixel_coord_lower),u_scale:new o.aK(w,c.u_scale),u_fade:new o.aH(w,c.u_fade)}),fillOutline:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_world:new o.aL(w,c.u_world)}),fillOutlinePattern:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_world:new o.aL(w,c.u_world),u_image:new o.aG(w,c.u_image),u_texsize:new o.aL(w,c.u_texsize),u_pixel_coord_upper:new o.aL(w,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL(w,c.u_pixel_coord_lower),u_scale:new o.aK(w,c.u_scale),u_fade:new o.aH(w,c.u_fade)}),circle:(w,c)=>({u_camera_to_center_distance:new o.aH(w,c.u_camera_to_center_distance),u_scale_with_map:new o.aG(w,c.u_scale_with_map),u_pitch_with_map:new o.aG(w,c.u_pitch_with_map),u_extrude_scale:new o.aL(w,c.u_extrude_scale),u_device_pixel_ratio:new o.aH(w,c.u_device_pixel_ratio),u_matrix:new o.aI(w,c.u_matrix)}),collisionBox:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_camera_to_center_distance:new o.aH(w,c.u_camera_to_center_distance),u_pixels_to_tile_units:new o.aH(w,c.u_pixels_to_tile_units),u_extrude_scale:new o.aL(w,c.u_extrude_scale),u_overscale_factor:new o.aH(w,c.u_overscale_factor)}),collisionCircle:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_inv_matrix:new o.aI(w,c.u_inv_matrix),u_camera_to_center_distance:new o.aH(w,c.u_camera_to_center_distance),u_viewport_size:new o.aL(w,c.u_viewport_size)}),debug:(w,c)=>({u_color:new o.aM(w,c.u_color),u_matrix:new o.aI(w,c.u_matrix),u_overlay:new o.aG(w,c.u_overlay),u_overlay_scale:new o.aH(w,c.u_overlay_scale)}),clippingMask:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix)}),heatmap:(w,c)=>({u_extrude_scale:new o.aH(w,c.u_extrude_scale),u_intensity:new o.aH(w,c.u_intensity),u_matrix:new o.aI(w,c.u_matrix)}),heatmapTexture:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_world:new o.aL(w,c.u_world),u_image:new o.aG(w,c.u_image),u_color_ramp:new o.aG(w,c.u_color_ramp),u_opacity:new o.aH(w,c.u_opacity)}),hillshade:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_image:new o.aG(w,c.u_image),u_latrange:new o.aL(w,c.u_latrange),u_light:new o.aL(w,c.u_light),u_shadow:new o.aM(w,c.u_shadow),u_highlight:new o.aM(w,c.u_highlight),u_accent:new o.aM(w,c.u_accent)}),hillshadePrepare:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_image:new o.aG(w,c.u_image),u_dimension:new o.aL(w,c.u_dimension),u_zoom:new o.aH(w,c.u_zoom),u_unpack:new o.aJ(w,c.u_unpack)}),line:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_ratio:new o.aH(w,c.u_ratio),u_device_pixel_ratio:new o.aH(w,c.u_device_pixel_ratio),u_units_to_pixels:new o.aL(w,c.u_units_to_pixels)}),lineGradient:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_ratio:new o.aH(w,c.u_ratio),u_device_pixel_ratio:new o.aH(w,c.u_device_pixel_ratio),u_units_to_pixels:new o.aL(w,c.u_units_to_pixels),u_image:new o.aG(w,c.u_image),u_image_height:new o.aH(w,c.u_image_height)}),linePattern:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_texsize:new o.aL(w,c.u_texsize),u_ratio:new o.aH(w,c.u_ratio),u_device_pixel_ratio:new o.aH(w,c.u_device_pixel_ratio),u_image:new o.aG(w,c.u_image),u_units_to_pixels:new o.aL(w,c.u_units_to_pixels),u_scale:new o.aK(w,c.u_scale),u_fade:new o.aH(w,c.u_fade)}),lineSDF:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_ratio:new o.aH(w,c.u_ratio),u_device_pixel_ratio:new o.aH(w,c.u_device_pixel_ratio),u_units_to_pixels:new o.aL(w,c.u_units_to_pixels),u_patternscale_a:new o.aL(w,c.u_patternscale_a),u_patternscale_b:new o.aL(w,c.u_patternscale_b),u_sdfgamma:new o.aH(w,c.u_sdfgamma),u_image:new o.aG(w,c.u_image),u_tex_y_a:new o.aH(w,c.u_tex_y_a),u_tex_y_b:new o.aH(w,c.u_tex_y_b),u_mix:new o.aH(w,c.u_mix)}),raster:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_tl_parent:new o.aL(w,c.u_tl_parent),u_scale_parent:new o.aH(w,c.u_scale_parent),u_buffer_scale:new o.aH(w,c.u_buffer_scale),u_fade_t:new o.aH(w,c.u_fade_t),u_opacity:new o.aH(w,c.u_opacity),u_image0:new o.aG(w,c.u_image0),u_image1:new o.aG(w,c.u_image1),u_brightness_low:new o.aH(w,c.u_brightness_low),u_brightness_high:new o.aH(w,c.u_brightness_high),u_saturation_factor:new o.aH(w,c.u_saturation_factor),u_contrast_factor:new o.aH(w,c.u_contrast_factor),u_spin_weights:new o.aK(w,c.u_spin_weights)}),symbolIcon:(w,c)=>({u_is_size_zoom_constant:new o.aG(w,c.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aG(w,c.u_is_size_feature_constant),u_size_t:new o.aH(w,c.u_size_t),u_size:new o.aH(w,c.u_size),u_camera_to_center_distance:new o.aH(w,c.u_camera_to_center_distance),u_pitch:new o.aH(w,c.u_pitch),u_rotate_symbol:new o.aG(w,c.u_rotate_symbol),u_aspect_ratio:new o.aH(w,c.u_aspect_ratio),u_fade_change:new o.aH(w,c.u_fade_change),u_matrix:new o.aI(w,c.u_matrix),u_label_plane_matrix:new o.aI(w,c.u_label_plane_matrix),u_coord_matrix:new o.aI(w,c.u_coord_matrix),u_is_text:new o.aG(w,c.u_is_text),u_pitch_with_map:new o.aG(w,c.u_pitch_with_map),u_texsize:new o.aL(w,c.u_texsize),u_texture:new o.aG(w,c.u_texture)}),symbolSDF:(w,c)=>({u_is_size_zoom_constant:new o.aG(w,c.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aG(w,c.u_is_size_feature_constant),u_size_t:new o.aH(w,c.u_size_t),u_size:new o.aH(w,c.u_size),u_camera_to_center_distance:new o.aH(w,c.u_camera_to_center_distance),u_pitch:new o.aH(w,c.u_pitch),u_rotate_symbol:new o.aG(w,c.u_rotate_symbol),u_aspect_ratio:new o.aH(w,c.u_aspect_ratio),u_fade_change:new o.aH(w,c.u_fade_change),u_matrix:new o.aI(w,c.u_matrix),u_label_plane_matrix:new o.aI(w,c.u_label_plane_matrix),u_coord_matrix:new o.aI(w,c.u_coord_matrix),u_is_text:new o.aG(w,c.u_is_text),u_pitch_with_map:new o.aG(w,c.u_pitch_with_map),u_texsize:new o.aL(w,c.u_texsize),u_texture:new o.aG(w,c.u_texture),u_gamma_scale:new o.aH(w,c.u_gamma_scale),u_device_pixel_ratio:new o.aH(w,c.u_device_pixel_ratio),u_is_halo:new o.aG(w,c.u_is_halo)}),symbolTextAndIcon:(w,c)=>({u_is_size_zoom_constant:new o.aG(w,c.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aG(w,c.u_is_size_feature_constant),u_size_t:new o.aH(w,c.u_size_t),u_size:new o.aH(w,c.u_size),u_camera_to_center_distance:new o.aH(w,c.u_camera_to_center_distance),u_pitch:new o.aH(w,c.u_pitch),u_rotate_symbol:new o.aG(w,c.u_rotate_symbol),u_aspect_ratio:new o.aH(w,c.u_aspect_ratio),u_fade_change:new o.aH(w,c.u_fade_change),u_matrix:new o.aI(w,c.u_matrix),u_label_plane_matrix:new o.aI(w,c.u_label_plane_matrix),u_coord_matrix:new o.aI(w,c.u_coord_matrix),u_is_text:new o.aG(w,c.u_is_text),u_pitch_with_map:new o.aG(w,c.u_pitch_with_map),u_texsize:new o.aL(w,c.u_texsize),u_texsize_icon:new o.aL(w,c.u_texsize_icon),u_texture:new o.aG(w,c.u_texture),u_texture_icon:new o.aG(w,c.u_texture_icon),u_gamma_scale:new o.aH(w,c.u_gamma_scale),u_device_pixel_ratio:new o.aH(w,c.u_device_pixel_ratio),u_is_halo:new o.aG(w,c.u_is_halo)}),background:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_opacity:new o.aH(w,c.u_opacity),u_color:new o.aM(w,c.u_color)}),backgroundPattern:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_opacity:new o.aH(w,c.u_opacity),u_image:new o.aG(w,c.u_image),u_pattern_tl_a:new o.aL(w,c.u_pattern_tl_a),u_pattern_br_a:new o.aL(w,c.u_pattern_br_a),u_pattern_tl_b:new o.aL(w,c.u_pattern_tl_b),u_pattern_br_b:new o.aL(w,c.u_pattern_br_b),u_texsize:new o.aL(w,c.u_texsize),u_mix:new o.aH(w,c.u_mix),u_pattern_size_a:new o.aL(w,c.u_pattern_size_a),u_pattern_size_b:new o.aL(w,c.u_pattern_size_b),u_scale_a:new o.aH(w,c.u_scale_a),u_scale_b:new o.aH(w,c.u_scale_b),u_pixel_coord_upper:new o.aL(w,c.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL(w,c.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aH(w,c.u_tile_units_to_pixels)}),terrain:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_texture:new o.aG(w,c.u_texture),u_ele_delta:new o.aH(w,c.u_ele_delta)}),terrainDepth:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_ele_delta:new o.aH(w,c.u_ele_delta)}),terrainCoords:(w,c)=>({u_matrix:new o.aI(w,c.u_matrix),u_texture:new o.aG(w,c.u_texture),u_terrain_coords_id:new o.aH(w,c.u_terrain_coords_id),u_ele_delta:new o.aH(w,c.u_ele_delta)})};class rh{constructor(c,d,g){this.context=c;const v=c.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Wi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Oa{constructor(c,d,g,v){this.length=d.length,this.attributes=g,this.itemSize=d.bytesPerElement,this.dynamicDraw=v,this.context=c;const x=c.gl;this.buffer=x.createBuffer(),c.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){if(c.length!==this.length)throw new Error(`Length of new data is ${c.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,d){for(let g=0;g<this.attributes.length;g++){const v=d.attributes[this.attributes[g].name];v!==void 0&&c.enableVertexAttribArray(v)}}setVertexAttribPointers(c,d,g){for(let v=0;v<this.attributes.length;v++){const x=this.attributes[v],A=d.attributes[x.name];A!==void 0&&c.vertexAttribPointer(A,x.components,c[Wi[x.type]],!1,this.itemSize,x.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const as=new WeakMap;function Qr(w){var c;if(as.has(w))return as.get(w);{const d=(c=w.getParameter(w.VERSION))===null||c===void 0?void 0:c.startsWith("WebGL 2.0");return as.set(w,d),d}}class qn{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Fa extends qn{getDefault(){return o.aO.transparent}set(c){const d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Ba extends qn{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Fl extends qn{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class Bl extends qn{getDefault(){return[!0,!0,!0,!0]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Na extends qn{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class Nl extends qn{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Vl extends qn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const d=this.current;(c.func!==d.func||c.ref!==d.ref||c.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class Va extends qn{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class yu extends qn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;c?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=c,this.dirty=!1}}class bu extends qn{getDefault(){return[0,1]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class mo extends qn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;c?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=c,this.dirty=!1}}class sh extends qn{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class ih extends qn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;c?d.enable(d.BLEND):d.disable(d.BLEND),this.current=c,this.dirty=!1}}class oh extends qn{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class ah extends qn{getDefault(){return o.aO.transparent}set(c){const d=this.current;(c.r!==d.r||c.g!==d.g||c.b!==d.b||c.a!==d.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class lh extends qn{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class ch extends qn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;c?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=c,this.dirty=!1}}class Ul extends qn{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class Ua extends qn{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class jl extends qn{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class ql extends qn{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class _o extends qn{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const d=this.current;(c[0]!==d[0]||c[1]!==d[1]||c[2]!==d[2]||c[3]!==d[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class wu extends qn{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class xu extends qn{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Gl extends qn{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class Ki extends qn{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class $u extends qn{getDefault(){return null}set(c){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class go extends qn{getDefault(){return null}set(c){var d;if(c===this.current&&!this.dirty)return;const g=this.gl;Qr(g)?g.bindVertexArray(c):(d=g.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(c),this.current=c,this.dirty=!1}}class vo extends qn{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class ku extends qn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Hl extends qn{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Un extends qn{constructor(c,d){super(c),this.context=c,this.parent=d}getDefault(){return null}}class ja extends Un{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class uh extends Un{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Cu extends Un{set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Jo{constructor(c,d,g,v,x){this.context=c,this.width=d,this.height=g;const A=c.gl,M=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new ja(c,M),v)this.depthAttachment=x?new Cu(c,M):new uh(c,M);else if(x)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const c=this.context.gl,d=this.colorAttachment.get();if(d&&c.deleteTexture(d),this.depthAttachment){const g=this.depthAttachment.get();g&&c.deleteRenderbuffer(g)}c.deleteFramebuffer(this.framebuffer)}}class $r{constructor(c,d,g){this.blendFunction=c,this.blendColor=d,this.mask=g}}$r.Replace=[1,0],$r.disabled=new $r($r.Replace,o.aO.transparent,[!1,!1,!1,!1]),$r.unblended=new $r($r.Replace,o.aO.transparent,[!0,!0,!0,!0]),$r.alphaBlended=new $r([1,771],o.aO.transparent,[!0,!0,!0,!0]);class fh{constructor(c){var d,g;if(this.gl=c,this.clearColor=new Fa(this),this.clearDepth=new Ba(this),this.clearStencil=new Fl(this),this.colorMask=new Bl(this),this.depthMask=new Na(this),this.stencilMask=new Nl(this),this.stencilFunc=new Vl(this),this.stencilOp=new Va(this),this.stencilTest=new yu(this),this.depthRange=new bu(this),this.depthTest=new mo(this),this.depthFunc=new sh(this),this.blend=new ih(this),this.blendFunc=new oh(this),this.blendColor=new ah(this),this.blendEquation=new lh(this),this.cullFace=new ch(this),this.cullFaceSide=new Ul(this),this.frontFace=new Ua(this),this.program=new jl(this),this.activeTexture=new ql(this),this.viewport=new _o(this),this.bindFramebuffer=new wu(this),this.bindRenderbuffer=new xu(this),this.bindTexture=new Gl(this),this.bindVertexBuffer=new Ki(this),this.bindElementBuffer=new $u(this),this.bindVertexArray=new go(this),this.pixelStoreUnpack=new vo(this),this.pixelStoreUnpackPremultiplyAlpha=new ku(this),this.pixelStoreUnpackFlipY=new Hl(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE),Qr(c)){this.HALF_FLOAT=c.HALF_FLOAT;const v=c.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=c.RGBA16F)!==null&&d!==void 0?d:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(g=c.RGB16F)!==null&&g!==void 0?g:v==null?void 0:v.RGB16F_EXT,c.getExtension("EXT_color_buffer_float")}else{c.getExtension("EXT_color_buffer_half_float"),c.getExtension("OES_texture_half_float_linear");const v=c.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,d){return new rh(this,c,d)}createVertexBuffer(c,d,g){return new Oa(this,c,d,g)}createRenderbuffer(c,d,g){const v=this.gl,x=v.createRenderbuffer();return this.bindRenderbuffer.set(x),v.renderbufferStorage(v.RENDERBUFFER,c,d,g),this.bindRenderbuffer.set(null),x}createFramebuffer(c,d,g,v){return new Jo(this,c,d,g,v)}clear({color:c,depth:d,stencil:g}){const v=this.gl;let x=0;c&&(x|=v.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(x|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),g!==void 0&&(x|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),v.clear(x)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){o.aD(c.blendFunction,$r.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}createVertexArray(){var c;return Qr(this.gl)?this.gl.createVertexArray():(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.createVertexArrayOES()}deleteVertexArray(c){var d;return Qr(this.gl)?this.gl.deleteVertexArray(c):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(c)}unbindVAO(){this.bindVertexArray.set(null)}}class Bn{constructor(c,d,g){this.func=c,this.mask=d,this.range=g}}Bn.ReadOnly=!1,Bn.ReadWrite=!0,Bn.disabled=new Bn(519,Bn.ReadOnly,[0,1]);const Zl=7680;class er{constructor(c,d,g,v,x,A){this.test=c,this.ref=d,this.mask=g,this.fail=v,this.depthFail=x,this.pass=A}}er.disabled=new er({func:519,mask:0},0,0,Zl,Zl,Zl);class Yn{constructor(c,d,g){this.enable=c,this.mode=d,this.frontFace=g}}let Xi;function qa(w,c,d,g,v,x,A){const M=w.context,R=M.gl,N=w.useProgram("collisionBox"),K=[];let X=0,oe=0;for(let De=0;De<g.length;De++){const Ve=g[De],Je=c.getTile(Ve),tt=Je.getBucket(d);if(!tt)continue;let rt=Ve.posMatrix;v[0]===0&&v[1]===0||(rt=w.translatePosMatrix(Ve.posMatrix,Je,v,x));const _t=A?tt.textCollisionBox:tt.iconCollisionBox,pt=tt.collisionCircleArray;if(pt.length>0){const Rt=o.F(),Ft=rt;o.aP(Rt,tt.placementInvProjMatrix,w.transform.glCoordMatrix),o.aP(Rt,Rt,tt.placementViewportMatrix),K.push({circleArray:pt,circleOffset:oe,transform:Ft,invTransform:Rt,coord:Ve}),X+=pt.length/4,oe=X}_t&&N.draw(M,R.LINES,Bn.disabled,er.disabled,w.colorModeForRenderPass(),Yn.disabled,du(rt,w.transform,Je),w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ve),d.id,_t.layoutVertexBuffer,_t.indexBuffer,_t.segments,null,w.transform.zoom,null,null,_t.collisionVertexBuffer)}if(!A||!K.length)return;const Te=w.useProgram("collisionCircle"),Se=new o.aQ;Se.resize(4*X),Se._trim();let Me=0;for(const De of K)for(let Ve=0;Ve<De.circleArray.length/4;Ve++){const Je=4*Ve,tt=De.circleArray[Je+0],rt=De.circleArray[Je+1],_t=De.circleArray[Je+2],pt=De.circleArray[Je+3];Se.emplace(Me++,tt,rt,_t,pt,0),Se.emplace(Me++,tt,rt,_t,pt,1),Se.emplace(Me++,tt,rt,_t,pt,2),Se.emplace(Me++,tt,rt,_t,pt,3)}(!Xi||Xi.length<2*X)&&(Xi=function(De){const Ve=2*De,Je=new o.aS;Je.resize(Ve),Je._trim();for(let tt=0;tt<Ve;tt++){const rt=6*tt;Je.uint16[rt+0]=4*tt+0,Je.uint16[rt+1]=4*tt+1,Je.uint16[rt+2]=4*tt+2,Je.uint16[rt+3]=4*tt+2,Je.uint16[rt+4]=4*tt+3,Je.uint16[rt+5]=4*tt+0}return Je}(X));const ye=M.createIndexBuffer(Xi,!0),Oe=M.createVertexBuffer(Se,o.aR.members,!0);for(const De of K){const Ve={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(Xe=w.transform).cameraToCenterDistance,u_viewport_size:[Xe.width,Xe.height]};Te.draw(M,R.TRIANGLES,Bn.disabled,er.disabled,w.colorModeForRenderPass(),Yn.disabled,Ve,w.style.map.terrain&&w.style.map.terrain.getTerrainData(De.coord),d.id,Oe,ye,o.$.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,w.transform.zoom,null,null,null)}var Xe;Oe.destroy(),ye.destroy()}Yn.disabled=new Yn(!1,1029,2305),Yn.backCCW=new Yn(!0,1029,2305);const Wl=o.an(new Float32Array(16));function Su(w,c,d,g,v,x){const{horizontalAlign:A,verticalAlign:M}=o.at(w);return new o.P((-(A-.5)*c/v+g[0])*x,(-(M-.5)*d/v+g[1])*x)}function Ga(w,c,d,g,v,x,A,M,R,N,K){const X=w.text.placedSymbolArray,oe=w.text.dynamicLayoutVertexArray,Te=w.icon.dynamicLayoutVertexArray,Se={};oe.clear();for(let Me=0;Me<X.length;Me++){const ye=X.get(Me),Oe=ye.hidden||!ye.crossTileID||w.allowVerticalPlacement&&!ye.placedOrientation?null:g[ye.crossTileID];if(Oe){const Xe=new o.P(ye.anchorX,ye.anchorY),De=Lr(Xe,d?A:x,K),Ve=Ae(v.cameraToCenterDistance,De.signedDistanceFromCamera);let Je=o.ai(w.textSizeData,R,ye)*Ve/o.ao;d&&(Je*=w.tilePixelRatio/M);const{width:tt,height:rt,anchor:_t,textOffset:pt,textBoxScale:Rt}=Oe,Ft=Su(_t,tt,rt,pt,Rt,Je),Tn=d?Lr(Xe.add(Ft),x,K).point:De.point.add(c?Ft.rotate(-v.angle):Ft),qt=w.allowVerticalPlacement&&ye.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let gn=0;gn<ye.numGlyphs;gn++)o.aj(oe,Tn,qt);N&&ye.associatedIconIndex>=0&&(Se[ye.associatedIconIndex]={shiftedAnchor:Tn,angle:qt})}else ut(ye.numGlyphs,oe)}if(N){Te.clear();const Me=w.icon.placedSymbolArray;for(let ye=0;ye<Me.length;ye++){const Oe=Me.get(ye);if(Oe.hidden)ut(Oe.numGlyphs,Te);else{const Xe=Se[ye];if(Xe)for(let De=0;De<Oe.numGlyphs;De++)o.aj(Te,Xe.shiftedAnchor,Xe.angle);else ut(Oe.numGlyphs,Te)}}w.icon.dynamicLayoutVertexBuffer.updateData(Te)}w.text.dynamicLayoutVertexBuffer.updateData(oe)}function Ha(w,c,d){return d.iconsInText&&c?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function Za(w,c,d,g,v,x,A,M,R,N,K,X){const oe=w.context,Te=oe.gl,Se=w.transform,Me=M==="map",ye=R==="map",Oe=M!=="viewport"&&d.layout.get("symbol-placement")!=="point",Xe=Me&&!ye&&!Oe,De=!d.layout.get("symbol-sort-key").isConstant();let Ve=!1;const Je=w.depthModeForSublayer(0,Bn.ReadOnly),tt=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),rt=[];for(const _t of g){const pt=c.getTile(_t),Rt=pt.getBucket(d);if(!Rt)continue;const Ft=v?Rt.text:Rt.icon;if(!Ft||!Ft.segments.get().length||!Ft.hasVisibleVertices)continue;const Tn=Ft.programConfigurations.get(d.id),qt=v||Rt.sdfIcons,gn=v?Rt.textSizeData:Rt.iconSizeData,Pn=ye||Se.pitch!==0,Nn=w.useProgram(Ha(qt,v,Rt),Tn),wn=o.ag(gn,Se.zoom),Dn=w.style.map.terrain&&w.style.map.terrain.getTerrainData(_t);let zn,mr,Wn,As,Or=[0,0],ar=null;if(v)mr=pt.glyphAtlasTexture,Wn=Te.LINEAR,zn=pt.glyphAtlasTexture.size,Rt.iconsInText&&(Or=pt.imageAtlasTexture.size,ar=pt.imageAtlasTexture,As=Pn||w.options.rotating||w.options.zooming||gn.kind==="composite"||gn.kind==="camera"?Te.LINEAR:Te.NEAREST);else{const Er=d.layout.get("icon-size").constantOr(0)!==1||Rt.iconsNeedLinear;mr=pt.imageAtlasTexture,Wn=qt||w.options.rotating||w.options.zooming||Er||Pn?Te.LINEAR:Te.NEAREST,zn=pt.imageAtlasTexture.size}const Fr=kn(pt,1,w.transform.zoom),Ms=$n(_t.posMatrix,ye,Me,w.transform,Fr),ui=si(_t.posMatrix,ye,Me,w.transform,Fr),Di=tt&&Rt.hasTextData(),ua=d.layout.get("icon-text-fit")!=="none"&&Di&&Rt.hasIconData();if(Oe){const Er=w.style.map.terrain?(qs,Ar)=>w.style.map.terrain.getElevation(_t,qs,Ar):null,cr=d.layout.get("text-rotation-alignment")==="map";ne(Rt,_t.posMatrix,w,v,Ms,ui,ye,N,cr,Er)}const zi=w.translatePosMatrix(_t.posMatrix,pt,x,A),fi=Oe||v&&tt||ua?Wl:Ms,Pr=w.translatePosMatrix(ui,pt,x,A,!0),lr=qt&&d.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let sr;sr=qt?Rt.iconsInText?Xo(gn.kind,wn,Xe,ye,w,zi,fi,Pr,zn,Or):Ko(gn.kind,wn,Xe,ye,w,zi,fi,Pr,v,zn,!0):Wo(gn.kind,wn,Xe,ye,w,zi,fi,Pr,v,zn);const js={program:Nn,buffers:Ft,uniformValues:sr,atlasTexture:mr,atlasTextureIcon:ar,atlasInterpolation:Wn,atlasInterpolationIcon:As,isSDF:qt,hasHalo:lr};if(De&&Rt.canOverlap){Ve=!0;const Er=Ft.segments.get();for(const cr of Er)rt.push({segments:new o.$([cr]),sortKey:cr.sortKey,state:js,terrainData:Dn})}else rt.push({segments:Ft.segments,sortKey:0,state:js,terrainData:Dn})}Ve&&rt.sort((_t,pt)=>_t.sortKey-pt.sortKey);for(const _t of rt){const pt=_t.state;if(oe.activeTexture.set(Te.TEXTURE0),pt.atlasTexture.bind(pt.atlasInterpolation,Te.CLAMP_TO_EDGE),pt.atlasTextureIcon&&(oe.activeTexture.set(Te.TEXTURE1),pt.atlasTextureIcon&&pt.atlasTextureIcon.bind(pt.atlasInterpolationIcon,Te.CLAMP_TO_EDGE)),pt.isSDF){const Rt=pt.uniformValues;pt.hasHalo&&(Rt.u_is_halo=1,Iu(pt.buffers,_t.segments,d,w,pt.program,Je,K,X,Rt,_t.terrainData)),Rt.u_is_halo=0}Iu(pt.buffers,_t.segments,d,w,pt.program,Je,K,X,pt.uniformValues,_t.terrainData)}}function Iu(w,c,d,g,v,x,A,M,R,N){const K=g.context;v.draw(K,K.gl.TRIANGLES,x,A,M,Yn.disabled,R,N,d.id,w.layoutVertexBuffer,w.indexBuffer,c,d.paint,g.transform.zoom,w.programConfigurations.get(d.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Wa(w,c,d,g,v){if(!d||!g||!g.imageAtlas)return;const x=g.imageAtlas.patternPositions;let A=x[d.to.toString()],M=x[d.from.toString()];if(!A&&M&&(A=M),!M&&A&&(M=A),!A||!M){const R=v.getPaintProperty(c);A=x[R],M=x[R]}A&&M&&w.setConstantPatternPositions(A,M)}function Tu(w,c,d,g,v,x,A){const M=w.context.gl,R="fill-pattern",N=d.paint.get(R),K=N&&N.constantOr(1),X=d.getCrossfadeParameters();let oe,Te,Se,Me,ye;A?(Te=K&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",oe=M.LINES):(Te=K?"fillPattern":"fill",oe=M.TRIANGLES);const Oe=N.constantOr(null);for(const Xe of g){const De=c.getTile(Xe);if(K&&!De.patternsLoaded())continue;const Ve=De.getBucket(d);if(!Ve)continue;const Je=Ve.programConfigurations.get(d.id),tt=w.useProgram(Te,Je),rt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Xe);K&&(w.context.activeTexture.set(M.TEXTURE0),De.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),Je.updatePaintBuffers(X)),Wa(Je,R,Oe,De,d);const _t=rt?Xe:null,pt=w.translatePosMatrix(_t?_t.posMatrix:Xe.posMatrix,De,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(A){Me=Ve.indexBuffer2,ye=Ve.segments2;const Rt=[M.drawingBufferWidth,M.drawingBufferHeight];Se=Te==="fillOutlinePattern"&&K?hu(pt,w,X,De,Rt):Qf(pt,Rt)}else Me=Ve.indexBuffer,ye=Ve.segments,Se=K?Ma(pt,w,X,De):fu(pt);tt.draw(w.context,oe,v,w.stencilModeForClipping(Xe),x,Yn.disabled,Se,rt,d.id,Ve.layoutVertexBuffer,Me,ye,d.paint,w.transform.zoom,Je)}}function Ka(w,c,d,g,v,x,A){const M=w.context,R=M.gl,N="fill-extrusion-pattern",K=d.paint.get(N),X=K.constantOr(1),oe=d.getCrossfadeParameters(),Te=d.paint.get("fill-extrusion-opacity"),Se=K.constantOr(null);for(const Me of g){const ye=c.getTile(Me),Oe=ye.getBucket(d);if(!Oe)continue;const Xe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Me),De=Oe.programConfigurations.get(d.id),Ve=w.useProgram(X?"fillExtrusionPattern":"fillExtrusion",De);X&&(w.context.activeTexture.set(R.TEXTURE0),ye.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),De.updatePaintBuffers(oe)),Wa(De,N,Se,ye,d);const Je=w.translatePosMatrix(Me.posMatrix,ye,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),tt=d.paint.get("fill-extrusion-vertical-gradient"),rt=X?Yf(Je,w,tt,Te,Me,oe,ye):Go(Je,w,tt,Te);Ve.draw(M,M.gl.TRIANGLES,v,x,A,Yn.backCCW,rt,Xe,d.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,d.paint,w.transform.zoom,De,w.style.map.terrain&&Oe.centroidVertexBuffer)}}function Xa(w,c,d,g,v,x,A){const M=w.context,R=M.gl,N=d.fbo;if(!N)return;const K=w.useProgram("hillshade"),X=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);M.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,N.colorAttachment.get()),K.draw(M,R.TRIANGLES,v,x,A,Yn.disabled,((oe,Te,Se,Me)=>{const ye=Se.paint.get("hillshade-shadow-color"),Oe=Se.paint.get("hillshade-highlight-color"),Xe=Se.paint.get("hillshade-accent-color");let De=Se.paint.get("hillshade-illumination-direction")*(Math.PI/180);Se.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=oe.transform.angle);const Ve=!oe.options.moving;return{u_matrix:Me?Me.posMatrix:oe.transform.calculatePosMatrix(Te.tileID.toUnwrapped(),Ve),u_image:0,u_latrange:_u(0,Te.tileID),u_light:[Se.paint.get("hillshade-exaggeration"),De],u_shadow:ye,u_highlight:Oe,u_accent:Xe}})(w,d,g,X?c:null),X,g.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}function Kl(w,c,d,g,v,x){const A=w.context,M=A.gl,R=c.dem;if(R&&R.data){const N=R.dim,K=R.stride,X=R.getPixels();if(A.activeTexture.set(M.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||w.getTileTexture(K),c.demTexture){const Te=c.demTexture;Te.update(X,{premultiply:!1}),Te.bind(M.NEAREST,M.CLAMP_TO_EDGE)}else c.demTexture=new Ce(A,X,M.RGBA,{premultiply:!1}),c.demTexture.bind(M.NEAREST,M.CLAMP_TO_EDGE);A.activeTexture.set(M.TEXTURE0);let oe=c.fbo;if(!oe){const Te=new Ce(A,{width:N,height:N,data:null},M.RGBA);Te.bind(M.LINEAR,M.CLAMP_TO_EDGE),oe=c.fbo=A.createFramebuffer(N,N,!0,!1),oe.colorAttachment.set(Te.texture)}A.bindFramebuffer.set(oe.framebuffer),A.viewport.set([0,0,N,N]),w.useProgram("hillshadePrepare").draw(A,M.TRIANGLES,g,v,x,Yn.disabled,((Te,Se)=>{const Me=Se.stride,ye=o.F();return o.aN(ye,0,o.W,-o.W,0,0,1),o.H(ye,ye,[0,-o.W,0]),{u_matrix:ye,u_image:1,u_dimension:[Me,Me],u_zoom:Te.overscaledZ,u_unpack:Se.getUnpackVector()}})(c.tileID,R),null,d.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments),c.needsHillshadePrepare=!1}}function Pu(w,c,d,g,v,x){const A=g.paint.get("raster-fade-duration");if(!x&&A>0){const M=b.now(),R=(M-w.timeAdded)/A,N=c?(M-c.timeAdded)/A:-1,K=d.getSource(),X=v.coveringZoomLevel({tileSize:K.tileSize,roundZoom:K.roundZoom}),oe=!c||Math.abs(c.tileID.overscaledZ-X)>Math.abs(w.tileID.overscaledZ-X),Te=oe&&w.refreshedUponExpiration?1:o.ac(oe?R:1-N,0,1);return w.refreshedUponExpiration&&R>=1&&(w.refreshedUponExpiration=!1),c?{opacity:1,mix:1-Te}:{opacity:Te,mix:0}}return{opacity:1,mix:0}}const Eu=new o.aO(1,0,0,1),Ja=new o.aO(0,1,0,1),Xl=new o.aO(0,0,1,1),hh=new o.aO(1,0,1,1),Au=new o.aO(0,1,1,1);function dr(w,c,d,g){ls(w,0,c+d/2,w.transform.width,d,g)}function Pi(w,c,d,g){ls(w,c-d/2,0,d,w.transform.height,g)}function ls(w,c,d,g,v,x){const A=w.context,M=A.gl;M.enable(M.SCISSOR_TEST),M.scissor(c*w.pixelRatio,d*w.pixelRatio,g*w.pixelRatio,v*w.pixelRatio),A.clear({color:x}),M.disable(M.SCISSOR_TEST)}function Jl(w,c,d){const g=w.context,v=g.gl,x=d.posMatrix,A=w.useProgram("debug"),M=Bn.disabled,R=er.disabled,N=w.colorModeForRenderPass(),K="$debug",X=w.style.map.terrain&&w.style.map.terrain.getTerrainData(d);g.activeTexture.set(v.TEXTURE0);const oe=c.getTileByID(d.key).latestRawTileData,Te=Math.floor((oe&&oe.byteLength||0)/1024),Se=c.getTile(d).tileSize,Me=512/Math.min(Se,512)*(d.overscaledZ/w.transform.zoom)*.5;let ye=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ye+=` => ${d.overscaledZ}`),function(Oe,Xe){Oe.initDebugOverlayCanvas();const De=Oe.debugOverlayCanvas,Ve=Oe.context.gl,Je=Oe.debugOverlayCanvas.getContext("2d");Je.clearRect(0,0,De.width,De.height),Je.shadowColor="white",Je.shadowBlur=2,Je.lineWidth=1.5,Je.strokeStyle="white",Je.textBaseline="top",Je.font="bold 36px Open Sans, sans-serif",Je.fillText(Xe,5,5),Je.strokeText(Xe,5,5),Oe.debugOverlayTexture.update(De),Oe.debugOverlayTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE)}(w,`${ye} ${Te}kB`),A.draw(g,v.TRIANGLES,M,R,$r.alphaBlended,Yn.disabled,pu(x,o.aO.transparent,Me),null,K,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),A.draw(g,v.LINE_STRIP,M,R,N,Yn.disabled,pu(x,o.aO.red),X,K,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Ya(w,c,d){const g=w.context,v=g.gl,x=w.colorModeForRenderPass(),A=new Bn(v.LEQUAL,Bn.ReadWrite,w.depthRangeFor3D),M=w.useProgram("terrain"),R=c.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,w.width,w.height]);for(const N of d){const K=w.renderToTexture.getTexture(N),X=c.getTerrainData(N.tileID);g.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,K.texture);const oe={u_matrix:w.transform.calculatePosMatrix(N.tileID.toUnwrapped()),u_texture:0,u_ele_delta:c.getMeshFrameDelta(w.transform.zoom)};M.draw(g,v.TRIANGLES,A,er.disabled,x,Yn.backCCW,oe,X,"terrain",R.vertexBuffer,R.indexBuffer,R.segments)}}class Mu{constructor(c,d){this.context=new fh(c),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Zr.maxUnderzooming+Zr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ii}resize(c,d,g){if(this.width=Math.floor(c*g),this.height=Math.floor(d*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const c=this.context,d=new o.aV;d.emplaceBack(0,0),d.emplaceBack(o.W,0),d.emplaceBack(0,o.W),d.emplaceBack(o.W,o.W),this.tileExtentBuffer=c.createVertexBuffer(d,Pa.members),this.tileExtentSegments=o.$.simpleSegment(0,0,4,2);const g=new o.aV;g.emplaceBack(0,0),g.emplaceBack(o.W,0),g.emplaceBack(0,o.W),g.emplaceBack(o.W,o.W),this.debugBuffer=c.createVertexBuffer(g,Pa.members),this.debugSegments=o.$.simpleSegment(0,0,4,5);const v=new o.Z;v.emplaceBack(0,0,0,0),v.emplaceBack(o.W,0,o.W,0),v.emplaceBack(0,o.W,0,o.W),v.emplaceBack(o.W,o.W,o.W,o.W),this.rasterBoundsBuffer=c.createVertexBuffer(v,xn.members),this.rasterBoundsSegments=o.$.simpleSegment(0,0,4,2);const x=new o.aV;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(x,Pa.members),this.viewportSegments=o.$.simpleSegment(0,0,4,2);const A=new o.aW;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=c.createIndexBuffer(A);const M=new o.aX;M.emplaceBack(0,1,2),M.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(M);const R=this.context.gl;this.stencilClearMode=new er({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO)}clearStencil(){const c=this.context,d=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=o.F();o.aN(g,0,this.width,this.height,0,0,1),o.J(g,g,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(c,d.TRIANGLES,Bn.disabled,this.stencilClearMode,$r.disabled,Yn.disabled,Da(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(c,d){if(this.currentStencilSource===c.source||!c.isTileClipped()||!d||!d.length)return;this.currentStencilSource=c.source;const g=this.context,v=g.gl;this.nextStencilID+d.length>256&&this.clearStencil(),g.setColorMode($r.disabled),g.setDepthMode(Bn.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of d){const M=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);x.draw(g,v.TRIANGLES,Bn.disabled,new er({func:v.ALWAYS,mask:0},M,255,v.KEEP,v.KEEP,v.REPLACE),$r.disabled,Yn.disabled,Da(A.posMatrix),R,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,d=this.context.gl;return new er({func:d.NOTEQUAL,mask:255},c,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(c){const d=this.context.gl;return new er({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(c){const d=this.context.gl,g=c.sort((A,M)=>M.overscaledZ-A.overscaledZ),v=g[g.length-1].overscaledZ,x=g[0].overscaledZ-v+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const A={};for(let M=0;M<x;M++)A[M+v]=new er({func:d.GEQUAL,mask:255},M+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=x,[A,g]}return[{[v]:er.disabled},g]}colorModeForRenderPass(){const c=this.context.gl;return this._showOverdrawInspector?new $r([c.CONSTANT_COLOR,c.ONE],new o.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?$r.unblended:$r.alphaBlended}depthModeForSublayer(c,d,g){if(!this.opaquePassEnabledForLayer())return Bn.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new Bn(g||this.context.gl.LEQUAL,d,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,d){this.style=c,this.options=d,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const g=this.style._order,v=this.style.sourceCaches,x={},A={},M={};for(const R in v){const N=v[R];N.used&&N.prepare(this.context),x[R]=N.getVisibleCoordinates(),A[R]=x[R].slice().reverse(),M[R]=N.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<g.length;R++)if(this.style._layers[g[R]].is3D()){this.opaquePassCutoff=R;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const R of g){const N=this.style._layers[R];if(!N.hasOffscreenPass()||N.isHidden(this.transform.zoom))continue;const K=A[N.source];(N.type==="custom"||K.length)&&this.renderLayer(this,v[N.source],N,K)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?o.aO.black:o.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(c._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const R=this.style._layers[g[this.currentLayer]],N=v[R.source],K=x[R.source];this._renderTileClippingMasks(R,K),this.renderLayer(this,N,R,K)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const R=this.style._layers[g[this.currentLayer]],N=v[R.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(R))continue;const K=(R.type==="symbol"?M:A)[R.source];this._renderTileClippingMasks(R,x[R.source]),this.renderLayer(this,N,R,K)}if(this.options.showTileBoundaries){const R=function(N,K){let X=null;const oe=Object.values(N._layers).flatMap(ye=>ye.source&&!ye.isHidden(K)?[N.sourceCaches[ye.source]]:[]),Te=oe.filter(ye=>ye.getSource().type==="vector"),Se=oe.filter(ye=>ye.getSource().type!=="vector"),Me=ye=>{(!X||X.getSource().maxzoom<ye.getSource().maxzoom)&&(X=ye)};return Te.forEach(ye=>Me(ye)),X||Se.forEach(ye=>Me(ye)),X}(this.style,this.transform.zoom);R&&function(N,K,X){for(let oe=0;oe<X.length;oe++)Jl(N,K,X[oe])}(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){const N=R.transform.padding;dr(R,R.transform.height-(N.top||0),3,Eu),dr(R,N.bottom||0,3,Ja),Pi(R,N.left||0,3,Xl),Pi(R,R.transform.width-(N.right||0),3,hh);const K=R.transform.centerPoint;(function(X,oe,Te,Se){ls(X,oe-1,Te-10,2,20,Se),ls(X,oe-10,Te-1,20,2,Se)})(R,K.x,R.transform.height-K.y,Au)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(c){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,g=this.transform.projMatrix;let v=this.terrainFacilitator.dirty;v||(v=c?!o.aY(d,g):!o.aZ(d,g)),v||(v=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),v&&(o.a_(d,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,A){const M=x.context,R=M.gl,N=$r.unblended,K=new Bn(R.LEQUAL,Bn.ReadWrite,[0,1]),X=A.getTerrainMesh(),oe=A.sourceCache.getRenderableTiles(),Te=x.useProgram("terrainDepth");M.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),M.clear({color:o.aO.transparent,depth:1});for(const Se of oe){const Me=A.getTerrainData(Se.tileID),ye={u_matrix:x.transform.calculatePosMatrix(Se.tileID.toUnwrapped()),u_ele_delta:A.getMeshFrameDelta(x.transform.zoom)};Te.draw(M,R.TRIANGLES,K,er.disabled,N,Yn.backCCW,ye,Me,"terrain",X.vertexBuffer,X.indexBuffer,X.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,A){const M=x.context,R=M.gl,N=$r.unblended,K=new Bn(R.LEQUAL,Bn.ReadWrite,[0,1]),X=A.getTerrainMesh(),oe=A.getCoordsTexture(),Te=A.sourceCache.getRenderableTiles(),Se=x.useProgram("terrainCoords");M.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),M.clear({color:o.aO.transparent,depth:1}),A.coordsIndex=[];for(const Me of Te){const ye=A.getTerrainData(Me.tileID);M.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,oe.texture);const Oe={u_matrix:x.transform.calculatePosMatrix(Me.tileID.toUnwrapped()),u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(x.transform.zoom)};Se.draw(M,R.TRIANGLES,K,er.disabled,N,Yn.backCCW,Oe,ye,"terrain",X.vertexBuffer,X.indexBuffer,X.segments),A.coordsIndex.push(Me.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(c,d,g,v){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(v||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(x,A,M,R,N){if(x.renderPass!=="translucent")return;const K=er.disabled,X=x.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(oe,Te,Se,Me,ye,Oe,Xe){const De=Te.transform,Ve=ye==="map",Je=Oe==="map";for(const tt of oe){const rt=Me.getTile(tt),_t=rt.getBucket(Se);if(!_t||!_t.text||!_t.text.segments.get().length)continue;const pt=o.ag(_t.textSizeData,De.zoom),Rt=kn(rt,1,Te.transform.zoom),Ft=$n(tt.posMatrix,Je,Ve,Te.transform,Rt),Tn=Se.layout.get("icon-text-fit")!=="none"&&_t.hasIconData();if(pt){const qt=Math.pow(2,De.zoom-rt.tileID.overscaledZ);Ga(_t,Ve,Je,Xe,De,Ft,tt.posMatrix,qt,pt,Tn,Te.style.map.terrain?(gn,Pn)=>Te.style.map.terrain.getElevation(tt,gn,Pn):null)}}}(R,x,M,A,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),N),M.paint.get("icon-opacity").constantOr(1)!==0&&Za(x,A,M,R,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),K,X),M.paint.get("text-opacity").constantOr(1)!==0&&Za(x,A,M,R,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),K,X),A.map.showCollisionBoxes&&(qa(x,A,M,R,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),!0),qa(x,A,M,R,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),!1))})(c,d,g,v,this.style.placement.variableOffsets);break;case"circle":(function(x,A,M,R){if(x.renderPass!=="translucent")return;const N=M.paint.get("circle-opacity"),K=M.paint.get("circle-stroke-width"),X=M.paint.get("circle-stroke-opacity"),oe=!M.layout.get("circle-sort-key").isConstant();if(N.constantOr(1)===0&&(K.constantOr(1)===0||X.constantOr(1)===0))return;const Te=x.context,Se=Te.gl,Me=x.depthModeForSublayer(0,Bn.ReadOnly),ye=er.disabled,Oe=x.colorModeForRenderPass(),Xe=[];for(let De=0;De<R.length;De++){const Ve=R[De],Je=A.getTile(Ve),tt=Je.getBucket(M);if(!tt)continue;const rt=tt.programConfigurations.get(M.id),_t=x.useProgram("circle",rt),pt=tt.layoutVertexBuffer,Rt=tt.indexBuffer,Ft=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ve),Tn={programConfiguration:rt,program:_t,layoutVertexBuffer:pt,indexBuffer:Rt,uniformValues:eh(x,Ve,Je,M),terrainData:Ft};if(oe){const qt=tt.segments.get();for(const gn of qt)Xe.push({segments:new o.$([gn]),sortKey:gn.sortKey,state:Tn})}else Xe.push({segments:tt.segments,sortKey:0,state:Tn})}oe&&Xe.sort((De,Ve)=>De.sortKey-Ve.sortKey);for(const De of Xe){const{programConfiguration:Ve,program:Je,layoutVertexBuffer:tt,indexBuffer:rt,uniformValues:_t,terrainData:pt}=De.state;Je.draw(Te,Se.TRIANGLES,Me,ye,Oe,Yn.disabled,_t,pt,M.id,tt,rt,De.segments,M.paint,x.transform.zoom,Ve)}})(c,d,g,v);break;case"heatmap":(function(x,A,M,R){if(M.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const N=x.context,K=N.gl,X=er.disabled,oe=new $r([K.ONE,K.ONE],o.aO.transparent,[!0,!0,!0,!0]);(function(Te,Se,Me){const ye=Te.gl;Te.activeTexture.set(ye.TEXTURE1),Te.viewport.set([0,0,Se.width/4,Se.height/4]);let Oe=Me.heatmapFbo;if(Oe)ye.bindTexture(ye.TEXTURE_2D,Oe.colorAttachment.get()),Te.bindFramebuffer.set(Oe.framebuffer);else{const Xe=ye.createTexture();ye.bindTexture(ye.TEXTURE_2D,Xe),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_S,ye.CLAMP_TO_EDGE),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_WRAP_T,ye.CLAMP_TO_EDGE),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MIN_FILTER,ye.LINEAR),ye.texParameteri(ye.TEXTURE_2D,ye.TEXTURE_MAG_FILTER,ye.LINEAR),Oe=Me.heatmapFbo=Te.createFramebuffer(Se.width/4,Se.height/4,!1,!1),function(De,Ve,Je,tt){var rt,_t;const pt=De.gl,Rt=(rt=De.HALF_FLOAT)!==null&&rt!==void 0?rt:pt.UNSIGNED_BYTE,Ft=(_t=De.RGBA16F)!==null&&_t!==void 0?_t:pt.RGBA;pt.texImage2D(pt.TEXTURE_2D,0,Ft,Ve.width/4,Ve.height/4,0,pt.RGBA,Rt,null),tt.colorAttachment.set(Je)}(Te,Se,Xe,Oe)}})(N,x,M),N.clear({color:o.aO.transparent});for(let Te=0;Te<R.length;Te++){const Se=R[Te];if(A.hasRenderableParent(Se))continue;const Me=A.getTile(Se),ye=Me.getBucket(M);if(!ye)continue;const Oe=ye.programConfigurations.get(M.id),Xe=x.useProgram("heatmap",Oe),{zoom:De}=x.transform;Xe.draw(N,K.TRIANGLES,Bn.disabled,X,oe,Yn.disabled,mu(Se.posMatrix,Me,De,M.paint.get("heatmap-intensity")),null,M.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,M.paint,x.transform.zoom,Oe)}N.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(N,K){const X=N.context,oe=X.gl,Te=K.heatmapFbo;if(!Te)return;X.activeTexture.set(oe.TEXTURE0),oe.bindTexture(oe.TEXTURE_2D,Te.colorAttachment.get()),X.activeTexture.set(oe.TEXTURE1);let Se=K.colorRampTexture;Se||(Se=K.colorRampTexture=new Ce(X,K.colorRamp,oe.RGBA)),Se.bind(oe.LINEAR,oe.CLAMP_TO_EDGE),N.useProgram("heatmapTexture").draw(X,oe.TRIANGLES,Bn.disabled,er.disabled,N.colorModeForRenderPass(),Yn.disabled,((Me,ye,Oe,Xe)=>{const De=o.F();o.aN(De,0,Me.width,Me.height,0,0,1);const Ve=Me.context.gl;return{u_matrix:De,u_world:[Ve.drawingBufferWidth,Ve.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ye.paint.get("heatmap-opacity")}})(N,K),null,K.id,N.viewportBuffer,N.quadTriangleIndexBuffer,N.viewportSegments,K.paint,N.transform.zoom)}(x,M))})(c,d,g,v);break;case"line":(function(x,A,M,R){if(x.renderPass!=="translucent")return;const N=M.paint.get("line-opacity"),K=M.paint.get("line-width");if(N.constantOr(1)===0||K.constantOr(1)===0)return;const X=x.depthModeForSublayer(0,Bn.ReadOnly),oe=x.colorModeForRenderPass(),Te=M.paint.get("line-dasharray"),Se=M.paint.get("line-pattern"),Me=Se.constantOr(1),ye=M.paint.get("line-gradient"),Oe=M.getCrossfadeParameters(),Xe=Me?"linePattern":Te?"lineSDF":ye?"lineGradient":"line",De=x.context,Ve=De.gl;let Je=!0;for(const tt of R){const rt=A.getTile(tt);if(Me&&!rt.patternsLoaded())continue;const _t=rt.getBucket(M);if(!_t)continue;const pt=_t.programConfigurations.get(M.id),Rt=x.context.program.get(),Ft=x.useProgram(Xe,pt),Tn=Je||Ft.program!==Rt,qt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(tt),gn=Se.constantOr(null);if(gn&&rt.imageAtlas){const wn=rt.imageAtlas,Dn=wn.patternPositions[gn.to.toString()],zn=wn.patternPositions[gn.from.toString()];Dn&&zn&&pt.setConstantPatternPositions(Dn,zn)}const Pn=qt?tt:null,Nn=Me?Zi(x,rt,M,Oe,Pn):Te?La(x,rt,M,Te,Oe,Pn):ye?gu(x,rt,M,_t.lineClipsArray.length,Pn):za(x,rt,M,Pn);if(Me)De.activeTexture.set(Ve.TEXTURE0),rt.imageAtlasTexture.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),pt.updatePaintBuffers(Oe);else if(Te&&(Tn||x.lineAtlas.dirty))De.activeTexture.set(Ve.TEXTURE0),x.lineAtlas.bind(De);else if(ye){const wn=_t.gradients[M.id];let Dn=wn.texture;if(M.gradientVersion!==wn.version){let zn=256;if(M.stepInterpolant){const mr=A.getSource().maxzoom,Wn=tt.canonical.z===mr?Math.ceil(1<<x.transform.maxZoom-tt.canonical.z):1;zn=o.ac(o.aT(_t.maxLineLength/o.W*1024*Wn),256,De.maxTextureSize)}wn.gradient=o.aU({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:zn,image:wn.gradient||void 0,clips:_t.lineClipsArray}),wn.texture?wn.texture.update(wn.gradient):wn.texture=new Ce(De,wn.gradient,Ve.RGBA),wn.version=M.gradientVersion,Dn=wn.texture}De.activeTexture.set(Ve.TEXTURE0),Dn.bind(M.stepInterpolant?Ve.NEAREST:Ve.LINEAR,Ve.CLAMP_TO_EDGE)}Ft.draw(De,Ve.TRIANGLES,X,x.stencilModeForClipping(tt),oe,Yn.disabled,Nn,qt,M.id,_t.layoutVertexBuffer,_t.indexBuffer,_t.segments,M.paint,x.transform.zoom,pt,_t.layoutVertexBuffer2),Je=!1}})(c,d,g,v);break;case"fill":(function(x,A,M,R){const N=M.paint.get("fill-color"),K=M.paint.get("fill-opacity");if(K.constantOr(1)===0)return;const X=x.colorModeForRenderPass(),oe=M.paint.get("fill-pattern"),Te=x.opaquePassEnabledForLayer()&&!oe.constantOr(1)&&N.constantOr(o.aO.transparent).a===1&&K.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===Te){const Se=x.depthModeForSublayer(1,x.renderPass==="opaque"?Bn.ReadWrite:Bn.ReadOnly);Tu(x,A,M,R,Se,X,!1)}if(x.renderPass==="translucent"&&M.paint.get("fill-antialias")){const Se=x.depthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,Bn.ReadOnly);Tu(x,A,M,R,Se,X,!0)}})(c,d,g,v);break;case"fill-extrusion":(function(x,A,M,R){const N=M.paint.get("fill-extrusion-opacity");if(N!==0&&x.renderPass==="translucent"){const K=new Bn(x.context.gl.LEQUAL,Bn.ReadWrite,x.depthRangeFor3D);if(N!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))Ka(x,A,M,R,K,er.disabled,$r.disabled),Ka(x,A,M,R,K,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const X=x.colorModeForRenderPass();Ka(x,A,M,R,K,er.disabled,X)}}})(c,d,g,v);break;case"hillshade":(function(x,A,M,R){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const N=x.context,K=x.depthModeForSublayer(0,Bn.ReadOnly),X=x.colorModeForRenderPass(),[oe,Te]=x.renderPass==="translucent"?x.stencilConfigForOverlap(R):[{},R];for(const Se of Te){const Me=A.getTile(Se);Me.needsHillshadePrepare!==void 0&&Me.needsHillshadePrepare&&x.renderPass==="offscreen"?Kl(x,Me,M,K,er.disabled,X):x.renderPass==="translucent"&&Xa(x,Se,Me,M,K,oe[Se.overscaledZ],X)}N.viewport.set([0,0,x.width,x.height])})(c,d,g,v);break;case"raster":(function(x,A,M,R){if(x.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!R.length)return;const N=x.context,K=N.gl,X=A.getSource(),oe=x.useProgram("raster"),Te=x.colorModeForRenderPass(),[Se,Me]=X instanceof Qn?[{},R]:x.stencilConfigForOverlap(R),ye=Me[Me.length-1].overscaledZ,Oe=!x.options.moving;for(const Xe of Me){const De=x.depthModeForSublayer(Xe.overscaledZ-ye,M.paint.get("raster-opacity")===1?Bn.ReadWrite:Bn.ReadOnly,K.LESS),Ve=A.getTile(Xe);Ve.registerFadeDuration(M.paint.get("raster-fade-duration"));const Je=A.findLoadedParent(Xe,0),tt=Pu(Ve,Je,A,M,x.transform,x.style.map.terrain);let rt,_t;const pt=M.paint.get("raster-resampling")==="nearest"?K.NEAREST:K.LINEAR;N.activeTexture.set(K.TEXTURE0),Ve.texture.bind(pt,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST),N.activeTexture.set(K.TEXTURE1),Je?(Je.texture.bind(pt,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST),rt=Math.pow(2,Je.tileID.overscaledZ-Ve.tileID.overscaledZ),_t=[Ve.tileID.canonical.x*rt%1,Ve.tileID.canonical.y*rt%1]):Ve.texture.bind(pt,K.CLAMP_TO_EDGE,K.LINEAR_MIPMAP_NEAREST);const Rt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Xe),Ft=Rt?Xe:null,Tn=Ft?Ft.posMatrix:x.transform.calculatePosMatrix(Xe.toUnwrapped(),Oe),qt=Ra(Tn,_t||[0,0],rt||1,tt,M);X instanceof Qn?oe.draw(N,K.TRIANGLES,De,er.disabled,Te,Yn.disabled,qt,Rt,M.id,X.boundsBuffer,x.quadTriangleIndexBuffer,X.boundsSegments):oe.draw(N,K.TRIANGLES,De,Se[Xe.overscaledZ],Te,Yn.disabled,qt,Rt,M.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(c,d,g,v);break;case"background":(function(x,A,M,R){const N=M.paint.get("background-color"),K=M.paint.get("background-opacity");if(K===0)return;const X=x.context,oe=X.gl,Te=x.transform,Se=Te.tileSize,Me=M.paint.get("background-pattern");if(x.isPatternMissing(Me))return;const ye=!Me&&N.a===1&&K===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==ye)return;const Oe=er.disabled,Xe=x.depthModeForSublayer(0,ye==="opaque"?Bn.ReadWrite:Bn.ReadOnly),De=x.colorModeForRenderPass(),Ve=x.useProgram(Me?"backgroundPattern":"background"),Je=R||Te.coveringTiles({tileSize:Se,terrain:x.style.map.terrain});Me&&(X.activeTexture.set(oe.TEXTURE0),x.imageManager.bind(x.context));const tt=M.getCrossfadeParameters();for(const rt of Je){const _t=R?rt.posMatrix:x.transform.calculatePosMatrix(rt.toUnwrapped()),pt=Me?nh(_t,K,x,Me,{tileID:rt,tileSize:Se},tt):th(_t,K,N),Rt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(rt);Ve.draw(X,oe.TRIANGLES,Xe,Oe,De,Yn.disabled,pt,Rt,M.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(c,0,g,v);break;case"custom":(function(x,A,M){const R=x.context,N=M.implementation;if(x.renderPass==="offscreen"){const K=N.prerender;K&&(x.setCustomLayerDefaults(),R.setColorMode(x.colorModeForRenderPass()),K.call(N,R.gl,x.transform.customLayerMatrix()),R.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),R.setColorMode(x.colorModeForRenderPass()),R.setStencilMode(er.disabled);const K=N.renderingMode==="3d"?new Bn(x.context.gl.LEQUAL,Bn.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,Bn.ReadOnly);R.setDepthMode(K),N.render(R.gl,x.transform.customLayerMatrix()),R.setDirty(),x.setBaseState(),R.bindFramebuffer.set(null)}})(c,0,g)}}translatePosMatrix(c,d,g,v,x){if(!g[0]&&!g[1])return c;const A=x?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(A){const N=Math.sin(A),K=Math.cos(A);g=[g[0]*K-g[1]*N,g[0]*N+g[1]*K]}const M=[x?g[0]:kn(d,g[0],this.transform.zoom),x?g[1]:kn(d,g[1],this.transform.zoom),0],R=new Float32Array(16);return o.H(R,c,M),R}saveTileTexture(c){const d=this._tileTextures[c.size[0]];d?d.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const d=this._tileTextures[c];return d&&d.length>0?d.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const d=this.imageManager.getPattern(c.from.toString()),g=this.imageManager.getPattern(c.to.toString());return!d||!g}useProgram(c,d){this.cache=this.cache||{};const g=c+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new Ti(this.context,qo[c],d,vu[c],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ce(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:c,drawingBufferHeight:d}=this.context.gl;return this.width!==c||this.height!==d}}class Ei{constructor(c,d){this.points=c,this.planes=d}static fromInvProjectionMatrix(c,d,g){const v=Math.pow(2,g),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(M=>{const R=1/(M=o.af([],M,c))[3]/d*v;return o.a$(M,M,[R,R,1/M[3],R])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(M=>{const R=function(oe,Te){var Se=Te[0],Me=Te[1],ye=Te[2],Oe=Se*Se+Me*Me+ye*ye;return Oe>0&&(Oe=1/Math.sqrt(Oe)),oe[0]=Te[0]*Oe,oe[1]=Te[1]*Oe,oe[2]=Te[2]*Oe,oe}([],function(oe,Te,Se){var Me=Te[0],ye=Te[1],Oe=Te[2],Xe=Se[0],De=Se[1],Ve=Se[2];return oe[0]=ye*Ve-Oe*De,oe[1]=Oe*Xe-Me*Ve,oe[2]=Me*De-ye*Xe,oe}([],me([],x[M[0]],x[M[1]]),me([],x[M[2]],x[M[1]]))),N=-((K=R)[0]*(X=x[M[1]])[0]+K[1]*X[1]+K[2]*X[2]);var K,X;return R.concat(N)});return new Ei(x,A)}}class Ai{constructor(c,d){this.min=c,this.max=d,this.center=function(g,v,x){return g[0]=.5*v[0],g[1]=.5*v[1],g[2]=.5*v[2],g}([],function(g,v,x){return g[0]=v[0]+x[0],g[1]=v[1]+x[1],g[2]=v[2]+x[2],g}([],this.min,this.max))}quadrant(c){const d=[c%2==0,c<2],g=te(this.min),v=te(this.max);for(let x=0;x<d.length;x++)g[x]=d[x]?this.min[x]:this.center[x],v[x]=d[x]?this.center[x]:this.max[x];return v[2]=this.max[2],new Ai(g,v)}distanceX(c){return Math.max(Math.min(this.max[0],c[0]),this.min[0])-c[0]}distanceY(c){return Math.max(Math.min(this.max[1],c[1]),this.min[1])-c[1]}intersects(c){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let v=0;v<c.planes.length;v++){const x=c.planes[v];let A=0;for(let M=0;M<d.length;M++)o.b0(x,d[M])>=0&&A++;if(A===0)return 0;A!==d.length&&(g=!1)}if(g)return 2;for(let v=0;v<3;v++){let x=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let M=0;M<c.points.length;M++){const R=c.points[M][v]-this.min[v];x=Math.min(x,R),A=Math.max(A,R)}if(A<0||x>this.max[v]-this.min[v])return 0}return 1}}class yo{constructor(c=0,d=0,g=0,v=0){if(isNaN(c)||c<0||isNaN(d)||d<0||isNaN(g)||g<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=d,this.left=g,this.right=v}interpolate(c,d,g){return d.top!=null&&c.top!=null&&(this.top=o.z.number(c.top,d.top,g)),d.bottom!=null&&c.bottom!=null&&(this.bottom=o.z.number(c.bottom,d.bottom,g)),d.left!=null&&c.left!=null&&(this.left=o.z.number(c.left,d.left,g)),d.right!=null&&c.right!=null&&(this.right=o.z.number(c.right,d.right,g)),this}getCenter(c,d){const g=o.ac((this.left+c-this.right)/2,0,c),v=o.ac((this.top+d-this.bottom)/2,0,d);return new o.P(g,v)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new yo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Yl=85.051129;class Qa{constructor(c,d,g,v,x){this.tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=c||0,this._maxZoom=d||22,this._minPitch=g??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new yo,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const c=new Qa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return c.apply(this),c}apply(c){this.tileSize=c.tileSize,this.latRange=c.latRange,this.width=c.width,this.height=c.height,this._center=c._center,this._elevation=c._elevation,this.minElevationForCurrentTile=c.minElevationForCurrentTile,this.zoom=c.zoom,this.angle=c.angle,this._fov=c._fov,this._pitch=c._pitch,this._unmodified=c._unmodified,this._edgeInsets=c._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(c){const d=-o.b1(c,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var g=new o.A(4);return o.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,v,x){var A=v[0],M=v[1],R=v[2],N=v[3],K=Math.sin(x),X=Math.cos(x);g[0]=A*X+R*K,g[1]=M*X+N*K,g[2]=A*-K+R*X,g[3]=M*-K+N*X}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const d=o.ac(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(c){const d=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(c){c!==this._elevation&&(this._elevation=c,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,d,g){this._unmodified=!1,this._edgeInsets.interpolate(c,d,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const d=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(c){const d=[new o.b2(0,c)];if(this._renderWorldCopies){const g=this.pointCoordinate(new o.P(0,0)),v=this.pointCoordinate(new o.P(this.width,0)),x=this.pointCoordinate(new o.P(this.width,this.height)),A=this.pointCoordinate(new o.P(0,this.height)),M=Math.floor(Math.min(g.x,v.x,x.x,A.x)),R=Math.floor(Math.max(g.x,v.x,x.x,A.x)),N=1;for(let K=M-N;K<=R+N;K++)K!==0&&d.push(new o.b2(K,c))}return d}coveringTiles(c){var d,g;let v=this.coveringZoomLevel(c);const x=v;if(c.minzoom!==void 0&&v<c.minzoom)return[];c.maxzoom!==void 0&&v>c.maxzoom&&(v=c.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),M=o.Y.fromLngLat(this.center),R=Math.pow(2,v),N=[R*A.x,R*A.y,0],K=[R*M.x,R*M.y,0],X=Ei.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v);let oe=c.minzoom||0;!c.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(oe=v);const Te=c.terrain?2/Math.min(this.tileSize,c.tileSize)*this.tileSize:3,Se=De=>({aabb:new Ai([De*R,0,0],[(De+1)*R,R,0]),zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Me=[],ye=[],Oe=v,Xe=c.reparseOverscaled?x:v;if(this._renderWorldCopies)for(let De=1;De<=3;De++)Me.push(Se(-De)),Me.push(Se(De));for(Me.push(Se(0));Me.length>0;){const De=Me.pop(),Ve=De.x,Je=De.y;let tt=De.fullyVisible;if(!tt){const Ft=De.aabb.intersects(X);if(Ft===0)continue;tt=Ft===2}const rt=c.terrain?N:K,_t=De.aabb.distanceX(rt),pt=De.aabb.distanceY(rt),Rt=Math.max(Math.abs(_t),Math.abs(pt));if(De.zoom===Oe||Rt>Te+(1<<Oe-De.zoom)-2&&De.zoom>=oe){const Ft=Oe-De.zoom,Tn=N[0]-.5-(Ve<<Ft),qt=N[1]-.5-(Je<<Ft);ye.push({tileID:new o.Q(De.zoom===Oe?Xe:De.zoom,De.wrap,De.zoom,Ve,Je),distanceSq:Y([K[0]-.5-Ve,K[1]-.5-Je]),tileDistanceToCamera:Math.sqrt(Tn*Tn+qt*qt)})}else for(let Ft=0;Ft<4;Ft++){const Tn=(Ve<<1)+Ft%2,qt=(Je<<1)+(Ft>>1),gn=De.zoom+1;let Pn=De.aabb.quadrant(Ft);if(c.terrain){const Nn=new o.Q(gn,De.wrap,gn,Tn,qt),wn=c.terrain.getMinMaxElevation(Nn),Dn=(d=wn.minElevation)!==null&&d!==void 0?d:this.elevation,zn=(g=wn.maxElevation)!==null&&g!==void 0?g:this.elevation;Pn=new Ai([Pn.min[0],Pn.min[1],Dn],[Pn.max[0],Pn.max[1],zn])}Me.push({aabb:Pn,zoom:gn,x:Tn,y:qt,wrap:De.wrap,fullyVisible:tt})}}return ye.sort((De,Ve)=>De.distanceSq-Ve.distanceSq).map(De=>De.tileID)}resize(c,d){this.width=c,this.height=d,this.pixelsToGLUnits=[2/c,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const d=o.ac(c.lat,-85.051129,Yl);return new o.P(o.N(c.lng)*this.worldSize,o.O(d)*this.worldSize)}unproject(c){return new o.Y(c.x/this.worldSize,c.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(c){const d=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,v=this.pointLocation(this.centerPoint,c),x=c.getElevationForLngLatZoom(v,this.tileZoom);if(!(this.elevation-x))return;const A=g+d-x,M=Math.cos(this._pitch)*this.cameraToCenterDistance/A/o.b3(1,v.lat),R=this.scaleZoom(M/this.tileSize);this._elevation=x,this._center=v,this.zoom=R}setLocationAtPoint(c,d){const g=this.pointCoordinate(d),v=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(c),A=new o.Y(x.x-(g.x-v.x),x.y-(g.y-v.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(c,d){return d?this.coordinatePoint(this.locationCoordinate(c),d.getElevationForLngLatZoom(c,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(c))}pointLocation(c,d){return this.coordinateLocation(this.pointCoordinate(c,d))}locationCoordinate(c){return o.Y.fromLngLat(c)}coordinateLocation(c){return c&&c.toLngLat()}pointCoordinate(c,d){if(d){const oe=d.pointCoordinate(c);if(oe!=null)return oe}const g=[c.x,c.y,0,1],v=[c.x,c.y,1,1];o.af(g,g,this.pixelMatrixInverse),o.af(v,v,this.pixelMatrixInverse);const x=g[3],A=v[3],M=g[1]/x,R=v[1]/A,N=g[2]/x,K=v[2]/A,X=N===K?0:(0-N)/(K-N);return new o.Y(o.z.number(g[0]/x,v[0]/A,X)/this.worldSize,o.z.number(M,R,X)/this.worldSize)}coordinatePoint(c,d=0,g=this.pixelMatrix){const v=[c.x*this.worldSize,c.y*this.worldSize,d,1];return o.af(v,v,g),new o.P(v[0]/v[3],v[1]/v[3])}getBounds(){const c=Math.max(0,this.height/2-this.getHorizon());return new et().extend(this.pointLocation(new o.P(0,c))).extend(this.pointLocation(new o.P(this.width,c))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new et([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(c){c?(this.lngRange=[c.getWest(),c.getEast()],this.latRange=[c.getSouth(),c.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Yl])}calculatePosMatrix(c,d=!1){const g=c.key,v=d?this._alignedPosMatrixCache:this._posMatrixCache;if(v[g])return v[g];const x=c.canonical,A=this.worldSize/this.zoomScale(x.z),M=x.x+Math.pow(2,x.z)*c.wrap,R=o.an(new Float64Array(16));return o.H(R,R,[M*A,x.y*A,0]),o.J(R,R,[A/o.W,A/o.W,1]),o.K(R,d?this.alignedProjMatrix:this.projMatrix,R),v[g]=new Float32Array(R),v[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(c,d){d=o.ac(+d,this.minZoom,this.maxZoom);const g={center:new o.M(c.lng,c.lat),zoom:d};let v=this.lngRange;if(!this._renderWorldCopies&&v===null){const De=179.9999999999;v=[-De,De]}const x=this.tileSize*this.zoomScale(g.zoom);let A=0,M=x,R=0,N=x,K=0,X=0;const{x:oe,y:Te}=this.size;if(this.latRange){const De=this.latRange;A=o.O(De[1])*x,M=o.O(De[0])*x,M-A<Te&&(K=Te/(M-A))}v&&(R=o.b1(o.N(v[0])*x,0,x),N=o.b1(o.N(v[1])*x,0,x),N<R&&(N+=x),N-R<oe&&(X=oe/(N-R)));const{x:Se,y:Me}=this.project.call({worldSize:x},c);let ye,Oe;const Xe=Math.max(X||0,K||0);if(Xe){const De=new o.P(X?(N+R)/2:Se,K?(M+A)/2:Me);return g.center=this.unproject.call({worldSize:x},De).wrap(),g.zoom+=this.scaleZoom(Xe),g}if(this.latRange){const De=Te/2;Me-De<A&&(Oe=A+De),Me+De>M&&(Oe=M-De)}if(v){const De=(R+N)/2;let Ve=Se;this._renderWorldCopies&&(Ve=o.b1(Se,De-x/2,De+x/2));const Je=oe/2;Ve-Je<R&&(ye=R+Je),Ve+Je>N&&(ye=N-Je)}if(ye!==void 0||Oe!==void 0){const De=new o.P(ye??Se,Oe??Me);g.center=this.unproject.call({worldSize:x},De).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this._unmodified,{center:d,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=g,this._unmodified=c,this._constraining=!1}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,d=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b3(1,this.center.lat)*this.worldSize;let v=o.an(new Float64Array(16));o.J(v,v,[this.width/2,-this.height/2,1]),o.H(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=o.an(new Float64Array(16)),o.J(v,v,[1,-1,1]),o.H(v,v,[-1,-1,0]),o.J(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this.minElevationForCurrentTile),M=x-A*this._pixelPerMeter/Math.cos(this._pitch),R=A<0?M:x,N=Math.PI/2+this._pitch,K=this._fov*(.5+c.y/this.height),X=Math.sin(K)*R/Math.sin(o.ac(Math.PI-N-K,.01,Math.PI-.01)),oe=this.getHorizon(),Te=2*Math.atan(oe/this.cameraToCenterDistance)*(.5+c.y/(2*oe)),Se=Math.sin(Te)*R/Math.sin(o.ac(Math.PI-N-Te,.01,Math.PI-.01)),Me=Math.min(X,Se),ye=1.01*(Math.cos(Math.PI/2-this._pitch)*Me+R),Oe=this.height/50;v=new Float64Array(16),o.b4(v,this._fov,this.width/this.height,Oe,ye),v[8]=2*-c.x/this.width,v[9]=2*c.y/this.height,o.J(v,v,[1,-1,1]),o.H(v,v,[0,0,-this.cameraToCenterDistance]),o.b5(v,v,this._pitch),o.ad(v,v,this.angle),o.H(v,v,[-d,-g,0]),this.mercatorMatrix=o.J([],v,[this.worldSize,this.worldSize,this.worldSize]),o.J(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.K(new Float64Array(16),this.labelPlaneMatrix,v),o.H(v,v,[0,0,-this.elevation]),this.projMatrix=v,this.invProjMatrix=o.ar([],v),this.pixelMatrix3D=o.K(new Float64Array(16),this.labelPlaneMatrix,v);const Xe=this.width%2/2,De=this.height%2/2,Ve=Math.cos(this.angle),Je=Math.sin(this.angle),tt=d-Math.round(d)+Ve*Xe+Je*De,rt=g-Math.round(g)+Ve*De+Je*Xe,_t=new Float64Array(v);if(o.H(_t,_t,[tt>.5?tt-1:tt,rt>.5?rt-1:rt,0]),this.alignedProjMatrix=_t,v=o.ar(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const c=this.pointCoordinate(new o.P(0,0)),d=[c.x*this.worldSize,c.y*this.worldSize,0,1];return o.af(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,c))}getCameraQueryGeometry(c){const d=this.getCameraPoint();if(c.length===1)return[c[0],d];{let g=d.x,v=d.y,x=d.x,A=d.y;for(const M of c)g=Math.min(g,M.x),v=Math.min(v,M.y),x=Math.max(x,M.x),A=Math.max(A,M.y);return[new o.P(g,v),new o.P(x,v),new o.P(x,A),new o.P(g,A),new o.P(g,v)]}}lngLatToCameraDepth(c,d){const g=this.locationCoordinate(c),v=[g.x*this.worldSize,g.y*this.worldSize,d,1];return o.af(v,v,this.projMatrix),v[2]/v[3]}}function Ql(w,c){let d,g=!1,v=null,x=null;const A=()=>{v=null,g&&(w.apply(x,d),v=setTimeout(A,c),g=!1)};return(...M)=>(g=!0,x=this,d=M,v||A(),v)}class ec{constructor(c){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let g;return d.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(g=v)}),(g&&g[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(g=>isNaN(g))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:g,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=Ql(this._updateHashUnthrottled,300),this._hashName=c&&encodeURIComponent(c)}addTo(c){return this._map=c,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(c){const d=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,v=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,v),A=Math.round(d.lng*x)/x,M=Math.round(d.lat*x)/x,R=this._map.getBearing(),N=this._map.getPitch();let K="";if(K+=c?`/${A}/${M}/${g}`:`${g}/${M}/${A}`,(R||N)&&(K+="/"+Math.round(10*R)/10),N&&(K+=`/${Math.round(N)}`),this._hashName){const X=this._hashName;let oe=!1;const Te=window.location.hash.slice(1).split("&").map(Se=>{const Me=Se.split("=")[0];return Me===X?(oe=!0,`${Me}=${K}`):Se}).filter(Se=>Se);return oe||Te.push(`${X}=${K}`),`#${Te.join("&")}`}return`#${K}`}}const Yo={linearity:.3,easing:o.b6(0,0,.3,1)},Ji=o.e({deceleration:2500,maxSpeed:1400},Yo),Du=o.e({deceleration:20,maxSpeed:1400},Yo),zu=o.e({deceleration:1e3,maxSpeed:360},Yo),Lu=o.e({deceleration:1e3,maxSpeed:90},Yo);class Ru{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,d=b.now();for(;c.length>0&&d-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)d.zoom+=x.zoomDelta||0,d.bearing+=x.bearingDelta||0,d.pitch+=x.pitchDelta||0,x.panDelta&&d.pan._add(x.panDelta),x.around&&(d.around=x.around),x.pinchAround&&(d.pinchAround=x.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(d.pan.mag()){const x=ea(d.pan.mag(),g,o.e({},Ji,c||{}));v.offset=d.pan.mult(x.amount/d.pan.mag()),v.center=this._map.transform.center,Qo(v,x)}if(d.zoom){const x=ea(d.zoom,g,Du);v.zoom=this._map.transform.zoom+x.amount,Qo(v,x)}if(d.bearing){const x=ea(d.bearing,g,zu);v.bearing=this._map.transform.bearing+o.ac(x.amount,-179,179),Qo(v,x)}if(d.pitch){const x=ea(d.pitch,g,Lu);v.pitch=this._map.transform.pitch+x.amount,Qo(v,x)}if(v.zoom||v.bearing){const x=d.pinchAround===void 0?d.around:d.pinchAround;v.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),o.e(v,{noMoveStart:!0})}}function Qo(w,c){(!w.duration||w.duration<c.duration)&&(w.duration=c.duration,w.easing=c.easing)}function ea(w,c,d){const{maxSpeed:g,linearity:v,deceleration:x}=d,A=o.ac(w*v/(c/1e3),-g,g),M=Math.abs(A)/(x*v);return{easing:d.easing,duration:1e3*M,amount:A*(M/2)}}class vs extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,d,g,v={}){const x=$.mousePos(d.getCanvas(),g),A=d.unproject(x);super(c,o.e({point:x,lngLat:A,originalEvent:g},v)),this._defaultPrevented=!1,this.target=d}}class ai extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,d,g){const v=c==="touchend"?g.changedTouches:g.touches,x=$.touchPos(d.getCanvasContainer(),v),A=x.map(R=>d.unproject(R)),M=x.reduce((R,N,K,X)=>R.add(N.div(X.length)),new o.P(0,0));super(c,{points:x,point:M,lngLats:A,lngLat:d.unproject(M),originalEvent:g}),this._defaultPrevented=!1}}class tc extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,d,g){super(c,{originalEvent:g}),this._defaultPrevented=!1}}class Ks{constructor(c,d){this._map=c,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(c){return this._firePreventable(new tc(c.type,this._map,c))}mousedown(c,d){return this._mousedownPos=d,this._firePreventable(new vs(c.type,this._map,c))}mouseup(c){this._map.fire(new vs(c.type,this._map,c))}click(c,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new vs(c.type,this._map,c))}dblclick(c){return this._firePreventable(new vs(c.type,this._map,c))}mouseover(c){this._map.fire(new vs(c.type,this._map,c))}mouseout(c){this._map.fire(new vs(c.type,this._map,c))}touchstart(c){return this._firePreventable(new ai(c.type,this._map,c))}touchmove(c){this._map.fire(new ai(c.type,this._map,c))}touchend(c){this._map.fire(new ai(c.type,this._map,c))}touchcancel(c){this._map.fire(new ai(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class li{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(c){this._map.fire(new vs(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new vs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._ignoreContextMenu||this._map.fire(new vs(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bo{constructor(c){this._map=c}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(c){return this.transform.pointLocation(o.P.convert(c),this._map.terrain)}}class Xs{constructor(c,d){this._map=c,this._tr=new bo(c),this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,d){this.isEnabled()&&c.shiftKey&&c.button===0&&($.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(c,d){if(!this._active)return;const g=d;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=g,this._box||(this._box=$.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",c));const x=Math.min(v.x,g.x),A=Math.max(v.x,g.x),M=Math.min(v.y,g.y),R=Math.max(v.y,g.y);$.setTransform(this._box,`translate(${x}px,${M}px)`),this._box.style.width=A-x+"px",this._box.style.height=R-M+"px"}mouseupWindow(c,d){if(!this._active||c.button!==0)return;const g=this._startPos,v=d;if(this.reset(),$.suppressClick(),g.x!==v.x||g.y!==v.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:c})),{cameraAnimation:x=>x.fitScreenCoordinates(g,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&($.remove(this._box),this._box=null),$.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(c,d){return this._map.fire(new o.k(c,{originalEvent:d}))}}function Yi(w,c){if(w.length!==c.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${c.length}`);const d={};for(let g=0;g<w.length;g++)d[w[g].identifier]=c[g];return d}class dh{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(c,d,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=c.timeStamp),g.length===this.numTouches&&(this.centroid=function(v){const x=new o.P(0,0);for(const A of v)x._add(A);return x.div(v.length)}(d),this.touches=Yi(g,d)))}touchmove(c,d,g){if(this.aborted||!this.centroid)return;const v=Yi(g,d);for(const x in this.touches){const A=v[x];(!A||A.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(c,d,g){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class nc{constructor(c){this.singleTap=new dh(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(c,d,g){this.singleTap.touchstart(c,d,g)}touchmove(c,d,g){this.singleTap.touchmove(c,d,g)}touchend(c,d,g){const v=this.singleTap.touchend(c,d,g);if(v){const x=c.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(v)<30;if(x&&A||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class ph{constructor(c){this._tr=new bo(c),this._zoomIn=new nc({numTouches:1,numTaps:2}),this._zoomOut=new nc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,d,g){this._zoomIn.touchstart(c,d,g),this._zoomOut.touchstart(c,d,g)}touchmove(c,d,g){this._zoomIn.touchmove(c,d,g),this._zoomOut.touchmove(c,d,g)}touchend(c,d,g){const v=this._zoomIn.touchend(c,d,g),x=this._zoomOut.touchend(c,d,g),A=this._tr;return v?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(v)},{originalEvent:c})}):x?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(x)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wo{constructor(c){this._enabled=!!c.enable,this._moveStateManager=c.moveStateManager,this._clickTolerance=c.clickTolerance||1,this._moveFunction=c.move,this._activateOnStart=!!c.activateOnStart,c.assignEvents(this),this.reset()}reset(c){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(c)}_move(...c){const d=this._moveFunction(...c);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(c,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(c)&&(this._moveStateManager.startMove(c),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(c,d){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(c.preventDefault(),!this._moveStateManager.isValidMoveEvent(c))return void this.reset(c);const v=d.length?d[0]:d;return!this._moved&&v.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(g,v))}dragEnd(c){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(c)&&(this._moved&&$.suppressClick(),this.reset(c))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ta={0:1,2:2};class ci{constructor(c){this._correctEvent=c.checkCorrectEvent}startMove(c){const d=$.mouseButton(c);this._eventButton=d}endMove(c){delete this._eventButton}isValidStartEvent(c){return this._correctEvent(c)}isValidMoveEvent(c){return!function(d,g){const v=ta[g];return d.buttons===void 0||(d.buttons&v)!==v}(c,this._eventButton)}isValidEndEvent(c){return $.mouseButton(c)===this._eventButton}}class tn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(c){return c.targetTouches.length===1}_isSameTouchEvent(c){return c.targetTouches[0].identifier===this._firstTouch}startMove(c){this._firstTouch=c.targetTouches[0].identifier}endMove(c){delete this._firstTouch}isValidStartEvent(c){return this._isOneFingerTouch(c)}isValidMoveEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}isValidEndEvent(c){return this._isOneFingerTouch(c)&&this._isSameTouchEvent(c)}}const el=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=function(c){c.preventDefault()}},xo=({enable:w,clickTolerance:c,bearingDegreesPerPixelMoved:d=.8})=>{const g=new ci({checkCorrectEvent:v=>$.mouseButton(v)===0&&v.ctrlKey||$.mouseButton(v)===2});return new wo({clickTolerance:c,move:(v,x)=>({bearingDelta:(x.x-v.x)*d}),moveStateManager:g,enable:w,assignEvents:el})},$o=({enable:w,clickTolerance:c,pitchDegreesPerPixelMoved:d=-.5})=>{const g=new ci({checkCorrectEvent:v=>$.mouseButton(v)===0&&v.ctrlKey||$.mouseButton(v)===2});return new wo({clickTolerance:c,move:(v,x)=>({pitchDelta:(x.y-v.y)*d}),moveStateManager:g,enable:w,assignEvents:el})};class Ou{constructor(c,d){this._clickTolerance=c.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(c,d,g){return this._calculateTransform(c,d,g)}touchmove(c,d,g){if(this._active&&!(g.length<this.minTouchs()))return c.preventDefault(),this._calculateTransform(c,d,g)}touchend(c,d,g){this._calculateTransform(c,d,g),this._active&&g.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,d,g){g.length>0&&(this._active=!0);const v=Yi(g,d),x=new o.P(0,0),A=new o.P(0,0);let M=0;for(const N in v){const K=v[N],X=this._touches[N];X&&(x._add(K),A._add(K.sub(X)),M++,v[N]=K)}if(this._touches=v,M<this.minTouchs()||!A.mag())return;const R=A.div(M);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(M),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(c,d,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([d[0],d[1]]))}touchmove(c,d,g){if(!this._firstTwoTouches)return;c.preventDefault();const[v,x]=this._firstTwoTouches,A=ko(g,d,v),M=ko(g,d,x);if(!A||!M)return;const R=this._aroundCenter?null:A.add(M).div(2);return this._move([A,M],R,c)}touchend(c,d,g){if(!this._firstTwoTouches)return;const[v,x]=this._firstTwoTouches,A=ko(g,d,v),M=ko(g,d,x);A&&M||(this._active&&$.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ko(w,c,d){for(let g=0;g<w.length;g++)if(w[g].identifier===d)return c[g]}function Fu(w,c){return Math.log(w/c)/Math.LN2}class Bu extends Xt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,d){const g=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(Fu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fu(this._distance,g),pinchAround:d}}}function tl(w,c){return 180*w.angleWith(c)/Math.PI}class rc extends Xt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,d,g){const v=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tl(this._vector,v),pinchAround:d}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const d=25/(Math.PI*this._minDiameter)*360,g=tl(c,this._startVector);return Math.abs(g)<d}}function nl(w){return Math.abs(w.y)>Math.abs(w.x)}class Nu extends Xt{constructor(c){super(),this._currentTouchCount=0,this._map=c}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(c,d,g){super.touchstart(c,d,g),this._currentTouchCount=g.length}_start(c){this._lastPoints=c,nl(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,d,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=c[0].sub(this._lastPoints[0]),x=c[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,x,g.timeStamp),this._valid?(this._lastPoints=c,this._active=!0,{pitchDelta:(v.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(c,d,g){if(this._valid!==void 0)return this._valid;const v=c.mag()>=2,x=d.mag()>=2;if(!v&&!x)return;if(!v||!x)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const A=c.y>0==d.y>0;return nl(c)&&nl(d)&&A}}const mh={panStep:100,bearingStep:15,pitchStep:10};class Mi{constructor(c){this._tr=new bo(c);const d=mh;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let d=0,g=0,v=0,x=0,A=0;switch(c.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:c.shiftKey?g=-1:(c.preventDefault(),x=-1);break;case 39:c.shiftKey?g=1:(c.preventDefault(),x=1);break;case 38:c.shiftKey?v=1:(c.preventDefault(),A=-1);break;case 40:c.shiftKey?v=-1:(c.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(g=0,v=0),{cameraAnimation:M=>{const R=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:rr,zoom:d?Math.round(R.zoom)+d*(c.shiftKey?2:1):R.zoom,bearing:R.bearing+g*this._bearingStep,pitch:R.pitch+v*this._pitchStep,offset:[-x*this._panStep,-A*this._panStep],center:R.center},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function rr(w){return w*(2-w)}const na=4.000244140625;class rl{constructor(c,d){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=c,this._tr=new bo(c),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(c){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!c[this._map.cooperativeGestures._bypassKey])return;let d=c.deltaMode===WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const g=b.now(),v=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,d!==0&&d%na==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(v*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),c.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=c,this._delta-=d,this._active||this._start(c)),c.preventDefault()}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=$.mousePos(this._map.getCanvas(),c),g=this._tr;this._around=d.y>g.transform.height/2-g.transform.getHorizon()?o.M.convert(this._aroundCenter?g.center:g.unproject(d)):o.M.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>na?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&R!==0&&(R=1/R);const N=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):c.scale;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(N*R))),this._type==="wheel"&&(this._startZoom=c.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:c.zoom,g=this._startZoom,v=this._easing;let x,A=!1;if(this._type==="wheel"&&g&&v){const M=Math.min((b.now()-this._lastWheelEventTime)/200,1),R=v(M);x=o.z.number(g,d,R),M<1?this._frameId||(this._frameId=!0):A=!0}else x=d,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:x-c.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let d=o.b7;if(this._prevEase){const g=this._prevEase,v=(b.now()-g.start)/g.duration,x=g.easing(v+.01)-g.easing(v),A=.27/Math.sqrt(x*x+1e-4)*.01,M=Math.sqrt(.0729-A*A);d=o.b6(A,M,.25,1)}return this._prevEase={start:b.now(),duration:c,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class sc{constructor(c,d){this._clickZoom=c,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Vu{constructor(c){this._tr=new bo(c),this.reset()}reset(){this._active=!1}dblclick(c,d){return c.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(c.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Uu{constructor(){this._tap=new nc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(c,d,g){if(!this._swipePoint)if(this._tapTime){const v=d[0],x=c.timeStamp-this._tapTime<500,A=this._tapPoint.dist(v)<30;x&&A?g.length>0&&(this._swipePoint=v,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(c,d,g)}touchmove(c,d,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const v=d[0],x=v.y-this._swipePoint.y;return this._swipePoint=v,c.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(c,d,g)}touchend(c,d,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const v=this._tap.touchend(c,d,g);v&&(this._tapTime=c.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ju{constructor(c,d,g){this._el=c,this._mousePan=d,this._touchPan=g}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Js{constructor(c,d,g){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=d,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ra{constructor(c,d,g,v){this._el=c,this._touchZoom=d,this._touchRotate=g,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class fn{constructor(c,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=c,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const c=this._map.getCanvasContainer();c.classList.add("maplibregl-cooperative-gestures"),this._container=$.create("div","maplibregl-cooperative-gesture-screen",c);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=d,this._container.appendChild(v);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=g,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&($.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(c){this._onCooperativeGesture(c.touches.length===1)}wheel(c){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!c[this._bypassKey])}_onCooperativeGesture(c){this._enabled&&c&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const _n=w=>w.zoom||w.drag||w.pitch||w.rotate;class sl extends o.k{}function sa(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta}class ic{constructor(c,d){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,x)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=v.type==="renderFrame"?void 0:v,M={needsRenderFrame:!1},R={},N={},K=v.touches,X=K?this._getMapTouches(K):void 0,oe=X?$.touchPos(this._map.getCanvas(),X):$.mousePos(this._map.getCanvas(),v);for(const{handlerName:Me,handler:ye,allowed:Oe}of this._handlers){if(!ye.isEnabled())continue;let Xe;this._blockedByActive(N,Oe,Me)?ye.reset():ye[x||v.type]&&(Xe=ye[x||v.type](v,oe,X),this.mergeHandlerResult(M,R,Xe,Me,A),Xe&&Xe.needsRenderFrame&&this._triggerRenderFrame()),(Xe||ye.isActive())&&(N[Me]=ye)}const Te={};for(const Me in this._previousActiveHandlers)N[Me]||(Te[Me]=A);this._previousActiveHandlers=N,(Object.keys(Te).length||sa(M))&&(this._changes.push([M,R,Te]),this._triggerRenderFrame()),(Object.keys(N).length||sa(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Se}=M;Se&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Se(this._map))},this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ru(c),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,x,A]of this._listeners)$.addEventListener(v,x,v===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[c,d,g]of this._listeners)$.removeEventListener(c,d,c===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(c){const d=this._map,g=d.getCanvasContainer();this._add("mapEvent",new Ks(d,c));const v=d.boxZoom=new Xs(d,c);this._add("boxZoom",v),c.interactive&&c.boxZoom&&v.enable();const x=d.cooperativeGestures=new fn(d,c.cooperativeGestures);this._add("cooperativeGestures",x),c.cooperativeGestures&&x.enable();const A=new ph(d),M=new Vu(d);d.doubleClickZoom=new sc(M,A),this._add("tapZoom",A),this._add("clickZoom",M),c.interactive&&c.doubleClickZoom&&d.doubleClickZoom.enable();const R=new Uu;this._add("tapDragZoom",R);const N=d.touchPitch=new Nu(d);this._add("touchPitch",N),c.interactive&&c.touchPitch&&d.touchPitch.enable(c.touchPitch);const K=xo(c),X=$o(c);d.dragRotate=new Js(c,K,X),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",X,["mouseRotate"]),c.interactive&&c.dragRotate&&d.dragRotate.enable();const oe=(({enable:Xe,clickTolerance:De})=>{const Ve=new ci({checkCorrectEvent:Je=>$.mouseButton(Je)===0&&!Je.ctrlKey});return new wo({clickTolerance:De,move:(Je,tt)=>({around:tt,panDelta:tt.sub(Je)}),activateOnStart:!0,moveStateManager:Ve,enable:Xe,assignEvents:el})})(c),Te=new Ou(c,d);d.dragPan=new ju(g,oe,Te),this._add("mousePan",oe),this._add("touchPan",Te,["touchZoom","touchRotate"]),c.interactive&&c.dragPan&&d.dragPan.enable(c.dragPan);const Se=new rc,Me=new Bu;d.touchZoomRotate=new ra(g,Me,Se,R),this._add("touchRotate",Se,["touchPan","touchZoom"]),this._add("touchZoom",Me,["touchPan","touchRotate"]),c.interactive&&c.touchZoomRotate&&d.touchZoomRotate.enable(c.touchZoomRotate);const ye=d.scrollZoom=new rl(d,()=>this._triggerRenderFrame());this._add("scrollZoom",ye,["mousePan"]),c.interactive&&c.scrollZoom&&d.scrollZoom.enable(c.scrollZoom);const Oe=d.keyboard=new Mi(d);this._add("keyboard",Oe),c.interactive&&c.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new li(d))}_add(c,d,g){this._handlers.push({handlerName:c,handler:d,allowed:g}),this._handlersById[c]=d}stop(c){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!_n(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,d,g){for(const v in c)if(v!==g&&(!d||d.indexOf(v)<0))return!0;return!1}_getMapTouches(c){const d=[];for(const g of c)this._el.contains(g.target)&&d.push(g);return d}mergeHandlerResult(c,d,g,v,x){if(!g)return;o.e(c,g);const A={handlerName:v,originalEvent:g.originalEvent||x};g.zoomDelta!==void 0&&(d.zoom=A),g.panDelta!==void 0&&(d.drag=A),g.pitchDelta!==void 0&&(d.pitch=A),g.bearingDelta!==void 0&&(d.rotate=A)}_applyChanges(){const c={},d={},g={};for(const[v,x,A]of this._changes)v.panDelta&&(c.panDelta=(c.panDelta||new o.P(0,0))._add(v.panDelta)),v.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(c.around=v.around),v.pinchAround!==void 0&&(c.pinchAround=v.pinchAround),v.noInertia&&(c.noInertia=v.noInertia),o.e(d,x),o.e(g,A);this._updateMapTransform(c,d,g),this._changes=[]}_updateMapTransform(c,d,g){const v=this._map,x=v._getTransformForUpdate(),A=v.terrain;if(!(sa(c)||A&&this._terrainMovement))return this._fireEvents(d,g,!0);let{panDelta:M,zoomDelta:R,bearingDelta:N,pitchDelta:K,around:X,pinchAround:oe}=c;oe!==void 0&&(X=oe),v._stop(!0),X=X||v.transform.centerPoint;const Te=x.pointLocation(M?X.sub(M):X);N&&(x.bearing+=N),K&&(x.pitch+=K),R&&(x.zoom+=R),A?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(M)):x.setLocationAtPoint(Te,X):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(Te,X),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(v.terrain)})):x.setLocationAtPoint(Te,X),v._applyUpdatedTransform(x),this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(d,g,!0)}_fireEvents(c,d,g){const v=_n(this._eventsInProgress),x=_n(c),A={};for(const K in c){const{originalEvent:X}=c[K];this._eventsInProgress[K]||(A[`${K}start`]=X),this._eventsInProgress[K]=c[K]}!v&&x&&this._fireEvent("movestart",x.originalEvent);for(const K in A)this._fireEvent(K,A[K]);x&&this._fireEvent("move",x.originalEvent);for(const K in c){const{originalEvent:X}=c[K];this._fireEvent(K,X)}const M={};let R;for(const K in this._eventsInProgress){const{handlerName:X,originalEvent:oe}=this._eventsInProgress[K];this._handlersById[X].isActive()||(delete this._eventsInProgress[K],R=d[X]||oe,M[`${K}end`]=R)}for(const K in M)this._fireEvent(K,M[K]);const N=_n(this._eventsInProgress);if(g&&(v||x)&&!N){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=oe=>oe!==0&&-this._bearingSnap<oe&&oe<this._bearingSnap;!K||!K.essential&&b.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:R})),X(this._map.getBearing())&&this._map.resetNorth()):(X(K.bearing||this._map.getBearing())&&(K.bearing=0),K.freezeElevation=!0,this._map.easeTo(K,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(c,d){this._map.fire(new o.k(c,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{delete this._frameId,this.handleEvent(new sl("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ys extends o.E{constructor(c,d){super(),this._renderFrameCallback=()=>{const g=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.M(this.transform.center.lng,this.transform.center.lat)}setCenter(c,d){return this.jumpTo({center:c},d)}panBy(c,d,g){return c=o.P.convert(c).mult(-1),this.panTo(this.transform.center,o.e({offset:c},d),g)}panTo(c,d,g){return this.easeTo(o.e({center:c},d),g)}getZoom(){return this.transform.zoom}setZoom(c,d){return this.jumpTo({zoom:c},d),this}zoomTo(c,d,g){return this.easeTo(o.e({zoom:c},d),g)}zoomIn(c,d){return this.zoomTo(this.getZoom()+1,c,d),this}zoomOut(c,d){return this.zoomTo(this.getZoom()-1,c,d),this}getBearing(){return this.transform.bearing}setBearing(c,d){return this.jumpTo({bearing:c},d),this}getPadding(){return this.transform.padding}setPadding(c,d){return this.jumpTo({padding:c},d),this}rotateTo(c,d,g){return this.easeTo(o.e({bearing:c},d),g)}resetNorth(c,d){return this.rotateTo(0,o.e({duration:1e3},c),d),this}resetNorthPitch(c,d){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},c),d),this}snapToNorth(c,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,d):this}getPitch(){return this.transform.pitch}setPitch(c,d){return this.jumpTo({pitch:c},d),this}cameraForBounds(c,d){c=et.convert(c);const g=d&&d.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),g,d)}_cameraForBoxAndBearing(c,d,g,v){const x={top:0,bottom:0,right:0,left:0};if(typeof(v=o.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const Ft=v.padding;v.padding={top:Ft,bottom:Ft,right:Ft,left:Ft}}v.padding=o.e(x,v.padding);const A=this.transform,M=A.padding,R=new et(c,d),N=A.project(R.getNorthWest()),K=A.project(R.getNorthEast()),X=A.project(R.getSouthEast()),oe=A.project(R.getSouthWest()),Te=o.b8(-g),Se=N.rotate(Te),Me=K.rotate(Te),ye=X.rotate(Te),Oe=oe.rotate(Te),Xe=new o.P(Math.max(Se.x,Me.x,Oe.x,ye.x),Math.max(Se.y,Me.y,Oe.y,ye.y)),De=new o.P(Math.min(Se.x,Me.x,Oe.x,ye.x),Math.min(Se.y,Me.y,Oe.y,ye.y)),Ve=Xe.sub(De),Je=(A.width-(M.left+M.right+v.padding.left+v.padding.right))/Ve.x,tt=(A.height-(M.top+M.bottom+v.padding.top+v.padding.bottom))/Ve.y;if(tt<0||Je<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const rt=Math.min(A.scaleZoom(A.scale*Math.min(Je,tt)),v.maxZoom),_t=o.P.convert(v.offset),pt=new o.P((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(o.b8(g)),Rt=_t.add(pt).mult(A.scale/A.zoomScale(rt));return{center:A.unproject(N.add(X).div(2).sub(Rt)),zoom:rt,bearing:g}}fitBounds(c,d,g){return this._fitInternal(this.cameraForBounds(c,d),d,g)}fitScreenCoordinates(c,d,g,v,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(c)),this.transform.pointLocation(o.P.convert(d)),g,v),v,x)}_fitInternal(c,d,g){return c?(delete(d=o.e(c,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this}jumpTo(c,d){this.stop();const g=this._getTransformForUpdate();let v=!1,x=!1,A=!1;return"zoom"in c&&g.zoom!==+c.zoom&&(v=!0,g.zoom=+c.zoom),c.center!==void 0&&(g.center=o.M.convert(c.center)),"bearing"in c&&g.bearing!==+c.bearing&&(x=!0,g.bearing=+c.bearing),"pitch"in c&&g.pitch!==+c.pitch&&(A=!0,g.pitch=+c.pitch),c.padding==null||g.isPaddingEqual(c.padding)||(g.padding=c.padding),this._applyUpdatedTransform(g),this.fire(new o.k("movestart",d)).fire(new o.k("move",d)),v&&this.fire(new o.k("zoomstart",d)).fire(new o.k("zoom",d)).fire(new o.k("zoomend",d)),x&&this.fire(new o.k("rotatestart",d)).fire(new o.k("rotate",d)).fire(new o.k("rotateend",d)),A&&this.fire(new o.k("pitchstart",d)).fire(new o.k("pitch",d)).fire(new o.k("pitchend",d)),this.fire(new o.k("moveend",d))}calculateCameraOptionsFromTo(c,d,g,v=0){const x=o.Y.fromLngLat(c,d),A=o.Y.fromLngLat(g,v),M=A.x-x.x,R=A.y-x.y,N=A.z-x.z,K=Math.hypot(M,R,N);if(K===0)throw new Error("Can't calculate camera options with same From and To");const X=Math.hypot(M,R),oe=this.transform.scaleZoom(this.transform.cameraToCenterDistance/K/this.transform.tileSize),Te=180*Math.atan2(M,-R)/Math.PI;let Se=180*Math.acos(X/K)/Math.PI;return Se=N<0?90-Se:90+Se,{center:A.toLngLat(),zoom:oe,pitch:Se,bearing:Te}}easeTo(c,d){var g;this._stop(!1,c.easeId),((c=o.e({offset:[0,0],duration:500,easing:o.b7},c)).animate===!1||!c.essential&&b.prefersReducedMotion)&&(c.duration=0);const v=this._getTransformForUpdate(),x=this.getZoom(),A=this.getBearing(),M=this.getPitch(),R=this.getPadding(),N="bearing"in c?this._normalizeBearing(c.bearing,A):A,K="pitch"in c?+c.pitch:M,X="padding"in c?c.padding:v.padding,oe=o.P.convert(c.offset);let Te=v.centerPoint.add(oe);const Se=v.pointLocation(Te),{center:Me,zoom:ye}=v.getConstrained(o.M.convert(c.center||Se),(g=c.zoom)!==null&&g!==void 0?g:x);this._normalizeCenter(Me);const Oe=v.project(Se),Xe=v.project(Me).sub(Oe),De=v.zoomScale(ye-x);let Ve,Je;c.around&&(Ve=o.M.convert(c.around),Je=v.locationPoint(Ve));const tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ye!==x,this._rotating=this._rotating||A!==N,this._pitching=this._pitching||K!==M,this._padding=!v.isPaddingEqual(X),this._easeId=c.easeId,this._prepareEase(d,c.noMoveStart,tt),this.terrain&&this._prepareElevation(Me),this._ease(rt=>{if(this._zooming&&(v.zoom=o.z.number(x,ye,rt)),this._rotating&&(v.bearing=o.z.number(A,N,rt)),this._pitching&&(v.pitch=o.z.number(M,K,rt)),this._padding&&(v.interpolatePadding(R,X,rt),Te=v.centerPoint.add(oe)),this.terrain&&!c.freezeElevation&&this._updateElevation(rt),Ve)v.setLocationAtPoint(Ve,Je);else{const _t=v.zoomScale(v.zoom-x),pt=ye>x?Math.min(2,De):Math.max(.5,De),Rt=Math.pow(pt,1-rt),Ft=v.unproject(Oe.add(Xe.mult(rt*Rt)).mult(_t));v.setLocationAtPoint(v.renderWorldCopies?Ft.wrap():Ft,Te)}this._applyUpdatedTransform(v),this._fireMoveEvents(d)},rt=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,rt)},c),this}_prepareEase(c,d,g={}){this._moving=!0,d||g.moving||this.fire(new o.k("movestart",c)),this._zooming&&!g.zooming&&this.fire(new o.k("zoomstart",c)),this._rotating&&!g.rotating&&this.fire(new o.k("rotatestart",c)),this._pitching&&!g.pitching&&this.fire(new o.k("pitchstart",c))}_prepareElevation(c){this._elevationCenter=c,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(c){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(c<1&&d!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=c*(g-(d-(g*c+this._elevationStart))/(1-c)),this._elevationTarget=d}this.transform.elevation=o.z.number(this._elevationStart,this._elevationTarget,c)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(c){if(!this.transformCameraUpdate)return;const d=c.clone(),{center:g,zoom:v,pitch:x,bearing:A,elevation:M}=this.transformCameraUpdate(d);g&&(d.center=g),v!==void 0&&(d.zoom=v),x!==void 0&&(d.pitch=x),A!==void 0&&(d.bearing=A),M!==void 0&&(d.elevation=M),this.transform.apply(d)}_fireMoveEvents(c){this.fire(new o.k("move",c)),this._zooming&&this.fire(new o.k("zoom",c)),this._rotating&&this.fire(new o.k("rotate",c)),this._pitching&&this.fire(new o.k("pitch",c))}_afterEase(c,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const g=this._zooming,v=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.k("zoomend",c)),v&&this.fire(new o.k("rotateend",c)),x&&this.fire(new o.k("pitchend",c)),this.fire(new o.k("moveend",c))}flyTo(c,d){var g;if(!c.essential&&b.prefersReducedMotion){const Nn=o.L(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Nn,d)}this.stop(),c=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b7},c);const v=this._getTransformForUpdate(),x=this.getZoom(),A=this.getBearing(),M=this.getPitch(),R=this.getPadding(),N="bearing"in c?this._normalizeBearing(c.bearing,A):A,K="pitch"in c?+c.pitch:M,X="padding"in c?c.padding:v.padding,oe=o.P.convert(c.offset);let Te=v.centerPoint.add(oe);const Se=v.pointLocation(Te),{center:Me,zoom:ye}=v.getConstrained(o.M.convert(c.center||Se),(g=c.zoom)!==null&&g!==void 0?g:x);this._normalizeCenter(Me);const Oe=v.zoomScale(ye-x),Xe=v.project(Se),De=v.project(Me).sub(Xe);let Ve=c.curve;const Je=Math.max(v.width,v.height),tt=Je/Oe,rt=De.mag();if("minZoom"in c){const Nn=o.ac(Math.min(c.minZoom,x,ye),v.minZoom,v.maxZoom),wn=Je/v.zoomScale(Nn-x);Ve=Math.sqrt(wn/rt*2)}const _t=Ve*Ve;function pt(Nn){const wn=(tt*tt-Je*Je+(Nn?-1:1)*_t*_t*rt*rt)/(2*(Nn?tt:Je)*_t*rt);return Math.log(Math.sqrt(wn*wn+1)-wn)}function Rt(Nn){return(Math.exp(Nn)-Math.exp(-Nn))/2}function Ft(Nn){return(Math.exp(Nn)+Math.exp(-Nn))/2}const Tn=pt(!1);let qt=function(Nn){return Ft(Tn)/Ft(Tn+Ve*Nn)},gn=function(Nn){return Je*((Ft(Tn)*(Rt(wn=Tn+Ve*Nn)/Ft(wn))-Rt(Tn))/_t)/rt;var wn},Pn=(pt(!0)-Tn)/Ve;if(Math.abs(rt)<1e-6||!isFinite(Pn)){if(Math.abs(Je-tt)<1e-6)return this.easeTo(c,d);const Nn=tt<Je?-1:1;Pn=Math.abs(Math.log(tt/Je))/Ve,gn=function(){return 0},qt=function(wn){return Math.exp(Nn*Ve*wn)}}return c.duration="duration"in c?+c.duration:1e3*Pn/("screenSpeed"in c?+c.screenSpeed/Ve:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0),this._zooming=!0,this._rotating=A!==N,this._pitching=K!==M,this._padding=!v.isPaddingEqual(X),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(Me),this._ease(Nn=>{const wn=Nn*Pn,Dn=1/qt(wn);v.zoom=Nn===1?ye:x+v.scaleZoom(Dn),this._rotating&&(v.bearing=o.z.number(A,N,Nn)),this._pitching&&(v.pitch=o.z.number(M,K,Nn)),this._padding&&(v.interpolatePadding(R,X,Nn),Te=v.centerPoint.add(oe)),this.terrain&&!c.freezeElevation&&this._updateElevation(Nn);const zn=Nn===1?Me:v.unproject(Xe.add(De.mult(gn(wn))).mult(Dn));v.setLocationAtPoint(v.renderWorldCopies?zn.wrap():zn,Te),this._applyUpdatedTransform(v),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,d)}if(!c){const g=this.handlers;g&&g.stop(!1)}return this}_ease(c,d,g){g.animate===!1||g.duration===0?(c(1),d()):(this._easeStart=b.now(),this._easeOptions=g,this._onEaseFrame=c,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(c,d){c=o.b1(c,-180,180);const g=Math.abs(c-d);return Math.abs(c-360-d)<g&&(c-=360),Math.abs(c+360-d)<g&&(c+=360),c}_normalizeCenter(c){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const g=c.lng-d.center.lng;c.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(c){return this.terrain?this.terrain.getElevationForLngLatZoom(o.M.convert(c),this.transform.tileZoom)-this.transform.elevation:null}}const oc={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ys{constructor(c=oc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=c}getDefaultPosition(){return"bottom-right"}onAdd(c){return this._map=c,this._compact=this.options.compact,this._container=$.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=$.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=$.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){$.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(c,d){const g=this._map._getUIString(`AttributionControl.${d}`);c.title=g,c.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let c=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=c.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&c.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const d=this._map.style.sourceCaches;for(const v in d){const x=d[v];if(x.used||x.usedForTerrain){const A=x.getSource();A.attribution&&c.indexOf(A.attribution)<0&&c.push(A.attribution)}}c=c.filter(v=>String(v).trim()),c.sort((v,x)=>v.length-x.length),c=c.filter((v,x)=>{for(let A=x+1;A<c.length;A++)if(c[A].indexOf(v)>=0)return!1;return!0});const g=c.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,c.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class qu{constructor(c={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const g=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=c}getDefaultPosition(){return"bottom-left"}onAdd(c){this._map=c,this._compact=this.options&&this.options.compact,this._container=$.create("div","maplibregl-ctrl");const d=$.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){$.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ia{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const d=++this._id;return this._queue.push({callback:c,id:d,cancelled:!1}),d}remove(c){const d=this._currentlyRunning,g=d?this._queue.concat(d):this._queue;for(const v of g)if(v.id===c)return void(v.cancelled=!0)}run(c=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const g of d)if(!g.cancelled&&(g.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var pr=o.X([{name:"a_pos3d",type:"Int16",components:3}]);class kr extends o.E{constructor(c){super(),this.sourceCache=c,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,c.usedForTerrain=!0,c.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(c,d){this.sourceCache.update(c,d),this._renderableTilesKeys=[];const g={};for(const v of c.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))g[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.posMatrix=new Float64Array(16),o.aN(v.posMatrix,0,o.W,0,o.W,0,1),this._tiles[v.key]=new ms(v,this.tileSize));for(const v in this._tiles)g[v]||delete this._tiles[v]}freeRtt(c){for(const d in this._tiles){const g=this._tiles[d];(!c||g.tileID.equals(c)||g.tileID.isChildOf(c)||c.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(c=>this.getTileByID(c))}getTileByID(c){return this._tiles[c]}getTerrainCoords(c){const d={};for(const g of this._renderableTilesKeys){const v=this._tiles[g].tileID;if(v.canonical.equals(c.canonical)){const x=c.clone();x.posMatrix=new Float64Array(16),o.aN(x.posMatrix,0,o.W,0,o.W,0,1),d[g]=x}else if(v.canonical.isChildOf(c.canonical)){const x=c.clone();x.posMatrix=new Float64Array(16);const A=v.canonical.z-c.canonical.z,M=v.canonical.x-(v.canonical.x>>A<<A),R=v.canonical.y-(v.canonical.y>>A<<A),N=o.W>>A;o.aN(x.posMatrix,0,N,0,N,0,1),o.H(x.posMatrix,x.posMatrix,[-M*N,-R*N,0]),d[g]=x}else if(c.canonical.isChildOf(v.canonical)){const x=c.clone();x.posMatrix=new Float64Array(16);const A=c.canonical.z-v.canonical.z,M=c.canonical.x-(c.canonical.x>>A<<A),R=c.canonical.y-(c.canonical.y>>A<<A),N=o.W>>A;o.aN(x.posMatrix,0,o.W,0,o.W,0,1),o.H(x.posMatrix,x.posMatrix,[M*N,R*N,0]),o.J(x.posMatrix,x.posMatrix,[1/2**A,1/2**A,0]),d[g]=x}}return d}getSourceTile(c,d){const g=this.sourceCache._source;let v=c.overscaledZ-this.deltaZoom;if(v>g.maxzoom&&(v=g.maxzoom),v<g.minzoom)return null;this._sourceTileCache[c.key]||(this._sourceTileCache[c.key]=c.scaledTo(v).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[c.key]);if((!x||!x.dem)&&d)for(;v>=g.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(c.scaledTo(v--).key);return x}tilesAfterTime(c=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=c)}}class Gu{constructor(c,d,g){this.painter=c,this.sourceCache=new kr(d),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(c,d,g,v=o.W){var x;if(!(d>=0&&d<v&&g>=0&&g<v))return 0;const A=this.getTerrainData(c),M=(x=A.tile)===null||x===void 0?void 0:x.dem;if(!M)return 0;const R=function(Se,Me,ye){var Oe=Me[0],Xe=Me[1];return Se[0]=ye[0]*Oe+ye[4]*Xe+ye[12],Se[1]=ye[1]*Oe+ye[5]*Xe+ye[13],Se}([],[d/v*o.W,g/v*o.W],A.u_terrain_matrix),N=[R[0]*M.dim,R[1]*M.dim],K=Math.floor(N[0]),X=Math.floor(N[1]),oe=N[0]-K,Te=N[1]-X;return M.get(K,X)*(1-oe)*(1-Te)+M.get(K+1,X)*oe*(1-Te)+M.get(K,X+1)*(1-oe)*Te+M.get(K+1,X+1)*oe*Te}getElevationForLngLatZoom(c,d){const{tileID:g,mercatorX:v,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(c,d);return this.getElevation(g,v%o.W,x%o.W,o.W)}getElevation(c,d,g,v=o.W){return this.getDEMElevation(c,d,g,v)*this.exaggeration}getTerrainData(c){if(!this._emptyDemTexture){const v=this.painter.context,x=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ce(v,x,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ce(v,new o.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}const d=this.sourceCache.getSourceTile(c,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const v=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new Ce(v,d.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),d.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const g=d&&d+d.tileID.key+c.key;if(g&&!this._demMatrixCache[g]){const v=this.sourceCache.sourceCache._source.maxzoom;let x=c.canonical.z-d.tileID.canonical.z;c.overscaledZ>c.canonical.z&&(c.canonical.z>=v?x=c.canonical.z-v:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=c.canonical.x-(c.canonical.x>>x<<x),M=c.canonical.y-(c.canonical.y>>x<<x),R=o.b9(new Float64Array(16),[1/(o.W<<x),1/(o.W<<x),0]);o.H(R,R,[A*o.W,M*o.W,0]),this._demMatrixCache[c.key]={matrix:R,coord:c}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[c.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(c){const d=this.painter,g=d.width/devicePixelRatio,v=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ce(d.context,{width:g,height:v,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ce(d.context,{width:g,height:v,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(g,v,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,g,v))),this._fbo.colorAttachment.set(c==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const c=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,A=0;x<this._coordsTextureSize;x++)for(let M=0;M<this._coordsTextureSize;M++,A+=4)d[A+0]=255&M,d[A+1]=255&x,d[A+2]=M>>8<<4|x>>8,d[A+3]=0;const g=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),v=new Ce(c,g,c.gl.RGBA,{premultiply:!1});return v.bind(c.gl.NEAREST,c.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(c){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),g=this.painter.context,v=g.gl,x=Math.round(c.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(c.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(x,M-A-1,1,1,v.RGBA,v.UNSIGNED_BYTE,d),g.bindFramebuffer.set(null);const R=d[0]+(d[2]>>4<<8),N=d[1]+((15&d[2])<<8),K=this.coordsIndex[255-d[3]],X=K&&this.sourceCache.getTileByID(K);if(!X)return null;const oe=this._coordsTextureSize,Te=(1<<X.tileID.canonical.z)*oe;return new o.Y((X.tileID.canonical.x*oe+R)/Te+X.tileID.wrap,(X.tileID.canonical.y*oe+N)/Te,this.getElevation(X.tileID,R,N,oe))}depthAtPoint(c){const d=new Uint8Array(4),g=this.painter.context,v=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(c.x,this.painter.height/devicePixelRatio-c.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,d),g.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const c=this.painter.context,d=new o.ba,g=new o.aX,v=this.meshSize,x=o.W/v,A=v*v;for(let X=0;X<=v;X++)for(let oe=0;oe<=v;oe++)d.emplaceBack(oe*x,X*x,0);for(let X=0;X<A;X+=v+1)for(let oe=0;oe<v;oe++)g.emplaceBack(oe+X,v+oe+X+1,v+oe+X+2),g.emplaceBack(oe+X,v+oe+X+2,oe+X+1);const M=d.length,R=M+2*(v+1);for(const X of[0,1])for(let oe=0;oe<=v;oe++)for(const Te of[0,1])d.emplaceBack(oe*x,X*o.W,Te);for(let X=0;X<2*v;X+=2)g.emplaceBack(R+X,R+X+1,R+X+3),g.emplaceBack(R+X,R+X+3,R+X+2),g.emplaceBack(M+X,M+X+3,M+X+1),g.emplaceBack(M+X,M+X+2,M+X+3);const N=d.length,K=N+2*(v+1);for(const X of[0,1])for(let oe=0;oe<=v;oe++)for(const Te of[0,1])d.emplaceBack(X*o.W,oe*x,Te);for(let X=0;X<2*v;X+=2)g.emplaceBack(N+X,N+X+1,N+X+3),g.emplaceBack(N+X,N+X+3,N+X+2),g.emplaceBack(K+X,K+X+3,K+X+1),g.emplaceBack(K+X,K+X+2,K+X+3);return this._mesh={indexBuffer:c.createIndexBuffer(g),vertexBuffer:c.createVertexBuffer(d,pr.members),segments:o.$.simpleSegment(0,0,d.length,g.length)},this._mesh}getMeshFrameDelta(c){return 2*Math.PI*o.bb/Math.pow(2,c)/5}getMinTileElevationForLngLatZoom(c,d){var g;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(c,d);return(g=this.getMinMaxElevation(v).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(c){const d=this.getTerrainData(c).tile,g={minElevation:null,maxElevation:null};return d&&d.dem&&(g.minElevation=d.dem.min*this.exaggeration,g.maxElevation=d.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(c,d){const g=o.Y.fromLngLat(c.wrap()),v=(1<<d)*o.W,x=g.x*v,A=g.y*v,M=Math.floor(x/o.W),R=Math.floor(A/o.W);return{tileID:new o.Q(d,0,d,M,R),mercatorX:x,mercatorY:A}}}class oa{constructor(c,d,g){this._context=c,this._size=d,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const c of this._objects)c.texture.destroy(),c.fbo.destroy()}_createObject(c){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new Ce(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(g.texture),{id:c,fbo:d,texture:g,stamp:-1,inUse:!1}}getObjectForId(c){return this._objects[c]}useObject(c){c.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>c.id!==d),this._recentlyUsed.push(c.id)}stampObject(c){c.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const c=this._createObject(this._objects.length);return this._objects.push(c),c}freeObject(c){c.inUse=!1}freeAllObjects(){for(const c of this._objects)this.freeObject(c)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(c=>!c.inUse)===!1}}const vi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ac{constructor(c,d){this.painter=c,this.terrain=d,this.pool=new oa(c.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(c){return this.pool.getObjectForId(c.rtt[this._stacks.length-1].id).texture}prepareForRender(c,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=c._order.filter(g=>!c._layers[g].isHidden(d)),this._coordsDescendingInv={};for(const g in c.sourceCaches){this._coordsDescendingInv[g]={};const v=c.sourceCaches[g].getVisibleCoordinates();for(const x of v){const A=this.terrain.sourceCache.getTerrainCoords(x);for(const M in A)this._coordsDescendingInv[g][M]||(this._coordsDescendingInv[g][M]=[]),this._coordsDescendingInv[g][M].push(A[M])}}this._coordsDescendingInvStr={};for(const g of c._order){const v=c._layers[g],x=v.source;if(vi[v.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const A in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][A]=this._coordsDescendingInv[x][A].map(M=>M.key).sort().join()}}for(const g of this._renderableTiles)for(const v in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[v][g.tileID.key];x&&x!==g.rttCoords[v]&&(g.rtt=[])}}renderLayer(c){if(c.isHidden(this.painter.transform.zoom))return!1;const d=c.type,g=this.painter,v=this._renderableLayerIds[this._renderableLayerIds.length-1]===c.id;if(vi[d]&&(this._prevType&&vi[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(c.id),!v))return!0;if(vi[this._prevType]||vi[d]&&v){this._prevType=d;const x=this._stacks.length-1,A=this._stacks[x]||[];for(const M of this._renderableTiles){if(this.pool.isFull()&&(Ya(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(M),M.rtt[x]){const N=this.pool.getObjectForId(M.rtt[x].id);if(N.stamp===M.rtt[x].stamp){this.pool.useObject(N);continue}}const R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),M.rtt[x]={id:R.id,stamp:R.stamp},g.context.bindFramebuffer.set(R.fbo.framebuffer),g.context.clear({color:o.aO.transparent,stencil:0}),g.currentStencilSource=void 0;for(let N=0;N<A.length;N++){const K=g.style._layers[A[N]],X=K.source?this._coordsDescendingInv[K.source][M.tileID.key]:[M.tileID];g.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),g._renderTileClippingMasks(K,X),g.renderLayer(g,g.style.sourceCaches[K.source],K,X),K.source&&(M.rttCoords[K.source]=this._coordsDescendingInvStr[K.source][M.tileID.key])}}return Ya(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),vi[d]}return!1}}const lc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},cc=u,aa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:oc,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},il=w=>{w.touchstart=w.dragStart,w.touchmoveWindow=w.dragMove,w.touchend=w.dragEnd},uc={showCompass:!0,showZoom:!0,visualizePitch:!1};class fc{constructor(c,d,g=!1){this.mousedown=A=>{this.startMouse(o.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),$.mousePos(this.element,A)),$.addEventListener(window,"mousemove",this.mousemove),$.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,$.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=$.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),$.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=$.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const v=c.dragRotate._mouseRotate.getClickTolerance(),x=c.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=xo({clickTolerance:v,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:M,bearingDegreesPerPixelMoved:R=.8})=>{const N=new tn;return new wo({clickTolerance:M,move:(K,X)=>({bearingDelta:(X.x-K.x)*R}),moveStateManager:N,enable:A,assignEvents:il})})({clickTolerance:v,enable:!0}),this.map=c,g&&(this.mousePitch=$o({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:M,pitchDegreesPerPixelMoved:R=-.5})=>{const N=new tn;return new wo({clickTolerance:M,move:(K,X)=>({pitchDelta:(X.y-K.y)*R}),moveStateManager:N,enable:A,assignEvents:il})})({clickTolerance:x,enable:!0})),$.addEventListener(d,"mousedown",this.mousedown),$.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),$.addEventListener(d,"touchcancel",this.reset)}startMouse(c,d){this.mouseRotate.dragStart(c,d),this.mousePitch&&this.mousePitch.dragStart(c,d),$.disableDrag()}startTouch(c,d){this.touchRotate.dragStart(c,d),this.touchPitch&&this.touchPitch.dragStart(c,d),$.disableDrag()}moveMouse(c,d){const g=this.map,{bearingDelta:v}=this.mouseRotate.dragMove(c,d)||{};if(v&&g.setBearing(g.getBearing()+v),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(c,d)||{};x&&g.setPitch(g.getPitch()+x)}}moveTouch(c,d){const g=this.map,{bearingDelta:v}=this.touchRotate.dragMove(c,d)||{};if(v&&g.setBearing(g.getBearing()+v),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(c,d)||{};x&&g.setPitch(g.getPitch()+x)}}off(){const c=this.element;$.removeEventListener(c,"mousedown",this.mousedown),$.removeEventListener(c,"touchstart",this.touchstart,{passive:!1}),$.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.removeEventListener(window,"touchend",this.touchend),$.removeEventListener(c,"touchcancel",this.reset),this.offTemp()}offTemp(){$.enableDrag(),$.removeEventListener(window,"mousemove",this.mousemove),$.removeEventListener(window,"mouseup",this.mouseup),$.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.removeEventListener(window,"touchend",this.touchend)}}let yi;function ol(w,c,d){const g=new o.M(w.lng,w.lat);if(w=new o.M(w.lng,w.lat),c){const v=new o.M(w.lng-360,w.lat),x=new o.M(w.lng+360,w.lat),A=d.locationPoint(w).distSqr(c);d.locationPoint(v).distSqr(c)<A?w=v:d.locationPoint(x).distSqr(c)<A&&(w=x)}for(;Math.abs(w.lng-d.center.lng)>180;){const v=d.locationPoint(w);if(v.x>=0&&v.y>=0&&v.x<=d.width&&v.y<=d.height)break;w.lng>d.center.lng?w.lng-=360:w.lng+=360}return w.lng!==g.lng&&d.locationPoint(w).y>d.height/2-d.getHorizon()?w:g}const la={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function al(w,c,d){const g=w.classList;for(const v in la)g.remove(`maplibregl-${d}-anchor-${v}`);g.add(`maplibregl-${d}-anchor-${c}`)}class ca extends o.E{constructor(c){if(super(),this._onKeyPress=d=>{const g=d.code,v=d.charCode||d.keyCode;g!=="Space"&&g!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=d=>{const g=d.originalEvent.target,v=this._element;this._popup&&(g===v||v.contains(g))&&this.togglePopup()},this._update=d=>{var g;if(!this._map)return;const v=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?ol(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),$.setTransform(this._element,`${la[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${x}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment!=="auto"?c.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(c==null?void 0:c.opacity,c==null?void 0:c.opacityWhenCovered),c&&c.element)this._element=c.element,this._offset=o.P.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=$.create("div"),this._element.setAttribute("aria-label","Map marker");const d=$.createNS("http://www.w3.org/2000/svg","svg"),g=41,v=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${g}px`),d.setAttributeNS(null,"width",`${v}px`),d.setAttributeNS(null,"viewBox",`0 0 ${v} ${g}`);const x=$.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const A=$.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const M=$.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Oe of R){const Xe=$.createNS("http://www.w3.org/2000/svg","ellipse");Xe.setAttributeNS(null,"opacity","0.04"),Xe.setAttributeNS(null,"cx","10.5"),Xe.setAttributeNS(null,"cy","5.80029008"),Xe.setAttributeNS(null,"rx",Oe.rx),Xe.setAttributeNS(null,"ry",Oe.ry),M.appendChild(Xe)}const N=$.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"fill",this._color);const K=$.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),N.appendChild(K);const X=$.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"fill","#000000");const oe=$.createNS("http://www.w3.org/2000/svg","path");oe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),X.appendChild(oe);const Te=$.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Te.setAttributeNS(null,"fill","#FFFFFF");const Se=$.createNS("http://www.w3.org/2000/svg","g");Se.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Me=$.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#000000"),Me.setAttributeNS(null,"opacity","0.25"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962");const ye=$.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),Se.appendChild(Me),Se.appendChild(ye),A.appendChild(M),A.appendChild(N),A.appendChild(X),A.appendChild(Te),A.appendChild(Se),d.appendChild(A),d.setAttributeNS(null,"height",g*this._scale+"px"),d.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(d),this._offset=o.P.convert(c&&c.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),al(this._element,this._anchor,"marker"),c&&c.className)for(const d of c.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(c){return this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._update),c.on("moveend",this._update),c.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),$.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=o.M.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const v=Math.abs(13.5)/Math.SQRT2;c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=c,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const c=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:c?(c.isOpen()?c.remove():(c.setLngLat(this._lngLat),c.addTo(this._map)),this):this}_updateOpacity(c=!1){var d,g;if(!(!((d=this._map)===null||d===void 0)&&d.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(c)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const v=this._map,x=v.terrain.depthAtPoint(this._pos),A=v.terrain.getElevationForLngLatZoom(this._lngLat,v.transform.tileZoom);if(v.transform.lngLatToCameraDepth(this._lngLat,A)-x<.006)return void(this._element.style.opacity=this._opacity);const M=-this._offset.y/v.transform._pixelPerMeter,R=Math.sin(v.getPitch()*Math.PI/180)*M,N=v.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),K=v.transform.lngLatToCameraDepth(this._lngLat,A+R)-N>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&K&&this._popup.remove(),this._element.style.opacity=K?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(c){return this._offset=o.P.convert(c),this._update(),this}addClassName(c){this._element.classList.add(c)}removeClassName(c){this._element.classList.remove(c)}toggleClassName(c){return this._element.classList.toggle(c)}setDraggable(c){return this._draggable=!!c,this._map&&(c?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c&&c!=="auto"?c:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(c,d){return c===void 0&&d===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),c!==void 0&&(this._opacity=c),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const ll={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Co=0,Qi=!1;const cl={maxWidth:100,unit:"metric"};function ul(w,c,d){const g=d&&d.maxWidth||100,v=w._container.clientHeight/2,x=w.unproject([0,v]),A=w.unproject([g,v]),M=x.distanceTo(A);if(d&&d.unit==="imperial"){const R=3.2808*M;R>5280?eo(c,g,R/5280,w._getUIString("ScaleControl.Miles")):eo(c,g,R,w._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?eo(c,g,M/1852,w._getUIString("ScaleControl.NauticalMiles")):M>=1e3?eo(c,g,M/1e3,w._getUIString("ScaleControl.Kilometers")):eo(c,g,M,w._getUIString("ScaleControl.Meters"))}function eo(w,c,d,g){const v=function(x){const A=Math.pow(10,`${Math.floor(x)}`.length-1);let M=x/A;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:function(R){const N=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*N)/N}(M),A*M}(d);w.style.width=c*(v/d)+"px",w.innerHTML=`${v}&nbsp;${g}`}const hc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},dc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fl(w){if(w){if(typeof w=="number"){const c=Math.round(Math.abs(w)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,w),"top-left":new o.P(c,c),"top-right":new o.P(-c,c),bottom:new o.P(0,-w),"bottom-left":new o.P(c,-c),"bottom-right":new o.P(-c,-c),left:new o.P(w,0),right:new o.P(-w,0)}}if(w instanceof o.P||Array.isArray(w)){const c=o.P.convert(w);return{center:c,top:c,"top-left":c,"top-right":c,bottom:c,"bottom-left":c,"bottom-right":c,left:c,right:c}}return{center:o.P.convert(w.center||[0,0]),top:o.P.convert(w.top||[0,0]),"top-left":o.P.convert(w["top-left"]||[0,0]),"top-right":o.P.convert(w["top-right"]||[0,0]),bottom:o.P.convert(w.bottom||[0,0]),"bottom-left":o.P.convert(w["bottom-left"]||[0,0]),"bottom-right":o.P.convert(w["bottom-right"]||[0,0]),left:o.P.convert(w.left||[0,0]),right:o.P.convert(w.right||[0,0])}}return fl(new o.P(0,0))}const Hu=u;a.AJAXError=o.be,a.Evented=o.E,a.LngLat=o.M,a.MercatorCoordinate=o.Y,a.Point=o.P,a.addProtocol=o.bf,a.config=o.a,a.removeProtocol=o.bg,a.AttributionControl=Ys,a.BoxZoomHandler=Xs,a.CanvasSource=ps,a.CooperativeGesturesHandler=fn,a.DoubleClickZoomHandler=sc,a.DragPanHandler=ju,a.DragRotateHandler=Js,a.EdgeInsets=yo,a.FullscreenControl=class extends o.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var c;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((c=d==null?void 0:d.shadowRoot)===null||c===void 0)&&c.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){$.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=$.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);$.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=xr,a.GeolocateControl=class extends o.E{constructor(w){super(),this._onSuccess=c=>{if(this._map){if(this._isOutOfMapMaxBounds(c))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",c)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=c,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(c),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(c),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",c)),this._finish()}},this._updateCamera=c=>{const d=new o.M(c.coords.longitude,c.coords.latitude),g=c.coords.accuracy,v=this._map.getBearing(),x=o.e({bearing:v},this.options.fitBoundsOptions),A=et.fromLngLat(d,g);this._map.fitBounds(A,x,{geolocateSource:!0})},this._updateMarker=c=>{if(c){const d=new o.M(c.coords.longitude,c.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=c.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=c=>{if(this._map){if(this.options.trackUserLocation)if(c.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(c.code===3&&Qi)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",c)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=c=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=$.create("button","maplibregl-ctrl-geolocate",this._container),$.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",c===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=$.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ca({element:this._dotElement}),this._circleElement=$.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ca({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")))})}},this.options=o.e({},ll,w)}onAdd(w){return this._map=w,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return o._(this,arguments,void 0,function*(c=!1){if(yi!==void 0&&!c)return yi;if(window.navigator.permissions===void 0)return yi=!!window.navigator.geolocation,yi;try{yi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{yi=!!window.navigator.geolocation}return yi})}().then(c=>this._setupUI(c)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),$.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Co=0,Qi=!1}_isOutOfMapMaxBounds(w){const c=this._map.getMaxBounds(),d=w.coords;return c&&(d.longitude<c.getWest()||d.longitude>c.getEast()||d.latitude<c.getSouth()||d.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const w=this._map.getBounds(),c=w.getSouthEast(),d=w.getNorthEast(),g=c.distanceTo(d),v=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Co--,Qi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Co++,Co>1?(w={maximumAge:6e5,timeout:0},Qi=!0):(w=this.options.positionOptions,Qi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.Hash=ec,a.ImageSource=Qn,a.KeyboardHandler=Mi,a.LngLatBounds=et,a.LogoControl=qu,a.Map=class extends ys{constructor(w){if(o.bc.mark(o.bd.create),(w=o.e({},aa,w)).minZoom!=null&&w.maxZoom!=null&&w.minZoom>w.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(w.minPitch!=null&&w.maxPitch!=null&&w.minPitch>w.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(w.minPitch!=null&&w.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(w.maxPitch!=null&&w.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Qa(w.minZoom,w.maxZoom,w.minPitch,w.maxPitch,w.renderWorldCopies),{bearingSnap:w.bearingSnap}),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=w.interactive,this._maxTileCacheSize=w.maxTileCacheSize,this._maxTileCacheZoomLevels=w.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=w.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=w.preserveDrawingBuffer,this._antialias=w.antialias,this._trackResize=w.trackResize,this._bearingSnap=w.bearingSnap,this._refreshExpiredTiles=w.refreshExpiredTiles,this._fadeDuration=w.fadeDuration,this._crossSourceCollisions=w.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=w.collectResourceTiming,this._renderTaskQueue=new ia,this._controls=[],this._mapId=o.a3(),this._locale=o.e({},lc,w.locale),this._clickTolerance=w.clickTolerance,this._overridePixelRatio=w.pixelRatio,this._maxCanvasSize=w.maxCanvasSize,this.transformCameraUpdate=w.transformCameraUpdate,this._imageQueueHandle=J.addThrottleControl(()=>this.isMoving()),this._requestManager=new pe(w.transformRequest),typeof w.container=="string"){if(this._container=document.getElementById(w.container),!this._container)throw new Error(`Container '${w.container}' not found.`)}else{if(!(w.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=w.container}if(w.maxBounds&&this.setMaxBounds(w.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const d=Ql(g=>{this._trackResize&&!this._removed&&this.resize(g)._update()},50);this._resizeObserver=new ResizeObserver(g=>{c?d(g):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ic(this,w),this._hash=w.hash&&new ec(typeof w.hash=="string"&&w.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:w.center,zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),w.bounds&&(this.resize(),this.fitBounds(w.bounds,o.e({},w.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=w.localIdeographFontFamily,this._validateStyle=w.validateStyle,w.style&&this.setStyle(w.style,{localIdeographFontFamily:w.localIdeographFontFamily}),w.attributionControl&&this.addControl(new Ys(typeof w.attributionControl=="boolean"?void 0:w.attributionControl)),w.maplibreLogo&&this.addControl(new qu,w.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new o.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new o.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new o.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(w,c){if(c===void 0&&(c=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=w.onAdd(this);this._controls.push(w);const g=this._controlPositions[c];return c.indexOf("bottom")!==-1?g.insertBefore(d,g.firstChild):g.appendChild(d),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(w);return c>-1&&this._controls.splice(c,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}calculateCameraOptionsFromTo(w,c,d,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,c,d,g)}resize(w){var c;const d=this._containerDimensions(),g=d[0],v=d[1],x=this._getClampedPixelRatio(g,v);if(this._resizeCanvas(g,v,x),this.painter.resize(g,v,x),this.painter.overLimit()){const M=this.painter.context.gl;this._maxCanvasSize=[M.drawingBufferWidth,M.drawingBufferHeight];const R=this._getClampedPixelRatio(g,v);this._resizeCanvas(g,v,R),this.painter.resize(g,v,R)}this.transform.resize(g,v),(c=this._requestedCameraState)===null||c===void 0||c.resize(g,v);const A=!this._moving;return A&&(this.stop(),this.fire(new o.k("movestart",w)).fire(new o.k("move",w))),this.fire(new o.k("resize",w)),A&&this.fire(new o.k("moveend",w)),this}_getClampedPixelRatio(w,c){const{0:d,1:g}=this._maxCanvasSize,v=this.getPixelRatio(),x=w*v,A=c*v;return Math.min(x>d?d/x:1,A>g?g/A:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(et.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.minZoom=w,this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.maxZoom=w,this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.minPitch=w,this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(w>=this.transform.minPitch)return this.transform.maxPitch=w,this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.renderWorldCopies=w,this._update()}project(w){return this.transform.locationPoint(o.M.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.pointLocation(o.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,c,d){if(w==="mouseenter"||w==="mouseover"){let g=!1;return{layer:c,listener:d,delegates:{mousemove:x=>{const A=this.getLayer(c)?this.queryRenderedFeatures(x.point,{layers:[c]}):[];A.length?g||(g=!0,d.call(this,new vs(w,this,x.originalEvent,{features:A}))):g=!1},mouseout:()=>{g=!1}}}}if(w==="mouseleave"||w==="mouseout"){let g=!1;return{layer:c,listener:d,delegates:{mousemove:A=>{(this.getLayer(c)?this.queryRenderedFeatures(A.point,{layers:[c]}):[]).length?g=!0:g&&(g=!1,d.call(this,new vs(w,this,A.originalEvent)))},mouseout:A=>{g&&(g=!1,d.call(this,new vs(w,this,A.originalEvent)))}}}}{const g=v=>{const x=this.getLayer(c)?this.queryRenderedFeatures(v.point,{layers:[c]}):[];x.length&&(v.features=x,d.call(this,v),delete v.features)};return{layer:c,listener:d,delegates:{[w]:g}}}}on(w,c,d){if(d===void 0)return super.on(w,c);const g=this._createDelegatedListener(w,c,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(g);for(const v in g.delegates)this.on(v,g.delegates[v]);return this}once(w,c,d){if(d===void 0)return super.once(w,c);const g=this._createDelegatedListener(w,c,d);for(const v in g.delegates)this.once(v,g.delegates[v]);return this}off(w,c,d){return d===void 0?super.off(w,c):(this._delegatedListeners&&this._delegatedListeners[w]&&(g=>{const v=this._delegatedListeners[w];for(let x=0;x<v.length;x++){const A=v[x];if(A.layer===c&&A.listener===d){for(const M in A.delegates)this.off(M,A.delegates[M]);return v.splice(x,1),this}}})(),this)}queryRenderedFeatures(w,c){if(!this.style)return[];let d;const g=w instanceof o.P||Array.isArray(w),v=g?w:[[0,0],[this.transform.width,this.transform.height]];if(c=c||(g?{}:w)||{},v instanceof o.P||typeof v[0]=="number")d=[o.P.convert(v)];else{const x=o.P.convert(v[0]),A=o.P.convert(v[1]);d=[x,new o.P(A.x,x.y),A,new o.P(x.x,A.y),x]}return this.style.queryRenderedFeatures(d,c,this.transform)}querySourceFeatures(w,c){return this.style.querySourceFeatures(w,c)}setStyle(w,c){return(c=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._updateStyle(w,c))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const c=this._locale[w];if(c==null)throw new Error(`Missing UI string '${w}'`);return c}_updateStyle(w,c){if(c.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,c));const d=this.style&&c.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Ps(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,c,d):this.style.loadJSON(w,c,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ps(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,c){if(typeof w=="string"){const d=this._requestManager.transformRequest(w,"Style");o.h(d,new AbortController).then(g=>{this._updateDiff(g.data,c)}).catch(g=>{g&&this.fire(new o.j(g))})}else typeof w=="object"&&this._updateDiff(w,c)}_updateDiff(w,c){try{this.style.setState(w,c)&&this._update(!0)}catch(d){o.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(w,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(w,c){return this._lazyInitEmptyStyle(),this.style.addSource(w,c),this._update(!0)}isSourceLoaded(w){const c=this.style&&this.style.sourceCaches[w];if(c!==void 0)return c.loaded();this.fire(new o.j(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const c=this.style.sourceCaches[w.source];if(!c)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&c.reload();for(const d in this.style._layers){const g=this.style._layers[d];g.type==="hillshade"&&g.source===w.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Gu(this.painter,c,w),this.painter.renderToTexture=new ac(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==w.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:w})),this}getTerrain(){var w,c;return(c=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&c!==void 0?c:null}areTilesLoaded(){const w=this.style&&this.style.sourceCaches;for(const c in w){const d=w[c]._tiles;for(const g in d){const v=d[g];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}addImage(w,c,d={}){const{pixelRatio:g=1,sdf:v=!1,stretchX:x,stretchY:A,content:M}=d;if(this._lazyInitEmptyStyle(),!(c instanceof HTMLImageElement||o.b(c))){if(c.width===void 0||c.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:R,height:N,data:K}=c,X=c;return this.style.addImage(w,{data:new o.R({width:R,height:N},new Uint8Array(K)),pixelRatio:g,stretchX:x,stretchY:A,content:M,sdf:v,version:0,userImage:X}),X.onAdd&&X.onAdd(this,w),this}}{const{width:R,height:N,data:K}=b.getImageData(c);this.style.addImage(w,{data:new o.R({width:R,height:N},K),pixelRatio:g,stretchX:x,stretchY:A,content:M,sdf:v,version:0})}}updateImage(w,c){const d=this.style.getImage(w);if(!d)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=c instanceof HTMLImageElement||o.b(c)?b.getImageData(c):c,{width:v,height:x,data:A}=g;if(v===void 0||x===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==d.data.width||x!==d.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(c instanceof HTMLImageElement||o.b(c));return d.data.replace(A,M),this.style.updateImage(w,d),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return J.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,c){return this._lazyInitEmptyStyle(),this.style.addLayer(w,c),this._update(!0)}moveLayer(w,c){return this.style.moveLayer(w,c),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,c,d){return this.style.setLayerZoomRange(w,c,d),this._update(!0)}setFilter(w,c,d={}){return this.style.setFilter(w,c,d),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,c,d,g={}){return this.style.setPaintProperty(w,c,d,g),this._update(!0)}getPaintProperty(w,c){return this.style.getPaintProperty(w,c)}setLayoutProperty(w,c,d,g={}){return this.style.setLayoutProperty(w,c,d,g),this._update(!0)}getLayoutProperty(w,c){return this.style.getLayoutProperty(w,c)}setGlyphs(w,c={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,c),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,c,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,c,d,g=>{g||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,c={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,c,d=>{d||this._update(!0)}),this}setLight(w,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,c),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(w,c){return this.style.setFeatureState(w,c),this._update()}removeFeatureState(w,c){return this.style.removeFeatureState(w,c),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,c=0;return this._container&&(w=this._container.clientWidth||400,c=this._container.clientHeight||300),[w,c]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const c=this._canvasContainer=$.create("div","maplibregl-canvas-container",w);this._interactive&&c.classList.add("maplibregl-interactive"),this._canvas=$.create("canvas","maplibregl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),g=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],g);const v=this._controlContainer=$.create("div","maplibregl-control-container",w),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{x[A]=$.create("div",`maplibregl-ctrl-${A} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,c,d){this._canvas.width=Math.floor(d*w),this._canvas.height=Math.floor(d*c),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${c}px`}_setupPainter(){const w={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let c=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{c={requestedAttributes:w},g&&(c.statusMessage=g.statusMessage,c.type=g.type)},{once:!0});const d=this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w);if(!d){const g="Failed to initialize WebGL";throw c?(c.message=g,new Error(JSON.stringify(c))):new Error(g)}this.painter=new Mu(d,this.transform),P.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){const c=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const v=this.transform.zoom,x=b.now();this.style.zoomHistory.update(v,x);const A=new o.a8(v,{now:x,fadeDuration:c,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),M=A.crossFadingFactor();M===1&&M===this._crossFadingFactor||(d=!0,this._crossFadingFactor=M),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,c,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:c,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bc.mark(o.bd.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,o.bc.mark(o.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),J.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const c=this.painter.context.gl.getExtension("WEBGL_lose_context");c&&c.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),$.remove(this._canvasContainer),$.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bc.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(w=>{o.bc.frame(w),this._frameRequest=null,this._render(w)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return cc}getCameraTargetElevation(){return this.transform.elevation}},a.MapMouseEvent=vs,a.MapTouchEvent=ai,a.MapWheelEvent=tc,a.Marker=ca,a.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const c=this._map.getZoom(),d=c===this._map.getMaxZoom(),g=c===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=c},this._setButtonTitle=(c,d)=>{const g=this._map._getUIString(`NavigationControl.${d}`);c.title=g,c.setAttribute("aria-label",g)},this.options=o.e({},uc,w),this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",c=>this._map.zoomIn({},{originalEvent:c})),$.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",c=>this._map.zoomOut({},{originalEvent:c})),$.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",c=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:c}):this._map.resetNorth({},{originalEvent:c})}),this._compassIcon=$.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new fc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){$.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,c){const d=$.create("button",w,this._container);return d.type="button",d.addEventListener("click",c),d}},a.Popup=class extends o.E{constructor(w){super(),this.remove=()=>(this._content&&$.remove(this._content),this._container&&($.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=c=>{this._update(c.point)},this._onMouseMove=c=>{this._update(c.point)},this._onDrag=c=>{this._update(c.point)},this._update=c=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=$.create("div","maplibregl-popup",this._map.getContainer()),this._tip=$.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?ol(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!c)return;const g=this._flatPos=this._pos=this._trackPointer&&c?c:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&c?c:this._map.transform.locationPoint(this._lngLat));let v=this.options.anchor;const x=fl(this.options.offset);if(!v){const M=this._container.offsetWidth,R=this._container.offsetHeight;let N;N=g.y+x.bottom.y<R?["top"]:g.y>this._map.transform.height-R?["bottom"]:[],g.x<M/2?N.push("left"):g.x>this._map.transform.width-M/2&&N.push("right"),v=N.length===0?"bottom":N.join("-")}let A=g.add(x[v]);this.options.subpixelPositioning||(A=A.round()),$.setTransform(this._container,`${la[v]} translate(${A.x}px,${A.y}px)`),al(this._container,v,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(hc),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=o.M.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const c=document.createDocumentFragment(),d=document.createElement("body");let g;for(d.innerHTML=w;g=d.firstChild,g;)c.appendChild(g);return this.setDOMContent(c)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=$.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){this._container&&this._container.classList.add(w)}removeClassName(w){this._container&&this._container.classList.remove(w)}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=$.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(dc);w&&w.focus()}},a.RasterDEMTileSource=Vn,a.RasterTileSource=We,a.ScaleControl=class{constructor(w){this._onMove=()=>{ul(this._map,this._container,this.options)},this.setUnit=c=>{this.options.unit=c,ul(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},cl),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){$.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=rl,a.Style=Ps,a.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=$.create("button","maplibregl-ctrl-terrain",this._container),$.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){$.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=Nu,a.TwoFingersTouchRotateHandler=rc,a.TwoFingersTouchZoomHandler=Bu,a.TwoFingersTouchZoomRotateHandler=ra,a.VectorTileSource=ln,a.VideoSource=is,a.addSourceType=(w,c)=>o._(void 0,void 0,void 0,function*(){if(Ws(w))throw new Error(`A source type called "${w}" already exists.`);((d,g)=>{Fs[d]=g})(w,c)}),a.clearPrewarmedResources=function(){const w=un;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(It),un=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return Lt().getRTLTextPluginStatus()},a.getVersion=function(){return Hu},a.getWorkerCount=function(){return nn.workerCount},a.getWorkerUrl=function(){return o.a.WORKER_URL},a.importScriptInWorkers=function(w){return Ye().broadcast("IS",w)},a.prewarm=function(){Tt().acquire(It)},a.setMaxParallelImageRequests=function(w){o.a.MAX_PARALLEL_IMAGE_REQUESTS=w},a.setRTLTextPlugin=function(w,c){return Lt().setRTLTextPlugin(w,c)},a.setWorkerCount=function(w){nn.workerCount=w},a.setWorkerUrl=function(w){o.a.WORKER_URL=w}});var s=n;return s})})(lv);var yf=lv.exports;const mi=Dw(yf);var YS=QS;function QS(i){var e,n,t;if(i){if(Array.isArray(i)){for(e=[],n=i.length,t=0;t<n;t++){var r=i[t];r!=null&&e.push(r)}return e}if(typeof i=="object"){e={};var s=Object.keys(i);for(n=s.length,t=0;t<n;t++){var a=s[t],o=i[a];o!=null&&(e[a]=o)}return e}}}function eI(i,e,n){let t;const{map:r}=Ml();on(i,r,u=>n(4,t=u));let{position:s="top-left"}=e,{container:a=void 0}=e,o=null;return xa(()=>{t!=null&&t.loaded()&&o&&t.removeControl(o)}),i.$$set=u=>{"position"in u&&n(1,s=u.position),"container"in u&&n(2,a=u.container)},i.$$.update=()=>{if(i.$$.dirty&30&&t&&!o){let u;typeof a=="string"?u=document.querySelector(a)??void 0:u=a,n(3,o=new mi.FullscreenControl({container:u})),t.addControl(o,s)}},[r,s,a,o,t]}class tI extends it{constructor(e){super(),ot(this,e,eI,null,st,{position:1,container:2})}}function nI(i,e,n){let t;const{map:r}=Ml();on(i,r,$=>n(8,t=$));let{position:s="top-left"}=e,{positionOptions:a=void 0}=e,{fitBoundsOptions:o=void 0}=e,{trackUserLocation:u=!1}=e,{showAccuracyCircle:p=!0}=e,{showUserLocation:_=!0}=e,b=null;return xa(()=>{t!=null&&t.loaded()&&b&&t.removeControl(b)}),i.$$set=$=>{"position"in $&&n(1,s=$.position),"positionOptions"in $&&n(2,a=$.positionOptions),"fitBoundsOptions"in $&&n(3,o=$.fitBoundsOptions),"trackUserLocation"in $&&n(4,u=$.trackUserLocation),"showAccuracyCircle"in $&&n(5,p=$.showAccuracyCircle),"showUserLocation"in $&&n(6,_=$.showUserLocation)},i.$$.update=()=>{i.$$.dirty&510&&t&&!b&&(n(7,b=new mi.GeolocateControl({positionOptions:a,fitBoundsOptions:o,trackUserLocation:u,showAccuracyCircle:p,showUserLocation:_})),t.addControl(b,s))},[r,s,a,o,u,p,_,b,t]}class rI extends it{constructor(e){super(),ot(this,e,nI,null,st,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function sI(i){let e=i.getCenter(),n=Math.round(i.getZoom()*100)/100,t=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,t),s=Math.round(e.lat*r)/r,a=Math.round(e.lng*r)/r,o=`${n}/${s}/${a}`,u=i.getBearing(),p=i.getPitch();return(u||p)&&(o+=`/${Math.round(u*10)/10}`),p&&(o+=`/${Math.round(p)}`),`#${o}`}function iI(i){return i.replace("#","").split("/").map(parseFloat)}var _f=zd;function zd(i,e){return i===e||i!==i&&e!==e?!0:typeof i!=typeof e||{}.toString.call(i)!={}.toString.call(e)||i!==Object(i)||!i?!1:Array.isArray(i)?z_(i,e):{}.toString.call(i)=="[object Set]"?z_(Array.from(i),Array.from(e)):{}.toString.call(i)=="[object Object]"?aI(i,e):oI(i,e)}function oI(i,e){return i.toString()===e.toString()}function z_(i,e){var n=i.length;if(n!=e.length)return!1;for(var t=0;t<n;t++)if(!zd(i[t],e[t]))return!1;return!0}function aI(i,e){var n=Object.keys(i),t=n.length;if(t!=Object.keys(e).length)return!1;for(var r=0;r<t;r++){var s=n[r];if(!(e.hasOwnProperty(s)&&zd(i[s],e[s])))return!1}return!0}function lI(i,e,n){let t;const{map:r}=Ml();on(i,r,_=>n(6,t=_));let{position:s="top-left"}=e,{showCompass:a=!0}=e,{showZoom:o=!0}=e,{visualizePitch:u=!1}=e,p=null;return xa(()=>{t!=null&&t.loaded()&&p&&t.removeControl(p)}),i.$$set=_=>{"position"in _&&n(1,s=_.position),"showCompass"in _&&n(2,a=_.showCompass),"showZoom"in _&&n(3,o=_.showZoom),"visualizePitch"in _&&n(4,u=_.visualizePitch)},i.$$.update=()=>{i.$$.dirty&126&&t&&!p&&(n(5,p=new mi.NavigationControl({showCompass:a,showZoom:o,visualizePitch:u})),t.addControl(p,s))},[r,s,a,o,u,p,t]}class cI extends it{constructor(e){super(),ot(this,e,lI,null,st,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function uI(i,e,n){let t;const{map:r}=Ml();on(i,r,p=>n(5,t=p));let{position:s="bottom-left"}=e,{maxWidth:a=void 0}=e,{unit:o="metric"}=e,u=null;return xa(()=>{t!=null&&t.loaded()&&u&&t.removeControl(u)}),i.$$set=p=>{"position"in p&&n(1,s=p.position),"maxWidth"in p&&n(2,a=p.maxWidth),"unit"in p&&n(3,o=p.unit)},i.$$.update=()=>{i.$$.dirty&62&&t&&!u&&(n(4,u=new mi.ScaleControl({maxWidth:a,unit:o})),t.addControl(u,s))},[r,s,a,o,u,t]}class fI extends it{constructor(e){super(),ot(this,e,uI,null,st,{position:1,maxWidth:2,unit:3})}}const{window:hI}=Sd,dI=i=>({map:i[0]&8,loadedImages:i[0]&16,allImagesLoaded:i[0]&32}),L_=i=>({map:i[3],loadedImages:i[4],allImagesLoaded:i[5]});function R_(i){let e,n,t=i[2]&&O_(i);const r=i[37].default,s=xt(r,i,i[36],L_);return{c(){t&&t.c(),e=ge(),s&&s.c()},l(a){t&&t.l(a),e=ve(a),s&&s.l(a)},m(a,o){t&&t.m(a,o),B(a,e,o),s&&s.m(a,o),n=!0},p(a,o){a[2]?t?(t.p(a,o),o[0]&4&&T(t,1)):(t=O_(a),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(vt(),E(t,1,1,()=>{t=null}),yt()),s&&s.p&&(!n||o[0]&56|o[1]&32)&&$t(s,r,a,a[36],n?Ct(r,a[36],o,dI):kt(a[36]),L_)},i(a){n||(T(t),T(s,a),n=!0)},o(a){E(t),E(s,a),n=!1},d(a){a&&I(e),t&&t.d(a),s&&s.d(a)}}}function O_(i){let e,n,t,r,s,a,o,u;return e=new cI({props:{position:i[6]}}),t=new rI({props:{position:i[6],fitBoundsOptions:{maxZoom:12}}}),s=new tI({props:{position:i[6]}}),o=new fI({props:{position:i[6]}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),q(s.$$.fragment),a=ge(),q(o.$$.fragment)},l(p){Z(e.$$.fragment,p),n=ve(p),Z(t.$$.fragment,p),r=ve(p),Z(s.$$.fragment,p),a=ve(p),Z(o.$$.fragment,p)},m(p,_){G(e,p,_),B(p,n,_),G(t,p,_),B(p,r,_),G(s,p,_),B(p,a,_),G(o,p,_),u=!0},p(p,_){const b={};_[0]&64&&(b.position=p[6]),e.$set(b);const $={};_[0]&64&&($.position=p[6]),t.$set($);const P={};_[0]&64&&(P.position=p[6]),s.$set(P);const L={};_[0]&64&&(L.position=p[6]),o.$set(L)},i(p){u||(T(e.$$.fragment,p),T(t.$$.fragment,p),T(s.$$.fragment,p),T(o.$$.fragment,p),u=!0)},o(p){E(e.$$.fragment,p),E(t.$$.fragment,p),E(s.$$.fragment,p),E(o.$$.fragment,p),u=!1},d(p){p&&(I(n),I(r),I(a)),H(e,p),H(t,p),H(s,p),H(o,p)}}}function pI(i){let e,n,t,r,s,a=i[3]&&i[0]&&R_(i);return{c(){e=ce("div"),a&&a.c(),this.h()},l(o){e=ue(o,"DIV",{class:!0,"data-testid":!0});var u=$e(e);a&&a.l(u),u.forEach(I),this.h()},h(){se(e,"class",n=zm(i[1])+" svelte-p00lfq"),se(e,"data-testid","map-container"),ur(e,"expand-map",!i[1])},m(o,u){B(o,e,u),a&&a.m(e,null),t=!0,r||(s=[mt(hI,"hashchange",i[10]),jn(i[9].call(null,e))],r=!0)},p(o,u){o[3]&&o[0]?a?(a.p(o,u),u[0]&9&&T(a,1)):(a=R_(o),a.c(),T(a,1),a.m(e,null)):a&&(vt(),E(a,1,1,()=>{a=null}),yt()),(!t||u[0]&2&&n!==(n=zm(o[1])+" svelte-p00lfq"))&&se(e,"class",n),(!t||u[0]&2)&&ur(e,"expand-map",!o[1])},i(o){t||(T(a),t=!0)},o(o){E(a),t=!1},d(o){o&&I(e),a&&a.d(),r=!1,wr(s)}}}function mI(i,e,n){let t,r,s,a,{$$slots:o={},$$scope:u}=e,{map:p=null}=e,{class:_=void 0}=e,{style:b}=e,{diffStyleUpdates:$=!1}=e,{center:P=void 0}=e,{zoom:L=void 0}=e,{pitch:z=0}=e,{bearing:F=0}=e,{bounds:U=void 0}=e,{hash:j=!1}=e,{loaded:J=!1}=e,{minZoom:pe=0}=e,{maxZoom:re=22}=e,{zoomOnDoubleClick:te=!0}=e,{locale:de=void 0}=e,{interactive:me=!0}=e,{attributionControl:Y=!0}=e,{cooperativeGestures:we=!1}=e,{preserveDrawingBuffer:Ce=!1}=e,{maxBounds:_e=void 0}=e,{images:fe=[]}=e,{standardControls:Ee=!1}=e,{filterLayers:je=void 0}=e,{transformRequest:ke=void 0}=e;const nt=Tl(),{map:bt,loadedImages:zt}=WS();on(i,bt,Ye=>n(3,s=Ye)),on(i,zt,Ye=>n(4,a=Ye));let At=new Set;async function Et(Ye,Nt=!1){if(s&&!(!s.loaded()&&!Nt))if("url"in Ye){At.add(Ye.id);try{let Mt=await s.loadImage(Ye.url);s==null||s.addImage(Ye.id,Mt.data,Ye.options),a.add(Ye.id),zt.set(a)}catch(Mt){nt("error",Mt)}finally{At.delete(Ye.id)}}else s.addImage(Ye.id,Ye.data,Ye.options),a.add(Ye.id),zt.set(a)}let It,nn,yn,un;function Kt(Ye){return Vt(),Gr(bt,s=new mi.Map(YS({container:Ye,style:b,locale:de,center:P,zoom:L,pitch:z,bearing:F,minZoom:pe,maxZoom:re,interactive:me,preserveDrawingBuffer:Ce,maxBounds:_e,bounds:U,attributionControl:Y,transformRequest:ke,cooperativeGestures:we})),s),s.on("load",Nt=>{Nt.target.getContainer().setAttribute("data-testid","map"),Nt.target.getCanvas().setAttribute("data-testid","map-canvas"),n(0,J=!0),nt("load",s)}),s.on("error",Nt=>nt("error",{...Nt,map:s})),s.on("movestart",Nt=>nt("movestart",{...Nt,map:s})),s.on("moveend",Nt=>{if(n(11,P=Nt.target.getCenter()),n(12,L=Nt.target.getZoom()),n(13,U=Nt.target.getBounds()),nt("moveend",{...Nt,map:s}),j){let Mt=window.location.href.replace(/(#.+)?$/,sI(s));window.history.replaceState(window.history.state,"",Mt)}}),s.on("zoomstart",Nt=>nt("zoomstart",{...Nt,map:s})),s.on("zoom",Nt=>{n(12,L=Nt.target.getZoom()),nt("zoom",{...Nt,map:s})}),s.on("zoomend",Nt=>{n(12,L=Nt.target.getZoom()),nt("zoomend",{...Nt,map:s})}),s.on("style.load",()=>{if(s){const Nt=s.getStyle();if(n(33,It=Nt.layers.map(Mt=>Mt.id)),n(34,nn=Object.keys(Nt.sources)),un)for(const[Mt,Qe]of Object.entries(un))s.addSource(Mt,Qe);if(yn)for(const Mt of yn)s.addLayer(Mt);for(const Mt of fe)Et(Mt,!0)}}),s.on("styledata",Nt=>{if(s&&je){const Mt=s.getStyle().layers;if(Mt)for(let Qe of Mt)je(Qe)||s.setLayoutProperty(Qe.id,"visibility","none")}nt("styledata",{...Nt,map:s})}),{destroy(){n(0,J=!1),s==null||s.remove(),Gr(bt,s=null,s)}}}let Tt=b;function Vt(){if(j){let Ye=iI(window.location.hash);Ye.length>=3&&(n(12,L=Ye[0]),n(11,P=[Ye[2],Ye[1]])),Ye.length==5&&(n(16,F=Ye[3]),n(15,z=Ye[4]))}}return i.$$set=Ye=>{"map"in Ye&&n(14,p=Ye.map),"class"in Ye&&n(1,_=Ye.class),"style"in Ye&&n(17,b=Ye.style),"diffStyleUpdates"in Ye&&n(18,$=Ye.diffStyleUpdates),"center"in Ye&&n(11,P=Ye.center),"zoom"in Ye&&n(12,L=Ye.zoom),"pitch"in Ye&&n(15,z=Ye.pitch),"bearing"in Ye&&n(16,F=Ye.bearing),"bounds"in Ye&&n(13,U=Ye.bounds),"hash"in Ye&&n(19,j=Ye.hash),"loaded"in Ye&&n(0,J=Ye.loaded),"minZoom"in Ye&&n(20,pe=Ye.minZoom),"maxZoom"in Ye&&n(21,re=Ye.maxZoom),"zoomOnDoubleClick"in Ye&&n(22,te=Ye.zoomOnDoubleClick),"locale"in Ye&&n(23,de=Ye.locale),"interactive"in Ye&&n(24,me=Ye.interactive),"attributionControl"in Ye&&n(25,Y=Ye.attributionControl),"cooperativeGestures"in Ye&&n(26,we=Ye.cooperativeGestures),"preserveDrawingBuffer"in Ye&&n(27,Ce=Ye.preserveDrawingBuffer),"maxBounds"in Ye&&n(28,_e=Ye.maxBounds),"images"in Ye&&n(29,fe=Ye.images),"standardControls"in Ye&&n(2,Ee=Ye.standardControls),"filterLayers"in Ye&&n(30,je=Ye.filterLayers),"transformRequest"in Ye&&n(31,ke=Ye.transformRequest),"$$scope"in Ye&&n(36,u=Ye.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&n(6,t=typeof Ee=="boolean"?void 0:Ee),i.$$.dirty[0]&8&&n(14,p=s),i.$$.dirty[0]&393224|i.$$.dirty[1]&28&&s&&!_f(b,Tt)){const Ye=s.getStyle();if(It&&(yn=Ye.layers.filter(Nt=>!It.includes(Nt.id))),nn){const Nt=Object.keys(Ye.sources).filter(Mt=>!nn.includes(Mt));un={};for(const Mt of Nt)un[Mt]=Ye.sources[Mt]}n(35,Tt=b),s.setStyle(b,{diff:$}),Gr(zt,a=new Set,a),n(32,At=new Set)}if(i.$$.dirty[0]&536870937|i.$$.dirty[1]&2&&J&&s!=null&&s.loaded())for(let Ye of fe)!a.has(Ye.id)&&!At.has(Ye.id)&&!s.hasImage(Ye.id)&&Et(Ye);i.$$.dirty[0]&536870928&&n(5,r=fe.every(Ye=>a.has(Ye.id))),i.$$.dirty[0]&2056&&P&&!_f(P,s==null?void 0:s.getCenter())&&(s==null||s.panTo(P)),i.$$.dirty[0]&4104&&L&&!_f(L,s==null?void 0:s.getZoom())&&(s==null||s.zoomTo(L)),i.$$.dirty[0]&8200&&U&&!_f(U,s==null?void 0:s.getBounds())&&(s==null||s.fitBounds(U)),i.$$.dirty[0]&4194312&&(te?s==null||s.doubleClickZoom.enable():s==null||s.doubleClickZoom.disable())},[J,_,Ee,s,a,r,t,bt,zt,Kt,Vt,P,L,U,p,z,F,b,$,j,pe,re,te,de,me,Y,we,Ce,_e,fe,je,ke,At,It,nn,Tt,u,o]}class _I extends it{constructor(e){super(),ot(this,e,mI,pI,st,{map:14,class:1,style:17,diffStyleUpdates:18,center:11,zoom:12,pitch:15,bearing:16,bounds:13,hash:19,loaded:0,minZoom:20,maxZoom:21,zoomOnDoubleClick:22,locale:23,interactive:24,attributionControl:25,cooperativeGestures:26,preserveDrawingBuffer:27,maxBounds:28,images:29,standardControls:2,filterLayers:30,transformRequest:31},null,[-1,-1])}}function gI(i){let e,n,t,r,s,a,o;const u=i[18].default,p=xt(u,i,i[17],null);return{c(){e=ce("div"),p&&p.c(),this.h()},l(_){e=ue(_,"DIV",{tabindex:!0,role:!0});var b=$e(e);p&&p.l(b),b.forEach(I),this.h()},h(){se(e,"tabindex",n=i[1]?0:void 0),se(e,"role",t=i[1]?"button":void 0),Tf(e,"z-index",i[2])},m(_,b){B(_,e,b),p&&p.m(e,null),s=!0,a||(o=[jn(i[6].call(null,e)),jn(r=vI.call(null,e,i[0])),mt(e,"click",i[19]),mt(e,"dblclick",i[20]),mt(e,"contextmenu",i[21]),mt(e,"mouseenter",i[22]),mt(e,"mouseleave",i[23]),mt(e,"mousemove",i[24]),mt(e,"keydown",i[7])],a=!0)},p(_,[b]){p&&p.p&&(!s||b&131072)&&$t(p,u,_,_[17],s?Ct(u,_[17],b,null):kt(_[17]),null),(!s||b&2&&n!==(n=_[1]?0:void 0))&&se(e,"tabindex",n),(!s||b&2&&t!==(t=_[1]?"button":void 0))&&se(e,"role",t),r&&Cd(r.update)&&b&1&&r.update.call(null,_[0]),b&4&&Tf(e,"z-index",_[2])},i(_){s||(T(p,_),s=!0)},o(_){E(p,_),s=!1},d(_){_&&I(e),p&&p.d(_),a=!1,wr(o)}}}function vI(i,e){const n=i.className;function t(r){r?i.className=`${n} ${r}`:i.className=n}return t(e),{update:t}}function yI(i,e,n){let t,r,s,{$$slots:a={},$$scope:o}=e,{lngLat:u}=e,{class:p=void 0}=e,{interactive:_=!0}=e,{asButton:b=!1}=e,{draggable:$=!1}=e,{feature:P=null}=e,{offset:L=void 0}=e,{zIndex:z=void 0}=e,{rotation:F=0}=e,{opacity:U=1}=e;const j=Tl(),{map:J,layerEvent:pe,self:re}=XS();on(i,J,ke=>n(26,s=ke)),on(i,pe,ke=>n(25,t=ke)),on(i,re,ke=>n(16,r=ke));function te(ke){Gr(re,r=new mi.Marker({element:ke,rotation:F,draggable:$,offset:L,opacity:U.toString()}).setLngLat(u).addTo(s),r);const nt=()=>Y("dragstart"),bt=()=>{de(),Y("drag")},zt=()=>{de(),Y("dragend")};return $&&(r.on("dragstart",nt),r.on("drag",bt),r.on("dragend",zt)),{destroy(){$&&(r==null||r.off("dragstart",nt),r==null||r.off("drag",bt),r==null||r.off("dragend",zt)),r==null||r.remove()}}}function de(){let ke=r==null?void 0:r.getLngLat();ke&&(Array.isArray(u)?n(9,u=[ke.lng,ke.lat]):u&&"lon"in u?n(9,u={lon:ke.lng,lat:ke.lat}):n(9,u=ke))}function me(ke){ke.key===" "&&(ke.preventDefault(),ke.stopPropagation(),Y("click"))}function Y(ke){if(!_)return;let nt=r==null?void 0:r.getLngLat();if(!nt)return;const bt=[nt.lng,nt.lat];let zt={map:s,marker:r,lngLat:bt,features:[{type:"Feature",properties:(P==null?void 0:P.properties)??{},geometry:{type:"Point",coordinates:bt}}]};Gr(pe,t={...zt,layerType:"marker",type:ke},t),j(ke,zt)}const we=()=>Y("click"),Ce=()=>Y("dblclick"),_e=()=>Y("contextmenu"),fe=ke=>{Y("mouseenter")},Ee=()=>{Y("mouseleave")},je=()=>Y("mousemove");return i.$$set=ke=>{"lngLat"in ke&&n(9,u=ke.lngLat),"class"in ke&&n(0,p=ke.class),"interactive"in ke&&n(10,_=ke.interactive),"asButton"in ke&&n(1,b=ke.asButton),"draggable"in ke&&n(11,$=ke.draggable),"feature"in ke&&n(12,P=ke.feature),"offset"in ke&&n(13,L=ke.offset),"zIndex"in ke&&n(2,z=ke.zIndex),"rotation"in ke&&n(14,F=ke.rotation),"opacity"in ke&&n(15,U=ke.opacity),"$$scope"in ke&&n(17,o=ke.$$scope)},i.$$.update=()=>{i.$$.dirty&66048&&(r==null||r.setLngLat(u)),i.$$.dirty&73728&&(r==null||r.setOffset(L??[0,0])),i.$$.dirty&81920&&(r==null||r.setRotation(F)),i.$$.dirty&98304&&(r==null||r.setOpacity(U.toString()))},[p,b,z,J,pe,re,te,me,Y,u,_,$,P,L,F,U,r,o,a,we,Ce,_e,fe,Ee,je]}class bI extends it{constructor(e){super(),ot(this,e,yI,gI,st,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14,opacity:15})}}const wI=i=>({features:i[0]&16,data:i[0]&16,map:i[0]&4,close:i[0]&1}),F_=i=>{var e;return{features:i[4],data:(e=i[4])==null?void 0:e[0],map:i[2],close:i[31]}};function B_(i){let e,n,t=(i[4]||i[3]instanceof mi.Marker)&&N_(i);return{c(){e=ce("div"),t&&t.c()},l(r){e=ue(r,"DIV",{});var s=$e(e);t&&t.l(s),s.forEach(I)},m(r,s){B(r,e,s),t&&t.m(e,null),i[32](e),n=!0},p(r,s){r[4]||r[3]instanceof mi.Marker?t?(t.p(r,s),s[0]&24&&T(t,1)):(t=N_(r),t.c(),T(t,1),t.m(e,null)):t&&(vt(),E(t,1,1,()=>{t=null}),yt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&I(e),t&&t.d(),i[32](null)}}}function N_(i){let e;const n=i[30].default,t=xt(n,i,i[29],F_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&536870933)&&$t(t,n,r,r[29],e?Ct(n,r[29],s,wI):kt(r[29]),F_)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function xI(i){let e,n,t=i[9].default&&B_(i);return{c(){t&&t.c(),e=Ue()},l(r){t&&t.l(r),e=Ue()},m(r,s){t&&t.m(r,s),B(r,e,s),n=!0},p(r,s){r[9].default?t?(t.p(r,s),s[0]&512&&T(t,1)):(t=B_(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(vt(),E(t,1,1,()=>{t=null}),yt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&I(e),t&&t.d(r)}}}function $I(i,e,n){let t,r,s,a,o,u,{$$slots:p={},$$scope:_}=e;const b=rw(p);let{closeButton:$=void 0}=e,{closeOnClickOutside:P=!0}=e,{closeOnClickInside:L=!1}=e,{closeOnMove:z=!1}=e,{openOn:F="click"}=e,{openIfTopMost:U=!0}=e,{focusAfterOpen:j=!0}=e,{anchor:J=void 0}=e,{offset:pe=void 0}=e,{popupClass:re=void 0}=e,{maxWidth:te=void 0}=e,{lngLat:de=void 0}=e,{html:me=void 0}=e,{open:Y=!1}=e;const we=Tl(),{map:Ce,popupTarget:_e,layerEvent:fe,layer:Ee,eventTopMost:je}=Ml();on(i,Ce,et=>n(2,s=et)),on(i,_e,et=>n(3,o=et)),on(i,fe,et=>n(28,a=et)),on(i,Ee,et=>n(35,u=et));const ke=["click","dblclick","contextmenu"];let nt,bt=!1,zt;function At(){if(!nt)return;let et=nt.getElement();!et||et===zt||(zt=et,F==="hover"&&(zt.style.pointerEvents="none"),zt.addEventListener("mouseenter",()=>{n(24,bt=!0)},{passive:!0}),zt.addEventListener("mouseleave",()=>{n(24,bt=!1)},{passive:!0}),zt.addEventListener("click",()=>{L&&n(0,Y=!1)},{passive:!0}))}Sr(()=>{if(s)return s.on("click",Nt),s.on("contextmenu",Nt),typeof o=="string"&&(s.on("click",o,yn),s.on("dblclick",o,yn),s.on("contextmenu",o,yn),s.on("mousemove",o,Ye),s.on("mouseleave",o,Vt),s.on("touchstart",o,Kt),s.on("touchend",o,Tt)),()=>{s!=null&&s.loaded()&&(nt==null||nt.remove(),s.off("click",Nt),s.off("contextmenu",Nt),o instanceof mi.Marker?o.getPopup()===nt&&o.setPopup(void 0):typeof o=="string"&&(s.off("click",o,yn),s.off("dblclick",o,yn),s.off("contextmenu",o,yn),s.off("mousemove",o,Ye),s.off("mouseleave",o,Vt),s.off("touchstart",o,Kt),s.off("touchend",o,Tt)))}});function Et(et){return U?!("marker"in et)&&!JS(et)&&je(et)!==u:!1}let It=null,nn="normal";function yn(et){et.type===F&&(Et(et)||("layerType"in et?et.layerType==="deckgl"?(n(10,de=et.coordinate),n(4,It=et.object?[et.object]:null)):(n(10,de=et.lngLat),n(4,It=et.features??[])):(n(10,de=et.lngLat),n(4,It=et.features??[])),setTimeout(()=>n(0,Y=!0))))}let un=null;function Kt(et){un=et.point}function Tt(et){if(!un||F!=="hover")return;let sn=un.dist(et.point);un=null,sn<3&&(n(10,de=et.lngLat),n(4,It=et.features??[]),nt.isOpen()?n(25,nn="justOpened"):(n(25,nn="opening"),n(0,Y=!0)))}function Vt(et){F!=="hover"||un||nn!=="normal"||(n(0,Y=!1),n(4,It=null))}function Ye(et){if(!(F!=="hover"||un||nn!=="normal")){if(Et(et)){n(0,Y=!1),n(4,It=null);return}n(0,Y=!0),n(4,It=et.features??[]),n(10,de=et.lngLat)}}function Nt(et){if(nn==="justOpened"){n(25,nn="normal");return}if(!P)return;let sn=[zt,o instanceof mi.Marker?o==null?void 0:o.getElement():null];Y&&nt.isOpen()&&!sn.some(ln=>ln==null?void 0:ln.contains(et.originalEvent.target))&&(et.type==="contextmenu"&&F==="contextmenu"||et.type!=="contextmenu")&&n(0,Y=!1)}xa(()=>{s&&(nt!=null&&nt.isOpen())&&nt.remove()});let Mt;const Qe=()=>n(0,Y=!1);function en(et){Zt[et?"unshift":"push"](()=>{Mt=et,n(1,Mt)})}return i.$$set=et=>{"closeButton"in et&&n(11,$=et.closeButton),"closeOnClickOutside"in et&&n(12,P=et.closeOnClickOutside),"closeOnClickInside"in et&&n(13,L=et.closeOnClickInside),"closeOnMove"in et&&n(14,z=et.closeOnMove),"openOn"in et&&n(15,F=et.openOn),"openIfTopMost"in et&&n(16,U=et.openIfTopMost),"focusAfterOpen"in et&&n(17,j=et.focusAfterOpen),"anchor"in et&&n(18,J=et.anchor),"offset"in et&&n(19,pe=et.offset),"popupClass"in et&&n(20,re=et.popupClass),"maxWidth"in et&&n(21,te=et.maxWidth),"lngLat"in et&&n(10,de=et.lngLat),"html"in et&&n(22,me=et.html),"open"in et&&n(0,Y=et.open),"$$scope"in et&&n(29,_=et.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&14336&&n(27,t=$??(!P&&!L)),i.$$.dirty[0]&146685952&&(nt||(n(23,nt=new mi.Popup({closeButton:t,closeOnClick:!1,closeOnMove:z,focusAfterOpen:j,maxWidth:te,className:re,anchor:J,offset:pe})),zt=nt.getElement(),nt.on("open",()=>{n(0,Y=!0),At(),we("open",nt)}),nt.on("close",()=>{n(0,Y=!1),we("close",nt)}),nt.on("hover",()=>{we("hover",nt)}))),i.$$.dirty[0]&8421384&&nt&&o instanceof mi.Marker&&(F==="click"?o.setPopup(nt):o.getPopup()===nt&&o.setPopup(void 0)),i.$$.dirty[0]&268468224&&ke.includes(F)&&(a==null?void 0:a.type)===F&&(yn(a),Gr(fe,a=null,a)),i.$$.dirty[0]&268468224&&n(26,r=F==="hover"&&((a==null?void 0:a.type)==="mousemove"||(a==null?void 0:a.type)==="mouseenter")),i.$$.dirty[0]&352354304&&F==="hover"&&fe&&(r&&a&&(a.layerType==="deckgl"?(n(10,de=a.coordinate),n(4,It=a.object?[a.object]:null)):(n(10,de=a.lngLat),n(4,It=a.features??[]))),n(0,Y=(r||bt)??!1)),i.$$.dirty[0]&12582914&&(Mt?nt.setDOMContent(Mt):me&&nt.setHTML(me)),i.$$.dirty[0]&8389632&&de&&nt.setLngLat(de),i.$$.dirty[0]&41943045&&s){let et=nt.isOpen();Y&&!et?(nt.addTo(s),nn==="opening"&&n(25,nn="justOpened")):!Y&&et&&nt.remove()}},[Y,Mt,s,o,It,Ce,_e,fe,Ee,b,de,$,P,L,z,F,U,j,J,pe,re,te,me,nt,bt,nn,r,t,a,_,p,Qe,en]}class kI extends it{constructor(e){super(),ot(this,e,$I,xI,st,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}var ru=Uint8Array,uv=Uint16Array,CI=Int32Array,SI=new ru([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),II=new ru([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fv=function(i,e){for(var n=new uv(31),t=0;t<31;++t)n[t]=e+=1<<i[t-1];for(var r=new CI(n[30]),t=1;t<30;++t)for(var s=n[t];s<n[t+1];++s)r[s]=s-n[t]<<5|t;return{b:n,r}},hv=fv(SI,2),TI=hv.b,PI=hv.r;TI[28]=258,PI[258]=28;fv(II,0);var EI=new uv(32768);for(Jn=0;Jn<32768;++Jn)ao=(Jn&43690)>>1|(Jn&21845)<<1,ao=(ao&52428)>>2|(ao&13107)<<2,ao=(ao&61680)>>4|(ao&3855)<<4,EI[Jn]=((ao&65280)>>8|(ao&255)<<8)>>1;var ao,Jn,qf=new ru(288);for(Jn=0;Jn<144;++Jn)qf[Jn]=8;var Jn;for(Jn=144;Jn<256;++Jn)qf[Jn]=9;var Jn;for(Jn=256;Jn<280;++Jn)qf[Jn]=7;var Jn;for(Jn=280;Jn<288;++Jn)qf[Jn]=8;var Jn,AI=new ru(32);for(Jn=0;Jn<32;++Jn)AI[Jn]=5;var Jn,MI=new ru(0),DI=typeof TextDecoder<"u"&&new TextDecoder,zI=0;try{DI.decode(MI,{stream:!0}),zI=1}catch{}const _d=Symbol("EMBLA_CAROUSEL_CONTEXT");function LI(i){return Si(_d,i),i}function dv(i="This component"){if(!sw(_d))throw new Error(`${i} must be used within a <Carousel.Root> component`);return gi(_d)}function RI(i){let e,n,t,r,s;const a=i[7].default,o=xt(a,i,i[6],null);let u=[{class:n=jt("relative",i[0])},{role:"region"},{"aria-roledescription":"carousel"},i[1]],p={};for(let _=0;_<u.length;_+=1)p=Ie(p,u[_]);return{c(){e=ce("div"),o&&o.c(),this.h()},l(_){e=ue(_,"DIV",{class:!0,role:!0,"aria-roledescription":!0});var b=$e(e);o&&o.l(b),b.forEach(I),this.h()},h(){Bt(e,p)},m(_,b){B(_,e,b),o&&o.m(e,null),t=!0,r||(s=[mt(e,"mouseenter",i[8]),mt(e,"mouseleave",i[9])],r=!0)},p(_,[b]){o&&o.p&&(!t||b&64)&&$t(o,a,_,_[6],t?Ct(a,_[6],b,null):kt(_[6]),null),Bt(e,p=St(u,[(!t||b&1&&n!==(n=jt("relative",_[0])))&&{class:n},{role:"region"},{"aria-roledescription":"carousel"},b&2&&_[1]]))},i(_){t||(T(o,_),t=!0)},o(_){E(o,_),t=!1},d(_){_&&I(e),o&&o.d(_),r=!1,wr(s)}}}function OI(i,e,n){const t=["opts","plugins","api","orientation","class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{opts:o={}}=e,{plugins:u=[]}=e,{api:p=void 0}=e,{orientation:_="horizontal"}=e,{class:b=void 0}=e;const $=_r(void 0),P=_r(_),L=_r(!1),z=_r(!1),F=_r(o),U=_r(u);function j(){p==null||p.scrollPrev()}function J(){p==null||p.scrollNext()}function pe(Y){Y&&(L.set(Y.canScrollPrev()),z.set(Y.canScrollNext()))}function re(Y){Y.key==="ArrowLeft"?(Y.preventDefault(),j()):Y.key==="ArrowRight"&&(Y.preventDefault(),J())}LI({api:$,scrollPrev:j,scrollNext:J,orientation:P,canScrollNext:z,canScrollPrev:L,handleKeyDown:re,options:F,plugins:U,onInit:te});function te(Y){n(2,p=Y.detail),$.set(p)}xa(()=>{p==null||p.off("select",pe)});function de(Y){Wt.call(this,i,Y)}function me(Y){Wt.call(this,i,Y)}return i.$$set=Y=>{e=Ie(Ie({},e),Dt(Y)),n(1,r=at(e,t)),"opts"in Y&&n(3,o=Y.opts),"plugins"in Y&&n(4,u=Y.plugins),"api"in Y&&n(2,p=Y.api),"orientation"in Y&&n(5,_=Y.orientation),"class"in Y&&n(0,b=Y.class),"$$scope"in Y&&n(6,a=Y.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&P.set(_),i.$$.dirty&16&&U.set(u),i.$$.dirty&8&&F.set(o),i.$$.dirty&4&&p&&(pe(p),p.on("select",pe),p.on("reInit",pe))},[b,r,p,o,u,_,a,s,de,me]}class FI extends it{constructor(e){super(),ot(this,e,OI,RI,st,{opts:3,plugins:4,api:2,orientation:5,class:0})}}function BI(i){return Object.prototype.toString.call(i)==="[object Object]"}function V_(i){return BI(i)||Array.isArray(i)}function NI(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Ld(i,e){const n=Object.keys(i),t=Object.keys(e);if(n.length!==t.length)return!1;const r=JSON.stringify(Object.keys(i.breakpoints||{})),s=JSON.stringify(Object.keys(e.breakpoints||{}));return r!==s?!1:n.every(a=>{const o=i[a],u=e[a];return typeof o=="function"?`${o}`==`${u}`:!V_(o)||!V_(u)?o===u:Ld(o,u)})}function U_(i){return i.concat().sort((e,n)=>e.name>n.name?1:-1).map(e=>e.options)}function VI(i,e){if(i.length!==e.length)return!1;const n=U_(i),t=U_(e);return n.every((r,s)=>{const a=t[s];return Ld(r,a)})}function Rd(i){return typeof i=="number"}function gd(i){return typeof i=="string"}function Od(i){return typeof i=="boolean"}function j_(i){return Object.prototype.toString.call(i)==="[object Object]"}function br(i){return Math.abs(i)}function Fd(i){return Math.sign(i)}function jc(i,e){return br(i-e)}function UI(i,e){if(i===0||e===0||br(i)<=br(e))return 0;const n=jc(br(i),br(e));return br(n/i)}function Hc(i){return Zc(i).map(Number)}function Ci(i){return i[su(i)]}function su(i){return Math.max(0,i.length-1)}function Bd(i,e){return e===su(i)}function q_(i,e=0){return Array.from(Array(i),(n,t)=>e+t)}function Zc(i){return Object.keys(i)}function pv(i,e){return[i,e].reduce((n,t)=>(Zc(t).forEach(r=>{const s=n[r],a=t[r],o=j_(s)&&j_(a);n[r]=o?pv(s,a):a}),n),{})}function mv(i,e){return typeof e.MouseEvent<"u"&&i instanceof e.MouseEvent}function jI(i,e){const n={start:t,center:r,end:s};function t(){return 0}function r(u){return s(u)/2}function s(u){return e-u}function a(u,p){return gd(i)?n[i](u):i(e,u,p)}return{measure:a}}function Wc(){let i=[];function e(r,s,a,o={passive:!0}){let u;if("addEventListener"in r)r.addEventListener(s,a,o),u=()=>r.removeEventListener(s,a,o);else{const p=r;p.addListener(a),u=()=>p.removeListener(a)}return i.push(u),t}function n(){i=i.filter(r=>r())}const t={add:e,clear:n};return t}function qI(i,e,n,t){const r=Wc(),s=1e3/60;let a=null,o=0,u=0;function p(){r.add(i,"visibilitychange",()=>{i.hidden&&L()})}function _(){P(),r.clear()}function b(F){if(!u)return;a||(a=F);const U=F-a;for(a=F,o+=U;o>=s;)n(),o-=s;const j=br(o/s);t(j),u&&e.requestAnimationFrame(b)}function $(){u||(u=e.requestAnimationFrame(b))}function P(){e.cancelAnimationFrame(u),a=null,o=0,u=0}function L(){a=null,o=0}return{init:p,destroy:_,start:$,stop:P,update:n,render:t}}function GI(i,e){const n=e==="rtl",t=i==="y",r=t?"y":"x",s=t?"x":"y",a=!t&&n?-1:1,o=_(),u=b();function p(L){const{height:z,width:F}=L;return t?z:F}function _(){return t?"top":n?"right":"left"}function b(){return t?"bottom":n?"left":"right"}function $(L){return L*a}return{scroll:r,cross:s,startEdge:o,endEdge:u,measureSize:p,direction:$}}function wa(i=0,e=0){const n=br(i-e);function t(p){return p<i}function r(p){return p>e}function s(p){return t(p)||r(p)}function a(p){return s(p)?t(p)?i:e:p}function o(p){return n?p-n*Math.ceil((p-e)/n):p}return{length:n,max:e,min:i,constrain:a,reachedAny:s,reachedMax:r,reachedMin:t,removeOffset:o}}function _v(i,e,n){const{constrain:t}=wa(0,i),r=i+1;let s=a(e);function a($){return n?br((r+$)%r):t($)}function o(){return s}function u($){return s=a($),b}function p($){return _().set(o()+$)}function _(){return _v(i,o(),n)}const b={get:o,set:u,add:p,clone:_};return b}function HI(i,e,n,t,r,s,a,o,u,p,_,b,$,P,L,z,F,U,j){const{cross:J,direction:pe}=i,re=["INPUT","SELECT","TEXTAREA"],te={passive:!1},de=Wc(),me=Wc(),Y=wa(50,225).constrain(P.measure(20)),we={mouse:300,touch:400},Ce={mouse:500,touch:600},_e=L?43:25;let fe=!1,Ee=0,je=0,ke=!1,nt=!1,bt=!1,zt=!1;function At(Qe){if(!j)return;function en(sn){(Od(j)||j(Qe,sn))&&Kt(sn)}const et=e;de.add(et,"dragstart",sn=>sn.preventDefault(),te).add(et,"touchmove",()=>{},te).add(et,"touchend",()=>{}).add(et,"touchstart",en).add(et,"mousedown",en).add(et,"touchcancel",Vt).add(et,"contextmenu",Vt).add(et,"click",Ye,!0)}function Et(){de.clear(),me.clear()}function It(){const Qe=zt?n:e;me.add(Qe,"touchmove",Tt,te).add(Qe,"touchend",Vt).add(Qe,"mousemove",Tt,te).add(Qe,"mouseup",Vt)}function nn(Qe){const en=Qe.nodeName||"";return re.includes(en)}function yn(){return(L?Ce:we)[zt?"mouse":"touch"]}function un(Qe,en){const et=b.add(Fd(Qe)*-1),sn=_.byDistance(Qe,!L).distance;return L||br(Qe)<Y?sn:F&&en?sn*.5:_.byIndex(et.get(),0).distance}function Kt(Qe){const en=mv(Qe,t);zt=en,bt=L&&en&&!Qe.buttons&&fe,fe=jc(r.get(),a.get())>=2,!(en&&Qe.button!==0)&&(nn(Qe.target)||(ke=!0,s.pointerDown(Qe),p.useFriction(0).useDuration(0),r.set(a),It(),Ee=s.readPoint(Qe),je=s.readPoint(Qe,J),$.emit("pointerDown")))}function Tt(Qe){const en=s.readPoint(Qe),et=s.readPoint(Qe,J),sn=jc(en,Ee),ln=jc(et,je);if(!nt&&!zt&&(!Qe.cancelable||(nt=sn>ln,!nt)))return Vt(Qe);const We=s.pointerMove(Qe);sn>z&&(bt=!0),p.useFriction(.3).useDuration(1),o.start(),r.add(pe(We)),Qe.preventDefault()}function Vt(Qe){const et=_.byDistance(0,!1).index!==b.get(),sn=s.pointerUp(Qe)*yn(),ln=un(pe(sn),et),We=UI(sn,ln),Vn=_e-10*We,xr=U+We/50;nt=!1,ke=!1,me.clear(),p.useDuration(Vn).useFriction(xr),u.distance(ln,!L),zt=!1,$.emit("pointerUp")}function Ye(Qe){bt&&(Qe.stopPropagation(),Qe.preventDefault(),bt=!1)}function Nt(){return ke}return{init:At,pointerDown:Nt,destroy:Et}}function ZI(i,e){let t,r;function s(b){return b.timeStamp}function a(b,$){const L=`client${($||i.scroll)==="x"?"X":"Y"}`;return(mv(b,e)?b:b.touches[0])[L]}function o(b){return t=b,r=b,a(b)}function u(b){const $=a(b)-a(r),P=s(b)-s(t)>170;return r=b,P&&(t=b),$}function p(b){if(!t||!r)return 0;const $=a(r)-a(t),P=s(b)-s(t),L=s(b)-s(r)>170,z=$/P;return P&&!L&&br(z)>.1?z:0}return{pointerDown:o,pointerMove:u,pointerUp:p,readPoint:a}}function WI(){function i(n){const{offsetTop:t,offsetLeft:r,offsetWidth:s,offsetHeight:a}=n;return{top:t,right:r+s,bottom:t+a,left:r,width:s,height:a}}return{measure:i}}function KI(i){function e(t){return i*(t/100)}return{measure:e}}function XI(i,e,n,t,r,s,a){let o,u,p=[],_=!1;function b(z){return r.measureSize(a.measure(z))}function $(z){if(!s)return;u=b(i),p=t.map(b);function F(j){for(const J of j){const pe=J.target===i,re=t.indexOf(J.target),te=pe?u:p[re],de=b(pe?i:t[re]);if(br(de-te)>=.5){n.requestAnimationFrame(()=>{z.reInit(),e.emit("resize")});break}}}o=new ResizeObserver(j=>{_||(Od(s)||s(z,j))&&F(j)}),[i].concat(t).forEach(j=>o.observe(j))}function P(){o&&o.disconnect(),_=!0}return{init:$,destroy:P}}function JI(i,e,n,t,r){let s=0,a=0,o=t,u=r,p=i.get(),_=0;function b(){const re=n.get()-i.get(),te=!o;let de=0;return te?(s=0,i.set(n),de=re):(s+=re/o,s*=u,p+=s,i.add(s),de=p-_),a=Fd(de),_=p,pe}function $(){const re=n.get()-e.get();return br(re)<.001}function P(){return o}function L(){return a}function z(){return s}function F(){return j(t)}function U(){return J(r)}function j(re){return o=re,pe}function J(re){return u=re,pe}const pe={direction:L,duration:P,velocity:z,seek:b,settled:$,useBaseFriction:U,useBaseDuration:F,useFriction:J,useDuration:j};return pe}function YI(i,e,n,t,r){const s=r.measure(10),a=r.measure(50),o=wa(.1,.99);let u=!1;function p(){return!(u||!i.reachedAny(n.get())||!i.reachedAny(e.get()))}function _(P){if(!p())return;const L=i.reachedMin(e.get())?"min":"max",z=br(i[L]-e.get()),F=n.get()-e.get(),U=o.constrain(z/a);n.subtract(F*U),!P&&br(F)<s&&(n.set(i.constrain(n.get())),t.useDuration(25).useBaseFriction())}function b(P){u=!P}return{constrain:_,toggleActive:b}}function QI(i,e,n,t,r){const s=wa(-e+i,0),a=b(),o=_(),u=$();function p(L,z){return jc(L,z)<1}function _(){const L=a[0],z=Ci(a),F=a.lastIndexOf(L),U=a.indexOf(z)+1;return wa(F,U)}function b(){return n.map((L,z)=>{const{min:F,max:U}=s,j=s.constrain(L),J=!z,pe=Bd(n,z);return J?U:pe||p(F,j)?F:p(U,j)?U:j}).map(L=>parseFloat(L.toFixed(3)))}function $(){if(e<=i+r)return[s.max];if(t==="keepSnaps")return a;const{min:L,max:z}=o;return a.slice(L,z)}return{snapsContained:u,scrollContainLimit:o}}function eT(i,e,n){const t=e[0],r=n?t-i:Ci(e);return{limit:wa(r,t)}}function tT(i,e,n,t){const s=e.min+.1,a=e.max+.1,{reachedMin:o,reachedMax:u}=wa(s,a);function p($){return $===1?u(n.get()):$===-1?o(n.get()):!1}function _($){if(!p($))return;const P=i*($*-1);t.forEach(L=>L.add(P))}return{loop:_}}function nT(i){const{max:e,length:n}=i;function t(s){const a=s-e;return n?a/-n:0}return{get:t}}function rT(i,e,n,t,r){const{startEdge:s,endEdge:a}=i,{groupSlides:o}=r,u=b().map(e.measure),p=$(),_=P();function b(){return o(t).map(z=>Ci(z)[a]-z[0][s]).map(br)}function $(){return t.map(z=>n[s]-z[s]).map(z=>-br(z))}function P(){return o(p).map(z=>z[0]).map((z,F)=>z+u[F])}return{snaps:p,snapsAligned:_}}function sT(i,e,n,t,r,s){const{groupSlides:a}=r,{min:o,max:u}=t,p=_();function _(){const $=a(s),P=!i||e==="keepSnaps";return n.length===1?[s]:P?$:$.slice(o,u).map((L,z,F)=>{const U=!z,j=Bd(F,z);if(U){const J=Ci(F[0])+1;return q_(J)}if(j){const J=su(s)-Ci(F)[0]+1;return q_(J,Ci(F)[0])}return L})}return{slideRegistry:p}}function iT(i,e,n,t,r){const{reachedAny:s,removeOffset:a,constrain:o}=t;function u(L){return L.concat().sort((z,F)=>br(z)-br(F))[0]}function p(L){const z=i?a(L):o(L),F=e.map((j,J)=>({diff:_(j-z,0),index:J})).sort((j,J)=>br(j.diff)-br(J.diff)),{index:U}=F[0];return{index:U,distance:z}}function _(L,z){const F=[L,L+n,L-n];if(!i)return F[0];if(!z)return u(F);const U=F.filter(j=>Fd(j)===z);return U.length?u(U):Ci(F)-n}function b(L,z){const F=e[L]-r.get(),U=_(F,z);return{index:L,distance:U}}function $(L,z){const F=r.get()+L,{index:U,distance:j}=p(F),J=!i&&s(F);if(!z||J)return{index:U,distance:L};const pe=e[U]-j,re=L+_(pe,0);return{index:U,distance:re}}return{byDistance:$,byIndex:b,shortcut:_}}function oT(i,e,n,t,r,s,a){function o(b){const $=b.distance,P=b.index!==e.get();s.add($),$&&(t.duration()?i.start():(i.update(),i.render(1),i.update())),P&&(n.set(e.get()),e.set(b.index),a.emit("select"))}function u(b,$){const P=r.byDistance(b,$);o(P)}function p(b,$){const P=e.clone().set(b),L=r.byIndex(P.get(),$);o(L)}return{distance:u,index:p}}function aT(i,e,n,t,r,s){let a=0;function o(){s.add(document,"keydown",u,!1),e.forEach(p)}function u(b){b.code==="Tab"&&(a=new Date().getTime())}function p(b){const $=()=>{if(new Date().getTime()-a>10)return;i.scrollLeft=0;const z=e.indexOf(b),F=n.findIndex(U=>U.includes(z));Rd(F)&&(r.useDuration(0),t.index(F,0))};s.add(b,"focus",$,{passive:!0,capture:!0})}return{init:o}}function bf(i){let e=i;function n(){return e}function t(u){e=a(u)}function r(u){e+=a(u)}function s(u){e-=a(u)}function a(u){return Rd(u)?u:u.get()}return{get:n,set:t,add:r,subtract:s}}function gv(i,e){const n=i.scroll==="x"?s:a,t=e.style;let r=!1;function s(b){return`translate3d(${b}px,0px,0px)`}function a(b){return`translate3d(0px,${b}px,0px)`}function o(b){r||(t.transform=n(i.direction(b)))}function u(b){r=!b}function p(){r||(t.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:p,to:o,toggleActive:u}}function lT(i,e,n,t,r,s,a,o,u){const _=Hc(r),b=Hc(r).reverse(),$=U().concat(j());function P(de,me){return de.reduce((Y,we)=>Y-r[we],me)}function L(de,me){return de.reduce((Y,we)=>P(Y,me)>0?Y.concat([we]):Y,[])}function z(de){return s.map((me,Y)=>({start:me-t[Y]+.5+de,end:me+e-.5+de}))}function F(de,me,Y){const we=z(me);return de.map(Ce=>{const _e=Y?0:-n,fe=Y?n:0,Ee=Y?"end":"start",je=we[Ce][Ee];return{index:Ce,loopPoint:je,slideLocation:bf(-1),translate:gv(i,u[Ce]),target:()=>o.get()>je?_e:fe}})}function U(){const de=a[0],me=L(b,de);return F(me,n,!1)}function j(){const de=e-a[0]-1,me=L(_,de);return F(me,-n,!0)}function J(){return $.every(({index:de})=>{const me=_.filter(Y=>Y!==de);return P(me,e)<=.1})}function pe(){$.forEach(de=>{const{target:me,translate:Y,slideLocation:we}=de,Ce=me();Ce!==we.get()&&(Y.to(Ce),we.set(Ce))})}function re(){$.forEach(de=>de.translate.clear())}return{canLoop:J,clear:re,loop:pe,loopPoints:$}}function cT(i,e,n){let t,r=!1;function s(u){if(!n)return;function p(_){for(const b of _)if(b.type==="childList"){u.reInit(),e.emit("slidesChanged");break}}t=new MutationObserver(_=>{r||(Od(n)||n(u,_))&&p(_)}),t.observe(i,{childList:!0})}function a(){t&&t.disconnect(),r=!0}return{init:s,destroy:a}}function uT(i,e,n,t){const r={};let s=null,a=null,o,u=!1;function p(){o=new IntersectionObserver(L=>{u||(L.forEach(z=>{const F=e.indexOf(z.target);r[F]=z}),s=null,a=null,n.emit("slidesInView"))},{root:i.parentElement,threshold:t}),e.forEach(L=>o.observe(L))}function _(){o&&o.disconnect(),u=!0}function b(L){return Zc(r).reduce((z,F)=>{const U=parseInt(F),{isIntersecting:j}=r[U];return(L&&j||!L&&!j)&&z.push(U),z},[])}function $(L=!0){if(L&&s)return s;if(!L&&a)return a;const z=b(L);return L&&(s=z),L||(a=z),z}return{init:p,destroy:_,get:$}}function fT(i,e,n,t,r,s){const{measureSize:a,startEdge:o,endEdge:u}=i,p=n[0]&&r,_=L(),b=z(),$=n.map(a),P=F();function L(){if(!p)return 0;const j=n[0];return br(e[o]-j[o])}function z(){if(!p)return 0;const j=s.getComputedStyle(Ci(t));return parseFloat(j.getPropertyValue(`margin-${u}`))}function F(){return n.map((j,J,pe)=>{const re=!J,te=Bd(pe,J);return re?$[J]+_:te?$[J]+b:pe[J+1][o]-j[o]}).map(br)}return{slideSizes:$,slideSizesWithGaps:P,startGap:_,endGap:b}}function hT(i,e,n,t,r,s,a,o,u){const{startEdge:p,endEdge:_,direction:b}=i,$=Rd(n);function P(U,j){return Hc(U).filter(J=>J%j===0).map(J=>U.slice(J,J+j))}function L(U){return U.length?Hc(U).reduce((j,J,pe)=>{const re=Ci(j)||0,te=re===0,de=J===su(U),me=r[p]-s[re][p],Y=r[p]-s[J][_],we=!t&&te?b(a):0,Ce=!t&&de?b(o):0,_e=br(Y-Ce-(me+we));return pe&&_e>e+u&&j.push(J),de&&j.push(U.length),j},[]).map((j,J,pe)=>{const re=Math.max(pe[J-1]||0);return U.slice(re,j)}):[]}function z(U){return $?P(U,n):L(U)}return{groupSlides:z}}function dT(i,e,n,t,r,s,a){const{align:o,axis:u,direction:p,startIndex:_,loop:b,duration:$,dragFree:P,dragThreshold:L,inViewThreshold:z,slidesToScroll:F,skipSnaps:U,containScroll:j,watchResize:J,watchSlides:pe,watchDrag:re}=s,te=2,de=WI(),me=de.measure(e),Y=n.map(de.measure),we=GI(u,p),Ce=we.measureSize(me),_e=KI(Ce),fe=jI(o,Ce),Ee=!b&&!!j,je=b||!!j,{slideSizes:ke,slideSizesWithGaps:nt,startGap:bt,endGap:zt}=fT(we,me,Y,n,je,r),At=hT(we,Ce,F,b,me,Y,bt,zt,te),{snaps:Et,snapsAligned:It}=rT(we,fe,me,Y,At),nn=-Ci(Et)+Ci(nt),{snapsContained:yn,scrollContainLimit:un}=QI(Ce,nn,It,j,te),Kt=Ee?yn:It,{limit:Tt}=eT(nn,Kt,b),Vt=_v(su(Kt),_,b),Ye=Vt.clone(),Nt=Hc(n),Mt=({dragHandler:ft,scrollBody:Lt,scrollBounds:ms,options:{loop:Hr}})=>{Hr||ms.constrain(ft.pointerDown()),Lt.seek()},Qe=({scrollBody:ft,translate:Lt,location:ms,offsetLocation:Hr,scrollLooper:Hi,slideLooper:Zr,dragHandler:Ut,animation:Sn,eventHandler:Cn,options:{loop:gr}},Ns)=>{const $n=ft.velocity(),si=ft.settled();si&&!Ut.pointerDown()&&(Sn.stop(),Cn.emit("settle")),si||Cn.emit("scroll"),Hr.set(ms.get()-$n+$n*Ns),gr&&(Hi.loop(ft.direction()),Zr.loop()),Lt.to(Hr.get())},en=qI(t,r,()=>Mt(ri),ft=>Qe(ri,ft)),et=.68,sn=Kt[Vt.get()],ln=bf(sn),We=bf(sn),Vn=bf(sn),xr=JI(ln,We,Vn,$,et),xn=iT(b,Kt,nn,Tt,Vn),Qn=oT(en,Vt,Ye,xr,xn,Vn,a),is=nT(Tt),ps=Wc(),Fs=uT(e,n,a,z),{slideRegistry:Ws}=sT(Ee,j,Kt,un,At,Nt),Bs=aT(i,n,Ws,Qn,xr,ps),ri={ownerDocument:t,ownerWindow:r,eventHandler:a,containerRect:me,slideRects:Y,animation:en,axis:we,dragHandler:HI(we,i,t,r,Vn,ZI(we,r),ln,en,Qn,xr,xn,Vt,a,_e,P,L,U,et,re),eventStore:ps,percentOfView:_e,index:Vt,indexPrevious:Ye,limit:Tt,location:ln,offsetLocation:We,options:s,resizeHandler:XI(e,a,r,n,we,J,de),scrollBody:xr,scrollBounds:YI(Tt,We,Vn,xr,_e),scrollLooper:tT(nn,Tt,We,[ln,We,Vn]),scrollProgress:is,scrollSnapList:Kt.map(is.get),scrollSnaps:Kt,scrollTarget:xn,scrollTo:Qn,slideLooper:lT(we,Ce,nn,ke,nt,Et,Kt,We,n),slideFocus:Bs,slidesHandler:cT(e,a,pe),slidesInView:Fs,slideIndexes:Nt,slideRegistry:Ws,slidesToScroll:At,target:Vn,translate:gv(we,e)};return ri}function pT(){const i={};let e;function n(u){e=u}function t(u){return i[u]||[]}function r(u){return t(u).forEach(p=>p(e,u)),o}function s(u,p){return i[u]=t(u).concat([p]),o}function a(u,p){return i[u]=t(u).filter(_=>_!==p),o}const o={init:n,emit:r,off:a,on:s};return o}const mT={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function _T(i){function e(s,a){return pv(s,a||{})}function n(s){const a=s.breakpoints||{},o=Zc(a).filter(u=>i.matchMedia(u).matches).map(u=>a[u]).reduce((u,p)=>e(u,p),{});return e(s,o)}function t(s){return s.map(a=>Zc(a.breakpoints||{})).reduce((a,o)=>a.concat(o),[]).map(i.matchMedia)}return{mergeOptions:e,optionsAtMedia:n,optionsMediaQueries:t}}function gT(i){let e=[];function n(s,a){return e=a.filter(({options:o})=>i.optionsAtMedia(o).active!==!1),e.forEach(o=>o.init(s,i)),a.reduce((o,u)=>Object.assign(o,{[u.name]:u}),{})}function t(){e=e.filter(s=>s.destroy())}return{init:n,destroy:t}}function Mf(i,e,n){const t=i.ownerDocument,r=t.defaultView,s=_T(r),a=gT(s),o=Wc(),u=pT(),{mergeOptions:p,optionsAtMedia:_,optionsMediaQueries:b}=s,{on:$,off:P,emit:L}=u,z=Ce;let F=!1,U,j=p(mT,Mf.globalOptions),J=p(j),pe=[],re,te,de;function me(){const{container:Mt,slides:Qe}=J;te=(gd(Mt)?i.querySelector(Mt):Mt)||i.children[0];const et=gd(Qe)?te.querySelectorAll(Qe):Qe;de=[].slice.call(et||te.children)}function Y(Mt){const Qe=dT(i,te,de,t,r,Mt,u);if(Mt.loop&&!Qe.slideLooper.canLoop()){const en=Object.assign({},Mt,{loop:!1});return Y(en)}return Qe}function we(Mt,Qe){F||(j=p(j,Mt),J=_(j),pe=Qe||pe,me(),U=Y(J),b([j,...pe.map(({options:en})=>en)]).forEach(en=>o.add(en,"change",Ce)),J.active&&(U.translate.to(U.location.get()),U.animation.init(),U.slidesInView.init(),U.slideFocus.init(),U.eventHandler.init(Nt),U.resizeHandler.init(Nt),U.slidesHandler.init(Nt),U.options.loop&&U.slideLooper.loop(),te.offsetParent&&de.length&&U.dragHandler.init(Nt),re=a.init(Nt,pe)))}function Ce(Mt,Qe){const en=Et();_e(),we(p({startIndex:en},Mt),Qe),u.emit("reInit")}function _e(){U.dragHandler.destroy(),U.eventStore.clear(),U.translate.clear(),U.slideLooper.clear(),U.resizeHandler.destroy(),U.slidesHandler.destroy(),U.slidesInView.destroy(),U.animation.destroy(),a.destroy(),o.clear()}function fe(){F||(F=!0,o.clear(),_e(),u.emit("destroy"))}function Ee(Mt,Qe,en){!J.active||F||(U.scrollBody.useBaseFriction().useDuration(Qe===!0?0:J.duration),U.scrollTo.index(Mt,en||0))}function je(Mt){const Qe=U.index.add(1).get();Ee(Qe,Mt,-1)}function ke(Mt){const Qe=U.index.add(-1).get();Ee(Qe,Mt,1)}function nt(){return U.index.add(1).get()!==Et()}function bt(){return U.index.add(-1).get()!==Et()}function zt(){return U.scrollSnapList}function At(){return U.scrollProgress.get(U.location.get())}function Et(){return U.index.get()}function It(){return U.indexPrevious.get()}function nn(){return U.slidesInView.get()}function yn(){return U.slidesInView.get(!1)}function un(){return re}function Kt(){return U}function Tt(){return i}function Vt(){return te}function Ye(){return de}const Nt={canScrollNext:nt,canScrollPrev:bt,containerNode:Vt,internalEngine:Kt,destroy:fe,off:P,on:$,emit:L,plugins:un,previousScrollSnap:It,reInit:z,rootNode:Tt,scrollNext:je,scrollPrev:ke,scrollProgress:At,scrollSnapList:zt,scrollTo:Ee,selectedScrollSnap:Et,slideNodes:Ye,slidesInView:nn,slidesNotInView:yn};return we(e,n),setTimeout(()=>u.emit("init"),0),Nt}Mf.globalOptions=void 0;function Nd(i,e={options:{},plugins:[]}){let n=e,t;return NI()&&(Mf.globalOptions=Nd.globalOptions,t=Mf(i,n.options,n.plugins),t.on("init",()=>i.dispatchEvent(new CustomEvent("emblaInit",{detail:t})))),{destroy:()=>{t&&t.destroy()},update:r=>{const s=!Ld(n.options,r.options),a=!VI(n.plugins,r.plugins);!s&&!a||(n=r,t&&t.reInit(n.options,n.plugins))}}}Nd.globalOptions=void 0;function vT(i){let e,n,t,r,s,a,o;const u=i[10].default,p=xt(u,i,i[9],null);let _=[{class:t=jt("flex",i[2]==="horizontal"?"-ml-4":"-mt-4 flex-col",i[0])},{"data-embla-container":""},i[8]],b={};for(let $=0;$<_.length;$+=1)b=Ie(b,_[$]);return{c(){e=ce("div"),n=ce("div"),p&&p.c(),this.h()},l($){e=ue($,"DIV",{class:!0});var P=$e(e);n=ue(P,"DIV",{class:!0,"data-embla-container":!0});var L=$e(n);p&&p.l(L),L.forEach(I),P.forEach(I),this.h()},h(){Bt(n,b),se(e,"class","overflow-hidden")},m($,P){B($,e,P),ae(e,n),p&&p.m(n,null),s=!0,a||(o=[jn(r=Nd.call(null,e,{options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...i[1],axis:i[2]==="horizontal"?"x":"y"},plugins:i[3]})),mt(e,"emblaInit",i[7])],a=!0)},p($,[P]){p&&p.p&&(!s||P&512)&&$t(p,u,$,$[9],s?Ct(u,$[9],P,null):kt($[9]),null),Bt(n,b=St(_,[(!s||P&5&&t!==(t=jt("flex",$[2]==="horizontal"?"-ml-4":"-mt-4 flex-col",$[0])))&&{class:t},{"data-embla-container":""},P&256&&$[8]])),r&&Cd(r.update)&&P&14&&r.update.call(null,{options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...$[1],axis:$[2]==="horizontal"?"x":"y"},plugins:$[3]})},i($){s||(T(p,$),s=!0)},o($){E(p,$),s=!1},d($){$&&I(e),p&&p.d($),a=!1,wr(o)}}}function yT(i,e,n){const t=["class"];let r=at(e,t),s,a,o,{$$slots:u={},$$scope:p}=e,{class:_=void 0}=e;const{orientation:b,options:$,plugins:P,onInit:L}=dv("<Carousel.Content/>");return on(i,b,z=>n(2,a=z)),on(i,$,z=>n(1,s=z)),on(i,P,z=>n(3,o=z)),i.$$set=z=>{e=Ie(Ie({},e),Dt(z)),n(8,r=at(e,t)),"class"in z&&n(0,_=z.class),"$$scope"in z&&n(9,p=z.$$scope)},[_,s,a,o,b,$,P,L,r,p,u]}class bT extends it{constructor(e){super(),ot(this,e,yT,vT,st,{class:0})}}function wT(i){let e,n,t;const r=i[5].default,s=xt(r,i,i[4],null);let a=[{role:"group"},{"aria-roledescription":"slide"},{class:n=jt("min-w-0 shrink-0 grow-0 basis-full",i[1]==="horizontal"?"pl-4":"pt-4",i[0])},{"data-embla-slide":""},i[3]],o={};for(let u=0;u<a.length;u+=1)o=Ie(o,a[u]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(u){e=ue(u,"DIV",{role:!0,"aria-roledescription":!0,class:!0,"data-embla-slide":!0});var p=$e(e);s&&s.l(p),p.forEach(I),this.h()},h(){Bt(e,o)},m(u,p){B(u,e,p),s&&s.m(e,null),t=!0},p(u,[p]){s&&s.p&&(!t||p&16)&&$t(s,r,u,u[4],t?Ct(r,u[4],p,null):kt(u[4]),null),Bt(e,o=St(a,[{role:"group"},{"aria-roledescription":"slide"},(!t||p&3&&n!==(n=jt("min-w-0 shrink-0 grow-0 basis-full",u[1]==="horizontal"?"pl-4":"pt-4",u[0])))&&{class:n},{"data-embla-slide":""},p&8&&u[3]]))},i(u){t||(T(s,u),t=!0)},o(u){E(s,u),t=!1},d(u){u&&I(e),s&&s.d(u)}}}function xT(i,e,n){const t=["class"];let r=at(e,t),s,{$$slots:a={},$$scope:o}=e,{class:u=void 0}=e;const{orientation:p}=dv("<Carousel.Item/>");return on(i,p,_=>n(1,s=_)),i.$$set=_=>{e=Ie(Ie({},e),Dt(_)),n(3,r=at(e,t)),"class"in _&&n(0,u=_.class),"$$scope"in _&&n(4,o=_.$$scope)},[u,s,p,r,o,a]}class $T extends it{constructor(e){super(),ot(this,e,xT,wT,st,{class:0})}}function kT(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function CT(i){let e,n;const t=[{class:jt("text-lg font-semibold leading-none tracking-tight",i[0])},i[1]];let r={$$slots:{default:[kT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Q$({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("text-lg font-semibold leading-none tracking-tight",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function ST(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}class Vd extends it{constructor(e){super(),ot(this,e,ST,CT,st,{class:0})}}function IT(i){let e;const n=i[1].default,t=xt(n,i,i[2],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&4)&&$t(t,n,r,r[2],e?Ct(n,r[2],s,null):kt(r[2]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function TT(i){let e,n;const t=[i[0]];let r={$$slots:{default:[IT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new dk({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&1?St(t,[vn(s[0])]):{};a&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function PT(i,e,n){const t=[];let r=at(e,t),{$$slots:s={},$$scope:a}=e;return i.$$set=o=>{e=Ie(Ie({},e),Dt(o)),n(0,r=at(e,t)),"$$scope"in o&&n(2,a=o.$$scope)},[r,s,a]}class ET extends it{constructor(e){super(),ot(this,e,PT,TT,st,{})}}function AT(i){let e,n,t;const r=i[3].default,s=xt(r,i,i[2],null);let a=[{class:n=jt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i[0])},i[1]],o={};for(let u=0;u<a.length;u+=1)o=Ie(o,a[u]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(u){e=ue(u,"DIV",{class:!0});var p=$e(e);s&&s.l(p),p.forEach(I),this.h()},h(){Bt(e,o)},m(u,p){B(u,e,p),s&&s.m(e,null),t=!0},p(u,[p]){s&&s.p&&(!t||p&4)&&$t(s,r,u,u[2],t?Ct(r,u[2],p,null):kt(u[2]),null),Bt(e,o=St(a,[(!t||p&1&&n!==(n=jt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",u[0])))&&{class:n},p&2&&u[1]]))},i(u){t||(T(s,u),t=!0)},o(u){E(s,u),t=!1},d(u){u&&I(e),s&&s.d(u)}}}function MT(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(2,a=u.$$scope)},[o,r,a,s]}class DT extends it{constructor(e){super(),ot(this,e,MT,AT,st,{class:0})}}function zT(i){let e,n,t;const r=i[3].default,s=xt(r,i,i[2],null);let a=[{class:n=jt("flex flex-col space-y-1.5 text-center sm:text-left",i[0])},i[1]],o={};for(let u=0;u<a.length;u+=1)o=Ie(o,a[u]);return{c(){e=ce("div"),s&&s.c(),this.h()},l(u){e=ue(u,"DIV",{class:!0});var p=$e(e);s&&s.l(p),p.forEach(I),this.h()},h(){Bt(e,o)},m(u,p){B(u,e,p),s&&s.m(e,null),t=!0},p(u,[p]){s&&s.p&&(!t||p&4)&&$t(s,r,u,u[2],t?Ct(r,u[2],p,null):kt(u[2]),null),Bt(e,o=St(a,[(!t||p&1&&n!==(n=jt("flex flex-col space-y-1.5 text-center sm:text-left",u[0])))&&{class:n},p&2&&u[1]]))},i(u){t||(T(s,u),t=!0)},o(u){E(s,u),t=!1},d(u){u&&I(e),s&&s.d(u)}}}function LT(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(2,a=u.$$scope)},[o,r,a,s]}class iu extends it{constructor(e){super(),ot(this,e,LT,zT,st,{class:0})}}function RT(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{class:jt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",i[0])},i[3]];let r={};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Fk({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&15?St(t,[a&2&&{transition:s[1]},a&4&&{transitionConfig:s[2]},a&1&&{class:jt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",s[0])},a&8&&vn(s[3])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function OT(i,e,n){const t=["class","transition","transitionConfig"];let r=at(e,t),{class:s=void 0}=e,{transition:a=Rw}=e,{transitionConfig:o={duration:150}}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(3,r=at(e,t)),"class"in u&&n(0,s=u.class),"transition"in u&&n(1,a=u.transition),"transitionConfig"in u&&n(2,o=u.transitionConfig)},[s,a,o,r]}class FT extends it{constructor(e){super(),ot(this,e,OT,RT,st,{class:0,transition:1,transitionConfig:2})}}function BT(i){let e,n,t,r="Close",s;return e=new Cw({props:{class:"h-4 w-4"}}),{c(){q(e.$$.fragment),n=ge(),t=ce("span"),t.textContent=r,this.h()},l(a){Z(e.$$.fragment,a),n=ve(a),t=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(t)!=="svelte-1pewzs3"&&(t.textContent=r),this.h()},h(){se(t,"class","sr-only")},m(a,o){G(e,a,o),B(a,n,o),B(a,t,o),s=!0},p:gt,i(a){s||(T(e.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),s=!1},d(a){a&&(I(n),I(t)),H(e,a)}}}function NT(i){let e,n,t;const r=i[4].default,s=xt(r,i,i[5],null);return n=new ok({props:{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",$$slots:{default:[BT]},$$scope:{ctx:i}}}),{c(){s&&s.c(),e=ge(),q(n.$$.fragment)},l(a){s&&s.l(a),e=ve(a),Z(n.$$.fragment,a)},m(a,o){s&&s.m(a,o),B(a,e,o),G(n,a,o),t=!0},p(a,o){s&&s.p&&(!t||o&32)&&$t(s,r,a,a[5],t?Ct(r,a[5],o,null):kt(a[5]),null);const u={};o&32&&(u.$$scope={dirty:o,ctx:a}),n.$set(u)},i(a){t||(T(s,a),T(n.$$.fragment,a),t=!0)},o(a){E(s,a),E(n.$$.fragment,a),t=!1},d(a){a&&I(e),s&&s.d(a),H(n,a)}}}function VT(i){let e,n,t,r;e=new FT({});const s=[{transition:i[1]},{transitionConfig:i[2]},{class:jt("w-full-dialog-custom fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",i[0])},i[3]];let a={$$slots:{default:[NT]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Ie(a,s[o]);return t=new Tk({props:a}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(o){Z(e.$$.fragment,o),n=ve(o),Z(t.$$.fragment,o)},m(o,u){G(e,o,u),B(o,n,u),G(t,o,u),r=!0},p(o,u){const p=u&15?St(s,[u&2&&{transition:o[1]},u&4&&{transitionConfig:o[2]},u&1&&{class:jt("w-full-dialog-custom fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",o[0])},u&8&&vn(o[3])]):{};u&32&&(p.$$scope={dirty:u,ctx:o}),t.$set(p)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),r=!1},d(o){o&&I(n),H(e,o),H(t,o)}}}function UT(i){let e,n;return e=new ET({props:{$$slots:{default:[VT]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&47&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function jT(i,e,n){const t=["class","transition","transitionConfig"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{transition:u=Id}=e,{transitionConfig:p={duration:200}}=e;return i.$$set=_=>{e=Ie(Ie({},e),Dt(_)),n(3,r=at(e,t)),"class"in _&&n(0,o=_.class),"transition"in _&&n(1,u=_.transition),"transitionConfig"in _&&n(2,p=_.transitionConfig),"$$scope"in _&&n(5,a=_.$$scope)},[o,u,p,r,s,a]}class Ca extends it{constructor(e){super(),ot(this,e,jT,UT,st,{class:0,transition:1,transitionConfig:2})}}function qT(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function GT(i){let e,n;const t=[{class:jt("text-sm text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[qT]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Yk({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("text-sm text-muted-foreground",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function HT(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}class ou extends it{constructor(e){super(),ot(this,e,HT,GT,st,{class:0})}}const Sa=H$,vv=Gk;function G_(i,e,n){const t=i.slice();return t[19]=e[n],t}function H_(i,e,n){const t=i.slice();return t[22]=e[n],t}function Z_(i){let e,n=i[22]+"",t;return{c(){e=ce("li"),t=He(n)},l(r){e=ue(r,"LI",{});var s=$e(e);t=Ze(s,n),s.forEach(I)},m(r,s){B(r,e,s),ae(e,t)},p:gt,d(r){r&&I(e)}}}function W_(i){let e,n,t=i[19]+"",r,s,a,o="Report",u,p,_;function b(){return i[13](i[19])}return{c(){e=ce("div"),n=ce("div"),r=He(t),s=ge(),a=ce("button"),a.textContent=o,u=ge(),this.h()},l($){e=ue($,"DIV",{class:!0});var P=$e(e);n=ue(P,"DIV",{class:!0});var L=$e(n);r=Ze(L,t),L.forEach(I),s=ve(P),a=ue(P,"BUTTON",{class:!0,"data-svelte-h":!0}),bn(a)!=="svelte-1s21ppn"&&(a.textContent=o),u=ve(P),P.forEach(I),this.h()},h(){se(n,"class","comment svelte-vwcu2f"),se(a,"class","report-button svelte-vwcu2f"),se(e,"class","comment-wrapper svelte-vwcu2f")},m($,P){B($,e,P),ae(e,n),ae(n,r),ae(e,s),ae(e,a),ae(e,u),p||(_=mt(a,"click",b),p=!0)},p($,P){i=$,P&2&&t!==(t=i[19]+"")&&Qt(r,t)},d($){$&&I(e),p=!1,_()}}}function ZT(i){let e;return{c(){e=He("Upload Picture")},l(n){e=Ze(n,"Upload Picture")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function WT(i){let e,n,t,r,s,a,o,u,p,_,b,$,P,L="Features:",z,F,U,j,J,pe="Comments",re,te,de,me,Y,we,Ce="Add Comment",_e,fe,Ee,je,ke="Upload a picture of this location!",nt,bt,zt,At,Et,It,nn,yn=dn(i[6]),un=[];for(let Vt=0;Vt<yn.length;Vt+=1)un[Vt]=Z_(H_(i,yn,Vt));let Kt=dn(i[1]),Tt=[];for(let Vt=0;Vt<Kt.length;Vt+=1)Tt[Vt]=W_(G_(i,Kt,Vt));return At=new yr({props:{variant:"secondary",class:"mt-4",$$slots:{default:[ZT]},$$scope:{ctx:i}}}),At.$on("click",i[8]),{c(){e=ce("div"),n=ce("h2"),t=He(i[4]),r=ge(),s=ce("p"),a=He("ID: "),o=He(i[3]),u=ge(),p=ce("p"),_=He("Description: "),b=He(i[5]),$=ge(),P=ce("p"),P.textContent=L,z=ge(),F=ce("ul");for(let Vt=0;Vt<un.length;Vt+=1)un[Vt].c();U=ge(),j=ce("div"),J=ce("h3"),J.textContent=pe,re=ge(),te=ce("div");for(let Vt=0;Vt<Tt.length;Vt+=1)Tt[Vt].c();de=ge(),me=ce("textarea"),Y=ge(),we=ce("button"),we.textContent=Ce,_e=ge(),fe=ce("div"),Ee=ce("div"),je=ce("label"),je.textContent=ke,nt=ge(),bt=ce("input"),zt=ge(),q(At.$$.fragment),this.h()},l(Vt){e=ue(Vt,"DIV",{});var Ye=$e(e);n=ue(Ye,"H2",{class:!0});var Nt=$e(n);t=Ze(Nt,i[4]),Nt.forEach(I),r=ve(Ye),s=ue(Ye,"P",{});var Mt=$e(s);a=Ze(Mt,"ID: "),o=Ze(Mt,i[3]),Mt.forEach(I),u=ve(Ye),p=ue(Ye,"P",{});var Qe=$e(p);_=Ze(Qe,"Description: "),b=Ze(Qe,i[5]),Qe.forEach(I),$=ve(Ye),P=ue(Ye,"P",{"data-svelte-h":!0}),bn(P)!=="svelte-fn4rp3"&&(P.textContent=L),z=ve(Ye),F=ue(Ye,"UL",{class:!0});var en=$e(F);for(let Vn=0;Vn<un.length;Vn+=1)un[Vn].l(en);en.forEach(I),U=ve(Ye),j=ue(Ye,"DIV",{class:!0});var et=$e(j);J=ue(et,"H3",{"data-svelte-h":!0}),bn(J)!=="svelte-kc6sae"&&(J.textContent=pe),re=ve(et),te=ue(et,"DIV",{class:!0});var sn=$e(te);for(let Vn=0;Vn<Tt.length;Vn+=1)Tt[Vn].l(sn);sn.forEach(I),de=ve(et),me=ue(et,"TEXTAREA",{class:!0,placeholder:!0}),$e(me).forEach(I),Y=ve(et),we=ue(et,"BUTTON",{"data-svelte-h":!0}),bn(we)!=="svelte-ziv1pu"&&(we.textContent=Ce),et.forEach(I),Ye.forEach(I),_e=ve(Vt),fe=ue(Vt,"DIV",{class:!0});var ln=$e(fe);Ee=ue(ln,"DIV",{class:!0});var We=$e(Ee);je=ue(We,"LABEL",{for:!0,"data-svelte-h":!0}),bn(je)!=="svelte-14dirxk"&&(je.textContent=ke),nt=ve(We),bt=ue(We,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),We.forEach(I),zt=ve(ln),Z(At.$$.fragment,ln),ln.forEach(I),this.h()},h(){se(n,"class","svelte-vwcu2f"),se(F,"class","svelte-vwcu2f"),se(te,"class","comments-scroll svelte-vwcu2f"),se(me,"class","comment-input"),se(me,"placeholder","Type your comment here..."),se(j,"class","comment-container svelte-vwcu2f"),se(je,"for","poi-picture"),se(bt,"id","poi-picture"),se(bt,"type","file"),se(bt,"accept","image/png, image/jpeg"),se(bt,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),se(Ee,"class","mb-4"),se(fe,"class","mb-4 text-white rounded shadow-md mt-6 w-full md:w-3/4 lg:w-1/2")},m(Vt,Ye){B(Vt,e,Ye),ae(e,n),ae(n,t),ae(e,r),ae(e,s),ae(s,a),ae(s,o),ae(e,u),ae(e,p),ae(p,_),ae(p,b),ae(e,$),ae(e,P),ae(e,z),ae(e,F);for(let Nt=0;Nt<un.length;Nt+=1)un[Nt]&&un[Nt].m(F,null);ae(e,U),ae(e,j),ae(j,J),ae(j,re),ae(j,te);for(let Nt=0;Nt<Tt.length;Nt+=1)Tt[Nt]&&Tt[Nt].m(te,null);ae(j,de),ae(j,me),Ro(me,i[2]),ae(j,Y),ae(j,we),B(Vt,_e,Ye),B(Vt,fe,Ye),ae(fe,Ee),ae(Ee,je),ae(Ee,nt),ae(Ee,bt),ae(fe,zt),G(At,fe,null),Et=!0,It||(nn=[mt(me,"input",i[14]),mt(we,"click",i[7]),mt(bt,"change",i[9])],It=!0)},p(Vt,Ye){if(Ye&64){yn=dn(Vt[6]);let Mt;for(Mt=0;Mt<yn.length;Mt+=1){const Qe=H_(Vt,yn,Mt);un[Mt]?un[Mt].p(Qe,Ye):(un[Mt]=Z_(Qe),un[Mt].c(),un[Mt].m(F,null))}for(;Mt<un.length;Mt+=1)un[Mt].d(1);un.length=yn.length}if(Ye&2){Kt=dn(Vt[1]);let Mt;for(Mt=0;Mt<Kt.length;Mt+=1){const Qe=G_(Vt,Kt,Mt);Tt[Mt]?Tt[Mt].p(Qe,Ye):(Tt[Mt]=W_(Qe),Tt[Mt].c(),Tt[Mt].m(te,null))}for(;Mt<Tt.length;Mt+=1)Tt[Mt].d(1);Tt.length=Kt.length}Ye&4&&Ro(me,Vt[2]);const Nt={};Ye&33554432&&(Nt.$$scope={dirty:Ye,ctx:Vt}),At.$set(Nt)},i(Vt){Et||(T(At.$$.fragment,Vt),Et=!0)},o(Vt){E(At.$$.fragment,Vt),Et=!1},d(Vt){Vt&&(I(e),I(_e),I(fe)),Hs(un,Vt),Hs(Tt,Vt),H(At),It=!1,wr(nn)}}}function KT(i){let e,n;return e=new Ca({props:{$$slots:{default:[WT]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&33554438&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function XT(i){let e,n;return e=new Sa({props:{open:!0,onOpenChange:i[15],$$slots:{default:[KT]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&1&&(s.onOpenChange=t[15]),r&33554438&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function JT(i){throw new Error("Function not implemented.")}function YT(i,e,n){let{poi:t}=e;const{id:r,name:s,description:a,features:o}=t;let{comments:u}=t,{userNickname:p}=e,{onClose:_}=e,{refreshPOIs:b}=e,$="",P;function L(){console.log("NIckname is "+p),$.trim()!==""&&(n(1,u=[...u,{text:$.trim(),nickname:p}]),n(2,$=""))}async function z(){if(P){const te=new FormData;te.append("picture",P),te.append("poi_id",String(t.id));try{(await fetch("/api/poi/poi-image/upload",{method:"POST",body:te})).ok&&(j(t.id),md.success("Successfully added picture for POI!"),Q0.checkForUpdates(),_())}catch(de){console.error("Error uploading file:",de)}}}const F=["image/png","image/jpeg"];function U(te){const de=te.target;de&&de.files&&de.files.length>0&&F.includes(de.files[0].type)?P=de.files[0]:P=void 0}const j=async te=>{const de=new URLSearchParams({id:te.toString()}),me=await fetch(`/api/poi/get-by-id?${de.toString()}`);if(me.ok){const Y=await me.json(),we=ba.decode(Y);if(Vf.isRight(we)){const Ce=we.right;n(10,t.pictures=Ce.pictures,t),b()}else console.error("Invalid POI object received from API: ",we.left)}},J=te=>JT(te.text);function pe(){$=this.value,n(2,$)}const re=te=>te||_();return i.$$set=te=>{"poi"in te&&n(10,t=te.poi),"userNickname"in te&&n(11,p=te.userNickname),"onClose"in te&&n(0,_=te.onClose),"refreshPOIs"in te&&n(12,b=te.refreshPOIs)},[_,u,$,r,s,a,o,L,z,U,t,p,b,J,pe,re]}class QT extends it{constructor(e){super(),ot(this,e,YT,XT,st,{poi:10,userNickname:11,onClose:0,refreshPOIs:12})}}function eP(i){let e;const n=i[5].default,t=xt(n,i,i[8],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&256)&&$t(t,n,r,r[8],e?Ct(n,r[8],s,null):kt(r[8]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function tP(i){let e,n,t;const r=[{class:jt(K_({variant:i[2],size:i[3],className:i[1]}))},i[4]];function s(o){i[6](o)}let a={$$slots:{default:[eP]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ie(a,r[o]);return i[0]!==void 0&&(a.pressed=i[0]),e=new mC({props:a}),Zt.push(()=>An(e,"pressed",s)),e.$on("click",i[7]),{c(){q(e.$$.fragment)},l(o){Z(e.$$.fragment,o)},m(o,u){G(e,o,u),t=!0},p(o,[u]){const p=u&30?St(r,[u&14&&{class:jt(K_({variant:o[2],size:o[3],className:o[1]}))},u&16&&vn(o[4])]):{};u&256&&(p.$$scope={dirty:u,ctx:o}),!n&&u&1&&(n=!0,p.pressed=o[0],En(()=>n=!1)),e.$set(p)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function nP(i,e,n){const t=["class","variant","size","pressed"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{variant:u="default"}=e,{size:p="default"}=e,{pressed:_=void 0}=e;function b(P){_=P,n(0,_)}function $(P){Wt.call(this,i,P)}return i.$$set=P=>{e=Ie(Ie({},e),Dt(P)),n(4,r=at(e,t)),"class"in P&&n(1,o=P.class),"variant"in P&&n(2,u=P.variant),"size"in P&&n(3,p=P.size),"pressed"in P&&n(0,_=P.pressed),"$$scope"in P&&n(8,a=P.$$scope)},[_,o,u,p,r,s,b,$,a]}class Ud extends it{constructor(e){super(),ot(this,e,nP,tP,st,{class:1,variant:2,size:3,pressed:0})}}const K_=b0({base:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background hover:bg-muted hover:text-muted-foreground",variants:{variant:{default:"bg-transparent",outline:"bg-transparent border border-input hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});function rP(i){let e;const n=i[2].default,t=xt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&$t(t,n,r,r[4],e?Ct(n,r[4],s,null):kt(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function sP(i){let e,n;const t=[{class:jt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",i[0])},i[1]];let r={$$slots:{default:[rP]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new oC({props:r}),e.$on("mousedown",i[3]),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s[0])},a&2&&vn(s[1])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function iP(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;function u(p){Wt.call(this,i,p)}return i.$$set=p=>{e=Ie(Ie({},e),Dt(p)),n(1,r=at(e,t)),"class"in p&&n(0,o=p.class),"$$scope"in p&&n(4,a=p.$$scope)},[o,r,s,u,a]}class co extends it{constructor(e){super(),ot(this,e,iP,sP,st,{class:0})}}function oP(i){let e,n;const t=i[4].default,r=xt(t,i,i[5],null);return{c(){e=ce("div"),r&&r.c(),this.h()},l(s){e=ue(s,"DIV",{class:!0});var a=$e(e);r&&r.l(a),a.forEach(I),this.h()},h(){se(e,"class","pb-4 pt-0")},m(s,a){B(s,e,a),r&&r.m(e,null),n=!0},p(s,a){r&&r.p&&(!n||a&32)&&$t(r,t,s,s[5],n?Ct(t,s[5],a,null):kt(s[5]),null)},i(s){n||(T(r,s),n=!0)},o(s){E(r,s),n=!1},d(s){s&&I(e),r&&r.d(s)}}}function aP(i){let e,n;const t=[{class:jt("overflow-hidden text-sm transition-all",i[0])},{transition:i[1]},{transitionConfig:i[2]},i[3]];let r={$$slots:{default:[oP]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new f$({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&15?St(t,[a&1&&{class:jt("overflow-hidden text-sm transition-all",s[0])},a&2&&{transition:s[1]},a&4&&{transitionConfig:s[2]},a&8&&vn(s[3])]):{};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function lP(i,e,n){const t=["class","transition","transitionConfig"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{transition:u=Ow}=e,{transitionConfig:p={duration:200}}=e;return i.$$set=_=>{e=Ie(Ie({},e),Dt(_)),n(3,r=at(e,t)),"class"in _&&n(0,o=_.class),"transition"in _&&n(1,u=_.transition),"transitionConfig"in _&&n(2,p=_.transitionConfig),"$$scope"in _&&n(5,a=_.$$scope)},[o,u,p,r,s,a]}class yv extends it{constructor(e){super(),ot(this,e,lP,aP,st,{class:0,transition:1,transitionConfig:2})}}function cP(i){let e;const n=i[3].default,t=xt(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&$t(t,n,r,r[4],e?Ct(n,r[4],s,null):kt(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function uP(i){let e,n;const t=[{value:i[1]},{class:jt("border-b",i[0])},i[2]];let r={$$slots:{default:[cP]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Rx({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&7?St(t,[a&2&&{value:s[1]},a&1&&{class:jt("border-b",s[0])},a&4&&vn(s[2])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function fP(i,e,n){const t=["class","value"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{value:u}=e;return i.$$set=p=>{e=Ie(Ie({},e),Dt(p)),n(2,r=at(e,t)),"class"in p&&n(0,o=p.class),"value"in p&&n(1,u=p.value),"$$scope"in p&&n(4,a=p.$$scope)},[o,u,r,s,a]}class bv extends it{constructor(e){super(),ot(this,e,fP,uP,st,{class:0,value:1})}}function hP(i){let e,n,t;const r=i[3].default,s=xt(r,i,i[5],null);return n=new jw({props:{class:"h-4 w-4 transition-transform duration-200"}}),{c(){s&&s.c(),e=ge(),q(n.$$.fragment)},l(a){s&&s.l(a),e=ve(a),Z(n.$$.fragment,a)},m(a,o){s&&s.m(a,o),B(a,e,o),G(n,a,o),t=!0},p(a,o){s&&s.p&&(!t||o&32)&&$t(s,r,a,a[5],t?Ct(r,a[5],o,null):kt(a[5]),null)},i(a){t||(T(s,a),T(n.$$.fragment,a),t=!0)},o(a){E(s,a),E(n.$$.fragment,a),t=!1},d(a){a&&I(e),s&&s.d(a),H(n,a)}}}function dP(i){let e,n;const t=[{class:jt("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",i[0])},i[2]];let r={$$slots:{default:[hP]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Xx({props:r}),e.$on("click",i[4]),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,a){const o=a&5?St(t,[a&1&&{class:jt("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s[0])},a&4&&vn(s[2])]):{};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function pP(i){let e,n;return e=new jx({props:{level:i[1],class:"flex",$$slots:{default:[dP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&2&&(s.level=t[1]),r&37&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function mP(i,e,n){const t=["class","level"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{level:u=3}=e;function p(_){Wt.call(this,i,_)}return i.$$set=_=>{e=Ie(Ie({},e),Dt(_)),n(2,r=at(e,t)),"class"in _&&n(0,o=_.class),"level"in _&&n(1,u=_.level),"$$scope"in _&&n(5,a=_.$$scope)},[o,u,r,s,p,a]}class wv extends it{constructor(e){super(),ot(this,e,mP,pP,st,{class:0,level:1})}}const xv=Px;function X_(i,e,n){const t=i.slice();return t[25]=e[n],t[27]=n,t}function J_(i,e,n){const t=i.slice();return t[28]=e[n],t}function Y_(i,e,n){const t=i.slice();return t[31]=e[n],t[27]=n,t}function _P(i){let e,n=i[0].isFavourite?"Remove From Favourites":"Add To Favourites",t,r,s;return r=new Al({props:{class:"max-sm:w-4 max-sm:h-4"}}),{c(){e=ce("div"),t=He(n),q(r.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var o=$e(e);t=Ze(o,n),Z(r.$$.fragment,o),o.forEach(I),this.h()},h(){se(e,"class","flex gap-2 items-center max-sm:text-xs")},m(a,o){B(a,e,o),ae(e,t),G(r,e,null),s=!0},p(a,o){(!s||o[0]&1)&&n!==(n=a[0].isFavourite?"Remove From Favourites":"Add To Favourites")&&Qt(t,n)},i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&I(e),H(r)}}}function gP(i){let e,n;return e=new Ud({props:{class:"max-sm:p-2 max-sm:h-auto text-secondary-foreground hover:text-accent-foreground data-[state=off]:hover:bg-accent data-[state=off]:bg-background data-[state=on]:bg-primary data-[state=on]:hover:brightness-90 data-[state=on]:text-error-content",pressed:i[0].isFavourite,onPressedChange:i[9],$$slots:{default:[_P]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1&&(s.pressed=t[0].isFavourite),r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function vP(i){let e,n="Add/Remove Favourite";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-17t27y0"&&(e.textContent=n),this.h()},h(){se(e,"class","text-xs flex items-center")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function yP(i){let e,n,t,r;return e=new Fo({props:{$$slots:{default:[gP]},$$scope:{ctx:i}}}),t=new Bo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[vP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a[0]&1|a[1]&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a[1]&4&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function bP(i){let e,n,t=i[0].name+"",r,s,a,o,u;function p(b){i[11](b)}let _={openDelay:0,closeDelay:0,onOutsideClick:i[10],$$slots:{default:[yP]},$$scope:{ctx:i}};return i[7][0]!==void 0&&(_.open=i[7][0]),a=new Lo({props:_}),Zt.push(()=>An(a,"open",p)),{c(){e=ce("div"),n=ce("p"),r=He(t),s=ge(),q(a.$$.fragment),this.h()},l(b){e=ue(b,"DIV",{class:!0});var $=$e(e);n=ue($,"P",{class:!0});var P=$e(n);r=Ze(P,t),P.forEach(I),s=ve($),Z(a.$$.fragment,$),$.forEach(I),this.h()},h(){se(n,"class","max-sm:text-sm"),se(e,"class","flex justify-between items-center gap-2")},m(b,$){B(b,e,$),ae(e,n),ae(n,r),ae(e,s),G(a,e,null),u=!0},p(b,$){(!u||$[0]&1)&&t!==(t=b[0].name+"")&&Qt(r,t);const P={};$[0]&1|$[1]&4&&(P.$$scope={dirty:$,ctx:b}),!o&&$[0]&128&&(o=!0,P.open=b[7][0],En(()=>o=!1)),a.$set(P)},i(b){u||(T(a.$$.fragment,b),u=!0)},o(b){E(a.$$.fragment,b),u=!1},d(b){b&&I(e),H(a)}}}function wP(i){let e,n;return e=new ji({props:{$$slots:{default:[bP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&129|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function xP(i){let e,n;return e=new xv({props:{$$slots:{default:[OP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&97|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function $P(i){let e,n;return e=new Dr({props:{class:"mb-2",$$slots:{default:[BP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function kP(i){let e;return{c(){e=He("All Pictures")},l(n){e=Ze(n,"All Pictures")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function CP(i){let e,n,t="Pictures:",r,s,a;return s=new yr({props:{size:"sm",$$slots:{default:[kP]},$$scope:{ctx:i}}}),s.$on("click",i[12]),{c(){e=ce("div"),n=ce("p"),n.textContent=t,r=ge(),q(s.$$.fragment),this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);n=ue(u,"P",{"data-svelte-h":!0}),bn(n)!=="svelte-gkyk2r"&&(n.textContent=t),r=ve(u),Z(s.$$.fragment,u),u.forEach(I),this.h()},h(){se(e,"class","flex justify-between items-center grow mr-4")},m(o,u){B(o,e,u),ae(e,n),ae(e,r),G(s,e,null),a=!0},p(o,u){const p={};u[1]&4&&(p.$$scope={dirty:u,ctx:o}),s.$set(p)},i(o){a||(T(s.$$.fragment,o),a=!0)},o(o){E(s.$$.fragment,o),a=!1},d(o){o&&I(e),H(s)}}}function SP(i){let e,n,t;return{c(){e=ce("img"),this.h()},l(r){e=ue(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){fr(e.src,n=i[0].pictures[i[27]*3])||se(e,"src",n),se(e,"alt",t="Picture "+(i[27]*3+1)),se(e,"class","object-contain rounded-xl h-full")},m(r,s){B(r,e,s)},p(r,s){s[0]&1&&!fr(e.src,n=r[0].pictures[r[27]*3])&&se(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+1))&&se(e,"alt",t)},d(r){r&&I(e)}}}function IP(i){let e,n;return e=new Is({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[SP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Q_(i){let e,n,t,r,s;n=new Dr({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[PP]},$$scope:{ctx:i}}});function a(){return i[14](i[27])}return{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);Z(n.$$.fragment,u),u.forEach(I),this.h()},h(){se(e,"class","basis-1/3 relative h-full")},m(o,u){B(o,e,u),G(n,e,null),t=!0,r||(s=mt(e,"click",a),r=!0)},p(o,u){i=o;const p={};u[0]&1|u[1]&4&&(p.$$scope={dirty:u,ctx:i}),n.$set(p)},i(o){t||(T(n.$$.fragment,o),t=!0)},o(o){E(n.$$.fragment,o),t=!1},d(o){o&&I(e),H(n),r=!1,s()}}}function TP(i){let e,n,t;return{c(){e=ce("img"),this.h()},l(r){e=ue(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){fr(e.src,n=i[0].pictures[i[27]*3+1])||se(e,"src",n),se(e,"alt",t="Picture "+(i[27]*3+2)),se(e,"class","object-contain rounded-xl h-full")},m(r,s){B(r,e,s)},p(r,s){s[0]&1&&!fr(e.src,n=r[0].pictures[r[27]*3+1])&&se(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+2))&&se(e,"alt",t)},d(r){r&&I(e)}}}function PP(i){let e,n;return e=new Is({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[TP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function eg(i){let e,n,t,r,s;n=new Dr({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[AP]},$$scope:{ctx:i}}});function a(){return i[15](i[27])}return{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);Z(n.$$.fragment,u),u.forEach(I),this.h()},h(){se(e,"class","basis-1/3 relative h-full")},m(o,u){B(o,e,u),G(n,e,null),t=!0,r||(s=mt(e,"click",a),r=!0)},p(o,u){i=o;const p={};u[0]&1|u[1]&4&&(p.$$scope={dirty:u,ctx:i}),n.$set(p)},i(o){t||(T(n.$$.fragment,o),t=!0)},o(o){E(n.$$.fragment,o),t=!1},d(o){o&&I(e),H(n),r=!1,s()}}}function EP(i){let e,n,t;return{c(){e=ce("img"),this.h()},l(r){e=ue(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){fr(e.src,n=i[0].pictures[i[27]*3+2])||se(e,"src",n),se(e,"alt",t="Picture "+(i[27]*3+3)),se(e,"class","object-contain rounded-xl h-full")},m(r,s){B(r,e,s)},p(r,s){s[0]&1&&!fr(e.src,n=r[0].pictures[r[27]*3+2])&&se(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+3))&&se(e,"alt",t)},d(r){r&&I(e)}}}function AP(i){let e,n;return e=new Is({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[EP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function MP(i){let e,n,t,r,s,a,o,u,p;t=new Dr({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[IP]},$$scope:{ctx:i}}});function _(){return i[13](i[27])}let b=i[0].pictures[i[27]*3+1]!==void 0&&Q_(i),$=i[0].pictures[i[27]*3+2]!==void 0&&eg(i);return{c(){e=ce("div"),n=ce("div"),q(t.$$.fragment),r=ge(),b&&b.c(),s=ge(),$&&$.c(),a=ge(),this.h()},l(P){e=ue(P,"DIV",{class:!0});var L=$e(e);n=ue(L,"DIV",{class:!0});var z=$e(n);Z(t.$$.fragment,z),z.forEach(I),r=ve(L),b&&b.l(L),s=ve(L),$&&$.l(L),L.forEach(I),a=ve(P),this.h()},h(){se(n,"class","basis-1/3 relative h-full"),se(e,"class","flex relative gap-4 h-24")},m(P,L){B(P,e,L),ae(e,n),G(t,n,null),ae(e,r),b&&b.m(e,null),ae(e,s),$&&$.m(e,null),B(P,a,L),o=!0,u||(p=mt(n,"click",_),u=!0)},p(P,L){i=P;const z={};L[0]&1|L[1]&4&&(z.$$scope={dirty:L,ctx:i}),t.$set(z),i[0].pictures[i[27]*3+1]!==void 0?b?(b.p(i,L),L[0]&1&&T(b,1)):(b=Q_(i),b.c(),T(b,1),b.m(e,s)):b&&(vt(),E(b,1,1,()=>{b=null}),yt()),i[0].pictures[i[27]*3+2]!==void 0?$?($.p(i,L),L[0]&1&&T($,1)):($=eg(i),$.c(),T($,1),$.m(e,null)):$&&(vt(),E($,1,1,()=>{$=null}),yt())},i(P){o||(T(t.$$.fragment,P),T(b),T($),o=!0)},o(P){E(t.$$.fragment,P),E(b),E($),o=!1},d(P){P&&(I(e),I(a)),H(t),b&&b.d(),$&&$.d(),u=!1,p()}}}function tg(i,e){let n,t,r;return t=new $T({props:{$$slots:{default:[MP]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&65|a[1]&4&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function DP(i){let e=[],n=new Map,t,r,s=dn(Array(Math.ceil(i[0].pictures.length/3)));const a=o=>o[27];for(let o=0;o<s.length;o+=1){let u=Y_(i,s,o),p=a(u);n.set(p,e[o]=tg(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u[0]&65&&(s=dn(Array(Math.ceil(o[0].pictures.length/3))),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,tg,t,Y_),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function zP(i){let e,n;return e=new bT({props:{$$slots:{default:[DP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function LP(i){let e,n;return e=new FI({props:{class:"w-full",$$slots:{default:[zP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function RP(i){let e,n,t,r;return e=new wv({props:{class:"hover:no-underline transition-colors hover:bg-secondary/70 rounded-md px-3 py-2",$$slots:{default:[CP]},$$scope:{ctx:i}}}),t=new yv({props:{class:"p-0 *:p-0 mt-2",$$slots:{default:[LP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a[0]&32|a[1]&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a[0]&65|a[1]&4&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function OP(i){let e,n;return e=new bv({props:{value:"poi-pictures",class:"border-b-0",$$slots:{default:[RP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&97|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function FP(i){let e,n="No Pictures available for this Point of Interest";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-1ofvg4f"&&(e.textContent=n),this.h()},h(){se(e,"class","text-center")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function BP(i){let e,n;return e=new Is({props:{class:"p-2",$$slots:{default:[FP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function NP(i){let e;return{c(){e=He("Description:")},l(n){e=Ze(n,"Description:")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function VP(i){let e,n=(i[0].description||"No description")+"",t;return{c(){e=ce("p"),t=He(n),this.h()},l(r){e=ue(r,"P",{id:!0,class:!0});var s=$e(e);t=Ze(s,n),s.forEach(I),this.h()},h(){se(e,"id","description"),se(e,"class","text-muted-foreground")},m(r,s){B(r,e,s),ae(e,t)},p(r,s){s[0]&1&&n!==(n=(r[0].description||"No description")+"")&&Qt(t,n)},d(r){r&&I(e)}}}function UP(i){let e,n;return e=new Is({props:{class:"px-3 py-2 max-h-16 overflow-y-auto",$$slots:{default:[VP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function jP(i){let e;return{c(){e=He("Features:")},l(n){e=Ze(n,"Features:")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function qP(i){let e,n=dn(i[0].features),t=[];for(let r=0;r<n.length;r+=1)t[r]=ng(J_(i,n,r));return{c(){e=ce("ul");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=ue(r,"UL",{id:!0,class:!0});var s=$e(e);for(let a=0;a<t.length;a+=1)t[a].l(s);s.forEach(I),this.h()},h(){se(e,"id","features"),se(e,"class","list-disc ml-2")},m(r,s){B(r,e,s);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,s){if(s[0]&1){n=dn(r[0].features);let a;for(a=0;a<n.length;a+=1){const o=J_(r,n,a);t[a]?t[a].p(o,s):(t[a]=ng(o),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&I(e),Hs(t,r)}}}function GP(i){let e,n="No features";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{id:!0,class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-12d3m3b"&&(e.textContent=n),this.h()},h(){se(e,"id","features"),se(e,"class","text-muted-foreground")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function ng(i){let e,n=i[28]+"",t;return{c(){e=ce("li"),t=He(n),this.h()},l(r){e=ue(r,"LI",{class:!0});var s=$e(e);t=Ze(s,n),s.forEach(I),this.h()},h(){se(e,"class","text-muted-foreground")},m(r,s){B(r,e,s),ae(e,t)},p(r,s){s[0]&1&&n!==(n=r[28]+"")&&Qt(t,n)},d(r){r&&I(e)}}}function HP(i){let e;function n(s,a){return s[0].features.length===0?GP:qP}let t=n(i),r=t(i);return{c(){r.c(),e=Ue()},l(s){r.l(s),e=Ue()},m(s,a){r.m(s,a),B(s,e,a)},p(s,a){t===(t=n(s))&&r?r.p(s,a):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&I(e),r.d(s)}}}function ZP(i){let e,n;return e=new Is({props:{class:"px-3 py-2 max-h-16 overflow-y-auto",$$slots:{default:[HP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function WP(i){let e,n,t,r,s,a,o,u,p,_,b;const $=[$P,xP],P=[];function L(z,F){return z[0].pictures.length===0?0:1}return e=L(i),n=P[e]=$[e](i),r=new co({props:{for:"description",$$slots:{default:[NP]},$$scope:{ctx:i}}}),a=new Dr({props:{class:"p-0",$$slots:{default:[UP]},$$scope:{ctx:i}}}),u=new co({props:{for:"features",$$slots:{default:[jP]},$$scope:{ctx:i}}}),_=new Dr({props:{class:"p-0",$$slots:{default:[ZP]},$$scope:{ctx:i}}}),{c(){n.c(),t=ge(),q(r.$$.fragment),s=ge(),q(a.$$.fragment),o=ge(),q(u.$$.fragment),p=ge(),q(_.$$.fragment)},l(z){n.l(z),t=ve(z),Z(r.$$.fragment,z),s=ve(z),Z(a.$$.fragment,z),o=ve(z),Z(u.$$.fragment,z),p=ve(z),Z(_.$$.fragment,z)},m(z,F){P[e].m(z,F),B(z,t,F),G(r,z,F),B(z,s,F),G(a,z,F),B(z,o,F),G(u,z,F),B(z,p,F),G(_,z,F),b=!0},p(z,F){let U=e;e=L(z),e===U?P[e].p(z,F):(vt(),E(P[U],1,1,()=>{P[U]=null}),yt(),n=P[e],n?n.p(z,F):(n=P[e]=$[e](z),n.c()),T(n,1),n.m(t.parentNode,t));const j={};F[1]&4&&(j.$$scope={dirty:F,ctx:z}),r.$set(j);const J={};F[0]&1|F[1]&4&&(J.$$scope={dirty:F,ctx:z}),a.$set(J);const pe={};F[1]&4&&(pe.$$scope={dirty:F,ctx:z}),u.$set(pe);const re={};F[0]&1|F[1]&4&&(re.$$scope={dirty:F,ctx:z}),_.$set(re)},i(z){b||(T(n),T(r.$$.fragment,z),T(a.$$.fragment,z),T(u.$$.fragment,z),T(_.$$.fragment,z),b=!0)},o(z){E(n),E(r.$$.fragment,z),E(a.$$.fragment,z),E(u.$$.fragment,z),E(_.$$.fragment,z),b=!1},d(z){z&&(I(t),I(s),I(o),I(p)),P[e].d(z),H(r,z),H(a,z),H(u,z),H(_,z)}}}function KP(i){let e;return{c(){e=He("Navigate")},l(n){e=Ze(n,"Navigate")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function XP(i){let e;return{c(){e=He("View Details")},l(n){e=Ze(n,"View Details")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function JP(i){let e;return{c(){e=He("Close")},l(n){e=Ze(n,"Close")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function YP(i){let e,n,t,r,s,a;return e=new yr({props:{size:"sm",class:"basis-1/3",href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(i[0].lngLat.lat)},${encodeURIComponent(i[0].lngLat.lng)}`,target:"_blank",$$slots:{default:[KP]},$$scope:{ctx:i}}}),t=new yr({props:{variant:"secondary",size:"sm",class:"basis-1/3",$$slots:{default:[XP]},$$scope:{ctx:i}}}),t.$on("click",i[16]),s=new yr({props:{variant:"secondary",size:"sm",class:"basis-1/3",$$slots:{default:[JP]},$$scope:{ctx:i}}}),s.$on("click",function(){Cd(i[2])&&i[2].apply(this,arguments)}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),q(s.$$.fragment)},l(o){Z(e.$$.fragment,o),n=ve(o),Z(t.$$.fragment,o),r=ve(o),Z(s.$$.fragment,o)},m(o,u){G(e,o,u),B(o,n,u),G(t,o,u),B(o,r,u),G(s,o,u),a=!0},p(o,u){i=o;const p={};u[0]&1&&(p.href=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(i[0].lngLat.lat)},${encodeURIComponent(i[0].lngLat.lng)}`),u[1]&4&&(p.$$scope={dirty:u,ctx:i}),e.$set(p);const _={};u[1]&4&&(_.$$scope={dirty:u,ctx:i}),t.$set(_);const b={};u[1]&4&&(b.$$scope={dirty:u,ctx:i}),s.$set(b)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(I(n),I(r)),H(e,o),H(t,o),H(s,o)}}}function QP(i){let e,n,t,r,s,a;return e=new Zs({props:{class:"p-3",$$slots:{default:[wP]},$$scope:{ctx:i}}}),t=new Is({props:{class:"grow p-3 pt-0 flex flex-col overflow-y-auto gap-2",$$slots:{default:[WP]},$$scope:{ctx:i}}}),s=new SC({props:{class:"flex justify-between p-3 grow-0 gap-2",$$slots:{default:[YP]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),q(s.$$.fragment)},l(o){Z(e.$$.fragment,o),n=ve(o),Z(t.$$.fragment,o),r=ve(o),Z(s.$$.fragment,o)},m(o,u){G(e,o,u),B(o,n,u),G(t,o,u),B(o,r,u),G(s,o,u),a=!0},p(o,u){const p={};u[0]&129|u[1]&4&&(p.$$scope={dirty:u,ctx:o}),e.$set(p);const _={};u[0]&97|u[1]&4&&(_.$$scope={dirty:u,ctx:o}),t.$set(_);const b={};u[0]&21|u[1]&4&&(b.$$scope={dirty:u,ctx:o}),s.$set(b)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(I(n),I(r)),H(e,o),H(t,o),H(s,o)}}}function rg(i){let e,n,t;function r(a){i[18](a)}let s={refreshPOIs:i[3],onClose:i[17],userNickname:i[1]};return i[0]!==void 0&&(s.poi=i[0]),e=new QT({props:s}),Zt.push(()=>An(e,"poi",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,o){const u={};o[0]&8&&(u.refreshPOIs=a[3]),o[0]&16&&(u.onClose=a[17]),o[0]&2&&(u.userNickname=a[1]),!n&&o[0]&1&&(n=!0,u.poi=a[0],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function sg(i){let e,n;return e=new Sa({props:{open:!0,onOpenChange:i[20],$$slots:{default:[lE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&32&&(s.onOpenChange=t[20]),r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function eE(i){let e;return{c(){e=He("All Pictures")},l(n){e=Ze(n,"All Pictures")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function tE(i){let e,n,t;return{c(){e=ce("img"),this.h()},l(r){e=ue(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){fr(e.src,n=i[25])||se(e,"src",n),se(e,"alt",t="Picture "+(i[27]*3+1)),se(e,"class","object-contain rounded-xl h-full")},m(r,s){B(r,e,s)},p(r,s){s[0]&1&&!fr(e.src,n=r[25])&&se(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+1))&&se(e,"alt",t)},d(r){r&&I(e)}}}function nE(i){let e,n;return e=new Is({props:{class:"p-2 flex justify-center items-center relative h-24",$$slots:{default:[tE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function rE(i){let e,n;return e=new No({props:{$$slots:{default:[nE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function sE(i){let e,n,t,r,s,a;n=new Zs({props:{class:"p-2 transition-colors hover:bg-secondary/70 rounded-lg cursor-pointer",$$slots:{default:[rE]},$$scope:{ctx:i}}});function o(){return i[19](i[27])}return{c(){e=ce("div"),q(n.$$.fragment),t=ge()},l(u){e=ue(u,"DIV",{});var p=$e(e);Z(n.$$.fragment,p),p.forEach(I),t=ve(u)},m(u,p){B(u,e,p),G(n,e,null),B(u,t,p),r=!0,s||(a=mt(e,"click",o),s=!0)},p(u,p){i=u;const _={};p[0]&1|p[1]&4&&(_.$$scope={dirty:p,ctx:i}),n.$set(_)},i(u){r||(T(n.$$.fragment,u),r=!0)},o(u){E(n.$$.fragment,u),r=!1},d(u){u&&(I(e),I(t)),H(n),s=!1,a()}}}function ig(i,e){let n,t,r;return t=new Dr({props:{$$slots:{default:[sE]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&65|a[1]&4&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function iE(i){let e,n=[],t=new Map,r,s=dn(i[0].pictures);const a=o=>o[25];for(let o=0;o<s.length;o+=1){let u=X_(i,s,o),p=a(u);t.set(p,n[o]=ig(p,u))}return{c(){e=ce("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);for(let p=0;p<n.length;p+=1)n[p].l(u);u.forEach(I),this.h()},h(){se(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(o,u){B(o,e,u);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);r=!0},p(o,u){u[0]&65&&(s=dn(o[0].pictures),vt(),n=Yr(n,u,a,1,o,s,t,e,ss,ig,null,X_),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(n[u]);r=!0}},o(o){for(let u=0;u<n.length;u+=1)E(n[u]);r=!1},d(o){o&&I(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function oE(i){let e,n,t,r;return e=new Vd({props:{class:"mb-4",$$slots:{default:[eE]},$$scope:{ctx:i}}}),t=new ou({props:{$$slots:{default:[iE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a[1]&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a[0]&65|a[1]&4&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function aE(i){let e,n;return e=new iu({props:{$$slots:{default:[oE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function lE(i){let e,n;return e=new Ca({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[aE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function og(i){let e,n;return e=new Sa({props:{open:!0,onOpenChange:i[21],$$slots:{default:[_E]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&64&&(s.onOpenChange=t[21]),r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function cE(i){let e,n;return{c(){e=ce("img"),this.h()},l(t){e=ue(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){fr(e.src,n=i[0].pictures[i[6]])||se(e,"src",n),se(e,"alt","Fullscreen POI picture"),se(e,"class","object-contain rounded-xl h-full")},m(t,r){B(t,e,r)},p(t,r){r[0]&65&&!fr(e.src,n=t[0].pictures[t[6]])&&se(e,"src",n)},d(t){t&&I(e)}}}function uE(i){let e,n;return e=new Is({props:{class:"p-2 flex justify-center items-center grow relative",$$slots:{default:[cE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function fE(i){let e,n;return e=new No({props:{class:"flex grow",$$slots:{default:[uE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function hE(i){let e,n;return e=new Zs({props:{class:"p-2 flex grow",$$slots:{default:[fE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function dE(i){let e,n;return e=new Dr({props:{class:"flex grow",$$slots:{default:[hE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function pE(i){let e,n;return e=new ou({props:{class:"flex grow",$$slots:{default:[dE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function mE(i){let e,n;return e=new iu({props:{$$slots:{default:[pE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function _E(i){let e,n;return e=new Ca({props:{class:"h-[90%] max-w-[90%] overflow-y-auto p-8",$$slots:{default:[mE]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function gE(i){let e,n,t,r,s,a,o,u,p;n=new Dr({props:{class:"flex flex-col grow relative w-full",$$slots:{default:[QP]},$$scope:{ctx:i}}});let _=i[4]&&rg(i),b=i[5]&&sg(i),$=i[6]!==null&&og(i);return{c(){e=ce("div"),q(n.$$.fragment),s=ge(),_&&_.c(),a=ge(),b&&b.c(),o=ge(),$&&$.c(),u=Ue(),this.h()},l(P){e=ue(P,"DIV",{class:!0});var L=$e(e);Z(n.$$.fragment,L),L.forEach(I),s=ve(P),_&&_.l(P),a=ve(P),b&&b.l(P),o=ve(P),$&&$.l(P),u=Ue(),this.h()},h(){se(e,"class",t="z-20 absolute w-full flex pl-4"+(i[0].pictures.length===0?" h-72":" h-80"))},m(P,L){B(P,e,L),G(n,e,null),B(P,s,L),_&&_.m(P,L),B(P,a,L),b&&b.m(P,L),B(P,o,L),$&&$.m(P,L),B(P,u,L),p=!0},p(P,L){const z={};L[0]&245|L[1]&4&&(z.$$scope={dirty:L,ctx:P}),n.$set(z),(!p||L[0]&1&&t!==(t="z-20 absolute w-full flex pl-4"+(P[0].pictures.length===0?" h-72":" h-80")))&&se(e,"class",t),P[4]?_?(_.p(P,L),L[0]&16&&T(_,1)):(_=rg(P),_.c(),T(_,1),_.m(a.parentNode,a)):_&&(vt(),E(_,1,1,()=>{_=null}),yt()),P[5]?b?(b.p(P,L),L[0]&32&&T(b,1)):(b=sg(P),b.c(),T(b,1),b.m(o.parentNode,o)):b&&(vt(),E(b,1,1,()=>{b=null}),yt()),P[6]!==null?$?($.p(P,L),L[0]&64&&T($,1)):($=og(P),$.c(),T($,1),$.m(u.parentNode,u)):$&&(vt(),E($,1,1,()=>{$=null}),yt())},i(P){p||(T(n.$$.fragment,P),P&&Ui(()=>{p&&(r||(r=Oo(e,Nm,{duration:300,x:200,y:0,opacity:0,easing:Bm},!0)),r.run(1))}),T(_),T(b),T($),p=!0)},o(P){E(n.$$.fragment,P),P&&(r||(r=Oo(e,Nm,{duration:300,x:200,y:0,opacity:0,easing:Bm},!1)),r.run(0)),E(_),E(b),E($),p=!1},d(P){P&&(I(e),I(s),I(a),I(o),I(u)),H(n),P&&r&&r.end(),_&&_.d(P),b&&b.d(P),$&&$.d(P)}}}function vE(i,e,n){let{poi:t}=e,{userNickname:r}=e,{closePOICard:s}=e,{refreshPOIs:a}=e,o=!1,u=!1,p=null,_=[!1];const b=()=>{n(7,_=new Array(_.length).fill(!1))},$=async()=>{const fe=await(await fetch("/api/favourites/single?poi_id="+encodeURIComponent(t.id))).json();typeof fe=="boolean"&&(n(0,t.isFavourite=!t.isFavourite,t),await pi(),n(0,t.isFavourite=fe,t))},P=async()=>{const _e=t.isFavourite;n(0,t.isFavourite=!t.isFavourite,t),await pi(),n(0,t.isFavourite=_e,t)};let L=!1;const z=async _e=>{P(),!L&&(L=!0,_e?await fetch("/api/favourites?poi_id="+encodeURIComponent(t.id),{method:"POST"}):await fetch("/api/favourites?poi_id="+encodeURIComponent(t.id),{method:"DELETE"}),await $(),a(),L=!1)},F=_e=>{b(),_e.target.focus()};function U(_e){i.$$.not_equal(_[0],_e)&&(_[0]=_e,n(7,_))}const j=_e=>{_e.stopPropagation(),n(5,u=!0)},J=_e=>n(6,p=_e*3),pe=_e=>n(6,p=_e*3+1),re=_e=>n(6,p=_e*3+2),te=()=>n(4,o=!0),de=()=>n(4,o=!1);function me(_e){t=_e,n(0,t)}const Y=_e=>n(6,p=_e),we=_e=>_e||(()=>n(5,u=!1))(),Ce=_e=>_e||(()=>n(6,p=null))();return i.$$set=_e=>{"poi"in _e&&n(0,t=_e.poi),"userNickname"in _e&&n(1,r=_e.userNickname),"closePOICard"in _e&&n(2,s=_e.closePOICard),"refreshPOIs"in _e&&n(3,a=_e.refreshPOIs)},[t,r,s,a,o,u,p,_,b,z,F,U,j,J,pe,re,te,de,me,Y,we,Ce]}class yE extends it{constructor(e){super(),ot(this,e,vE,gE,st,{poi:0,userNickname:1,closePOICard:2,refreshPOIs:3},null,[-1,-1])}}const bE="https://api.maptiler.com/maps/outdoor-v2/style.json?key=TXpGz6EEUuCZtdUb72gw",wE="https://api.maptiler.com/maps/streets-v2/style.json?key=TXpGz6EEUuCZtdUb72gw",xE="https://api.maptiler.com/maps/hybrid/style.json?key=TXpGz6EEUuCZtdUb72gw",$E="https://api.maptiler.com/maps/dataviz-light/style.json?key=TXpGz6EEUuCZtdUb72gw",kE="https://api.maptiler.com/maps/dataviz-dark/style.json?key=TXpGz6EEUuCZtdUb72gw",CE="6faR3O8R7ilrB_1rMKJyXHy5DYdgnd1v4hS84oSaPt4",ya=[{value:"outdoor",label:"Outdoor",URI:bE},{value:"street",label:"Street",URI:wE},{value:"satellite",label:"Satellite",URI:xE},{value:"light",label:"Light",URI:$E},{value:"dark",label:"Dark",URI:kE}],ag=1,SE=.9,IE=.8,TE=.17,id=.1,od=.999,PE=.9999,EE=.99,AE=/[\\/_+.#"@[({&]/,ME=/[\\/_+.#"@[({&]/g,DE=/[\s-]/,$v=/[\s-]/g;function vd(i,e,n,t,r,s,a){if(s===e.length)return r===i.length?ag:EE;const o=`${r},${s}`;if(a[o]!==void 0)return a[o];const u=t.charAt(s);let p=n.indexOf(u,r),_=0,b,$,P,L;for(;p>=0;)b=vd(i,e,n,t,p+1,s+1,a),b>_&&(p===r?b*=ag:AE.test(i.charAt(p-1))?(b*=IE,P=i.slice(r,p-1).match(ME),P&&r>0&&(b*=Math.pow(od,P.length))):DE.test(i.charAt(p-1))?(b*=SE,L=i.slice(r,p-1).match($v),L&&r>0&&(b*=Math.pow(od,L.length))):(b*=TE,r>0&&(b*=Math.pow(od,p-r))),i.charAt(p)!==e.charAt(s)&&(b*=PE)),(b<id&&n.charAt(p-1)===t.charAt(s+1)||t.charAt(s+1)===t.charAt(s)&&n.charAt(p-1)!==t.charAt(s))&&($=vd(i,e,n,t,p+1,s+2,a),$*id>b&&(b=$*id)),b>_&&(_=b),p=n.indexOf(u,p+1);return a[o]=_,_}function lg(i){return i.toLowerCase().replace($v," ")}function zE(i,e){return vd(i,e,lg(i),lg(e),0,0,{})}const LE=typeof document<"u";function Do(i){return i instanceof HTMLElement}function RE(i){return i instanceof HTMLInputElement}function jd(i){return i===void 0}function ki(){return Sw(10)}const Oc={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*"};function OE(i,...e){const n={};for(const t of Object.keys(i))e.includes(t)||(n[t]=i[t]);return n}function kv(i){const e={};for(const n in i){const t=i[n];t!==void 0&&(e[n]=t)}return e}function FE(i){const e={};return Object.keys(i).forEach(n=>{const t=n,r=i[t];e[t]=_r(r)}),e}function BE(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}const NE={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Df(i,e,n,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,n,t)),()=>{r.forEach(s=>i.removeEventListener(s,n,t))}}function Cv(...i){return(...e)=>{for(const n of i)typeof n=="function"&&n(...e)}}const Sv="Command",Iv="CommandState",Tv="CommandGroup",VE="[data-cmdk-list-sizer]",Fc="[data-cmdk-group]",cg="[data-cmdk-group-items]",UE="[data-cmdk-group-heading]",Pv="[data-cmdk-item]",ad=`${Pv}:not([aria-disabled="true"])`,Fi="data-value",Ev=(i,e)=>zE(i,e);function Gf(){return gi(Sv)}function Dl(){return gi(Iv)}function jE(i){const e=ki();return Si(Tv,{id:e,alwaysRender:jd(i)?!1:i}),{id:e}}function qE(){const i=gi(Tv);if(i)return i}function GE(i){const e={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};return _r(i?{...e,...kv(i)}:e)}const HE={label:"Command menu",shouldFilter:!0,loop:!1,onValueChange:void 0,value:void 0,filter:Ev,ids:{root:ki(),list:ki(),label:ki(),input:ki()}};function ZE(i){const e={root:ki(),list:ki(),label:ki(),input:ki(),...i.ids},n={...HE,...kv(i)},t=i.state??GE({value:n.value}),r=_r(new Set),s=_r(new Map),a=_r(new Map),o=_r(null),u=FE(OE(n,"value","ids")),{shouldFilter:p,loop:_,filter:b,label:$}=u,P={value:(Ee,je)=>{je!==rs(a).get(Ee)&&(a.update(ke=>(ke.set(Ee,je),ke)),t.update(ke=>(ke.filtered.items.set(Ee,j(je,ke.search)),F(ke,rs(p)))))},item:(Ee,je)=>(r.update(ke=>ke.add(Ee)),je&&s.update(ke=>{var nt;return ke.has(je)?(nt=ke.get(je))==null||nt.add(Ee):ke.set(je,new Set([Ee])),ke}),t.update(ke=>{const nt=rs(p),bt=z(ke,nt),zt=F(bt,nt);if(!zt.value){const At=U();zt.value=At??""}return zt}),()=>{a.update(ke=>(ke.delete(Ee),ke)),r.update(ke=>(ke.delete(Ee),ke)),t.update(ke=>{ke.filtered.items.delete(Ee);const nt=re(),bt=z(ke);return(nt==null?void 0:nt.getAttribute("id"))===Ee&&(bt.value=U()??""),ke})}),group:Ee=>(s.update(je=>(je.has(Ee)||je.set(Ee,new Set),je)),()=>{a.update(je=>(je.delete(Ee),je)),s.update(je=>(je.delete(Ee),je))}),filter:()=>rs(p),label:rs($)||i["aria-label"]||"",commandEl:o,ids:e,updateState:L};function L(Ee,je,ke){const nt=rs(p);t.update(bt=>{var zt;return Object.is(bt[Ee],je)||(bt[Ee]=je,Ee==="search"?(bt=z(bt,nt),bt=F(bt,nt),pi().then(()=>t.update(It=>(It.value=U()??"",It)))):Ee==="value"&&((zt=i.onValueChange)==null||zt.call(i,bt.value),ke||pi().then(()=>J()))),bt})}function z(Ee,je){const ke=je??rs(p),nt=rs(r),bt=rs(a);if(!Ee.search||!ke)return Ee.filtered.count=nt.size,Ee;Ee.filtered.groups=new Set;let zt=0;for(const At of nt){const Et=bt.get(At),It=j(Et,Ee.search);Ee.filtered.items.set(At,It),It>0&&zt++}for(const[At,Et]of rs(s))for(const It of Et){const nn=Ee.filtered.items.get(It);nn&&nn>0&&Ee.filtered.groups.add(At)}return Ee.filtered.count=zt,Ee}function F(Ee,je){const ke=je??rs(p);if(!Ee.search||!ke)return Ee;const nt=Ee.filtered.items,bt=[],zt=rs(s);Ee.filtered.groups.forEach(It=>{const nn=zt.get(It);if(!nn)return;let yn=0;nn.forEach(un=>{const Kt=nt.get(un);jd(Kt)||(yn=Math.max(Kt,yn))}),bt.push([It,yn])});const At=document.getElementById(e.root);if(!At)return Ee;const Et=At.querySelector(VE);return pe(At).sort((It,nn)=>{const yn=It.getAttribute(Fi)??"",un=nn.getAttribute(Fi)??"";return(nt.get(yn)??0)-(nt.get(un)??0)}).forEach(It=>{const nn=It.closest(cg),yn=It.closest(`${cg} > *`);if(Do(nn))if(It.parentElement===nn)nn.appendChild(It);else{if(!Do(yn))return;nn.appendChild(yn)}else{if(!Do(Et))return;if(It.parentElement===Et)Et.appendChild(It);else{if(!Do(yn))return;Et.appendChild(yn)}}}),bt.sort((It,nn)=>nn[1]-It[1]).forEach(It=>{var yn;const nn=At.querySelector(`${Fc}[${Fi}="${It[0]}"]`);Do(nn)&&((yn=nn.parentElement)==null||yn.appendChild(nn))}),Ee}function U(){const Ee=pe().find(ke=>!ke.ariaDisabled);if(!Ee)return;const je=Ee.getAttribute(Fi);if(je)return je}function j(Ee,je){const ke=Ee==null?void 0:Ee.toLowerCase().trim(),nt=rs(b);return nt?ke?nt(ke,je):0:ke?Ev(ke,je):0}function J(){var je;const Ee=re();Ee&&(((je=Ee.parentElement)==null?void 0:je.firstChild)===Ee&&pi().then(()=>{var ke,nt;return(nt=(ke=Ee.closest(Fc))==null?void 0:ke.querySelector(UE))==null?void 0:nt.scrollIntoView({block:"nearest"})}),pi().then(()=>Ee.scrollIntoView({block:"nearest"})))}function pe(Ee){const je=Ee??document.getElementById(e.root);return je?Array.from(je.querySelectorAll(ad)).filter(ke=>Do(ke)):[]}function re(Ee){const je=Ee??document.getElementById(e.root);if(!je)return;const ke=je.querySelector(`${ad}[aria-selected="true"]`);return Do(ke)?ke:null}function te(Ee){const je=document.getElementById(e.root);!je||pe(je)[Ee]}function de(Ee){const je=re(),ke=pe(),nt=ke.findIndex(zt=>zt===je);let bt=ke[nt+Ee];rs(_)&&(nt+Ee<0?bt=ke[ke.length-1]:nt+Ee===ke.length?bt=ke[0]:bt=ke[nt+Ee]),bt&&L("value",bt.getAttribute(Fi)??"")}function me(Ee){const je=re();let ke=je==null?void 0:je.closest(Fc),nt;for(;ke&&!nt;)ke=Ee>0?WE(ke,Fc):KE(ke,Fc),nt=ke==null?void 0:ke.querySelector(ad);nt?L("value",nt.getAttribute(Fi)??""):de(Ee)}function Y(){return te(pe().length-1)}function we(Ee){Ee.preventDefault(),Ee.metaKey?Y():Ee.altKey?me(1):de(1)}function Ce(Ee){Ee.preventDefault(),Ee.metaKey?te(0):Ee.altKey?me(-1):de(-1)}function _e(Ee){switch(Ee.key){case Oc.ARROW_DOWN:we(Ee);break;case Oc.ARROW_UP:Ce(Ee);break;case Oc.HOME:Ee.preventDefault(),te(0);break;case Oc.END:Ee.preventDefault(),Y();break;case Oc.ENTER:{Ee.preventDefault();const je=re();je&&je.click()}}}Si(Sv,P);const fe={subscribe:t.subscribe,update:t.update,set:t.set,updateState:L};return Si(Iv,fe),{state:fe,handleRootKeydown:_e,commandEl:o,ids:e}}function WE(i,e){let n=i.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function KE(i,e){let n=i.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}const XE=i=>i&4,JE=i=>({}),ug=i=>({...i[2]}),YE=i=>i&4,QE=i=>({}),fg=i=>({...i[2]});function e3(i){let e,n,t=(i[0]??"")+"",r,s,a,o,u,p=[i[6]],_={};for(let z=0;z<p.length;z+=1)_=Ie(_,p[z]);const b=i[18].default,$=xt(b,i,i[17],ug);let P=[i[5],i[7]],L={};for(let z=0;z<P.length;z+=1)L=Ie(L,P[z]);return{c(){e=ce("div"),n=ce("label"),r=He(t),s=ge(),$&&$.c(),this.h()},l(z){e=ue(z,"DIV",{});var F=$e(e);n=ue(F,"LABEL",{});var U=$e(n);r=Ze(U,t),U.forEach(I),s=ve(F),$&&$.l(F),F.forEach(I),this.h()},h(){Bt(n,_),Bt(e,L)},m(z,F){B(z,e,F),ae(e,n),ae(n,r),ae(e,s),$&&$.m(e,null),a=!0,o||(u=jn(i[4].call(null,e)),o=!0)},p(z,F){(!a||F&1)&&t!==(t=(z[0]??"")+"")&&_0(r,t,_.contenteditable),$&&$.p&&(!a||F&131076)&&$t($,b,z,z[17],XE(F)||!a?kt(z[17]):Ct(b,z[17],F,JE),ug),Bt(e,L=St(P,[z[5],F&128&&z[7]]))},i(z){a||(T($,z),a=!0)},o(z){E($,z),a=!1},d(z){z&&I(e),$&&$.d(z),o=!1,u()}}}function t3(i){let e;const n=i[18].default,t=xt(n,i,i[17],fg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&131076)&&$t(t,n,r,r[17],YE(s)||!e?kt(r[17]):Ct(n,r[17],s,QE),fg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function n3(i){let e,n,t,r;const s=[t3,e3],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function r3(i,e,n){let t;const r=["label","shouldFilter","filter","value","onValueChange","loop","onKeydown","state","ids","asChild"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{label:p=void 0}=e,{shouldFilter:_=!0}=e,{filter:b=void 0}=e,{value:$=void 0}=e,{onValueChange:P=void 0}=e,{loop:L=void 0}=e,{onKeydown:z=void 0}=e,{state:F=void 0}=e,{ids:U=void 0}=e,{asChild:j=!1}=e;const{commandEl:J,handleRootKeydown:pe,ids:re,state:te}=ZE({label:p,shouldFilter:_,filter:b,value:$,onValueChange:fe=>{fe!==$&&(n(8,$=fe),P==null||P(fe))},loop:L,state:F,ids:U});on(i,te,fe=>n(16,a=fe));function de(fe){fe&&fe!==a.value&&Gr(te,a.value=fe,a)}function me(fe){return J.set(fe),{destroy:Cv(Df(fe,"keydown",Ce))}}const Y={role:"application",id:re.root,"data-cmdk-root":""},we={"data-cmdk-label":"",for:re.input,id:re.label,style:BE(NE)};function Ce(fe){z==null||z(fe),!fe.defaultPrevented&&pe(fe)}const _e={action:me,attrs:Y};return i.$$set=fe=>{e=Ie(Ie({},e),Dt(fe)),n(7,s=at(e,r)),"label"in fe&&n(0,p=fe.label),"shouldFilter"in fe&&n(9,_=fe.shouldFilter),"filter"in fe&&n(10,b=fe.filter),"value"in fe&&n(8,$=fe.value),"onValueChange"in fe&&n(11,P=fe.onValueChange),"loop"in fe&&n(12,L=fe.loop),"onKeydown"in fe&&n(13,z=fe.onKeydown),"state"in fe&&n(14,F=fe.state),"ids"in fe&&n(15,U=fe.ids),"asChild"in fe&&n(1,j=fe.asChild),"$$scope"in fe&&n(17,u=fe.$$scope)},i.$$.update=()=>{i.$$.dirty&256&&de($),i.$$.dirty&65536&&n(2,t={root:_e,label:{attrs:we},stateStore:te,state:a})},[p,j,t,te,me,Y,we,s,$,_,b,P,L,z,F,U,a,u,o]}let Av=class extends it{constructor(e){super(),ot(this,e,r3,n3,st,{label:0,shouldFilter:9,filter:10,value:8,onValueChange:11,loop:12,onKeydown:13,state:14,ids:15,asChild:1})}};function s3(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}s3({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Mv(i,e,n,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,n,t)),()=>{r.forEach(s=>i.removeEventListener(s,n,t))}}const i3={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};ga(void 0,i=>{function e(t){i(t),i(void 0)}return Mv(document,"pointerup",e,{passive:!1,capture:!0})});ga(void 0,i=>{function e(t){t&&t.key===i3.ESCAPE&&i(t),i(void 0)}return Mv(document,"keydown",e,{passive:!1,capture:!0})});function zr(i,e){const n={};return e.forEach(t=>{n[t]={[`data-bits-${i}-${t}`]:""}}),t=>n[t]}function Dv(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}Dv({position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"});Dv({position:"absolute",width:"25px",height:"25px",opacity:"0",margin:"0px",pointerEvents:"none",transform:"translateX(-100%)"});const o3="accordion",a3=["root","content","header","item","trigger"];zr(o3,a3);const l3="alert-dialog",c3=["action","cancel","content","description","overlay","portal","title","trigger"];zr(l3,c3);const u3="avatar",f3=["root","image","fallback"];zr(u3,f3);const h3="checkbox",d3=["root","input","indicator"];zr(h3,d3);const p3="collapsible",m3=["root","content","trigger"];zr(p3,m3);const _3="context-menu",g3=["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];zr(_3,g3);const v3="dialog",y3=["close","content","description","overlay","portal","title","trigger"];zr(v3,y3);const b3="dropdown-menu",w3=["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];zr(b3,w3);const x3="link-preview",$3=["arrow","content","trigger"];zr(x3,$3);const k3="label",C3=["root"];zr(k3,C3);const S3="menubar",I3=["root","arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];zr(S3,I3);const T3="popover",P3=["arrow","close","content","trigger"];zr(T3,P3);const E3="progress",A3=["root"];zr(E3,A3);const M3="radio-group",D3=["root","item","input"];zr(M3,D3);const z3="select",L3=["arrow","content","group","item","input","label","trigger","value"];zr(z3,L3);const R3="separator",O3=["root"];zr(R3,O3);const F3="slider",B3=["root","input","range","thumb","tick"];zr(F3,B3);const N3="switch",V3=["root","input","thumb"];zr(N3,V3);const U3="tabs",j3=["root","content","list","trigger"];zr(U3,j3);const q3="toggle",G3=["root","input"];zr(q3,G3);const H3="toggle-group",Z3=["root","item"];zr(H3,Z3);const W3="tooltip",K3=["arrow","content","trigger"];zr(W3,K3);const X3=i=>({}),hg=i=>({attrs:i[4]});function dg(i){let e,n,t,r;const s=[Y3,J3],a=[];function o(u,p){return u[0]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function J3(i){let e,n;const t=i[8].default,r=xt(t,i,i[7],null);let s=[i[4],i[5]],a={};for(let o=0;o<s.length;o+=1)a=Ie(a,s[o]);return{c(){e=ce("div"),r&&r.c(),this.h()},l(o){e=ue(o,"DIV",{});var u=$e(e);r&&r.l(u),u.forEach(I),this.h()},h(){Bt(e,a)},m(o,u){B(o,e,u),r&&r.m(e,null),n=!0},p(o,u){r&&r.p&&(!n||u&128)&&$t(r,t,o,o[7],n?Ct(t,o[7],u,null):kt(o[7]),null),Bt(e,a=St(s,[o[4],u&32&&o[5]]))},i(o){n||(T(r,o),n=!0)},o(o){E(r,o),n=!1},d(o){o&&I(e),r&&r.d(o)}}}function Y3(i){let e;const n=i[8].default,t=xt(n,i,i[7],hg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,X3):kt(r[7]),hg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Q3(i){let e,n,t=!i[1]&&i[2]&&dg(i);return{c(){t&&t.c(),e=Ue()},l(r){t&&t.l(r),e=Ue()},m(r,s){t&&t.m(r,s),B(r,e,s),n=!0},p(r,[s]){!r[1]&&r[2]?t?(t.p(r,s),s&6&&T(t,1)):(t=dg(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(vt(),E(t,1,1,()=>{t=null}),yt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&I(e),t&&t.d(r)}}}function eA(i,e,n){let t;const r=["asChild"];let s=at(e,r),a,{$$slots:o={},$$scope:u}=e,{asChild:p=!1}=e,_=!0;Sr(()=>{n(1,_=!1)});const b=Dl();on(i,b,P=>n(6,a=P));const $={"data-cmdk-empty":"",role:"presentation"};return i.$$set=P=>{e=Ie(Ie({},e),Dt(P)),n(5,s=at(e,r)),"asChild"in P&&n(0,p=P.asChild),"$$scope"in P&&n(7,u=P.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a.filtered.count===0)},[p,_,t,b,$,s,a,u,o]}class zv extends it{constructor(e){super(),ot(this,e,eA,Q3,st,{asChild:0})}}const tA=i=>({container:i&32,group:i&16}),pg=i=>({container:i[5],group:i[4],heading:{attrs:i[8]}}),nA=i=>({container:i&32,group:i&16}),mg=i=>({container:i[5],group:i[4],heading:{attrs:i[8]}});function rA(i){let e,n,t,r,s,a,o=i[0]&&_g(i);const u=i[14].default,p=xt(u,i,i[13],pg);let _=[i[2]],b={};for(let L=0;L<_.length;L+=1)b=Ie(b,_[L]);let $=[i[3],i[9]],P={};for(let L=0;L<$.length;L+=1)P=Ie(P,$[L]);return{c(){e=ce("div"),o&&o.c(),n=ge(),t=ce("div"),p&&p.c(),this.h()},l(L){e=ue(L,"DIV",{});var z=$e(e);o&&o.l(z),n=ve(z),t=ue(z,"DIV",{});var F=$e(t);p&&p.l(F),F.forEach(I),z.forEach(I),this.h()},h(){Bt(t,b),Bt(e,P)},m(L,z){B(L,e,z),o&&o.m(e,null),ae(e,n),ae(e,t),p&&p.m(t,null),r=!0,s||(a=jn(i[7].call(null,e)),s=!0)},p(L,z){L[0]?o?o.p(L,z):(o=_g(L),o.c(),o.m(e,n)):o&&(o.d(1),o=null),p&&p.p&&(!r||z&8240)&&$t(p,u,L,L[13],r?Ct(u,L[13],z,tA):kt(L[13]),pg),Bt(t,b=St(_,[z&4&&L[2]])),Bt(e,P=St($,[z&8&&L[3],z&512&&L[9]]))},i(L){r||(T(p,L),r=!0)},o(L){E(p,L),r=!1},d(L){L&&I(e),o&&o.d(),p&&p.d(L),s=!1,a()}}}function sA(i){let e;const n=i[14].default,t=xt(n,i,i[13],mg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8240)&&$t(t,n,r,r[13],e?Ct(n,r[13],s,nA):kt(r[13]),mg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function _g(i){let e,n,t=[i[8]],r={};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return{c(){e=ce("div"),n=He(i[0]),this.h()},l(s){e=ue(s,"DIV",{});var a=$e(e);n=Ze(a,i[0]),a.forEach(I),this.h()},h(){Bt(e,r)},m(s,a){B(s,e,a),ae(e,n)},p(s,a){a&1&&_0(n,s[0],r.contenteditable)},d(s){s&&I(e)}}}function iA(i){let e,n,t,r;const s=[sA,rA],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function oA(i,e,n){let t,r,s,a;const o=["heading","value","alwaysRender","asChild"];let u=at(e,o),p,{$$slots:_={},$$scope:b}=e,{heading:$=void 0}=e,{value:P=""}=e,{alwaysRender:L=!1}=e,{asChild:z=!1}=e;const{id:F}=jE(L),U=Gf(),j=Dl(),J=ki(),pe=Vi(j,de=>L||U.filter()===!1||!de.search?!0:de.filtered.groups.has(F));on(i,pe,de=>n(12,p=de)),Sr(()=>U.group(F));function re(de){if(P){U.value(F,P),de.setAttribute(Fi,P);return}$?n(10,P=$.trim().toLowerCase()):de.textContent&&n(10,P=de.textContent.trim().toLowerCase()),U.value(F,P),de.setAttribute(Fi,P)}const te={"data-cmdk-group-heading":"","aria-hidden":!0,id:J};return i.$$set=de=>{e=Ie(Ie({},e),Dt(de)),n(9,u=at(e,o)),"heading"in de&&n(0,$=de.heading),"value"in de&&n(10,P=de.value),"alwaysRender"in de&&n(11,L=de.alwaysRender),"asChild"in de&&n(1,z=de.asChild),"$$scope"in de&&n(13,b=de.$$scope)},i.$$.update=()=>{i.$$.dirty&5120&&n(3,t={"data-cmdk-group":"",role:"presentation",hidden:p?void 0:!0,"data-value":P}),i.$$.dirty&1&&n(2,r={"data-cmdk-group-items":"",role:"group","aria-labelledby":$?J:void 0}),i.$$.dirty&8&&n(5,s={action:re,attrs:t}),i.$$.dirty&4&&n(4,a={attrs:r})},[$,z,r,t,a,s,pe,re,te,u,P,L,p,b,_]}class Lv extends it{constructor(e){super(),ot(this,e,oA,iA,st,{heading:0,value:10,alwaysRender:11,asChild:1})}}function aA(i){return new Promise(e=>setTimeout(e,i))}const lA=i=>({attrs:i&8}),gg=i=>({action:i[6],attrs:i[3]});function cA(i){let e,n,t,r=[i[3],i[7]],s={};for(let a=0;a<r.length;a+=1)s=Ie(s,r[a]);return{c(){e=ce("input"),this.h()},l(a){e=ue(a,"INPUT",{}),this.h()},h(){Bt(e,s)},m(a,o){B(a,e,o),e.autofocus&&e.focus(),i[17](e),Ro(e,i[0]),n||(t=[mt(e,"input",i[18]),jn(i[6].call(null,e)),mt(e,"keydown",i[12]),mt(e,"input",i[13]),mt(e,"focus",i[14]),mt(e,"blur",i[15]),mt(e,"change",i[16])],n=!0)},p(a,o){Bt(e,s=St(r,[o&8&&a[3],o&128&&a[7]])),o&1&&e.value!==a[0]&&Ro(e,a[0])},i:gt,o:gt,d(a){a&&I(e),i[17](null),n=!1,wr(t)}}}function uA(i){let e;const n=i[11].default,t=xt(n,i,i[10],gg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1032)&&$t(t,n,r,r[10],e?Ct(n,r[10],s,lA):kt(r[10]),gg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function fA(i){let e,n,t,r;const s=[uA,cA],a=[];function o(u,p){return u[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function hA(i,e,n){const t=["autofocus","value","asChild","el"];let r=at(e,t),s,a,{$$slots:o={},$$scope:u}=e;const{ids:p,commandEl:_}=Gf(),b=Dl(),$=Vi(b,fe=>fe.search);on(i,$,fe=>n(19,a=fe));const P=Vi(b,fe=>fe.value);let{autofocus:L=void 0}=e,{value:z=a}=e,{asChild:F=!1}=e,{el:U=void 0}=e;const j=Vi([P,_],([fe,Ee])=>{if(!LE)return;const je=Ee==null?void 0:Ee.querySelector(`${Pv}[${Fi}="${fe}"]`);return je==null?void 0:je.getAttribute("id")});on(i,j,fe=>n(9,s=fe));function J(fe){b.updateState("search",fe)}function pe(fe){return L&&aA(10).then(()=>fe.focus()),{destroy:Df(fe,"change",je=>{RE(je.target)&&b.updateState("search",je.target.value)})}}let re;function te(fe){Wt.call(this,i,fe)}function de(fe){Wt.call(this,i,fe)}function me(fe){Wt.call(this,i,fe)}function Y(fe){Wt.call(this,i,fe)}function we(fe){Wt.call(this,i,fe)}function Ce(fe){Zt[fe?"unshift":"push"](()=>{U=fe,n(1,U)})}function _e(){z=this.value,n(0,z)}return i.$$set=fe=>{e=Ie(Ie({},e),Dt(fe)),n(7,r=at(e,t)),"autofocus"in fe&&n(8,L=fe.autofocus),"value"in fe&&n(0,z=fe.value),"asChild"in fe&&n(2,F=fe.asChild),"el"in fe&&n(1,U=fe.el),"$$scope"in fe&&n(10,u=fe.$$scope)},i.$$.update=()=>{i.$$.dirty&1&&J(z),i.$$.dirty&512&&n(3,re={type:"text","data-cmdk-input":"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":p.list,"aria-labelledby":p.label,"aria-activedescendant":s??void 0,id:p.input})},[z,U,F,re,$,j,pe,r,L,s,u,o,te,de,me,Y,we,Ce,_e]}class Rv extends it{constructor(e){super(),ot(this,e,hA,fA,st,{autofocus:8,value:0,asChild:2,el:1})}}const dA=i=>({attrs:i&4}),vg=i=>({action:i[6],attrs:i[2]}),pA=i=>({attrs:i&4}),yg=i=>({action:i[6],attrs:i[2]});function bg(i){let e,n,t,r;const s=[_A,mA],a=[];function o(u,p){return u[0]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function mA(i){let e,n,t,r;const s=i[15].default,a=xt(s,i,i[14],vg);let o=[i[2],i[7]],u={};for(let p=0;p<o.length;p+=1)u=Ie(u,o[p]);return{c(){e=ce("div"),a&&a.c(),this.h()},l(p){e=ue(p,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(I),this.h()},h(){Bt(e,u)},m(p,_){B(p,e,_),a&&a.m(e,null),n=!0,t||(r=jn(i[6].call(null,e)),t=!0)},p(p,_){a&&a.p&&(!n||_&16388)&&$t(a,s,p,p[14],n?Ct(s,p[14],_,dA):kt(p[14]),vg),Bt(e,u=St(o,[_&4&&p[2],_&128&&p[7]]))},i(p){n||(T(a,p),n=!0)},o(p){E(a,p),n=!1},d(p){p&&I(e),a&&a.d(p),t=!1,r()}}}function _A(i){let e;const n=i[15].default,t=xt(n,i,i[14],yg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16388)&&$t(t,n,r,r[14],e?Ct(n,r[14],s,pA):kt(r[14]),yg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function gA(i){let e,n,t=(i[3]||i[1])&&bg(i);return{c(){t&&t.c(),e=Ue()},l(r){t&&t.l(r),e=Ue()},m(r,s){t&&t.m(r,s),B(r,e,s),n=!0},p(r,[s]){r[3]||r[1]?t?(t.p(r,s),s&10&&T(t,1)):(t=bg(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(vt(),E(t,1,1,()=>{t=null}),yt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&I(e),t&&t.d(r)}}}function vA(i,e,n){let t;const r=["disabled","value","onSelect","alwaysRender","asChild","id"];let s=at(e,r),a,o,{$$slots:u={},$$scope:p}=e,{disabled:_=!1}=e,{value:b=""}=e,{onSelect:$=void 0}=e,{alwaysRender:P=!1}=e,{asChild:L=!1}=e,{id:z=ki()}=e;const F=qE(),U=Gf(),j=Dl(),J=P??(F==null?void 0:F.alwaysRender),pe=Vi(j,we=>{if(J||U.filter()===!1||!we.search)return!0;const Ce=we.filtered.items.get(z);return jd(Ce)?!1:Ce>0});on(i,pe,we=>n(3,o=we));let re=!0;Sr(()=>(n(1,re=!1),U.item(z,F==null?void 0:F.id)));const te=Vi(j,we=>we.value===b);on(i,te,we=>n(13,a=we));function de(we){!b&&we.textContent&&n(8,b=we.textContent.trim().toLowerCase()),U.value(z,b),we.setAttribute(Fi,b);const Ce=Cv(Df(we,"pointermove",()=>{_||Y()}),Df(we,"click",()=>{_||me()}));return{destroy(){Ce()}}}function me(){Y(),$==null||$(b)}function Y(){j.updateState("value",b,!0)}return i.$$set=we=>{e=Ie(Ie({},e),Dt(we)),n(7,s=at(e,r)),"disabled"in we&&n(9,_=we.disabled),"value"in we&&n(8,b=we.value),"onSelect"in we&&n(10,$=we.onSelect),"alwaysRender"in we&&n(11,P=we.alwaysRender),"asChild"in we&&n(0,L=we.asChild),"id"in we&&n(12,z=we.id),"$$scope"in we&&n(14,p=we.$$scope)},i.$$.update=()=>{i.$$.dirty&13056&&n(2,t={"aria-disabled":_?!0:void 0,"aria-selected":a?!0:void 0,"data-disabled":_?!0:void 0,"data-selected":a?!0:void 0,"data-cmdk-item":"","data-value":b,role:"option",id:z})},[L,re,t,o,pe,te,de,s,b,_,$,P,z,a,p,u]}class Ov extends it{constructor(e){super(),ot(this,e,vA,gA,st,{disabled:9,value:8,onSelect:10,alwaysRender:11,asChild:0,id:12})}}const yA=i=>({}),wg=i=>({list:i[7],sizer:i[8]});function bA(i){let e,n,t=i[2].search==="",r,s,a,o=xg(i),u=[i[6]],p={};for(let $=0;$<u.length;$+=1)p=Ie(p,u[$]);let _=[i[5],i[9]],b={};for(let $=0;$<_.length;$+=1)b=Ie(b,_[$]);return{c(){e=ce("div"),n=ce("div"),o.c(),this.h()},l($){e=ue($,"DIV",{});var P=$e(e);n=ue(P,"DIV",{});var L=$e(n);o.l(L),L.forEach(I),P.forEach(I),this.h()},h(){Bt(n,p),Bt(e,b)},m($,P){B($,e,P),ae(e,n),o.m(n,null),i[12](e),r=!0,s||(a=jn(i[4].call(null,n)),s=!0)},p($,P){P&4&&st(t,t=$[2].search==="")?(vt(),E(o,1,1,gt),yt(),o=xg($),o.c(),T(o,1),o.m(n,null)):o.p($,P),Bt(e,b=St(_,[$[5],P&512&&$[9]]))},i($){r||(T(o),r=!0)},o($){E(o),r=!1},d($){$&&I(e),o.d($),i[12](null),s=!1,a()}}}function wA(i){let e=i[2].search==="",n,t,r=$g(i);return{c(){r.c(),n=Ue()},l(s){r.l(s),n=Ue()},m(s,a){r.m(s,a),B(s,n,a),t=!0},p(s,a){a&4&&st(e,e=s[2].search==="")?(vt(),E(r,1,1,gt),yt(),r=$g(s),r.c(),T(r,1),r.m(n.parentNode,n)):r.p(s,a)},i(s){t||(T(r),t=!0)},o(s){E(r),t=!1},d(s){s&&I(n),r.d(s)}}}function xg(i){let e;const n=i[11].default,t=xt(n,i,i[10],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&$t(t,n,r,r[10],e?Ct(n,r[10],s,null):kt(r[10]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function $g(i){let e;const n=i[11].default,t=xt(n,i,i[10],wg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&$t(t,n,r,r[10],e?Ct(n,r[10],s,yA):kt(r[10]),wg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function xA(i){let e,n,t,r;const s=[wA,bA],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function $A(i,e,n){const t=["el","asChild"];let r=at(e,t),s,{$$slots:a={},$$scope:o}=e;const{ids:u}=Gf(),p=Dl();on(i,p,j=>n(2,s=j));let{el:_=void 0}=e,{asChild:b=!1}=e;function $(j){let J;const pe=j.closest("[data-cmdk-list]");if(!Do(pe))return;const re=new ResizeObserver(()=>{J=requestAnimationFrame(()=>{const te=j.offsetHeight;pe.style.setProperty("--cmdk-list-height",te.toFixed(1)+"px")})});return re.observe(j),{destroy(){cancelAnimationFrame(J),re.unobserve(j)}}}const P={"data-cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:u.list,"aria-labelledby":u.input},L={"data-cmdk-list-sizer":""},z={attrs:P},F={attrs:L,action:$};function U(j){Zt[j?"unshift":"push"](()=>{_=j,n(0,_)})}return i.$$set=j=>{e=Ie(Ie({},e),Dt(j)),n(9,r=at(e,t)),"el"in j&&n(0,_=j.el),"asChild"in j&&n(1,b=j.asChild),"$$scope"in j&&n(10,o=j.$$scope)},[_,b,s,p,$,P,L,z,F,r,o,a,U]}class Fv extends it{constructor(e){super(),ot(this,e,$A,xA,st,{el:0,asChild:1})}}const kA=i=>({attrs:i&2}),kg=i=>({attrs:i[1]}),CA=i=>({attrs:i&2}),Cg=i=>({attrs:i[1]});function SA(i){let e,n,t;const r=i[5].default,s=xt(r,i,i[4],kg);let a=[i[1],i[2]],o={};for(let u=0;u<a.length;u+=1)o=Ie(o,a[u]);return{c(){e=ce("div"),n=ce("div"),s&&s.c(),this.h()},l(u){e=ue(u,"DIV",{});var p=$e(e);n=ue(p,"DIV",{"aria-hidden":!0});var _=$e(n);s&&s.l(_),_.forEach(I),p.forEach(I),this.h()},h(){se(n,"aria-hidden",""),Bt(e,o)},m(u,p){B(u,e,p),ae(e,n),s&&s.m(n,null),t=!0},p(u,p){s&&s.p&&(!t||p&18)&&$t(s,r,u,u[4],t?Ct(r,u[4],p,kA):kt(u[4]),kg),Bt(e,o=St(a,[p&2&&u[1],p&4&&u[2]]))},i(u){t||(T(s,u),t=!0)},o(u){E(s,u),t=!1},d(u){u&&I(e),s&&s.d(u)}}}function IA(i){let e;const n=i[5].default,t=xt(n,i,i[4],Cg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&18)&&$t(t,n,r,r[4],e?Ct(n,r[4],s,CA):kt(r[4]),Cg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function TA(i){let e,n,t,r;const s=[IA,SA],a=[];function o(u,p){return u[0]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function PA(i,e,n){let t;const r=["progress","asChild"];let s=at(e,r),{$$slots:a={},$$scope:o}=e,{progress:u=0}=e,{asChild:p=!1}=e;return i.$$set=_=>{e=Ie(Ie({},e),Dt(_)),n(2,s=at(e,r)),"progress"in _&&n(3,u=_.progress),"asChild"in _&&n(0,p=_.asChild),"$$scope"in _&&n(4,o=_.$$scope)},i.$$.update=()=>{i.$$.dirty&8&&n(1,t={"data-cmdk-loading":"",role:"progressbar","aria-valuenow":u,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."})},[p,t,s,u,o,a]}class EA extends it{constructor(e){super(),ot(this,e,PA,TA,st,{progress:3,asChild:0})}}const AA=i=>({}),Sg=i=>({attrs:i[4]});function Ig(i){let e,n,t,r;const s=[DA,MA],a=[];function o(u,p){return u[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function MA(i){let e,n=[i[4],i[5]],t={};for(let r=0;r<n.length;r+=1)t=Ie(t,n[r]);return{c(){e=ce("div"),this.h()},l(r){e=ue(r,"DIV",{}),$e(e).forEach(I),this.h()},h(){Bt(e,t)},m(r,s){B(r,e,s)},p(r,s){Bt(e,t=St(n,[r[4],s&32&&r[5]]))},i:gt,o:gt,d(r){r&&I(e)}}}function DA(i){let e;const n=i[7].default,t=xt(n,i,i[6],Sg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&64)&&$t(t,n,r,r[6],e?Ct(n,r[6],s,AA):kt(r[6]),Sg)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function zA(i){let e,n,t=(i[2]||i[0])&&Ig(i);return{c(){t&&t.c(),e=Ue()},l(r){t&&t.l(r),e=Ue()},m(r,s){t&&t.m(r,s),B(r,e,s),n=!0},p(r,[s]){r[2]||r[0]?t?(t.p(r,s),s&5&&T(t,1)):(t=Ig(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(vt(),E(t,1,1,()=>{t=null}),yt())},i(r){n||(T(t),n=!0)},o(r){E(t),n=!1},d(r){r&&I(e),t&&t.d(r)}}}function LA(i,e,n){const t=["alwaysRender","asChild"];let r=at(e,t),s,{$$slots:a={},$$scope:o}=e,{alwaysRender:u=!1}=e,{asChild:p=!1}=e;const _=Dl(),b=Vi(_,P=>!P.search);on(i,b,P=>n(2,s=P));const $={"data-cmdk-separator":"",role:"separator"};return i.$$set=P=>{e=Ie(Ie({},e),Dt(P)),n(5,r=at(e,t)),"alwaysRender"in P&&n(0,u=P.alwaysRender),"asChild"in P&&n(1,p=P.asChild),"$$scope"in P&&n(6,o=P.$$scope)},[u,p,s,b,$,r,o,a]}class RA extends it{constructor(e){super(),ot(this,e,LA,zA,st,{alwaysRender:0,asChild:1})}}function OA(i){let e;const n=i[3].default,t=xt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&$t(t,n,r,r[5],e?Ct(n,r[5],s,null):kt(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function FA(i){let e,n,t;const r=[{class:jt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",i[1])},i[2]];function s(o){i[4](o)}let a={$$slots:{default:[OA]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ie(a,r[o]);return i[0]!==void 0&&(a.value=i[0]),e=new Av({props:a}),Zt.push(()=>An(e,"value",s)),{c(){q(e.$$.fragment)},l(o){Z(e.$$.fragment,o)},m(o,u){G(e,o,u),t=!0},p(o,[u]){const p=u&6?St(r,[u&2&&{class:jt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",o[1])},u&4&&vn(o[2])]):{};u&32&&(p.$$scope={dirty:u,ctx:o}),!n&&u&1&&(n=!0,p.value=o[0],En(()=>n=!1)),e.$set(p)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function BA(i,e,n){const t=["value","class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{value:o=void 0}=e,{class:u=void 0}=e;function p(_){o=_,n(0,o)}return i.$$set=_=>{e=Ie(Ie({},e),Dt(_)),n(2,r=at(e,t)),"value"in _&&n(0,o=_.value),"class"in _&&n(1,u=_.class),"$$scope"in _&&n(5,a=_.$$scope)},[o,u,r,s,p,a]}let qd=class extends it{constructor(e){super(),ot(this,e,BA,FA,st,{value:0,class:1})}};function NA(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function VA(i){let e,n;const t=[{class:jt("py-6 text-center text-sm",i[0])},i[1]];let r={$$slots:{default:[NA]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new zv({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("py-6 text-center text-sm",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function UA(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}let Gd=class extends it{constructor(e){super(),ot(this,e,UA,VA,st,{class:0})}};function jA(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function qA(i){let e,n;const t=[{class:jt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[jA]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Lv({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function GA(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}let Hd=class extends it{constructor(e){super(),ot(this,e,GA,qA,st,{class:0})}};function HA(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function ZA(i){let e,n;const t=[{class:jt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[0])},i[1]];let r={$$slots:{default:[HA]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Ov({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function WA(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}let zl=class extends it{constructor(e){super(),ot(this,e,WA,ZA,st,{class:0})}};function KA(i){let e,n,t,r,s,a;n=new $C({props:{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}});const o=[{class:jt("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]];function u(_){i[3](_)}let p={};for(let _=0;_<o.length;_+=1)p=Ie(p,o[_]);return i[0]!==void 0&&(p.value=i[0]),r=new Rv({props:p}),Zt.push(()=>An(r,"value",u)),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),q(r.$$.fragment),this.h()},l(_){e=ue(_,"DIV",{class:!0,"data-cmdk-input-wrapper":!0});var b=$e(e);Z(n.$$.fragment,b),t=ve(b),Z(r.$$.fragment,b),b.forEach(I),this.h()},h(){se(e,"class","flex items-center border-b px-3"),se(e,"data-cmdk-input-wrapper","")},m(_,b){B(_,e,b),G(n,e,null),ae(e,t),G(r,e,null),a=!0},p(_,[b]){const $=b&6?St(o,[b&2&&{class:jt("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",_[1])},b&4&&vn(_[2])]):{};!s&&b&1&&(s=!0,$.value=_[0],En(()=>s=!1)),r.$set($)},i(_){a||(T(n.$$.fragment,_),T(r.$$.fragment,_),a=!0)},o(_){E(n.$$.fragment,_),E(r.$$.fragment,_),a=!1},d(_){_&&I(e),H(n),H(r)}}}function XA(i,e,n){const t=["class","value"];let r=at(e,t),{class:s=void 0}=e,{value:a=""}=e;function o(u){a=u,n(0,a)}return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(2,r=at(e,t)),"class"in u&&n(1,s=u.class),"value"in u&&n(0,a=u.value)},[a,s,r,o]}let Zd=class extends it{constructor(e){super(),ot(this,e,XA,KA,st,{class:1,value:0})}};function JA(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function YA(i){let e,n;const t=[{class:jt("max-h-[300px] overflow-y-auto overflow-x-hidden",i[0])},i[1]];let r={$$slots:{default:[JA]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Fv({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("max-h-[300px] overflow-y-auto overflow-x-hidden",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function QA(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}let Wd=class extends it{constructor(e){super(),ot(this,e,QA,YA,st,{class:0})}};function e4(i){let e,n;const t=[{class:jt("-mx-1 h-px bg-border",i[0])},i[1]];let r={};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new RA({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("-mx-1 h-px bg-border",s[0])},a&2&&vn(s[1])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function t4(i,e,n){const t=["class"];let r=at(e,t),{class:s=void 0}=e;return i.$$set=a=>{e=Ie(Ie({},e),Dt(a)),n(1,r=at(e,t)),"class"in a&&n(0,s=a.class)},[s,r]}class Kd extends it{constructor(e){super(),ot(this,e,t4,e4,st,{class:0})}}function n4(i){let e;const n=i[6].default,t=xt(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&$t(t,n,r,r[7],e?Ct(n,r[7],s,null):kt(r[7]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function r4(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{align:i[3]},{sideOffset:i[4]},i[5],{class:jt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",i[0])}];let r={$$slots:{default:[n4]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Iw({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&63?St(t,[a&2&&{transition:s[1]},a&4&&{transitionConfig:s[2]},a&8&&{align:s[3]},a&16&&{sideOffset:s[4]},a&32&&vn(s[5]),a&1&&{class:jt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",s[0])}]):{};a&128&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function s4(i,e,n){const t=["class","transition","transitionConfig","align","sideOffset"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{transition:u=Id}=e,{transitionConfig:p=void 0}=e,{align:_="center"}=e,{sideOffset:b=4}=e;return i.$$set=$=>{e=Ie(Ie({},e),Dt($)),n(5,r=at(e,t)),"class"in $&&n(0,o=$.class),"transition"in $&&n(1,u=$.transition),"transitionConfig"in $&&n(2,p=$.transitionConfig),"align"in $&&n(3,_=$.align),"sideOffset"in $&&n(4,b=$.sideOffset),"$$scope"in $&&n(7,a=$.$$scope)},[o,u,p,_,b,r,s,a]}class Xd extends it{constructor(e){super(),ot(this,e,s4,r4,st,{class:0,transition:1,transitionConfig:2,align:3,sideOffset:4})}}const Jd=Tw,Yd=Pw;function ld(i){let e,n,t;const r=i[5].default,s=xt(r,i,i[4],null);let a=[{href:i[1]},{class:n=jt(Tg({variant:i[2],className:i[0]}))},i[3]],o={};for(let u=0;u<a.length;u+=1)o=Ie(o,a[u]);return{c(){e=ce(i[1]?"a":"span"),s&&s.c(),this.h()},l(u){e=ue(u,((i[1]?"a":"span")||"null").toUpperCase(),{href:!0,class:!0});var p=$e(e);s&&s.l(p),p.forEach(I),this.h()},h(){kf(i[1]?"a":"span")(e,o)},m(u,p){B(u,e,p),s&&s.m(e,null),t=!0},p(u,p){s&&s.p&&(!t||p&16)&&$t(s,r,u,u[4],t?Ct(r,u[4],p,null):kt(u[4]),null),kf(u[1]?"a":"span")(e,o=St(a,[(!t||p&2)&&{href:u[1]},(!t||p&5&&n!==(n=jt(Tg({variant:u[2],className:u[0]}))))&&{class:n},p&8&&u[3]]))},i(u){t||(T(s,u),t=!0)},o(u){E(s,u),t=!1},d(u){u&&I(e),s&&s.d(u)}}}function i4(i){let e=i[1]?"a":"span",n,t,r=(i[1]?"a":"span")&&ld(i);return{c(){r&&r.c(),n=Ue()},l(s){r&&r.l(s),n=Ue()},m(s,a){r&&r.m(s,a),B(s,n,a),t=!0},p(s,[a]){s[1],e?st(e,s[1]?"a":"span")?(r.d(1),r=ld(s),e=s[1]?"a":"span",r.c(),r.m(n.parentNode,n)):r.p(s,a):(r=ld(s),e=s[1]?"a":"span",r.c(),r.m(n.parentNode,n))},i(s){t||(T(r,s),t=!0)},o(s){E(r,s),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function o4(i,e,n){const t=["class","href","variant"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{href:u=void 0}=e,{variant:p="default"}=e;return i.$$set=_=>{e=Ie(Ie({},e),Dt(_)),n(3,r=at(e,t)),"class"in _&&n(0,o=_.class),"href"in _&&n(1,u=_.href),"variant"in _&&n(2,p=_.variant),"$$scope"in _&&n(4,a=_.$$scope)},[o,u,p,r,a,s]}class fo extends it{constructor(e){super(),ot(this,e,o4,i4,st,{class:0,href:1,variant:2})}}const Tg=b0({base:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 select-none",variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pg(i,e,n){const t=i.slice();return t[10]=e[n],t}function Eg(i,e,n){const t=i.slice();return t[10]=e[n],t}function Ag(i){let e,n,t,r,s,a,o,u;e=new qi({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new fo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[a4]},$$scope:{ctx:i}}});const p=[c4,l4],_=[];function b($,P){return $[0].length>2?0:1}return a=b(i),o=_[a]=p[a](i),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),s=ce("div"),o.c(),this.h()},l($){Z(e.$$.fragment,$),n=ve($),Z(t.$$.fragment,$),r=ve($),s=ue($,"DIV",{class:!0});var P=$e(s);o.l(P),P.forEach(I),this.h()},h(){se(s,"class","hidden space-x-1 lg:flex")},m($,P){G(e,$,P),B($,n,P),G(t,$,P),B($,r,P),B($,s,P),_[a].m(s,null),u=!0},p($,P){const L={};P&65537&&(L.$$scope={dirty:P,ctx:$}),t.$set(L);let z=a;a=b($),a===z?_[a].p($,P):(vt(),E(_[z],1,1,()=>{_[z]=null}),yt(),o=_[a],o?o.p($,P):(o=_[a]=p[a]($),o.c()),T(o,1),o.m(s,null))},i($){u||(T(e.$$.fragment,$),T(t.$$.fragment,$),T(o),u=!0)},o($){E(e.$$.fragment,$),E(t.$$.fragment,$),E(o),u=!1},d($){$&&(I(n),I(r),I(s)),H(e,$),H(t,$),_[a].d()}}}function a4(i){let e=i[0].length+"",n;return{c(){n=He(e)},l(t){n=Ze(t,e)},m(t,r){B(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&Qt(n,e)},d(t){t&&I(n)}}}function l4(i){let e,n,t=dn(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=Mg(Eg(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ue()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ue()},m(a,o){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,o);B(a,e,o),n=!0},p(a,o){if(o&1){t=dn(a[0]);let u;for(u=0;u<t.length;u+=1){const p=Eg(a,t,u);r[u]?(r[u].p(p,o),T(r[u],1)):(r[u]=Mg(p),r[u].c(),T(r[u],1),r[u].m(e.parentNode,e))}for(vt(),u=t.length;u<r.length;u+=1)s(u);yt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&I(e),Hs(r,a)}}}function c4(i){let e,n;return e=new fo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[f4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function u4(i){let e=i[10]+"",n,t;return{c(){n=He(e),t=ge()},l(r){n=Ze(r,e),t=ve(r)},m(r,s){B(r,n,s),B(r,t,s)},p(r,s){s&1&&e!==(e=r[10]+"")&&Qt(n,e)},d(r){r&&(I(n),I(t))}}}function Mg(i){let e,n;return e=new fo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[u4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function f4(i){let e=i[0].length+"",n,t;return{c(){n=He(e),t=He(" Selected")},l(r){n=Ze(r,e),t=Ze(r," Selected")},m(r,s){B(r,n,s),B(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&Qt(n,e)},d(r){r&&(I(n),I(t))}}}function h4(i){let e,n,t,r,s,a,o;e=new Pd({props:{class:"mr-2 h-5 w-5"}});let u=i[0].length>0&&Ag(i);return{c(){q(e.$$.fragment),n=ge(),t=ce("p"),r=He(i[1]),s=ge(),u&&u.c(),a=Ue(),this.h()},l(p){Z(e.$$.fragment,p),n=ve(p),t=ue(p,"P",{class:!0});var _=$e(t);r=Ze(_,i[1]),_.forEach(I),s=ve(p),u&&u.l(p),a=Ue(),this.h()},h(){se(t,"class","text-sm")},m(p,_){G(e,p,_),B(p,n,_),B(p,t,_),ae(t,r),B(p,s,_),u&&u.m(p,_),B(p,a,_),o=!0},p(p,_){(!o||_&2)&&Qt(r,p[1]),p[0].length>0?u?(u.p(p,_),_&1&&T(u,1)):(u=Ag(p),u.c(),T(u,1),u.m(a.parentNode,a)):u&&(vt(),E(u,1,1,()=>{u=null}),yt())},i(p){o||(T(e.$$.fragment,p),T(u),o=!0)},o(p){E(e.$$.fragment,p),E(u),o=!1},d(p){p&&(I(n),I(t),I(s),I(a)),H(e,p),u&&u.d(p)}}}function d4(i){let e,n;return e=new Jr({props:{builders:[i[13]],variant:"outline",class:"h-10 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[h4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&8192&&(s.builders=[t[13]]),r&65539&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function p4(i){let e;return{c(){e=He("No results found.")},l(n){e=Ze(n,"No results found.")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function Dg(i){let e,n=i[3][i[10]]+"",t;return{c(){e=ce("span"),t=He(n),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=$e(e);t=Ze(s,n),s.forEach(I),this.h()},h(){se(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){B(r,e,s),ae(e,t)},p(r,s){s&12&&n!==(n=r[3][r[10]]+"")&&Qt(t,n)},d(r){r&&I(e)}}}function m4(i){let e,n,t,r,s,a=i[10]+"",o,u,p,_;n=new Ed({props:{className:jt("h-4 w-4")}});let b=i[3][i[10]]&&Dg(i);return{c(){e=ce("div"),q(n.$$.fragment),r=ge(),s=ce("span"),o=He(a),u=ge(),b&&b.c(),p=ge(),this.h()},l($){e=ue($,"DIV",{class:!0});var P=$e(e);Z(n.$$.fragment,P),P.forEach(I),r=ve($),s=ue($,"SPAN",{});var L=$e(s);o=Ze(L,a),L.forEach(I),u=ve($),b&&b.l($),p=ve($),this.h()},h(){se(e,"class",t=jt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[10])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m($,P){B($,e,P),G(n,e,null),B($,r,P),B($,s,P),ae(s,o),B($,u,P),b&&b.m($,P),B($,p,P),_=!0},p($,P){(!_||P&5&&t!==(t=jt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",$[0].includes($[10])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&se(e,"class",t),(!_||P&4)&&a!==(a=$[10]+"")&&Qt(o,a),$[3][$[10]]?b?b.p($,P):(b=Dg($),b.c(),b.m(p.parentNode,p)):b&&(b.d(1),b=null)},i($){_||(T(n.$$.fragment,$),_=!0)},o($){E(n.$$.fragment,$),_=!1},d($){$&&(I(e),I(r),I(s),I(u),I(p)),H(n),b&&b.d($)}}}function zg(i){let e,n;return e=new zl({props:{class:"cursor-pointer",value:i[10],onSelect:i[7],$$slots:{default:[m4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[10]),r&65549&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function _4(i){let e,n,t=dn(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=zg(Pg(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ue()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ue()},m(a,o){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,o);B(a,e,o),n=!0},p(a,o){if(o&77){t=dn(a[2]);let u;for(u=0;u<t.length;u+=1){const p=Pg(a,t,u);r[u]?(r[u].p(p,o),T(r[u],1)):(r[u]=zg(p),r[u].c(),T(r[u],1),r[u].m(e.parentNode,e))}for(vt(),u=t.length;u<r.length;u+=1)s(u);yt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&I(e),Hs(r,a)}}}function Lg(i){let e,n,t,r;return e=new Kd({}),t=new zl({props:{class:"justify-center text-center cursor-pointer",onSelect:i[8],$$slots:{default:[g4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.onSelect=s[8]),a&65536&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function g4(i){let e;return{c(){e=He("Clear Filter")},l(n){e=Ze(n,"Clear Filter")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function v4(i){let e,n,t,r,s,a;e=new Gd({props:{$$slots:{default:[p4]},$$scope:{ctx:i}}}),t=new Hd({props:{$$slots:{default:[_4]},$$scope:{ctx:i}}});let o=i[0].length>0&&Lg(i);return{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),o&&o.c(),s=Ue()},l(u){Z(e.$$.fragment,u),n=ve(u),Z(t.$$.fragment,u),r=ve(u),o&&o.l(u),s=Ue()},m(u,p){G(e,u,p),B(u,n,p),G(t,u,p),B(u,r,p),o&&o.m(u,p),B(u,s,p),a=!0},p(u,p){const _={};p&65536&&(_.$$scope={dirty:p,ctx:u}),e.$set(_);const b={};p&65549&&(b.$$scope={dirty:p,ctx:u}),t.$set(b),u[0].length>0?o?(o.p(u,p),p&1&&T(o,1)):(o=Lg(u),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(vt(),E(o,1,1,()=>{o=null}),yt())},i(u){a||(T(e.$$.fragment,u),T(t.$$.fragment,u),T(o),a=!0)},o(u){E(e.$$.fragment,u),E(t.$$.fragment,u),E(o),a=!1},d(u){u&&(I(n),I(r),I(s)),H(e,u),H(t,u),o&&o.d(u)}}}function y4(i){let e,n,t,r;return e=new Zd({props:{placeholder:i[1]}}),t=new Wd({props:{$$slots:{default:[v4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.placeholder=s[1]),e.$set(o);const u={};a&65549&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function b4(i){let e,n;return e=new qd({props:{loop:!0,$$slots:{default:[y4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&65551&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function w4(i){let e,n,t,r;return e=new Yd({props:{asChild:!0,$$slots:{default:[d4,({builder:s})=>({13:s}),({builder:s})=>s?8192:0]},$$scope:{ctx:i}}}),t=new Xd({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[b4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&73731&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&65551&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function x4(i){let e,n,t;function r(a){i[9](a)}let s={disableFocusTrap:!0,onOutsideClick:i[4],$$slots:{default:[w4]},$$scope:{ctx:i}};return i[5]!==void 0&&(s.open=i[5]),e=new Jd({props:s}),Zt.push(()=>An(e,"open",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,[o]){const u={};o&65551&&(u.$$scope={dirty:o,ctx:a}),!n&&o&32&&(n=!0,u.open=a[5],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function $4(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{poiFeatureOptions:s}=e,{counts:a={}}=e,o=!1;const u=()=>n(5,o=!1);function p(P){Array.isArray(t)&&t.includes(P)?n(0,t=t.filter(L=>L!==P)):n(0,t=[...Array.isArray(t)?t:[],P])}const _=P=>{p(P)},b=()=>{n(0,t=[])};function $(P){o=P,n(5,o)}return i.$$set=P=>{"filterValues"in P&&n(0,t=P.filterValues),"title"in P&&n(1,r=P.title),"poiFeatureOptions"in P&&n(2,s=P.poiFeatureOptions),"counts"in P&&n(3,a=P.counts)},[t,r,s,a,u,o,p,_,b,$]}class k4 extends it{constructor(e){super(),ot(this,e,$4,x4,st,{filterValues:0,title:1,poiFeatureOptions:2,counts:3,forceClosePopover:4})}get forceClosePopover(){return this.$$.ctx[4]}}function C4(i){let e;const n=i[3].default,t=xt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&$t(t,n,r,r[5],e?Ct(n,r[5],s,null):kt(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function S4(i){let e,n,t;const r=[{class:jt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",i[1])},i[2]];function s(o){i[4](o)}let a={$$slots:{default:[C4]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ie(a,r[o]);return i[0]!==void 0&&(a.value=i[0]),e=new Av({props:a}),Zt.push(()=>An(e,"value",s)),{c(){q(e.$$.fragment)},l(o){Z(e.$$.fragment,o)},m(o,u){G(e,o,u),t=!0},p(o,[u]){const p=u&6?St(r,[u&2&&{class:jt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",o[1])},u&4&&vn(o[2])]):{};u&32&&(p.$$scope={dirty:u,ctx:o}),!n&&u&1&&(n=!0,p.value=o[0],En(()=>n=!1)),e.$set(p)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function I4(i,e,n){const t=["value","class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{value:o=void 0}=e,{class:u=void 0}=e;function p(_){o=_,n(0,o)}return i.$$set=_=>{e=Ie(Ie({},e),Dt(_)),n(2,r=at(e,t)),"value"in _&&n(0,o=_.value),"class"in _&&n(1,u=_.class),"$$scope"in _&&n(5,a=_.$$scope)},[o,u,r,s,p,a]}class Bv extends it{constructor(e){super(),ot(this,e,I4,S4,st,{value:0,class:1})}}function T4(i){let e;const n=i[3].default,t=xt(n,i,i[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&64)&&$t(t,n,r,r[6],e?Ct(n,r[6],s,null):kt(r[6]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function P4(i){let e,n,t;const r=[{class:"[&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground [&_[data-cmdk-group]:not([hidden])_~[data-cmdk-group]]:pt-0 [&_[data-cmdk-group]]:px-2 [&_[data-cmdk-input-wrapper]_svg]:h-5 [&_[data-cmdk-input-wrapper]_svg]:w-5 [&_[data-cmdk-input]]:h-12 [&_[data-cmdk-item]]:px-2 [&_[data-cmdk-item]]:py-3 [&_[data-cmdk-item]_svg]:h-5 [&_[data-cmdk-item]_svg]:w-5"},i[2]];function s(o){i[4](o)}let a={$$slots:{default:[T4]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ie(a,r[o]);return i[1]!==void 0&&(a.value=i[1]),e=new Bv({props:a}),Zt.push(()=>An(e,"value",s)),{c(){q(e.$$.fragment)},l(o){Z(e.$$.fragment,o)},m(o,u){G(e,o,u),t=!0},p(o,u){const p=u&4?St(r,[r[0],vn(o[2])]):{};u&64&&(p.$$scope={dirty:u,ctx:o}),!n&&u&2&&(n=!0,p.value=o[1],En(()=>n=!1)),e.$set(p)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function E4(i){let e,n;return e=new Ca({props:{class:"overflow-hidden p-0 shadow-lg",$$slots:{default:[P4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&70&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function A4(i){let e,n,t;const r=[i[2]];function s(o){i[5](o)}let a={$$slots:{default:[E4]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ie(a,r[o]);return i[0]!==void 0&&(a.open=i[0]),e=new Sa({props:a}),Zt.push(()=>An(e,"open",s)),{c(){q(e.$$.fragment)},l(o){Z(e.$$.fragment,o)},m(o,u){G(e,o,u),t=!0},p(o,[u]){const p=u&4?St(r,[vn(o[2])]):{};u&70&&(p.$$scope={dirty:u,ctx:o}),!n&&u&1&&(n=!0,p.open=o[0],En(()=>n=!1)),e.$set(p)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function M4(i,e,n){const t=["open","value"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{open:o=!1}=e,{value:u=void 0}=e;function p(b){u=b,n(1,u)}function _(b){o=b,n(0,o)}return i.$$set=b=>{e=Ie(Ie({},e),Dt(b)),n(2,r=at(e,t)),"open"in b&&n(0,o=b.open),"value"in b&&n(1,u=b.value),"$$scope"in b&&n(6,a=b.$$scope)},[o,u,r,s,p,_,a]}class D4 extends it{constructor(e){super(),ot(this,e,M4,A4,st,{open:0,value:1})}}function z4(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function L4(i){let e,n;const t=[{class:jt("py-6 text-center text-sm",i[0])},i[1]];let r={$$slots:{default:[z4]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new zv({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("py-6 text-center text-sm",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function R4(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}class Nv extends it{constructor(e){super(),ot(this,e,R4,L4,st,{class:0})}}function O4(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function F4(i){let e,n;const t=[{class:jt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[O4]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Lv({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function B4(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}class Kc extends it{constructor(e){super(),ot(this,e,B4,F4,st,{class:0})}}function N4(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function V4(i){let e,n;const t=[{class:jt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[0])},i[1]];let r={$$slots:{default:[N4]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Ov({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function U4(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}class au extends it{constructor(e){super(),ot(this,e,U4,V4,st,{class:0})}}function j4(i){let e,n,t,r,s,a;n=new nv({props:{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}});const o=[{class:jt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]];function u(_){i[3](_)}let p={};for(let _=0;_<o.length;_+=1)p=Ie(p,o[_]);return i[0]!==void 0&&(p.value=i[0]),r=new Rv({props:p}),Zt.push(()=>An(r,"value",u)),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),q(r.$$.fragment),this.h()},l(_){e=ue(_,"DIV",{class:!0,"data-cmdk-input-wrapper":!0});var b=$e(e);Z(n.$$.fragment,b),t=ve(b),Z(r.$$.fragment,b),b.forEach(I),this.h()},h(){se(e,"class","flex items-center border-b px-2"),se(e,"data-cmdk-input-wrapper","")},m(_,b){B(_,e,b),G(n,e,null),ae(e,t),G(r,e,null),a=!0},p(_,[b]){const $=b&6?St(o,[b&2&&{class:jt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",_[1])},b&4&&vn(_[2])]):{};!s&&b&1&&(s=!0,$.value=_[0],En(()=>s=!1)),r.$set($)},i(_){a||(T(n.$$.fragment,_),T(r.$$.fragment,_),a=!0)},o(_){E(n.$$.fragment,_),E(r.$$.fragment,_),a=!1},d(_){_&&I(e),H(n),H(r)}}}function q4(i,e,n){const t=["class","value"];let r=at(e,t),{class:s=void 0}=e,{value:a=""}=e;function o(u){a=u,n(0,a)}return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(2,r=at(e,t)),"class"in u&&n(1,s=u.class),"value"in u&&n(0,a=u.value)},[a,s,r,o]}class Vv extends it{constructor(e){super(),ot(this,e,q4,j4,st,{class:1,value:0})}}function G4(i){let e;const n=i[2].default,t=xt(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&$t(t,n,r,r[3],e?Ct(n,r[3],s,null):kt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function H4(i){let e,n;const t=[{class:jt("max-h-[300px] overflow-y-auto overflow-x-hidden",i[0])},i[1]];let r={$$slots:{default:[G4]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ie(r,t[s]);return e=new Fv({props:r}),{c(){q(e.$$.fragment)},l(s){Z(e.$$.fragment,s)},m(s,a){G(e,s,a),n=!0},p(s,[a]){const o=a&3?St(t,[a&1&&{class:jt("max-h-[300px] overflow-y-auto overflow-x-hidden",s[0])},a&2&&vn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){E(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function Z4(i,e,n){const t=["class"];let r=at(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=u=>{e=Ie(Ie({},e),Dt(u)),n(1,r=at(e,t)),"class"in u&&n(0,o=u.class),"$$scope"in u&&n(3,a=u.$$scope)},[o,r,s,a]}class W4 extends it{constructor(e){super(),ot(this,e,Z4,H4,st,{class:0})}}const K4=EA;function Rg(i,e,n){const t=i.slice();return t[8]=e[n],t}function X4(i){let e,n,t,r,s=i[0].label+"",a,o,u,p;return n=new _2({props:{class:"h-5 w-5"}}),u=new Ww({props:{class:"ml-2 h-4 w-4 shrink-0 opacity-50"}}),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),r=ce("p"),a=He(s),o=ge(),q(u.$$.fragment),this.h()},l(_){e=ue(_,"DIV",{class:!0});var b=$e(e);Z(n.$$.fragment,b),t=ve(b),r=ue(b,"P",{class:!0});var $=$e(r);a=Ze($,s),$.forEach(I),b.forEach(I),o=ve(_),Z(u.$$.fragment,_),this.h()},h(){se(r,"class","max-lg:hidden text-sm"),se(e,"class","flex gap-2")},m(_,b){B(_,e,b),G(n,e,null),ae(e,t),ae(e,r),ae(r,a),B(_,o,b),G(u,_,b),p=!0},p(_,b){(!p||b&1)&&s!==(s=_[0].label+"")&&Qt(a,s)},i(_){p||(T(n.$$.fragment,_),T(u.$$.fragment,_),p=!0)},o(_){E(n.$$.fragment,_),E(u.$$.fragment,_),p=!1},d(_){_&&(I(e),I(o)),H(n),H(u,_)}}}function J4(i){let e,n;return e=new yr({props:{builders:[i[11]],variant:"outline",role:"combobox","aria-expanded":i[3],"aria-label":"Change Map Layer",$$slots:{default:[X4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&2048&&(s.builders=[t[11]]),r&8&&(s["aria-expanded"]=t[3]),r&4097&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Y4(i){let e;return{c(){e=He("No map layer found.")},l(n){e=Ze(n,"No map layer found.")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function Q4(i){let e,n,t=i[8].label+"",r,s,a;return e=new Td({props:{class:jt("mr-2 h-4 w-4",i[2]!==i[8].value&&"text-transparent")}}),{c(){q(e.$$.fragment),n=ge(),r=He(t),s=ge()},l(o){Z(e.$$.fragment,o),n=ve(o),r=Ze(o,t),s=ve(o)},m(o,u){G(e,o,u),B(o,n,u),B(o,r,u),B(o,s,u),a=!0},p(o,u){const p={};u&4&&(p.class=jt("mr-2 h-4 w-4",o[2]!==o[8].value&&"text-transparent")),e.$set(p)},i(o){a||(T(e.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),a=!1},d(o){o&&(I(n),I(r),I(s)),H(e,o)}}}function Og(i){let e,n;function t(...r){return i[5](i[7],...r)}return e=new au({props:{class:"cursor-pointer",value:i[8].value,onSelect:t,$$slots:{default:[Q4]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(r){Z(e.$$.fragment,r)},m(r,s){G(e,r,s),n=!0},p(r,s){i=r;const a={};s&132&&(a.onSelect=t),s&4100&&(a.$$scope={dirty:s,ctx:i}),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){E(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function e5(i){let e,n,t=dn(ya),r=[];for(let a=0;a<t.length;a+=1)r[a]=Og(Rg(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ue()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ue()},m(a,o){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,o);B(a,e,o),n=!0},p(a,o){if(o&148){t=dn(ya);let u;for(u=0;u<t.length;u+=1){const p=Rg(a,t,u);r[u]?(r[u].p(p,o),T(r[u],1)):(r[u]=Og(p),r[u].c(),T(r[u],1),r[u].m(e.parentNode,e))}for(vt(),u=t.length;u<r.length;u+=1)s(u);yt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&I(e),Hs(r,a)}}}function t5(i){let e,n,t,r,s,a;return e=new Vv({props:{placeholder:"Search map layers"}}),t=new Nv({props:{$$slots:{default:[Y4]},$$scope:{ctx:i}}}),s=new Kc({props:{$$slots:{default:[e5]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),q(s.$$.fragment)},l(o){Z(e.$$.fragment,o),n=ve(o),Z(t.$$.fragment,o),r=ve(o),Z(s.$$.fragment,o)},m(o,u){G(e,o,u),B(o,n,u),G(t,o,u),B(o,r,u),G(s,o,u),a=!0},p(o,u){const p={};u&4096&&(p.$$scope={dirty:u,ctx:o}),t.$set(p);const _={};u&4228&&(_.$$scope={dirty:u,ctx:o}),s.$set(_)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(I(n),I(r)),H(e,o),H(t,o),H(s,o)}}}function n5(i){let e,n;return e=new Bv({props:{$$slots:{default:[t5]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4228&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function r5(i){let e,n,t,r;return e=new $0({props:{asChild:!0,$$slots:{default:[J4,({builder:s})=>({11:s}),({builder:s})=>s?2048:0]},$$scope:{ctx:i}}}),t=new k0({props:{class:"w-[200px] p-0 mt-1",align:"end",$$slots:{default:[n5]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&6153&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&4228&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function s5(i){let e,n,t;function r(a){i[6](a)}let s={disableFocusTrap:!0,onOutsideClick:i[1],$$slots:{default:[r5,({ids:a})=>({7:a}),({ids:a})=>a?128:0]},$$scope:{ctx:i}};return i[3]!==void 0&&(s.open=i[3]),e=new x0({props:s}),Zt.push(()=>An(e,"open",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,[o]){const u={};o&4237&&(u.$$scope={dirty:o,ctx:a}),!n&&o&8&&(n=!0,u.open=a[3],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function i5(i,e,n){let{selectedMapLayer:t}=e,r=!1;const s=()=>n(3,r=!1);let a="";function o(_){n(3,r=!1),pi().then(()=>{var b;(b=document.getElementById(_))==null||b.focus()})}const u=(_,b)=>{n(2,a=b),localStorage.setItem("preferredMapLayer",b),o(_.trigger)};function p(_){r=_,n(3,r)}return i.$$set=_=>{"selectedMapLayer"in _&&n(0,t=_.selectedMapLayer)},i.$$.update=()=>{i.$$.dirty&5&&(ya.find(_=>_.value===a)?n(0,t=ya.find(_=>_.value===a)):n(2,a=t.value))},[t,s,a,r,o,u,p]}class o5 extends it{constructor(e){super(),ot(this,e,i5,s5,st,{selectedMapLayer:0,forceClosePopover:1})}get forceClosePopover(){return this.$$.ctx[1]}}function Uv(i,e){return function(){return i.apply(e,arguments)}}const{toString:a5}=Object.prototype,{getPrototypeOf:Qd}=Object,Hf=(i=>e=>{const n=a5.call(e);return i[n]||(i[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Gi=i=>(i=i.toLowerCase(),e=>Hf(e)===i),Zf=i=>e=>typeof e===i,{isArray:Ll}=Array,Xc=Zf("undefined");function l5(i){return i!==null&&!Xc(i)&&i.constructor!==null&&!Xc(i.constructor)&&_i(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const jv=Gi("ArrayBuffer");function c5(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&jv(i.buffer),e}const u5=Zf("string"),_i=Zf("function"),qv=Zf("number"),Wf=i=>i!==null&&typeof i=="object",f5=i=>i===!0||i===!1,wf=i=>{if(Hf(i)!=="object")return!1;const e=Qd(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},h5=Gi("Date"),d5=Gi("File"),p5=Gi("Blob"),m5=Gi("FileList"),_5=i=>Wf(i)&&_i(i.pipe),g5=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||_i(i.append)&&((e=Hf(i))==="formdata"||e==="object"&&_i(i.toString)&&i.toString()==="[object FormData]"))},v5=Gi("URLSearchParams"),y5=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lu(i,e,{allOwnKeys:n=!1}={}){if(i===null||typeof i>"u")return;let t,r;if(typeof i!="object"&&(i=[i]),Ll(i))for(t=0,r=i.length;t<r;t++)e.call(null,i[t],t,i);else{const s=n?Object.getOwnPropertyNames(i):Object.keys(i),a=s.length;let o;for(t=0;t<a;t++)o=s[t],e.call(null,i[o],o,i)}}function Gv(i,e){e=e.toLowerCase();const n=Object.keys(i);let t=n.length,r;for(;t-- >0;)if(r=n[t],e===r.toLowerCase())return r;return null}const Hv=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Zv=i=>!Xc(i)&&i!==Hv;function yd(){const{caseless:i}=Zv(this)&&this||{},e={},n=(t,r)=>{const s=i&&Gv(e,r)||r;wf(e[s])&&wf(t)?e[s]=yd(e[s],t):wf(t)?e[s]=yd({},t):Ll(t)?e[s]=t.slice():e[s]=t};for(let t=0,r=arguments.length;t<r;t++)arguments[t]&&lu(arguments[t],n);return e}const b5=(i,e,n,{allOwnKeys:t}={})=>(lu(e,(r,s)=>{n&&_i(r)?i[s]=Uv(r,n):i[s]=r},{allOwnKeys:t}),i),w5=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),x5=(i,e,n,t)=>{i.prototype=Object.create(e.prototype,t),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),n&&Object.assign(i.prototype,n)},$5=(i,e,n,t)=>{let r,s,a;const o={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),s=r.length;s-- >0;)a=r[s],(!t||t(a,i,e))&&!o[a]&&(e[a]=i[a],o[a]=!0);i=n!==!1&&Qd(i)}while(i&&(!n||n(i,e))&&i!==Object.prototype);return e},k5=(i,e,n)=>{i=String(i),(n===void 0||n>i.length)&&(n=i.length),n-=e.length;const t=i.indexOf(e,n);return t!==-1&&t===n},C5=i=>{if(!i)return null;if(Ll(i))return i;let e=i.length;if(!qv(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=i[e];return n},S5=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&Qd(Uint8Array)),I5=(i,e)=>{const t=(i&&i[Symbol.iterator]).call(i);let r;for(;(r=t.next())&&!r.done;){const s=r.value;e.call(i,s[0],s[1])}},T5=(i,e)=>{let n;const t=[];for(;(n=i.exec(e))!==null;)t.push(n);return t},P5=Gi("HTMLFormElement"),E5=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,t,r){return t.toUpperCase()+r}),Fg=(({hasOwnProperty:i})=>(e,n)=>i.call(e,n))(Object.prototype),A5=Gi("RegExp"),Wv=(i,e)=>{const n=Object.getOwnPropertyDescriptors(i),t={};lu(n,(r,s)=>{let a;(a=e(r,s,i))!==!1&&(t[s]=a||r)}),Object.defineProperties(i,t)},M5=i=>{Wv(i,(e,n)=>{if(_i(i)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const t=i[n];if(_i(t)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},D5=(i,e)=>{const n={},t=r=>{r.forEach(s=>{n[s]=!0})};return Ll(i)?t(i):t(String(i).split(e)),n},z5=()=>{},L5=(i,e)=>(i=+i,Number.isFinite(i)?i:e),cd="abcdefghijklmnopqrstuvwxyz",Bg="0123456789",Kv={DIGIT:Bg,ALPHA:cd,ALPHA_DIGIT:cd+cd.toUpperCase()+Bg},R5=(i=16,e=Kv.ALPHA_DIGIT)=>{let n="";const{length:t}=e;for(;i--;)n+=e[Math.random()*t|0];return n};function O5(i){return!!(i&&_i(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const F5=i=>{const e=new Array(10),n=(t,r)=>{if(Wf(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const s=Ll(t)?[]:{};return lu(t,(a,o)=>{const u=n(a,r+1);!Xc(u)&&(s[o]=u)}),e[r]=void 0,s}}return t};return n(i,0)},B5=Gi("AsyncFunction"),N5=i=>i&&(Wf(i)||_i(i))&&_i(i.then)&&_i(i.catch),wt={isArray:Ll,isArrayBuffer:jv,isBuffer:l5,isFormData:g5,isArrayBufferView:c5,isString:u5,isNumber:qv,isBoolean:f5,isObject:Wf,isPlainObject:wf,isUndefined:Xc,isDate:h5,isFile:d5,isBlob:p5,isRegExp:A5,isFunction:_i,isStream:_5,isURLSearchParams:v5,isTypedArray:S5,isFileList:m5,forEach:lu,merge:yd,extend:b5,trim:y5,stripBOM:w5,inherits:x5,toFlatObject:$5,kindOf:Hf,kindOfTest:Gi,endsWith:k5,toArray:C5,forEachEntry:I5,matchAll:T5,isHTMLForm:P5,hasOwnProperty:Fg,hasOwnProp:Fg,reduceDescriptors:Wv,freezeMethods:M5,toObjectSet:D5,toCamelCase:E5,noop:z5,toFiniteNumber:L5,findKey:Gv,global:Hv,isContextDefined:Zv,ALPHABET:Kv,generateString:R5,isSpecCompliantForm:O5,toJSONObject:F5,isAsyncFn:B5,isThenable:N5};function Gn(i,e,n,t,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),t&&(this.request=t),r&&(this.response=r)}wt.inherits(Gn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Xv=Gn.prototype,Jv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{Jv[i]={value:i}});Object.defineProperties(Gn,Jv);Object.defineProperty(Xv,"isAxiosError",{value:!0});Gn.from=(i,e,n,t,r,s)=>{const a=Object.create(Xv);return wt.toFlatObject(i,a,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),Gn.call(a,i.message,e,n,t,r),a.cause=i,a.name=i.name,s&&Object.assign(a,s),a};const V5=null;function bd(i){return wt.isPlainObject(i)||wt.isArray(i)}function Yv(i){return wt.endsWith(i,"[]")?i.slice(0,-2):i}function Ng(i,e,n){return i?i.concat(e).map(function(r,s){return r=Yv(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function U5(i){return wt.isArray(i)&&!i.some(bd)}const j5=wt.toFlatObject(wt,{},null,function(e){return/^is[A-Z]/.test(e)});function Kf(i,e,n){if(!wt.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,n=wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(z,F){return!wt.isUndefined(F[z])});const t=n.metaTokens,r=n.visitor||_,s=n.dots,a=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&wt.isSpecCompliantForm(e);if(!wt.isFunction(r))throw new TypeError("visitor must be a function");function p(L){if(L===null)return"";if(wt.isDate(L))return L.toISOString();if(!u&&wt.isBlob(L))throw new Gn("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(L)||wt.isTypedArray(L)?u&&typeof Blob=="function"?new Blob([L]):Buffer.from(L):L}function _(L,z,F){let U=L;if(L&&!F&&typeof L=="object"){if(wt.endsWith(z,"{}"))z=t?z:z.slice(0,-2),L=JSON.stringify(L);else if(wt.isArray(L)&&U5(L)||(wt.isFileList(L)||wt.endsWith(z,"[]"))&&(U=wt.toArray(L)))return z=Yv(z),U.forEach(function(J,pe){!(wt.isUndefined(J)||J===null)&&e.append(a===!0?Ng([z],pe,s):a===null?z:z+"[]",p(J))}),!1}return bd(L)?!0:(e.append(Ng(F,z,s),p(L)),!1)}const b=[],$=Object.assign(j5,{defaultVisitor:_,convertValue:p,isVisitable:bd});function P(L,z){if(!wt.isUndefined(L)){if(b.indexOf(L)!==-1)throw Error("Circular reference detected in "+z.join("."));b.push(L),wt.forEach(L,function(U,j){(!(wt.isUndefined(U)||U===null)&&r.call(e,U,wt.isString(j)?j.trim():j,z,$))===!0&&P(U,z?z.concat(j):[j])}),b.pop()}}if(!wt.isObject(i))throw new TypeError("data must be an object");return P(i),e}function Vg(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function ep(i,e){this._pairs=[],i&&Kf(i,this,e)}const Qv=ep.prototype;Qv.append=function(e,n){this._pairs.push([e,n])};Qv.toString=function(e){const n=e?function(t){return e.call(this,t,Vg)}:Vg;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function q5(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ey(i,e,n){if(!e)return i;const t=n&&n.encode||q5,r=n&&n.serialize;let s;if(r?s=r(e,n):s=wt.isURLSearchParams(e)?e.toString():new ep(e,n).toString(t),s){const a=i.indexOf("#");a!==-1&&(i=i.slice(0,a)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}class G5{constructor(){this.handlers=[]}use(e,n,t){return this.handlers.push({fulfilled:e,rejected:n,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wt.forEach(this.handlers,function(t){t!==null&&e(t)})}}const Ug=G5,ty={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},H5=typeof URLSearchParams<"u"?URLSearchParams:ep,Z5=typeof FormData<"u"?FormData:null,W5=typeof Blob<"u"?Blob:null,K5={isBrowser:!0,classes:{URLSearchParams:H5,FormData:Z5,Blob:W5},protocols:["http","https","file","blob","url","data"]},ny=typeof window<"u"&&typeof document<"u",X5=(i=>ny&&["ReactNative","NativeScript","NS"].indexOf(i)<0)(typeof navigator<"u"&&navigator.product),J5=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Y5=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ny,hasStandardBrowserEnv:X5,hasStandardBrowserWebWorkerEnv:J5},Symbol.toStringTag,{value:"Module"})),Ni={...Y5,...K5};function Q5(i,e){return Kf(i,new Ni.classes.URLSearchParams,Object.assign({visitor:function(n,t,r,s){return Ni.isNode&&wt.isBuffer(n)?(this.append(t,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function eM(i){return wt.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function tM(i){const e={},n=Object.keys(i);let t;const r=n.length;let s;for(t=0;t<r;t++)s=n[t],e[s]=i[s];return e}function ry(i){function e(n,t,r,s){let a=n[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),u=s>=n.length;return a=!a&&wt.isArray(r)?r.length:a,u?(wt.hasOwnProp(r,a)?r[a]=[r[a],t]:r[a]=t,!o):((!r[a]||!wt.isObject(r[a]))&&(r[a]=[]),e(n,t,r[a],s)&&wt.isArray(r[a])&&(r[a]=tM(r[a])),!o)}if(wt.isFormData(i)&&wt.isFunction(i.entries)){const n={};return wt.forEachEntry(i,(t,r)=>{e(eM(t),r,n,0)}),n}return null}function nM(i,e,n){if(wt.isString(i))try{return(e||JSON.parse)(i),wt.trim(i)}catch(t){if(t.name!=="SyntaxError")throw t}return(n||JSON.stringify)(i)}const tp={transitional:ty,adapter:["xhr","http"],transformRequest:[function(e,n){const t=n.getContentType()||"",r=t.indexOf("application/json")>-1,s=wt.isObject(e);if(s&&wt.isHTMLForm(e)&&(e=new FormData(e)),wt.isFormData(e))return r?JSON.stringify(ry(e)):e;if(wt.isArrayBuffer(e)||wt.isBuffer(e)||wt.isStream(e)||wt.isFile(e)||wt.isBlob(e))return e;if(wt.isArrayBufferView(e))return e.buffer;if(wt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(t.indexOf("application/x-www-form-urlencoded")>-1)return Q5(e,this.formSerializer).toString();if((o=wt.isFileList(e))||t.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Kf(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),nM(e)):e}],transformResponse:[function(e){const n=this.transitional||tp.transitional,t=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&wt.isString(e)&&(t&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Gn.from(o,Gn.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ni.classes.FormData,Blob:Ni.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],i=>{tp.headers[i]={}});const np=tp,rM=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sM=i=>{const e={};let n,t,r;return i&&i.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),t=a.substring(r+1).trim(),!(!n||e[n]&&rM[n])&&(n==="set-cookie"?e[n]?e[n].push(t):e[n]=[t]:e[n]=e[n]?e[n]+", "+t:t)}),e},jg=Symbol("internals");function Bc(i){return i&&String(i).trim().toLowerCase()}function xf(i){return i===!1||i==null?i:wt.isArray(i)?i.map(xf):String(i)}function iM(i){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=n.exec(i);)e[t[1]]=t[2];return e}const oM=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function ud(i,e,n,t,r){if(wt.isFunction(t))return t.call(this,e,n);if(r&&(e=n),!!wt.isString(e)){if(wt.isString(t))return e.indexOf(t)!==-1;if(wt.isRegExp(t))return t.test(e)}}function aM(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,t)=>n.toUpperCase()+t)}function lM(i,e){const n=wt.toCamelCase(" "+e);["get","set","has"].forEach(t=>{Object.defineProperty(i,t+n,{value:function(r,s,a){return this[t].call(this,e,r,s,a)},configurable:!0})})}class Xf{constructor(e){e&&this.set(e)}set(e,n,t){const r=this;function s(o,u,p){const _=Bc(u);if(!_)throw new Error("header name must be a non-empty string");const b=wt.findKey(r,_);(!b||r[b]===void 0||p===!0||p===void 0&&r[b]!==!1)&&(r[b||u]=xf(o))}const a=(o,u)=>wt.forEach(o,(p,_)=>s(p,_,u));return wt.isPlainObject(e)||e instanceof this.constructor?a(e,n):wt.isString(e)&&(e=e.trim())&&!oM(e)?a(sM(e),n):e!=null&&s(n,e,t),this}get(e,n){if(e=Bc(e),e){const t=wt.findKey(this,e);if(t){const r=this[t];if(!n)return r;if(n===!0)return iM(r);if(wt.isFunction(n))return n.call(this,r,t);if(wt.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Bc(e),e){const t=wt.findKey(this,e);return!!(t&&this[t]!==void 0&&(!n||ud(this,this[t],t,n)))}return!1}delete(e,n){const t=this;let r=!1;function s(a){if(a=Bc(a),a){const o=wt.findKey(t,a);o&&(!n||ud(t,t[o],o,n))&&(delete t[o],r=!0)}}return wt.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let t=n.length,r=!1;for(;t--;){const s=n[t];(!e||ud(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,t={};return wt.forEach(this,(r,s)=>{const a=wt.findKey(t,s);if(a){n[a]=xf(r),delete n[s];return}const o=e?aM(s):String(s).trim();o!==s&&delete n[s],n[o]=xf(r),t[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return wt.forEach(this,(t,r)=>{t!=null&&t!==!1&&(n[r]=e&&wt.isArray(t)?t.join(", "):t)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const t=new this(e);return n.forEach(r=>t.set(r)),t}static accessor(e){const t=(this[jg]=this[jg]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=Bc(a);t[o]||(lM(r,a),t[o]=!0)}return wt.isArray(e)?e.forEach(s):s(e),this}}Xf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);wt.reduceDescriptors(Xf.prototype,({value:i},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(t){this[n]=t}}});wt.freezeMethods(Xf);const uo=Xf;function fd(i,e){const n=this||np,t=e||n,r=uo.from(t.headers);let s=t.data;return wt.forEach(i,function(o){s=o.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function sy(i){return!!(i&&i.__CANCEL__)}function cu(i,e,n){Gn.call(this,i??"canceled",Gn.ERR_CANCELED,e,n),this.name="CanceledError"}wt.inherits(cu,Gn,{__CANCEL__:!0});function cM(i,e,n){const t=n.config.validateStatus;!n.status||!t||t(n.status)?i(n):e(new Gn("Request failed with status code "+n.status,[Gn.ERR_BAD_REQUEST,Gn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const uM=Ni.hasStandardBrowserEnv?{write(i,e,n,t,r,s){const a=[i+"="+encodeURIComponent(e)];wt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),wt.isString(t)&&a.push("path="+t),wt.isString(r)&&a.push("domain="+r),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fM(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function hM(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function iy(i,e){return i&&!fM(e)?hM(i,e):e}const dM=Ni.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let t;function r(s){let a=s;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(a){const o=wt.isString(a)?r(a):a;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}();function pM(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function mM(i,e){i=i||10;const n=new Array(i),t=new Array(i);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(u){const p=Date.now(),_=t[s];a||(a=p),n[r]=u,t[r]=p;let b=s,$=0;for(;b!==r;)$+=n[b++],b=b%i;if(r=(r+1)%i,r===s&&(s=(s+1)%i),p-a<e)return;const P=_&&p-_;return P?Math.round($*1e3/P):void 0}}function qg(i,e){let n=0;const t=mM(50,250);return r=>{const s=r.loaded,a=r.lengthComputable?r.total:void 0,o=s-n,u=t(o),p=s<=a;n=s;const _={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:u||void 0,estimated:u&&a&&p?(a-s)/u:void 0,event:r};_[e?"download":"upload"]=!0,i(_)}}const _M=typeof XMLHttpRequest<"u",gM=_M&&function(i){return new Promise(function(n,t){let r=i.data;const s=uo.from(i.headers).normalize();let{responseType:a,withXSRFToken:o}=i,u;function p(){i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let _;if(wt.isFormData(r)){if(Ni.hasStandardBrowserEnv||Ni.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((_=s.getContentType())!==!1){const[z,...F]=_?_.split(";").map(U=>U.trim()).filter(Boolean):[];s.setContentType([z||"multipart/form-data",...F].join("; "))}}let b=new XMLHttpRequest;if(i.auth){const z=i.auth.username||"",F=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";s.set("Authorization","Basic "+btoa(z+":"+F))}const $=iy(i.baseURL,i.url);b.open(i.method.toUpperCase(),ey($,i.params,i.paramsSerializer),!0),b.timeout=i.timeout;function P(){if(!b)return;const z=uo.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),U={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:z,config:i,request:b};cM(function(J){n(J),p()},function(J){t(J),p()},U),b=null}if("onloadend"in b?b.onloadend=P:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(P)},b.onabort=function(){b&&(t(new Gn("Request aborted",Gn.ECONNABORTED,i,b)),b=null)},b.onerror=function(){t(new Gn("Network Error",Gn.ERR_NETWORK,i,b)),b=null},b.ontimeout=function(){let F=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const U=i.transitional||ty;i.timeoutErrorMessage&&(F=i.timeoutErrorMessage),t(new Gn(F,U.clarifyTimeoutError?Gn.ETIMEDOUT:Gn.ECONNABORTED,i,b)),b=null},Ni.hasStandardBrowserEnv&&(o&&wt.isFunction(o)&&(o=o(i)),o||o!==!1&&dM($))){const z=i.xsrfHeaderName&&i.xsrfCookieName&&uM.read(i.xsrfCookieName);z&&s.set(i.xsrfHeaderName,z)}r===void 0&&s.setContentType(null),"setRequestHeader"in b&&wt.forEach(s.toJSON(),function(F,U){b.setRequestHeader(U,F)}),wt.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&b.addEventListener("progress",qg(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",qg(i.onUploadProgress)),(i.cancelToken||i.signal)&&(u=z=>{b&&(t(!z||z.type?new cu(null,i,b):z),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const L=pM($);if(L&&Ni.protocols.indexOf(L)===-1){t(new Gn("Unsupported protocol "+L+":",Gn.ERR_BAD_REQUEST,i));return}b.send(r||null)})},wd={http:V5,xhr:gM};wt.forEach(wd,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const Gg=i=>`- ${i}`,vM=i=>wt.isFunction(i)||i===null||i===!1,oy={getAdapter:i=>{i=wt.isArray(i)?i:[i];const{length:e}=i;let n,t;const r={};for(let s=0;s<e;s++){n=i[s];let a;if(t=n,!vM(n)&&(t=wd[(a=String(n)).toLowerCase()],t===void 0))throw new Gn(`Unknown adapter '${a}'`);if(t)break;r[a||"#"+s]=t}if(!t){const s=Object.entries(r).map(([o,u])=>`adapter ${o} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(Gg).join(`
`):" "+Gg(s[0]):"as no adapter specified";throw new Gn("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return t},adapters:wd};function hd(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new cu(null,i)}function Hg(i){return hd(i),i.headers=uo.from(i.headers),i.data=fd.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),oy.getAdapter(i.adapter||np.adapter)(i).then(function(t){return hd(i),t.data=fd.call(i,i.transformResponse,t),t.headers=uo.from(t.headers),t},function(t){return sy(t)||(hd(i),t&&t.response&&(t.response.data=fd.call(i,i.transformResponse,t.response),t.response.headers=uo.from(t.response.headers))),Promise.reject(t)})}const Zg=i=>i instanceof uo?{...i}:i;function Il(i,e){e=e||{};const n={};function t(p,_,b){return wt.isPlainObject(p)&&wt.isPlainObject(_)?wt.merge.call({caseless:b},p,_):wt.isPlainObject(_)?wt.merge({},_):wt.isArray(_)?_.slice():_}function r(p,_,b){if(wt.isUndefined(_)){if(!wt.isUndefined(p))return t(void 0,p,b)}else return t(p,_,b)}function s(p,_){if(!wt.isUndefined(_))return t(void 0,_)}function a(p,_){if(wt.isUndefined(_)){if(!wt.isUndefined(p))return t(void 0,p)}else return t(void 0,_)}function o(p,_,b){if(b in e)return t(p,_);if(b in i)return t(void 0,p)}const u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(p,_)=>r(Zg(p),Zg(_),!0)};return wt.forEach(Object.keys(Object.assign({},i,e)),function(_){const b=u[_]||r,$=b(i[_],e[_],_);wt.isUndefined($)&&b!==o||(n[_]=$)}),n}const ay="1.6.8",rp={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{rp[i]=function(t){return typeof t===i||"a"+(e<1?"n ":" ")+i}});const Wg={};rp.transitional=function(e,n,t){function r(s,a){return"[Axios v"+ay+"] Transitional option '"+s+"'"+a+(t?". "+t:"")}return(s,a,o)=>{if(e===!1)throw new Gn(r(a," has been removed"+(n?" in "+n:"")),Gn.ERR_DEPRECATED);return n&&!Wg[a]&&(Wg[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,o):!0}};function yM(i,e,n){if(typeof i!="object")throw new Gn("options must be an object",Gn.ERR_BAD_OPTION_VALUE);const t=Object.keys(i);let r=t.length;for(;r-- >0;){const s=t[r],a=e[s];if(a){const o=i[s],u=o===void 0||a(o,s,i);if(u!==!0)throw new Gn("option "+s+" must be "+u,Gn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Gn("Unknown option "+s,Gn.ERR_BAD_OPTION)}}const xd={assertOptions:yM,validators:rp},Mo=xd.validators;class zf{constructor(e){this.defaults=e,this.interceptors={request:new Ug,response:new Ug}}async request(e,n){try{return await this._request(e,n)}catch(t){if(t instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";t.stack?s&&!String(t.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(t.stack+=`
`+s):t.stack=s}throw t}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Il(this.defaults,n);const{transitional:t,paramsSerializer:r,headers:s}=n;t!==void 0&&xd.assertOptions(t,{silentJSONParsing:Mo.transitional(Mo.boolean),forcedJSONParsing:Mo.transitional(Mo.boolean),clarifyTimeoutError:Mo.transitional(Mo.boolean)},!1),r!=null&&(wt.isFunction(r)?n.paramsSerializer={serialize:r}:xd.assertOptions(r,{encode:Mo.function,serialize:Mo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&wt.merge(s.common,s[n.method]);s&&wt.forEach(["delete","get","head","post","put","patch","common"],L=>{delete s[L]}),n.headers=uo.concat(a,s);const o=[];let u=!0;this.interceptors.request.forEach(function(z){typeof z.runWhen=="function"&&z.runWhen(n)===!1||(u=u&&z.synchronous,o.unshift(z.fulfilled,z.rejected))});const p=[];this.interceptors.response.forEach(function(z){p.push(z.fulfilled,z.rejected)});let _,b=0,$;if(!u){const L=[Hg.bind(this),void 0];for(L.unshift.apply(L,o),L.push.apply(L,p),$=L.length,_=Promise.resolve(n);b<$;)_=_.then(L[b++],L[b++]);return _}$=o.length;let P=n;for(b=0;b<$;){const L=o[b++],z=o[b++];try{P=L(P)}catch(F){z.call(this,F);break}}try{_=Hg.call(this,P)}catch(L){return Promise.reject(L)}for(b=0,$=p.length;b<$;)_=_.then(p[b++],p[b++]);return _}getUri(e){e=Il(this.defaults,e);const n=iy(e.baseURL,e.url);return ey(n,e.params,e.paramsSerializer)}}wt.forEach(["delete","get","head","options"],function(e){zf.prototype[e]=function(n,t){return this.request(Il(t||{},{method:e,url:n,data:(t||{}).data}))}});wt.forEach(["post","put","patch"],function(e){function n(t){return function(s,a,o){return this.request(Il(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}zf.prototype[e]=n(),zf.prototype[e+"Form"]=n(!0)});const $f=zf;class sp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const t=this;this.promise.then(r=>{if(!t._listeners)return;let s=t._listeners.length;for(;s-- >0;)t._listeners[s](r);t._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{t.subscribe(o),s=o}).then(r);return a.cancel=function(){t.unsubscribe(s)},a},e(function(s,a,o){t.reason||(t.reason=new cu(s,a,o),n(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new sp(function(r){e=r}),cancel:e}}}const bM=sp;function wM(i){return function(n){return i.apply(null,n)}}function xM(i){return wt.isObject(i)&&i.isAxiosError===!0}const $d={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($d).forEach(([i,e])=>{$d[e]=i});const $M=$d;function ly(i){const e=new $f(i),n=Uv($f.prototype.request,e);return wt.extend(n,$f.prototype,e,{allOwnKeys:!0}),wt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return ly(Il(i,r))},n}const Kr=ly(np);Kr.Axios=$f;Kr.CanceledError=cu;Kr.CancelToken=bM;Kr.isCancel=sy;Kr.VERSION=ay;Kr.toFormData=Kf;Kr.AxiosError=Gn;Kr.Cancel=Kr.CanceledError;Kr.all=function(e){return Promise.all(e)};Kr.spread=wM;Kr.isAxiosError=xM;Kr.mergeConfig=Il;Kr.AxiosHeaders=uo;Kr.formToJSON=i=>ry(wt.isHTMLForm(i)?new FormData(i):i);Kr.getAdapter=oy.getAdapter;Kr.HttpStatusCode=$M;Kr.default=Kr;const lo=Kr;function Kg(i,e,n){const t=i.slice();return t[19]=e[n],t}function Xg(i,e,n){const t=i.slice();return t[22]=e[n],t}function Jg(i,e,n){const t=i.slice();return t[22]=e[n],t}function Yg(i,e,n){const t=i.slice();return t[19]=e[n],t}function kM(i){let e,n,t,r,s="Search By Name Or Location",a;return n=new nv({}),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),r=ce("p"),r.textContent=s,this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);Z(n.$$.fragment,u),t=ve(u),r=ue(u,"P",{class:!0,"data-svelte-h":!0}),bn(r)!=="svelte-1imatsx"&&(r.textContent=s),u.forEach(I),this.h()},h(){se(r,"class","text-sm"),se(e,"class","flex gap-2 items-center")},m(o,u){B(o,e,u),G(n,e,null),ae(e,t),ae(e,r),a=!0},p:gt,i(o){a||(T(n.$$.fragment,o),a=!0)},o(o){E(n.$$.fragment,o),a=!1},d(o){o&&I(e),H(n)}}}function CM(i){let e,n="Points Of Interest",t,r,s,a,o,u,p="Locations",_,b,$,P,L='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',z;return r=new Kc({props:{$$slots:{default:[AM]},$$scope:{ctx:i}}}),b=new Kc({props:{$$slots:{default:[DM]},$$scope:{ctx:i}}}),{c(){e=ce("p"),e.textContent=n,t=ge(),q(r.$$.fragment),s=ge(),a=ce("div"),o=ge(),u=ce("p"),u.textContent=p,_=ge(),q(b.$$.fragment),$=ge(),P=ce("div"),P.innerHTML=L,this.h()},l(F){e=ue(F,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-x03xac"&&(e.textContent=n),t=ve(F),Z(r.$$.fragment,F),s=ve(F),a=ue(F,"DIV",{class:!0}),$e(a).forEach(I),o=ve(F),u=ue(F,"P",{class:!0,"data-svelte-h":!0}),bn(u)!=="svelte-wt03ge"&&(u.textContent=p),_=ve(F),Z(b.$$.fragment,F),$=ve(F),P=ue(F,"DIV",{class:!0,"data-svelte-h":!0}),bn(P)!=="svelte-160hzgv"&&(P.innerHTML=L),this.h()},h(){se(e,"class","px-4 py-2 font-medium leading-none"),se(a,"class","divider my-0 mx-4"),se(u,"class","px-4 py-2 font-medium leading-none"),se(P,"class","flex w-full justify-end p-2")},m(F,U){B(F,e,U),B(F,t,U),G(r,F,U),B(F,s,U),B(F,a,U),B(F,o,U),B(F,u,U),B(F,_,U),G(b,F,U),B(F,$,U),B(F,P,U),z=!0},p(F,U){const j={};U&536870921&&(j.$$scope={dirty:U,ctx:F}),r.$set(j);const J={};U&536870929&&(J.$$scope={dirty:U,ctx:F}),b.$set(J)},i(F){z||(T(r.$$.fragment,F),T(b.$$.fragment,F),z=!0)},o(F){E(r.$$.fragment,F),E(b.$$.fragment,F),z=!1},d(F){F&&(I(e),I(t),I(s),I(a),I(o),I(u),I(_),I($),I(P)),H(r,F),H(b,F)}}}function SM(i){let e,n="Points Of Interest",t,r,s,a,o='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',u;return r=new Kc({props:{$$slots:{default:[LM]},$$scope:{ctx:i}}}),{c(){e=ce("p"),e.textContent=n,t=ge(),q(r.$$.fragment),s=ge(),a=ce("div"),a.innerHTML=o,this.h()},l(p){e=ue(p,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-x03xac"&&(e.textContent=n),t=ve(p),Z(r.$$.fragment,p),s=ve(p),a=ue(p,"DIV",{class:!0,"data-svelte-h":!0}),bn(a)!=="svelte-160hzgv"&&(a.innerHTML=o),this.h()},h(){se(e,"class","px-4 py-2 font-medium leading-none"),se(a,"class","flex w-full justify-end p-2")},m(p,_){B(p,e,_),B(p,t,_),G(r,p,_),B(p,s,_),B(p,a,_),u=!0},p(p,_){const b={};_&536870921&&(b.$$scope={dirty:_,ctx:p}),r.$set(b)},i(p){u||(T(r.$$.fragment,p),u=!0)},o(p){E(r.$$.fragment,p),u=!1},d(p){p&&(I(e),I(t),I(s),I(a)),H(r,p)}}}function IM(i){let e,n="Locations",t,r,s,a,o='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',u;return r=new Kc({props:{$$slots:{default:[OM]},$$scope:{ctx:i}}}),{c(){e=ce("p"),e.textContent=n,t=ge(),q(r.$$.fragment),s=ge(),a=ce("div"),a.innerHTML=o,this.h()},l(p){e=ue(p,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-wt03ge"&&(e.textContent=n),t=ve(p),Z(r.$$.fragment,p),s=ve(p),a=ue(p,"DIV",{class:!0,"data-svelte-h":!0}),bn(a)!=="svelte-160hzgv"&&(a.innerHTML=o),this.h()},h(){se(e,"class","px-4 py-2 font-medium leading-none"),se(a,"class","flex w-full justify-end p-2")},m(p,_){B(p,e,_),B(p,t,_),G(r,p,_),B(p,s,_),B(p,a,_),u=!0},p(p,_){const b={};_&536870929&&(b.$$scope={dirty:_,ctx:p}),r.$set(b)},i(p){u||(T(r.$$.fragment,p),u=!0)},o(p){E(r.$$.fragment,p),u=!1},d(p){p&&(I(e),I(t),I(s),I(a)),H(r,p)}}}function TM(i){let e,n;return e=new Nv({props:{class:"h-[300px] flex items-center justify-center",$$slots:{default:[FM]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function PM(i){let e,n;return e=new K4({props:{$$slots:{default:[BM]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Qg(i){let e,n,t;return n=new Al({props:{class:"h-3 w-3 text-primary"}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","flex gap-2")},m(r,s){B(r,e,s),G(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function EM(i){let e,n,t,r=i[22].name+"",s,a,o,u=Math.round(i[8](i[22].lngLat,i[0].getCenter())/100)/10+"",p,_,b,$,P,L,z,F=i[22].features.join(", ")+"",U,j,J,pe,re,te,de,me,Y=i[22].likes+"",we,Ce,_e,fe,Ee,je,ke=i[22].comments.length+"",nt,bt,zt,At=i[22].isFavourite&&Qg();return te=new rv({props:{class:"h-3 w-3"}}),fe=new tv({props:{class:"h-3 w-3"}}),{c(){e=ce("div"),n=ce("div"),t=ce("p"),s=He(r),a=ge(),o=ce("p"),p=He(u),_=He("Km"),b=ge(),$=ce("div"),P=ce("div"),L=ce("p"),z=He("Features:"),U=He(F),j=ge(),J=ce("div"),At&&At.c(),pe=ge(),re=ce("div"),q(te.$$.fragment),de=ge(),me=ce("p"),we=He(Y),Ce=ge(),_e=ce("div"),q(fe.$$.fragment),Ee=ge(),je=ce("p"),nt=He(ke),bt=ge(),this.h()},l(Et){e=ue(Et,"DIV",{class:!0});var It=$e(e);n=ue(It,"DIV",{class:!0});var nn=$e(n);t=ue(nn,"P",{});var yn=$e(t);s=Ze(yn,r),yn.forEach(I),a=ve(nn),o=ue(nn,"P",{class:!0});var un=$e(o);p=Ze(un,u),_=Ze(un,"Km"),un.forEach(I),nn.forEach(I),b=ve(It),$=ue(It,"DIV",{class:!0});var Kt=$e($);P=ue(Kt,"DIV",{class:!0});var Tt=$e(P);L=ue(Tt,"P",{class:!0});var Vt=$e(L);z=Ze(Vt,"Features:"),U=Ze(Vt,F),Vt.forEach(I),Tt.forEach(I),j=ve(Kt),J=ue(Kt,"DIV",{class:!0});var Ye=$e(J);At&&At.l(Ye),pe=ve(Ye),re=ue(Ye,"DIV",{class:!0});var Nt=$e(re);Z(te.$$.fragment,Nt),de=ve(Nt),me=ue(Nt,"P",{class:!0});var Mt=$e(me);we=Ze(Mt,Y),Mt.forEach(I),Nt.forEach(I),Ce=ve(Ye),_e=ue(Ye,"DIV",{class:!0});var Qe=$e(_e);Z(fe.$$.fragment,Qe),Ee=ve(Qe),je=ue(Qe,"P",{class:!0});var en=$e(je);nt=Ze(en,ke),en.forEach(I),Qe.forEach(I),Ye.forEach(I),Kt.forEach(I),It.forEach(I),bt=ve(Et),this.h()},h(){se(o,"class","text-sm text-muted-foreground"),se(n,"class","flex justify-between gap-4"),se(L,"class","text-xs text-muted-foreground"),se(P,"class","flex"),se(me,"class","text-muted-foreground"),se(re,"class","flex gap-2"),se(je,"class","text-muted-foreground"),se(_e,"class","flex gap-2"),se(J,"class","flex gap-4"),se($,"class","flex justify-between gap-2"),se(e,"class","flex flex-col w-full gap-2")},m(Et,It){B(Et,e,It),ae(e,n),ae(n,t),ae(t,s),ae(n,a),ae(n,o),ae(o,p),ae(o,_),ae(e,b),ae(e,$),ae($,P),ae(P,L),ae(L,z),ae(L,U),ae($,j),ae($,J),At&&At.m(J,null),ae(J,pe),ae(J,re),G(te,re,null),ae(re,de),ae(re,me),ae(me,we),ae(J,Ce),ae(J,_e),G(fe,_e,null),ae(_e,Ee),ae(_e,je),ae(je,nt),B(Et,bt,It),zt=!0},p(Et,It){(!zt||It&8)&&r!==(r=Et[22].name+"")&&Qt(s,r),(!zt||It&9)&&u!==(u=Math.round(Et[8](Et[22].lngLat,Et[0].getCenter())/100)/10+"")&&Qt(p,u),(!zt||It&8)&&F!==(F=Et[22].features.join(", ")+"")&&Qt(U,F),Et[22].isFavourite?At?It&8&&T(At,1):(At=Qg(),At.c(),T(At,1),At.m(J,pe)):At&&(vt(),E(At,1,1,()=>{At=null}),yt()),(!zt||It&8)&&Y!==(Y=Et[22].likes+"")&&Qt(we,Y),(!zt||It&8)&&ke!==(ke=Et[22].comments.length+"")&&Qt(nt,ke)},i(Et){zt||(T(At),T(te.$$.fragment,Et),T(fe.$$.fragment,Et),zt=!0)},o(Et){E(At),E(te.$$.fragment,Et),E(fe.$$.fragment,Et),zt=!1},d(Et){Et&&(I(e),I(bt)),At&&At.d(),H(te),H(fe)}}}function e1(i,e){let n,t,r;return t=new au({props:{value:e[22].id.toString(),onSelect:e[7],class:"cursor-pointer",$$slots:{default:[EM]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&8&&(o.value=e[22].id.toString()),a&536870921&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function AM(i){let e=[],n=new Map,t,r,s=dn(i[3]);const a=o=>o[22].id;for(let o=0;o<s.length;o+=1){let u=Xg(i,s,o),p=a(u);n.set(p,e[o]=e1(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&393&&(s=dn(o[3]),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,e1,t,Xg),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function t1(i){let e,n=i[19].address.label+"",t;return{c(){e=ce("p"),t=He(n),this.h()},l(r){e=ue(r,"P",{class:!0});var s=$e(e);t=Ze(s,n),s.forEach(I),this.h()},h(){se(e,"class","text-xs text-muted-foreground")},m(r,s){B(r,e,s),ae(e,t)},p(r,s){s&16&&n!==(n=r[19].address.label+"")&&Qt(t,n)},d(r){r&&I(e)}}}function MM(i){let e,n,t,r=i[19].title+"",s,a,o,u=Math.round(i[8](i[19].position,i[0].getCenter())/100)/10+"",p,_,b,$,P=i[19].address.label!==i[19].title&&t1(i);return{c(){e=ce("div"),n=ce("div"),t=ce("p"),s=He(r),a=ge(),o=ce("p"),p=He(u),_=He("Km"),b=ge(),P&&P.c(),$=ge(),this.h()},l(L){e=ue(L,"DIV",{class:!0});var z=$e(e);n=ue(z,"DIV",{class:!0});var F=$e(n);t=ue(F,"P",{});var U=$e(t);s=Ze(U,r),U.forEach(I),a=ve(F),o=ue(F,"P",{class:!0});var j=$e(o);p=Ze(j,u),_=Ze(j,"Km"),j.forEach(I),F.forEach(I),b=ve(z),P&&P.l(z),z.forEach(I),$=ve(L),this.h()},h(){se(o,"class","text-sm text-muted-foreground"),se(n,"class","flex justify-between gap-4"),se(e,"class","flex flex-col w-full gap-0.5")},m(L,z){B(L,e,z),ae(e,n),ae(n,t),ae(t,s),ae(n,a),ae(n,o),ae(o,p),ae(o,_),ae(e,b),P&&P.m(e,null),B(L,$,z)},p(L,z){z&16&&r!==(r=L[19].title+"")&&Qt(s,r),z&17&&u!==(u=Math.round(L[8](L[19].position,L[0].getCenter())/100)/10+"")&&Qt(p,u),L[19].address.label!==L[19].title?P?P.p(L,z):(P=t1(L),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},d(L){L&&(I(e),I($)),P&&P.d()}}}function n1(i,e){let n,t,r;return t=new au({props:{value:e[19].id,onSelect:e[6],class:"cursor-pointer",$$slots:{default:[MM]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.value=e[19].id),a&536870929&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function DM(i){let e=[],n=new Map,t,r,s=dn(i[4]);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let u=Kg(i,s,o),p=a(u);n.set(p,e[o]=n1(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&337&&(s=dn(o[4]),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,n1,t,Kg),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function r1(i){let e,n,t;return n=new Al({props:{class:"h-3 w-3 text-primary"}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","flex gap-2")},m(r,s){B(r,e,s),G(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function zM(i){let e,n,t,r=i[22].name+"",s,a,o,u=Math.round(i[8](i[22].lngLat,i[0].getCenter())/100)/10+"",p,_,b,$,P,L,z,F=i[22].features.join(", ")+"",U,j,J,pe,re,te,de,me,Y=i[22].likes+"",we,Ce,_e,fe,Ee,je,ke=i[22].comments.length+"",nt,bt,zt,At=i[22].isFavourite&&r1();return te=new rv({props:{class:"h-3 w-3"}}),fe=new tv({props:{class:"h-3 w-3"}}),{c(){e=ce("div"),n=ce("div"),t=ce("p"),s=He(r),a=ge(),o=ce("p"),p=He(u),_=He("Km"),b=ge(),$=ce("div"),P=ce("div"),L=ce("p"),z=He("Features:"),U=He(F),j=ge(),J=ce("div"),At&&At.c(),pe=ge(),re=ce("div"),q(te.$$.fragment),de=ge(),me=ce("p"),we=He(Y),Ce=ge(),_e=ce("div"),q(fe.$$.fragment),Ee=ge(),je=ce("p"),nt=He(ke),bt=ge(),this.h()},l(Et){e=ue(Et,"DIV",{class:!0});var It=$e(e);n=ue(It,"DIV",{class:!0});var nn=$e(n);t=ue(nn,"P",{});var yn=$e(t);s=Ze(yn,r),yn.forEach(I),a=ve(nn),o=ue(nn,"P",{class:!0});var un=$e(o);p=Ze(un,u),_=Ze(un,"Km"),un.forEach(I),nn.forEach(I),b=ve(It),$=ue(It,"DIV",{class:!0});var Kt=$e($);P=ue(Kt,"DIV",{class:!0});var Tt=$e(P);L=ue(Tt,"P",{class:!0});var Vt=$e(L);z=Ze(Vt,"Features:"),U=Ze(Vt,F),Vt.forEach(I),Tt.forEach(I),j=ve(Kt),J=ue(Kt,"DIV",{class:!0});var Ye=$e(J);At&&At.l(Ye),pe=ve(Ye),re=ue(Ye,"DIV",{class:!0});var Nt=$e(re);Z(te.$$.fragment,Nt),de=ve(Nt),me=ue(Nt,"P",{class:!0});var Mt=$e(me);we=Ze(Mt,Y),Mt.forEach(I),Nt.forEach(I),Ce=ve(Ye),_e=ue(Ye,"DIV",{class:!0});var Qe=$e(_e);Z(fe.$$.fragment,Qe),Ee=ve(Qe),je=ue(Qe,"P",{class:!0});var en=$e(je);nt=Ze(en,ke),en.forEach(I),Qe.forEach(I),Ye.forEach(I),Kt.forEach(I),It.forEach(I),bt=ve(Et),this.h()},h(){se(o,"class","text-sm text-muted-foreground"),se(n,"class","flex justify-between gap-4"),se(L,"class","text-xs text-muted-foreground"),se(P,"class","flex"),se(me,"class","text-muted-foreground"),se(re,"class","flex gap-2"),se(je,"class","text-muted-foreground"),se(_e,"class","flex gap-2"),se(J,"class","flex gap-4"),se($,"class","flex justify-between gap-2"),se(e,"class","flex flex-col w-full gap-2")},m(Et,It){B(Et,e,It),ae(e,n),ae(n,t),ae(t,s),ae(n,a),ae(n,o),ae(o,p),ae(o,_),ae(e,b),ae(e,$),ae($,P),ae(P,L),ae(L,z),ae(L,U),ae($,j),ae($,J),At&&At.m(J,null),ae(J,pe),ae(J,re),G(te,re,null),ae(re,de),ae(re,me),ae(me,we),ae(J,Ce),ae(J,_e),G(fe,_e,null),ae(_e,Ee),ae(_e,je),ae(je,nt),B(Et,bt,It),zt=!0},p(Et,It){(!zt||It&8)&&r!==(r=Et[22].name+"")&&Qt(s,r),(!zt||It&9)&&u!==(u=Math.round(Et[8](Et[22].lngLat,Et[0].getCenter())/100)/10+"")&&Qt(p,u),(!zt||It&8)&&F!==(F=Et[22].features.join(", ")+"")&&Qt(U,F),Et[22].isFavourite?At?It&8&&T(At,1):(At=r1(),At.c(),T(At,1),At.m(J,pe)):At&&(vt(),E(At,1,1,()=>{At=null}),yt()),(!zt||It&8)&&Y!==(Y=Et[22].likes+"")&&Qt(we,Y),(!zt||It&8)&&ke!==(ke=Et[22].comments.length+"")&&Qt(nt,ke)},i(Et){zt||(T(At),T(te.$$.fragment,Et),T(fe.$$.fragment,Et),zt=!0)},o(Et){E(At),E(te.$$.fragment,Et),E(fe.$$.fragment,Et),zt=!1},d(Et){Et&&(I(e),I(bt)),At&&At.d(),H(te),H(fe)}}}function s1(i,e){let n,t,r;return t=new au({props:{value:e[22].id.toString(),onSelect:e[7],class:"cursor-pointer",$$slots:{default:[zM]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&8&&(o.value=e[22].id.toString()),a&536870921&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function LM(i){let e=[],n=new Map,t,r,s=dn(i[3]);const a=o=>o[22].id;for(let o=0;o<s.length;o+=1){let u=Jg(i,s,o),p=a(u);n.set(p,e[o]=s1(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&393&&(s=dn(o[3]),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,s1,t,Jg),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function i1(i){let e,n=i[19].address.label+"",t;return{c(){e=ce("p"),t=He(n),this.h()},l(r){e=ue(r,"P",{class:!0});var s=$e(e);t=Ze(s,n),s.forEach(I),this.h()},h(){se(e,"class","text-xs text-muted-foreground")},m(r,s){B(r,e,s),ae(e,t)},p(r,s){s&16&&n!==(n=r[19].address.label+"")&&Qt(t,n)},d(r){r&&I(e)}}}function RM(i){let e,n,t,r=i[19].title+"",s,a,o,u=Math.round(i[8](i[19].position,i[0].getCenter())/100)/10+"",p,_,b,$,P=i[19].address.label!==i[19].title&&i1(i);return{c(){e=ce("div"),n=ce("div"),t=ce("p"),s=He(r),a=ge(),o=ce("p"),p=He(u),_=He("Km"),b=ge(),P&&P.c(),$=ge(),this.h()},l(L){e=ue(L,"DIV",{class:!0});var z=$e(e);n=ue(z,"DIV",{class:!0});var F=$e(n);t=ue(F,"P",{});var U=$e(t);s=Ze(U,r),U.forEach(I),a=ve(F),o=ue(F,"P",{class:!0});var j=$e(o);p=Ze(j,u),_=Ze(j,"Km"),j.forEach(I),F.forEach(I),b=ve(z),P&&P.l(z),z.forEach(I),$=ve(L),this.h()},h(){se(o,"class","text-sm text-muted-foreground"),se(n,"class","flex justify-between gap-4"),se(e,"class","flex flex-col w-full gap-0.5")},m(L,z){B(L,e,z),ae(e,n),ae(n,t),ae(t,s),ae(n,a),ae(n,o),ae(o,p),ae(o,_),ae(e,b),P&&P.m(e,null),B(L,$,z)},p(L,z){z&16&&r!==(r=L[19].title+"")&&Qt(s,r),z&17&&u!==(u=Math.round(L[8](L[19].position,L[0].getCenter())/100)/10+"")&&Qt(p,u),L[19].address.label!==L[19].title?P?P.p(L,z):(P=i1(L),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},d(L){L&&(I(e),I($)),P&&P.d()}}}function o1(i,e){let n,t,r;return t=new au({props:{value:e[19].id,onSelect:e[6],class:"cursor-pointer",$$slots:{default:[RM]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.value=e[19].id),a&536870929&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function OM(i){let e=[],n=new Map,t,r,s=dn(i[4]);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let u=Yg(i,s,o),p=a(u);n.set(p,e[o]=o1(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&337&&(s=dn(o[4]),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,o1,t,Yg),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function FM(i){let e;return{c(){e=He("No results found.")},l(n){e=Ze(n,"No results found.")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function BM(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-11244tn"&&(e.innerHTML=n),this.h()},h(){se(e,"class","h-[300px] w-full flex items-center justify-center")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function NM(i){let e,n,t,r;const s=[PM,TM,IM,SM,CM],a=[];function o(u,p){return u[5]?0:u[4].length===0&&u[3].length===0?1:u[3].length===0?2:u[4].length===0?3:4}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function VM(i){let e,n,t,r,s;function a(u){i[12](u)}let o={placeholder:"Search by POI name or location"};return i[1]!==void 0&&(o.value=i[1]),e=new Vv({props:o}),Zt.push(()=>An(e,"value",a)),r=new W4({props:{class:"my-2",$$slots:{default:[NM]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),t=ge(),q(r.$$.fragment)},l(u){Z(e.$$.fragment,u),t=ve(u),Z(r.$$.fragment,u)},m(u,p){G(e,u,p),B(u,t,p),G(r,u,p),s=!0},p(u,p){const _={};!n&&p&2&&(n=!0,_.value=u[1],En(()=>n=!1)),e.$set(_);const b={};p&536870969&&(b.$$scope={dirty:p,ctx:u}),r.$set(b)},i(u){s||(T(e.$$.fragment,u),T(r.$$.fragment,u),s=!0)},o(u){E(e.$$.fragment,u),E(r.$$.fragment,u),s=!1},d(u){u&&I(t),H(e,u),H(r,u)}}}function UM(i){let e,n,t,r,s;e=new yr({props:{class:"text-secondary-foreground w-full sm:max-w-md bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[kM]},$$scope:{ctx:i}}}),e.$on("click",i[11]);function a(u){i[13](u)}let o={shouldFilter:!1,loop:!0,$$slots:{default:[VM]},$$scope:{ctx:i}};return i[2]!==void 0&&(o.open=i[2]),t=new D4({props:o}),Zt.push(()=>An(t,"open",a)),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(u){Z(e.$$.fragment,u),n=ve(u),Z(t.$$.fragment,u)},m(u,p){G(e,u,p),B(u,n,p),G(t,u,p),s=!0},p(u,[p]){const _={};p&536870912&&(_.$$scope={dirty:p,ctx:u}),e.$set(_);const b={};p&536870971&&(b.$$scope={dirty:p,ctx:u}),!r&&p&4&&(r=!0,b.open=u[2],En(()=>r=!1)),t.$set(b)},i(u){s||(T(e.$$.fragment,u),T(t.$$.fragment,u),s=!0)},o(u){E(e.$$.fragment,u),E(t.$$.fragment,u),s=!1},d(u){u&&I(n),H(e,u),H(t,u)}}}const jM=30;function qM(i,e,n){let t,{map:r}=e;const s=Tl();let a=!1,o=!1,u,p=!1,_=lo.CancelToken.source(),b=lo.CancelToken.source(),$=[];const P=async()=>{n(9,a=!0),_&&_.cancel(),_=lo.CancelToken.source();const te=_.token,de=new URLSearchParams({name:u}),me=await lo.get(`/api/poi/search?${de.toString()}`,{cancelToken:te}).catch(Y=>Y);if(me!=null&&me.data){let Y=me.data;Y=Y.map(we=>{const Ce=ba.decode(we);return gf(Ce)?Ce.right:{error:!0,message:"Invalid POI object received from API: "+Ce.left}}),Y=Y.filter(we=>"error"in we&&we.error?(console.error(we.message),!1):!0),n(3,$=Y)}n(9,a=!1)};let L=[];const z=async()=>{var we;n(10,o=!0),b&&b.cancel(),b=lo.CancelToken.source();const te=b.token,de=r.getCenter(),me=new URLSearchParams({q:u,at:`${de.lat},${de.lng}`,limit:jM.toString(),lang:"en",apiKey:CE}),Y=await lo.get(`https://autosuggest.search.hereapi.com/v1/autosuggest?${me.toString()}`,{cancelToken:te}).catch(Ce=>Ce);if((we=Y==null?void 0:Y.data)!=null&&we.items){const Ce=Y.data.items;n(4,L=Ce.filter(_e=>{var fe;return _e.id!==void 0&&_e.title!==void 0&&((fe=_e.address)==null?void 0:fe.label)!==void 0&&_e.position!==void 0&&_e.distance!==void 0}))}n(10,o=!1)},F=te=>{const de=L.find(({id:me})=>me===te);de&&r.flyTo({center:{lat:de.position.lat,lng:de.position.lng},zoom:Math.min(16,Math.max(14,r.getZoom())),padding:{top:300}}),n(2,p=!1)},U=te=>{const de=$.find(({id:me})=>me===parseInt(te));de&&(r.flyTo({center:de.lngLat,zoom:Math.min(16,Math.max(14,r.getZoom())),padding:{top:300}}),s("poiSelected",parseInt(te))),n(2,p=!1)},j=(te,de)=>{const Y=te.lat*Math.PI/180,we=de.lat*Math.PI/180,Ce=(de.lat-te.lat)*Math.PI/180,_e=(de.lng-te.lng)*Math.PI/180,fe=Math.sin(Ce/2)*Math.sin(Ce/2)+Math.cos(Y)*Math.cos(we)*Math.sin(_e/2)*Math.sin(_e/2);return 6371e3*(2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe)))},J=()=>n(2,p=!0);function pe(te){u=te,n(1,u)}function re(te){p=te,n(2,p)}return i.$$set=te=>{"map"in te&&n(0,r=te.map)},i.$$.update=()=>{i.$$.dirty&1536&&n(5,t=a||o),i.$$.dirty&2&&u!=null&&u.trim()&&(P(),z())},[r,u,p,$,L,t,F,U,j,a,o,J,pe,re]}class GM extends it{constructor(e){super(),ot(this,e,qM,UM,st,{map:0})}}function HM(i){let e,n;return e=new GM({props:{map:i[4]}}),e.$on("poiSelected",i[9]),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.map=t[4]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function ZM(i){let e,n="Search By POI Name Or Location";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-1fty8wh"&&(e.textContent=n),this.h()},h(){se(e,"class","text-xs flex items-center")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function WM(i){let e,n,t,r;return e=new Fo({props:{class:"w-full sm:max-w-md",$$slots:{default:[HM]},$$scope:{ctx:i}}}),t=new Bo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[ZM]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&67108880&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&67108864&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function KM(i){let e,n,t,r;function s(u){i[12](u)}function a(u){i[13](u)}let o={title:"POI Features",poiFeatureOptions:i[3]};return i[1]!==void 0&&(o.filterValues=i[1]),i[6]!==void 0&&(o.forceClosePopover=i[6]),e=new k4({props:o}),Zt.push(()=>An(e,"filterValues",s)),Zt.push(()=>An(e,"forceClosePopover",a)),{c(){q(e.$$.fragment)},l(u){Z(e.$$.fragment,u)},m(u,p){G(e,u,p),r=!0},p(u,p){const _={};p&8&&(_.poiFeatureOptions=u[3]),!n&&p&2&&(n=!0,_.filterValues=u[1],En(()=>n=!1)),!t&&p&64&&(t=!0,_.forceClosePopover=u[6],En(()=>t=!1)),e.$set(_)},i(u){r||(T(e.$$.fragment,u),r=!0)},o(u){E(e.$$.fragment,u),r=!1},d(u){H(e,u)}}}function XM(i){let e,n="Filter By POI Features";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-1oglnlj"&&(e.textContent=n),this.h()},h(){se(e,"class","text-xs flex items-center")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function JM(i){let e,n,t,r;return e=new Fo({props:{$$slots:{default:[KM]},$$scope:{ctx:i}}}),t=new Bo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[XM]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&67108938&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&67108864&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function a1(i){let e,n,t;function r(a){i[18](a)}let s={openDelay:0,closeDelay:0,onOutsideClick:i[17],$$slots:{default:[tD]},$$scope:{ctx:i}};return i[5][2]!==void 0&&(s.open=i[5][2]),e=new Lo({props:s}),Zt.push(()=>An(e,"open",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,o){const u={};o&192&&(u.onOutsideClick=a[17]),o&67108866&&(u.$$scope={dirty:o,ctx:a}),!n&&o&32&&(n=!0,u.open=a[5][2],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function YM(i){let e,n;return e=new Qw({}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function QM(i){let e,n;return e=new Ud({props:{class:"bg-background",onPressedChange:i[16],$$slots:{default:[YM]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.onPressedChange=t[16]),r&67108864&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function eD(i){let e,n="Clear POI Features Filter";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-r3d05h"&&(e.textContent=n),this.h()},h(){se(e,"class","text-xs flex items-center")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function tD(i){let e,n,t,r;return e=new Fo({props:{$$slots:{default:[QM]},$$scope:{ctx:i}}}),t=new Bo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[eD]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&67108866&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&67108864&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function nD(i){let e,n;return e=new Al({}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function rD(i){let e,n,t;function r(a){i[19](a)}let s={"aria-label":"Show Favourites Only",class:"text-secondary-foreground hover:text-accent-foreground data-[state=off]:hover:bg-accent data-[state=off]:bg-background data-[state=on]:bg-primary data-[state=on]:hover:brightness-90 data-[state=on]:text-error-content",$$slots:{default:[nD]},$$scope:{ctx:i}};return i[2]!==void 0&&(s.pressed=i[2]),e=new Ud({props:s}),Zt.push(()=>An(e,"pressed",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,o){const u={};o&67108864&&(u.$$scope={dirty:o,ctx:a}),!n&&o&4&&(n=!0,u.pressed=a[2],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function sD(i){let e,n="Show Favourites Only";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-14grtso"&&(e.textContent=n),this.h()},h(){se(e,"class","text-xs flex items-center")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function iD(i){let e,n,t,r;return e=new Fo({props:{$$slots:{default:[rD]},$$scope:{ctx:i}}}),t=new Bo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[sD]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&67108868&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&67108864&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function oD(i){let e,n,t,r;function s(u){i[22](u)}function a(u){i[23](u)}let o={};return i[0]!==void 0&&(o.selectedMapLayer=i[0]),i[7]!==void 0&&(o.forceClosePopover=i[7]),e=new o5({props:o}),Zt.push(()=>An(e,"selectedMapLayer",s)),Zt.push(()=>An(e,"forceClosePopover",a)),{c(){q(e.$$.fragment)},l(u){Z(e.$$.fragment,u)},m(u,p){G(e,u,p),r=!0},p(u,p){const _={};!n&&p&1&&(n=!0,_.selectedMapLayer=u[0],En(()=>n=!1)),!t&&p&128&&(t=!0,_.forceClosePopover=u[7],En(()=>t=!1)),e.$set(_)},i(u){r||(T(e.$$.fragment,u),r=!0)},o(u){E(e.$$.fragment,u),r=!1},d(u){H(e,u)}}}function aD(i){let e,n="Change Map Layer";return{c(){e=ce("div"),e.textContent=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-1habla0"&&(e.textContent=n),this.h()},h(){se(e,"class","text-xs flex items-center")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function lD(i){let e,n,t,r;return e=new Fo({props:{$$slots:{default:[oD]},$$scope:{ctx:i}}}),t=new Bo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[aD]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&67108993&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&67108864&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function cD(i){let e,n,t,r,s,a,o,u,p,_,b,$,P,L,z,F;function U(we){i[11](we)}let j={openDelay:0,closeDelay:0,onOutsideClick:i[10],$$slots:{default:[WM]},$$scope:{ctx:i}};i[5][0]!==void 0&&(j.open=i[5][0]),n=new Lo({props:j}),Zt.push(()=>An(n,"open",U));function J(we){i[15](we)}let pe={openDelay:0,closeDelay:0,onOutsideClick:i[14],$$slots:{default:[JM]},$$scope:{ctx:i}};i[5][1]!==void 0&&(pe.open=i[5][1]),o=new Lo({props:pe}),Zt.push(()=>An(o,"open",J));let re=i[1].length>0&&a1(i);function te(we){i[21](we)}let de={openDelay:0,closeDelay:0,onOutsideClick:i[20],$$slots:{default:[iD]},$$scope:{ctx:i}};i[5][3]!==void 0&&(de.open=i[5][3]),b=new Lo({props:de}),Zt.push(()=>An(b,"open",te));function me(we){i[25](we)}let Y={openDelay:0,closeDelay:0,onOutsideClick:i[24],$$slots:{default:[lD]},$$scope:{ctx:i}};return i[5][4]!==void 0&&(Y.open=i[5][4]),L=new Lo({props:Y}),Zt.push(()=>An(L,"open",me)),{c(){e=ce("div"),q(n.$$.fragment),r=ge(),s=ce("div"),a=ce("div"),q(o.$$.fragment),p=ge(),re&&re.c(),_=ge(),q(b.$$.fragment),P=ge(),q(L.$$.fragment),this.h()},l(we){e=ue(we,"DIV",{class:!0});var Ce=$e(e);Z(n.$$.fragment,Ce),r=ve(Ce),s=ue(Ce,"DIV",{class:!0});var _e=$e(s);a=ue(_e,"DIV",{class:!0});var fe=$e(a);Z(o.$$.fragment,fe),p=ve(fe),re&&re.l(fe),_=ve(fe),Z(b.$$.fragment,fe),fe.forEach(I),P=ve(_e),Z(L.$$.fragment,_e),_e.forEach(I),Ce.forEach(I),this.h()},h(){se(a,"class","flex gap-2"),se(s,"class","flex justify-between gap-2 grow max-sm:w-full max-sm:overflow-x-auto"),se(e,"class","flex gap-2 max-sm:flex-col w-full sm:overflow-x-auto")},m(we,Ce){B(we,e,Ce),G(n,e,null),ae(e,r),ae(e,s),ae(s,a),G(o,a,null),ae(a,p),re&&re.m(a,null),ae(a,_),G(b,a,null),ae(s,P),G(L,s,null),F=!0},p(we,[Ce]){const _e={};Ce&192&&(_e.onOutsideClick=we[10]),Ce&67108880&&(_e.$$scope={dirty:Ce,ctx:we}),!t&&Ce&32&&(t=!0,_e.open=we[5][0],En(()=>t=!1)),n.$set(_e);const fe={};Ce&128&&(fe.onOutsideClick=we[14]),Ce&67108938&&(fe.$$scope={dirty:Ce,ctx:we}),!u&&Ce&32&&(u=!0,fe.open=we[5][1],En(()=>u=!1)),o.$set(fe),we[1].length>0?re?(re.p(we,Ce),Ce&2&&T(re,1)):(re=a1(we),re.c(),T(re,1),re.m(a,_)):re&&(vt(),E(re,1,1,()=>{re=null}),yt());const Ee={};Ce&192&&(Ee.onOutsideClick=we[20]),Ce&67108868&&(Ee.$$scope={dirty:Ce,ctx:we}),!$&&Ce&32&&($=!0,Ee.open=we[5][3],En(()=>$=!1)),b.$set(Ee);const je={};Ce&64&&(je.onOutsideClick=we[24]),Ce&67108993&&(je.$$scope={dirty:Ce,ctx:we}),!z&&Ce&32&&(z=!0,je.open=we[5][4],En(()=>z=!1)),L.$set(je)},i(we){F||(T(n.$$.fragment,we),T(o.$$.fragment,we),T(re),T(b.$$.fragment,we),T(L.$$.fragment,we),F=!0)},o(we){E(n.$$.fragment,we),E(o.$$.fragment,we),E(re),E(b.$$.fragment,we),E(L.$$.fragment,we),F=!1},d(we){we&&I(e),H(n),H(o),re&&re.d(),H(b),H(L)}}}function uD(i,e,n){let{selectedMapLayer:t}=e,{poiFeatureOptions:r}=e,{poiFeaturesFilter:s}=e,{onlyShowFavourites:a}=e,{map:o}=e,u=[!1,!1,!1,!1,!1],p,_;const b=()=>{n(5,u=new Array(u.length).fill(!1))};function $(fe){Wt.call(this,i,fe)}const P=fe=>{b(),p(),_(),fe.target.focus()};function L(fe){i.$$.not_equal(u[0],fe)&&(u[0]=fe,n(5,u))}function z(fe){s=fe,n(1,s)}function F(fe){p=fe,n(6,p)}const U=fe=>{b(),_(),fe.target.focus()};function j(fe){i.$$.not_equal(u[1],fe)&&(u[1]=fe,n(5,u))}const J=fe=>{fe&&n(1,s=[])},pe=fe=>{b(),p(),_(),fe.target.focus()};function re(fe){i.$$.not_equal(u[2],fe)&&(u[2]=fe,n(5,u))}function te(fe){a=fe,n(2,a)}const de=fe=>{b(),p(),_(),fe.target.focus()};function me(fe){i.$$.not_equal(u[3],fe)&&(u[3]=fe,n(5,u))}function Y(fe){t=fe,n(0,t)}function we(fe){_=fe,n(7,_)}const Ce=fe=>{b(),p(),fe.target.focus()};function _e(fe){i.$$.not_equal(u[4],fe)&&(u[4]=fe,n(5,u))}return i.$$set=fe=>{"selectedMapLayer"in fe&&n(0,t=fe.selectedMapLayer),"poiFeatureOptions"in fe&&n(3,r=fe.poiFeatureOptions),"poiFeaturesFilter"in fe&&n(1,s=fe.poiFeaturesFilter),"onlyShowFavourites"in fe&&n(2,a=fe.onlyShowFavourites),"map"in fe&&n(4,o=fe.map)},[t,s,a,r,o,u,p,_,b,$,P,L,z,F,U,j,J,pe,re,te,de,me,Y,we,Ce,_e]}class fD extends it{constructor(e){super(),ot(this,e,uD,cD,st,{selectedMapLayer:0,poiFeatureOptions:3,poiFeaturesFilter:1,onlyShowFavourites:2,map:4})}}function l1(i,e,n){const t=i.slice();return t[29]=e[n],t}function c1(i,e,n){const t=i.slice();return t[32]=e[n],t[34]=n,t}function u1(i){let e,n,t;function r(a){i[26](a)}let s={onValueChange:i[25],$$slots:{default:[yD]},$$scope:{ctx:i}};return i[10]!==void 0&&(s.value=i[10]),e=new xv({props:s}),Zt.push(()=>An(e,"value",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,o){const u={};o[0]&2561&&(u.onValueChange=a[25]),o[0]&128|o[1]&16&&(u.$$scope={dirty:o,ctx:a}),!n&&o[0]&1024&&(n=!0,u.value=a[10],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function hD(i){let e,n=i[7].length>1?"s":"",t,r;return{c(){e=He("Check-in to nearby POI"),t=He(n),r=He(":")},l(s){e=Ze(s,"Check-in to nearby POI"),t=Ze(s,n),r=Ze(s,":")},m(s,a){B(s,e,a),B(s,t,a),B(s,r,a)},p(s,a){a[0]&128&&n!==(n=s[7].length>1?"s":"")&&Qt(t,n)},d(s){s&&(I(e),I(t),I(r))}}}function dD(i){let e,n=i[32]+"",t;return{c(){e=He(""),t=He(n)},l(r){e=Ze(r,""),t=Ze(r,n)},m(r,s){B(r,e,s),B(r,t,s)},p(r,s){s[0]&128&&n!==(n=r[32]+"")&&Qt(t,n)},d(r){r&&(I(e),I(t))}}}function pD(i){let e=i[32]+"",n;return{c(){n=He(e)},l(t){n=Ze(t,e)},m(t,r){B(t,n,r)},p(t,r){r[0]&128&&e!==(e=t[32]+"")&&Qt(n,e)},d(t){t&&I(n)}}}function f1(i,e){let n,t;function r(o,u){return o[34]===0?pD:dD}let s=r(e),a=s(e);return{key:i,first:null,c(){n=Ue(),a.c(),t=Ue(),this.h()},l(o){n=Ue(),a.l(o),t=Ue(),this.h()},h(){this.first=n},m(o,u){B(o,n,u),a.m(o,u),B(o,t,u)},p(o,u){e=o,s===(s=r(e))&&a?a.p(e,u):(a.d(1),a=s(e),a&&(a.c(),a.m(t.parentNode,t)))},d(o){o&&(I(n),I(t)),a.d(o)}}}function mD(i){let e;return{c(){e=He("View")},l(n){e=Ze(n,"View")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function _D(i){let e;return{c(){e=He("Check-in")},l(n){e=Ze(n,"Check-in")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function h1(i,e){let n,t,r=[],s=new Map,a,o,u,p,_,b,$,P=dn(e[29].name.split(" "));const L=U=>U[34];for(let U=0;U<P.length;U+=1){let j=c1(e,P,U),J=L(j);s.set(J,r[U]=f1(J,j))}function z(){return e[23](e[29])}u=new yr({props:{size:"sm",variant:"secondary",$$slots:{default:[mD]},$$scope:{ctx:e}}}),u.$on("click",z);function F(){return e[24](e[29])}return _=new yr({props:{size:"sm",$$slots:{default:[_D]},$$scope:{ctx:e}}}),_.$on("click",F),{key:i,first:null,c(){n=ce("div"),t=ce("p");for(let U=0;U<r.length;U+=1)r[U].c();a=ge(),o=ce("div"),q(u.$$.fragment),p=ge(),q(_.$$.fragment),b=ge(),this.h()},l(U){n=ue(U,"DIV",{class:!0});var j=$e(n);t=ue(j,"P",{class:!0});var J=$e(t);for(let re=0;re<r.length;re+=1)r[re].l(J);J.forEach(I),a=ve(j),o=ue(j,"DIV",{class:!0});var pe=$e(o);Z(u.$$.fragment,pe),p=ve(pe),Z(_.$$.fragment,pe),pe.forEach(I),b=ve(j),j.forEach(I),this.h()},h(){se(t,"class","max-sm:text-ellipsis max-sm:max-w-48 max-sm:overflow-hidden"),se(o,"class","flex items-center gap-2"),se(n,"class","flex justify-between items-center gap-4 px-4 py-2"),this.first=n},m(U,j){B(U,n,j),ae(n,t);for(let J=0;J<r.length;J+=1)r[J]&&r[J].m(t,null);ae(n,a),ae(n,o),G(u,o,null),ae(o,p),G(_,o,null),ae(n,b),$=!0},p(U,j){e=U,j[0]&128&&(P=dn(e[29].name.split(" ")),r=Yr(r,j,L,1,e,P,s,t,cw,f1,null,c1));const J={};j[1]&16&&(J.$$scope={dirty:j,ctx:e}),u.$set(J);const pe={};j[1]&16&&(pe.$$scope={dirty:j,ctx:e}),_.$set(pe)},i(U){$||(T(u.$$.fragment,U),T(_.$$.fragment,U),$=!0)},o(U){E(u.$$.fragment,U),E(_.$$.fragment,U),$=!1},d(U){U&&I(n);for(let j=0;j<r.length;j+=1)r[j].d();H(u),H(_)}}}function gD(i){let e=[],n=new Map,t,r,s=dn(i[7]);const a=o=>o[29].id;for(let o=0;o<s.length;o+=1){let u=l1(i,s,o),p=a(u);n.set(p,e[o]=h1(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u[0]&12416&&(s=dn(o[7]),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,h1,t,l1),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function vD(i){let e,n,t,r;return e=new wv({props:{class:"hover:no-underline hover:backdrop-opacity-75 active:backdrop-opacity-95 rounded-md h-10 px-4 py-2",$$slots:{default:[hD]},$$scope:{ctx:i}}}),t=new yv({props:{class:"*:p-0 max-h-32 overflow-y-auto",$$slots:{default:[gD]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a[0]&128|a[1]&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a[0]&128|a[1]&16&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function yD(i){let e,n;return e=new bv({props:{value:"check-in-prompt",class:"border-b-0",$$slots:{default:[vD]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[0]&128|r[1]&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function bD(i){let e,n,t,r,s,a,o,u,p;function _(z){i[19](z)}function b(z){i[20](z)}function $(z){i[21](z)}let P={poiFeatureOptions:i[5],map:i[6]};i[1]!==void 0&&(P.selectedMapLayer=i[1]),i[3]!==void 0&&(P.poiFeaturesFilter=i[3]),i[4]!==void 0&&(P.onlyShowFavourites=i[4]),n=new fD({props:P}),Zt.push(()=>An(n,"selectedMapLayer",_)),Zt.push(()=>An(n,"poiFeaturesFilter",b)),Zt.push(()=>An(n,"onlyShowFavourites",$)),n.$on("poiSelected",i[22]);let L=i[7].length>0&&u1(i);return{c(){e=ce("div"),q(n.$$.fragment),a=ge(),L&&L.c(),this.h()},l(z){e=ue(z,"DIV",{class:!0});var F=$e(e);Z(n.$$.fragment,F),a=ve(F),L&&L.l(F),F.forEach(I),this.h()},h(){se(e,"class","z-10 absolute w-full p-2 border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex flex-col gap-2 justify-between")},m(z,F){B(z,e,F),G(n,e,null),ae(e,a),L&&L.m(e,null),i[27](e),o=!0,u||(p=mt(window,"resize",i[18]),u=!0)},p(z,F){const U={};F[0]&32&&(U.poiFeatureOptions=z[5]),F[0]&64&&(U.map=z[6]),!t&&F[0]&2&&(t=!0,U.selectedMapLayer=z[1],En(()=>t=!1)),!r&&F[0]&8&&(r=!0,U.poiFeaturesFilter=z[3],En(()=>r=!1)),!s&&F[0]&16&&(s=!0,U.onlyShowFavourites=z[4],En(()=>s=!1)),n.$set(U),z[7].length>0?L?(L.p(z,F),F[0]&128&&T(L,1)):(L=u1(z),L.c(),T(L,1),L.m(e,null)):L&&(vt(),E(L,1,1,()=>{L=null}),yt())},i(z){o||(T(n.$$.fragment,z),T(L),o=!0)},o(z){E(n.$$.fragment,z),E(L),o=!1},d(z){z&&I(e),H(n),L&&L.d(),i[27](null),u=!1,p()}}}function wD(i,e,n){let{selectedMapLayer:t}=e,{searchBar:r}=e,{poiFeatureOptions:s}=e,{poiFeaturesFilter:a}=e,{onlyShowFavourites:o}=e,{map:u}=e,{checkInCandidates:p}=e,{updateSearchBarOffset:_}=e,{idOfSelectedPOI:b}=e,{userLocation:$}=e,{fetchCheckInCandidates:P}=e,{pointsOfInterest:L}=e,z="",F=null;const U=Tl(),j=ke=>{n(10,z="");const nt=L.find(({id:bt})=>bt===ke);nt&&u.flyTo({center:nt.lngLat,zoom:Math.min(16,Math.max(14,u.getZoom())),padding:{top:300}}),U("poiSelected",ke)};let J=!0,pe=0;const re=async ke=>{if($===void 0)return;if((await fetch("/api/check-in",{method:"POST",body:JSON.stringify({poi_id:ke,latitude:$.lat,longitude:$.lat,accuracy_meters:$.accuracyMeters}),headers:{"Content-Type":"application/json"}})).ok||md.error("Failed to check-in at POI, contact admin for details."),P(),await(await fetch("/api/check-in/single?poi_id="+encodeURIComponent(ke))).json()){md.success("Successfully checked in at POI!"),Q0.checkForUpdates();const At=L.find(({id:Et})=>ke===Et);At!==void 0&&(At.checkedIn=!0,n(14,L))}},te=async()=>{if(u==null||u.resize(),z!==""){const ke=z;n(10,z=""),await Fw(250),_(),n(10,z=ke)}else _()};function de(ke){t=ke,n(1,t)}function me(ke){a=ke,n(3,a)}function Y(ke){o=ke,n(4,o)}function we(ke){Wt.call(this,i,ke)}const Ce=ke=>j(ke.id),_e=ke=>re(ke.id),fe=ke=>{ke!==void 0&&ke!==""?(n(9,J=!1),n(11,F=b),n(0,b=null)):F!==null&&(n(9,J=!1),n(0,b=F))};function Ee(ke){z=ke,n(10,z),n(7,p),n(0,b),n(9,J)}function je(ke){Zt[ke?"unshift":"push"](()=>{r=ke,n(2,r)})}return i.$$set=ke=>{"selectedMapLayer"in ke&&n(1,t=ke.selectedMapLayer),"searchBar"in ke&&n(2,r=ke.searchBar),"poiFeatureOptions"in ke&&n(5,s=ke.poiFeatureOptions),"poiFeaturesFilter"in ke&&n(3,a=ke.poiFeaturesFilter),"onlyShowFavourites"in ke&&n(4,o=ke.onlyShowFavourites),"map"in ke&&n(6,u=ke.map),"checkInCandidates"in ke&&n(7,p=ke.checkInCandidates),"updateSearchBarOffset"in ke&&n(8,_=ke.updateSearchBarOffset),"idOfSelectedPOI"in ke&&n(0,b=ke.idOfSelectedPOI),"userLocation"in ke&&n(15,$=ke.userLocation),"fetchCheckInCandidates"in ke&&n(16,P=ke.fetchCheckInCandidates),"pointsOfInterest"in ke&&n(14,L=ke.pointsOfInterest)},i.$$.update=()=>{i.$$.dirty[0]&128&&p.length===0&&n(10,z=""),i.$$.dirty[0]&513&&(b!==null?n(10,z=""):J?n(11,F=null):n(9,J=!0)),i.$$.dirty[0]&131456&&(async()=>(p.length>0&&pe===0||p.length===0&&pe>0)&&(n(17,pe=p.length),await pi(),_()))()},[b,t,r,a,o,s,u,p,_,J,z,F,j,re,L,$,P,pe,te,de,me,Y,we,Ce,_e,fe,Ee,je]}class xD extends it{constructor(e){super(),ot(this,e,wD,bD,st,{selectedMapLayer:1,searchBar:2,poiFeatureOptions:5,poiFeaturesFilter:3,onlyShowFavourites:4,map:6,checkInCandidates:7,updateSearchBarOffset:8,idOfSelectedPOI:0,userLocation:15,fetchCheckInCandidates:16,pointsOfInterest:14},null,[-1,-1])}}const{Map:$D}=Sd;function dd(i){const e=i.slice(),n=e[21](e[3]);return e[45]=n,e}function d1(i,e,n){const t=i.slice();return t[46]=e[n].lngLat,t[47]=e[n].name,t[48]=e[n].id,t[49]=e[n].isFavourite,t[50]=e[n].checkedIn,t}function kD(i){let e,n,t,r,s,a,o,u,p,_,b,$,P,L,z;function F(_e){i[24](_e)}let U={style:i[5].URI,class:"h-full w-full absolute",zoom:i[11]?6:1,center:[i[10].lon,i[10].lat],attributionControl:!1,$$slots:{default:[AD]},$$scope:{ctx:i}};i[6]!==void 0&&(U.map=i[6]),e=new _I({props:U}),Zt.push(()=>An(e,"map",F)),e.$on("moveend",i[19]),e.$on("zoomend",i[19]);function j(_e){i[25](_e)}function J(_e){i[26](_e)}function pe(_e){i[27](_e)}function re(_e){i[28](_e)}function te(_e){i[29](_e)}function de(_e){i[30](_e)}let me={poiFeatureOptions:i[7],map:i[6],checkInCandidates:i[13],updateSearchBarOffset:i[17],userLocation:i[4],fetchCheckInCandidates:i[18]};i[8]!==void 0&&(me.searchBar=i[8]),i[5]!==void 0&&(me.selectedMapLayer=i[5]),i[0]!==void 0&&(me.poiFeaturesFilter=i[0]),i[1]!==void 0&&(me.onlyShowFavourites=i[1]),i[3]!==void 0&&(me.idOfSelectedPOI=i[3]),i[2]!==void 0&&(me.pointsOfInterest=i[2]),r=new xD({props:me}),Zt.push(()=>An(r,"searchBar",j)),Zt.push(()=>An(r,"selectedMapLayer",J)),Zt.push(()=>An(r,"poiFeaturesFilter",pe)),Zt.push(()=>An(r,"onlyShowFavourites",re)),Zt.push(()=>An(r,"idOfSelectedPOI",te)),Zt.push(()=>An(r,"pointsOfInterest",de)),r.$on("poiSelected",i[31]);let Y=i[3]!==null&&m1(dd(i));function we(_e){i[36](_e)}let Ce={onOpenChange:i[35],$$slots:{default:[OD]},$$scope:{ctx:i}};return i[15]!==void 0&&(Ce.open=i[15]),P=new Sa({props:Ce}),Zt.push(()=>An(P,"open",we)),{c(){q(e.$$.fragment),t=ge(),q(r.$$.fragment),b=ge(),Y&&Y.c(),$=ge(),q(P.$$.fragment)},l(_e){Z(e.$$.fragment,_e),t=ve(_e),Z(r.$$.fragment,_e),b=ve(_e),Y&&Y.l(_e),$=ve(_e),Z(P.$$.fragment,_e)},m(_e,fe){G(e,_e,fe),B(_e,t,fe),G(r,_e,fe),B(_e,b,fe),Y&&Y.m(_e,fe),B(_e,$,fe),G(P,_e,fe),z=!0},p(_e,fe){const Ee={};fe[0]&32&&(Ee.style=_e[5].URI),fe[0]&2048&&(Ee.zoom=_e[11]?6:1),fe[0]&1024&&(Ee.center=[_e[10].lon,_e[10].lat]),fe[0]&65608|fe[1]&4194304&&(Ee.$$scope={dirty:fe,ctx:_e}),!n&&fe[0]&64&&(n=!0,Ee.map=_e[6],En(()=>n=!1)),e.$set(Ee);const je={};fe[0]&128&&(je.poiFeatureOptions=_e[7]),fe[0]&64&&(je.map=_e[6]),fe[0]&8192&&(je.checkInCandidates=_e[13]),fe[0]&16&&(je.userLocation=_e[4]),!s&&fe[0]&256&&(s=!0,je.searchBar=_e[8],En(()=>s=!1)),!a&&fe[0]&32&&(a=!0,je.selectedMapLayer=_e[5],En(()=>a=!1)),!o&&fe[0]&1&&(o=!0,je.poiFeaturesFilter=_e[0],En(()=>o=!1)),!u&&fe[0]&2&&(u=!0,je.onlyShowFavourites=_e[1],En(()=>u=!1)),!p&&fe[0]&8&&(p=!0,je.idOfSelectedPOI=_e[3],En(()=>p=!1)),!_&&fe[0]&4&&(_=!0,je.pointsOfInterest=_e[2],En(()=>_=!1)),r.$set(je),_e[3]!==null?Y?(Y.p(dd(_e),fe),fe[0]&8&&T(Y,1)):(Y=m1(dd(_e)),Y.c(),T(Y,1),Y.m($.parentNode,$)):Y&&(vt(),E(Y,1,1,()=>{Y=null}),yt());const ke={};fe[1]&4194304&&(ke.$$scope={dirty:fe,ctx:_e}),!L&&fe[0]&32768&&(L=!0,ke.open=_e[15],En(()=>L=!1)),P.$set(ke)},i(_e){z||(T(e.$$.fragment,_e),T(r.$$.fragment,_e),T(Y),T(P.$$.fragment,_e),z=!0)},o(_e){E(e.$$.fragment,_e),E(r.$$.fragment,_e),E(Y),E(P.$$.fragment,_e),z=!1},d(_e){_e&&(I(t),I(b),I($)),H(e,_e),H(r,_e),Y&&Y.d(_e),H(P,_e)}}}function CD(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-ava9pj"&&(e.innerHTML=n),this.h()},h(){se(e,"class","grow flex items-center justify-center")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function SD(i){let e,n,t;return n=new W2({props:{class:"h-5 w-5"}}),{c(){e=ce("span"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","text-xl")},m(r,s){B(r,e,s),G(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function ID(i){let e,n,t;return n=new Al({props:{class:"h-5 w-5"}}),{c(){e=ce("span"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","text-xl")},m(r,s){B(r,e,s),G(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function TD(i){let e,n,t;return n=new Td({props:{class:"h-5 w-5"}}),{c(){e=ce("span"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","text-xl")},m(r,s){B(r,e,s),G(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function PD(i){let e,n=i[47]+"",t;return{c(){e=ce("div"),t=He(n),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=$e(e);t=Ze(s,n),s.forEach(I),this.h()},h(){se(e,"class","text-lg font-bold text-black")},m(r,s){B(r,e,s),ae(e,t)},p(r,s){s[0]&65536&&n!==(n=r[47]+"")&&Qt(t,n)},d(r){r&&I(e)}}}function ED(i){let e,n,t,r,s,a;const o=[TD,ID,SD],u=[];function p(_,b){return _[50]?0:_[49]?1:2}return e=p(i),n=u[e]=o[e](i),r=new kI({props:{openOn:"hover",offset:[0,-10],$$slots:{default:[PD]},$$scope:{ctx:i}}}),{c(){n.c(),t=ge(),q(r.$$.fragment),s=ge()},l(_){n.l(_),t=ve(_),Z(r.$$.fragment,_),s=ve(_)},m(_,b){u[e].m(_,b),B(_,t,b),G(r,_,b),B(_,s,b),a=!0},p(_,b){let $=e;e=p(_),e!==$&&(vt(),E(u[$],1,1,()=>{u[$]=null}),yt(),n=u[e],n||(n=u[e]=o[e](_),n.c()),T(n,1),n.m(t.parentNode,t));const P={};b[0]&65536|b[1]&4194304&&(P.$$scope={dirty:b,ctx:_}),r.$set(P)},i(_){a||(T(n),T(r.$$.fragment,_),a=!0)},o(_){E(n),E(r.$$.fragment,_),a=!1},d(_){_&&(I(t),I(s)),u[e].d(_),H(r,_)}}}function p1(i,e){let n,t,r;function s(){return e[23](e[48],e[46])}return t=new bI({props:{lngLat:e[46],class:"z-10 grid h-8 w-8 place-items-center rounded-full border border-zinc-600 text-black shadow-2xl focus:outline-2 focus:outline-black"+(e[3]===e[48]?" border-4 box-content":"")+(e[50]?" bg-cyan-300":e[49]?" bg-green-300":" bg-red-300"),$$slots:{default:[ED]},$$scope:{ctx:e}}}),t.$on("click",s),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(a){n=Ue(),Z(t.$$.fragment,a),this.h()},h(){this.first=n},m(a,o){B(a,n,o),G(t,a,o),r=!0},p(a,o){e=a;const u={};o[0]&65536&&(u.lngLat=e[46]),o[0]&65544&&(u.class="z-10 grid h-8 w-8 place-items-center rounded-full border border-zinc-600 text-black shadow-2xl focus:outline-2 focus:outline-black"+(e[3]===e[48]?" border-4 box-content":"")+(e[50]?" bg-cyan-300":e[49]?" bg-green-300":" bg-red-300")),o[0]&65536|o[1]&4194304&&(u.$$scope={dirty:o,ctx:e}),t.$set(u)},i(a){r||(T(t.$$.fragment,a),r=!0)},o(a){E(t.$$.fragment,a),r=!1},d(a){a&&I(n),H(t,a)}}}function AD(i){let e=[],n=new $D,t,r,s=dn(i[16]);const a=o=>o[48];for(let o=0;o<s.length;o+=1){let u=d1(i,s,o),p=a(u);n.set(p,e[o]=p1(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u[0]&4259912&&(s=dn(o[16]),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,p1,t,d1),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function m1(i){let e,n,t,r;return n=new yE({props:{closePOICard:i[32],poi:i[45],userNickname:i[14],refreshPOIs:i[33]}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(s){e=ue(s,"DIV",{class:!0,style:!0});var a=$e(e);Z(n.$$.fragment,a),a.forEach(I),this.h()},h(){se(e,"class","absolute w-full max-w-md md:max-w-xl top-2 right-2"),se(e,"style",t=`margin-top: ${i[9]}px;`)},m(s,a){B(s,e,a),G(n,e,null),r=!0},p(s,a){const o={};a[0]&8&&(o.closePOICard=s[32]),a[0]&8&&(o.poi=s[45]),a[0]&16384&&(o.userNickname=s[14]),a[0]&4&&(o.refreshPOIs=s[33]),n.$set(o),(!r||a[0]&512&&t!==(t=`margin-top: ${s[9]}px;`))&&se(e,"style",t)},i(s){r||(T(n.$$.fragment,s),r=!0)},o(s){E(n.$$.fragment,s),r=!1},d(s){s&&I(e),H(n)}}}function MD(i){let e;return{c(){e=He("Please allow geolocation permissions and turn on location services.")},l(n){e=Ze(n,"Please allow geolocation permissions and turn on location services.")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function DD(i){let e,n;return e=new ou({props:{$$slots:{default:[MD]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&4194304&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function zD(i){let e;return{c(){e=He("Confirm & Refresh Page")},l(n){e=Ze(n,"Confirm & Refresh Page")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function LD(i){let e,n;return e=new yr({props:{$$slots:{default:[zD]},$$scope:{ctx:i}}}),e.$on("click",i[34]),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&4194304&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function RD(i){let e,n,t,r;return e=new iu({props:{$$slots:{default:[DD]},$$scope:{ctx:i}}}),t=new DT({props:{$$slots:{default:[LD]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a[1]&4194304&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a[1]&4194304&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function OD(i){let e,n;return e=new Ca({props:{$$slots:{default:[RD]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r[1]&4194304&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function FD(i){let e,n,t,r;const s=[CD,kD],a=[];function o(u,p){return u[12]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}const ba=vf({id:Sl,isFavourite:Fm,lngLat:vf({lng:Sl,lat:Sl}),name:kl,description:kl,features:nd(kl),likes:Sl,comments:nd(vf({text:kl,nickname:kl})),pictures:nd(kl),checkedIn:Fm});function BD(i,e,n){let t,r;on(i,ev,Qe=>n(42,r=Qe));const s=r.url.searchParams.get("focus-poi");let a=ya.find(({value:Qe})=>Qe==="outdoor");Sr(()=>{const Qe=localStorage.getItem("preferredMapLayer");Qe&&ya.map(({value:en})=>en).includes(Qe)&&n(5,a=ya.find(({value:en})=>en===Qe))});let o,u,p,_,b,$=[],P=!1,L,z=64,F=[],U=null,j={lon:0,lat:0},J=!1,pe=!0,re,te=[],de=lo.CancelToken.source();const me=()=>{L&&n(9,z=L.offsetHeight)},Y=async()=>{de&&de.cancel(),de=lo.CancelToken.source();const Qe=de.token,en=new URLSearchParams({latitude:re.lat.toString(),longitude:re.lng.toString(),accuracy_meters:re.accuracyMeters.toString()}),et=await lo.get(`/api/check-in/candidates?${en.toString()}`,{cancelToken:Qe}).catch(sn=>sn);if(et!=null&&et.data){let sn=et.data;sn=sn.map(ln=>{const We=ba.decode(ln);return gf(We)?We.right:{error:!0,message:"Invalid POI object received from API: "+We.left}}),sn=sn.filter(ln=>"error"in ln&&ln.error?(console.error(ln.message),!1):!0),n(13,te=sn)}};let we=null;const Ce=Qe=>JSON.stringify(Qe,Object.keys(Qe).sort()),_e=async()=>{const Qe=o.getBounds(),en=Qe._ne.lat,et=Qe._sw.lat,sn=Qe._ne.lng,ln=Qe._sw.lng,We={north:en>90?"90":en.toString(),south:et<-90?"-90":et.toString(),east:sn>180?"180":sn.toString(),west:ln<-180?"-180":ln.toString()};if(we!==null&&Ce(we)===Ce(We))return;we=We;const Vn=new URLSearchParams(We),xr=await fetch(`/api/poi?${Vn.toString()}`);xr.ok&&(await xr.json()).forEach(Qn=>{const is=ba.decode(Qn);if(gf(is)){const ps=is.right;F.some(Fs=>Fs.id===ps.id)||n(2,F=[...F,ps])}else console.error("Invalid POI object received from API: ",is.left)})},fe=async Qe=>{if(F.some(sn=>sn.id===Qe)){n(3,U=Qe);return}const en=new URLSearchParams({id:Qe.toString()}),et=await fetch(`/api/poi/get-by-id?${en.toString()}`);if(et.ok){const sn=await et.json(),ln=ba.decode(sn);if(gf(ln)){const We=ln.right;F.some(Vn=>Vn.id===We.id)||(n(2,F=[...F,We]),n(3,U=We.id))}else console.error("Invalid POI object received from API: ",ln.left)}},Ee=Qe=>F.find(({id:en})=>Qe===en);let je,ke=!1;const nt=Qe=>fetch("/api/stats/app/register-new-poi-click?poi_id="+encodeURIComponent(Qe),{method:"POST"});Sr(async()=>{const Qe=async()=>{try{const sn=await fetch("/api/utils/geolocation");if(sn.ok){const ln=await sn.json();!isNaN(parseFloat(ln.lon))&&!isNaN(parseFloat(ln.lat))&&(n(10,[j.lon,j.lat]=[parseFloat(ln.lon),parseFloat(ln.lat)],j),n(11,J=!0))}else{const ln=await fetch("https://api.ipify.org?format=json"),Vn=(await ln.json()).ip;if(!ln.ok)return;const xr=await fetch("/api/utils/geolocation-with-ip-param",{method:"POST",body:JSON.stringify({ip:Vn}),headers:{"Content-Type":"application/json"}});if(!xr.ok)return;const xn=await xr.json();!isNaN(parseFloat(xn.lon))&&!isNaN(parseFloat(xn.lat))&&(n(10,[j.lon,j.lat]=[parseFloat(xn.lon),parseFloat(xn.lat)],j),n(11,J=!0))}}catch(sn){console.error(sn)}},en=async()=>{try{const ln=await(await fetch("/api/poi/features")).json();n(7,b=ln.allPOIFeatures)}catch(sn){console.error(sn)}},et=async()=>{const sn=await fetch("/api/settings/profile"),{nickname:ln}=await sn.json();ln===void 0&&typeof ln!="string"||n(14,je=ln)};await Promise.allSettled([Qe(),en(),et()]),n(12,pe=!1),await pi(),u=new yf.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),o.addControl(u,"bottom-right"),u._container.parentElement.style.zIndex="10",p=new yf.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),o.addControl(p,"bottom-right"),p._container.parentElement.style.zIndex="10",_=new yf.ScaleControl({maxWidth:160,unit:"metric"}),o.addControl(_,"bottom-left"),_._container.parentElement.style.zIndex="10",o.on("load",async()=>{if(o.resize(),s){await fe(parseInt(s));const sn=F.find(({id:ln})=>ln===parseInt(s));if(sn){await new Promise(We=>{p.on("trackuserlocationstart",()=>o.once("movestart",We)),p.trigger()}),o.stop();const ln=14;o.flyTo({center:sn.lngLat,zoom:ln,padding:{top:300}}),n(3,U=parseInt(s))}else p.trigger()}else p.trigger()}),o.on("pitchend",_e),me(),p.on("error",()=>n(15,ke=!0)),p.on("trackuserlocationend",sn=>sn.target._watchState==="OFF"&&p.trigger()),p.on("geolocate",sn=>{const ln=sn.coords;n(4,re={lat:ln.latitude,lng:ln.longitude,accuracyMeters:ln.accuracy})}),o.on("click",sn=>{sn.originalEvent.target.dataset.testid==="map-canvas"&&n(3,U=null)})});const bt=(Qe,en)=>{n(3,U=Qe),o.flyTo({center:en,padding:{top:300}}),nt(Qe)};function zt(Qe){o=Qe,n(6,o)}function At(Qe){L=Qe,n(8,L)}function Et(Qe){a=Qe,n(5,a)}function It(Qe){$=Qe,n(0,$)}function nn(Qe){P=Qe,n(1,P)}function yn(Qe){U=Qe,n(3,U)}function un(Qe){F=Qe,n(2,F)}const Kt=({detail:Qe})=>fe(Qe),Tt=()=>n(3,U=null),Vt=()=>n(2,F=[...F]),Ye=()=>location.reload(),Nt=Qe=>Qe||location.reload();function Mt(Qe){ke=Qe,n(15,ke)}return i.$$.update=()=>{i.$$.dirty[0]&15&&n(16,t=F.filter(({features:Qe,isFavourite:en,id:et})=>et===U?!0:!($.length>0&&!Qe.some(sn=>$.includes(sn))||P&&!en))),i.$$.dirty[0]&16&&re!==void 0&&Y()},[$,P,F,U,re,a,o,b,L,z,j,J,pe,te,je,ke,t,me,Y,_e,fe,Ee,nt,bt,zt,At,Et,It,nn,yn,un,Kt,Tt,Vt,Ye,Nt,Mt]}class ND extends it{constructor(e){super(),ot(this,e,BD,FD,st,{},null,[-1,-1])}}function VD(i){let e,n;return e=new ND({}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function UD(i,e,n){let{slug:t}=e;return i.$$set=r=>{"slug"in r&&n(0,t=r.slug)},[t]}class jD extends it{constructor(e){super(),ot(this,e,UD,VD,st,{slug:0})}}class qD extends it{constructor(e){super(),ot(this,e,null,null,st,{})}}class GD extends it{constructor(e){super(),ot(this,e,null,null,st,{})}}function HD(i){let e;return{c(){e=He(i[2])},l(n){e=Ze(n,i[2])},m(n,t){B(n,e,t)},p(n,t){t&4&&Qt(e,n[2])},d(n){n&&I(e)}}}function ZD(i){let e,n,t,r;return e=new ji({props:{tag:"h2",class:"mb-3",$$slots:{default:[HD]},$$scope:{ctx:i}}}),t=new qi({}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&1028&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function WD(i){let e,n,t;var r=i[1];function s(a,o){return{}}return r&&(e=Pf(r,s())),{c(){e&&q(e.$$.fragment),n=Ue()},l(a){e&&Z(e.$$.fragment,a),n=Ue()},m(a,o){e&&G(e,a,o),B(a,n,o),t=!0},p(a,o){if(o&2&&r!==(r=a[1])){if(e){vt();const u=e;E(u.$$.fragment,1,0,()=>{H(u,1)}),yt()}r?(e=Pf(r,s()),q(e.$$.fragment),T(e.$$.fragment,1),G(e,n.parentNode,n)):e=null}},i(a){t||(e&&T(e.$$.fragment,a),t=!0)},o(a){e&&E(e.$$.fragment,a),t=!1},d(a){a&&I(n),e&&H(e,a)}}}function KD(i){let e,n,t,r,s;return n=new Zs({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[ZD]},$$scope:{ctx:i}}}),r=new Is({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[6]}px);`,$$slots:{default:[WD]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),q(r.$$.fragment)},l(a){e=ue(a,"DIV",{});var o=$e(e);Z(n.$$.fragment,o),o.forEach(I),t=ve(a),Z(r.$$.fragment,a)},m(a,o){B(a,e,o),G(n,e,null),i[8](e),B(a,t,o),G(r,a,o),s=!0},p(a,o){const u={};o&1028&&(u.$$scope={dirty:o,ctx:a}),n.$set(u);const p={};o&64&&(p.style=`height: calc(100% - ${a[6]}px);`),o&1026&&(p.$$scope={dirty:o,ctx:a}),r.$set(p)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(n),i[8](null),H(r,a)}}}function XD(i){let e,n,t,r,s,a,o,u,p,_,b,$,P="Feed",L,z,F,U,j,J,pe="Connections",re,te,de,me;return document.title=e=i[2]+" - Social Network",s=new Dr({props:{class:"relative p-4 h-full",$$slots:{default:[KD]},$$scope:{ctx:i}}}),_=new E2({props:{class:"h-5 w-5"}}),U=new Q2({props:{class:"h-5 w-5"}}),{c(){n=ge(),t=ce("div"),r=ce("div"),q(s.$$.fragment),o=ge(),u=ce("div"),p=ce("a"),q(_.$$.fragment),b=ge(),$=ce("span"),$.textContent=P,z=ge(),F=ce("a"),q(U.$$.fragment),j=ge(),J=ce("span"),J.textContent=pe,this.h()},l(Y){g0("svelte-hbok3p",document.head).forEach(I),n=ve(Y),t=ue(Y,"DIV",{class:!0});var Ce=$e(t);r=ue(Ce,"DIV",{class:!0,style:!0});var _e=$e(r);Z(s.$$.fragment,_e),_e.forEach(I),o=ve(Ce),u=ue(Ce,"DIV",{class:!0});var fe=$e(u);p=ue(fe,"A",{class:!0,href:!0,"data-testid":!0});var Ee=$e(p);Z(_.$$.fragment,Ee),b=ve(Ee),$=ue(Ee,"SPAN",{class:!0,"data-svelte-h":!0}),bn($)!=="svelte-oj2kup"&&($.textContent=P),Ee.forEach(I),z=ve(fe),F=ue(fe,"A",{class:!0,href:!0,"data-testid":!0});var je=$e(F);Z(U.$$.fragment,je),j=ve(je),J=ue(je,"SPAN",{class:!0,"data-svelte-h":!0}),bn(J)!=="svelte-s36po"&&(J.textContent=pe),je.forEach(I),fe.forEach(I),Ce.forEach(I),this.h()},h(){se(r,"class","flex flex-col p-4 relative"),se(r,"style",a=`height: calc(100% - ${i[4]}px);`),se($,"class","btm-nav-label text-neutral-content font-medium"),se(p,"class",L="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(i[0]===Rn.SOCIAL_NETWORK_FEED?" bg-secondary/30":"")),se(p,"href",`/app/${Rn.SOCIAL_NETWORK_FEED}`),se(p,"data-testid","social-network-feed-button"),ur(p,"active",i[0]===Rn.SOCIAL_NETWORK_FEED),se(J,"class","btm-nav-label text-neutral-content font-medium"),se(F,"class",re="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(i[0]===Rn.SOCIAL_NETWORK_CONNECTIONS?" bg-secondary/30":"")),se(F,"href",`/app/${Rn.SOCIAL_NETWORK_CONNECTIONS}`),se(F,"data-testid","social-network-connections-button"),ur(F,"active",i[0]===Rn.SOCIAL_NETWORK_CONNECTIONS),se(u,"class","btm-nav static max-sm:btm-nav-md"),se(t,"class","flex grow flex-col relative h-full")},m(Y,we){B(Y,n,we),B(Y,t,we),ae(t,r),G(s,r,null),ae(t,o),ae(t,u),ae(u,p),G(_,p,null),ae(p,b),ae(p,$),ae(u,z),ae(u,F),G(U,F,null),ae(F,j),ae(F,J),i[9](u),te=!0,de||(me=mt(window,"resize",i[7]),de=!0)},p(Y,[we]){(!te||we&4)&&e!==(e=Y[2]+" - Social Network")&&(document.title=e);const Ce={};we&1126&&(Ce.$$scope={dirty:we,ctx:Y}),s.$set(Ce),(!te||we&16&&a!==(a=`height: calc(100% - ${Y[4]}px);`))&&se(r,"style",a),(!te||we&1&&L!==(L="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(Y[0]===Rn.SOCIAL_NETWORK_FEED?" bg-secondary/30":"")))&&se(p,"class",L),(!te||we&1)&&ur(p,"active",Y[0]===Rn.SOCIAL_NETWORK_FEED),(!te||we&1&&re!==(re="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(Y[0]===Rn.SOCIAL_NETWORK_CONNECTIONS?" bg-secondary/30":"")))&&se(F,"class",re),(!te||we&1)&&ur(F,"active",Y[0]===Rn.SOCIAL_NETWORK_CONNECTIONS)},i(Y){te||(T(s.$$.fragment,Y),T(_.$$.fragment,Y),T(U.$$.fragment,Y),te=!0)},o(Y){E(s.$$.fragment,Y),E(_.$$.fragment,Y),E(U.$$.fragment,Y),te=!1},d(Y){Y&&(I(n),I(t)),H(s),H(_),H(U),i[9](null),de=!1,me()}}}function JD(i,e,n){let{slug:t}=e,r=null,s="",a,o=64,u,p=64;const _=()=>{let P=a.offsetHeight;P!==void 0&&n(4,o=P),P=u.offsetHeight,P!==void 0&&n(6,p=P)};Sr(_);function b(P){Zt[P?"unshift":"push"](()=>{u=P,n(5,u)})}function $(P){Zt[P?"unshift":"push"](()=>{a=P,n(3,a)})}return i.$$set=P=>{"slug"in P&&n(0,t=P.slug)},i.$$.update=()=>{if(i.$$.dirty&1)switch(t){case Rn.SOCIAL_NETWORK_FEED:n(1,r=qD),n(2,s="Feed");break;case Rn.SOCIAL_NETWORK_CONNECTIONS:n(1,r=GD),n(2,s="Connections");break;default:va("/app/"+Rn.SOCIAL_NETWORK_FEED);break}},[t,r,s,a,o,u,p,_,b,$]}class YD extends it{constructor(e){super(),ot(this,e,JD,XD,st,{slug:0})}}function QD(i){let e,n;return{c(){e=He("Total Points: "),n=He(i[0])},l(t){e=Ze(t,"Total Points: "),n=Ze(t,i[0])},m(t,r){B(t,e,r),B(t,n,r)},p(t,r){r&1&&Qt(n,t[0])},d(t){t&&(I(e),I(n))}}}function ez(i){let e,n;return e=new $a({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function tz(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){fr(e.src,n=Ss[i[1].badge])||se(e,"src",n),se(e,"class","h-14 w-14 -ml-0.5"),se(e,"alt","Badge Icon")},m(s,a){B(s,e,a),t||(r=mt(e,"error",i[4]),t=!0)},p(s,a){a&2&&!fr(e.src,n=Ss[s[1].badge])&&se(e,"src",n)},i:gt,o:gt,d(s){s&&I(e),t=!1,r()}}}function nz(i){let e,n,t,r,s,a,o=i[1].badge+"",u,p,_,b,$=i[1].previous_threshold+"",P,L,z,F,U,j=i[1].threshold+"",J,pe;const re=[tz,ez],te=[];function de(me,Y){return me[2]?1:0}return t=de(i),r=te[t]=re[t](i),{c(){e=ce("div"),n=ce("div"),r.c(),s=ge(),a=ce("p"),u=He(o),p=ge(),_=ce("div"),b=ce("p"),P=He($),L=ge(),z=ce("progress"),F=ge(),U=ce("p"),J=He(j),this.h()},l(me){e=ue(me,"DIV",{class:!0});var Y=$e(e);n=ue(Y,"DIV",{class:!0});var we=$e(n);r.l(we),we.forEach(I),s=ve(Y),a=ue(Y,"P",{class:!0});var Ce=$e(a);u=Ze(Ce,o),Ce.forEach(I),p=ve(Y),_=ue(Y,"DIV",{class:!0});var _e=$e(_);b=ue(_e,"P",{class:!0});var fe=$e(b);P=Ze(fe,$),fe.forEach(I),L=ve(_e),z=ue(_e,"PROGRESS",{class:!0,max:!0}),$e(z).forEach(I),F=ve(_e),U=ue(_e,"P",{class:!0});var Ee=$e(U);J=Ze(Ee,j),Ee.forEach(I),_e.forEach(I),Y.forEach(I),this.h()},h(){se(n,"class","shrink-0"),se(a,"class","text-sm font-medium leading-none"),se(b,"class","text-sm font-medium leading-none text-muted-foreground"),se(z,"class","progress progress-error grow"),z.value=i[3],se(z,"max","100"),se(U,"class","text-sm font-medium leading-none text-muted-foreground"),se(_,"class","flex self-stretch gap-2 items-center"),se(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(me,Y){B(me,e,Y),ae(e,n),te[t].m(n,null),ae(e,s),ae(e,a),ae(a,u),ae(e,p),ae(e,_),ae(_,b),ae(b,P),ae(_,L),ae(_,z),ae(_,F),ae(_,U),ae(U,J),pe=!0},p(me,Y){let we=t;t=de(me),t===we?te[t].p(me,Y):(vt(),E(te[we],1,1,()=>{te[we]=null}),yt(),r=te[t],r?r.p(me,Y):(r=te[t]=re[t](me),r.c()),T(r,1),r.m(n,null)),(!pe||Y&2)&&o!==(o=me[1].badge+"")&&Qt(u,o),(!pe||Y&2)&&$!==($=me[1].previous_threshold+"")&&Qt(P,$),(!pe||Y&8)&&(z.value=me[3]),(!pe||Y&2)&&j!==(j=me[1].threshold+"")&&Qt(J,j)},i(me){pe||(T(r),pe=!0)},o(me){E(r),pe=!1},d(me){me&&I(e),te[t].d()}}}function rz(i){let e,n,t,r;return e=new ji({props:{class:"text-xs",$$slots:{default:[QD]},$$scope:{ctx:i}}}),t=new No({props:{$$slots:{default:[nz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&270&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function sz(i){let e,n;return e=new Zs({props:{class:"p-2",$$slots:{default:[rz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function iz(i){let e,n;return e=new Dr({props:{$$slots:{default:[sz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}let _1=2e3;function oz(i,e,n){let{totalPoints:t}=e,{inProgressTotalPoints:r}=e,s=!1,a,o=0,u,p;Sr(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),p=Date.now(),u=setInterval(()=>{const $=Date.now()-p;if($<_1){const P=$/_1;n(3,o=a*nu(P))}else n(3,o=a),clearInterval(u)},2),()=>clearInterval(u)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalPoints"in b&&n(0,t=b.totalPoints),"inProgressTotalPoints"in b&&n(1,r=b.inProgressTotalPoints)},[t,r,s,o,_]}class az extends it{constructor(e){super(),ot(this,e,oz,iz,st,{totalPoints:0,inProgressTotalPoints:1})}}function lz(i){let e,n;return{c(){e=He("Total Check-ins: "),n=He(i[0])},l(t){e=Ze(t,"Total Check-ins: "),n=Ze(t,i[0])},m(t,r){B(t,e,r),B(t,n,r)},p(t,r){r&1&&Qt(n,t[0])},d(t){t&&(I(e),I(n))}}}function cz(i){let e,n;return e=new $a({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function uz(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){fr(e.src,n=Ss[i[1].badge])||se(e,"src",n),se(e,"class","h-14 w-14 -ml-0.5"),se(e,"alt","Badge Icon")},m(s,a){B(s,e,a),t||(r=mt(e,"error",i[4]),t=!0)},p(s,a){a&2&&!fr(e.src,n=Ss[s[1].badge])&&se(e,"src",n)},i:gt,o:gt,d(s){s&&I(e),t=!1,r()}}}function fz(i){let e,n,t,r,s,a,o=i[1].badge+"",u,p,_,b,$=i[1].previous_threshold+"",P,L,z,F,U,j=i[1].threshold+"",J,pe;const re=[uz,cz],te=[];function de(me,Y){return me[2]?1:0}return t=de(i),r=te[t]=re[t](i),{c(){e=ce("div"),n=ce("div"),r.c(),s=ge(),a=ce("p"),u=He(o),p=ge(),_=ce("div"),b=ce("p"),P=He($),L=ge(),z=ce("progress"),F=ge(),U=ce("p"),J=He(j),this.h()},l(me){e=ue(me,"DIV",{class:!0});var Y=$e(e);n=ue(Y,"DIV",{class:!0});var we=$e(n);r.l(we),we.forEach(I),s=ve(Y),a=ue(Y,"P",{class:!0});var Ce=$e(a);u=Ze(Ce,o),Ce.forEach(I),p=ve(Y),_=ue(Y,"DIV",{class:!0});var _e=$e(_);b=ue(_e,"P",{class:!0});var fe=$e(b);P=Ze(fe,$),fe.forEach(I),L=ve(_e),z=ue(_e,"PROGRESS",{class:!0,max:!0}),$e(z).forEach(I),F=ve(_e),U=ue(_e,"P",{class:!0});var Ee=$e(U);J=Ze(Ee,j),Ee.forEach(I),_e.forEach(I),Y.forEach(I),this.h()},h(){se(n,"class","shrink-0"),se(a,"class","text-sm font-medium leading-none"),se(b,"class","text-sm font-medium leading-none text-muted-foreground"),se(z,"class","progress progress-error grow"),z.value=i[3],se(z,"max","100"),se(U,"class","text-sm font-medium leading-none text-muted-foreground"),se(_,"class","flex self-stretch gap-2 items-center"),se(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(me,Y){B(me,e,Y),ae(e,n),te[t].m(n,null),ae(e,s),ae(e,a),ae(a,u),ae(e,p),ae(e,_),ae(_,b),ae(b,P),ae(_,L),ae(_,z),ae(_,F),ae(_,U),ae(U,J),pe=!0},p(me,Y){let we=t;t=de(me),t===we?te[t].p(me,Y):(vt(),E(te[we],1,1,()=>{te[we]=null}),yt(),r=te[t],r?r.p(me,Y):(r=te[t]=re[t](me),r.c()),T(r,1),r.m(n,null)),(!pe||Y&2)&&o!==(o=me[1].badge+"")&&Qt(u,o),(!pe||Y&2)&&$!==($=me[1].previous_threshold+"")&&Qt(P,$),(!pe||Y&8)&&(z.value=me[3]),(!pe||Y&2)&&j!==(j=me[1].threshold+"")&&Qt(J,j)},i(me){pe||(T(r),pe=!0)},o(me){E(r),pe=!1},d(me){me&&I(e),te[t].d()}}}function hz(i){let e,n,t,r;return e=new ji({props:{class:"text-xs",$$slots:{default:[lz]},$$scope:{ctx:i}}}),t=new No({props:{$$slots:{default:[fz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&270&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function dz(i){let e,n;return e=new Zs({props:{class:"p-2",$$slots:{default:[hz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function pz(i){let e,n;return e=new Dr({props:{$$slots:{default:[dz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}let g1=2e3;function mz(i,e,n){let{totalCheckInCounts:t}=e,{inProgressTotalCheckIns:r}=e,s=!1,a,o=0,u,p;Sr(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),p=Date.now(),u=setInterval(()=>{const $=Date.now()-p;if($<g1){const P=$/g1;n(3,o=a*nu(P))}else n(3,o=a),clearInterval(u)},2),()=>clearInterval(u)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalCheckInCounts"in b&&n(0,t=b.totalCheckInCounts),"inProgressTotalCheckIns"in b&&n(1,r=b.inProgressTotalCheckIns)},[t,r,s,o,_]}class _z extends it{constructor(e){super(),ot(this,e,mz,pz,st,{totalCheckInCounts:0,inProgressTotalCheckIns:1})}}function gz(i){let e,n;return{c(){e=He("Total Photos: "),n=He(i[0])},l(t){e=Ze(t,"Total Photos: "),n=Ze(t,i[0])},m(t,r){B(t,e,r),B(t,n,r)},p(t,r){r&1&&Qt(n,t[0])},d(t){t&&(I(e),I(n))}}}function vz(i){let e,n;return e=new $a({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function yz(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){fr(e.src,n=Ss[i[1].badge])||se(e,"src",n),se(e,"class","h-14 w-14 -ml-0.5"),se(e,"alt","Badge Icon")},m(s,a){B(s,e,a),t||(r=mt(e,"error",i[4]),t=!0)},p(s,a){a&2&&!fr(e.src,n=Ss[s[1].badge])&&se(e,"src",n)},i:gt,o:gt,d(s){s&&I(e),t=!1,r()}}}function bz(i){let e,n,t,r,s,a,o=i[1].badge+"",u,p,_,b,$=i[1].previous_threshold+"",P,L,z,F,U,j=i[1].threshold+"",J,pe;const re=[yz,vz],te=[];function de(me,Y){return me[2]?1:0}return t=de(i),r=te[t]=re[t](i),{c(){e=ce("div"),n=ce("div"),r.c(),s=ge(),a=ce("p"),u=He(o),p=ge(),_=ce("div"),b=ce("p"),P=He($),L=ge(),z=ce("progress"),F=ge(),U=ce("p"),J=He(j),this.h()},l(me){e=ue(me,"DIV",{class:!0});var Y=$e(e);n=ue(Y,"DIV",{class:!0});var we=$e(n);r.l(we),we.forEach(I),s=ve(Y),a=ue(Y,"P",{class:!0});var Ce=$e(a);u=Ze(Ce,o),Ce.forEach(I),p=ve(Y),_=ue(Y,"DIV",{class:!0});var _e=$e(_);b=ue(_e,"P",{class:!0});var fe=$e(b);P=Ze(fe,$),fe.forEach(I),L=ve(_e),z=ue(_e,"PROGRESS",{class:!0,max:!0}),$e(z).forEach(I),F=ve(_e),U=ue(_e,"P",{class:!0});var Ee=$e(U);J=Ze(Ee,j),Ee.forEach(I),_e.forEach(I),Y.forEach(I),this.h()},h(){se(n,"class","shrink-0"),se(a,"class","text-sm font-medium leading-none"),se(b,"class","text-sm font-medium leading-none text-muted-foreground"),se(z,"class","progress progress-error grow"),z.value=i[3],se(z,"max","100"),se(U,"class","text-sm font-medium leading-none text-muted-foreground"),se(_,"class","flex self-stretch gap-2 items-center"),se(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(me,Y){B(me,e,Y),ae(e,n),te[t].m(n,null),ae(e,s),ae(e,a),ae(a,u),ae(e,p),ae(e,_),ae(_,b),ae(b,P),ae(_,L),ae(_,z),ae(_,F),ae(_,U),ae(U,J),pe=!0},p(me,Y){let we=t;t=de(me),t===we?te[t].p(me,Y):(vt(),E(te[we],1,1,()=>{te[we]=null}),yt(),r=te[t],r?r.p(me,Y):(r=te[t]=re[t](me),r.c()),T(r,1),r.m(n,null)),(!pe||Y&2)&&o!==(o=me[1].badge+"")&&Qt(u,o),(!pe||Y&2)&&$!==($=me[1].previous_threshold+"")&&Qt(P,$),(!pe||Y&8)&&(z.value=me[3]),(!pe||Y&2)&&j!==(j=me[1].threshold+"")&&Qt(J,j)},i(me){pe||(T(r),pe=!0)},o(me){E(r),pe=!1},d(me){me&&I(e),te[t].d()}}}function wz(i){let e,n,t,r;return e=new ji({props:{class:"text-xs",$$slots:{default:[gz]},$$scope:{ctx:i}}}),t=new No({props:{$$slots:{default:[bz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&270&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function xz(i){let e,n;return e=new Zs({props:{class:"p-2",$$slots:{default:[wz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function $z(i){let e,n;return e=new Dr({props:{$$slots:{default:[xz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}let v1=2e3;function kz(i,e,n){let{totalPoiPhotoCounts:t}=e,{inProgressTotalPoiPhotos:r}=e,s=!1,a,o=0,u,p;Sr(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),p=Date.now(),u=setInterval(()=>{const $=Date.now()-p;if($<v1){const P=$/v1;n(3,o=a*nu(P))}else n(3,o=a),clearInterval(u)},2),()=>clearInterval(u)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalPoiPhotoCounts"in b&&n(0,t=b.totalPoiPhotoCounts),"inProgressTotalPoiPhotos"in b&&n(1,r=b.inProgressTotalPoiPhotos)},[t,r,s,o,_]}class Cz extends it{constructor(e){super(),ot(this,e,kz,$z,st,{totalPoiPhotoCounts:0,inProgressTotalPoiPhotos:1})}}function Sz(i){let e,n;return{c(){e=He("Total Reviews: "),n=He(i[0])},l(t){e=Ze(t,"Total Reviews: "),n=Ze(t,i[0])},m(t,r){B(t,e,r),B(t,n,r)},p(t,r){r&1&&Qt(n,t[0])},d(t){t&&(I(e),I(n))}}}function Iz(i){let e,n;return e=new $a({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Tz(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){fr(e.src,n=Ss[i[1].badge])||se(e,"src",n),se(e,"class","h-14 w-14 -ml-0.5"),se(e,"alt","Badge Icon")},m(s,a){B(s,e,a),t||(r=mt(e,"error",i[4]),t=!0)},p(s,a){a&2&&!fr(e.src,n=Ss[s[1].badge])&&se(e,"src",n)},i:gt,o:gt,d(s){s&&I(e),t=!1,r()}}}function Pz(i){let e,n,t,r,s,a,o=i[1].badge+"",u,p,_,b,$=i[1].previous_threshold+"",P,L,z,F,U,j=i[1].threshold+"",J,pe;const re=[Tz,Iz],te=[];function de(me,Y){return me[2]?1:0}return t=de(i),r=te[t]=re[t](i),{c(){e=ce("div"),n=ce("div"),r.c(),s=ge(),a=ce("p"),u=He(o),p=ge(),_=ce("div"),b=ce("p"),P=He($),L=ge(),z=ce("progress"),F=ge(),U=ce("p"),J=He(j),this.h()},l(me){e=ue(me,"DIV",{class:!0});var Y=$e(e);n=ue(Y,"DIV",{class:!0});var we=$e(n);r.l(we),we.forEach(I),s=ve(Y),a=ue(Y,"P",{class:!0});var Ce=$e(a);u=Ze(Ce,o),Ce.forEach(I),p=ve(Y),_=ue(Y,"DIV",{class:!0});var _e=$e(_);b=ue(_e,"P",{class:!0});var fe=$e(b);P=Ze(fe,$),fe.forEach(I),L=ve(_e),z=ue(_e,"PROGRESS",{class:!0,max:!0}),$e(z).forEach(I),F=ve(_e),U=ue(_e,"P",{class:!0});var Ee=$e(U);J=Ze(Ee,j),Ee.forEach(I),_e.forEach(I),Y.forEach(I),this.h()},h(){se(n,"class","shrink-0"),se(a,"class","text-sm font-medium leading-none"),se(b,"class","text-sm font-medium leading-none text-muted-foreground"),se(z,"class","progress progress-error grow"),z.value=i[3],se(z,"max","100"),se(U,"class","text-sm font-medium leading-none text-muted-foreground"),se(_,"class","flex self-stretch gap-2 items-center"),se(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(me,Y){B(me,e,Y),ae(e,n),te[t].m(n,null),ae(e,s),ae(e,a),ae(a,u),ae(e,p),ae(e,_),ae(_,b),ae(b,P),ae(_,L),ae(_,z),ae(_,F),ae(_,U),ae(U,J),pe=!0},p(me,Y){let we=t;t=de(me),t===we?te[t].p(me,Y):(vt(),E(te[we],1,1,()=>{te[we]=null}),yt(),r=te[t],r?r.p(me,Y):(r=te[t]=re[t](me),r.c()),T(r,1),r.m(n,null)),(!pe||Y&2)&&o!==(o=me[1].badge+"")&&Qt(u,o),(!pe||Y&2)&&$!==($=me[1].previous_threshold+"")&&Qt(P,$),(!pe||Y&8)&&(z.value=me[3]),(!pe||Y&2)&&j!==(j=me[1].threshold+"")&&Qt(J,j)},i(me){pe||(T(r),pe=!0)},o(me){E(r),pe=!1},d(me){me&&I(e),te[t].d()}}}function Ez(i){let e,n,t,r;return e=new ji({props:{class:"text-xs",$$slots:{default:[Sz]},$$scope:{ctx:i}}}),t=new No({props:{$$slots:{default:[Pz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&270&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function Az(i){let e,n;return e=new Zs({props:{class:"p-2",$$slots:{default:[Ez]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Mz(i){let e,n;return e=new Dr({props:{$$slots:{default:[Az]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}let y1=2e3;function Dz(i,e,n){let{totalPoiReviewCounts:t}=e,{inProgressTotalPoiReviews:r}=e,s=!1,a,o=0,u,p;Sr(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),p=Date.now(),u=setInterval(()=>{const $=Date.now()-p;if($<y1){const P=$/y1;n(3,o=a*nu(P))}else n(3,o=a),clearInterval(u)},2),()=>clearInterval(u)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalPoiReviewCounts"in b&&n(0,t=b.totalPoiReviewCounts),"inProgressTotalPoiReviews"in b&&n(1,r=b.inProgressTotalPoiReviews)},[t,r,s,o,_]}class zz extends it{constructor(e){super(),ot(this,e,Dz,Mz,st,{totalPoiReviewCounts:0,inProgressTotalPoiReviews:1})}}function Lz(i){let e,n="Your Progression",t,r,s,a,o,u,p,_,b,$,P,L;return s=new az({props:{totalPoints:i[0],inProgressTotalPoints:i[4]}}),o=new _z({props:{totalCheckInCounts:i[1],inProgressTotalCheckIns:i[5]}}),p=new Cz({props:{totalPoiPhotoCounts:i[2],inProgressTotalPoiPhotos:i[6]}}),b=new zz({props:{totalPoiReviewCounts:i[3],inProgressTotalPoiReviews:i[7]}}),P=new qi({props:{class:"mt-3 mb-4"}}),{c(){e=ce("p"),e.textContent=n,t=ge(),r=ce("div"),q(s.$$.fragment),a=ge(),q(o.$$.fragment),u=ge(),q(p.$$.fragment),_=ge(),q(b.$$.fragment),$=ge(),q(P.$$.fragment),this.h()},l(z){e=ue(z,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-cul2s5"&&(e.textContent=n),t=ve(z),r=ue(z,"DIV",{class:!0});var F=$e(r);Z(s.$$.fragment,F),a=ve(F),Z(o.$$.fragment,F),u=ve(F),Z(p.$$.fragment,F),_=ve(F),Z(b.$$.fragment,F),F.forEach(I),$=ve(z),Z(P.$$.fragment,z),this.h()},h(){se(e,"class","text-sm font-medium leading-none text-muted-foreground mb-3"),se(r,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(z,F){B(z,e,F),B(z,t,F),B(z,r,F),G(s,r,null),ae(r,a),G(o,r,null),ae(r,u),G(p,r,null),ae(r,_),G(b,r,null),B(z,$,F),G(P,z,F),L=!0},p(z,[F]){const U={};F&1&&(U.totalPoints=z[0]),F&16&&(U.inProgressTotalPoints=z[4]),s.$set(U);const j={};F&2&&(j.totalCheckInCounts=z[1]),F&32&&(j.inProgressTotalCheckIns=z[5]),o.$set(j);const J={};F&4&&(J.totalPoiPhotoCounts=z[2]),F&64&&(J.inProgressTotalPoiPhotos=z[6]),p.$set(J);const pe={};F&8&&(pe.totalPoiReviewCounts=z[3]),F&128&&(pe.inProgressTotalPoiReviews=z[7]),b.$set(pe)},i(z){L||(T(s.$$.fragment,z),T(o.$$.fragment,z),T(p.$$.fragment,z),T(b.$$.fragment,z),T(P.$$.fragment,z),L=!0)},o(z){E(s.$$.fragment,z),E(o.$$.fragment,z),E(p.$$.fragment,z),E(b.$$.fragment,z),E(P.$$.fragment,z),L=!1},d(z){z&&(I(e),I(t),I(r),I($)),H(s),H(o),H(p),H(b),H(P,z)}}}function Rz(i,e,n){let{totalPoints:t}=e,{totalCheckInCounts:r}=e,{totalPoiPhotoCounts:s}=e,{totalPoiReviewCounts:a}=e,{inProgressTotalPoints:o}=e,{inProgressTotalCheckIns:u}=e,{inProgressTotalPoiPhotos:p}=e,{inProgressTotalPoiReviews:_}=e;return i.$$set=b=>{"totalPoints"in b&&n(0,t=b.totalPoints),"totalCheckInCounts"in b&&n(1,r=b.totalCheckInCounts),"totalPoiPhotoCounts"in b&&n(2,s=b.totalPoiPhotoCounts),"totalPoiReviewCounts"in b&&n(3,a=b.totalPoiReviewCounts),"inProgressTotalPoints"in b&&n(4,o=b.inProgressTotalPoints),"inProgressTotalCheckIns"in b&&n(5,u=b.inProgressTotalCheckIns),"inProgressTotalPoiPhotos"in b&&n(6,p=b.inProgressTotalPoiPhotos),"inProgressTotalPoiReviews"in b&&n(7,_=b.inProgressTotalPoiReviews)},[t,r,s,a,o,u,p,_]}class Oz extends it{constructor(e){super(),ot(this,e,Rz,Lz,st,{totalPoints:0,totalCheckInCounts:1,totalPoiPhotoCounts:2,totalPoiReviewCounts:3,inProgressTotalPoints:4,inProgressTotalCheckIns:5,inProgressTotalPoiPhotos:6,inProgressTotalPoiReviews:7})}}function Fz(i){let e,n;return e=new $a({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Bz(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){fr(e.src,n=Ss[i[0].badge])||se(e,"src",n),se(e,"class","h-14 w-14 -ml-0.5"),se(e,"alt","Badge Icon")},m(s,a){B(s,e,a),t||(r=mt(e,"error",i[3]),t=!0)},p(s,a){a&1&&!fr(e.src,n=Ss[s[0].badge])&&se(e,"src",n)},i:gt,o:gt,d(s){s&&I(e),t=!1,r()}}}function Nz(i){let e,n,t=i[0].badge+"",r,s,a,o,u,p,_,b=i[0].threshold+"",$,P,L,z;const F=[Bz,Fz],U=[];function j(J,pe){return J[2]?1:0}return o=j(i),u=U[o]=F[o](i),{c(){e=ce("div"),n=ce("p"),r=He(t),s=ge(),a=ce("div"),u.c(),p=ge(),_=ce("p"),$=He(b),P=ge(),L=He(i[1]),this.h()},l(J){e=ue(J,"DIV",{class:!0});var pe=$e(e);n=ue(pe,"P",{class:!0});var re=$e(n);r=Ze(re,t),re.forEach(I),s=ve(pe),a=ue(pe,"DIV",{class:!0});var te=$e(a);u.l(te),te.forEach(I),p=ve(pe),_=ue(pe,"P",{class:!0});var de=$e(_);$=Ze(de,b),P=ve(de),L=Ze(de,i[1]),de.forEach(I),pe.forEach(I),this.h()},h(){se(n,"class","text-sm font-medium leading-none"),se(a,"class","shrink-0"),se(_,"class","text-xs"),se(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(J,pe){B(J,e,pe),ae(e,n),ae(n,r),ae(e,s),ae(e,a),U[o].m(a,null),ae(e,p),ae(e,_),ae(_,$),ae(_,P),ae(_,L),z=!0},p(J,pe){(!z||pe&1)&&t!==(t=J[0].badge+"")&&Qt(r,t);let re=o;o=j(J),o===re?U[o].p(J,pe):(vt(),E(U[re],1,1,()=>{U[re]=null}),yt(),u=U[o],u?u.p(J,pe):(u=U[o]=F[o](J),u.c()),T(u,1),u.m(a,null)),(!z||pe&1)&&b!==(b=J[0].threshold+"")&&Qt($,b),(!z||pe&2)&&Qt(L,J[1])},i(J){z||(T(u),z=!0)},o(J){E(u),z=!1},d(J){J&&I(e),U[o].d()}}}function Vz(i){let e,n;return e=new No({props:{$$slots:{default:[Nz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Uz(i){let e,n;return e=new Zs({props:{class:"p-2",$$slots:{default:[Vz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function jz(i){let e,n;return e=new Dr({props:{$$slots:{default:[Uz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function qz(i,e,n){let{badgeStatus:t}=e,{appendix:r}=e,s=!1;const a=()=>n(2,s=!0);return i.$$set=o=>{"badgeStatus"in o&&n(0,t=o.badgeStatus),"appendix"in o&&n(1,r=o.appendix)},[t,r,s,a]}class cy extends it{constructor(e){super(),ot(this,e,qz,jz,st,{badgeStatus:0,appendix:1})}}function b1(i,e,n){const t=i.slice();return t[7]=e[n],t}function w1(i,e,n){const t=i.slice();return t[7]=e[n],t}function Gz(i){let e,n=[],t=new Map,r,s=dn(i[0]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let u=w1(i,s,o),p=a(u);t.set(p,n[o]=x1(p,u))}return{c(){e=ce("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);for(let p=0;p<n.length;p+=1)n[p].l(u);u.forEach(I),this.h()},h(){se(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2 mb-3")},m(o,u){B(o,e,u);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);r=!0},p(o,u){u&1&&(s=dn(o[0]),vt(),n=Yr(n,u,a,1,o,s,t,e,ss,x1,null,w1),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(n[u]);r=!0}},o(o){for(let u=0;u<n.length;u+=1)E(n[u]);r=!1},d(o){o&&I(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Hz(i){let e,n="<p>You have achieved all possible milestones, congratulations!</p>";return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-apfzai"&&(e.innerHTML=n),this.h()},h(){se(e,"class","flex justify-center items-center p-4")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function x1(i,e){let n,t,r;return t=new cy({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function Zz(i){let e,n;return e=new Sa({props:{$$slots:{default:[e6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Wz(i){let e;return{c(){e=He("Show All Others")},l(n){e=Ze(n,"Show All Others")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function Kz(i){let e,n;return e=new yr({props:{class:"grow",variant:"outline",$$slots:{default:[Wz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Xz(i){let e;return{c(){e=He("All Other Upcoming Milestones")},l(n){e=Ze(n,"All Other Upcoming Milestones")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function $1(i,e){let n,t,r;return t=new cy({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function Jz(i){let e,n=[],t=new Map,r,s=dn(i[1]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let u=b1(i,s,o),p=a(u);t.set(p,n[o]=$1(p,u))}return{c(){e=ce("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);for(let p=0;p<n.length;p+=1)n[p].l(u);u.forEach(I),this.h()},h(){se(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(o,u){B(o,e,u);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);r=!0},p(o,u){u&2&&(s=dn(o[1]),vt(),n=Yr(n,u,a,1,o,s,t,e,ss,$1,null,b1),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(n[u]);r=!0}},o(o){for(let u=0;u<n.length;u+=1)E(n[u]);r=!1},d(o){o&&I(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function Yz(i){let e,n,t,r;return e=new Vd({props:{class:"mb-4",$$slots:{default:[Xz]},$$scope:{ctx:i}}}),t=new ou({props:{$$slots:{default:[Jz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&4096&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function Qz(i){let e,n;return e=new iu({props:{$$slots:{default:[Yz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function e6(i){let e,n,t,r;return e=new vv({props:{class:"flex",$$slots:{default:[Kz]},$$scope:{ctx:i}}}),t=new Ca({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[Qz]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&4096&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function t6(i){let e,n="Upcoming Milestones",t,r,s,a,o,u,p;const _=[Hz,Gz],b=[];function $(L,z){return L[0].length===0?0:1}r=$(i),s=b[r]=_[r](i);let P=i[1].length>0&&Zz(i);return u=new qi({props:{class:"mt-3 mb-4"}}),{c(){e=ce("p"),e.textContent=n,t=ge(),s.c(),a=ge(),P&&P.c(),o=ge(),q(u.$$.fragment),this.h()},l(L){e=ue(L,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-aoi7vs"&&(e.textContent=n),t=ve(L),s.l(L),a=ve(L),P&&P.l(L),o=ve(L),Z(u.$$.fragment,L),this.h()},h(){se(e,"class","text-sm font-medium leading-none text-muted-foreground mb-3")},m(L,z){B(L,e,z),B(L,t,z),b[r].m(L,z),B(L,a,z),P&&P.m(L,z),B(L,o,z),G(u,L,z),p=!0},p(L,[z]){s.p(L,z),L[1].length>0&&P.p(L,z)},i(L){p||(T(s),T(P),T(u.$$.fragment,L),p=!0)},o(L){E(s),E(P),E(u.$$.fragment,L),p=!1},d(L){L&&(I(e),I(t),I(a),I(o)),b[r].d(L),P&&P.d(L),H(u,L)}}}function n6(i,e,n){let{lockedTotalPoints:t}=e,{lockedTotalCheckIns:r}=e,{lockedTotalPoiPhotos:s}=e,{lockedTotalPoiReviews:a}=e;const o=(_,b)=>_.map($=>({value:$,appendix:b})),u=[o(t,"Total Points")[0],o(r,"Total Check-ins")[0],o(s,"Total Photos")[0],o(a,"Total Reviews")[0]].concat([...o(t.slice(1),"Total Points"),...o(r.slice(1),"Total Check-ins"),...o(s.slice(1),"Total Photos"),...o(a.slice(1),"Total Reviews")]).filter(_=>_!==void 0).slice(0,4),p=[...o(t,"Total Points"),...o(r,"Total Check-ins"),...o(s,"Total Photos"),...o(a,"Total Reviews")].filter(_=>_!==void 0&&!u.some(({value:b})=>b===_.value));return i.$$set=_=>{"lockedTotalPoints"in _&&n(2,t=_.lockedTotalPoints),"lockedTotalCheckIns"in _&&n(3,r=_.lockedTotalCheckIns),"lockedTotalPoiPhotos"in _&&n(4,s=_.lockedTotalPoiPhotos),"lockedTotalPoiReviews"in _&&n(5,a=_.lockedTotalPoiReviews)},[u,p,t,r,s,a]}class r6 extends it{constructor(e){super(),ot(this,e,n6,t6,st,{lockedTotalPoints:2,lockedTotalCheckIns:3,lockedTotalPoiPhotos:4,lockedTotalPoiReviews:5})}}function s6(i){let e,n;return e=new $a({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function i6(i){let e,n,t,r;return{c(){e=ce("img"),this.h()},l(s){e=ue(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){fr(e.src,n=Ss[i[0].badge])||se(e,"src",n),se(e,"class","h-14 w-14 -ml-0.5"),se(e,"alt","Badge Icon")},m(s,a){B(s,e,a),t||(r=mt(e,"error",i[3]),t=!0)},p(s,a){a&1&&!fr(e.src,n=Ss[s[0].badge])&&se(e,"src",n)},i:gt,o:gt,d(s){s&&I(e),t=!1,r()}}}function o6(i){let e,n,t=i[0].badge+"",r,s,a,o,u,p,_,b=i[0].threshold+"",$,P,L,z;const F=[i6,s6],U=[];function j(J,pe){return J[2]?1:0}return o=j(i),u=U[o]=F[o](i),{c(){e=ce("div"),n=ce("p"),r=He(t),s=ge(),a=ce("div"),u.c(),p=ge(),_=ce("p"),$=He(b),P=ge(),L=He(i[1]),this.h()},l(J){e=ue(J,"DIV",{class:!0});var pe=$e(e);n=ue(pe,"P",{class:!0});var re=$e(n);r=Ze(re,t),re.forEach(I),s=ve(pe),a=ue(pe,"DIV",{class:!0});var te=$e(a);u.l(te),te.forEach(I),p=ve(pe),_=ue(pe,"P",{class:!0});var de=$e(_);$=Ze(de,b),P=ve(de),L=Ze(de,i[1]),de.forEach(I),pe.forEach(I),this.h()},h(){se(n,"class","text-sm font-medium leading-none"),se(a,"class","shrink-0"),se(_,"class","text-xs"),se(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(J,pe){B(J,e,pe),ae(e,n),ae(n,r),ae(e,s),ae(e,a),U[o].m(a,null),ae(e,p),ae(e,_),ae(_,$),ae(_,P),ae(_,L),z=!0},p(J,pe){(!z||pe&1)&&t!==(t=J[0].badge+"")&&Qt(r,t);let re=o;o=j(J),o===re?U[o].p(J,pe):(vt(),E(U[re],1,1,()=>{U[re]=null}),yt(),u=U[o],u?u.p(J,pe):(u=U[o]=F[o](J),u.c()),T(u,1),u.m(a,null)),(!z||pe&1)&&b!==(b=J[0].threshold+"")&&Qt($,b),(!z||pe&2)&&Qt(L,J[1])},i(J){z||(T(u),z=!0)},o(J){E(u),z=!1},d(J){J&&I(e),U[o].d()}}}function a6(i){let e,n;return e=new No({props:{$$slots:{default:[o6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function l6(i){let e,n;return e=new Zs({props:{class:"p-2",$$slots:{default:[a6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function c6(i){let e,n;return e=new Dr({props:{$$slots:{default:[l6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function u6(i,e,n){let{badgeStatus:t}=e,{appendix:r}=e,s=!1;const a=()=>n(2,s=!0);return i.$$set=o=>{"badgeStatus"in o&&n(0,t=o.badgeStatus),"appendix"in o&&n(1,r=o.appendix)},[t,r,s,a]}class uy extends it{constructor(e){super(),ot(this,e,u6,c6,st,{badgeStatus:0,appendix:1})}}function k1(i,e,n){const t=i.slice();return t[7]=e[n],t}function C1(i,e,n){const t=i.slice();return t[7]=e[n],t}function f6(i){let e,n=[],t=new Map,r,s=dn(i[0]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let u=C1(i,s,o),p=a(u);t.set(p,n[o]=S1(p,u))}return{c(){e=ce("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);for(let p=0;p<n.length;p+=1)n[p].l(u);u.forEach(I),this.h()},h(){se(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2 mb-3")},m(o,u){B(o,e,u);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);r=!0},p(o,u){u&1&&(s=dn(o[0]),vt(),n=Yr(n,u,a,1,o,s,t,e,ss,S1,null,C1),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(n[u]);r=!0}},o(o){for(let u=0;u<n.length;u+=1)E(n[u]);r=!1},d(o){o&&I(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function h6(i){let e,n="<p>Currently you do not have any past achievements</p>";return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-mb704s"&&(e.innerHTML=n),this.h()},h(){se(e,"class","flex justify-center items-center p-4")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function S1(i,e){let n,t,r;return t=new uy({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function d6(i){let e,n;return e=new Sa({props:{$$slots:{default:[b6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function p6(i){let e;return{c(){e=He("Show All Others")},l(n){e=Ze(n,"Show All Others")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function m6(i){let e,n;return e=new yr({props:{class:"grow",variant:"outline",$$slots:{default:[p6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function _6(i){let e;return{c(){e=He("All Other Past Achievements")},l(n){e=Ze(n,"All Other Past Achievements")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function I1(i,e){let n,t,r;return t=new uy({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function g6(i){let e,n=[],t=new Map,r,s=dn(i[1]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let u=k1(i,s,o),p=a(u);t.set(p,n[o]=I1(p,u))}return{c(){e=ce("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);for(let p=0;p<n.length;p+=1)n[p].l(u);u.forEach(I),this.h()},h(){se(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(o,u){B(o,e,u);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(e,null);r=!0},p(o,u){u&2&&(s=dn(o[1]),vt(),n=Yr(n,u,a,1,o,s,t,e,ss,I1,null,k1),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(n[u]);r=!0}},o(o){for(let u=0;u<n.length;u+=1)E(n[u]);r=!1},d(o){o&&I(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function v6(i){let e,n,t,r;return e=new Vd({props:{class:"mb-4",$$slots:{default:[_6]},$$scope:{ctx:i}}}),t=new ou({props:{$$slots:{default:[g6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&4096&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function y6(i){let e,n;return e=new iu({props:{$$slots:{default:[v6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function b6(i){let e,n,t,r;return e=new vv({props:{class:"flex",$$slots:{default:[m6]},$$scope:{ctx:i}}}),t=new Ca({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[y6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&4096&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function w6(i){let e,n="Past Achievements",t,r,s,a,o,u;const p=[h6,f6],_=[];function b(P,L){return P[0].length===0?0:1}r=b(i),s=_[r]=p[r](i);let $=i[1].length>0&&d6(i);return{c(){e=ce("p"),e.textContent=n,t=ge(),s.c(),a=ge(),$&&$.c(),o=Ue(),this.h()},l(P){e=ue(P,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-tls7dx"&&(e.textContent=n),t=ve(P),s.l(P),a=ve(P),$&&$.l(P),o=Ue(),this.h()},h(){se(e,"class","text-sm font-medium leading-none text-muted-foreground mb-3")},m(P,L){B(P,e,L),B(P,t,L),_[r].m(P,L),B(P,a,L),$&&$.m(P,L),B(P,o,L),u=!0},p(P,[L]){s.p(P,L),P[1].length>0&&$.p(P,L)},i(P){u||(T(s),T($),u=!0)},o(P){E(s),E($),u=!1},d(P){P&&(I(e),I(t),I(a),I(o)),_[r].d(P),$&&$.d(P)}}}function x6(i,e,n){let{achievedTotalPoints:t}=e,{achievedTotalCheckIns:r}=e,{achievedTotalPoiPhotos:s}=e,{achievedTotalPoiReviews:a}=e;const o=(_,b)=>_.map($=>({value:$,appendix:b})),u=[o(t,"Total Points")[0],o(r,"Total Check-ins")[0],o(s,"Total Photos")[0],o(a,"Total Reviews")[0]].concat([...o(t.slice(1),"Total Points"),...o(r.slice(1),"Total Check-ins"),...o(s.slice(1),"Total Photos"),...o(a.slice(1),"Total Reviews")]).filter(_=>_!==void 0).slice(0,4),p=[...o(t,"Total Points"),...o(r,"Total Check-ins"),...o(s,"Total Photos"),...o(a,"Total Reviews")].filter(_=>_!==void 0&&!u.some(({value:b})=>b===_.value));return i.$$set=_=>{"achievedTotalPoints"in _&&n(2,t=_.achievedTotalPoints),"achievedTotalCheckIns"in _&&n(3,r=_.achievedTotalCheckIns),"achievedTotalPoiPhotos"in _&&n(4,s=_.achievedTotalPoiPhotos),"achievedTotalPoiReviews"in _&&n(5,a=_.achievedTotalPoiReviews)},[u,p,t,r,s,a]}class $6 extends it{constructor(e){super(),ot(this,e,x6,w6,st,{achievedTotalPoints:2,achievedTotalCheckIns:3,achievedTotalPoiPhotos:4,achievedTotalPoiReviews:5})}}function k6(i){let e;return{c(){e=He("Points & Badges")},l(n){e=Ze(n,"Points & Badges")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function C6(i){let e,n;return e=new C0({props:{class:"h-5 w-5"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function S6(i){let e,n;return e=new yr({props:{"aria-label":"Additional Information",builders:[i[19]],variant:"secondary",size:"icon",$$slots:{default:[C6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.builders=[t[19]]),r&1048576&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function I6(i){let e,n,t,r,s,a='<h4 class="text-sm font-semibold">Note</h4> <p class="text-sm">Total Points are calculated according to this formula:</p> <p class="italic text-xs">total_points = 20 * total_check_ins + 10 * total_photos + 5 * total_reviews</p>',o;return t=new C0({props:{className:"h-4 w-4"}}),{c(){e=ce("div"),n=ce("div"),q(t.$$.fragment),r=ge(),s=ce("div"),s.innerHTML=a,this.h()},l(u){e=ue(u,"DIV",{class:!0});var p=$e(e);n=ue(p,"DIV",{class:!0});var _=$e(n);Z(t.$$.fragment,_),_.forEach(I),r=ve(p),s=ue(p,"DIV",{class:!0,"data-svelte-h":!0}),bn(s)!=="svelte-4zeadu"&&(s.innerHTML=a),p.forEach(I),this.h()},h(){se(n,"class","shrink-0"),se(s,"class","space-y-1"),se(e,"class","flex justify-between space-x-4")},m(u,p){B(u,e,p),ae(e,n),G(t,n,null),ae(e,r),ae(e,s),o=!0},p:gt,i(u){o||(T(t.$$.fragment,u),o=!0)},o(u){E(t.$$.fragment,u),o=!1},d(u){u&&I(e),H(t)}}}function T6(i){let e,n,t,r;return e=new $0({props:{asChild:!0,$$slots:{default:[S6,({builder:s})=>({19:s}),({builder:s})=>s?524288:0]},$$scope:{ctx:i}}}),t=new k0({props:{class:"w-80",$$slots:{default:[I6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&1572864&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&1048576&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function P6(i){let e,n,t,r,s,a,o;return n=new ji({props:{tag:"h2",$$slots:{default:[k6]},$$scope:{ctx:i}}}),r=new x0({props:{portal:null,$$slots:{default:[T6]},$$scope:{ctx:i}}}),a=new qi({}),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),q(r.$$.fragment),s=ge(),q(a.$$.fragment),this.h()},l(u){e=ue(u,"DIV",{class:!0});var p=$e(e);Z(n.$$.fragment,p),t=ve(p),Z(r.$$.fragment,p),p.forEach(I),s=ve(u),Z(a.$$.fragment,u),this.h()},h(){se(e,"class","flex justify-between mb-3 items-center")},m(u,p){B(u,e,p),G(n,e,null),ae(e,t),G(r,e,null),B(u,s,p),G(a,u,p),o=!0},p(u,p){const _={};p&1048576&&(_.$$scope={dirty:p,ctx:u}),n.$set(_);const b={};p&1048576&&(b.$$scope={dirty:p,ctx:u}),r.$set(b)},i(u){o||(T(n.$$.fragment,u),T(r.$$.fragment,u),T(a.$$.fragment,u),o=!0)},o(u){E(n.$$.fragment,u),E(r.$$.fragment,u),E(a.$$.fragment,u),o=!1},d(u){u&&(I(e),I(s)),H(n),H(r),H(a,u)}}}function E6(i){let e,n,t,r,s,a;return e=new Oz({props:{totalPoints:i[3],totalCheckInCounts:i[4],totalPoiPhotoCounts:i[5],totalPoiReviewCounts:i[6],inProgressTotalPoints:i[12](i[7]),inProgressTotalCheckIns:i[12](i[8]),inProgressTotalPoiPhotos:i[12](i[9]),inProgressTotalPoiReviews:i[12](i[10])}}),t=new r6({props:{lockedTotalPoints:i[13](i[7]),lockedTotalCheckIns:i[13](i[8]),lockedTotalPoiPhotos:i[13](i[9]),lockedTotalPoiReviews:i[13](i[10])}}),s=new $6({props:{achievedTotalPoints:i[14](i[7]),achievedTotalCheckIns:i[14](i[8]),achievedTotalPoiPhotos:i[14](i[9]),achievedTotalPoiReviews:i[14](i[10])}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),q(s.$$.fragment)},l(o){Z(e.$$.fragment,o),n=ve(o),Z(t.$$.fragment,o),r=ve(o),Z(s.$$.fragment,o)},m(o,u){G(e,o,u),B(o,n,u),G(t,o,u),B(o,r,u),G(s,o,u),a=!0},p(o,u){const p={};u&8&&(p.totalPoints=o[3]),u&16&&(p.totalCheckInCounts=o[4]),u&32&&(p.totalPoiPhotoCounts=o[5]),u&64&&(p.totalPoiReviewCounts=o[6]),u&128&&(p.inProgressTotalPoints=o[12](o[7])),u&256&&(p.inProgressTotalCheckIns=o[12](o[8])),u&512&&(p.inProgressTotalPoiPhotos=o[12](o[9])),u&1024&&(p.inProgressTotalPoiReviews=o[12](o[10])),e.$set(p);const _={};u&128&&(_.lockedTotalPoints=o[13](o[7])),u&256&&(_.lockedTotalCheckIns=o[13](o[8])),u&512&&(_.lockedTotalPoiPhotos=o[13](o[9])),u&1024&&(_.lockedTotalPoiReviews=o[13](o[10])),t.$set(_);const b={};u&128&&(b.achievedTotalPoints=o[14](o[7])),u&256&&(b.achievedTotalCheckIns=o[14](o[8])),u&512&&(b.achievedTotalPoiPhotos=o[14](o[9])),u&1024&&(b.achievedTotalPoiReviews=o[14](o[10])),s.$set(b)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(s.$$.fragment,o),a=!1},d(o){o&&(I(n),I(r)),H(e,o),H(t,o),H(s,o)}}}function A6(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){se(e,"class","grow flex items-center justify-center")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function M6(i){let e,n,t,r;const s=[A6,E6],a=[];function o(u,p){return u[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function D6(i){let e,n,t,r,s;return n=new Zs({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[P6]},$$scope:{ctx:i}}}),r=new Is({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[M6]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),q(r.$$.fragment)},l(a){e=ue(a,"DIV",{});var o=$e(e);Z(n.$$.fragment,o),o.forEach(I),t=ve(a),Z(r.$$.fragment,a)},m(a,o){B(a,e,o),G(n,e,null),i[16](e),B(a,t,o),G(r,a,o),s=!0},p(a,o){const u={};o&1048576&&(u.$$scope={dirty:o,ctx:a}),n.$set(u);const p={};o&2&&(p.style=`height: calc(100% - ${a[1]}px);`),o&1050620&&(p.$$scope={dirty:o,ctx:a}),r.$set(p)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(n),i[16](null),H(r,a)}}}function z6(i){let e,n,t,r,s;return n=new Dr({props:{class:"relative p-4 h-full",$$slots:{default:[D6]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var o=$e(e);Z(n.$$.fragment,o),o.forEach(I),this.h()},h(){se(e,"class","flex flex-col p-4 relative h-full")},m(a,o){B(a,e,o),G(n,e,null),t=!0,r||(s=mt(window,"resize",i[11]),r=!0)},p(a,[o]){const u={};o&1050623&&(u.$$scope={dirty:o,ctx:a}),n.$set(u)},i(a){t||(T(n.$$.fragment,a),t=!0)},o(a){E(n.$$.fragment,a),t=!1},d(a){a&&I(e),H(n),r=!1,s()}}}const L6=vf({status:zw([rd("ACHIEVED"),rd("IN PROGRESS"),rd("LOCKED")]),badge:Lw(Ss),threshold:Sl,previous_threshold:Sl});function R6(i,e,n){let{slug:t}=e,r,s=64;const a=()=>{const te=r.offsetHeight;te!==void 0&&n(1,s=te)};Sr(a);let o=!0,u,p,_,b,$,P,L,z;const F=te=>{if(!Array.isArray(te))return console.error("Badge statuses are not an array"),[];const de=[];return te.forEach(me=>{const Y=L6.decode(me);if(Vf.isRight(Y)){const we=Y.right;de.push(we)}else console.error("Invalid BadgeStatus object received from API: ",Y.left)}),de};Sr(async()=>{const te=["totalPoints","totalCheckInCounts","totalPoiPhotoCounts","totalPoiReviewCounts","badgeStatusesForTotalPoints","badgeStatusesForTotalCheckInCounts","badgeStatusesForTotalPoiPhotoCounts","badgeStatusesForTotalPoiReviewCounts"],de=await fetch("/api/points-badges");if(de.ok){const me=await de.json();if(te.some(Y=>me[Y]===void 0)){console.error("Undefined data returned from API");return}if(typeof me.totalPoints!="number"||typeof me.totalCheckInCounts!="number"||typeof me.totalPoiPhotoCounts!="number"||typeof me.totalPoiReviewCounts!="number"){console.error("Data returned from API has unexpected type");return}n(7,$=F(me.badgeStatusesForTotalPoints)),n(8,P=F(me.badgeStatusesForTotalCheckInCounts)),n(9,L=F(me.badgeStatusesForTotalPoiPhotoCounts)),n(10,z=F(me.badgeStatusesForTotalPoiReviewCounts)),n(3,{totalPoints:u,totalCheckInCounts:p,totalPoiPhotoCounts:_,totalPoiReviewCounts:b}=me,u,n(4,p),n(5,_),n(6,b)),n(2,o=!1)}});const j=te=>te.find(({status:de})=>de==="IN PROGRESS")??te.slice(-1)[0],J=te=>te.filter(({status:de})=>de==="LOCKED"),pe=te=>te.filter(({status:de})=>de==="ACHIEVED").reverse();function re(te){Zt[te?"unshift":"push"](()=>{r=te,n(0,r)})}return i.$$set=te=>{"slug"in te&&n(15,t=te.slug)},[r,s,o,u,p,_,b,$,P,L,z,a,j,J,pe,t,re]}class O6 extends it{constructor(e){super(),ot(this,e,R6,z6,st,{slug:15})}}function F6(i){let e,n;return{c(){e=ce("span"),n=He(i[0]),this.h()},l(t){e=ue(t,"SPAN",{class:!0});var r=$e(e);n=Ze(r,i[0]),r.forEach(I),this.h()},h(){se(e,"class","lg:max-w-[320px] sm:max-w-[160px] max-w-[80px] truncate font-medium")},m(t,r){B(t,e,r),ae(e,n)},p(t,r){r&1&&Qt(n,t[0])},d(t){t&&I(e)}}}function B6(i){let e,n;return{c(){e=ce("div"),n=He(i[0]),this.h()},l(t){e=ue(t,"DIV",{class:!0});var r=$e(e);n=Ze(r,i[0]),r.forEach(I),this.h()},h(){se(e,"class","text-xs flex items-center")},m(t,r){B(t,e,r),ae(e,n)},p(t,r){r&1&&Qt(n,t[0])},d(t){t&&I(e)}}}function N6(i){let e,n,t,r;return e=new Fo({props:{$$slots:{default:[F6]},$$scope:{ctx:i}}}),t=new Bo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[B6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&3&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&3&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function V6(i){let e,n,t;return n=new Lo({props:{$$slots:{default:[N6]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","flex space-x-2")},m(r,s){B(r,e,s),G(n,e,null),t=!0},p(r,[s]){const a={};s&3&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function U6(i,e,n){let{value:t}=e;return i.$$set=r=>{"value"in r&&n(0,t=r.value)},[t]}let T1=class extends it{constructor(e){super(),ot(this,e,U6,V6,st,{value:0})}};function j6(i){let e;const n=i[4].default,t=xt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&$t(t,n,r,r[5],e?Ct(n,r[5],s,null):kt(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function q6(i){let e,n,t,r;return n=new Qc({props:{$$slots:{default:[Q6]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(s){e=ue(s,"DIV",{class:!0});var a=$e(e);Z(n.$$.fragment,a),a.forEach(I),this.h()},h(){se(e,"class",t=jt("flex items-center",i[0]))},m(s,a){B(s,e,a),G(n,e,null),r=!0},p(s,a){const o={};a&34&&(o.$$scope={dirty:a,ctx:s}),n.$set(o),(!r||a&1&&t!==(t=jt("flex items-center",s[0])))&&se(e,"class",t)},i(s){r||(T(n.$$.fragment,s),r=!0)},o(s){E(n.$$.fragment,s),r=!1},d(s){s&&I(e),H(n)}}}function G6(i){let e,n;return e=new S0({props:{class:"ml-2 h-4 w-4"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function H6(i){let e,n;return e=new I0({props:{class:"ml-2 h-4 w-4"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Z6(i){let e,n;return e=new T0({props:{class:"ml-2 h-4 w-4"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function W6(i){let e,n,t,r,s;const a=i[4].default,o=xt(a,i,i[5],null),u=[Z6,H6,G6],p=[];function _(b,$){return b[1].sort.order==="desc"?0:b[1].sort.order==="asc"?1:2}return n=_(i),t=p[n]=u[n](i),{c(){o&&o.c(),e=ge(),t.c(),r=Ue()},l(b){o&&o.l(b),e=ve(b),t.l(b),r=Ue()},m(b,$){o&&o.m(b,$),B(b,e,$),p[n].m(b,$),B(b,r,$),s=!0},p(b,$){o&&o.p&&(!s||$&32)&&$t(o,a,b,b[5],s?Ct(a,b[5],$,null):kt(b[5]),null);let P=n;n=_(b),n!==P&&(vt(),E(p[P],1,1,()=>{p[P]=null}),yt(),t=p[n],t||(t=p[n]=u[n](b),t.c()),T(t,1),t.m(r.parentNode,r))},i(b){s||(T(o,b),T(t),s=!0)},o(b){E(o,b),E(t),s=!1},d(b){b&&(I(e),I(r)),o&&o.d(b),p[n].d(b)}}}function K6(i){let e,n;return e=new Jr({props:{variant:"ghost",builders:[i[6]],class:"-ml-3 h-8 data-[state=open]:bg-accent",$$slots:{default:[W6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&64&&(s.builders=[t[6]]),r&34&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function X6(i){let e;return{c(){e=He("Asc")},l(n){e=Ze(n,"Asc")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function J6(i){let e;return{c(){e=He("Desc")},l(n){e=Ze(n,"Desc")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function Y6(i){let e,n,t,r;return e=new Ef({props:{$$slots:{default:[X6]},$$scope:{ctx:i}}}),e.$on("click",i[2]),t=new Ef({props:{$$slots:{default:[J6]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&32&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function Q6(i){let e,n,t,r;return e=new eu({props:{asChild:!0,$$slots:{default:[K6,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:i}}}),t=new tu({props:{align:"start",$$slots:{default:[Y6]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&98&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&32&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function eL(i){let e,n,t,r;const s=[q6,j6],a=[];function o(u,p){return u[1].sort.disabled?1:0}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function tL(i,e,n){let{$$slots:t={},$$scope:r}=e,{class:s=void 0}=e,{props:a}=e;function o(p){a.sort.order!=="asc"&&a.sort.toggle(p)}function u(p){a.sort.order!=="desc"&&a.sort.toggle(p)}return i.$$set=p=>{"class"in p&&n(0,s=p.class),"props"in p&&n(1,a=p.props),"$$scope"in p&&n(5,r=p.$$scope)},[s,a,o,u,t,r]}let nL=class extends it{constructor(e){super(),ot(this,e,tL,eL,st,{class:0,props:1})}};function P1(i){let e,n;return e=new Jr({props:{variant:"outline",class:"h-8 px-2 lg:px-3",$$slots:{default:[rL]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function rL(i){let e,n;return e=new E0({props:{class:"h-4 w-4"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function sL(i){let e,n,t,r,s,a,o,u,p,_,b,$,P;function L(J){i[5](J)}let z={placeholder:"Filter by name...",class:"h-8 sm:w-[250px] lg:w-[350px] grow sm:grow-0 lg:grow-0 md:grow hover:bg-accent hover:text-accent-foreground bg-background focus-visible:m-0.5",type:"search"};i[1].name!==void 0&&(z.value=i[1].name),n=new P0({props:z}),Zt.push(()=>An(n,"value",L));function F(J){i[6](J)}let U={title:"POI Features",options:i[2]};i[1].features!==void 0&&(U.filterValues=i[1].features),u=new BL({props:U}),Zt.push(()=>An(u,"filterValues",F));let j=i[3]&&P1(i);return $=new KL({props:{tableModel:i[0]}}),{c(){e=ce("div"),q(n.$$.fragment),r=ge(),s=ce("div"),a=ce("div"),o=ce("div"),q(u.$$.fragment),_=ge(),j&&j.c(),b=ge(),q($.$$.fragment),this.h()},l(J){e=ue(J,"DIV",{class:!0});var pe=$e(e);Z(n.$$.fragment,pe),r=ve(pe),s=ue(pe,"DIV",{class:!0});var re=$e(s);a=ue(re,"DIV",{class:!0});var te=$e(a);o=ue(te,"DIV",{class:!0});var de=$e(o);Z(u.$$.fragment,de),_=ve(de),j&&j.l(de),de.forEach(I),te.forEach(I),b=ve(re),Z($.$$.fragment,re),re.forEach(I),pe.forEach(I),this.h()},h(){se(o,"class","flex items-center gap-2 w-full"),se(a,"class","relative overflow-x-auto flex sm:overflow-x-visible"),se(s,"class","flex flex-1 sm:items-center grow justify-between gap-2 flex-col sm:flex-row relative overflow-x-auto sm:overflow-x-visible"),se(e,"class","flex items-center gap-2 flex-wrap")},m(J,pe){B(J,e,pe),G(n,e,null),ae(e,r),ae(e,s),ae(s,a),ae(a,o),G(u,o,null),ae(o,_),j&&j.m(o,null),ae(s,b),G($,s,null),P=!0},p(J,[pe]){const re={};!t&&pe&2&&(t=!0,re.value=J[1].name,En(()=>t=!1)),n.$set(re);const te={};pe&4&&(te.options=J[2]),!p&&pe&2&&(p=!0,te.filterValues=J[1].features,En(()=>p=!1)),u.$set(te),J[3]?j?(j.p(J,pe),pe&8&&T(j,1)):(j=P1(J),j.c(),T(j,1),j.m(o,null)):j&&(vt(),E(j,1,1,()=>{j=null}),yt());const de={};pe&1&&(de.tableModel=J[0]),$.$set(de)},i(J){P||(T(n.$$.fragment,J),T(u.$$.fragment,J),T(j),T($.$$.fragment,J),P=!0)},o(J){E(n.$$.fragment,J),E(u.$$.fragment,J),E(j),E($.$$.fragment,J),P=!1},d(J){J&&I(e),H(n),H(u),j&&j.d(),H($)}}}function iL(i,e,n){let t,r,{tableModel:s}=e,a;Sr(async()=>{try{const L=await(await fetch("/api/poi/features")).json();n(2,a=L.allPOIFeatures)}catch(P){console.error(P)}});const{pluginStates:u}=s,{filterValues:p}=u.colFilter;on(i,p,P=>n(1,r=P));function _(P){i.$$.not_equal(r.name,P)&&(r.name=P,p.set(r))}function b(P){i.$$.not_equal(r.features,P)&&(r.features=P,p.set(r))}const $=()=>{Gr(p,r.name="",r),Gr(p,r.features=[],r)};return i.$$set=P=>{"tableModel"in P&&n(0,s=P.tableModel)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=Object.values({...r}).some(P=>P.length>0||typeof P=="string"&&P.length>0))},[s,r,a,t,p,_,b,$]}let oL=class extends it{constructor(e){super(),ot(this,e,iL,sL,st,{tableModel:0})}};function aL(i){let e,n;return e=new F0({props:{placeholder:"Select page size"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function lL(i){let e;return{c(){e=He("10")},l(n){e=Ze(n,"10")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function cL(i){let e;return{c(){e=He("20")},l(n){e=Ze(n,"20")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function uL(i){let e;return{c(){e=He("30")},l(n){e=Ze(n,"30")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function fL(i){let e;return{c(){e=He("40")},l(n){e=Ze(n,"40")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function hL(i){let e;return{c(){e=He("50")},l(n){e=Ze(n,"50")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function dL(i){let e,n,t,r,s,a,o,u,p,_;return e=new Bi({props:{value:"10",$$slots:{default:[lL]},$$scope:{ctx:i}}}),t=new Bi({props:{value:"20",$$slots:{default:[cL]},$$scope:{ctx:i}}}),s=new Bi({props:{value:"30",$$slots:{default:[uL]},$$scope:{ctx:i}}}),o=new Bi({props:{value:"40",$$slots:{default:[fL]},$$scope:{ctx:i}}}),p=new Bi({props:{value:"50",$$slots:{default:[hL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),q(s.$$.fragment),a=ge(),q(o.$$.fragment),u=ge(),q(p.$$.fragment)},l(b){Z(e.$$.fragment,b),n=ve(b),Z(t.$$.fragment,b),r=ve(b),Z(s.$$.fragment,b),a=ve(b),Z(o.$$.fragment,b),u=ve(b),Z(p.$$.fragment,b)},m(b,$){G(e,b,$),B(b,n,$),G(t,b,$),B(b,r,$),G(s,b,$),B(b,a,$),G(o,b,$),B(b,u,$),G(p,b,$),_=!0},p(b,$){const P={};$&1048576&&(P.$$scope={dirty:$,ctx:b}),e.$set(P);const L={};$&1048576&&(L.$$scope={dirty:$,ctx:b}),t.$set(L);const z={};$&1048576&&(z.$$scope={dirty:$,ctx:b}),s.$set(z);const F={};$&1048576&&(F.$$scope={dirty:$,ctx:b}),o.$set(F);const U={};$&1048576&&(U.$$scope={dirty:$,ctx:b}),p.$set(U)},i(b){_||(T(e.$$.fragment,b),T(t.$$.fragment,b),T(s.$$.fragment,b),T(o.$$.fragment,b),T(p.$$.fragment,b),_=!0)},o(b){E(e.$$.fragment,b),E(t.$$.fragment,b),E(s.$$.fragment,b),E(o.$$.fragment,b),E(p.$$.fragment,b),_=!1},d(b){b&&(I(n),I(r),I(a),I(u)),H(e,b),H(t,b),H(s,b),H(o,b),H(p,b)}}}function pL(i){let e,n,t,r;return e=new M0({props:{class:"w-[180px]",$$slots:{default:[aL]},$$scope:{ctx:i}}}),t=new D0({props:{$$slots:{default:[dL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&1048576&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&1048576&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function mL(i){let e,n="Go to first page",t,r,s;return r=new z0({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ge(),q(r.$$.fragment),this.h()},l(a){e=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-lc32pz"&&(e.textContent=n),t=ve(a),Z(r.$$.fragment,a),this.h()},h(){se(e,"class","sr-only")},m(a,o){B(a,e,o),B(a,t,o),G(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(r,a)}}}function _L(i){let e,n="Go to previous page",t,r,s;return r=new L0({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ge(),q(r.$$.fragment),this.h()},l(a){e=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-2don1e"&&(e.textContent=n),t=ve(a),Z(r.$$.fragment,a),this.h()},h(){se(e,"class","sr-only")},m(a,o){B(a,e,o),B(a,t,o),G(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(r,a)}}}function gL(i){let e,n="Go to next page",t,r,s;return r=new R0({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ge(),q(r.$$.fragment),this.h()},l(a){e=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-10zd0e2"&&(e.textContent=n),t=ve(a),Z(r.$$.fragment,a),this.h()},h(){se(e,"class","sr-only")},m(a,o){B(a,e,o),B(a,t,o),G(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(r,a)}}}function vL(i){let e,n="Go to last page",t,r,s;return r=new O0({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ge(),q(r.$$.fragment),this.h()},l(a){e=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-17pj58n"&&(e.textContent=n),t=ve(a),Z(r.$$.fragment,a),this.h()},h(){se(e,"class","sr-only")},m(a,o){B(a,e,o),B(a,t,o),G(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(r,a)}}}function yL(i){let e,n,t,r="Rows per page",s,a,o,u,p,_=i[0]+1+"",b,$,P,L,z,F,U,j,J,pe,re,te,de;return a=new A0({props:{onSelectedChange:i[14],selected:{value:10,label:"10"},$$slots:{default:[pL]},$$scope:{ctx:i}}}),F=new Jr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[mL]},$$scope:{ctx:i}}}),F.$on("click",i[15]),j=new Jr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[_L]},$$scope:{ctx:i}}}),j.$on("click",i[16]),pe=new Jr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[gL]},$$scope:{ctx:i}}}),pe.$on("click",i[17]),te=new Jr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[vL]},$$scope:{ctx:i}}}),te.$on("click",i[18]),{c(){e=ce("div"),n=ce("div"),t=ce("p"),t.textContent=r,s=ge(),q(a.$$.fragment),o=ge(),u=ce("div"),p=He("Page "),b=He(_),$=He(" of "),P=He(i[1]),L=ge(),z=ce("div"),q(F.$$.fragment),U=ge(),q(j.$$.fragment),J=ge(),q(pe.$$.fragment),re=ge(),q(te.$$.fragment),this.h()},l(me){e=ue(me,"DIV",{class:!0});var Y=$e(e);n=ue(Y,"DIV",{class:!0});var we=$e(n);t=ue(we,"P",{class:!0,"data-svelte-h":!0}),bn(t)!=="svelte-opj3eb"&&(t.textContent=r),s=ve(we),Z(a.$$.fragment,we),we.forEach(I),o=ve(Y),u=ue(Y,"DIV",{class:!0});var Ce=$e(u);p=Ze(Ce,"Page "),b=Ze(Ce,_),$=Ze(Ce," of "),P=Ze(Ce,i[1]),Ce.forEach(I),L=ve(Y),z=ue(Y,"DIV",{class:!0});var _e=$e(z);Z(F.$$.fragment,_e),U=ve(_e),Z(j.$$.fragment,_e),J=ve(_e),Z(pe.$$.fragment,_e),re=ve(_e),Z(te.$$.fragment,_e),_e.forEach(I),Y.forEach(I),this.h()},h(){se(t,"class","text-sm font-medium"),se(n,"class","flex items-center space-x-2"),se(u,"class","flex w-[100px] items-center justify-center text-sm font-medium"),se(z,"class","flex items-center space-x-2"),se(e,"class","flex items-center space-x-6 lg:space-x-8 flex-wrap gap-2")},m(me,Y){B(me,e,Y),ae(e,n),ae(n,t),ae(n,s),G(a,n,null),ae(e,o),ae(e,u),ae(u,p),ae(u,b),ae(u,$),ae(u,P),ae(e,L),ae(e,z),G(F,z,null),ae(z,U),G(j,z,null),ae(z,J),G(pe,z,null),ae(z,re),G(te,z,null),de=!0},p(me,[Y]){const we={};Y&1048576&&(we.$$scope={dirty:Y,ctx:me}),a.$set(we),(!de||Y&1)&&_!==(_=me[0]+1+"")&&Qt(b,_),(!de||Y&2)&&Qt(P,me[1]);const Ce={};Y&4&&(Ce.disabled=!me[2]),Y&1048576&&(Ce.$$scope={dirty:Y,ctx:me}),F.$set(Ce);const _e={};Y&4&&(_e.disabled=!me[2]),Y&1048576&&(_e.$$scope={dirty:Y,ctx:me}),j.$set(_e);const fe={};Y&8&&(fe.disabled=!me[3]),Y&1048576&&(fe.$$scope={dirty:Y,ctx:me}),pe.$set(fe);const Ee={};Y&8&&(Ee.disabled=!me[3]),Y&1048576&&(Ee.$$scope={dirty:Y,ctx:me}),te.$set(Ee)},i(me){de||(T(a.$$.fragment,me),T(F.$$.fragment,me),T(j.$$.fragment,me),T(pe.$$.fragment,me),T(te.$$.fragment,me),de=!0)},o(me){E(a.$$.fragment,me),E(F.$$.fragment,me),E(j.$$.fragment,me),E(pe.$$.fragment,me),E(te.$$.fragment,me),de=!1},d(me){me&&I(e),H(a),H(F),H(j),H(pe),H(te)}}}function bL(i,e,n){let t,r,s,a,o,u,{tableModel:p}=e;const{pageRows:_,pluginStates:b,rows:$}=p;on(i,_,de=>n(5,u=de)),on(i,$,de=>n(4,o=de));const{hasNextPage:P,hasPreviousPage:L,pageIndex:z,pageCount:F,pageSize:U}=b.page;on(i,P,de=>n(3,a=de)),on(i,L,de=>n(2,s=de)),on(i,z,de=>n(0,t=de)),on(i,F,de=>n(1,r=de));const j=de=>U.set(Number(de==null?void 0:de.value)),J=()=>Gr(z,t=0,t),pe=()=>Gr(z,t=t-1,t),re=()=>Gr(z,t=t+1,t),te=()=>Gr(z,t=Math.ceil(o.length/u.length)-1,t);return i.$$set=de=>{"tableModel"in de&&n(13,p=de.tableModel)},[t,r,s,a,o,u,_,$,P,L,z,F,U,p,j,J,pe,re,te]}let wL=class extends it{constructor(e){super(),ot(this,e,bL,yL,st,{tableModel:13})}};function E1(i,e,n){const t=i.slice();return t[9]=e[n],t}function A1(i,e,n){const t=i.slice();return t[9]=e[n],t}function M1(i){let e,n,t,r,s,a,o,u;e=new qi({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new fo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[xL]},$$scope:{ctx:i}}});const p=[kL,$L],_=[];function b($,P){return $[0].length>2?0:1}return a=b(i),o=_[a]=p[a](i),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),s=ce("div"),o.c(),this.h()},l($){Z(e.$$.fragment,$),n=ve($),Z(t.$$.fragment,$),r=ve($),s=ue($,"DIV",{class:!0});var P=$e(s);o.l(P),P.forEach(I),this.h()},h(){se(s,"class","hidden space-x-1 lg:flex")},m($,P){G(e,$,P),B($,n,P),G(t,$,P),B($,r,P),B($,s,P),_[a].m(s,null),u=!0},p($,P){const L={};P&32769&&(L.$$scope={dirty:P,ctx:$}),t.$set(L);let z=a;a=b($),a===z?_[a].p($,P):(vt(),E(_[z],1,1,()=>{_[z]=null}),yt(),o=_[a],o?o.p($,P):(o=_[a]=p[a]($),o.c()),T(o,1),o.m(s,null))},i($){u||(T(e.$$.fragment,$),T(t.$$.fragment,$),T(o),u=!0)},o($){E(e.$$.fragment,$),E(t.$$.fragment,$),E(o),u=!1},d($){$&&(I(n),I(r),I(s)),H(e,$),H(t,$),_[a].d()}}}function xL(i){let e=i[0].length+"",n;return{c(){n=He(e)},l(t){n=Ze(t,e)},m(t,r){B(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&Qt(n,e)},d(t){t&&I(n)}}}function $L(i){let e,n,t=dn(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=D1(A1(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ue()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ue()},m(a,o){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,o);B(a,e,o),n=!0},p(a,o){if(o&1){t=dn(a[0]);let u;for(u=0;u<t.length;u+=1){const p=A1(a,t,u);r[u]?(r[u].p(p,o),T(r[u],1)):(r[u]=D1(p),r[u].c(),T(r[u],1),r[u].m(e.parentNode,e))}for(vt(),u=t.length;u<r.length;u+=1)s(u);yt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&I(e),Hs(r,a)}}}function kL(i){let e,n;return e=new fo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[SL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function CL(i){let e=i[9]+"",n,t;return{c(){n=He(e),t=ge()},l(r){n=Ze(r,e),t=ve(r)},m(r,s){B(r,n,s),B(r,t,s)},p(r,s){s&1&&e!==(e=r[9]+"")&&Qt(n,e)},d(r){r&&(I(n),I(t))}}}function D1(i){let e,n;return e=new fo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[CL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function SL(i){let e=i[0].length+"",n,t;return{c(){n=He(e),t=He(" Selected")},l(r){n=Ze(r,e),t=Ze(r," Selected")},m(r,s){B(r,n,s),B(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&Qt(n,e)},d(r){r&&(I(n),I(t))}}}function IL(i){let e,n,t,r,s,a;e=new Pd({props:{class:"mr-2 h-4 w-4"}});let o=i[0].length>0&&M1(i);return{c(){q(e.$$.fragment),n=ge(),t=He(i[1]),r=ge(),o&&o.c(),s=Ue()},l(u){Z(e.$$.fragment,u),n=ve(u),t=Ze(u,i[1]),r=ve(u),o&&o.l(u),s=Ue()},m(u,p){G(e,u,p),B(u,n,p),B(u,t,p),B(u,r,p),o&&o.m(u,p),B(u,s,p),a=!0},p(u,p){(!a||p&2)&&Qt(t,u[1]),u[0].length>0?o?(o.p(u,p),p&1&&T(o,1)):(o=M1(u),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(vt(),E(o,1,1,()=>{o=null}),yt())},i(u){a||(T(e.$$.fragment,u),T(o),a=!0)},o(u){E(e.$$.fragment,u),E(o),a=!1},d(u){u&&(I(n),I(t),I(r),I(s)),H(e,u),o&&o.d(u)}}}function TL(i){let e,n;return e=new Jr({props:{builders:[i[12]],variant:"outline",size:"sm",class:"h-8 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[IL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&32771&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function PL(i){let e;return{c(){e=He("No results found.")},l(n){e=Ze(n,"No results found.")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function z1(i){let e,n=i[3][i[9]]+"",t;return{c(){e=ce("span"),t=He(n),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=$e(e);t=Ze(s,n),s.forEach(I),this.h()},h(){se(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){B(r,e,s),ae(e,t)},p(r,s){s&12&&n!==(n=r[3][r[9]]+"")&&Qt(t,n)},d(r){r&&I(e)}}}function EL(i){let e,n,t,r,s,a=i[9]+"",o,u,p,_;n=new Ed({props:{className:jt("h-4 w-4")}});let b=i[3][i[9]]&&z1(i);return{c(){e=ce("div"),q(n.$$.fragment),r=ge(),s=ce("span"),o=He(a),u=ge(),b&&b.c(),p=ge(),this.h()},l($){e=ue($,"DIV",{class:!0});var P=$e(e);Z(n.$$.fragment,P),P.forEach(I),r=ve($),s=ue($,"SPAN",{});var L=$e(s);o=Ze(L,a),L.forEach(I),u=ve($),b&&b.l($),p=ve($),this.h()},h(){se(e,"class",t=jt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m($,P){B($,e,P),G(n,e,null),B($,r,P),B($,s,P),ae(s,o),B($,u,P),b&&b.m($,P),B($,p,P),_=!0},p($,P){(!_||P&5&&t!==(t=jt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",$[0].includes($[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&se(e,"class",t),(!_||P&4)&&a!==(a=$[9]+"")&&Qt(o,a),$[3][$[9]]?b?b.p($,P):(b=z1($),b.c(),b.m(p.parentNode,p)):b&&(b.d(1),b=null)},i($){_||(T(n.$$.fragment,$),_=!0)},o($){E(n.$$.fragment,$),_=!1},d($){$&&(I(e),I(r),I(s),I(u),I(p)),H(n),b&&b.d($)}}}function L1(i){let e,n;return e=new zl({props:{class:"cursor-pointer",value:i[9],onSelect:i[6],$$slots:{default:[EL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[9]),r&32781&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function AL(i){let e,n,t=dn(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=L1(E1(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ue()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ue()},m(a,o){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,o);B(a,e,o),n=!0},p(a,o){if(o&45){t=dn(a[2]);let u;for(u=0;u<t.length;u+=1){const p=E1(a,t,u);r[u]?(r[u].p(p,o),T(r[u],1)):(r[u]=L1(p),r[u].c(),T(r[u],1),r[u].m(e.parentNode,e))}for(vt(),u=t.length;u<r.length;u+=1)s(u);yt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&I(e),Hs(r,a)}}}function R1(i){let e,n,t,r;return e=new Kd({}),t=new zl({props:{class:"justify-center text-center cursor-pointer",onSelect:i[7],$$slots:{default:[ML]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.onSelect=s[7]),a&32768&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function ML(i){let e;return{c(){e=He("Clear Filter")},l(n){e=Ze(n,"Clear Filter")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function DL(i){let e,n,t,r,s,a;e=new Gd({props:{$$slots:{default:[PL]},$$scope:{ctx:i}}}),t=new Hd({props:{$$slots:{default:[AL]},$$scope:{ctx:i}}});let o=i[0].length>0&&R1(i);return{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),o&&o.c(),s=Ue()},l(u){Z(e.$$.fragment,u),n=ve(u),Z(t.$$.fragment,u),r=ve(u),o&&o.l(u),s=Ue()},m(u,p){G(e,u,p),B(u,n,p),G(t,u,p),B(u,r,p),o&&o.m(u,p),B(u,s,p),a=!0},p(u,p){const _={};p&32768&&(_.$$scope={dirty:p,ctx:u}),e.$set(_);const b={};p&32781&&(b.$$scope={dirty:p,ctx:u}),t.$set(b),u[0].length>0?o?(o.p(u,p),p&1&&T(o,1)):(o=R1(u),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(vt(),E(o,1,1,()=>{o=null}),yt())},i(u){a||(T(e.$$.fragment,u),T(t.$$.fragment,u),T(o),a=!0)},o(u){E(e.$$.fragment,u),E(t.$$.fragment,u),E(o),a=!1},d(u){u&&(I(n),I(r),I(s)),H(e,u),H(t,u),o&&o.d(u)}}}function zL(i){let e,n,t,r;return e=new Zd({props:{placeholder:i[1]}}),t=new Wd({props:{$$slots:{default:[DL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.placeholder=s[1]),e.$set(o);const u={};a&32781&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function LL(i){let e,n;return e=new qd({props:{loop:!0,$$slots:{default:[zL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function RL(i){let e,n,t,r;return e=new Yd({props:{asChild:!0,$$slots:{default:[TL,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new Xd({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[LL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&36867&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&32783&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function OL(i){let e,n,t;function r(a){i[8](a)}let s={$$slots:{default:[RL]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.open=i[4]),e=new Jd({props:s}),Zt.push(()=>An(e,"open",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,[o]){const u={};o&32783&&(u.$$scope={dirty:o,ctx:a}),!n&&o&16&&(n=!0,u.open=a[4],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function FL(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{options:s}=e,{counts:a={}}=e,o=!1;const u=$=>{Array.isArray(t)&&t.includes($)?n(0,t=t.filter(P=>P!==$)):n(0,t=[...Array.isArray(t)?t:[],$])},p=$=>{u($)},_=()=>{n(0,t=[])};function b($){o=$,n(4,o)}return i.$$set=$=>{"filterValues"in $&&n(0,t=$.filterValues),"title"in $&&n(1,r=$.title),"options"in $&&n(2,s=$.options),"counts"in $&&n(3,a=$.counts)},[t,r,s,a,o,u,p,_,b]}let BL=class extends it{constructor(e){super(),ot(this,e,FL,OL,st,{filterValues:0,title:1,options:2,counts:3})}};function O1(i,e,n){const t=i.slice();return t[9]=e[n],t[10]=e,t[11]=n,t}function NL(i){let e,n,t;return e=new V0({props:{class:"mr-2 h-4 w-4"}}),{c(){q(e.$$.fragment),n=He(`
			View`)},l(r){Z(e.$$.fragment,r),n=Ze(r,`
			View`)},m(r,s){G(e,r,s),B(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function VL(i){let e,n;return e=new Jr({props:{variant:"outline",size:"sm",class:"h-8 flex hover:bg-accent hover:text-accent-foreground bg-background",builders:[i[12]],$$slots:{default:[NL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&8192&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function UL(i){let e;return{c(){e=He("Toggle columns")},l(n){e=Ze(n,"Toggle columns")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function jL(i){let e,n,t;function r(a){i[5](a,i[9])}let s={$$slots:{default:[qL]},$$scope:{ctx:i}};return i[0][i[9].id]!==void 0&&(s.checked=i[0][i[9].id]),e=new U0({props:s}),Zt.push(()=>An(e,"checked",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,o){i=a;const u={};o&8192&&(u.$$scope={dirty:o,ctx:i}),!n&&o&3&&(n=!0,u.checked=i[0][i[9].id],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function qL(i){let e=i[9].header+"",n,t;return{c(){n=He(e),t=ge()},l(r){n=Ze(r,e),t=ve(r)},m(r,s){B(r,n,s),B(r,t,s)},p:gt,d(r){r&&(I(n),I(t))}}}function F1(i){let e=i[3].includes(i[9].id),n,t,r=e&&jL(i);return{c(){r&&r.c(),n=Ue()},l(s){r&&r.l(s),n=Ue()},m(s,a){r&&r.m(s,a),B(s,n,a),t=!0},p(s,a){e&&r.p(s,a)},i(s){t||(T(r),t=!0)},o(s){E(r),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function GL(i){let e,n,t,r,s,a;e=new B0({props:{$$slots:{default:[UL]},$$scope:{ctx:i}}}),t=new N0({});let o=dn(i[1]),u=[];for(let _=0;_<o.length;_+=1)u[_]=F1(O1(i,o,_));const p=_=>E(u[_],1,1,()=>{u[_]=null});return{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge();for(let _=0;_<u.length;_+=1)u[_].c();s=Ue()},l(_){Z(e.$$.fragment,_),n=ve(_),Z(t.$$.fragment,_),r=ve(_);for(let b=0;b<u.length;b+=1)u[b].l(_);s=Ue()},m(_,b){G(e,_,b),B(_,n,b),G(t,_,b),B(_,r,b);for(let $=0;$<u.length;$+=1)u[$]&&u[$].m(_,b);B(_,s,b),a=!0},p(_,b){const $={};if(b&8192&&($.$$scope={dirty:b,ctx:_}),e.$set($),b&11){o=dn(_[1]);let P;for(P=0;P<o.length;P+=1){const L=O1(_,o,P);u[P]?(u[P].p(L,b),T(u[P],1)):(u[P]=F1(L),u[P].c(),T(u[P],1),u[P].m(s.parentNode,s))}for(vt(),P=o.length;P<u.length;P+=1)p(P);yt()}},i(_){if(!a){T(e.$$.fragment,_),T(t.$$.fragment,_);for(let b=0;b<o.length;b+=1)T(u[b]);a=!0}},o(_){E(e.$$.fragment,_),E(t.$$.fragment,_),u=u.filter(Boolean);for(let b=0;b<u.length;b+=1)E(u[b]);a=!1},d(_){_&&(I(n),I(r),I(s)),H(e,_),H(t,_),Hs(u,_)}}}function HL(i){let e,n,t,r;return e=new eu({props:{asChild:!0,$$slots:{default:[VL,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new tu({props:{$$slots:{default:[GL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&12288&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&8193&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function ZL(i){let e,n;return e=new Qc({props:{$$slots:{default:[HL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&8193&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function WL(i,e,n){let t,{tableModel:r}=e;const{pluginStates:s,flatColumns:a}=r,{hiddenColumnIds:o}=s.hide;on(i,o,$=>n(6,t=$));const u=a.map($=>$.id);let p=Object.fromEntries(u.map($=>[$,!0]));const _=["name","features"];function b($,P){i.$$.not_equal(p[P.id],$)&&(p[P.id]=$,n(0,p))}return i.$$set=$=>{"tableModel"in $&&n(4,r=$.tableModel)},i.$$.update=()=>{i.$$.dirty&1&&Gr(o,t=Object.entries(p).filter(([,$])=>!$).map(([$])=>$),t)},[p,a,o,_,r,b]}let KL=class extends it{constructor(e){super(),ot(this,e,WL,ZL,st,{tableModel:4})}};function B1(i,e,n){const t=i.slice();return t[14]=e[n],t}function N1(i,e,n){const t=i.slice();return t[18]=e[n],t}function V1(i,e,n){const t=i.slice();return t[22]=e[n],t}function U1(i,e,n){const t=i.slice();return t[18]=e[n],t}function XL(i){let e,n;return e=new Nf({props:{of:i[18].render()}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.of=t[18].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function JL(i){let e,n;return e=new nL({props:{props:i[27],$$slots:{default:[XL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&134217728&&(s.props=t[27]),r&268435460&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function YL(i){let e,n,t;const r=[i[21]];let s={$$slots:{default:[JL]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Ie(s,r[a]);return e=new J0({props:s}),{c(){q(e.$$.fragment),n=ge()},l(a){Z(e.$$.fragment,a),n=ve(a)},m(a,o){G(e,a,o),B(a,n,o),t=!0},p(a,o){const u=o&2097152?St(r,[vn(a[21])]):{};o&402653188&&(u.$$scope={dirty:o,ctx:a}),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){a&&I(n),H(e,a)}}}function j1(i,e){let n,t,r;return t=new Vo({props:{attrs:e[18].attrs(),props:e[18].props(),$$slots:{default:[YL,({attrs:s,props:a})=>({21:s,27:a}),({attrs:s,props:a})=>(s?2097152:0)|(a?134217728:0)]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&4&&(o.attrs=e[18].attrs()),a&4&&(o.props=e[18].props()),a&404750340&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function QL(i){let e=[],n=new Map,t,r,s=dn(i[22].cells);const a=o=>o[18].id;for(let o=0;o<s.length;o+=1){let u=U1(i,s,o),p=a(u);n.set(p,e[o]=j1(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&136314884&&(s=dn(o[22].cells),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,j1,t,U1),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function eR(i){let e,n,t;return e=new Bf({props:{$$slots:{default:[QL]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge()},l(r){Z(e.$$.fragment,r),n=ve(r)},m(r,s){G(e,r,s),B(r,n,s),t=!0},p(r,s){const a={};s&268435460&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function q1(i){let e,n;return e=new Vo({props:{rowAttrs:i[22].attrs(),$$slots:{default:[eR]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.rowAttrs=t[22].attrs()),r&268435460&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function tR(i){let e,n,t=dn(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=q1(V1(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ue()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ue()},m(a,o){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,o);B(a,e,o),n=!0},p(a,o){if(o&136314884){t=dn(a[2]);let u;for(u=0;u<t.length;u+=1){const p=V1(a,t,u);r[u]?(r[u].p(p,o),T(r[u],1)):(r[u]=q1(p),r[u].c(),T(r[u],1),r[u].m(e.parentNode,e))}for(vt(),u=t.length;u<r.length;u+=1)s(u);yt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&I(e),Hs(r,a)}}}function nR(i){let e,n;return e=new Nf({props:{of:i[18].render()}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.of=t[18].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function rR(i){let e,n,t;const r=[i[21]];let s={$$slots:{default:[nR]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Ie(s,r[a]);return e=new Y0({props:s}),{c(){q(e.$$.fragment),n=ge()},l(a){Z(e.$$.fragment,a),n=ve(a)},m(a,o){G(e,a,o),B(a,n,o),t=!0},p(a,o){const u=o&2097152?St(r,[vn(a[21])]):{};o&268435472&&(u.$$scope={dirty:o,ctx:a}),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){a&&I(n),H(e,a)}}}function G1(i,e){let n,t,r;return t=new Vo({props:{attrs:e[18].attrs(),$$slots:{default:[rR,({attrs:s})=>({21:s}),({attrs:s})=>s?2097152:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.attrs=e[18].attrs()),a&270532624&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function sR(i){let e=[],n=new Map,t,r,s=dn(i[14].cells);const a=o=>o[18].id;for(let o=0;o<s.length;o+=1){let u=N1(i,s,o),p=a(u);n.set(p,e[o]=G1(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&2097168&&(s=dn(o[14].cells),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,G1,t,N1),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function iR(i){let e,n,t;const r=[i[17],{class:"cursor-pointer"}];function s(){return i[11](i[14])}let a={$$slots:{default:[sR]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ie(a,r[o]);return e=new Bf({props:a}),e.$on("click",s),{c(){q(e.$$.fragment),n=ge()},l(o){Z(e.$$.fragment,o),n=ve(o)},m(o,u){G(e,o,u),B(o,n,u),t=!0},p(o,u){i=o;const p=u&131072?St(r,[vn(i[17]),r[1]]):{};u&268435472&&(p.$$scope={dirty:u,ctx:i}),e.$set(p)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){o&&I(n),H(e,o)}}}function H1(i,e){let n,t,r;return t=new Vo({props:{rowAttrs:e[14].attrs(),$$slots:{default:[iR,({rowAttrs:s})=>({17:s}),({rowAttrs:s})=>s?131072:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.rowAttrs=e[14].attrs()),a&268566544&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function oR(i){let e=[],n=new Map,t,r,s=dn(i[4]);const a=o=>o[14].id;for(let o=0;o<s.length;o+=1){let u=B1(i,s,o),p=a(u);n.set(p,e[o]=H1(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&2228272&&(s=dn(o[4]),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,H1,t,B1),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function aR(i){let e,n,t,r;e=new K0({props:{$$slots:{default:[tR]},$$scope:{ctx:i}}});const s=[i[3]];let a={$$slots:{default:[oR]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Ie(a,s[o]);return t=new X0({props:a}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(o){Z(e.$$.fragment,o),n=ve(o),Z(t.$$.fragment,o)},m(o,u){G(e,o,u),B(o,n,u),G(t,o,u),r=!0},p(o,u){const p={};u&268435460&&(p.$$scope={dirty:u,ctx:o}),e.$set(p);const _=u&8?St(s,[vn(o[3])]):{};u&268435472&&(_.$$scope={dirty:u,ctx:o}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),r=!1},d(o){o&&I(n),H(e,o),H(t,o)}}}function lR(i){let e,n;return e=new wL({props:{tableModel:i[6]}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function cR(i){let e,n="No POIs in Favourites";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-cqoewt"&&(e.textContent=n),this.h()},h(){se(e,"class","text-center text-xl")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function uR(i){let e,n,t,r,s,a,o,u,p;n=new oL({props:{tableModel:i[6]}});const _=[i[1]];let b={$$slots:{default:[aR]},$$scope:{ctx:i}};for(let z=0;z<_.length;z+=1)b=Ie(b,_[z]);s=new j0({props:b});const $=[cR,lR],P=[];function L(z,F){return z[0].length===0?0:1}return o=L(i),u=P[o]=$[o](i),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),r=ce("div"),q(s.$$.fragment),a=ge(),u.c(),this.h()},l(z){e=ue(z,"DIV",{class:!0});var F=$e(e);Z(n.$$.fragment,F),t=ve(F),r=ue(F,"DIV",{class:!0});var U=$e(r);Z(s.$$.fragment,U),U.forEach(I),a=ve(F),u.l(F),F.forEach(I),this.h()},h(){se(r,"class","rounded-md border"),se(e,"class","space-y-4")},m(z,F){B(z,e,F),G(n,e,null),ae(e,t),ae(e,r),G(s,r,null),ae(e,a),P[o].m(e,null),p=!0},p(z,[F]){const U=F&2?St(_,[vn(z[1])]):{};F&268435484&&(U.$$scope={dirty:F,ctx:z}),s.$set(U);let j=o;o=L(z),o===j?P[o].p(z,F):(vt(),E(P[j],1,1,()=>{P[j]=null}),yt(),u=P[o],u?u.p(z,F):(u=P[o]=$[o](z),u.c()),T(u,1),u.m(e,null))},i(z){p||(T(n.$$.fragment,z),T(s.$$.fragment,z),T(u),p=!0)},o(z){E(n.$$.fragment,z),E(s.$$.fragment,z),E(u),p=!1},d(z){z&&I(e),H(n),H(s),P[o].d()}}}function fR(i,e,n){let t,r,s,a,{data:o}=e;const u=q0(ga(o),{sort:G0({toggleOrder:["asc","desc"]}),page:H0(),colFilter:Z0(),hide:W0()}),p=u.createColumns([u.column({accessor:"name",header:"Name",id:"name",cell:({value:U,row:j})=>j.isData()?Uc(T1,{value:U}):U,plugins:{colFilter:{fn:({filterValue:U,value:j})=>j.toLowerCase().includes(U.toLowerCase()),initialFilterValue:"",render:({filterValue:U})=>rs(U)}}}),u.column({accessor:"features",header:"Features",id:"features",cell:({value:U,row:j})=>j.isData()?Uc(T1,{value:U.join(", ")}):U.join(""),plugins:{colFilter:{fn:({filterValue:U,value:j})=>U.length===0||!Array.isArray(U)?!0:U.some(J=>j.includes(J)),initialFilterValue:[],render:({filterValue:U})=>rs(U)},sort:{disable:!0}}})]),_=U=>U.original,b=u.createViewModel(p),{headerRows:$,pageRows:P,tableAttrs:L,tableBodyAttrs:z}=b;on(i,$,U=>n(2,r=U)),on(i,P,U=>n(4,a=U)),on(i,L,U=>n(1,t=U)),on(i,z,U=>n(3,s=U));const F=U=>va("/app?focus-poi="+encodeURIComponent(_(U).id));return i.$$set=U=>{"data"in U&&n(0,o=U.data)},[o,t,r,s,a,_,b,$,P,L,z,F]}let hR=class extends it{constructor(e){super(),ot(this,e,fR,uR,st,{data:0})}};function dR(i){let e;return{c(){e=He("Check-ins")},l(n){e=Ze(n,"Check-ins")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function pR(i){let e,n,t,r;return e=new ji({props:{tag:"h2",class:"mb-3",$$slots:{default:[dR]},$$scope:{ctx:i}}}),t=new qi({}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&256&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function mR(i){let e,n;return e=new hR({props:{data:i[2]}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.data=t[2]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function _R(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){se(e,"class","grow flex items-center justify-center")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function gR(i){let e,n,t,r;const s=[_R,mR],a=[];function o(u,p){return u[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function vR(i){let e,n,t,r,s;return n=new Zs({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[pR]},$$scope:{ctx:i}}}),r=new Is({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[gR]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),q(r.$$.fragment)},l(a){e=ue(a,"DIV",{});var o=$e(e);Z(n.$$.fragment,o),o.forEach(I),t=ve(a),Z(r.$$.fragment,a)},m(a,o){B(a,e,o),G(n,e,null),i[6](e),B(a,t,o),G(r,a,o),s=!0},p(a,o){const u={};o&256&&(u.$$scope={dirty:o,ctx:a}),n.$set(u);const p={};o&2&&(p.style=`height: calc(100% - ${a[1]}px);`),o&268&&(p.$$scope={dirty:o,ctx:a}),r.$set(p)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(n),i[6](null),H(r,a)}}}function yR(i){let e,n,t,r,s;return n=new Dr({props:{class:"relative p-4 h-full",$$slots:{default:[vR]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var o=$e(e);Z(n.$$.fragment,o),o.forEach(I),this.h()},h(){se(e,"class","flex flex-col p-4 relative h-full")},m(a,o){B(a,e,o),G(n,e,null),t=!0,r||(s=mt(window,"resize",i[4]),r=!0)},p(a,[o]){const u={};o&271&&(u.$$scope={dirty:o,ctx:a}),n.$set(u)},i(a){t||(T(n.$$.fragment,a),t=!0)},o(a){E(n.$$.fragment,a),t=!1},d(a){a&&I(e),H(n),r=!1,s()}}}function bR(i,e,n){let{slug:t}=e,r,s=64;const a=()=>{const b=r.offsetHeight;b!==void 0&&n(1,s=b)};Sr(a);let o=[],u=!0;Sr(async()=>{const b=await fetch("/api/check-in");if(b.ok){const $=await b.json(),P=[];$.forEach(L=>{const z=ba.decode(L);if(Vf.isRight(z)){const F=z.right;P.push(F)}else console.error("Invalid POI object received from API: ",z.left)}),n(2,o=P),n(3,u=!1)}});function _(b){Zt[b?"unshift":"push"](()=>{r=b,n(0,r)})}return i.$$set=b=>{"slug"in b&&n(5,t=b.slug)},[r,s,o,u,a,t,_]}class wR extends it{constructor(e){super(),ot(this,e,bR,yR,st,{slug:5})}}function xR(i){let e,n;return{c(){e=ce("span"),n=He(i[0]),this.h()},l(t){e=ue(t,"SPAN",{class:!0});var r=$e(e);n=Ze(r,i[0]),r.forEach(I),this.h()},h(){se(e,"class","lg:max-w-[320px] sm:max-w-[160px] max-w-[80px] truncate font-medium")},m(t,r){B(t,e,r),ae(e,n)},p(t,r){r&1&&Qt(n,t[0])},d(t){t&&I(e)}}}function $R(i){let e,n;return{c(){e=ce("div"),n=He(i[0]),this.h()},l(t){e=ue(t,"DIV",{class:!0});var r=$e(e);n=Ze(r,i[0]),r.forEach(I),this.h()},h(){se(e,"class","text-xs flex items-center")},m(t,r){B(t,e,r),ae(e,n)},p(t,r){r&1&&Qt(n,t[0])},d(t){t&&I(e)}}}function kR(i){let e,n,t,r;return e=new Fo({props:{$$slots:{default:[xR]},$$scope:{ctx:i}}}),t=new Bo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[$R]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&3&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&3&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function CR(i){let e,n,t;return n=new Lo({props:{$$slots:{default:[kR]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","flex space-x-2")},m(r,s){B(r,e,s),G(n,e,null),t=!0},p(r,[s]){const a={};s&3&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function SR(i,e,n){let{value:t}=e;return i.$$set=r=>{"value"in r&&n(0,t=r.value)},[t]}class Z1 extends it{constructor(e){super(),ot(this,e,SR,CR,st,{value:0})}}function IR(i){let e,n,t,r="Open menu",s;return e=new yC({props:{class:"h-4 w-4"}}),{c(){q(e.$$.fragment),n=ge(),t=ce("span"),t.textContent=r,this.h()},l(a){Z(e.$$.fragment,a),n=ve(a),t=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(t)!=="svelte-rsbkxi"&&(t.textContent=r),this.h()},h(){se(t,"class","sr-only")},m(a,o){G(e,a,o),B(a,n,o),B(a,t,o),s=!0},p:gt,i(a){s||(T(e.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),s=!1},d(a){a&&(I(n),I(t)),H(e,a)}}}function TR(i){let e,n;return e=new Jr({props:{variant:"ghost",builders:[i[4]],class:"flex h-8 w-8 p-0 data-[state=open]:bg-muted ml-auto hover:bg-accent hover:text-accent-foreground bg-background",$$slots:{default:[IR]},$$scope:{ctx:i}}}),e.$on("click",DR),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.builders=[t[4]]),r&32&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function PR(i){let e;return{c(){e=He("Remove From Favourites")},l(n){e=Ze(n,"Remove From Favourites")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function ER(i){let e,n;return e=new Jr({props:{variant:"destructive",$$slots:{default:[PR]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function AR(i){let e,n,t,r;return e=new eu({props:{asChild:!0,$$slots:{default:[TR,({builder:s})=>({4:s}),({builder:s})=>s?16:0]},$$scope:{ctx:i}}}),t=new tu({props:{class:"w-[160px]",align:"end",$$slots:{default:[ER]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&48&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&35&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function MR(i){let e,n;return e=new Qc({props:{$$slots:{default:[AR]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&35&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}const DR=i=>i.stopPropagation();function zR(i,e,n){let{row:t}=e,{rowId:r}=e,{removeFavourite:s}=e;const a=()=>s(r);return i.$$set=o=>{"row"in o&&n(2,t=o.row),"rowId"in o&&n(0,r=o.rowId),"removeFavourite"in o&&n(1,s=o.removeFavourite)},[r,s,t,a]}class LR extends it{constructor(e){super(),ot(this,e,zR,MR,st,{row:2,rowId:0,removeFavourite:1})}}function RR(i){let e;const n=i[4].default,t=xt(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&$t(t,n,r,r[5],e?Ct(n,r[5],s,null):kt(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function OR(i){let e,n,t,r;return n=new Qc({props:{$$slots:{default:[HR]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(s){e=ue(s,"DIV",{class:!0});var a=$e(e);Z(n.$$.fragment,a),a.forEach(I),this.h()},h(){se(e,"class",t=jt("flex items-center",i[0]))},m(s,a){B(s,e,a),G(n,e,null),r=!0},p(s,a){const o={};a&34&&(o.$$scope={dirty:a,ctx:s}),n.$set(o),(!r||a&1&&t!==(t=jt("flex items-center",s[0])))&&se(e,"class",t)},i(s){r||(T(n.$$.fragment,s),r=!0)},o(s){E(n.$$.fragment,s),r=!1},d(s){s&&I(e),H(n)}}}function FR(i){let e,n;return e=new S0({props:{class:"ml-2 h-4 w-4"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function BR(i){let e,n;return e=new I0({props:{class:"ml-2 h-4 w-4"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function NR(i){let e,n;return e=new T0({props:{class:"ml-2 h-4 w-4"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function VR(i){let e,n,t,r,s;const a=i[4].default,o=xt(a,i,i[5],null),u=[NR,BR,FR],p=[];function _(b,$){return b[1].sort.order==="desc"?0:b[1].sort.order==="asc"?1:2}return n=_(i),t=p[n]=u[n](i),{c(){o&&o.c(),e=ge(),t.c(),r=Ue()},l(b){o&&o.l(b),e=ve(b),t.l(b),r=Ue()},m(b,$){o&&o.m(b,$),B(b,e,$),p[n].m(b,$),B(b,r,$),s=!0},p(b,$){o&&o.p&&(!s||$&32)&&$t(o,a,b,b[5],s?Ct(a,b[5],$,null):kt(b[5]),null);let P=n;n=_(b),n!==P&&(vt(),E(p[P],1,1,()=>{p[P]=null}),yt(),t=p[n],t||(t=p[n]=u[n](b),t.c()),T(t,1),t.m(r.parentNode,r))},i(b){s||(T(o,b),T(t),s=!0)},o(b){E(o,b),E(t),s=!1},d(b){b&&(I(e),I(r)),o&&o.d(b),p[n].d(b)}}}function UR(i){let e,n;return e=new Jr({props:{variant:"ghost",builders:[i[6]],class:"-ml-3 h-8 data-[state=open]:bg-accent",$$slots:{default:[VR]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&64&&(s.builders=[t[6]]),r&34&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function jR(i){let e;return{c(){e=He("Asc")},l(n){e=Ze(n,"Asc")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function qR(i){let e;return{c(){e=He("Desc")},l(n){e=Ze(n,"Desc")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function GR(i){let e,n,t,r;return e=new Ef({props:{$$slots:{default:[jR]},$$scope:{ctx:i}}}),e.$on("click",i[2]),t=new Ef({props:{$$slots:{default:[qR]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&32&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function HR(i){let e,n,t,r;return e=new eu({props:{asChild:!0,$$slots:{default:[UR,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:i}}}),t=new tu({props:{align:"start",$$slots:{default:[GR]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&98&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&32&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function ZR(i){let e,n,t,r;const s=[OR,RR],a=[];function o(u,p){return u[1].sort.disabled?1:0}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,[p]){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function WR(i,e,n){let{$$slots:t={},$$scope:r}=e,{class:s=void 0}=e,{props:a}=e;function o(p){a.sort.order!=="asc"&&a.sort.toggle(p)}function u(p){a.sort.order!=="desc"&&a.sort.toggle(p)}return i.$$set=p=>{"class"in p&&n(0,s=p.class),"props"in p&&n(1,a=p.props),"$$scope"in p&&n(5,r=p.$$scope)},[s,a,o,u,t,r]}class KR extends it{constructor(e){super(),ot(this,e,WR,ZR,st,{class:0,props:1})}}function W1(i){let e,n;return e=new Jr({props:{variant:"outline",class:"h-8 px-2 lg:px-3",$$slots:{default:[XR]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function XR(i){let e,n;return e=new E0({props:{class:"h-4 w-4"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function JR(i){let e,n,t,r,s,a,o,u,p,_,b,$,P;function L(J){i[5](J)}let z={placeholder:"Filter by name...",class:"h-8 sm:w-[250px] lg:w-[350px] grow sm:grow-0 lg:grow-0 md:grow hover:bg-accent hover:text-accent-foreground bg-background focus-visible:m-0.5",type:"search"};i[1].name!==void 0&&(z.value=i[1].name),n=new P0({props:z}),Zt.push(()=>An(n,"value",L));function F(J){i[6](J)}let U={title:"POI Features",options:i[2]};i[1].features!==void 0&&(U.filterValues=i[1].features),u=new MO({props:U}),Zt.push(()=>An(u,"filterValues",F));let j=i[3]&&W1(i);return $=new UO({props:{tableModel:i[0]}}),{c(){e=ce("div"),q(n.$$.fragment),r=ge(),s=ce("div"),a=ce("div"),o=ce("div"),q(u.$$.fragment),_=ge(),j&&j.c(),b=ge(),q($.$$.fragment),this.h()},l(J){e=ue(J,"DIV",{class:!0});var pe=$e(e);Z(n.$$.fragment,pe),r=ve(pe),s=ue(pe,"DIV",{class:!0});var re=$e(s);a=ue(re,"DIV",{class:!0});var te=$e(a);o=ue(te,"DIV",{class:!0});var de=$e(o);Z(u.$$.fragment,de),_=ve(de),j&&j.l(de),de.forEach(I),te.forEach(I),b=ve(re),Z($.$$.fragment,re),re.forEach(I),pe.forEach(I),this.h()},h(){se(o,"class","flex items-center gap-2 w-full"),se(a,"class","relative overflow-x-auto flex sm:overflow-x-visible"),se(s,"class","flex flex-1 sm:items-center grow justify-between gap-2 flex-col sm:flex-row relative overflow-x-auto sm:overflow-x-visible"),se(e,"class","flex items-center gap-2 flex-wrap")},m(J,pe){B(J,e,pe),G(n,e,null),ae(e,r),ae(e,s),ae(s,a),ae(a,o),G(u,o,null),ae(o,_),j&&j.m(o,null),ae(s,b),G($,s,null),P=!0},p(J,[pe]){const re={};!t&&pe&2&&(t=!0,re.value=J[1].name,En(()=>t=!1)),n.$set(re);const te={};pe&4&&(te.options=J[2]),!p&&pe&2&&(p=!0,te.filterValues=J[1].features,En(()=>p=!1)),u.$set(te),J[3]?j?(j.p(J,pe),pe&8&&T(j,1)):(j=W1(J),j.c(),T(j,1),j.m(o,null)):j&&(vt(),E(j,1,1,()=>{j=null}),yt());const de={};pe&1&&(de.tableModel=J[0]),$.$set(de)},i(J){P||(T(n.$$.fragment,J),T(u.$$.fragment,J),T(j),T($.$$.fragment,J),P=!0)},o(J){E(n.$$.fragment,J),E(u.$$.fragment,J),E(j),E($.$$.fragment,J),P=!1},d(J){J&&I(e),H(n),H(u),j&&j.d(),H($)}}}function YR(i,e,n){let t,r,{tableModel:s}=e,a;Sr(async()=>{try{const L=await(await fetch("/api/poi/features")).json();n(2,a=L.allPOIFeatures)}catch(P){console.error(P)}});const{pluginStates:u}=s,{filterValues:p}=u.colFilter;on(i,p,P=>n(1,r=P));function _(P){i.$$.not_equal(r.name,P)&&(r.name=P,p.set(r))}function b(P){i.$$.not_equal(r.features,P)&&(r.features=P,p.set(r))}const $=()=>{Gr(p,r.name="",r),Gr(p,r.features=[],r)};return i.$$set=P=>{"tableModel"in P&&n(0,s=P.tableModel)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=Object.values({...r}).some(P=>P.length>0||typeof P=="string"&&P.length>0))},[s,r,a,t,p,_,b,$]}class QR extends it{constructor(e){super(),ot(this,e,YR,JR,st,{tableModel:0})}}function eO(i){let e,n;return e=new F0({props:{placeholder:"Select page size"}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function tO(i){let e;return{c(){e=He("10")},l(n){e=Ze(n,"10")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function nO(i){let e;return{c(){e=He("20")},l(n){e=Ze(n,"20")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function rO(i){let e;return{c(){e=He("30")},l(n){e=Ze(n,"30")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function sO(i){let e;return{c(){e=He("40")},l(n){e=Ze(n,"40")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function iO(i){let e;return{c(){e=He("50")},l(n){e=Ze(n,"50")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function oO(i){let e,n,t,r,s,a,o,u,p,_;return e=new Bi({props:{value:"10",$$slots:{default:[tO]},$$scope:{ctx:i}}}),t=new Bi({props:{value:"20",$$slots:{default:[nO]},$$scope:{ctx:i}}}),s=new Bi({props:{value:"30",$$slots:{default:[rO]},$$scope:{ctx:i}}}),o=new Bi({props:{value:"40",$$slots:{default:[sO]},$$scope:{ctx:i}}}),p=new Bi({props:{value:"50",$$slots:{default:[iO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),q(s.$$.fragment),a=ge(),q(o.$$.fragment),u=ge(),q(p.$$.fragment)},l(b){Z(e.$$.fragment,b),n=ve(b),Z(t.$$.fragment,b),r=ve(b),Z(s.$$.fragment,b),a=ve(b),Z(o.$$.fragment,b),u=ve(b),Z(p.$$.fragment,b)},m(b,$){G(e,b,$),B(b,n,$),G(t,b,$),B(b,r,$),G(s,b,$),B(b,a,$),G(o,b,$),B(b,u,$),G(p,b,$),_=!0},p(b,$){const P={};$&1048576&&(P.$$scope={dirty:$,ctx:b}),e.$set(P);const L={};$&1048576&&(L.$$scope={dirty:$,ctx:b}),t.$set(L);const z={};$&1048576&&(z.$$scope={dirty:$,ctx:b}),s.$set(z);const F={};$&1048576&&(F.$$scope={dirty:$,ctx:b}),o.$set(F);const U={};$&1048576&&(U.$$scope={dirty:$,ctx:b}),p.$set(U)},i(b){_||(T(e.$$.fragment,b),T(t.$$.fragment,b),T(s.$$.fragment,b),T(o.$$.fragment,b),T(p.$$.fragment,b),_=!0)},o(b){E(e.$$.fragment,b),E(t.$$.fragment,b),E(s.$$.fragment,b),E(o.$$.fragment,b),E(p.$$.fragment,b),_=!1},d(b){b&&(I(n),I(r),I(a),I(u)),H(e,b),H(t,b),H(s,b),H(o,b),H(p,b)}}}function aO(i){let e,n,t,r;return e=new M0({props:{class:"w-[180px]",$$slots:{default:[eO]},$$scope:{ctx:i}}}),t=new D0({props:{$$slots:{default:[oO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&1048576&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&1048576&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function lO(i){let e,n="Go to first page",t,r,s;return r=new z0({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ge(),q(r.$$.fragment),this.h()},l(a){e=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-lc32pz"&&(e.textContent=n),t=ve(a),Z(r.$$.fragment,a),this.h()},h(){se(e,"class","sr-only")},m(a,o){B(a,e,o),B(a,t,o),G(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(r,a)}}}function cO(i){let e,n="Go to previous page",t,r,s;return r=new L0({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ge(),q(r.$$.fragment),this.h()},l(a){e=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-2don1e"&&(e.textContent=n),t=ve(a),Z(r.$$.fragment,a),this.h()},h(){se(e,"class","sr-only")},m(a,o){B(a,e,o),B(a,t,o),G(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(r,a)}}}function uO(i){let e,n="Go to next page",t,r,s;return r=new R0({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ge(),q(r.$$.fragment),this.h()},l(a){e=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-10zd0e2"&&(e.textContent=n),t=ve(a),Z(r.$$.fragment,a),this.h()},h(){se(e,"class","sr-only")},m(a,o){B(a,e,o),B(a,t,o),G(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(r,a)}}}function fO(i){let e,n="Go to last page",t,r,s;return r=new O0({props:{size:15}}),{c(){e=ce("span"),e.textContent=n,t=ge(),q(r.$$.fragment),this.h()},l(a){e=ue(a,"SPAN",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-17pj58n"&&(e.textContent=n),t=ve(a),Z(r.$$.fragment,a),this.h()},h(){se(e,"class","sr-only")},m(a,o){B(a,e,o),B(a,t,o),G(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(r,a)}}}function hO(i){let e,n,t,r="Rows per page",s,a,o,u,p,_=i[0]+1+"",b,$,P,L,z,F,U,j,J,pe,re,te,de;return a=new A0({props:{onSelectedChange:i[14],selected:{value:10,label:"10"},$$slots:{default:[aO]},$$scope:{ctx:i}}}),F=new Jr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[lO]},$$scope:{ctx:i}}}),F.$on("click",i[15]),j=new Jr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[cO]},$$scope:{ctx:i}}}),j.$on("click",i[16]),pe=new Jr({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[uO]},$$scope:{ctx:i}}}),pe.$on("click",i[17]),te=new Jr({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[fO]},$$scope:{ctx:i}}}),te.$on("click",i[18]),{c(){e=ce("div"),n=ce("div"),t=ce("p"),t.textContent=r,s=ge(),q(a.$$.fragment),o=ge(),u=ce("div"),p=He("Page "),b=He(_),$=He(" of "),P=He(i[1]),L=ge(),z=ce("div"),q(F.$$.fragment),U=ge(),q(j.$$.fragment),J=ge(),q(pe.$$.fragment),re=ge(),q(te.$$.fragment),this.h()},l(me){e=ue(me,"DIV",{class:!0});var Y=$e(e);n=ue(Y,"DIV",{class:!0});var we=$e(n);t=ue(we,"P",{class:!0,"data-svelte-h":!0}),bn(t)!=="svelte-opj3eb"&&(t.textContent=r),s=ve(we),Z(a.$$.fragment,we),we.forEach(I),o=ve(Y),u=ue(Y,"DIV",{class:!0});var Ce=$e(u);p=Ze(Ce,"Page "),b=Ze(Ce,_),$=Ze(Ce," of "),P=Ze(Ce,i[1]),Ce.forEach(I),L=ve(Y),z=ue(Y,"DIV",{class:!0});var _e=$e(z);Z(F.$$.fragment,_e),U=ve(_e),Z(j.$$.fragment,_e),J=ve(_e),Z(pe.$$.fragment,_e),re=ve(_e),Z(te.$$.fragment,_e),_e.forEach(I),Y.forEach(I),this.h()},h(){se(t,"class","text-sm font-medium"),se(n,"class","flex items-center space-x-2"),se(u,"class","flex w-[100px] items-center justify-center text-sm font-medium"),se(z,"class","flex items-center space-x-2"),se(e,"class","flex items-center space-x-6 lg:space-x-8 flex-wrap gap-2")},m(me,Y){B(me,e,Y),ae(e,n),ae(n,t),ae(n,s),G(a,n,null),ae(e,o),ae(e,u),ae(u,p),ae(u,b),ae(u,$),ae(u,P),ae(e,L),ae(e,z),G(F,z,null),ae(z,U),G(j,z,null),ae(z,J),G(pe,z,null),ae(z,re),G(te,z,null),de=!0},p(me,[Y]){const we={};Y&1048576&&(we.$$scope={dirty:Y,ctx:me}),a.$set(we),(!de||Y&1)&&_!==(_=me[0]+1+"")&&Qt(b,_),(!de||Y&2)&&Qt(P,me[1]);const Ce={};Y&4&&(Ce.disabled=!me[2]),Y&1048576&&(Ce.$$scope={dirty:Y,ctx:me}),F.$set(Ce);const _e={};Y&4&&(_e.disabled=!me[2]),Y&1048576&&(_e.$$scope={dirty:Y,ctx:me}),j.$set(_e);const fe={};Y&8&&(fe.disabled=!me[3]),Y&1048576&&(fe.$$scope={dirty:Y,ctx:me}),pe.$set(fe);const Ee={};Y&8&&(Ee.disabled=!me[3]),Y&1048576&&(Ee.$$scope={dirty:Y,ctx:me}),te.$set(Ee)},i(me){de||(T(a.$$.fragment,me),T(F.$$.fragment,me),T(j.$$.fragment,me),T(pe.$$.fragment,me),T(te.$$.fragment,me),de=!0)},o(me){E(a.$$.fragment,me),E(F.$$.fragment,me),E(j.$$.fragment,me),E(pe.$$.fragment,me),E(te.$$.fragment,me),de=!1},d(me){me&&I(e),H(a),H(F),H(j),H(pe),H(te)}}}function dO(i,e,n){let t,r,s,a,o,u,{tableModel:p}=e;const{pageRows:_,pluginStates:b,rows:$}=p;on(i,_,de=>n(5,u=de)),on(i,$,de=>n(4,o=de));const{hasNextPage:P,hasPreviousPage:L,pageIndex:z,pageCount:F,pageSize:U}=b.page;on(i,P,de=>n(3,a=de)),on(i,L,de=>n(2,s=de)),on(i,z,de=>n(0,t=de)),on(i,F,de=>n(1,r=de));const j=de=>U.set(Number(de==null?void 0:de.value)),J=()=>Gr(z,t=0,t),pe=()=>Gr(z,t=t-1,t),re=()=>Gr(z,t=t+1,t),te=()=>Gr(z,t=Math.ceil(o.length/u.length)-1,t);return i.$$set=de=>{"tableModel"in de&&n(13,p=de.tableModel)},[t,r,s,a,o,u,_,$,P,L,z,F,U,p,j,J,pe,re,te]}class pO extends it{constructor(e){super(),ot(this,e,dO,hO,st,{tableModel:13})}}function K1(i,e,n){const t=i.slice();return t[9]=e[n],t}function X1(i,e,n){const t=i.slice();return t[9]=e[n],t}function J1(i){let e,n,t,r,s,a,o,u;e=new qi({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new fo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[mO]},$$scope:{ctx:i}}});const p=[gO,_O],_=[];function b($,P){return $[0].length>2?0:1}return a=b(i),o=_[a]=p[a](i),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),s=ce("div"),o.c(),this.h()},l($){Z(e.$$.fragment,$),n=ve($),Z(t.$$.fragment,$),r=ve($),s=ue($,"DIV",{class:!0});var P=$e(s);o.l(P),P.forEach(I),this.h()},h(){se(s,"class","hidden space-x-1 lg:flex")},m($,P){G(e,$,P),B($,n,P),G(t,$,P),B($,r,P),B($,s,P),_[a].m(s,null),u=!0},p($,P){const L={};P&32769&&(L.$$scope={dirty:P,ctx:$}),t.$set(L);let z=a;a=b($),a===z?_[a].p($,P):(vt(),E(_[z],1,1,()=>{_[z]=null}),yt(),o=_[a],o?o.p($,P):(o=_[a]=p[a]($),o.c()),T(o,1),o.m(s,null))},i($){u||(T(e.$$.fragment,$),T(t.$$.fragment,$),T(o),u=!0)},o($){E(e.$$.fragment,$),E(t.$$.fragment,$),E(o),u=!1},d($){$&&(I(n),I(r),I(s)),H(e,$),H(t,$),_[a].d()}}}function mO(i){let e=i[0].length+"",n;return{c(){n=He(e)},l(t){n=Ze(t,e)},m(t,r){B(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&Qt(n,e)},d(t){t&&I(n)}}}function _O(i){let e,n,t=dn(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=Y1(X1(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ue()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ue()},m(a,o){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,o);B(a,e,o),n=!0},p(a,o){if(o&1){t=dn(a[0]);let u;for(u=0;u<t.length;u+=1){const p=X1(a,t,u);r[u]?(r[u].p(p,o),T(r[u],1)):(r[u]=Y1(p),r[u].c(),T(r[u],1),r[u].m(e.parentNode,e))}for(vt(),u=t.length;u<r.length;u+=1)s(u);yt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&I(e),Hs(r,a)}}}function gO(i){let e,n;return e=new fo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[yO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function vO(i){let e=i[9]+"",n,t;return{c(){n=He(e),t=ge()},l(r){n=Ze(r,e),t=ve(r)},m(r,s){B(r,n,s),B(r,t,s)},p(r,s){s&1&&e!==(e=r[9]+"")&&Qt(n,e)},d(r){r&&(I(n),I(t))}}}function Y1(i){let e,n;return e=new fo({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[vO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function yO(i){let e=i[0].length+"",n,t;return{c(){n=He(e),t=He(" Selected")},l(r){n=Ze(r,e),t=Ze(r," Selected")},m(r,s){B(r,n,s),B(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&Qt(n,e)},d(r){r&&(I(n),I(t))}}}function bO(i){let e,n,t,r,s,a;e=new Pd({props:{class:"mr-2 h-4 w-4"}});let o=i[0].length>0&&J1(i);return{c(){q(e.$$.fragment),n=ge(),t=He(i[1]),r=ge(),o&&o.c(),s=Ue()},l(u){Z(e.$$.fragment,u),n=ve(u),t=Ze(u,i[1]),r=ve(u),o&&o.l(u),s=Ue()},m(u,p){G(e,u,p),B(u,n,p),B(u,t,p),B(u,r,p),o&&o.m(u,p),B(u,s,p),a=!0},p(u,p){(!a||p&2)&&Qt(t,u[1]),u[0].length>0?o?(o.p(u,p),p&1&&T(o,1)):(o=J1(u),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(vt(),E(o,1,1,()=>{o=null}),yt())},i(u){a||(T(e.$$.fragment,u),T(o),a=!0)},o(u){E(e.$$.fragment,u),E(o),a=!1},d(u){u&&(I(n),I(t),I(r),I(s)),H(e,u),o&&o.d(u)}}}function wO(i){let e,n;return e=new Jr({props:{builders:[i[12]],variant:"outline",size:"sm",class:"h-8 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[bO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&32771&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function xO(i){let e;return{c(){e=He("No results found.")},l(n){e=Ze(n,"No results found.")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function Q1(i){let e,n=i[3][i[9]]+"",t;return{c(){e=ce("span"),t=He(n),this.h()},l(r){e=ue(r,"SPAN",{class:!0});var s=$e(e);t=Ze(s,n),s.forEach(I),this.h()},h(){se(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){B(r,e,s),ae(e,t)},p(r,s){s&12&&n!==(n=r[3][r[9]]+"")&&Qt(t,n)},d(r){r&&I(e)}}}function $O(i){let e,n,t,r,s,a=i[9]+"",o,u,p,_;n=new Ed({props:{className:jt("h-4 w-4")}});let b=i[3][i[9]]&&Q1(i);return{c(){e=ce("div"),q(n.$$.fragment),r=ge(),s=ce("span"),o=He(a),u=ge(),b&&b.c(),p=ge(),this.h()},l($){e=ue($,"DIV",{class:!0});var P=$e(e);Z(n.$$.fragment,P),P.forEach(I),r=ve($),s=ue($,"SPAN",{});var L=$e(s);o=Ze(L,a),L.forEach(I),u=ve($),b&&b.l($),p=ve($),this.h()},h(){se(e,"class",t=jt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m($,P){B($,e,P),G(n,e,null),B($,r,P),B($,s,P),ae(s,o),B($,u,P),b&&b.m($,P),B($,p,P),_=!0},p($,P){(!_||P&5&&t!==(t=jt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",$[0].includes($[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&se(e,"class",t),(!_||P&4)&&a!==(a=$[9]+"")&&Qt(o,a),$[3][$[9]]?b?b.p($,P):(b=Q1($),b.c(),b.m(p.parentNode,p)):b&&(b.d(1),b=null)},i($){_||(T(n.$$.fragment,$),_=!0)},o($){E(n.$$.fragment,$),_=!1},d($){$&&(I(e),I(r),I(s),I(u),I(p)),H(n),b&&b.d($)}}}function e0(i){let e,n;return e=new zl({props:{class:"cursor-pointer",value:i[9],onSelect:i[6],$$slots:{default:[$O]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[9]),r&32781&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function kO(i){let e,n,t=dn(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=e0(K1(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ue()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ue()},m(a,o){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,o);B(a,e,o),n=!0},p(a,o){if(o&45){t=dn(a[2]);let u;for(u=0;u<t.length;u+=1){const p=K1(a,t,u);r[u]?(r[u].p(p,o),T(r[u],1)):(r[u]=e0(p),r[u].c(),T(r[u],1),r[u].m(e.parentNode,e))}for(vt(),u=t.length;u<r.length;u+=1)s(u);yt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&I(e),Hs(r,a)}}}function t0(i){let e,n,t,r;return e=new Kd({}),t=new zl({props:{class:"justify-center text-center cursor-pointer",onSelect:i[7],$$slots:{default:[CO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.onSelect=s[7]),a&32768&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function CO(i){let e;return{c(){e=He("Clear Filter")},l(n){e=Ze(n,"Clear Filter")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function SO(i){let e,n,t,r,s,a;e=new Gd({props:{$$slots:{default:[xO]},$$scope:{ctx:i}}}),t=new Hd({props:{$$slots:{default:[kO]},$$scope:{ctx:i}}});let o=i[0].length>0&&t0(i);return{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge(),o&&o.c(),s=Ue()},l(u){Z(e.$$.fragment,u),n=ve(u),Z(t.$$.fragment,u),r=ve(u),o&&o.l(u),s=Ue()},m(u,p){G(e,u,p),B(u,n,p),G(t,u,p),B(u,r,p),o&&o.m(u,p),B(u,s,p),a=!0},p(u,p){const _={};p&32768&&(_.$$scope={dirty:p,ctx:u}),e.$set(_);const b={};p&32781&&(b.$$scope={dirty:p,ctx:u}),t.$set(b),u[0].length>0?o?(o.p(u,p),p&1&&T(o,1)):(o=t0(u),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(vt(),E(o,1,1,()=>{o=null}),yt())},i(u){a||(T(e.$$.fragment,u),T(t.$$.fragment,u),T(o),a=!0)},o(u){E(e.$$.fragment,u),E(t.$$.fragment,u),E(o),a=!1},d(u){u&&(I(n),I(r),I(s)),H(e,u),H(t,u),o&&o.d(u)}}}function IO(i){let e,n,t,r;return e=new Zd({props:{placeholder:i[1]}}),t=new Wd({props:{$$slots:{default:[SO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.placeholder=s[1]),e.$set(o);const u={};a&32781&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function TO(i){let e,n;return e=new qd({props:{loop:!0,$$slots:{default:[IO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function PO(i){let e,n,t,r;return e=new Yd({props:{asChild:!0,$$slots:{default:[wO,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new Xd({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[TO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&36867&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&32783&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function EO(i){let e,n,t;function r(a){i[8](a)}let s={$$slots:{default:[PO]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.open=i[4]),e=new Jd({props:s}),Zt.push(()=>An(e,"open",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,[o]){const u={};o&32783&&(u.$$scope={dirty:o,ctx:a}),!n&&o&16&&(n=!0,u.open=a[4],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function AO(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{options:s}=e,{counts:a={}}=e,o=!1;const u=$=>{Array.isArray(t)&&t.includes($)?n(0,t=t.filter(P=>P!==$)):n(0,t=[...Array.isArray(t)?t:[],$])},p=$=>{u($)},_=()=>{n(0,t=[])};function b($){o=$,n(4,o)}return i.$$set=$=>{"filterValues"in $&&n(0,t=$.filterValues),"title"in $&&n(1,r=$.title),"options"in $&&n(2,s=$.options),"counts"in $&&n(3,a=$.counts)},[t,r,s,a,o,u,p,_,b]}class MO extends it{constructor(e){super(),ot(this,e,AO,EO,st,{filterValues:0,title:1,options:2,counts:3})}}function n0(i,e,n){const t=i.slice();return t[9]=e[n],t[10]=e,t[11]=n,t}function DO(i){let e,n,t;return e=new V0({props:{class:"mr-2 h-4 w-4"}}),{c(){q(e.$$.fragment),n=He(`
			View`)},l(r){Z(e.$$.fragment,r),n=Ze(r,`
			View`)},m(r,s){G(e,r,s),B(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function zO(i){let e,n;return e=new Jr({props:{variant:"outline",size:"sm",class:"h-8 flex hover:bg-accent hover:text-accent-foreground bg-background",builders:[i[12]],$$slots:{default:[DO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&8192&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function LO(i){let e;return{c(){e=He("Toggle columns")},l(n){e=Ze(n,"Toggle columns")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function RO(i){let e,n,t;function r(a){i[5](a,i[9])}let s={$$slots:{default:[OO]},$$scope:{ctx:i}};return i[0][i[9].id]!==void 0&&(s.checked=i[0][i[9].id]),e=new U0({props:s}),Zt.push(()=>An(e,"checked",r)),{c(){q(e.$$.fragment)},l(a){Z(e.$$.fragment,a)},m(a,o){G(e,a,o),t=!0},p(a,o){i=a;const u={};o&8192&&(u.$$scope={dirty:o,ctx:i}),!n&&o&3&&(n=!0,u.checked=i[0][i[9].id],En(()=>n=!1)),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){H(e,a)}}}function OO(i){let e=i[9].header+"",n,t;return{c(){n=He(e),t=ge()},l(r){n=Ze(r,e),t=ve(r)},m(r,s){B(r,n,s),B(r,t,s)},p:gt,d(r){r&&(I(n),I(t))}}}function r0(i){let e=i[3].includes(i[9].id),n,t,r=e&&RO(i);return{c(){r&&r.c(),n=Ue()},l(s){r&&r.l(s),n=Ue()},m(s,a){r&&r.m(s,a),B(s,n,a),t=!0},p(s,a){e&&r.p(s,a)},i(s){t||(T(r),t=!0)},o(s){E(r),t=!1},d(s){s&&I(n),r&&r.d(s)}}}function FO(i){let e,n,t,r,s,a;e=new B0({props:{$$slots:{default:[LO]},$$scope:{ctx:i}}}),t=new N0({});let o=dn(i[1]),u=[];for(let _=0;_<o.length;_+=1)u[_]=r0(n0(i,o,_));const p=_=>E(u[_],1,1,()=>{u[_]=null});return{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment),r=ge();for(let _=0;_<u.length;_+=1)u[_].c();s=Ue()},l(_){Z(e.$$.fragment,_),n=ve(_),Z(t.$$.fragment,_),r=ve(_);for(let b=0;b<u.length;b+=1)u[b].l(_);s=Ue()},m(_,b){G(e,_,b),B(_,n,b),G(t,_,b),B(_,r,b);for(let $=0;$<u.length;$+=1)u[$]&&u[$].m(_,b);B(_,s,b),a=!0},p(_,b){const $={};if(b&8192&&($.$$scope={dirty:b,ctx:_}),e.$set($),b&11){o=dn(_[1]);let P;for(P=0;P<o.length;P+=1){const L=n0(_,o,P);u[P]?(u[P].p(L,b),T(u[P],1)):(u[P]=r0(L),u[P].c(),T(u[P],1),u[P].m(s.parentNode,s))}for(vt(),P=o.length;P<u.length;P+=1)p(P);yt()}},i(_){if(!a){T(e.$$.fragment,_),T(t.$$.fragment,_);for(let b=0;b<o.length;b+=1)T(u[b]);a=!0}},o(_){E(e.$$.fragment,_),E(t.$$.fragment,_),u=u.filter(Boolean);for(let b=0;b<u.length;b+=1)E(u[b]);a=!1},d(_){_&&(I(n),I(r),I(s)),H(e,_),H(t,_),Hs(u,_)}}}function BO(i){let e,n,t,r;return e=new eu({props:{asChild:!0,$$slots:{default:[zO,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new tu({props:{$$slots:{default:[FO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&12288&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const u={};a&8193&&(u.$$scope={dirty:a,ctx:s}),t.$set(u)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function NO(i){let e,n;return e=new Qc({props:{$$slots:{default:[BO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,[r]){const s={};r&8193&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function VO(i,e,n){let t,{tableModel:r}=e;const{pluginStates:s,flatColumns:a}=r,{hiddenColumnIds:o}=s.hide;on(i,o,$=>n(6,t=$));const u=a.map($=>$.id);let p=Object.fromEntries(u.map($=>[$,!0]));const _=["name","features"];function b($,P){i.$$.not_equal(p[P.id],$)&&(p[P.id]=$,n(0,p))}return i.$$set=$=>{"tableModel"in $&&n(4,r=$.tableModel)},i.$$.update=()=>{i.$$.dirty&1&&Gr(o,t=Object.entries(p).filter(([,$])=>!$).map(([$])=>$),t)},[p,a,o,_,r,b]}class UO extends it{constructor(e){super(),ot(this,e,VO,NO,st,{tableModel:4})}}function s0(i,e,n){const t=i.slice();return t[15]=e[n],t}function i0(i,e,n){const t=i.slice();return t[19]=e[n],t}function o0(i,e,n){const t=i.slice();return t[23]=e[n],t}function a0(i,e,n){const t=i.slice();return t[19]=e[n],t}function jO(i){let e,n;return e=new Nf({props:{of:i[19].render()}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.of=t[19].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function qO(i){let e,n;return e=new KR({props:{props:i[28],$$slots:{default:[jO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&268435456&&(s.props=t[28]),r&536870916&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function GO(i){let e,n,t;const r=[i[22]];let s={$$slots:{default:[qO]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Ie(s,r[a]);return e=new J0({props:s}),{c(){q(e.$$.fragment),n=ge()},l(a){Z(e.$$.fragment,a),n=ve(a)},m(a,o){G(e,a,o),B(a,n,o),t=!0},p(a,o){const u=o&4194304?St(r,[vn(a[22])]):{};o&805306372&&(u.$$scope={dirty:o,ctx:a}),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){a&&I(n),H(e,a)}}}function l0(i,e){let n,t,r;return t=new Vo({props:{attrs:e[19].attrs(),props:e[19].props(),$$slots:{default:[GO,({attrs:s,props:a})=>({22:s,28:a}),({attrs:s,props:a})=>(s?4194304:0)|(a?268435456:0)]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&4&&(o.attrs=e[19].attrs()),a&4&&(o.props=e[19].props()),a&809500676&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function HO(i){let e=[],n=new Map,t,r,s=dn(i[23].cells);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let u=a0(i,s,o),p=a(u);n.set(p,e[o]=l0(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&272629764&&(s=dn(o[23].cells),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,l0,t,a0),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function ZO(i){let e,n,t;return e=new Bf({props:{$$slots:{default:[HO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment),n=ge()},l(r){Z(e.$$.fragment,r),n=ve(r)},m(r,s){G(e,r,s),B(r,n,s),t=!0},p(r,s){const a={};s&536870916&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){E(e.$$.fragment,r),t=!1},d(r){r&&I(n),H(e,r)}}}function c0(i){let e,n;return e=new Vo({props:{rowAttrs:i[23].attrs(),$$slots:{default:[ZO]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.rowAttrs=t[23].attrs()),r&536870916&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function WO(i){let e,n,t=dn(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=c0(o0(i,t,a));const s=a=>E(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ue()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Ue()},m(a,o){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(a,o);B(a,e,o),n=!0},p(a,o){if(o&272629764){t=dn(a[2]);let u;for(u=0;u<t.length;u+=1){const p=o0(a,t,u);r[u]?(r[u].p(p,o),T(r[u],1)):(r[u]=c0(p),r[u].c(),T(r[u],1),r[u].m(e.parentNode,e))}for(vt(),u=t.length;u<r.length;u+=1)s(u);yt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);n=!1},d(a){a&&I(e),Hs(r,a)}}}function KO(i){let e,n;return e=new Nf({props:{of:i[19].render()}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.of=t[19].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function XO(i){let e,n,t;const r=[i[22]];let s={$$slots:{default:[KO]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Ie(s,r[a]);return e=new Y0({props:s}),{c(){q(e.$$.fragment),n=ge()},l(a){Z(e.$$.fragment,a),n=ve(a)},m(a,o){G(e,a,o),B(a,n,o),t=!0},p(a,o){const u=o&4194304?St(r,[vn(a[22])]):{};o&536870928&&(u.$$scope={dirty:o,ctx:a}),e.$set(u)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){a&&I(n),H(e,a)}}}function u0(i,e){let n,t,r;return t=new Vo({props:{attrs:e[19].attrs(),$$slots:{default:[XO,({attrs:s})=>({22:s}),({attrs:s})=>s?4194304:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.attrs=e[19].attrs()),a&541065232&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function JO(i){let e=[],n=new Map,t,r,s=dn(i[15].cells);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let u=i0(i,s,o),p=a(u);n.set(p,e[o]=u0(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&4194320&&(s=dn(o[15].cells),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,u0,t,i0),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function YO(i){let e,n,t;const r=[i[18],{class:"cursor-pointer"}];function s(){return i[12](i[15])}let a={$$slots:{default:[JO]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ie(a,r[o]);return e=new Bf({props:a}),e.$on("click",s),{c(){q(e.$$.fragment),n=ge()},l(o){Z(e.$$.fragment,o),n=ve(o)},m(o,u){G(e,o,u),B(o,n,u),t=!0},p(o,u){i=o;const p=u&262144?St(r,[vn(i[18]),r[1]]):{};u&536870928&&(p.$$scope={dirty:u,ctx:i}),e.$set(p)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){o&&I(n),H(e,o)}}}function f0(i,e){let n,t,r;return t=new Vo({props:{rowAttrs:e[15].attrs(),$$slots:{default:[YO,({rowAttrs:s})=>({18:s}),({rowAttrs:s})=>s?262144:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Ue(),q(t.$$.fragment),this.h()},l(s){n=Ue(),Z(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){B(s,n,a),G(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.rowAttrs=e[15].attrs()),a&537133072&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(t,s)}}}function QO(i){let e=[],n=new Map,t,r,s=dn(i[4]);const a=o=>o[15].id;for(let o=0;o<s.length;o+=1){let u=s0(i,s,o),p=a(u);n.set(p,e[o]=f0(p,u))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Ue()},l(o){for(let u=0;u<e.length;u+=1)e[u].l(o);t=Ue()},m(o,u){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(o,u);B(o,t,u),r=!0},p(o,u){u&4456496&&(s=dn(o[4]),vt(),e=Yr(e,u,a,1,o,s,n,t.parentNode,ss,f0,t,s0),yt())},i(o){if(!r){for(let u=0;u<s.length;u+=1)T(e[u]);r=!0}},o(o){for(let u=0;u<e.length;u+=1)E(e[u]);r=!1},d(o){o&&I(t);for(let u=0;u<e.length;u+=1)e[u].d(o)}}}function eF(i){let e,n,t,r;e=new K0({props:{$$slots:{default:[WO]},$$scope:{ctx:i}}});const s=[i[3]];let a={$$slots:{default:[QO]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Ie(a,s[o]);return t=new X0({props:a}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(o){Z(e.$$.fragment,o),n=ve(o),Z(t.$$.fragment,o)},m(o,u){G(e,o,u),B(o,n,u),G(t,o,u),r=!0},p(o,u){const p={};u&536870916&&(p.$$scope={dirty:u,ctx:o}),e.$set(p);const _=u&8?St(s,[vn(o[3])]):{};u&536870928&&(_.$$scope={dirty:u,ctx:o}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),r=!1},d(o){o&&I(n),H(e,o),H(t,o)}}}function tF(i){let e,n;return e=new pO({props:{tableModel:i[6]}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function nF(i){let e,n="No POIs in Favourites";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-cqoewt"&&(e.textContent=n),this.h()},h(){se(e,"class","text-center text-xl")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function rF(i){let e,n,t,r,s,a,o,u,p;n=new QR({props:{tableModel:i[6]}});const _=[i[1]];let b={$$slots:{default:[eF]},$$scope:{ctx:i}};for(let z=0;z<_.length;z+=1)b=Ie(b,_[z]);s=new j0({props:b});const $=[nF,tF],P=[];function L(z,F){return z[0].length===0?0:1}return o=L(i),u=P[o]=$[o](i),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),r=ce("div"),q(s.$$.fragment),a=ge(),u.c(),this.h()},l(z){e=ue(z,"DIV",{class:!0});var F=$e(e);Z(n.$$.fragment,F),t=ve(F),r=ue(F,"DIV",{class:!0});var U=$e(r);Z(s.$$.fragment,U),U.forEach(I),a=ve(F),u.l(F),F.forEach(I),this.h()},h(){se(r,"class","rounded-md border"),se(e,"class","space-y-4")},m(z,F){B(z,e,F),G(n,e,null),ae(e,t),ae(e,r),G(s,r,null),ae(e,a),P[o].m(e,null),p=!0},p(z,[F]){const U=F&2?St(_,[vn(z[1])]):{};F&536870940&&(U.$$scope={dirty:F,ctx:z}),s.$set(U);let j=o;o=L(z),o===j?P[o].p(z,F):(vt(),E(P[j],1,1,()=>{P[j]=null}),yt(),u=P[o],u?u.p(z,F):(u=P[o]=$[o](z),u.c()),T(u,1),u.m(e,null))},i(z){p||(T(n.$$.fragment,z),T(s.$$.fragment,z),T(u),p=!0)},o(z){E(n.$$.fragment,z),E(s.$$.fragment,z),E(u),p=!1},d(z){z&&I(e),H(n),H(s),P[o].d()}}}function sF(i,e,n){let t,r,s,a,{data:o}=e,{removeFavourite:u}=e;const p=q0(ga(o),{sort:G0({toggleOrder:["asc","desc"]}),page:H0(),colFilter:Z0(),hide:W0()}),_=p.createColumns([p.column({accessor:"name",header:"Name",id:"name",cell:({value:j,row:J})=>J.isData()?Uc(Z1,{value:j}):j,plugins:{colFilter:{fn:({filterValue:j,value:J})=>J.toLowerCase().includes(j.toLowerCase()),initialFilterValue:"",render:({filterValue:j})=>rs(j)}}}),p.column({accessor:"features",header:"Features",id:"features",cell:({value:j,row:J})=>J.isData()?Uc(Z1,{value:j.join(", ")}):j.join(""),plugins:{colFilter:{fn:({filterValue:j,value:J})=>j.length===0||!Array.isArray(j)?!0:j.some(pe=>J.includes(pe)),initialFilterValue:[],render:({filterValue:j})=>rs(j)},sort:{disable:!0}}}),p.display({id:"actions",header:()=>"",cell:({row:j})=>j.isData()&&j.original?Uc(LR,{row:j.original,rowId:parseInt(j.id),removeFavourite:u}):"",plugins:{sort:{disable:!0}}})]),b=j=>j.original,$=p.createViewModel(_),{headerRows:P,pageRows:L,tableAttrs:z,tableBodyAttrs:F}=$;on(i,P,j=>n(2,r=j)),on(i,L,j=>n(4,a=j)),on(i,z,j=>n(1,t=j)),on(i,F,j=>n(3,s=j));const U=j=>va("/app?focus-poi="+encodeURIComponent(b(j).id));return i.$$set=j=>{"data"in j&&n(0,o=j.data),"removeFavourite"in j&&n(11,u=j.removeFavourite)},[o,t,r,s,a,b,$,P,L,z,F,u,U]}class iF extends it{constructor(e){super(),ot(this,e,sF,rF,st,{data:0,removeFavourite:11})}}function oF(i){let e;return{c(){e=He("Favourites")},l(n){e=Ze(n,"Favourites")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function aF(i){let e,n,t,r;return e=new ji({props:{tag:"h2",class:"mb-3",$$slots:{default:[oF]},$$scope:{ctx:i}}}),t=new qi({}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&512&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function lF(i){let e,n;return e=new iF({props:{data:i[3],removeFavourite:i[0]}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.data=t[3]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function cF(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){se(e,"class","grow flex items-center justify-center")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function uF(i){let e,n,t,r;const s=[cF,lF],a=[];function o(u,p){return u[4]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Ue()},l(u){n.l(u),t=Ue()},m(u,p){a[e].m(u,p),B(u,t,p),r=!0},p(u,p){let _=e;e=o(u),e===_?a[e].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),n=a[e],n?n.p(u,p):(n=a[e]=s[e](u),n.c()),T(n,1),n.m(t.parentNode,t))},i(u){r||(T(n),r=!0)},o(u){E(n),r=!1},d(u){u&&I(t),a[e].d(u)}}}function fF(i){let e,n,t,r,s;return n=new Zs({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[aF]},$$scope:{ctx:i}}}),r=new Is({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[2]}px);`,$$slots:{default:[uF]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),q(r.$$.fragment)},l(a){e=ue(a,"DIV",{});var o=$e(e);Z(n.$$.fragment,o),o.forEach(I),t=ve(a),Z(r.$$.fragment,a)},m(a,o){B(a,e,o),G(n,e,null),i[7](e),B(a,t,o),G(r,a,o),s=!0},p(a,o){const u={};o&512&&(u.$$scope={dirty:o,ctx:a}),n.$set(u);const p={};o&4&&(p.style=`height: calc(100% - ${a[2]}px);`),o&536&&(p.$$scope={dirty:o,ctx:a}),r.$set(p)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(n),i[7](null),H(r,a)}}}function hF(i){let e,n,t,r,s;return n=new Dr({props:{class:"relative p-4 h-full",$$slots:{default:[fF]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(a){e=ue(a,"DIV",{class:!0});var o=$e(e);Z(n.$$.fragment,o),o.forEach(I),this.h()},h(){se(e,"class","flex flex-col p-4 relative h-full")},m(a,o){B(a,e,o),G(n,e,null),t=!0,r||(s=mt(window,"resize",i[5]),r=!0)},p(a,[o]){const u={};o&542&&(u.$$scope={dirty:o,ctx:a}),n.$set(u)},i(a){t||(T(n.$$.fragment,a),t=!0)},o(a){E(n.$$.fragment,a),t=!1},d(a){a&&I(e),H(n),r=!1,s()}}}function dF(i,e,n){let{slug:t}=e,r,s=64;const a=()=>{const $=r.offsetHeight;$!==void 0&&n(2,s=$)};Sr(a);let o=[],u=!0;const p=async()=>{const $=await fetch("/api/favourites");if($.ok){const P=await $.json(),L=[];P.forEach(z=>{const F=ba.decode(z);if(Vf.isRight(F)){const U=F.right;L.push(U)}else console.error("Invalid POI object received from API: ",F.left)}),n(3,o=L),n(4,u=!1)}},_=async $=>{n(4,u=!0);const P=o[$].id,L=await fetch("/api/favourites?poi_id="+encodeURIComponent(P),{method:"DELETE"});L.ok||console.error(await L.json()),await pi(),p()};Sr(p);function b($){Zt[$?"unshift":"push"](()=>{r=$,n(1,r)})}return i.$$set=$=>{"slug"in $&&n(6,t=$.slug)},[_,r,s,o,u,a,t,b]}class pF extends it{constructor(e){super(),ot(this,e,dF,hF,st,{slug:6,removeFavourite:0})}get removeFavourite(){return this.$$.ctx[0]}}function mF(i){let e,n,t,r,s=[{class:n=jt("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0  file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]],a={};for(let o=0;o<s.length;o+=1)a=Ie(a,s[o]);return{c(){e=ce("input"),this.h()},l(o){e=ue(o,"INPUT",{class:!0}),this.h()},h(){Bt(e,a)},m(o,u){B(o,e,u),e.autofocus&&e.focus(),Ro(e,i[0]),t||(r=[mt(e,"input",i[17]),mt(e,"blur",i[3]),mt(e,"change",i[4]),mt(e,"click",i[5]),mt(e,"focus",i[6]),mt(e,"focusin",i[7]),mt(e,"focusout",i[8]),mt(e,"keydown",i[9]),mt(e,"keypress",i[10]),mt(e,"keyup",i[11]),mt(e,"mouseover",i[12]),mt(e,"mouseenter",i[13]),mt(e,"mouseleave",i[14]),mt(e,"paste",i[15]),mt(e,"input",i[16])],t=!0)},p(o,[u]){Bt(e,a=St(s,[u&2&&n!==(n=jt("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0  file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o[1]))&&{class:n},u&4&&o[2]])),u&1&&e.value!==o[0]&&Ro(e,o[0])},i:gt,o:gt,d(o){o&&I(e),t=!1,wr(r)}}}function _F(i,e,n){const t=["class","value"];let r=at(e,t),{class:s=void 0}=e,{value:a=void 0}=e;function o(te){Wt.call(this,i,te)}function u(te){Wt.call(this,i,te)}function p(te){Wt.call(this,i,te)}function _(te){Wt.call(this,i,te)}function b(te){Wt.call(this,i,te)}function $(te){Wt.call(this,i,te)}function P(te){Wt.call(this,i,te)}function L(te){Wt.call(this,i,te)}function z(te){Wt.call(this,i,te)}function F(te){Wt.call(this,i,te)}function U(te){Wt.call(this,i,te)}function j(te){Wt.call(this,i,te)}function J(te){Wt.call(this,i,te)}function pe(te){Wt.call(this,i,te)}function re(){a=this.value,n(0,a)}return i.$$set=te=>{e=Ie(Ie({},e),Dt(te)),n(2,r=at(e,t)),"class"in te&&n(1,s=te.class),"value"in te&&n(0,a=te.value)},[a,s,r,o,u,p,_,b,$,P,L,z,F,U,j,J,pe,re]}class kd extends it{constructor(e){super(),ot(this,e,_F,mF,st,{class:1,value:0})}}function gF(i){let e,n,t,r,s=[{class:n=jt("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i[1])},{readOnly:i[2]},i[3]],a={};for(let o=0;o<s.length;o+=1)a=Ie(a,s[o]);return{c(){e=ce("textarea"),this.h()},l(o){e=ue(o,"TEXTAREA",{class:!0}),$e(e).forEach(I),this.h()},h(){Bt(e,a)},m(o,u){B(o,e,u),e.autofocus&&e.focus(),Ro(e,i[0]),t||(r=[mt(e,"input",i[16]),mt(e,"blur",i[4]),mt(e,"change",i[5]),mt(e,"click",i[6]),mt(e,"focus",i[7]),mt(e,"keydown",i[8]),mt(e,"keypress",i[9]),mt(e,"keyup",i[10]),mt(e,"mouseover",i[11]),mt(e,"mouseenter",i[12]),mt(e,"mouseleave",i[13]),mt(e,"paste",i[14]),mt(e,"input",i[15])],t=!0)},p(o,[u]){Bt(e,a=St(s,[u&2&&n!==(n=jt("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o[1]))&&{class:n},u&4&&{readOnly:o[2]},u&8&&o[3]])),u&1&&Ro(e,o[0])},i:gt,o:gt,d(o){o&&I(e),t=!1,wr(r)}}}function vF(i,e,n){const t=["class","value","readonly"];let r=at(e,t),{class:s=void 0}=e,{value:a=void 0}=e,{readonly:o=void 0}=e;function u(re){Wt.call(this,i,re)}function p(re){Wt.call(this,i,re)}function _(re){Wt.call(this,i,re)}function b(re){Wt.call(this,i,re)}function $(re){Wt.call(this,i,re)}function P(re){Wt.call(this,i,re)}function L(re){Wt.call(this,i,re)}function z(re){Wt.call(this,i,re)}function F(re){Wt.call(this,i,re)}function U(re){Wt.call(this,i,re)}function j(re){Wt.call(this,i,re)}function J(re){Wt.call(this,i,re)}function pe(){a=this.value,n(0,a)}return i.$$set=re=>{e=Ie(Ie({},e),Dt(re)),n(3,r=at(e,t)),"class"in re&&n(1,s=re.class),"value"in re&&n(0,a=re.value),"readonly"in re&&n(2,o=re.readonly)},[a,s,o,r,u,p,_,b,$,P,L,z,F,U,j,J,pe]}class fy extends it{constructor(e){super(),ot(this,e,vF,gF,st,{class:1,value:0,readonly:2})}}function yF(i){let e,n,t,r,s,a="Profile Picture",o,u,p,_,b,$="Profile Picture:",P,L,z,F,U,j,J,pe=!i[1]&&h0(i),re=i[1]&&p0(i);const te=[AF,EF],de=[];function me(Y,we){return Y[0].profile_picture===void 0?0:1}return u=me(i),p=de[u]=te[u](i),F=new yr({props:{$$slots:{default:[RF]},$$scope:{ctx:i}}}),F.$on("click",i[8]),{c(){e=ce("div"),pe&&pe.c(),n=ge(),re&&re.c(),t=ge(),r=ce("div"),s=ce("h2"),s.textContent=a,o=ge(),p.c(),_=ge(),b=ce("label"),b.textContent=$,P=ge(),L=ce("input"),z=ge(),q(F.$$.fragment),this.h()},l(Y){e=ue(Y,"DIV",{class:!0});var we=$e(e);pe&&pe.l(we),n=ve(we),re&&re.l(we),we.forEach(I),t=ve(Y),r=ue(Y,"DIV",{class:!0});var Ce=$e(r);s=ue(Ce,"H2",{class:!0,"data-svelte-h":!0}),bn(s)!=="svelte-1qatzt5"&&(s.textContent=a),o=ve(Ce),p.l(Ce),_=ve(Ce),b=ue(Ce,"LABEL",{for:!0,"data-svelte-h":!0}),bn(b)!=="svelte-1j5ep21"&&(b.textContent=$),P=ve(Ce),L=ue(Ce,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),z=ve(Ce),Z(F.$$.fragment,Ce),Ce.forEach(I),this.h()},h(){se(e,"class","relative card h-full w-full md:w-3/4 max-w-3xl md:max-h-[32rem] max-h-none flex bg-base-200 shadow-xl p-6 flex-col"),se(s,"class","text-2xl font-bold mb-2"),se(b,"for","profile-picture"),se(L,"id","profile-picture"),se(L,"type","file"),se(L,"accept","image/png, image/jpeg"),se(L,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),se(r,"class","relative card h-full w-full md:w-3/4 max-w-3xl max-h-none flex bg-base-200 shadow-xl p-6 flex-col")},m(Y,we){B(Y,e,we),pe&&pe.m(e,null),ae(e,n),re&&re.m(e,null),B(Y,t,we),B(Y,r,we),ae(r,s),ae(r,o),de[u].m(r,null),ae(r,_),ae(r,b),ae(r,P),ae(r,L),ae(r,z),G(F,r,null),U=!0,j||(J=mt(L,"change",i[9]),j=!0)},p(Y,we){Y[1]?pe&&(vt(),E(pe,1,1,()=>{pe=null}),yt()):pe?(pe.p(Y,we),we&2&&T(pe,1)):(pe=h0(Y),pe.c(),T(pe,1),pe.m(e,n)),Y[1]?re?(re.p(Y,we),we&2&&T(re,1)):(re=p0(Y),re.c(),T(re,1),re.m(e,null)):re&&(vt(),E(re,1,1,()=>{re=null}),yt());let Ce=u;u=me(Y),u===Ce?de[u].p(Y,we):(vt(),E(de[Ce],1,1,()=>{de[Ce]=null}),yt(),p=de[u],p?p.p(Y,we):(p=de[u]=te[u](Y),p.c()),T(p,1),p.m(r,_));const _e={};we&262144&&(_e.$$scope={dirty:we,ctx:Y}),F.$set(_e)},i(Y){U||(T(pe),T(re),T(p),T(F.$$.fragment,Y),U=!0)},o(Y){E(pe),E(re),E(p),E(F.$$.fragment,Y),U=!1},d(Y){Y&&(I(e),I(t),I(r)),pe&&pe.d(),re&&re.d(),de[u].d(),H(F),j=!1,J()}}}function bF(i){let e,n,t;return n=new co({props:{class:"text-error",$$slots:{default:[OF]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),this.h()},l(r){e=ue(r,"DIV",{class:!0});var s=$e(e);Z(n.$$.fragment,s),s.forEach(I),this.h()},h(){se(e,"class","grow flex items-center justify-center")},m(r,s){B(r,e,s),G(n,e,null),t=!0},p(r,s){const a={};s&262144&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){E(n.$$.fragment,r),t=!1},d(r){r&&I(e),H(n)}}}function wF(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=ce("div"),e.innerHTML=n,this.h()},l(t){e=ue(t,"DIV",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-y7ubrx"&&(e.innerHTML=n),this.h()},h(){se(e,"class","grow flex items-center justify-center")},m(t,r){B(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&I(e)}}}function h0(i){let e,n,t="User Details",r,s,a,o,u,p,_,b,$,P,L,z,F,U,j,J,pe,re,te,de,me;a=new co({props:{for:"nickname",$$slots:{default:[xF]},$$scope:{ctx:i}}});function Y(Ee){i[10](Ee)}let we={id:"nickname",readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm "+(i[1]?"bg-card":"bg-muted")};i[0].nickname!==void 0&&(we.value=i[0].nickname),u=new kd({props:we}),Zt.push(()=>An(u,"value",Y));let Ce=i[2]&&d0(i);P=new co({props:{for:"email",$$slots:{default:[kF]},$$scope:{ctx:i}}}),z=new kd({props:{id:"email",type:"text",value:i[0].email,readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm  bg-muted"}}),j=new co({props:{for:"description",$$slots:{default:[CF]},$$scope:{ctx:i}}});function _e(Ee){i[11](Ee)}let fe={id:"description",rows:5,cols:50,readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm bg-muted "+(i[1]?"bg-card":"bg-muted")};return i[0].description!==void 0&&(fe.value=i[0].description),pe=new fy({props:fe}),Zt.push(()=>An(pe,"value",_e)),de=new yr({props:{$$slots:{default:[SF]},$$scope:{ctx:i}}}),de.$on("click",i[6]),{c(){e=ce("div"),n=ce("h2"),n.textContent=t,r=ge(),s=ce("div"),q(a.$$.fragment),o=ge(),q(u.$$.fragment),_=ge(),Ce&&Ce.c(),b=ge(),$=ce("div"),q(P.$$.fragment),L=ge(),q(z.$$.fragment),F=ge(),U=ce("div"),q(j.$$.fragment),J=ge(),q(pe.$$.fragment),te=ge(),q(de.$$.fragment),this.h()},l(Ee){e=ue(Ee,"DIV",{class:!0});var je=$e(e);n=ue(je,"H2",{class:!0,"data-svelte-h":!0}),bn(n)!=="svelte-1pn0m61"&&(n.textContent=t),r=ve(je),s=ue(je,"DIV",{});var ke=$e(s);Z(a.$$.fragment,ke),o=ve(ke),Z(u.$$.fragment,ke),_=ve(ke),Ce&&Ce.l(ke),ke.forEach(I),je.forEach(I),b=ve(Ee),$=ue(Ee,"DIV",{class:!0});var nt=$e($);Z(P.$$.fragment,nt),L=ve(nt),Z(z.$$.fragment,nt),nt.forEach(I),F=ve(Ee),U=ue(Ee,"DIV",{});var bt=$e(U);Z(j.$$.fragment,bt),J=ve(bt),Z(pe.$$.fragment,bt),bt.forEach(I),te=ve(Ee),Z(de.$$.fragment,Ee),this.h()},h(){se(n,"class","text-2xl font-bold mb-2"),se(e,"class","mb-4"),se($,"class","mb-4")},m(Ee,je){B(Ee,e,je),ae(e,n),ae(e,r),ae(e,s),G(a,s,null),ae(s,o),G(u,s,null),ae(s,_),Ce&&Ce.m(s,null),B(Ee,b,je),B(Ee,$,je),G(P,$,null),ae($,L),G(z,$,null),B(Ee,F,je),B(Ee,U,je),G(j,U,null),ae(U,J),G(pe,U,null),B(Ee,te,je),G(de,Ee,je),me=!0},p(Ee,je){const ke={};je&262144&&(ke.$$scope={dirty:je,ctx:Ee}),a.$set(ke);const nt={};je&2&&(nt.class="mt-1 block w-full rounded-md shadow-sm "+(Ee[1]?"bg-card":"bg-muted")),!p&&je&1&&(p=!0,nt.value=Ee[0].nickname,En(()=>p=!1)),u.$set(nt),Ee[2]?Ce?(Ce.p(Ee,je),je&4&&T(Ce,1)):(Ce=d0(Ee),Ce.c(),T(Ce,1),Ce.m(s,null)):Ce&&(vt(),E(Ce,1,1,()=>{Ce=null}),yt());const bt={};je&262144&&(bt.$$scope={dirty:je,ctx:Ee}),P.$set(bt);const zt={};je&1&&(zt.value=Ee[0].email),z.$set(zt);const At={};je&262144&&(At.$$scope={dirty:je,ctx:Ee}),j.$set(At);const Et={};je&2&&(Et.class="mt-1 block w-full rounded-md shadow-sm bg-muted "+(Ee[1]?"bg-card":"bg-muted")),!re&&je&1&&(re=!0,Et.value=Ee[0].description,En(()=>re=!1)),pe.$set(Et);const It={};je&262144&&(It.$$scope={dirty:je,ctx:Ee}),de.$set(It)},i(Ee){me||(T(a.$$.fragment,Ee),T(u.$$.fragment,Ee),T(Ce),T(P.$$.fragment,Ee),T(z.$$.fragment,Ee),T(j.$$.fragment,Ee),T(pe.$$.fragment,Ee),T(de.$$.fragment,Ee),me=!0)},o(Ee){E(a.$$.fragment,Ee),E(u.$$.fragment,Ee),E(Ce),E(P.$$.fragment,Ee),E(z.$$.fragment,Ee),E(j.$$.fragment,Ee),E(pe.$$.fragment,Ee),E(de.$$.fragment,Ee),me=!1},d(Ee){Ee&&(I(e),I(b),I($),I(F),I(U),I(te)),H(a),H(u),Ce&&Ce.d(),H(P),H(z),H(j),H(pe),H(de,Ee)}}}function xF(i){let e;return{c(){e=He("Nickname:")},l(n){e=Ze(n,"Nickname:")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function d0(i){let e,n;return e=new co({props:{class:"text-error",$$slots:{default:[$F]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&262148&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function $F(i){let e;return{c(){e=He(i[2])},l(n){e=Ze(n,i[2])},m(n,t){B(n,e,t)},p(n,t){t&4&&Qt(e,n[2])},d(n){n&&I(e)}}}function kF(i){let e;return{c(){e=He("Email:")},l(n){e=Ze(n,"Email:")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function CF(i){let e;return{c(){e=He("Description:")},l(n){e=Ze(n,"Description:")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function SF(i){let e;return{c(){e=He("Edit Profile")},l(n){e=Ze(n,"Edit Profile")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function p0(i){let e,n="Editing User Details",t,r,s,a,o,u,p,_,b,$,P,L,z,F,U;s=new co({props:{for:"edit-email",$$slots:{default:[IF]},$$scope:{ctx:i}}});function j(te){i[12](te)}let J={id:"edit-nickname",type:"text",class:"mt-1 block w-full rounded-md shadow-sm focus:border-green-300 bg-muted "};i[0].nickname!==void 0&&(J.value=i[0].nickname),o=new kd({props:J}),Zt.push(()=>An(o,"value",j)),b=new co({props:{for:"edit-description",$$slots:{default:[TF]},$$scope:{ctx:i}}});function pe(te){i[13](te)}let re={id:"edit-description",rows:5,cols:50,class:"mt-1 block w-full rounded-md shadow-sm focus:border-green-300 bg-muted"};return i[0].description!==void 0&&(re.value=i[0].description),P=new fy({props:re}),Zt.push(()=>An(P,"value",pe)),F=new yr({props:{$$slots:{default:[PF]},$$scope:{ctx:i}}}),F.$on("click",i[7]),{c(){e=ce("h2"),e.textContent=n,t=ge(),r=ce("div"),q(s.$$.fragment),a=ge(),q(o.$$.fragment),p=ge(),_=ce("div"),q(b.$$.fragment),$=ge(),q(P.$$.fragment),z=ge(),q(F.$$.fragment),this.h()},l(te){e=ue(te,"H2",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-g6v2i1"&&(e.textContent=n),t=ve(te),r=ue(te,"DIV",{});var de=$e(r);Z(s.$$.fragment,de),a=ve(de),Z(o.$$.fragment,de),de.forEach(I),p=ve(te),_=ue(te,"DIV",{});var me=$e(_);Z(b.$$.fragment,me),$=ve(me),Z(P.$$.fragment,me),me.forEach(I),z=ve(te),Z(F.$$.fragment,te),this.h()},h(){se(e,"class","text-2xl font-bold mb-2")},m(te,de){B(te,e,de),B(te,t,de),B(te,r,de),G(s,r,null),ae(r,a),G(o,r,null),B(te,p,de),B(te,_,de),G(b,_,null),ae(_,$),G(P,_,null),B(te,z,de),G(F,te,de),U=!0},p(te,de){const me={};de&262144&&(me.$$scope={dirty:de,ctx:te}),s.$set(me);const Y={};!u&&de&1&&(u=!0,Y.value=te[0].nickname,En(()=>u=!1)),o.$set(Y);const we={};de&262144&&(we.$$scope={dirty:de,ctx:te}),b.$set(we);const Ce={};!L&&de&1&&(L=!0,Ce.value=te[0].description,En(()=>L=!1)),P.$set(Ce);const _e={};de&262144&&(_e.$$scope={dirty:de,ctx:te}),F.$set(_e)},i(te){U||(T(s.$$.fragment,te),T(o.$$.fragment,te),T(b.$$.fragment,te),T(P.$$.fragment,te),T(F.$$.fragment,te),U=!0)},o(te){E(s.$$.fragment,te),E(o.$$.fragment,te),E(b.$$.fragment,te),E(P.$$.fragment,te),E(F.$$.fragment,te),U=!1},d(te){te&&(I(e),I(t),I(r),I(p),I(_),I(z)),H(s),H(o),H(b),H(P),H(F,te)}}}function IF(i){let e;return{c(){e=He("Edit Nickname:")},l(n){e=Ze(n,"Edit Nickname:")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function TF(i){let e;return{c(){e=He("Edit Description:")},l(n){e=Ze(n,"Edit Description:")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function PF(i){let e;return{c(){e=He("Save Changes")},l(n){e=Ze(n,"Save Changes")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function EF(i){let e,n;return e=new Dr({props:{class:"mb-2",$$slots:{default:[DF]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&262145&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function AF(i){let e,n;return e=new Dr({props:{class:"mb-2",$$slots:{default:[LF]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function MF(i){let e,n;return{c(){e=ce("img"),this.h()},l(t){e=ue(t,"IMG",{src:!0,class:!0,alt:!0,style:!0}),this.h()},h(){fr(e.src,n=i[0].profile_picture)||se(e,"src",n),se(e,"class","object-contain rounded-xl"),se(e,"alt","Profile Picture"),Tf(e,"width","max(200px, 75%)"),Tf(e,"max-height","320px")},m(t,r){B(t,e,r)},p(t,r){r&1&&!fr(e.src,n=t[0].profile_picture)&&se(e,"src",n)},d(t){t&&I(e)}}}function DF(i){let e,n;return e=new Is({props:{class:"p-2 flex justify-center relative",$$slots:{default:[MF]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&262145&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function zF(i){let e,n="You do not currently have a profile picture...";return{c(){e=ce("p"),e.textContent=n,this.h()},l(t){e=ue(t,"P",{class:!0,"data-svelte-h":!0}),bn(e)!=="svelte-n8lb6d"&&(e.textContent=n),this.h()},h(){se(e,"class","text-center")},m(t,r){B(t,e,r)},p:gt,d(t){t&&I(e)}}}function LF(i){let e,n;return e=new Is({props:{class:"p-2",$$slots:{default:[zF]},$$scope:{ctx:i}}}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function RF(i){let e;return{c(){e=He("Upload Profile Picture")},l(n){e=Ze(n,"Upload Profile Picture")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function OF(i){let e;return{c(){e=He("Failed to fetch or update data. Contact admin for more details.")},l(n){e=Ze(n,"Failed to fetch or update data. Contact admin for more details.")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function FF(i){let e,n,t,r;const s=[wF,bF,yF],a=[];function o(u,p){return u[4]?0:u[3]?1:2}return n=o(i),t=a[n]=s[n](i),{c(){e=ce("div"),t.c(),this.h()},l(u){e=ue(u,"DIV",{class:!0});var p=$e(e);t.l(p),p.forEach(I),this.h()},h(){se(e,"class","flex flex-wrap justify-between")},m(u,p){B(u,e,p),a[n].m(e,null),r=!0},p(u,[p]){let _=n;n=o(u),n===_?a[n].p(u,p):(vt(),E(a[_],1,1,()=>{a[_]=null}),yt(),t=a[n],t?t.p(u,p):(t=a[n]=s[n](u),t.c()),T(t,1),t.m(e,null))},i(u){r||(T(t),r=!0)},o(u){E(t),r=!1},d(u){u&&I(e),a[n].d()}}}function BF(i,e,n){let t;const r=gi("refreshAvatarData");on(i,r,re=>n(15,t=re));let s=!1,a,o="",u=!1,p=!0,_;async function b(){const te=await(await fetch("/api/settings/profile")).json();n(0,_=te),((_==null?void 0:_.nickname)===void 0||(_==null?void 0:_.email)===void 0||(_==null?void 0:_.description)===void 0)&&n(3,u=!0),n(4,p=!1)}function $(){n(1,s=!s)}async function P(){if(o)return;n(4,p=!0);const te=await(await fetch("/api/settings/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{..._,email:void 0,profile_picture:void 0}})})).json();n(0,_=te),((_==null?void 0:_.nickname)===void 0||(_==null?void 0:_.email)===void 0||(_==null?void 0:_.description)===void 0)&&n(3,u=!0),n(4,p=!1),n(1,s=!1),t!==null&&t()}async function L(){if(a){const re=new FormData;re.append("profile_picture",a),n(4,p=!0);const te=await fetch("/api/settings/profile/update-picture",{method:"POST",body:re});if(te.ok){const de=await te.json();n(0,_=de),((_==null?void 0:_.nickname)===void 0||(_==null?void 0:_.email)===void 0||(_==null?void 0:_.description)===void 0)&&n(3,u=!0),n(1,s=!1)}else n(3,u=!0);n(4,p=!1),t!==null&&t()}}const z=["image/png","image/jpeg"];function F(re){const te=re.target;te&&te.files&&te.files.length>0&&z.includes(te.files[0].type)?a=te.files[0]:a=void 0}Sr(b);function U(re){i.$$.not_equal(_.nickname,re)&&(_.nickname=re,n(0,_))}function j(re){i.$$.not_equal(_.description,re)&&(_.description=re,n(0,_))}function J(re){i.$$.not_equal(_.nickname,re)&&(_.nickname=re,n(0,_))}function pe(re){i.$$.not_equal(_.description,re)&&(_.description=re,n(0,_))}return i.$$.update=()=>{i.$$.dirty&1&&(_&&typeof _.nickname=="string"&&_.nickname.length<3?n(2,o="Nickname must be at least 3 characters long"):n(2,o=""))},[_,s,o,u,p,r,$,P,L,F,U,j,J,pe]}class NF extends it{constructor(e){super(),ot(this,e,BF,FF,st,{})}}function VF(i){let e;return{c(){e=He("Profile Settings")},l(n){e=Ze(n,"Profile Settings")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function UF(i){let e,n,t,r;return e=new ji({props:{tag:"h2",class:"mb-3",$$slots:{default:[VF]},$$scope:{ctx:i}}}),t=new qi({}),{c(){q(e.$$.fragment),n=ge(),q(t.$$.fragment)},l(s){Z(e.$$.fragment,s),n=ve(s),Z(t.$$.fragment,s)},m(s,a){G(e,s,a),B(s,n,a),G(t,s,a),r=!0},p(s,a){const o={};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){E(e.$$.fragment,s),E(t.$$.fragment,s),r=!1},d(s){s&&I(n),H(e,s),H(t,s)}}}function jF(i){let e,n;return e=new NF({}),{c(){q(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,r){G(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function qF(i){let e,n,t,r,s;return n=new Zs({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[UF]},$$scope:{ctx:i}}}),r=new Is({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[jF]},$$scope:{ctx:i}}}),{c(){e=ce("div"),q(n.$$.fragment),t=ge(),q(r.$$.fragment)},l(a){e=ue(a,"DIV",{});var o=$e(e);Z(n.$$.fragment,o),o.forEach(I),t=ve(a),Z(r.$$.fragment,a)},m(a,o){B(a,e,o),G(n,e,null),i[4](e),B(a,t,o),G(r,a,o),s=!0},p(a,o){const u={};o&32&&(u.$$scope={dirty:o,ctx:a}),n.$set(u);const p={};o&2&&(p.style=`height: calc(100% - ${a[1]}px);`),o&32&&(p.$$scope={dirty:o,ctx:a}),r.$set(p)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){E(n.$$.fragment,a),E(r.$$.fragment,a),s=!1},d(a){a&&(I(e),I(t)),H(n),i[4](null),H(r,a)}}}function GF(i){let e,n,t,r,s,a;return t=new Dr({props:{class:"relative p-4 h-full",$$slots:{default:[qF]},$$scope:{ctx:i}}}),{c(){e=ce("div"),n=ce("div"),q(t.$$.fragment),this.h()},l(o){e=ue(o,"DIV",{class:!0});var u=$e(e);n=ue(u,"DIV",{class:!0});var p=$e(n);Z(t.$$.fragment,p),p.forEach(I),u.forEach(I),this.h()},h(){se(n,"class","flex flex-col p-4 relative h-full"),se(e,"class","flex grow flex-col relative h-full")},m(o,u){B(o,e,u),ae(e,n),G(t,n,null),r=!0,s||(a=mt(window,"resize",i[2]),s=!0)},p(o,[u]){const p={};u&35&&(p.$$scope={dirty:u,ctx:o}),t.$set(p)},i(o){r||(T(t.$$.fragment,o),r=!0)},o(o){E(t.$$.fragment,o),r=!1},d(o){o&&I(e),H(t),s=!1,a()}}}function HF(i,e,n){let{slug:t}=e,r,s=64;const a=()=>{const u=r.offsetHeight;u!==void 0&&n(1,s=u)};Sr(a);function o(u){Zt[u?"unshift":"push"](()=>{r=u,n(0,r)})}return i.$$set=u=>{"slug"in u&&n(3,t=u.slug)},[r,s,a,t,o]}class ZF extends it{constructor(e){super(),ot(this,e,HF,GF,st,{slug:3})}}const{document:pd}=Sd;function m0(i){let e;return{c(){e=ce("div"),this.h()},l(n){e=ue(n,"DIV",{class:!0}),$e(e).forEach(I),this.h()},h(){se(e,"class","absolute w-full h-full md:hidden backdrop-blur")},m(n,t){B(n,e,t)},d(n){n&&I(e)}}}function WF(i){let e,n,t,r,s,a,o,u,p,_,b,$,P,L,z,F,U;pd.title=e=i[3];function j(Y){i[6](Y)}let J={};i[1]!==void 0&&(J.menuClosed=i[1]),t=new PS({props:J}),Zt.push(()=>An(t,"menuClosed",j));function pe(Y){i[7](Y)}let re={slug:i[0].slug};i[1]!==void 0&&(re.menuClosed=i[1]),u=new HS({props:re}),Zt.push(()=>An(u,"menuClosed",pe));var te=i[2];function de(Y,we){return{props:{slug:Y[0].slug}}}te&&($=Pf(te,de(i)));let me=!i[1]&&m0();return{c(){n=ge(),q(t.$$.fragment),s=ge(),a=ce("div"),o=ce("div"),q(u.$$.fragment),_=ge(),b=ce("div"),$&&q($.$$.fragment),P=ge(),me&&me.c(),this.h()},l(Y){g0("svelte-a7ezgp",pd.head).forEach(I),n=ve(Y),Z(t.$$.fragment,Y),s=ve(Y),a=ue(Y,"DIV",{class:!0,style:!0});var Ce=$e(a);o=ue(Ce,"DIV",{class:!0});var _e=$e(o);Z(u.$$.fragment,_e),_e.forEach(I),_=ve(Ce),b=ue(Ce,"DIV",{class:!0});var fe=$e(b);$&&Z($.$$.fragment,fe),P=ve(fe),me&&me.l(fe),fe.forEach(I),Ce.forEach(I),this.h()},h(){se(o,"class","overflow-y-auto shrink-0"),se(b,"class","relative flex flex-col grow bg-base-300 md:brightness-100 overflow-x-hidden"),ur(b,"brightness-50",!i[1]),se(a,"class","relative flex"),se(a,"style",L=`height: calc(100% - ${i[4]}px);`)},m(Y,we){B(Y,n,we),G(t,Y,we),B(Y,s,we),B(Y,a,we),ae(a,o),G(u,o,null),ae(a,_),ae(a,b),$&&G($,b,null),ae(b,P),me&&me.m(b,null),z=!0,F||(U=[mt(window,"resize",i[5]),mt(b,"click",i[8])],F=!0)},p(Y,[we]){(!z||we&8)&&e!==(e=Y[3])&&(pd.title=e);const Ce={};!r&&we&2&&(r=!0,Ce.menuClosed=Y[1],En(()=>r=!1)),t.$set(Ce);const _e={};if(we&1&&(_e.slug=Y[0].slug),!p&&we&2&&(p=!0,_e.menuClosed=Y[1],En(()=>p=!1)),u.$set(_e),we&4&&te!==(te=Y[2])){if($){vt();const fe=$;E(fe.$$.fragment,1,0,()=>{H(fe,1)}),yt()}te?($=Pf(te,de(Y)),q($.$$.fragment),T($.$$.fragment,1),G($,b,P)):$=null}else if(te){const fe={};we&1&&(fe.slug=Y[0].slug),$.$set(fe)}Y[1]?me&&(me.d(1),me=null):me||(me=m0(),me.c(),me.m(b,null)),(!z||we&2)&&ur(b,"brightness-50",!Y[1]),(!z||we&16&&L!==(L=`height: calc(100% - ${Y[4]}px);`))&&se(a,"style",L)},i(Y){z||(T(t.$$.fragment,Y),T(u.$$.fragment,Y),$&&T($.$$.fragment,Y),z=!0)},o(Y){E(t.$$.fragment,Y),E(u.$$.fragment,Y),$&&E($.$$.fragment,Y),z=!1},d(Y){Y&&(I(n),I(s),I(a)),H(t,Y),H(u),$&&H($),me&&me.d(),F=!1,wr(U)}}}function KF(i,e,n){let{data:t}=e,r=!0,s=null,a="",o=64;const u=()=>{const $=document.getElementById("app-header"),P=$==null?void 0:$.offsetHeight;P!==void 0&&n(4,o=P)};Sr(u);function p($){r=$,n(1,r)}function _($){r=$,n(1,r)}const b=()=>n(1,r=!0);return i.$$set=$=>{"data"in $&&n(0,t=$.data)},i.$$.update=()=>{if(i.$$.dirty&1)switch(t.slug.split("/")[0]){case Rn.HOME:n(2,s=jD),n(3,a="Home");break;case Rn.SOCIAL_NETWORK:n(2,s=YD),n(3,a="Social Network");break;case Rn.POINTS_AND_BADGES:n(2,s=O6),n(3,a="Points & Badges");break;case Rn.CHECK_INS:n(2,s=wR),n(3,a="Check-ins");break;case Rn.FAVOURITES:n(2,s=pF),n(3,a="Favourites");break;case Rn.SETTINGS:n(2,s=ZF),n(3,a="Settings");break;default:va("/app");break}},[t,r,s,a,o,u,p,_,b]}class O8 extends it{constructor(e){super(),ot(this,e,KF,WF,st,{data:0})}}export{O8 as component,x8 as universal};
