import{s as nt,I as Ce,J as Mt,r as $t,u as wt,v as xt,w as kt,t as _i,R as Ei,a2 as bi,e as Fe,i as R,d as S,O as lt,z as sn,p as jt,f as oe,g as ae,h as $e,Q as Vt,X as qn,B as bt,C as kr,G as Hi,y as gt,N as I$,a4 as Sf,a3 as Wt,K as Tf,L as If,j as te,a5 as Ef,x as ce,o as er,F as Bo,a as de,c as pe,A as an,l as Ve,m as Ue,n as Ft,U as pr,_ as dr,S as El,a6 as Bm,E as Zr,k as Pf,M as Sd,a7 as E$,a8 as P$,a9 as U0,Y as ji,P as ls,T as xn,aa as as,ab as j0,Z as A$,D as q0,q as Af}from"../chunks/scheduler.380713c5.js";import{S as it,i as ot,b as N,d as j,m as V,a as T,t as I,e as U,g as ht,c as dt,h as Pl,f as Al,k as Fo,j as kn}from"../chunks/index.d1f179ad.js";import{g as Td}from"../chunks/globals.7f7f1b26.js";import{o as Of,m as js,d as Cl,e as Uc,a as Ro,k as As,h as M$,i as jc,s as Zc,c as G0,j as ga,b as H0,w as D$,u as Nm,n as ma,p as z$,f as qt,l as Id,B as Vn,L as L$,q as Z0}from"../chunks/LogoutButton.4e5a5863.js";import{g as Pt,a as mn,e as Qt,u as zr,o as Wr,d as R$}from"../chunks/spread.d0141d5b.js";import{t as Wc,a9 as W0,o as Ff,aa as Vm,ab as O$,ac as F$,ad as B$,ae as N$,af as V$,ag as Um,r as Bf,c as eu,g as Nf,ah as U$,a as tu,ai as j$,aj as q$,ak as G$,al as H$,am as Z$,an as W$,ao as K$,ap as X$,a7 as J$,C as Vf,X as Y$,a3 as nr,a4 as Kr,a8 as Lr,a5 as _s,R as Oo,T as No,H as Vo,a6 as Zi,aq as Q$,ar as ew,as as tw,at as nw,B as ns,a2 as yi,_ as K0,$ as X0,a0 as J0,a1 as Y0,e as nu,f as ru,D as su,h as Mf,i as Q0,A as ev,j as tv,I as nv,k as rv,m as sv,S as iv,q as ov,s as av,u as lv,v as cv,w as uv,V as fv,x as Ui,y as hv,z as dv,M as pv,E as mv,F as _v,G as gv,J as qc,K as vv,L as yv,au as bv,N as $v,O as wv,P as xv,Q as Uo,U as Uf,W as kv,Y as Cv,Z as jf}from"../chunks/card-title.874bb1ee.js";import{w as yr,d as Gi,r as va}from"../chunks/paths.4ad8ea9e.js";import{g as ya}from"../chunks/navigation.228faf81.js";import{I as es,B as Ms,j as rw,a as sw,S as xa,b as iw,m as ow,d as Gc,i as Sv,E as qf,o as yf,e as bf,f as Sl,q as jm,g as kl,h as id,r as aw,v as od,k as lw}from"../chunks/index.5825c143.js";import{p as Tv}from"../chunks/stores.c79fddae.js";import{c as iu,f as cw,e as uw,q as qm,a as Gm}from"../chunks/index.b23b49e9.js";import{s as fw}from"../chunks/index.e7938b12.js";function hw(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function dw(i){let e,n;const t=[{name:"chevron-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[hw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function pw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m6 9 6 6 6-6"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class mw extends it{constructor(e){super(),ot(this,e,pw,dw,nt,{})}}const _w=mw;function gw(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function vw(i){let e,n;const t=[{name:"chevrons-up-down"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[gw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function yw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m7 15 5 5 5-5"}],["path",{d:"m7 9 5-5 5 5"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class bw extends it{constructor(e){super(),ot(this,e,yw,vw,nt,{})}}const $w=bw;function ww(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function xw(i){let e,n;const t=[{name:"clipboard-x"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[ww]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function kw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}],["path",{d:"m15 11-6 6"}],["path",{d:"m9 11 6 6"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class Cw extends it{constructor(e){super(),ot(this,e,kw,xw,nt,{})}}const Sw=Cw;function Tw(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Iw(i){let e,n;const t=[{name:"filter-x"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Tw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Ew(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055"}],["path",{d:"m22 3-5 5"}],["path",{d:"m17 3 5 5"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class Pw extends it{constructor(e){super(),ot(this,e,Ew,Iw,nt,{})}}const Aw=Pw;function Mw(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Dw(i){let e,n;const t=[{name:"filter"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Mw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function zw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class Lw extends it{constructor(e){super(),ot(this,e,zw,Dw,nt,{})}}const Ed=Lw;function Rw(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Ow(i){let e,n;const t=[{name:"glasses"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Rw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Fw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"6",cy:"15",r:"4"}],["circle",{cx:"18",cy:"15",r:"4"}],["path",{d:"M14 15a2 2 0 0 0-2-2 2 2 0 0 0-2 2"}],["path",{d:"M2.5 13 5 7c.7-1.3 1.4-2 3-2"}],["path",{d:"M21.5 13 19 7c-.7-1.3-1.5-2-3-2"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class Bw extends it{constructor(e){super(),ot(this,e,Fw,Ow,nt,{})}}const Pd=Bw;function Nw(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Vw(i){let e,n;const t=[{name:"heart"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Nw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Uw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class jw extends it{constructor(e){super(),ot(this,e,Uw,Vw,nt,{})}}const Ml=jw;function qw(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Gw(i){let e,n;const t=[{name:"layers"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[qw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Hw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class Zw extends it{constructor(e){super(),ot(this,e,Hw,Gw,nt,{})}}const Ww=Zw;function Kw(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Xw(i){let e,n;const t=[{name:"map"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[Kw]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function Jw(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"}],["path",{d:"M15 5.764v15"}],["path",{d:"M9 3.236v15"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}let Yw=class extends it{constructor(e){super(),ot(this,e,Jw,Xw,nt,{})}};const Qw=Yw;function e2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function t2(i){let e,n;const t=[{name:"message-circle-more"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[e2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function n2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"}],["path",{d:"M8 12h.01"}],["path",{d:"M12 12h.01"}],["path",{d:"M16 12h.01"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class r2 extends it{constructor(e){super(),ot(this,e,n2,t2,nt,{})}}const Iv=r2;function s2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function i2(i){let e,n;const t=[{name:"messages-square"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[s2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function o2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4c0-1.1.9-2 2-2h8a2 2 0 0 1 2 2z"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class a2 extends it{constructor(e){super(),ot(this,e,o2,i2,nt,{})}}const l2=a2;function c2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function u2(i){let e,n;const t=[{name:"pencil"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[c2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function f2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}],["path",{d:"m15 5 4 4"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class h2 extends it{constructor(e){super(),ot(this,e,f2,u2,nt,{})}}const d2=h2;function p2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function m2(i){let e,n;const t=[{name:"search"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[p2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function _2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"11",cy:"11",r:"8"}],["path",{d:"m21 21-4.3-4.3"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class g2 extends it{constructor(e){super(),ot(this,e,_2,m2,nt,{})}}const Ad=g2;function v2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function y2(i){let e,n;const t=[{name:"settings-2"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[v2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function b2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M20 7h-9"}],["path",{d:"M14 17H5"}],["circle",{cx:"17",cy:"17",r:"3"}],["circle",{cx:"7",cy:"7",r:"3"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class $2 extends it{constructor(e){super(),ot(this,e,b2,y2,nt,{})}}const w2=$2;function x2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function k2(i){let e,n;const t=[{name:"thumbs-up"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[x2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function C2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M7 10v12"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class S2 extends it{constructor(e){super(),ot(this,e,C2,k2,nt,{})}}const Md=S2;function T2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function I2(i){let e,n;const t=[{name:"trash"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[T2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function E2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class P2 extends it{constructor(e){super(),ot(this,e,E2,I2,nt,{})}}const Ev=P2;function A2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function M2(i){let e,n;const t=[{name:"tree-pine"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[A2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function D2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z"}],["path",{d:"M12 22v-3"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class z2 extends it{constructor(e){super(),ot(this,e,D2,M2,nt,{})}}const L2=z2;function R2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function O2(i){let e,n;const t=[{name:"user-round-search"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[R2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function F2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M2 21a8 8 0 0 1 10.434-7.62"}],["circle",{cx:"18",cy:"18",r:"3"}],["path",{d:"m22 22-1.9-1.9"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class B2 extends it{constructor(e){super(),ot(this,e,F2,O2,nt,{})}}const N2=B2;function V2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function U2(i){let e,n;const t=[{name:"user"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[V2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function j2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class q2 extends it{constructor(e){super(),ot(this,e,j2,U2,nt,{})}}const G2=q2;function H2(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Z2(i){let e,n;const t=[{name:"users-round"},i[1],{iconNode:i[0]}];let r={$$slots:{default:[H2]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new es({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[t[0],a&2&&mn(s[1]),a&1&&{iconNode:s[0]}]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function W2(i,e,n){let{$$slots:t={},$$scope:r}=e;const s=[["path",{d:"M18 21a8 8 0 0 0-16 0"}],["circle",{cx:"10",cy:"8",r:"5"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3"}]];return i.$$set=a=>{n(1,e=Ce(Ce({},e),Mt(a))),"$$scope"in a&&n(3,r=a.$$scope)},e=Mt(e),[s,e,t,r]}class K2 extends it{constructor(e){super(),ot(this,e,W2,Z2,nt,{})}}const X2=K2,{name:Fc,selector:Hm}=G0("accordion"),J2={multiple:!1,disabled:!1,forceVisible:!1},Y2=i=>{const e={...J2,...i},n=Wc(Of(e,"value","onValueChange","defaultValue")),t=W0(["root"]),{disabled:r,forceVisible:s}=n,a=e.value??yr(e.defaultValue),o=Ff(a,e==null?void 0:e.onValueChange),l=(G,Q)=>Q===void 0?!1:typeof Q=="string"?Q===G:Q.includes(G),d=Gi(o,G=>Q=>l(Q,G)),_=js(Fc(),{returned:()=>({"data-melt-id":t.root})}),b=G=>typeof G=="string"?{value:G}:G,w=G=>typeof G=="number"?{level:G}:G,E=js(Fc("item"),{stores:o,returned:G=>Q=>{const{value:ge,disabled:le}=b(Q);return{"data-state":l(ge,G)?"open":"closed","data-disabled":Cl(le)}}}),L=js(Fc("trigger"),{stores:[o,r],returned:([G,Q])=>ge=>{const{value:le,disabled:re}=b(ge);return{disabled:Cl(Q||re),"aria-expanded":!!l(le,G),"aria-disabled":!!re,"data-disabled":Cl(re),"data-value":le,"data-state":l(le,G)?"open":"closed"}},action:G=>({destroy:Uc(Ro(G,"click",()=>{const ge=G.dataset.disabled==="true",le=G.dataset.value;ge||!le||q(le)}),Ro(G,"keydown",ge=>{if(![As.ARROW_DOWN,As.ARROW_UP,As.HOME,As.END].includes(ge.key))return;if(ge.preventDefault(),ge.key===As.SPACE||ge.key===As.ENTER){const Y=G.dataset.disabled==="true",ie=G.dataset.value;if(Y||!ie)return;q(ie);return}const le=ge.target,re=M$(t.root);if(!re||!jc(le))return;const se=Array.from(re.querySelectorAll(Hm("trigger"))).filter(Y=>jc(Y)?Y.dataset.disabled!=="true":!1);if(!se.length)return;const Z=se.indexOf(le);ge.key===As.ARROW_DOWN&&se[(Z+1)%se.length].focus(),ge.key===As.ARROW_UP&&se[(Z-1+se.length)%se.length].focus(),ge.key===As.HOME&&se[0].focus(),ge.key===As.END&&se[se.length-1].focus()}))})}),M=js(Fc("content"),{stores:[o,r,s],returned:([G,Q,ge])=>le=>{const{value:re}=b(le),me=l(re,G)||ge;return{"data-state":me?"open":"closed","data-disabled":Cl(Q),"data-value":re,hidden:me?void 0:!0,style:Zc({display:me?void 0:"none"})}},action:G=>{_i().then(()=>{const Q=Vm(),ge=Vm(),le=document.querySelector(`${Hm("trigger")}, [data-value="${G.dataset.value}"]`);jc(le)&&(G.id=Q,le.setAttribute("aria-controls",Q),le.id=ge)})}}),F=js(Fc("heading"),{returned:()=>G=>{const{level:Q}=w(G);return{role:"heading","aria-level":Q,"data-heading-level":Q}}});function q(G){o.update(Q=>Q===void 0?e.multiple?[G]:G:Array.isArray(Q)?Q.includes(G)?Q.filter(ge=>ge!==G):(Q.push(G),Q):Q===G?void 0:G)}return{ids:t,elements:{root:_,item:E,trigger:L,content:M,heading:F},states:{value:o},helpers:{isSelected:d},options:n}},Q2={src:"",delayMs:0,onLoadingStatusChange:void 0},ex=i=>{const e={...Q2,...i},n=Wc(Of(e,"loadingStatus","onLoadingStatusChange")),{src:t,delayMs:r}=n,s=e.loadingStatus??yr("loading"),a=Ff(s,e==null?void 0:e.onLoadingStatusChange);ga([t,r],([d,_])=>{if(H0){const b=new Image;b.src=d,b.onload=()=>{if(r!==void 0){const w=window.setTimeout(()=>{a.set("loaded")},_);return()=>window.clearTimeout(w)}else a.set("loaded")},b.onerror=()=>{a.set("error")}}});const o=js("avatar-image",{stores:[t,a],returned:([d,_])=>{const b=Zc({display:_==="loaded"?"block":"none"});return{src:d,style:b}}}),l=js("avatar-fallback",{stores:[a],returned:([d])=>({style:d==="loaded"?Zc({display:"none"}):void 0,hidden:d==="loaded"?!0:void 0})});return{elements:{image:o,fallback:l},states:{loadingStatus:a},options:n}},{name:_a}=G0("dialog"),tx={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},nx=["content","title","description"];function rx(i){const e={...tx,...i},n=Wc(Of(e,"ids")),{preventScroll:t,closeOnEscape:r,closeOnOutsideClick:s,role:a,portal:o,forceVisible:l,openFocus:d,closeFocus:_,onOutsideClick:b}=n,w=D$.writable(null),E=Wc({...W0(nx),...e.ids}),L=e.open??yr(e.defaultOpen),M=Ff(L,e==null?void 0:e.onOpenChange),F=Gi([M,l],([ie,be])=>ie||be);let q=ma;function G(ie){const be=ie.currentTarget,fe=ie.currentTarget;!jc(be)||!jc(fe)||(M.set(!0),w.set(fe))}function Q(){M.set(!1),Um({prop:_.get(),defaultEl:w.get()})}const ge=js(_a("trigger"),{stores:[M],returned:([ie])=>({"aria-haspopup":"dialog","aria-expanded":ie,type:"button"}),action:ie=>({destroy:Uc(Ro(ie,"click",fe=>{G(fe)}),Ro(ie,"keydown",fe=>{fe.key!==As.ENTER&&fe.key!==As.SPACE||(fe.preventDefault(),G(fe))}))})}),le=js(_a("overlay"),{stores:[F,M],returned:([ie,be])=>({hidden:ie?void 0:!0,tabindex:-1,style:Zc({display:ie?void 0:"none"}),"aria-hidden":!0,"data-state":be?"open":"closed"}),action:ie=>{let be=ma;if(r.get()){const fe=Nm(ie,{handler:()=>{Q()}});fe&&fe.destroy&&(be=fe.destroy)}return{destroy(){be()}}}}),re=js(_a("content"),{stores:[F,E.content,E.description,E.title,M],returned:([ie,be,fe,ke,je])=>({id:be,role:a.get(),"aria-describedby":fe,"aria-labelledby":ke,"aria-modal":ie?"true":void 0,"data-state":je?"open":"closed",tabindex:-1,hidden:ie?void 0:!0,style:Zc({display:ie?void 0:"none"})}),action:ie=>{let be=ma,fe=ma;const ke=Uc(ga([M,s,r],([je,Se,Qe])=>{if(!je)return;const Xe=F$({immediate:!1,escapeDeactivates:Qe,clickOutsideDeactivates:Se,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:ie});be=Xe.activate,fe=Xe.deactivate;const at=Xe.useFocusTrap(ie);return at&&at.destroy?at.destroy:Xe.deactivate}),ga([s,M],([je,Se])=>O$(ie,{open:Se,closeOnInteractOutside:je,onClose(){Q()},shouldCloseOnInteractOutside(Qe){var Xe;return(Xe=b.get())==null||Xe(Qe),!Qe.defaultPrevented}}).destroy),ga([r],([je])=>je?Nm(ie,{handler:Q}).destroy:ma),ga([F],([je])=>{_i().then(()=>{je?be():fe()})}));return{destroy:()=>{q(),ke()}}}}),me=js(_a("portalled"),{stores:o,returned:ie=>({"data-portal":z$(ie)}),action:ie=>{const be=ga([o],([fe])=>{if(fe===null)return ma;const ke=B$(ie,fe);return ke===null?ma:N$(ie,ke).destroy});return{destroy(){be()}}}}),se=js(_a("title"),{stores:[E.title],returned:([ie])=>({id:ie})}),Z=js(_a("description"),{stores:[E.description],returned:([ie])=>({id:ie})}),Y=js(_a("close"),{returned:()=>({type:"button"}),action:ie=>({destroy:Uc(Ro(ie,"click",()=>{Q()}),Ro(ie,"keydown",fe=>{fe.key!==As.SPACE&&fe.key!==As.ENTER||(fe.preventDefault(),Q())}))})});return ga([M,t],([ie,be])=>{if(H0){if(be&&ie&&(q=V$()),ie){const fe=document.getElementById(E.content.get());Um({prop:d.get(),defaultEl:fe})}return()=>{l.get()||q()}}}),{ids:E,elements:{content:re,trigger:ge,title:se,description:Z,overlay:le,close:Y,portalled:me},states:{open:M},options:n}}const sx={defaultPressed:!1,disabled:!1};function ix(i){const e={...sx,...i},n=Wc(Of(e,"pressed")),{disabled:t}=n,r=e.pressed??yr(e.defaultPressed),s=Ff(r,e==null?void 0:e.onPressedChange);function a(){t.get()||s.update(d=>!d)}return{elements:{root:js("toggle",{stores:[s,t],returned:([l,d])=>({"data-disabled":Cl(d),disabled:Cl(d),"data-state":l?"on":"off","aria-pressed":l,type:"button"}),action:l=>({destroy:Uc(Ro(l,"click",()=>{a()}),Ro(l,"keydown",_=>{_.key!==As.ENTER&&_.key!==As.SPACE||(_.preventDefault(),a())}))})})},states:{pressed:s},options:n}}function Gf(){return{NAME:"accordion",ITEM_NAME:"accordion-item",PARTS:["root","content","header","item","trigger"]}}function ox(i){const e=Y2(Bf(i)),{NAME:n,PARTS:t}=Gf(),r=eu(n,t),s={...e,getAttrs:r,updateOption:Nf(e.options)};return Ei(n,s),s}function Hf(){const{NAME:i}=Gf();return bi(i)}function ax(i){const{ITEM_NAME:e}=Gf();return Ei(e,{...i}),{...Hf(),props:i}}function Pv(){const{ITEM_NAME:i}=Gf();return bi(i)}function lx(){const i=Hf(),{value:e}=Pv();return{...i,props:e}}function cx(){const i=Hf(),{value:e,disabled:n}=Pv();return{...i,props:{value:e,disabled:n}}}const ux=i=>({builder:i&4}),Zm=i=>({builder:i[2]}),fx=i=>({builder:i&4}),Wm=i=>({builder:i[2]});function hx(i){let e,n,t,r;const s=i[11].default,a=$t(s,i,i[10],Zm);let o=[i[2],i[4]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[12](e),n=!0,t||(r=qn(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&1028)&&wt(a,s,d,d[10],n?kt(s,d[10],_,ux):xt(d[10]),Zm),Vt(e,l=Pt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[12](null),t=!1,r()}}}function dx(i){let e;const n=i[11].default,t=$t(n,i,i[10],Wm);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1028)&&wt(t,n,r,r[10],e?kt(n,r[10],s,fx):xt(r[10]),Wm)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function px(i){let e,n,t,r;const s=[dx,hx],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function mx(i,e,n){let t;const r=["multiple","value","onValueChange","disabled","asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{multiple:d=!1}=e,{value:_=void 0}=e,{onValueChange:b=void 0}=e,{disabled:w=!1}=e,{asChild:E=!1}=e,{el:L=void 0}=e;const{elements:{root:M},states:{value:F},updateOption:q,getAttrs:G}=ox({multiple:d,disabled:w,defaultValue:_,onValueChange:({next:le})=>Array.isArray(le)?((!Array.isArray(_)||!U$(_,le))&&(b==null||b(le),n(5,_=le)),le):(_!==le&&(b==null||b(le),n(5,_=le)),le)});sn(i,M,le=>n(9,a=le));const Q=G("root");function ge(le){jt[le?"unshift":"push"](()=>{L=le,n(0,L)})}return i.$$set=le=>{e=Ce(Ce({},e),Mt(le)),n(4,s=lt(e,r)),"multiple"in le&&n(6,d=le.multiple),"value"in le&&n(5,_=le.value),"onValueChange"in le&&n(7,b=le.onValueChange),"disabled"in le&&n(8,w=le.disabled),"asChild"in le&&n(1,E=le.asChild),"el"in le&&n(0,L=le.el),"$$scope"in le&&n(10,l=le.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&_!==void 0&&F.set(Array.isArray(_)?[..._]:_),i.$$.dirty&64&&q("multiple",d),i.$$.dirty&256&&q("disabled",w),i.$$.dirty&512&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,Q)},[L,E,t,M,s,_,d,b,w,a,l,o,ge]}class _x extends it{constructor(e){super(),ot(this,e,mx,px,nt,{multiple:6,value:5,onValueChange:7,disabled:8,asChild:1,el:0})}}const gx=i=>({builder:i&4}),Km=i=>({builder:i[2]}),vx=i=>({builder:i&4}),Xm=i=>({builder:i[2]});function yx(i){let e,n,t,r;const s=i[9].default,a=$t(s,i,i[8],Km);let o=[i[2],i[4]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[10](e),n=!0,t||(r=qn(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&260)&&wt(a,s,d,d[8],n?kt(s,d[8],_,gx):xt(d[8]),Km),Vt(e,l=Pt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[10](null),t=!1,r()}}}function bx(i){let e;const n=i[9].default,t=$t(n,i,i[8],Xm);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&260)&&wt(t,n,r,r[8],e?kt(n,r[8],s,vx):xt(r[8]),Xm)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function $x(i){let e,n,t,r;const s=[bx,yx],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function wx(i,e,n){let t;const r=["value","disabled","asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{value:d}=e,{disabled:_=void 0}=e,{asChild:b=!1}=e,{el:w=void 0}=e;const{elements:{item:E},props:L,getAttrs:M}=ax({value:d,disabled:_});sn(i,E,G=>n(7,a=G));const F=M("item");function q(G){jt[G?"unshift":"push"](()=>{w=G,n(0,w)})}return i.$$set=G=>{e=Ce(Ce({},e),Mt(G)),n(4,s=lt(e,r)),"value"in G&&n(5,d=G.value),"disabled"in G&&n(6,_=G.disabled),"asChild"in G&&n(1,b=G.asChild),"el"in G&&n(0,w=G.el),"$$scope"in G&&n(8,l=G.$$scope)},i.$$.update=()=>{i.$$.dirty&128&&n(2,t=a(L)),i.$$.dirty&4&&Object.assign(t,F)},[w,b,t,E,s,d,_,a,l,o,q]}let xx=class extends it{constructor(e){super(),ot(this,e,wx,$x,nt,{value:5,disabled:6,asChild:1,el:0})}};const kx=i=>({builder:i&4}),Jm=i=>({builder:i[2]}),Cx=i=>({builder:i&4}),Ym=i=>({builder:i[2]});function Sx(i){let e,n,t,r;const s=i[8].default,a=$t(s,i,i[7],Jm);let o=[i[2],i[4]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[9](e),n=!0,t||(r=qn(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&wt(a,s,d,d[7],n?kt(s,d[7],_,kx):xt(d[7]),Jm),Vt(e,l=Pt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,r()}}}function Tx(i){let e;const n=i[8].default,t=$t(n,i,i[7],Ym);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&wt(t,n,r,r[7],e?kt(n,r[7],s,Cx):xt(r[7]),Ym)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Ix(i){let e,n,t,r;const s=[Tx,Sx],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function Ex(i,e,n){let t;const r=["level","asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{level:d=3}=e,{asChild:_=!1}=e,{el:b=void 0}=e;const{elements:{heading:w},getAttrs:E}=Hf();sn(i,w,F=>n(6,a=F));const L=E("header");function M(F){jt[F?"unshift":"push"](()=>{b=F,n(0,b)})}return i.$$set=F=>{e=Ce(Ce({},e),Mt(F)),n(4,s=lt(e,r)),"level"in F&&n(5,d=F.level),"asChild"in F&&n(1,_=F.asChild),"el"in F&&n(0,b=F.el),"$$scope"in F&&n(7,l=F.$$scope)},i.$$.update=()=>{i.$$.dirty&96&&n(2,t=a(d)),i.$$.dirty&4&&Object.assign(t,L)},[b,_,t,w,s,d,a,l,o,M]}class Px extends it{constructor(e){super(),ot(this,e,Ex,Ix,nt,{level:5,asChild:1,el:0})}}const Ax=i=>({builder:i&4}),Qm=i=>({builder:i[2]}),Mx=i=>({builder:i&4}),e_=i=>({builder:i[2]});function Dx(i){let e,n,t,r;const s=i[8].default,a=$t(s,i,i[7],Qm);let o=[i[2],{type:"button"},i[5]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("button"),a&&a.c(),this.h()},l(d){e=ae(d,"BUTTON",{type:!0});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[qn(i[2].action(e)),bt(e,"m-keydown",i[4]),bt(e,"m-click",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&wt(a,s,d,d[7],n?kt(s,d[7],_,Ax):xt(d[7]),Qm),Vt(e,l=Pt(o,[_&4&&d[2],{type:"button"},_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,kr(r)}}}function zx(i){let e;const n=i[8].default,t=$t(n,i,i[7],e_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&wt(t,n,r,r[7],e?kt(n,r[7],s,Mx):xt(r[7]),e_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Lx(i){let e,n,t,r;const s=[zx,Dx],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function Rx(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{trigger:b},props:w,getAttrs:E}=cx();sn(i,b,q=>n(6,a=q));const L=tu(),M=E("trigger");function F(q){jt[q?"unshift":"push"](()=>{_=q,n(0,_)})}return i.$$set=q=>{e=Ce(Ce({},e),Mt(q)),n(5,s=lt(e,r)),"asChild"in q&&n(1,d=q.asChild),"el"in q&&n(0,_=q.el),"$$scope"in q&&n(7,l=q.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a(w)),i.$$.dirty&4&&Object.assign(t,M)},[_,d,t,b,L,s,a,l,o,F]}let Ox=class extends it{constructor(e){super(),ot(this,e,Rx,Lx,nt,{asChild:1,el:0})}};const Fx=i=>({builder:i&256}),t_=i=>({builder:i[8]}),Bx=i=>({builder:i&256}),n_=i=>({builder:i[8]}),Nx=i=>({builder:i&256}),r_=i=>({builder:i[8]}),Vx=i=>({builder:i&256}),s_=i=>({builder:i[8]}),Ux=i=>({builder:i&256}),i_=i=>({builder:i[8]}),jx=i=>({builder:i&256}),o_=i=>({builder:i[8]});function qx(i){let e,n,t,r;const s=i[16].default,a=$t(s,i,i[15],t_);let o=[i[8],i[13]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[21](e),n=!0,t||(r=qn(i[8].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&33024)&&wt(a,s,d,d[15],n?kt(s,d[15],_,Fx):xt(d[15]),t_),Vt(e,l=Pt(o,[_&256&&d[8],_&8192&&d[13]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[21](null),t=!1,r()}}}function Gx(i){let e,n,t,r,s;const a=i[16].default,o=$t(a,i,i[15],n_);let l=[i[8],i[13]],d={};for(let _=0;_<l.length;_+=1)d=Ce(d,l[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(S),this.h()},h(){Vt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[20](e),t=!0,r||(s=qn(i[8].action(e)),r=!0)},p(_,b){i=_,o&&o.p&&(!t||b&33024)&&wt(o,a,i,i[15],t?kt(a,i[15],b,Bx):xt(i[15]),n_),Vt(e,d=Pt(l,[b&256&&i[8],b&8192&&i[13]]))},i(_){t||(T(o,_),n&&n.end(1),t=!0)},o(_){I(o,_),_&&(n=Pl(e,i[5],i[6])),t=!1},d(_){_&&S(e),o&&o.d(_),i[20](null),_&&n&&n.end(),r=!1,s()}}}function Hx(i){let e,n,t,r,s;const a=i[16].default,o=$t(a,i,i[15],r_);let l=[i[8],i[13]],d={};for(let _=0;_<l.length;_+=1)d=Ce(d,l[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(S),this.h()},h(){Vt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[19](e),t=!0,r||(s=qn(i[8].action(e)),r=!0)},p(_,b){i=_,o&&o.p&&(!t||b&33024)&&wt(o,a,i,i[15],t?kt(a,i[15],b,Nx):xt(i[15]),r_),Vt(e,d=Pt(l,[b&256&&i[8],b&8192&&i[13]]))},i(_){t||(T(o,_),_&&(n||Hi(()=>{n=Al(e,i[3],i[4]),n.start()})),t=!0)},o(_){I(o,_),t=!1},d(_){_&&S(e),o&&o.d(_),i[19](null),r=!1,s()}}}function Zx(i){let e,n,t,r,s,a;const o=i[16].default,l=$t(o,i,i[15],s_);let d=[i[8],i[13]],_={};for(let b=0;b<d.length;b+=1)_=Ce(_,d[b]);return{c(){e=oe("div"),l&&l.c(),this.h()},l(b){e=ae(b,"DIV",{});var w=$e(e);l&&l.l(w),w.forEach(S),this.h()},h(){Vt(e,_)},m(b,w){R(b,e,w),l&&l.m(e,null),i[18](e),r=!0,s||(a=qn(i[8].action(e)),s=!0)},p(b,w){i=b,l&&l.p&&(!r||w&33024)&&wt(l,o,i,i[15],r?kt(o,i[15],w,Vx):xt(i[15]),s_),Vt(e,_=Pt(d,[w&256&&i[8],w&8192&&i[13]]))},i(b){r||(T(l,b),b&&Hi(()=>{r&&(t&&t.end(1),n=Al(e,i[3],i[4]),n.start())}),r=!0)},o(b){I(l,b),n&&n.invalidate(),b&&(t=Pl(e,i[5],i[6])),r=!1},d(b){b&&S(e),l&&l.d(b),i[18](null),b&&t&&t.end(),s=!1,a()}}}function Wx(i){let e,n,t,r,s;const a=i[16].default,o=$t(a,i,i[15],i_);let l=[i[8],i[13]],d={};for(let _=0;_<l.length;_+=1)d=Ce(d,l[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(S),this.h()},h(){Vt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[17](e),t=!0,r||(s=qn(i[8].action(e)),r=!0)},p(_,b){i=_,o&&o.p&&(!t||b&33024)&&wt(o,a,i,i[15],t?kt(a,i[15],b,Ux):xt(i[15]),i_),Vt(e,d=Pt(l,[b&256&&i[8],b&8192&&i[13]]))},i(_){t||(T(o,_),_&&Hi(()=>{t&&(n||(n=Fo(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(_){I(o,_),_&&(n||(n=Fo(e,i[1],i[2],!1)),n.run(0)),t=!1},d(_){_&&S(e),o&&o.d(_),i[17](null),_&&n&&n.end(),r=!1,s()}}}function Kx(i){let e;const n=i[16].default,t=$t(n,i,i[15],o_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&33024)&&wt(t,n,r,r[15],e?kt(n,r[15],s,jx):xt(r[15]),o_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Xx(i){let e,n,t,r,s,a,o,l,d,_;const b=[Kx,Wx,Zx,Hx,Gx,qx],w=[];function E(L,M){return M&640&&(e=null),M&514&&(n=null),M&552&&(t=null),M&520&&(r=null),M&544&&(s=null),M&512&&(a=null),e==null&&(e=!!(L[7]&&L[9](L[12]))),e?0:(n==null&&(n=!!(L[1]&&L[9](L[12]))),n?1:(t==null&&(t=!!(L[3]&&L[5]&&L[9](L[12]))),t?2:(r==null&&(r=!!(L[3]&&L[9](L[12]))),r?3:(s==null&&(s=!!(L[5]&&L[9](L[12]))),s?4:(a==null&&(a=!!L[9](L[12])),a?5:-1)))))}return~(o=E(i,-1))&&(l=w[o]=b[o](i)),{c(){l&&l.c(),d=Fe()},l(L){l&&l.l(L),d=Fe()},m(L,M){~o&&w[o].m(L,M),R(L,d,M),_=!0},p(L,[M]){let F=o;o=E(L,M),o===F?~o&&w[o].p(L,M):(l&&(ht(),I(w[F],1,1,()=>{w[F]=null}),dt()),~o?(l=w[o],l?l.p(L,M):(l=w[o]=b[o](L),l.c()),T(l,1),l.m(d.parentNode,d)):l=null)},i(L){_||(T(l),_=!0)},o(L){I(l),_=!1},d(L){L&&S(d),~o&&w[o].d(L)}}}function Jx(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let s=lt(e,r),a,o,{$$slots:l={},$$scope:d}=e,{transition:_=void 0}=e,{transitionConfig:b=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:E=void 0}=e,{outTransition:L=void 0}=e,{outTransitionConfig:M=void 0}=e,{asChild:F=!1}=e,{el:q=void 0}=e;const{elements:{content:G},helpers:{isSelected:Q},props:ge,getAttrs:le}=lx();sn(i,G,be=>n(14,a=be)),sn(i,Q,be=>n(9,o=be));const re=le("content");function me(be){jt[be?"unshift":"push"](()=>{q=be,n(0,q)})}function se(be){jt[be?"unshift":"push"](()=>{q=be,n(0,q)})}function Z(be){jt[be?"unshift":"push"](()=>{q=be,n(0,q)})}function Y(be){jt[be?"unshift":"push"](()=>{q=be,n(0,q)})}function ie(be){jt[be?"unshift":"push"](()=>{q=be,n(0,q)})}return i.$$set=be=>{e=Ce(Ce({},e),Mt(be)),n(13,s=lt(e,r)),"transition"in be&&n(1,_=be.transition),"transitionConfig"in be&&n(2,b=be.transitionConfig),"inTransition"in be&&n(3,w=be.inTransition),"inTransitionConfig"in be&&n(4,E=be.inTransitionConfig),"outTransition"in be&&n(5,L=be.outTransition),"outTransitionConfig"in be&&n(6,M=be.outTransitionConfig),"asChild"in be&&n(7,F=be.asChild),"el"in be&&n(0,q=be.el),"$$scope"in be&&n(15,d=be.$$scope)},i.$$.update=()=>{i.$$.dirty&16384&&n(8,t=a(ge)),i.$$.dirty&256&&Object.assign(t,re)},[q,_,b,w,E,L,M,F,t,o,G,Q,ge,s,a,d,l,me,se,Z,Y,ie]}let Yx=class extends it{constructor(e){super(),ot(this,e,Jx,Xx,nt,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};function Dd(){return{NAME:"avatar",PARTS:["root","image","fallback"]}}function Qx(i){const{NAME:e,PARTS:n}=Dd(),t=eu(e,n),r={...ex(Bf(i)),getAttrs:t};return Ei(e,r),{...r,updateOption:Nf(r.options)}}function ek(i=""){const{NAME:e}=Dd(),n=bi(e);return i?n.options.src.set(i):n.options.src.set(""),n}function tk(){const{NAME:i}=Dd();return bi(i)}const nk=i=>({}),a_=i=>({attrs:i[2]}),rk=i=>({}),l_=i=>({attrs:i[2]});function sk(i){let e,n;const t=i[8].default,r=$t(t,i,i[7],a_);let s=[i[3],i[2]],a={};for(let o=0;o<s.length;o+=1)a=Ce(a,s[o]);return{c(){e=oe("div"),r&&r.c(),this.h()},l(o){e=ae(o,"DIV",{});var l=$e(e);r&&r.l(l),l.forEach(S),this.h()},h(){Vt(e,a)},m(o,l){R(o,e,l),r&&r.m(e,null),i[9](e),n=!0},p(o,l){r&&r.p&&(!n||l&128)&&wt(r,t,o,o[7],n?kt(t,o[7],l,nk):xt(o[7]),a_),Vt(e,a=Pt(s,[l&8&&o[3],o[2]]))},i(o){n||(T(r,o),n=!0)},o(o){I(r,o),n=!1},d(o){o&&S(e),r&&r.d(o),i[9](null)}}}function ik(i){let e;const n=i[8].default,t=$t(n,i,i[7],l_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&wt(t,n,r,r[7],e?kt(n,r[7],s,rk):xt(r[7]),l_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function ok(i){let e,n,t,r;const s=[ik,sk],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function ak(i,e,n){const t=["delayMs","loadingStatus","onLoadingStatusChange","asChild","el"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{delayMs:o=void 0}=e,{loadingStatus:l=void 0}=e,{onLoadingStatusChange:d=void 0}=e,{asChild:_=!1}=e,{el:b=void 0}=e;const{states:{loadingStatus:w},updateOption:E,getAttrs:L}=Qx({src:"",delayMs:o,onLoadingStatusChange:({next:q})=>(n(4,l=q),d==null||d(q),q)}),M=L("root");function F(q){jt[q?"unshift":"push"](()=>{b=q,n(0,b)})}return i.$$set=q=>{e=Ce(Ce({},e),Mt(q)),n(3,r=lt(e,t)),"delayMs"in q&&n(5,o=q.delayMs),"loadingStatus"in q&&n(4,l=q.loadingStatus),"onLoadingStatusChange"in q&&n(6,d=q.onLoadingStatusChange),"asChild"in q&&n(1,_=q.asChild),"el"in q&&n(0,b=q.el),"$$scope"in q&&n(7,a=q.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&l!==void 0&&w.set(l),i.$$.dirty&32&&E("delayMs",o)},[b,_,M,r,l,o,d,a,s,F]}let lk=class extends it{constructor(e){super(),ot(this,e,ak,ok,nt,{delayMs:5,loadingStatus:4,onLoadingStatusChange:6,asChild:1,el:0})}};const ck=i=>({builder:i&8}),c_=i=>({builder:i[3]});function uk(i){let e,n,t,r=[i[3],{alt:i[1]},i[5]],s={};for(let a=0;a<r.length;a+=1)s=Ce(s,r[a]);return{c(){e=oe("img"),this.h()},l(a){e=ae(a,"IMG",{alt:!0}),this.h()},h(){Vt(e,s)},m(a,o){R(a,e,o),i[10](e),n||(t=qn(i[3].action(e)),n=!0)},p(a,o){Vt(e,s=Pt(r,[o&8&&a[3],o&2&&{alt:a[1]},o&32&&a[5]]))},i:gt,o:gt,d(a){a&&S(e),i[10](null),n=!1,t()}}}function fk(i){let e;const n=i[9].default,t=$t(n,i,i[8],c_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&wt(t,n,r,r[8],e?kt(n,r[8],s,ck):xt(r[8]),c_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function hk(i){let e,n,t,r;const s=[fk,uk],a=[];function o(l,d){return l[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function dk(i,e,n){let t,r;const s=["src","alt","asChild","el"];let a=lt(e,s),o,l=gt,d=()=>(l(),l=I$(t,G=>n(7,o=G)),t);i.$$.on_destroy.push(()=>l());let{$$slots:_={},$$scope:b}=e,{src:w=void 0}=e,{alt:E=void 0}=e,{asChild:L=!1}=e,{el:M=void 0}=e;const F={"data-bits-avatar-image":""};function q(G){jt[G?"unshift":"push"](()=>{M=G,n(0,M)})}return i.$$set=G=>{e=Ce(Ce({},e),Mt(G)),n(5,a=lt(e,s)),"src"in G&&n(6,w=G.src),"alt"in G&&n(1,E=G.alt),"asChild"in G&&n(2,L=G.asChild),"el"in G&&n(0,M=G.el),"$$scope"in G&&n(8,b=G.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&d(n(4,t=ek(w).elements.image)),i.$$.dirty&128&&n(3,r=o),i.$$.dirty&8&&Object.assign(r,F)},[M,E,L,r,t,a,w,o,b,_,q]}let pk=class extends it{constructor(e){super(),ot(this,e,dk,hk,nt,{src:6,alt:1,asChild:2,el:0})}};const mk=i=>({builder:i&4}),u_=i=>({builder:i[2]}),_k=i=>({builder:i&4}),f_=i=>({builder:i[2]});function gk(i){let e,n,t,r;const s=i[7].default,a=$t(s,i,i[6],u_);let o=[i[2],i[4]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("span"),a&&a.c(),this.h()},l(d){e=ae(d,"SPAN",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[8](e),n=!0,t||(r=qn(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&68)&&wt(a,s,d,d[6],n?kt(s,d[6],_,mk):xt(d[6]),u_),Vt(e,l=Pt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[8](null),t=!1,r()}}}function vk(i){let e;const n=i[7].default,t=$t(n,i,i[6],f_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&wt(t,n,r,r[6],e?kt(n,r[6],s,_k):xt(r[6]),f_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function yk(i){let e,n,t,r;const s=[vk,gk],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function bk(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{fallback:b},getAttrs:w}=tk();sn(i,b,M=>n(5,a=M));const E=w("fallback");function L(M){jt[M?"unshift":"push"](()=>{_=M,n(0,_)})}return i.$$set=M=>{e=Ce(Ce({},e),Mt(M)),n(4,s=lt(e,r)),"asChild"in M&&n(1,d=M.asChild),"el"in M&&n(0,_=M.el),"$$scope"in M&&n(6,l=M.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,E)},[_,d,t,b,s,a,l,o,L]}let $k=class extends it{constructor(e){super(),ot(this,e,bk,yk,nt,{asChild:1,el:0})}};const wk=i=>({builder:i&4}),h_=i=>({builder:i[2]}),xk=i=>({builder:i&4}),d_=i=>({builder:i[2]});function kk(i){let e,n,t,r;const s=i[7].default,a=$t(s,i,i[6],h_);let o=[i[2],i[4]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[8](e),n=!0,t||(r=qn(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&68)&&wt(a,s,d,d[6],n?kt(s,d[6],_,wk):xt(d[6]),h_),Vt(e,l=Pt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[8](null),t=!1,r()}}}function Ck(i){let e;const n=i[7].default,t=$t(n,i,i[6],d_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&wt(t,n,r,r[6],e?kt(n,r[6],s,xk):xt(r[6]),d_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Sk(i){let e,n,t,r;const s=[Ck,kk],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function Tk(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{group:b,id:w,getAttrs:E}=j$();sn(i,b,F=>n(5,a=F));const L=E("group");function M(F){jt[F?"unshift":"push"](()=>{_=F,n(0,_)})}return i.$$set=F=>{e=Ce(Ce({},e),Mt(F)),n(4,s=lt(e,r)),"asChild"in F&&n(1,d=F.asChild),"el"in F&&n(0,_=F.el),"$$scope"in F&&n(6,l=F.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=a(w)),i.$$.dirty&4&&Object.assign(t,L)},[_,d,t,b,s,a,l,o,M]}class Ik extends it{constructor(e){super(),ot(this,e,Tk,Sk,nt,{asChild:1,el:0})}}function Av(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function Ek(i){const{NAME:e,PARTS:n}=Av(),t=eu(e,n),r={...rx({...Bf(i),role:"dialog",forceVisible:!0}),getAttrs:t};return Ei(e,r),{...r,updateOption:Nf(r.options)}}function ka(){const{NAME:i}=Av();return bi(i)}const Pk=i=>({ids:i&1}),p_=i=>({ids:i[0]});function Ak(i){let e;const n=i[12].default,t=$t(n,i,i[11],p_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,[s]){t&&t.p&&(!e||s&2049)&&wt(t,n,r,r[11],e?kt(n,r[11],s,Pk):xt(r[11]),p_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Mk(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{preventScroll:a=void 0}=e,{closeOnEscape:o=void 0}=e,{closeOnOutsideClick:l=void 0}=e,{portal:d=void 0}=e,{open:_=void 0}=e,{onOpenChange:b=void 0}=e,{openFocus:w=void 0}=e,{closeFocus:E=void 0}=e,{onOutsideClick:L=void 0}=e;const{states:{open:M},updateOption:F,ids:q}=Ek({closeOnEscape:o,preventScroll:a,closeOnOutsideClick:l,portal:d,forceVisible:!0,defaultOpen:_,openFocus:w,closeFocus:E,onOutsideClick:L,onOpenChange:({next:Q})=>(_!==Q&&(b==null||b(Q),n(2,_=Q)),Q)}),G=Gi([q.content,q.description,q.title],([Q,ge,le])=>({content:Q,description:ge,title:le}));return sn(i,G,Q=>n(0,t=Q)),i.$$set=Q=>{"preventScroll"in Q&&n(3,a=Q.preventScroll),"closeOnEscape"in Q&&n(4,o=Q.closeOnEscape),"closeOnOutsideClick"in Q&&n(5,l=Q.closeOnOutsideClick),"portal"in Q&&n(6,d=Q.portal),"open"in Q&&n(2,_=Q.open),"onOpenChange"in Q&&n(7,b=Q.onOpenChange),"openFocus"in Q&&n(8,w=Q.openFocus),"closeFocus"in Q&&n(9,E=Q.closeFocus),"onOutsideClick"in Q&&n(10,L=Q.onOutsideClick),"$$scope"in Q&&n(11,s=Q.$$scope)},i.$$.update=()=>{i.$$.dirty&4&&_!==void 0&&M.set(_),i.$$.dirty&8&&F("preventScroll",a),i.$$.dirty&16&&F("closeOnEscape",o),i.$$.dirty&32&&F("closeOnOutsideClick",l),i.$$.dirty&64&&F("portal",d),i.$$.dirty&256&&F("openFocus",w),i.$$.dirty&512&&F("closeFocus",E),i.$$.dirty&1024&&F("onOutsideClick",L)},[t,G,_,a,o,l,d,b,w,E,L,s,r]}class Dk extends it{constructor(e){super(),ot(this,e,Mk,Ak,nt,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}const zk=i=>({builder:i&8}),m_=i=>({builder:i[3]}),Lk=i=>({builder:i&8}),__=i=>({builder:i[3]});function Rk(i){let e=i[1],n,t,r=i[1]&&ad(i);return{c(){r&&r.c(),n=Fe()},l(s){r&&r.l(s),n=Fe()},m(s,a){r&&r.m(s,a),R(s,n,a),t=!0},p(s,a){s[1]?e?nt(e,s[1])?(r.d(1),r=ad(s),e=s[1],r.c(),r.m(n.parentNode,n)):r.p(s,a):(r=ad(s),e=s[1],r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null,e=s[1])},i(s){t||(T(r,s),t=!0)},o(s){I(r,s),t=!1},d(s){s&&S(n),r&&r.d(s)}}}function Ok(i){let e;const n=i[9].default,t=$t(n,i,i[8],__);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&264)&&wt(t,n,r,r[8],e?kt(n,r[8],s,Lk):xt(r[8]),__)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function ad(i){let e,n,t,r;const s=i[9].default,a=$t(s,i,i[8],m_);let o=[i[3],i[5]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe(i[1]),a&&a.c(),this.h()},l(d){e=ae(d,(i[1]||"null").toUpperCase(),{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Sf(i[1])(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[10](e),n=!0,t||(r=qn(i[3].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&264)&&wt(a,s,d,d[8],n?kt(s,d[8],_,zk):xt(d[8]),m_),Sf(d[1])(e,l=Pt(o,[_&8&&d[3],_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[10](null),t=!1,r()}}}function Fk(i){let e,n,t,r;const s=[Ok,Rk],a=[];function o(l,d){return l[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function Bk(i,e,n){let t;const r=["level","asChild","id","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{level:d="h2"}=e,{asChild:_=!1}=e,{id:b=void 0}=e,{el:w=void 0}=e;const{elements:{title:E},ids:L,getAttrs:M}=ka();sn(i,E,G=>n(7,a=G));const F=M("title");function q(G){jt[G?"unshift":"push"](()=>{w=G,n(0,w)})}return i.$$set=G=>{e=Ce(Ce({},e),Mt(G)),n(5,s=lt(e,r)),"level"in G&&n(1,d=G.level),"asChild"in G&&n(2,_=G.asChild),"id"in G&&n(6,b=G.id),"el"in G&&n(0,w=G.el),"$$scope"in G&&n(8,l=G.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&b&&L.title.set(b),i.$$.dirty&128&&n(3,t=a),i.$$.dirty&8&&Object.assign(t,F)},[w,d,_,t,E,s,b,a,l,o,q]}let Nk=class extends it{constructor(e){super(),ot(this,e,Bk,Fk,nt,{level:1,asChild:2,id:6,el:0})}};const Vk=i=>({builder:i&4}),g_=i=>({builder:i[2]}),Uk=i=>({builder:i&4}),v_=i=>({builder:i[2]});function jk(i){let e,n,t,r;const s=i[8].default,a=$t(s,i,i[7],g_);let o=[i[2],{type:"button"},i[5]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("button"),a&&a.c(),this.h()},l(d){e=ae(d,"BUTTON",{type:!0});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[qn(i[2].action(e)),bt(e,"m-click",i[4]),bt(e,"m-keydown",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&wt(a,s,d,d[7],n?kt(s,d[7],_,Vk):xt(d[7]),g_),Vt(e,l=Pt(o,[_&4&&d[2],{type:"button"},_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,kr(r)}}}function qk(i){let e;const n=i[8].default,t=$t(n,i,i[7],v_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&wt(t,n,r,r[7],e?kt(n,r[7],s,Uk):xt(r[7]),v_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Gk(i){let e,n,t,r;const s=[qk,jk],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function Hk(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{close:b},getAttrs:w}=ka();sn(i,b,F=>n(6,a=F));const E=tu(),L=w("close");function M(F){jt[F?"unshift":"push"](()=>{_=F,n(0,_)})}return i.$$set=F=>{e=Ce(Ce({},e),Mt(F)),n(5,s=lt(e,r)),"asChild"in F&&n(1,d=F.asChild),"el"in F&&n(0,_=F.el),"$$scope"in F&&n(7,l=F.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,L)},[_,d,t,b,E,s,a,l,o,M]}class Zk extends it{constructor(e){super(),ot(this,e,Hk,Gk,nt,{asChild:1,el:0})}}const Wk=i=>({builder:i&4}),y_=i=>({builder:i[2]}),Kk=i=>({builder:i&4}),b_=i=>({builder:i[2]});function Xk(i){let e,n,t,r;const s=i[7].default,a=$t(s,i,i[6],y_);let o=[i[2],i[4]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[8](e),n=!0,t||(r=qn(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&68)&&wt(a,s,d,d[6],n?kt(s,d[6],_,Wk):xt(d[6]),y_),Vt(e,l=Pt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[8](null),t=!1,r()}}}function Jk(i){let e;const n=i[7].default,t=$t(n,i,i[6],b_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&68)&&wt(t,n,r,r[6],e?kt(n,r[6],s,Kk):xt(r[6]),b_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Yk(i){let e,n,t,r;const s=[Jk,Xk],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function Qk(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{portalled:b},getAttrs:w}=ka();sn(i,b,M=>n(5,a=M));const E=w("portal");function L(M){jt[M?"unshift":"push"](()=>{_=M,n(0,_)})}return i.$$set=M=>{e=Ce(Ce({},e),Mt(M)),n(4,s=lt(e,r)),"asChild"in M&&n(1,d=M.asChild),"el"in M&&n(0,_=M.el),"$$scope"in M&&n(6,l=M.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,E)},[_,d,t,b,s,a,l,o,L]}let eC=class extends it{constructor(e){super(),ot(this,e,Qk,Yk,nt,{asChild:1,el:0})}};const tC=i=>({builder:i[0]&256}),$_=i=>({builder:i[8]}),nC=i=>({builder:i[0]&256}),w_=i=>({builder:i[8]}),rC=i=>({builder:i[0]&256}),x_=i=>({builder:i[8]}),sC=i=>({builder:i[0]&256}),k_=i=>({builder:i[8]}),iC=i=>({builder:i[0]&256}),C_=i=>({builder:i[8]}),oC=i=>({builder:i[0]&256}),S_=i=>({builder:i[8]});function aC(i){let e,n,t,r;const s=i[16].default,a=$t(s,i,i[15],$_);let o=[i[8],i[12]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[56](e),n=!0,t||(r=[qn(i[8].action(e)),bt(e,"pointerdown",i[45]),bt(e,"pointermove",i[46]),bt(e,"pointerup",i[47]),bt(e,"touchend",i[48]),bt(e,"touchstart",i[49]),bt(e,"touchcancel",i[50]),bt(e,"touchmove",i[51])],t=!0)},p(d,_){a&&a.p&&(!n||_[0]&33024)&&wt(a,s,d,d[15],n?kt(s,d[15],_,tC):xt(d[15]),$_),Vt(e,l=Pt(o,[_[0]&256&&d[8],_[0]&4096&&d[12]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[56](null),t=!1,kr(r)}}}function lC(i){let e,n,t,r,s;const a=i[16].default,o=$t(a,i,i[15],w_);let l=[i[8],i[12]],d={};for(let _=0;_<l.length;_+=1)d=Ce(d,l[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(S),this.h()},h(){Vt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[55](e),t=!0,r||(s=[qn(i[8].action(e)),bt(e,"pointerdown",i[38]),bt(e,"pointermove",i[39]),bt(e,"pointerup",i[40]),bt(e,"touchend",i[41]),bt(e,"touchstart",i[42]),bt(e,"touchcancel",i[43]),bt(e,"touchmove",i[44])],r=!0)},p(_,b){i=_,o&&o.p&&(!t||b[0]&33024)&&wt(o,a,i,i[15],t?kt(a,i[15],b,nC):xt(i[15]),w_),Vt(e,d=Pt(l,[b[0]&256&&i[8],b[0]&4096&&i[12]]))},i(_){t||(T(o,_),n&&n.end(1),t=!0)},o(_){I(o,_),_&&(n=Pl(e,i[5],i[6])),t=!1},d(_){_&&S(e),o&&o.d(_),i[55](null),_&&n&&n.end(),r=!1,kr(s)}}}function cC(i){let e,n,t,r,s;const a=i[16].default,o=$t(a,i,i[15],x_);let l=[i[8],i[12]],d={};for(let _=0;_<l.length;_+=1)d=Ce(d,l[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(S),this.h()},h(){Vt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[54](e),t=!0,r||(s=[qn(i[8].action(e)),bt(e,"pointerdown",i[31]),bt(e,"pointermove",i[32]),bt(e,"pointerup",i[33]),bt(e,"touchend",i[34]),bt(e,"touchstart",i[35]),bt(e,"touchcancel",i[36]),bt(e,"touchmove",i[37])],r=!0)},p(_,b){i=_,o&&o.p&&(!t||b[0]&33024)&&wt(o,a,i,i[15],t?kt(a,i[15],b,rC):xt(i[15]),x_),Vt(e,d=Pt(l,[b[0]&256&&i[8],b[0]&4096&&i[12]]))},i(_){t||(T(o,_),_&&(n||Hi(()=>{n=Al(e,i[3],i[4]),n.start()})),t=!0)},o(_){I(o,_),t=!1},d(_){_&&S(e),o&&o.d(_),i[54](null),r=!1,kr(s)}}}function uC(i){let e,n,t,r,s,a;const o=i[16].default,l=$t(o,i,i[15],k_);let d=[i[8],i[12]],_={};for(let b=0;b<d.length;b+=1)_=Ce(_,d[b]);return{c(){e=oe("div"),l&&l.c(),this.h()},l(b){e=ae(b,"DIV",{});var w=$e(e);l&&l.l(w),w.forEach(S),this.h()},h(){Vt(e,_)},m(b,w){R(b,e,w),l&&l.m(e,null),i[53](e),r=!0,s||(a=[qn(i[8].action(e)),bt(e,"pointerdown",i[24]),bt(e,"pointermove",i[25]),bt(e,"pointerup",i[26]),bt(e,"touchend",i[27]),bt(e,"touchstart",i[28]),bt(e,"touchcancel",i[29]),bt(e,"touchmove",i[30])],s=!0)},p(b,w){i=b,l&&l.p&&(!r||w[0]&33024)&&wt(l,o,i,i[15],r?kt(o,i[15],w,sC):xt(i[15]),k_),Vt(e,_=Pt(d,[w[0]&256&&i[8],w[0]&4096&&i[12]]))},i(b){r||(T(l,b),b&&Hi(()=>{r&&(t&&t.end(1),n=Al(e,i[3],i[4]),n.start())}),r=!0)},o(b){I(l,b),n&&n.invalidate(),b&&(t=Pl(e,i[5],i[6])),r=!1},d(b){b&&S(e),l&&l.d(b),i[53](null),b&&t&&t.end(),s=!1,kr(a)}}}function fC(i){let e,n,t,r,s;const a=i[16].default,o=$t(a,i,i[15],C_);let l=[i[8],i[12]],d={};for(let _=0;_<l.length;_+=1)d=Ce(d,l[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{});var b=$e(e);o&&o.l(b),b.forEach(S),this.h()},h(){Vt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),i[52](e),t=!0,r||(s=[qn(i[8].action(e)),bt(e,"pointerdown",i[17]),bt(e,"pointermove",i[18]),bt(e,"pointerup",i[19]),bt(e,"touchend",i[20]),bt(e,"touchstart",i[21]),bt(e,"touchcancel",i[22]),bt(e,"touchmove",i[23])],r=!0)},p(_,b){i=_,o&&o.p&&(!t||b[0]&33024)&&wt(o,a,i,i[15],t?kt(a,i[15],b,iC):xt(i[15]),C_),Vt(e,d=Pt(l,[b[0]&256&&i[8],b[0]&4096&&i[12]]))},i(_){t||(T(o,_),_&&Hi(()=>{t&&(n||(n=Fo(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(_){I(o,_),_&&(n||(n=Fo(e,i[1],i[2],!1)),n.run(0)),t=!1},d(_){_&&S(e),o&&o.d(_),i[52](null),_&&n&&n.end(),r=!1,kr(s)}}}function hC(i){let e;const n=i[16].default,t=$t(n,i,i[15],S_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&33024)&&wt(t,n,r,r[15],e?kt(n,r[15],s,oC):xt(r[15]),S_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function dC(i){let e,n,t,r;const s=[hC,fC,uC,cC,lC,aC],a=[];function o(l,d){return l[7]&&l[9]?0:l[1]&&l[9]?1:l[3]&&l[5]&&l[9]?2:l[3]&&l[9]?3:l[5]&&l[9]?4:l[9]?5:-1}return~(e=o(i))&&(n=a[e]=s[e](i)),{c(){n&&n.c(),t=Fe()},l(l){n&&n.l(l),t=Fe()},m(l,d){~e&&a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?~e&&a[e].p(l,d):(n&&(ht(),I(a[_],1,1,()=>{a[_]=null}),dt()),~e?(n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t)):n=null)},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),~e&&a[e].d(l)}}}function pC(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","el"];let s=lt(e,r),a,o,{$$slots:l={},$$scope:d}=e,{transition:_=void 0}=e,{transitionConfig:b=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:E=void 0}=e,{outTransition:L=void 0}=e,{outTransitionConfig:M=void 0}=e,{asChild:F=!1}=e,{id:q=void 0}=e,{el:G=void 0}=e;const{elements:{content:Q},states:{open:ge},ids:le,getAttrs:re}=ka();sn(i,Q,pt=>n(14,a=pt)),sn(i,ge,pt=>n(9,o=pt));const me=re("content");function se(pt){Wt.call(this,i,pt)}function Z(pt){Wt.call(this,i,pt)}function Y(pt){Wt.call(this,i,pt)}function ie(pt){Wt.call(this,i,pt)}function be(pt){Wt.call(this,i,pt)}function fe(pt){Wt.call(this,i,pt)}function ke(pt){Wt.call(this,i,pt)}function je(pt){Wt.call(this,i,pt)}function Se(pt){Wt.call(this,i,pt)}function Qe(pt){Wt.call(this,i,pt)}function Xe(pt){Wt.call(this,i,pt)}function at(pt){Wt.call(this,i,pt)}function mt(pt){Wt.call(this,i,pt)}function Dt(pt){Wt.call(this,i,pt)}function Ct(pt){Wt.call(this,i,pt)}function nn(pt){Wt.call(this,i,pt)}function yn(pt){Wt.call(this,i,pt)}function cn(pt){Wt.call(this,i,pt)}function At(pt){Wt.call(this,i,pt)}function Tt(pt){Wt.call(this,i,pt)}function dn(pt){Wt.call(this,i,pt)}function rt(pt){Wt.call(this,i,pt)}function Kt(pt){Wt.call(this,i,pt)}function en(pt){Wt.call(this,i,pt)}function Ot(pt){Wt.call(this,i,pt)}function Et(pt){Wt.call(this,i,pt)}function et(pt){Wt.call(this,i,pt)}function bn(pt){Wt.call(this,i,pt)}function fn(pt){Wt.call(this,i,pt)}function He(pt){Wt.call(this,i,pt)}function Un(pt){Wt.call(this,i,pt)}function br(pt){Wt.call(this,i,pt)}function wn(pt){Wt.call(this,i,pt)}function Gn(pt){Wt.call(this,i,pt)}function gs(pt){Wt.call(this,i,pt)}function Ds(pt){jt[pt?"unshift":"push"](()=>{G=pt,n(0,G)})}function vs(pt){jt[pt?"unshift":"push"](()=>{G=pt,n(0,G)})}function ys(pt){jt[pt?"unshift":"push"](()=>{G=pt,n(0,G)})}function bs(pt){jt[pt?"unshift":"push"](()=>{G=pt,n(0,G)})}function si(pt){jt[pt?"unshift":"push"](()=>{G=pt,n(0,G)})}return i.$$set=pt=>{e=Ce(Ce({},e),Mt(pt)),n(12,s=lt(e,r)),"transition"in pt&&n(1,_=pt.transition),"transitionConfig"in pt&&n(2,b=pt.transitionConfig),"inTransition"in pt&&n(3,w=pt.inTransition),"inTransitionConfig"in pt&&n(4,E=pt.inTransitionConfig),"outTransition"in pt&&n(5,L=pt.outTransition),"outTransitionConfig"in pt&&n(6,M=pt.outTransitionConfig),"asChild"in pt&&n(7,F=pt.asChild),"id"in pt&&n(13,q=pt.id),"el"in pt&&n(0,G=pt.el),"$$scope"in pt&&n(15,d=pt.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&8192&&q&&le.content.set(q),i.$$.dirty[0]&16384&&n(8,t=a),i.$$.dirty[0]&256&&Object.assign(t,me)},[G,_,b,w,E,L,M,F,t,o,Q,ge,s,q,a,d,l,se,Z,Y,ie,be,fe,ke,je,Se,Qe,Xe,at,mt,Dt,Ct,nn,yn,cn,At,Tt,dn,rt,Kt,en,Ot,Et,et,bn,fn,He,Un,br,wn,Gn,gs,Ds,vs,ys,bs,si]}let mC=class extends it{constructor(e){super(),ot(this,e,pC,dC,nt,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:13,el:0},null,[-1,-1])}};const _C=i=>({builder:i&256}),T_=i=>({builder:i[8]});function gC(i){let e,n,t,r=[i[8],i[12]],s={};for(let a=0;a<r.length;a+=1)s=Ce(s,r[a]);return{c(){e=oe("div"),this.h()},l(a){e=ae(a,"DIV",{}),$e(e).forEach(S),this.h()},h(){Vt(e,s)},m(a,o){R(a,e,o),i[25](e),n||(t=[qn(i[8].action(e)),bt(e,"mouseup",i[20])],n=!0)},p(a,o){Vt(e,s=Pt(r,[o&256&&a[8],o&4096&&a[12]]))},i:gt,o:gt,d(a){a&&S(e),i[25](null),n=!1,kr(t)}}}function vC(i){let e,n,t,r,s,a=[i[8],i[12]],o={};for(let l=0;l<a.length;l+=1)o=Ce(o,a[l]);return{c(){e=oe("div"),this.h()},l(l){e=ae(l,"DIV",{}),$e(e).forEach(S),this.h()},h(){Vt(e,o)},m(l,d){R(l,e,d),i[24](e),t=!0,r||(s=[qn(i[8].action(e)),bt(e,"mouseup",i[19])],r=!0)},p(l,d){i=l,Vt(e,o=Pt(a,[d&256&&i[8],d&4096&&i[12]]))},i(l){t||(n&&n.end(1),t=!0)},o(l){l&&(n=Pl(e,i[5],i[6])),t=!1},d(l){l&&S(e),i[24](null),l&&n&&n.end(),r=!1,kr(s)}}}function yC(i){let e,n,t,r,s=[i[8],i[12]],a={};for(let o=0;o<s.length;o+=1)a=Ce(a,s[o]);return{c(){e=oe("div"),this.h()},l(o){e=ae(o,"DIV",{}),$e(e).forEach(S),this.h()},h(){Vt(e,a)},m(o,l){R(o,e,l),i[23](e),t||(r=[qn(i[8].action(e)),bt(e,"mouseup",i[18])],t=!0)},p(o,l){i=o,Vt(e,a=Pt(s,[l&256&&i[8],l&4096&&i[12]]))},i(o){o&&(n||Hi(()=>{n=Al(e,i[3],i[4]),n.start()}))},o:gt,d(o){o&&S(e),i[23](null),t=!1,kr(r)}}}function bC(i){let e,n,t,r,s,a,o=[i[8],i[12]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),this.h()},l(d){e=ae(d,"DIV",{}),$e(e).forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),i[22](e),r=!0,s||(a=[qn(i[8].action(e)),bt(e,"mouseup",i[17])],s=!0)},p(d,_){i=d,Vt(e,l=Pt(o,[_&256&&i[8],_&4096&&i[12]]))},i(d){r||(d&&Hi(()=>{r&&(t&&t.end(1),n=Al(e,i[3],i[4]),n.start())}),r=!0)},o(d){n&&n.invalidate(),d&&(t=Pl(e,i[5],i[6])),r=!1},d(d){d&&S(e),i[22](null),d&&t&&t.end(),s=!1,kr(a)}}}function $C(i){let e,n,t,r,s,a=[i[8],i[12]],o={};for(let l=0;l<a.length;l+=1)o=Ce(o,a[l]);return{c(){e=oe("div"),this.h()},l(l){e=ae(l,"DIV",{}),$e(e).forEach(S),this.h()},h(){Vt(e,o)},m(l,d){R(l,e,d),i[21](e),t=!0,r||(s=[bt(e,"mouseup",i[16]),qn(i[8].action(e))],r=!0)},p(l,d){i=l,Vt(e,o=Pt(a,[d&256&&i[8],d&4096&&i[12]]))},i(l){t||(l&&Hi(()=>{t&&(n||(n=Fo(e,i[1],i[2],!0)),n.run(1))}),t=!0)},o(l){l&&(n||(n=Fo(e,i[1],i[2],!1)),n.run(0)),t=!1},d(l){l&&S(e),i[21](null),l&&n&&n.end(),r=!1,kr(s)}}}function wC(i){let e;const n=i[15].default,t=$t(n,i,i[14],T_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16640)&&wt(t,n,r,r[14],e?kt(n,r[14],s,_C):xt(r[14]),T_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function xC(i){let e,n,t,r;const s=[wC,$C,bC,yC,vC,gC],a=[];function o(l,d){return l[7]&&l[9]?0:l[1]&&l[9]?1:l[3]&&l[5]&&l[9]?2:l[3]&&l[9]?3:l[5]&&l[9]?4:l[9]?5:-1}return~(e=o(i))&&(n=a[e]=s[e](i)),{c(){n&&n.c(),t=Fe()},l(l){n&&n.l(l),t=Fe()},m(l,d){~e&&a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?~e&&a[e].p(l,d):(n&&(ht(),I(a[_],1,1,()=>{a[_]=null}),dt()),~e?(n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t)):n=null)},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),~e&&a[e].d(l)}}}function kC(i,e,n){let t;const r=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","el"];let s=lt(e,r),a,o,{$$slots:l={},$$scope:d}=e,{transition:_=void 0}=e,{transitionConfig:b=void 0}=e,{inTransition:w=void 0}=e,{inTransitionConfig:E=void 0}=e,{outTransition:L=void 0}=e,{outTransitionConfig:M=void 0}=e,{asChild:F=!1}=e,{el:q=void 0}=e;const{elements:{overlay:G},states:{open:Q},getAttrs:ge}=ka();sn(i,G,Se=>n(13,a=Se)),sn(i,Q,Se=>n(9,o=Se));const le=ge("overlay");function re(Se){Wt.call(this,i,Se)}function me(Se){Wt.call(this,i,Se)}function se(Se){Wt.call(this,i,Se)}function Z(Se){Wt.call(this,i,Se)}function Y(Se){Wt.call(this,i,Se)}function ie(Se){jt[Se?"unshift":"push"](()=>{q=Se,n(0,q)})}function be(Se){jt[Se?"unshift":"push"](()=>{q=Se,n(0,q)})}function fe(Se){jt[Se?"unshift":"push"](()=>{q=Se,n(0,q)})}function ke(Se){jt[Se?"unshift":"push"](()=>{q=Se,n(0,q)})}function je(Se){jt[Se?"unshift":"push"](()=>{q=Se,n(0,q)})}return i.$$set=Se=>{e=Ce(Ce({},e),Mt(Se)),n(12,s=lt(e,r)),"transition"in Se&&n(1,_=Se.transition),"transitionConfig"in Se&&n(2,b=Se.transitionConfig),"inTransition"in Se&&n(3,w=Se.inTransition),"inTransitionConfig"in Se&&n(4,E=Se.inTransitionConfig),"outTransition"in Se&&n(5,L=Se.outTransition),"outTransitionConfig"in Se&&n(6,M=Se.outTransitionConfig),"asChild"in Se&&n(7,F=Se.asChild),"el"in Se&&n(0,q=Se.el),"$$scope"in Se&&n(14,d=Se.$$scope)},i.$$.update=()=>{i.$$.dirty&8192&&n(8,t=a),i.$$.dirty&256&&Object.assign(t,le)},[q,_,b,w,E,L,M,F,t,o,G,Q,s,a,d,l,re,me,se,Z,Y,ie,be,fe,ke,je]}let CC=class extends it{constructor(e){super(),ot(this,e,kC,xC,nt,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,el:0})}};const SC=i=>({builder:i&4}),I_=i=>({builder:i[2]}),TC=i=>({builder:i&4}),E_=i=>({builder:i[2]});function IC(i){let e,n,t,r;const s=i[8].default,a=$t(s,i,i[7],I_);let o=[i[2],{type:"button"},i[5]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("button"),a&&a.c(),this.h()},l(d){e=ae(d,"BUTTON",{type:!0});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[9](e),n=!0,t||(r=[qn(i[2].action(e)),bt(e,"m-click",i[4]),bt(e,"m-keydown",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&wt(a,s,d,d[7],n?kt(s,d[7],_,SC):xt(d[7]),I_),Vt(e,l=Pt(o,[_&4&&d[2],{type:"button"},_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,kr(r)}}}function EC(i){let e;const n=i[8].default,t=$t(n,i,i[7],E_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&wt(t,n,r,r[7],e?kt(n,r[7],s,TC):xt(r[7]),E_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function PC(i){let e,n,t,r;const s=[EC,IC],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function AC(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{trigger:b},getAttrs:w}=ka();sn(i,b,F=>n(6,a=F));const E=tu(),L=w("trigger");function M(F){jt[F?"unshift":"push"](()=>{_=F,n(0,_)})}return i.$$set=F=>{e=Ce(Ce({},e),Mt(F)),n(5,s=lt(e,r)),"asChild"in F&&n(1,d=F.asChild),"el"in F&&n(0,_=F.el),"$$scope"in F&&n(7,l=F.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,L)},[_,d,t,b,E,s,a,l,o,M]}class MC extends it{constructor(e){super(),ot(this,e,AC,PC,nt,{asChild:1,el:0})}}const DC=i=>({builder:i&4}),P_=i=>({builder:i[2]}),zC=i=>({builder:i&4}),A_=i=>({builder:i[2]});function LC(i){let e,n,t,r;const s=i[8].default,a=$t(s,i,i[7],P_);let o=[i[2],i[4]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[9](e),n=!0,t||(r=qn(i[2].action(e)),t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&wt(a,s,d,d[7],n?kt(s,d[7],_,DC):xt(d[7]),P_),Vt(e,l=Pt(o,[_&4&&d[2],_&16&&d[4]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,r()}}}function RC(i){let e;const n=i[8].default,t=$t(n,i,i[7],A_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&wt(t,n,r,r[7],e?kt(n,r[7],s,zC):xt(r[7]),A_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function OC(i){let e,n,t,r;const s=[RC,LC],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function FC(i,e,n){let t;const r=["asChild","id","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{asChild:d=!1}=e,{id:_=void 0}=e,{el:b=void 0}=e;const{elements:{description:w},ids:E,getAttrs:L}=ka();sn(i,w,q=>n(6,a=q));const M=L("description");function F(q){jt[q?"unshift":"push"](()=>{b=q,n(0,b)})}return i.$$set=q=>{e=Ce(Ce({},e),Mt(q)),n(4,s=lt(e,r)),"asChild"in q&&n(1,d=q.asChild),"id"in q&&n(5,_=q.id),"el"in q&&n(0,b=q.el),"$$scope"in q&&n(7,l=q.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&_&&E.description.set(_),i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,M)},[b,d,t,w,s,_,a,l,o,F]}let BC=class extends it{constructor(e){super(),ot(this,e,FC,OC,nt,{asChild:1,id:5,el:0})}};function NC(){const i="label",n=eu(i,["root"]);return{NAME:i,getAttrs:n}}const VC=i=>({builder:i&4}),M_=i=>({builder:i[2]}),UC=i=>({builder:i&4}),D_=i=>({builder:i[2]});function jC(i){let e,n,t,r;const s=i[8].default,a=$t(s,i,i[7],M_);let o=[i[2],i[5]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("label"),a&&a.c(),this.h()},l(d){e=ae(d,"LABEL",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),i[9](e),n=!0,t||(r=[qn(i[2].action(e)),bt(e,"m-mousedown",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&132)&&wt(a,s,d,d[7],n?kt(s,d[7],_,VC):xt(d[7]),M_),Vt(e,l=Pt(o,[_&4&&d[2],_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[9](null),t=!1,kr(r)}}}function qC(i){let e;const n=i[8].default,t=$t(n,i,i[7],D_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&132)&&wt(t,n,r,r[7],e?kt(n,r[7],s,UC):xt(r[7]),D_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function GC(i){let e,n,t,r;const s=[qC,jC],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function HC(i,e,n){let t;const r=["asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{asChild:d=!1}=e,{el:_=void 0}=e;const{elements:{root:b}}=q$();sn(i,b,F=>n(6,a=F));const w=tu(),{getAttrs:E}=NC(),L=E("root");function M(F){jt[F?"unshift":"push"](()=>{_=F,n(0,_)})}return i.$$set=F=>{e=Ce(Ce({},e),Mt(F)),n(5,s=lt(e,r)),"asChild"in F&&n(1,d=F.asChild),"el"in F&&n(0,_=F.el),"$$scope"in F&&n(7,l=F.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,L)},[_,d,t,b,w,s,a,l,o,M]}let ZC=class extends it{constructor(e){super(),ot(this,e,HC,GC,nt,{asChild:1,el:0})}};function WC(){return{NAME:"toggle",PARTS:["root","input"]}}function KC(i){const{NAME:e,PARTS:n}=WC(),t=eu(e,n),r={...ix(Bf(i)),getAttrs:t};return Ei(e,r),{...r,updateOption:Nf(r.options)}}const XC=i=>({builder:i&4}),z_=i=>({builder:i[2]}),JC=i=>({builder:i&4}),L_=i=>({builder:i[2]});function YC(i){let e,n,t,r;const s=i[11].default,a=$t(s,i,i[10],z_);let o=[i[2],{type:"button"},i[5]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("button"),a&&a.c(),this.h()},l(d){e=ae(d,"BUTTON",{type:!0});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),e.autofocus&&e.focus(),i[12](e),n=!0,t||(r=[qn(i[2].action(e)),bt(e,"m-click",i[4]),bt(e,"m-keydown",i[4])],t=!0)},p(d,_){a&&a.p&&(!n||_&1028)&&wt(a,s,d,d[10],n?kt(s,d[10],_,XC):xt(d[10]),z_),Vt(e,l=Pt(o,[_&4&&d[2],{type:"button"},_&32&&d[5]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),i[12](null),t=!1,kr(r)}}}function QC(i){let e;const n=i[11].default,t=$t(n,i,i[10],L_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1028)&&wt(t,n,r,r[10],e?kt(n,r[10],s,JC):xt(r[10]),L_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function eS(i){let e,n,t,r;const s=[QC,YC],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function tS(i,e,n){let t;const r=["disabled","pressed","onPressedChange","asChild","el"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{disabled:d=void 0}=e,{pressed:_=void 0}=e,{onPressedChange:b=void 0}=e,{asChild:w=!1}=e,{el:E=void 0}=e;const{elements:{root:L},states:{pressed:M},updateOption:F,getAttrs:q}=KC({disabled:d,defaultPressed:_,onPressedChange:({next:le})=>(_!==le&&(b==null||b(le),n(6,_=le)),le)});sn(i,L,le=>n(9,a=le));const G=tu(),Q=q("root");function ge(le){jt[le?"unshift":"push"](()=>{E=le,n(0,E)})}return i.$$set=le=>{e=Ce(Ce({},e),Mt(le)),n(5,s=lt(e,r)),"disabled"in le&&n(7,d=le.disabled),"pressed"in le&&n(6,_=le.pressed),"onPressedChange"in le&&n(8,b=le.onPressedChange),"asChild"in le&&n(1,w=le.asChild),"el"in le&&n(0,E=le.el),"$$scope"in le&&n(10,l=le.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&_!==void 0&&M.set(_),i.$$.dirty&128&&F("disabled",d),i.$$.dirty&512&&n(2,t=a),i.$$.dirty&4&&Object.assign(t,Q)},[E,w,t,L,G,s,_,d,b,a,l,o,ge]}let nS=class extends it{constructor(e){super(),ot(this,e,tS,eS,nt,{disabled:7,pressed:6,onPressedChange:8,asChild:1,el:0})}};function rS(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return{c(){e=Tf("svg"),n=Tf("path"),this.h()},l(s){e=If(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=$e(e);n=If(a,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),$e(n).forEach(S),a.forEach(S),this.h()},h(){te(n,"fill-rule","evenodd"),te(n,"clip-rule","evenodd"),te(n,"d","M3.625 7.5C3.625 8.12132 3.12132 8.625 2.5 8.625C1.87868 8.625 1.375 8.12132 1.375 7.5C1.375 6.87868 1.87868 6.375 2.5 6.375C3.12132 6.375 3.625 6.87868 3.625 7.5ZM8.625 7.5C8.625 8.12132 8.12132 8.625 7.5 8.625C6.87868 8.625 6.375 8.12132 6.375 7.5C6.375 6.87868 6.87868 6.375 7.5 6.375C8.12132 6.375 8.625 6.87868 8.625 7.5ZM12.5 8.625C13.1213 8.625 13.625 8.12132 13.625 7.5C13.625 6.87868 13.1213 6.375 12.5 6.375C11.8787 6.375 11.375 6.87868 11.375 7.5C11.375 8.12132 11.8787 8.625 12.5 8.625Z"),te(n,"fill",i[0]),Ef(e,r)},m(s,a){R(s,e,a),ce(e,n)},p(s,[a]){a&1&&te(n,"fill",s[0]),Ef(e,r=Pt(t,[a&2&&{width:s[1]},a&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a&4&&s[2]]))},i:gt,o:gt,d(s){s&&S(e)}}}function sS(i,e,n){const t=["color","size"];let r=lt(e,t),{color:s="currentColor"}=e,{size:a=15}=e;return i.$$set=o=>{e=Ce(Ce({},e),Mt(o)),n(2,r=lt(e,t)),"color"in o&&n(0,s=o.color),"size"in o&&n(1,a=o.size)},[s,a,r]}class iS extends it{constructor(e){super(),ot(this,e,sS,rS,nt,{color:0,size:1})}}const oS=iS;function aS(i){let e,n,t=[{width:i[1]},{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},i[2]],r={};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return{c(){e=Tf("svg"),n=Tf("path"),this.h()},l(s){e=If(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=$e(e);n=If(a,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),$e(n).forEach(S),a.forEach(S),this.h()},h(){te(n,"fill-rule","evenodd"),te(n,"clip-rule","evenodd"),te(n,"d","M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z"),te(n,"fill",i[0]),Ef(e,r)},m(s,a){R(s,e,a),ce(e,n)},p(s,[a]){a&1&&te(n,"fill",s[0]),Ef(e,r=Pt(t,[a&2&&{width:s[1]},a&2&&{height:s[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a&4&&s[2]]))},i:gt,o:gt,d(s){s&&S(e)}}}function lS(i,e,n){const t=["color","size"];let r=lt(e,t),{color:s="currentColor"}=e,{size:a=15}=e;return i.$$set=o=>{e=Ce(Ce({},e),Mt(o)),n(2,r=lt(e,t)),"color"in o&&n(0,s=o.color),"size"in o&&n(1,a=o.size)},[s,a,r]}class cS extends it{constructor(e){super(),ot(this,e,lS,aS,nt,{color:0,size:1})}}const uS=cS;function fS(i){let e,n,t;const r=i[3].default,s=$t(r,i,i[2],null);let a=[{class:n=qt("flex items-center p-6 pt-0",i[0])},i[1]],o={};for(let l=0;l<a.length;l+=1)o=Ce(o,a[l]);return{c(){e=oe("div"),s&&s.c(),this.h()},l(l){e=ae(l,"DIV",{class:!0});var d=$e(e);s&&s.l(d),d.forEach(S),this.h()},h(){Vt(e,o)},m(l,d){R(l,e,d),s&&s.m(e,null),t=!0},p(l,[d]){s&&s.p&&(!t||d&4)&&wt(s,r,l,l[2],t?kt(r,l[2],d,null):xt(l[2]),null),Vt(e,o=Pt(a,[(!t||d&1&&n!==(n=qt("flex items-center p-6 pt-0",l[0])))&&{class:n},d&2&&l[1]]))},i(l){t||(T(s,l),t=!0)},o(l){I(s,l),t=!1},d(l){l&&S(e),s&&s.d(l)}}}function hS(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(2,a=l.$$scope)},[o,r,a,s]}class dS extends it{constructor(e){super(),ot(this,e,hS,fS,nt,{class:0})}}var Rn=(i=>(i.HOME="",i.SOCIAL_NETWORK="social",i.SOCIAL_NETWORK_FEED="social/feed",i.SOCIAL_NETWORK_CONNECTIONS="social/connections",i.POINTS_AND_BADGES="points-badges",i.CHECK_INS="check-ins",i.FAVOURITES="favourites",i.SETTINGS="settings",i))(Rn||{});const pS=({params:i})=>({slug:i.slug});function mS(){return Object.values(Rn).map(i=>({slug:i}))}const pN=Object.freeze(Object.defineProperty({__proto__:null,entries:mS,load:pS},Symbol.toStringTag,{value:"Module"}));function _S(i){let e;const n=i[3].default,t=$t(n,i,i[11],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&2048)&&wt(t,n,r,r[11],e?kt(n,r[11],s,null):xt(r[11]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function gS(i){let e,n;const t=[{class:qt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[_S]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new G$({props:r}),e.$on("click",i[4]),e.$on("keydown",i[5]),e.$on("focusin",i[6]),e.$on("focusout",i[7]),e.$on("pointerdown",i[8]),e.$on("pointerleave",i[9]),e.$on("pointermove",i[10]),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&7?Pt(t,[a&3&&{class:qt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[1]&&"pl-8",s[0])},a&4&&mn(s[2])]):{};a&2048&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function vS(i,e,n){const t=["class","inset"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{inset:l=void 0}=e;function d(F){Wt.call(this,i,F)}function _(F){Wt.call(this,i,F)}function b(F){Wt.call(this,i,F)}function w(F){Wt.call(this,i,F)}function E(F){Wt.call(this,i,F)}function L(F){Wt.call(this,i,F)}function M(F){Wt.call(this,i,F)}return i.$$set=F=>{e=Ce(Ce({},e),Mt(F)),n(2,r=lt(e,t)),"class"in F&&n(0,o=F.class),"inset"in F&&n(1,l=F.inset),"$$scope"in F&&n(11,a=F.$$scope)},[o,l,r,s,d,_,b,w,E,L,M,a]}class Df extends it{constructor(e){super(),ot(this,e,vS,gS,nt,{class:0,inset:1})}}function yS(i){let e;const n=i[3].default,t=$t(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&wt(t,n,r,r[4],e?kt(n,r[4],s,null):xt(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function bS(i){let e,n;const t=[{class:qt("px-2 py-1.5 text-sm font-semibold",i[1]&&"pl-8",i[0])},i[2]];let r={$$slots:{default:[yS]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new H$({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&7?Pt(t,[a&3&&{class:qt("px-2 py-1.5 text-sm font-semibold",s[1]&&"pl-8",s[0])},a&4&&mn(s[2])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function $S(i,e,n){const t=["class","inset"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{inset:l=void 0}=e;return i.$$set=d=>{e=Ce(Ce({},e),Mt(d)),n(2,r=lt(e,t)),"class"in d&&n(0,o=d.class),"inset"in d&&n(1,l=d.inset),"$$scope"in d&&n(4,a=d.$$scope)},[o,l,r,s,a]}class wS extends it{constructor(e){super(),ot(this,e,$S,bS,nt,{class:0,inset:1})}}function xS(i){let e;const n=i[5].default,t=$t(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&wt(t,n,r,r[7],e?kt(n,r[7],s,null):xt(r[7]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function kS(i){let e,n;const t=[{transition:i[2]},{transitionConfig:i[3]},{sideOffset:i[1]},{class:qt("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",i[0])},i[4]];let r={$$slots:{default:[xS]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new Z$({props:r}),e.$on("keydown",i[6]),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&31?Pt(t,[a&4&&{transition:s[2]},a&8&&{transitionConfig:s[3]},a&2&&{sideOffset:s[1]},a&1&&{class:qt("z-50 min-w-[8rem] rounded-md border bg-popover p-1 text-popover-foreground shadow-md focus:outline-none",s[0])},a&16&&mn(s[4])]):{};a&128&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function CS(i,e,n){const t=["class","sideOffset","transition","transitionConfig"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{sideOffset:l=4}=e,{transition:d=Id}=e,{transitionConfig:_=void 0}=e;function b(w){Wt.call(this,i,w)}return i.$$set=w=>{e=Ce(Ce({},e),Mt(w)),n(4,r=lt(e,t)),"class"in w&&n(0,o=w.class),"sideOffset"in w&&n(1,l=w.sideOffset),"transition"in w&&n(2,d=w.transition),"transitionConfig"in w&&n(3,_=w.transitionConfig),"$$scope"in w&&n(7,a=w.$$scope)},[o,l,d,_,r,s,b,a]}class SS extends it{constructor(e){super(),ot(this,e,CS,kS,nt,{class:0,sideOffset:1,transition:2,transitionConfig:3})}}function TS(i){let e,n;const t=[{class:qt("-mx-1 my-1 h-px bg-muted",i[0])},i[1]];let r={};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new W$({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("-mx-1 my-1 h-px bg-muted",s[0])},a&2&&mn(s[1])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function IS(i,e,n){const t=["class"];let r=lt(e,t),{class:s=void 0}=e;return i.$$set=a=>{e=Ce(Ce({},e),Mt(a)),n(1,r=lt(e,t)),"class"in a&&n(0,s=a.class)},[s,r]}class Mv extends it{constructor(e){super(),ot(this,e,IS,TS,nt,{class:0})}}const ES=K$,PS=X$,AS=Ik;function MS(i){let e;const n=i[3].default,t=$t(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&wt(t,n,r,r[4],e?kt(n,r[4],s,null):xt(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function DS(i){let e,n;const t=[{delayMs:i[1]},{class:qt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",i[0])},i[2]];let r={$$slots:{default:[MS]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new lk({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&7?Pt(t,[a&2&&{delayMs:s[1]},a&1&&{class:qt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s[0])},a&4&&mn(s[2])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function zS(i,e,n){const t=["class","delayMs"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{delayMs:l=void 0}=e;return i.$$set=d=>{e=Ce(Ce({},e),Mt(d)),n(2,r=lt(e,t)),"class"in d&&n(0,o=d.class),"delayMs"in d&&n(1,l=d.delayMs),"$$scope"in d&&n(4,a=d.$$scope)},[o,l,r,s,a]}class LS extends it{constructor(e){super(),ot(this,e,zS,DS,nt,{class:0,delayMs:1})}}function RS(i){let e,n;const t=[{src:i[1]},{alt:i[2]},{class:qt("aspect-square h-full w-full",i[0])},i[3]];let r={};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new pk({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&15?Pt(t,[a&2&&{src:s[1]},a&4&&{alt:s[2]},a&1&&{class:qt("aspect-square h-full w-full",s[0])},a&8&&mn(s[3])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function OS(i,e,n){const t=["class","src","alt"];let r=lt(e,t),{class:s=void 0}=e,{src:a=void 0}=e,{alt:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(3,r=lt(e,t)),"class"in l&&n(0,s=l.class),"src"in l&&n(1,a=l.src),"alt"in l&&n(2,o=l.alt)},[s,a,o,r]}class FS extends it{constructor(e){super(),ot(this,e,OS,RS,nt,{class:0,src:1,alt:2})}}function BS(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function NS(i){let e,n;const t=[{class:qt("flex h-full w-full items-center justify-center rounded-full bg-muted",i[0])},i[1]];let r={$$slots:{default:[BS]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new $k({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("flex h-full w-full items-center justify-center rounded-full bg-muted",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function VS(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}class zd extends it{constructor(e){super(),ot(this,e,VS,NS,nt,{class:0})}}function US(i){let e,n;return e=new zd({props:{"aria-label":"Profile Picture",class:"bg-error text-2xl",$$slots:{default:[GS]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function jS(i){let e,n,t,r=i[1].profile_picture!==void 0&&R_(i);return n=new zd({props:{"aria-label":"Profile Picture",$$slots:{default:[HS]},$$scope:{ctx:i}}}),{c(){r&&r.c(),e=de(),N(n.$$.fragment)},l(s){r&&r.l(s),e=pe(s),j(n.$$.fragment,s)},m(s,a){r&&r.m(s,a),R(s,e,a),V(n,s,a),t=!0},p(s,a){s[1].profile_picture!==void 0?r?(r.p(s,a),a&2&&T(r,1)):(r=R_(s),r.c(),T(r,1),r.m(e.parentNode,e)):r&&(ht(),I(r,1,1,()=>{r=null}),dt());const o={};a&524288&&(o.$$scope={dirty:a,ctx:s}),n.$set(o)},i(s){t||(T(r),T(n.$$.fragment,s),t=!0)},o(s){I(r),I(n.$$.fragment,s),t=!1},d(s){s&&S(e),r&&r.d(s),U(n,s)}}}function qS(i){let e,n;return e=new zd({props:{$$slots:{default:[ZS]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function GS(i){let e;return{c(){e=Ve("!")},l(n){e=Ue(n,"!")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function R_(i){let e,n;return e=new FS({props:{src:i[1].profile_picture,alt:"Profile Picture","aria-label":"Profile Picture",class:"bg-card"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.src=t[1].profile_picture),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function HS(i){let e,n;return e=new G2({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function ZS(i){let e;return{c(){e=oe("span"),this.h()},l(n){e=ae(n,"SPAN",{class:!0}),$e(e).forEach(S),this.h()},h(){te(e,"class","loading loading-ring loading-lg")},m(n,t){R(n,e,t)},p:gt,d(n){n&&S(e)}}}function WS(i){let e,n,t,r;const s=[qS,jS,US],a=[];function o(l,d){return l[0]?0:l[3]?2:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function KS(i){let e,n;return e=new LS({props:{class:"h-10 w-10",$$slots:{default:[WS]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&524299&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function XS(i){let e,n;return e=new Vn({props:{variant:"ghost",builders:[i[18]],class:"relative h-8 w-8 rounded-full mx-1",$$slots:{default:[KS]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.builders=[t[18]]),r&524299&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function JS(i){let e,n,t,r,s,a;return e=new Df({props:{class:"font-normal cursor-pointer",$$slots:{default:[eT]},$$scope:{ctx:i}}}),e.$on("click",i[11]),t=new Mv({}),s=new Df({props:{class:"font-normal cursor-pointer flex-col items-start gap-2",$$slots:{default:[rT]},$$scope:{ctx:i}}}),s.$on("click",i[13]),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o),r=pe(o),j(s.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),R(o,r,l),V(s,o,l),a=!0},p(o,l){const d={};l&524290&&(d.$$scope={dirty:l,ctx:o}),e.$set(d);const _={};l&524340&&(_.$$scope={dirty:l,ctx:o}),s.$set(_)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),I(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function YS(i){let e,n;return e=new wS({props:{class:"font-normal",$$slots:{default:[sT]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function QS(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1hn9b8o"&&(e.innerHTML=n),this.h()},h(){te(e,"class","h-16 flex items-center justify-center")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function eT(i){let e,n,t=i[1].nickname+"",r,s,a,o,l=i[1].nickname+"",d;return{c(){e=oe("div"),n=oe("p"),r=Ve(t),s=de(),a=oe("p"),o=Ve("@"),d=Ve(l),this.h()},l(_){e=ae(_,"DIV",{class:!0});var b=$e(e);n=ae(b,"P",{class:!0});var w=$e(n);r=Ue(w,t),w.forEach(S),s=pe(b),a=ae(b,"P",{class:!0});var E=$e(a);o=Ue(E,"@"),d=Ue(E,l),E.forEach(S),b.forEach(S),this.h()},h(){te(n,"class","text-sm font-medium leading-none"),te(a,"class","text-xs leading-none text-muted-foreground"),te(e,"class","flex flex-col space-y-1")},m(_,b){R(_,e,b),ce(e,n),ce(n,r),ce(e,s),ce(e,a),ce(a,o),ce(a,d)},p(_,b){b&2&&t!==(t=_[1].nickname+"")&&Ft(r,t),b&2&&l!==(l=_[1].nickname+"")&&Ft(d,l)},d(_){_&&S(e)}}}function tT(i){let e,n;return e=new xa({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function nT(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){pr(e.src,n=Ms[i[2].badge])||te(e,"src",n),te(e,"class","h-14 w-14 -ml-0.5"),te(e,"alt","Current Total Points Badge Icon")},m(s,a){R(s,e,a),t||(r=bt(e,"error",i[12]),t=!0)},p(s,a){a&4&&!pr(e.src,n=Ms[s[2].badge])&&te(e,"src",n)},i:gt,o:gt,d(s){s&&S(e),t=!1,r()}}}function rT(i){let e,n,t=i[2].totalPoints+"",r,s,a,o,l,d,_,b,w=i[2].badge+"",E,L,M,F,q=i[2].previousThreshold+"",G,Q,ge,le,re,me=i[2].threshold+"",se,Z;const Y=[nT,tT],ie=[];function be(fe,ke){return fe[4]?1:0}return l=be(i),d=ie[l]=Y[l](i),{c(){e=oe("p"),n=Ve("Total Points: "),r=Ve(t),s=de(),a=oe("div"),o=oe("div"),d.c(),_=de(),b=oe("p"),E=Ve(w),L=de(),M=oe("div"),F=oe("p"),G=Ve(q),Q=de(),ge=oe("progress"),le=de(),re=oe("p"),se=Ve(me),this.h()},l(fe){e=ae(fe,"P",{class:!0});var ke=$e(e);n=Ue(ke,"Total Points: "),r=Ue(ke,t),ke.forEach(S),s=pe(fe),a=ae(fe,"DIV",{class:!0});var je=$e(a);o=ae(je,"DIV",{class:!0});var Se=$e(o);d.l(Se),Se.forEach(S),_=pe(je),b=ae(je,"P",{class:!0});var Qe=$e(b);E=Ue(Qe,w),Qe.forEach(S),L=pe(je),M=ae(je,"DIV",{class:!0});var Xe=$e(M);F=ae(Xe,"P",{class:!0});var at=$e(F);G=Ue(at,q),at.forEach(S),Q=pe(Xe),ge=ae(Xe,"PROGRESS",{class:!0,max:!0}),$e(ge).forEach(S),le=pe(Xe),re=ae(Xe,"P",{class:!0});var mt=$e(re);se=Ue(mt,me),mt.forEach(S),Xe.forEach(S),je.forEach(S),this.h()},h(){te(e,"class","text-sm font-medium leading-none"),te(o,"class","shrink-0"),te(b,"class","text-sm font-medium leading-none"),te(F,"class","text-sm font-medium leading-none text-muted-foreground"),te(ge,"class","progress progress-error grow"),ge.value=i[5],te(ge,"max","100"),te(re,"class","text-sm font-medium leading-none text-muted-foreground"),te(M,"class","flex self-stretch gap-2 items-center"),te(a,"class","flex flex-col space-y-1 items-center self-stretch")},m(fe,ke){R(fe,e,ke),ce(e,n),ce(e,r),R(fe,s,ke),R(fe,a,ke),ce(a,o),ie[l].m(o,null),ce(a,_),ce(a,b),ce(b,E),ce(a,L),ce(a,M),ce(M,F),ce(F,G),ce(M,Q),ce(M,ge),ce(M,le),ce(M,re),ce(re,se),Z=!0},p(fe,ke){(!Z||ke&4)&&t!==(t=fe[2].totalPoints+"")&&Ft(r,t);let je=l;l=be(fe),l===je?ie[l].p(fe,ke):(ht(),I(ie[je],1,1,()=>{ie[je]=null}),dt(),d=ie[l],d?d.p(fe,ke):(d=ie[l]=Y[l](fe),d.c()),T(d,1),d.m(o,null)),(!Z||ke&4)&&w!==(w=fe[2].badge+"")&&Ft(E,w),(!Z||ke&4)&&q!==(q=fe[2].previousThreshold+"")&&Ft(G,q),(!Z||ke&32)&&(ge.value=fe[5]),(!Z||ke&4)&&me!==(me=fe[2].threshold+"")&&Ft(se,me)},i(fe){Z||(T(d),Z=!0)},o(fe){I(d),Z=!1},d(fe){fe&&(S(e),S(s),S(a)),ie[l].d()}}}function sT(i){let e,n='<p class="text-xs leading-none text-error">Failed To Fetch</p>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-5us5t3"&&(e.innerHTML=n),this.h()},h(){te(e,"class","flex flex-col space-y-1")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function iT(i){let e;return{c(){e=Ve("Settings")},l(n){e=Ue(n,"Settings")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function oT(i){let e;return{c(){e=Ve("Log out")},l(n){e=Ue(n,"Log out")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function aT(i){let e,n,t,r;return e=new Df({props:{class:"cursor-pointer",$$slots:{default:[iT]},$$scope:{ctx:i}}}),e.$on("click",i[14]),t=new Df({props:{class:"cursor-pointer",$$slots:{default:[oT]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&524288&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&524288&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function lT(i){let e,n,t,r,s,a,o;const l=[QS,YS,JS],d=[];function _(b,w){return b[0]?0:b[3]?1:2}return e=_(i),n=d[e]=l[e](i),r=new Mv({}),a=new AS({props:{$$slots:{default:[aT]},$$scope:{ctx:i}}}),{c(){n.c(),t=de(),N(r.$$.fragment),s=de(),N(a.$$.fragment)},l(b){n.l(b),t=pe(b),j(r.$$.fragment,b),s=pe(b),j(a.$$.fragment,b)},m(b,w){d[e].m(b,w),R(b,t,w),V(r,b,w),R(b,s,w),V(a,b,w),o=!0},p(b,w){let E=e;e=_(b),e===E?d[e].p(b,w):(ht(),I(d[E],1,1,()=>{d[E]=null}),dt(),n=d[e],n?n.p(b,w):(n=d[e]=l[e](b),n.c()),T(n,1),n.m(t.parentNode,t));const L={};w&524288&&(L.$$scope={dirty:w,ctx:b}),a.$set(L)},i(b){o||(T(n),T(r.$$.fragment,b),T(a.$$.fragment,b),o=!0)},o(b){I(n),I(r.$$.fragment,b),I(a.$$.fragment,b),o=!1},d(b){b&&(S(t),S(s)),d[e].d(b),U(r,b),U(a,b)}}}function cT(i){let e,n,t,r;return e=new PS({props:{asChild:!0,$$slots:{default:[XS,({builder:s})=>({18:s}),({builder:s})=>s?262144:0]},$$scope:{ctx:i}}}),t=new SS({props:{class:"w-56",align:"end",$$slots:{default:[lT]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&786443&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&524351&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function uT(i){let e,n;return e=new ES({props:{$$slots:{default:[cT]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&524351&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let O_=2e3;function fT(i,e,n){let t,r,s=!1,a=!0,o=!1;const l=bi("refreshAvatarData");let d;const _=async()=>{const re=await(await fetch("/api/settings/profile")).json();n(1,t=re),(typeof(t==null?void 0:t.nickname)!="string"||typeof(t==null?void 0:t.email)!="string"||typeof(t==null?void 0:t.description)!="string")&&n(3,s=!0);const se=await(await fetch("/api/points-badges/avatar")).json();n(2,r=se),(typeof(r==null?void 0:r.totalPoints)!="number"||typeof(r==null?void 0:r.badge)!="string"||!((r==null?void 0:r.badge)in Ms)||typeof(r==null?void 0:r.threshold)!="number"||typeof(r==null?void 0:r.previousThreshold)!="number")&&n(3,s=!0),n(7,d=Math.round((r.totalPoints-r.previousThreshold)*100/(r.threshold-r.previousThreshold))),d>100&&n(7,d=100),n(0,a=!1)};l.set(_);const b=async()=>{await rw()&&sw.verify()};let w;er(()=>(_(),w=Tv.subscribe(_),()=>w()));let E=0,L,M,F=!1;Bo(()=>clearInterval(L));const q=()=>ya("/app"),G=()=>n(4,o=!0),Q=()=>ya("/app/points-badges"),ge=()=>ya("/app/settings");return i.$$.update=()=>{i.$$.dirty&1921&&!a&&!F&&(n(10,F=!0),n(9,M=Date.now()),n(8,L=setInterval(()=>{const re=Date.now()-M;if(re<O_){const me=re/O_;n(5,E=d*iu(me))}else n(5,E=d),clearInterval(L)},2)))},[a,t,r,s,o,E,b,d,L,M,F,q,G,Q,ge]}class hT extends it{constructor(e){super(),ot(this,e,fT,uT,nt,{})}}function dT(i){let e,n,t,r,s,a,o,l;return{c(){e=oe("div"),n=de(),t=oe("div"),r=oe("div"),s=de(),a=oe("div"),o=de(),l=oe("div"),this.h()},l(d){e=ae(d,"DIV",{class:!0}),$e(e).forEach(S),n=pe(d),t=ae(d,"DIV",{class:!0});var _=$e(t);r=ae(_,"DIV",{class:!0}),$e(r).forEach(S),s=pe(_),a=ae(_,"DIV",{class:!0}),$e(a).forEach(S),_.forEach(S),o=pe(d),l=ae(d,"DIV",{class:!0}),$e(l).forEach(S),this.h()},h(){te(e,"class","h-1 w-7 rounded bg-base-content transition-all"),dr(e,"w-0",!i[0]),dr(e,"opacity-0",!i[0]),dr(e,"opacity-100",i[0]),te(r,"class","absolute h-1 w-7 -translate-x-1/2 -translate-y-1/2 rounded bg-base-content transition-all"),dr(r,"rotate-45",!i[0]),te(a,"class","absolute h-1 w-7 -translate-x-1/2 -translate-y-1/2 rounded bg-base-content transition-all"),dr(a,"-rotate-45",!i[0]),te(t,"class","relative"),te(l,"class","h-1 w-7 rounded bg-base-content transition-all"),dr(l,"w-0",!i[0]),dr(l,"opacity-0",!i[0]),dr(l,"opacity-100",i[0])},m(d,_){R(d,e,_),R(d,n,_),R(d,t,_),ce(t,r),ce(t,s),ce(t,a),R(d,o,_),R(d,l,_)},p(d,_){_&1&&dr(e,"w-0",!d[0]),_&1&&dr(e,"opacity-0",!d[0]),_&1&&dr(e,"opacity-100",d[0]),_&1&&dr(r,"rotate-45",!d[0]),_&1&&dr(a,"-rotate-45",!d[0]),_&1&&dr(l,"w-0",!d[0]),_&1&&dr(l,"opacity-0",!d[0]),_&1&&dr(l,"opacity-100",d[0])},d(d){d&&(S(e),S(n),S(t),S(o),S(l))}}}function pT(i){let e,n,t,r,s,a="Natreon",o,l,d="Natreon",_,b,w;return t=new Vn({props:{variant:"outline",size:"none",class:"flex-col btn btn-square p-0",$$slots:{default:[dT]},$$scope:{ctx:i}}}),t.$on("click",i[1]),b=new hT({}),{c(){e=oe("header"),n=oe("div"),N(t.$$.fragment),r=de(),s=oe("h1"),s.textContent=a,o=de(),l=oe("h1"),l.textContent=d,_=de(),N(b.$$.fragment),this.h()},l(E){e=ae(E,"HEADER",{id:!0,class:!0});var L=$e(e);n=ae(L,"DIV",{class:!0});var M=$e(n);j(t.$$.fragment,M),M.forEach(S),r=pe(L),s=ae(L,"H1",{class:!0,"data-svelte-h":!0}),an(s)!=="svelte-1i53c1w"&&(s.textContent=a),o=pe(L),l=ae(L,"H1",{class:!0,"data-svelte-h":!0}),an(l)!=="svelte-8xrexm"&&(l.textContent=d),_=pe(L),j(b.$$.fragment,L),L.forEach(S),this.h()},h(){te(n,"class","px-1 md:hidden"),te(s,"class","select-none px-4 hidden md:block"),te(l,"class","select-none md:hidden absolute left-1/2 -translate-x-1/2"),te(e,"id","app-header"),te(e,"class","p-2 flex items-center justify-between sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60")},m(E,L){R(E,e,L),ce(e,n),V(t,n,null),ce(e,r),ce(e,s),ce(e,o),ce(e,l),ce(e,_),V(b,e,null),w=!0},p(E,[L]){const M={};L&5&&(M.$$scope={dirty:L,ctx:E}),t.$set(M)},i(E){w||(T(t.$$.fragment,E),T(b.$$.fragment,E),w=!0)},o(E){I(t.$$.fragment,E),I(b.$$.fragment,E),w=!1},d(E){E&&S(e),U(t),U(b)}}}function mT(i,e,n){let{menuClosed:t}=e;const r=()=>n(0,t=!t);return i.$$set=s=>{"menuClosed"in s&&n(0,t=s.menuClosed)},[t,r]}class _T extends it{constructor(e){super(),ot(this,e,mT,pT,nt,{menuClosed:0})}}function gT(i){let e,n,t;return e=new Qw({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=Ve("Home")},l(r){j(e.$$.fragment,r),n=Ue(r,"Home")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function vT(i){let e,n,t;return e=new X2({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=Ve("Social Network")},l(r){j(e.$$.fragment,r),n=Ue(r,"Social Network")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function yT(i){let e,n,t;return e=new J$({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=Ve("Points & Badges")},l(r){j(e.$$.fragment,r),n=Ue(r,"Points & Badges")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function bT(i){let e,n,t;return e=new Vf({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=Ve("Checked-in POIs")},l(r){j(e.$$.fragment,r),n=Ue(r,"Checked-in POIs")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function $T(i){let e,n,t;return e=new Ml({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=Ve("Favourite POIs")},l(r){j(e.$$.fragment,r),n=Ue(r,"Favourite POIs")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function wT(i){let e,n,t;return e=new w2({props:{class:"h-5 w-5 mr-2"}}),{c(){N(e.$$.fragment),n=Ve("Profile Settings")},l(r){j(e.$$.fragment,r),n=Ue(r,"Profile Settings")},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function xT(i){var Dt,Ct,nn,yn,cn;let e,n,t,r,s,a,o,l,d,_,b,w,E,L,M,F,q,G,Q,ge,le,re,me,se,Z,Y,ie,be,fe,ke,je,Se,Qe,Xe,at,mt;return t=new Vn({props:{variant:i[0]?"outline":"secondary",href:`/app${Rn.HOME?"/"+Rn.HOME:""}`,"data-testid":"home-button",class:"flex items-center text-sm justify-start",$$slots:{default:[gT]},$$scope:{ctx:i}}}),t.$on("click",i[2]),l=new Vn({props:{variant:((Dt=i[0])==null?void 0:Dt.split("/")[0])===Rn.SOCIAL_NETWORK?"secondary":"outline",href:`/app${Rn.SOCIAL_NETWORK?"/"+Rn.SOCIAL_NETWORK:""}`,"data-testid":"social-network-button",class:"flex items-center text-sm justify-start",$$slots:{default:[vT]},$$scope:{ctx:i}}}),l.$on("click",i[3]),E=new Vn({props:{variant:((Ct=i[0])==null?void 0:Ct.split("/")[0])===Rn.POINTS_AND_BADGES?"secondary":"outline",href:`/app${Rn.POINTS_AND_BADGES?"/"+Rn.POINTS_AND_BADGES:""}`,"data-testid":"points-and-badges-button",class:"flex items-center text-sm justify-start",$$slots:{default:[yT]},$$scope:{ctx:i}}}),E.$on("click",i[4]),G=new Vn({props:{variant:((nn=i[0])==null?void 0:nn.split("/")[0])===Rn.CHECK_INS?"secondary":"outline",href:`/app${Rn.CHECK_INS?"/"+Rn.CHECK_INS:""}`,"data-testid":"checked-in-pois-button",class:"flex items-center text-sm justify-start",$$slots:{default:[bT]},$$scope:{ctx:i}}}),G.$on("click",i[5]),me=new Vn({props:{variant:((yn=i[0])==null?void 0:yn.split("/")[0])===Rn.FAVOURITES?"secondary":"outline",href:`/app${Rn.FAVOURITES?"/"+Rn.FAVOURITES:""}`,"data-testid":"favourite-pois-button",class:"flex items-center text-sm justify-start",$$slots:{default:[$T]},$$scope:{ctx:i}}}),me.$on("click",i[6]),be=new Vn({props:{variant:((cn=i[0])==null?void 0:cn.split("/")[0])===Rn.SETTINGS?"secondary":"outline",href:`/app${Rn.SETTINGS?"/"+Rn.SETTINGS:""}`,"data-testid":"settings-button",class:"flex items-center text-sm justify-start",$$slots:{default:[wT]},$$scope:{ctx:i}}}),be.$on("click",i[7]),at=new L$({props:{variant:"secondary"}}),{c(){e=oe("ul"),n=oe("li"),N(t.$$.fragment),r=de(),s=oe("div"),a=de(),o=oe("li"),N(l.$$.fragment),d=de(),_=oe("div"),b=de(),w=oe("li"),N(E.$$.fragment),L=de(),M=oe("div"),F=de(),q=oe("li"),N(G.$$.fragment),Q=de(),ge=oe("div"),le=de(),re=oe("li"),N(me.$$.fragment),se=de(),Z=oe("div"),Y=de(),ie=oe("li"),N(be.$$.fragment),fe=de(),ke=oe("div"),je=de(),Se=oe("div"),Qe=de(),Xe=oe("li"),N(at.$$.fragment),this.h()},l(At){e=ae(At,"UL",{class:!0,role:!0});var Tt=$e(e);n=ae(Tt,"LI",{role:!0});var dn=$e(n);j(t.$$.fragment,dn),dn.forEach(S),r=pe(Tt),s=ae(Tt,"DIV",{class:!0}),$e(s).forEach(S),a=pe(Tt),o=ae(Tt,"LI",{role:!0});var rt=$e(o);j(l.$$.fragment,rt),rt.forEach(S),d=pe(Tt),_=ae(Tt,"DIV",{class:!0}),$e(_).forEach(S),b=pe(Tt),w=ae(Tt,"LI",{role:!0});var Kt=$e(w);j(E.$$.fragment,Kt),Kt.forEach(S),L=pe(Tt),M=ae(Tt,"DIV",{class:!0}),$e(M).forEach(S),F=pe(Tt),q=ae(Tt,"LI",{role:!0});var en=$e(q);j(G.$$.fragment,en),en.forEach(S),Q=pe(Tt),ge=ae(Tt,"DIV",{class:!0}),$e(ge).forEach(S),le=pe(Tt),re=ae(Tt,"LI",{role:!0});var Ot=$e(re);j(me.$$.fragment,Ot),Ot.forEach(S),se=pe(Tt),Z=ae(Tt,"DIV",{class:!0}),$e(Z).forEach(S),Y=pe(Tt),ie=ae(Tt,"LI",{role:!0});var Et=$e(ie);j(be.$$.fragment,Et),Et.forEach(S),fe=pe(Tt),ke=ae(Tt,"DIV",{class:!0}),$e(ke).forEach(S),je=pe(Tt),Se=ae(Tt,"DIV",{class:!0}),$e(Se).forEach(S),Qe=pe(Tt),Xe=ae(Tt,"LI",{role:!0});var et=$e(Xe);j(at.$$.fragment,et),et.forEach(S),Tt.forEach(S),this.h()},h(){te(n,"role","tab"),te(s,"class","my-1"),te(o,"role","tab"),te(_,"class","my-1"),te(w,"role","tab"),te(M,"class","my-1"),te(q,"role","tab"),te(ge,"class","my-1"),te(re,"role","tab"),te(Z,"class","my-1"),te(ie,"role","tab"),te(ke,"class","grow"),te(Se,"class","my-2"),te(Xe,"role","tab"),te(e,"class","menu menu-lg p-4 min-h-full text-base-content flex-nowrap"),te(e,"role","tablist")},m(At,Tt){R(At,e,Tt),ce(e,n),V(t,n,null),ce(e,r),ce(e,s),ce(e,a),ce(e,o),V(l,o,null),ce(e,d),ce(e,_),ce(e,b),ce(e,w),V(E,w,null),ce(e,L),ce(e,M),ce(e,F),ce(e,q),V(G,q,null),ce(e,Q),ce(e,ge),ce(e,le),ce(e,re),V(me,re,null),ce(e,se),ce(e,Z),ce(e,Y),ce(e,ie),V(be,ie,null),ce(e,fe),ce(e,ke),ce(e,je),ce(e,Se),ce(e,Qe),ce(e,Xe),V(at,Xe,null),mt=!0},p(At,[Tt]){var et,bn,fn,He,Un;const dn={};Tt&1&&(dn.variant=At[0]?"outline":"secondary"),Tt&256&&(dn.$$scope={dirty:Tt,ctx:At}),t.$set(dn);const rt={};Tt&1&&(rt.variant=((et=At[0])==null?void 0:et.split("/")[0])===Rn.SOCIAL_NETWORK?"secondary":"outline"),Tt&256&&(rt.$$scope={dirty:Tt,ctx:At}),l.$set(rt);const Kt={};Tt&1&&(Kt.variant=((bn=At[0])==null?void 0:bn.split("/")[0])===Rn.POINTS_AND_BADGES?"secondary":"outline"),Tt&256&&(Kt.$$scope={dirty:Tt,ctx:At}),E.$set(Kt);const en={};Tt&1&&(en.variant=((fn=At[0])==null?void 0:fn.split("/")[0])===Rn.CHECK_INS?"secondary":"outline"),Tt&256&&(en.$$scope={dirty:Tt,ctx:At}),G.$set(en);const Ot={};Tt&1&&(Ot.variant=((He=At[0])==null?void 0:He.split("/")[0])===Rn.FAVOURITES?"secondary":"outline"),Tt&256&&(Ot.$$scope={dirty:Tt,ctx:At}),me.$set(Ot);const Et={};Tt&1&&(Et.variant=((Un=At[0])==null?void 0:Un.split("/")[0])===Rn.SETTINGS?"secondary":"outline"),Tt&256&&(Et.$$scope={dirty:Tt,ctx:At}),be.$set(Et)},i(At){mt||(T(t.$$.fragment,At),T(l.$$.fragment,At),T(E.$$.fragment,At),T(G.$$.fragment,At),T(me.$$.fragment,At),T(be.$$.fragment,At),T(at.$$.fragment,At),mt=!0)},o(At){I(t.$$.fragment,At),I(l.$$.fragment,At),I(E.$$.fragment,At),I(G.$$.fragment,At),I(me.$$.fragment,At),I(be.$$.fragment,At),I(at.$$.fragment,At),mt=!1},d(At){At&&S(e),U(t),U(l),U(E),U(G),U(me),U(be),U(at)}}}function kT(i,e,n){let{slug:t}=e;const r=El(),s=()=>r("sideMenuItemClicked"),a=()=>r("sideMenuItemClicked"),o=()=>r("sideMenuItemClicked"),l=()=>r("sideMenuItemClicked"),d=()=>r("sideMenuItemClicked"),_=()=>r("sideMenuItemClicked");return i.$$set=b=>{"slug"in b&&n(0,t=b.slug)},[t,r,s,a,o,l,d,_]}class Dv extends it{constructor(e){super(),ot(this,e,kT,xT,nt,{slug:0})}}function CT(i){let e,n,t;return n=new Dv({props:{slug:i[0]}}),n.$on("sideMenuItemClicked",i[1]),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","hidden w-64 h-full flex-col md:flex shrink-0")},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,[s]){const a={};s&1&&(a.slug=r[0]),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function ST(i,e,n){let{slug:t}=e;function r(s){Wt.call(this,i,s)}return i.$$set=s=>{"slug"in s&&n(0,t=s.slug)},[t,r]}class TT extends it{constructor(e){super(),ot(this,e,ST,CT,nt,{slug:0})}}function IT(i){let e,n,t;return n=new Dv({props:{slug:i[1]}}),n.$on("sideMenuItemClicked",i[2]),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","absolute left-0 z-20 flex h-full w-64 flex-col transition-all md:hidden shrink-0 bg-background svelte-v8wrex"),dr(e,"menuClosed",i[0])},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,[s]){const a={};s&2&&(a.slug=r[1]),n.$set(a),(!t||s&1)&&dr(e,"menuClosed",r[0])},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function ET(i,e,n){let{menuClosed:t}=e,{slug:r}=e;function s(a){Wt.call(this,i,a)}return i.$$set=a=>{"menuClosed"in a&&n(0,t=a.menuClosed),"slug"in a&&n(1,r=a.slug)},[t,r,s]}class PT extends it{constructor(e){super(),ot(this,e,ET,IT,nt,{menuClosed:0,slug:1})}}function AT(i){let e,n,t,r;return e=new TT({props:{slug:i[1]}}),e.$on("sideMenuItemClicked",i[2]),t=new PT({props:{menuClosed:i[0],slug:i[1]}}),t.$on("sideMenuItemClicked",i[2]),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,[a]){const o={};a&2&&(o.slug=s[1]),e.$set(o);const l={};a&1&&(l.menuClosed=s[0]),a&2&&(l.slug=s[1]),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function MT(i,e,n){let{menuClosed:t}=e,{slug:r}=e;const s=()=>n(0,t=!0);return i.$$set=a=>{"menuClosed"in a&&n(0,t=a.menuClosed),"slug"in a&&n(1,r=a.slug)},[t,r,s]}class DT extends it{constructor(e){super(),ot(this,e,MT,AT,nt,{menuClosed:0,slug:1})}}const Ld=Symbol.for("svelte-maplibre");function Dl(){return bi(Ld)}function zT(i){let e=new WeakMap;return n=>{var a;let t=e.get(n.originalEvent);if(t!==void 0)return t;let s=(a=n.target.queryRenderedFeatures(n.point).find(o=>{var l;return(l=i.get(o.layer.id))==null?void 0:l.interactive}))==null?void 0:a.layer.id;return e.set(n.originalEvent,s),s}}function LT(){let i=new Map;return Ei(Ld,{map:yr(null),source:va(null),layer:va(null),popupTarget:va(null),cluster:yr(),loadedImages:yr(new Set),minzoom:yr(0),maxzoom:yr(24),layerEvent:yr(null),layerInfo:i,eventTopMost:zT(i)})}function F_(i){return{subscribe:i.subscribe}}function RT({key:i,setPopupTarget:e=!1,setCluster:n=!1,setMouseEvent:t=!1}){let r=Dl(),s=yr(null),a=F_(s),o={...r,[i]:F_(s)};if(e&&(o.popupTarget=a),t){let l=yr(null);o.layerEvent=l,r.layerEvent=l}return n&&(o.cluster=yr()),Ei(Ld,o),{...r,self:s}}function OT(){return RT({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function FT(i){return"layerType"in i&&i.layerType==="deckgl"}var zv={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.3/LICENSE.txt
 */(function(i,e){(function(n,t){i.exports=t()})(iw,function(){var n={},t={};function r(a,o,l){if(t[a]=l,a==="index"){var d="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",_={};return t.shared(_),t.index(n,_),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([d],{type:"text/javascript"}))),n}}r("shared",["exports"],function(a){function o(f,c,h,m){return new(h||(h=Promise))(function(y,k){function C(B){try{z(m.next(B))}catch(W){k(W)}}function P(B){try{z(m.throw(B))}catch(W){k(W)}}function z(B){var W;B.done?y(B.value):(W=B.value,W instanceof h?W:new h(function(K){K(W)})).then(C,P)}z((m=m.apply(f,c||[])).next())})}function l(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}typeof SuppressedError=="function"&&SuppressedError;var d=_;function _(f,c){this.x=f,this.y=c}_.prototype={clone:function(){return new _(this.x,this.y)},add:function(f){return this.clone()._add(f)},sub:function(f){return this.clone()._sub(f)},multByPoint:function(f){return this.clone()._multByPoint(f)},divByPoint:function(f){return this.clone()._divByPoint(f)},mult:function(f){return this.clone()._mult(f)},div:function(f){return this.clone()._div(f)},rotate:function(f){return this.clone()._rotate(f)},rotateAround:function(f,c){return this.clone()._rotateAround(f,c)},matMult:function(f){return this.clone()._matMult(f)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(f){return this.x===f.x&&this.y===f.y},dist:function(f){return Math.sqrt(this.distSqr(f))},distSqr:function(f){var c=f.x-this.x,h=f.y-this.y;return c*c+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith:function(f){return this.angleWithSep(f.x,f.y)},angleWithSep:function(f,c){return Math.atan2(this.x*c-this.y*f,this.x*f+this.y*c)},_matMult:function(f){var c=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=c,this},_add:function(f){return this.x+=f.x,this.y+=f.y,this},_sub:function(f){return this.x-=f.x,this.y-=f.y,this},_mult:function(f){return this.x*=f,this.y*=f,this},_div:function(f){return this.x/=f,this.y/=f,this},_multByPoint:function(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint:function(f){return this.x/=f.x,this.y/=f.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var f=this.y;return this.y=this.x,this.x=-f,this},_rotate:function(f){var c=Math.cos(f),h=Math.sin(f),m=h*this.x+c*this.y;return this.x=c*this.x-h*this.y,this.y=m,this},_rotateAround:function(f,c){var h=Math.cos(f),m=Math.sin(f),y=c.y+m*(this.x-c.x)+h*(this.y-c.y);return this.x=c.x+h*(this.x-c.x)-m*(this.y-c.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},_.convert=function(f){return f instanceof _?f:Array.isArray(f)?new _(f[0],f[1]):f};var b=l(d),w=E;function E(f,c,h,m){this.cx=3*f,this.bx=3*(h-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(m-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=c,this.p2x=h,this.p2y=m}E.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,c){if(c===void 0&&(c=1e-6),f<0)return 0;if(f>1)return 1;for(var h=f,m=0;m<8;m++){var y=this.sampleCurveX(h)-f;if(Math.abs(y)<c)return h;var k=this.sampleCurveDerivativeX(h);if(Math.abs(k)<1e-6)break;h-=y/k}var C=0,P=1;for(h=f,m=0;m<20&&(y=this.sampleCurveX(h),!(Math.abs(y-f)<c));m++)f>y?C=h:P=h,h=.5*(P-C)+C;return h},solve:function(f,c){return this.sampleCurveY(this.solveCurveX(f,c))}};var L=l(w);let M,F;function q(){return M==null&&(M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),M}function G(){if(F==null&&(F=!1,q())){const c=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(c){for(let m=0;m<5*5;m++){const y=4*m;c.fillStyle=`rgb(${y},${y+1},${y+2})`,c.fillRect(m%5,Math.floor(m/5),1,1)}const h=c.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&h[m]!==m){F=!0;break}}}return F||!1}function Q(f,c,h,m){const y=new L(f,c,h,m);return function(k){return y.solve(k)}}const ge=Q(.25,.1,.25,1);function le(f,c,h){return Math.min(h,Math.max(c,f))}function re(f,c,h){const m=h-c,y=((f-c)%m+m)%m+c;return y===c?h:y}function me(f,...c){for(const h of c)for(const m in h)f[m]=h[m];return f}let se=1;function Z(f,c,h){const m={};for(const y in f)m[y]=c.call(h||this,f[y],y,f);return m}function Y(f,c,h){const m={};for(const y in f)c.call(h||this,f[y],y,f)&&(m[y]=f[y]);return m}function ie(f){return Array.isArray(f)?f.map(ie):typeof f=="object"&&f?Z(f,ie):f}const be={};function fe(f){be[f]||(typeof console<"u"&&console.warn(f),be[f]=!0)}function ke(f,c,h){return(h.y-f.y)*(c.x-f.x)>(c.y-f.y)*(h.x-f.x)}function je(f){let c=0;for(let h,m,y=0,k=f.length,C=k-1;y<k;C=y++)h=f[y],m=f[C],c+=(m.x-h.x)*(h.y+m.y);return c}function Se(f){return typeof WorkerGlobalScope<"u"&&f!==void 0&&f instanceof WorkerGlobalScope}let Qe=null;function Xe(f){return typeof ImageBitmap<"u"&&f instanceof ImageBitmap}const at="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function mt(f,c,h,m,y){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const k=new VideoFrame(f,{timestamp:0});try{const C=k==null?void 0:k.format;if(!C||!C.startsWith("BGR")&&!C.startsWith("RGB"))throw new Error(`Unrecognized format ${C}`);const P=C.startsWith("BGR"),z=new Uint8ClampedArray(m*y*4);if(yield k.copyTo(z,function(B,W,K,ne,he){const ve=4*Math.max(-W,0),xe=(Math.max(0,K)-K)*ne*4+ve,Pe=4*ne,ze=Math.max(0,W),We=Math.max(0,K);return{rect:{x:ze,y:We,width:Math.min(B.width,W+ne)-ze,height:Math.min(B.height,K+he)-We},layout:[{offset:xe,stride:Pe}]}}(f,c,h,m,y)),P)for(let B=0;B<z.length;B+=4){const W=z[B];z[B]=z[B+2],z[B+2]=W}return z}finally{k.close()}})}let Dt,Ct;const nn="AbortError";function yn(){return new Error(nn)}const cn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function At(f){return cn.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}const Tt="global-dispatcher";class dn extends Error{constructor(c,h,m,y){super(`AJAXError: ${h} (${c}): ${m}`),this.status=c,this.statusText=h,this.url=m,this.body=y}}const rt=()=>Se(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Kt=function(f,c){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){const m=At(f.url);if(m)return m(f,c);if(Se(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:Tt},c)}if(!(/^file:/.test(h=f.url)||/^file:/.test(rt())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,y){return o(this,void 0,void 0,function*(){const k=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:rt(),signal:y.signal});m.type==="json"&&k.headers.set("Accept","application/json");const C=yield fetch(k);if(!C.ok){const B=yield C.blob();throw new dn(C.status,C.statusText,m.url,B)}let P;P=m.type==="arrayBuffer"||m.type==="image"?C.arrayBuffer():m.type==="json"?C.json():C.text();const z=yield P;if(y.signal.aborted)throw yn();return{data:z,cacheControl:C.headers.get("Cache-Control"),expires:C.headers.get("Expires")}})}(f,c);if(Se(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:Tt},c)}var h;return function(m,y){return new Promise((k,C)=>{const P=new XMLHttpRequest;P.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(P.responseType="arraybuffer");for(const z in m.headers)P.setRequestHeader(z,m.headers[z]);m.type==="json"&&(P.responseType="text",P.setRequestHeader("Accept","application/json")),P.withCredentials=m.credentials==="include",P.onerror=()=>{C(new Error(P.statusText))},P.onload=()=>{if(!y.signal.aborted)if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let z=P.response;if(m.type==="json")try{z=JSON.parse(P.response)}catch(B){return void C(B)}k({data:z,cacheControl:P.getResponseHeader("Cache-Control"),expires:P.getResponseHeader("Expires")})}else{const z=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});C(new dn(P.status,P.statusText,m.url,z))}},y.signal.addEventListener("abort",()=>{P.abort(),C(yn())}),P.send(m.body)})}(f,c)};function en(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;const c=new URL(f),h=window.location;return c.protocol===h.protocol&&c.host===h.host}function Ot(f,c,h){h[f]&&h[f].indexOf(c)!==-1||(h[f]=h[f]||[],h[f].push(c))}function Et(f,c,h){if(h&&h[f]){const m=h[f].indexOf(c);m!==-1&&h[f].splice(m,1)}}class et{constructor(c,h={}){me(this,h),this.type=c}}class bn extends et{constructor(c,h={}){super("error",me({error:c},h))}}class fn{on(c,h){return this._listeners=this._listeners||{},Ot(c,h,this._listeners),this}off(c,h){return Et(c,h,this._listeners),Et(c,h,this._oneTimeListeners),this}once(c,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},Ot(c,h,this._oneTimeListeners),this):new Promise(m=>this.once(c,m))}fire(c,h){typeof c=="string"&&(c=new et(c,h||{}));const m=c.type;if(this.listens(m)){c.target=this;const y=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const P of y)P.call(this,c);const k=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const P of k)Et(m,P,this._oneTimeListeners),P.call(this,c);const C=this._eventedParent;C&&(me(c,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(c))}else c instanceof bn&&console.error(c.error);return this}listens(c){return this._listeners&&this._listeners[c]&&this._listeners[c].length>0||this._oneTimeListeners&&this._oneTimeListeners[c]&&this._oneTimeListeners[c].length>0||this._eventedParent&&this._eventedParent.listens(c)}setEventedParent(c,h){return this._eventedParent=c,this._eventedParentData=h,this}}var He={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Un=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function br(f,c){const h={};for(const m in f)m!=="ref"&&(h[m]=f[m]);return Un.forEach(m=>{m in c&&(h[m]=c[m])}),h}function wn(f,c){if(Array.isArray(f)){if(!Array.isArray(c)||f.length!==c.length)return!1;for(let h=0;h<f.length;h++)if(!wn(f[h],c[h]))return!1;return!0}if(typeof f=="object"&&f!==null&&c!==null){if(typeof c!="object"||Object.keys(f).length!==Object.keys(c).length)return!1;for(const h in f)if(!wn(f[h],c[h]))return!1;return!0}return f===c}function Gn(f,c){f.push(c)}function gs(f,c,h){Gn(h,{command:"addSource",args:[f,c[f]]})}function Ds(f,c,h){Gn(c,{command:"removeSource",args:[f]}),h[f]=!0}function vs(f,c,h,m){Ds(f,h,m),gs(f,c,h)}function ys(f,c,h){let m;for(m in f[h])if(Object.prototype.hasOwnProperty.call(f[h],m)&&m!=="data"&&!wn(f[h][m],c[h][m]))return!1;for(m in c[h])if(Object.prototype.hasOwnProperty.call(c[h],m)&&m!=="data"&&!wn(f[h][m],c[h][m]))return!1;return!0}function bs(f,c,h,m,y,k){f=f||{},c=c||{};for(const C in f)Object.prototype.hasOwnProperty.call(f,C)&&(wn(f[C],c[C])||h.push({command:k,args:[m,C,c[C],y]}));for(const C in c)Object.prototype.hasOwnProperty.call(c,C)&&!Object.prototype.hasOwnProperty.call(f,C)&&(wn(f[C],c[C])||h.push({command:k,args:[m,C,c[C],y]}))}function si(f){return f.id}function pt(f,c){return f[c.id]=c,f}class Lt{constructor(c,h,m,y){this.message=(c?`${c}: `:"")+m,y&&(this.identifier=y),h!=null&&h.__line__&&(this.line=h.__line__)}}function $s(f,...c){for(const h of c)for(const m in h)f[m]=h[m];return f}class Xr extends Error{constructor(c,h){super(h),this.message=h,this.key=c}}class Ki{constructor(c,h=[]){this.parent=c,this.bindings={};for(const[m,y]of h)this.bindings[m]=y}concat(c){return new Ki(this,c)}get(c){if(this.bindings[c])return this.bindings[c];if(this.parent)return this.parent.get(c);throw new Error(`${c} not found in scope.`)}has(c){return!!this.bindings[c]||!!this.parent&&this.parent.has(c)}}const Jr={kind:"null"},Ut={kind:"number"},In={kind:"string"},Tn={kind:"boolean"},$r={kind:"color"},qs={kind:"object"},Cn={kind:"value"},ii={kind:"collator"},Or={kind:"formatted"},Ae={kind:"padding"},ee={kind:"resolvedImage"},ue={kind:"variableAnchorOffsetCollection"};function ye(f,c){return{kind:"array",itemType:f,N:c}}function Te(f){if(f.kind==="array"){const c=Te(f.itemType);return typeof f.N=="number"?`array<${c}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${c}>`}return f.kind}const Be=[Jr,Ut,In,Tn,$r,Or,qs,ye(Cn),Ae,ee,ue];function Ne(f,c){if(c.kind==="error")return null;if(f.kind==="array"){if(c.kind==="array"&&(c.N===0&&c.itemType.kind==="value"||!Ne(f.itemType,c.itemType))&&(typeof f.N!="number"||f.N===c.N))return null}else{if(f.kind===c.kind)return null;if(f.kind==="value"){for(const h of Be)if(!Ne(h,c))return null}}return`Expected ${Te(f)} but found ${Te(c)} instead.`}function Ze(f,c){return c.some(h=>h.kind===f.kind)}function Re(f,c){return c.some(h=>h==="null"?f===null:h==="array"?Array.isArray(f):h==="object"?f&&!Array.isArray(f)&&typeof f=="object":h===typeof f)}function Ke(f,c){return f.kind==="array"&&c.kind==="array"?f.itemType.kind===c.itemType.kind&&typeof f.N=="number":f.kind===c.kind}const vt=.96422,ut=.82521,ft=4/29,hn=6/29,_n=3*hn*hn,En=hn*hn*hn,Sn=Math.PI/180,Fn=180/Math.PI;function Jn(f){return(f%=360)<0&&(f+=360),f}function ir([f,c,h,m]){let y,k;const C=Mn((.2225045*(f=Ir(f))+.7168786*(c=Ir(c))+.0606169*(h=Ir(h)))/1);f===c&&c===h?y=k=C:(y=Mn((.4360747*f+.3850649*c+.1430804*h)/vt),k=Mn((.0139322*f+.0971045*c+.7141733*h)/ut));const P=116*C-16;return[P<0?0:P,500*(y-C),200*(C-k),m]}function Ir(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Mn(f){return f>En?Math.pow(f,1/3):f/_n+ft}function mr([f,c,h,m]){let y=(f+16)/116,k=isNaN(c)?y:y+c/500,C=isNaN(h)?y:y-h/200;return y=1*cs(y),k=vt*cs(k),C=ut*cs(C),[Fr(3.1338561*k-1.6168667*y-.4906146*C),Fr(-.9787684*k+1.9161415*y+.033454*C),Fr(.0719453*k-.2289914*y+1.4052427*C),m]}function Fr(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function cs(f){return f>hn?f*f*f:_n*(f-ft)}function ws(f){return parseInt(f.padEnd(2,f),16)/255}function Yr(f,c){return oi(c?f/100:f,0,1)}function oi(f,c,h){return Math.min(Math.max(c,f),h)}function hu(f){return!f.some(Number.isNaN)}const eh={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Wn{constructor(c,h,m,y=1,k=!0){this.r=c,this.g=h,this.b=m,this.a=y,k||(this.r*=y,this.g*=y,this.b*=y,y||this.overwriteGetter("rgb",[c,h,m,y]))}static parse(c){if(c instanceof Wn)return c;if(typeof c!="string")return;const h=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];const y=eh[m];if(y){const[C,P,z]=y;return[C/255,P/255,z/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){const C=m.length<6?1:2;let P=1;return[ws(m.slice(P,P+=C)),ws(m.slice(P,P+=C)),ws(m.slice(P,P+=C)),ws(m.slice(P,P+C)||"ff")]}if(m.startsWith("rgb")){const C=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[P,z,B,W,K,ne,he,ve,xe,Pe,ze,We]=C,Le=[W||" ",he||" ",Pe].join("");if(Le==="  "||Le==="  /"||Le===",,"||Le===",,,"){const qe=[B,ne,xe].join(""),ct=qe==="%%%"?100:qe===""?255:0;if(ct){const _t=[oi(+z/ct,0,1),oi(+K/ct,0,1),oi(+ve/ct,0,1),ze?Yr(+ze,We):1];if(hu(_t))return _t}}return}}const k=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[C,P,z,B,W,K,ne,he,ve]=k,xe=[z||" ",W||" ",ne].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const Pe=[+P,oi(+B,0,100),oi(+K,0,100),he?Yr(+he,ve):1];if(hu(Pe))return function([ze,We,Le,qe]){function ct(_t){const Yt=(_t+ze/30)%12,on=We*Math.min(Le,1-Le);return Le-on*Math.max(-1,Math.min(Yt-3,9-Yt,1))}return ze=Jn(ze),We/=100,Le/=100,[ct(0),ct(8),ct(4),qe]}(Pe)}}}(c);return h?new Wn(...h,!1):void 0}get rgb(){const{r:c,g:h,b:m,a:y}=this,k=y||1/0;return this.overwriteGetter("rgb",[c/k,h/k,m/k,y])}get hcl(){return this.overwriteGetter("hcl",function(c){const[h,m,y,k]=ir(c),C=Math.sqrt(m*m+y*y);return[Math.round(1e4*C)?Jn(Math.atan2(y,m)*Fn):NaN,C,h,k]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ir(this.rgb))}overwriteGetter(c,h){return Object.defineProperty(this,c,{value:h}),h}toString(){const[c,h,m,y]=this.rgb;return`rgba(${[c,h,m].map(k=>Math.round(255*k)).join(",")},${y})`}}Wn.black=new Wn(0,0,0,1),Wn.white=new Wn(1,1,1,1),Wn.transparent=new Wn(0,0,0,0),Wn.red=new Wn(1,0,0,1);class Fl{constructor(c,h,m){this.sensitivity=c?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(c,h){return this.collator.compare(c,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Bl{constructor(c,h,m,y,k){this.text=c,this.image=h,this.scale=m,this.fontStack=y,this.textColor=k}}class zs{constructor(c){this.sections=c}static fromString(c){return new zs([new Bl(c,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(c=>c.text.length!==0||c.image&&c.image.name.length!==0)}static factory(c){return c instanceof zs?c:zs.fromString(c)}toString(){return this.sections.length===0?"":this.sections.map(c=>c.text).join("")}}class xs{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof xs)return c;if(typeof c=="number")return new xs([c,c,c,c]);if(Array.isArray(c)&&!(c.length<1||c.length>4)){for(const h of c)if(typeof h!="number")return;switch(c.length){case 1:c=[c[0],c[0],c[0],c[0]];break;case 2:c=[c[0],c[1],c[0],c[1]];break;case 3:c=[c[0],c[1],c[2],c[1]]}return new xs(c)}}toString(){return JSON.stringify(this.values)}}const jo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Gs{constructor(c){this.values=c.slice()}static parse(c){if(c instanceof Gs)return c;if(Array.isArray(c)&&!(c.length<1)&&c.length%2==0){for(let h=0;h<c.length;h+=2){const m=c[h],y=c[h+1];if(typeof m!="string"||!jo.has(m)||!Array.isArray(y)||y.length!==2||typeof y[0]!="number"||typeof y[1]!="number")return}return new Gs(c)}}toString(){return JSON.stringify(this.values)}}class Hs{constructor(c){this.name=c.name,this.available=c.available}toString(){return this.name}static fromString(c){return c?new Hs({name:c,available:!1}):null}}function mo(f,c,h,m){return typeof f=="number"&&f>=0&&f<=255&&typeof c=="number"&&c>=0&&c<=255&&typeof h=="number"&&h>=0&&h<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[f,c,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[f,c,h,m]:[f,c,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ta(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Wn||f instanceof Fl||f instanceof zs||f instanceof xs||f instanceof Gs||f instanceof Hs)return!0;if(Array.isArray(f)){for(const c of f)if(!Ta(c))return!1;return!0}if(typeof f=="object"){for(const c in f)if(!Ta(f[c]))return!1;return!0}return!1}function Er(f){if(f===null)return Jr;if(typeof f=="string")return In;if(typeof f=="boolean")return Tn;if(typeof f=="number")return Ut;if(f instanceof Wn)return $r;if(f instanceof Fl)return ii;if(f instanceof zs)return Or;if(f instanceof xs)return Ae;if(f instanceof Gs)return ue;if(f instanceof Hs)return ee;if(Array.isArray(f)){const c=f.length;let h;for(const m of f){const y=Er(m);if(h){if(h===y)continue;h=Cn;break}h=y}return ye(h||Cn,c)}return qs}function qo(f){const c=typeof f;return f===null?"":c==="string"||c==="number"||c==="boolean"?String(f):f instanceof Wn||f instanceof zs||f instanceof xs||f instanceof Gs||f instanceof Hs?f.toString():JSON.stringify(f)}class Pi{constructor(c,h){this.type=c,this.value=h}static parse(c,h){if(c.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${c.length-1} instead.`);if(!Ta(c[1]))return h.error("invalid value");const m=c[1];let y=Er(m);const k=h.expectedType;return y.kind!=="array"||y.N!==0||!k||k.kind!=="array"||typeof k.N=="number"&&k.N!==0||(y=k),new Pi(y,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class cr{constructor(c){this.name="ExpressionEvaluationError",this.message=c}toJSON(){return this.message}}const Ia={string:In,number:Ut,boolean:Tn,object:qs};class Ls{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");let m,y=1;const k=c[0];if(k==="array"){let P,z;if(c.length>2){const B=c[1];if(typeof B!="string"||!(B in Ia)||B==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);P=Ia[B],y++}else P=Cn;if(c.length>3){if(c[2]!==null&&(typeof c[2]!="number"||c[2]<0||c[2]!==Math.floor(c[2])))return h.error('The length argument to "array" must be a positive integer literal',2);z=c[2],y++}m=ye(P,z)}else{if(!Ia[k])throw new Error(`Types doesn't contain name = ${k}`);m=Ia[k]}const C=[];for(;y<c.length;y++){const P=h.parse(c[y],y,Cn);if(!P)return null;C.push(P)}return new Ls(m,C)}evaluate(c){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(c);if(!Ne(this.type,Er(m)))return m;if(h===this.args.length-1)throw new cr(`Expected value to be of type ${Te(this.type)}, but found ${Te(Er(m))} instead.`)}throw new Error}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Ea={"to-boolean":Tn,"to-color":$r,"to-number":Ut,"to-string":In};class ai{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");const m=c[0];if(!Ea[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&c.length!==2)return h.error("Expected one argument.");const y=Ea[m],k=[];for(let C=1;C<c.length;C++){const P=h.parse(c[C],C,Cn);if(!P)return null;k.push(P)}return new ai(y,k)}evaluate(c){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(c);case"color":{let h,m;for(const y of this.args){if(h=y.evaluate(c),m=null,h instanceof Wn)return h;if(typeof h=="string"){const k=c.parseColor(h);if(k)return k}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:mo(h[0],h[1],h[2],h[3]),!m))return new Wn(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new cr(m||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const m of this.args){h=m.evaluate(c);const y=xs.parse(h);if(y)return y}throw new cr(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const m of this.args){h=m.evaluate(c);const y=Gs.parse(h);if(y)return y}throw new cr(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const m of this.args){if(h=m.evaluate(c),h===null)return 0;const y=Number(h);if(!isNaN(y))return y}throw new cr(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return zs.fromString(qo(this.args[0].evaluate(c)));case"resolvedImage":return Hs.fromString(qo(this.args[0].evaluate(c)));default:return qo(this.args[0].evaluate(c))}}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}const Go=["Unknown","Point","LineString","Polygon"];class Kn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Go[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(c){let h=this._parseColorCache[c];return h||(h=this._parseColorCache[c]=Wn.parse(c)),h}}class Pa{constructor(c,h,m=[],y,k=new Ki,C=[]){this.registry=c,this.path=m,this.key=m.map(P=>`[${P}]`).join(""),this.scope=k,this.errors=C,this.expectedType=y,this._isConstant=h}parse(c,h,m,y,k={}){return h?this.concat(h,m,y)._parse(c,k):this._parse(c,k)}_parse(c,h){function m(y,k,C){return C==="assert"?new Ls(k,[y]):C==="coerce"?new ai(k,[y]):y}if(c!==null&&typeof c!="string"&&typeof c!="boolean"&&typeof c!="number"||(c=["literal",c]),Array.isArray(c)){if(c.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=c[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const k=this.registry[y];if(k){let C=k.parse(c,this);if(!C)return null;if(this.expectedType){const P=this.expectedType,z=C.type;if(P.kind!=="string"&&P.kind!=="number"&&P.kind!=="boolean"&&P.kind!=="object"&&P.kind!=="array"||z.kind!=="value")if(P.kind!=="color"&&P.kind!=="formatted"&&P.kind!=="resolvedImage"||z.kind!=="value"&&z.kind!=="string")if(P.kind!=="padding"||z.kind!=="value"&&z.kind!=="number"&&z.kind!=="array")if(P.kind!=="variableAnchorOffsetCollection"||z.kind!=="value"&&z.kind!=="array"){if(this.checkSubtype(P,z))return null}else C=m(C,P,h.typeAnnotation||"coerce");else C=m(C,P,h.typeAnnotation||"coerce");else C=m(C,P,h.typeAnnotation||"coerce");else C=m(C,P,h.typeAnnotation||"assert")}if(!(C instanceof Pi)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){const P=new Kn;try{C=new Pi(C.type,C.evaluate(P))}catch(z){return this.error(z.message),null}}return C}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(c===void 0?"'undefined' value invalid. Use null instead.":typeof c=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof c} instead.`)}concat(c,h,m){const y=typeof c=="number"?this.path.concat(c):this.path,k=m?this.scope.concat(m):this.scope;return new Pa(this.registry,this._isConstant,y,h||null,k,this.errors)}error(c,...h){const m=`${this.key}${h.map(y=>`[${y}]`).join("")}`;this.errors.push(new Xr(m,c))}checkSubtype(c,h){const m=Ne(c,h);return m&&this.error(m),m}}class _o{constructor(c,h,m){this.type=ii,this.locale=m,this.caseSensitive=c,this.diacriticSensitive=h}static parse(c,h){if(c.length!==2)return h.error("Expected one argument.");const m=c[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");const y=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Tn);if(!y)return null;const k=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Tn);if(!k)return null;let C=null;return m.locale&&(C=h.parse(m.locale,1,In),!C)?null:new _o(y,k,C)}evaluate(c){return new Fl(this.caseSensitive.evaluate(c),this.diacriticSensitive.evaluate(c),this.locale?this.locale.evaluate(c):null)}eachChild(c){c(this.caseSensitive),c(this.diacriticSensitive),this.locale&&c(this.locale)}outputDefined(){return!1}}const Ai=8192;function Aa(f,c){f[0]=Math.min(f[0],c[0]),f[1]=Math.min(f[1],c[1]),f[2]=Math.max(f[2],c[0]),f[3]=Math.max(f[3],c[1])}function Ho(f,c){return!(f[0]<=c[0]||f[2]>=c[2]||f[1]<=c[1]||f[3]>=c[3])}function th(f,c){const h=(180+f[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,y=Math.pow(2,c.z);return[Math.round(h*y*Ai),Math.round(m*y*Ai)]}function du(f,c,h){const m=f[0]-c[0],y=f[1]-c[1],k=f[0]-h[0],C=f[1]-h[1];return m*C-k*y==0&&m*k<=0&&y*C<=0}function Ma(f,c){let h=!1;for(let C=0,P=c.length;C<P;C++){const z=c[C];for(let B=0,W=z.length;B<W-1;B++){if(du(f,z[B],z[B+1]))return!1;(y=z[B])[1]>(m=f)[1]!=(k=z[B+1])[1]>m[1]&&m[0]<(k[0]-y[0])*(m[1]-y[1])/(k[1]-y[1])+y[0]&&(h=!h)}}var m,y,k;return h}function nh(f,c){for(let h=0;h<c.length;h++)if(Ma(f,c[h]))return!0;return!1}function pu(f,c,h,m){const y=m[0]-h[0],k=m[1]-h[1],C=(f[0]-h[0])*k-y*(f[1]-h[1]),P=(c[0]-h[0])*k-y*(c[1]-h[1]);return C>0&&P<0||C<0&&P>0}function rh(f,c,h){for(const B of h)for(let W=0;W<B.length-1;++W)if((P=[(C=B[W+1])[0]-(k=B[W])[0],C[1]-k[1]])[0]*(z=[(y=c)[0]-(m=f)[0],y[1]-m[1]])[1]-P[1]*z[0]!=0&&pu(m,y,k,C)&&pu(k,C,m,y))return!0;var m,y,k,C,P,z;return!1}function mu(f,c){for(let h=0;h<f.length;++h)if(!Ma(f[h],c))return!1;for(let h=0;h<f.length-1;++h)if(rh(f[h],f[h+1],c))return!1;return!0}function _u(f,c){for(let h=0;h<c.length;h++)if(mu(f,c[h]))return!0;return!1}function Da(f,c,h){const m=[];for(let y=0;y<f.length;y++){const k=[];for(let C=0;C<f[y].length;C++){const P=th(f[y][C],h);Aa(c,P),k.push(P)}m.push(k)}return m}function gu(f,c,h){const m=[];for(let y=0;y<f.length;y++){const k=Da(f[y],c,h);m.push(k)}return m}function vu(f,c,h,m){if(f[0]<h[0]||f[0]>h[2]){const y=.5*m;let k=f[0]-h[0]>y?-m:h[0]-f[0]>y?m:0;k===0&&(k=f[0]-h[2]>y?-m:h[2]-f[0]>y?m:0),f[0]+=k}Aa(c,f)}function za(f,c,h,m){const y=Math.pow(2,m.z)*Ai,k=[m.x*Ai,m.y*Ai],C=[];for(const P of f)for(const z of P){const B=[z.x+k[0],z.y+k[1]];vu(B,c,h,y),C.push(B)}return C}function yu(f,c,h,m){const y=Math.pow(2,m.z)*Ai,k=[m.x*Ai,m.y*Ai],C=[];for(const z of f){const B=[];for(const W of z){const K=[W.x+k[0],W.y+k[1]];Aa(c,K),B.push(K)}C.push(B)}if(c[2]-c[0]<=y/2){(P=c)[0]=P[1]=1/0,P[2]=P[3]=-1/0;for(const z of C)for(const B of z)vu(B,c,h,y)}var P;return C}class Xi{constructor(c,h){this.type=Tn,this.geojson=c,this.geometries=h}static parse(c,h){if(c.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${c.length-1} instead.`);if(Ta(c[1])){const m=c[1];if(m.type==="FeatureCollection"){const y=[];for(const k of m.features){const{type:C,coordinates:P}=k.geometry;C==="Polygon"&&y.push(P),C==="MultiPolygon"&&y.push(...P)}if(y.length)return new Xi(m,{type:"MultiPolygon",coordinates:y})}else if(m.type==="Feature"){const y=m.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new Xi(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Xi(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(c){if(c.geometry()!=null&&c.canonicalID()!=null){if(c.geometryType()==="Point")return function(h,m){const y=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],C=h.canonicalID();if(m.type==="Polygon"){const P=Da(m.coordinates,k,C),z=za(h.geometry(),y,k,C);if(!Ho(y,k))return!1;for(const B of z)if(!Ma(B,P))return!1}if(m.type==="MultiPolygon"){const P=gu(m.coordinates,k,C),z=za(h.geometry(),y,k,C);if(!Ho(y,k))return!1;for(const B of z)if(!nh(B,P))return!1}return!0}(c,this.geometries);if(c.geometryType()==="LineString")return function(h,m){const y=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],C=h.canonicalID();if(m.type==="Polygon"){const P=Da(m.coordinates,k,C),z=yu(h.geometry(),y,k,C);if(!Ho(y,k))return!1;for(const B of z)if(!mu(B,P))return!1}if(m.type==="MultiPolygon"){const P=gu(m.coordinates,k,C),z=yu(h.geometry(),y,k,C);if(!Ho(y,k))return!1;for(const B of z)if(!_u(B,P))return!1}return!0}(c,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class La{constructor(c,h){this.type=h.type,this.name=c,this.boundExpression=h}static parse(c,h){if(c.length!==2||typeof c[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const m=c[1];return h.scope.has(m)?new La(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(c){return this.boundExpression.evaluate(c)}eachChild(){}outputDefined(){return!1}}class Rs{constructor(c,h,m,y){this.name=c,this.type=h,this._evaluate=m,this.args=y}evaluate(c){return this._evaluate(c,this.args)}eachChild(c){this.args.forEach(c)}outputDefined(){return!1}static parse(c,h){const m=c[0],y=Rs.definitions[m];if(!y)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const k=Array.isArray(y)?y[0]:y.type,C=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,P=C.filter(([B])=>!Array.isArray(B)||B.length===c.length-1);let z=null;for(const[B,W]of P){z=new Pa(h.registry,Zo,h.path,null,h.scope);const K=[];let ne=!1;for(let he=1;he<c.length;he++){const ve=c[he],xe=Array.isArray(B)?B[he-1]:B.type,Pe=z.parse(ve,1+K.length,xe);if(!Pe){ne=!0;break}K.push(Pe)}if(!ne)if(Array.isArray(B)&&B.length!==K.length)z.error(`Expected ${B.length} arguments, but found ${K.length} instead.`);else{for(let he=0;he<K.length;he++){const ve=Array.isArray(B)?B[he]:B.type,xe=K[he];z.concat(he+1).checkSubtype(ve,xe.type)}if(z.errors.length===0)return new Rs(m,k,W,K)}}if(P.length===1)h.errors.push(...z.errors);else{const B=(P.length?P:C).map(([K])=>{return ne=K,Array.isArray(ne)?`(${ne.map(Te).join(", ")})`:`(${Te(ne.type)}...)`;var ne}).join(" | "),W=[];for(let K=1;K<c.length;K++){const ne=h.parse(c[K],1+W.length);if(!ne)return null;W.push(Te(ne.type))}h.error(`Expected arguments of type ${B}, but found (${W.join(", ")}) instead.`)}return null}static register(c,h){Rs.definitions=h;for(const m in h)c[m]=Rs}}function Zo(f){if(f instanceof La)return Zo(f.boundExpression);if(f instanceof Rs&&f.name==="error"||f instanceof _o||f instanceof Xi)return!1;const c=f instanceof ai||f instanceof Ls;let h=!0;return f.eachChild(m=>{h=c?h&&Zo(m):h&&m instanceof Pi}),!!h&&Ra(f)&&Ko(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ra(f){if(f instanceof Rs&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof Xi)return!1;let c=!0;return f.eachChild(h=>{c&&!Ra(h)&&(c=!1)}),c}function Wo(f){if(f instanceof Rs&&f.name==="feature-state")return!1;let c=!0;return f.eachChild(h=>{c&&!Wo(h)&&(c=!1)}),c}function Ko(f,c){if(f instanceof Rs&&c.indexOf(f.name)>=0)return!1;let h=!0;return f.eachChild(m=>{h&&!Ko(m,c)&&(h=!1)}),h}function Xo(f,c){const h=f.length-1;let m,y,k=0,C=h,P=0;for(;k<=C;)if(P=Math.floor((k+C)/2),m=f[P],y=f[P+1],m<=c){if(P===h||c<y)return P;k=P+1}else{if(!(m>c))throw new cr("Input is not a number.");C=P-1}return 0}class Jo{constructor(c,h,m){this.type=c,this.input=h,this.labels=[],this.outputs=[];for(const[y,k]of m)this.labels.push(y),this.outputs.push(k)}static parse(c,h){if(c.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(c[1],1,Ut);if(!m)return null;const y=[];let k=null;h.expectedType&&h.expectedType.kind!=="value"&&(k=h.expectedType);for(let C=1;C<c.length;C+=2){const P=C===1?-1/0:c[C],z=c[C+1],B=C,W=C+1;if(typeof P!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(y.length&&y[y.length-1][0]>=P)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',B);const K=h.parse(z,W,k);if(!K)return null;k=k||K.type,y.push([P,K])}return new Jo(k,m,y)}evaluate(c){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(c);const y=this.input.evaluate(c);if(y<=h[0])return m[0].evaluate(c);const k=h.length;return y>=h[k-1]?m[k-1].evaluate(c):m[Xo(h,y)].evaluate(c)}eachChild(c){c(this.input);for(const h of this.outputs)c(h)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function sh(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var ih=bu;function bu(f,c,h,m){this.cx=3*f,this.bx=3*(h-f)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(m-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=f,this.p1y=c,this.p2x=h,this.p2y=m}bu.prototype={sampleCurveX:function(f){return((this.ax*f+this.bx)*f+this.cx)*f},sampleCurveY:function(f){return((this.ay*f+this.by)*f+this.cy)*f},sampleCurveDerivativeX:function(f){return(3*this.ax*f+2*this.bx)*f+this.cx},solveCurveX:function(f,c){if(c===void 0&&(c=1e-6),f<0)return 0;if(f>1)return 1;for(var h=f,m=0;m<8;m++){var y=this.sampleCurveX(h)-f;if(Math.abs(y)<c)return h;var k=this.sampleCurveDerivativeX(h);if(Math.abs(k)<1e-6)break;h-=y/k}var C=0,P=1;for(h=f,m=0;m<20&&(y=this.sampleCurveX(h),!(Math.abs(y-f)<c));m++)f>y?C=h:P=h,h=.5*(P-C)+C;return h},solve:function(f,c){return this.sampleCurveY(this.solveCurveX(f,c))}};var oh=sh(ih);function Ji(f,c,h){return f+h*(c-f)}function Oa(f,c,h){return f.map((m,y)=>Ji(m,c[y],h))}const us={number:Ji,color:function(f,c,h,m="rgb"){switch(m){case"rgb":{const[y,k,C,P]=Oa(f.rgb,c.rgb,h);return new Wn(y,k,C,P,!1)}case"hcl":{const[y,k,C,P]=f.hcl,[z,B,W,K]=c.hcl;let ne,he;if(isNaN(y)||isNaN(z))isNaN(y)?isNaN(z)?ne=NaN:(ne=z,C!==1&&C!==0||(he=B)):(ne=y,W!==1&&W!==0||(he=k));else{let We=z-y;z>y&&We>180?We-=360:z<y&&y-z>180&&(We+=360),ne=y+h*We}const[ve,xe,Pe,ze]=function([We,Le,qe,ct]){return We=isNaN(We)?0:We*Sn,mr([qe,Math.cos(We)*Le,Math.sin(We)*Le,ct])}([ne,he??Ji(k,B,h),Ji(C,W,h),Ji(P,K,h)]);return new Wn(ve,xe,Pe,ze,!1)}case"lab":{const[y,k,C,P]=mr(Oa(f.lab,c.lab,h));return new Wn(y,k,C,P,!1)}}},array:Oa,padding:function(f,c,h){return new xs(Oa(f.values,c.values,h))},variableAnchorOffsetCollection:function(f,c,h){const m=f.values,y=c.values;if(m.length!==y.length)throw new cr(`Cannot interpolate values of different length. from: ${f.toString()}, to: ${c.toString()}`);const k=[];for(let C=0;C<m.length;C+=2){if(m[C]!==y[C])throw new cr(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${m[C]}, to[${C}]: ${y[C]}`);k.push(m[C]);const[P,z]=m[C+1],[B,W]=y[C+1];k.push([Ji(P,B,h),Ji(z,W,h)])}return new Gs(k)}};class rs{constructor(c,h,m,y,k){this.type=c,this.operator=h,this.interpolation=m,this.input=y,this.labels=[],this.outputs=[];for(const[C,P]of k)this.labels.push(C),this.outputs.push(P)}static interpolationFactor(c,h,m,y){let k=0;if(c.name==="exponential")k=Hn(h,c.base,m,y);else if(c.name==="linear")k=Hn(h,1,m,y);else if(c.name==="cubic-bezier"){const C=c.controlPoints;k=new oh(C[0],C[1],C[2],C[3]).solve(Hn(h,1,m,y))}return k}static parse(c,h){let[m,y,k,...C]=c;if(!Array.isArray(y)||y.length===0)return h.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const B=y[1];if(typeof B!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:B}}else{if(y[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const B=y.slice(1);if(B.length!==4||B.some(W=>typeof W!="number"||W<0||W>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:B}}}if(c.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if((c.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(k=h.parse(k,2,Ut),!k)return null;const P=[];let z=null;m==="interpolate-hcl"||m==="interpolate-lab"?z=$r:h.expectedType&&h.expectedType.kind!=="value"&&(z=h.expectedType);for(let B=0;B<C.length;B+=2){const W=C[B],K=C[B+1],ne=B+3,he=B+4;if(typeof W!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ne);if(P.length&&P[P.length-1][0]>=W)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ne);const ve=h.parse(K,he,z);if(!ve)return null;z=z||ve.type,P.push([W,ve])}return Ke(z,Ut)||Ke(z,$r)||Ke(z,Ae)||Ke(z,ue)||Ke(z,ye(Ut))?new rs(z,m,y,k,P):h.error(`Type ${Te(z)} is not interpolatable.`)}evaluate(c){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(c);const y=this.input.evaluate(c);if(y<=h[0])return m[0].evaluate(c);const k=h.length;if(y>=h[k-1])return m[k-1].evaluate(c);const C=Xo(h,y),P=rs.interpolationFactor(this.interpolation,y,h[C],h[C+1]),z=m[C].evaluate(c),B=m[C+1].evaluate(c);switch(this.operator){case"interpolate":return us[this.type.kind](z,B,P);case"interpolate-hcl":return us.color(z,B,P,"hcl");case"interpolate-lab":return us.color(z,B,P,"lab")}}eachChild(c){c(this.input);for(const h of this.outputs)c(h)}outputDefined(){return this.outputs.every(c=>c.outputDefined())}}function Hn(f,c,h,m){const y=m-h,k=f-h;return y===0?0:c===1?k/y:(Math.pow(c,k)-1)/(Math.pow(c,y)-1)}class Fa{constructor(c,h){this.type=c,this.args=h}static parse(c,h){if(c.length<2)return h.error("Expectected at least one argument.");let m=null;const y=h.expectedType;y&&y.kind!=="value"&&(m=y);const k=[];for(const P of c.slice(1)){const z=h.parse(P,1+k.length,m,void 0,{typeAnnotation:"omit"});if(!z)return null;m=m||z.type,k.push(z)}if(!m)throw new Error("No output type");const C=y&&k.some(P=>Ne(y,P.type));return new Fa(C?Cn:m,k)}evaluate(c){let h,m=null,y=0;for(const k of this.args)if(y++,m=k.evaluate(c),m&&m instanceof Hs&&!m.available&&(h||(h=m.name),m=null,y===this.args.length&&(m=h)),m!==null)break;return m}eachChild(c){this.args.forEach(c)}outputDefined(){return this.args.every(c=>c.outputDefined())}}class Ba{constructor(c,h){this.type=h.type,this.bindings=[].concat(c),this.result=h}evaluate(c){return this.result.evaluate(c)}eachChild(c){for(const h of this.bindings)c(h[1]);c(this.result)}static parse(c,h){if(c.length<4)return h.error(`Expected at least 3 arguments, but found ${c.length-1} instead.`);const m=[];for(let k=1;k<c.length-1;k+=2){const C=c[k];if(typeof C!="string")return h.error(`Expected string, but found ${typeof C} instead.`,k);if(/[^a-zA-Z0-9_]/.test(C))return h.error("Variable names must contain only alphanumeric characters or '_'.",k);const P=h.parse(c[k+1],k+1);if(!P)return null;m.push([C,P])}const y=h.parse(c[c.length-1],c.length-1,h.expectedType,m);return y?new Ba(m,y):null}outputDefined(){return this.result.outputDefined()}}class Nl{constructor(c,h,m){this.type=c,this.index=h,this.input=m}static parse(c,h){if(c.length!==3)return h.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const m=h.parse(c[1],1,Ut),y=h.parse(c[2],2,ye(h.expectedType||Cn));return m&&y?new Nl(y.type.itemType,m,y):null}evaluate(c){const h=this.index.evaluate(c),m=this.input.evaluate(c);if(h<0)throw new cr(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new cr(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new cr(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(c){c(this.index),c(this.input)}outputDefined(){return!1}}class Vl{constructor(c,h){this.type=Tn,this.needle=c,this.haystack=h}static parse(c,h){if(c.length!==3)return h.error(`Expected 2 arguments, but found ${c.length-1} instead.`);const m=h.parse(c[1],1,Cn),y=h.parse(c[2],2,Cn);return m&&y?Ze(m.type,[Tn,In,Ut,Jr,Cn])?new Vl(m,y):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Te(m.type)} instead`):null}evaluate(c){const h=this.needle.evaluate(c),m=this.haystack.evaluate(c);if(!m)return!1;if(!Re(h,["boolean","string","number","null"]))throw new cr(`Expected first argument to be of type boolean, string, number or null, but found ${Te(Er(h))} instead.`);if(!Re(m,["string","array"]))throw new cr(`Expected second argument to be of type array or string, but found ${Te(Er(m))} instead.`);return m.indexOf(h)>=0}eachChild(c){c(this.needle),c(this.haystack)}outputDefined(){return!0}}class Na{constructor(c,h,m){this.type=Ut,this.needle=c,this.haystack=h,this.fromIndex=m}static parse(c,h){if(c.length<=2||c.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const m=h.parse(c[1],1,Cn),y=h.parse(c[2],2,Cn);if(!m||!y)return null;if(!Ze(m.type,[Tn,In,Ut,Jr,Cn]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Te(m.type)} instead`);if(c.length===4){const k=h.parse(c[3],3,Ut);return k?new Na(m,y,k):null}return new Na(m,y)}evaluate(c){const h=this.needle.evaluate(c),m=this.haystack.evaluate(c);if(!Re(h,["boolean","string","number","null"]))throw new cr(`Expected first argument to be of type boolean, string, number or null, but found ${Te(Er(h))} instead.`);if(!Re(m,["string","array"]))throw new cr(`Expected second argument to be of type array or string, but found ${Te(Er(m))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(c);return m.indexOf(h,y)}return m.indexOf(h)}eachChild(c){c(this.needle),c(this.haystack),this.fromIndex&&c(this.fromIndex)}outputDefined(){return!1}}class Ul{constructor(c,h,m,y,k,C){this.inputType=c,this.type=h,this.input=m,this.cases=y,this.outputs=k,this.otherwise=C}static parse(c,h){if(c.length<5)return h.error(`Expected at least 4 arguments, but found only ${c.length-1}.`);if(c.length%2!=1)return h.error("Expected an even number of arguments.");let m,y;h.expectedType&&h.expectedType.kind!=="value"&&(y=h.expectedType);const k={},C=[];for(let B=2;B<c.length-1;B+=2){let W=c[B];const K=c[B+1];Array.isArray(W)||(W=[W]);const ne=h.concat(B);if(W.length===0)return ne.error("Expected at least one branch label.");for(const ve of W){if(typeof ve!="number"&&typeof ve!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof ve=="number"&&Math.abs(ve)>Number.MAX_SAFE_INTEGER)return ne.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ve=="number"&&Math.floor(ve)!==ve)return ne.error("Numeric branch labels must be integer values.");if(m){if(ne.checkSubtype(m,Er(ve)))return null}else m=Er(ve);if(k[String(ve)]!==void 0)return ne.error("Branch labels must be unique.");k[String(ve)]=C.length}const he=h.parse(K,B,y);if(!he)return null;y=y||he.type,C.push(he)}const P=h.parse(c[1],1,Cn);if(!P)return null;const z=h.parse(c[c.length-1],c.length-1,y);return z?P.type.kind!=="value"&&h.concat(1).checkSubtype(m,P.type)?null:new Ul(m,y,P,k,C,z):null}evaluate(c){const h=this.input.evaluate(c);return(Er(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(c)}eachChild(c){c(this.input),this.outputs.forEach(c),c(this.otherwise)}outputDefined(){return this.outputs.every(c=>c.outputDefined())&&this.otherwise.outputDefined()}}class jl{constructor(c,h,m){this.type=c,this.branches=h,this.otherwise=m}static parse(c,h){if(c.length<4)return h.error(`Expected at least 3 arguments, but found only ${c.length-1}.`);if(c.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);const y=[];for(let C=1;C<c.length-1;C+=2){const P=h.parse(c[C],C,Tn);if(!P)return null;const z=h.parse(c[C+1],C+1,m);if(!z)return null;y.push([P,z]),m=m||z.type}const k=h.parse(c[c.length-1],c.length-1,m);if(!k)return null;if(!m)throw new Error("Can't infer output type");return new jl(m,y,k)}evaluate(c){for(const[h,m]of this.branches)if(h.evaluate(c))return m.evaluate(c);return this.otherwise.evaluate(c)}eachChild(c){for(const[h,m]of this.branches)c(h),c(m);c(this.otherwise)}outputDefined(){return this.branches.every(([c,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class Va{constructor(c,h,m,y){this.type=c,this.input=h,this.beginIndex=m,this.endIndex=y}static parse(c,h){if(c.length<=2||c.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${c.length-1} instead.`);const m=h.parse(c[1],1,Cn),y=h.parse(c[2],2,Ut);if(!m||!y)return null;if(!Ze(m.type,[ye(Cn),In,Cn]))return h.error(`Expected first argument to be of type array or string, but found ${Te(m.type)} instead`);if(c.length===4){const k=h.parse(c[3],3,Ut);return k?new Va(m.type,m,y,k):null}return new Va(m.type,m,y)}evaluate(c){const h=this.input.evaluate(c),m=this.beginIndex.evaluate(c);if(!Re(h,["string","array"]))throw new cr(`Expected first argument to be of type array or string, but found ${Te(Er(h))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(c);return h.slice(m,y)}return h.slice(m)}eachChild(c){c(this.input),c(this.beginIndex),this.endIndex&&c(this.endIndex)}outputDefined(){return!1}}function $u(f,c){return f==="=="||f==="!="?c.kind==="boolean"||c.kind==="string"||c.kind==="number"||c.kind==="null"||c.kind==="value":c.kind==="string"||c.kind==="number"||c.kind==="value"}function wu(f,c,h,m){return m.compare(c,h)===0}function go(f,c,h){const m=f!=="=="&&f!=="!=";return class Lv{constructor(k,C,P){this.type=Tn,this.lhs=k,this.rhs=C,this.collator=P,this.hasUntypedArgument=k.type.kind==="value"||C.type.kind==="value"}static parse(k,C){if(k.length!==3&&k.length!==4)return C.error("Expected two or three arguments.");const P=k[0];let z=C.parse(k[1],1,Cn);if(!z)return null;if(!$u(P,z.type))return C.concat(1).error(`"${P}" comparisons are not supported for type '${Te(z.type)}'.`);let B=C.parse(k[2],2,Cn);if(!B)return null;if(!$u(P,B.type))return C.concat(2).error(`"${P}" comparisons are not supported for type '${Te(B.type)}'.`);if(z.type.kind!==B.type.kind&&z.type.kind!=="value"&&B.type.kind!=="value")return C.error(`Cannot compare types '${Te(z.type)}' and '${Te(B.type)}'.`);m&&(z.type.kind==="value"&&B.type.kind!=="value"?z=new Ls(B.type,[z]):z.type.kind!=="value"&&B.type.kind==="value"&&(B=new Ls(z.type,[B])));let W=null;if(k.length===4){if(z.type.kind!=="string"&&B.type.kind!=="string"&&z.type.kind!=="value"&&B.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(W=C.parse(k[3],3,ii),!W)return null}return new Lv(z,B,W)}evaluate(k){const C=this.lhs.evaluate(k),P=this.rhs.evaluate(k);if(m&&this.hasUntypedArgument){const z=Er(C),B=Er(P);if(z.kind!==B.kind||z.kind!=="string"&&z.kind!=="number")throw new cr(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${z.kind}, ${B.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const z=Er(C),B=Er(P);if(z.kind!=="string"||B.kind!=="string")return c(k,C,P)}return this.collator?h(k,C,P,this.collator.evaluate(k)):c(k,C,P)}eachChild(k){k(this.lhs),k(this.rhs),this.collator&&k(this.collator)}outputDefined(){return!0}}}const ah=go("==",function(f,c,h){return c===h},wu),lh=go("!=",function(f,c,h){return c!==h},function(f,c,h,m){return!wu(0,c,h,m)}),ch=go("<",function(f,c,h){return c<h},function(f,c,h,m){return m.compare(c,h)<0}),uh=go(">",function(f,c,h){return c>h},function(f,c,h,m){return m.compare(c,h)>0}),fh=go("<=",function(f,c,h){return c<=h},function(f,c,h,m){return m.compare(c,h)<=0}),hh=go(">=",function(f,c,h){return c>=h},function(f,c,h,m){return m.compare(c,h)>=0});class ql{constructor(c,h,m,y,k){this.type=In,this.number=c,this.locale=h,this.currency=m,this.minFractionDigits=y,this.maxFractionDigits=k}static parse(c,h){if(c.length!==3)return h.error("Expected two arguments.");const m=h.parse(c[1],1,Ut);if(!m)return null;const y=c[2];if(typeof y!="object"||Array.isArray(y))return h.error("NumberFormat options argument must be an object.");let k=null;if(y.locale&&(k=h.parse(y.locale,1,In),!k))return null;let C=null;if(y.currency&&(C=h.parse(y.currency,1,In),!C))return null;let P=null;if(y["min-fraction-digits"]&&(P=h.parse(y["min-fraction-digits"],1,Ut),!P))return null;let z=null;return y["max-fraction-digits"]&&(z=h.parse(y["max-fraction-digits"],1,Ut),!z)?null:new ql(m,k,C,P,z)}evaluate(c){return new Intl.NumberFormat(this.locale?this.locale.evaluate(c):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(c):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(c):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(c):void 0}).format(this.number.evaluate(c))}eachChild(c){c(this.number),this.locale&&c(this.locale),this.currency&&c(this.currency),this.minFractionDigits&&c(this.minFractionDigits),this.maxFractionDigits&&c(this.maxFractionDigits)}outputDefined(){return!1}}class Ua{constructor(c){this.type=Or,this.sections=c}static parse(c,h){if(c.length<2)return h.error("Expected at least one argument.");const m=c[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");const y=[];let k=!1;for(let C=1;C<=c.length-1;++C){const P=c[C];if(k&&typeof P=="object"&&!Array.isArray(P)){k=!1;let z=null;if(P["font-scale"]&&(z=h.parse(P["font-scale"],1,Ut),!z))return null;let B=null;if(P["text-font"]&&(B=h.parse(P["text-font"],1,ye(In)),!B))return null;let W=null;if(P["text-color"]&&(W=h.parse(P["text-color"],1,$r),!W))return null;const K=y[y.length-1];K.scale=z,K.font=B,K.textColor=W}else{const z=h.parse(c[C],1,Cn);if(!z)return null;const B=z.type.kind;if(B!=="string"&&B!=="value"&&B!=="null"&&B!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");k=!0,y.push({content:z,scale:null,font:null,textColor:null})}}return new Ua(y)}evaluate(c){return new zs(this.sections.map(h=>{const m=h.content.evaluate(c);return Er(m)===ee?new Bl("",m,null,null,null):new Bl(qo(m),null,h.scale?h.scale.evaluate(c):null,h.font?h.font.evaluate(c).join(","):null,h.textColor?h.textColor.evaluate(c):null)}))}eachChild(c){for(const h of this.sections)c(h.content),h.scale&&c(h.scale),h.font&&c(h.font),h.textColor&&c(h.textColor)}outputDefined(){return!1}}class Gl{constructor(c){this.type=ee,this.input=c}static parse(c,h){if(c.length!==2)return h.error("Expected two arguments.");const m=h.parse(c[1],1,In);return m?new Gl(m):h.error("No image name provided.")}evaluate(c){const h=this.input.evaluate(c),m=Hs.fromString(h);return m&&c.availableImages&&(m.available=c.availableImages.indexOf(h)>-1),m}eachChild(c){c(this.input)}outputDefined(){return!1}}class Hl{constructor(c){this.type=Ut,this.input=c}static parse(c,h){if(c.length!==2)return h.error(`Expected 1 argument, but found ${c.length-1} instead.`);const m=h.parse(c[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Te(m.type)} instead.`):new Hl(m):null}evaluate(c){const h=this.input.evaluate(c);if(typeof h=="string"||Array.isArray(h))return h.length;throw new cr(`Expected value to be of type string or array, but found ${Te(Er(h))} instead.`)}eachChild(c){c(this.input)}outputDefined(){return!1}}const vo={"==":ah,"!=":lh,">":uh,"<":ch,">=":hh,"<=":fh,array:Ls,at:Nl,boolean:Ls,case:jl,coalesce:Fa,collator:_o,format:Ua,image:Gl,in:Vl,"index-of":Na,interpolate:rs,"interpolate-hcl":rs,"interpolate-lab":rs,length:Hl,let:Ba,literal:Pi,match:Ul,number:Ls,"number-format":ql,object:Ls,slice:Va,step:Jo,string:Ls,"to-boolean":ai,"to-color":ai,"to-number":ai,"to-string":ai,var:La,within:Xi};function xu(f,[c,h,m,y]){c=c.evaluate(f),h=h.evaluate(f),m=m.evaluate(f);const k=y?y.evaluate(f):1,C=mo(c,h,m,k);if(C)throw new cr(C);return new Wn(c/255,h/255,m/255,k,!1)}function ku(f,c){return f in c}function Zl(f,c){const h=c[f];return h===void 0?null:h}function Yi(f){return{type:f}}function Cu(f){return{result:"success",value:f}}function yo(f){return{result:"error",value:f}}function bo(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function Su(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Wl(f){return!!f.expression&&f.expression.interpolated}function jn(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function ja(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)}function dh(f){return f}function Tu(f,c){const h=c.type==="color",m=f.stops&&typeof f.stops[0][0]=="object",y=m||!(m||f.property!==void 0),k=f.type||(Wl(c)?"exponential":"interval");if(h||c.type==="padding"){const W=h?Wn.parse:xs.parse;(f=$s({},f)).stops&&(f.stops=f.stops.map(K=>[K[0],W(K[1])])),f.default=W(f.default?f.default:c.default)}if(f.colorSpace&&(C=f.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var C;let P,z,B;if(k==="exponential")P=Bn;else if(k==="interval")P=ph;else if(k==="categorical"){P=Cr,z=Object.create(null);for(const W of f.stops)z[W[0]]=W[1];B=typeof f.stops[0][0]}else{if(k!=="identity")throw new Error(`Unknown function type "${k}"`);P=Kl}if(m){const W={},K=[];for(let ve=0;ve<f.stops.length;ve++){const xe=f.stops[ve],Pe=xe[0].zoom;W[Pe]===void 0&&(W[Pe]={zoom:Pe,type:f.type,property:f.property,default:f.default,stops:[]},K.push(Pe)),W[Pe].stops.push([xe[0].value,xe[1]])}const ne=[];for(const ve of K)ne.push([W[ve].zoom,Tu(W[ve],c)]);const he={name:"linear"};return{kind:"composite",interpolationType:he,interpolationFactor:rs.interpolationFactor.bind(void 0,he),zoomStops:ne.map(ve=>ve[0]),evaluate:({zoom:ve},xe)=>Bn({stops:ne,base:f.base},c,ve).evaluate(ve,xe)}}if(y){const W=k==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:W,interpolationFactor:rs.interpolationFactor.bind(void 0,W),zoomStops:f.stops.map(K=>K[0]),evaluate:({zoom:K})=>P(f,c,K,z,B)}}return{kind:"source",evaluate(W,K){const ne=K&&K.properties?K.properties[f.property]:void 0;return ne===void 0?Yo(f.default,c.default):P(f,c,ne,z,B)}}}function Yo(f,c,h){return f!==void 0?f:c!==void 0?c:h!==void 0?h:void 0}function Cr(f,c,h,m,y){return Yo(typeof h===y?m[h]:void 0,f.default,c.default)}function ph(f,c,h){if(jn(h)!=="number")return Yo(f.default,c.default);const m=f.stops.length;if(m===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[m-1][0])return f.stops[m-1][1];const y=Xo(f.stops.map(k=>k[0]),h);return f.stops[y][1]}function Bn(f,c,h){const m=f.base!==void 0?f.base:1;if(jn(h)!=="number")return Yo(f.default,c.default);const y=f.stops.length;if(y===1||h<=f.stops[0][0])return f.stops[0][1];if(h>=f.stops[y-1][0])return f.stops[y-1][1];const k=Xo(f.stops.map(W=>W[0]),h),C=function(W,K,ne,he){const ve=he-ne,xe=W-ne;return ve===0?0:K===1?xe/ve:(Math.pow(K,xe)-1)/(Math.pow(K,ve)-1)}(h,m,f.stops[k][0],f.stops[k+1][0]),P=f.stops[k][1],z=f.stops[k+1][1],B=us[c.type]||dh;return typeof P.evaluate=="function"?{evaluate(...W){const K=P.evaluate.apply(void 0,W),ne=z.evaluate.apply(void 0,W);if(K!==void 0&&ne!==void 0)return B(K,ne,C,f.colorSpace)}}:B(P,z,C,f.colorSpace)}function Kl(f,c,h){switch(c.type){case"color":h=Wn.parse(h);break;case"formatted":h=zs.fromString(h.toString());break;case"resolvedImage":h=Hs.fromString(h.toString());break;case"padding":h=xs.parse(h);break;default:jn(h)===c.type||c.type==="enum"&&c.values[h]||(h=void 0)}return Yo(h,f.default,c.default)}Rs.register(vo,{error:[{kind:"error"},[In],(f,[c])=>{throw new cr(c.evaluate(f))}],typeof:[In,[Cn],(f,[c])=>Te(Er(c.evaluate(f)))],"to-rgba":[ye(Ut,4),[$r],(f,[c])=>{const[h,m,y,k]=c.evaluate(f).rgb;return[255*h,255*m,255*y,k]}],rgb:[$r,[Ut,Ut,Ut],xu],rgba:[$r,[Ut,Ut,Ut,Ut],xu],has:{type:Tn,overloads:[[[In],(f,[c])=>ku(c.evaluate(f),f.properties())],[[In,qs],(f,[c,h])=>ku(c.evaluate(f),h.evaluate(f))]]},get:{type:Cn,overloads:[[[In],(f,[c])=>Zl(c.evaluate(f),f.properties())],[[In,qs],(f,[c,h])=>Zl(c.evaluate(f),h.evaluate(f))]]},"feature-state":[Cn,[In],(f,[c])=>Zl(c.evaluate(f),f.featureState||{})],properties:[qs,[],f=>f.properties()],"geometry-type":[In,[],f=>f.geometryType()],id:[Cn,[],f=>f.id()],zoom:[Ut,[],f=>f.globals.zoom],"heatmap-density":[Ut,[],f=>f.globals.heatmapDensity||0],"line-progress":[Ut,[],f=>f.globals.lineProgress||0],accumulated:[Cn,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[Ut,Yi(Ut),(f,c)=>{let h=0;for(const m of c)h+=m.evaluate(f);return h}],"*":[Ut,Yi(Ut),(f,c)=>{let h=1;for(const m of c)h*=m.evaluate(f);return h}],"-":{type:Ut,overloads:[[[Ut,Ut],(f,[c,h])=>c.evaluate(f)-h.evaluate(f)],[[Ut],(f,[c])=>-c.evaluate(f)]]},"/":[Ut,[Ut,Ut],(f,[c,h])=>c.evaluate(f)/h.evaluate(f)],"%":[Ut,[Ut,Ut],(f,[c,h])=>c.evaluate(f)%h.evaluate(f)],ln2:[Ut,[],()=>Math.LN2],pi:[Ut,[],()=>Math.PI],e:[Ut,[],()=>Math.E],"^":[Ut,[Ut,Ut],(f,[c,h])=>Math.pow(c.evaluate(f),h.evaluate(f))],sqrt:[Ut,[Ut],(f,[c])=>Math.sqrt(c.evaluate(f))],log10:[Ut,[Ut],(f,[c])=>Math.log(c.evaluate(f))/Math.LN10],ln:[Ut,[Ut],(f,[c])=>Math.log(c.evaluate(f))],log2:[Ut,[Ut],(f,[c])=>Math.log(c.evaluate(f))/Math.LN2],sin:[Ut,[Ut],(f,[c])=>Math.sin(c.evaluate(f))],cos:[Ut,[Ut],(f,[c])=>Math.cos(c.evaluate(f))],tan:[Ut,[Ut],(f,[c])=>Math.tan(c.evaluate(f))],asin:[Ut,[Ut],(f,[c])=>Math.asin(c.evaluate(f))],acos:[Ut,[Ut],(f,[c])=>Math.acos(c.evaluate(f))],atan:[Ut,[Ut],(f,[c])=>Math.atan(c.evaluate(f))],min:[Ut,Yi(Ut),(f,c)=>Math.min(...c.map(h=>h.evaluate(f)))],max:[Ut,Yi(Ut),(f,c)=>Math.max(...c.map(h=>h.evaluate(f)))],abs:[Ut,[Ut],(f,[c])=>Math.abs(c.evaluate(f))],round:[Ut,[Ut],(f,[c])=>{const h=c.evaluate(f);return h<0?-Math.round(-h):Math.round(h)}],floor:[Ut,[Ut],(f,[c])=>Math.floor(c.evaluate(f))],ceil:[Ut,[Ut],(f,[c])=>Math.ceil(c.evaluate(f))],"filter-==":[Tn,[In,Cn],(f,[c,h])=>f.properties()[c.value]===h.value],"filter-id-==":[Tn,[Cn],(f,[c])=>f.id()===c.value],"filter-type-==":[Tn,[In],(f,[c])=>f.geometryType()===c.value],"filter-<":[Tn,[In,Cn],(f,[c,h])=>{const m=f.properties()[c.value],y=h.value;return typeof m==typeof y&&m<y}],"filter-id-<":[Tn,[Cn],(f,[c])=>{const h=f.id(),m=c.value;return typeof h==typeof m&&h<m}],"filter->":[Tn,[In,Cn],(f,[c,h])=>{const m=f.properties()[c.value],y=h.value;return typeof m==typeof y&&m>y}],"filter-id->":[Tn,[Cn],(f,[c])=>{const h=f.id(),m=c.value;return typeof h==typeof m&&h>m}],"filter-<=":[Tn,[In,Cn],(f,[c,h])=>{const m=f.properties()[c.value],y=h.value;return typeof m==typeof y&&m<=y}],"filter-id-<=":[Tn,[Cn],(f,[c])=>{const h=f.id(),m=c.value;return typeof h==typeof m&&h<=m}],"filter->=":[Tn,[In,Cn],(f,[c,h])=>{const m=f.properties()[c.value],y=h.value;return typeof m==typeof y&&m>=y}],"filter-id->=":[Tn,[Cn],(f,[c])=>{const h=f.id(),m=c.value;return typeof h==typeof m&&h>=m}],"filter-has":[Tn,[Cn],(f,[c])=>c.value in f.properties()],"filter-has-id":[Tn,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[Tn,[ye(In)],(f,[c])=>c.value.indexOf(f.geometryType())>=0],"filter-id-in":[Tn,[ye(Cn)],(f,[c])=>c.value.indexOf(f.id())>=0],"filter-in-small":[Tn,[In,ye(Cn)],(f,[c,h])=>h.value.indexOf(f.properties()[c.value])>=0],"filter-in-large":[Tn,[In,ye(Cn)],(f,[c,h])=>function(m,y,k,C){for(;k<=C;){const P=k+C>>1;if(y[P]===m)return!0;y[P]>m?C=P-1:k=P+1}return!1}(f.properties()[c.value],h.value,0,h.value.length-1)],all:{type:Tn,overloads:[[[Tn,Tn],(f,[c,h])=>c.evaluate(f)&&h.evaluate(f)],[Yi(Tn),(f,c)=>{for(const h of c)if(!h.evaluate(f))return!1;return!0}]]},any:{type:Tn,overloads:[[[Tn,Tn],(f,[c,h])=>c.evaluate(f)||h.evaluate(f)],[Yi(Tn),(f,c)=>{for(const h of c)if(h.evaluate(f))return!0;return!1}]]},"!":[Tn,[Tn],(f,[c])=>!c.evaluate(f)],"is-supported-script":[Tn,[In],(f,[c])=>{const h=f.globals&&f.globals.isSupportedScript;return!h||h(c.evaluate(f))}],upcase:[In,[In],(f,[c])=>c.evaluate(f).toUpperCase()],downcase:[In,[In],(f,[c])=>c.evaluate(f).toLowerCase()],concat:[In,Yi(Cn),(f,c)=>c.map(h=>qo(h.evaluate(f))).join("")],"resolved-locale":[In,[ii],(f,[c])=>c.evaluate(f).resolvedLocale()]});class rr{constructor(c,h){var m;this.expression=c,this._warningHistory={},this._evaluator=new Kn,this._defaultValue=h?(m=h).type==="color"&&ja(m.default)?new Wn(0,0,0,0):m.type==="color"?Wn.parse(m.default)||null:m.type==="padding"?xs.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?Gs.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(c,h,m,y,k,C){return this._evaluator.globals=c,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=y,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(c,h,m,y,k,C){this._evaluator.globals=c,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=y,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=C||null;try{const P=this.expression.evaluate(this._evaluator);if(P==null||typeof P=="number"&&P!=P)return this._defaultValue;if(this._enumValues&&!(P in this._enumValues))throw new cr(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(P)} instead.`);return P}catch(P){return this._warningHistory[P.message]||(this._warningHistory[P.message]=!0,typeof console<"u"&&console.warn(P.message)),this._defaultValue}}}function tr(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in vo}function Qi(f,c){const h=new Pa(vo,Zo,[],c?function(y){const k={color:$r,string:In,number:Ut,enum:In,boolean:Tn,formatted:Or,padding:Ae,resolvedImage:ee,variableAnchorOffsetCollection:ue};return y.type==="array"?ye(k[y.value]||Cn,y.length):k[y.type]}(c):void 0),m=h.parse(f,void 0,void 0,void 0,c&&c.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?Cu(new rr(m,c)):yo(h.errors)}class qa{constructor(c,h){this.kind=c,this._styleExpression=h,this.isStateDependent=c!=="constant"&&!Wo(h.expression)}evaluateWithoutErrorHandling(c,h,m,y,k,C){return this._styleExpression.evaluateWithoutErrorHandling(c,h,m,y,k,C)}evaluate(c,h,m,y,k,C){return this._styleExpression.evaluate(c,h,m,y,k,C)}}class Xl{constructor(c,h,m,y){this.kind=c,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=c!=="camera"&&!Wo(h.expression),this.interpolationType=y}evaluateWithoutErrorHandling(c,h,m,y,k,C){return this._styleExpression.evaluateWithoutErrorHandling(c,h,m,y,k,C)}evaluate(c,h,m,y,k,C){return this._styleExpression.evaluate(c,h,m,y,k,C)}interpolationFactor(c,h,m){return this.interpolationType?rs.interpolationFactor(this.interpolationType,c,h,m):0}}function Iu(f,c){const h=Qi(f,c);if(h.result==="error")return h;const m=h.value.expression,y=Ra(m);if(!y&&!bo(c))return yo([new Xr("","data expressions not supported")]);const k=Ko(m,["zoom"]);if(!k&&!Su(c))return yo([new Xr("","zoom expressions not supported")]);const C=Ha(m);return C||k?C instanceof Xr?yo([C]):C instanceof rs&&!Wl(c)?yo([new Xr("",'"interpolate" expressions cannot be used with this property')]):Cu(C?new Xl(y?"camera":"composite",h.value,C.labels,C instanceof rs?C.interpolation:void 0):new qa(y?"constant":"source",h.value)):yo([new Xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ga{constructor(c,h){this._parameters=c,this._specification=h,$s(this,Tu(this._parameters,this._specification))}static deserialize(c){return new Ga(c._parameters,c._specification)}static serialize(c){return{_parameters:c._parameters,_specification:c._specification}}}function Ha(f){let c=null;if(f instanceof Ba)c=Ha(f.result);else if(f instanceof Fa){for(const h of f.args)if(c=Ha(h),c)break}else(f instanceof Jo||f instanceof rs)&&f.input instanceof Rs&&f.input.name==="zoom"&&(c=f);return c instanceof Xr||f.eachChild(h=>{const m=Ha(h);m instanceof Xr?c=m:!c&&m?c=new Xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):c&&m&&c!==m&&(c=new Xr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),c}function Za(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(const c of f.slice(1))if(!Za(c)&&typeof c!="boolean")return!1;return!0;default:return!0}}const Eu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Wa(f){if(f==null)return{filter:()=>!0,needGeometry:!1};Za(f)||(f=Xa(f));const c=Qi(f,Eu);if(c.result==="error")throw new Error(c.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,m,y)=>c.value.evaluate(h,m,{},y),needGeometry:Ka(f)}}function Pu(f,c){return f<c?-1:f>c?1:0}function Ka(f){if(!Array.isArray(f))return!1;if(f[0]==="within")return!0;for(let c=1;c<f.length;c++)if(Ka(f[c]))return!0;return!1}function Xa(f){if(!f)return!0;const c=f[0];return f.length<=1?c!=="any":c==="=="?Jl(f[1],f[2],"=="):c==="!="?Ja(Jl(f[1],f[2],"==")):c==="<"||c===">"||c==="<="||c===">="?Jl(f[1],f[2],c):c==="any"?(h=f.slice(1),["any"].concat(h.map(Xa))):c==="all"?["all"].concat(f.slice(1).map(Xa)):c==="none"?["all"].concat(f.slice(1).map(Xa).map(Ja)):c==="in"?Au(f[1],f.slice(2)):c==="!in"?Ja(Au(f[1],f.slice(2))):c==="has"?Mu(f[1]):c==="!has"?Ja(Mu(f[1])):c!=="within"||f;var h}function Jl(f,c,h){switch(f){case"$type":return[`filter-type-${h}`,c];case"$id":return[`filter-id-${h}`,c];default:return[`filter-${h}`,f,c]}}function Au(f,c){if(c.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",c]];case"$id":return["filter-id-in",["literal",c]];default:return c.length>200&&!c.some(h=>typeof h!=typeof c[0])?["filter-in-large",f,["literal",c.sort(Pu)]]:["filter-in-small",f,["literal",c]]}}function Mu(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Ja(f){return["!",f]}function Yl(f){const c=typeof f;if(c==="number"||c==="boolean"||c==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let y="[";for(const k of f)y+=`${Yl(k)},`;return`${y}]`}const h=Object.keys(f).sort();let m="{";for(let y=0;y<h.length;y++)m+=`${JSON.stringify(h[y])}:${Yl(f[h[y]])},`;return`${m}}`}function mh(f){let c="";for(const h of Un)c+=`/${Yl(f[h])}`;return c}function Du(f){const c=f.value;return c?[new Lt(f.key,c,"constants have been deprecated as of v8")]:[]}function _r(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Mi(f){if(Array.isArray(f))return f.map(Mi);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){const c={};for(const h in f)c[h]=Mi(f[h]);return c}return _r(f)}function fs(f){const c=f.key,h=f.value,m=f.valueSpec||{},y=f.objectElementValidators||{},k=f.style,C=f.styleSpec,P=f.validateSpec;let z=[];const B=jn(h);if(B!=="object")return[new Lt(c,h,`object expected, ${B} found`)];for(const W in h){const K=W.split(".")[0],ne=m[K]||m["*"];let he;if(y[K])he=y[K];else if(m[K])he=P;else if(y["*"])he=y["*"];else{if(!m["*"]){z.push(new Lt(c,h[W],`unknown property "${W}"`));continue}he=P}z=z.concat(he({key:(c&&`${c}.`)+W,value:h[W],valueSpec:ne,style:k,styleSpec:C,object:h,objectKey:W,validateSpec:P},h))}for(const W in m)y[W]||m[W].required&&m[W].default===void 0&&h[W]===void 0&&z.push(new Lt(c,h,`missing required property "${W}"`));return z}function Ql(f){const c=f.value,h=f.valueSpec,m=f.style,y=f.styleSpec,k=f.key,C=f.arrayElementValidator||f.validateSpec;if(jn(c)!=="array")return[new Lt(k,c,`array expected, ${jn(c)} found`)];if(h.length&&c.length!==h.length)return[new Lt(k,c,`array length ${h.length} expected, length ${c.length} found`)];if(h["min-length"]&&c.length<h["min-length"])return[new Lt(k,c,`array length at least ${h["min-length"]} expected, length ${c.length} found`)];let P={type:h.value,values:h.values};y.$version<7&&(P.function=h.function),jn(h.value)==="object"&&(P=h.value);let z=[];for(let B=0;B<c.length;B++)z=z.concat(C({array:c,arrayIndex:B,value:c[B],valueSpec:P,validateSpec:f.validateSpec,style:m,styleSpec:y,key:`${k}[${B}]`}));return z}function Ya(f){const c=f.key,h=f.value,m=f.valueSpec;let y=jn(h);return y==="number"&&h!=h&&(y="NaN"),y!=="number"?[new Lt(c,h,`number expected, ${y} found`)]:"minimum"in m&&h<m.minimum?[new Lt(c,h,`${h} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&h>m.maximum?[new Lt(c,h,`${h} is greater than the maximum value ${m.maximum}`)]:[]}function zu(f){const c=f.valueSpec,h=_r(f.value.type);let m,y,k,C={};const P=h!=="categorical"&&f.value.property===void 0,z=!P,B=jn(f.value.stops)==="array"&&jn(f.value.stops[0])==="array"&&jn(f.value.stops[0][0])==="object",W=fs({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(he){if(h==="identity")return[new Lt(he.key,he.value,'identity function may not have a "stops" property')];let ve=[];const xe=he.value;return ve=ve.concat(Ql({key:he.key,value:xe,valueSpec:he.valueSpec,validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec,arrayElementValidator:K})),jn(xe)==="array"&&xe.length===0&&ve.push(new Lt(he.key,xe,"array must have at least one stop")),ve},default:function(he){return he.validateSpec({key:he.key,value:he.value,valueSpec:c,validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec})}}});return h==="identity"&&P&&W.push(new Lt(f.key,f.value,'missing required property "property"')),h==="identity"||f.value.stops||W.push(new Lt(f.key,f.value,'missing required property "stops"')),h==="exponential"&&f.valueSpec.expression&&!Wl(f.valueSpec)&&W.push(new Lt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(z&&!bo(f.valueSpec)?W.push(new Lt(f.key,f.value,"property functions not supported")):P&&!Su(f.valueSpec)&&W.push(new Lt(f.key,f.value,"zoom functions not supported"))),h!=="categorical"&&!B||f.value.property!==void 0||W.push(new Lt(f.key,f.value,'"property" property is required')),W;function K(he){let ve=[];const xe=he.value,Pe=he.key;if(jn(xe)!=="array")return[new Lt(Pe,xe,`array expected, ${jn(xe)} found`)];if(xe.length!==2)return[new Lt(Pe,xe,`array length 2 expected, length ${xe.length} found`)];if(B){if(jn(xe[0])!=="object")return[new Lt(Pe,xe,`object expected, ${jn(xe[0])} found`)];if(xe[0].zoom===void 0)return[new Lt(Pe,xe,"object stop key must have zoom")];if(xe[0].value===void 0)return[new Lt(Pe,xe,"object stop key must have value")];if(k&&k>_r(xe[0].zoom))return[new Lt(Pe,xe[0].zoom,"stop zoom values must appear in ascending order")];_r(xe[0].zoom)!==k&&(k=_r(xe[0].zoom),y=void 0,C={}),ve=ve.concat(fs({key:`${Pe}[0]`,value:xe[0],valueSpec:{zoom:{}},validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec,objectElementValidators:{zoom:Ya,value:ne}}))}else ve=ve.concat(ne({key:`${Pe}[0]`,value:xe[0],valueSpec:{},validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec},xe));return tr(Mi(xe[1]))?ve.concat([new Lt(`${Pe}[1]`,xe[1],"expressions are not allowed in function stops.")]):ve.concat(he.validateSpec({key:`${Pe}[1]`,value:xe[1],valueSpec:c,validateSpec:he.validateSpec,style:he.style,styleSpec:he.styleSpec}))}function ne(he,ve){const xe=jn(he.value),Pe=_r(he.value),ze=he.value!==null?he.value:ve;if(m){if(xe!==m)return[new Lt(he.key,ze,`${xe} stop domain type must match previous stop domain type ${m}`)]}else m=xe;if(xe!=="number"&&xe!=="string"&&xe!=="boolean")return[new Lt(he.key,ze,"stop domain value must be a number, string, or boolean")];if(xe!=="number"&&h!=="categorical"){let We=`number expected, ${xe} found`;return bo(c)&&h===void 0&&(We+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Lt(he.key,ze,We)]}return h!=="categorical"||xe!=="number"||isFinite(Pe)&&Math.floor(Pe)===Pe?h!=="categorical"&&xe==="number"&&y!==void 0&&Pe<y?[new Lt(he.key,ze,"stop domain values must appear in ascending order")]:(y=Pe,h==="categorical"&&Pe in C?[new Lt(he.key,ze,"stop domain values must be unique")]:(C[Pe]=!0,[])):[new Lt(he.key,ze,`integer expected, found ${Pe}`)]}}function Di(f){const c=(f.expressionContext==="property"?Iu:Qi)(Mi(f.value),f.valueSpec);if(c.result==="error")return c.value.map(m=>new Lt(`${f.key}${m.key}`,f.value,m.message));const h=c.value.expression||c.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!h.outputDefined())return[new Lt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!Wo(h))return[new Lt(f.key,f.value,'"feature-state" data expressions are not supported with layout properties.')];if(f.expressionContext==="filter"&&!Wo(h))return[new Lt(f.key,f.value,'"feature-state" data expressions are not supported with filters.')];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Ko(h,["zoom","feature-state"]))return[new Lt(f.key,f.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(f.expressionContext==="cluster-initial"&&!Ra(h))return[new Lt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function zi(f){const c=f.key,h=f.value,m=f.valueSpec,y=[];return Array.isArray(m.values)?m.values.indexOf(_r(h))===-1&&y.push(new Lt(c,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(m.values).indexOf(_r(h))===-1&&y.push(new Lt(c,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),y}function $o(f){return Za(Mi(f.value))?Di($s({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ec(f)}function ec(f){const c=f.value,h=f.key;if(jn(c)!=="array")return[new Lt(h,c,`array expected, ${jn(c)} found`)];const m=f.styleSpec;let y,k=[];if(c.length<1)return[new Lt(h,c,"filter array must have at least 1 element")];switch(k=k.concat(zi({key:`${h}[0]`,value:c[0],valueSpec:m.filter_operator,style:f.style,styleSpec:f.styleSpec})),_r(c[0])){case"<":case"<=":case">":case">=":c.length>=2&&_r(c[1])==="$type"&&k.push(new Lt(h,c,`"$type" cannot be use with operator "${c[0]}"`));case"==":case"!=":c.length!==3&&k.push(new Lt(h,c,`filter array for operator "${c[0]}" must have 3 elements`));case"in":case"!in":c.length>=2&&(y=jn(c[1]),y!=="string"&&k.push(new Lt(`${h}[1]`,c[1],`string expected, ${y} found`)));for(let C=2;C<c.length;C++)y=jn(c[C]),_r(c[1])==="$type"?k=k.concat(zi({key:`${h}[${C}]`,value:c[C],valueSpec:m.geometry_type,style:f.style,styleSpec:f.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&k.push(new Lt(`${h}[${C}]`,c[C],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let C=1;C<c.length;C++)k=k.concat(ec({key:`${h}[${C}]`,value:c[C],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":y=jn(c[1]),c.length!==2?k.push(new Lt(h,c,`filter array for "${c[0]}" operator must have 2 elements`)):y!=="string"&&k.push(new Lt(`${h}[1]`,c[1],`string expected, ${y} found`));break;case"within":y=jn(c[1]),c.length!==2?k.push(new Lt(h,c,`filter array for "${c[0]}" operator must have 2 elements`)):y!=="object"&&k.push(new Lt(`${h}[1]`,c[1],`object expected, ${y} found`))}return k}function Qa(f,c){const h=f.key,m=f.validateSpec,y=f.style,k=f.styleSpec,C=f.value,P=f.objectKey,z=k[`${c}_${f.layerType}`];if(!z)return[];const B=P.match(/^(.*)-transition$/);if(c==="paint"&&B&&z[B[1]]&&z[B[1]].transition)return m({key:h,value:C,valueSpec:k.transition,style:y,styleSpec:k});const W=f.valueSpec||z[P];if(!W)return[new Lt(h,C,`unknown property "${P}"`)];let K;if(jn(C)==="string"&&bo(W)&&!W.tokens&&(K=/^{([^}]+)}$/.exec(C)))return[new Lt(h,C,`"${P}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(K[1])} }\`.`)];const ne=[];return f.layerType==="symbol"&&(P==="text-field"&&y&&!y.glyphs&&ne.push(new Lt(h,C,'use of "text-field" requires a style "glyphs" property')),P==="text-font"&&ja(Mi(C))&&_r(C.type)==="identity"&&ne.push(new Lt(h,C,'"text-font" does not support identity functions'))),ne.concat(m({key:f.key,value:C,valueSpec:W,style:y,styleSpec:k,expressionContext:"property",propertyType:c,propertyKey:P}))}function tc(f){return Qa(f,"paint")}function nc(f){return Qa(f,"layout")}function Qo(f){let c=[];const h=f.value,m=f.key,y=f.style,k=f.styleSpec;h.type||h.ref||c.push(new Lt(m,h,'either "type" or "ref" is required'));let C=_r(h.type);const P=_r(h.ref);if(h.id){const z=_r(h.id);for(let B=0;B<f.arrayIndex;B++){const W=y.layers[B];_r(W.id)===z&&c.push(new Lt(m,h.id,`duplicate layer id "${h.id}", previously used at line ${W.id.__line__}`))}}if("ref"in h){let z;["type","source","source-layer","filter","layout"].forEach(B=>{B in h&&c.push(new Lt(m,h[B],`"${B}" is prohibited for ref layers`))}),y.layers.forEach(B=>{_r(B.id)===P&&(z=B)}),z?z.ref?c.push(new Lt(m,h.ref,"ref cannot reference another ref layer")):C=_r(z.type):c.push(new Lt(m,h.ref,`ref layer "${P}" not found`))}else if(C!=="background")if(h.source){const z=y.sources&&y.sources[h.source],B=z&&_r(z.type);z?B==="vector"&&C==="raster"?c.push(new Lt(m,h.source,`layer "${h.id}" requires a raster source`)):B!=="raster-dem"&&C==="hillshade"?c.push(new Lt(m,h.source,`layer "${h.id}" requires a raster-dem source`)):B==="raster"&&C!=="raster"?c.push(new Lt(m,h.source,`layer "${h.id}" requires a vector source`)):B!=="vector"||h["source-layer"]?B==="raster-dem"&&C!=="hillshade"?c.push(new Lt(m,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!h.paint||!h.paint["line-gradient"]||B==="geojson"&&z.lineMetrics||c.push(new Lt(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):c.push(new Lt(m,h,`layer "${h.id}" must specify a "source-layer"`)):c.push(new Lt(m,h.source,`source "${h.source}" not found`))}else c.push(new Lt(m,h,'missing required property "source"'));return c=c.concat(fs({key:m,value:h,valueSpec:k.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${m}.type`,value:h.type,valueSpec:k.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:h,objectKey:"type"}),filter:$o,layout:z=>fs({layer:h,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":B=>nc($s({layerType:C},B))}}),paint:z=>fs({layer:h,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,validateSpec:z.validateSpec,objectElementValidators:{"*":B=>tc($s({layerType:C},B))}})}})),c}function eo(f){const c=f.value,h=f.key,m=jn(c);return m!=="string"?[new Lt(h,c,`string expected, ${m} found`)]:[]}const Lu={promoteId:function({key:f,value:c}){if(jn(c)==="string")return eo({key:f,value:c});{const h=[];for(const m in c)h.push(...eo({key:`${f}.${m}`,value:c[m]}));return h}}};function Ru(f){const c=f.value,h=f.key,m=f.styleSpec,y=f.style,k=f.validateSpec;if(!c.type)return[new Lt(h,c,'"type" is required')];const C=_r(c.type);let P;switch(C){case"vector":case"raster":return P=fs({key:h,value:c,valueSpec:m[`source_${C.replace("-","_")}`],style:f.style,styleSpec:m,objectElementValidators:Lu,validateSpec:k}),P;case"raster-dem":return P=function(z){var B;const W=(B=z.sourceName)!==null&&B!==void 0?B:"",K=z.value,ne=z.styleSpec,he=ne.source_raster_dem,ve=z.style;let xe=[];const Pe=jn(K);if(K===void 0)return xe;if(Pe!=="object")return xe.push(new Lt("source_raster_dem",K,`object expected, ${Pe} found`)),xe;const ze=_r(K.encoding)==="custom",We=["redFactor","greenFactor","blueFactor","baseShift"],Le=z.value.encoding?`"${z.value.encoding}"`:"Default";for(const qe in K)!ze&&We.includes(qe)?xe.push(new Lt(qe,K[qe],`In "${W}": "${qe}" is only valid when "encoding" is set to "custom". ${Le} encoding found`)):he[qe]?xe=xe.concat(z.validateSpec({key:qe,value:K[qe],valueSpec:he[qe],validateSpec:z.validateSpec,style:ve,styleSpec:ne})):xe.push(new Lt(qe,K[qe],`unknown property "${qe}"`));return xe}({sourceName:h,value:c,style:f.style,styleSpec:m,validateSpec:k}),P;case"geojson":if(P=fs({key:h,value:c,valueSpec:m.source_geojson,style:y,styleSpec:m,validateSpec:k,objectElementValidators:Lu}),c.cluster)for(const z in c.clusterProperties){const[B,W]=c.clusterProperties[z],K=typeof B=="string"?[B,["accumulated"],["get",z]]:B;P.push(...Di({key:`${h}.${z}.map`,value:W,validateSpec:k,expressionContext:"cluster-map"})),P.push(...Di({key:`${h}.${z}.reduce`,value:K,validateSpec:k,expressionContext:"cluster-reduce"}))}return P;case"video":return fs({key:h,value:c,valueSpec:m.source_video,style:y,validateSpec:k,styleSpec:m});case"image":return fs({key:h,value:c,valueSpec:m.source_image,style:y,validateSpec:k,styleSpec:m});case"canvas":return[new Lt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zi({key:`${h}.type`,value:c.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,validateSpec:k,styleSpec:m})}}function Ou(f){const c=f.value,h=f.styleSpec,m=h.light,y=f.style;let k=[];const C=jn(c);if(c===void 0)return k;if(C!=="object")return k=k.concat([new Lt("light",c,`object expected, ${C} found`)]),k;for(const P in c){const z=P.match(/^(.*)-transition$/);k=k.concat(z&&m[z[1]]&&m[z[1]].transition?f.validateSpec({key:P,value:c[P],valueSpec:h.transition,validateSpec:f.validateSpec,style:y,styleSpec:h}):m[P]?f.validateSpec({key:P,value:c[P],valueSpec:m[P],validateSpec:f.validateSpec,style:y,styleSpec:h}):[new Lt(P,c[P],`unknown property "${P}"`)])}return k}function Fu(f){const c=f.value,h=f.styleSpec,m=h.sky,y=f.style,k=jn(c);if(c===void 0)return[];if(k!=="object")return[new Lt("sky",c,`object expected, ${k} found`)];let C=[];for(const P in c)C=C.concat(m[P]?li({key:P,value:c[P],valueSpec:m[P],style:y,styleSpec:h}):[new Lt(P,c[P],`unknown property "${P}"`)]);return C}function ea(f){const c=f.value,h=f.styleSpec,m=h.terrain,y=f.style;let k=[];const C=jn(c);if(c===void 0)return k;if(C!=="object")return k=k.concat([new Lt("terrain",c,`object expected, ${C} found`)]),k;for(const P in c)k=k.concat(m[P]?f.validateSpec({key:P,value:c[P],valueSpec:m[P],validateSpec:f.validateSpec,style:y,styleSpec:h}):[new Lt(P,c[P],`unknown property "${P}"`)]);return k}function ta(f){let c=[];const h=f.value,m=f.key;if(Array.isArray(h)){const y=[],k=[];for(const C in h)h[C].id&&y.includes(h[C].id)&&c.push(new Lt(m,h,`all the sprites' ids must be unique, but ${h[C].id} is duplicated`)),y.push(h[C].id),h[C].url&&k.includes(h[C].url)&&c.push(new Lt(m,h,`all the sprites' URLs must be unique, but ${h[C].url} is duplicated`)),k.push(h[C].url),c=c.concat(fs({key:`${m}[${C}]`,value:h[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return c}return eo({key:m,value:h})}const ks={"*":()=>[],array:Ql,boolean:function(f){const c=f.value,h=f.key,m=jn(c);return m!=="boolean"?[new Lt(h,c,`boolean expected, ${m} found`)]:[]},number:Ya,color:function(f){const c=f.key,h=f.value,m=jn(h);return m!=="string"?[new Lt(c,h,`color expected, ${m} found`)]:Wn.parse(String(h))?[]:[new Lt(c,h,`color expected, "${h}" found`)]},constants:Du,enum:zi,filter:$o,function:zu,layer:Qo,object:fs,source:Ru,light:Ou,sky:Fu,terrain:ea,string:eo,formatted:function(f){return eo(f).length===0?[]:Di(f)},resolvedImage:function(f){return eo(f).length===0?[]:Di(f)},padding:function(f){const c=f.key,h=f.value;if(jn(h)==="array"){if(h.length<1||h.length>4)return[new Lt(c,h,`padding requires 1 to 4 values; ${h.length} values found`)];const m={type:"number"};let y=[];for(let k=0;k<h.length;k++)y=y.concat(f.validateSpec({key:`${c}[${k}]`,value:h[k],validateSpec:f.validateSpec,valueSpec:m}));return y}return Ya({key:c,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(f){const c=f.key,h=f.value,m=jn(h),y=f.styleSpec;if(m!=="array"||h.length<1||h.length%2!=0)return[new Lt(c,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let k=[];for(let C=0;C<h.length;C+=2)k=k.concat(zi({key:`${c}[${C}]`,value:h[C],valueSpec:y.layout_symbol["text-anchor"]})),k=k.concat(Ql({key:`${c}[${C+1}]`,value:h[C+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:y}));return k},sprite:ta};function li(f){const c=f.value,h=f.valueSpec,m=f.styleSpec;return f.validateSpec=li,h.expression&&ja(_r(c))?zu(f):h.expression&&tr(Mi(c))?Di(f):h.type&&ks[h.type]?ks[h.type](f):fs($s({},f,{valueSpec:h.type?m[h.type]:h}))}function rc(f){const c=f.value,h=f.key,m=eo(f);return m.length||(c.indexOf("{fontstack}")===-1&&m.push(new Lt(h,c,'"glyphs" url must include a "{fontstack}" token')),c.indexOf("{range}")===-1&&m.push(new Lt(h,c,'"glyphs" url must include a "{range}" token'))),m}function Xs(f,c=He){let h=[];return h=h.concat(li({key:"",value:f,valueSpec:c.$root,styleSpec:c,style:f,validateSpec:li,objectElementValidators:{glyphs:rc,"*":()=>[]}})),f.constants&&(h=h.concat(Du({key:"constants",value:f.constants,style:f,styleSpec:c,validateSpec:li}))),wo(h)}function ci(f){return function(c){return f({...c,validateSpec:li})}}function wo(f){return[].concat(f).sort((c,h)=>c.line-h.line)}function Js(f){return function(...c){return wo(f.apply(this,c))}}Xs.source=Js(ci(Ru)),Xs.sprite=Js(ci(ta)),Xs.glyphs=Js(ci(rc)),Xs.light=Js(ci(Ou)),Xs.sky=Js(ci(Fu)),Xs.terrain=Js(ci(ea)),Xs.layer=Js(ci(Qo)),Xs.filter=Js(ci($o)),Xs.paintProperty=Js(ci(tc)),Xs.layoutProperty=Js(ci(nc));const to=Xs,_h=to.light,sc=to.paintProperty,gh=to.layoutProperty;function xo(f,c){let h=!1;if(c&&c.length)for(const m of c)f.fire(new bn(new Error(m.message))),h=!0;return h}class na{constructor(c,h,m){const y=this.cells=[];if(c instanceof ArrayBuffer){this.arrayBuffer=c;const C=new Int32Array(this.arrayBuffer);c=C[0],this.d=(h=C[1])+2*(m=C[2]);for(let z=0;z<this.d*this.d;z++){const B=C[3+z],W=C[3+z+1];y.push(B===W?null:C.subarray(B,W))}const P=C[3+y.length+1];this.keys=C.subarray(C[3+y.length],P),this.bboxes=C.subarray(P),this.insert=this._insertReadonly}else{this.d=h+2*m;for(let C=0;C<this.d*this.d;C++)y.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=c,this.padding=m,this.scale=h/c,this.uid=0;const k=m/h*c;this.min=-k,this.max=c+k}insert(c,h,m,y,k){this._forEachCell(h,m,y,k,this._insertCell,this.uid++,void 0,void 0),this.keys.push(c),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(k)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(c,h,m,y,k,C){this.cells[k].push(C)}query(c,h,m,y,k){const C=this.min,P=this.max;if(c<=C&&h<=C&&P<=m&&P<=y&&!k)return Array.prototype.slice.call(this.keys);{const z=[];return this._forEachCell(c,h,m,y,this._queryCell,z,{},k),z}}_queryCell(c,h,m,y,k,C,P,z){const B=this.cells[k];if(B!==null){const W=this.keys,K=this.bboxes;for(let ne=0;ne<B.length;ne++){const he=B[ne];if(P[he]===void 0){const ve=4*he;(z?z(K[ve+0],K[ve+1],K[ve+2],K[ve+3]):c<=K[ve+2]&&h<=K[ve+3]&&m>=K[ve+0]&&y>=K[ve+1])?(P[he]=!0,C.push(W[he])):P[he]=!1}}}}_forEachCell(c,h,m,y,k,C,P,z){const B=this._convertToCellCoord(c),W=this._convertToCellCoord(h),K=this._convertToCellCoord(m),ne=this._convertToCellCoord(y);for(let he=B;he<=K;he++)for(let ve=W;ve<=ne;ve++){const xe=this.d*ve+he;if((!z||z(this._convertFromCellCoord(he),this._convertFromCellCoord(ve),this._convertFromCellCoord(he+1),this._convertFromCellCoord(ve+1)))&&k.call(this,c,h,m,y,xe,C,P,z))return}}_convertFromCellCoord(c){return(c-this.padding)/this.scale}_convertToCellCoord(c){return Math.max(0,Math.min(this.d-1,Math.floor(c*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const c=this.cells,h=3+this.cells.length+1+1;let m=0;for(let C=0;C<this.cells.length;C++)m+=this.cells[C].length;const y=new Int32Array(h+m+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let k=h;for(let C=0;C<c.length;C++){const P=c[C];y[3+C]=k,y.set(P,k),k+=P.length}return y[3+c.length]=k,y.set(this.keys,k),k+=this.keys.length,y[3+c.length+1]=k,y.set(this.bboxes,k),k+=this.bboxes.length,y.buffer}static serialize(c,h){const m=c.toArrayBuffer();return h&&h.push(m),{buffer:m}}static deserialize(c){return new na(c.buffer)}}const ui={};function tn(f,c,h={}){if(ui[f])throw new Error(`${f} is already registered.`);Object.defineProperty(c,"_classRegistryKey",{value:f,writeable:!1}),ui[f]={klass:c,omit:h.omit||[],shallow:h.shallow||[]}}tn("Object",Object),tn("TransferableGridIndex",na),tn("Color",Wn),tn("Error",Error),tn("AJAXError",dn),tn("ResolvedImage",Hs),tn("StylePropertyFunction",Ga),tn("StyleExpression",rr,{omit:["_evaluator"]}),tn("ZoomDependentExpression",Xl),tn("ZoomConstantExpression",qa),tn("CompoundExpression",Rs,{omit:["_evaluate"]});for(const f in vo)vo[f]._classRegistryKey||tn(`Expression_${f}`,vo[f]);function el(f){return f&&typeof ArrayBuffer<"u"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function ko(f,c){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error)return f;if(el(f)||Xe(f))return c&&c.push(f),f;if(ArrayBuffer.isView(f)){const h=f;return c&&c.push(h.buffer),h}if(f instanceof ImageData)return c&&c.push(f.data.buffer),f;if(Array.isArray(f)){const h=[];for(const m of f)h.push(ko(m,c));return h}if(typeof f=="object"){const h=f.constructor,m=h._classRegistryKey;if(!m)throw new Error(`can't serialize object of unregistered class ${h.name}`);if(!ui[m])throw new Error(`${m} is not registered.`);const y=h.serialize?h.serialize(f,c):{};if(h.serialize){if(c&&y===c[c.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const k in f){if(!f.hasOwnProperty(k)||ui[m].omit.indexOf(k)>=0)continue;const C=f[k];y[k]=ui[m].shallow.indexOf(k)>=0?C:ko(C,c)}f instanceof Error&&(y.message=f.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(y.$name=m),y}throw new Error("can't serialize object of type "+typeof f)}function Co(f){if(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||el(f)||Xe(f)||ArrayBuffer.isView(f)||f instanceof ImageData)return f;if(Array.isArray(f))return f.map(Co);if(typeof f=="object"){const c=f.$name||"Object";if(!ui[c])throw new Error(`can't deserialize unregistered class ${c}`);const{klass:h}=ui[c];if(!h)throw new Error(`can't deserialize unregistered class ${c}`);if(h.deserialize)return h.deserialize(f);const m=Object.create(h.prototype);for(const y of Object.keys(f)){if(y==="$name")continue;const k=f[y];m[y]=ui[c].shallow.indexOf(y)>=0?k:Co(k)}return m}throw new Error("can't deserialize object of type "+typeof f)}class Bu{constructor(){this.first=!0}update(c,h){const m=Math.floor(c);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=c,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),c!==this.lastZoom&&(this.lastZoom=c,this.lastFloorZoom=m,!0))}}const Xt={"Latin-1 Supplement":f=>f>=128&&f<=255,Arabic:f=>f>=1536&&f<=1791,"Arabic Supplement":f=>f>=1872&&f<=1919,"Arabic Extended-A":f=>f>=2208&&f<=2303,"Hangul Jamo":f=>f>=4352&&f<=4607,"Unified Canadian Aboriginal Syllabics":f=>f>=5120&&f<=5759,Khmer:f=>f>=6016&&f<=6143,"Unified Canadian Aboriginal Syllabics Extended":f=>f>=6320&&f<=6399,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"CJK Radicals Supplement":f=>f>=11904&&f<=12031,"Kangxi Radicals":f=>f>=12032&&f<=12255,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Bopomofo:f=>f>=12544&&f<=12591,"Hangul Compatibility Jamo":f=>f>=12592&&f<=12687,Kanbun:f=>f>=12688&&f<=12703,"Bopomofo Extended":f=>f>=12704&&f<=12735,"CJK Strokes":f=>f>=12736&&f<=12783,"Katakana Phonetic Extensions":f=>f>=12784&&f<=12799,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"CJK Unified Ideographs Extension A":f=>f>=13312&&f<=19903,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Yi Syllables":f=>f>=40960&&f<=42127,"Yi Radicals":f=>f>=42128&&f<=42191,"Hangul Jamo Extended-A":f=>f>=43360&&f<=43391,"Hangul Syllables":f=>f>=44032&&f<=55215,"Hangul Jamo Extended-B":f=>f>=55216&&f<=55295,"Private Use Area":f=>f>=57344&&f<=63743,"CJK Compatibility Ideographs":f=>f>=63744&&f<=64255,"Arabic Presentation Forms-A":f=>f>=64336&&f<=65023,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Arabic Presentation Forms-B":f=>f>=65136&&f<=65279,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function So(f){for(const c of f)if(tl(c.charCodeAt(0)))return!0;return!1}function Nu(f){for(const c of f)if(!Vu(c.charCodeAt(0)))return!1;return!0}function Vu(f){return!(Xt.Arabic(f)||Xt["Arabic Supplement"](f)||Xt["Arabic Extended-A"](f)||Xt["Arabic Presentation Forms-A"](f)||Xt["Arabic Presentation Forms-B"](f))}function tl(f){return!(f!==746&&f!==747&&(f<4352||!(Xt["Bopomofo Extended"](f)||Xt.Bopomofo(f)||Xt["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||Xt["CJK Compatibility Ideographs"](f)||Xt["CJK Compatibility"](f)||Xt["CJK Radicals Supplement"](f)||Xt["CJK Strokes"](f)||!(!Xt["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||Xt["CJK Unified Ideographs Extension A"](f)||Xt["CJK Unified Ideographs"](f)||Xt["Enclosed CJK Letters and Months"](f)||Xt["Hangul Compatibility Jamo"](f)||Xt["Hangul Jamo Extended-A"](f)||Xt["Hangul Jamo Extended-B"](f)||Xt["Hangul Jamo"](f)||Xt["Hangul Syllables"](f)||Xt.Hiragana(f)||Xt["Ideographic Description Characters"](f)||Xt.Kanbun(f)||Xt["Kangxi Radicals"](f)||Xt["Katakana Phonetic Extensions"](f)||Xt.Katakana(f)&&f!==12540||!(!Xt["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!Xt["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||Xt["Unified Canadian Aboriginal Syllabics"](f)||Xt["Unified Canadian Aboriginal Syllabics Extended"](f)||Xt["Vertical Forms"](f)||Xt["Yijing Hexagram Symbols"](f)||Xt["Yi Syllables"](f)||Xt["Yi Radicals"](f))))}function ic(f){return!(tl(f)||function(c){return!!(Xt["Latin-1 Supplement"](c)&&(c===167||c===169||c===174||c===177||c===188||c===189||c===190||c===215||c===247)||Xt["General Punctuation"](c)&&(c===8214||c===8224||c===8225||c===8240||c===8241||c===8251||c===8252||c===8258||c===8263||c===8264||c===8265||c===8273)||Xt["Letterlike Symbols"](c)||Xt["Number Forms"](c)||Xt["Miscellaneous Technical"](c)&&(c>=8960&&c<=8967||c>=8972&&c<=8991||c>=8996&&c<=9e3||c===9003||c>=9085&&c<=9114||c>=9150&&c<=9165||c===9167||c>=9169&&c<=9179||c>=9186&&c<=9215)||Xt["Control Pictures"](c)&&c!==9251||Xt["Optical Character Recognition"](c)||Xt["Enclosed Alphanumerics"](c)||Xt["Geometric Shapes"](c)||Xt["Miscellaneous Symbols"](c)&&!(c>=9754&&c<=9759)||Xt["Miscellaneous Symbols and Arrows"](c)&&(c>=11026&&c<=11055||c>=11088&&c<=11097||c>=11192&&c<=11243)||Xt["CJK Symbols and Punctuation"](c)||Xt.Katakana(c)||Xt["Private Use Area"](c)||Xt["CJK Compatibility Forms"](c)||Xt["Small Form Variants"](c)||Xt["Halfwidth and Fullwidth Forms"](c)||c===8734||c===8756||c===8757||c>=9984&&c<=10087||c>=10102&&c<=10131||c===65532||c===65533)}(f))}function nl(f){return f>=1424&&f<=2303||Xt["Arabic Presentation Forms-A"](f)||Xt["Arabic Presentation Forms-B"](f)}function Uu(f,c){return!(!c&&nl(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||Xt.Khmer(f))}function vh(f){for(const c of f)if(nl(c.charCodeAt(0)))return!0;return!1}const Li=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class or{constructor(c,h){this.zoom=c,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Bu,this.transition={})}isSupportedScript(c){return function(h,m){for(const y of h)if(!Uu(y.charCodeAt(0),m))return!1;return!0}(c,Li.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const c=this.zoom,h=c-Math.floor(c),m=this.crossFadingFactor();return c>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}}}class ra{constructor(c,h){this.property=c,this.value=h,this.expression=function(m,y){if(ja(m))return new Ga(m,y);if(tr(m)){const k=Iu(m,y);if(k.result==="error")throw new Error(k.value.map(C=>`${C.key}: ${C.message}`).join(", "));return k.value}{let k=m;return y.type==="color"&&typeof m=="string"?k=Wn.parse(m):y.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(k=Gs.parse(m)):k=xs.parse(m),{kind:"constant",evaluate:()=>k}}}(h===void 0?c.specification.default:h,c.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(c,h,m){return this.property.possiblyEvaluate(this,c,h,m)}}class rl{constructor(c){this.property=c,this.value=new ra(c,void 0)}transitioned(c,h){return new ju(this.property,this.value,h,me({},c.transition,this.transition),c.now)}untransitioned(){return new ju(this.property,this.value,null,{},0)}}class oc{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitionablePropertyValues)}getValue(c){return ie(this._values[c].value.value)}setValue(c,h){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new rl(this._values[c].property)),this._values[c].value=new ra(this._values[c].property,h===null?void 0:ie(h))}getTransition(c){return ie(this._values[c].transition)}setTransition(c,h){Object.prototype.hasOwnProperty.call(this._values,c)||(this._values[c]=new rl(this._values[c].property)),this._values[c].transition=ie(h)||void 0}serialize(){const c={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(c[h]=m);const y=this.getTransition(h);y!==void 0&&(c[`${h}-transition`]=y)}return c}transitioned(c,h){const m=new qu(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].transitioned(c,h._values[y]);return m}untransitioned(){const c=new qu(this._properties);for(const h of Object.keys(this._values))c._values[h]=this._values[h].untransitioned();return c}}class ju{constructor(c,h,m,y,k){this.property=c,this.value=h,this.begin=k+y.delay||0,this.end=this.begin+y.duration||0,c.specification.transition&&(y.delay||y.duration)&&(this.prior=m)}possiblyEvaluate(c,h,m){const y=c.now||0,k=this.value.possiblyEvaluate(c,h,m),C=this.prior;if(C){if(y>this.end)return this.prior=null,k;if(this.value.isDataDriven())return this.prior=null,k;if(y<this.begin)return C.possiblyEvaluate(c,h,m);{const P=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(c,h,m),k,function(z){if(z<=0)return 0;if(z>=1)return 1;const B=z*z,W=B*z;return 4*(z<.5?W:3*(z-B)+W-.75)}(P))}}return k}}class qu{constructor(c){this._properties=c,this._values=Object.create(c.defaultTransitioningPropertyValues)}possiblyEvaluate(c,h,m){const y=new sa(this._properties);for(const k of Object.keys(this._values))y._values[k]=this._values[k].possiblyEvaluate(c,h,m);return y}hasTransition(){for(const c of Object.keys(this._values))if(this._values[c].prior)return!0;return!1}}class Gu{constructor(c){this._properties=c,this._values=Object.create(c.defaultPropertyValues)}hasValue(c){return this._values[c].value!==void 0}getValue(c){return ie(this._values[c].value)}setValue(c,h){this._values[c]=new ra(this._values[c].property,h===null?void 0:ie(h))}serialize(){const c={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(c[h]=m)}return c}possiblyEvaluate(c,h,m){const y=new sa(this._properties);for(const k of Object.keys(this._values))y._values[k]=this._values[k].possiblyEvaluate(c,h,m);return y}}class Ys{constructor(c,h,m){this.property=c,this.value=h,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(c){return this.value.kind==="constant"?this.value.value:c}evaluate(c,h,m,y){return this.property.evaluate(this.value,this.parameters,c,h,m,y)}}class sa{constructor(c){this._properties=c,this._values=Object.create(c.defaultPossiblyEvaluatedValues)}get(c){return this._values[c]}}class un{constructor(c){this.specification=c}possiblyEvaluate(c,h){if(c.isDataDriven())throw new Error("Value should not be data driven");return c.expression.evaluate(h)}interpolate(c,h,m){const y=us[this.specification.type];return y?y(c,h,m):c}}class gn{constructor(c,h){this.specification=c,this.overrides=h}possiblyEvaluate(c,h,m,y){return new Ys(this,c.expression.kind==="constant"||c.expression.kind==="camera"?{kind:"constant",value:c.expression.evaluate(h,null,{},m,y)}:c.expression,h)}interpolate(c,h,m){if(c.value.kind!=="constant"||h.value.kind!=="constant")return c;if(c.value.value===void 0||h.value.value===void 0)return new Ys(this,{kind:"constant",value:void 0},c.parameters);const y=us[this.specification.type];if(y){const k=y(c.value.value,h.value.value,m);return new Ys(this,{kind:"constant",value:k},c.parameters)}return c}evaluate(c,h,m,y,k,C){return c.kind==="constant"?c.value:c.evaluate(h,m,y,k,C)}}class sl extends gn{possiblyEvaluate(c,h,m,y){if(c.value===void 0)return new Ys(this,{kind:"constant",value:void 0},h);if(c.expression.kind==="constant"){const k=c.expression.evaluate(h,null,{},m,y),C=c.property.specification.type==="resolvedImage"&&typeof k!="string"?k.name:k,P=this._calculate(C,C,C,h);return new Ys(this,{kind:"constant",value:P},h)}if(c.expression.kind==="camera"){const k=this._calculate(c.expression.evaluate({zoom:h.zoom-1}),c.expression.evaluate({zoom:h.zoom}),c.expression.evaluate({zoom:h.zoom+1}),h);return new Ys(this,{kind:"constant",value:k},h)}return new Ys(this,c.expression,h)}evaluate(c,h,m,y,k,C){if(c.kind==="source"){const P=c.evaluate(h,m,y,k,C);return this._calculate(P,P,P,h)}return c.kind==="composite"?this._calculate(c.evaluate({zoom:Math.floor(h.zoom)-1},m,y),c.evaluate({zoom:Math.floor(h.zoom)},m,y),c.evaluate({zoom:Math.floor(h.zoom)+1},m,y),h):c.value}_calculate(c,h,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:c,to:h}:{from:m,to:h}}interpolate(c){return c}}class ia{constructor(c){this.specification=c}possiblyEvaluate(c,h,m,y){if(c.value!==void 0){if(c.expression.kind==="constant"){const k=c.expression.evaluate(h,null,{},m,y);return this._calculate(k,k,k,h)}return this._calculate(c.expression.evaluate(new or(Math.floor(h.zoom-1),h)),c.expression.evaluate(new or(Math.floor(h.zoom),h)),c.expression.evaluate(new or(Math.floor(h.zoom+1),h)),h)}}_calculate(c,h,m,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:c,to:h}:{from:m,to:h}}interpolate(c){return c}}class ac{constructor(c){this.specification=c}possiblyEvaluate(c,h,m,y){return!!c.expression.evaluate(h,null,{},m,y)}interpolate(){return!1}}class Cs{constructor(c){this.properties=c,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in c){const m=c[h];m.specification.overridable&&this.overridableProperties.push(h);const y=this.defaultPropertyValues[h]=new ra(m,void 0),k=this.defaultTransitionablePropertyValues[h]=new rl(m);this.defaultTransitioningPropertyValues[h]=k.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=y.possiblyEvaluate({})}}}tn("DataDrivenProperty",gn),tn("DataConstantProperty",un),tn("CrossFadedDataDrivenProperty",sl),tn("CrossFadedProperty",ia),tn("ColorRampProperty",ac);const lc="-transition";class Qs extends fn{constructor(c,h){if(super(),this.id=c.id,this.type=c.type,this._featureFilter={filter:()=>!0,needGeometry:!1},c.type!=="custom"&&(this.metadata=c.metadata,this.minzoom=c.minzoom,this.maxzoom=c.maxzoom,c.type!=="background"&&(this.source=c.source,this.sourceLayer=c["source-layer"],this.filter=c.filter),h.layout&&(this._unevaluatedLayout=new Gu(h.layout)),h.paint)){this._transitionablePaint=new oc(h.paint);for(const m in c.paint)this.setPaintProperty(m,c.paint[m],{validate:!1});for(const m in c.layout)this.setLayoutProperty(m,c.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new sa(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(c){return c==="visibility"?this.visibility:this._unevaluatedLayout.getValue(c)}setLayoutProperty(c,h,m={}){h!=null&&this._validate(gh,`layers.${this.id}.layout.${c}`,c,h,m)||(c!=="visibility"?this._unevaluatedLayout.setValue(c,h):this.visibility=h)}getPaintProperty(c){return c.endsWith(lc)?this._transitionablePaint.getTransition(c.slice(0,-11)):this._transitionablePaint.getValue(c)}setPaintProperty(c,h,m={}){if(h!=null&&this._validate(sc,`layers.${this.id}.paint.${c}`,c,h,m))return!1;if(c.endsWith(lc))return this._transitionablePaint.setTransition(c.slice(0,-11),h||void 0),!1;{const y=this._transitionablePaint._values[c],k=y.property.specification["property-type"]==="cross-faded-data-driven",C=y.value.isDataDriven(),P=y.value;this._transitionablePaint.setValue(c,h),this._handleSpecialPaintPropertyUpdate(c);const z=this._transitionablePaint._values[c].value;return z.isDataDriven()||C||k||this._handleOverridablePaintPropertyUpdate(c,P,z)}}_handleSpecialPaintPropertyUpdate(c){}_handleOverridablePaintPropertyUpdate(c,h,m){return!1}isHidden(c){return!!(this.minzoom&&c<this.minzoom)||!!(this.maxzoom&&c>=this.maxzoom)||this.visibility==="none"}updateTransitions(c){this._transitioningPaint=this._transitionablePaint.transitioned(c,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(c,h){c.getCrossfadeParameters&&(this._crossfadeParameters=c.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(c,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(c,void 0,h)}serialize(){const c={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(c.layout=c.layout||{},c.layout.visibility=this.visibility),Y(c,(h,m)=>!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length))}_validate(c,h,m,y,k={}){return(!k||k.validate!==!1)&&xo(this,c.call(to,{key:h,layerType:this.type,objectKey:m,value:y,styleSpec:He,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const c in this.paint._values){const h=this.paint.get(c);if(h instanceof Ys&&bo(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const Hu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class oa{constructor(c,h){this._structArray=c,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class gr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(c,h){return c._trim(),h&&(c.isTransferred=!0,h.push(c.arrayBuffer)),{length:c.length,arrayBuffer:c.arrayBuffer}}static deserialize(c){const h=Object.create(this.prototype);return h.arrayBuffer=c.arrayBuffer,h.length=c.length,h.capacity=c.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(c){this.reserve(c),this.length=c}reserve(c){if(c>this.capacity){this.capacity=Math.max(c,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Sr(f,c=1){let h=0,m=0;return{members:f.map(y=>{const k=Hu[y.type].BYTES_PER_ELEMENT,C=h=Zu(h,Math.max(c,k)),P=y.components||1;return m=Math.max(m,k),h+=k*P,{name:y.name,type:y.type,components:P,offset:C}}),size:Zu(h,Math.max(m,c)),alignment:c}}function Zu(f,c){return Math.ceil(f/c)*c}class aa extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h){const m=this.length;return this.resize(m+1),this.emplace(m,c,h)}emplace(c,h,m){const y=2*c;return this.int16[y+0]=h,this.int16[y+1]=m,c}}aa.prototype.bytesPerElement=4,tn("StructArrayLayout2i4",aa);class $i extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,m)}emplace(c,h,m,y){const k=3*c;return this.int16[k+0]=h,this.int16[k+1]=m,this.int16[k+2]=y,c}}$i.prototype.bytesPerElement=6,tn("StructArrayLayout3i6",$i);class cc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,y){const k=this.length;return this.resize(k+1),this.emplace(k,c,h,m,y)}emplace(c,h,m,y,k){const C=4*c;return this.int16[C+0]=h,this.int16[C+1]=m,this.int16[C+2]=y,this.int16[C+3]=k,c}}cc.prototype.bytesPerElement=8,tn("StructArrayLayout4i8",cc);class uc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,y,k,C){const P=this.length;return this.resize(P+1),this.emplace(P,c,h,m,y,k,C)}emplace(c,h,m,y,k,C,P){const z=6*c;return this.int16[z+0]=h,this.int16[z+1]=m,this.int16[z+2]=y,this.int16[z+3]=k,this.int16[z+4]=C,this.int16[z+5]=P,c}}uc.prototype.bytesPerElement=12,tn("StructArrayLayout2i4i12",uc);class fc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,y,k,C){const P=this.length;return this.resize(P+1),this.emplace(P,c,h,m,y,k,C)}emplace(c,h,m,y,k,C,P){const z=4*c,B=8*c;return this.int16[z+0]=h,this.int16[z+1]=m,this.uint8[B+4]=y,this.uint8[B+5]=k,this.uint8[B+6]=C,this.uint8[B+7]=P,c}}fc.prototype.bytesPerElement=8,tn("StructArrayLayout2i4ub8",fc);class la extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h){const m=this.length;return this.resize(m+1),this.emplace(m,c,h)}emplace(c,h,m){const y=2*c;return this.float32[y+0]=h,this.float32[y+1]=m,c}}la.prototype.bytesPerElement=8,tn("StructArrayLayout2f8",la);class il extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m,y,k,C,P,z,B,W){const K=this.length;return this.resize(K+1),this.emplace(K,c,h,m,y,k,C,P,z,B,W)}emplace(c,h,m,y,k,C,P,z,B,W,K){const ne=10*c;return this.uint16[ne+0]=h,this.uint16[ne+1]=m,this.uint16[ne+2]=y,this.uint16[ne+3]=k,this.uint16[ne+4]=C,this.uint16[ne+5]=P,this.uint16[ne+6]=z,this.uint16[ne+7]=B,this.uint16[ne+8]=W,this.uint16[ne+9]=K,c}}il.prototype.bytesPerElement=20,tn("StructArrayLayout10ui20",il);class hc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m,y,k,C,P,z,B,W,K,ne){const he=this.length;return this.resize(he+1),this.emplace(he,c,h,m,y,k,C,P,z,B,W,K,ne)}emplace(c,h,m,y,k,C,P,z,B,W,K,ne,he){const ve=12*c;return this.int16[ve+0]=h,this.int16[ve+1]=m,this.int16[ve+2]=y,this.int16[ve+3]=k,this.uint16[ve+4]=C,this.uint16[ve+5]=P,this.uint16[ve+6]=z,this.uint16[ve+7]=B,this.int16[ve+8]=W,this.int16[ve+9]=K,this.int16[ve+10]=ne,this.int16[ve+11]=he,c}}hc.prototype.bytesPerElement=24,tn("StructArrayLayout4i4ui4i24",hc);class dc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,m)}emplace(c,h,m,y){const k=3*c;return this.float32[k+0]=h,this.float32[k+1]=m,this.float32[k+2]=y,c}}dc.prototype.bytesPerElement=12,tn("StructArrayLayout3f12",dc);class wi extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.uint32[1*c+0]=h,c}}wi.prototype.bytesPerElement=4,tn("StructArrayLayout1ul4",wi);class ol extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m,y,k,C,P,z,B){const W=this.length;return this.resize(W+1),this.emplace(W,c,h,m,y,k,C,P,z,B)}emplace(c,h,m,y,k,C,P,z,B,W){const K=10*c,ne=5*c;return this.int16[K+0]=h,this.int16[K+1]=m,this.int16[K+2]=y,this.int16[K+3]=k,this.int16[K+4]=C,this.int16[K+5]=P,this.uint32[ne+3]=z,this.uint16[K+8]=B,this.uint16[K+9]=W,c}}ol.prototype.bytesPerElement=20,tn("StructArrayLayout6i1ul2ui20",ol);class ca extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,y,k,C){const P=this.length;return this.resize(P+1),this.emplace(P,c,h,m,y,k,C)}emplace(c,h,m,y,k,C,P){const z=6*c;return this.int16[z+0]=h,this.int16[z+1]=m,this.int16[z+2]=y,this.int16[z+3]=k,this.int16[z+4]=C,this.int16[z+5]=P,c}}ca.prototype.bytesPerElement=12,tn("StructArrayLayout2i2i2i12",ca);class al extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(c,h,m,y,k){const C=this.length;return this.resize(C+1),this.emplace(C,c,h,m,y,k)}emplace(c,h,m,y,k,C){const P=4*c,z=8*c;return this.float32[P+0]=h,this.float32[P+1]=m,this.float32[P+2]=y,this.int16[z+6]=k,this.int16[z+7]=C,c}}al.prototype.bytesPerElement=16,tn("StructArrayLayout2f1f2i16",al);class ua extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m,y){const k=this.length;return this.resize(k+1),this.emplace(k,c,h,m,y)}emplace(c,h,m,y,k){const C=12*c,P=3*c;return this.uint8[C+0]=h,this.uint8[C+1]=m,this.float32[P+1]=y,this.float32[P+2]=k,c}}ua.prototype.bytesPerElement=12,tn("StructArrayLayout2ub2f12",ua);class ll extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,m)}emplace(c,h,m,y){const k=3*c;return this.uint16[k+0]=h,this.uint16[k+1]=m,this.uint16[k+2]=y,c}}ll.prototype.bytesPerElement=6,tn("StructArrayLayout3ui6",ll);class To extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m,y,k,C,P,z,B,W,K,ne,he,ve,xe,Pe,ze){const We=this.length;return this.resize(We+1),this.emplace(We,c,h,m,y,k,C,P,z,B,W,K,ne,he,ve,xe,Pe,ze)}emplace(c,h,m,y,k,C,P,z,B,W,K,ne,he,ve,xe,Pe,ze,We){const Le=24*c,qe=12*c,ct=48*c;return this.int16[Le+0]=h,this.int16[Le+1]=m,this.uint16[Le+2]=y,this.uint16[Le+3]=k,this.uint32[qe+2]=C,this.uint32[qe+3]=P,this.uint32[qe+4]=z,this.uint16[Le+10]=B,this.uint16[Le+11]=W,this.uint16[Le+12]=K,this.float32[qe+7]=ne,this.float32[qe+8]=he,this.uint8[ct+36]=ve,this.uint8[ct+37]=xe,this.uint8[ct+38]=Pe,this.uint32[qe+10]=ze,this.int16[Le+22]=We,c}}To.prototype.bytesPerElement=48,tn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",To);class no extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m,y,k,C,P,z,B,W,K,ne,he,ve,xe,Pe,ze,We,Le,qe,ct,_t,Yt,on,Jt,Zt,Bt,rn){const Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,c,h,m,y,k,C,P,z,B,W,K,ne,he,ve,xe,Pe,ze,We,Le,qe,ct,_t,Yt,on,Jt,Zt,Bt,rn)}emplace(c,h,m,y,k,C,P,z,B,W,K,ne,he,ve,xe,Pe,ze,We,Le,qe,ct,_t,Yt,on,Jt,Zt,Bt,rn,Ht){const zt=32*c,pn=16*c;return this.int16[zt+0]=h,this.int16[zt+1]=m,this.int16[zt+2]=y,this.int16[zt+3]=k,this.int16[zt+4]=C,this.int16[zt+5]=P,this.int16[zt+6]=z,this.int16[zt+7]=B,this.uint16[zt+8]=W,this.uint16[zt+9]=K,this.uint16[zt+10]=ne,this.uint16[zt+11]=he,this.uint16[zt+12]=ve,this.uint16[zt+13]=xe,this.uint16[zt+14]=Pe,this.uint16[zt+15]=ze,this.uint16[zt+16]=We,this.uint16[zt+17]=Le,this.uint16[zt+18]=qe,this.uint16[zt+19]=ct,this.uint16[zt+20]=_t,this.uint16[zt+21]=Yt,this.uint16[zt+22]=on,this.uint32[pn+12]=Jt,this.float32[pn+13]=Zt,this.float32[pn+14]=Bt,this.uint16[zt+30]=rn,this.uint16[zt+31]=Ht,c}}no.prototype.bytesPerElement=64,tn("StructArrayLayout8i15ui1ul2f2ui64",no);class cl extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.float32[1*c+0]=h,c}}cl.prototype.bytesPerElement=4,tn("StructArrayLayout1f4",cl);class ul extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,m)}emplace(c,h,m,y){const k=3*c;return this.uint16[6*c+0]=h,this.float32[k+1]=m,this.float32[k+2]=y,c}}ul.prototype.bytesPerElement=12,tn("StructArrayLayout1ui2f12",ul);class ro extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h,m){const y=this.length;return this.resize(y+1),this.emplace(y,c,h,m)}emplace(c,h,m,y){const k=4*c;return this.uint32[2*c+0]=h,this.uint16[k+2]=m,this.uint16[k+3]=y,c}}ro.prototype.bytesPerElement=8,tn("StructArrayLayout1ul2ui8",ro);class pc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c,h){const m=this.length;return this.resize(m+1),this.emplace(m,c,h)}emplace(c,h,m){const y=2*c;return this.uint16[y+0]=h,this.uint16[y+1]=m,c}}pc.prototype.bytesPerElement=4,tn("StructArrayLayout2ui4",pc);class mc extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(c){const h=this.length;return this.resize(h+1),this.emplace(h,c)}emplace(c,h){return this.uint16[1*c+0]=h,c}}mc.prototype.bytesPerElement=2,tn("StructArrayLayout1ui2",mc);class fl extends gr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(c,h,m,y){const k=this.length;return this.resize(k+1),this.emplace(k,c,h,m,y)}emplace(c,h,m,y,k){const C=4*c;return this.float32[C+0]=h,this.float32[C+1]=m,this.float32[C+2]=y,this.float32[C+3]=k,c}}fl.prototype.bytesPerElement=16,tn("StructArrayLayout4f16",fl);class Wu extends oa{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new b(this.anchorPointX,this.anchorPointY)}}Wu.prototype.size=20;class $ extends ol{get(c){return new Wu(this,c)}}tn("CollisionBoxArray",$);class u extends oa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(c){this._structArray.uint8[this._pos1+37]=c}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(c){this._structArray.uint8[this._pos1+38]=c}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(c){this._structArray.uint32[this._pos4+10]=c}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}u.prototype.size=48;class p extends To{get(c){return new u(this,c)}}tn("PlacedSymbolArray",p);class g extends oa{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(c){this._structArray.uint32[this._pos4+12]=c}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}g.prototype.size=64;class v extends no{get(c){return new g(this,c)}}tn("SymbolInstanceArray",v);class x extends cl{getoffsetX(c){return this.float32[1*c+0]}}tn("GlyphOffsetArray",x);class A extends $i{getx(c){return this.int16[3*c+0]}gety(c){return this.int16[3*c+1]}gettileUnitDistanceFromAnchor(c){return this.int16[3*c+2]}}tn("SymbolLineVertexArray",A);class D extends oa{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}D.prototype.size=12;class O extends ul{get(c){return new D(this,c)}}tn("TextAnchorOffsetArray",O);class H extends oa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}H.prototype.size=8;class X extends ro{get(c){return new H(this,c)}}tn("FeatureIndexArray",X);class J extends aa{}class _e extends aa{}class Ee extends aa{}class Ie extends uc{}class Me extends fc{}class we extends la{}class Oe extends il{}class Je extends hc{}class De extends dc{}class Ge extends wi{}class Ye extends ca{}class tt extends ua{}class st extends ll{}class St extends pc{}const yt=Sr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rt}=yt;class Nt{constructor(c=[]){this.segments=c}prepareSegment(c,h,m,y){let k=this.segments[this.segments.length-1];return c>Nt.MAX_VERTEX_ARRAY_LENGTH&&fe(`Max vertices per segment is ${Nt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${c}`),(!k||k.vertexLength+c>Nt.MAX_VERTEX_ARRAY_LENGTH||k.sortKey!==y)&&(k={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},y!==void 0&&(k.sortKey=y),this.segments.push(k)),k}get(){return this.segments}destroy(){for(const c of this.segments)for(const h in c.vaos)c.vaos[h].destroy()}static simpleSegment(c,h,m,y){return new Nt([{vertexOffset:c,primitiveOffset:h,vertexLength:m,primitiveLength:y,vaos:{},sortKey:0}])}}function Pn(f,c){return 256*(f=le(Math.floor(f),0,255))+le(Math.floor(c),0,255)}Nt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,tn("SegmentVector",Nt);const Gt=Sr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var vn={exports:{}},An={exports:{}};An.exports=function(f,c){var h,m,y,k,C,P,z,B;for(m=f.length-(h=3&f.length),y=c,C=3432918353,P=461845907,B=0;B<m;)z=255&f.charCodeAt(B)|(255&f.charCodeAt(++B))<<8|(255&f.charCodeAt(++B))<<16|(255&f.charCodeAt(++B))<<24,++B,y=27492+(65535&(k=5*(65535&(y=(y^=z=(65535&(z=(z=(65535&z)*C+(((z>>>16)*C&65535)<<16)&4294967295)<<15|z>>>17))*P+(((z>>>16)*P&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(k>>>16)&65535)<<16);switch(z=0,h){case 3:z^=(255&f.charCodeAt(B+2))<<16;case 2:z^=(255&f.charCodeAt(B+1))<<8;case 1:y^=z=(65535&(z=(z=(65535&(z^=255&f.charCodeAt(B)))*C+(((z>>>16)*C&65535)<<16)&4294967295)<<15|z>>>17))*P+(((z>>>16)*P&65535)<<16)&4294967295}return y^=f.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var Nn=An.exports,$n={exports:{}};$n.exports=function(f,c){for(var h,m=f.length,y=c^m,k=0;m>=4;)h=1540483477*(65535&(h=255&f.charCodeAt(k)|(255&f.charCodeAt(++k))<<8|(255&f.charCodeAt(++k))<<16|(255&f.charCodeAt(++k))<<24))+((1540483477*(h>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++k;switch(m){case 3:y^=(255&f.charCodeAt(k+2))<<16;case 2:y^=(255&f.charCodeAt(k+1))<<8;case 1:y=1540483477*(65535&(y^=255&f.charCodeAt(k)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var Dn=Nn,zn=$n.exports;vn.exports=Dn,vn.exports.murmur3=Dn,vn.exports.murmur2=zn;var vr=l(vn.exports);class Xn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(c,h,m,y){this.ids.push(Os(c)),this.positions.push(h,m,y)}getPositions(c){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=Os(c);let m=0,y=this.ids.length-1;for(;m<y;){const C=m+y>>1;this.ids[C]>=h?y=C:m=C+1}const k=[];for(;this.ids[m]===h;)k.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return k}static serialize(c,h){const m=new Float64Array(c.ids),y=new Uint32Array(c.positions);return Br(m,y,0,m.length-1),h&&h.push(m.buffer,y.buffer),{ids:m,positions:y}}static deserialize(c){const h=new Xn;return h.ids=c.ids,h.positions=c.positions,h.indexed=!0,h}}function Os(f){const c=+f;return!isNaN(c)&&c<=Number.MAX_SAFE_INTEGER?c:vr(String(f))}function Br(f,c,h,m){for(;h<m;){const y=f[h+m>>1];let k=h-1,C=m+1;for(;;){do k++;while(f[k]<y);do C--;while(f[C]>y);if(k>=C)break;ur(f,k,C),ur(c,3*k,3*C),ur(c,3*k+1,3*C+1),ur(c,3*k+2,3*C+2)}C-h<m-C?(Br(f,c,h,C),h=C+1):(Br(f,c,C+1,m),m=C)}}function ur(f,c,h){const m=f[c];f[c]=f[h],f[h]=m}tn("FeaturePositionMap",Xn);class Nr{constructor(c,h){this.gl=c.gl,this.location=h}}class Fs extends Nr{constructor(c,h){super(c,h),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1f(this.location,c))}}class fi extends Nr{constructor(c,h){super(c,h),this.current=[0,0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]&&c[3]===this.current[3]||(this.current=c,this.gl.uniform4f(this.location,c[0],c[1],c[2],c[3]))}}class Ri extends Nr{constructor(c,h){super(c,h),this.current=Wn.transparent}set(c){c.r===this.current.r&&c.g===this.current.g&&c.b===this.current.b&&c.a===this.current.a||(this.current=c,this.gl.uniform4f(this.location,c.r,c.g,c.b,c.a))}}const fa=new Float32Array(16);function Oi(f){return[Pn(255*f.r,255*f.g),Pn(255*f.b,255*f.a)]}class hi{constructor(c,h,m){this.value=c,this.uniformNames=h.map(y=>`u_${y}`),this.type=m}setUniform(c,h,m){c.set(m.constantOr(this.value))}getBinding(c,h,m){return this.type==="color"?new Ri(c,h):new Fs(c,h)}}class Pr{constructor(c,h){this.uniformNames=h.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(c,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=c.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=c.tlbr}setUniform(c,h,m,y){const k=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;k&&c.set(k)}getBinding(c,h,m){return m.substr(0,9)==="u_pattern"?new fi(c,h):new Fs(c,h)}}class fr{constructor(c,h,m,y){this.expression=c,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(k=>({name:`a_${k}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(c,h,m,y,k){const C=this.paintVertexArray.length,P=this.expression.evaluate(new or(0),h,{},y,[],k);this.paintVertexArray.resize(c),this._setPaintValue(C,c,P)}updatePaintArray(c,h,m,y){const k=this.expression.evaluate({zoom:0},m,y);this._setPaintValue(c,h,k)}_setPaintValue(c,h,m){if(this.type==="color"){const y=Oi(m);for(let k=c;k<h;k++)this.paintVertexArray.emplace(k,y[0],y[1])}else{for(let y=c;y<h;y++)this.paintVertexArray.emplace(y,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ar{constructor(c,h,m,y,k,C){this.expression=c,this.uniformNames=h.map(P=>`u_${P}_t`),this.type=m,this.useIntegerZoom=y,this.zoom=k,this.maxValue=0,this.paintVertexAttributes=h.map(P=>({name:`a_${P}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(c,h,m,y,k){const C=this.expression.evaluate(new or(this.zoom),h,{},y,[],k),P=this.expression.evaluate(new or(this.zoom+1),h,{},y,[],k),z=this.paintVertexArray.length;this.paintVertexArray.resize(c),this._setPaintValue(z,c,C,P)}updatePaintArray(c,h,m,y){const k=this.expression.evaluate({zoom:this.zoom},m,y),C=this.expression.evaluate({zoom:this.zoom+1},m,y);this._setPaintValue(c,h,k,C)}_setPaintValue(c,h,m,y){if(this.type==="color"){const k=Oi(m),C=Oi(y);for(let P=c;P<h;P++)this.paintVertexArray.emplace(P,k[0],k[1],C[0],C[1])}else{for(let k=c;k<h;k++)this.paintVertexArray.emplace(k,m,y);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(y))}}upload(c){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=c.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(c,h){const m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,y=le(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);c.set(y)}getBinding(c,h,m){return new Fs(c,h)}}class Zs{constructor(c,h,m,y,k,C){this.expression=c,this.type=h,this.useIntegerZoom=m,this.zoom=y,this.layerId=C,this.zoomInPaintVertexArray=new k,this.zoomOutPaintVertexArray=new k}populatePaintArray(c,h,m){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(c),this.zoomOutPaintVertexArray.resize(c),this._setPaintValues(y,c,h.patterns&&h.patterns[this.layerId],m)}updatePaintArray(c,h,m,y,k){this._setPaintValues(c,h,m.patterns&&m.patterns[this.layerId],k)}_setPaintValues(c,h,m,y){if(!y||!m)return;const{min:k,mid:C,max:P}=m,z=y[k],B=y[C],W=y[P];if(z&&B&&W)for(let K=c;K<h;K++)this.zoomInPaintVertexArray.emplace(K,B.tl[0],B.tl[1],B.br[0],B.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],B.pixelRatio,z.pixelRatio),this.zoomOutPaintVertexArray.emplace(K,B.tl[0],B.tl[1],B.br[0],B.br[1],W.tl[0],W.tl[1],W.br[0],W.br[1],B.pixelRatio,W.pixelRatio)}upload(c){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=c.createVertexBuffer(this.zoomInPaintVertexArray,Gt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=c.createVertexBuffer(this.zoomOutPaintVertexArray,Gt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ar{constructor(c,h,m){this.binders={},this._buffers=[];const y=[];for(const k in c.paint._values){if(!m(k))continue;const C=c.paint.get(k);if(!(C instanceof Ys&&bo(C.property.specification)))continue;const P=Ws(k,c.type),z=C.value,B=C.property.specification.type,W=C.property.useIntegerZoom,K=C.property.specification["property-type"],ne=K==="cross-faded"||K==="cross-faded-data-driven";if(z.kind==="constant")this.binders[k]=ne?new Pr(z.value,P):new hi(z.value,P,B),y.push(`/u_${k}`);else if(z.kind==="source"||ne){const he=Mr(k,B,"source");this.binders[k]=ne?new Zs(z,B,W,h,he,c.id):new fr(z,P,B,he),y.push(`/a_${k}`)}else{const he=Mr(k,B,"composite");this.binders[k]=new ar(z,P,B,W,h,he),y.push(`/z_${k}`)}}this.cacheKey=y.sort().join("")}getMaxValue(c){const h=this.binders[c];return h instanceof fr||h instanceof ar?h.maxValue:0}populatePaintArrays(c,h,m,y,k){for(const C in this.binders){const P=this.binders[C];(P instanceof fr||P instanceof ar||P instanceof Zs)&&P.populatePaintArray(c,h,m,y,k)}}setConstantPatternPositions(c,h){for(const m in this.binders){const y=this.binders[m];y instanceof Pr&&y.setConstantPatternPositions(c,h)}}updatePaintArrays(c,h,m,y,k){let C=!1;for(const P in c){const z=h.getPositions(P);for(const B of z){const W=m.feature(B.index);for(const K in this.binders){const ne=this.binders[K];if((ne instanceof fr||ne instanceof ar||ne instanceof Zs)&&ne.expression.isStateDependent===!0){const he=y.paint.get(K);ne.expression=he.value,ne.updatePaintArray(B.start,B.end,W,c[P],k),C=!0}}}}return C}defines(){const c=[];for(const h in this.binders){const m=this.binders[h];(m instanceof hi||m instanceof Pr)&&c.push(...m.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return c}getBinderAttributes(){const c=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof fr||m instanceof ar)for(let y=0;y<m.paintVertexAttributes.length;y++)c.push(m.paintVertexAttributes[y].name);else if(m instanceof Zs)for(let y=0;y<Gt.members.length;y++)c.push(Gt.members[y].name)}return c}getBinderUniforms(){const c=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof hi||m instanceof Pr||m instanceof ar)for(const y of m.uniformNames)c.push(y)}return c}getPaintVertexBuffers(){return this._buffers}getUniforms(c,h){const m=[];for(const y in this.binders){const k=this.binders[y];if(k instanceof hi||k instanceof Pr||k instanceof ar){for(const C of k.uniformNames)if(h[C]){const P=k.getBinding(c,h[C],C);m.push({name:C,property:y,binding:P})}}}return m}setUniforms(c,h,m,y){for(const{name:k,property:C,binding:P}of h)this.binders[C].setUniform(P,y,m.get(C),k)}updatePaintBuffers(c){this._buffers=[];for(const h in this.binders){const m=this.binders[h];if(c&&m instanceof Zs){const y=c.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(m instanceof fr||m instanceof ar)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(c){for(const h in this.binders){const m=this.binders[h];(m instanceof fr||m instanceof ar||m instanceof Zs)&&m.upload(c)}this.updatePaintBuffers()}destroy(){for(const c in this.binders){const h=this.binders[c];(h instanceof fr||h instanceof ar||h instanceof Zs)&&h.destroy()}}}class hr{constructor(c,h,m=()=>!0){this.programConfigurations={};for(const y of c)this.programConfigurations[y.id]=new Ar(y,h,m);this.needsUpload=!1,this._featureMap=new Xn,this._bufferOffset=0}populatePaintArrays(c,h,m,y,k,C){for(const P in this.programConfigurations)this.programConfigurations[P].populatePaintArrays(c,h,y,k,C);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,c),this._bufferOffset=c,this.needsUpload=!0}updatePaintArrays(c,h,m,y){for(const k of m)this.needsUpload=this.programConfigurations[k.id].updatePaintArrays(c,this._featureMap,h,k,y)||this.needsUpload}get(c){return this.programConfigurations[c]}upload(c){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(c);this.needsUpload=!1}}destroy(){for(const c in this.programConfigurations)this.programConfigurations[c].destroy()}}function Ws(f,c){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${c}-`,"").replace(/-/g,"_")]}function Mr(f,c,h){const m={color:{source:la,composite:fl},number:{source:cl,composite:la}},y=function(k){return{"line-pattern":{source:Oe,composite:Oe},"fill-pattern":{source:Oe,composite:Oe},"fill-extrusion-pattern":{source:Oe,composite:Oe}}[k]}(f);return y&&y[h]||m[c][h]}tn("ConstantBinder",hi),tn("CrossFadedConstantBinder",Pr),tn("SourceExpressionBinder",fr),tn("CrossFadedCompositeBinder",Zs),tn("CompositeExpressionBinder",ar),tn("ProgramConfiguration",Ar,{omit:["_buffers"]}),tn("ProgramConfigurationSet",hr);const wr=8192,_c=Math.pow(2,14)-1,Ku=-_c-1;function so(f){const c=wr/f.extent,h=f.loadGeometry();for(let m=0;m<h.length;m++){const y=h[m];for(let k=0;k<y.length;k++){const C=y[k],P=Math.round(C.x*c),z=Math.round(C.y*c);C.x=le(P,Ku,_c),C.y=le(z,Ku,_c),(P<C.x||P>C.x+1||z<C.y||z>C.y+1)&&fe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function io(f,c){return{type:f.type,id:f.id,properties:f.properties,geometry:c?so(f):[]}}function hl(f,c,h,m,y){f.emplaceBack(2*c+(m+1)/2,2*h+(y+1)/2)}class Fi{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new _e,this.indexArray=new st,this.segments=new Nt,this.programConfigurations=new hr(c.layers,c.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,m){const y=this.layers[0],k=[];let C=null,P=!1;y.type==="circle"&&(C=y.layout.get("circle-sort-key"),P=!C.isConstant());for(const{feature:z,id:B,index:W,sourceLayerIndex:K}of c){const ne=this.layers[0]._featureFilter.needGeometry,he=io(z,ne);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),he,m))continue;const ve=P?C.evaluate(he,{},m):void 0,xe={id:B,properties:z.properties,type:z.type,sourceLayerIndex:K,index:W,geometry:ne?he.geometry:so(z),patterns:{},sortKey:ve};k.push(xe)}P&&k.sort((z,B)=>z.sortKey-B.sortKey);for(const z of k){const{geometry:B,index:W,sourceLayerIndex:K}=z,ne=c[W].feature;this.addFeature(z,B,W,m),h.featureIndex.insert(ne,B,W,K,this.index)}}update(c,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Rt),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(c,h,m,y){for(const k of h)for(const C of k){const P=C.x,z=C.y;if(P<0||P>=wr||z<0||z>=wr)continue;const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,c.sortKey),W=B.vertexLength;hl(this.layoutVertexArray,P,z,-1,-1),hl(this.layoutVertexArray,P,z,1,-1),hl(this.layoutVertexArray,P,z,1,1),hl(this.layoutVertexArray,P,z,-1,1),this.indexArray.emplaceBack(W,W+1,W+2),this.indexArray.emplaceBack(W,W+3,W+2),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,{},y)}}function gc(f,c){for(let h=0;h<f.length;h++)if(pl(c,f[h]))return!0;for(let h=0;h<c.length;h++)if(pl(f,c[h]))return!0;return!!dl(f,c)}function Xu(f,c,h){return!!pl(f,c)||!!yh(c,f,h)}function vc(f,c){if(f.length===1)return fp(c,f[0]);for(let h=0;h<c.length;h++){const m=c[h];for(let y=0;y<m.length;y++)if(pl(f,m[y]))return!0}for(let h=0;h<f.length;h++)if(fp(c,f[h]))return!0;for(let h=0;h<c.length;h++)if(dl(f,c[h]))return!0;return!1}function yc(f,c,h){if(f.length>1){if(dl(f,c))return!0;for(let m=0;m<c.length;m++)if(yh(c[m],f,h))return!0}for(let m=0;m<f.length;m++)if(yh(f[m],c,h))return!0;return!1}function dl(f,c){if(f.length===0||c.length===0)return!1;for(let h=0;h<f.length-1;h++){const m=f[h],y=f[h+1];for(let k=0;k<c.length-1;k++)if(bc(m,y,c[k],c[k+1]))return!0}return!1}function bc(f,c,h,m){return ke(f,h,m)!==ke(c,h,m)&&ke(f,c,h)!==ke(f,c,m)}function yh(f,c,h){const m=h*h;if(c.length===1)return f.distSqr(c[0])<m;for(let y=1;y<c.length;y++)if(up(f,c[y-1],c[y])<m)return!0;return!1}function up(f,c,h){const m=c.distSqr(h);if(m===0)return f.distSqr(c);const y=((f.x-c.x)*(h.x-c.x)+(f.y-c.y)*(h.y-c.y))/m;return f.distSqr(y<0?c:y>1?h:h.sub(c)._mult(y)._add(c))}function fp(f,c){let h,m,y,k=!1;for(let C=0;C<f.length;C++){h=f[C];for(let P=0,z=h.length-1;P<h.length;z=P++)m=h[P],y=h[z],m.y>c.y!=y.y>c.y&&c.x<(y.x-m.x)*(c.y-m.y)/(y.y-m.y)+m.x&&(k=!k)}return k}function pl(f,c){let h=!1;for(let m=0,y=f.length-1;m<f.length;y=m++){const k=f[m],C=f[y];k.y>c.y!=C.y>c.y&&c.x<(C.x-k.x)*(c.y-k.y)/(C.y-k.y)+k.x&&(h=!h)}return h}function Fy(f,c,h){const m=h[0],y=h[2];if(f.x<m.x&&c.x<m.x||f.x>y.x&&c.x>y.x||f.y<m.y&&c.y<m.y||f.y>y.y&&c.y>y.y)return!1;const k=ke(f,c,h[0]);return k!==ke(f,c,h[1])||k!==ke(f,c,h[2])||k!==ke(f,c,h[3])}function $c(f,c,h){const m=c.paint.get(f).value;return m.kind==="constant"?m.value:h.programConfigurations.get(c.id).getMaxValue(f)}function Ju(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function Yu(f,c,h,m,y){if(!c[0]&&!c[1])return f;const k=b.convert(c)._mult(y);h==="viewport"&&k._rotate(-m);const C=[];for(let P=0;P<f.length;P++)C.push(f[P].sub(k));return C}let hp,dp;tn("CircleBucket",Fi,{omit:["layers"]});var By={get paint(){return dp=dp||new Cs({"circle-radius":new gn(He.paint_circle["circle-radius"]),"circle-color":new gn(He.paint_circle["circle-color"]),"circle-blur":new gn(He.paint_circle["circle-blur"]),"circle-opacity":new gn(He.paint_circle["circle-opacity"]),"circle-translate":new un(He.paint_circle["circle-translate"]),"circle-translate-anchor":new un(He.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new un(He.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new un(He.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gn(He.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gn(He.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gn(He.paint_circle["circle-stroke-opacity"])})},get layout(){return hp=hp||new Cs({"circle-sort-key":new gn(He.layout_circle["circle-sort-key"])})}},Ss=1e-6,ml=typeof Float32Array<"u"?Float32Array:Array;function bh(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function pp(f,c,h){var m=c[0],y=c[1],k=c[2],C=c[3],P=c[4],z=c[5],B=c[6],W=c[7],K=c[8],ne=c[9],he=c[10],ve=c[11],xe=c[12],Pe=c[13],ze=c[14],We=c[15],Le=h[0],qe=h[1],ct=h[2],_t=h[3];return f[0]=Le*m+qe*P+ct*K+_t*xe,f[1]=Le*y+qe*z+ct*ne+_t*Pe,f[2]=Le*k+qe*B+ct*he+_t*ze,f[3]=Le*C+qe*W+ct*ve+_t*We,f[4]=(Le=h[4])*m+(qe=h[5])*P+(ct=h[6])*K+(_t=h[7])*xe,f[5]=Le*y+qe*z+ct*ne+_t*Pe,f[6]=Le*k+qe*B+ct*he+_t*ze,f[7]=Le*C+qe*W+ct*ve+_t*We,f[8]=(Le=h[8])*m+(qe=h[9])*P+(ct=h[10])*K+(_t=h[11])*xe,f[9]=Le*y+qe*z+ct*ne+_t*Pe,f[10]=Le*k+qe*B+ct*he+_t*ze,f[11]=Le*C+qe*W+ct*ve+_t*We,f[12]=(Le=h[12])*m+(qe=h[13])*P+(ct=h[14])*K+(_t=h[15])*xe,f[13]=Le*y+qe*z+ct*ne+_t*Pe,f[14]=Le*k+qe*B+ct*he+_t*ze,f[15]=Le*C+qe*W+ct*ve+_t*We,f}Math.hypot||(Math.hypot=function(){for(var f=0,c=arguments.length;c--;)f+=arguments[c]*arguments[c];return Math.sqrt(f)});var wc,Ny=pp;function Qu(f,c,h){var m=c[0],y=c[1],k=c[2],C=c[3];return f[0]=h[0]*m+h[4]*y+h[8]*k+h[12]*C,f[1]=h[1]*m+h[5]*y+h[9]*k+h[13]*C,f[2]=h[2]*m+h[6]*y+h[10]*k+h[14]*C,f[3]=h[3]*m+h[7]*y+h[11]*k+h[15]*C,f}wc=new ml(4),ml!=Float32Array&&(wc[0]=0,wc[1]=0,wc[2]=0,wc[3]=0);class Vy extends Qs{constructor(c){super(c,By)}createBucket(c){return new Fi(c)}queryRadius(c){const h=c;return $c("circle-radius",this,h)+$c("circle-stroke-width",this,h)+Ju(this.paint.get("circle-translate"))}queryIntersectsFeature(c,h,m,y,k,C,P,z){const B=Yu(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,P),W=this.paint.get("circle-radius").evaluate(h,m)+this.paint.get("circle-stroke-width").evaluate(h,m),K=this.paint.get("circle-pitch-alignment")==="map",ne=K?B:function(ve,xe){return ve.map(Pe=>mp(Pe,xe))}(B,z),he=K?W*P:W;for(const ve of y)for(const xe of ve){const Pe=K?xe:mp(xe,z);let ze=he;const We=Qu([],[xe.x,xe.y,0,1],z);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ze*=We[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ze*=C.cameraToCenterDistance/We[3]),Xu(ne,Pe,ze))return!0}return!1}}function mp(f,c){const h=Qu([],[f.x,f.y,0,1],c);return new b(h[0]/h[3],h[1]/h[3])}class _p extends Fi{}let gp;tn("HeatmapBucket",_p,{omit:["layers"]});var Uy={get paint(){return gp=gp||new Cs({"heatmap-radius":new gn(He.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gn(He.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new un(He.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ac(He.paint_heatmap["heatmap-color"]),"heatmap-opacity":new un(He.paint_heatmap["heatmap-opacity"])})}};function $h(f,{width:c,height:h},m,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==c*h*m)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${c*h*m}`)}else y=new Uint8Array(c*h*m);return f.width=c,f.height=h,f.data=y,f}function vp(f,{width:c,height:h},m){if(c===f.width&&h===f.height)return;const y=$h({},{width:c,height:h},m);wh(f,y,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,c),height:Math.min(f.height,h)},m),f.width=c,f.height=h,f.data=y.data}function wh(f,c,h,m,y,k){if(y.width===0||y.height===0)return c;if(y.width>f.width||y.height>f.height||h.x>f.width-y.width||h.y>f.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>c.width||y.height>c.height||m.x>c.width-y.width||m.y>c.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const C=f.data,P=c.data;if(C===P)throw new Error("srcData equals dstData, so image is already copied");for(let z=0;z<y.height;z++){const B=((h.y+z)*f.width+h.x)*k,W=((m.y+z)*c.width+m.x)*k;for(let K=0;K<y.width*k;K++)P[W+K]=C[B+K]}return c}class xc{constructor(c,h){$h(this,c,1,h)}resize(c){vp(this,c,1)}clone(){return new xc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,h,m,y,k){wh(c,h,m,y,k,1)}}class ei{constructor(c,h){$h(this,c,4,h)}resize(c){vp(this,c,4)}replace(c,h){h?this.data.set(c):this.data=c instanceof Uint8ClampedArray?new Uint8Array(c.buffer):c}clone(){return new ei({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(c,h,m,y,k){wh(c,h,m,y,k,4)}}function yp(f){const c={},h=f.resolution||256,m=f.clips?f.clips.length:1,y=f.image||new ei({width:h,height:m});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const k=(C,P,z)=>{c[f.evaluationKey]=z;const B=f.expression.evaluate(c);y.data[C+P+0]=Math.floor(255*B.r/B.a),y.data[C+P+1]=Math.floor(255*B.g/B.a),y.data[C+P+2]=Math.floor(255*B.b/B.a),y.data[C+P+3]=Math.floor(255*B.a)};if(f.clips)for(let C=0,P=0;C<m;++C,P+=4*h)for(let z=0,B=0;z<h;z++,B+=4){const W=z/(h-1),{start:K,end:ne}=f.clips[C];k(P,B,K*(1-W)+ne*W)}else for(let C=0,P=0;C<h;C++,P+=4)k(0,P,C/(h-1));return y}tn("AlphaImage",xc),tn("RGBAImage",ei);class jy extends Qs{createBucket(c){return new _p(c)}constructor(c){super(c,Uy),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let bp;var qy={get paint(){return bp=bp||new Cs({"hillshade-illumination-direction":new un(He.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new un(He.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new un(He.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new un(He.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new un(He.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new un(He.paint_hillshade["hillshade-accent-color"])})}};class Gy extends Qs{constructor(c){super(c,qy)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Hy=Sr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zy}=Hy;var xh={exports:{}};function ef(f,c,h){h=h||2;var m,y,k,C,P,z,B,W=c&&c.length,K=W?c[0]*h:f.length,ne=$p(f,0,K,h,!0),he=[];if(!ne||ne.next===ne.prev)return he;if(W&&(ne=function(xe,Pe,ze,We){var Le,qe,ct,_t=[];for(Le=0,qe=Pe.length;Le<qe;Le++)(ct=$p(xe,Pe[Le]*We,Le<qe-1?Pe[Le+1]*We:xe.length,We,!1))===ct.next&&(ct.steiner=!0),_t.push(tb(ct));for(_t.sort(Yy),Le=0;Le<_t.length;Le++)ze=Qy(_t[Le],ze);return ze}(f,c,ne,h)),f.length>80*h){m=k=f[0],y=C=f[1];for(var ve=h;ve<K;ve+=h)(P=f[ve])<m&&(m=P),(z=f[ve+1])<y&&(y=z),P>k&&(k=P),z>C&&(C=z);B=(B=Math.max(k-m,C-y))!==0?32767/B:0}return kc(ne,he,h,m,y,B,0),he}function $p(f,c,h,m,y){var k,C;if(y===Sh(f,c,h,m)>0)for(k=c;k<h;k+=m)C=kp(k,f[k],f[k+1],C);else for(k=h-m;k>=c;k-=m)C=kp(k,f[k],f[k+1],C);return C&&tf(C,C.next)&&(Sc(C),C=C.next),C}function ha(f,c){if(!f)return f;c||(c=f);var h,m=f;do if(h=!1,m.steiner||!tf(m,m.next)&&Tr(m.prev,m,m.next)!==0)m=m.next;else{if(Sc(m),(m=c=m.prev)===m.next)break;h=!0}while(h||m!==c);return c}function kc(f,c,h,m,y,k,C){if(f){!C&&k&&function(W,K,ne,he){var ve=W;do ve.z===0&&(ve.z=kh(ve.x,ve.y,K,ne,he)),ve.prevZ=ve.prev,ve.nextZ=ve.next,ve=ve.next;while(ve!==W);ve.prevZ.nextZ=null,ve.prevZ=null,function(xe){var Pe,ze,We,Le,qe,ct,_t,Yt,on=1;do{for(ze=xe,xe=null,qe=null,ct=0;ze;){for(ct++,We=ze,_t=0,Pe=0;Pe<on&&(_t++,We=We.nextZ);Pe++);for(Yt=on;_t>0||Yt>0&&We;)_t!==0&&(Yt===0||!We||ze.z<=We.z)?(Le=ze,ze=ze.nextZ,_t--):(Le=We,We=We.nextZ,Yt--),qe?qe.nextZ=Le:xe=Le,Le.prevZ=qe,qe=Le;ze=We}qe.nextZ=null,on*=2}while(ct>1)}(ve)}(f,m,y,k);for(var P,z,B=f;f.prev!==f.next;)if(P=f.prev,z=f.next,k?Ky(f,m,y,k):Wy(f))c.push(P.i/h|0),c.push(f.i/h|0),c.push(z.i/h|0),Sc(f),f=z.next,B=z.next;else if((f=z)===B){C?C===1?kc(f=Xy(ha(f),c,h),c,h,m,y,k,2):C===2&&Jy(f,c,h,m,y,k):kc(ha(f),c,h,m,y,k,1);break}}}function Wy(f){var c=f.prev,h=f,m=f.next;if(Tr(c,h,m)>=0)return!1;for(var y=c.x,k=h.x,C=m.x,P=c.y,z=h.y,B=m.y,W=y<k?y<C?y:C:k<C?k:C,K=P<z?P<B?P:B:z<B?z:B,ne=y>k?y>C?y:C:k>C?k:C,he=P>z?P>B?P:B:z>B?z:B,ve=m.next;ve!==c;){if(ve.x>=W&&ve.x<=ne&&ve.y>=K&&ve.y<=he&&_l(y,P,k,z,C,B,ve.x,ve.y)&&Tr(ve.prev,ve,ve.next)>=0)return!1;ve=ve.next}return!0}function Ky(f,c,h,m){var y=f.prev,k=f,C=f.next;if(Tr(y,k,C)>=0)return!1;for(var P=y.x,z=k.x,B=C.x,W=y.y,K=k.y,ne=C.y,he=P<z?P<B?P:B:z<B?z:B,ve=W<K?W<ne?W:ne:K<ne?K:ne,xe=P>z?P>B?P:B:z>B?z:B,Pe=W>K?W>ne?W:ne:K>ne?K:ne,ze=kh(he,ve,c,h,m),We=kh(xe,Pe,c,h,m),Le=f.prevZ,qe=f.nextZ;Le&&Le.z>=ze&&qe&&qe.z<=We;){if(Le.x>=he&&Le.x<=xe&&Le.y>=ve&&Le.y<=Pe&&Le!==y&&Le!==C&&_l(P,W,z,K,B,ne,Le.x,Le.y)&&Tr(Le.prev,Le,Le.next)>=0||(Le=Le.prevZ,qe.x>=he&&qe.x<=xe&&qe.y>=ve&&qe.y<=Pe&&qe!==y&&qe!==C&&_l(P,W,z,K,B,ne,qe.x,qe.y)&&Tr(qe.prev,qe,qe.next)>=0))return!1;qe=qe.nextZ}for(;Le&&Le.z>=ze;){if(Le.x>=he&&Le.x<=xe&&Le.y>=ve&&Le.y<=Pe&&Le!==y&&Le!==C&&_l(P,W,z,K,B,ne,Le.x,Le.y)&&Tr(Le.prev,Le,Le.next)>=0)return!1;Le=Le.prevZ}for(;qe&&qe.z<=We;){if(qe.x>=he&&qe.x<=xe&&qe.y>=ve&&qe.y<=Pe&&qe!==y&&qe!==C&&_l(P,W,z,K,B,ne,qe.x,qe.y)&&Tr(qe.prev,qe,qe.next)>=0)return!1;qe=qe.nextZ}return!0}function Xy(f,c,h){var m=f;do{var y=m.prev,k=m.next.next;!tf(y,k)&&wp(y,m,m.next,k)&&Cc(y,k)&&Cc(k,y)&&(c.push(y.i/h|0),c.push(m.i/h|0),c.push(k.i/h|0),Sc(m),Sc(m.next),m=f=k),m=m.next}while(m!==f);return ha(m)}function Jy(f,c,h,m,y,k){var C=f;do{for(var P=C.next.next;P!==C.prev;){if(C.i!==P.i&&nb(C,P)){var z=xp(C,P);return C=ha(C,C.next),z=ha(z,z.next),kc(C,c,h,m,y,k,0),void kc(z,c,h,m,y,k,0)}P=P.next}C=C.next}while(C!==f)}function Yy(f,c){return f.x-c.x}function Qy(f,c){var h=function(y,k){var C,P=k,z=y.x,B=y.y,W=-1/0;do{if(B<=P.y&&B>=P.next.y&&P.next.y!==P.y){var K=P.x+(B-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(K<=z&&K>W&&(W=K,C=P.x<P.next.x?P:P.next,K===z))return C}P=P.next}while(P!==k);if(!C)return null;var ne,he=C,ve=C.x,xe=C.y,Pe=1/0;P=C;do z>=P.x&&P.x>=ve&&z!==P.x&&_l(B<xe?z:W,B,ve,xe,B<xe?W:z,B,P.x,P.y)&&(ne=Math.abs(B-P.y)/(z-P.x),Cc(P,y)&&(ne<Pe||ne===Pe&&(P.x>C.x||P.x===C.x&&eb(C,P)))&&(C=P,Pe=ne)),P=P.next;while(P!==he);return C}(f,c);if(!h)return c;var m=xp(h,f);return ha(m,m.next),ha(h,h.next)}function eb(f,c){return Tr(f.prev,f,c.prev)<0&&Tr(c.next,f,f.next)<0}function kh(f,c,h,m,y){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-h)*y|0)|f<<8))|f<<4))|f<<2))|f<<1))|(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-m)*y|0)|c<<8))|c<<4))|c<<2))|c<<1))<<1}function tb(f){var c=f,h=f;do(c.x<h.x||c.x===h.x&&c.y<h.y)&&(h=c),c=c.next;while(c!==f);return h}function _l(f,c,h,m,y,k,C,P){return(y-C)*(c-P)>=(f-C)*(k-P)&&(f-C)*(m-P)>=(h-C)*(c-P)&&(h-C)*(k-P)>=(y-C)*(m-P)}function nb(f,c){return f.next.i!==c.i&&f.prev.i!==c.i&&!function(h,m){var y=h;do{if(y.i!==h.i&&y.next.i!==h.i&&y.i!==m.i&&y.next.i!==m.i&&wp(y,y.next,h,m))return!0;y=y.next}while(y!==h);return!1}(f,c)&&(Cc(f,c)&&Cc(c,f)&&function(h,m){var y=h,k=!1,C=(h.x+m.x)/2,P=(h.y+m.y)/2;do y.y>P!=y.next.y>P&&y.next.y!==y.y&&C<(y.next.x-y.x)*(P-y.y)/(y.next.y-y.y)+y.x&&(k=!k),y=y.next;while(y!==h);return k}(f,c)&&(Tr(f.prev,f,c.prev)||Tr(f,c.prev,c))||tf(f,c)&&Tr(f.prev,f,f.next)>0&&Tr(c.prev,c,c.next)>0)}function Tr(f,c,h){return(c.y-f.y)*(h.x-c.x)-(c.x-f.x)*(h.y-c.y)}function tf(f,c){return f.x===c.x&&f.y===c.y}function wp(f,c,h,m){var y=rf(Tr(f,c,h)),k=rf(Tr(f,c,m)),C=rf(Tr(h,m,f)),P=rf(Tr(h,m,c));return y!==k&&C!==P||!(y!==0||!nf(f,h,c))||!(k!==0||!nf(f,m,c))||!(C!==0||!nf(h,f,m))||!(P!==0||!nf(h,c,m))}function nf(f,c,h){return c.x<=Math.max(f.x,h.x)&&c.x>=Math.min(f.x,h.x)&&c.y<=Math.max(f.y,h.y)&&c.y>=Math.min(f.y,h.y)}function rf(f){return f>0?1:f<0?-1:0}function Cc(f,c){return Tr(f.prev,f,f.next)<0?Tr(f,c,f.next)>=0&&Tr(f,f.prev,c)>=0:Tr(f,c,f.prev)<0||Tr(f,f.next,c)<0}function xp(f,c){var h=new Ch(f.i,f.x,f.y),m=new Ch(c.i,c.x,c.y),y=f.next,k=c.prev;return f.next=c,c.prev=f,h.next=y,y.prev=h,m.next=h,h.prev=m,k.next=m,m.prev=k,m}function kp(f,c,h,m){var y=new Ch(f,c,h);return m?(y.next=m.next,y.prev=m,m.next.prev=y,m.next=y):(y.prev=y,y.next=y),y}function Sc(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function Ch(f,c,h){this.i=f,this.x=c,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sh(f,c,h,m){for(var y=0,k=c,C=h-m;k<h;k+=m)y+=(f[C]-f[k])*(f[k+1]+f[C+1]),C=k;return y}xh.exports=ef,xh.exports.default=ef,ef.deviation=function(f,c,h,m){var y=c&&c.length,k=Math.abs(Sh(f,0,y?c[0]*h:f.length,h));if(y)for(var C=0,P=c.length;C<P;C++)k-=Math.abs(Sh(f,c[C]*h,C<P-1?c[C+1]*h:f.length,h));var z=0;for(C=0;C<m.length;C+=3){var B=m[C]*h,W=m[C+1]*h,K=m[C+2]*h;z+=Math.abs((f[B]-f[K])*(f[W+1]-f[B+1])-(f[B]-f[W])*(f[K+1]-f[B+1]))}return k===0&&z===0?0:Math.abs((z-k)/k)},ef.flatten=function(f){for(var c=f[0][0].length,h={vertices:[],holes:[],dimensions:c},m=0,y=0;y<f.length;y++){for(var k=0;k<f[y].length;k++)for(var C=0;C<c;C++)h.vertices.push(f[y][k][C]);y>0&&h.holes.push(m+=f[y-1].length)}return h};var Cp=l(xh.exports);function rb(f,c,h,m,y){Sp(f,c,h||0,m||f.length-1,y||sb)}function Sp(f,c,h,m,y){for(;m>h;){if(m-h>600){var k=m-h+1,C=c-h+1,P=Math.log(k),z=.5*Math.exp(2*P/3),B=.5*Math.sqrt(P*z*(k-z)/k)*(C-k/2<0?-1:1);Sp(f,c,Math.max(h,Math.floor(c-C*z/k+B)),Math.min(m,Math.floor(c+(k-C)*z/k+B)),y)}var W=f[c],K=h,ne=m;for(Tc(f,h,c),y(f[m],W)>0&&Tc(f,h,m);K<ne;){for(Tc(f,K,ne),K++,ne--;y(f[K],W)<0;)K++;for(;y(f[ne],W)>0;)ne--}y(f[h],W)===0?Tc(f,h,ne):Tc(f,++ne,m),ne<=c&&(h=ne+1),c<=ne&&(m=ne-1)}}function Tc(f,c,h){var m=f[c];f[c]=f[h],f[h]=m}function sb(f,c){return f<c?-1:f>c?1:0}function Th(f,c){const h=f.length;if(h<=1)return[f];const m=[];let y,k;for(let C=0;C<h;C++){const P=je(f[C]);P!==0&&(f[C].area=Math.abs(P),k===void 0&&(k=P<0),k===P<0?(y&&m.push(y),y=[f[C]]):y.push(f[C]))}if(y&&m.push(y),c>1)for(let C=0;C<m.length;C++)m[C].length<=c||(rb(m[C],c,1,m[C].length-1,ib),m[C]=m[C].slice(0,c));return m}function ib(f,c){return c.area-f.area}function Ih(f,c,h){const m=h.patternDependencies;let y=!1;for(const k of c){const C=k.paint.get(`${f}-pattern`);C.isConstant()||(y=!0);const P=C.constantOr(null);P&&(y=!0,m[P.to]=!0,m[P.from]=!0)}return y}function Eh(f,c,h,m,y){const k=y.patternDependencies;for(const C of c){const P=C.paint.get(`${f}-pattern`).value;if(P.kind!=="constant"){let z=P.evaluate({zoom:m-1},h,{},y.availableImages),B=P.evaluate({zoom:m},h,{},y.availableImages),W=P.evaluate({zoom:m+1},h,{},y.availableImages);z=z&&z.name?z.name:z,B=B&&B.name?B.name:B,W=W&&W.name?W.name:W,k[z]=!0,k[B]=!0,k[W]=!0,h.patterns[C.id]={min:z,mid:B,max:W}}}return h}class Ph{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ee,this.indexArray=new st,this.indexArray2=new St,this.programConfigurations=new hr(c.layers,c.zoom),this.segments=new Nt,this.segments2=new Nt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,m){this.hasPattern=Ih("fill",this.layers,h);const y=this.layers[0].layout.get("fill-sort-key"),k=!y.isConstant(),C=[];for(const{feature:P,id:z,index:B,sourceLayerIndex:W}of c){const K=this.layers[0]._featureFilter.needGeometry,ne=io(P,K);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),ne,m))continue;const he=k?y.evaluate(ne,{},m,h.availableImages):void 0,ve={id:z,properties:P.properties,type:P.type,sourceLayerIndex:W,index:B,geometry:K?ne.geometry:so(P),patterns:{},sortKey:he};C.push(ve)}k&&C.sort((P,z)=>P.sortKey-z.sortKey);for(const P of C){const{geometry:z,index:B,sourceLayerIndex:W}=P;if(this.hasPattern){const K=Eh("fill",this.layers,P,this.zoom,h);this.patternFeatures.push(K)}else this.addFeature(P,z,B,m,{});h.featureIndex.insert(c[B].feature,z,B,W,this.index)}}update(c,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,m)}addFeatures(c,h,m){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Zy),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.indexBuffer2=c.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(c,h,m,y,k){for(const C of Th(h,500)){let P=0;for(const he of C)P+=he.length;const z=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray),B=z.vertexLength,W=[],K=[];for(const he of C){if(he.length===0)continue;he!==C[0]&&K.push(W.length/2);const ve=this.segments2.prepareSegment(he.length,this.layoutVertexArray,this.indexArray2),xe=ve.vertexLength;this.layoutVertexArray.emplaceBack(he[0].x,he[0].y),this.indexArray2.emplaceBack(xe+he.length-1,xe),W.push(he[0].x),W.push(he[0].y);for(let Pe=1;Pe<he.length;Pe++)this.layoutVertexArray.emplaceBack(he[Pe].x,he[Pe].y),this.indexArray2.emplaceBack(xe+Pe-1,xe+Pe),W.push(he[Pe].x),W.push(he[Pe].y);ve.vertexLength+=he.length,ve.primitiveLength+=he.length}const ne=Cp(W,K);for(let he=0;he<ne.length;he+=3)this.indexArray.emplaceBack(B+ne[he],B+ne[he+1],B+ne[he+2]);z.vertexLength+=P,z.primitiveLength+=ne.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,k,y)}}let Tp,Ip;tn("FillBucket",Ph,{omit:["layers","patternFeatures"]});var ob={get paint(){return Ip=Ip||new Cs({"fill-antialias":new un(He.paint_fill["fill-antialias"]),"fill-opacity":new gn(He.paint_fill["fill-opacity"]),"fill-color":new gn(He.paint_fill["fill-color"]),"fill-outline-color":new gn(He.paint_fill["fill-outline-color"]),"fill-translate":new un(He.paint_fill["fill-translate"]),"fill-translate-anchor":new un(He.paint_fill["fill-translate-anchor"]),"fill-pattern":new sl(He.paint_fill["fill-pattern"])})},get layout(){return Tp=Tp||new Cs({"fill-sort-key":new gn(He.layout_fill["fill-sort-key"])})}};class ab extends Qs{constructor(c){super(c,ob)}recalculate(c,h){super.recalculate(c,h);const m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Ph(c)}queryRadius(){return Ju(this.paint.get("fill-translate"))}queryIntersectsFeature(c,h,m,y,k,C,P){return vc(Yu(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,P),y)}isTileClipped(){return!0}}const lb=Sr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),cb=Sr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ub}=lb;var Io={},fb=d,Ep=gl;function gl(f,c,h,m,y){this.properties={},this.extent=h,this.type=0,this._pbf=f,this._geometry=-1,this._keys=m,this._values=y,f.readFields(hb,this,c)}function hb(f,c,h){f==1?c.id=h.readVarint():f==2?function(m,y){for(var k=m.readVarint()+m.pos;m.pos<k;){var C=y._keys[m.readVarint()],P=y._values[m.readVarint()];y.properties[C]=P}}(h,c):f==3?c.type=h.readVarint():f==4&&(c._geometry=h.pos)}function db(f){for(var c,h,m=0,y=0,k=f.length,C=k-1;y<k;C=y++)m+=((h=f[C]).x-(c=f[y]).x)*(c.y+h.y);return m}gl.types=["Unknown","Point","LineString","Polygon"],gl.prototype.loadGeometry=function(){var f=this._pbf;f.pos=this._geometry;for(var c,h=f.readVarint()+f.pos,m=1,y=0,k=0,C=0,P=[];f.pos<h;){if(y<=0){var z=f.readVarint();m=7&z,y=z>>3}if(y--,m===1||m===2)k+=f.readSVarint(),C+=f.readSVarint(),m===1&&(c&&P.push(c),c=[]),c.push(new fb(k,C));else{if(m!==7)throw new Error("unknown command "+m);c&&c.push(c[0].clone())}}return c&&P.push(c),P},gl.prototype.bbox=function(){var f=this._pbf;f.pos=this._geometry;for(var c=f.readVarint()+f.pos,h=1,m=0,y=0,k=0,C=1/0,P=-1/0,z=1/0,B=-1/0;f.pos<c;){if(m<=0){var W=f.readVarint();h=7&W,m=W>>3}if(m--,h===1||h===2)(y+=f.readSVarint())<C&&(C=y),y>P&&(P=y),(k+=f.readSVarint())<z&&(z=k),k>B&&(B=k);else if(h!==7)throw new Error("unknown command "+h)}return[C,z,P,B]},gl.prototype.toGeoJSON=function(f,c,h){var m,y,k=this.extent*Math.pow(2,h),C=this.extent*f,P=this.extent*c,z=this.loadGeometry(),B=gl.types[this.type];function W(he){for(var ve=0;ve<he.length;ve++){var xe=he[ve];he[ve]=[360*(xe.x+C)/k-180,360/Math.PI*Math.atan(Math.exp((180-360*(xe.y+P)/k)*Math.PI/180))-90]}}switch(this.type){case 1:var K=[];for(m=0;m<z.length;m++)K[m]=z[m][0];W(z=K);break;case 2:for(m=0;m<z.length;m++)W(z[m]);break;case 3:for(z=function(he){var ve=he.length;if(ve<=1)return[he];for(var xe,Pe,ze=[],We=0;We<ve;We++){var Le=db(he[We]);Le!==0&&(Pe===void 0&&(Pe=Le<0),Pe===Le<0?(xe&&ze.push(xe),xe=[he[We]]):xe.push(he[We]))}return xe&&ze.push(xe),ze}(z),m=0;m<z.length;m++)for(y=0;y<z[m].length;y++)W(z[m][y])}z.length===1?z=z[0]:B="Multi"+B;var ne={type:"Feature",geometry:{type:B,coordinates:z},properties:this.properties};return"id"in this&&(ne.id=this.id),ne};var pb=Ep,Pp=Ap;function Ap(f,c){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=f,this._keys=[],this._values=[],this._features=[],f.readFields(mb,this,c),this.length=this._features.length}function mb(f,c,h){f===15?c.version=h.readVarint():f===1?c.name=h.readString():f===5?c.extent=h.readVarint():f===2?c._features.push(h.pos):f===3?c._keys.push(h.readString()):f===4&&c._values.push(function(m){for(var y=null,k=m.readVarint()+m.pos;m.pos<k;){var C=m.readVarint()>>3;y=C===1?m.readString():C===2?m.readFloat():C===3?m.readDouble():C===4?m.readVarint64():C===5?m.readVarint():C===6?m.readSVarint():C===7?m.readBoolean():null}return y}(h))}Ap.prototype.feature=function(f){if(f<0||f>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[f];var c=this._pbf.readVarint()+this._pbf.pos;return new pb(this._pbf,c,this.extent,this._keys,this._values)};var _b=Pp;function gb(f,c,h){if(f===3){var m=new _b(h,h.readVarint()+h.pos);m.length&&(c[m.name]=m)}}Io.VectorTile=function(f,c){this.layers=f.readFields(gb,{},c)},Io.VectorTileFeature=Ep,Io.VectorTileLayer=Pp;const vb=Io.VectorTileFeature.types,Ah=Math.pow(2,13);function Ic(f,c,h,m,y,k,C,P){f.emplaceBack(c,h,2*Math.floor(m*Ah)+C,y*Ah*2,k*Ah*2,Math.round(P))}class Mh{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.layoutVertexArray=new Ie,this.centroidVertexArray=new J,this.indexArray=new st,this.programConfigurations=new hr(c.layers,c.zoom),this.segments=new Nt,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,m){this.features=[],this.hasPattern=Ih("fill-extrusion",this.layers,h);for(const{feature:y,id:k,index:C,sourceLayerIndex:P}of c){const z=this.layers[0]._featureFilter.needGeometry,B=io(y,z);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),B,m))continue;const W={id:k,sourceLayerIndex:P,index:C,geometry:z?B.geometry:so(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(Eh("fill-extrusion",this.layers,W,this.zoom,h)):this.addFeature(W,W.geometry,C,m,{}),h.featureIndex.insert(y,W.geometry,C,P,this.index,!0)}}addFeatures(c,h,m){for(const y of this.features){const{geometry:k}=y;this.addFeature(y,k,y.index,h,m)}}update(c,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,ub),this.centroidVertexBuffer=c.createVertexBuffer(this.centroidVertexArray,cb.members,!0),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(c,h,m,y,k){const C={x:0,y:0,vertexCount:0};for(const P of Th(h,500)){let z=0;for(const ve of P)z+=ve.length;let B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ve of P){if(ve.length===0||bb(ve))continue;let xe=0;for(let Pe=0;Pe<ve.length;Pe++){const ze=ve[Pe];if(Pe>=1){const We=ve[Pe-1];if(!yb(ze,We)){B.vertexLength+4>Nt.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Le=ze.sub(We)._perp()._unit(),qe=We.dist(ze);xe+qe>32768&&(xe=0),Ic(this.layoutVertexArray,ze.x,ze.y,Le.x,Le.y,0,0,xe),Ic(this.layoutVertexArray,ze.x,ze.y,Le.x,Le.y,0,1,xe),C.x+=2*ze.x,C.y+=2*ze.y,C.vertexCount+=2,xe+=qe,Ic(this.layoutVertexArray,We.x,We.y,Le.x,Le.y,0,0,xe),Ic(this.layoutVertexArray,We.x,We.y,Le.x,Le.y,0,1,xe),C.x+=2*We.x,C.y+=2*We.y,C.vertexCount+=2;const ct=B.vertexLength;this.indexArray.emplaceBack(ct,ct+2,ct+1),this.indexArray.emplaceBack(ct+1,ct+2,ct+3),B.vertexLength+=4,B.primitiveLength+=2}}}}if(B.vertexLength+z>Nt.MAX_VERTEX_ARRAY_LENGTH&&(B=this.segments.prepareSegment(z,this.layoutVertexArray,this.indexArray)),vb[c.type]!=="Polygon")continue;const W=[],K=[],ne=B.vertexLength;for(const ve of P)if(ve.length!==0){ve!==P[0]&&K.push(W.length/2);for(let xe=0;xe<ve.length;xe++){const Pe=ve[xe];Ic(this.layoutVertexArray,Pe.x,Pe.y,0,0,1,1,0),C.x+=Pe.x,C.y+=Pe.y,C.vertexCount+=1,W.push(Pe.x),W.push(Pe.y)}}const he=Cp(W,K);for(let ve=0;ve<he.length;ve+=3)this.indexArray.emplaceBack(ne+he[ve],ne+he[ve+2],ne+he[ve+1]);B.primitiveLength+=he.length/3,B.vertexLength+=z}for(let P=0;P<C.vertexCount;P++)this.centroidVertexArray.emplaceBack(Math.floor(C.x/C.vertexCount),Math.floor(C.y/C.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,k,y)}}function yb(f,c){return f.x===c.x&&(f.x<0||f.x>wr)||f.y===c.y&&(f.y<0||f.y>wr)}function bb(f){return f.every(c=>c.x<0)||f.every(c=>c.x>wr)||f.every(c=>c.y<0)||f.every(c=>c.y>wr)}let Mp;tn("FillExtrusionBucket",Mh,{omit:["layers","features"]});var $b={get paint(){return Mp=Mp||new Cs({"fill-extrusion-opacity":new un(He["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gn(He["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new un(He["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new un(He["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sl(He["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gn(He["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gn(He["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new un(He["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class wb extends Qs{constructor(c){super(c,$b)}createBucket(c){return new Mh(c)}queryRadius(){return Ju(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,h,m,y,k,C,P,z){const B=Yu(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,P),W=this.paint.get("fill-extrusion-height").evaluate(h,m),K=this.paint.get("fill-extrusion-base").evaluate(h,m),ne=function(ve,xe,Pe,ze){const We=[];for(const Le of ve){const qe=[Le.x,Le.y,0,1];Qu(qe,qe,xe),We.push(new b(qe[0]/qe[3],qe[1]/qe[3]))}return We}(B,z),he=function(ve,xe,Pe,ze){const We=[],Le=[],qe=ze[8]*xe,ct=ze[9]*xe,_t=ze[10]*xe,Yt=ze[11]*xe,on=ze[8]*Pe,Jt=ze[9]*Pe,Zt=ze[10]*Pe,Bt=ze[11]*Pe;for(const rn of ve){const Ht=[],zt=[];for(const pn of rn){const ln=pn.x,Ln=pn.y,sr=ze[0]*ln+ze[4]*Ln+ze[12],lr=ze[1]*ln+ze[5]*Ln+ze[13],Ur=ze[2]*ln+ze[6]*Ln+ze[14],Ks=ze[3]*ln+ze[7]*Ln+ze[15],Ts=Ur+_t,Dr=Ks+Yt,ts=sr+on,is=lr+Jt,Is=Ur+Zt,Es=Ks+Bt,jr=new b((sr+qe)/Dr,(lr+ct)/Dr);jr.z=Ts/Dr,Ht.push(jr);const qr=new b(ts/Es,is/Es);qr.z=Is/Es,zt.push(qr)}We.push(Ht),Le.push(zt)}return[We,Le]}(y,K,W,z);return function(ve,xe,Pe){let ze=1/0;vc(Pe,xe)&&(ze=Dp(Pe,xe[0]));for(let We=0;We<xe.length;We++){const Le=xe[We],qe=ve[We];for(let ct=0;ct<Le.length-1;ct++){const _t=Le[ct],Yt=[_t,Le[ct+1],qe[ct+1],qe[ct],_t];gc(Pe,Yt)&&(ze=Math.min(ze,Dp(Pe,Yt)))}}return ze!==1/0&&ze}(he[0],he[1],ne)}}function Ec(f,c){return f.x*c.x+f.y*c.y}function Dp(f,c){if(f.length===1){let h=0;const m=c[h++];let y;for(;!y||m.equals(y);)if(y=c[h++],!y)return 1/0;for(;h<c.length;h++){const k=c[h],C=f[0],P=y.sub(m),z=k.sub(m),B=C.sub(m),W=Ec(P,P),K=Ec(P,z),ne=Ec(z,z),he=Ec(B,P),ve=Ec(B,z),xe=W*ne-K*K,Pe=(ne*he-K*ve)/xe,ze=(W*ve-K*he)/xe,We=m.z*(1-Pe-ze)+y.z*Pe+k.z*ze;if(isFinite(We))return We}return 1/0}{let h=1/0;for(const m of c)h=Math.min(h,m.z);return h}}const xb=Sr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:kb}=xb,Cb=Sr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Sb}=Cb,Tb=Io.VectorTileFeature.types,Ib=Math.cos(Math.PI/180*37.5),zp=Math.pow(2,14)/.5;class Dh{constructor(c){this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(h=>h.id),this.index=c.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new Me,this.layoutVertexArray2=new we,this.indexArray=new st,this.programConfigurations=new hr(c.layers,c.zoom),this.segments=new Nt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(c,h,m){this.hasPattern=Ih("line",this.layers,h);const y=this.layers[0].layout.get("line-sort-key"),k=!y.isConstant(),C=[];for(const{feature:P,id:z,index:B,sourceLayerIndex:W}of c){const K=this.layers[0]._featureFilter.needGeometry,ne=io(P,K);if(!this.layers[0]._featureFilter.filter(new or(this.zoom),ne,m))continue;const he=k?y.evaluate(ne,{},m):void 0,ve={id:z,properties:P.properties,type:P.type,sourceLayerIndex:W,index:B,geometry:K?ne.geometry:so(P),patterns:{},sortKey:he};C.push(ve)}k&&C.sort((P,z)=>P.sortKey-z.sortKey);for(const P of C){const{geometry:z,index:B,sourceLayerIndex:W}=P;if(this.hasPattern){const K=Eh("line",this.layers,P,this.zoom,h);this.patternFeatures.push(K)}else this.addFeature(P,z,B,m,{});h.featureIndex.insert(c[B].feature,z,B,W,this.index)}}update(c,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(c,h,this.stateDependentLayers,m)}addFeatures(c,h,m){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(c){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=c.createVertexBuffer(this.layoutVertexArray2,Sb)),this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,kb),this.indexBuffer=c.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(c),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(c){if(c.properties&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(c.properties,"mapbox_clip_end"))return{start:+c.properties.mapbox_clip_start,end:+c.properties.mapbox_clip_end}}addFeature(c,h,m,y,k){const C=this.layers[0].layout,P=C.get("line-join").evaluate(c,{}),z=C.get("line-cap"),B=C.get("line-miter-limit"),W=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(c);for(const K of h)this.addLine(K,c,P,z,B,W);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,c,m,k,y)}addLine(c,h,m,y,k,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ze=0;ze<c.length-1;ze++)this.totalDistance+=c[ze].dist(c[ze+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const P=Tb[h.type]==="Polygon";let z=c.length;for(;z>=2&&c[z-1].equals(c[z-2]);)z--;let B=0;for(;B<z-1&&c[B].equals(c[B+1]);)B++;if(z<(P?3:2))return;m==="bevel"&&(k=1.05);const W=this.overscaling<=16?15*wr/(512*this.overscaling):0,K=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray);let ne,he,ve,xe,Pe;this.e1=this.e2=-1,P&&(ne=c[z-2],Pe=c[B].sub(ne)._unit()._perp());for(let ze=B;ze<z;ze++){if(ve=ze===z-1?P?c[B+1]:void 0:c[ze+1],ve&&c[ze].equals(ve))continue;Pe&&(xe=Pe),ne&&(he=ne),ne=c[ze],Pe=ve?ve.sub(ne)._unit()._perp():xe,xe=xe||Pe;let We=xe.add(Pe);We.x===0&&We.y===0||We._unit();const Le=xe.x*Pe.x+xe.y*Pe.y,qe=We.x*Pe.x+We.y*Pe.y,ct=qe!==0?1/qe:1/0,_t=2*Math.sqrt(2-2*qe),Yt=qe<Ib&&he&&ve,on=xe.x*Pe.y-xe.y*Pe.x>0;if(Yt&&ze>B){const Bt=ne.dist(he);if(Bt>2*W){const rn=ne.sub(ne.sub(he)._mult(W/Bt)._round());this.updateDistance(he,rn),this.addCurrentVertex(rn,xe,0,0,K),he=rn}}const Jt=he&&ve;let Zt=Jt?m:P?"butt":y;if(Jt&&Zt==="round"&&(ct<C?Zt="miter":ct<=2&&(Zt="fakeround")),Zt==="miter"&&ct>k&&(Zt="bevel"),Zt==="bevel"&&(ct>2&&(Zt="flipbevel"),ct<k&&(Zt="miter")),he&&this.updateDistance(he,ne),Zt==="miter")We._mult(ct),this.addCurrentVertex(ne,We,0,0,K);else if(Zt==="flipbevel"){if(ct>100)We=Pe.mult(-1);else{const Bt=ct*xe.add(Pe).mag()/xe.sub(Pe).mag();We._perp()._mult(Bt*(on?-1:1))}this.addCurrentVertex(ne,We,0,0,K),this.addCurrentVertex(ne,We.mult(-1),0,0,K)}else if(Zt==="bevel"||Zt==="fakeround"){const Bt=-Math.sqrt(ct*ct-1),rn=on?Bt:0,Ht=on?0:Bt;if(he&&this.addCurrentVertex(ne,xe,rn,Ht,K),Zt==="fakeround"){const zt=Math.round(180*_t/Math.PI/20);for(let pn=1;pn<zt;pn++){let ln=pn/zt;if(ln!==.5){const sr=ln-.5;ln+=ln*sr*(ln-1)*((1.0904+Le*(Le*(3.55645-1.43519*Le)-3.2452))*sr*sr+(.848013+Le*(.215638*Le-1.06021)))}const Ln=Pe.sub(xe)._mult(ln)._add(xe)._unit()._mult(on?-1:1);this.addHalfVertex(ne,Ln.x,Ln.y,!1,on,0,K)}}ve&&this.addCurrentVertex(ne,Pe,-rn,-Ht,K)}else if(Zt==="butt")this.addCurrentVertex(ne,We,0,0,K);else if(Zt==="square"){const Bt=he?1:-1;this.addCurrentVertex(ne,We,Bt,Bt,K)}else Zt==="round"&&(he&&(this.addCurrentVertex(ne,xe,0,0,K),this.addCurrentVertex(ne,xe,1,1,K,!0)),ve&&(this.addCurrentVertex(ne,Pe,-1,-1,K,!0),this.addCurrentVertex(ne,Pe,0,0,K)));if(Yt&&ze<z-1){const Bt=ne.dist(ve);if(Bt>2*W){const rn=ne.add(ve.sub(ne)._mult(W/Bt)._round());this.updateDistance(ne,rn),this.addCurrentVertex(rn,Pe,0,0,K),ne=rn}}}}addCurrentVertex(c,h,m,y,k,C=!1){const P=h.y*y-h.x,z=-h.y-h.x*y;this.addHalfVertex(c,h.x+h.y*m,h.y-h.x*m,C,!1,m,k),this.addHalfVertex(c,P,z,C,!0,-y,k),this.distance>zp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(c,h,m,y,k,C))}addHalfVertex({x:c,y:h},m,y,k,C,P,z){const B=.5*(this.lineClips?this.scaledDistance*(zp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((c<<1)+(k?1:0),(h<<1)+(C?1:0),Math.round(63*m)+128,Math.round(63*y)+128,1+(P===0?0:P<0?-1:1)|(63&B)<<2,B>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const W=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),z.primitiveLength++),C?this.e2=W:this.e1=W}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(c,h){this.distance+=c.dist(h),this.updateScaledDistance()}}let Lp,Rp;tn("LineBucket",Dh,{omit:["layers","patternFeatures"]});var Op={get paint(){return Rp=Rp||new Cs({"line-opacity":new gn(He.paint_line["line-opacity"]),"line-color":new gn(He.paint_line["line-color"]),"line-translate":new un(He.paint_line["line-translate"]),"line-translate-anchor":new un(He.paint_line["line-translate-anchor"]),"line-width":new gn(He.paint_line["line-width"]),"line-gap-width":new gn(He.paint_line["line-gap-width"]),"line-offset":new gn(He.paint_line["line-offset"]),"line-blur":new gn(He.paint_line["line-blur"]),"line-dasharray":new ia(He.paint_line["line-dasharray"]),"line-pattern":new sl(He.paint_line["line-pattern"]),"line-gradient":new ac(He.paint_line["line-gradient"])})},get layout(){return Lp=Lp||new Cs({"line-cap":new un(He.layout_line["line-cap"]),"line-join":new gn(He.layout_line["line-join"]),"line-miter-limit":new un(He.layout_line["line-miter-limit"]),"line-round-limit":new un(He.layout_line["line-round-limit"]),"line-sort-key":new gn(He.layout_line["line-sort-key"])})}};class Eb extends gn{possiblyEvaluate(c,h){return h=new or(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(c,h)}evaluate(c,h,m,y){return h=me({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(c,h,m,y)}}let sf;class Pb extends Qs{constructor(c){super(c,Op),this.gradientVersion=0,sf||(sf=new Eb(Op.paint.properties["line-width"].specification),sf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(c){if(c==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(h)&&h._styleExpression.expression instanceof Jo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,h){super.recalculate(c,h),this.paint._values["line-floorwidth"]=sf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new Dh(c)}queryRadius(c){const h=c,m=Fp($c("line-width",this,h),$c("line-gap-width",this,h)),y=$c("line-offset",this,h);return m/2+Math.abs(y)+Ju(this.paint.get("line-translate"))}queryIntersectsFeature(c,h,m,y,k,C,P){const z=Yu(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,P),B=P/2*Fp(this.paint.get("line-width").evaluate(h,m),this.paint.get("line-gap-width").evaluate(h,m)),W=this.paint.get("line-offset").evaluate(h,m);return W&&(y=function(K,ne){const he=[];for(let ve=0;ve<K.length;ve++){const xe=K[ve],Pe=[];for(let ze=0;ze<xe.length;ze++){const We=xe[ze-1],Le=xe[ze],qe=xe[ze+1],ct=ze===0?new b(0,0):Le.sub(We)._unit()._perp(),_t=ze===xe.length-1?new b(0,0):qe.sub(Le)._unit()._perp(),Yt=ct._add(_t)._unit(),on=Yt.x*_t.x+Yt.y*_t.y;on!==0&&Yt._mult(1/on),Pe.push(Yt._mult(ne)._add(Le))}he.push(Pe)}return he}(y,W*P)),function(K,ne,he){for(let ve=0;ve<ne.length;ve++){const xe=ne[ve];if(K.length>=3){for(let Pe=0;Pe<xe.length;Pe++)if(pl(K,xe[Pe]))return!0}if(yc(K,xe,he))return!0}return!1}(z,y,B)}isTileClipped(){return!0}}function Fp(f,c){return c>0?c+2*f:f}const Ab=Sr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Mb=Sr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Sr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Db=Sr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Sr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Bp=Sr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),zb=Sr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Lb(f,c,h){return f.sections.forEach(m=>{m.text=function(y,k,C){const P=k.layout.get("text-transform").evaluate(C,{});return P==="uppercase"?y=y.toLocaleUpperCase():P==="lowercase"&&(y=y.toLocaleLowerCase()),Li.applyArabicShaping&&(y=Li.applyArabicShaping(y)),y}(m.text,c,h)}),f}Sr([{name:"triangle",components:3,type:"Uint16"}]),Sr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Sr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Sr([{type:"Float32",name:"offsetX"}]),Sr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Sr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Pc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Vr=24,Np=Yn,Vp=function(f,c,h,m,y){var k,C,P=8*y-m-1,z=(1<<P)-1,B=z>>1,W=-7,K=h?y-1:0,ne=h?-1:1,he=f[c+K];for(K+=ne,k=he&(1<<-W)-1,he>>=-W,W+=P;W>0;k=256*k+f[c+K],K+=ne,W-=8);for(C=k&(1<<-W)-1,k>>=-W,W+=m;W>0;C=256*C+f[c+K],K+=ne,W-=8);if(k===0)k=1-B;else{if(k===z)return C?NaN:1/0*(he?-1:1);C+=Math.pow(2,m),k-=B}return(he?-1:1)*C*Math.pow(2,k-m)},Up=function(f,c,h,m,y,k){var C,P,z,B=8*k-y-1,W=(1<<B)-1,K=W>>1,ne=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,he=m?0:k-1,ve=m?1:-1,xe=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(P=isNaN(c)?1:0,C=W):(C=Math.floor(Math.log(c)/Math.LN2),c*(z=Math.pow(2,-C))<1&&(C--,z*=2),(c+=C+K>=1?ne/z:ne*Math.pow(2,1-K))*z>=2&&(C++,z/=2),C+K>=W?(P=0,C=W):C+K>=1?(P=(c*z-1)*Math.pow(2,y),C+=K):(P=c*Math.pow(2,K-1)*Math.pow(2,y),C=0));y>=8;f[h+he]=255&P,he+=ve,P/=256,y-=8);for(C=C<<y|P,B+=y;B>0;f[h+he]=255&C,he+=ve,C/=256,B-=8);f[h+he-ve]|=128*xe};function Yn(f){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(f)?f:new Uint8Array(f||0),this.pos=0,this.type=0,this.length=this.buf.length}Yn.Varint=0,Yn.Fixed64=1,Yn.Bytes=2,Yn.Fixed32=5;var zh=4294967296,jp=1/zh,qp=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function oo(f){return f.type===Yn.Bytes?f.readVarint()+f.pos:f.pos+1}function vl(f,c,h){return h?4294967296*c+(f>>>0):4294967296*(c>>>0)+(f>>>0)}function Gp(f,c,h){var m=c<=16383?1:c<=2097151?2:c<=268435455?3:Math.floor(Math.log(c)/(7*Math.LN2));h.realloc(m);for(var y=h.pos-1;y>=f;y--)h.buf[y+m]=h.buf[y]}function Rb(f,c){for(var h=0;h<f.length;h++)c.writeVarint(f[h])}function Ob(f,c){for(var h=0;h<f.length;h++)c.writeSVarint(f[h])}function Fb(f,c){for(var h=0;h<f.length;h++)c.writeFloat(f[h])}function Bb(f,c){for(var h=0;h<f.length;h++)c.writeDouble(f[h])}function Nb(f,c){for(var h=0;h<f.length;h++)c.writeBoolean(f[h])}function Vb(f,c){for(var h=0;h<f.length;h++)c.writeFixed32(f[h])}function Ub(f,c){for(var h=0;h<f.length;h++)c.writeSFixed32(f[h])}function jb(f,c){for(var h=0;h<f.length;h++)c.writeFixed64(f[h])}function qb(f,c){for(var h=0;h<f.length;h++)c.writeSFixed64(f[h])}function of(f,c){return(f[c]|f[c+1]<<8|f[c+2]<<16)+16777216*f[c+3]}function yl(f,c,h){f[h]=c,f[h+1]=c>>>8,f[h+2]=c>>>16,f[h+3]=c>>>24}function Hp(f,c){return(f[c]|f[c+1]<<8|f[c+2]<<16)+(f[c+3]<<24)}Yn.prototype={destroy:function(){this.buf=null},readFields:function(f,c,h){for(h=h||this.length;this.pos<h;){var m=this.readVarint(),y=m>>3,k=this.pos;this.type=7&m,f(y,c,this),this.pos===k&&this.skip(m)}return c},readMessage:function(f,c){return this.readFields(f,c,this.readVarint()+this.pos)},readFixed32:function(){var f=of(this.buf,this.pos);return this.pos+=4,f},readSFixed32:function(){var f=Hp(this.buf,this.pos);return this.pos+=4,f},readFixed64:function(){var f=of(this.buf,this.pos)+of(this.buf,this.pos+4)*zh;return this.pos+=8,f},readSFixed64:function(){var f=of(this.buf,this.pos)+Hp(this.buf,this.pos+4)*zh;return this.pos+=8,f},readFloat:function(){var f=Vp(this.buf,this.pos,!0,23,4);return this.pos+=4,f},readDouble:function(){var f=Vp(this.buf,this.pos,!0,52,8);return this.pos+=8,f},readVarint:function(f){var c,h,m=this.buf;return c=127&(h=m[this.pos++]),h<128?c:(c|=(127&(h=m[this.pos++]))<<7,h<128?c:(c|=(127&(h=m[this.pos++]))<<14,h<128?c:(c|=(127&(h=m[this.pos++]))<<21,h<128?c:function(y,k,C){var P,z,B=C.buf;if(P=(112&(z=B[C.pos++]))>>4,z<128||(P|=(127&(z=B[C.pos++]))<<3,z<128)||(P|=(127&(z=B[C.pos++]))<<10,z<128)||(P|=(127&(z=B[C.pos++]))<<17,z<128)||(P|=(127&(z=B[C.pos++]))<<24,z<128)||(P|=(1&(z=B[C.pos++]))<<31,z<128))return vl(y,P,k);throw new Error("Expected varint not more than 10 bytes")}(c|=(15&(h=m[this.pos]))<<28,f,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var f=this.readVarint();return f%2==1?(f+1)/-2:f/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var f=this.readVarint()+this.pos,c=this.pos;return this.pos=f,f-c>=12&&qp?function(h,m,y){return qp.decode(h.subarray(m,y))}(this.buf,c,f):function(h,m,y){for(var k="",C=m;C<y;){var P,z,B,W=h[C],K=null,ne=W>239?4:W>223?3:W>191?2:1;if(C+ne>y)break;ne===1?W<128&&(K=W):ne===2?(192&(P=h[C+1]))==128&&(K=(31&W)<<6|63&P)<=127&&(K=null):ne===3?(z=h[C+2],(192&(P=h[C+1]))==128&&(192&z)==128&&((K=(15&W)<<12|(63&P)<<6|63&z)<=2047||K>=55296&&K<=57343)&&(K=null)):ne===4&&(z=h[C+2],B=h[C+3],(192&(P=h[C+1]))==128&&(192&z)==128&&(192&B)==128&&((K=(15&W)<<18|(63&P)<<12|(63&z)<<6|63&B)<=65535||K>=1114112)&&(K=null)),K===null?(K=65533,ne=1):K>65535&&(K-=65536,k+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),k+=String.fromCharCode(K),C+=ne}return k}(this.buf,c,f)},readBytes:function(){var f=this.readVarint()+this.pos,c=this.buf.subarray(this.pos,f);return this.pos=f,c},readPackedVarint:function(f,c){if(this.type!==Yn.Bytes)return f.push(this.readVarint(c));var h=oo(this);for(f=f||[];this.pos<h;)f.push(this.readVarint(c));return f},readPackedSVarint:function(f){if(this.type!==Yn.Bytes)return f.push(this.readSVarint());var c=oo(this);for(f=f||[];this.pos<c;)f.push(this.readSVarint());return f},readPackedBoolean:function(f){if(this.type!==Yn.Bytes)return f.push(this.readBoolean());var c=oo(this);for(f=f||[];this.pos<c;)f.push(this.readBoolean());return f},readPackedFloat:function(f){if(this.type!==Yn.Bytes)return f.push(this.readFloat());var c=oo(this);for(f=f||[];this.pos<c;)f.push(this.readFloat());return f},readPackedDouble:function(f){if(this.type!==Yn.Bytes)return f.push(this.readDouble());var c=oo(this);for(f=f||[];this.pos<c;)f.push(this.readDouble());return f},readPackedFixed32:function(f){if(this.type!==Yn.Bytes)return f.push(this.readFixed32());var c=oo(this);for(f=f||[];this.pos<c;)f.push(this.readFixed32());return f},readPackedSFixed32:function(f){if(this.type!==Yn.Bytes)return f.push(this.readSFixed32());var c=oo(this);for(f=f||[];this.pos<c;)f.push(this.readSFixed32());return f},readPackedFixed64:function(f){if(this.type!==Yn.Bytes)return f.push(this.readFixed64());var c=oo(this);for(f=f||[];this.pos<c;)f.push(this.readFixed64());return f},readPackedSFixed64:function(f){if(this.type!==Yn.Bytes)return f.push(this.readSFixed64());var c=oo(this);for(f=f||[];this.pos<c;)f.push(this.readSFixed64());return f},skip:function(f){var c=7&f;if(c===Yn.Varint)for(;this.buf[this.pos++]>127;);else if(c===Yn.Bytes)this.pos=this.readVarint()+this.pos;else if(c===Yn.Fixed32)this.pos+=4;else{if(c!==Yn.Fixed64)throw new Error("Unimplemented type: "+c);this.pos+=8}},writeTag:function(f,c){this.writeVarint(f<<3|c)},realloc:function(f){for(var c=this.length||16;c<this.pos+f;)c*=2;if(c!==this.length){var h=new Uint8Array(c);h.set(this.buf),this.buf=h,this.length=c}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(f){this.realloc(4),yl(this.buf,f,this.pos),this.pos+=4},writeSFixed32:function(f){this.realloc(4),yl(this.buf,f,this.pos),this.pos+=4},writeFixed64:function(f){this.realloc(8),yl(this.buf,-1&f,this.pos),yl(this.buf,Math.floor(f*jp),this.pos+4),this.pos+=8},writeSFixed64:function(f){this.realloc(8),yl(this.buf,-1&f,this.pos),yl(this.buf,Math.floor(f*jp),this.pos+4),this.pos+=8},writeVarint:function(f){(f=+f||0)>268435455||f<0?function(c,h){var m,y;if(c>=0?(m=c%4294967296|0,y=c/4294967296|0):(y=~(-c/4294967296),4294967295^(m=~(-c%4294967296))?m=m+1|0:(m=0,y=y+1|0)),c>=18446744073709552e3||c<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(k,C,P){P.buf[P.pos++]=127&k|128,k>>>=7,P.buf[P.pos++]=127&k|128,k>>>=7,P.buf[P.pos++]=127&k|128,k>>>=7,P.buf[P.pos++]=127&k|128,P.buf[P.pos]=127&(k>>>=7)}(m,0,h),function(k,C){var P=(7&k)<<4;C.buf[C.pos++]|=P|((k>>>=3)?128:0),k&&(C.buf[C.pos++]=127&k|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=127&k|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=127&k|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=127&k|((k>>>=7)?128:0),k&&(C.buf[C.pos++]=127&k)))))}(y,h)}(f,this):(this.realloc(4),this.buf[this.pos++]=127&f|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=127&(f>>>=7)|(f>127?128:0),f<=127||(this.buf[this.pos++]=f>>>7&127))))},writeSVarint:function(f){this.writeVarint(f<0?2*-f-1:2*f)},writeBoolean:function(f){this.writeVarint(!!f)},writeString:function(f){f=String(f),this.realloc(4*f.length),this.pos++;var c=this.pos;this.pos=function(m,y,k){for(var C,P,z=0;z<y.length;z++){if((C=y.charCodeAt(z))>55295&&C<57344){if(!P){C>56319||z+1===y.length?(m[k++]=239,m[k++]=191,m[k++]=189):P=C;continue}if(C<56320){m[k++]=239,m[k++]=191,m[k++]=189,P=C;continue}C=P-55296<<10|C-56320|65536,P=null}else P&&(m[k++]=239,m[k++]=191,m[k++]=189,P=null);C<128?m[k++]=C:(C<2048?m[k++]=C>>6|192:(C<65536?m[k++]=C>>12|224:(m[k++]=C>>18|240,m[k++]=C>>12&63|128),m[k++]=C>>6&63|128),m[k++]=63&C|128)}return k}(this.buf,f,this.pos);var h=this.pos-c;h>=128&&Gp(c,h,this),this.pos=c-1,this.writeVarint(h),this.pos+=h},writeFloat:function(f){this.realloc(4),Up(this.buf,f,this.pos,!0,23,4),this.pos+=4},writeDouble:function(f){this.realloc(8),Up(this.buf,f,this.pos,!0,52,8),this.pos+=8},writeBytes:function(f){var c=f.length;this.writeVarint(c),this.realloc(c);for(var h=0;h<c;h++)this.buf[this.pos++]=f[h]},writeRawMessage:function(f,c){this.pos++;var h=this.pos;f(c,this);var m=this.pos-h;m>=128&&Gp(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeMessage:function(f,c,h){this.writeTag(f,Yn.Bytes),this.writeRawMessage(c,h)},writePackedVarint:function(f,c){c.length&&this.writeMessage(f,Rb,c)},writePackedSVarint:function(f,c){c.length&&this.writeMessage(f,Ob,c)},writePackedBoolean:function(f,c){c.length&&this.writeMessage(f,Nb,c)},writePackedFloat:function(f,c){c.length&&this.writeMessage(f,Fb,c)},writePackedDouble:function(f,c){c.length&&this.writeMessage(f,Bb,c)},writePackedFixed32:function(f,c){c.length&&this.writeMessage(f,Vb,c)},writePackedSFixed32:function(f,c){c.length&&this.writeMessage(f,Ub,c)},writePackedFixed64:function(f,c){c.length&&this.writeMessage(f,jb,c)},writePackedSFixed64:function(f,c){c.length&&this.writeMessage(f,qb,c)},writeBytesField:function(f,c){this.writeTag(f,Yn.Bytes),this.writeBytes(c)},writeFixed32Field:function(f,c){this.writeTag(f,Yn.Fixed32),this.writeFixed32(c)},writeSFixed32Field:function(f,c){this.writeTag(f,Yn.Fixed32),this.writeSFixed32(c)},writeFixed64Field:function(f,c){this.writeTag(f,Yn.Fixed64),this.writeFixed64(c)},writeSFixed64Field:function(f,c){this.writeTag(f,Yn.Fixed64),this.writeSFixed64(c)},writeVarintField:function(f,c){this.writeTag(f,Yn.Varint),this.writeVarint(c)},writeSVarintField:function(f,c){this.writeTag(f,Yn.Varint),this.writeSVarint(c)},writeStringField:function(f,c){this.writeTag(f,Yn.Bytes),this.writeString(c)},writeFloatField:function(f,c){this.writeTag(f,Yn.Fixed32),this.writeFloat(c)},writeDoubleField:function(f,c){this.writeTag(f,Yn.Fixed64),this.writeDouble(c)},writeBooleanField:function(f,c){this.writeVarintField(f,!!c)}};var Lh=l(Np);const Rh=3;function Gb(f,c,h){f===1&&h.readMessage(Hb,c)}function Hb(f,c,h){if(f===3){const{id:m,bitmap:y,width:k,height:C,left:P,top:z,advance:B}=h.readMessage(Zb,{});c.push({id:m,bitmap:new xc({width:k+2*Rh,height:C+2*Rh},y),metrics:{width:k,height:C,left:P,top:z,advance:B}})}}function Zb(f,c,h){f===1?c.id=h.readVarint():f===2?c.bitmap=h.readBytes():f===3?c.width=h.readVarint():f===4?c.height=h.readVarint():f===5?c.left=h.readSVarint():f===6?c.top=h.readSVarint():f===7&&(c.advance=h.readVarint())}const Zp=Rh;function Wp(f){let c=0,h=0;for(const C of f)c+=C.w*C.h,h=Math.max(h,C.w);f.sort((C,P)=>P.h-C.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(c/.95)),h),h:1/0}];let y=0,k=0;for(const C of f)for(let P=m.length-1;P>=0;P--){const z=m[P];if(!(C.w>z.w||C.h>z.h)){if(C.x=z.x,C.y=z.y,k=Math.max(k,C.y+C.h),y=Math.max(y,C.x+C.w),C.w===z.w&&C.h===z.h){const B=m.pop();P<m.length&&(m[P]=B)}else C.h===z.h?(z.x+=C.w,z.w-=C.w):C.w===z.w?(z.y+=C.h,z.h-=C.h):(m.push({x:z.x+C.w,y:z.y,w:z.w-C.w,h:C.h}),z.y+=C.h,z.h-=C.h);break}}return{w:y,h:k,fill:c/(y*k)||0}}const Bs=1;class Oh{constructor(c,{pixelRatio:h,version:m,stretchX:y,stretchY:k,content:C}){this.paddedRect=c,this.pixelRatio=h,this.stretchX=y,this.stretchY=k,this.content=C,this.version=m}get tl(){return[this.paddedRect.x+Bs,this.paddedRect.y+Bs]}get br(){return[this.paddedRect.x+this.paddedRect.w-Bs,this.paddedRect.y+this.paddedRect.h-Bs]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Bs)/this.pixelRatio,(this.paddedRect.h-2*Bs)/this.pixelRatio]}}class Kp{constructor(c,h){const m={},y={};this.haveRenderCallbacks=[];const k=[];this.addImages(c,m,k),this.addImages(h,y,k);const{w:C,h:P}=Wp(k),z=new ei({width:C||1,height:P||1});for(const B in c){const W=c[B],K=m[B].paddedRect;ei.copy(W.data,z,{x:0,y:0},{x:K.x+Bs,y:K.y+Bs},W.data)}for(const B in h){const W=h[B],K=y[B].paddedRect,ne=K.x+Bs,he=K.y+Bs,ve=W.data.width,xe=W.data.height;ei.copy(W.data,z,{x:0,y:0},{x:ne,y:he},W.data),ei.copy(W.data,z,{x:0,y:xe-1},{x:ne,y:he-1},{width:ve,height:1}),ei.copy(W.data,z,{x:0,y:0},{x:ne,y:he+xe},{width:ve,height:1}),ei.copy(W.data,z,{x:ve-1,y:0},{x:ne-1,y:he},{width:1,height:xe}),ei.copy(W.data,z,{x:0,y:0},{x:ne+ve,y:he},{width:1,height:xe})}this.image=z,this.iconPositions=m,this.patternPositions=y}addImages(c,h,m){for(const y in c){const k=c[y],C={x:0,y:0,w:k.data.width+2*Bs,h:k.data.height+2*Bs};m.push(C),h[y]=new Oh(C,k),k.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(c,h){c.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in c.updatedImages)this.patchUpdatedImage(this.iconPositions[m],c.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],c.getImage(m),h)}patchUpdatedImage(c,h,m){if(!c||!h||c.version===h.version)return;c.version=h.version;const[y,k]=c.tl;m.update(h.data,void 0,{x:y,y:k})}}var Eo;tn("ImagePosition",Oh),tn("ImageAtlas",Kp),a.ah=void 0,(Eo=a.ah||(a.ah={}))[Eo.none=0]="none",Eo[Eo.horizontal=1]="horizontal",Eo[Eo.vertical=2]="vertical",Eo[Eo.horizontalOnly=3]="horizontalOnly";const Ac=-17;class Mc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(c,h){const m=new Mc;return m.scale=c||1,m.fontStack=h,m}static forImage(c){const h=new Mc;return h.imageName=c,h}}class bl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(c,h){const m=new bl;for(let y=0;y<c.sections.length;y++){const k=c.sections[y];k.image?m.addImageSection(k):m.addTextSection(k,h)}return m}length(){return this.text.length}getSection(c){return this.sections[this.sectionIndex[c]]}getSectionIndex(c){return this.sectionIndex[c]}getCharCode(c){return this.text.charCodeAt(c)}verticalizePunctuation(){this.text=function(c){let h="";for(let m=0;m<c.length;m++){const y=c.charCodeAt(m+1)||null,k=c.charCodeAt(m-1)||null;h+=y&&ic(y)&&!Pc[c[m+1]]||k&&ic(k)&&!Pc[c[m-1]]||!Pc[c[m]]?c[m]:Pc[c[m]]}return h}(this.text)}trim(){let c=0;for(let m=0;m<this.text.length&&lf[this.text.charCodeAt(m)];m++)c++;let h=this.text.length;for(let m=this.text.length-1;m>=0&&m>=c&&lf[this.text.charCodeAt(m)];m--)h--;this.text=this.text.substring(c,h),this.sectionIndex=this.sectionIndex.slice(c,h)}substring(c,h){const m=new bl;return m.text=this.text.substring(c,h),m.sectionIndex=this.sectionIndex.slice(c,h),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((c,h)=>Math.max(c,this.sections[h].scale),0)}addTextSection(c,h){this.text+=c.text,this.sections.push(Mc.forText(c.scale,c.fontStack||h));const m=this.sections.length-1;for(let y=0;y<c.text.length;++y)this.sectionIndex.push(m)}addImageSection(c){const h=c.image?c.image.name:"";if(h.length===0)return void fe("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(Mc.forImage(h)),this.sectionIndex.push(this.sections.length-1)):fe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function af(f,c,h,m,y,k,C,P,z,B,W,K,ne,he,ve,xe){const Pe=bl.fromFeature(f,y);let ze;K===a.ah.vertical&&Pe.verticalizePunctuation();const{processBidirectionalText:We,processStyledBidirectionalText:Le}=Li;if(We&&Pe.sections.length===1){ze=[];const _t=We(Pe.toString(),Fh(Pe,B,k,c,m,he,ve));for(const Yt of _t){const on=new bl;on.text=Yt,on.sections=Pe.sections;for(let Jt=0;Jt<Yt.length;Jt++)on.sectionIndex.push(0);ze.push(on)}}else if(Le){ze=[];const _t=Le(Pe.text,Pe.sectionIndex,Fh(Pe,B,k,c,m,he,ve));for(const Yt of _t){const on=new bl;on.text=Yt[0],on.sectionIndex=Yt[1],on.sections=Pe.sections,ze.push(on)}}else ze=function(_t,Yt){const on=[],Jt=_t.text;let Zt=0;for(const Bt of Yt)on.push(_t.substring(Zt,Bt)),Zt=Bt;return Zt<Jt.length&&on.push(_t.substring(Zt,Jt.length)),on}(Pe,Fh(Pe,B,k,c,m,he,ve));const qe=[],ct={positionedLines:qe,text:Pe.toString(),top:W[1],bottom:W[1],left:W[0],right:W[0],writingMode:K,iconsInText:!1,verticalizable:!1};return function(_t,Yt,on,Jt,Zt,Bt,rn,Ht,zt,pn,ln,Ln){let sr=0,lr=Ac,Ur=0,Ks=0;const Ts=Ht==="right"?1:Ht==="left"?0:.5;let Dr=0;for(const jr of Zt){jr.trim();const qr=jr.getMaxScale(),hs=(qr-1)*Vr,Ps={positionedGlyphs:[],lineOffset:0};_t.positionedLines[Dr]=Ps;const ds=Ps.positionedGlyphs;let Ns=0;if(!jr.length()){lr+=Bt,++Dr;continue}for(let Gr=0;Gr<jr.length();Gr++){const On=jr.getSection(Gr),ps=jr.getSectionIndex(Gr),os=jr.getCharCode(Gr);let Hr=0,di=null,xi=null,ki=null,ao=Vr;const pi=!(zt===a.ah.horizontal||!ln&&!tl(os)||ln&&(lf[os]||(ts=os,Xt.Arabic(ts)||Xt["Arabic Supplement"](ts)||Xt["Arabic Extended-A"](ts)||Xt["Arabic Presentation Forms-A"](ts)||Xt["Arabic Presentation Forms-B"](ts))));if(On.imageName){const ni=Jt[On.imageName];if(!ni)continue;ki=On.imageName,_t.iconsInText=_t.iconsInText||!0,xi=ni.paddedRect;const Us=ni.displaySize;On.scale=On.scale*Vr/Ln,di={width:Us[0],height:Us[1],left:Bs,top:-Zp,advance:pi?Us[1]:Us[0]},Hr=hs+(Vr-Us[1]*On.scale),ao=di.advance;const lo=pi?Us[0]*On.scale-Vr*qr:Us[1]*On.scale-Vr*qr;lo>0&&lo>Ns&&(Ns=lo)}else{const ni=on[On.fontStack],Us=ni&&ni[os];if(Us&&Us.rect)xi=Us.rect,di=Us.metrics;else{const lo=Yt[On.fontStack],Oc=lo&&lo[os];if(!Oc)continue;di=Oc.metrics}Hr=(qr-On.scale)*Vr}pi?(_t.verticalizable=!0,ds.push({glyph:os,imageName:ki,x:sr,y:lr+Hr,vertical:pi,scale:On.scale,fontStack:On.fontStack,sectionIndex:ps,metrics:di,rect:xi}),sr+=ao*On.scale+pn):(ds.push({glyph:os,imageName:ki,x:sr,y:lr+Hr,vertical:pi,scale:On.scale,fontStack:On.fontStack,sectionIndex:ps,metrics:di,rect:xi}),sr+=di.advance*On.scale+pn)}ds.length!==0&&(Ur=Math.max(sr-pn,Ur),Xb(ds,0,ds.length-1,Ts,Ns)),sr=0;const Vs=Bt*qr+Ns;Ps.lineOffset=Math.max(Ns,hs),lr+=Vs,Ks=Math.max(Vs,Ks),++Dr}var ts;const is=lr-Ac,{horizontalAlign:Is,verticalAlign:Es}=Bh(rn);(function(jr,qr,hs,Ps,ds,Ns,Vs,Gr,On){const ps=(qr-hs)*ds;let os=0;os=Ns!==Vs?-Gr*Ps-Ac:(-Ps*On+.5)*Vs;for(const Hr of jr)for(const di of Hr.positionedGlyphs)di.x+=ps,di.y+=os})(_t.positionedLines,Ts,Is,Es,Ur,Ks,Bt,is,Zt.length),_t.top+=-Es*is,_t.bottom=_t.top+is,_t.left+=-Is*Ur,_t.right=_t.left+Ur}(ct,c,h,m,ze,C,P,z,K,B,ne,xe),!function(_t){for(const Yt of _t)if(Yt.positionedGlyphs.length!==0)return!1;return!0}(qe)&&ct}const lf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Wb={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Xp(f,c,h,m,y,k){if(c.imageName){const C=m[c.imageName];return C?C.displaySize[0]*c.scale*Vr/k+y:0}{const C=h[c.fontStack],P=C&&C[f];return P?P.metrics.advance*c.scale+y:0}}function Jp(f,c,h,m){const y=Math.pow(f-c,2);return m?f<c?y/2:2*y:y+Math.abs(h)*h}function Kb(f,c,h){let m=0;return f===10&&(m-=1e4),h&&(m+=150),f!==40&&f!==65288||(m+=50),c!==41&&c!==65289||(m+=50),m}function Yp(f,c,h,m,y,k){let C=null,P=Jp(c,h,y,k);for(const z of m){const B=Jp(c-z.x,h,y,k)+z.badness;B<=P&&(C=z,P=B)}return{index:f,x:c,priorBreak:C,badness:P}}function Qp(f){return f?Qp(f.priorBreak).concat(f.index):[]}function Fh(f,c,h,m,y,k,C){if(k!=="point")return[];if(!f)return[];const P=[],z=function(ne,he,ve,xe,Pe,ze){let We=0;for(let Le=0;Le<ne.length();Le++){const qe=ne.getSection(Le);We+=Xp(ne.getCharCode(Le),qe,xe,Pe,he,ze)}return We/Math.max(1,Math.ceil(We/ve))}(f,c,h,m,y,C),B=f.text.indexOf("")>=0;let W=0;for(let ne=0;ne<f.length();ne++){const he=f.getSection(ne),ve=f.getCharCode(ne);if(lf[ve]||(W+=Xp(ve,he,m,y,c,C)),ne<f.length()-1){const xe=!((K=ve)<11904||!(Xt["Bopomofo Extended"](K)||Xt.Bopomofo(K)||Xt["CJK Compatibility Forms"](K)||Xt["CJK Compatibility Ideographs"](K)||Xt["CJK Compatibility"](K)||Xt["CJK Radicals Supplement"](K)||Xt["CJK Strokes"](K)||Xt["CJK Symbols and Punctuation"](K)||Xt["CJK Unified Ideographs Extension A"](K)||Xt["CJK Unified Ideographs"](K)||Xt["Enclosed CJK Letters and Months"](K)||Xt["Halfwidth and Fullwidth Forms"](K)||Xt.Hiragana(K)||Xt["Ideographic Description Characters"](K)||Xt["Kangxi Radicals"](K)||Xt["Katakana Phonetic Extensions"](K)||Xt.Katakana(K)||Xt["Vertical Forms"](K)||Xt["Yi Radicals"](K)||Xt["Yi Syllables"](K)));(Wb[ve]||xe||he.imageName)&&P.push(Yp(ne+1,W,z,P,Kb(ve,f.getCharCode(ne+1),xe&&B),!1))}}var K;return Qp(Yp(f.length(),W,z,P,0,!0))}function Bh(f){let c=.5,h=.5;switch(f){case"right":case"top-right":case"bottom-right":c=1;break;case"left":case"top-left":case"bottom-left":c=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:c,verticalAlign:h}}function Xb(f,c,h,m,y){if(!m&&!y)return;const k=f[h],C=(f[h].x+k.metrics.advance*k.scale)*m;for(let P=c;P<=h;P++)f[P].x-=C,f[P].y+=y}function Jb(f,c,h){const{horizontalAlign:m,verticalAlign:y}=Bh(h),k=c[0]-f.displaySize[0]*m,C=c[1]-f.displaySize[1]*y;return{image:f,top:C,bottom:C+f.displaySize[1],left:k,right:k+f.displaySize[0]}}function em(f,c,h,m,y,k){const C=f.image;let P;if(C.content){const Pe=C.content,ze=C.pixelRatio||1;P=[Pe[0]/ze,Pe[1]/ze,C.displaySize[0]-Pe[2]/ze,C.displaySize[1]-Pe[3]/ze]}const z=c.left*k,B=c.right*k;let W,K,ne,he;h==="width"||h==="both"?(he=y[0]+z-m[3],K=y[0]+B+m[1]):(he=y[0]+(z+B-C.displaySize[0])/2,K=he+C.displaySize[0]);const ve=c.top*k,xe=c.bottom*k;return h==="height"||h==="both"?(W=y[1]+ve-m[0],ne=y[1]+xe+m[2]):(W=y[1]+(ve+xe-C.displaySize[1])/2,ne=W+C.displaySize[1]),{image:C,top:W,right:K,bottom:ne,left:he,collisionPadding:P}}const Dc=255,Bi=128,Po=Dc*Bi;function tm(f,c){const{expression:h}=c;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new or(f+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:y}=h;let k=0;for(;k<m.length&&m[k]<=f;)k++;k=Math.max(0,k-1);let C=k;for(;C<m.length&&m[C]<f+1;)C++;C=Math.min(m.length-1,C);const P=m[k],z=m[C];return h.kind==="composite"?{kind:"composite",minZoom:P,maxZoom:z,interpolationType:y}:{kind:"camera",minZoom:P,maxZoom:z,minSize:h.evaluate(new or(P)),maxSize:h.evaluate(new or(z)),interpolationType:y}}}function Nh(f,c,h){let m="never";const y=f.get(c);return y?m=y:f.get(h)&&(m="always"),m}const Yb=Io.VectorTileFeature.types,Qb=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cf(f,c,h,m,y,k,C,P,z,B,W,K,ne){const he=P?Math.min(Po,Math.round(P[0])):0,ve=P?Math.min(Po,Math.round(P[1])):0;f.emplaceBack(c,h,Math.round(32*m),Math.round(32*y),k,C,(he<<1)+(z?1:0),ve,16*B,16*W,256*K,256*ne)}function Vh(f,c,h){f.emplaceBack(c.x,c.y,h),f.emplaceBack(c.x,c.y,h),f.emplaceBack(c.x,c.y,h),f.emplaceBack(c.x,c.y,h)}function e$(f){for(const c of f.sections)if(vh(c.text))return!0;return!1}class Uh{constructor(c){this.layoutVertexArray=new Je,this.indexArray=new st,this.programConfigurations=c,this.segments=new Nt,this.dynamicLayoutVertexArray=new De,this.opacityVertexArray=new Ge,this.hasVisibleVertices=!1,this.placedSymbolArray=new p}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(c,h,m,y){this.isEmpty()||(m&&(this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,Ab.members),this.indexBuffer=c.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=c.createVertexBuffer(this.dynamicLayoutVertexArray,Mb.members,!0),this.opacityVertexBuffer=c.createVertexBuffer(this.opacityVertexArray,Qb,!0),this.opacityVertexBuffer.itemSize=1),(m||y)&&this.programConfigurations.upload(c))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}tn("SymbolBuffers",Uh);class jh{constructor(c,h,m){this.layoutVertexArray=new c,this.layoutAttributes=h,this.indexArray=new m,this.segments=new Nt,this.collisionVertexArray=new tt}upload(c){this.layoutVertexBuffer=c.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=c.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=c.createVertexBuffer(this.collisionVertexArray,Db.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}tn("CollisionBuffers",jh);class $l{constructor(c){this.collisionBoxArray=c.collisionBoxArray,this.zoom=c.zoom,this.overscaling=c.overscaling,this.layers=c.layers,this.layerIds=this.layers.map(C=>C.id),this.index=c.index,this.pixelRatio=c.pixelRatio,this.sourceLayerIndex=c.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=bh([]),this.placementViewportMatrix=bh([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=tm(this.zoom,h["text-size"]),this.iconSizeData=tm(this.zoom,h["icon-size"]);const m=this.layers[0].layout,y=m.get("symbol-sort-key"),k=m.get("symbol-z-order");this.canOverlap=Nh(m,"text-overlap","text-allow-overlap")!=="never"||Nh(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(C=>a.ah[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=c.sourceID}createArrays(){this.text=new Uh(new hr(this.layers,this.zoom,c=>/^text/.test(c))),this.icon=new Uh(new hr(this.layers,this.zoom,c=>/^icon/.test(c))),this.glyphOffsetArray=new x,this.lineVertexArray=new A,this.symbolInstances=new v,this.textAnchorOffsets=new O}calculateGlyphDependencies(c,h,m,y,k){for(let C=0;C<c.length;C++)if(h[c.charCodeAt(C)]=!0,(m||y)&&k){const P=Pc[c.charAt(C)];P&&(h[P.charCodeAt(0)]=!0)}}populate(c,h,m){const y=this.layers[0],k=y.layout,C=k.get("text-font"),P=k.get("text-field"),z=k.get("icon-image"),B=(P.value.kind!=="constant"||P.value.value instanceof zs&&!P.value.value.isEmpty()||P.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),W=z.value.kind!=="constant"||!!z.value.value||Object.keys(z.parameters).length>0,K=k.get("symbol-sort-key");if(this.features=[],!B&&!W)return;const ne=h.iconDependencies,he=h.glyphDependencies,ve=h.availableImages,xe=new or(this.zoom);for(const{feature:Pe,id:ze,index:We,sourceLayerIndex:Le}of c){const qe=y._featureFilter.needGeometry,ct=io(Pe,qe);if(!y._featureFilter.filter(xe,ct,m))continue;let _t,Yt;if(qe||(ct.geometry=so(Pe)),B){const Jt=y.getValueAndResolveTokens("text-field",ct,m,ve),Zt=zs.factory(Jt),Bt=this.hasRTLText=this.hasRTLText||e$(Zt);(!Bt||Li.getRTLTextPluginStatus()==="unavailable"||Bt&&Li.isParsed())&&(_t=Lb(Zt,y,ct))}if(W){const Jt=y.getValueAndResolveTokens("icon-image",ct,m,ve);Yt=Jt instanceof Hs?Jt:Hs.fromString(Jt)}if(!_t&&!Yt)continue;const on=this.sortFeaturesByKey?K.evaluate(ct,{},m):void 0;if(this.features.push({id:ze,text:_t,icon:Yt,index:We,sourceLayerIndex:Le,geometry:ct.geometry,properties:Pe.properties,type:Yb[Pe.type],sortKey:on}),Yt&&(ne[Yt.name]=!0),_t){const Jt=C.evaluate(ct,{},m).join(","),Zt=k.get("text-rotation-alignment")!=="viewport"&&k.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.ah.vertical)>=0;for(const Bt of _t.sections)if(Bt.image)ne[Bt.image.name]=!0;else{const rn=So(_t.toString()),Ht=Bt.fontStack||Jt,zt=he[Ht]=he[Ht]||{};this.calculateGlyphDependencies(Bt.text,zt,Zt,this.allowVerticalPlacement,rn)}}}k.get("symbol-placement")==="line"&&(this.features=function(Pe){const ze={},We={},Le=[];let qe=0;function ct(Jt){Le.push(Pe[Jt]),qe++}function _t(Jt,Zt,Bt){const rn=We[Jt];return delete We[Jt],We[Zt]=rn,Le[rn].geometry[0].pop(),Le[rn].geometry[0]=Le[rn].geometry[0].concat(Bt[0]),rn}function Yt(Jt,Zt,Bt){const rn=ze[Zt];return delete ze[Zt],ze[Jt]=rn,Le[rn].geometry[0].shift(),Le[rn].geometry[0]=Bt[0].concat(Le[rn].geometry[0]),rn}function on(Jt,Zt,Bt){const rn=Bt?Zt[0][Zt[0].length-1]:Zt[0][0];return`${Jt}:${rn.x}:${rn.y}`}for(let Jt=0;Jt<Pe.length;Jt++){const Zt=Pe[Jt],Bt=Zt.geometry,rn=Zt.text?Zt.text.toString():null;if(!rn){ct(Jt);continue}const Ht=on(rn,Bt),zt=on(rn,Bt,!0);if(Ht in We&&zt in ze&&We[Ht]!==ze[zt]){const pn=Yt(Ht,zt,Bt),ln=_t(Ht,zt,Le[pn].geometry);delete ze[Ht],delete We[zt],We[on(rn,Le[ln].geometry,!0)]=ln,Le[pn].geometry=null}else Ht in We?_t(Ht,zt,Bt):zt in ze?Yt(Ht,zt,Bt):(ct(Jt),ze[Ht]=qe-1,We[zt]=qe-1)}return Le.filter(Jt=>Jt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Pe,ze)=>Pe.sortKey-ze.sortKey)}update(c,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(c,h,this.layers,m),this.icon.programConfigurations.updatePaintArrays(c,h,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(c){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(c),this.iconCollisionBox.upload(c)),this.text.upload(c,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(c,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(c,h){const m=this.lineVertexArray.length;if(c.segment!==void 0){let y=c.dist(h[c.segment+1]),k=c.dist(h[c.segment]);const C={};for(let P=c.segment+1;P<h.length;P++)C[P]={x:h[P].x,y:h[P].y,tileUnitDistanceFromAnchor:y},P<h.length-1&&(y+=h[P+1].dist(h[P]));for(let P=c.segment||0;P>=0;P--)C[P]={x:h[P].x,y:h[P].y,tileUnitDistanceFromAnchor:k},P>0&&(k+=h[P-1].dist(h[P]));for(let P=0;P<h.length;P++){const z=C[P];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(c,h,m,y,k,C,P,z,B,W,K,ne){const he=c.indexArray,ve=c.layoutVertexArray,xe=c.segments.prepareSegment(4*h.length,ve,he,this.canOverlap?C.sortKey:void 0),Pe=this.glyphOffsetArray.length,ze=xe.vertexLength,We=this.allowVerticalPlacement&&P===a.ah.vertical?Math.PI/2:0,Le=C.text&&C.text.sections;for(let qe=0;qe<h.length;qe++){const{tl:ct,tr:_t,bl:Yt,br:on,tex:Jt,pixelOffsetTL:Zt,pixelOffsetBR:Bt,minFontScaleX:rn,minFontScaleY:Ht,glyphOffset:zt,isSDF:pn,sectionIndex:ln}=h[qe],Ln=xe.vertexLength,sr=zt[1];cf(ve,z.x,z.y,ct.x,sr+ct.y,Jt.x,Jt.y,m,pn,Zt.x,Zt.y,rn,Ht),cf(ve,z.x,z.y,_t.x,sr+_t.y,Jt.x+Jt.w,Jt.y,m,pn,Bt.x,Zt.y,rn,Ht),cf(ve,z.x,z.y,Yt.x,sr+Yt.y,Jt.x,Jt.y+Jt.h,m,pn,Zt.x,Bt.y,rn,Ht),cf(ve,z.x,z.y,on.x,sr+on.y,Jt.x+Jt.w,Jt.y+Jt.h,m,pn,Bt.x,Bt.y,rn,Ht),Vh(c.dynamicLayoutVertexArray,z,We),he.emplaceBack(Ln,Ln+1,Ln+2),he.emplaceBack(Ln+1,Ln+2,Ln+3),xe.vertexLength+=4,xe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zt[0]),qe!==h.length-1&&ln===h[qe+1].sectionIndex||c.programConfigurations.populatePaintArrays(ve.length,C,C.index,{},ne,Le&&Le[ln])}c.placedSymbolArray.emplaceBack(z.x,z.y,Pe,this.glyphOffsetArray.length-Pe,ze,B,W,z.segment,m?m[0]:0,m?m[1]:0,y[0],y[1],P,0,!1,0,K)}_addCollisionDebugVertex(c,h,m,y,k,C){return h.emplaceBack(0,0),c.emplaceBack(m.x,m.y,y,k,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(c,h,m,y,k,C,P){const z=k.segments.prepareSegment(4,k.layoutVertexArray,k.indexArray),B=z.vertexLength,W=k.layoutVertexArray,K=k.collisionVertexArray,ne=P.anchorX,he=P.anchorY;this._addCollisionDebugVertex(W,K,C,ne,he,new b(c,h)),this._addCollisionDebugVertex(W,K,C,ne,he,new b(m,h)),this._addCollisionDebugVertex(W,K,C,ne,he,new b(m,y)),this._addCollisionDebugVertex(W,K,C,ne,he,new b(c,y)),z.vertexLength+=4;const ve=k.indexArray;ve.emplaceBack(B,B+1),ve.emplaceBack(B+1,B+2),ve.emplaceBack(B+2,B+3),ve.emplaceBack(B+3,B),z.primitiveLength+=4}addDebugCollisionBoxes(c,h,m,y){for(let k=c;k<h;k++){const C=this.collisionBoxArray.get(k);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,y?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new jh(Ye,Bp.members,St),this.iconCollisionBox=new jh(Ye,Bp.members,St);for(let c=0;c<this.symbolInstances.length;c++){const h=this.symbolInstances.get(c);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(c,h,m,y,k,C,P,z,B){const W={};for(let K=h;K<m;K++){const ne=c.get(K);W.textBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},W.textFeatureIndex=ne.featureIndex;break}for(let K=y;K<k;K++){const ne=c.get(K);W.verticalTextBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},W.verticalTextFeatureIndex=ne.featureIndex;break}for(let K=C;K<P;K++){const ne=c.get(K);W.iconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},W.iconFeatureIndex=ne.featureIndex;break}for(let K=z;K<B;K++){const ne=c.get(K);W.verticalIconBox={x1:ne.x1,y1:ne.y1,x2:ne.x2,y2:ne.y2,anchorPointX:ne.anchorPointX,anchorPointY:ne.anchorPointY},W.verticalIconFeatureIndex=ne.featureIndex;break}return W}deserializeCollisionBoxes(c){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(c,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(c,h){const m=c.placedSymbolArray.get(h),y=m.vertexStartIndex+4*m.numGlyphs;for(let k=m.vertexStartIndex;k<y;k+=4)c.indexArray.emplaceBack(k,k+1,k+2),c.indexArray.emplaceBack(k+1,k+2,k+3)}getSortedSymbolIndexes(c){if(this.sortedAngle===c&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(c),m=Math.cos(c),y=[],k=[],C=[];for(let P=0;P<this.symbolInstances.length;++P){C.push(P);const z=this.symbolInstances.get(P);y.push(0|Math.round(h*z.anchorX+m*z.anchorY)),k.push(z.featureIndex)}return C.sort((P,z)=>y[P]-y[z]||k[z]-k[P]),C}addToSortKeyRanges(c,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=c+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:c,symbolInstanceEnd:c+1})}sortFeatures(c){if(this.sortFeaturesByY&&this.sortedAngle!==c&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(c),this.sortedAngle=c,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((y,k,C)=>{y>=0&&C.indexOf(y)===k&&this.addIndicesForPlacedSymbol(this.text,y)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let nm,rm;tn("SymbolBucket",$l,{omit:["layers","collisionBoxArray","features","compareText"]}),$l.MAX_GLYPHS=65535,$l.addDynamicAttributes=Vh;var qh={get paint(){return rm=rm||new Cs({"icon-opacity":new gn(He.paint_symbol["icon-opacity"]),"icon-color":new gn(He.paint_symbol["icon-color"]),"icon-halo-color":new gn(He.paint_symbol["icon-halo-color"]),"icon-halo-width":new gn(He.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gn(He.paint_symbol["icon-halo-blur"]),"icon-translate":new un(He.paint_symbol["icon-translate"]),"icon-translate-anchor":new un(He.paint_symbol["icon-translate-anchor"]),"text-opacity":new gn(He.paint_symbol["text-opacity"]),"text-color":new gn(He.paint_symbol["text-color"],{runtimeType:$r,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new gn(He.paint_symbol["text-halo-color"]),"text-halo-width":new gn(He.paint_symbol["text-halo-width"]),"text-halo-blur":new gn(He.paint_symbol["text-halo-blur"]),"text-translate":new un(He.paint_symbol["text-translate"]),"text-translate-anchor":new un(He.paint_symbol["text-translate-anchor"])})},get layout(){return nm=nm||new Cs({"symbol-placement":new un(He.layout_symbol["symbol-placement"]),"symbol-spacing":new un(He.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new un(He.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gn(He.layout_symbol["symbol-sort-key"]),"symbol-z-order":new un(He.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new un(He.layout_symbol["icon-allow-overlap"]),"icon-overlap":new un(He.layout_symbol["icon-overlap"]),"icon-ignore-placement":new un(He.layout_symbol["icon-ignore-placement"]),"icon-optional":new un(He.layout_symbol["icon-optional"]),"icon-rotation-alignment":new un(He.layout_symbol["icon-rotation-alignment"]),"icon-size":new gn(He.layout_symbol["icon-size"]),"icon-text-fit":new un(He.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new un(He.layout_symbol["icon-text-fit-padding"]),"icon-image":new gn(He.layout_symbol["icon-image"]),"icon-rotate":new gn(He.layout_symbol["icon-rotate"]),"icon-padding":new gn(He.layout_symbol["icon-padding"]),"icon-keep-upright":new un(He.layout_symbol["icon-keep-upright"]),"icon-offset":new gn(He.layout_symbol["icon-offset"]),"icon-anchor":new gn(He.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new un(He.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new un(He.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new un(He.layout_symbol["text-rotation-alignment"]),"text-field":new gn(He.layout_symbol["text-field"]),"text-font":new gn(He.layout_symbol["text-font"]),"text-size":new gn(He.layout_symbol["text-size"]),"text-max-width":new gn(He.layout_symbol["text-max-width"]),"text-line-height":new un(He.layout_symbol["text-line-height"]),"text-letter-spacing":new gn(He.layout_symbol["text-letter-spacing"]),"text-justify":new gn(He.layout_symbol["text-justify"]),"text-radial-offset":new gn(He.layout_symbol["text-radial-offset"]),"text-variable-anchor":new un(He.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new gn(He.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new gn(He.layout_symbol["text-anchor"]),"text-max-angle":new un(He.layout_symbol["text-max-angle"]),"text-writing-mode":new un(He.layout_symbol["text-writing-mode"]),"text-rotate":new gn(He.layout_symbol["text-rotate"]),"text-padding":new un(He.layout_symbol["text-padding"]),"text-keep-upright":new un(He.layout_symbol["text-keep-upright"]),"text-transform":new gn(He.layout_symbol["text-transform"]),"text-offset":new gn(He.layout_symbol["text-offset"]),"text-allow-overlap":new un(He.layout_symbol["text-allow-overlap"]),"text-overlap":new un(He.layout_symbol["text-overlap"]),"text-ignore-placement":new un(He.layout_symbol["text-ignore-placement"]),"text-optional":new un(He.layout_symbol["text-optional"])})}};class sm{constructor(c){if(c.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=c.property.overrides?c.property.overrides.runtimeType:Jr,this.defaultValue=c}evaluate(c){if(c.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(c.formattedSection))return h.getOverride(c.formattedSection)}return c.feature&&c.featureState?this.defaultValue.evaluate(c.feature,c.featureState):this.defaultValue.property.specification.default}eachChild(c){this.defaultValue.isConstant()||c(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}tn("FormatSectionOverride",sm,{omit:["defaultValue"]});class uf extends Qs{constructor(c){super(c,qh)}recalculate(c,h){if(super.recalculate(c,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const y=[];for(const k of m)y.indexOf(k)<0&&y.push(k);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(c,h,m,y){const k=this.layout.get(c).evaluate(h,{},m,y),C=this._unevaluatedLayout._values[c];return C.isDataDriven()||tr(C.value)||!k?k:function(P,z){return z.replace(/{([^{}]+)}/g,(B,W)=>P&&W in P?String(P[W]):"")}(h.properties,k)}createBucket(c){return new $l(c)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const c of qh.paint.overridableProperties){if(!uf.hasPaintOverride(this.layout,c))continue;const h=this.paint.get(c),m=new sm(h),y=new rr(m,h.property.specification);let k=null;k=h.value.kind==="constant"||h.value.kind==="source"?new qa("source",y):new Xl("composite",y,h.value.zoomStops),this.paint._values[c]=new Ys(h.property,k,h.parameters)}}_handleOverridablePaintPropertyUpdate(c,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&uf.hasPaintOverride(this.layout,c)}static hasPaintOverride(c,h){const m=c.get("text-field"),y=qh.paint.properties[h];let k=!1;const C=P=>{for(const z of P)if(y.overrides&&y.overrides.hasOverride(z))return void(k=!0)};if(m.value.kind==="constant"&&m.value.value instanceof zs)C(m.value.value.sections);else if(m.value.kind==="source"){const P=B=>{k||(B instanceof Pi&&Er(B.value)===Or?C(B.value.sections):B instanceof Ua?C(B.sections):B.eachChild(P))},z=m.value;z._styleExpression&&P(z._styleExpression.expression)}return k}}let im;var t$={get paint(){return im=im||new Cs({"background-color":new un(He.paint_background["background-color"]),"background-pattern":new ia(He.paint_background["background-pattern"]),"background-opacity":new un(He.paint_background["background-opacity"])})}};class n$ extends Qs{constructor(c){super(c,t$)}}let om;var r$={get paint(){return om=om||new Cs({"raster-opacity":new un(He.paint_raster["raster-opacity"]),"raster-hue-rotate":new un(He.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new un(He.paint_raster["raster-brightness-min"]),"raster-brightness-max":new un(He.paint_raster["raster-brightness-max"]),"raster-saturation":new un(He.paint_raster["raster-saturation"]),"raster-contrast":new un(He.paint_raster["raster-contrast"]),"raster-resampling":new un(He.paint_raster["raster-resampling"]),"raster-fade-duration":new un(He.paint_raster["raster-fade-duration"])})}};class s$ extends Qs{constructor(c){super(c,r$)}}class i$ extends Qs{constructor(c){super(c,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=c}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class o${constructor(c){this._methodToThrottle=c,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Gh=63710088e-1;class Ao{constructor(c,h){if(isNaN(c)||isNaN(h))throw new Error(`Invalid LngLat object: (${c}, ${h})`);if(this.lng=+c,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ao(re(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(c){const h=Math.PI/180,m=this.lat*h,y=c.lat*h,k=Math.sin(m)*Math.sin(y)+Math.cos(m)*Math.cos(y)*Math.cos((c.lng-this.lng)*h);return Gh*Math.acos(Math.min(k,1))}static convert(c){if(c instanceof Ao)return c;if(Array.isArray(c)&&(c.length===2||c.length===3))return new Ao(Number(c[0]),Number(c[1]));if(!Array.isArray(c)&&typeof c=="object"&&c!==null)return new Ao(Number("lng"in c?c.lng:c.lon),Number(c.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const am=2*Math.PI*Gh;function lm(f){return am*Math.cos(f*Math.PI/180)}function cm(f){return(180+f)/360}function um(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function fm(f,c){return f/lm(c)}function Hh(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}class ff{constructor(c,h,m=0){this.x=+c,this.y=+h,this.z=+m}static fromLngLat(c,h=0){const m=Ao.convert(c);return new ff(cm(m.lng),um(m.lat),fm(h,m.lat))}toLngLat(){return new Ao(360*this.x-180,Hh(this.y))}toAltitude(){return this.z*lm(Hh(this.y))}meterInMercatorCoordinateUnits(){return 1/am*(c=Hh(this.y),1/Math.cos(c*Math.PI/180));var c}}function hm(f,c,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[f*m-2*Math.PI*6378137/2,c*m-2*Math.PI*6378137/2]}class Zh{constructor(c,h,m){if(c<0||c>25||m<0||m>=Math.pow(2,c)||h<0||h>=Math.pow(2,c))throw new Error(`x=${h}, y=${m}, z=${c} outside of bounds. 0<=x<${Math.pow(2,c)}, 0<=y<${Math.pow(2,c)} 0<=z<=25 `);this.z=c,this.x=h,this.y=m,this.key=zc(0,c,c,h,m)}equals(c){return this.z===c.z&&this.x===c.x&&this.y===c.y}url(c,h,m){const y=(C=this.y,P=this.z,z=hm(256*(k=this.x),256*(C=Math.pow(2,P)-C-1),P),B=hm(256*(k+1),256*(C+1),P),z[0]+","+z[1]+","+B[0]+","+B[1]);var k,C,P,z,B;const W=function(K,ne,he){let ve,xe="";for(let Pe=K;Pe>0;Pe--)ve=1<<Pe-1,xe+=(ne&ve?1:0)+(he&ve?2:0);return xe}(this.z,this.x,this.y);return c[(this.x+this.y)%c.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,W).replace(/{bbox-epsg-3857}/g,y)}isChildOf(c){const h=this.z-c.z;return h>0&&c.x===this.x>>h&&c.y===this.y>>h}getTilePoint(c){const h=Math.pow(2,this.z);return new b((c.x*h-this.x)*wr,(c.y*h-this.y)*wr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dm{constructor(c,h){this.wrap=c,this.canonical=h,this.key=zc(c,h.z,h.z,h.x,h.y)}}class ti{constructor(c,h,m,y,k){if(c<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${c}; z = ${m}`);this.overscaledZ=c,this.wrap=h,this.canonical=new Zh(m,+y,+k),this.key=zc(h,c,m,y,k)}clone(){return new ti(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(c){return this.overscaledZ===c.overscaledZ&&this.wrap===c.wrap&&this.canonical.equals(c.canonical)}scaledTo(c){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-c;return c>this.canonical.z?new ti(c,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ti(c,this.wrap,c,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(c,h){if(c>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${c}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-c;return c>this.canonical.z?zc(this.wrap*+h,c,this.canonical.z,this.canonical.x,this.canonical.y):zc(this.wrap*+h,c,c,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(c){if(c.wrap!==this.wrap)return!1;const h=this.canonical.z-c.canonical.z;return c.overscaledZ===0||c.overscaledZ<this.overscaledZ&&c.canonical.x===this.canonical.x>>h&&c.canonical.y===this.canonical.y>>h}children(c){if(this.overscaledZ>=c)return[new ti(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,y=2*this.canonical.y;return[new ti(h,this.wrap,h,m,y),new ti(h,this.wrap,h,m+1,y),new ti(h,this.wrap,h,m,y+1),new ti(h,this.wrap,h,m+1,y+1)]}isLessThan(c){return this.wrap<c.wrap||!(this.wrap>c.wrap)&&(this.overscaledZ<c.overscaledZ||!(this.overscaledZ>c.overscaledZ)&&(this.canonical.x<c.canonical.x||!(this.canonical.x>c.canonical.x)&&this.canonical.y<c.canonical.y))}wrapped(){return new ti(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(c){return new ti(this.overscaledZ,c,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dm(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(c){return this.canonical.getTilePoint(new ff(c.x-this.wrap,c.y))}}function zc(f,c,h,m,y){(f*=2)<0&&(f=-1*f-1);const k=1<<h;return(k*k*f+k*y+m).toString(36)+h.toString(36)+c.toString(36)}tn("CanonicalTileID",Zh),tn("OverscaledTileID",ti,{omit:["posMatrix"]});class pm{constructor(c,h,m,y=1,k=1,C=1,P=0){if(this.uid=c,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void fe(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const z=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=y,this.greenFactor=k,this.blueFactor=C,this.baseShift=P;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let B=0;B<z;B++)this.data[this._idx(-1,B)]=this.data[this._idx(0,B)],this.data[this._idx(z,B)]=this.data[this._idx(z-1,B)],this.data[this._idx(B,-1)]=this.data[this._idx(B,0)],this.data[this._idx(B,z)]=this.data[this._idx(B,z-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(z,-1)]=this.data[this._idx(z-1,0)],this.data[this._idx(-1,z)]=this.data[this._idx(0,z-1)],this.data[this._idx(z,z)]=this.data[this._idx(z-1,z-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let B=0;B<z;B++)for(let W=0;W<z;W++){const K=this.get(B,W);K>this.max&&(this.max=K),K<this.min&&(this.min=K)}}get(c,h){const m=new Uint8Array(this.data.buffer),y=4*this._idx(c,h);return this.unpack(m[y],m[y+1],m[y+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(c,h){if(c<-1||c>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(c+1)}unpack(c,h,m){return c*this.redFactor+h*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new ei({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(c,h,m){if(this.dim!==c.dim)throw new Error("dem dimension mismatch");let y=h*this.dim,k=h*this.dim+this.dim,C=m*this.dim,P=m*this.dim+this.dim;switch(h){case-1:y=k-1;break;case 1:k=y+1}switch(m){case-1:C=P-1;break;case 1:P=C+1}const z=-h*this.dim,B=-m*this.dim;for(let W=C;W<P;W++)for(let K=y;K<k;K++)this.data[this._idx(K,W)]=c.data[this._idx(K+z,W+B)]}}tn("DEMData",pm);class mm{constructor(c){this._stringToNumber={},this._numberToString=[];for(let h=0;h<c.length;h++){const m=c[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(c){return this._stringToNumber[c]}decode(c){if(c>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${c} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[c]}}class _m{constructor(c,h,m,y,k){this.type="Feature",this._vectorTileFeature=c,c._z=h,c._x=m,c._y=y,this.properties=c.properties,this.id=k}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(c){this._geometry=c}toJSON(){const c={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(c[h]=this[h]);return c}}class gm{constructor(c,h){this.tileID=c,this.x=c.canonical.x,this.y=c.canonical.y,this.z=c.canonical.z,this.grid=new na(wr,16,0),this.grid3D=new na(wr,16,0),this.featureIndexArray=new X,this.promoteId=h}insert(c,h,m,y,k,C){const P=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,y,k);const z=C?this.grid3D:this.grid;for(let B=0;B<h.length;B++){const W=h[B],K=[1/0,1/0,-1/0,-1/0];for(let ne=0;ne<W.length;ne++){const he=W[ne];K[0]=Math.min(K[0],he.x),K[1]=Math.min(K[1],he.y),K[2]=Math.max(K[2],he.x),K[3]=Math.max(K[3],he.y)}K[0]<wr&&K[1]<wr&&K[2]>=0&&K[3]>=0&&z.insert(P,K[0],K[1],K[2],K[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Io.VectorTile(new Lh(this.rawTileData)).layers,this.sourceLayerCoder=new mm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(c,h,m,y){this.loadVTLayers();const k=c.params||{},C=wr/c.tileSize/c.scale,P=Wa(k.filter),z=c.queryGeometry,B=c.queryPadding*C,W=ym(z),K=this.grid.query(W.minX-B,W.minY-B,W.maxX+B,W.maxY+B),ne=ym(c.cameraQueryGeometry),he=this.grid3D.query(ne.minX-B,ne.minY-B,ne.maxX+B,ne.maxY+B,(Pe,ze,We,Le)=>function(qe,ct,_t,Yt,on){for(const Zt of qe)if(ct<=Zt.x&&_t<=Zt.y&&Yt>=Zt.x&&on>=Zt.y)return!0;const Jt=[new b(ct,_t),new b(ct,on),new b(Yt,on),new b(Yt,_t)];if(qe.length>2){for(const Zt of Jt)if(pl(qe,Zt))return!0}for(let Zt=0;Zt<qe.length-1;Zt++)if(Fy(qe[Zt],qe[Zt+1],Jt))return!0;return!1}(c.cameraQueryGeometry,Pe-B,ze-B,We+B,Le+B));for(const Pe of he)K.push(Pe);K.sort(a$);const ve={};let xe;for(let Pe=0;Pe<K.length;Pe++){const ze=K[Pe];if(ze===xe)continue;xe=ze;const We=this.featureIndexArray.get(ze);let Le=null;this.loadMatchingFeature(ve,We.bucketIndex,We.sourceLayerIndex,We.featureIndex,P,k.layers,k.availableImages,h,m,y,(qe,ct,_t)=>(Le||(Le=so(qe)),ct.queryIntersectsFeature(z,qe,_t,Le,this.z,c.transform,C,c.pixelPosMatrix)))}return ve}loadMatchingFeature(c,h,m,y,k,C,P,z,B,W,K){const ne=this.bucketLayerIDs[h];if(C&&!function(Pe,ze){for(let We=0;We<Pe.length;We++)if(ze.indexOf(Pe[We])>=0)return!0;return!1}(C,ne))return;const he=this.sourceLayerCoder.decode(m),ve=this.vtLayers[he].feature(y);if(k.needGeometry){const Pe=io(ve,!0);if(!k.filter(new or(this.tileID.overscaledZ),Pe,this.tileID.canonical))return}else if(!k.filter(new or(this.tileID.overscaledZ),ve))return;const xe=this.getId(ve,he);for(let Pe=0;Pe<ne.length;Pe++){const ze=ne[Pe];if(C&&C.indexOf(ze)<0)continue;const We=z[ze];if(!We)continue;let Le={};xe&&W&&(Le=W.getState(We.sourceLayer||"_geojsonTileLayer",xe));const qe=me({},B[ze]);qe.paint=vm(qe.paint,We.paint,ve,Le,P),qe.layout=vm(qe.layout,We.layout,ve,Le,P);const ct=!K||K(ve,We,Le);if(!ct)continue;const _t=new _m(ve,this.z,this.x,this.y,xe);_t.layer=qe;let Yt=c[ze];Yt===void 0&&(Yt=c[ze]=[]),Yt.push({featureIndex:y,feature:_t,intersectionZ:ct})}}lookupSymbolFeatures(c,h,m,y,k,C,P,z){const B={};this.loadVTLayers();const W=Wa(k);for(const K of c)this.loadMatchingFeature(B,m,y,K,W,C,P,z,h);return B}hasLayer(c){for(const h of this.bucketLayerIDs)for(const m of h)if(c===m)return!0;return!1}getId(c,h){let m=c.id;return this.promoteId&&(m=c.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof m=="boolean"&&(m=Number(m))),m}}function vm(f,c,h,m,y){return Z(f,(k,C)=>{const P=c instanceof sa?c.get(C):null;return P&&P.evaluate?P.evaluate(h,m,y):P})}function ym(f){let c=1/0,h=1/0,m=-1/0,y=-1/0;for(const k of f)c=Math.min(c,k.x),h=Math.min(h,k.y),m=Math.max(m,k.x),y=Math.max(y,k.y);return{minX:c,minY:h,maxX:m,maxY:y}}function a$(f,c){return c-f}function bm(f,c,h,m,y){const k=[];for(let C=0;C<f.length;C++){const P=f[C];let z;for(let B=0;B<P.length-1;B++){let W=P[B],K=P[B+1];W.x<c&&K.x<c||(W.x<c?W=new b(c,W.y+(c-W.x)/(K.x-W.x)*(K.y-W.y))._round():K.x<c&&(K=new b(c,W.y+(c-W.x)/(K.x-W.x)*(K.y-W.y))._round()),W.y<h&&K.y<h||(W.y<h?W=new b(W.x+(h-W.y)/(K.y-W.y)*(K.x-W.x),h)._round():K.y<h&&(K=new b(W.x+(h-W.y)/(K.y-W.y)*(K.x-W.x),h)._round()),W.x>=m&&K.x>=m||(W.x>=m?W=new b(m,W.y+(m-W.x)/(K.x-W.x)*(K.y-W.y))._round():K.x>=m&&(K=new b(m,W.y+(m-W.x)/(K.x-W.x)*(K.y-W.y))._round()),W.y>=y&&K.y>=y||(W.y>=y?W=new b(W.x+(y-W.y)/(K.y-W.y)*(K.x-W.x),y)._round():K.y>=y&&(K=new b(W.x+(y-W.y)/(K.y-W.y)*(K.x-W.x),y)._round()),z&&W.equals(z[z.length-1])||(z=[W],k.push(z)),z.push(K)))))}}return k}tn("FeatureIndex",gm,{omit:["rawTileData","sourceLayerCoder"]});class Mo extends b{constructor(c,h,m,y){super(c,h),this.angle=m,y!==void 0&&(this.segment=y)}clone(){return new Mo(this.x,this.y,this.angle,this.segment)}}function $m(f,c,h,m,y){if(c.segment===void 0||h===0)return!0;let k=c,C=c.segment+1,P=0;for(;P>-h/2;){if(C--,C<0)return!1;P-=f[C].dist(k),k=f[C]}P+=f[C].dist(f[C+1]),C++;const z=[];let B=0;for(;P<h/2;){const W=f[C],K=f[C+1];if(!K)return!1;let ne=f[C-1].angleTo(W)-W.angleTo(K);for(ne=Math.abs((ne+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:P,angleDelta:ne}),B+=ne;P-z[0].distance>m;)B-=z.shift().angleDelta;if(B>y)return!1;C++,P+=W.dist(K)}return!0}function wm(f){let c=0;for(let h=0;h<f.length-1;h++)c+=f[h].dist(f[h+1]);return c}function xm(f,c,h){return f?.6*c*h:0}function km(f,c){return Math.max(f?f.right-f.left:0,c?c.right-c.left:0)}function l$(f,c,h,m,y,k){const C=xm(h,y,k),P=km(h,m)*k;let z=0;const B=wm(f)/2;for(let W=0;W<f.length-1;W++){const K=f[W],ne=f[W+1],he=K.dist(ne);if(z+he>B){const ve=(B-z)/he,xe=us.number(K.x,ne.x,ve),Pe=us.number(K.y,ne.y,ve),ze=new Mo(xe,Pe,ne.angleTo(K),W);return ze._round(),!C||$m(f,ze,P,C,c)?ze:void 0}z+=he}}function c$(f,c,h,m,y,k,C,P,z){const B=xm(m,k,C),W=km(m,y),K=W*C,ne=f[0].x===0||f[0].x===z||f[0].y===0||f[0].y===z;return c-K<c/4&&(c=K+c/4),Cm(f,ne?c/2*P%c:(W/2+2*k)*C*P%c,c,B,h,K,ne,!1,z)}function Cm(f,c,h,m,y,k,C,P,z){const B=k/2,W=wm(f);let K=0,ne=c-h,he=[];for(let ve=0;ve<f.length-1;ve++){const xe=f[ve],Pe=f[ve+1],ze=xe.dist(Pe),We=Pe.angleTo(xe);for(;ne+h<K+ze;){ne+=h;const Le=(ne-K)/ze,qe=us.number(xe.x,Pe.x,Le),ct=us.number(xe.y,Pe.y,Le);if(qe>=0&&qe<z&&ct>=0&&ct<z&&ne-B>=0&&ne+B<=W){const _t=new Mo(qe,ct,We,ve);_t._round(),m&&!$m(f,_t,k,m,y)||he.push(_t)}}K+=ze}return P||he.length||C||(he=Cm(f,K/2,h,m,y,k,C,!0,z)),he}tn("Anchor",Mo);const wl=Bs;function Sm(f,c,h,m){const y=[],k=f.image,C=k.pixelRatio,P=k.paddedRect.w-2*wl,z=k.paddedRect.h-2*wl,B=f.right-f.left,W=f.bottom-f.top,K=k.stretchX||[[0,P]],ne=k.stretchY||[[0,z]],he=(Bt,rn)=>Bt+rn[1]-rn[0],ve=K.reduce(he,0),xe=ne.reduce(he,0),Pe=P-ve,ze=z-xe;let We=0,Le=ve,qe=0,ct=xe,_t=0,Yt=Pe,on=0,Jt=ze;if(k.content&&m){const Bt=k.content;We=hf(K,0,Bt[0]),qe=hf(ne,0,Bt[1]),Le=hf(K,Bt[0],Bt[2]),ct=hf(ne,Bt[1],Bt[3]),_t=Bt[0]-We,on=Bt[1]-qe,Yt=Bt[2]-Bt[0]-Le,Jt=Bt[3]-Bt[1]-ct}const Zt=(Bt,rn,Ht,zt)=>{const pn=df(Bt.stretch-We,Le,B,f.left),ln=pf(Bt.fixed-_t,Yt,Bt.stretch,ve),Ln=df(rn.stretch-qe,ct,W,f.top),sr=pf(rn.fixed-on,Jt,rn.stretch,xe),lr=df(Ht.stretch-We,Le,B,f.left),Ur=pf(Ht.fixed-_t,Yt,Ht.stretch,ve),Ks=df(zt.stretch-qe,ct,W,f.top),Ts=pf(zt.fixed-on,Jt,zt.stretch,xe),Dr=new b(pn,Ln),ts=new b(lr,Ln),is=new b(lr,Ks),Is=new b(pn,Ks),Es=new b(ln/C,sr/C),jr=new b(Ur/C,Ts/C),qr=c*Math.PI/180;if(qr){const ds=Math.sin(qr),Ns=Math.cos(qr),Vs=[Ns,-ds,ds,Ns];Dr._matMult(Vs),ts._matMult(Vs),Is._matMult(Vs),is._matMult(Vs)}const hs=Bt.stretch+Bt.fixed,Ps=rn.stretch+rn.fixed;return{tl:Dr,tr:ts,bl:Is,br:is,tex:{x:k.paddedRect.x+wl+hs,y:k.paddedRect.y+wl+Ps,w:Ht.stretch+Ht.fixed-hs,h:zt.stretch+zt.fixed-Ps},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Es,pixelOffsetBR:jr,minFontScaleX:Yt/C/B,minFontScaleY:Jt/C/W,isSDF:h}};if(m&&(k.stretchX||k.stretchY)){const Bt=Tm(K,Pe,ve),rn=Tm(ne,ze,xe);for(let Ht=0;Ht<Bt.length-1;Ht++){const zt=Bt[Ht],pn=Bt[Ht+1];for(let ln=0;ln<rn.length-1;ln++)y.push(Zt(zt,rn[ln],pn,rn[ln+1]))}}else y.push(Zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:P+1},{fixed:0,stretch:z+1}));return y}function hf(f,c,h){let m=0;for(const y of f)m+=Math.max(c,Math.min(h,y[1]))-Math.max(c,Math.min(h,y[0]));return m}function Tm(f,c,h){const m=[{fixed:-wl,stretch:0}];for(const[y,k]of f){const C=m[m.length-1];m.push({fixed:y-C.stretch,stretch:C.stretch}),m.push({fixed:y-C.stretch,stretch:C.stretch+(k-y)})}return m.push({fixed:c+wl,stretch:h}),m}function df(f,c,h,m){return f/c*h+m}function pf(f,c,h,m){return f-c*h/m}class mf{constructor(c,h,m,y,k,C,P,z,B,W){if(this.boxStartIndex=c.length,B){let K=C.top,ne=C.bottom;const he=C.collisionPadding;he&&(K-=he[1],ne+=he[3]);let ve=ne-K;ve>0&&(ve=Math.max(10,ve),this.circleDiameter=ve)}else{let K=C.top*P-z[0],ne=C.bottom*P+z[2],he=C.left*P-z[3],ve=C.right*P+z[1];const xe=C.collisionPadding;if(xe&&(he-=xe[0]*P,K-=xe[1]*P,ve+=xe[2]*P,ne+=xe[3]*P),W){const Pe=new b(he,K),ze=new b(ve,K),We=new b(he,ne),Le=new b(ve,ne),qe=W*Math.PI/180;Pe._rotate(qe),ze._rotate(qe),We._rotate(qe),Le._rotate(qe),he=Math.min(Pe.x,ze.x,We.x,Le.x),ve=Math.max(Pe.x,ze.x,We.x,Le.x),K=Math.min(Pe.y,ze.y,We.y,Le.y),ne=Math.max(Pe.y,ze.y,We.y,Le.y)}c.emplaceBack(h.x,h.y,he,K,ve,ne,m,y,k)}this.boxEndIndex=c.length}}class u${constructor(c=[],h=f$){if(this.data=c,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(c){this.data.push(c),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const c=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:h,compare:m}=this,y=h[c];for(;c>0;){const k=c-1>>1,C=h[k];if(m(y,C)>=0)break;h[c]=C,c=k}h[c]=y}_down(c){const{data:h,compare:m}=this,y=this.length>>1,k=h[c];for(;c<y;){let C=1+(c<<1),P=h[C];const z=C+1;if(z<this.length&&m(h[z],P)<0&&(C=z,P=h[z]),m(P,k)>=0)break;h[c]=P,c=C}h[c]=k}}function f$(f,c){return f<c?-1:f>c?1:0}function h$(f,c=1,h=!1){let m=1/0,y=1/0,k=-1/0,C=-1/0;const P=f[0];for(let he=0;he<P.length;he++){const ve=P[he];(!he||ve.x<m)&&(m=ve.x),(!he||ve.y<y)&&(y=ve.y),(!he||ve.x>k)&&(k=ve.x),(!he||ve.y>C)&&(C=ve.y)}const z=Math.min(k-m,C-y);let B=z/2;const W=new u$([],d$);if(z===0)return new b(m,y);for(let he=m;he<k;he+=z)for(let ve=y;ve<C;ve+=z)W.push(new xl(he+B,ve+B,B,f));let K=function(he){let ve=0,xe=0,Pe=0;const ze=he[0];for(let We=0,Le=ze.length,qe=Le-1;We<Le;qe=We++){const ct=ze[We],_t=ze[qe],Yt=ct.x*_t.y-_t.x*ct.y;xe+=(ct.x+_t.x)*Yt,Pe+=(ct.y+_t.y)*Yt,ve+=3*Yt}return new xl(xe/ve,Pe/ve,0,he)}(f),ne=W.length;for(;W.length;){const he=W.pop();(he.d>K.d||!K.d)&&(K=he,h&&console.log("found best %d after %d probes",Math.round(1e4*he.d)/1e4,ne)),he.max-K.d<=c||(B=he.h/2,W.push(new xl(he.p.x-B,he.p.y-B,B,f)),W.push(new xl(he.p.x+B,he.p.y-B,B,f)),W.push(new xl(he.p.x-B,he.p.y+B,B,f)),W.push(new xl(he.p.x+B,he.p.y+B,B,f)),ne+=4)}return h&&(console.log(`num probes: ${ne}`),console.log(`best distance: ${K.d}`)),K.p}function d$(f,c){return c.max-f.max}function xl(f,c,h,m){this.p=new b(f,c),this.h=h,this.d=function(y,k){let C=!1,P=1/0;for(let z=0;z<k.length;z++){const B=k[z];for(let W=0,K=B.length,ne=K-1;W<K;ne=W++){const he=B[W],ve=B[ne];he.y>y.y!=ve.y>y.y&&y.x<(ve.x-he.x)*(y.y-he.y)/(ve.y-he.y)+he.x&&(C=!C),P=Math.min(P,up(y,he,ve))}}return(C?1:-1)*Math.sqrt(P)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var ss;a.ap=void 0,(ss=a.ap||(a.ap={}))[ss.center=1]="center",ss[ss.left=2]="left",ss[ss.right=3]="right",ss[ss.top=4]="top",ss[ss.bottom=5]="bottom",ss[ss["top-left"]=6]="top-left",ss[ss["top-right"]=7]="top-right",ss[ss["bottom-left"]=8]="bottom-left",ss[ss["bottom-right"]=9]="bottom-right";const Do=7,Wh=Number.POSITIVE_INFINITY;function Im(f,c){return c[1]!==Wh?function(h,m,y){let k=0,C=0;switch(m=Math.abs(m),y=Math.abs(y),h){case"top-right":case"top-left":case"top":C=y-Do;break;case"bottom-right":case"bottom-left":case"bottom":C=-y+Do}switch(h){case"top-right":case"bottom-right":case"right":k=-m;break;case"top-left":case"bottom-left":case"left":k=m}return[k,C]}(f,c[0],c[1]):function(h,m){let y=0,k=0;m<0&&(m=0);const C=m/Math.SQRT2;switch(h){case"top-right":case"top-left":k=C-Do;break;case"bottom-right":case"bottom-left":k=-C+Do;break;case"bottom":k=-m+Do;break;case"top":k=m-Do}switch(h){case"top-right":case"bottom-right":y=-C;break;case"top-left":case"bottom-left":y=C;break;case"left":y=m;break;case"right":y=-m}return[y,k]}(f,c[0])}function Em(f,c,h){var m;const y=f.layout,k=(m=y.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(c,{},h);if(k){const P=k.values,z=[];for(let B=0;B<P.length;B+=2){const W=z[B]=P[B],K=P[B+1].map(ne=>ne*Vr);W.startsWith("top")?K[1]-=Do:W.startsWith("bottom")&&(K[1]+=Do),z[B+1]=K}return new Gs(z)}const C=y.get("text-variable-anchor");if(C){let P;P=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[y.get("text-radial-offset").evaluate(c,{},h)*Vr,Wh]:y.get("text-offset").evaluate(c,{},h).map(B=>B*Vr);const z=[];for(const B of C)z.push(B,Im(B,P));return new Gs(z)}return null}function Kh(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function p$(f,c,h,m,y,k,C,P,z,B,W){let K=k.textMaxSize.evaluate(c,{});K===void 0&&(K=C);const ne=f.layers[0].layout,he=ne.get("icon-offset").evaluate(c,{},W),ve=Am(h.horizontal),xe=C/24,Pe=f.tilePixelRatio*xe,ze=f.tilePixelRatio*K/24,We=f.tilePixelRatio*P,Le=f.tilePixelRatio*ne.get("symbol-spacing"),qe=ne.get("text-padding")*f.tilePixelRatio,ct=function(zt,pn,ln,Ln=1){const sr=zt.get("icon-padding").evaluate(pn,{},ln),lr=sr&&sr.values;return[lr[0]*Ln,lr[1]*Ln,lr[2]*Ln,lr[3]*Ln]}(ne,c,W,f.tilePixelRatio),_t=ne.get("text-max-angle")/180*Math.PI,Yt=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",on=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",Jt=ne.get("symbol-placement"),Zt=Le/2,Bt=ne.get("icon-text-fit");let rn;m&&Bt!=="none"&&(f.allowVerticalPlacement&&h.vertical&&(rn=em(m,h.vertical,Bt,ne.get("icon-text-fit-padding"),he,xe)),ve&&(m=em(m,ve,Bt,ne.get("icon-text-fit-padding"),he,xe)));const Ht=(zt,pn)=>{pn.x<0||pn.x>=wr||pn.y<0||pn.y>=wr||function(ln,Ln,sr,lr,Ur,Ks,Ts,Dr,ts,is,Is,Es,jr,qr,hs,Ps,ds,Ns,Vs,Gr,On,ps,os,Hr,di){const xi=ln.addToLineVertexArray(Ln,sr);let ki,ao,pi,ni,Us=0,lo=0,Oc=0,Lm=0,rd=-1,sd=-1;const co={};let Rm=vr("");if(ln.allowVerticalPlacement&&lr.vertical){const ms=Dr.layout.get("text-rotate").evaluate(On,{},Hr)+90;pi=new mf(ts,Ln,is,Is,Es,lr.vertical,jr,qr,hs,ms),Ts&&(ni=new mf(ts,Ln,is,Is,Es,Ts,ds,Ns,hs,ms))}if(Ur){const ms=Dr.layout.get("icon-rotate").evaluate(On,{}),ri=Dr.layout.get("icon-text-fit")!=="none",da=Sm(Ur,ms,os,ri),Si=Ts?Sm(Ts,ms,os,ri):void 0;ao=new mf(ts,Ln,is,Is,Es,Ur,ds,Ns,!1,ms),Us=4*da.length;const pa=ln.iconSizeData;let Ni=null;pa.kind==="source"?(Ni=[Bi*Dr.layout.get("icon-size").evaluate(On,{})],Ni[0]>Po&&fe(`${ln.layerIds[0]}: Value for "icon-size" is >= ${Dc}. Reduce your "icon-size".`)):pa.kind==="composite"&&(Ni=[Bi*ps.compositeIconSizes[0].evaluate(On,{},Hr),Bi*ps.compositeIconSizes[1].evaluate(On,{},Hr)],(Ni[0]>Po||Ni[1]>Po)&&fe(`${ln.layerIds[0]}: Value for "icon-size" is >= ${Dc}. Reduce your "icon-size".`)),ln.addSymbols(ln.icon,da,Ni,Gr,Vs,On,a.ah.none,Ln,xi.lineStartIndex,xi.lineLength,-1,Hr),rd=ln.icon.placedSymbolArray.length-1,Si&&(lo=4*Si.length,ln.addSymbols(ln.icon,Si,Ni,Gr,Vs,On,a.ah.vertical,Ln,xi.lineStartIndex,xi.lineLength,-1,Hr),sd=ln.icon.placedSymbolArray.length-1)}const Om=Object.keys(lr.horizontal);for(const ms of Om){const ri=lr.horizontal[ms];if(!ki){Rm=vr(ri.text);const Si=Dr.layout.get("text-rotate").evaluate(On,{},Hr);ki=new mf(ts,Ln,is,Is,Es,ri,jr,qr,hs,Si)}const da=ri.positionedLines.length===1;if(Oc+=Pm(ln,Ln,ri,Ks,Dr,hs,On,Ps,xi,lr.vertical?a.ah.horizontal:a.ah.horizontalOnly,da?Om:[ms],co,rd,ps,Hr),da)break}lr.vertical&&(Lm+=Pm(ln,Ln,lr.vertical,Ks,Dr,hs,On,Ps,xi,a.ah.vertical,["vertical"],co,sd,ps,Hr));const g$=ki?ki.boxStartIndex:ln.collisionBoxArray.length,v$=ki?ki.boxEndIndex:ln.collisionBoxArray.length,y$=pi?pi.boxStartIndex:ln.collisionBoxArray.length,b$=pi?pi.boxEndIndex:ln.collisionBoxArray.length,$$=ao?ao.boxStartIndex:ln.collisionBoxArray.length,w$=ao?ao.boxEndIndex:ln.collisionBoxArray.length,x$=ni?ni.boxStartIndex:ln.collisionBoxArray.length,k$=ni?ni.boxEndIndex:ln.collisionBoxArray.length;let Ci=-1;const gf=(ms,ri)=>ms&&ms.circleDiameter?Math.max(ms.circleDiameter,ri):ri;Ci=gf(ki,Ci),Ci=gf(pi,Ci),Ci=gf(ao,Ci),Ci=gf(ni,Ci);const Fm=Ci>-1?1:0;Fm&&(Ci*=di/Vr),ln.glyphOffsetArray.length>=$l.MAX_GLYPHS&&fe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),On.sortKey!==void 0&&ln.addToSortKeyRanges(ln.symbolInstances.length,On.sortKey);const C$=Em(Dr,On,Hr),[S$,T$]=function(ms,ri){const da=ms.length,Si=ri==null?void 0:ri.values;if((Si==null?void 0:Si.length)>0)for(let pa=0;pa<Si.length;pa+=2){const Ni=Si[pa+1];ms.emplaceBack(a.ap[Si[pa]],Ni[0],Ni[1])}return[da,ms.length]}(ln.textAnchorOffsets,C$);ln.symbolInstances.emplaceBack(Ln.x,Ln.y,co.right>=0?co.right:-1,co.center>=0?co.center:-1,co.left>=0?co.left:-1,co.vertical||-1,rd,sd,Rm,g$,v$,y$,b$,$$,w$,x$,k$,is,Oc,Lm,Us,lo,Fm,0,jr,Ci,S$,T$)}(f,pn,zt,h,m,y,rn,f.layers[0],f.collisionBoxArray,c.index,c.sourceLayerIndex,f.index,Pe,[qe,qe,qe,qe],Yt,z,We,ct,on,he,c,k,B,W,C)};if(Jt==="line")for(const zt of bm(c.geometry,0,0,wr,wr)){const pn=c$(zt,Le,_t,h.vertical||ve,m,24,ze,f.overscaling,wr);for(const ln of pn)ve&&m$(f,ve.text,Zt,ln)||Ht(zt,ln)}else if(Jt==="line-center"){for(const zt of c.geometry)if(zt.length>1){const pn=l$(zt,_t,h.vertical||ve,m,24,ze);pn&&Ht(zt,pn)}}else if(c.type==="Polygon")for(const zt of Th(c.geometry,0)){const pn=h$(zt,16);Ht(zt[0],new Mo(pn.x,pn.y,0))}else if(c.type==="LineString")for(const zt of c.geometry)Ht(zt,new Mo(zt[0].x,zt[0].y,0));else if(c.type==="Point")for(const zt of c.geometry)for(const pn of zt)Ht([pn],new Mo(pn.x,pn.y,0))}function Pm(f,c,h,m,y,k,C,P,z,B,W,K,ne,he,ve){const xe=function(We,Le,qe,ct,_t,Yt,on,Jt){const Zt=ct.layout.get("text-rotate").evaluate(Yt,{})*Math.PI/180,Bt=[];for(const rn of Le.positionedLines)for(const Ht of rn.positionedGlyphs){if(!Ht.rect)continue;const zt=Ht.rect||{};let pn=Zp+1,ln=!0,Ln=1,sr=0;const lr=(_t||Jt)&&Ht.vertical,Ur=Ht.metrics.advance*Ht.scale/2;if(Jt&&Le.verticalizable&&(sr=rn.lineOffset/2-(Ht.imageName?-(Vr-Ht.metrics.width*Ht.scale)/2:(Ht.scale-1)*Vr)),Ht.imageName){const Gr=on[Ht.imageName];ln=Gr.sdf,Ln=Gr.pixelRatio,pn=Bs/Ln}const Ks=_t?[Ht.x+Ur,Ht.y]:[0,0];let Ts=_t?[0,0]:[Ht.x+Ur+qe[0],Ht.y+qe[1]-sr],Dr=[0,0];lr&&(Dr=Ts,Ts=[0,0]);const ts=Ht.metrics.isDoubleResolution?2:1,is=(Ht.metrics.left-pn)*Ht.scale-Ur+Ts[0],Is=(-Ht.metrics.top-pn)*Ht.scale+Ts[1],Es=is+zt.w/ts*Ht.scale/Ln,jr=Is+zt.h/ts*Ht.scale/Ln,qr=new b(is,Is),hs=new b(Es,Is),Ps=new b(is,jr),ds=new b(Es,jr);if(lr){const Gr=new b(-Ur,Ur-Ac),On=-Math.PI/2,ps=Vr/2-Ur,os=new b(5-Ac-ps,-(Ht.imageName?ps:0)),Hr=new b(...Dr);qr._rotateAround(On,Gr)._add(os)._add(Hr),hs._rotateAround(On,Gr)._add(os)._add(Hr),Ps._rotateAround(On,Gr)._add(os)._add(Hr),ds._rotateAround(On,Gr)._add(os)._add(Hr)}if(Zt){const Gr=Math.sin(Zt),On=Math.cos(Zt),ps=[On,-Gr,Gr,On];qr._matMult(ps),hs._matMult(ps),Ps._matMult(ps),ds._matMult(ps)}const Ns=new b(0,0),Vs=new b(0,0);Bt.push({tl:qr,tr:hs,bl:Ps,br:ds,tex:zt,writingMode:Le.writingMode,glyphOffset:Ks,sectionIndex:Ht.sectionIndex,isSDF:ln,pixelOffsetTL:Ns,pixelOffsetBR:Vs,minFontScaleX:0,minFontScaleY:0})}return Bt}(0,h,P,y,k,C,m,f.allowVerticalPlacement),Pe=f.textSizeData;let ze=null;Pe.kind==="source"?(ze=[Bi*y.layout.get("text-size").evaluate(C,{})],ze[0]>Po&&fe(`${f.layerIds[0]}: Value for "text-size" is >= ${Dc}. Reduce your "text-size".`)):Pe.kind==="composite"&&(ze=[Bi*he.compositeTextSizes[0].evaluate(C,{},ve),Bi*he.compositeTextSizes[1].evaluate(C,{},ve)],(ze[0]>Po||ze[1]>Po)&&fe(`${f.layerIds[0]}: Value for "text-size" is >= ${Dc}. Reduce your "text-size".`)),f.addSymbols(f.text,xe,ze,P,k,C,B,c,z.lineStartIndex,z.lineLength,ne,ve);for(const We of W)K[We]=f.text.placedSymbolArray.length-1;return 4*xe.length}function Am(f){for(const c in f)return f[c];return null}function m$(f,c,h,m){const y=f.compareText;if(c in y){const k=y[c];for(let C=k.length-1;C>=0;C--)if(m.dist(k[C])<h)return!0}else y[c]=[];return y[c].push(m),!1}const Mm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Xh{static from(c){if(!(c instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,m]=new Uint8Array(c,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const y=m>>4;if(y!==1)throw new Error(`Got v${y} data when expected v1.`);const k=Mm[15&m];if(!k)throw new Error("Unrecognized array type.");const[C]=new Uint16Array(c,2,1),[P]=new Uint32Array(c,4,1);return new Xh(P,C,k,c)}constructor(c,h=64,m=Float64Array,y){if(isNaN(c)||c<0)throw new Error(`Unpexpected numItems value: ${c}.`);this.numItems=+c,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=m,this.IndexArrayType=c<65536?Uint16Array:Uint32Array;const k=Mm.indexOf(this.ArrayType),C=2*c*this.ArrayType.BYTES_PER_ELEMENT,P=c*this.IndexArrayType.BYTES_PER_ELEMENT,z=(8-P%8)%8;if(k<0)throw new Error(`Unexpected typed array class: ${m}.`);y&&y instanceof ArrayBuffer?(this.data=y,this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+P+z,2*c),this._pos=2*c,this._finished=!0):(this.data=new ArrayBuffer(8+C+P+z),this.ids=new this.IndexArrayType(this.data,8,c),this.coords=new this.ArrayType(this.data,8+P+z,2*c),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+k]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=c)}add(c,h){const m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=c,this.coords[this._pos++]=h,m}finish(){const c=this._pos>>1;if(c!==this.numItems)throw new Error(`Added ${c} items when expected ${this.numItems}.`);return Jh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(c,h,m,y){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:k,coords:C,nodeSize:P}=this,z=[0,k.length-1,0],B=[];for(;z.length;){const W=z.pop()||0,K=z.pop()||0,ne=z.pop()||0;if(K-ne<=P){for(let Pe=ne;Pe<=K;Pe++){const ze=C[2*Pe],We=C[2*Pe+1];ze>=c&&ze<=m&&We>=h&&We<=y&&B.push(k[Pe])}continue}const he=ne+K>>1,ve=C[2*he],xe=C[2*he+1];ve>=c&&ve<=m&&xe>=h&&xe<=y&&B.push(k[he]),(W===0?c<=ve:h<=xe)&&(z.push(ne),z.push(he-1),z.push(1-W)),(W===0?m>=ve:y>=xe)&&(z.push(he+1),z.push(K),z.push(1-W))}return B}within(c,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:k,nodeSize:C}=this,P=[0,y.length-1,0],z=[],B=m*m;for(;P.length;){const W=P.pop()||0,K=P.pop()||0,ne=P.pop()||0;if(K-ne<=C){for(let Pe=ne;Pe<=K;Pe++)zm(k[2*Pe],k[2*Pe+1],c,h)<=B&&z.push(y[Pe]);continue}const he=ne+K>>1,ve=k[2*he],xe=k[2*he+1];zm(ve,xe,c,h)<=B&&z.push(y[he]),(W===0?c-m<=ve:h-m<=xe)&&(P.push(ne),P.push(he-1),P.push(1-W)),(W===0?c+m>=ve:h+m>=xe)&&(P.push(he+1),P.push(K),P.push(1-W))}return z}}function Jh(f,c,h,m,y,k){if(y-m<=h)return;const C=m+y>>1;Dm(f,c,C,m,y,k),Jh(f,c,h,m,C-1,1-k),Jh(f,c,h,C+1,y,1-k)}function Dm(f,c,h,m,y,k){for(;y>m;){if(y-m>600){const B=y-m+1,W=h-m+1,K=Math.log(B),ne=.5*Math.exp(2*K/3),he=.5*Math.sqrt(K*ne*(B-ne)/B)*(W-B/2<0?-1:1);Dm(f,c,h,Math.max(m,Math.floor(h-W*ne/B+he)),Math.min(y,Math.floor(h+(B-W)*ne/B+he)),k)}const C=c[2*h+k];let P=m,z=y;for(Lc(f,c,m,h),c[2*y+k]>C&&Lc(f,c,m,y);P<z;){for(Lc(f,c,P,z),P++,z--;c[2*P+k]<C;)P++;for(;c[2*z+k]>C;)z--}c[2*m+k]===C?Lc(f,c,m,z):(z++,Lc(f,c,z,y)),z<=h&&(m=z+1),h<=z&&(y=z-1)}}function Lc(f,c,h,m){Yh(f,h,m),Yh(c,2*h,2*m),Yh(c,2*h+1,2*m+1)}function Yh(f,c,h){const m=f[c];f[c]=f[h],f[h]=m}function zm(f,c,h,m){const y=f-h,k=c-m;return y*y+k*k}var Qh;a.bd=void 0,(Qh=a.bd||(a.bd={})).create="create",Qh.load="load",Qh.fullLoad="fullLoad";let _f=null,Rc=[];const ed=1e3/60,td="loadTime",nd="fullLoadTime",_$={mark(f){performance.mark(f)},frame(f){const c=f;_f!=null&&Rc.push(c-_f),_f=c},clearMetrics(){_f=null,Rc=[],performance.clearMeasures(td),performance.clearMeasures(nd);for(const f in a.bd)performance.clearMarks(a.bd[f])},getPerformanceMetrics(){performance.measure(td,a.bd.create,a.bd.load),performance.measure(nd,a.bd.create,a.bd.fullLoad);const f=performance.getEntriesByName(td)[0].duration,c=performance.getEntriesByName(nd)[0].duration,h=Rc.length,m=1/(Rc.reduce((k,C)=>k+C,0)/h/1e3),y=Rc.filter(k=>k>ed).reduce((k,C)=>k+(C-ed)/ed,0);return{loadTime:f,fullLoadTime:c,fps:m,percentDroppedFrames:y/(h+y)*100,totalFrames:h}}};a.$=Nt,a.A=ml,a.B=function(f){if(Qe==null){const c=f.navigator?f.navigator.userAgent:null;Qe=!!f.safari||!(!c||!(/\b(iPad|iPhone|iPod)\b/.test(c)||c.match("Safari")&&!c.match("Chrome")))}return Qe},a.C=class{constructor(f,c){this.target=f,this.mapId=c,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new o$(()=>this.process()),this.subscription=function(h,m,y,k){return h.addEventListener(m,y,!1),{unsubscribe:()=>{h.removeEventListener(m,y,!1)}}}(this.target,"message",h=>this.receive(h)),this.globalScope=Se(self)?f:window}registerMessageHandler(f,c){this.messageHandlers[f]=c}sendAsync(f,c){return new Promise((h,m)=>{const y=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[y]={resolve:h,reject:m},c&&c.signal.addEventListener("abort",()=>{delete this.resolveRejects[y];const P={id:y,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(P)},{once:!0});const k=[],C=Object.assign(Object.assign({},f),{id:y,sourceMapId:this.mapId,origin:location.origin,data:ko(f.data,k)});this.target.postMessage(C,{transfer:k})})}receive(f){const c=f.data,h=c.id;if(!(c.origin!=="file://"&&location.origin!=="file://"&&c.origin!==location.origin||c.targetMapId&&this.mapId!==c.targetMapId)){if(c.type==="<cancel>"){delete this.tasks[h];const m=this.abortControllers[h];return delete this.abortControllers[h],void(m&&m.abort())}if(Se(self)||c.mustQueue)return this.tasks[h]=c,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,c)}}process(){if(this.taskQueue.length===0)return;const f=this.taskQueue.shift(),c=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),c&&this.processTask(f,c)}processTask(f,c){return o(this,void 0,void 0,function*(){if(c.type==="<response>"){const y=this.resolveRejects[f];return delete this.resolveRejects[f],y?void(c.error?y.reject(Co(c.error)):y.resolve(Co(c.data))):void 0}if(!this.messageHandlers[c.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${c.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=Co(c.data),m=new AbortController;this.abortControllers[f]=m;try{const y=yield this.messageHandlers[c.type](c.sourceMapId,h,m);this.completeTask(f,null,y)}catch(y){this.completeTask(f,y)}})}completeTask(f,c,h){const m=[];delete this.abortControllers[f];const y={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:c?ko(c):null,data:ko(h,m)};this.target.postMessage(y,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},a.D=un,a.E=fn,a.F=function(){var f=new ml(16);return ml!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},a.G=Tt,a.H=function(f,c,h){var m,y,k,C,P,z,B,W,K,ne,he,ve,xe=h[0],Pe=h[1],ze=h[2];return c===f?(f[12]=c[0]*xe+c[4]*Pe+c[8]*ze+c[12],f[13]=c[1]*xe+c[5]*Pe+c[9]*ze+c[13],f[14]=c[2]*xe+c[6]*Pe+c[10]*ze+c[14],f[15]=c[3]*xe+c[7]*Pe+c[11]*ze+c[15]):(y=c[1],k=c[2],C=c[3],P=c[4],z=c[5],B=c[6],W=c[7],K=c[8],ne=c[9],he=c[10],ve=c[11],f[0]=m=c[0],f[1]=y,f[2]=k,f[3]=C,f[4]=P,f[5]=z,f[6]=B,f[7]=W,f[8]=K,f[9]=ne,f[10]=he,f[11]=ve,f[12]=m*xe+P*Pe+K*ze+c[12],f[13]=y*xe+z*Pe+ne*ze+c[13],f[14]=k*xe+B*Pe+he*ze+c[14],f[15]=C*xe+W*Pe+ve*ze+c[15]),f},a.I=Oh,a.J=function(f,c,h){var m=h[0],y=h[1],k=h[2];return f[0]=c[0]*m,f[1]=c[1]*m,f[2]=c[2]*m,f[3]=c[3]*m,f[4]=c[4]*y,f[5]=c[5]*y,f[6]=c[6]*y,f[7]=c[7]*y,f[8]=c[8]*k,f[9]=c[9]*k,f[10]=c[10]*k,f[11]=c[11]*k,f[12]=c[12],f[13]=c[13],f[14]=c[14],f[15]=c[15],f},a.K=pp,a.L=function(f,c){const h={};for(let m=0;m<c.length;m++){const y=c[m];y in f&&(h[y]=f[y])}return h},a.M=Ao,a.N=cm,a.O=um,a.P=b,a.Q=ti,a.R=ei,a.S=q,a.T=oc,a.U=G,a.V=mt,a.W=wr,a.X=Sr,a.Y=ff,a.Z=class extends cc{},a._=o,a.a=cn,a.a$=function(f,c,h){return f[0]=c[0]*h[0],f[1]=c[1]*h[1],f[2]=c[2]*h[2],f[3]=c[3]*h[3],f},a.a0=Zh,a.a1=Lt,a.a2=f=>{const c=window.document.createElement("video");return c.muted=!0,new Promise(h=>{c.onloadstart=()=>{h(c)};for(const m of f){const y=window.document.createElement("source");en(m)||(c.crossOrigin="Anonymous"),y.src=m,c.appendChild(y)}})},a.a3=function(){return se++},a.a4=$,a.a5=$l,a.a6=Wa,a.a7=io,a.a8=or,a.a9=_m,a.aA=ie,a.aB=function(f,c){if(!f)return[{command:"setStyle",args:[c]}];let h=[];try{if(!wn(f.version,c.version))return[{command:"setStyle",args:[c]}];wn(f.center,c.center)||h.push({command:"setCenter",args:[c.center]}),wn(f.zoom,c.zoom)||h.push({command:"setZoom",args:[c.zoom]}),wn(f.bearing,c.bearing)||h.push({command:"setBearing",args:[c.bearing]}),wn(f.pitch,c.pitch)||h.push({command:"setPitch",args:[c.pitch]}),wn(f.sprite,c.sprite)||h.push({command:"setSprite",args:[c.sprite]}),wn(f.glyphs,c.glyphs)||h.push({command:"setGlyphs",args:[c.glyphs]}),wn(f.transition,c.transition)||h.push({command:"setTransition",args:[c.transition]}),wn(f.light,c.light)||h.push({command:"setLight",args:[c.light]}),wn(f.terrain,c.terrain)||h.push({command:"setTerrain",args:[c.terrain]}),wn(f.sky,c.sky)||h.push({command:"setSky",args:[c.sky]});const m={},y=[];(function(C,P,z,B){let W;for(W in P=P||{},C=C||{})Object.prototype.hasOwnProperty.call(C,W)&&(Object.prototype.hasOwnProperty.call(P,W)||Ds(W,z,B));for(W in P)Object.prototype.hasOwnProperty.call(P,W)&&(Object.prototype.hasOwnProperty.call(C,W)?wn(C[W],P[W])||(C[W].type==="geojson"&&P[W].type==="geojson"&&ys(C,P,W)?Gn(z,{command:"setGeoJSONSourceData",args:[W,P[W].data]}):vs(W,P,z,B)):gs(W,P,z))})(f.sources,c.sources,y,m);const k=[];f.layers&&f.layers.forEach(C=>{"source"in C&&m[C.source]?h.push({command:"removeLayer",args:[C.id]}):k.push(C)}),h=h.concat(y),function(C,P,z){P=P||[];const B=(C=C||[]).map(si),W=P.map(si),K=C.reduce(pt,{}),ne=P.reduce(pt,{}),he=B.slice(),ve=Object.create(null);let xe,Pe,ze,We,Le;for(let qe=0,ct=0;qe<B.length;qe++)xe=B[qe],Object.prototype.hasOwnProperty.call(ne,xe)?ct++:(Gn(z,{command:"removeLayer",args:[xe]}),he.splice(he.indexOf(xe,ct),1));for(let qe=0,ct=0;qe<W.length;qe++)xe=W[W.length-1-qe],he[he.length-1-qe]!==xe&&(Object.prototype.hasOwnProperty.call(K,xe)?(Gn(z,{command:"removeLayer",args:[xe]}),he.splice(he.lastIndexOf(xe,he.length-ct),1)):ct++,We=he[he.length-qe],Gn(z,{command:"addLayer",args:[ne[xe],We]}),he.splice(he.length-qe,0,xe),ve[xe]=!0);for(let qe=0;qe<W.length;qe++)if(xe=W[qe],Pe=K[xe],ze=ne[xe],!ve[xe]&&!wn(Pe,ze))if(wn(Pe.source,ze.source)&&wn(Pe["source-layer"],ze["source-layer"])&&wn(Pe.type,ze.type)){for(Le in bs(Pe.layout,ze.layout,z,xe,null,"setLayoutProperty"),bs(Pe.paint,ze.paint,z,xe,null,"setPaintProperty"),wn(Pe.filter,ze.filter)||Gn(z,{command:"setFilter",args:[xe,ze.filter]}),wn(Pe.minzoom,ze.minzoom)&&wn(Pe.maxzoom,ze.maxzoom)||Gn(z,{command:"setLayerZoomRange",args:[xe,ze.minzoom,ze.maxzoom]}),Pe)Object.prototype.hasOwnProperty.call(Pe,Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?bs(Pe[Le],ze[Le],z,xe,Le.slice(6),"setPaintProperty"):wn(Pe[Le],ze[Le])||Gn(z,{command:"setLayerProperty",args:[xe,Le,ze[Le]]}));for(Le in ze)Object.prototype.hasOwnProperty.call(ze,Le)&&!Object.prototype.hasOwnProperty.call(Pe,Le)&&Le!=="layout"&&Le!=="paint"&&Le!=="filter"&&Le!=="metadata"&&Le!=="minzoom"&&Le!=="maxzoom"&&(Le.indexOf("paint.")===0?bs(Pe[Le],ze[Le],z,xe,Le.slice(6),"setPaintProperty"):wn(Pe[Le],ze[Le])||Gn(z,{command:"setLayerProperty",args:[xe,Le,ze[Le]]}))}else Gn(z,{command:"removeLayer",args:[xe]}),We=he[he.lastIndexOf(xe)+1],Gn(z,{command:"addLayer",args:[ze,We]})}(k,c.layers,h)}catch(m){console.warn("Unable to compute style diff:",m),h=[{command:"setStyle",args:[c]}]}return h},a.aC=function(f){const c=[],h=f.id;return h===void 0&&c.push({message:`layers.${h}: missing required property "id"`}),f.render===void 0&&c.push({message:`layers.${h}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&c.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),c},a.aD=function f(c,h){if(Array.isArray(c)){if(!Array.isArray(h)||c.length!==h.length)return!1;for(let m=0;m<c.length;m++)if(!f(c[m],h[m]))return!1;return!0}if(typeof c=="object"&&c!==null&&h!==null){if(typeof h!="object"||Object.keys(c).length!==Object.keys(h).length)return!1;for(const m in c)if(!f(c[m],h[m]))return!1;return!0}return c===h},a.aE=Z,a.aF=Y,a.aG=class extends Nr{constructor(f,c){super(f,c),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},a.aH=Fs,a.aI=class extends Nr{constructor(f,c){super(f,c),this.current=fa}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let c=1;c<16;c++)if(f[c]!==this.current[c]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},a.aJ=fi,a.aK=class extends Nr{constructor(f,c){super(f,c),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},a.aL=class extends Nr{constructor(f,c){super(f,c),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},a.aM=Ri,a.aN=function(f,c,h,m,y,k,C){var P=1/(c-h),z=1/(m-y),B=1/(k-C);return f[0]=-2*P,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*z,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*B,f[11]=0,f[12]=(c+h)*P,f[13]=(y+m)*z,f[14]=(C+k)*B,f[15]=1,f},a.aO=Wn,a.aP=Ny,a.aQ=class extends al{},a.aR=zb,a.aS=class extends ll{},a.aT=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},a.aU=yp,a.aV=J,a.aW=class extends mc{},a.aX=st,a.aY=function(f,c){return f[0]===c[0]&&f[1]===c[1]&&f[2]===c[2]&&f[3]===c[3]&&f[4]===c[4]&&f[5]===c[5]&&f[6]===c[6]&&f[7]===c[7]&&f[8]===c[8]&&f[9]===c[9]&&f[10]===c[10]&&f[11]===c[11]&&f[12]===c[12]&&f[13]===c[13]&&f[14]===c[14]&&f[15]===c[15]},a.aZ=function(f,c){var h=f[0],m=f[1],y=f[2],k=f[3],C=f[4],P=f[5],z=f[6],B=f[7],W=f[8],K=f[9],ne=f[10],he=f[11],ve=f[12],xe=f[13],Pe=f[14],ze=f[15],We=c[0],Le=c[1],qe=c[2],ct=c[3],_t=c[4],Yt=c[5],on=c[6],Jt=c[7],Zt=c[8],Bt=c[9],rn=c[10],Ht=c[11],zt=c[12],pn=c[13],ln=c[14],Ln=c[15];return Math.abs(h-We)<=Ss*Math.max(1,Math.abs(h),Math.abs(We))&&Math.abs(m-Le)<=Ss*Math.max(1,Math.abs(m),Math.abs(Le))&&Math.abs(y-qe)<=Ss*Math.max(1,Math.abs(y),Math.abs(qe))&&Math.abs(k-ct)<=Ss*Math.max(1,Math.abs(k),Math.abs(ct))&&Math.abs(C-_t)<=Ss*Math.max(1,Math.abs(C),Math.abs(_t))&&Math.abs(P-Yt)<=Ss*Math.max(1,Math.abs(P),Math.abs(Yt))&&Math.abs(z-on)<=Ss*Math.max(1,Math.abs(z),Math.abs(on))&&Math.abs(B-Jt)<=Ss*Math.max(1,Math.abs(B),Math.abs(Jt))&&Math.abs(W-Zt)<=Ss*Math.max(1,Math.abs(W),Math.abs(Zt))&&Math.abs(K-Bt)<=Ss*Math.max(1,Math.abs(K),Math.abs(Bt))&&Math.abs(ne-rn)<=Ss*Math.max(1,Math.abs(ne),Math.abs(rn))&&Math.abs(he-Ht)<=Ss*Math.max(1,Math.abs(he),Math.abs(Ht))&&Math.abs(ve-zt)<=Ss*Math.max(1,Math.abs(ve),Math.abs(zt))&&Math.abs(xe-pn)<=Ss*Math.max(1,Math.abs(xe),Math.abs(pn))&&Math.abs(Pe-ln)<=Ss*Math.max(1,Math.abs(Pe),Math.abs(ln))&&Math.abs(ze-Ln)<=Ss*Math.max(1,Math.abs(ze),Math.abs(Ln))},a.a_=function(f,c){return f[0]=c[0],f[1]=c[1],f[2]=c[2],f[3]=c[3],f[4]=c[4],f[5]=c[5],f[6]=c[6],f[7]=c[7],f[8]=c[8],f[9]=c[9],f[10]=c[10],f[11]=c[11],f[12]=c[12],f[13]=c[13],f[14]=c[14],f[15]=c[15],f},a.aa=function(f){const c={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,m,y,k)=>{const C=y||k;return c[m]=!C||C.toLowerCase(),""}),c["max-age"]){const h=parseInt(c["max-age"],10);isNaN(h)?delete c["max-age"]:c["max-age"]=h}return c},a.ab=function(f,c){const h=[];for(const m in f)m in c||h.push(m);return h},a.ac=le,a.ad=function(f,c,h){var m=Math.sin(h),y=Math.cos(h),k=c[0],C=c[1],P=c[2],z=c[3],B=c[4],W=c[5],K=c[6],ne=c[7];return c!==f&&(f[8]=c[8],f[9]=c[9],f[10]=c[10],f[11]=c[11],f[12]=c[12],f[13]=c[13],f[14]=c[14],f[15]=c[15]),f[0]=k*y+B*m,f[1]=C*y+W*m,f[2]=P*y+K*m,f[3]=z*y+ne*m,f[4]=B*y-k*m,f[5]=W*y-C*m,f[6]=K*y-P*m,f[7]=ne*y-z*m,f},a.ae=function(f){var c=new ml(16);return c[0]=f[0],c[1]=f[1],c[2]=f[2],c[3]=f[3],c[4]=f[4],c[5]=f[5],c[6]=f[6],c[7]=f[7],c[8]=f[8],c[9]=f[9],c[10]=f[10],c[11]=f[11],c[12]=f[12],c[13]=f[13],c[14]=f[14],c[15]=f[15],c},a.af=Qu,a.ag=function(f,c){let h=0,m=0;if(f.kind==="constant")m=f.layoutSize;else if(f.kind!=="source"){const{interpolationType:y,minZoom:k,maxZoom:C}=f,P=y?le(rs.interpolationFactor(y,c,k,C),0,1):0;f.kind==="camera"?m=us.number(f.minSize,f.maxSize,P):h=P}return{uSizeT:h,uSize:m}},a.ai=function(f,{uSize:c,uSizeT:h},{lowerSize:m,upperSize:y}){return f.kind==="source"?m/Bi:f.kind==="composite"?us.number(m/Bi,y/Bi,h):c},a.aj=Vh,a.ak=function(f,c,h,m){const y=c.y-f.y,k=c.x-f.x,C=m.y-h.y,P=m.x-h.x,z=C*k-P*y;if(z===0)return null;const B=(P*(f.y-h.y)-C*(f.x-h.x))/z;return new b(f.x+B*k,f.y+B*y)},a.al=bm,a.am=gc,a.an=bh,a.ao=Vr,a.aq=Nh,a.ar=function(f,c){var h=c[0],m=c[1],y=c[2],k=c[3],C=c[4],P=c[5],z=c[6],B=c[7],W=c[8],K=c[9],ne=c[10],he=c[11],ve=c[12],xe=c[13],Pe=c[14],ze=c[15],We=h*P-m*C,Le=h*z-y*C,qe=h*B-k*C,ct=m*z-y*P,_t=m*B-k*P,Yt=y*B-k*z,on=W*xe-K*ve,Jt=W*Pe-ne*ve,Zt=W*ze-he*ve,Bt=K*Pe-ne*xe,rn=K*ze-he*xe,Ht=ne*ze-he*Pe,zt=We*Ht-Le*rn+qe*Bt+ct*Zt-_t*Jt+Yt*on;return zt?(f[0]=(P*Ht-z*rn+B*Bt)*(zt=1/zt),f[1]=(y*rn-m*Ht-k*Bt)*zt,f[2]=(xe*Yt-Pe*_t+ze*ct)*zt,f[3]=(ne*_t-K*Yt-he*ct)*zt,f[4]=(z*Zt-C*Ht-B*Jt)*zt,f[5]=(h*Ht-y*Zt+k*Jt)*zt,f[6]=(Pe*qe-ve*Yt-ze*Le)*zt,f[7]=(W*Yt-ne*qe+he*Le)*zt,f[8]=(C*rn-P*Zt+B*on)*zt,f[9]=(m*Zt-h*rn-k*on)*zt,f[10]=(ve*_t-xe*qe+ze*We)*zt,f[11]=(K*qe-W*_t-he*We)*zt,f[12]=(P*Jt-C*Bt-z*on)*zt,f[13]=(h*Bt-m*Jt+y*on)*zt,f[14]=(xe*Le-ve*ct-Pe*We)*zt,f[15]=(W*ct-K*Le+ne*We)*zt,f):null},a.as=Kh,a.at=Bh,a.au=Xh,a.av=function(){const f={},c=He.$version;for(const h in He.$root){const m=He.$root[h];if(m.required){let y=null;y=h==="version"?c:m.type==="array"?[]:{},y!=null&&(f[h]=y)}}return f},a.aw=Bu,a.ax=rt,a.ay=function(f){f=f.slice();const c=Object.create(null);for(let h=0;h<f.length;h++)c[f[h].id]=f[h];for(let h=0;h<f.length;h++)"ref"in f[h]&&(f[h]=br(f[h],c[f[h].ref]));return f},a.az=function(f){if(f.type==="custom")return new i$(f);switch(f.type){case"background":return new n$(f);case"circle":return new Vy(f);case"fill":return new ab(f);case"fill-extrusion":return new wb(f);case"heatmap":return new jy(f);case"hillshade":return new Gy(f);case"line":return new Pb(f);case"raster":return new s$(f);case"symbol":return new uf(f)}},a.b=Xe,a.b0=function(f,c){return f[0]*c[0]+f[1]*c[1]+f[2]*c[2]+f[3]*c[3]},a.b1=re,a.b2=dm,a.b3=fm,a.b4=function(f,c,h,m,y){var k,C=1/Math.tan(c/2);return f[0]=C/h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=C,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,y!=null&&y!==1/0?(f[10]=(y+m)*(k=1/(m-y)),f[14]=2*y*m*k):(f[10]=-1,f[14]=-2*m),f},a.b5=function(f,c,h){var m=Math.sin(h),y=Math.cos(h),k=c[4],C=c[5],P=c[6],z=c[7],B=c[8],W=c[9],K=c[10],ne=c[11];return c!==f&&(f[0]=c[0],f[1]=c[1],f[2]=c[2],f[3]=c[3],f[12]=c[12],f[13]=c[13],f[14]=c[14],f[15]=c[15]),f[4]=k*y+B*m,f[5]=C*y+W*m,f[6]=P*y+K*m,f[7]=z*y+ne*m,f[8]=B*y-k*m,f[9]=W*y-C*m,f[10]=K*y-P*m,f[11]=ne*y-z*m,f},a.b6=Q,a.b7=ge,a.b8=function(f){return f*Math.PI/180},a.b9=function(f,c){return f[0]=c[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=c[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=c[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},a.bA=Li,a.ba=class extends $i{},a.bb=Gh,a.bc=_$,a.be=dn,a.bf=function(f,c){cn.REGISTERED_PROTOCOLS[f]=c},a.bg=function(f){delete cn.REGISTERED_PROTOCOLS[f]},a.bh=function(f,c){const h={};for(let y=0;y<f.length;y++){const k=c&&c[f[y].id]||mh(f[y]);c&&(c[f[y].id]=k);let C=h[k];C||(C=h[k]=[]),C.push(f[y])}const m=[];for(const y in h)m.push(h[y]);return m},a.bi=tn,a.bj=mm,a.bk=gm,a.bl=Kp,a.bm=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=wr/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;const c=f.bucket.layers[0],h=c.layout,m=c._unevaluatedLayout._values,y={layoutIconSize:m["icon-size"].possiblyEvaluate(new or(f.bucket.zoom+1),f.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new or(f.bucket.zoom+1),f.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new or(18))};if(f.bucket.textSizeData.kind==="composite"){const{minZoom:B,maxZoom:W}=f.bucket.textSizeData;y.compositeTextSizes=[m["text-size"].possiblyEvaluate(new or(B),f.canonical),m["text-size"].possiblyEvaluate(new or(W),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){const{minZoom:B,maxZoom:W}=f.bucket.iconSizeData;y.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new or(B),f.canonical),m["icon-size"].possiblyEvaluate(new or(W),f.canonical)]}const k=h.get("text-line-height")*Vr,C=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",P=h.get("text-keep-upright"),z=h.get("text-size");for(const B of f.bucket.features){const W=h.get("text-font").evaluate(B,{},f.canonical).join(","),K=z.evaluate(B,{},f.canonical),ne=y.layoutTextSize.evaluate(B,{},f.canonical),he=y.layoutIconSize.evaluate(B,{},f.canonical),ve={horizontal:{},vertical:void 0},xe=B.text;let Pe,ze=[0,0];if(xe){const qe=xe.toString(),ct=h.get("text-letter-spacing").evaluate(B,{},f.canonical)*Vr,_t=Nu(qe)?ct:0,Yt=h.get("text-anchor").evaluate(B,{},f.canonical),on=Em(c,B,f.canonical);if(!on){const Ht=h.get("text-radial-offset").evaluate(B,{},f.canonical);ze=Ht?Im(Yt,[Ht*Vr,Wh]):h.get("text-offset").evaluate(B,{},f.canonical).map(zt=>zt*Vr)}let Jt=C?"center":h.get("text-justify").evaluate(B,{},f.canonical);const Zt=h.get("symbol-placement"),Bt=Zt==="point"?h.get("text-max-width").evaluate(B,{},f.canonical)*Vr:0,rn=()=>{f.bucket.allowVerticalPlacement&&So(qe)&&(ve.vertical=af(xe,f.glyphMap,f.glyphPositions,f.imagePositions,W,Bt,k,Yt,"left",_t,ze,a.ah.vertical,!0,Zt,ne,K))};if(!C&&on){const Ht=new Set;if(Jt==="auto")for(let pn=0;pn<on.values.length;pn+=2)Ht.add(Kh(on.values[pn]));else Ht.add(Jt);let zt=!1;for(const pn of Ht)if(!ve.horizontal[pn])if(zt)ve.horizontal[pn]=ve.horizontal[0];else{const ln=af(xe,f.glyphMap,f.glyphPositions,f.imagePositions,W,Bt,k,"center",pn,_t,ze,a.ah.horizontal,!1,Zt,ne,K);ln&&(ve.horizontal[pn]=ln,zt=ln.positionedLines.length===1)}rn()}else{Jt==="auto"&&(Jt=Kh(Yt));const Ht=af(xe,f.glyphMap,f.glyphPositions,f.imagePositions,W,Bt,k,Yt,Jt,_t,ze,a.ah.horizontal,!1,Zt,ne,K);Ht&&(ve.horizontal[Jt]=Ht),rn(),So(qe)&&C&&P&&(ve.vertical=af(xe,f.glyphMap,f.glyphPositions,f.imagePositions,W,Bt,k,Yt,Jt,_t,ze,a.ah.vertical,!1,Zt,ne,K))}}let We=!1;if(B.icon&&B.icon.name){const qe=f.imageMap[B.icon.name];qe&&(Pe=Jb(f.imagePositions[B.icon.name],h.get("icon-offset").evaluate(B,{},f.canonical),h.get("icon-anchor").evaluate(B,{},f.canonical)),We=!!qe.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=We:f.bucket.sdfIcons!==We&&fe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qe.pixelRatio!==f.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}const Le=Am(ve.horizontal)||ve.vertical;f.bucket.iconsInText=!!Le&&Le.iconsInText,(Le||Pe)&&p$(f.bucket,B,ve,Pe,f.imageMap,y,ne,he,ze,We,f.canonical)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},a.bn=Dh,a.bo=Ph,a.bp=Mh,a.bq=Io,a.br=Lh,a.bs=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},a.bt=function(f,c,h,m,y){return o(this,void 0,void 0,function*(){if(G())try{return yield mt(f,c,h,m,y)}catch{}return function(k,C,P,z,B){const W=k.width,K=k.height;Dt&&Ct||(Dt=new OffscreenCanvas(W,K),Ct=Dt.getContext("2d",{willReadFrequently:!0})),Dt.width=W,Dt.height=K,Ct.drawImage(k,0,0,W,K);const ne=Ct.getImageData(C,P,z,B);return Ct.clearRect(0,0,W,K),ne.data}(f,c,h,m,y)})},a.bu=pm,a.bv=l,a.bw=d,a.bx=Np,a.by=Qi,a.bz=function(f){return f.message===nn},a.c=yn,a.d=f=>o(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));const c=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(c)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),a.e=me,a.f=f=>new Promise((c,h)=>{const m=new Image;m.onload=()=>{c(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=at})},m.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const y=new Blob([new Uint8Array(f)],{type:"image/png"});m.src=f.byteLength?URL.createObjectURL(y):at}),a.g=At,a.h=(f,c)=>Kt(me(f,{type:"json"}),c),a.i=Se,a.j=bn,a.k=et,a.l=(f,c)=>Kt(me(f,{type:"arrayBuffer"}),c),a.m=Kt,a.n=function(f){return new Lh(f).readFields(Gb,[])},a.o=xc,a.p=Wp,a.q=Cs,a.r=_h,a.s=en,a.t=xo,a.u=Xt,a.v=He,a.w=fe,a.x=to,a.y=function([f,c,h]){return c+=90,c*=Math.PI/180,h*=Math.PI/180,{x:f*Math.cos(c)*Math.sin(h),y:f*Math.sin(c)*Math.sin(h),z:f*Math.cos(h)}},a.z=us}),r("worker",["./shared"],function(a){class o{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,ue){for(const Te of ee){this._layerConfigs[Te.id]=Te;const Be=this._layers[Te.id]=a.az(Te);Be._featureFilter=a.a6(Be.filter),this.keyCache[Te.id]&&delete this.keyCache[Te.id]}for(const Te of ue)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const ye=a.bh(Object.values(this._layerConfigs),this.keyCache);for(const Te of ye){const Be=Te.map(ut=>this._layers[ut.id]),Ne=Be[0];if(Ne.visibility==="none")continue;const Ze=Ne.source||"";let Re=this.familiesBySource[Ze];Re||(Re=this.familiesBySource[Ze]={});const Ke=Ne.sourceLayer||"_geojsonTileLayer";let vt=Re[Ke];vt||(vt=Re[Ke]=[]),vt.push(Be)}}}class l{constructor(ee){const ue={},ye=[];for(const Ze in ee){const Re=ee[Ze],Ke=ue[Ze]={};for(const vt in Re){const ut=Re[+vt];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const ft={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};ye.push(ft),Ke[vt]={rect:ft,metrics:ut.metrics}}}const{w:Te,h:Be}=a.p(ye),Ne=new a.o({width:Te||1,height:Be||1});for(const Ze in ee){const Re=ee[Ze];for(const Ke in Re){const vt=Re[+Ke];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;const ut=ue[Ze][Ke].rect;a.o.copy(vt.bitmap,Ne,{x:0,y:0},{x:ut.x+1,y:ut.y+1},vt.bitmap)}}this.image=Ne,this.positions=ue}}a.bi("GlyphAtlas",l);class d{constructor(ee){this.tileID=new a.Q(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,ue,ye,Te){return a._(this,void 0,void 0,function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new a.a4;const Be=new a.bj(Object.keys(ee.layers).sort()),Ne=new a.bk(this.tileID,this.promoteId);Ne.bucketLayerIDs=[];const Ze={},Re={featureIndex:Ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ye},Ke=ue.familiesBySource[this.source];for(const Mn in Ke){const mr=ee.layers[Mn];if(!mr)continue;mr.version===1&&a.w(`Vector tile source "${this.source}" layer "${Mn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Fr=Be.encode(Mn),cs=[];for(let ws=0;ws<mr.length;ws++){const Yr=mr.feature(ws),oi=Ne.getId(Yr,Mn);cs.push({feature:Yr,id:oi,index:ws,sourceLayerIndex:Fr})}for(const ws of Ke[Mn]){const Yr=ws[0];Yr.source!==this.source&&a.w(`layer.source = ${Yr.source} does not equal this.source = ${this.source}`),Yr.minzoom&&this.zoom<Math.floor(Yr.minzoom)||Yr.maxzoom&&this.zoom>=Yr.maxzoom||Yr.visibility!=="none"&&(_(ws,this.zoom,ye),(Ze[Yr.id]=Yr.createBucket({index:Ne.bucketLayerIDs.length,layers:ws,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fr,sourceID:this.source})).populate(cs,Re,this.tileID.canonical),Ne.bucketLayerIDs.push(ws.map(oi=>oi.id)))}}const vt=a.aE(Re.glyphDependencies,Mn=>Object.keys(Mn).map(Number));this.inFlightDependencies.forEach(Mn=>Mn==null?void 0:Mn.abort()),this.inFlightDependencies=[];let ut=Promise.resolve({});if(Object.keys(vt).length){const Mn=new AbortController;this.inFlightDependencies.push(Mn),ut=Te.sendAsync({type:"GG",data:{stacks:vt,source:this.source,tileID:this.tileID,type:"glyphs"}},Mn)}const ft=Object.keys(Re.iconDependencies);let hn=Promise.resolve({});if(ft.length){const Mn=new AbortController;this.inFlightDependencies.push(Mn),hn=Te.sendAsync({type:"GI",data:{icons:ft,source:this.source,tileID:this.tileID,type:"icons"}},Mn)}const _n=Object.keys(Re.patternDependencies);let En=Promise.resolve({});if(_n.length){const Mn=new AbortController;this.inFlightDependencies.push(Mn),En=Te.sendAsync({type:"GI",data:{icons:_n,source:this.source,tileID:this.tileID,type:"patterns"}},Mn)}const[Sn,Fn,Jn]=yield Promise.all([ut,hn,En]),ir=new l(Sn),Ir=new a.bl(Fn,Jn);for(const Mn in Ze){const mr=Ze[Mn];mr instanceof a.a5?(_(mr.layers,this.zoom,ye),a.bm({bucket:mr,glyphMap:Sn,glyphPositions:ir.positions,imageMap:Fn,imagePositions:Ir.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):mr.hasPattern&&(mr instanceof a.bn||mr instanceof a.bo||mr instanceof a.bp)&&(_(mr.layers,this.zoom,ye),mr.addFeatures(Re,this.tileID.canonical,Ir.patternPositions))}return this.status="done",{buckets:Object.values(Ze).filter(Mn=>!Mn.isEmpty()),featureIndex:Ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ir.image,imageAtlas:Ir,glyphMap:this.returnDependencies?Sn:null,iconMap:this.returnDependencies?Fn:null,glyphPositions:this.returnDependencies?ir.positions:null}})}}function _(Ae,ee,ue){const ye=new a.a8(ee);for(const Te of Ae)Te.recalculate(ye,ue)}class b{constructor(ee,ue,ye){this.actor=ee,this.layerIndex=ue,this.availableImages=ye,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ee,ue){return a._(this,void 0,void 0,function*(){const ye=yield a.l(ee.request,ue);try{return{vectorTile:new a.bq.VectorTile(new a.br(ye.data)),rawData:ye.data,cacheControl:ye.cacheControl,expires:ye.expires}}catch(Te){const Be=new Uint8Array(ye.data);let Ne=`Unable to parse the tile at ${ee.request.url}, `;throw Ne+=Be[0]===31&&Be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Te.messge}`,new Error(Ne)}})}loadTile(ee){return a._(this,void 0,void 0,function*(){const ue=ee.uid,ye=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new a.bs(ee.request),Te=new d(ee);this.loading[ue]=Te;const Be=new AbortController;Te.abort=Be;try{const Ne=yield this.loadVectorTile(ee,Be);if(delete this.loading[ue],!Ne)return null;const Ze=Ne.rawData,Re={};Ne.expires&&(Re.expires=Ne.expires),Ne.cacheControl&&(Re.cacheControl=Ne.cacheControl);const Ke={};if(ye){const ut=ye.finish();ut&&(Ke.resourceTiming=JSON.parse(JSON.stringify(ut)))}Te.vectorTile=Ne.vectorTile;const vt=Te.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[ue]=Te,this.fetching[ue]={rawTileData:Ze,cacheControl:Re,resourceTiming:Ke};try{const ut=yield vt;return a.e({rawTileData:Ze.slice(0)},ut,Re,Ke)}finally{delete this.fetching[ue]}}catch(Ne){throw delete this.loading[ue],Te.status="done",this.loaded[ue]=Te,Ne}})}reloadTile(ee){return a._(this,void 0,void 0,function*(){const ue=ee.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ye=this.loaded[ue];if(ye.showCollisionBoxes=ee.showCollisionBoxes,ye.status==="parsing"){const Te=yield ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor);let Be;if(this.fetching[ue]){const{rawTileData:Ne,cacheControl:Ze,resourceTiming:Re}=this.fetching[ue];delete this.fetching[ue],Be=a.e({rawTileData:Ne.slice(0)},Te,Ze,Re)}else Be=Te;return Be}if(ye.status==="done"&&ye.vectorTile)return ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(ee){return a._(this,void 0,void 0,function*(){const ue=this.loading,ye=ee.uid;ue&&ue[ye]&&ue[ye].abort&&(ue[ye].abort.abort(),delete ue[ye])})}removeTile(ee){return a._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ee.uid]&&delete this.loaded[ee.uid]})}}class w{constructor(){this.loaded={}}loadTile(ee){return a._(this,void 0,void 0,function*(){const{uid:ue,encoding:ye,rawImageData:Te,redFactor:Be,greenFactor:Ne,blueFactor:Ze,baseShift:Re}=ee,Ke=Te.width+2,vt=Te.height+2,ut=a.b(Te)?new a.R({width:Ke,height:vt},yield a.bt(Te,-1,-1,Ke,vt)):Te,ft=new a.bu(ue,ut,ye,Be,Ne,Ze,Re);return this.loaded=this.loaded||{},this.loaded[ue]=ft,ft})}removeTile(ee){const ue=this.loaded,ye=ee.uid;ue&&ue[ye]&&delete ue[ye]}}function E(Ae,ee){if(Ae.length!==0){L(Ae[0],ee);for(var ue=1;ue<Ae.length;ue++)L(Ae[ue],!ee)}}function L(Ae,ee){for(var ue=0,ye=0,Te=0,Be=Ae.length,Ne=Be-1;Te<Be;Ne=Te++){var Ze=(Ae[Te][0]-Ae[Ne][0])*(Ae[Ne][1]+Ae[Te][1]),Re=ue+Ze;ye+=Math.abs(ue)>=Math.abs(Ze)?ue-Re+Ze:Ze-Re+ue,ue=Re}ue+ye>=0!=!!ee&&Ae.reverse()}var M=a.bv(function Ae(ee,ue){var ye,Te=ee&&ee.type;if(Te==="FeatureCollection")for(ye=0;ye<ee.features.length;ye++)Ae(ee.features[ye],ue);else if(Te==="GeometryCollection")for(ye=0;ye<ee.geometries.length;ye++)Ae(ee.geometries[ye],ue);else if(Te==="Feature")Ae(ee.geometry,ue);else if(Te==="Polygon")E(ee.coordinates,ue);else if(Te==="MultiPolygon")for(ye=0;ye<ee.coordinates.length;ye++)E(ee.coordinates[ye],ue);return ee});const F=a.bq.VectorTileFeature.prototype.toGeoJSON;var q={exports:{}},G=a.bw,Q=a.bq.VectorTileFeature,ge=le;function le(Ae,ee){this.options=ee||{},this.features=Ae,this.length=Ae.length}function re(Ae,ee){this.id=typeof Ae.id=="number"?Ae.id:void 0,this.type=Ae.type,this.rawGeometry=Ae.type===1?[Ae.geometry]:Ae.geometry,this.properties=Ae.tags,this.extent=ee||4096}le.prototype.feature=function(Ae){return new re(this.features[Ae],this.options.extent)},re.prototype.loadGeometry=function(){var Ae=this.rawGeometry;this.geometry=[];for(var ee=0;ee<Ae.length;ee++){for(var ue=Ae[ee],ye=[],Te=0;Te<ue.length;Te++)ye.push(new G(ue[Te][0],ue[Te][1]));this.geometry.push(ye)}return this.geometry},re.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ae=this.geometry,ee=1/0,ue=-1/0,ye=1/0,Te=-1/0,Be=0;Be<Ae.length;Be++)for(var Ne=Ae[Be],Ze=0;Ze<Ne.length;Ze++){var Re=Ne[Ze];ee=Math.min(ee,Re.x),ue=Math.max(ue,Re.x),ye=Math.min(ye,Re.y),Te=Math.max(Te,Re.y)}return[ee,ye,ue,Te]},re.prototype.toGeoJSON=Q.prototype.toGeoJSON;var me=a.bx,se=ge;function Z(Ae){var ee=new me;return function(ue,ye){for(var Te in ue.layers)ye.writeMessage(3,Y,ue.layers[Te])}(Ae,ee),ee.finish()}function Y(Ae,ee){var ue;ee.writeVarintField(15,Ae.version||1),ee.writeStringField(1,Ae.name||""),ee.writeVarintField(5,Ae.extent||4096);var ye={keys:[],values:[],keycache:{},valuecache:{}};for(ue=0;ue<Ae.length;ue++)ye.feature=Ae.feature(ue),ee.writeMessage(2,ie,ye);var Te=ye.keys;for(ue=0;ue<Te.length;ue++)ee.writeStringField(3,Te[ue]);var Be=ye.values;for(ue=0;ue<Be.length;ue++)ee.writeMessage(4,Se,Be[ue])}function ie(Ae,ee){var ue=Ae.feature;ue.id!==void 0&&ee.writeVarintField(1,ue.id),ee.writeMessage(2,be,Ae),ee.writeVarintField(3,ue.type),ee.writeMessage(4,je,ue)}function be(Ae,ee){var ue=Ae.feature,ye=Ae.keys,Te=Ae.values,Be=Ae.keycache,Ne=Ae.valuecache;for(var Ze in ue.properties){var Re=ue.properties[Ze],Ke=Be[Ze];if(Re!==null){Ke===void 0&&(ye.push(Ze),Be[Ze]=Ke=ye.length-1),ee.writeVarint(Ke);var vt=typeof Re;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(Re=JSON.stringify(Re));var ut=vt+":"+Re,ft=Ne[ut];ft===void 0&&(Te.push(Re),Ne[ut]=ft=Te.length-1),ee.writeVarint(ft)}}}function fe(Ae,ee){return(ee<<3)+(7&Ae)}function ke(Ae){return Ae<<1^Ae>>31}function je(Ae,ee){for(var ue=Ae.loadGeometry(),ye=Ae.type,Te=0,Be=0,Ne=ue.length,Ze=0;Ze<Ne;Ze++){var Re=ue[Ze],Ke=1;ye===1&&(Ke=Re.length),ee.writeVarint(fe(1,Ke));for(var vt=ye===3?Re.length-1:Re.length,ut=0;ut<vt;ut++){ut===1&&ye!==1&&ee.writeVarint(fe(2,vt-1));var ft=Re[ut].x-Te,hn=Re[ut].y-Be;ee.writeVarint(ke(ft)),ee.writeVarint(ke(hn)),Te+=ft,Be+=hn}ye===3&&ee.writeVarint(fe(7,1))}}function Se(Ae,ee){var ue=typeof Ae;ue==="string"?ee.writeStringField(1,Ae):ue==="boolean"?ee.writeBooleanField(7,Ae):ue==="number"&&(Ae%1!=0?ee.writeDoubleField(3,Ae):Ae<0?ee.writeSVarintField(6,Ae):ee.writeVarintField(5,Ae))}q.exports=Z,q.exports.fromVectorTileJs=Z,q.exports.fromGeojsonVt=function(Ae,ee){ee=ee||{};var ue={};for(var ye in Ae)ue[ye]=new se(Ae[ye].features,ee),ue[ye].name=ye,ue[ye].version=ee.version,ue[ye].extent=ee.extent;return Z({layers:ue})},q.exports.GeoJSONWrapper=se;var Qe=a.bv(q.exports);const Xe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ae=>Ae},at=Math.fround||(mt=new Float32Array(1),Ae=>(mt[0]=+Ae,mt[0]));var mt;const Dt=3,Ct=5,nn=6;class yn{constructor(ee){this.options=Object.assign(Object.create(Xe),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:ue,minZoom:ye,maxZoom:Te}=this.options;ue&&console.time("total time");const Be=`prepare ${ee.length} points`;ue&&console.time(Be),this.points=ee;const Ne=[];for(let Re=0;Re<ee.length;Re++){const Ke=ee[Re];if(!Ke.geometry)continue;const[vt,ut]=Ke.geometry.coordinates,ft=at(Tt(vt)),hn=at(dn(ut));Ne.push(ft,hn,1/0,Re,-1,1),this.options.reduce&&Ne.push(0)}let Ze=this.trees[Te+1]=this._createTree(Ne);ue&&console.timeEnd(Be);for(let Re=Te;Re>=ye;Re--){const Ke=+Date.now();Ze=this.trees[Re]=this._createTree(this._cluster(Ze,Re)),ue&&console.log("z%d: %d clusters in %dms",Re,Ze.numItems,+Date.now()-Ke)}return ue&&console.timeEnd("total time"),this}getClusters(ee,ue){let ye=((ee[0]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,ee[1]));let Be=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)ye=-180,Be=180;else if(ye>Be){const ut=this.getClusters([ye,Te,180,Ne],ue),ft=this.getClusters([-180,Te,Be,Ne],ue);return ut.concat(ft)}const Ze=this.trees[this._limitZoom(ue)],Re=Ze.range(Tt(ye),dn(Ne),Tt(Be),dn(Te)),Ke=Ze.data,vt=[];for(const ut of Re){const ft=this.stride*ut;vt.push(Ke[ft+Ct]>1?cn(Ke,ft,this.clusterProps):this.points[Ke[ft+Dt]])}return vt}getChildren(ee){const ue=this._getOriginId(ee),ye=this._getOriginZoom(ee),Te="No cluster with the specified id.",Be=this.trees[ye];if(!Be)throw new Error(Te);const Ne=Be.data;if(ue*this.stride>=Ne.length)throw new Error(Te);const Ze=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),Re=Be.within(Ne[ue*this.stride],Ne[ue*this.stride+1],Ze),Ke=[];for(const vt of Re){const ut=vt*this.stride;Ne[ut+4]===ee&&Ke.push(Ne[ut+Ct]>1?cn(Ne,ut,this.clusterProps):this.points[Ne[ut+Dt]])}if(Ke.length===0)throw new Error(Te);return Ke}getLeaves(ee,ue,ye){const Te=[];return this._appendLeaves(Te,ee,ue=ue||10,ye=ye||0,0),Te}getTile(ee,ue,ye){const Te=this.trees[this._limitZoom(ee)],Be=Math.pow(2,ee),{extent:Ne,radius:Ze}=this.options,Re=Ze/Ne,Ke=(ye-Re)/Be,vt=(ye+1+Re)/Be,ut={features:[]};return this._addTileFeatures(Te.range((ue-Re)/Be,Ke,(ue+1+Re)/Be,vt),Te.data,ue,ye,Be,ut),ue===0&&this._addTileFeatures(Te.range(1-Re/Be,Ke,1,vt),Te.data,Be,ye,Be,ut),ue===Be-1&&this._addTileFeatures(Te.range(0,Ke,Re/Be,vt),Te.data,-1,ye,Be,ut),ut.features.length?ut:null}getClusterExpansionZoom(ee){let ue=this._getOriginZoom(ee)-1;for(;ue<=this.options.maxZoom;){const ye=this.getChildren(ee);if(ue++,ye.length!==1)break;ee=ye[0].properties.cluster_id}return ue}_appendLeaves(ee,ue,ye,Te,Be){const Ne=this.getChildren(ue);for(const Ze of Ne){const Re=Ze.properties;if(Re&&Re.cluster?Be+Re.point_count<=Te?Be+=Re.point_count:Be=this._appendLeaves(ee,Re.cluster_id,ye,Te,Be):Be<Te?Be++:ee.push(Ze),ee.length===ye)break}return Be}_createTree(ee){const ue=new a.au(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<ee.length;ye+=this.stride)ue.add(ee[ye],ee[ye+1]);return ue.finish(),ue.data=ee,ue}_addTileFeatures(ee,ue,ye,Te,Be,Ne){for(const Ze of ee){const Re=Ze*this.stride,Ke=ue[Re+Ct]>1;let vt,ut,ft;if(Ke)vt=At(ue,Re,this.clusterProps),ut=ue[Re],ft=ue[Re+1];else{const En=this.points[ue[Re+Dt]];vt=En.properties;const[Sn,Fn]=En.geometry.coordinates;ut=Tt(Sn),ft=dn(Fn)}const hn={type:1,geometry:[[Math.round(this.options.extent*(ut*Be-ye)),Math.round(this.options.extent*(ft*Be-Te))]],tags:vt};let _n;_n=Ke||this.options.generateId?ue[Re+Dt]:this.points[ue[Re+Dt]].id,_n!==void 0&&(hn.id=_n),Ne.features.push(hn)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,ue){const{radius:ye,extent:Te,reduce:Be,minPoints:Ne}=this.options,Ze=ye/(Te*Math.pow(2,ue)),Re=ee.data,Ke=[],vt=this.stride;for(let ut=0;ut<Re.length;ut+=vt){if(Re[ut+2]<=ue)continue;Re[ut+2]=ue;const ft=Re[ut],hn=Re[ut+1],_n=ee.within(Re[ut],Re[ut+1],Ze),En=Re[ut+Ct];let Sn=En;for(const Fn of _n){const Jn=Fn*vt;Re[Jn+2]>ue&&(Sn+=Re[Jn+Ct])}if(Sn>En&&Sn>=Ne){let Fn,Jn=ft*En,ir=hn*En,Ir=-1;const Mn=((ut/vt|0)<<5)+(ue+1)+this.points.length;for(const mr of _n){const Fr=mr*vt;if(Re[Fr+2]<=ue)continue;Re[Fr+2]=ue;const cs=Re[Fr+Ct];Jn+=Re[Fr]*cs,ir+=Re[Fr+1]*cs,Re[Fr+4]=Mn,Be&&(Fn||(Fn=this._map(Re,ut,!0),Ir=this.clusterProps.length,this.clusterProps.push(Fn)),Be(Fn,this._map(Re,Fr)))}Re[ut+4]=Mn,Ke.push(Jn/Sn,ir/Sn,1/0,Mn,-1,Sn),Be&&Ke.push(Ir)}else{for(let Fn=0;Fn<vt;Fn++)Ke.push(Re[ut+Fn]);if(Sn>1)for(const Fn of _n){const Jn=Fn*vt;if(!(Re[Jn+2]<=ue)){Re[Jn+2]=ue;for(let ir=0;ir<vt;ir++)Ke.push(Re[Jn+ir])}}}}return Ke}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,ue,ye){if(ee[ue+Ct]>1){const Ne=this.clusterProps[ee[ue+nn]];return ye?Object.assign({},Ne):Ne}const Te=this.points[ee[ue+Dt]].properties,Be=this.options.map(Te);return ye&&Be===Te?Object.assign({},Be):Be}}function cn(Ae,ee,ue){return{type:"Feature",id:Ae[ee+Dt],properties:At(Ae,ee,ue),geometry:{type:"Point",coordinates:[(ye=Ae[ee],360*(ye-.5)),rt(Ae[ee+1])]}};var ye}function At(Ae,ee,ue){const ye=Ae[ee+Ct],Te=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,Be=Ae[ee+nn],Ne=Be===-1?{}:Object.assign({},ue[Be]);return Object.assign(Ne,{cluster:!0,cluster_id:Ae[ee+Dt],point_count:ye,point_count_abbreviated:Te})}function Tt(Ae){return Ae/360+.5}function dn(Ae){const ee=Math.sin(Ae*Math.PI/180),ue=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ue<0?0:ue>1?1:ue}function rt(Ae){const ee=(180-360*Ae)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Kt(Ae,ee,ue,ye){for(var Te,Be=ye,Ne=ue-ee>>1,Ze=ue-ee,Re=Ae[ee],Ke=Ae[ee+1],vt=Ae[ue],ut=Ae[ue+1],ft=ee+3;ft<ue;ft+=3){var hn=en(Ae[ft],Ae[ft+1],Re,Ke,vt,ut);if(hn>Be)Te=ft,Be=hn;else if(hn===Be){var _n=Math.abs(ft-Ne);_n<Ze&&(Te=ft,Ze=_n)}}Be>ye&&(Te-ee>3&&Kt(Ae,ee,Te,ye),Ae[Te+2]=Be,ue-Te>3&&Kt(Ae,Te,ue,ye))}function en(Ae,ee,ue,ye,Te,Be){var Ne=Te-ue,Ze=Be-ye;if(Ne!==0||Ze!==0){var Re=((Ae-ue)*Ne+(ee-ye)*Ze)/(Ne*Ne+Ze*Ze);Re>1?(ue=Te,ye=Be):Re>0&&(ue+=Ne*Re,ye+=Ze*Re)}return(Ne=Ae-ue)*Ne+(Ze=ee-ye)*Ze}function Ot(Ae,ee,ue,ye){var Te={id:Ae===void 0?null:Ae,type:ee,geometry:ue,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Be){var Ne=Be.geometry,Ze=Be.type;if(Ze==="Point"||Ze==="MultiPoint"||Ze==="LineString")Et(Be,Ne);else if(Ze==="Polygon"||Ze==="MultiLineString")for(var Re=0;Re<Ne.length;Re++)Et(Be,Ne[Re]);else if(Ze==="MultiPolygon")for(Re=0;Re<Ne.length;Re++)for(var Ke=0;Ke<Ne[Re].length;Ke++)Et(Be,Ne[Re][Ke])}(Te),Te}function Et(Ae,ee){for(var ue=0;ue<ee.length;ue+=3)Ae.minX=Math.min(Ae.minX,ee[ue]),Ae.minY=Math.min(Ae.minY,ee[ue+1]),Ae.maxX=Math.max(Ae.maxX,ee[ue]),Ae.maxY=Math.max(Ae.maxY,ee[ue+1])}function et(Ae,ee,ue,ye){if(ee.geometry){var Te=ee.geometry.coordinates,Be=ee.geometry.type,Ne=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2),Ze=[],Re=ee.id;if(ue.promoteId?Re=ee.properties[ue.promoteId]:ue.generateId&&(Re=ye||0),Be==="Point")bn(Te,Ze);else if(Be==="MultiPoint")for(var Ke=0;Ke<Te.length;Ke++)bn(Te[Ke],Ze);else if(Be==="LineString")fn(Te,Ze,Ne,!1);else if(Be==="MultiLineString"){if(ue.lineMetrics){for(Ke=0;Ke<Te.length;Ke++)fn(Te[Ke],Ze=[],Ne,!1),Ae.push(Ot(Re,"LineString",Ze,ee.properties));return}He(Te,Ze,Ne,!1)}else if(Be==="Polygon")He(Te,Ze,Ne,!0);else{if(Be!=="MultiPolygon"){if(Be==="GeometryCollection"){for(Ke=0;Ke<ee.geometry.geometries.length;Ke++)et(Ae,{id:Re,geometry:ee.geometry.geometries[Ke],properties:ee.properties},ue,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ke=0;Ke<Te.length;Ke++){var vt=[];He(Te[Ke],vt,Ne,!0),Ze.push(vt)}}Ae.push(Ot(Re,Be,Ze,ee.properties))}}function bn(Ae,ee){ee.push(Un(Ae[0])),ee.push(br(Ae[1])),ee.push(0)}function fn(Ae,ee,ue,ye){for(var Te,Be,Ne=0,Ze=0;Ze<Ae.length;Ze++){var Re=Un(Ae[Ze][0]),Ke=br(Ae[Ze][1]);ee.push(Re),ee.push(Ke),ee.push(0),Ze>0&&(Ne+=ye?(Te*Ke-Re*Be)/2:Math.sqrt(Math.pow(Re-Te,2)+Math.pow(Ke-Be,2))),Te=Re,Be=Ke}var vt=ee.length-3;ee[2]=1,Kt(ee,0,vt,ue),ee[vt+2]=1,ee.size=Math.abs(Ne),ee.start=0,ee.end=ee.size}function He(Ae,ee,ue,ye){for(var Te=0;Te<Ae.length;Te++){var Be=[];fn(Ae[Te],Be,ue,ye),ee.push(Be)}}function Un(Ae){return Ae/360+.5}function br(Ae){var ee=Math.sin(Ae*Math.PI/180),ue=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ue<0?0:ue>1?1:ue}function wn(Ae,ee,ue,ye,Te,Be,Ne,Ze){if(ye/=ee,Be>=(ue/=ee)&&Ne<ye)return Ae;if(Ne<ue||Be>=ye)return null;for(var Re=[],Ke=0;Ke<Ae.length;Ke++){var vt=Ae[Ke],ut=vt.geometry,ft=vt.type,hn=Te===0?vt.minX:vt.minY,_n=Te===0?vt.maxX:vt.maxY;if(hn>=ue&&_n<ye)Re.push(vt);else if(!(_n<ue||hn>=ye)){var En=[];if(ft==="Point"||ft==="MultiPoint")Gn(ut,En,ue,ye,Te);else if(ft==="LineString")gs(ut,En,ue,ye,Te,!1,Ze.lineMetrics);else if(ft==="MultiLineString")vs(ut,En,ue,ye,Te,!1);else if(ft==="Polygon")vs(ut,En,ue,ye,Te,!0);else if(ft==="MultiPolygon")for(var Sn=0;Sn<ut.length;Sn++){var Fn=[];vs(ut[Sn],Fn,ue,ye,Te,!0),Fn.length&&En.push(Fn)}if(En.length){if(Ze.lineMetrics&&ft==="LineString"){for(Sn=0;Sn<En.length;Sn++)Re.push(Ot(vt.id,ft,En[Sn],vt.tags));continue}ft!=="LineString"&&ft!=="MultiLineString"||(En.length===1?(ft="LineString",En=En[0]):ft="MultiLineString"),ft!=="Point"&&ft!=="MultiPoint"||(ft=En.length===3?"Point":"MultiPoint"),Re.push(Ot(vt.id,ft,En,vt.tags))}}}return Re.length?Re:null}function Gn(Ae,ee,ue,ye,Te){for(var Be=0;Be<Ae.length;Be+=3){var Ne=Ae[Be+Te];Ne>=ue&&Ne<=ye&&(ee.push(Ae[Be]),ee.push(Ae[Be+1]),ee.push(Ae[Be+2]))}}function gs(Ae,ee,ue,ye,Te,Be,Ne){for(var Ze,Re,Ke=Ds(Ae),vt=Te===0?bs:si,ut=Ae.start,ft=0;ft<Ae.length-3;ft+=3){var hn=Ae[ft],_n=Ae[ft+1],En=Ae[ft+2],Sn=Ae[ft+3],Fn=Ae[ft+4],Jn=Te===0?hn:_n,ir=Te===0?Sn:Fn,Ir=!1;Ne&&(Ze=Math.sqrt(Math.pow(hn-Sn,2)+Math.pow(_n-Fn,2))),Jn<ue?ir>ue&&(Re=vt(Ke,hn,_n,Sn,Fn,ue),Ne&&(Ke.start=ut+Ze*Re)):Jn>ye?ir<ye&&(Re=vt(Ke,hn,_n,Sn,Fn,ye),Ne&&(Ke.start=ut+Ze*Re)):ys(Ke,hn,_n,En),ir<ue&&Jn>=ue&&(Re=vt(Ke,hn,_n,Sn,Fn,ue),Ir=!0),ir>ye&&Jn<=ye&&(Re=vt(Ke,hn,_n,Sn,Fn,ye),Ir=!0),!Be&&Ir&&(Ne&&(Ke.end=ut+Ze*Re),ee.push(Ke),Ke=Ds(Ae)),Ne&&(ut+=Ze)}var Mn=Ae.length-3;hn=Ae[Mn],_n=Ae[Mn+1],En=Ae[Mn+2],(Jn=Te===0?hn:_n)>=ue&&Jn<=ye&&ys(Ke,hn,_n,En),Mn=Ke.length-3,Be&&Mn>=3&&(Ke[Mn]!==Ke[0]||Ke[Mn+1]!==Ke[1])&&ys(Ke,Ke[0],Ke[1],Ke[2]),Ke.length&&ee.push(Ke)}function Ds(Ae){var ee=[];return ee.size=Ae.size,ee.start=Ae.start,ee.end=Ae.end,ee}function vs(Ae,ee,ue,ye,Te,Be){for(var Ne=0;Ne<Ae.length;Ne++)gs(Ae[Ne],ee,ue,ye,Te,Be,!1)}function ys(Ae,ee,ue,ye){Ae.push(ee),Ae.push(ue),Ae.push(ye)}function bs(Ae,ee,ue,ye,Te,Be){var Ne=(Be-ee)/(ye-ee);return Ae.push(Be),Ae.push(ue+(Te-ue)*Ne),Ae.push(1),Ne}function si(Ae,ee,ue,ye,Te,Be){var Ne=(Be-ue)/(Te-ue);return Ae.push(ee+(ye-ee)*Ne),Ae.push(Be),Ae.push(1),Ne}function pt(Ae,ee){for(var ue=[],ye=0;ye<Ae.length;ye++){var Te,Be=Ae[ye],Ne=Be.type;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")Te=Lt(Be.geometry,ee);else if(Ne==="MultiLineString"||Ne==="Polygon"){Te=[];for(var Ze=0;Ze<Be.geometry.length;Ze++)Te.push(Lt(Be.geometry[Ze],ee))}else if(Ne==="MultiPolygon")for(Te=[],Ze=0;Ze<Be.geometry.length;Ze++){for(var Re=[],Ke=0;Ke<Be.geometry[Ze].length;Ke++)Re.push(Lt(Be.geometry[Ze][Ke],ee));Te.push(Re)}ue.push(Ot(Be.id,Ne,Te,Be.tags))}return ue}function Lt(Ae,ee){var ue=[];ue.size=Ae.size,Ae.start!==void 0&&(ue.start=Ae.start,ue.end=Ae.end);for(var ye=0;ye<Ae.length;ye+=3)ue.push(Ae[ye]+ee,Ae[ye+1],Ae[ye+2]);return ue}function $s(Ae,ee){if(Ae.transformed)return Ae;var ue,ye,Te,Be=1<<Ae.z,Ne=Ae.x,Ze=Ae.y;for(ue=0;ue<Ae.features.length;ue++){var Re=Ae.features[ue],Ke=Re.geometry,vt=Re.type;if(Re.geometry=[],vt===1)for(ye=0;ye<Ke.length;ye+=2)Re.geometry.push(Xr(Ke[ye],Ke[ye+1],ee,Be,Ne,Ze));else for(ye=0;ye<Ke.length;ye++){var ut=[];for(Te=0;Te<Ke[ye].length;Te+=2)ut.push(Xr(Ke[ye][Te],Ke[ye][Te+1],ee,Be,Ne,Ze));Re.geometry.push(ut)}}return Ae.transformed=!0,Ae}function Xr(Ae,ee,ue,ye,Te,Be){return[Math.round(ue*(Ae*ye-Te)),Math.round(ue*(ee*ye-Be))]}function Ki(Ae,ee,ue,ye,Te){for(var Be=ee===Te.maxZoom?0:Te.tolerance/((1<<ee)*Te.extent),Ne={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ue,y:ye,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ze=0;Ze<Ae.length;Ze++){Ne.numFeatures++,Jr(Ne,Ae[Ze],Be,Te);var Re=Ae[Ze].minX,Ke=Ae[Ze].minY,vt=Ae[Ze].maxX,ut=Ae[Ze].maxY;Re<Ne.minX&&(Ne.minX=Re),Ke<Ne.minY&&(Ne.minY=Ke),vt>Ne.maxX&&(Ne.maxX=vt),ut>Ne.maxY&&(Ne.maxY=ut)}return Ne}function Jr(Ae,ee,ue,ye){var Te=ee.geometry,Be=ee.type,Ne=[];if(Be==="Point"||Be==="MultiPoint")for(var Ze=0;Ze<Te.length;Ze+=3)Ne.push(Te[Ze]),Ne.push(Te[Ze+1]),Ae.numPoints++,Ae.numSimplified++;else if(Be==="LineString")Ut(Ne,Te,Ae,ue,!1,!1);else if(Be==="MultiLineString"||Be==="Polygon")for(Ze=0;Ze<Te.length;Ze++)Ut(Ne,Te[Ze],Ae,ue,Be==="Polygon",Ze===0);else if(Be==="MultiPolygon")for(var Re=0;Re<Te.length;Re++){var Ke=Te[Re];for(Ze=0;Ze<Ke.length;Ze++)Ut(Ne,Ke[Ze],Ae,ue,!0,Ze===0)}if(Ne.length){var vt=ee.tags||null;if(Be==="LineString"&&ye.lineMetrics){for(var ut in vt={},ee.tags)vt[ut]=ee.tags[ut];vt.mapbox_clip_start=Te.start/Te.size,vt.mapbox_clip_end=Te.end/Te.size}var ft={geometry:Ne,type:Be==="Polygon"||Be==="MultiPolygon"?3:Be==="LineString"||Be==="MultiLineString"?2:1,tags:vt};ee.id!==null&&(ft.id=ee.id),Ae.features.push(ft)}}function Ut(Ae,ee,ue,ye,Te,Be){var Ne=ye*ye;if(ye>0&&ee.size<(Te?Ne:ye))ue.numPoints+=ee.length/3;else{for(var Ze=[],Re=0;Re<ee.length;Re+=3)(ye===0||ee[Re+2]>Ne)&&(ue.numSimplified++,Ze.push(ee[Re]),Ze.push(ee[Re+1])),ue.numPoints++;Te&&function(Ke,vt){for(var ut=0,ft=0,hn=Ke.length,_n=hn-2;ft<hn;_n=ft,ft+=2)ut+=(Ke[ft]-Ke[_n])*(Ke[ft+1]+Ke[_n+1]);if(ut>0===vt)for(ft=0,hn=Ke.length;ft<hn/2;ft+=2){var En=Ke[ft],Sn=Ke[ft+1];Ke[ft]=Ke[hn-2-ft],Ke[ft+1]=Ke[hn-1-ft],Ke[hn-2-ft]=En,Ke[hn-1-ft]=Sn}}(Ze,Be),Ae.push(Ze)}}function In(Ae,ee){var ue=(ee=this.options=function(Te,Be){for(var Ne in Be)Te[Ne]=Be[Ne];return Te}(Object.create(this.options),ee)).debug;if(ue&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var ye=function(Te,Be){var Ne=[];if(Te.type==="FeatureCollection")for(var Ze=0;Ze<Te.features.length;Ze++)et(Ne,Te.features[Ze],Be,Ze);else et(Ne,Te.type==="Feature"?Te:{geometry:Te},Be);return Ne}(Ae,ee);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ye=function(Te,Be){var Ne=Be.buffer/Be.extent,Ze=Te,Re=wn(Te,1,-1-Ne,Ne,0,-1,2,Be),Ke=wn(Te,1,1-Ne,2+Ne,0,-1,2,Be);return(Re||Ke)&&(Ze=wn(Te,1,-Ne,1+Ne,0,-1,2,Be)||[],Re&&(Ze=pt(Re,1).concat(Ze)),Ke&&(Ze=Ze.concat(pt(Ke,-1)))),Ze}(ye,ee),ye.length&&this.splitTile(ye,0,0,0),ue&&(ye.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tn(Ae,ee,ue){return 32*((1<<Ae)*ue+ee)+Ae}function $r(Ae,ee){return ee?Ae.properties[ee]:Ae.id}function qs(Ae,ee){if(Ae==null)return!0;if(Ae.type==="Feature")return $r(Ae,ee)!=null;if(Ae.type==="FeatureCollection"){const ue=new Set;for(const ye of Ae.features){const Te=$r(ye,ee);if(Te==null||ue.has(Te))return!1;ue.add(Te)}return!0}return!1}function Cn(Ae,ee){const ue=new Map;if(Ae!=null)if(Ae.type==="Feature")ue.set($r(Ae,ee),Ae);else for(const ye of Ae.features)ue.set($r(ye,ee),ye);return ue}In.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},In.prototype.splitTile=function(Ae,ee,ue,ye,Te,Be,Ne){for(var Ze=[Ae,ee,ue,ye],Re=this.options,Ke=Re.debug;Ze.length;){ye=Ze.pop(),ue=Ze.pop(),ee=Ze.pop(),Ae=Ze.pop();var vt=1<<ee,ut=Tn(ee,ue,ye),ft=this.tiles[ut];if(!ft&&(Ke>1&&console.time("creation"),ft=this.tiles[ut]=Ki(Ae,ee,ue,ye,Re),this.tileCoords.push({z:ee,x:ue,y:ye}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,ue,ye,ft.numFeatures,ft.numPoints,ft.numSimplified),console.timeEnd("creation"));var hn="z"+ee;this.stats[hn]=(this.stats[hn]||0)+1,this.total++}if(ft.source=Ae,Te){if(ee===Re.maxZoom||ee===Te)continue;var _n=1<<Te-ee;if(ue!==Math.floor(Be/_n)||ye!==Math.floor(Ne/_n))continue}else if(ee===Re.indexMaxZoom||ft.numPoints<=Re.indexMaxPoints)continue;if(ft.source=null,Ae.length!==0){Ke>1&&console.time("clipping");var En,Sn,Fn,Jn,ir,Ir,Mn=.5*Re.buffer/Re.extent,mr=.5-Mn,Fr=.5+Mn,cs=1+Mn;En=Sn=Fn=Jn=null,ir=wn(Ae,vt,ue-Mn,ue+Fr,0,ft.minX,ft.maxX,Re),Ir=wn(Ae,vt,ue+mr,ue+cs,0,ft.minX,ft.maxX,Re),Ae=null,ir&&(En=wn(ir,vt,ye-Mn,ye+Fr,1,ft.minY,ft.maxY,Re),Sn=wn(ir,vt,ye+mr,ye+cs,1,ft.minY,ft.maxY,Re),ir=null),Ir&&(Fn=wn(Ir,vt,ye-Mn,ye+Fr,1,ft.minY,ft.maxY,Re),Jn=wn(Ir,vt,ye+mr,ye+cs,1,ft.minY,ft.maxY,Re),Ir=null),Ke>1&&console.timeEnd("clipping"),Ze.push(En||[],ee+1,2*ue,2*ye),Ze.push(Sn||[],ee+1,2*ue,2*ye+1),Ze.push(Fn||[],ee+1,2*ue+1,2*ye),Ze.push(Jn||[],ee+1,2*ue+1,2*ye+1)}}},In.prototype.getTile=function(Ae,ee,ue){var ye=this.options,Te=ye.extent,Be=ye.debug;if(Ae<0||Ae>24)return null;var Ne=1<<Ae,Ze=Tn(Ae,ee=(ee%Ne+Ne)%Ne,ue);if(this.tiles[Ze])return $s(this.tiles[Ze],Te);Be>1&&console.log("drilling down to z%d-%d-%d",Ae,ee,ue);for(var Re,Ke=Ae,vt=ee,ut=ue;!Re&&Ke>0;)Ke--,vt=Math.floor(vt/2),ut=Math.floor(ut/2),Re=this.tiles[Tn(Ke,vt,ut)];return Re&&Re.source?(Be>1&&console.log("found parent tile z%d-%d-%d",Ke,vt,ut),Be>1&&console.time("drilling down"),this.splitTile(Re.source,Ke,vt,ut,Ae,ee,ue),Be>1&&console.timeEnd("drilling down"),this.tiles[Ze]?$s(this.tiles[Ze],Te):null):null};class ii extends b{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ee,ue){return a._(this,void 0,void 0,function*(){const ye=ee.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Te=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!Te)return null;const Be=new class{constructor(Ze){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.W,this.length=Ze.length,this._features=Ze}feature(Ze){return new class{constructor(Re){this._feature=Re,this.extent=a.W,this.type=Re.type,this.properties=Re.tags,"id"in Re&&!isNaN(Re.id)&&(this.id=parseInt(Re.id,10))}loadGeometry(){if(this._feature.type===1){const Re=[];for(const Ke of this._feature.geometry)Re.push([new a.P(Ke[0],Ke[1])]);return Re}{const Re=[];for(const Ke of this._feature.geometry){const vt=[];for(const ut of Ke)vt.push(new a.P(ut[0],ut[1]));Re.push(vt)}return Re}}toGeoJSON(Re,Ke,vt){return F.call(this,Re,Ke,vt)}}(this._features[Ze])}}(Te.features);let Ne=Qe(Be);return Ne.byteOffset===0&&Ne.byteLength===Ne.buffer.byteLength||(Ne=new Uint8Array(Ne)),{vectorTile:Be,rawData:Ne.buffer}})}loadData(ee){return a._(this,void 0,void 0,function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const ye=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new a.bs(ee.request);this._pendingRequest=new AbortController;try{let Te=yield this.loadGeoJSON(ee,this._pendingRequest);if(delete this._pendingRequest,typeof Te!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(M(Te,!0),ee.filter){const Ne=a.by(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(Re=>`${Re.key}: ${Re.message}`).join(", "));Te={type:"FeatureCollection",features:Te.features.filter(Re=>Ne.value.evaluate({zoom:0},Re))}}this._geoJSONIndex=ee.cluster?new yn(function({superclusterOptions:Ne,clusterProperties:Ze}){if(!Ze||!Ne)return Ne;const Re={},Ke={},vt={accumulated:null,zoom:0},ut={properties:null},ft=Object.keys(Ze);for(const hn of ft){const[_n,En]=Ze[hn],Sn=a.by(En),Fn=a.by(typeof _n=="string"?[_n,["accumulated"],["get",hn]]:_n);Re[hn]=Sn.value,Ke[hn]=Fn.value}return Ne.map=hn=>{ut.properties=hn;const _n={};for(const En of ft)_n[En]=Re[En].evaluate(vt,ut);return _n},Ne.reduce=(hn,_n)=>{ut.properties=_n;for(const En of ft)vt.accumulated=hn[En],hn[En]=Ke[En].evaluate(vt,ut)},Ne}(ee)).load(Te.features):function(Ne,Ze){return new In(Ne,Ze)}(Te,ee.geojsonVtOptions),this.loaded={};const Be={};if(ye){const Ne=ye.finish();Ne&&(Be.resourceTiming={},Be.resourceTiming[ee.source]=JSON.parse(JSON.stringify(Ne)))}return Be}catch(Te){if(delete this._pendingRequest,a.bz(Te))return{abandoned:!0};throw Te}})}reloadTile(ee){const ue=this.loaded;return ue&&ue[ee.uid]?super.reloadTile(ee):this.loadTile(ee)}loadGeoJSON(ee,ue){return a._(this,void 0,void 0,function*(){const{promoteId:ye}=ee;if(ee.request){const Te=yield a.h(ee.request,ue);return this._dataUpdateable=qs(Te.data,ye)?Cn(Te.data,ye):void 0,Te.data}if(typeof ee.data=="string")try{const Te=JSON.parse(ee.data);return this._dataUpdateable=qs(Te,ye)?Cn(Te,ye):void 0,Te}catch{throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`)}if(!ee.dataDiff)throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ee.source}`);return function(Te,Be,Ne){var Ze,Re,Ke,vt;if(Be.removeAll&&Te.clear(),Be.remove)for(const ut of Be.remove)Te.delete(ut);if(Be.add)for(const ut of Be.add){const ft=$r(ut,Ne);ft!=null&&Te.set(ft,ut)}if(Be.update)for(const ut of Be.update){let ft=Te.get(ut.id);if(ft==null)continue;const hn=!ut.removeAllProperties&&(((Ze=ut.removeProperties)===null||Ze===void 0?void 0:Ze.length)>0||((Re=ut.addOrUpdateProperties)===null||Re===void 0?void 0:Re.length)>0);if((ut.newGeometry||ut.removeAllProperties||hn)&&(ft=Object.assign({},ft),Te.set(ut.id,ft),hn&&(ft.properties=Object.assign({},ft.properties))),ut.newGeometry&&(ft.geometry=ut.newGeometry),ut.removeAllProperties)ft.properties={};else if(((Ke=ut.removeProperties)===null||Ke===void 0?void 0:Ke.length)>0)for(const _n of ut.removeProperties)Object.prototype.hasOwnProperty.call(ft.properties,_n)&&delete ft.properties[_n];if(((vt=ut.addOrUpdateProperties)===null||vt===void 0?void 0:vt.length)>0)for(const{key:_n,value:En}of ut.addOrUpdateProperties)ft.properties[_n]=En}}(this._dataUpdateable,ee.dataDiff,ye),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ee){return a._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}class Or{constructor(ee){this.self=ee,this.actor=new a.C(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ue,ye)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=ye},this.self.addProtocol=a.bf,this.self.removeProtocol=a.bg,this.self.registerRTLTextPlugin=ue=>{if(a.bA.isParsed())throw new Error("RTL text plugin already registered.");a.bA.setMethods(ue)},this.actor.registerMessageHandler("LDT",(ue,ye)=>this._getDEMWorkerSource(ue,ye.source).loadTile(ye)),this.actor.registerMessageHandler("RDT",(ue,ye)=>a._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ue,ye.source).removeTile(ye)})),this.actor.registerMessageHandler("GCEZ",(ue,ye)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,ye.type,ye.source).getClusterExpansionZoom(ye)})),this.actor.registerMessageHandler("GCC",(ue,ye)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,ye.type,ye.source).getClusterChildren(ye)})),this.actor.registerMessageHandler("GCL",(ue,ye)=>a._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,ye.type,ye.source).getClusterLeaves(ye)})),this.actor.registerMessageHandler("LD",(ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).loadData(ye)),this.actor.registerMessageHandler("LT",(ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).loadTile(ye)),this.actor.registerMessageHandler("RT",(ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).reloadTile(ye)),this.actor.registerMessageHandler("AT",(ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).abortTile(ye)),this.actor.registerMessageHandler("RMT",(ue,ye)=>this._getWorkerSource(ue,ye.type,ye.source).removeTile(ye)),this.actor.registerMessageHandler("RS",(ue,ye)=>a._(this,void 0,void 0,function*(){if(!this.workerSources[ue]||!this.workerSources[ue][ye.type]||!this.workerSources[ue][ye.type][ye.source])return;const Te=this.workerSources[ue][ye.type][ye.source];delete this.workerSources[ue][ye.type][ye.source],Te.removeSource!==void 0&&Te.removeSource(ye)})),this.actor.registerMessageHandler("RM",ue=>a._(this,void 0,void 0,function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue]})),this.actor.registerMessageHandler("SR",(ue,ye)=>a._(this,void 0,void 0,function*(){this.referrer=ye})),this.actor.registerMessageHandler("SRPS",(ue,ye)=>this._syncRTLPluginState(ue,ye)),this.actor.registerMessageHandler("IS",(ue,ye)=>a._(this,void 0,void 0,function*(){this.self.importScripts(ye)})),this.actor.registerMessageHandler("SI",(ue,ye)=>this._setImages(ue,ye)),this.actor.registerMessageHandler("UL",(ue,ye)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ue).update(ye.layers,ye.removedIds)})),this.actor.registerMessageHandler("SL",(ue,ye)=>a._(this,void 0,void 0,function*(){this._getLayerIndex(ue).replace(ye)}))}_setImages(ee,ue){return a._(this,void 0,void 0,function*(){this.availableImages[ee]=ue;for(const ye in this.workerSources[ee]){const Te=this.workerSources[ee][ye];for(const Be in Te)Te[Be].availableImages=ue}})}_syncRTLPluginState(ee,ue){return a._(this,void 0,void 0,function*(){if(a.bA.isParsed())return a.bA.getState();if(ue.pluginStatus!=="loading")return a.bA.setState(ue),ue;const ye=ue.pluginURL;if(this.self.importScripts(ye),a.bA.isParsed()){const Te={pluginStatus:"loaded",pluginURL:ye};return a.bA.setState(Te),Te}throw a.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ye}`)})}_getAvailableImages(ee){let ue=this.availableImages[ee];return ue||(ue=[]),ue}_getLayerIndex(ee){let ue=this.layerIndexes[ee];return ue||(ue=this.layerIndexes[ee]=new o),ue}_getWorkerSource(ee,ue,ye){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][ue]||(this.workerSources[ee][ue]={}),!this.workerSources[ee][ue][ye]){const Te={sendAsync:(Be,Ne)=>(Be.targetMapId=ee,this.actor.sendAsync(Be,Ne))};switch(ue){case"vector":this.workerSources[ee][ue][ye]=new b(Te,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][ue][ye]=new ii(Te,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][ue][ye]=new this.externalWorkerSourceTypes[ue](Te,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][ue][ye]}_getDEMWorkerSource(ee,ue){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][ue]||(this.demWorkerSources[ee][ue]=new w),this.demWorkerSources[ee][ue]}}return a.i(self)&&(self.worker=new Or(self)),Or}),r("index",["exports","./shared"],function(a,o){var l="4.1.3";let d,_;const b={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:$=>new Promise((u,p)=>{const g=requestAnimationFrame(u);$.signal.addEventListener("abort",()=>{cancelAnimationFrame(g),p(o.c())})}),getImageData($,u=0){return this.getImageCanvasContext($).getImageData(-u,-u,$.width+2*u,$.height+2*u)},getImageCanvasContext($){const u=window.document.createElement("canvas"),p=u.getContext("2d",{willReadFrequently:!0});if(!p)throw new Error("failed to create canvas 2d context");return u.width=$.width,u.height=$.height,p.drawImage($,0,0,$.width,$.height),p},resolveURL:$=>(d||(d=document.createElement("a")),d.href=$,d.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(_==null&&(_=matchMedia("(prefers-reduced-motion: reduce)")),_.matches)}};class w{static testProp(u){if(!w.docStyle)return u[0];for(let p=0;p<u.length;p++)if(u[p]in w.docStyle)return u[p];return u[0]}static create(u,p,g){const v=window.document.createElement(u);return p!==void 0&&(v.className=p),g&&g.appendChild(v),v}static createNS(u,p){return window.document.createElementNS(u,p)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(u,p){u.style[w.transformProp]=p}static addEventListener(u,p,g,v={}){u.addEventListener(p,g,"passive"in v?v:v.capture)}static removeEventListener(u,p,g,v={}){u.removeEventListener(p,g,"passive"in v?v:v.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static getScale(u){const p=u.getBoundingClientRect();return{x:p.width/u.offsetWidth||1,y:p.height/u.offsetHeight||1,boundingClientRect:p}}static getPoint(u,p,g){const v=p.boundingClientRect;return new o.P((g.clientX-v.left)/p.x-u.clientLeft,(g.clientY-v.top)/p.y-u.clientTop)}static mousePos(u,p){const g=w.getScale(u);return w.getPoint(u,g,p)}static touchPos(u,p){const g=[],v=w.getScale(u);for(let x=0;x<p.length;x++)g.push(w.getPoint(u,v,p[x]));return g}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const E={supported:!1,testSupport:function($){!F&&M&&(q?G($):L=$)}};let L,M,F=!1,q=!1;function G($){const u=$.createTexture();$.bindTexture($.TEXTURE_2D,u);try{if($.texImage2D($.TEXTURE_2D,0,$.RGBA,$.RGBA,$.UNSIGNED_BYTE,M),$.isContextLost())return;E.supported=!0}catch{}$.deleteTexture(u),F=!0}var Q;typeof document<"u"&&(M=document.createElement("img"),M.onload=function(){L&&G(L),L=null,q=!0},M.onerror=function(){F=!0,L=null},M.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function($){let u,p,g,v;$.resetRequestQueue=()=>{u=[],p=0,g=0,v={}},$.addThrottleControl=O=>{const H=g++;return v[H]=O,H},$.removeThrottleControl=O=>{delete v[O],A()},$.getImage=(O,H,X=!0)=>new Promise((J,_e)=>{E.supported&&(O.headers||(O.headers={}),O.headers.accept="image/webp,*/*"),o.e(O,{type:"image"}),u.push({abortController:H,requestParameters:O,supportImageRefresh:X,state:"queued",onError:Ee=>{_e(Ee)},onSuccess:Ee=>{J(Ee)}}),A()});const x=O=>o._(this,void 0,void 0,function*(){O.state="running";const{requestParameters:H,supportImageRefresh:X,onError:J,onSuccess:_e,abortController:Ee}=O,Ie=X===!1&&!o.i(self)&&!o.g(H.url)&&(!H.headers||Object.keys(H.headers).reduce((Oe,Je)=>Oe&&Je==="accept",!0));p++;const Me=Ie?D(H,Ee):o.m(H,Ee);try{const Oe=yield Me;delete O.abortController,O.state="completed",Oe.data instanceof HTMLImageElement||o.b(Oe.data)?_e(Oe):Oe.data&&_e({data:yield(we=Oe.data,typeof createImageBitmap=="function"?o.d(we):o.f(we)),cacheControl:Oe.cacheControl,expires:Oe.expires})}catch(Oe){delete O.abortController,J(Oe)}finally{p--,A()}var we}),A=()=>{const O=(()=>{for(const H of Object.keys(v))if(v[H]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=p;H<O&&u.length>0;H++){const X=u.shift();X.abortController.signal.aborted?H--:x(X)}},D=(O,H)=>new Promise((X,J)=>{const _e=new Image,Ee=O.url,Ie=O.credentials;Ie&&Ie==="include"?_e.crossOrigin="use-credentials":(Ie&&Ie==="same-origin"||!o.s(Ee))&&(_e.crossOrigin="anonymous"),H.signal.addEventListener("abort",()=>{_e.src="",J(o.c())}),_e.fetchPriority="high",_e.onload=()=>{_e.onerror=_e.onload=null,X({data:_e})},_e.onerror=()=>{_e.onerror=_e.onload=null,H.signal.aborted||J(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},_e.src=Ee})}(Q||(Q={})),Q.resetRequestQueue();class ge{constructor(u){this._transformRequestFn=u}transformRequest(u,p){return this._transformRequestFn&&this._transformRequestFn(u,p)||{url:u}}normalizeSpriteURL(u,p,g){const v=function(x){const A=x.match(le);if(!A)throw new Error(`Unable to parse URL "${x}"`);return{protocol:A[1],authority:A[2],path:A[3]||"/",params:A[4]?A[4].split("&"):[]}}(u);return v.path+=`${p}${g}`,function(x){const A=x.params.length?`?${x.params.join("&")}`:"";return`${x.protocol}://${x.authority}${x.path}${A}`}(v)}setTransformRequest(u){this._transformRequestFn=u}}const le=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function re($){var u=new o.A(3);return u[0]=$[0],u[1]=$[1],u[2]=$[2],u}var me,se=function($,u,p){return $[0]=u[0]-p[0],$[1]=u[1]-p[1],$[2]=u[2]-p[2],$};me=new o.A(3),o.A!=Float32Array&&(me[0]=0,me[1]=0,me[2]=0);var Z=function($){var u=$[0],p=$[1];return u*u+p*p};function Y($){const u=[];if(typeof $=="string")u.push({id:"default",url:$});else if($&&$.length>0){const p=[];for(const{id:g,url:v}of $){const x=`${g}${v}`;p.indexOf(x)===-1&&(p.push(x),u.push({id:g,url:v}))}}return u}(function(){var $=new o.A(2);o.A!=Float32Array&&($[0]=0,$[1]=0)})();class ie{constructor(u,p,g,v){this.context=u,this.format=g,this.texture=u.gl.createTexture(),this.update(p,v)}update(u,p,g){const{width:v,height:x}=u,A=!(this.size&&this.size[0]===v&&this.size[1]===x||g),{context:D}=this,{gl:O}=D;if(this.useMipmap=!!(p&&p.useMipmap),O.bindTexture(O.TEXTURE_2D,this.texture),D.pixelStoreUnpackFlipY.set(!1),D.pixelStoreUnpack.set(1),D.pixelStoreUnpackPremultiplyAlpha.set(this.format===O.RGBA&&(!p||p.premultiply!==!1)),A)this.size=[v,x],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||o.b(u)?O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,O.UNSIGNED_BYTE,u):O.texImage2D(O.TEXTURE_2D,0,this.format,v,x,0,this.format,O.UNSIGNED_BYTE,u.data);else{const{x:H,y:X}=g||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||o.b(u)?O.texSubImage2D(O.TEXTURE_2D,0,H,X,O.RGBA,O.UNSIGNED_BYTE,u):O.texSubImage2D(O.TEXTURE_2D,0,H,X,v,x,O.RGBA,O.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&O.generateMipmap(O.TEXTURE_2D)}bind(u,p,g){const{context:v}=this,{gl:x}=v;x.bindTexture(x.TEXTURE_2D,this.texture),g!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=x.LINEAR),u!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,u),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,g||u),this.filter=u),p!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,p),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function be($){const{userImage:u}=$;return!!(u&&u.render&&u.render())&&($.data.replace(new Uint8Array(u.data.buffer)),!0)}class fe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:p,promiseResolve:g}of this.requestors)g(this._getImagesForIds(p));this.requestors=[]}}getImage(u){const p=this.images[u];if(p&&!p.data&&p.spriteData){const g=p.spriteData;p.data=new o.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),p.spriteData=null}return p}addImage(u,p){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,p)&&(this.images[u]=p)}_validate(u,p){let g=!0;const v=p.data||p.spriteData;return this._validateStretch(p.stretchX,v&&v.width)||(this.fire(new o.j(new Error(`Image "${u}" has invalid "stretchX" value`))),g=!1),this._validateStretch(p.stretchY,v&&v.height)||(this.fire(new o.j(new Error(`Image "${u}" has invalid "stretchY" value`))),g=!1),this._validateContent(p.content,p)||(this.fire(new o.j(new Error(`Image "${u}" has invalid "content" value`))),g=!1),g}_validateStretch(u,p){if(!u)return!0;let g=0;for(const v of u){if(v[0]<g||v[1]<v[0]||p<v[1])return!1;g=v[1]}return!0}_validateContent(u,p){if(!u)return!0;if(u.length!==4)return!1;const g=p.spriteData,v=g&&g.width||p.data.width,x=g&&g.height||p.data.height;return!(u[0]<0||v<u[0]||u[1]<0||x<u[1]||u[2]<0||v<u[2]||u[3]<0||x<u[3]||u[2]<u[0]||u[3]<u[1])}updateImage(u,p,g=!0){const v=this.getImage(u);if(g&&(v.data.width!==p.data.width||v.data.height!==p.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=v.version+1,this.images[u]=p,this.updatedImages[u]=!0}removeImage(u){const p=this.images[u];delete this.images[u],delete this.patterns[u],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u){return new Promise((p,g)=>{let v=!0;if(!this.isLoaded())for(const x of u)this.images[x]||(v=!1);this.isLoaded()||v?p(this._getImagesForIds(u)):this.requestors.push({ids:u,promiseResolve:p})})}_getImagesForIds(u){const p={};for(const g of u){let v=this.getImage(g);v||(this.fire(new o.k("styleimagemissing",{id:g})),v=this.getImage(g)),v?p[g]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return p}getPixelSize(){const{width:u,height:p}=this.atlasImage;return{width:u,height:p}}getPattern(u){const p=this.patterns[u],g=this.getImage(u);if(!g)return null;if(p&&p.position.version===g.version)return p.position;if(p)p.position.version=g.version;else{const v={w:g.data.width+2,h:g.data.height+2,x:0,y:0},x=new o.I(v,g);this.patterns[u]={bin:v,position:x}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const p=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ie(u,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const x in this.patterns)u.push(this.patterns[x].bin);const{w:p,h:g}=o.p(u),v=this.atlasImage;v.resize({width:p||1,height:g||1});for(const x in this.patterns){const{bin:A}=this.patterns[x],D=A.x+1,O=A.y+1,H=this.getImage(x).data,X=H.width,J=H.height;o.R.copy(H,v,{x:0,y:0},{x:D,y:O},{width:X,height:J}),o.R.copy(H,v,{x:0,y:J-1},{x:D,y:O-1},{width:X,height:1}),o.R.copy(H,v,{x:0,y:0},{x:D,y:O+J},{width:X,height:1}),o.R.copy(H,v,{x:X-1,y:0},{x:D-1,y:O},{width:1,height:J}),o.R.copy(H,v,{x:0,y:0},{x:D+X,y:O},{width:1,height:J})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const p of u){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const g=this.getImage(p);g||o.w(`Image with ID: "${p}" was not found`),be(g)&&this.updateImage(p,g)}}}const ke=1e20;function je($,u,p,g,v,x,A,D,O){for(let H=u;H<u+g;H++)Se($,p*x+H,x,v,A,D,O);for(let H=p;H<p+v;H++)Se($,H*x+u,1,g,A,D,O)}function Se($,u,p,g,v,x,A){x[0]=0,A[0]=-ke,A[1]=ke,v[0]=$[u];for(let D=1,O=0,H=0;D<g;D++){v[D]=$[u+D*p];const X=D*D;do{const J=x[O];H=(v[D]-v[J]+X-J*J)/(D-J)/2}while(H<=A[O]&&--O>-1);O++,x[O]=D,A[O]=H,A[O+1]=ke}for(let D=0,O=0;D<g;D++){for(;A[O+1]<D;)O++;const H=x[O],X=D-H;$[u+D*p]=v[H]+X*X}}class Qe{constructor(u,p){this.requestManager=u,this.localIdeographFontFamily=p,this.entries={}}setURL(u){this.url=u}getGlyphs(u){return o._(this,void 0,void 0,function*(){const p=[];for(const x in u)for(const A of u[x])p.push(this._getAndCacheGlyphsPromise(x,A));const g=yield Promise.all(p),v={};for(const{stack:x,id:A,glyph:D}of g)v[x]||(v[x]={}),v[x][A]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};return v})}_getAndCacheGlyphsPromise(u,p){return o._(this,void 0,void 0,function*(){let g=this.entries[u];g||(g=this.entries[u]={glyphs:{},requests:{},ranges:{}});let v=g.glyphs[p];if(v!==void 0)return{stack:u,id:p,glyph:v};if(v=this._tinySDF(g,u,p),v)return g.glyphs[p]=v,{stack:u,id:p,glyph:v};const x=Math.floor(p/256);if(256*x>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[x])return{stack:u,id:p,glyph:v};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[x]){const D=Qe.loadGlyphRange(u,x,this.url,this.requestManager);g.requests[x]=D}const A=yield g.requests[x];for(const D in A)this._doesCharSupportLocalGlyph(+D)||(g.glyphs[+D]=A[+D]);return g.ranges[x]=!0,{stack:u,id:p,glyph:A[p]||null}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(o.u["CJK Unified Ideographs"](u)||o.u["Hangul Syllables"](u)||o.u.Hiragana(u)||o.u.Katakana(u))}_tinySDF(u,p,g){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(g))return;let x=u.tinySDF;if(!x){let D="400";/bold/i.test(p)?D="900":/medium/i.test(p)?D="500":/light/i.test(p)&&(D="200"),x=u.tinySDF=new Qe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:D})}const A=x.draw(String.fromCharCode(g));return{id:g,bitmap:new o.o({width:A.width||60,height:A.height||60},A.data),metrics:{width:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:A.glyphAdvance/2||24,isDoubleResolution:!0}}}}Qe.loadGlyphRange=function($,u,p,g){return o._(this,void 0,void 0,function*(){const v=256*u,x=v+255,A=g.transformRequest(p.replace("{fontstack}",$).replace("{range}",`${v}-${x}`),"Glyphs"),D=yield o.l(A,new AbortController);if(!D||!D.data)throw new Error(`Could not load glyph range. range: ${u}, ${v}-${x}`);const O={};for(const H of o.n(D.data))O[H.id]=H;return O})},Qe.TinySDF=class{constructor({fontSize:$=24,buffer:u=3,radius:p=8,cutoff:g=.25,fontFamily:v="sans-serif",fontWeight:x="normal",fontStyle:A="normal"}={}){this.buffer=u,this.cutoff=g,this.radius=p;const D=this.size=$+4*u,O=this._createCanvas(D),H=this.ctx=O.getContext("2d",{willReadFrequently:!0});H.font=`${A} ${x} ${$}px ${v}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas($){const u=document.createElement("canvas");return u.width=u.height=$,u}draw($){const{width:u,actualBoundingBoxAscent:p,actualBoundingBoxDescent:g,actualBoundingBoxLeft:v,actualBoundingBoxRight:x}=this.ctx.measureText($),A=Math.ceil(p),D=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(x-v))),O=Math.min(this.size-this.buffer,A+Math.ceil(g)),H=D+2*this.buffer,X=O+2*this.buffer,J=Math.max(H*X,0),_e=new Uint8ClampedArray(J),Ee={data:_e,width:H,height:X,glyphWidth:D,glyphHeight:O,glyphTop:A,glyphLeft:0,glyphAdvance:u};if(D===0||O===0)return Ee;const{ctx:Ie,buffer:Me,gridInner:we,gridOuter:Oe}=this;Ie.clearRect(Me,Me,D,O),Ie.fillText($,Me,Me+A);const Je=Ie.getImageData(Me,Me,D,O);Oe.fill(ke,0,J),we.fill(0,0,J);for(let De=0;De<O;De++)for(let Ge=0;Ge<D;Ge++){const Ye=Je.data[4*(De*D+Ge)+3]/255;if(Ye===0)continue;const tt=(De+Me)*H+Ge+Me;if(Ye===1)Oe[tt]=0,we[tt]=ke;else{const st=.5-Ye;Oe[tt]=st>0?st*st:0,we[tt]=st<0?st*st:0}}je(Oe,0,0,H,X,H,this.f,this.v,this.z),je(we,Me,Me,D,O,H,this.f,this.v,this.z);for(let De=0;De<J;De++){const Ge=Math.sqrt(Oe[De])-Math.sqrt(we[De]);_e[De]=Math.round(255-255*(Ge/this.radius+this.cutoff))}return Ee}};class Xe{constructor(){this.specification=o.v.light.position}possiblyEvaluate(u,p){return o.y(u.expression.evaluate(p))}interpolate(u,p,g){return{x:o.z.number(u.x,p.x,g),y:o.z.number(u.y,p.y,g),z:o.z.number(u.z,p.z,g)}}}let at;class mt extends o.E{constructor(u){super(),at=at||new o.q({anchor:new o.D(o.v.light.anchor),position:new Xe,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(at),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,p={}){if(!this._validate(o.r,u,p))for(const g in u){const v=u[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),v):this._transitionable.setValue(g,v)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,g){return(!g||g.validate!==!1)&&o.t(this,u.call(o.x,{value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}class Dt{constructor(u,p){this.width=u,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,p){const g=u.join(",")+String(p);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(u,p)),this.dashEntry[g]}getDashRanges(u,p,g){const v=[];let x=u.length%2==1?-u[u.length-1]*g:0,A=u[0]*g,D=!0;v.push({left:x,right:A,isDash:D,zeroLength:u[0]===0});let O=u[0];for(let H=1;H<u.length;H++){D=!D;const X=u[H];x=O*g,O+=X,A=O*g,v.push({left:x,right:A,isDash:D,zeroLength:X===0})}return v}addRoundDash(u,p,g){const v=p/2;for(let x=-g;x<=g;x++){const A=this.width*(this.nextRow+g+x);let D=0,O=u[D];for(let H=0;H<this.width;H++){H/O.right>1&&(O=u[++D]);const X=Math.abs(H-O.left),J=Math.abs(H-O.right),_e=Math.min(X,J);let Ee;const Ie=x/g*(v+1);if(O.isDash){const Me=v-Math.abs(Ie);Ee=Math.sqrt(_e*_e+Me*Me)}else Ee=v-Math.sqrt(_e*_e+Ie*Ie);this.data[A+H]=Math.max(0,Math.min(255,Ee+128))}}}addRegularDash(u){for(let D=u.length-1;D>=0;--D){const O=u[D],H=u[D+1];O.zeroLength?u.splice(D,1):H&&H.isDash===O.isDash&&(H.left=O.left,u.splice(D,1))}const p=u[0],g=u[u.length-1];p.isDash===g.isDash&&(p.left=g.left-this.width,g.right=p.right+this.width);const v=this.width*this.nextRow;let x=0,A=u[x];for(let D=0;D<this.width;D++){D/A.right>1&&(A=u[++x]);const O=Math.abs(D-A.left),H=Math.abs(D-A.right),X=Math.min(O,H);this.data[v+D]=Math.max(0,Math.min(255,(A.isDash?X:-X)+128))}}addDash(u,p){const g=p?7:0,v=2*g+1;if(this.nextRow+v>this.height)return o.w("LineAtlas out of space"),null;let x=0;for(let D=0;D<u.length;D++)x+=u[D];if(x!==0){const D=this.width/x,O=this.getDashRanges(u,this.width,D);p?this.addRoundDash(O,D,g):this.addRegularDash(O)}const A={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:x};return this.nextRow+=v,this.dirty=!0,A}bind(u){const p=u.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}const Ct="maplibre_preloaded_worker_pool";class nn{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<nn.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ct]}numActive(){return Object.keys(this.active).length}}const yn=Math.floor(b.hardwareConcurrency/2);let cn,At;function Tt(){return cn||(cn=new nn),cn}nn.workerCount=o.B(globalThis)?Math.max(Math.min(yn,3),1):1;class dn{constructor(u,p){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let v=0;v<g.length;v++){const x=new o.C(g[v],p);x.name=`Worker ${v}`,this.actors.push(x)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,p){const g=[];for(const v of this.actors)g.push(v.sendAsync({type:u,data:p}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(u=!0){this.actors.forEach(p=>{p.remove()}),this.actors=[],u&&this.workerPool.release(this.id)}registerMessageHandler(u,p){for(const g of this.actors)g.registerMessageHandler(u,p)}}function rt(){return At||(At=new dn(Tt(),o.G),At.registerMessageHandler("GR",($,u,p)=>o.m(u,p))),At}function Kt($,u){const p=o.F();return o.H(p,p,[1,1,0]),o.J(p,p,[.5*$.width,.5*$.height,1]),o.K(p,p,$.calculatePosMatrix(u.toUnwrapped()))}function en($,u,p,g,v,x){const A=function(J,_e,Ee){if(J)for(const Ie of J){const Me=_e[Ie];if(Me&&Me.source===Ee&&Me.type==="fill-extrusion")return!0}else for(const Ie in _e){const Me=_e[Ie];if(Me.source===Ee&&Me.type==="fill-extrusion")return!0}return!1}(v&&v.layers,u,$.id),D=x.maxPitchScaleFactor(),O=$.tilesIn(g,D,A);O.sort(Ot);const H=[];for(const J of O)H.push({wrappedTileID:J.tileID.wrapped().key,queryResults:J.tile.queryRenderedFeatures(u,p,$._state,J.queryGeometry,J.cameraQueryGeometry,J.scale,v,x,D,Kt($.transform,J.tileID))});const X=function(J){const _e={},Ee={};for(const Ie of J){const Me=Ie.queryResults,we=Ie.wrappedTileID,Oe=Ee[we]=Ee[we]||{};for(const Je in Me){const De=Me[Je],Ge=Oe[Je]=Oe[Je]||{},Ye=_e[Je]=_e[Je]||[];for(const tt of De)Ge[tt.featureIndex]||(Ge[tt.featureIndex]=!0,Ye.push(tt))}}return _e}(H);for(const J in X)X[J].forEach(_e=>{const Ee=_e.feature,Ie=$.getFeatureState(Ee.layer["source-layer"],Ee.id);Ee.source=Ee.layer.source,Ee.layer["source-layer"]&&(Ee.sourceLayer=Ee.layer["source-layer"]),Ee.state=Ie});return X}function Ot($,u){const p=$.tileID,g=u.tileID;return p.overscaledZ-g.overscaledZ||p.canonical.y-g.canonical.y||p.wrap-g.wrap||p.canonical.x-g.canonical.x}function Et($,u,p){return o._(this,void 0,void 0,function*(){let g=$;if($.url?g=(yield o.h(u.transformRequest($.url,"Source"),p)).data:yield b.frameAsync(p),!g)return null;const v=o.L(o.e(g,$),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(v.vectorLayerIds=g.vector_layers.map(x=>x.id)),v})}class et{constructor(u,p){u&&(p?this.setSouthWest(u).setNorthEast(p):Array.isArray(u)&&(u.length===4?this.setSouthWest([u[0],u[1]]).setNorthEast([u[2],u[3]]):this.setSouthWest(u[0]).setNorthEast(u[1])))}setNorthEast(u){return this._ne=u instanceof o.M?new o.M(u.lng,u.lat):o.M.convert(u),this}setSouthWest(u){return this._sw=u instanceof o.M?new o.M(u.lng,u.lat):o.M.convert(u),this}extend(u){const p=this._sw,g=this._ne;let v,x;if(u instanceof o.M)v=u,x=u;else{if(!(u instanceof et))return Array.isArray(u)?u.length===4||u.every(Array.isArray)?this.extend(et.convert(u)):this.extend(o.M.convert(u)):u&&("lng"in u||"lon"in u)&&"lat"in u?this.extend(o.M.convert(u)):this;if(v=u._sw,x=u._ne,!v||!x)return this}return p||g?(p.lng=Math.min(v.lng,p.lng),p.lat=Math.min(v.lat,p.lat),g.lng=Math.max(x.lng,g.lng),g.lat=Math.max(x.lat,g.lat)):(this._sw=new o.M(v.lng,v.lat),this._ne=new o.M(x.lng,x.lat)),this}getCenter(){return new o.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.M(this.getWest(),this.getNorth())}getSouthEast(){return new o.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(u){const{lng:p,lat:g}=o.M.convert(u);let v=this._sw.lng<=p&&p<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=p&&p>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&v}static convert(u){return u instanceof et?u:u&&new et(u)}static fromLngLat(u,p=0){const g=360*p/40075017,v=g/Math.cos(Math.PI/180*u.lat);return new et(new o.M(u.lng-v,u.lat-g),new o.M(u.lng+v,u.lat+g))}}class bn{constructor(u,p,g){this.bounds=et.convert(this.validateBounds(u)),this.minzoom=p||0,this.maxzoom=g||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const p=Math.pow(2,u.z),g=Math.floor(o.N(this.bounds.getWest())*p),v=Math.floor(o.O(this.bounds.getNorth())*p),x=Math.ceil(o.N(this.bounds.getEast())*p),A=Math.ceil(o.O(this.bounds.getSouth())*p);return u.x>=g&&u.x<x&&u.y>=v&&u.y<A}}class fn extends o.E{constructor(u,p,g,v){if(super(),this.id=u,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.L(p,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield Et(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u&&(o.e(this,u),u.bounds&&(this.tileBounds=new bn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new o.j(u))}})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.abort(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(u){return o._(this,void 0,void 0,function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,"Tile"),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};g.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(u.actor&&u.state!=="expired"){if(u.state==="loading")return new Promise((x,A)=>{u.reloadPromise={resolve:x,reject:A}})}else u.actor=this.dispatcher.getActor(),v="LT";u.abortController=new AbortController;try{const x=yield u.actor.sendAsync({type:v,data:g},u.abortController);if(delete u.abortController,u.aborted)return;this._afterTileLoadWorkerResponse(u,x)}catch(x){if(delete u.abortController,u.aborted)return;if(x&&x.status!==404)throw x;this._afterTileLoadWorkerResponse(u,null)}})}_afterTileLoadWorkerResponse(u,p){if(p&&p.resourceTiming&&(u.resourceTiming=p.resourceTiming),p&&this.map._refreshExpiredTiles&&u.setExpiryData(p),u.loadVectorData(p,this.map.painter),u.reloadPromise){const g=u.reloadPromise;u.reloadPromise=null,this.loadTile(u).then(g.resolve).catch(g.reject)}}abortTile(u){return o._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.actor&&(yield u.actor.sendAsync({type:"AT",data:{uid:u.uid,type:this.type,source:this.id}}))})}unloadTile(u){return o._(this,void 0,void 0,function*(){u.unloadVectorData(),u.actor&&(yield u.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class He extends o.E{constructor(u,p,g,v){super(),this.id=u,this.dispatcher=g,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},p),o.e(this,o.L(p,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield Et(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(o.e(this,u),u.bounds&&(this.tileBounds=new bn(u.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(u){this._tileJSONRequest=null,this.fire(new o.j(u))}})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(u){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}serialize(){return o.e({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u){return o._(this,void 0,void 0,function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.abortController=new AbortController;try{const g=yield Q.getImage(this.map._requestManager.transformRequest(p,"Tile"),u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&g.cacheControl&&g.expires&&u.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const v=this.map.painter.context,x=v.gl,A=g.data;u.texture=this.map.painter.getTileTexture(A.width),u.texture?u.texture.update(A,{useMipmap:!0}):(u.texture=new ie(v,A,x.RGBA,{useMipmap:!0}),u.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE,x.LINEAR_MIPMAP_NEAREST),v.extTextureFilterAnisotropic&&x.texParameterf(x.TEXTURE_2D,v.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,v.extTextureFilterAnisotropicMax)),u.state="loaded"}}catch(g){if(delete u.abortController,u.aborted)u.state="unloaded";else if(g)throw u.state="errored",g}})}abortTile(u){return o._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController)})}unloadTile(u){return o._(this,void 0,void 0,function*(){u.texture&&this.map.painter.saveTileTexture(u.texture)})}hasTransition(){return!1}}class Un extends He{constructor(u,p,g,v){super(u,p,g,v),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox",this.redFactor=p.redFactor,this.greenFactor=p.greenFactor,this.blueFactor=p.blueFactor,this.baseShift=p.baseShift}loadTile(u){return o._(this,void 0,void 0,function*(){const p=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,"Tile");u.neighboringTiles=this._getNeighboringTiles(u.tileID),u.abortController=new AbortController;try{const v=yield Q.getImage(g,u.abortController,this.map._refreshExpiredTiles);if(delete u.abortController,u.aborted)return void(u.state="unloaded");if(v&&v.data){const x=v.data;this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&u.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const A=o.b(x)&&o.S()?x:yield this.readImageNow(x),D={type:this.type,uid:u.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!u.actor||u.state==="expired"){u.actor=this.dispatcher.getActor();const O=yield u.actor.sendAsync({type:"LDT",data:D});u.dem=O,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded"}}}catch(v){if(delete u.abortController,u.aborted)u.state="unloaded";else if(v)throw u.state="errored",v}})}readImageNow(u){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.U()){const p=u.width+2,g=u.height+2;try{return new o.R({width:p,height:g},yield o.V(u,-1,-1,p,g))}catch{}}return b.getImageData(u,1)})}_getNeighboringTiles(u){const p=u.canonical,g=Math.pow(2,p.z),v=(p.x-1+g)%g,x=p.x===0?u.wrap-1:u.wrap,A=(p.x+1+g)%g,D=p.x+1===g?u.wrap+1:u.wrap,O={};return O[new o.Q(u.overscaledZ,x,p.z,v,p.y).key]={backfilled:!1},O[new o.Q(u.overscaledZ,D,p.z,A,p.y).key]={backfilled:!1},p.y>0&&(O[new o.Q(u.overscaledZ,x,p.z,v,p.y-1).key]={backfilled:!1},O[new o.Q(u.overscaledZ,u.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},O[new o.Q(u.overscaledZ,D,p.z,A,p.y-1).key]={backfilled:!1}),p.y+1<g&&(O[new o.Q(u.overscaledZ,x,p.z,v,p.y+1).key]={backfilled:!1},O[new o.Q(u.overscaledZ,u.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},O[new o.Q(u.overscaledZ,D,p.z,A,p.y+1).key]={backfilled:!1}),O}unloadTile(u){return o._(this,void 0,void 0,function*(){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&(yield u.actor.sendAsync({type:"RDT",data:{type:this.type,uid:u.uid,source:this.id}}))})}}class br extends o.E{constructor(u,p,g,v){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(v),this._data=p.data,this._options=o.e({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const x=o.W/this.tileSize;this.workerOptions=o.e({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*x,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*x,extent:o.W,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:o.W,radius:(p.clusterRadius||50)*x,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData(),this}updateData(u){return this._updateWorkerData(u),this}setClusterOptions(u){return this.workerOptions.cluster=u.cluster,u&&(u.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=u.clusterRadius),u.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=u.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(u){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:u,source:this.id}})}getClusterChildren(u){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:u,source:this.id}})}getClusterLeaves(u,p,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:u,limit:p,offset:g}})}_updateWorkerData(u){return o._(this,void 0,void 0,function*(){const p=o.e({type:this.type},this.workerOptions);u?p.dataDiff=u:typeof this._data=="string"?(p.request=this.map._requestManager.transformRequest(b.resolveURL(this._data),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{const g=yield this.actor.sendAsync({type:"LD",data:p});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let v=null;g.resourceTiming&&g.resourceTiming[this.id]&&(v=g.resourceTiming[this.id].slice(0));const x={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&o.e(x,{resourceTiming:v}),this.fire(new o.k("data",Object.assign(Object.assign({},x),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},x),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(g))}})}loaded(){return this._pendingLoads===0}loadTile(u){return o._(this,void 0,void 0,function*(){const p=u.actor?"RT":"LT";u.actor=this.actor;const g={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.abortController=new AbortController;const v=yield this.actor.sendAsync({type:p,data:g},u.abortController);delete u.abortController,u.unloadVectorData(),u.aborted||u.loadVectorData(v,this.map.painter,p==="RT")})}abortTile(u){return o._(this,void 0,void 0,function*(){u.abortController&&(u.abortController.abort(),delete u.abortController),u.aborted=!0})}unloadTile(u){return o._(this,void 0,void 0,function*(){u.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:u.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var wn=o.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Gn extends o.E{constructor(u,p,g,v){super(),this.id=u,this.dispatcher=g,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=p}load(u){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const p=yield Q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,p&&p.data&&(this.image=p.data,u&&(this.coordinates=u),this._finishLoading())}catch(p){this._request=null,this._loaded=!0,this.fire(new o.j(p))}})}loaded(){return this._loaded}updateImage(u){return u.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=u.url,this.load(u.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(u){this.coordinates=u;const p=u.map(o.Y.fromLngLat);this.tileID=function(v){let x=1/0,A=1/0,D=-1/0,O=-1/0;for(const _e of v)x=Math.min(x,_e.x),A=Math.min(A,_e.y),D=Math.max(D,_e.x),O=Math.max(O,_e.y);const H=Math.max(D-x,O-A),X=Math.max(0,Math.floor(-Math.log(H)/Math.LN2)),J=Math.pow(2,X);return new o.a0(X,Math.floor((x+D)/2*J),Math.floor((A+O)/2*J))}(p),this.minzoom=this.maxzoom=this.tileID.z;const g=p.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new o.Z,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,o.W,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,o.W),this._boundsArray.emplaceBack(g[2].x,g[2].y,o.W,o.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,wn.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ie(u,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let g=!1;for(const v in this.tiles){const x=this.tiles[v];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(u){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={}):u.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class gs extends Gn{constructor(u,p,g,v){super(u,p,g,v),this.roundZoom=!0,this.type="video",this.options=p}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const u=this.options;this.urls=[];for(const p of u.urls)this.urls.push(this.map._requestManager.transformRequest(p,"Source").url);try{const p=yield o.a2(this.urls);if(this._loaded=!0,!p)return;this.video=p,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(p){this.fire(new o.j(p))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const p=this.video.seekable;u<p.start(0)||u>p.end(0)?this.fire(new o.j(new o.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,wn.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new ie(u,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let g=!1;for(const v in this.tiles){const x=this.tiles[v];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,g=!0)}g&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ds extends Gn{constructor(u,p,g,v){super(u,p,g,v),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(A=>typeof A!="number"))||this.fire(new o.j(new o.a1(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.j(new o.a1(`sources.${u}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new o.j(new o.a1(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a1(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.j(new o.a1(`sources.${u}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,g=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,wn.members)),this.boundsSegments||(this.boundsSegments=o.$.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ie(p,this.canvas,g.RGBA,{premultiply:!0});let v=!1;for(const x in this.tiles){const A=this.tiles[x];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,v=!0)}v&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const vs={},ys=$=>{switch($){case"geojson":return br;case"image":return Gn;case"raster":return He;case"raster-dem":return Un;case"vector":return fn;case"video":return gs;case"canvas":return Ds}return vs[$]},bs="RTLPluginLoaded";class si extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=rt()}_syncState(u){return this.status=u,this.dispatcher.broadcast("SRPS",{pluginStatus:u,pluginURL:this.url}).catch(p=>{throw this.status="error",p})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(u){return o._(this,arguments,void 0,function*(p,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=b.resolveURL(p),!this.url)throw new Error(`requested url ${p} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(bs))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let pt=null;function Lt(){return pt||(pt=new si),pt}class $s{constructor(u,p){this.timeAdded=0,this.fadeEndTime=0,this.tileID=u,this.uid=o.a3(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const p=u+this.timeAdded;p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(u,p,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(v,x){const A={};if(!x)return A;for(const D of v){const O=D.layerIds.map(H=>x.getLayer(H)).filter(Boolean);if(O.length!==0){D.layers=O,D.stateDependentLayerIds&&(D.stateDependentLayers=D.stateDependentLayerIds.map(H=>O.filter(X=>X.id===H)[0]));for(const H of O)A[H.id]=D}}return A}(u.buckets,p.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const x=this.buckets[v];if(x instanceof o.a5){if(this.hasSymbolBuckets=!0,!g)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const x=this.buckets[v];if(x instanceof o.a5&&x.hasRTLText){this.hasRTLText=!0,Lt().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const x=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(v).queryRadius(x))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new o.a4}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const g in this.buckets){const v=this.buckets[g];v.uploadPending()&&v.upload(u)}const p=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ie(u,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ie(u,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,p,g,v,x,A,D,O,H,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:x,scale:A,tileSize:this.tileSize,pixelPosMatrix:X,transform:O,params:D,queryPadding:this.queryPadding*H},u,p,g):{}}querySourceFeatures(u,p){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const v=g.loadVTLayers(),x=p&&p.sourceLayer?p.sourceLayer:"",A=v._geojsonTileLayer||v[x];if(!A)return;const D=o.a6(p&&p.filter),{z:O,x:H,y:X}=this.tileID.canonical,J={z:O,x:H,y:X};for(let _e=0;_e<A.length;_e++){const Ee=A.feature(_e);if(D.needGeometry){const we=o.a7(Ee,!0);if(!D.filter(new o.a8(this.tileID.overscaledZ),we,this.tileID.canonical))continue}else if(!D.filter(new o.a8(this.tileID.overscaledZ),Ee))continue;const Ie=g.getId(Ee,x),Me=new o.a9(Ee,O,H,X,Ie);Me.tile=J,u.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const p=this.expirationTime;if(u.cacheControl){const g=o.aa(u.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const g=Date.now();let v=!1;if(this.expirationTime>g)v=!1;else if(p)if(this.expirationTime<p)v=!0;else{const x=this.expirationTime-p;x?this.expirationTime=g+Math.max(x,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!p.style.hasLayer(v))continue;const x=this.buckets[v],A=x.layers[0].sourceLayer||"_geojsonTileLayer",D=g[A],O=u[A];if(!D||!O||Object.keys(O).length===0)continue;x.update(O,D,this.imageAtlas&&this.imageAtlas.patternPositions||{});const H=p&&p.style&&p.style.getLayer(v);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(x)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<b.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=b.now()+u}setDependencies(u,p){const g={};for(const v of p)g[v]=!0;this.dependencies[u]=g}hasDependency(u,p){for(const g of u){const v=this.dependencies[g];if(v){for(const x of p)if(v[x])return!0}}return!1}}class Xr{constructor(u,p){this.max=u,this.onRemove=p,this.reset()}reset(){for(const u in this.data)for(const p of this.data[u])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(u,p,g){const v=u.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const x={value:p,timeout:void 0};if(g!==void 0&&(x.timeout=setTimeout(()=>{this.remove(u,x)},g)),this.data[v].push(x),this.order.push(v),this.order.length>this.max){const A=this._getAndRemoveByKey(this.order[0]);A&&this.onRemove(A)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const p=this.data[u].shift();return p.timeout&&clearTimeout(p.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),p.value}getByKey(u){const p=this.data[u];return p?p[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,p){if(!this.has(u))return this;const g=u.wrapped().key,v=p===void 0?0:this.data[g].indexOf(p),x=this.data[g][v];return this.data[g].splice(v,1),x.timeout&&clearTimeout(x.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(x.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(u){const p=[];for(const g in this.data)for(const v of this.data[g])u(v.value)||p.push(v);for(const g of p)this.remove(g.value.tileID,g)}}class Ki{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,p,g){const v=String(p);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][v]=this.stateChanges[u][v]||{},o.e(this.stateChanges[u][v],g),this.deletedStates[u]===null){this.deletedStates[u]={};for(const x in this.state[u])x!==v&&(this.deletedStates[u][x]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][v]===null){this.deletedStates[u][v]={};for(const x in this.state[u][v])g[x]||(this.deletedStates[u][v][x]=null)}else for(const x in g)this.deletedStates[u]&&this.deletedStates[u][v]&&this.deletedStates[u][v][x]===null&&delete this.deletedStates[u][v][x]}removeFeatureState(u,p,g){if(this.deletedStates[u]===null)return;const v=String(p);if(this.deletedStates[u]=this.deletedStates[u]||{},g&&p!==void 0)this.deletedStates[u][v]!==null&&(this.deletedStates[u][v]=this.deletedStates[u][v]||{},this.deletedStates[u][v][g]=null);else if(p!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][v])for(g in this.deletedStates[u][v]={},this.stateChanges[u][v])this.deletedStates[u][v][g]=null;else this.deletedStates[u][v]=null;else this.deletedStates[u]=null}getState(u,p){const g=String(p),v=o.e({},(this.state[u]||{})[g],(this.stateChanges[u]||{})[g]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const x=this.deletedStates[u][p];if(x===null)return{};for(const A in x)delete v[A]}return v}initializeTileState(u,p){u.setFeatureState(this.state,p)}coalesceChanges(u,p){const g={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const x={};for(const A in this.stateChanges[v])this.state[v][A]||(this.state[v][A]={}),o.e(this.state[v][A],this.stateChanges[v][A]),x[A]=this.state[v][A];g[v]=x}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const x={};if(this.deletedStates[v]===null)for(const A in this.state[v])x[A]={},this.state[v][A]={};else for(const A in this.deletedStates[v]){if(this.deletedStates[v][A]===null)this.state[v][A]={};else for(const D of Object.keys(this.deletedStates[v][A]))delete this.state[v][A][D];x[A]=this.state[v][A]}g[v]=g[v]||{},o.e(g[v],x)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const v in u)u[v].setFeatureState(g,p)}}class Jr extends o.E{constructor(u,p,g){super(),this.id=u,this.dispatcher=g,this.on("data",v=>this._dataHandler(v)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,x,A,D)=>{const O=new(ys(x.type))(v,x,A,D);if(O.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${O.id}`);return O})(u,p,g,this),this._tiles={},this._cache=new Xr(0,v=>this._unloadTile(v)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ki,this._didEmitContent=!1,this._updated=!1}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._maxTileCacheZoomLevels=u?u._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const u in this._tiles){const p=this._tiles[u];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,p,g){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(u),this._tileLoaded(u,p,g)}catch(v){u.state="errored",v.status!==404?this._source.fire(new o.j(v,{tile:u})):this.update(this.transform,this.terrain)}})}_unloadTile(u){this._source.unloadTile&&this._source.unloadTile(u)}_abortTile(u){this._source.abortTile&&this._source.abortTile(u),this._source.fire(new o.k("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const g=this._tiles[p];g.upload(u),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(Ut).map(u=>u.key)}getRenderableIds(u){const p=[];for(const g in this._tiles)this._isIdRenderable(g,u)&&p.push(this._tiles[g]);return u?p.sort((g,v)=>{const x=g.tileID,A=v.tileID,D=new o.P(x.canonical.x,x.canonical.y)._rotate(this.transform.angle),O=new o.P(A.canonical.x,A.canonical.y)._rotate(this.transform.angle);return x.overscaledZ-A.overscaledZ||O.y-D.y||O.x-D.x}).map(g=>g.tileID.key):p.map(g=>g.tileID).sort(Ut).map(g=>g.key)}hasRenderableParent(u){const p=this.findLoadedParent(u,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(u,p){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(p||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,p){return o._(this,void 0,void 0,function*(){const g=this._tiles[u];g&&(g.state!=="loading"&&(g.state=p),yield this._loadTile(g,u,p))})}_tileLoaded(u,p,g){u.timeAdded=b.now(),g==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(p,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const p=this.getRenderableIds();for(let v=0;v<p.length;v++){const x=p[v];if(u.neighboringTiles&&u.neighboringTiles[x]){const A=this.getTileByID(x);g(u,A),g(A,u)}}function g(v,x){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let A=x.tileID.canonical.x-v.tileID.canonical.x;const D=x.tileID.canonical.y-v.tileID.canonical.y,O=Math.pow(2,v.tileID.canonical.z),H=x.tileID.key;A===0&&D===0||Math.abs(D)>1||(Math.abs(A)>1&&(Math.abs(A+O)===1?A+=O:Math.abs(A-O)===1&&(A-=O)),x.dem&&v.dem&&(v.dem.backfillBorder(x.dem,A,D),v.neighboringTiles&&v.neighboringTiles[H]&&(v.neighboringTiles[H].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,p,g,v){for(const x in this._tiles){let A=this._tiles[x];if(v[x]||!A.hasData()||A.tileID.overscaledZ<=p||A.tileID.overscaledZ>g)continue;let D=A.tileID;for(;A&&A.tileID.overscaledZ>p+1;){const H=A.tileID.scaledTo(A.tileID.overscaledZ-1);A=this._tiles[H.key],A&&A.hasData()&&(D=H)}let O=D;for(;O.overscaledZ>p;)if(O=O.scaledTo(O.overscaledZ-1),u[O.key]){v[D.key]=D;break}}}findLoadedParent(u,p){if(u.key in this._loadedParentTiles){const g=this._loadedParentTiles[u.key];return g&&g.tileID.overscaledZ>=p?g:null}for(let g=u.overscaledZ-1;g>=p;g--){const v=u.scaledTo(g),x=this._getLoadedTile(v);if(x)return x}}_getLoadedTile(u){const p=this._tiles[u.key];return p&&p.hasData()?p:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const p=Math.ceil(u.width/this._source.tileSize)+1,g=Math.ceil(u.height/this._source.tileSize)+1,v=Math.floor(p*g*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)}handleWrapJump(u){const p=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,p){const g={};for(const v in this._tiles){const x=this._tiles[v];x.tileID=x.tileID.unwrapTo(x.tileID.wrap+p),g[x.tileID.key]=x}this._tiles=g;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}update(u,p){if(!this._sourceLoaded||this._paused)return;let g;this.transform=u,this.terrain=p,this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(X=>new o.Q(X.canonical.z,X.wrap,X.canonical.z,X.canonical.x,X.canonical.y)):(g=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(g=g.filter(X=>this._source.hasTile(X)))):g=[];const v=u.coveringZoomLevel(this._source),x=Math.max(v-Jr.maxOverzooming,this._source.minzoom),A=Math.max(v+Jr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const X={};for(const J of g)if(J.canonical.z>this._source.minzoom){const _e=J.scaledTo(J.canonical.z-1);X[_e.key]=_e;const Ee=J.scaledTo(Math.max(this._source.minzoom,Math.min(J.canonical.z,5)));X[Ee.key]=Ee}g=g.concat(Object.values(X))}const D=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,D&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const O=this._updateRetainedTiles(g,v);if(In(this._source.type)){const X={},J={},_e=Object.keys(O),Ee=b.now();for(const Ie of _e){const Me=O[Ie],we=this._tiles[Ie];if(!we||we.fadeEndTime!==0&&we.fadeEndTime<=Ee)continue;const Oe=this.findLoadedParent(Me,x);Oe&&(this._addTile(Oe.tileID),X[Oe.tileID.key]=Oe.tileID),J[Ie]=Me}this._retainLoadedChildren(J,v,A,O);for(const Ie in X)O[Ie]||(this._coveredTiles[Ie]=!0,O[Ie]=X[Ie]);if(p){const Ie={},Me={};for(const we of g)this._tiles[we.key].hasData()?Ie[we.key]=we:Me[we.key]=we;for(const we in Me){const Oe=Me[we].children(this._source.maxzoom);this._tiles[Oe[0].key]&&this._tiles[Oe[1].key]&&this._tiles[Oe[2].key]&&this._tiles[Oe[3].key]&&(Ie[Oe[0].key]=O[Oe[0].key]=Oe[0],Ie[Oe[1].key]=O[Oe[1].key]=Oe[1],Ie[Oe[2].key]=O[Oe[2].key]=Oe[2],Ie[Oe[3].key]=O[Oe[3].key]=Oe[3],delete Me[we])}for(const we in Me){const Oe=this.findLoadedParent(Me[we],this._source.minzoom);if(Oe){Ie[Oe.tileID.key]=O[Oe.tileID.key]=Oe.tileID;for(const Je in Ie)Ie[Je].isChildOf(Oe.tileID)&&delete Ie[Je]}}for(const we in this._tiles)Ie[we]||(this._coveredTiles[we]=!0)}}for(const X in O)this._tiles[X].clearFadeHold();const H=o.ab(this._tiles,O);for(const X of H){const J=this._tiles[X];J.hasSymbolBuckets&&!J.holdingForFade()?J.setHoldDuration(this.map._fadeDuration):J.hasSymbolBuckets&&!J.symbolFadeFinished()||this._removeTile(X)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,p){const g={},v={},x=Math.max(p-Jr.maxOverzooming,this._source.minzoom),A=Math.max(p+Jr.maxUnderzooming,this._source.minzoom),D={};for(const O of u){const H=this._addTile(O);g[O.key]=O,H.hasData()||p<this._source.maxzoom&&(D[O.key]=O)}this._retainLoadedChildren(D,p,A,g);for(const O of u){let H=this._tiles[O.key];if(H.hasData())continue;if(p+1>this._source.maxzoom){const J=O.children(this._source.maxzoom)[0],_e=this.getTile(J);if(_e&&_e.hasData()){g[J.key]=J;continue}}else{const J=O.children(this._source.maxzoom);if(g[J[0].key]&&g[J[1].key]&&g[J[2].key]&&g[J[3].key])continue}let X=H.wasRequested();for(let J=O.overscaledZ-1;J>=x;--J){const _e=O.scaledTo(J);if(v[_e.key])break;if(v[_e.key]=!0,H=this.getTile(_e),!H&&X&&(H=this._addTile(_e)),H){const Ee=H.hasData();if((X||Ee)&&(g[_e.key]=_e),X=H.wasRequested(),Ee)break}}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const p=[];let g,v=this._tiles[u].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){g=this._loadedParentTiles[v.key];break}p.push(v.key);const x=v.scaledTo(v.overscaledZ-1);if(g=this._getLoadedTile(x),g)break;v=x}for(const x of p)this._loadedParentTiles[x]=g}}_addTile(u){let p=this._tiles[u.key];if(p)return p;p=this._cache.getAndRemove(u),p&&(this._setTileReloadTimer(u.key,p),p.tileID=u,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,p)));const g=p;return p||(p=new $s(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(p,u.key,p.state)),p.uses++,this._tiles[u.key]=p,g||this._source.fire(new o.k("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(u,p){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const g=p.getExpiryTimeout();g&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},g))}_removeTile(u){const p=this._tiles[u];p&&(p.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}_dataHandler(u){const p=u.sourceDataType;u.dataType==="source"&&p==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&p==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,p,g){const v=[],x=this.transform;if(!x)return v;const A=g?x.getCameraQueryGeometry(u):u,D=u.map(Ie=>x.pointCoordinate(Ie,this.terrain)),O=A.map(Ie=>x.pointCoordinate(Ie,this.terrain)),H=this.getIds();let X=1/0,J=1/0,_e=-1/0,Ee=-1/0;for(const Ie of O)X=Math.min(X,Ie.x),J=Math.min(J,Ie.y),_e=Math.max(_e,Ie.x),Ee=Math.max(Ee,Ie.y);for(let Ie=0;Ie<H.length;Ie++){const Me=this._tiles[H[Ie]];if(Me.holdingForFade())continue;const we=Me.tileID,Oe=Math.pow(2,x.zoom-Me.tileID.overscaledZ),Je=p*Me.queryPadding*o.W/Me.tileSize/Oe,De=[we.getTilePoint(new o.Y(X,J)),we.getTilePoint(new o.Y(_e,Ee))];if(De[0].x-Je<o.W&&De[0].y-Je<o.W&&De[1].x+Je>=0&&De[1].y+Je>=0){const Ge=D.map(tt=>we.getTilePoint(tt)),Ye=O.map(tt=>we.getTilePoint(tt));v.push({tile:Me,tileID:we,queryGeometry:Ge,cameraQueryGeometry:Ye,scale:Oe})}}return v}getVisibleCoordinates(u){const p=this.getRenderableIds(u).map(g=>this._tiles[g].tileID);for(const g of p)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(In(this._source.type)){const u=b.now();for(const p in this._tiles)if(this._tiles[p].fadeEndTime>=u)return!0}return!1}setFeatureState(u,p,g){this._state.updateState(u=u||"_geojsonTileLayer",p,g)}removeFeatureState(u,p,g){this._state.removeFeatureState(u=u||"_geojsonTileLayer",p,g)}getFeatureState(u,p){return this._state.getState(u=u||"_geojsonTileLayer",p)}setDependencies(u,p,g){const v=this._tiles[u];v&&v.setDependencies(p,g)}reloadTilesForDependencies(u,p){for(const g in this._tiles)this._tiles[g].hasDependency(u,p)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(u,p))}}function Ut($,u){const p=Math.abs(2*$.wrap)-+($.wrap<0),g=Math.abs(2*u.wrap)-+(u.wrap<0);return $.overscaledZ-u.overscaledZ||g-p||u.canonical.y-$.canonical.y||u.canonical.x-$.canonical.x}function In($){return $==="raster"||$==="image"||$==="video"}Jr.maxOverzooming=10,Jr.maxUnderzooming=3;class Tn{constructor(u,p){this.reset(u,p)}reset(u,p){this.points=u||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=o.ac(u,0,1);let p=1,g=this._distances[p];const v=u*this.paddedLength+this.padding;for(;g<v&&p<this._distances.length;)g=this._distances[++p];const x=p-1,A=this._distances[x],D=g-A,O=D>0?(v-A)/D:0;return this.points[x].mult(1-O).add(this.points[p].mult(O))}}function $r($,u){let p=!0;return $==="always"||$!=="never"&&u!=="never"||(p=!1),p}class qs{constructor(u,p,g){const v=this.boxCells=[],x=this.circleCells=[];this.xCellCount=Math.ceil(u/g),this.yCellCount=Math.ceil(p/g);for(let A=0;A<this.xCellCount*this.yCellCount;A++)v.push([]),x.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=p,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,p,g,v,x){this._forEachCell(p,g,v,x,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(v),this.bboxes.push(x)}insertCircle(u,p,g,v){this._forEachCell(p-v,g-v,p+v,g+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(p),this.circles.push(g),this.circles.push(v)}_insertBoxCell(u,p,g,v,x,A){this.boxCells[x].push(A)}_insertCircleCell(u,p,g,v,x,A){this.circleCells[x].push(A)}_query(u,p,g,v,x,A,D){if(g<0||u>this.width||v<0||p>this.height)return[];const O=[];if(u<=0&&p<=0&&this.width<=g&&this.height<=v){if(x)return[{key:null,x1:u,y1:p,x2:g,y2:v}];for(let H=0;H<this.boxKeys.length;H++)O.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const X=this.circles[3*H],J=this.circles[3*H+1],_e=this.circles[3*H+2];O.push({key:this.circleKeys[H],x1:X-_e,y1:J-_e,x2:X+_e,y2:J+_e})}}else this._forEachCell(u,p,g,v,this._queryCell,O,{hitTest:x,overlapMode:A,seenUids:{box:{},circle:{}}},D);return O}query(u,p,g,v){return this._query(u,p,g,v,!1,null)}hitTest(u,p,g,v,x,A){return this._query(u,p,g,v,!0,x,A).length>0}hitTestCircle(u,p,g,v,x){const A=u-g,D=u+g,O=p-g,H=p+g;if(D<0||A>this.width||H<0||O>this.height)return!1;const X=[];return this._forEachCell(A,O,D,H,this._queryCellCircle,X,{hitTest:!0,overlapMode:v,circle:{x:u,y:p,radius:g},seenUids:{box:{},circle:{}}},x),X.length>0}_queryCell(u,p,g,v,x,A,D,O){const{seenUids:H,hitTest:X,overlapMode:J}=D,_e=this.boxCells[x];if(_e!==null){const Ie=this.bboxes;for(const Me of _e)if(!H.box[Me]){H.box[Me]=!0;const we=4*Me,Oe=this.boxKeys[Me];if(u<=Ie[we+2]&&p<=Ie[we+3]&&g>=Ie[we+0]&&v>=Ie[we+1]&&(!O||O(Oe))&&(!X||!$r(J,Oe.overlapMode))&&(A.push({key:Oe,x1:Ie[we],y1:Ie[we+1],x2:Ie[we+2],y2:Ie[we+3]}),X))return!0}}const Ee=this.circleCells[x];if(Ee!==null){const Ie=this.circles;for(const Me of Ee)if(!H.circle[Me]){H.circle[Me]=!0;const we=3*Me,Oe=this.circleKeys[Me];if(this._circleAndRectCollide(Ie[we],Ie[we+1],Ie[we+2],u,p,g,v)&&(!O||O(Oe))&&(!X||!$r(J,Oe.overlapMode))){const Je=Ie[we],De=Ie[we+1],Ge=Ie[we+2];if(A.push({key:Oe,x1:Je-Ge,y1:De-Ge,x2:Je+Ge,y2:De+Ge}),X)return!0}}}return!1}_queryCellCircle(u,p,g,v,x,A,D,O){const{circle:H,seenUids:X,overlapMode:J}=D,_e=this.boxCells[x];if(_e!==null){const Ie=this.bboxes;for(const Me of _e)if(!X.box[Me]){X.box[Me]=!0;const we=4*Me,Oe=this.boxKeys[Me];if(this._circleAndRectCollide(H.x,H.y,H.radius,Ie[we+0],Ie[we+1],Ie[we+2],Ie[we+3])&&(!O||O(Oe))&&!$r(J,Oe.overlapMode))return A.push(!0),!0}}const Ee=this.circleCells[x];if(Ee!==null){const Ie=this.circles;for(const Me of Ee)if(!X.circle[Me]){X.circle[Me]=!0;const we=3*Me,Oe=this.circleKeys[Me];if(this._circlesCollide(Ie[we],Ie[we+1],Ie[we+2],H.x,H.y,H.radius)&&(!O||O(Oe))&&!$r(J,Oe.overlapMode))return A.push(!0),!0}}}_forEachCell(u,p,g,v,x,A,D,O){const H=this._convertToXCellCoord(u),X=this._convertToYCellCoord(p),J=this._convertToXCellCoord(g),_e=this._convertToYCellCoord(v);for(let Ee=H;Ee<=J;Ee++)for(let Ie=X;Ie<=_e;Ie++)if(x.call(this,u,p,g,v,this.xCellCount*Ie+Ee,A,D,O))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,p,g,v,x,A){const D=v-u,O=x-p,H=g+A;return H*H>D*D+O*O}_circleAndRectCollide(u,p,g,v,x,A,D){const O=(A-v)/2,H=Math.abs(u-(v+O));if(H>O+g)return!1;const X=(D-x)/2,J=Math.abs(p-(x+X));if(J>X+g)return!1;if(H<=O||J<=X)return!0;const _e=H-O,Ee=J-X;return _e*_e+Ee*Ee<=g*g}}function Cn($,u,p,g,v){const x=o.F();return u?(o.J(x,x,[1/v,1/v,1]),p||o.ad(x,x,g.angle)):o.K(x,g.labelPlaneMatrix,$),x}function ii($,u,p,g,v){if(u){const x=o.ae($);return o.J(x,x,[v,v,1]),p||o.ad(x,x,-g.angle),x}return g.glCoordMatrix}function Or($,u,p){let g;p?(g=[$.x,$.y,p($.x,$.y),1],o.af(g,g,u)):(g=[$.x,$.y,0,1],hn(g,g,u));const v=g[3];return{point:new o.P(g[0]/v,g[1]/v),signedDistanceFromCamera:v}}function Ae($,u){return .5+$/u*.5}function ee($,u){const p=$[0]/$[3],g=$[1]/$[3];return p>=-u[0]&&p<=u[0]&&g>=-u[1]&&g<=u[1]}function ue($,u,p,g,v,x,A,D,O,H){const X=g?$.textSizeData:$.iconSizeData,J=o.ag(X,p.transform.zoom),_e=[256/p.width*2+1,256/p.height*2+1],Ee=g?$.text.dynamicLayoutVertexArray:$.icon.dynamicLayoutVertexArray;Ee.clear();const Ie=$.lineVertexArray,Me=g?$.text.placedSymbolArray:$.icon.placedSymbolArray,we=p.transform.width/p.transform.height;let Oe=!1;for(let Je=0;Je<Me.length;Je++){const De=Me.get(Je);if(De.hidden||De.writingMode===o.ah.vertical&&!Oe){ft(De.numGlyphs,Ee);continue}let Ge;if(Oe=!1,H?(Ge=[De.anchorX,De.anchorY,H(De.anchorX,De.anchorY),1],o.af(Ge,Ge,u)):(Ge=[De.anchorX,De.anchorY,0,1],hn(Ge,Ge,u)),!ee(Ge,_e)){ft(De.numGlyphs,Ee);continue}const Ye=Ae(p.transform.cameraToCenterDistance,Ge[3]),tt=o.ai(X,J,De),st=A?tt/Ye:tt*Ye,St=new o.P(De.anchorX,De.anchorY),yt=Or(St,v,H).point,Rt={projections:{},offsets:{}},Nt=Be(De,st,!1,D,u,v,x,$.glyphOffsetArray,Ie,Ee,yt,St,Rt,we,O,H);Oe=Nt.useVertical,(Nt.notEnoughRoom||Oe||Nt.needsFlipping&&Be(De,st,!0,D,u,v,x,$.glyphOffsetArray,Ie,Ee,yt,St,Rt,we,O,H).notEnoughRoom)&&ft(De.numGlyphs,Ee)}g?$.text.dynamicLayoutVertexBuffer.updateData(Ee):$.icon.dynamicLayoutVertexBuffer.updateData(Ee)}function ye($,u,p,g,v,x,A,D,O,H,X,J,_e){const Ee=D.glyphStartIndex+D.numGlyphs,Ie=D.lineStartIndex,Me=D.lineStartIndex+D.lineLength,we=u.getoffsetX(D.glyphStartIndex),Oe=u.getoffsetX(Ee-1),Je=vt($*we,p,g,v,x,A,D.segment,Ie,Me,O,H,X,J,_e);if(!Je)return null;const De=vt($*Oe,p,g,v,x,A,D.segment,Ie,Me,O,H,X,J,_e);return De?{first:Je,last:De}:null}function Te($,u,p,g){return $===o.ah.horizontal&&Math.abs(p.y-u.y)>Math.abs(p.x-u.x)*g?{useVertical:!0}:($===o.ah.vertical?u.y<p.y:u.x>p.x)?{needsFlipping:!0}:null}function Be($,u,p,g,v,x,A,D,O,H,X,J,_e,Ee,Ie,Me){const we=u/24,Oe=$.lineOffsetX*we,Je=$.lineOffsetY*we;let De;if($.numGlyphs>1){const Ge=$.glyphStartIndex+$.numGlyphs,Ye=$.lineStartIndex,tt=$.lineStartIndex+$.lineLength,st=ye(we,D,Oe,Je,p,X,J,$,O,x,_e,Ie,Me);if(!st)return{notEnoughRoom:!0};const St=Or(st.first.point,A,Me).point,yt=Or(st.last.point,A,Me).point;if(g&&!p){const Rt=Te($.writingMode,St,yt,Ee);if(Rt)return Rt}De=[st.first];for(let Rt=$.glyphStartIndex+1;Rt<Ge-1;Rt++)De.push(vt(we*D.getoffsetX(Rt),Oe,Je,p,X,J,$.segment,Ye,tt,O,x,_e,Ie,Me));De.push(st.last)}else{if(g&&!p){const Ye=Or(J,v,Me).point,tt=$.lineStartIndex+$.segment+1,st=new o.P(O.getx(tt),O.gety(tt)),St=Or(st,v,Me),yt=St.signedDistanceFromCamera>0?St.point:Ne(J,st,Ye,1,v,Me),Rt=Te($.writingMode,Ye,yt,Ee);if(Rt)return Rt}const Ge=vt(we*D.getoffsetX($.glyphStartIndex),Oe,Je,p,X,J,$.segment,$.lineStartIndex,$.lineStartIndex+$.lineLength,O,x,_e,Ie,Me);if(!Ge)return{notEnoughRoom:!0};De=[Ge]}for(const Ge of De)o.aj(H,Ge.point,Ge.angle);return{}}function Ne($,u,p,g,v,x){const A=Or($.add($.sub(u)._unit()),v,x).point,D=p.sub(A);return p.add(D._mult(g/D.mag()))}function Ze($,u){const{projectionCache:p,lineVertexArray:g,labelPlaneMatrix:v,tileAnchorPoint:x,distanceFromAnchor:A,getElevation:D,previousVertex:O,direction:H,absOffsetX:X}=u;if(p.projections[$])return p.projections[$];const J=new o.P(g.getx($),g.gety($)),_e=Or(J,v,D);if(_e.signedDistanceFromCamera>0)return p.projections[$]=_e.point,_e.point;const Ee=$-H;return Ne(A===0?x:new o.P(g.getx(Ee),g.gety(Ee)),J,O,X-A+1,v,D)}function Re($,u,p){return $._unit()._perp()._mult(u*p)}function Ke($,u,p,g,v,x,A,D){const{projectionCache:O,direction:H}=D;if(O.offsets[$])return O.offsets[$];const X=p.add(u);if($+H<g||$+H>=v)return O.offsets[$]=X,X;const J=Ze($+H,D),_e=Re(J.sub(p),A,H),Ee=p.add(_e),Ie=J.add(_e);return O.offsets[$]=o.ak(x,X,Ee,Ie)||X,O.offsets[$]}function vt($,u,p,g,v,x,A,D,O,H,X,J,_e,Ee){const Ie=g?$-u:$+u;let Me=Ie>0?1:-1,we=0;g&&(Me*=-1,we=Math.PI),Me<0&&(we+=Math.PI);let Oe,Je,De=Me>0?D+A:D+A+1,Ge=v,Ye=v,tt=0,st=0;const St=Math.abs(Ie),yt=[];let Rt;for(;tt+st<=St;){if(De+=Me,De<D||De>=O)return null;tt+=st,Ye=Ge,Je=Oe;const Gt={projectionCache:J,lineVertexArray:H,labelPlaneMatrix:X,tileAnchorPoint:x,distanceFromAnchor:tt,getElevation:Ee,previousVertex:Ye,direction:Me,absOffsetX:St};if(Ge=Ze(De,Gt),p===0)yt.push(Ye),Rt=Ge.sub(Ye);else{let vn;const An=Ge.sub(Ye);vn=An.mag()===0?Re(Ze(De+Me,Gt).sub(Ge),p,Me):Re(An,p,Me),Je||(Je=Ye.add(vn)),Oe=Ke(De,vn,Ge,D,O,Je,p,Gt),yt.push(Je),Rt=Oe.sub(Je)}st=Rt.mag()}const Nt=Rt._mult((St-tt)/st)._add(Je||Ye),Pn=we+Math.atan2(Ge.y-Ye.y,Ge.x-Ye.x);return yt.push(Nt),{point:Nt,angle:_e?Pn:0,path:yt}}const ut=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ft($,u){for(let p=0;p<$;p++){const g=u.length;u.resize(g+4),u.float32.set(ut,3*g)}}function hn($,u,p){const g=u[0],v=u[1];return $[0]=p[0]*g+p[4]*v+p[12],$[1]=p[1]*g+p[5]*v+p[13],$[3]=p[3]*g+p[7]*v+p[15],$}const _n=100;class En{constructor(u,p=new qs(u.width+200,u.height+200,25),g=new qs(u.width+200,u.height+200,25)){this.transform=u,this.grid=p,this.ignoredGrid=g,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+_n,this.screenBottomBoundary=u.height+_n,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,p,g,v,x,A){const D=this.projectAndGetPerspectiveRatio(v,u.anchorPointX,u.anchorPointY,A),O=g*D.perspectiveRatio,H=u.x1*O+D.point.x,X=u.y1*O+D.point.y,J=u.x2*O+D.point.x,_e=u.y2*O+D.point.y;return!this.isInsideGrid(H,X,J,_e)||p!=="always"&&this.grid.hitTest(H,X,J,_e,p,x)||D.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[H,X,J,_e],offscreen:this.isOffscreen(H,X,J,_e)}}placeCollisionCircles(u,p,g,v,x,A,D,O,H,X,J,_e,Ee,Ie){const Me=[],we=new o.P(p.anchorX,p.anchorY),Oe=Or(we,A,Ie),Je=Ae(this.transform.cameraToCenterDistance,Oe.signedDistanceFromCamera),De=(X?x/Je:x*Je)/o.ao,Ge=Or(we,D,Ie).point,Ye=ye(De,v,p.lineOffsetX*De,p.lineOffsetY*De,!1,Ge,we,p,g,D,{projections:{},offsets:{}},!1,Ie);let tt=!1,st=!1,St=!0;if(Ye){const yt=.5*_e*Je+Ee,Rt=new o.P(-100,-100),Nt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Pn=new Tn,Gt=Ye.first,vn=Ye.last;let An=[];for(let Dn=Gt.path.length-1;Dn>=1;Dn--)An.push(Gt.path[Dn]);for(let Dn=1;Dn<vn.path.length;Dn++)An.push(vn.path[Dn]);const Nn=2.5*yt;if(O){const Dn=An.map(zn=>Or(zn,O,Ie));An=Dn.some(zn=>zn.signedDistanceFromCamera<=0)?[]:Dn.map(zn=>zn.point)}let $n=[];if(An.length>0){const Dn=An[0].clone(),zn=An[0].clone();for(let vr=1;vr<An.length;vr++)Dn.x=Math.min(Dn.x,An[vr].x),Dn.y=Math.min(Dn.y,An[vr].y),zn.x=Math.max(zn.x,An[vr].x),zn.y=Math.max(zn.y,An[vr].y);$n=Dn.x>=Rt.x&&zn.x<=Nt.x&&Dn.y>=Rt.y&&zn.y<=Nt.y?[An]:zn.x<Rt.x||Dn.x>Nt.x||zn.y<Rt.y||Dn.y>Nt.y?[]:o.al([An],Rt.x,Rt.y,Nt.x,Nt.y)}for(const Dn of $n){Pn.reset(Dn,.25*yt);let zn=0;zn=Pn.length<=.5*yt?1:Math.ceil(Pn.paddedLength/Nn)+1;for(let vr=0;vr<zn;vr++){const Xn=vr/Math.max(zn-1,1),Os=Pn.lerp(Xn),Br=Os.x+_n,ur=Os.y+_n;Me.push(Br,ur,yt,0);const Nr=Br-yt,Fs=ur-yt,fi=Br+yt,Ri=ur+yt;if(St=St&&this.isOffscreen(Nr,Fs,fi,Ri),st=st||this.isInsideGrid(Nr,Fs,fi,Ri),u!=="always"&&this.grid.hitTestCircle(Br,ur,yt,u,J)&&(tt=!0,!H))return{circles:[],offscreen:!1,collisionDetected:tt}}}}return{circles:!H&&tt||!st||Je<this.perspectiveRatioCutoff?[]:Me,offscreen:St,collisionDetected:tt}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let g=1/0,v=1/0,x=-1/0,A=-1/0;for(const X of u){const J=new o.P(X.x+_n,X.y+_n);g=Math.min(g,J.x),v=Math.min(v,J.y),x=Math.max(x,J.x),A=Math.max(A,J.y),p.push(J)}const D=this.grid.query(g,v,x,A).concat(this.ignoredGrid.query(g,v,x,A)),O={},H={};for(const X of D){const J=X.key;if(O[J.bucketInstanceId]===void 0&&(O[J.bucketInstanceId]={}),O[J.bucketInstanceId][J.featureIndex])continue;const _e=[new o.P(X.x1,X.y1),new o.P(X.x2,X.y1),new o.P(X.x2,X.y2),new o.P(X.x1,X.y2)];o.am(p,_e)&&(O[J.bucketInstanceId][J.featureIndex]=!0,H[J.bucketInstanceId]===void 0&&(H[J.bucketInstanceId]=[]),H[J.bucketInstanceId].push(J.featureIndex))}return H}insertCollisionBox(u,p,g,v,x,A){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:x,collisionGroupID:A,overlapMode:p},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,p,g,v,x,A){const D=g?this.ignoredGrid:this.grid,O={bucketInstanceId:v,featureIndex:x,collisionGroupID:A,overlapMode:p};for(let H=0;H<u.length;H+=4)D.insertCircle(O,u[H],u[H+1],u[H+2])}projectAndGetPerspectiveRatio(u,p,g,v){let x;return v?(x=[p,g,v(p,g),1],o.af(x,x,u)):(x=[p,g,0,1],hn(x,x,u)),{point:new o.P((x[0]/x[3]+1)/2*this.transform.width+_n,(-x[1]/x[3]+1)/2*this.transform.height+_n),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}}isOffscreen(u,p,g,v){return g<_n||u>=this.screenRightBoundary||v<_n||p>this.screenBottomBoundary}isInsideGrid(u,p,g,v){return g>=0&&u<this.gridRightBoundary&&v>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const u=o.an([]);return o.H(u,u,[-100,-100,0]),u}}function Sn($,u,p){return u*(o.W/($.tileSize*Math.pow(2,p-$.tileID.overscaledZ)))}class Fn{constructor(u,p,g,v){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?p:-p))):v&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Jn{constructor(u,p,g,v,x){this.text=new Fn(u?u.text:null,p,g,x),this.icon=new Fn(u?u.icon:null,p,v,x)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ir{constructor(u,p,g){this.text=u,this.icon=p,this.skipFade=g}}class Ir{constructor(){this.invProjMatrix=o.F(),this.viewportMatrix=o.F(),this.circles=[]}}class Mn{constructor(u,p,g,v,x){this.bucketInstanceId=u,this.featureIndex=p,this.sourceLayerIndex=g,this.bucketIndex=v,this.tileID=x}}class mr{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const p=++this.maxGroupID;this.collisionGroups[u]={ID:p,predicate:g=>g.collisionGroupID===p}}return this.collisionGroups[u]}}function Fr($,u,p,g,v){const{horizontalAlign:x,verticalAlign:A}=o.at($);return new o.P(-(x-.5)*u+g[0]*v,-(A-.5)*p+g[1]*v)}function cs($,u,p,g,v,x){const{x1:A,x2:D,y1:O,y2:H,anchorPointX:X,anchorPointY:J}=$,_e=new o.P(u,p);return g&&_e._rotate(v?x:-x),{x1:A+_e.x,y1:O+_e.y,x2:D+_e.x,y2:H+_e.y,anchorPointX:X,anchorPointY:J}}class ws{constructor(u,p,g,v,x){this.transform=u.clone(),this.terrain=p,this.collisionIndex=new En(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new mr(v),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,p,g,v){const x=g.getBucket(p),A=g.latestFeatureIndex;if(!x||!A||p.id!==x.layerIds[0])return;const D=g.collisionBoxArray,O=x.layers[0].layout,H=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),X=g.tileSize/o.W,J=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),_e=O.get("text-pitch-alignment")==="map",Ee=O.get("text-rotation-alignment")==="map",Ie=Sn(g,1,this.transform.zoom),Me=Cn(J,_e,Ee,this.transform,Ie);let we=null;if(_e){const Je=ii(J,_e,Ee,this.transform,Ie);we=o.K([],this.transform.labelPlaneMatrix,Je)}this.retainedQueryData[x.bucketInstanceId]=new Mn(x.bucketInstanceId,A,x.sourceLayerIndex,x.index,g.tileID);const Oe={bucket:x,layout:O,posMatrix:J,textLabelPlaneMatrix:Me,labelToScreenMatrix:we,scale:H,textPixelRatio:X,holdingForFade:g.holdingForFade(),collisionBoxArray:D,partiallyEvaluatedTextSize:o.ag(x.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(x.sourceID)};if(v)for(const Je of x.sortKeyRanges){const{sortKey:De,symbolInstanceStart:Ge,symbolInstanceEnd:Ye}=Je;u.push({sortKey:De,symbolInstanceStart:Ge,symbolInstanceEnd:Ye,parameters:Oe})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:x.symbolInstances.length,parameters:Oe})}attemptAnchorPlacement(u,p,g,v,x,A,D,O,H,X,J,_e,Ee,Ie,Me,we){const Oe=o.ap[u.textAnchor],Je=[u.textOffset0,u.textOffset1],De=Fr(Oe,g,v,Je,x),Ge=this.collisionIndex.placeCollisionBox(cs(p,De.x,De.y,A,D,this.transform.angle),J,O,H,X.predicate,we);if((!Me||this.collisionIndex.placeCollisionBox(cs(Me,De.x,De.y,A,D,this.transform.angle),J,O,H,X.predicate,we).box.length!==0)&&Ge.box.length>0){let Ye;if(this.prevPlacement&&this.prevPlacement.variableOffsets[_e.crossTileID]&&this.prevPlacement.placements[_e.crossTileID]&&this.prevPlacement.placements[_e.crossTileID].text&&(Ye=this.prevPlacement.variableOffsets[_e.crossTileID].anchor),_e.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[_e.crossTileID]={textOffset:Je,width:g,height:v,anchor:Oe,textBoxScale:x,prevAnchor:Ye},this.markUsedJustification(Ee,Oe,_e,Ie),Ee.allowVerticalPlacement&&(this.markUsedOrientation(Ee,Ie,_e),this.placedOrientations[_e.crossTileID]=Ie),{shift:De,placedGlyphBoxes:Ge}}}placeLayerBucketPart(u,p,g){const{bucket:v,layout:x,posMatrix:A,textLabelPlaneMatrix:D,labelToScreenMatrix:O,textPixelRatio:H,holdingForFade:X,collisionBoxArray:J,partiallyEvaluatedTextSize:_e,collisionGroup:Ee}=u.parameters,Ie=x.get("text-optional"),Me=x.get("icon-optional"),we=o.aq(x,"text-overlap","text-allow-overlap"),Oe=we==="always",Je=o.aq(x,"icon-overlap","icon-allow-overlap"),De=Je==="always",Ge=x.get("text-rotation-alignment")==="map",Ye=x.get("text-pitch-alignment")==="map",tt=x.get("icon-text-fit")!=="none",st=x.get("symbol-z-order")==="viewport-y",St=Oe&&(De||!v.hasIconData()||Me),yt=De&&(Oe||!v.hasTextData()||Ie);!v.collisionArrays&&J&&v.deserializeCollisionBoxes(J);const Rt=this.retainedQueryData[v.bucketInstanceId].tileID,Nt=this.terrain?(Gt,vn)=>this.terrain.getElevation(Rt,Gt,vn):null,Pn=(Gt,vn)=>{var An,Nn;if(p[Gt.crossTileID])return;if(X)return void(this.placements[Gt.crossTileID]=new ir(!1,!1,!1));let $n=!1,Dn=!1,zn=!0,vr=null,Xn={box:null,offscreen:null},Os={box:null,offscreen:null},Br=null,ur=null,Nr=null,Fs=0,fi=0,Ri=0;vn.textFeatureIndex?Fs=vn.textFeatureIndex:Gt.useRuntimeCollisionCircles&&(Fs=Gt.featureIndex),vn.verticalTextFeatureIndex&&(fi=vn.verticalTextFeatureIndex);const fa=vn.textBox;if(fa){const Pr=Ar=>{let hr=o.ah.horizontal;if(v.allowVerticalPlacement&&!Ar&&this.prevPlacement){const Ws=this.prevPlacement.placedOrientations[Gt.crossTileID];Ws&&(this.placedOrientations[Gt.crossTileID]=Ws,hr=Ws,this.markUsedOrientation(v,hr,Gt))}return hr},fr=(Ar,hr)=>{if(v.allowVerticalPlacement&&Gt.numVerticalGlyphVertices>0&&vn.verticalTextBox){for(const Ws of v.writingModes)if(Ws===o.ah.vertical?(Xn=hr(),Os=Xn):Xn=Ar(),Xn&&Xn.box&&Xn.box.length)break}else Xn=Ar()},ar=Gt.textAnchorOffsetStartIndex,Zs=Gt.textAnchorOffsetEndIndex;if(Zs===ar){const Ar=(hr,Ws)=>{const Mr=this.collisionIndex.placeCollisionBox(hr,we,H,A,Ee.predicate,Nt);return Mr&&Mr.box&&Mr.box.length&&(this.markUsedOrientation(v,Ws,Gt),this.placedOrientations[Gt.crossTileID]=Ws),Mr};fr(()=>Ar(fa,o.ah.horizontal),()=>{const hr=vn.verticalTextBox;return v.allowVerticalPlacement&&Gt.numVerticalGlyphVertices>0&&hr?Ar(hr,o.ah.vertical):{box:null,offscreen:null}}),Pr(Xn&&Xn.box&&Xn.box.length)}else{let Ar=o.ap[(Nn=(An=this.prevPlacement)===null||An===void 0?void 0:An.variableOffsets[Gt.crossTileID])===null||Nn===void 0?void 0:Nn.anchor];const hr=(Mr,wr,_c)=>{const Ku=Mr.x2-Mr.x1,so=Mr.y2-Mr.y1,io=Gt.textBoxScale,hl=tt&&Je==="never"?wr:null;let Fi={box:[],offscreen:!1},gc=we==="never"?1:2,Xu="never";Ar&&gc++;for(let vc=0;vc<gc;vc++){for(let yc=ar;yc<Zs;yc++){const dl=v.textAnchorOffsets.get(yc);if(Ar&&dl.textAnchor!==Ar)continue;const bc=this.attemptAnchorPlacement(dl,Mr,Ku,so,io,Ge,Ye,H,A,Ee,Xu,Gt,v,_c,hl,Nt);if(bc&&(Fi=bc.placedGlyphBoxes,Fi&&Fi.box&&Fi.box.length))return $n=!0,vr=bc.shift,Fi}Ar?Ar=null:Xu=we}return Fi};fr(()=>hr(fa,vn.iconBox,o.ah.horizontal),()=>{const Mr=vn.verticalTextBox;return v.allowVerticalPlacement&&!(Xn&&Xn.box&&Xn.box.length)&&Gt.numVerticalGlyphVertices>0&&Mr?hr(Mr,vn.verticalIconBox,o.ah.vertical):{box:null,offscreen:null}}),Xn&&($n=Xn.box,zn=Xn.offscreen);const Ws=Pr(Xn&&Xn.box);if(!$n&&this.prevPlacement){const Mr=this.prevPlacement.variableOffsets[Gt.crossTileID];Mr&&(this.variableOffsets[Gt.crossTileID]=Mr,this.markUsedJustification(v,Mr.anchor,Gt,Ws))}}}if(Br=Xn,$n=Br&&Br.box&&Br.box.length>0,zn=Br&&Br.offscreen,Gt.useRuntimeCollisionCircles){const Pr=v.text.placedSymbolArray.get(Gt.centerJustifiedTextSymbolIndex),fr=o.ai(v.textSizeData,_e,Pr),ar=x.get("text-padding");ur=this.collisionIndex.placeCollisionCircles(we,Pr,v.lineVertexArray,v.glyphOffsetArray,fr,A,D,O,g,Ye,Ee.predicate,Gt.collisionCircleDiameter,ar,Nt),ur.circles.length&&ur.collisionDetected&&!g&&o.w("Collisions detected, but collision boxes are not shown"),$n=Oe||ur.circles.length>0&&!ur.collisionDetected,zn=zn&&ur.offscreen}if(vn.iconFeatureIndex&&(Ri=vn.iconFeatureIndex),vn.iconBox){const Pr=fr=>{const ar=tt&&vr?cs(fr,vr.x,vr.y,Ge,Ye,this.transform.angle):fr;return this.collisionIndex.placeCollisionBox(ar,Je,H,A,Ee.predicate,Nt)};Os&&Os.box&&Os.box.length&&vn.verticalIconBox?(Nr=Pr(vn.verticalIconBox),Dn=Nr.box.length>0):(Nr=Pr(vn.iconBox),Dn=Nr.box.length>0),zn=zn&&Nr.offscreen}const Oi=Ie||Gt.numHorizontalGlyphVertices===0&&Gt.numVerticalGlyphVertices===0,hi=Me||Gt.numIconVertices===0;if(Oi||hi?hi?Oi||(Dn=Dn&&$n):$n=Dn&&$n:Dn=$n=Dn&&$n,$n&&Br&&Br.box&&this.collisionIndex.insertCollisionBox(Br.box,we,x.get("text-ignore-placement"),v.bucketInstanceId,Os&&Os.box&&fi?fi:Fs,Ee.ID),Dn&&Nr&&this.collisionIndex.insertCollisionBox(Nr.box,Je,x.get("icon-ignore-placement"),v.bucketInstanceId,Ri,Ee.ID),ur&&($n&&this.collisionIndex.insertCollisionCircles(ur.circles,we,x.get("text-ignore-placement"),v.bucketInstanceId,Fs,Ee.ID),g)){const Pr=v.bucketInstanceId;let fr=this.collisionCircleArrays[Pr];fr===void 0&&(fr=this.collisionCircleArrays[Pr]=new Ir);for(let ar=0;ar<ur.circles.length;ar+=4)fr.circles.push(ur.circles[ar+0]),fr.circles.push(ur.circles[ar+1]),fr.circles.push(ur.circles[ar+2]),fr.circles.push(ur.collisionDetected?1:0)}if(Gt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Gt.crossTileID]=new ir($n||St,Dn||yt,zn||v.justReloaded),p[Gt.crossTileID]=!0};if(st){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Gt=v.getSortedSymbolIndexes(this.transform.angle);for(let vn=Gt.length-1;vn>=0;--vn){const An=Gt[vn];Pn(v.symbolInstances.get(An),v.collisionArrays[An])}}else for(let Gt=u.symbolInstanceStart;Gt<u.symbolInstanceEnd;Gt++)Pn(v.symbolInstances.get(Gt),v.collisionArrays[Gt]);if(g&&v.bucketInstanceId in this.collisionCircleArrays){const Gt=this.collisionCircleArrays[v.bucketInstanceId];o.ar(Gt.invProjMatrix,A),Gt.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(u,p,g,v){let x;x=v===o.ah.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.as(p)];const A=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const D of A)D>=0&&(u.text.placedSymbolArray.get(D).crossTileID=x>=0&&D!==x?0:g.crossTileID)}markUsedOrientation(u,p,g){const v=p===o.ah.horizontal||p===o.ah.horizontalOnly?p:0,x=p===o.ah.vertical?p:0,A=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const D of A)u.text.placedSymbolArray.get(D).placedOrientation=v;g.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=x)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let g=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const v=p?p.symbolFadeChange(u):1,x=p?p.opacities:{},A=p?p.variableOffsets:{},D=p?p.placedOrientations:{};for(const O in this.placements){const H=this.placements[O],X=x[O];X?(this.opacities[O]=new Jn(X,v,H.text,H.icon),g=g||H.text!==X.text.placed||H.icon!==X.icon.placed):(this.opacities[O]=new Jn(null,v,H.text,H.icon,H.skipFade),g=g||H.text||H.icon)}for(const O in x){const H=x[O];if(!this.opacities[O]){const X=new Jn(H,v,!1,!1);X.isHidden()||(this.opacities[O]=X,g=g||H.text.placed||H.icon.placed)}}for(const O in A)this.variableOffsets[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.variableOffsets[O]=A[O]);for(const O in D)this.placedOrientations[O]||!this.opacities[O]||this.opacities[O].isHidden()||(this.placedOrientations[O]=D[O]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:u)}updateLayerOpacities(u,p){const g={};for(const v of p){const x=v.getBucket(u);x&&v.latestFeatureIndex&&u.id===x.layerIds[0]&&this.updateBucketOpacities(x,g,v.collisionBoxArray)}}updateBucketOpacities(u,p,g){u.hasTextData()&&(u.text.opacityVertexArray.clear(),u.text.hasVisibleVertices=!1),u.hasIconData()&&(u.icon.opacityVertexArray.clear(),u.icon.hasVisibleVertices=!1),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const v=u.layers[0],x=v.layout,A=new Jn(null,0,!1,!1,!0),D=x.get("text-allow-overlap"),O=x.get("icon-allow-overlap"),H=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),X=x.get("text-rotation-alignment")==="map",J=x.get("text-pitch-alignment")==="map",_e=x.get("icon-text-fit")!=="none",Ee=new Jn(null,0,D&&(O||!u.hasIconData()||x.get("icon-optional")),O&&(D||!u.hasTextData()||x.get("text-optional")),!0);!u.collisionArrays&&g&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(g);const Ie=(Me,we,Oe)=>{for(let Je=0;Je<we/4;Je++)Me.opacityVertexArray.emplaceBack(Oe);Me.hasVisibleVertices=Me.hasVisibleVertices||Oe!==jo};for(let Me=0;Me<u.symbolInstances.length;Me++){const we=u.symbolInstances.get(Me),{numHorizontalGlyphVertices:Oe,numVerticalGlyphVertices:Je,crossTileID:De}=we;let Ge=this.opacities[De];p[De]?Ge=A:Ge||(Ge=Ee,this.opacities[De]=Ge),p[De]=!0;const Ye=we.numIconVertices>0,tt=this.placedOrientations[we.crossTileID],st=tt===o.ah.vertical,St=tt===o.ah.horizontal||tt===o.ah.horizontalOnly;if(Oe>0||Je>0){const yt=xs(Ge.text);Ie(u.text,Oe,st?jo:yt),Ie(u.text,Je,St?jo:yt);const Rt=Ge.text.isHidden();[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach(Gt=>{Gt>=0&&(u.text.placedSymbolArray.get(Gt).hidden=Rt||st?1:0)}),we.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).hidden=Rt||St?1:0);const Nt=this.variableOffsets[we.crossTileID];Nt&&this.markUsedJustification(u,Nt.anchor,we,tt);const Pn=this.placedOrientations[we.crossTileID];Pn&&(this.markUsedJustification(u,"left",we,Pn),this.markUsedOrientation(u,Pn,we))}if(Ye){const yt=xs(Ge.icon),Rt=!(_e&&we.verticalPlacedIconSymbolIndex&&st);we.placedIconSymbolIndex>=0&&(Ie(u.icon,we.numIconVertices,Rt?yt:jo),u.icon.placedSymbolArray.get(we.placedIconSymbolIndex).hidden=Ge.icon.isHidden()),we.verticalPlacedIconSymbolIndex>=0&&(Ie(u.icon,we.numVerticalIconVertices,Rt?jo:yt),u.icon.placedSymbolArray.get(we.verticalPlacedIconSymbolIndex).hidden=Ge.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const yt=u.collisionArrays[Me];if(yt){let Rt=new o.P(0,0);if(yt.textBox||yt.verticalTextBox){let Pn=!0;if(H){const Gt=this.variableOffsets[De];Gt?(Rt=Fr(Gt.anchor,Gt.width,Gt.height,Gt.textOffset,Gt.textBoxScale),X&&Rt._rotate(J?this.transform.angle:-this.transform.angle)):Pn=!1}yt.textBox&&Yr(u.textCollisionBox.collisionVertexArray,Ge.text.placed,!Pn||st,Rt.x,Rt.y),yt.verticalTextBox&&Yr(u.textCollisionBox.collisionVertexArray,Ge.text.placed,!Pn||St,Rt.x,Rt.y)}const Nt=!!(!St&&yt.verticalIconBox);yt.iconBox&&Yr(u.iconCollisionBox.collisionVertexArray,Ge.icon.placed,Nt,_e?Rt.x:0,_e?Rt.y:0),yt.verticalIconBox&&Yr(u.iconCollisionBox.collisionVertexArray,Ge.icon.placed,!Nt,_e?Rt.x:0,_e?Rt.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const Me=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=Me.invProjMatrix,u.placementViewportMatrix=Me.viewportMatrix,u.collisionCircleArray=Me.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,p){const g=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*g>u}setStale(){this.stale=!0}}function Yr($,u,p,g,v){$.emplaceBack(u?1:0,p?1:0,g||0,v||0),$.emplaceBack(u?1:0,p?1:0,g||0,v||0),$.emplaceBack(u?1:0,p?1:0,g||0,v||0),$.emplaceBack(u?1:0,p?1:0,g||0,v||0)}const oi=Math.pow(2,25),hu=Math.pow(2,24),eh=Math.pow(2,17),Wn=Math.pow(2,16),Fl=Math.pow(2,9),Bl=Math.pow(2,8),zs=Math.pow(2,1);function xs($){if($.opacity===0&&!$.placed)return 0;if($.opacity===1&&$.placed)return 4294967295;const u=$.placed?1:0,p=Math.floor(127*$.opacity);return p*oi+u*hu+p*eh+u*Wn+p*Fl+u*Bl+p*zs+u}const jo=0;class Gs{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,p,g,v,x){const A=this._bucketParts;for(;this._currentTileIndex<u.length;)if(p.getBucketParts(A,v,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,x())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort((D,O)=>D.sortKey-O.sortKey));this._currentPartIndex<A.length;)if(p.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,x())return!0;return!1}}class Hs{constructor(u,p,g,v,x,A,D,O){this.placement=new ws(u,p,A,D,O),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(u,p,g){const v=b.now(),x=()=>!this._forceFullPlacement&&b.now()-v>2;for(;this._currentPlacementIndex>=0;){const A=p[u[this._currentPlacementIndex]],D=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=D)&&(!A.maxzoom||A.maxzoom>D)){if(this._inProgressLayer||(this._inProgressLayer=new Gs(A)),this._inProgressLayer.continuePlacement(g[A.source],this.placement,this._showCollisionBoxes,A,x))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const mo=512/o.W/2;class Ta{constructor(u,p,g){this.tileID=u,this.bucketInstanceId=g,this._symbolsByKey={};const v=new Map;for(let x=0;x<p.length;x++){const A=p.get(x),D=A.key,O=v.get(D);O?O.push(A):v.set(D,[A])}for(const[x,A]of v){const D={positions:A.map(O=>({x:Math.floor(O.anchorX*mo),y:Math.floor(O.anchorY*mo)})),crossTileIDs:A.map(O=>O.crossTileID)};if(D.positions.length>128){const O=new o.au(D.positions.length,16,Uint16Array);for(const{x:H,y:X}of D.positions)O.add(H,X);O.finish(),delete D.positions,D.index=O}this._symbolsByKey[x]=D}}getScaledCoordinates(u,p){const{x:g,y:v,z:x}=this.tileID.canonical,{x:A,y:D,z:O}=p.canonical,H=mo/Math.pow(2,O-x),X=(D*o.W+u.anchorY)*H,J=v*o.W*mo;return{x:Math.floor((A*o.W+u.anchorX)*H-g*o.W*mo),y:Math.floor(X-J)}}findMatches(u,p,g){const v=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let x=0;x<u.length;x++){const A=u.get(x);if(A.crossTileID)continue;const D=this._symbolsByKey[A.key];if(!D)continue;const O=this.getScaledCoordinates(A,p);if(D.index){const H=D.index.range(O.x-v,O.y-v,O.x+v,O.y+v).sort();for(const X of H){const J=D.crossTileIDs[X];if(!g[J]){g[J]=!0,A.crossTileID=J;break}}}else if(D.positions)for(let H=0;H<D.positions.length;H++){const X=D.positions[H],J=D.crossTileIDs[H];if(Math.abs(X.x-O.x)<=v&&Math.abs(X.y-O.y)<=v&&!g[J]){g[J]=!0,A.crossTileID=J;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:u})=>u)}}class Er{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const p=Math.round((u-this.lng)/360);if(p!==0)for(const g in this.indexes){const v=this.indexes[g],x={};for(const A in v){const D=v[A];D.tileID=D.tileID.unwrapTo(D.tileID.wrap+p),x[D.tileID.key]=D}this.indexes[g]=x}this.lng=u}addBucket(u,p,g){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let x=0;x<p.symbolInstances.length;x++)p.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const v=this.usedCrossTileIDs[u.overscaledZ];for(const x in this.indexes){const A=this.indexes[x];if(Number(x)>u.overscaledZ)for(const D in A){const O=A[D];O.tileID.isChildOf(u)&&O.findMatches(p.symbolInstances,u,v)}else{const D=A[u.scaledTo(Number(x)).key];D&&D.findMatches(p.symbolInstances,u,v)}}for(let x=0;x<p.symbolInstances.length;x++){const A=p.symbolInstances.get(x);A.crossTileID||(A.crossTileID=g.generate(),v[A.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new Ta(u,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(u,p){for(const g of p.getCrossTileIDsLists())for(const v of g)delete this.usedCrossTileIDs[u][v]}removeStaleBuckets(u){let p=!1;for(const g in this.indexes){const v=this.indexes[g];for(const x in v)u[v[x].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,v[x]),delete v[x],p=!0)}return p}}class Pi{constructor(){this.layerIndexes={},this.crossTileIDs=new Er,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,p,g){let v=this.layerIndexes[u.id];v===void 0&&(v=this.layerIndexes[u.id]=new qo);let x=!1;const A={};v.handleWrapJump(g);for(const D of p){const O=D.getBucket(u);O&&u.id===O.layerIds[0]&&(O.bucketInstanceId||(O.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(D.tileID,O,this.crossTileIDs)&&(x=!0),A[O.bucketInstanceId]=!0)}return v.removeStaleBuckets(A)&&(x=!0),x}pruneUnusedLayers(u){const p={};u.forEach(g=>{p[g]=!0});for(const g in this.layerIndexes)p[g]||delete this.layerIndexes[g]}}const cr=($,u)=>o.t($,u&&u.filter(p=>p.identifier!=="source.canvas")),Ia=o.av();class Ls extends o.E{constructor(u,p={}){super(),this._rtlPluginLoaded=()=>{for(const g in this.sourceCaches){const v=this.sourceCaches[g].getSource().type;v!=="vector"&&v!=="geojson"||this.sourceCaches[g].reload()}},this.map=u,this.dispatcher=new dn(Tt(),u._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,v)=>this.getGlyphs(g,v)),this.dispatcher.registerMessageHandler("GI",(g,v)=>this.getImages(g,v)),this.imageManager=new fe,this.imageManager.setEventedParent(this),this.glyphManager=new Qe(u._requestManager,p.localIdeographFontFamily),this.lineAtlas=new Dt(256,512),this.crossTileSymbolIndex=new Pi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ax()),Lt().on(bs,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const v=this.sourceCaches[g.sourceId];if(!v)return;const x=v.getSource();if(x&&x.vectorLayerIds)for(const A in this._layers){const D=this._layers[A];D.source===x.id&&this._validateLayer(D)}})}loadURL(u,p={},g){this.fire(new o.k("dataloading",{dataType:"style"})),p.validate=typeof p.validate!="boolean"||p.validate;const v=this.map._requestManager.transformRequest(u,"Style");this._loadStyleRequest=new AbortController,o.h(v,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,p,g)}).catch(x=>{this._loadStyleRequest=null,x&&this.fire(new o.j(x))})}loadJSON(u,p={},g){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,p.validate=p.validate!==!1,this._load(u,p,g)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(Ia,{validate:!1})}_load(u,p,g){var v;const x=p.transformStyle?p.transformStyle(g,u):u;if(!p.validate||!cr(this,o.x(x))){this._loaded=!0,this.stylesheet=x;for(const A in x.sources)this.addSource(A,x.sources[A],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new mt(this.stylesheet.light),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){const u=o.ay(this.stylesheet.layers);this.dispatcher.broadcast("SL",u),this._order=u.map(p=>p.id),this._layers={},this._serializedLayers=null;for(const p of u){const g=o.az(p);g.setEventedParent(this,{layer:{id:p.id}}),this._layers[p.id]=g}}_loadSprite(u,p=!1,g=void 0){let v;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(x,A,D,O){return o._(this,void 0,void 0,function*(){const H=Y(x),X=D>1?"@2x":"",J={},_e={};for(const{id:Ee,url:Ie}of H){const Me=A.transformRequest(A.normalizeSpriteURL(Ie,X,".json"),"SpriteJSON");J[Ee]=o.h(Me,O);const we=A.transformRequest(A.normalizeSpriteURL(Ie,X,".png"),"SpriteImage");_e[Ee]=Q.getImage(we,O)}return yield Promise.all([...Object.values(J),...Object.values(_e)]),function(Ee,Ie){return o._(this,void 0,void 0,function*(){const Me={};for(const we in Ee){Me[we]={};const Oe=b.getImageCanvasContext((yield Ie[we]).data),Je=(yield Ee[we]).data;for(const De in Je){const{width:Ge,height:Ye,x:tt,y:st,sdf:St,pixelRatio:yt,stretchX:Rt,stretchY:Nt,content:Pn}=Je[De];Me[we][De]={data:null,pixelRatio:yt,sdf:St,stretchX:Rt,stretchY:Nt,content:Pn,spriteData:{width:Ge,height:Ye,x:tt,y:st,context:Oe}}}}return Me})}(J,_e)})}(u,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(x=>{if(this._spriteRequest=null,x)for(const A in x){this._spritesImagesIds[A]=[];const D=this._spritesImagesIds[A]?this._spritesImagesIds[A].filter(O=>!(O in x)):[];for(const O of D)this.imageManager.removeImage(O),this._changedImages[O]=!0;for(const O in x[A]){const H=A==="default"?O:`${A}:${O}`;this._spritesImagesIds[A].push(H),H in this.imageManager.images?this.imageManager.updateImage(H,x[A][O],!1):this.imageManager.addImage(H,x[A][O]),p&&(this._changedImages[H]=!0)}}}).catch(x=>{this._spriteRequest=null,v=x,this.fire(new o.j(v))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),p&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),g&&g(v)})}_unloadSprite(){for(const u of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(u),this._changedImages[u]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(u){const p=this.sourceCaches[u.source];if(!p)return;const g=u.sourceLayer;if(!g)return;const v=p.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.j(new Error(`Source layer "${g}" does not exist on source "${v.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(u){const p=this._serializedAllLayers();if(!u||u.length===0)return Object.values(p);const g=[];for(const v of u)p[v]&&g.push(p[v]);return g}_serializedAllLayers(){let u=this._serializedLayers;if(u)return u;u=this._serializedLayers={};const p=Object.keys(this._layers);for(const g of p){const v=this._layers[g];v.type!=="custom"&&(u[g]=v.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const p=this._changed;if(p){const v=Object.keys(this._updatedLayers),x=Object.keys(this._removedLayers);(v.length||x.length)&&this._updateWorkerLayers(v,x);for(const A in this._updatedSources){const D=this._updatedSources[A];if(D==="reload")this._reloadSource(A);else{if(D!=="clear")throw new Error(`Invalid action ${D}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const g={};for(const v in this.sourceCaches){const x=this.sourceCaches[v];g[v]=x.used,x.used=!1}for(const v of this._order){const x=this._layers[v];x.recalculate(u,this._availableImages),!x.isHidden(u.zoom)&&x.source&&(this.sourceCaches[x.source].used=!0)}for(const v in g){const x=this.sourceCaches[v];!!g[v]!=!!x.used&&x.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(u),this.z=u.zoom,p&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(u,p){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(u),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(u,p={}){var g;this._checkLoaded();const v=this.serialize();if(u=p.transformStyle?p.transformStyle(v,u):u,((g=p.validate)===null||g===void 0||g)&&cr(this,o.x(u)))return!1;(u=o.aA(u)).layers=o.ay(u.layers);const x=o.aB(v,u),A=this._getOperationsToPerform(x);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const D of A.operations)D();return this.stylesheet=u,this._serializedLayers=null,!0}_getOperationsToPerform(u){const p=[],g=[];for(const v of u)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":p.push(()=>this.addLayer.apply(this,v.args));break;case"removeLayer":p.push(()=>this.removeLayer.apply(this,v.args));break;case"setPaintProperty":p.push(()=>this.setPaintProperty.apply(this,v.args));break;case"setLayoutProperty":p.push(()=>this.setLayoutProperty.apply(this,v.args));break;case"setFilter":p.push(()=>this.setFilter.apply(this,v.args));break;case"addSource":p.push(()=>this.addSource.apply(this,v.args));break;case"removeSource":p.push(()=>this.removeSource.apply(this,v.args));break;case"setLayerZoomRange":p.push(()=>this.setLayerZoomRange.apply(this,v.args));break;case"setLight":p.push(()=>this.setLight.apply(this,v.args));break;case"setGeoJSONSourceData":p.push(()=>this.setGeoJSONSourceData.apply(this,v.args));break;case"setGlyphs":p.push(()=>this.setGlyphs.apply(this,v.args));break;case"setSprite":p.push(()=>this.setSprite.apply(this,v.args));break;case"setTerrain":p.push(()=>this.map.setTerrain.apply(this,v.args));break;case"setTransition":p.push(()=>{});break;default:g.push(v.command)}return{operations:p,unimplemented:g}}addImage(u,p){if(this.getImage(u))return this.fire(new o.j(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,p),this._afterImageUpdated(u)}updateImage(u,p){this.imageManager.updateImage(u,p)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new o.j(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,p,g={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.x.source,`sources.${u}`,p,null,g))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const v=this.sourceCaches[u]=new Jr(u,p,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:u})),v.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===u)return this.fire(new o.j(new Error(`Source "${u}" cannot be removed while layer "${g}" is using it.`)));const p=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],p.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,p){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const g=this.sourceCaches[u].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(p),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,p,g={}){this._checkLoaded();const v=u.id;if(this.getLayer(v))return void this.fire(new o.j(new Error(`Layer "${v}" already exists on this map.`)));let x;if(u.type==="custom"){if(cr(this,o.aC(u)))return;x=o.az(u)}else{if("source"in u&&typeof u.source=="object"&&(this.addSource(v,u.source),u=o.aA(u),u=o.e(u,{source:v})),this._validate(o.x.layer,`layers.${v}`,u,{arrayIndex:-1},g))return;x=o.az(u),this._validateLayer(x),x.setEventedParent(this,{layer:{id:v}})}const A=p?this._order.indexOf(p):this._order.length;if(p&&A===-1)this.fire(new o.j(new Error(`Cannot add layer "${v}" before non-existing layer "${p}".`)));else{if(this._order.splice(A,0,v),this._layerOrderChanged=!0,this._layers[v]=x,this._removedLayers[v]&&x.source&&x.type!=="custom"){const D=this._removedLayers[v];delete this._removedLayers[v],D.type!==x.type?this._updatedSources[x.source]="clear":(this._updatedSources[x.source]="reload",this.sourceCaches[x.source].pause())}this._updateLayer(x),x.onAdd&&x.onAdd(this.map)}}moveLayer(u,p){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new o.j(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===p)return;const g=this._order.indexOf(u);this._order.splice(g,1);const v=p?this._order.indexOf(p):this._order.length;p&&v===-1?this.fire(new o.j(new Error(`Cannot move layer "${u}" before non-existing layer "${p}".`))):(this._order.splice(v,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const p=this._layers[u];if(!p)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${u}".`)));p.setEventedParent(null);const g=this._order.indexOf(u);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=p,delete this._layers[u],this._serializedLayers&&delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],p.onRemove&&p.onRemove(this.map)}getLayer(u){return this._layers[u]}getLayersOrder(){return[...this._order]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,p,g){this._checkLoaded();const v=this.getLayer(u);v?v.minzoom===p&&v.maxzoom===g||(p!=null&&(v.minzoom=p),g!=null&&(v.maxzoom=g),this._updateLayer(v)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,p,g={}){this._checkLoaded();const v=this.getLayer(u);if(v){if(!o.aD(v.filter,p))return p==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(o.x.filter,`layers.${v.id}.filter`,p,null,g)||(v.filter=o.aA(p),this._updateLayer(v)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return o.aA(this.getLayer(u).filter)}setLayoutProperty(u,p,g,v={}){this._checkLoaded();const x=this.getLayer(u);x?o.aD(x.getLayoutProperty(p),g)||(x.setLayoutProperty(p,g,v),this._updateLayer(x)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,p){const g=this.getLayer(u);if(g)return g.getLayoutProperty(p);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,p,g,v={}){this._checkLoaded();const x=this.getLayer(u);x?o.aD(x.getPaintProperty(p),g)||(x.setPaintProperty(p,g,v)&&this._updateLayer(x),this._changed=!0,this._updatedPaintProps[u]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,p){return this.getLayer(u).getPaintProperty(p)}setFeatureState(u,p){this._checkLoaded();const g=u.source,v=u.sourceLayer,x=this.sourceCaches[g];if(x===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));const A=x.getSource().type;A==="geojson"&&v?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||v?(u.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),x.setFeatureState(v,u.id,p)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,p){this._checkLoaded();const g=u.source,v=this.sourceCaches[g];if(v===void 0)return void this.fire(new o.j(new Error(`The source '${g}' does not exist in the map's style.`)));const x=v.getSource().type,A=x==="vector"?u.sourceLayer:void 0;x!=="vector"||A?p&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(A,u.id,p):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const p=u.source,g=u.sourceLayer,v=this.sourceCaches[p];if(v!==void 0)return v.getSource().type!=="vector"||g?(u.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),v.getFeatureState(g,u.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const u=o.aE(this.sourceCaches,x=>x.serialize()),p=this._serializeByIds(this._order),g=this.map.getTerrain()||void 0,v=this.stylesheet;return o.aF({version:v.version,name:v.name,metadata:v.metadata,light:v.light,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,sources:u,layers:p,terrain:g},x=>x!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(u){const p=A=>this._layers[A].type==="fill-extrusion",g={},v=[];for(let A=this._order.length-1;A>=0;A--){const D=this._order[A];if(p(D)){g[D]=A;for(const O of u){const H=O[D];if(H)for(const X of H)v.push(X)}}}v.sort((A,D)=>D.intersectionZ-A.intersectionZ);const x=[];for(let A=this._order.length-1;A>=0;A--){const D=this._order[A];if(p(D))for(let O=v.length-1;O>=0;O--){const H=v[O].feature;if(g[H.layer.id]<A)break;x.push(H),v.pop()}else for(const O of u){const H=O[D];if(H)for(const X of H)x.push(X.feature)}}return x}queryRenderedFeatures(u,p,g){p&&p.filter&&this._validate(o.x.filter,"queryRenderedFeatures.filter",p.filter,null,p);const v={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(const D of p.layers){const O=this._layers[D];if(!O)return this.fire(new o.j(new Error(`The layer '${D}' does not exist in the map's style and cannot be queried for features.`))),[];v[O.source]=!0}}const x=[];p.availableImages=this._availableImages;const A=this._serializedAllLayers();for(const D in this.sourceCaches)p.layers&&!v[D]||x.push(en(this.sourceCaches[D],this._layers,A,u,p,g));return this.placement&&x.push(function(D,O,H,X,J,_e,Ee){const Ie={},Me=_e.queryRenderedSymbols(X),we=[];for(const Oe of Object.keys(Me).map(Number))we.push(Ee[Oe]);we.sort(Ot);for(const Oe of we){const Je=Oe.featureIndex.lookupSymbolFeatures(Me[Oe.bucketInstanceId],O,Oe.bucketIndex,Oe.sourceLayerIndex,J.filter,J.layers,J.availableImages,D);for(const De in Je){const Ge=Ie[De]=Ie[De]||[],Ye=Je[De];Ye.sort((tt,st)=>{const St=Oe.featureSortOrder;if(St){const yt=St.indexOf(tt.featureIndex);return St.indexOf(st.featureIndex)-yt}return st.featureIndex-tt.featureIndex});for(const tt of Ye)Ge.push(tt)}}for(const Oe in Ie)Ie[Oe].forEach(Je=>{const De=Je.feature,Ge=H[D[Oe].source].getFeatureState(De.layer["source-layer"],De.id);De.source=De.layer.source,De.layer["source-layer"]&&(De.sourceLayer=De.layer["source-layer"]),De.state=Ge});return Ie}(this._layers,A,this.sourceCaches,u,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(x)}querySourceFeatures(u,p){p&&p.filter&&this._validate(o.x.filter,"querySourceFeatures.filter",p.filter,null,p);const g=this.sourceCaches[u];return g?function(v,x){const A=v.getRenderableIds().map(H=>v.getTileByID(H)),D=[],O={};for(let H=0;H<A.length;H++){const X=A[H],J=X.tileID.canonical.key;O[J]||(O[J]=!0,X.querySourceFeatures(D,x))}return D}(g,p):[]}getLight(){return this.light.getLight()}setLight(u,p={}){this._checkLoaded();const g=this.light.getLight();let v=!1;for(const A in u)if(!o.aD(u[A],g[A])){v=!0;break}if(!v)return;const x={now:b.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,p),this.light.updateTransitions(x)}_validate(u,p,g,v,x={}){return(!x||x.validate!==!1)&&cr(this,u.call(o.x,o.e({key:p,style:this.serialize(),value:g,styleSpec:o.v},v)))}_remove(u=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Lt().off(bs,this._rtlPluginLoaded);for(const p in this._layers)this._layers[p].setEventedParent(null);for(const p in this.sourceCaches){const g=this.sourceCaches[p];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),u&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(u)}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const p in this.sourceCaches)this.sourceCaches[p].update(u,this.map.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,p,g,v,x=!1){let A=!1,D=!1;const O={};for(const H of this._order){const X=this._layers[H];if(X.type!=="symbol")continue;if(!O[X.source]){const _e=this.sourceCaches[X.source];O[X.source]=_e.getRenderableIds(!0).map(Ee=>_e.getTileByID(Ee)).sort((Ee,Ie)=>Ie.tileID.overscaledZ-Ee.tileID.overscaledZ||(Ee.tileID.isLessThan(Ie.tileID)?-1:1))}const J=this.crossTileSymbolIndex.addLayer(X,O[X.source],u.center.lng);A=A||J}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((x=x||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(b.now(),u.zoom))&&(this.pauseablePlacement=new Hs(u,this.map.terrain,this._order,x,p,g,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,O),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(b.now()),D=!0),A&&this.pauseablePlacement.placement.setStale()),D||A)for(const H of this._order){const X=this._layers[H];X.type==="symbol"&&this.placement.updateLayerOpacities(X,O[X.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(b.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,p){return o._(this,void 0,void 0,function*(){const g=yield this.imageManager.getImages(p.icons);this._updateTilesForChangedImages();const v=this.sourceCaches[p.source];return v&&v.setDependencies(p.tileID.key,p.type,p.icons),g})}getGlyphs(u,p){return o._(this,void 0,void 0,function*(){const g=yield this.glyphManager.getGlyphs(p.stacks),v=this.sourceCaches[p.source];return v&&v.setDependencies(p.tileID.key,p.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(u,p={}){this._checkLoaded(),u&&this._validate(o.x.glyphs,"glyphs",u,null,p)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=u,this.glyphManager.entries={},this.glyphManager.setURL(u))}addSprite(u,p,g={},v){this._checkLoaded();const x=[{id:u,url:p}],A=[...Y(this.stylesheet.sprite),...x];this._validate(o.x.sprite,"sprite",A,null,g)||(this.stylesheet.sprite=A,this._loadSprite(x,!0,v))}removeSprite(u){this._checkLoaded();const p=Y(this.stylesheet.sprite);if(p.find(g=>g.id===u)){if(this._spritesImagesIds[u])for(const g of this._spritesImagesIds[u])this.imageManager.removeImage(g),this._changedImages[g]=!0;p.splice(p.findIndex(g=>g.id===u),1),this.stylesheet.sprite=p.length>0?p:void 0,delete this._spritesImagesIds[u],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${u}" doesn't exists on this map.`)))}getSprite(){return Y(this.stylesheet.sprite)}setSprite(u,p={},g){this._checkLoaded(),u&&this._validate(o.x.sprite,"sprite",u,null,p)||(this.stylesheet.sprite=u,u?this._loadSprite(u,!0,g):(this._unloadSprite(),g&&g(null)))}}var Ea=o.X([{name:"a_pos",type:"Int16",components:2}]),ai="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Go={prelude:Kn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Kn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Kn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Kn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Kn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Kn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Kn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Kn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Kn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Kn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Kn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Kn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Kn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Kn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Kn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Kn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Kn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Kn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Kn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Kn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Kn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Kn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Kn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ai),terrainDepth:Kn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ai),terrainCoords:Kn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ai)};function Kn($,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=u.match(/attribute ([\w]+) ([\w]+)/g),v=$.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=x?x.concat(v):v,D={};return{fragmentSource:$=$.replace(p,(O,H,X,J,_e)=>(D[_e]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${_e}
varying ${X} ${J} ${_e};
#else
uniform ${X} ${J} u_${_e};
#endif
`:`
#ifdef HAS_UNIFORM_u_${_e}
    ${X} ${J} ${_e} = u_${_e};
#endif
`)),vertexSource:u=u.replace(p,(O,H,X,J,_e)=>{const Ee=J==="float"?"vec2":"vec4",Ie=_e.match(/color/)?"color":Ee;return D[_e]?H==="define"?`
#ifndef HAS_UNIFORM_u_${_e}
uniform lowp float u_${_e}_t;
attribute ${X} ${Ee} a_${_e};
varying ${X} ${J} ${_e};
#else
uniform ${X} ${J} u_${_e};
#endif
`:Ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${_e}
    ${_e} = a_${_e};
#else
    ${X} ${J} ${_e} = u_${_e};
#endif
`:`
#ifndef HAS_UNIFORM_u_${_e}
    ${_e} = unpack_mix_${Ie}(a_${_e}, u_${_e}_t);
#else
    ${X} ${J} ${_e} = u_${_e};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${_e}
uniform lowp float u_${_e}_t;
attribute ${X} ${Ee} a_${_e};
#else
uniform ${X} ${J} u_${_e};
#endif
`:Ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${_e}
    ${X} ${J} ${_e} = a_${_e};
#else
    ${X} ${J} ${_e} = u_${_e};
#endif
`:`
#ifndef HAS_UNIFORM_u_${_e}
    ${X} ${J} ${_e} = unpack_mix_${Ie}(a_${_e}, u_${_e}_t);
#else
    ${X} ${J} ${_e} = u_${_e};
#endif
`}),staticAttributes:g,staticUniforms:A}}class Pa{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,p,g,v,x,A,D,O,H){this.context=u;let X=this.boundPaintVertexBuffers.length!==v.length;for(let J=0;!X&&J<v.length;J++)this.boundPaintVertexBuffers[J]!==v[J]&&(X=!0);!this.vao||this.boundProgram!==p||this.boundLayoutVertexBuffer!==g||X||this.boundIndexBuffer!==x||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==D||this.boundDynamicVertexBuffer2!==O||this.boundDynamicVertexBuffer3!==H?this.freshBind(p,g,v,x,A,D,O,H):(u.bindVertexArray.set(this.vao),D&&D.bind(),x&&x.dynamicDraw&&x.bind(),O&&O.bind(),H&&H.bind())}freshBind(u,p,g,v,x,A,D,O){const H=u.numAttributes,X=this.context,J=X.gl;this.vao&&this.destroy(),this.vao=X.createVertexArray(),X.bindVertexArray.set(this.vao),this.boundProgram=u,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=v,this.boundVertexOffset=x,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=D,this.boundDynamicVertexBuffer3=O,p.enableAttributes(J,u);for(const _e of g)_e.enableAttributes(J,u);A&&A.enableAttributes(J,u),D&&D.enableAttributes(J,u),O&&O.enableAttributes(J,u),p.bind(),p.setVertexAttribPointers(J,u,x);for(const _e of g)_e.bind(),_e.setVertexAttribPointers(J,u,x);A&&(A.bind(),A.setVertexAttribPointers(J,u,x)),v&&v.bind(),D&&(D.bind(),D.setVertexAttribPointers(J,u,x)),O&&(O.bind(),O.setVertexAttribPointers(J,u,x)),X.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function _o($){const u=[];for(let p=0;p<$.length;p++){if($[p]===null)continue;const g=$[p].split(" ");u.push(g.pop())}return u}class Ai{constructor(u,p,g,v,x,A){const D=u.gl;this.program=D.createProgram();const O=_o(p.staticAttributes),H=g?g.getBinderAttributes():[],X=O.concat(H),J=Go.prelude.staticUniforms?_o(Go.prelude.staticUniforms):[],_e=p.staticUniforms?_o(p.staticUniforms):[],Ee=g?g.getBinderUniforms():[],Ie=J.concat(_e).concat(Ee),Me=[];for(const tt of Ie)Me.indexOf(tt)<0&&Me.push(tt);const we=g?g.defines():[];x&&we.push("#define OVERDRAW_INSPECTOR;"),A&&we.push("#define TERRAIN3D;");const Oe=we.concat(Go.prelude.fragmentSource,p.fragmentSource).join(`
`),Je=we.concat(Go.prelude.vertexSource,p.vertexSource).join(`
`),De=D.createShader(D.FRAGMENT_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(De,Oe),D.compileShader(De),!D.getShaderParameter(De,D.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${D.getShaderInfoLog(De)}`);D.attachShader(this.program,De);const Ge=D.createShader(D.VERTEX_SHADER);if(D.isContextLost())return void(this.failedToCreate=!0);if(D.shaderSource(Ge,Je),D.compileShader(Ge),!D.getShaderParameter(Ge,D.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${D.getShaderInfoLog(Ge)}`);D.attachShader(this.program,Ge),this.attributes={};const Ye={};this.numAttributes=X.length;for(let tt=0;tt<this.numAttributes;tt++)X[tt]&&(D.bindAttribLocation(this.program,tt,X[tt]),this.attributes[X[tt]]=tt);if(D.linkProgram(this.program),!D.getProgramParameter(this.program,D.LINK_STATUS))throw new Error(`Program failed to link: ${D.getProgramInfoLog(this.program)}`);D.deleteShader(Ge),D.deleteShader(De);for(let tt=0;tt<Me.length;tt++){const st=Me[tt];if(st&&!Ye[st]){const St=D.getUniformLocation(this.program,st);St&&(Ye[st]=St)}}this.fixedUniforms=v(u,Ye),this.terrainUniforms=((tt,st)=>({u_depth:new o.aG(tt,st.u_depth),u_terrain:new o.aG(tt,st.u_terrain),u_terrain_dim:new o.aH(tt,st.u_terrain_dim),u_terrain_matrix:new o.aI(tt,st.u_terrain_matrix),u_terrain_unpack:new o.aJ(tt,st.u_terrain_unpack),u_terrain_exaggeration:new o.aH(tt,st.u_terrain_exaggeration)}))(u,Ye),this.binderUniforms=g?g.getUniforms(u,Ye):[]}draw(u,p,g,v,x,A,D,O,H,X,J,_e,Ee,Ie,Me,we,Oe,Je){const De=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(g),u.setStencilMode(v),u.setColorMode(x),u.setCullFace(A),O){u.activeTexture.set(De.TEXTURE2),De.bindTexture(De.TEXTURE_2D,O.depthTexture),u.activeTexture.set(De.TEXTURE3),De.bindTexture(De.TEXTURE_2D,O.texture);for(const Ye in this.terrainUniforms)this.terrainUniforms[Ye].set(O[Ye])}for(const Ye in this.fixedUniforms)this.fixedUniforms[Ye].set(D[Ye]);Me&&Me.setUniforms(u,this.binderUniforms,Ee,{zoom:Ie});let Ge=0;switch(p){case De.LINES:Ge=2;break;case De.TRIANGLES:Ge=3;break;case De.LINE_STRIP:Ge=1}for(const Ye of _e.get()){const tt=Ye.vaos||(Ye.vaos={});(tt[H]||(tt[H]=new Pa)).bind(u,this,X,Me?Me.getPaintVertexBuffers():[],J,Ye.vertexOffset,we,Oe,Je),De.drawElements(p,Ye.primitiveLength*Ge,De.UNSIGNED_SHORT,Ye.primitiveOffset*Ge*2)}}}function Aa($,u,p){const g=1/Sn(p,1,u.transform.tileZoom),v=Math.pow(2,p.tileID.overscaledZ),x=p.tileSize*Math.pow(2,u.transform.tileZoom)/v,A=x*(p.tileID.canonical.x+p.tileID.wrap*v),D=x*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[g,$.fromScale,$.toScale],u_fade:$.t,u_pixel_coord_upper:[A>>16,D>>16],u_pixel_coord_lower:[65535&A,65535&D]}}const Ho=($,u,p,g)=>{const v=u.style.light,x=v.properties.get("position"),A=[x.x,x.y,x.z],D=function(){var H=new o.A(9);return o.A!=Float32Array&&(H[1]=0,H[2]=0,H[3]=0,H[5]=0,H[6]=0,H[7]=0),H[0]=1,H[4]=1,H[8]=1,H}();v.properties.get("anchor")==="viewport"&&function(H,X){var J=Math.sin(X),_e=Math.cos(X);H[0]=_e,H[1]=J,H[2]=0,H[3]=-J,H[4]=_e,H[5]=0,H[6]=0,H[7]=0,H[8]=1}(D,-u.transform.angle),function(H,X,J){var _e=X[0],Ee=X[1],Ie=X[2];H[0]=_e*J[0]+Ee*J[3]+Ie*J[6],H[1]=_e*J[1]+Ee*J[4]+Ie*J[7],H[2]=_e*J[2]+Ee*J[5]+Ie*J[8]}(A,A,D);const O=v.properties.get("color");return{u_matrix:$,u_lightpos:A,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+p,u_opacity:g}},th=($,u,p,g,v,x,A)=>o.e(Ho($,u,p,g),Aa(x,u,A),{u_height_factor:-Math.pow(2,v.overscaledZ)/A.tileSize/8}),du=$=>({u_matrix:$}),Ma=($,u,p,g)=>o.e(du($),Aa(p,u,g)),nh=($,u)=>({u_matrix:$,u_world:u}),pu=($,u,p,g,v)=>o.e(Ma($,u,p,g),{u_world:v}),rh=($,u,p,g)=>{const v=$.transform;let x,A;if(g.paint.get("circle-pitch-alignment")==="map"){const D=Sn(p,1,v.zoom);x=!0,A=[D,D]}else x=!1,A=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:$.translatePosMatrix(u.posMatrix,p,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+x,u_device_pixel_ratio:$.pixelRatio,u_extrude_scale:A}},mu=($,u,p)=>{const g=Sn(p,1,u.zoom),v=Math.pow(2,u.zoom-p.tileID.overscaledZ),x=p.tileID.overscaleFactor();return{u_matrix:$,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:g,u_extrude_scale:[u.pixelsToGLUnits[0]/(g*v),u.pixelsToGLUnits[1]/(g*v)],u_overscale_factor:x}},_u=($,u,p=1)=>({u_matrix:$,u_color:u,u_overlay:0,u_overlay_scale:p}),Da=$=>({u_matrix:$}),gu=($,u,p,g)=>({u_matrix:$,u_extrude_scale:Sn(u,1,p),u_intensity:g});function vu($,u){const p=Math.pow(2,u.canonical.z),g=u.canonical.y;return[new o.Y(0,g/p).toLngLat().lat,new o.Y(0,(g+1)/p).toLngLat().lat]}const za=($,u,p,g)=>{const v=$.transform;return{u_matrix:Zo($,u,p,g),u_ratio:1/Sn(u,1,v.zoom),u_device_pixel_ratio:$.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},yu=($,u,p,g,v)=>o.e(za($,u,p,v),{u_image:0,u_image_height:g}),Xi=($,u,p,g,v)=>{const x=$.transform,A=Rs(u,x);return{u_matrix:Zo($,u,p,v),u_texsize:u.imageAtlasTexture.size,u_ratio:1/Sn(u,1,x.zoom),u_device_pixel_ratio:$.pixelRatio,u_image:0,u_scale:[A,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},La=($,u,p,g,v,x)=>{const A=$.lineAtlas,D=Rs(u,$.transform),O=p.layout.get("line-cap")==="round",H=A.getDash(g.from,O),X=A.getDash(g.to,O),J=H.width*v.fromScale,_e=X.width*v.toScale;return o.e(za($,u,p,x),{u_patternscale_a:[D/J,-H.height/2],u_patternscale_b:[D/_e,-X.height/2],u_sdfgamma:A.width/(256*Math.min(J,_e)*$.pixelRatio)/2,u_image:0,u_tex_y_a:H.y,u_tex_y_b:X.y,u_mix:v.t})};function Rs($,u){return 1/Sn($,1,u.tileZoom)}function Zo($,u,p,g){return $.translatePosMatrix(g?g.posMatrix:u.tileID.posMatrix,u,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Ra=($,u,p,g,v)=>{return{u_matrix:$,u_tl_parent:u,u_scale_parent:p,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(A=v.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(x=v.paint.get("raster-contrast"),x>0?1/(1-x):1+x),u_spin_weights:Wo(v.paint.get("raster-hue-rotate"))};var x,A};function Wo($){$*=Math.PI/180;const u=Math.sin($),p=Math.cos($);return[(2*p+1)/3,(-Math.sqrt(3)*u-p+1)/3,(Math.sqrt(3)*u-p+1)/3]}const Ko=($,u,p,g,v,x,A,D,O,H)=>{const X=v.transform;return{u_is_size_zoom_constant:+($==="constant"||$==="source"),u_is_size_feature_constant:+($==="constant"||$==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:X.width/X.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:x,u_label_plane_matrix:A,u_coord_matrix:D,u_is_text:+O,u_pitch_with_map:+g,u_texsize:H,u_texture:0}},Xo=($,u,p,g,v,x,A,D,O,H,X)=>{const J=v.transform;return o.e(Ko($,u,p,g,v,x,A,D,O,H),{u_gamma_scale:g?Math.cos(J._pitch)*J.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:+X})},Jo=($,u,p,g,v,x,A,D,O,H)=>o.e(Xo($,u,p,g,v,x,A,D,!0,O,!0),{u_texsize_icon:H,u_texture_icon:1}),sh=($,u,p)=>({u_matrix:$,u_opacity:u,u_color:p}),ih=($,u,p,g,v,x)=>o.e(function(A,D,O,H){const X=O.imageManager.getPattern(A.from.toString()),J=O.imageManager.getPattern(A.to.toString()),{width:_e,height:Ee}=O.imageManager.getPixelSize(),Ie=Math.pow(2,H.tileID.overscaledZ),Me=H.tileSize*Math.pow(2,O.transform.tileZoom)/Ie,we=Me*(H.tileID.canonical.x+H.tileID.wrap*Ie),Oe=Me*H.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:X.tl,u_pattern_br_a:X.br,u_pattern_tl_b:J.tl,u_pattern_br_b:J.br,u_texsize:[_e,Ee],u_mix:D.t,u_pattern_size_a:X.displaySize,u_pattern_size_b:J.displaySize,u_scale_a:D.fromScale,u_scale_b:D.toScale,u_tile_units_to_pixels:1/Sn(H,1,O.transform.tileZoom),u_pixel_coord_upper:[we>>16,Oe>>16],u_pixel_coord_lower:[65535&we,65535&Oe]}}(g,x,p,v),{u_matrix:$,u_opacity:u}),bu={fillExtrusion:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_lightpos:new o.aK($,u.u_lightpos),u_lightintensity:new o.aH($,u.u_lightintensity),u_lightcolor:new o.aK($,u.u_lightcolor),u_vertical_gradient:new o.aH($,u.u_vertical_gradient),u_opacity:new o.aH($,u.u_opacity)}),fillExtrusionPattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_lightpos:new o.aK($,u.u_lightpos),u_lightintensity:new o.aH($,u.u_lightintensity),u_lightcolor:new o.aK($,u.u_lightcolor),u_vertical_gradient:new o.aH($,u.u_vertical_gradient),u_height_factor:new o.aH($,u.u_height_factor),u_image:new o.aG($,u.u_image),u_texsize:new o.aL($,u.u_texsize),u_pixel_coord_upper:new o.aL($,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL($,u.u_pixel_coord_lower),u_scale:new o.aK($,u.u_scale),u_fade:new o.aH($,u.u_fade),u_opacity:new o.aH($,u.u_opacity)}),fill:($,u)=>({u_matrix:new o.aI($,u.u_matrix)}),fillPattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_image:new o.aG($,u.u_image),u_texsize:new o.aL($,u.u_texsize),u_pixel_coord_upper:new o.aL($,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL($,u.u_pixel_coord_lower),u_scale:new o.aK($,u.u_scale),u_fade:new o.aH($,u.u_fade)}),fillOutline:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_world:new o.aL($,u.u_world)}),fillOutlinePattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_world:new o.aL($,u.u_world),u_image:new o.aG($,u.u_image),u_texsize:new o.aL($,u.u_texsize),u_pixel_coord_upper:new o.aL($,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL($,u.u_pixel_coord_lower),u_scale:new o.aK($,u.u_scale),u_fade:new o.aH($,u.u_fade)}),circle:($,u)=>({u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_scale_with_map:new o.aG($,u.u_scale_with_map),u_pitch_with_map:new o.aG($,u.u_pitch_with_map),u_extrude_scale:new o.aL($,u.u_extrude_scale),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_matrix:new o.aI($,u.u_matrix)}),collisionBox:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_pixels_to_tile_units:new o.aH($,u.u_pixels_to_tile_units),u_extrude_scale:new o.aL($,u.u_extrude_scale),u_overscale_factor:new o.aH($,u.u_overscale_factor)}),collisionCircle:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_inv_matrix:new o.aI($,u.u_inv_matrix),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_viewport_size:new o.aL($,u.u_viewport_size)}),debug:($,u)=>({u_color:new o.aM($,u.u_color),u_matrix:new o.aI($,u.u_matrix),u_overlay:new o.aG($,u.u_overlay),u_overlay_scale:new o.aH($,u.u_overlay_scale)}),clippingMask:($,u)=>({u_matrix:new o.aI($,u.u_matrix)}),heatmap:($,u)=>({u_extrude_scale:new o.aH($,u.u_extrude_scale),u_intensity:new o.aH($,u.u_intensity),u_matrix:new o.aI($,u.u_matrix)}),heatmapTexture:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_world:new o.aL($,u.u_world),u_image:new o.aG($,u.u_image),u_color_ramp:new o.aG($,u.u_color_ramp),u_opacity:new o.aH($,u.u_opacity)}),hillshade:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_image:new o.aG($,u.u_image),u_latrange:new o.aL($,u.u_latrange),u_light:new o.aL($,u.u_light),u_shadow:new o.aM($,u.u_shadow),u_highlight:new o.aM($,u.u_highlight),u_accent:new o.aM($,u.u_accent)}),hillshadePrepare:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_image:new o.aG($,u.u_image),u_dimension:new o.aL($,u.u_dimension),u_zoom:new o.aH($,u.u_zoom),u_unpack:new o.aJ($,u.u_unpack)}),line:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_ratio:new o.aH($,u.u_ratio),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_units_to_pixels:new o.aL($,u.u_units_to_pixels)}),lineGradient:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_ratio:new o.aH($,u.u_ratio),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_units_to_pixels:new o.aL($,u.u_units_to_pixels),u_image:new o.aG($,u.u_image),u_image_height:new o.aH($,u.u_image_height)}),linePattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_texsize:new o.aL($,u.u_texsize),u_ratio:new o.aH($,u.u_ratio),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_image:new o.aG($,u.u_image),u_units_to_pixels:new o.aL($,u.u_units_to_pixels),u_scale:new o.aK($,u.u_scale),u_fade:new o.aH($,u.u_fade)}),lineSDF:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_ratio:new o.aH($,u.u_ratio),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_units_to_pixels:new o.aL($,u.u_units_to_pixels),u_patternscale_a:new o.aL($,u.u_patternscale_a),u_patternscale_b:new o.aL($,u.u_patternscale_b),u_sdfgamma:new o.aH($,u.u_sdfgamma),u_image:new o.aG($,u.u_image),u_tex_y_a:new o.aH($,u.u_tex_y_a),u_tex_y_b:new o.aH($,u.u_tex_y_b),u_mix:new o.aH($,u.u_mix)}),raster:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_tl_parent:new o.aL($,u.u_tl_parent),u_scale_parent:new o.aH($,u.u_scale_parent),u_buffer_scale:new o.aH($,u.u_buffer_scale),u_fade_t:new o.aH($,u.u_fade_t),u_opacity:new o.aH($,u.u_opacity),u_image0:new o.aG($,u.u_image0),u_image1:new o.aG($,u.u_image1),u_brightness_low:new o.aH($,u.u_brightness_low),u_brightness_high:new o.aH($,u.u_brightness_high),u_saturation_factor:new o.aH($,u.u_saturation_factor),u_contrast_factor:new o.aH($,u.u_contrast_factor),u_spin_weights:new o.aK($,u.u_spin_weights)}),symbolIcon:($,u)=>({u_is_size_zoom_constant:new o.aG($,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aG($,u.u_is_size_feature_constant),u_size_t:new o.aH($,u.u_size_t),u_size:new o.aH($,u.u_size),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_pitch:new o.aH($,u.u_pitch),u_rotate_symbol:new o.aG($,u.u_rotate_symbol),u_aspect_ratio:new o.aH($,u.u_aspect_ratio),u_fade_change:new o.aH($,u.u_fade_change),u_matrix:new o.aI($,u.u_matrix),u_label_plane_matrix:new o.aI($,u.u_label_plane_matrix),u_coord_matrix:new o.aI($,u.u_coord_matrix),u_is_text:new o.aG($,u.u_is_text),u_pitch_with_map:new o.aG($,u.u_pitch_with_map),u_texsize:new o.aL($,u.u_texsize),u_texture:new o.aG($,u.u_texture)}),symbolSDF:($,u)=>({u_is_size_zoom_constant:new o.aG($,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aG($,u.u_is_size_feature_constant),u_size_t:new o.aH($,u.u_size_t),u_size:new o.aH($,u.u_size),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_pitch:new o.aH($,u.u_pitch),u_rotate_symbol:new o.aG($,u.u_rotate_symbol),u_aspect_ratio:new o.aH($,u.u_aspect_ratio),u_fade_change:new o.aH($,u.u_fade_change),u_matrix:new o.aI($,u.u_matrix),u_label_plane_matrix:new o.aI($,u.u_label_plane_matrix),u_coord_matrix:new o.aI($,u.u_coord_matrix),u_is_text:new o.aG($,u.u_is_text),u_pitch_with_map:new o.aG($,u.u_pitch_with_map),u_texsize:new o.aL($,u.u_texsize),u_texture:new o.aG($,u.u_texture),u_gamma_scale:new o.aH($,u.u_gamma_scale),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_is_halo:new o.aG($,u.u_is_halo)}),symbolTextAndIcon:($,u)=>({u_is_size_zoom_constant:new o.aG($,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aG($,u.u_is_size_feature_constant),u_size_t:new o.aH($,u.u_size_t),u_size:new o.aH($,u.u_size),u_camera_to_center_distance:new o.aH($,u.u_camera_to_center_distance),u_pitch:new o.aH($,u.u_pitch),u_rotate_symbol:new o.aG($,u.u_rotate_symbol),u_aspect_ratio:new o.aH($,u.u_aspect_ratio),u_fade_change:new o.aH($,u.u_fade_change),u_matrix:new o.aI($,u.u_matrix),u_label_plane_matrix:new o.aI($,u.u_label_plane_matrix),u_coord_matrix:new o.aI($,u.u_coord_matrix),u_is_text:new o.aG($,u.u_is_text),u_pitch_with_map:new o.aG($,u.u_pitch_with_map),u_texsize:new o.aL($,u.u_texsize),u_texsize_icon:new o.aL($,u.u_texsize_icon),u_texture:new o.aG($,u.u_texture),u_texture_icon:new o.aG($,u.u_texture_icon),u_gamma_scale:new o.aH($,u.u_gamma_scale),u_device_pixel_ratio:new o.aH($,u.u_device_pixel_ratio),u_is_halo:new o.aG($,u.u_is_halo)}),background:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_opacity:new o.aH($,u.u_opacity),u_color:new o.aM($,u.u_color)}),backgroundPattern:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_opacity:new o.aH($,u.u_opacity),u_image:new o.aG($,u.u_image),u_pattern_tl_a:new o.aL($,u.u_pattern_tl_a),u_pattern_br_a:new o.aL($,u.u_pattern_br_a),u_pattern_tl_b:new o.aL($,u.u_pattern_tl_b),u_pattern_br_b:new o.aL($,u.u_pattern_br_b),u_texsize:new o.aL($,u.u_texsize),u_mix:new o.aH($,u.u_mix),u_pattern_size_a:new o.aL($,u.u_pattern_size_a),u_pattern_size_b:new o.aL($,u.u_pattern_size_b),u_scale_a:new o.aH($,u.u_scale_a),u_scale_b:new o.aH($,u.u_scale_b),u_pixel_coord_upper:new o.aL($,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.aL($,u.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aH($,u.u_tile_units_to_pixels)}),terrain:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_texture:new o.aG($,u.u_texture),u_ele_delta:new o.aH($,u.u_ele_delta)}),terrainDepth:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_ele_delta:new o.aH($,u.u_ele_delta)}),terrainCoords:($,u)=>({u_matrix:new o.aI($,u.u_matrix),u_texture:new o.aG($,u.u_texture),u_terrain_coords_id:new o.aH($,u.u_terrain_coords_id),u_ele_delta:new o.aH($,u.u_ele_delta)})};class oh{constructor(u,p,g){this.context=u;const v=u.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ji={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Oa{constructor(u,p,g,v){this.length=p.length,this.attributes=g,this.itemSize=p.bytesPerElement,this.dynamicDraw=v,this.context=u;const x=u.gl;this.buffer=x.createBuffer(),u.bindVertexBuffer.set(this.buffer),x.bufferData(x.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,p){for(let g=0;g<this.attributes.length;g++){const v=p.attributes[this.attributes[g].name];v!==void 0&&u.enableVertexAttribArray(v)}}setVertexAttribPointers(u,p,g){for(let v=0;v<this.attributes.length;v++){const x=this.attributes[v],A=p.attributes[x.name];A!==void 0&&u.vertexAttribPointer(A,x.components,u[Ji[x.type]],!1,this.itemSize,x.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const us=new WeakMap;function rs($){var u;if(us.has($))return us.get($);{const p=(u=$.getParameter($.VERSION))===null||u===void 0?void 0:u.startsWith("WebGL 2.0");return us.set($,p),p}}class Hn{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Fa extends Hn{getDefault(){return o.aO.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Ba extends Hn{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Nl extends Hn{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Vl extends Hn{getDefault(){return[!0,!0,!0,!0]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Na extends Hn{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class Ul extends Hn{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class jl extends Hn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const p=this.current;(u.func!==p.func||u.ref!==p.ref||u.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Va extends Hn{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class $u extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=u,this.dirty=!1}}class wu extends Hn{getDefault(){return[0,1]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class go extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=u,this.dirty=!1}}class ah extends Hn{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class lh extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.BLEND):p.disable(p.BLEND),this.current=u,this.dirty=!1}}class ch extends Hn{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class uh extends Hn{getDefault(){return o.aO.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class fh extends Hn{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class hh extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=u,this.dirty=!1}}class ql extends Hn{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Ua extends Hn{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class Gl extends Hn{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class Hl extends Hn{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class vo extends Hn{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class xu extends Hn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class ku extends Hn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Zl extends Hn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Yi extends Hn{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Cu extends Hn{getDefault(){return null}set(u){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class yo extends Hn{getDefault(){return null}set(u){var p;if(u===this.current&&!this.dirty)return;const g=this.gl;rs(g)?g.bindVertexArray(u):(p=g.getExtension("OES_vertex_array_object"))===null||p===void 0||p.bindVertexArrayOES(u),this.current=u,this.dirty=!1}}class bo extends Hn{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class Su extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Wl extends Hn{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class jn extends Hn{constructor(u,p){super(u),this.context=u,this.parent=p}getDefault(){return null}}class ja extends jn{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class dh extends jn{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Tu extends jn{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_STENCIL_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Yo{constructor(u,p,g,v,x){this.context=u,this.width=p,this.height=g;const A=u.gl,D=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new ja(u,D),v)this.depthAttachment=x?new Tu(u,D):new dh(u,D);else if(x)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,p=this.colorAttachment.get();if(p&&u.deleteTexture(p),this.depthAttachment){const g=this.depthAttachment.get();g&&u.deleteRenderbuffer(g)}u.deleteFramebuffer(this.framebuffer)}}class Cr{constructor(u,p,g){this.blendFunction=u,this.blendColor=p,this.mask=g}}Cr.Replace=[1,0],Cr.disabled=new Cr(Cr.Replace,o.aO.transparent,[!1,!1,!1,!1]),Cr.unblended=new Cr(Cr.Replace,o.aO.transparent,[!0,!0,!0,!0]),Cr.alphaBlended=new Cr([1,771],o.aO.transparent,[!0,!0,!0,!0]);class ph{constructor(u){var p,g;if(this.gl=u,this.clearColor=new Fa(this),this.clearDepth=new Ba(this),this.clearStencil=new Nl(this),this.colorMask=new Vl(this),this.depthMask=new Na(this),this.stencilMask=new Ul(this),this.stencilFunc=new jl(this),this.stencilOp=new Va(this),this.stencilTest=new $u(this),this.depthRange=new wu(this),this.depthTest=new go(this),this.depthFunc=new ah(this),this.blend=new lh(this),this.blendFunc=new ch(this),this.blendColor=new uh(this),this.blendEquation=new fh(this),this.cullFace=new hh(this),this.cullFaceSide=new ql(this),this.frontFace=new Ua(this),this.program=new Gl(this),this.activeTexture=new Hl(this),this.viewport=new vo(this),this.bindFramebuffer=new xu(this),this.bindRenderbuffer=new ku(this),this.bindTexture=new Zl(this),this.bindVertexBuffer=new Yi(this),this.bindElementBuffer=new Cu(this),this.bindVertexArray=new yo(this),this.pixelStoreUnpack=new bo(this),this.pixelStoreUnpackPremultiplyAlpha=new Su(this),this.pixelStoreUnpackFlipY=new Wl(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE),rs(u)){this.HALF_FLOAT=u.HALF_FLOAT;const v=u.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(p=u.RGBA16F)!==null&&p!==void 0?p:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(g=u.RGB16F)!==null&&g!==void 0?g:v==null?void 0:v.RGB16F_EXT,u.getExtension("EXT_color_buffer_float")}else{u.getExtension("EXT_color_buffer_half_float"),u.getExtension("OES_texture_half_float_linear");const v=u.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,p){return new oh(this,u,p)}createVertexBuffer(u,p,g){return new Oa(this,u,p,g)}createRenderbuffer(u,p,g){const v=this.gl,x=v.createRenderbuffer();return this.bindRenderbuffer.set(x),v.renderbufferStorage(v.RENDERBUFFER,u,p,g),this.bindRenderbuffer.set(null),x}createFramebuffer(u,p,g,v){return new Yo(this,u,p,g,v)}clear({color:u,depth:p,stencil:g}){const v=this.gl;let x=0;u&&(x|=v.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(x|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),g!==void 0&&(x|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),v.clear(x)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){o.aD(u.blendFunction,Cr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}createVertexArray(){var u;return rs(this.gl)?this.gl.createVertexArray():(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.createVertexArrayOES()}deleteVertexArray(u){var p;return rs(this.gl)?this.gl.deleteVertexArray(u):(p=this.gl.getExtension("OES_vertex_array_object"))===null||p===void 0?void 0:p.deleteVertexArrayOES(u)}unbindVAO(){this.bindVertexArray.set(null)}}class Bn{constructor(u,p,g){this.func=u,this.mask=p,this.range=g}}Bn.ReadOnly=!1,Bn.ReadWrite=!0,Bn.disabled=new Bn(519,Bn.ReadOnly,[0,1]);const Kl=7680;class rr{constructor(u,p,g,v,x,A){this.test=u,this.ref=p,this.mask=g,this.fail=v,this.depthFail=x,this.pass=A}}rr.disabled=new rr({func:519,mask:0},0,0,Kl,Kl,Kl);class tr{constructor(u,p,g){this.enable=u,this.mode=p,this.frontFace=g}}let Qi;function qa($,u,p,g,v,x,A){const D=$.context,O=D.gl,H=$.useProgram("collisionBox"),X=[];let J=0,_e=0;for(let De=0;De<g.length;De++){const Ge=g[De],Ye=u.getTile(Ge),tt=Ye.getBucket(p);if(!tt)continue;let st=Ge.posMatrix;v[0]===0&&v[1]===0||(st=$.translatePosMatrix(Ge.posMatrix,Ye,v,x));const St=A?tt.textCollisionBox:tt.iconCollisionBox,yt=tt.collisionCircleArray;if(yt.length>0){const Rt=o.F(),Nt=st;o.aP(Rt,tt.placementInvProjMatrix,$.transform.glCoordMatrix),o.aP(Rt,Rt,tt.placementViewportMatrix),X.push({circleArray:yt,circleOffset:_e,transform:Nt,invTransform:Rt,coord:Ge}),J+=yt.length/4,_e=J}St&&H.draw(D,O.LINES,Bn.disabled,rr.disabled,$.colorModeForRenderPass(),tr.disabled,mu(st,$.transform,Ye),$.style.map.terrain&&$.style.map.terrain.getTerrainData(Ge),p.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,null,$.transform.zoom,null,null,St.collisionVertexBuffer)}if(!A||!X.length)return;const Ee=$.useProgram("collisionCircle"),Ie=new o.aQ;Ie.resize(4*J),Ie._trim();let Me=0;for(const De of X)for(let Ge=0;Ge<De.circleArray.length/4;Ge++){const Ye=4*Ge,tt=De.circleArray[Ye+0],st=De.circleArray[Ye+1],St=De.circleArray[Ye+2],yt=De.circleArray[Ye+3];Ie.emplace(Me++,tt,st,St,yt,0),Ie.emplace(Me++,tt,st,St,yt,1),Ie.emplace(Me++,tt,st,St,yt,2),Ie.emplace(Me++,tt,st,St,yt,3)}(!Qi||Qi.length<2*J)&&(Qi=function(De){const Ge=2*De,Ye=new o.aS;Ye.resize(Ge),Ye._trim();for(let tt=0;tt<Ge;tt++){const st=6*tt;Ye.uint16[st+0]=4*tt+0,Ye.uint16[st+1]=4*tt+1,Ye.uint16[st+2]=4*tt+2,Ye.uint16[st+3]=4*tt+2,Ye.uint16[st+4]=4*tt+3,Ye.uint16[st+5]=4*tt+0}return Ye}(J));const we=D.createIndexBuffer(Qi,!0),Oe=D.createVertexBuffer(Ie,o.aR.members,!0);for(const De of X){const Ge={u_matrix:De.transform,u_inv_matrix:De.invTransform,u_camera_to_center_distance:(Je=$.transform).cameraToCenterDistance,u_viewport_size:[Je.width,Je.height]};Ee.draw(D,O.TRIANGLES,Bn.disabled,rr.disabled,$.colorModeForRenderPass(),tr.disabled,Ge,$.style.map.terrain&&$.style.map.terrain.getTerrainData(De.coord),p.id,Oe,we,o.$.simpleSegment(0,2*De.circleOffset,De.circleArray.length,De.circleArray.length/2),null,$.transform.zoom,null,null,null)}var Je;Oe.destroy(),we.destroy()}tr.disabled=new tr(!1,1029,2305),tr.backCCW=new tr(!0,1029,2305);const Xl=o.an(new Float32Array(16));function Iu($,u,p,g,v,x){const{horizontalAlign:A,verticalAlign:D}=o.at($);return new o.P((-(A-.5)*u/v+g[0])*x,(-(D-.5)*p/v+g[1])*x)}function Ga($,u,p,g,v,x,A,D,O,H,X){const J=$.text.placedSymbolArray,_e=$.text.dynamicLayoutVertexArray,Ee=$.icon.dynamicLayoutVertexArray,Ie={};_e.clear();for(let Me=0;Me<J.length;Me++){const we=J.get(Me),Oe=we.hidden||!we.crossTileID||$.allowVerticalPlacement&&!we.placedOrientation?null:g[we.crossTileID];if(Oe){const Je=new o.P(we.anchorX,we.anchorY),De=Or(Je,p?A:x,X),Ge=Ae(v.cameraToCenterDistance,De.signedDistanceFromCamera);let Ye=o.ai($.textSizeData,O,we)*Ge/o.ao;p&&(Ye*=$.tilePixelRatio/D);const{width:tt,height:st,anchor:St,textOffset:yt,textBoxScale:Rt}=Oe,Nt=Iu(St,tt,st,yt,Rt,Ye),Pn=p?Or(Je.add(Nt),x,X).point:De.point.add(u?Nt.rotate(-v.angle):Nt),Gt=$.allowVerticalPlacement&&we.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let vn=0;vn<we.numGlyphs;vn++)o.aj(_e,Pn,Gt);H&&we.associatedIconIndex>=0&&(Ie[we.associatedIconIndex]={shiftedAnchor:Pn,angle:Gt})}else ft(we.numGlyphs,_e)}if(H){Ee.clear();const Me=$.icon.placedSymbolArray;for(let we=0;we<Me.length;we++){const Oe=Me.get(we);if(Oe.hidden)ft(Oe.numGlyphs,Ee);else{const Je=Ie[we];if(Je)for(let De=0;De<Oe.numGlyphs;De++)o.aj(Ee,Je.shiftedAnchor,Je.angle);else ft(Oe.numGlyphs,Ee)}}$.icon.dynamicLayoutVertexBuffer.updateData(Ee)}$.text.dynamicLayoutVertexBuffer.updateData(_e)}function Ha($,u,p){return p.iconsInText&&u?"symbolTextAndIcon":$?"symbolSDF":"symbolIcon"}function Za($,u,p,g,v,x,A,D,O,H,X,J){const _e=$.context,Ee=_e.gl,Ie=$.transform,Me=D==="map",we=O==="map",Oe=D!=="viewport"&&p.layout.get("symbol-placement")!=="point",Je=Me&&!we&&!Oe,De=!p.layout.get("symbol-sort-key").isConstant();let Ge=!1;const Ye=$.depthModeForSublayer(0,Bn.ReadOnly),tt=p._unevaluatedLayout.hasValue("text-variable-anchor")||p._unevaluatedLayout.hasValue("text-variable-anchor-offset"),st=[];for(const St of g){const yt=u.getTile(St),Rt=yt.getBucket(p);if(!Rt)continue;const Nt=v?Rt.text:Rt.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const Pn=Nt.programConfigurations.get(p.id),Gt=v||Rt.sdfIcons,vn=v?Rt.textSizeData:Rt.iconSizeData,An=we||Ie.pitch!==0,Nn=$.useProgram(Ha(Gt,v,Rt),Pn),$n=o.ag(vn,Ie.zoom),Dn=$.style.map.terrain&&$.style.map.terrain.getTerrainData(St);let zn,vr,Xn,Os,Br=[0,0],ur=null;if(v)vr=yt.glyphAtlasTexture,Xn=Ee.LINEAR,zn=yt.glyphAtlasTexture.size,Rt.iconsInText&&(Br=yt.imageAtlasTexture.size,ur=yt.imageAtlasTexture,Os=An||$.options.rotating||$.options.zooming||vn.kind==="composite"||vn.kind==="camera"?Ee.LINEAR:Ee.NEAREST);else{const Ar=p.layout.get("icon-size").constantOr(0)!==1||Rt.iconsNeedLinear;vr=yt.imageAtlasTexture,Xn=Gt||$.options.rotating||$.options.zooming||Ar||An?Ee.LINEAR:Ee.NEAREST,zn=yt.imageAtlasTexture.size}const Nr=Sn(yt,1,$.transform.zoom),Fs=Cn(St.posMatrix,we,Me,$.transform,Nr),fi=ii(St.posMatrix,we,Me,$.transform,Nr),Ri=tt&&Rt.hasTextData(),fa=p.layout.get("icon-text-fit")!=="none"&&Ri&&Rt.hasIconData();if(Oe){const Ar=$.style.map.terrain?(Ws,Mr)=>$.style.map.terrain.getElevation(St,Ws,Mr):null,hr=p.layout.get("text-rotation-alignment")==="map";ue(Rt,St.posMatrix,$,v,Fs,fi,we,H,hr,Ar)}const Oi=$.translatePosMatrix(St.posMatrix,yt,x,A),hi=Oe||v&&tt||fa?Xl:Fs,Pr=$.translatePosMatrix(fi,yt,x,A,!0),fr=Gt&&p.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ar;ar=Gt?Rt.iconsInText?Jo(vn.kind,$n,Je,we,$,Oi,hi,Pr,zn,Br):Xo(vn.kind,$n,Je,we,$,Oi,hi,Pr,v,zn,!0):Ko(vn.kind,$n,Je,we,$,Oi,hi,Pr,v,zn);const Zs={program:Nn,buffers:Nt,uniformValues:ar,atlasTexture:vr,atlasTextureIcon:ur,atlasInterpolation:Xn,atlasInterpolationIcon:Os,isSDF:Gt,hasHalo:fr};if(De&&Rt.canOverlap){Ge=!0;const Ar=Nt.segments.get();for(const hr of Ar)st.push({segments:new o.$([hr]),sortKey:hr.sortKey,state:Zs,terrainData:Dn})}else st.push({segments:Nt.segments,sortKey:0,state:Zs,terrainData:Dn})}Ge&&st.sort((St,yt)=>St.sortKey-yt.sortKey);for(const St of st){const yt=St.state;if(_e.activeTexture.set(Ee.TEXTURE0),yt.atlasTexture.bind(yt.atlasInterpolation,Ee.CLAMP_TO_EDGE),yt.atlasTextureIcon&&(_e.activeTexture.set(Ee.TEXTURE1),yt.atlasTextureIcon&&yt.atlasTextureIcon.bind(yt.atlasInterpolationIcon,Ee.CLAMP_TO_EDGE)),yt.isSDF){const Rt=yt.uniformValues;yt.hasHalo&&(Rt.u_is_halo=1,Eu(yt.buffers,St.segments,p,$,yt.program,Ye,X,J,Rt,St.terrainData)),Rt.u_is_halo=0}Eu(yt.buffers,St.segments,p,$,yt.program,Ye,X,J,yt.uniformValues,St.terrainData)}}function Eu($,u,p,g,v,x,A,D,O,H){const X=g.context;v.draw(X,X.gl.TRIANGLES,x,A,D,tr.disabled,O,H,p.id,$.layoutVertexBuffer,$.indexBuffer,u,p.paint,g.transform.zoom,$.programConfigurations.get(p.id),$.dynamicLayoutVertexBuffer,$.opacityVertexBuffer)}function Wa($,u,p,g,v){if(!p||!g||!g.imageAtlas)return;const x=g.imageAtlas.patternPositions;let A=x[p.to.toString()],D=x[p.from.toString()];if(!A&&D&&(A=D),!D&&A&&(D=A),!A||!D){const O=v.getPaintProperty(u);A=x[O],D=x[O]}A&&D&&$.setConstantPatternPositions(A,D)}function Pu($,u,p,g,v,x,A){const D=$.context.gl,O="fill-pattern",H=p.paint.get(O),X=H&&H.constantOr(1),J=p.getCrossfadeParameters();let _e,Ee,Ie,Me,we;A?(Ee=X&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",_e=D.LINES):(Ee=X?"fillPattern":"fill",_e=D.TRIANGLES);const Oe=H.constantOr(null);for(const Je of g){const De=u.getTile(Je);if(X&&!De.patternsLoaded())continue;const Ge=De.getBucket(p);if(!Ge)continue;const Ye=Ge.programConfigurations.get(p.id),tt=$.useProgram(Ee,Ye),st=$.style.map.terrain&&$.style.map.terrain.getTerrainData(Je);X&&($.context.activeTexture.set(D.TEXTURE0),De.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),Ye.updatePaintBuffers(J)),Wa(Ye,O,Oe,De,p);const St=st?Je:null,yt=$.translatePosMatrix(St?St.posMatrix:Je.posMatrix,De,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(A){Me=Ge.indexBuffer2,we=Ge.segments2;const Rt=[D.drawingBufferWidth,D.drawingBufferHeight];Ie=Ee==="fillOutlinePattern"&&X?pu(yt,$,J,De,Rt):nh(yt,Rt)}else Me=Ge.indexBuffer,we=Ge.segments,Ie=X?Ma(yt,$,J,De):du(yt);tt.draw($.context,_e,v,$.stencilModeForClipping(Je),x,tr.disabled,Ie,st,p.id,Ge.layoutVertexBuffer,Me,we,p.paint,$.transform.zoom,Ye)}}function Ka($,u,p,g,v,x,A){const D=$.context,O=D.gl,H="fill-extrusion-pattern",X=p.paint.get(H),J=X.constantOr(1),_e=p.getCrossfadeParameters(),Ee=p.paint.get("fill-extrusion-opacity"),Ie=X.constantOr(null);for(const Me of g){const we=u.getTile(Me),Oe=we.getBucket(p);if(!Oe)continue;const Je=$.style.map.terrain&&$.style.map.terrain.getTerrainData(Me),De=Oe.programConfigurations.get(p.id),Ge=$.useProgram(J?"fillExtrusionPattern":"fillExtrusion",De);J&&($.context.activeTexture.set(O.TEXTURE0),we.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),De.updatePaintBuffers(_e)),Wa(De,H,Ie,we,p);const Ye=$.translatePosMatrix(Me.posMatrix,we,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),tt=p.paint.get("fill-extrusion-vertical-gradient"),st=J?th(Ye,$,tt,Ee,Me,_e,we):Ho(Ye,$,tt,Ee);Ge.draw(D,D.gl.TRIANGLES,v,x,A,tr.backCCW,st,Je,p.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,p.paint,$.transform.zoom,De,$.style.map.terrain&&Oe.centroidVertexBuffer)}}function Xa($,u,p,g,v,x,A){const D=$.context,O=D.gl,H=p.fbo;if(!H)return;const X=$.useProgram("hillshade"),J=$.style.map.terrain&&$.style.map.terrain.getTerrainData(u);D.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,H.colorAttachment.get()),X.draw(D,O.TRIANGLES,v,x,A,tr.disabled,((_e,Ee,Ie,Me)=>{const we=Ie.paint.get("hillshade-shadow-color"),Oe=Ie.paint.get("hillshade-highlight-color"),Je=Ie.paint.get("hillshade-accent-color");let De=Ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ie.paint.get("hillshade-illumination-anchor")==="viewport"&&(De-=_e.transform.angle);const Ge=!_e.options.moving;return{u_matrix:Me?Me.posMatrix:_e.transform.calculatePosMatrix(Ee.tileID.toUnwrapped(),Ge),u_image:0,u_latrange:vu(0,Ee.tileID),u_light:[Ie.paint.get("hillshade-exaggeration"),De],u_shadow:we,u_highlight:Oe,u_accent:Je}})($,p,g,J?u:null),J,g.id,$.rasterBoundsBuffer,$.quadTriangleIndexBuffer,$.rasterBoundsSegments)}function Jl($,u,p,g,v,x){const A=$.context,D=A.gl,O=u.dem;if(O&&O.data){const H=O.dim,X=O.stride,J=O.getPixels();if(A.activeTexture.set(D.TEXTURE1),A.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||$.getTileTexture(X),u.demTexture){const Ee=u.demTexture;Ee.update(J,{premultiply:!1}),Ee.bind(D.NEAREST,D.CLAMP_TO_EDGE)}else u.demTexture=new ie(A,J,D.RGBA,{premultiply:!1}),u.demTexture.bind(D.NEAREST,D.CLAMP_TO_EDGE);A.activeTexture.set(D.TEXTURE0);let _e=u.fbo;if(!_e){const Ee=new ie(A,{width:H,height:H,data:null},D.RGBA);Ee.bind(D.LINEAR,D.CLAMP_TO_EDGE),_e=u.fbo=A.createFramebuffer(H,H,!0,!1),_e.colorAttachment.set(Ee.texture)}A.bindFramebuffer.set(_e.framebuffer),A.viewport.set([0,0,H,H]),$.useProgram("hillshadePrepare").draw(A,D.TRIANGLES,g,v,x,tr.disabled,((Ee,Ie)=>{const Me=Ie.stride,we=o.F();return o.aN(we,0,o.W,-o.W,0,0,1),o.H(we,we,[0,-o.W,0]),{u_matrix:we,u_image:1,u_dimension:[Me,Me],u_zoom:Ee.overscaledZ,u_unpack:Ie.getUnpackVector()}})(u.tileID,O),null,p.id,$.rasterBoundsBuffer,$.quadTriangleIndexBuffer,$.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function Au($,u,p,g,v,x){const A=g.paint.get("raster-fade-duration");if(!x&&A>0){const D=b.now(),O=(D-$.timeAdded)/A,H=u?(D-u.timeAdded)/A:-1,X=p.getSource(),J=v.coveringZoomLevel({tileSize:X.tileSize,roundZoom:X.roundZoom}),_e=!u||Math.abs(u.tileID.overscaledZ-J)>Math.abs($.tileID.overscaledZ-J),Ee=_e&&$.refreshedUponExpiration?1:o.ac(_e?O:1-H,0,1);return $.refreshedUponExpiration&&O>=1&&($.refreshedUponExpiration=!1),u?{opacity:1,mix:1-Ee}:{opacity:Ee,mix:0}}return{opacity:1,mix:0}}const Mu=new o.aO(1,0,0,1),Ja=new o.aO(0,1,0,1),Yl=new o.aO(0,0,1,1),mh=new o.aO(1,0,1,1),Du=new o.aO(0,1,1,1);function _r($,u,p,g){fs($,0,u+p/2,$.transform.width,p,g)}function Mi($,u,p,g){fs($,u-p/2,0,p,$.transform.height,g)}function fs($,u,p,g,v,x){const A=$.context,D=A.gl;D.enable(D.SCISSOR_TEST),D.scissor(u*$.pixelRatio,p*$.pixelRatio,g*$.pixelRatio,v*$.pixelRatio),A.clear({color:x}),D.disable(D.SCISSOR_TEST)}function Ql($,u,p){const g=$.context,v=g.gl,x=p.posMatrix,A=$.useProgram("debug"),D=Bn.disabled,O=rr.disabled,H=$.colorModeForRenderPass(),X="$debug",J=$.style.map.terrain&&$.style.map.terrain.getTerrainData(p);g.activeTexture.set(v.TEXTURE0);const _e=u.getTileByID(p.key).latestRawTileData,Ee=Math.floor((_e&&_e.byteLength||0)/1024),Ie=u.getTile(p).tileSize,Me=512/Math.min(Ie,512)*(p.overscaledZ/$.transform.zoom)*.5;let we=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(we+=` => ${p.overscaledZ}`),function(Oe,Je){Oe.initDebugOverlayCanvas();const De=Oe.debugOverlayCanvas,Ge=Oe.context.gl,Ye=Oe.debugOverlayCanvas.getContext("2d");Ye.clearRect(0,0,De.width,De.height),Ye.shadowColor="white",Ye.shadowBlur=2,Ye.lineWidth=1.5,Ye.strokeStyle="white",Ye.textBaseline="top",Ye.font="bold 36px Open Sans, sans-serif",Ye.fillText(Je,5,5),Ye.strokeText(Je,5,5),Oe.debugOverlayTexture.update(De),Oe.debugOverlayTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE)}($,`${we} ${Ee}kB`),A.draw(g,v.TRIANGLES,D,O,Cr.alphaBlended,tr.disabled,_u(x,o.aO.transparent,Me),null,X,$.debugBuffer,$.quadTriangleIndexBuffer,$.debugSegments),A.draw(g,v.LINE_STRIP,D,O,H,tr.disabled,_u(x,o.aO.red),J,X,$.debugBuffer,$.tileBorderIndexBuffer,$.debugSegments)}function Ya($,u,p){const g=$.context,v=g.gl,x=$.colorModeForRenderPass(),A=new Bn(v.LEQUAL,Bn.ReadWrite,$.depthRangeFor3D),D=$.useProgram("terrain"),O=u.getTerrainMesh();g.bindFramebuffer.set(null),g.viewport.set([0,0,$.width,$.height]);for(const H of p){const X=$.renderToTexture.getTexture(H),J=u.getTerrainData(H.tileID);g.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,X.texture);const _e={u_matrix:$.transform.calculatePosMatrix(H.tileID.toUnwrapped()),u_texture:0,u_ele_delta:u.getMeshFrameDelta($.transform.zoom)};D.draw(g,v.TRIANGLES,A,rr.disabled,x,tr.backCCW,_e,J,"terrain",O.vertexBuffer,O.indexBuffer,O.segments)}}class zu{constructor(u,p){this.context=new ph(u),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Jr.maxUnderzooming+Jr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Pi}resize(u,p,g){if(this.width=Math.floor(u*g),this.height=Math.floor(p*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const u=this.context,p=new o.aV;p.emplaceBack(0,0),p.emplaceBack(o.W,0),p.emplaceBack(0,o.W),p.emplaceBack(o.W,o.W),this.tileExtentBuffer=u.createVertexBuffer(p,Ea.members),this.tileExtentSegments=o.$.simpleSegment(0,0,4,2);const g=new o.aV;g.emplaceBack(0,0),g.emplaceBack(o.W,0),g.emplaceBack(0,o.W),g.emplaceBack(o.W,o.W),this.debugBuffer=u.createVertexBuffer(g,Ea.members),this.debugSegments=o.$.simpleSegment(0,0,4,5);const v=new o.Z;v.emplaceBack(0,0,0,0),v.emplaceBack(o.W,0,o.W,0),v.emplaceBack(0,o.W,0,o.W),v.emplaceBack(o.W,o.W,o.W,o.W),this.rasterBoundsBuffer=u.createVertexBuffer(v,wn.members),this.rasterBoundsSegments=o.$.simpleSegment(0,0,4,2);const x=new o.aV;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(x,Ea.members),this.viewportSegments=o.$.simpleSegment(0,0,4,2);const A=new o.aW;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(A);const D=new o.aX;D.emplaceBack(0,1,2),D.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(D);const O=this.context.gl;this.stencilClearMode=new rr({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO)}clearStencil(){const u=this.context,p=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=o.F();o.aN(g,0,this.width,this.height,0,0,1),o.J(g,g,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,p.TRIANGLES,Bn.disabled,this.stencilClearMode,Cr.disabled,tr.disabled,Da(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,p){if(this.currentStencilSource===u.source||!u.isTileClipped()||!p||!p.length)return;this.currentStencilSource=u.source;const g=this.context,v=g.gl;this.nextStencilID+p.length>256&&this.clearStencil(),g.setColorMode(Cr.disabled),g.setDepthMode(Bn.disabled);const x=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of p){const D=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(A);x.draw(g,v.TRIANGLES,Bn.disabled,new rr({func:v.ALWAYS,mask:0},D,255,v.KEEP,v.KEEP,v.REPLACE),Cr.disabled,tr.disabled,Da(A.posMatrix),O,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,p=this.context.gl;return new rr({func:p.NOTEQUAL,mask:255},u,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(u){const p=this.context.gl;return new rr({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(u){const p=this.context.gl,g=u.sort((A,D)=>D.overscaledZ-A.overscaledZ),v=g[g.length-1].overscaledZ,x=g[0].overscaledZ-v+1;if(x>1){this.currentStencilSource=void 0,this.nextStencilID+x>256&&this.clearStencil();const A={};for(let D=0;D<x;D++)A[D+v]=new rr({func:p.GEQUAL,mask:255},D+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=x,[A,g]}return[{[v]:rr.disabled},g]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new Cr([u.CONSTANT_COLOR,u.ONE],new o.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Cr.unblended:Cr.alphaBlended}depthModeForSublayer(u,p,g){if(!this.opaquePassEnabledForLayer())return Bn.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new Bn(g||this.context.gl.LEQUAL,p,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,p){this.style=u,this.options=p,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(b.now()),this.imageManager.beginFrame();const g=this.style._order,v=this.style.sourceCaches,x={},A={},D={};for(const O in v){const H=v[O];H.used&&H.prepare(this.context),x[O]=H.getVisibleCoordinates(),A[O]=x[O].slice().reverse(),D[O]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let O=0;O<g.length;O++)if(this.style._layers[g[O]].is3D()){this.opaquePassCutoff=O;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const O of g){const H=this.style._layers[O];if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const X=A[H.source];(H.type==="custom"||X.length)&&this.renderLayer(this,v[H.source],H,X)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.aO.black:o.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const O=this.style._layers[g[this.currentLayer]],H=v[O.source],X=x[O.source];this._renderTileClippingMasks(O,X),this.renderLayer(this,H,O,X)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const O=this.style._layers[g[this.currentLayer]],H=v[O.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(O))continue;const X=(O.type==="symbol"?D:A)[O.source];this._renderTileClippingMasks(O,x[O.source]),this.renderLayer(this,H,O,X)}if(this.options.showTileBoundaries){const O=function(H,X){let J=null;const _e=Object.values(H._layers).flatMap(we=>we.source&&!we.isHidden(X)?[H.sourceCaches[we.source]]:[]),Ee=_e.filter(we=>we.getSource().type==="vector"),Ie=_e.filter(we=>we.getSource().type!=="vector"),Me=we=>{(!J||J.getSource().maxzoom<we.getSource().maxzoom)&&(J=we)};return Ee.forEach(we=>Me(we)),J||Ie.forEach(we=>Me(we)),J}(this.style,this.transform.zoom);O&&function(H,X,J){for(let _e=0;_e<J.length;_e++)Ql(H,X,J[_e])}(this,O,O.getVisibleCoordinates())}this.options.showPadding&&function(O){const H=O.transform.padding;_r(O,O.transform.height-(H.top||0),3,Mu),_r(O,H.bottom||0,3,Ja),Mi(O,H.left||0,3,Yl),Mi(O,O.transform.width-(H.right||0),3,mh);const X=O.transform.centerPoint;(function(J,_e,Ee,Ie){fs(J,_e-1,Ee-10,2,20,Ie),fs(J,_e-10,Ee-1,20,2,Ie)})(O,X.x,O.transform.height-X.y,Du)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(u){if(!this.style||!this.style.map||!this.style.map.terrain)return;const p=this.terrainFacilitator.matrix,g=this.transform.projMatrix;let v=this.terrainFacilitator.dirty;v||(v=u?!o.aY(p,g):!o.aZ(p,g)),v||(v=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),v&&(o.a_(p,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(x,A){const D=x.context,O=D.gl,H=Cr.unblended,X=new Bn(O.LEQUAL,Bn.ReadWrite,[0,1]),J=A.getTerrainMesh(),_e=A.sourceCache.getRenderableTiles(),Ee=x.useProgram("terrainDepth");D.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),D.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),D.clear({color:o.aO.transparent,depth:1});for(const Ie of _e){const Me=A.getTerrainData(Ie.tileID),we={u_matrix:x.transform.calculatePosMatrix(Ie.tileID.toUnwrapped()),u_ele_delta:A.getMeshFrameDelta(x.transform.zoom)};Ee.draw(D,O.TRIANGLES,X,rr.disabled,H,tr.backCCW,we,Me,"terrain",J.vertexBuffer,J.indexBuffer,J.segments)}D.bindFramebuffer.set(null),D.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain),function(x,A){const D=x.context,O=D.gl,H=Cr.unblended,X=new Bn(O.LEQUAL,Bn.ReadWrite,[0,1]),J=A.getTerrainMesh(),_e=A.getCoordsTexture(),Ee=A.sourceCache.getRenderableTiles(),Ie=x.useProgram("terrainCoords");D.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),D.viewport.set([0,0,x.width/devicePixelRatio,x.height/devicePixelRatio]),D.clear({color:o.aO.transparent,depth:1}),A.coordsIndex=[];for(const Me of Ee){const we=A.getTerrainData(Me.tileID);D.activeTexture.set(O.TEXTURE0),O.bindTexture(O.TEXTURE_2D,_e.texture);const Oe={u_matrix:x.transform.calculatePosMatrix(Me.tileID.toUnwrapped()),u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(x.transform.zoom)};Ie.draw(D,O.TRIANGLES,X,rr.disabled,H,tr.backCCW,Oe,we,"terrain",J.vertexBuffer,J.indexBuffer,J.segments),A.coordsIndex.push(Me.tileID.key)}D.bindFramebuffer.set(null),D.viewport.set([0,0,x.width,x.height])}(this,this.style.map.terrain))}renderLayer(u,p,g,v){if(!g.isHidden(this.transform.zoom)&&(g.type==="background"||g.type==="custom"||(v||[]).length))switch(this.id=g.id,g.type){case"symbol":(function(x,A,D,O,H){if(x.renderPass!=="translucent")return;const X=rr.disabled,J=x.colorModeForRenderPass();(D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(_e,Ee,Ie,Me,we,Oe,Je){const De=Ee.transform,Ge=we==="map",Ye=Oe==="map";for(const tt of _e){const st=Me.getTile(tt),St=st.getBucket(Ie);if(!St||!St.text||!St.text.segments.get().length)continue;const yt=o.ag(St.textSizeData,De.zoom),Rt=Sn(st,1,Ee.transform.zoom),Nt=Cn(tt.posMatrix,Ye,Ge,Ee.transform,Rt),Pn=Ie.layout.get("icon-text-fit")!=="none"&&St.hasIconData();if(yt){const Gt=Math.pow(2,De.zoom-st.tileID.overscaledZ);Ga(St,Ge,Ye,Je,De,Nt,tt.posMatrix,Gt,yt,Pn,Ee.style.map.terrain?(vn,An)=>Ee.style.map.terrain.getElevation(tt,vn,An):null)}}}(O,x,D,A,D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),H),D.paint.get("icon-opacity").constantOr(1)!==0&&Za(x,A,D,O,!1,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),D.layout.get("icon-rotation-alignment"),D.layout.get("icon-pitch-alignment"),D.layout.get("icon-keep-upright"),X,J),D.paint.get("text-opacity").constantOr(1)!==0&&Za(x,A,D,O,!0,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.layout.get("text-keep-upright"),X,J),A.map.showCollisionBoxes&&(qa(x,A,D,O,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),!0),qa(x,A,D,O,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),!1))})(u,p,g,v,this.style.placement.variableOffsets);break;case"circle":(function(x,A,D,O){if(x.renderPass!=="translucent")return;const H=D.paint.get("circle-opacity"),X=D.paint.get("circle-stroke-width"),J=D.paint.get("circle-stroke-opacity"),_e=!D.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(X.constantOr(1)===0||J.constantOr(1)===0))return;const Ee=x.context,Ie=Ee.gl,Me=x.depthModeForSublayer(0,Bn.ReadOnly),we=rr.disabled,Oe=x.colorModeForRenderPass(),Je=[];for(let De=0;De<O.length;De++){const Ge=O[De],Ye=A.getTile(Ge),tt=Ye.getBucket(D);if(!tt)continue;const st=tt.programConfigurations.get(D.id),St=x.useProgram("circle",st),yt=tt.layoutVertexBuffer,Rt=tt.indexBuffer,Nt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ge),Pn={programConfiguration:st,program:St,layoutVertexBuffer:yt,indexBuffer:Rt,uniformValues:rh(x,Ge,Ye,D),terrainData:Nt};if(_e){const Gt=tt.segments.get();for(const vn of Gt)Je.push({segments:new o.$([vn]),sortKey:vn.sortKey,state:Pn})}else Je.push({segments:tt.segments,sortKey:0,state:Pn})}_e&&Je.sort((De,Ge)=>De.sortKey-Ge.sortKey);for(const De of Je){const{programConfiguration:Ge,program:Ye,layoutVertexBuffer:tt,indexBuffer:st,uniformValues:St,terrainData:yt}=De.state;Ye.draw(Ee,Ie.TRIANGLES,Me,we,Oe,tr.disabled,St,yt,D.id,tt,st,De.segments,D.paint,x.transform.zoom,Ge)}})(u,p,g,v);break;case"heatmap":(function(x,A,D,O){if(D.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const H=x.context,X=H.gl,J=rr.disabled,_e=new Cr([X.ONE,X.ONE],o.aO.transparent,[!0,!0,!0,!0]);(function(Ee,Ie,Me){const we=Ee.gl;Ee.activeTexture.set(we.TEXTURE1),Ee.viewport.set([0,0,Ie.width/4,Ie.height/4]);let Oe=Me.heatmapFbo;if(Oe)we.bindTexture(we.TEXTURE_2D,Oe.colorAttachment.get()),Ee.bindFramebuffer.set(Oe.framebuffer);else{const Je=we.createTexture();we.bindTexture(we.TEXTURE_2D,Je),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_S,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_T,we.CLAMP_TO_EDGE),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MIN_FILTER,we.LINEAR),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MAG_FILTER,we.LINEAR),Oe=Me.heatmapFbo=Ee.createFramebuffer(Ie.width/4,Ie.height/4,!1,!1),function(De,Ge,Ye,tt){var st,St;const yt=De.gl,Rt=(st=De.HALF_FLOAT)!==null&&st!==void 0?st:yt.UNSIGNED_BYTE,Nt=(St=De.RGBA16F)!==null&&St!==void 0?St:yt.RGBA;yt.texImage2D(yt.TEXTURE_2D,0,Nt,Ge.width/4,Ge.height/4,0,yt.RGBA,Rt,null),tt.colorAttachment.set(Ye)}(Ee,Ie,Je,Oe)}})(H,x,D),H.clear({color:o.aO.transparent});for(let Ee=0;Ee<O.length;Ee++){const Ie=O[Ee];if(A.hasRenderableParent(Ie))continue;const Me=A.getTile(Ie),we=Me.getBucket(D);if(!we)continue;const Oe=we.programConfigurations.get(D.id),Je=x.useProgram("heatmap",Oe),{zoom:De}=x.transform;Je.draw(H,X.TRIANGLES,Bn.disabled,J,_e,tr.disabled,gu(Ie.posMatrix,Me,De,D.paint.get("heatmap-intensity")),null,D.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,D.paint,x.transform.zoom,Oe)}H.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(H,X){const J=H.context,_e=J.gl,Ee=X.heatmapFbo;if(!Ee)return;J.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,Ee.colorAttachment.get()),J.activeTexture.set(_e.TEXTURE1);let Ie=X.colorRampTexture;Ie||(Ie=X.colorRampTexture=new ie(J,X.colorRamp,_e.RGBA)),Ie.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),H.useProgram("heatmapTexture").draw(J,_e.TRIANGLES,Bn.disabled,rr.disabled,H.colorModeForRenderPass(),tr.disabled,((Me,we,Oe,Je)=>{const De=o.F();o.aN(De,0,Me.width,Me.height,0,0,1);const Ge=Me.context.gl;return{u_matrix:De,u_world:[Ge.drawingBufferWidth,Ge.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:we.paint.get("heatmap-opacity")}})(H,X),null,X.id,H.viewportBuffer,H.quadTriangleIndexBuffer,H.viewportSegments,X.paint,H.transform.zoom)}(x,D))})(u,p,g,v);break;case"line":(function(x,A,D,O){if(x.renderPass!=="translucent")return;const H=D.paint.get("line-opacity"),X=D.paint.get("line-width");if(H.constantOr(1)===0||X.constantOr(1)===0)return;const J=x.depthModeForSublayer(0,Bn.ReadOnly),_e=x.colorModeForRenderPass(),Ee=D.paint.get("line-dasharray"),Ie=D.paint.get("line-pattern"),Me=Ie.constantOr(1),we=D.paint.get("line-gradient"),Oe=D.getCrossfadeParameters(),Je=Me?"linePattern":Ee?"lineSDF":we?"lineGradient":"line",De=x.context,Ge=De.gl;let Ye=!0;for(const tt of O){const st=A.getTile(tt);if(Me&&!st.patternsLoaded())continue;const St=st.getBucket(D);if(!St)continue;const yt=St.programConfigurations.get(D.id),Rt=x.context.program.get(),Nt=x.useProgram(Je,yt),Pn=Ye||Nt.program!==Rt,Gt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(tt),vn=Ie.constantOr(null);if(vn&&st.imageAtlas){const $n=st.imageAtlas,Dn=$n.patternPositions[vn.to.toString()],zn=$n.patternPositions[vn.from.toString()];Dn&&zn&&yt.setConstantPatternPositions(Dn,zn)}const An=Gt?tt:null,Nn=Me?Xi(x,st,D,Oe,An):Ee?La(x,st,D,Ee,Oe,An):we?yu(x,st,D,St.lineClipsArray.length,An):za(x,st,D,An);if(Me)De.activeTexture.set(Ge.TEXTURE0),st.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),yt.updatePaintBuffers(Oe);else if(Ee&&(Pn||x.lineAtlas.dirty))De.activeTexture.set(Ge.TEXTURE0),x.lineAtlas.bind(De);else if(we){const $n=St.gradients[D.id];let Dn=$n.texture;if(D.gradientVersion!==$n.version){let zn=256;if(D.stepInterpolant){const vr=A.getSource().maxzoom,Xn=tt.canonical.z===vr?Math.ceil(1<<x.transform.maxZoom-tt.canonical.z):1;zn=o.ac(o.aT(St.maxLineLength/o.W*1024*Xn),256,De.maxTextureSize)}$n.gradient=o.aU({expression:D.gradientExpression(),evaluationKey:"lineProgress",resolution:zn,image:$n.gradient||void 0,clips:St.lineClipsArray}),$n.texture?$n.texture.update($n.gradient):$n.texture=new ie(De,$n.gradient,Ge.RGBA),$n.version=D.gradientVersion,Dn=$n.texture}De.activeTexture.set(Ge.TEXTURE0),Dn.bind(D.stepInterpolant?Ge.NEAREST:Ge.LINEAR,Ge.CLAMP_TO_EDGE)}Nt.draw(De,Ge.TRIANGLES,J,x.stencilModeForClipping(tt),_e,tr.disabled,Nn,Gt,D.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,D.paint,x.transform.zoom,yt,St.layoutVertexBuffer2),Ye=!1}})(u,p,g,v);break;case"fill":(function(x,A,D,O){const H=D.paint.get("fill-color"),X=D.paint.get("fill-opacity");if(X.constantOr(1)===0)return;const J=x.colorModeForRenderPass(),_e=D.paint.get("fill-pattern"),Ee=x.opaquePassEnabledForLayer()&&!_e.constantOr(1)&&H.constantOr(o.aO.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===Ee){const Ie=x.depthModeForSublayer(1,x.renderPass==="opaque"?Bn.ReadWrite:Bn.ReadOnly);Pu(x,A,D,O,Ie,J,!1)}if(x.renderPass==="translucent"&&D.paint.get("fill-antialias")){const Ie=x.depthModeForSublayer(D.getPaintProperty("fill-outline-color")?2:0,Bn.ReadOnly);Pu(x,A,D,O,Ie,J,!0)}})(u,p,g,v);break;case"fill-extrusion":(function(x,A,D,O){const H=D.paint.get("fill-extrusion-opacity");if(H!==0&&x.renderPass==="translucent"){const X=new Bn(x.context.gl.LEQUAL,Bn.ReadWrite,x.depthRangeFor3D);if(H!==1||D.paint.get("fill-extrusion-pattern").constantOr(1))Ka(x,A,D,O,X,rr.disabled,Cr.disabled),Ka(x,A,D,O,X,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const J=x.colorModeForRenderPass();Ka(x,A,D,O,X,rr.disabled,J)}}})(u,p,g,v);break;case"hillshade":(function(x,A,D,O){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const H=x.context,X=x.depthModeForSublayer(0,Bn.ReadOnly),J=x.colorModeForRenderPass(),[_e,Ee]=x.renderPass==="translucent"?x.stencilConfigForOverlap(O):[{},O];for(const Ie of Ee){const Me=A.getTile(Ie);Me.needsHillshadePrepare!==void 0&&Me.needsHillshadePrepare&&x.renderPass==="offscreen"?Jl(x,Me,D,X,rr.disabled,J):x.renderPass==="translucent"&&Xa(x,Ie,Me,D,X,_e[Ie.overscaledZ],J)}H.viewport.set([0,0,x.width,x.height])})(u,p,g,v);break;case"raster":(function(x,A,D,O){if(x.renderPass!=="translucent"||D.paint.get("raster-opacity")===0||!O.length)return;const H=x.context,X=H.gl,J=A.getSource(),_e=x.useProgram("raster"),Ee=x.colorModeForRenderPass(),[Ie,Me]=J instanceof Gn?[{},O]:x.stencilConfigForOverlap(O),we=Me[Me.length-1].overscaledZ,Oe=!x.options.moving;for(const Je of Me){const De=x.depthModeForSublayer(Je.overscaledZ-we,D.paint.get("raster-opacity")===1?Bn.ReadWrite:Bn.ReadOnly,X.LESS),Ge=A.getTile(Je);Ge.registerFadeDuration(D.paint.get("raster-fade-duration"));const Ye=A.findLoadedParent(Je,0),tt=Au(Ge,Ye,A,D,x.transform,x.style.map.terrain);let st,St;const yt=D.paint.get("raster-resampling")==="nearest"?X.NEAREST:X.LINEAR;H.activeTexture.set(X.TEXTURE0),Ge.texture.bind(yt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),H.activeTexture.set(X.TEXTURE1),Ye?(Ye.texture.bind(yt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),st=Math.pow(2,Ye.tileID.overscaledZ-Ge.tileID.overscaledZ),St=[Ge.tileID.canonical.x*st%1,Ge.tileID.canonical.y*st%1]):Ge.texture.bind(yt,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST);const Rt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Je),Nt=Rt?Je:null,Pn=Nt?Nt.posMatrix:x.transform.calculatePosMatrix(Je.toUnwrapped(),Oe),Gt=Ra(Pn,St||[0,0],st||1,tt,D);J instanceof Gn?_e.draw(H,X.TRIANGLES,De,rr.disabled,Ee,tr.disabled,Gt,Rt,D.id,J.boundsBuffer,x.quadTriangleIndexBuffer,J.boundsSegments):_e.draw(H,X.TRIANGLES,De,Ie[Je.overscaledZ],Ee,tr.disabled,Gt,Rt,D.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}})(u,p,g,v);break;case"background":(function(x,A,D,O){const H=D.paint.get("background-color"),X=D.paint.get("background-opacity");if(X===0)return;const J=x.context,_e=J.gl,Ee=x.transform,Ie=Ee.tileSize,Me=D.paint.get("background-pattern");if(x.isPatternMissing(Me))return;const we=!Me&&H.a===1&&X===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==we)return;const Oe=rr.disabled,Je=x.depthModeForSublayer(0,we==="opaque"?Bn.ReadWrite:Bn.ReadOnly),De=x.colorModeForRenderPass(),Ge=x.useProgram(Me?"backgroundPattern":"background"),Ye=O||Ee.coveringTiles({tileSize:Ie,terrain:x.style.map.terrain});Me&&(J.activeTexture.set(_e.TEXTURE0),x.imageManager.bind(x.context));const tt=D.getCrossfadeParameters();for(const st of Ye){const St=O?st.posMatrix:x.transform.calculatePosMatrix(st.toUnwrapped()),yt=Me?ih(St,X,x,Me,{tileID:st,tileSize:Ie},tt):sh(St,X,H),Rt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(st);Ge.draw(J,_e.TRIANGLES,Je,Oe,De,tr.disabled,yt,Rt,D.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}})(u,0,g,v);break;case"custom":(function(x,A,D){const O=x.context,H=D.implementation;if(x.renderPass==="offscreen"){const X=H.prerender;X&&(x.setCustomLayerDefaults(),O.setColorMode(x.colorModeForRenderPass()),X.call(H,O.gl,x.transform.customLayerMatrix()),O.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),O.setColorMode(x.colorModeForRenderPass()),O.setStencilMode(rr.disabled);const X=H.renderingMode==="3d"?new Bn(x.context.gl.LEQUAL,Bn.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,Bn.ReadOnly);O.setDepthMode(X),H.render(O.gl,x.transform.customLayerMatrix()),O.setDirty(),x.setBaseState(),O.bindFramebuffer.set(null)}})(u,0,g)}}translatePosMatrix(u,p,g,v,x){if(!g[0]&&!g[1])return u;const A=x?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(A){const H=Math.sin(A),X=Math.cos(A);g=[g[0]*X-g[1]*H,g[0]*H+g[1]*X]}const D=[x?g[0]:Sn(p,g[0],this.transform.zoom),x?g[1]:Sn(p,g[1],this.transform.zoom),0],O=new Float32Array(16);return o.H(O,u,D),O}saveTileTexture(u){const p=this._tileTextures[u.size[0]];p?p.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const p=this._tileTextures[u];return p&&p.length>0?p.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const p=this.imageManager.getPattern(u.from.toString()),g=this.imageManager.getPattern(u.to.toString());return!p||!g}useProgram(u,p){this.cache=this.cache||{};const g=u+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new Ai(this.context,Go[u],p,bu[u],this._showOverdrawInspector,this.style.map.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ie(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:u,drawingBufferHeight:p}=this.context.gl;return this.width!==u||this.height!==p}}class Di{constructor(u,p){this.points=u,this.planes=p}static fromInvProjectionMatrix(u,p,g){const v=Math.pow(2,g),x=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(D=>{const O=1/(D=o.af([],D,u))[3]/p*v;return o.a$(D,D,[O,O,1/D[3],O])}),A=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(D=>{const O=function(_e,Ee){var Ie=Ee[0],Me=Ee[1],we=Ee[2],Oe=Ie*Ie+Me*Me+we*we;return Oe>0&&(Oe=1/Math.sqrt(Oe)),_e[0]=Ee[0]*Oe,_e[1]=Ee[1]*Oe,_e[2]=Ee[2]*Oe,_e}([],function(_e,Ee,Ie){var Me=Ee[0],we=Ee[1],Oe=Ee[2],Je=Ie[0],De=Ie[1],Ge=Ie[2];return _e[0]=we*Ge-Oe*De,_e[1]=Oe*Je-Me*Ge,_e[2]=Me*De-we*Je,_e}([],se([],x[D[0]],x[D[1]]),se([],x[D[2]],x[D[1]]))),H=-((X=O)[0]*(J=x[D[1]])[0]+X[1]*J[1]+X[2]*J[2]);var X,J;return O.concat(H)});return new Di(x,A)}}class zi{constructor(u,p){this.min=u,this.max=p,this.center=function(g,v,x){return g[0]=.5*v[0],g[1]=.5*v[1],g[2]=.5*v[2],g}([],function(g,v,x){return g[0]=v[0]+x[0],g[1]=v[1]+x[1],g[2]=v[2]+x[2],g}([],this.min,this.max))}quadrant(u){const p=[u%2==0,u<2],g=re(this.min),v=re(this.max);for(let x=0;x<p.length;x++)g[x]=p[x]?this.min[x]:this.center[x],v[x]=p[x]?this.center[x]:this.max[x];return v[2]=this.max[2],new zi(g,v)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let v=0;v<u.planes.length;v++){const x=u.planes[v];let A=0;for(let D=0;D<p.length;D++)o.b0(x,p[D])>=0&&A++;if(A===0)return 0;A!==p.length&&(g=!1)}if(g)return 2;for(let v=0;v<3;v++){let x=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(let D=0;D<u.points.length;D++){const O=u.points[D][v]-this.min[v];x=Math.min(x,O),A=Math.max(A,O)}if(A<0||x>this.max[v]-this.min[v])return 0}return 1}}class $o{constructor(u=0,p=0,g=0,v=0){if(isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=p,this.left=g,this.right=v}interpolate(u,p,g){return p.top!=null&&u.top!=null&&(this.top=o.z.number(u.top,p.top,g)),p.bottom!=null&&u.bottom!=null&&(this.bottom=o.z.number(u.bottom,p.bottom,g)),p.left!=null&&u.left!=null&&(this.left=o.z.number(u.left,p.left,g)),p.right!=null&&u.right!=null&&(this.right=o.z.number(u.right,p.right,g)),this}getCenter(u,p){const g=o.ac((this.left+u-this.right)/2,0,u),v=o.ac((this.top+p-this.bottom)/2,0,p);return new o.P(g,v)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new $o(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const ec=85.051129;class Qa{constructor(u,p,g,v,x){this.tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=g??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new $o,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const u=new Qa(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.apply(this),u}apply(u){this.tileSize=u.tileSize,this.latRange=u.latRange,this.width=u.width,this.height=u.height,this._center=u._center,this._elevation=u._elevation,this.minElevationForCurrentTile=u.minElevationForCurrentTile,this.zoom=u.zoom,this.angle=u.angle,this._fov=u._fov,this._pitch=u._pitch,this._unmodified=u._unmodified,this._edgeInsets=u._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const p=-o.b1(u,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=function(){var g=new o.A(4);return o.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}(),function(g,v,x){var A=v[0],D=v[1],O=v[2],H=v[3],X=Math.sin(x),J=Math.cos(x);g[0]=A*J+O*X,g[1]=D*J+H*X,g[2]=A*-X+O*J,g[3]=D*-X+H*J}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const p=o.ac(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const p=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.tileZoom=Math.max(0,Math.floor(p)),this.scale=this.zoomScale(p),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,p,g){this._unmodified=!1,this._edgeInsets.interpolate(u,p,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const p=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(u){const p=[new o.b2(0,u)];if(this._renderWorldCopies){const g=this.pointCoordinate(new o.P(0,0)),v=this.pointCoordinate(new o.P(this.width,0)),x=this.pointCoordinate(new o.P(this.width,this.height)),A=this.pointCoordinate(new o.P(0,this.height)),D=Math.floor(Math.min(g.x,v.x,x.x,A.x)),O=Math.floor(Math.max(g.x,v.x,x.x,A.x)),H=1;for(let X=D-H;X<=O+H;X++)X!==0&&p.push(new o.b2(X,u))}return p}coveringTiles(u){var p,g;let v=this.coveringZoomLevel(u);const x=v;if(u.minzoom!==void 0&&v<u.minzoom)return[];u.maxzoom!==void 0&&v>u.maxzoom&&(v=u.maxzoom);const A=this.pointCoordinate(this.getCameraPoint()),D=o.Y.fromLngLat(this.center),O=Math.pow(2,v),H=[O*A.x,O*A.y,0],X=[O*D.x,O*D.y,0],J=Di.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v);let _e=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(_e=v);const Ee=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,Ie=De=>({aabb:new zi([De*O,0,0],[(De+1)*O,O,0]),zoom:0,x:0,y:0,wrap:De,fullyVisible:!1}),Me=[],we=[],Oe=v,Je=u.reparseOverscaled?x:v;if(this._renderWorldCopies)for(let De=1;De<=3;De++)Me.push(Ie(-De)),Me.push(Ie(De));for(Me.push(Ie(0));Me.length>0;){const De=Me.pop(),Ge=De.x,Ye=De.y;let tt=De.fullyVisible;if(!tt){const Nt=De.aabb.intersects(J);if(Nt===0)continue;tt=Nt===2}const st=u.terrain?H:X,St=De.aabb.distanceX(st),yt=De.aabb.distanceY(st),Rt=Math.max(Math.abs(St),Math.abs(yt));if(De.zoom===Oe||Rt>Ee+(1<<Oe-De.zoom)-2&&De.zoom>=_e){const Nt=Oe-De.zoom,Pn=H[0]-.5-(Ge<<Nt),Gt=H[1]-.5-(Ye<<Nt);we.push({tileID:new o.Q(De.zoom===Oe?Je:De.zoom,De.wrap,De.zoom,Ge,Ye),distanceSq:Z([X[0]-.5-Ge,X[1]-.5-Ye]),tileDistanceToCamera:Math.sqrt(Pn*Pn+Gt*Gt)})}else for(let Nt=0;Nt<4;Nt++){const Pn=(Ge<<1)+Nt%2,Gt=(Ye<<1)+(Nt>>1),vn=De.zoom+1;let An=De.aabb.quadrant(Nt);if(u.terrain){const Nn=new o.Q(vn,De.wrap,vn,Pn,Gt),$n=u.terrain.getMinMaxElevation(Nn),Dn=(p=$n.minElevation)!==null&&p!==void 0?p:this.elevation,zn=(g=$n.maxElevation)!==null&&g!==void 0?g:this.elevation;An=new zi([An.min[0],An.min[1],Dn],[An.max[0],An.max[1],zn])}Me.push({aabb:An,zoom:vn,x:Pn,y:Gt,wrap:De.wrap,fullyVisible:tt})}}return we.sort((De,Ge)=>De.distanceSq-Ge.distanceSq).map(De=>De.tileID)}resize(u,p){this.width=u,this.height=p,this.pixelsToGLUnits=[2/u,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const p=o.ac(u.lat,-85.051129,ec);return new o.P(o.N(u.lng)*this.worldSize,o.O(p)*this.worldSize)}unproject(u){return new o.Y(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const p=this.elevation,g=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,v=this.pointLocation(this.centerPoint,u),x=u.getElevationForLngLatZoom(v,this.tileZoom);if(!(this.elevation-x))return;const A=g+p-x,D=Math.cos(this._pitch)*this.cameraToCenterDistance/A/o.b3(1,v.lat),O=this.scaleZoom(D/this.tileSize);this._elevation=x,this._center=v,this.zoom=O}setLocationAtPoint(u,p){const g=this.pointCoordinate(p),v=this.pointCoordinate(this.centerPoint),x=this.locationCoordinate(u),A=new o.Y(x.x-(g.x-v.x),x.y-(g.y-v.y));this.center=this.coordinateLocation(A),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,p){return p?this.coordinatePoint(this.locationCoordinate(u),p.getElevationForLngLatZoom(u,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,p){return this.coordinateLocation(this.pointCoordinate(u,p))}locationCoordinate(u){return o.Y.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,p){if(p){const _e=p.pointCoordinate(u);if(_e!=null)return _e}const g=[u.x,u.y,0,1],v=[u.x,u.y,1,1];o.af(g,g,this.pixelMatrixInverse),o.af(v,v,this.pixelMatrixInverse);const x=g[3],A=v[3],D=g[1]/x,O=v[1]/A,H=g[2]/x,X=v[2]/A,J=H===X?0:(0-H)/(X-H);return new o.Y(o.z.number(g[0]/x,v[0]/A,J)/this.worldSize,o.z.number(D,O,J)/this.worldSize)}coordinatePoint(u,p=0,g=this.pixelMatrix){const v=[u.x*this.worldSize,u.y*this.worldSize,p,1];return o.af(v,v,g),new o.P(v[0]/v[3],v[1]/v[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new et().extend(this.pointLocation(new o.P(0,u))).extend(this.pointLocation(new o.P(this.width,u))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new et([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,ec])}calculatePosMatrix(u,p=!1){const g=u.key,v=p?this._alignedPosMatrixCache:this._posMatrixCache;if(v[g])return v[g];const x=u.canonical,A=this.worldSize/this.zoomScale(x.z),D=x.x+Math.pow(2,x.z)*u.wrap,O=o.an(new Float64Array(16));return o.H(O,O,[D*A,x.y*A,0]),o.J(O,O,[A/o.W,A/o.W,1]),o.K(O,p?this.alignedProjMatrix:this.projMatrix,O),v[g]=new Float32Array(O),v[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(u,p){p=o.ac(+p,this.minZoom,this.maxZoom);const g={center:new o.M(u.lng,u.lat),zoom:p};let v=this.lngRange;if(!this._renderWorldCopies&&v===null){const De=179.9999999999;v=[-De,De]}const x=this.tileSize*this.zoomScale(g.zoom);let A=0,D=x,O=0,H=x,X=0,J=0;const{x:_e,y:Ee}=this.size;if(this.latRange){const De=this.latRange;A=o.O(De[1])*x,D=o.O(De[0])*x,D-A<Ee&&(X=Ee/(D-A))}v&&(O=o.b1(o.N(v[0])*x,0,x),H=o.b1(o.N(v[1])*x,0,x),H<O&&(H+=x),H-O<_e&&(J=_e/(H-O)));const{x:Ie,y:Me}=this.project.call({worldSize:x},u);let we,Oe;const Je=Math.max(J||0,X||0);if(Je){const De=new o.P(J?(H+O)/2:Ie,X?(D+A)/2:Me);return g.center=this.unproject.call({worldSize:x},De).wrap(),g.zoom+=this.scaleZoom(Je),g}if(this.latRange){const De=Ee/2;Me-De<A&&(Oe=A+De),Me+De>D&&(Oe=D-De)}if(v){const De=(O+H)/2;let Ge=Ie;this._renderWorldCopies&&(Ge=o.b1(Ie,De-x/2,De+x/2));const Ye=_e/2;Ge-Ye<O&&(we=O+Ye),Ge+Ye>H&&(we=H-Ye)}if(we!==void 0||Oe!==void 0){const De=new o.P(we??Ie,Oe??Me);g.center=this.unproject.call({worldSize:x},De).wrap()}return g}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const u=this._unmodified,{center:p,zoom:g}=this.getConstrained(this.center,this.zoom);this.center=p,this.zoom=g,this._unmodified=u,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,p=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b3(1,this.center.lat)*this.worldSize;let v=o.an(new Float64Array(16));o.J(v,v,[this.width/2,-this.height/2,1]),o.H(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=o.an(new Float64Array(16)),o.J(v,v,[1,-1,1]),o.H(v,v,[-1,-1,0]),o.J(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v;const x=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),A=Math.min(this.elevation,this.minElevationForCurrentTile),D=x-A*this._pixelPerMeter/Math.cos(this._pitch),O=A<0?D:x,H=Math.PI/2+this._pitch,X=this._fov*(.5+u.y/this.height),J=Math.sin(X)*O/Math.sin(o.ac(Math.PI-H-X,.01,Math.PI-.01)),_e=this.getHorizon(),Ee=2*Math.atan(_e/this.cameraToCenterDistance)*(.5+u.y/(2*_e)),Ie=Math.sin(Ee)*O/Math.sin(o.ac(Math.PI-H-Ee,.01,Math.PI-.01)),Me=Math.min(J,Ie),we=1.01*(Math.cos(Math.PI/2-this._pitch)*Me+O),Oe=this.height/50;v=new Float64Array(16),o.b4(v,this._fov,this.width/this.height,Oe,we),v[8]=2*-u.x/this.width,v[9]=2*u.y/this.height,o.J(v,v,[1,-1,1]),o.H(v,v,[0,0,-this.cameraToCenterDistance]),o.b5(v,v,this._pitch),o.ad(v,v,this.angle),o.H(v,v,[-p,-g,0]),this.mercatorMatrix=o.J([],v,[this.worldSize,this.worldSize,this.worldSize]),o.J(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.K(new Float64Array(16),this.labelPlaneMatrix,v),o.H(v,v,[0,0,-this.elevation]),this.projMatrix=v,this.invProjMatrix=o.ar([],v),this.pixelMatrix3D=o.K(new Float64Array(16),this.labelPlaneMatrix,v);const Je=this.width%2/2,De=this.height%2/2,Ge=Math.cos(this.angle),Ye=Math.sin(this.angle),tt=p-Math.round(p)+Ge*Je+Ye*De,st=g-Math.round(g)+Ge*De+Ye*Je,St=new Float64Array(v);if(o.H(St,St,[tt>.5?tt-1:tt,st>.5?st-1:st,0]),this.alignedProjMatrix=St,v=o.ar(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new o.P(0,0)),p=[u.x*this.worldSize,u.y*this.worldSize,0,1];return o.af(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,u))}getCameraQueryGeometry(u){const p=this.getCameraPoint();if(u.length===1)return[u[0],p];{let g=p.x,v=p.y,x=p.x,A=p.y;for(const D of u)g=Math.min(g,D.x),v=Math.min(v,D.y),x=Math.max(x,D.x),A=Math.max(A,D.y);return[new o.P(g,v),new o.P(x,v),new o.P(x,A),new o.P(g,A),new o.P(g,v)]}}lngLatToCameraDepth(u,p){const g=this.locationCoordinate(u),v=[g.x*this.worldSize,g.y*this.worldSize,p,1];return o.af(v,v,this.projMatrix),v[2]/v[3]}}function tc($,u){let p,g=!1,v=null,x=null;const A=()=>{v=null,g&&($.apply(x,p),v=setTimeout(A,u),g=!1)};return(...D)=>(g=!0,x=this,p=D,v||A(),v)}class nc{constructor(u){this._getCurrentHash=()=>{const p=window.location.hash.replace("#","");if(this._hashName){let g;return p.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(g=v)}),(g&&g[1]||"").split("/")}return p.split("/")},this._onHashChange=()=>{const p=this._getCurrentHash();if(p.length>=3&&!p.some(g=>isNaN(g))){const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(p[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+p[2],+p[1]],zoom:+p[0],bearing:g,pitch:+(p[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const p=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,p)}catch{}},this._updateHash=tc(this._updateHashUnthrottled,300),this._hashName=u&&encodeURIComponent(u)}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const p=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,v=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),x=Math.pow(10,v),A=Math.round(p.lng*x)/x,D=Math.round(p.lat*x)/x,O=this._map.getBearing(),H=this._map.getPitch();let X="";if(X+=u?`/${A}/${D}/${g}`:`${g}/${D}/${A}`,(O||H)&&(X+="/"+Math.round(10*O)/10),H&&(X+=`/${Math.round(H)}`),this._hashName){const J=this._hashName;let _e=!1;const Ee=window.location.hash.slice(1).split("&").map(Ie=>{const Me=Ie.split("=")[0];return Me===J?(_e=!0,`${Me}=${X}`):Ie}).filter(Ie=>Ie);return _e||Ee.push(`${J}=${X}`),`#${Ee.join("&")}`}return`#${X}`}}const Qo={linearity:.3,easing:o.b6(0,0,.3,1)},eo=o.e({deceleration:2500,maxSpeed:1400},Qo),Lu=o.e({deceleration:20,maxSpeed:1400},Qo),Ru=o.e({deceleration:1e3,maxSpeed:360},Qo),Ou=o.e({deceleration:1e3,maxSpeed:90},Qo);class Fu{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:b.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,p=b.now();for(;u.length>0&&p-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:x}of this._inertiaBuffer)p.zoom+=x.zoomDelta||0,p.bearing+=x.bearingDelta||0,p.pitch+=x.pitchDelta||0,x.panDelta&&p.pan._add(x.panDelta),x.around&&(p.around=x.around),x.pinchAround&&(p.pinchAround=x.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(p.pan.mag()){const x=ta(p.pan.mag(),g,o.e({},eo,u||{}));v.offset=p.pan.mult(x.amount/p.pan.mag()),v.center=this._map.transform.center,ea(v,x)}if(p.zoom){const x=ta(p.zoom,g,Lu);v.zoom=this._map.transform.zoom+x.amount,ea(v,x)}if(p.bearing){const x=ta(p.bearing,g,Ru);v.bearing=this._map.transform.bearing+o.ac(x.amount,-179,179),ea(v,x)}if(p.pitch){const x=ta(p.pitch,g,Ou);v.pitch=this._map.transform.pitch+x.amount,ea(v,x)}if(v.zoom||v.bearing){const x=p.pinchAround===void 0?p.around:p.pinchAround;v.around=x?this._map.unproject(x):this._map.getCenter()}return this.clear(),o.e(v,{noMoveStart:!0})}}function ea($,u){(!$.duration||$.duration<u.duration)&&($.duration=u.duration,$.easing=u.easing)}function ta($,u,p){const{maxSpeed:g,linearity:v,deceleration:x}=p,A=o.ac($*v/(u/1e3),-g,g),D=Math.abs(A)/(x*v);return{easing:p.easing,duration:1e3*D,amount:A*(D/2)}}class ks extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,g,v={}){const x=w.mousePos(p.getCanvas(),g),A=p.unproject(x);super(u,o.e({point:x,lngLat:A,originalEvent:g},v)),this._defaultPrevented=!1,this.target=p}}class li extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,g){const v=u==="touchend"?g.changedTouches:g.touches,x=w.touchPos(p.getCanvasContainer(),v),A=x.map(O=>p.unproject(O)),D=x.reduce((O,H,X,J)=>O.add(H.div(J.length)),new o.P(0,0));super(u,{points:x,point:D,lngLats:A,lngLat:p.unproject(D),originalEvent:g}),this._defaultPrevented=!1}}class rc extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(u,p,g){super(u,{originalEvent:g}),this._defaultPrevented=!1}}class Xs{constructor(u,p){this._map=u,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new rc(u.type,this._map,u))}mousedown(u,p){return this._mousedownPos=p,this._firePreventable(new ks(u.type,this._map,u))}mouseup(u){this._map.fire(new ks(u.type,this._map,u))}click(u,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new ks(u.type,this._map,u))}dblclick(u){return this._firePreventable(new ks(u.type,this._map,u))}mouseover(u){this._map.fire(new ks(u.type,this._map,u))}mouseout(u){this._map.fire(new ks(u.type,this._map,u))}touchstart(u){return this._firePreventable(new li(u.type,this._map,u))}touchmove(u){this._map.fire(new li(u.type,this._map,u))}touchend(u){this._map.fire(new li(u.type,this._map,u))}touchcancel(u){this._map.fire(new li(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ci{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new ks(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ks("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new ks(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wo{constructor(u){this._map=u}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(u){return this.transform.pointLocation(o.P.convert(u),this._map.terrain)}}class Js{constructor(u,p){this._map=u,this._tr=new wo(u),this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,p){this.isEnabled()&&u.shiftKey&&u.button===0&&(w.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(u,p){if(!this._active)return;const g=p;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=g,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",u));const x=Math.min(v.x,g.x),A=Math.max(v.x,g.x),D=Math.min(v.y,g.y),O=Math.max(v.y,g.y);w.setTransform(this._box,`translate(${x}px,${D}px)`),this._box.style.width=A-x+"px",this._box.style.height=O-D+"px"}mouseupWindow(u,p){if(!this._active||u.button!==0)return;const g=this._startPos,v=p;if(this.reset(),w.suppressClick(),g.x!==v.x||g.y!==v.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:u})),{cameraAnimation:x=>x.fitScreenCoordinates(g,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,p){return this._map.fire(new o.k(u,{originalEvent:p}))}}function to($,u){if($.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${$.length}, points ${u.length}`);const p={};for(let g=0;g<$.length;g++)p[$[g].identifier]=u[g];return p}class _h{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,p,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),g.length===this.numTouches&&(this.centroid=function(v){const x=new o.P(0,0);for(const A of v)x._add(A);return x.div(v.length)}(p),this.touches=to(g,p)))}touchmove(u,p,g){if(this.aborted||!this.centroid)return;const v=to(g,p);for(const x in this.touches){const A=v[x];(!A||A.dist(this.touches[x])>30)&&(this.aborted=!0)}}touchend(u,p,g){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class sc{constructor(u){this.singleTap=new _h(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,p,g){this.singleTap.touchstart(u,p,g)}touchmove(u,p,g){this.singleTap.touchmove(u,p,g)}touchend(u,p,g){const v=this.singleTap.touchend(u,p,g);if(v){const x=u.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(v)<30;if(x&&A||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class gh{constructor(u){this._tr=new wo(u),this._zoomIn=new sc({numTouches:1,numTaps:2}),this._zoomOut=new sc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,p,g){this._zoomIn.touchstart(u,p,g),this._zoomOut.touchstart(u,p,g)}touchmove(u,p,g){this._zoomIn.touchmove(u,p,g),this._zoomOut.touchmove(u,p,g)}touchend(u,p,g){const v=this._zoomIn.touchend(u,p,g),x=this._zoomOut.touchend(u,p,g),A=this._tr;return v?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:A.zoom+1,around:A.unproject(v)},{originalEvent:u})}):x?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:D=>D.easeTo({duration:300,zoom:A.zoom-1,around:A.unproject(x)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xo{constructor(u){this._enabled=!!u.enable,this._moveStateManager=u.moveStateManager,this._clickTolerance=u.clickTolerance||1,this._moveFunction=u.move,this._activateOnStart=!!u.activateOnStart,u.assignEvents(this),this.reset()}reset(u){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(u)}_move(...u){const p=this._moveFunction(...u);if(p.bearingDelta||p.pitchDelta||p.around||p.panDelta)return this._active=!0,p}dragStart(u,p){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(u)&&(this._moveStateManager.startMove(u),this._lastPoint=p.length?p[0]:p,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(u,p){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(u.preventDefault(),!this._moveStateManager.isValidMoveEvent(u))return void this.reset(u);const v=p.length?p[0]:p;return!this._moved&&v.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(g,v))}dragEnd(u){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(u)&&(this._moved&&w.suppressClick(),this.reset(u))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const na={0:1,2:2};class ui{constructor(u){this._correctEvent=u.checkCorrectEvent}startMove(u){const p=w.mouseButton(u);this._eventButton=p}endMove(u){delete this._eventButton}isValidStartEvent(u){return this._correctEvent(u)}isValidMoveEvent(u){return!function(p,g){const v=na[g];return p.buttons===void 0||(p.buttons&v)!==v}(u,this._eventButton)}isValidEndEvent(u){return w.mouseButton(u)===this._eventButton}}class tn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(u){return u.targetTouches.length===1}_isSameTouchEvent(u){return u.targetTouches[0].identifier===this._firstTouch}startMove(u){this._firstTouch=u.targetTouches[0].identifier}endMove(u){delete this._firstTouch}isValidStartEvent(u){return this._isOneFingerTouch(u)}isValidMoveEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}isValidEndEvent(u){return this._isOneFingerTouch(u)&&this._isSameTouchEvent(u)}}const el=$=>{$.mousedown=$.dragStart,$.mousemoveWindow=$.dragMove,$.mouseup=$.dragEnd,$.contextmenu=function(u){u.preventDefault()}},ko=({enable:$,clickTolerance:u,bearingDegreesPerPixelMoved:p=.8})=>{const g=new ui({checkCorrectEvent:v=>w.mouseButton(v)===0&&v.ctrlKey||w.mouseButton(v)===2});return new xo({clickTolerance:u,move:(v,x)=>({bearingDelta:(x.x-v.x)*p}),moveStateManager:g,enable:$,assignEvents:el})},Co=({enable:$,clickTolerance:u,pitchDegreesPerPixelMoved:p=-.5})=>{const g=new ui({checkCorrectEvent:v=>w.mouseButton(v)===0&&v.ctrlKey||w.mouseButton(v)===2});return new xo({clickTolerance:u,move:(v,x)=>({pitchDelta:(x.y-v.y)*p}),moveStateManager:g,enable:$,assignEvents:el})};class Bu{constructor(u,p){this._clickTolerance=u.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(u,p,g){return this._calculateTransform(u,p,g)}touchmove(u,p,g){if(this._active&&!(g.length<this.minTouchs()))return u.preventDefault(),this._calculateTransform(u,p,g)}touchend(u,p,g){this._calculateTransform(u,p,g),this._active&&g.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,p,g){g.length>0&&(this._active=!0);const v=to(g,p),x=new o.P(0,0),A=new o.P(0,0);let D=0;for(const H in v){const X=v[H],J=this._touches[H];J&&(x._add(X),A._add(X.sub(J)),D++,v[H]=X)}if(this._touches=v,D<this.minTouchs()||!A.mag())return;const O=A.div(D);return this._sum._add(O),this._sum.mag()<this._clickTolerance?void 0:{around:x.div(D),panDelta:O}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xt{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(u,p,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([p[0],p[1]]))}touchmove(u,p,g){if(!this._firstTwoTouches)return;u.preventDefault();const[v,x]=this._firstTwoTouches,A=So(g,p,v),D=So(g,p,x);if(!A||!D)return;const O=this._aroundCenter?null:A.add(D).div(2);return this._move([A,D],O,u)}touchend(u,p,g){if(!this._firstTwoTouches)return;const[v,x]=this._firstTwoTouches,A=So(g,p,v),D=So(g,p,x);A&&D||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function So($,u,p){for(let g=0;g<$.length;g++)if($[g].identifier===p)return u[g]}function Nu($,u){return Math.log($/u)/Math.LN2}class Vu extends Xt{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,p){const g=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Nu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Nu(this._distance,g),pinchAround:p}}}function tl($,u){return 180*$.angleWith(u)/Math.PI}class ic extends Xt{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,p,g){const v=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:tl(this._vector,v),pinchAround:p}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const p=25/(Math.PI*this._minDiameter)*360,g=tl(u,this._startVector);return Math.abs(g)<p}}function nl($){return Math.abs($.y)>Math.abs($.x)}class Uu extends Xt{constructor(u){super(),this._currentTouchCount=0,this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,p,g){super.touchstart(u,p,g),this._currentTouchCount=g.length}_start(u){this._lastPoints=u,nl(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,p,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=u[0].sub(this._lastPoints[0]),x=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,x,g.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(v.y+x.y)/2*-.5}):void 0}gestureBeginsVertically(u,p,g){if(this._valid!==void 0)return this._valid;const v=u.mag()>=2,x=p.mag()>=2;if(!v&&!x)return;if(!v||!x)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const A=u.y>0==p.y>0;return nl(u)&&nl(p)&&A}}const vh={panStep:100,bearingStep:15,pitchStep:10};class Li{constructor(u){this._tr=new wo(u);const p=vh;this._panStep=p.panStep,this._bearingStep=p.bearingStep,this._pitchStep=p.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let p=0,g=0,v=0,x=0,A=0;switch(u.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:u.shiftKey?g=-1:(u.preventDefault(),x=-1);break;case 39:u.shiftKey?g=1:(u.preventDefault(),x=1);break;case 38:u.shiftKey?v=1:(u.preventDefault(),A=-1);break;case 40:u.shiftKey?v=-1:(u.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(g=0,v=0),{cameraAnimation:D=>{const O=this._tr;D.easeTo({duration:300,easeId:"keyboardHandler",easing:or,zoom:p?Math.round(O.zoom)+p*(u.shiftKey?2:1):O.zoom,bearing:O.bearing+g*this._bearingStep,pitch:O.pitch+v*this._pitchStep,offset:[-x*this._panStep,-A*this._panStep],center:O.center},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function or($){return $*(2-$)}const ra=4.000244140625;class rl{constructor(u,p){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=u,this._tr=new wo(u),this._triggerRenderFrame=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!u[this._map.cooperativeGestures._bypassKey])return;let p=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const g=b.now(),v=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,p!==0&&p%ra==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(v*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),u.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=u,this._delta-=p,this._active||this._start(u)),u.preventDefault()}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=w.mousePos(this._map.getCanvas(),u),g=this._tr;this._around=p.y>g.transform.height/2-g.transform.getHorizon()?o.M.convert(this._aroundCenter?g.center:g.unproject(p)):o.M.convert(g.center),this._aroundPoint=g.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._tr.transform;if(this._delta!==0){const D=this._type==="wheel"&&Math.abs(this._delta)>ra?this._wheelZoomRate:this._defaultZoomRate;let O=2/(1+Math.exp(-Math.abs(this._delta*D)));this._delta<0&&O!==0&&(O=1/O);const H=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(H*O))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,g=this._startZoom,v=this._easing;let x,A=!1;if(this._type==="wheel"&&g&&v){const D=Math.min((b.now()-this._lastWheelEventTime)/200,1),O=v(D);x=o.z.number(g,p,O),D<1?this._frameId||(this._frameId=!0):A=!0}else x=p,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:x-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let p=o.b7;if(this._prevEase){const g=this._prevEase,v=(b.now()-g.start)/g.duration,x=g.easing(v+.01)-g.easing(v),A=.27/Math.sqrt(x*x+1e-4)*.01,D=Math.sqrt(.0729-A*A);p=o.b6(A,D,.25,1)}return this._prevEase={start:b.now(),duration:u,easing:p},p}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class oc{constructor(u,p){this._clickZoom=u,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ju{constructor(u){this._tr=new wo(u),this.reset()}reset(){this._active=!1}dblclick(u,p){return u.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(u.shiftKey?-1:1),around:this._tr.unproject(p)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qu{constructor(){this._tap=new sc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(u,p,g){if(!this._swipePoint)if(this._tapTime){const v=p[0],x=u.timeStamp-this._tapTime<500,A=this._tapPoint.dist(v)<30;x&&A?g.length>0&&(this._swipePoint=v,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(u,p,g)}touchmove(u,p,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const v=p[0],x=v.y-this._swipePoint.y;return this._swipePoint=v,u.preventDefault(),this._active=!0,{zoomDelta:x/128}}}else this._tap.touchmove(u,p,g)}touchend(u,p,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const v=this._tap.touchend(u,p,g);v&&(this._tapTime=u.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gu{constructor(u,p,g){this._el=u,this._mousePan=p,this._touchPan=g}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ys{constructor(u,p,g){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=p,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class sa{constructor(u,p,g,v){this._el=u,this._touchZoom=p,this._touchRotate=g,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class un{constructor(u,p){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=u,this._options=p,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const u=this._map.getCanvasContainer();u.classList.add("maplibregl-cooperative-gestures"),this._container=w.create("div","maplibregl-cooperative-gesture-screen",u);let p=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(p=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=p,this._container.appendChild(v);const x=document.createElement("div");x.className="maplibregl-mobile-message",x.textContent=g,this._container.appendChild(x),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(w.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(u){this._onCooperativeGesture(u.touches.length===1)}wheel(u){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!u[this._bypassKey])}_onCooperativeGesture(u){this._enabled&&u&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const gn=$=>$.zoom||$.drag||$.pitch||$.rotate;class sl extends o.k{}function ia($){return $.panDelta&&$.panDelta.mag()||$.zoomDelta||$.bearingDelta||$.pitchDelta}class ac{constructor(u,p){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,x)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=v.type==="renderFrame"?void 0:v,D={needsRenderFrame:!1},O={},H={},X=v.touches,J=X?this._getMapTouches(X):void 0,_e=J?w.touchPos(this._map.getCanvas(),J):w.mousePos(this._map.getCanvas(),v);for(const{handlerName:Me,handler:we,allowed:Oe}of this._handlers){if(!we.isEnabled())continue;let Je;this._blockedByActive(H,Oe,Me)?we.reset():we[x||v.type]&&(Je=we[x||v.type](v,_e,J),this.mergeHandlerResult(D,O,Je,Me,A),Je&&Je.needsRenderFrame&&this._triggerRenderFrame()),(Je||we.isActive())&&(H[Me]=we)}const Ee={};for(const Me in this._previousActiveHandlers)H[Me]||(Ee[Me]=A);this._previousActiveHandlers=H,(Object.keys(Ee).length||ia(D))&&(this._changes.push([D,O,Ee]),this._triggerRenderFrame()),(Object.keys(H).length||ia(D))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Ie}=D;Ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Ie(this._map))},this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fu(u),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,x,A]of this._listeners)w.addEventListener(v,x,v===document?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[u,p,g]of this._listeners)w.removeEventListener(u,p,u===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(u){const p=this._map,g=p.getCanvasContainer();this._add("mapEvent",new Xs(p,u));const v=p.boxZoom=new Js(p,u);this._add("boxZoom",v),u.interactive&&u.boxZoom&&v.enable();const x=p.cooperativeGestures=new un(p,u.cooperativeGestures);this._add("cooperativeGestures",x),u.cooperativeGestures&&x.enable();const A=new gh(p),D=new ju(p);p.doubleClickZoom=new oc(D,A),this._add("tapZoom",A),this._add("clickZoom",D),u.interactive&&u.doubleClickZoom&&p.doubleClickZoom.enable();const O=new qu;this._add("tapDragZoom",O);const H=p.touchPitch=new Uu(p);this._add("touchPitch",H),u.interactive&&u.touchPitch&&p.touchPitch.enable(u.touchPitch);const X=ko(u),J=Co(u);p.dragRotate=new Ys(u,X,J),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",J,["mouseRotate"]),u.interactive&&u.dragRotate&&p.dragRotate.enable();const _e=(({enable:Je,clickTolerance:De})=>{const Ge=new ui({checkCorrectEvent:Ye=>w.mouseButton(Ye)===0&&!Ye.ctrlKey});return new xo({clickTolerance:De,move:(Ye,tt)=>({around:tt,panDelta:tt.sub(Ye)}),activateOnStart:!0,moveStateManager:Ge,enable:Je,assignEvents:el})})(u),Ee=new Bu(u,p);p.dragPan=new Gu(g,_e,Ee),this._add("mousePan",_e),this._add("touchPan",Ee,["touchZoom","touchRotate"]),u.interactive&&u.dragPan&&p.dragPan.enable(u.dragPan);const Ie=new ic,Me=new Vu;p.touchZoomRotate=new sa(g,Me,Ie,O),this._add("touchRotate",Ie,["touchPan","touchZoom"]),this._add("touchZoom",Me,["touchPan","touchRotate"]),u.interactive&&u.touchZoomRotate&&p.touchZoomRotate.enable(u.touchZoomRotate);const we=p.scrollZoom=new rl(p,()=>this._triggerRenderFrame());this._add("scrollZoom",we,["mousePan"]),u.interactive&&u.scrollZoom&&p.scrollZoom.enable(u.scrollZoom);const Oe=p.keyboard=new Li(p);this._add("keyboard",Oe),u.interactive&&u.keyboard&&p.keyboard.enable(),this._add("blockableMapEvent",new ci(p))}_add(u,p,g){this._handlers.push({handlerName:u,handler:p,allowed:g}),this._handlersById[u]=p}stop(u){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!gn(this._eventsInProgress)||this.isZooming()}_blockedByActive(u,p,g){for(const v in u)if(v!==g&&(!p||p.indexOf(v)<0))return!0;return!1}_getMapTouches(u){const p=[];for(const g of u)this._el.contains(g.target)&&p.push(g);return p}mergeHandlerResult(u,p,g,v,x){if(!g)return;o.e(u,g);const A={handlerName:v,originalEvent:g.originalEvent||x};g.zoomDelta!==void 0&&(p.zoom=A),g.panDelta!==void 0&&(p.drag=A),g.pitchDelta!==void 0&&(p.pitch=A),g.bearingDelta!==void 0&&(p.rotate=A)}_applyChanges(){const u={},p={},g={};for(const[v,x,A]of this._changes)v.panDelta&&(u.panDelta=(u.panDelta||new o.P(0,0))._add(v.panDelta)),v.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(u.around=v.around),v.pinchAround!==void 0&&(u.pinchAround=v.pinchAround),v.noInertia&&(u.noInertia=v.noInertia),o.e(p,x),o.e(g,A);this._updateMapTransform(u,p,g),this._changes=[]}_updateMapTransform(u,p,g){const v=this._map,x=v._getTransformForUpdate(),A=v.terrain;if(!(ia(u)||A&&this._terrainMovement))return this._fireEvents(p,g,!0);let{panDelta:D,zoomDelta:O,bearingDelta:H,pitchDelta:X,around:J,pinchAround:_e}=u;_e!==void 0&&(J=_e),v._stop(!0),J=J||v.transform.centerPoint;const Ee=x.pointLocation(D?J.sub(D):J);H&&(x.bearing+=H),X&&(x.pitch+=X),O&&(x.zoom+=O),A?this._terrainMovement||!p.drag&&!p.zoom?p.drag&&this._terrainMovement?x.center=x.pointLocation(x.centerPoint.sub(D)):x.setLocationAtPoint(Ee,J):(this._terrainMovement=!0,this._map._elevationFreeze=!0,x.setLocationAtPoint(Ee,J),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,x.recalculateZoom(v.terrain)})):x.setLocationAtPoint(Ee,J),v._applyUpdatedTransform(x),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(p,g,!0)}_fireEvents(u,p,g){const v=gn(this._eventsInProgress),x=gn(u),A={};for(const X in u){const{originalEvent:J}=u[X];this._eventsInProgress[X]||(A[`${X}start`]=J),this._eventsInProgress[X]=u[X]}!v&&x&&this._fireEvent("movestart",x.originalEvent);for(const X in A)this._fireEvent(X,A[X]);x&&this._fireEvent("move",x.originalEvent);for(const X in u){const{originalEvent:J}=u[X];this._fireEvent(X,J)}const D={};let O;for(const X in this._eventsInProgress){const{handlerName:J,originalEvent:_e}=this._eventsInProgress[X];this._handlersById[J].isActive()||(delete this._eventsInProgress[X],O=p[J]||_e,D[`${X}end`]=O)}for(const X in D)this._fireEvent(X,D[X]);const H=gn(this._eventsInProgress);if(g&&(v||x)&&!H){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),J=_e=>_e!==0&&-this._bearingSnap<_e&&_e<this._bearingSnap;!X||!X.essential&&b.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:O})),J(this._map.getBearing())&&this._map.resetNorth()):(J(X.bearing||this._map.getBearing())&&(X.bearing=0),X.freezeElevation=!0,this._map.easeTo(X,{originalEvent:O})),this._updatingCamera=!1}}_fireEvent(u,p){this._map.fire(new o.k(u,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new sl("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Cs extends o.E{constructor(u,p){super(),this._renderFrameCallback=()=>{const g=Math.min((b.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=p.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.M(this.transform.center.lng,this.transform.center.lat)}setCenter(u,p){return this.jumpTo({center:u},p)}panBy(u,p,g){return u=o.P.convert(u).mult(-1),this.panTo(this.transform.center,o.e({offset:u},p),g)}panTo(u,p,g){return this.easeTo(o.e({center:u},p),g)}getZoom(){return this.transform.zoom}setZoom(u,p){return this.jumpTo({zoom:u},p),this}zoomTo(u,p,g){return this.easeTo(o.e({zoom:u},p),g)}zoomIn(u,p){return this.zoomTo(this.getZoom()+1,u,p),this}zoomOut(u,p){return this.zoomTo(this.getZoom()-1,u,p),this}getBearing(){return this.transform.bearing}setBearing(u,p){return this.jumpTo({bearing:u},p),this}getPadding(){return this.transform.padding}setPadding(u,p){return this.jumpTo({padding:u},p),this}rotateTo(u,p,g){return this.easeTo(o.e({bearing:u},p),g)}resetNorth(u,p){return this.rotateTo(0,o.e({duration:1e3},u),p),this}resetNorthPitch(u,p){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},u),p),this}snapToNorth(u,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,p):this}getPitch(){return this.transform.pitch}setPitch(u,p){return this.jumpTo({pitch:u},p),this}cameraForBounds(u,p){u=et.convert(u);const g=p&&p.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),g,p)}_cameraForBoxAndBearing(u,p,g,v){const x={top:0,bottom:0,right:0,left:0};if(typeof(v=o.e({padding:x,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const Nt=v.padding;v.padding={top:Nt,bottom:Nt,right:Nt,left:Nt}}v.padding=o.e(x,v.padding);const A=this.transform,D=A.padding,O=new et(u,p),H=A.project(O.getNorthWest()),X=A.project(O.getNorthEast()),J=A.project(O.getSouthEast()),_e=A.project(O.getSouthWest()),Ee=o.b8(-g),Ie=H.rotate(Ee),Me=X.rotate(Ee),we=J.rotate(Ee),Oe=_e.rotate(Ee),Je=new o.P(Math.max(Ie.x,Me.x,Oe.x,we.x),Math.max(Ie.y,Me.y,Oe.y,we.y)),De=new o.P(Math.min(Ie.x,Me.x,Oe.x,we.x),Math.min(Ie.y,Me.y,Oe.y,we.y)),Ge=Je.sub(De),Ye=(A.width-(D.left+D.right+v.padding.left+v.padding.right))/Ge.x,tt=(A.height-(D.top+D.bottom+v.padding.top+v.padding.bottom))/Ge.y;if(tt<0||Ye<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const st=Math.min(A.scaleZoom(A.scale*Math.min(Ye,tt)),v.maxZoom),St=o.P.convert(v.offset),yt=new o.P((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(o.b8(g)),Rt=St.add(yt).mult(A.scale/A.zoomScale(st));return{center:A.unproject(H.add(J).div(2).sub(Rt)),zoom:st,bearing:g}}fitBounds(u,p,g){return this._fitInternal(this.cameraForBounds(u,p),p,g)}fitScreenCoordinates(u,p,g,v,x){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(u)),this.transform.pointLocation(o.P.convert(p)),g,v),v,x)}_fitInternal(u,p,g){return u?(delete(p=o.e(u,p)).padding,p.linear?this.easeTo(p,g):this.flyTo(p,g)):this}jumpTo(u,p){this.stop();const g=this._getTransformForUpdate();let v=!1,x=!1,A=!1;return"zoom"in u&&g.zoom!==+u.zoom&&(v=!0,g.zoom=+u.zoom),u.center!==void 0&&(g.center=o.M.convert(u.center)),"bearing"in u&&g.bearing!==+u.bearing&&(x=!0,g.bearing=+u.bearing),"pitch"in u&&g.pitch!==+u.pitch&&(A=!0,g.pitch=+u.pitch),u.padding==null||g.isPaddingEqual(u.padding)||(g.padding=u.padding),this._applyUpdatedTransform(g),this.fire(new o.k("movestart",p)).fire(new o.k("move",p)),v&&this.fire(new o.k("zoomstart",p)).fire(new o.k("zoom",p)).fire(new o.k("zoomend",p)),x&&this.fire(new o.k("rotatestart",p)).fire(new o.k("rotate",p)).fire(new o.k("rotateend",p)),A&&this.fire(new o.k("pitchstart",p)).fire(new o.k("pitch",p)).fire(new o.k("pitchend",p)),this.fire(new o.k("moveend",p))}calculateCameraOptionsFromTo(u,p,g,v=0){const x=o.Y.fromLngLat(u,p),A=o.Y.fromLngLat(g,v),D=A.x-x.x,O=A.y-x.y,H=A.z-x.z,X=Math.hypot(D,O,H);if(X===0)throw new Error("Can't calculate camera options with same From and To");const J=Math.hypot(D,O),_e=this.transform.scaleZoom(this.transform.cameraToCenterDistance/X/this.transform.tileSize),Ee=180*Math.atan2(D,-O)/Math.PI;let Ie=180*Math.acos(J/X)/Math.PI;return Ie=H<0?90-Ie:90+Ie,{center:A.toLngLat(),zoom:_e,pitch:Ie,bearing:Ee}}easeTo(u,p){var g;this._stop(!1,u.easeId),((u=o.e({offset:[0,0],duration:500,easing:o.b7},u)).animate===!1||!u.essential&&b.prefersReducedMotion)&&(u.duration=0);const v=this._getTransformForUpdate(),x=this.getZoom(),A=this.getBearing(),D=this.getPitch(),O=this.getPadding(),H="bearing"in u?this._normalizeBearing(u.bearing,A):A,X="pitch"in u?+u.pitch:D,J="padding"in u?u.padding:v.padding,_e=o.P.convert(u.offset);let Ee=v.centerPoint.add(_e);const Ie=v.pointLocation(Ee),{center:Me,zoom:we}=v.getConstrained(o.M.convert(u.center||Ie),(g=u.zoom)!==null&&g!==void 0?g:x);this._normalizeCenter(Me);const Oe=v.project(Ie),Je=v.project(Me).sub(Oe),De=v.zoomScale(we-x);let Ge,Ye;u.around&&(Ge=o.M.convert(u.around),Ye=v.locationPoint(Ge));const tt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||we!==x,this._rotating=this._rotating||A!==H,this._pitching=this._pitching||X!==D,this._padding=!v.isPaddingEqual(J),this._easeId=u.easeId,this._prepareEase(p,u.noMoveStart,tt),this.terrain&&this._prepareElevation(Me),this._ease(st=>{if(this._zooming&&(v.zoom=o.z.number(x,we,st)),this._rotating&&(v.bearing=o.z.number(A,H,st)),this._pitching&&(v.pitch=o.z.number(D,X,st)),this._padding&&(v.interpolatePadding(O,J,st),Ee=v.centerPoint.add(_e)),this.terrain&&!u.freezeElevation&&this._updateElevation(st),Ge)v.setLocationAtPoint(Ge,Ye);else{const St=v.zoomScale(v.zoom-x),yt=we>x?Math.min(2,De):Math.max(.5,De),Rt=Math.pow(yt,1-st),Nt=v.unproject(Oe.add(Je.mult(st*Rt)).mult(St));v.setLocationAtPoint(v.renderWorldCopies?Nt.wrap():Nt,Ee)}this._applyUpdatedTransform(v),this._fireMoveEvents(p)},st=>{this.terrain&&this._finalizeElevation(),this._afterEase(p,st)},u),this}_prepareEase(u,p,g={}){this._moving=!0,p||g.moving||this.fire(new o.k("movestart",u)),this._zooming&&!g.zooming&&this.fire(new o.k("zoomstart",u)),this._rotating&&!g.rotating&&this.fire(new o.k("rotatestart",u)),this._pitching&&!g.pitching&&this.fire(new o.k("pitchstart",u))}_prepareElevation(u){this._elevationCenter=u,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(u){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const p=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(u<1&&p!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=u*(g-(p-(g*u+this._elevationStart))/(1-u)),this._elevationTarget=p}this.transform.elevation=o.z.number(this._elevationStart,this._elevationTarget,u)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(u){if(!this.transformCameraUpdate)return;const p=u.clone(),{center:g,zoom:v,pitch:x,bearing:A,elevation:D}=this.transformCameraUpdate(p);g&&(p.center=g),v!==void 0&&(p.zoom=v),x!==void 0&&(p.pitch=x),A!==void 0&&(p.bearing=A),D!==void 0&&(p.elevation=D),this.transform.apply(p)}_fireMoveEvents(u){this.fire(new o.k("move",u)),this._zooming&&this.fire(new o.k("zoom",u)),this._rotating&&this.fire(new o.k("rotate",u)),this._pitching&&this.fire(new o.k("pitch",u))}_afterEase(u,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId;const g=this._zooming,v=this._rotating,x=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.k("zoomend",u)),v&&this.fire(new o.k("rotateend",u)),x&&this.fire(new o.k("pitchend",u)),this.fire(new o.k("moveend",u))}flyTo(u,p){var g;if(!u.essential&&b.prefersReducedMotion){const Nn=o.L(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Nn,p)}this.stop(),u=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b7},u);const v=this._getTransformForUpdate(),x=this.getZoom(),A=this.getBearing(),D=this.getPitch(),O=this.getPadding(),H="bearing"in u?this._normalizeBearing(u.bearing,A):A,X="pitch"in u?+u.pitch:D,J="padding"in u?u.padding:v.padding,_e=o.P.convert(u.offset);let Ee=v.centerPoint.add(_e);const Ie=v.pointLocation(Ee),{center:Me,zoom:we}=v.getConstrained(o.M.convert(u.center||Ie),(g=u.zoom)!==null&&g!==void 0?g:x);this._normalizeCenter(Me);const Oe=v.zoomScale(we-x),Je=v.project(Ie),De=v.project(Me).sub(Je);let Ge=u.curve;const Ye=Math.max(v.width,v.height),tt=Ye/Oe,st=De.mag();if("minZoom"in u){const Nn=o.ac(Math.min(u.minZoom,x,we),v.minZoom,v.maxZoom),$n=Ye/v.zoomScale(Nn-x);Ge=Math.sqrt($n/st*2)}const St=Ge*Ge;function yt(Nn){const $n=(tt*tt-Ye*Ye+(Nn?-1:1)*St*St*st*st)/(2*(Nn?tt:Ye)*St*st);return Math.log(Math.sqrt($n*$n+1)-$n)}function Rt(Nn){return(Math.exp(Nn)-Math.exp(-Nn))/2}function Nt(Nn){return(Math.exp(Nn)+Math.exp(-Nn))/2}const Pn=yt(!1);let Gt=function(Nn){return Nt(Pn)/Nt(Pn+Ge*Nn)},vn=function(Nn){return Ye*((Nt(Pn)*(Rt($n=Pn+Ge*Nn)/Nt($n))-Rt(Pn))/St)/st;var $n},An=(yt(!0)-Pn)/Ge;if(Math.abs(st)<1e-6||!isFinite(An)){if(Math.abs(Ye-tt)<1e-6)return this.easeTo(u,p);const Nn=tt<Ye?-1:1;An=Math.abs(Math.log(tt/Ye))/Ge,vn=function(){return 0},Gt=function($n){return Math.exp(Nn*Ge*$n)}}return u.duration="duration"in u?+u.duration:1e3*An/("screenSpeed"in u?+u.screenSpeed/Ge:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=A!==H,this._pitching=X!==D,this._padding=!v.isPaddingEqual(J),this._prepareEase(p,!1),this.terrain&&this._prepareElevation(Me),this._ease(Nn=>{const $n=Nn*An,Dn=1/Gt($n);v.zoom=Nn===1?we:x+v.scaleZoom(Dn),this._rotating&&(v.bearing=o.z.number(A,H,Nn)),this._pitching&&(v.pitch=o.z.number(D,X,Nn)),this._padding&&(v.interpolatePadding(O,J,Nn),Ee=v.centerPoint.add(_e)),this.terrain&&!u.freezeElevation&&this._updateElevation(Nn);const zn=Nn===1?Me:v.unproject(Je.add(De.mult(vn($n))).mult(Dn));v.setLocationAtPoint(v.renderWorldCopies?zn.wrap():zn,Ee),this._applyUpdatedTransform(v),this._fireMoveEvents(p)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(p)},u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,p)}if(!u){const g=this.handlers;g&&g.stop(!1)}return this}_ease(u,p,g){g.animate===!1||g.duration===0?(u(1),p()):(this._easeStart=b.now(),this._easeOptions=g,this._onEaseFrame=u,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(u,p){u=o.b1(u,-180,180);const g=Math.abs(u-p);return Math.abs(u-360-p)<g&&(u-=360),Math.abs(u+360-p)<g&&(u+=360),u}_normalizeCenter(u){const p=this.transform;if(!p.renderWorldCopies||p.lngRange)return;const g=u.lng-p.center.lng;u.lng+=g>180?-360:g<-180?360:0}queryTerrainElevation(u){return this.terrain?this.terrain.getElevationForLngLatZoom(o.M.convert(u),this.transform.tileZoom)-this.transform.elevation:null}}const lc={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Qs{constructor(u=lc){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=p=>{!p||p.sourceDataType!=="metadata"&&p.sourceDataType!=="visibility"&&p.dataType!=="style"&&p.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=u}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,p){const g=this._map._getUIString(`AttributionControl.${p}`);u.title=g,u.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const p=this._map.style.sourceCaches;for(const v in p){const x=p[v];if(x.used||x.usedForTerrain){const A=x.getSource();A.attribution&&u.indexOf(A.attribution)<0&&u.push(A.attribution)}}u=u.filter(v=>String(v).trim()),u.sort((v,x)=>v.length-x.length),u=u.filter((v,x)=>{for(let A=x+1;A<u.length;A++)if(u[A].indexOf(v)>=0)return!1;return!0});const g=u.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,u.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Hu{constructor(u={}){this._updateCompact=()=>{const p=this._container.children;if(p.length){const g=p[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=u}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const p=w.create("a","maplibregl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class oa{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const p=++this._id;return this._queue.push({callback:u,id:p,cancelled:!1}),p}remove(u){const p=this._currentlyRunning,g=p?this._queue.concat(p):this._queue;for(const v of g)if(v.id===u)return void(v.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const g of p)if(!g.cancelled&&(g.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var gr=o.X([{name:"a_pos3d",type:"Int16",components:3}]);class Sr extends o.E{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(u,p){this.sourceCache.update(u,p),this._renderableTilesKeys=[];const g={};for(const v of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))g[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.posMatrix=new Float64Array(16),o.aN(v.posMatrix,0,o.W,0,o.W,0,1),this._tiles[v.key]=new $s(v,this.tileSize));for(const v in this._tiles)g[v]||delete this._tiles[v]}freeRtt(u){for(const p in this._tiles){const g=this._tiles[p];(!u||g.tileID.equals(u)||g.tileID.isChildOf(u)||u.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const p={};for(const g of this._renderableTilesKeys){const v=this._tiles[g].tileID;if(v.canonical.equals(u.canonical)){const x=u.clone();x.posMatrix=new Float64Array(16),o.aN(x.posMatrix,0,o.W,0,o.W,0,1),p[g]=x}else if(v.canonical.isChildOf(u.canonical)){const x=u.clone();x.posMatrix=new Float64Array(16);const A=v.canonical.z-u.canonical.z,D=v.canonical.x-(v.canonical.x>>A<<A),O=v.canonical.y-(v.canonical.y>>A<<A),H=o.W>>A;o.aN(x.posMatrix,0,H,0,H,0,1),o.H(x.posMatrix,x.posMatrix,[-D*H,-O*H,0]),p[g]=x}else if(u.canonical.isChildOf(v.canonical)){const x=u.clone();x.posMatrix=new Float64Array(16);const A=u.canonical.z-v.canonical.z,D=u.canonical.x-(u.canonical.x>>A<<A),O=u.canonical.y-(u.canonical.y>>A<<A),H=o.W>>A;o.aN(x.posMatrix,0,o.W,0,o.W,0,1),o.H(x.posMatrix,x.posMatrix,[D*H,O*H,0]),o.J(x.posMatrix,x.posMatrix,[1/2**A,1/2**A,0]),p[g]=x}}return p}getSourceTile(u,p){const g=this.sourceCache._source;let v=u.overscaledZ-this.deltaZoom;if(v>g.maxzoom&&(v=g.maxzoom),v<g.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(v).key);let x=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!x||!x.dem)&&p)for(;v>=g.minzoom&&(!x||!x.dem);)x=this.sourceCache.getTileByID(u.scaledTo(v--).key);return x}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(p=>p.timeAdded>=u)}}class Zu{constructor(u,p,g){this.painter=u,this.sourceCache=new Sr(p),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(u,p,g,v=o.W){var x;if(!(p>=0&&p<v&&g>=0&&g<v))return 0;const A=this.getTerrainData(u),D=(x=A.tile)===null||x===void 0?void 0:x.dem;if(!D)return 0;const O=function(Ie,Me,we){var Oe=Me[0],Je=Me[1];return Ie[0]=we[0]*Oe+we[4]*Je+we[12],Ie[1]=we[1]*Oe+we[5]*Je+we[13],Ie}([],[p/v*o.W,g/v*o.W],A.u_terrain_matrix),H=[O[0]*D.dim,O[1]*D.dim],X=Math.floor(H[0]),J=Math.floor(H[1]),_e=H[0]-X,Ee=H[1]-J;return D.get(X,J)*(1-_e)*(1-Ee)+D.get(X+1,J)*_e*(1-Ee)+D.get(X,J+1)*(1-_e)*Ee+D.get(X+1,J+1)*_e*Ee}getElevationForLngLatZoom(u,p){const{tileID:g,mercatorX:v,mercatorY:x}=this._getOverscaledTileIDFromLngLatZoom(u,p);return this.getElevation(g,v%o.W,x%o.W,o.W)}getElevation(u,p,g,v=o.W){return this.getDEMElevation(u,p,g,v)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const v=this.painter.context,x=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ie(v,x,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ie(v,new o.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}const p=this.sourceCache.getSourceTile(u,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const v=this.painter.context;p.demTexture=this.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new ie(v,p.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),p.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const g=p&&p+p.tileID.key+u.key;if(g&&!this._demMatrixCache[g]){const v=this.sourceCache.sourceCache._source.maxzoom;let x=u.canonical.z-p.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=v?x=u.canonical.z-v:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=u.canonical.x-(u.canonical.x>>x<<x),D=u.canonical.y-(u.canonical.y>>x<<x),O=o.b9(new Float64Array(16),[1/(o.W<<x),1/(o.W<<x),0]);o.H(O,O,[A*o.W,D*o.W,0]),this._demMatrixCache[u.key]={matrix:O,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getFramebuffer(u){const p=this.painter,g=p.width/devicePixelRatio,v=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ie(p.context,{width:g,height:v,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ie(p.context,{width:g,height:v,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(g,v,!0,!1),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,g,v))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let x=0,A=0;x<this._coordsTextureSize;x++)for(let D=0;D<this._coordsTextureSize;D++,A+=4)p[A+0]=255&D,p[A+1]=255&x,p[A+2]=D>>8<<4|x>>8,p[A+3]=0;const g=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),v=new ie(u,g,u.gl.RGBA,{premultiply:!1});return v.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(u){this.painter.maybeDrawDepthAndCoords(!0);const p=new Uint8Array(4),g=this.painter.context,v=g.gl,x=Math.round(u.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(u.y*this.painter.pixelRatio/devicePixelRatio),D=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(x,D-A-1,1,1,v.RGBA,v.UNSIGNED_BYTE,p),g.bindFramebuffer.set(null);const O=p[0]+(p[2]>>4<<8),H=p[1]+((15&p[2])<<8),X=this.coordsIndex[255-p[3]],J=X&&this.sourceCache.getTileByID(X);if(!J)return null;const _e=this._coordsTextureSize,Ee=(1<<J.tileID.canonical.z)*_e;return new o.Y((J.tileID.canonical.x*_e+O)/Ee+J.tileID.wrap,(J.tileID.canonical.y*_e+H)/Ee,this.getElevation(J.tileID,O,H,_e))}depthAtPoint(u){const p=new Uint8Array(4),g=this.painter.context,v=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(u.x,this.painter.height/devicePixelRatio-u.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,p),g.bindFramebuffer.set(null),(p[0]/16777216+p[1]/65536+p[2]/256+p[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.painter.context,p=new o.ba,g=new o.aX,v=this.meshSize,x=o.W/v,A=v*v;for(let J=0;J<=v;J++)for(let _e=0;_e<=v;_e++)p.emplaceBack(_e*x,J*x,0);for(let J=0;J<A;J+=v+1)for(let _e=0;_e<v;_e++)g.emplaceBack(_e+J,v+_e+J+1,v+_e+J+2),g.emplaceBack(_e+J,v+_e+J+2,_e+J+1);const D=p.length,O=D+2*(v+1);for(const J of[0,1])for(let _e=0;_e<=v;_e++)for(const Ee of[0,1])p.emplaceBack(_e*x,J*o.W,Ee);for(let J=0;J<2*v;J+=2)g.emplaceBack(O+J,O+J+1,O+J+3),g.emplaceBack(O+J,O+J+3,O+J+2),g.emplaceBack(D+J,D+J+3,D+J+1),g.emplaceBack(D+J,D+J+2,D+J+3);const H=p.length,X=H+2*(v+1);for(const J of[0,1])for(let _e=0;_e<=v;_e++)for(const Ee of[0,1])p.emplaceBack(J*o.W,_e*x,Ee);for(let J=0;J<2*v;J+=2)g.emplaceBack(H+J,H+J+1,H+J+3),g.emplaceBack(H+J,H+J+3,H+J+2),g.emplaceBack(X+J,X+J+3,X+J+1),g.emplaceBack(X+J,X+J+2,X+J+3);return this._mesh={indexBuffer:u.createIndexBuffer(g),vertexBuffer:u.createVertexBuffer(p,gr.members),segments:o.$.simpleSegment(0,0,p.length,g.length)},this._mesh}getMeshFrameDelta(u){return 2*Math.PI*o.bb/Math.pow(2,u)/5}getMinTileElevationForLngLatZoom(u,p){var g;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(u,p);return(g=this.getMinMaxElevation(v).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(u){const p=this.getTerrainData(u).tile,g={minElevation:null,maxElevation:null};return p&&p.dem&&(g.minElevation=p.dem.min*this.exaggeration,g.maxElevation=p.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(u,p){const g=o.Y.fromLngLat(u.wrap()),v=(1<<p)*o.W,x=g.x*v,A=g.y*v,D=Math.floor(x/o.W),O=Math.floor(A/o.W);return{tileID:new o.Q(p,0,p,D,O),mercatorX:x,mercatorY:A}}}class aa{constructor(u,p,g){this._context=u,this._size=p,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const u of this._objects)u.texture.destroy(),u.fbo.destroy()}_createObject(u){const p=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new ie(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),p.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),p.colorAttachment.set(g.texture),{id:u,fbo:p,texture:g,stamp:-1,inUse:!1}}getObjectForId(u){return this._objects[u]}useObject(u){u.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(p=>u.id!==p),this._recentlyUsed.push(u.id)}stampObject(u){u.stamp=++this._stamp}getOrCreateFreeObject(){for(const p of this._recentlyUsed)if(!this._objects[p].inUse)return this._objects[p];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const u=this._createObject(this._objects.length);return this._objects.push(u),u}freeObject(u){u.inUse=!1}freeAllObjects(){for(const u of this._objects)this.freeObject(u)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(u=>!u.inUse)===!1}}const $i={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class cc{constructor(u,p){this.painter=u,this.terrain=p,this.pool=new aa(u.context,30,p.sourceCache.tileSize*p.qualityFactor)}destruct(){this.pool.destruct()}getTexture(u){return this.pool.getObjectForId(u.rtt[this._stacks.length-1].id).texture}prepareForRender(u,p){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=u._order.filter(g=>!u._layers[g].isHidden(p)),this._coordsDescendingInv={};for(const g in u.sourceCaches){this._coordsDescendingInv[g]={};const v=u.sourceCaches[g].getVisibleCoordinates();for(const x of v){const A=this.terrain.sourceCache.getTerrainCoords(x);for(const D in A)this._coordsDescendingInv[g][D]||(this._coordsDescendingInv[g][D]=[]),this._coordsDescendingInv[g][D].push(A[D])}}this._coordsDescendingInvStr={};for(const g of u._order){const v=u._layers[g],x=v.source;if($i[v.type]&&!this._coordsDescendingInvStr[x]){this._coordsDescendingInvStr[x]={};for(const A in this._coordsDescendingInv[x])this._coordsDescendingInvStr[x][A]=this._coordsDescendingInv[x][A].map(D=>D.key).sort().join()}}for(const g of this._renderableTiles)for(const v in this._coordsDescendingInvStr){const x=this._coordsDescendingInvStr[v][g.tileID.key];x&&x!==g.rttCoords[v]&&(g.rtt=[])}}renderLayer(u){if(u.isHidden(this.painter.transform.zoom))return!1;const p=u.type,g=this.painter,v=this._renderableLayerIds[this._renderableLayerIds.length-1]===u.id;if($i[p]&&(this._prevType&&$i[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(u.id),!v))return!0;if($i[this._prevType]||$i[p]&&v){this._prevType=p;const x=this._stacks.length-1,A=this._stacks[x]||[];for(const D of this._renderableTiles){if(this.pool.isFull()&&(Ya(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(D),D.rtt[x]){const H=this.pool.getObjectForId(D.rtt[x].id);if(H.stamp===D.rtt[x].stamp){this.pool.useObject(H);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),D.rtt[x]={id:O.id,stamp:O.stamp},g.context.bindFramebuffer.set(O.fbo.framebuffer),g.context.clear({color:o.aO.transparent,stencil:0}),g.currentStencilSource=void 0;for(let H=0;H<A.length;H++){const X=g.style._layers[A[H]],J=X.source?this._coordsDescendingInv[X.source][D.tileID.key]:[D.tileID];g.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),g._renderTileClippingMasks(X,J),g.renderLayer(g,g.style.sourceCaches[X.source],X,J),X.source&&(D.rttCoords[X.source]=this._coordsDescendingInvStr[X.source][D.tileID.key])}}return Ya(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),$i[p]}return!1}}const uc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},fc=l,la={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:lc,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},il=$=>{$.touchstart=$.dragStart,$.touchmoveWindow=$.dragMove,$.touchend=$.dragEnd},hc={showCompass:!0,showZoom:!0,visualizePitch:!1};class dc{constructor(u,p,g=!1){this.mousedown=A=>{this.startMouse(o.e({},A,{ctrlKey:!0,preventDefault:()=>A.preventDefault()}),w.mousePos(this.element,A)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.moveMouse(A,w.mousePos(this.element,A))},this.mouseup=A=>{this.mouseRotate.dragEnd(A),this.mousePitch&&this.mousePitch.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,A.targetTouches)[0],this.startTouch(A,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,A.targetTouches)[0],this.moveTouch(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const v=u.dragRotate._mouseRotate.getClickTolerance(),x=u.dragRotate._mousePitch.getClickTolerance();this.element=p,this.mouseRotate=ko({clickTolerance:v,enable:!0}),this.touchRotate=(({enable:A,clickTolerance:D,bearingDegreesPerPixelMoved:O=.8})=>{const H=new tn;return new xo({clickTolerance:D,move:(X,J)=>({bearingDelta:(J.x-X.x)*O}),moveStateManager:H,enable:A,assignEvents:il})})({clickTolerance:v,enable:!0}),this.map=u,g&&(this.mousePitch=Co({clickTolerance:x,enable:!0}),this.touchPitch=(({enable:A,clickTolerance:D,pitchDegreesPerPixelMoved:O=-.5})=>{const H=new tn;return new xo({clickTolerance:D,move:(X,J)=>({pitchDelta:(J.y-X.y)*O}),moveStateManager:H,enable:A,assignEvents:il})})({clickTolerance:x,enable:!0})),w.addEventListener(p,"mousedown",this.mousedown),w.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(p,"touchcancel",this.reset)}startMouse(u,p){this.mouseRotate.dragStart(u,p),this.mousePitch&&this.mousePitch.dragStart(u,p),w.disableDrag()}startTouch(u,p){this.touchRotate.dragStart(u,p),this.touchPitch&&this.touchPitch.dragStart(u,p),w.disableDrag()}moveMouse(u,p){const g=this.map,{bearingDelta:v}=this.mouseRotate.dragMove(u,p)||{};if(v&&g.setBearing(g.getBearing()+v),this.mousePitch){const{pitchDelta:x}=this.mousePitch.dragMove(u,p)||{};x&&g.setPitch(g.getPitch()+x)}}moveTouch(u,p){const g=this.map,{bearingDelta:v}=this.touchRotate.dragMove(u,p)||{};if(v&&g.setBearing(g.getBearing()+v),this.touchPitch){const{pitchDelta:x}=this.touchPitch.dragMove(u,p)||{};x&&g.setPitch(g.getPitch()+x)}}off(){const u=this.element;w.removeEventListener(u,"mousedown",this.mousedown),w.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let wi;function ol($,u,p){const g=new o.M($.lng,$.lat);if($=new o.M($.lng,$.lat),u){const v=new o.M($.lng-360,$.lat),x=new o.M($.lng+360,$.lat),A=p.locationPoint($).distSqr(u);p.locationPoint(v).distSqr(u)<A?$=v:p.locationPoint(x).distSqr(u)<A&&($=x)}for(;Math.abs($.lng-p.center.lng)>180;){const v=p.locationPoint($);if(v.x>=0&&v.y>=0&&v.x<=p.width&&v.y<=p.height)break;$.lng>p.center.lng?$.lng-=360:$.lng+=360}return $.lng!==g.lng&&p.locationPoint($).y>p.height/2-p.getHorizon()?$:g}const ca={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function al($,u,p){const g=$.classList;for(const v in ca)g.remove(`maplibregl-${p}-anchor-${v}`);g.add(`maplibregl-${p}-anchor-${u}`)}class ua extends o.E{constructor(u){if(super(),this._onKeyPress=p=>{const g=p.code,v=p.charCode||p.keyCode;g!=="Space"&&g!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=p=>{const g=p.originalEvent.target,v=this._element;this._popup&&(g===v||v.contains(g))&&this.togglePopup()},this._update=p=>{var g;if(!this._map)return;const v=this._map.loaded()&&!this._map.isMoving();((p==null?void 0:p.type)==="terrain"||(p==null?void 0:p.type)==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?ol(this._lngLat,this._flatPos,this._map.transform):(g=this._lngLat)===null||g===void 0?void 0:g.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),p&&p.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${ca[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${x}`),b.frameAsync(new AbortController).then(()=>{this._updateOpacity(p&&p.type==="moveend")}).catch(()=>{})},this._onMove=p=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=p.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=p.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=p=>{this._element.contains(p.originalEvent.target)&&(p.preventDefault(),this._positionDelta=p.point.sub(this._pos).add(this._offset),this._pointerdownPos=p.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(u==null?void 0:u.opacity,u==null?void 0:u.opacityWhenCovered),u&&u.element)this._element=u.element,this._offset=o.P.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const p=w.createNS("http://www.w3.org/2000/svg","svg"),g=41,v=27;p.setAttributeNS(null,"display","block"),p.setAttributeNS(null,"height",`${g}px`),p.setAttributeNS(null,"width",`${v}px`),p.setAttributeNS(null,"viewBox",`0 0 ${v} ${g}`);const x=w.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const A=w.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const D=w.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"transform","translate(3.0, 29.0)"),D.setAttributeNS(null,"fill","#000000");const O=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Oe of O){const Je=w.createNS("http://www.w3.org/2000/svg","ellipse");Je.setAttributeNS(null,"opacity","0.04"),Je.setAttributeNS(null,"cx","10.5"),Je.setAttributeNS(null,"cy","5.80029008"),Je.setAttributeNS(null,"rx",Oe.rx),Je.setAttributeNS(null,"ry",Oe.ry),D.appendChild(Je)}const H=w.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const X=w.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(X);const J=w.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");const _e=w.createNS("http://www.w3.org/2000/svg","path");_e.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(_e);const Ee=w.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ee.setAttributeNS(null,"fill","#FFFFFF");const Ie=w.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Me=w.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#000000"),Me.setAttributeNS(null,"opacity","0.25"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962");const we=w.createNS("http://www.w3.org/2000/svg","circle");we.setAttributeNS(null,"fill","#FFFFFF"),we.setAttributeNS(null,"cx","5.5"),we.setAttributeNS(null,"cy","5.5"),we.setAttributeNS(null,"r","5.4999962"),Ie.appendChild(Me),Ie.appendChild(we),A.appendChild(D),A.appendChild(H),A.appendChild(J),A.appendChild(Ee),A.appendChild(Ie),p.appendChild(A),p.setAttributeNS(null,"height",g*this._scale+"px"),p.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(p),this._offset=o.P.convert(u&&u.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",p=>{p.preventDefault()}),this._element.addEventListener("mousedown",p=>{p.preventDefault()}),al(this._element,this._anchor,"marker"),u&&u.className)for(const p of u.className.split(" "))this._element.classList.add(p);this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),u.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=o.M.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const v=Math.abs(13.5)/Math.SQRT2;u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const u=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:u?(u.isOpen()?u.remove():(u.setLngLat(this._lngLat),u.addTo(this._map)),this):this}_updateOpacity(u=!1){var p,g;if(!(!((p=this._map)===null||p===void 0)&&p.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(u)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const v=this._map,x=v.terrain.depthAtPoint(this._pos),A=v.terrain.getElevationForLngLatZoom(this._lngLat,v.transform.tileZoom);if(v.transform.lngLatToCameraDepth(this._lngLat,A)-x<.006)return void(this._element.style.opacity=this._opacity);const D=-this._offset.y/v.transform._pixelPerMeter,O=Math.sin(v.getPitch()*Math.PI/180)*D,H=v.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),X=v.transform.lngLatToCameraDepth(this._lngLat,A+O)-H>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&X&&this._popup.remove(),this._element.style.opacity=X?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(u){return this._offset=o.P.convert(u),this._update(),this}addClassName(u){this._element.classList.add(u)}removeClassName(u){this._element.classList.remove(u)}toggleClassName(u){return this._element.classList.toggle(u)}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(u,p){return u===void 0&&p===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),u!==void 0&&(this._opacity=u),p!==void 0&&(this._opacityWhenCovered=p),this._map&&this._updateOpacity(!0),this}}const ll={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let To=0,no=!1;const cl={maxWidth:100,unit:"metric"};function ul($,u,p){const g=p&&p.maxWidth||100,v=$._container.clientHeight/2,x=$.unproject([0,v]),A=$.unproject([g,v]),D=x.distanceTo(A);if(p&&p.unit==="imperial"){const O=3.2808*D;O>5280?ro(u,g,O/5280,$._getUIString("ScaleControl.Miles")):ro(u,g,O,$._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?ro(u,g,D/1852,$._getUIString("ScaleControl.NauticalMiles")):D>=1e3?ro(u,g,D/1e3,$._getUIString("ScaleControl.Kilometers")):ro(u,g,D,$._getUIString("ScaleControl.Meters"))}function ro($,u,p,g){const v=function(x){const A=Math.pow(10,`${Math.floor(x)}`.length-1);let D=x/A;return D=D>=10?10:D>=5?5:D>=3?3:D>=2?2:D>=1?1:function(O){const H=Math.pow(10,Math.ceil(-Math.log(O)/Math.LN10));return Math.round(O*H)/H}(D),A*D}(p);$.style.width=u*(v/p)+"px",$.innerHTML=`${v}&nbsp;${g}`}const pc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},mc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function fl($){if($){if(typeof $=="number"){const u=Math.round(Math.abs($)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,$),"top-left":new o.P(u,u),"top-right":new o.P(-u,u),bottom:new o.P(0,-$),"bottom-left":new o.P(u,-u),"bottom-right":new o.P(-u,-u),left:new o.P($,0),right:new o.P(-$,0)}}if($ instanceof o.P||Array.isArray($)){const u=o.P.convert($);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:o.P.convert($.center||[0,0]),top:o.P.convert($.top||[0,0]),"top-left":o.P.convert($["top-left"]||[0,0]),"top-right":o.P.convert($["top-right"]||[0,0]),bottom:o.P.convert($.bottom||[0,0]),"bottom-left":o.P.convert($["bottom-left"]||[0,0]),"bottom-right":o.P.convert($["bottom-right"]||[0,0]),left:o.P.convert($.left||[0,0]),right:o.P.convert($.right||[0,0])}}return fl(new o.P(0,0))}const Wu=l;a.AJAXError=o.be,a.Evented=o.E,a.LngLat=o.M,a.MercatorCoordinate=o.Y,a.Point=o.P,a.addProtocol=o.bf,a.config=o.a,a.removeProtocol=o.bg,a.AttributionControl=Qs,a.BoxZoomHandler=Js,a.CanvasSource=Ds,a.CooperativeGesturesHandler=un,a.DoubleClickZoomHandler=oc,a.DragPanHandler=Gu,a.DragRotateHandler=Ys,a.EdgeInsets=$o,a.FullscreenControl=class extends o.E{constructor($={}){super(),this._onFullscreenChange=()=>{var u;let p=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((u=p==null?void 0:p.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,$&&$.container&&($.container instanceof HTMLElement?this._container=$.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd($){return this._map=$,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const $=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",$).setAttribute("aria-hidden","true"),$.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const $=this._getTitle();this._fullscreenButton.setAttribute("aria-label",$),this._fullscreenButton.title=$}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},a.GeoJSONSource=br,a.GeolocateControl=class extends o.E{constructor($){super(),this._onSuccess=u=>{if(this._map){if(this._isOutOfMapMaxBounds(u))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",u)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=u,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(u),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(u),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",u)),this._finish()}},this._updateCamera=u=>{const p=new o.M(u.coords.longitude,u.coords.latitude),g=u.coords.accuracy,v=this._map.getBearing(),x=o.e({bearing:v},this.options.fitBoundsOptions),A=et.fromLngLat(p,g);this._map.fitBounds(A,x,{geolocateSource:!0})},this._updateMarker=u=>{if(u){const p=new o.M(u.coords.longitude,u.coords.latitude);this._accuracyCircleMarker.setLngLat(p).addTo(this._map),this._userLocationDotMarker.setLngLat(p).addTo(this._map),this._accuracy=u.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=u=>{if(this._map){if(this.options.trackUserLocation)if(u.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(u.code===3&&no)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",u)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=u=>{if(this._map){if(this._container.addEventListener("contextmenu",p=>p.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",u===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const p=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}else{const p=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=p,this._geolocateButton.setAttribute("aria-label",p)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ua({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ua({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",p=>{p.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p.originalEvent&&p.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")))})}},this.options=o.e({},ll,$)}onAdd($){return this._map=$,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return o._(this,arguments,void 0,function*(u=!1){if(wi!==void 0&&!u)return wi;if(window.navigator.permissions===void 0)return wi=!!window.navigator.geolocation,wi;try{wi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{wi=!!window.navigator.geolocation}return wi})}().then(u=>this._setupUI(u)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,To=0,no=!1}_isOutOfMapMaxBounds($){const u=this._map.getMaxBounds(),p=$.coords;return u&&(p.longitude<u.getWest()||p.longitude>u.getEast()||p.latitude<u.getSouth()||p.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const $=this._map.getBounds(),u=$.getSouthEast(),p=$.getNorthEast(),g=u.distanceTo(p),v=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":To--,no=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let $;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),To++,To>1?($={maximumAge:6e5,timeout:0},no=!0):($=this.options.positionOptions,no=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,$)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},a.Hash=nc,a.ImageSource=Gn,a.KeyboardHandler=Li,a.LngLatBounds=et,a.LogoControl=Hu,a.Map=class extends Cs{constructor($){if(o.bc.mark(o.bd.create),($=o.e({},la,$)).minZoom!=null&&$.maxZoom!=null&&$.minZoom>$.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if($.minPitch!=null&&$.maxPitch!=null&&$.minPitch>$.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if($.minPitch!=null&&$.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if($.maxPitch!=null&&$.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Qa($.minZoom,$.maxZoom,$.minPitch,$.maxPitch,$.renderWorldCopies),{bearingSnap:$.bearingSnap}),this._contextLost=u=>{u.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:u}))},this._contextRestored=u=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:u}))},this._onMapScroll=u=>{if(u.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=$.interactive,this._maxTileCacheSize=$.maxTileCacheSize,this._maxTileCacheZoomLevels=$.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=$.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=$.preserveDrawingBuffer,this._antialias=$.antialias,this._trackResize=$.trackResize,this._bearingSnap=$.bearingSnap,this._refreshExpiredTiles=$.refreshExpiredTiles,this._fadeDuration=$.fadeDuration,this._crossSourceCollisions=$.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=$.collectResourceTiming,this._renderTaskQueue=new oa,this._controls=[],this._mapId=o.a3(),this._locale=o.e({},uc,$.locale),this._clickTolerance=$.clickTolerance,this._overridePixelRatio=$.pixelRatio,this._maxCanvasSize=$.maxCanvasSize,this.transformCameraUpdate=$.transformCameraUpdate,this._imageQueueHandle=Q.addThrottleControl(()=>this.isMoving()),this._requestManager=new ge($.transformRequest),typeof $.container=="string"){if(this._container=document.getElementById($.container),!this._container)throw new Error(`Container '${$.container}' not found.`)}else{if(!($.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=$.container}if($.maxBounds&&this.setMaxBounds($.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let u=!1;const p=tc(g=>{this._trackResize&&!this._removed&&this.resize(g)._update()},50);this._resizeObserver=new ResizeObserver(g=>{u?p(g):u=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ac(this,$),this._hash=$.hash&&new nc(typeof $.hash=="string"&&$.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:$.center,zoom:$.zoom,bearing:$.bearing,pitch:$.pitch}),$.bounds&&(this.resize(),this.fitBounds($.bounds,o.e({},$.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=$.localIdeographFontFamily,this._validateStyle=$.validateStyle,$.style&&this.setStyle($.style,{localIdeographFontFamily:$.localIdeographFontFamily}),$.attributionControl&&this.addControl(new Qs(typeof $.attributionControl=="boolean"?void 0:$.attributionControl)),$.maplibreLogo&&this.addControl(new Hu,$.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new o.k(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new o.k(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new o.k("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl($,u){if(u===void 0&&(u=$.getDefaultPosition?$.getDefaultPosition():"top-right"),!$||!$.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=$.onAdd(this);this._controls.push($);const g=this._controlPositions[u];return u.indexOf("bottom")!==-1?g.insertBefore(p,g.firstChild):g.appendChild(p),this}removeControl($){if(!$||!$.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf($);return u>-1&&this._controls.splice(u,1),$.onRemove(this),this}hasControl($){return this._controls.indexOf($)>-1}calculateCameraOptionsFromTo($,u,p,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(p,this.transform.tileZoom)),super.calculateCameraOptionsFromTo($,u,p,g)}resize($){var u;const p=this._containerDimensions(),g=p[0],v=p[1],x=this._getClampedPixelRatio(g,v);if(this._resizeCanvas(g,v,x),this.painter.resize(g,v,x),this.painter.overLimit()){const D=this.painter.context.gl;this._maxCanvasSize=[D.drawingBufferWidth,D.drawingBufferHeight];const O=this._getClampedPixelRatio(g,v);this._resizeCanvas(g,v,O),this.painter.resize(g,v,O)}this.transform.resize(g,v),(u=this._requestedCameraState)===null||u===void 0||u.resize(g,v);const A=!this._moving;return A&&(this.stop(),this.fire(new o.k("movestart",$)).fire(new o.k("move",$))),this.fire(new o.k("resize",$)),A&&this.fire(new o.k("moveend",$)),this}_getClampedPixelRatio($,u){const{0:p,1:g}=this._maxCanvasSize,v=this.getPixelRatio(),x=$*v,A=u*v;return Math.min(x>p?p/x:1,A>g?g/A:1)*v}getPixelRatio(){var $;return($=this._overridePixelRatio)!==null&&$!==void 0?$:devicePixelRatio}setPixelRatio($){this._overridePixelRatio=$,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds($){return this.transform.setMaxBounds(et.convert($)),this._update()}setMinZoom($){if(($=$??-2)>=-2&&$<=this.transform.maxZoom)return this.transform.minZoom=$,this._update(),this.getZoom()<$&&this.setZoom($),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom($){if(($=$??22)>=this.transform.minZoom)return this.transform.maxZoom=$,this._update(),this.getZoom()>$&&this.setZoom($),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch($){if(($=$??0)<0)throw new Error("minPitch must be greater than or equal to 0");if($>=0&&$<=this.transform.maxPitch)return this.transform.minPitch=$,this._update(),this.getPitch()<$&&this.setPitch($),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch($){if(($=$??60)>85)throw new Error("maxPitch must be less than or equal to 85");if($>=this.transform.minPitch)return this.transform.maxPitch=$,this._update(),this.getPitch()>$&&this.setPitch($),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies($){return this.transform.renderWorldCopies=$,this._update()}project($){return this.transform.locationPoint(o.M.convert($),this.style&&this.terrain)}unproject($){return this.transform.pointLocation(o.P.convert($),this.terrain)}isMoving(){var $;return this._moving||(($=this.handlers)===null||$===void 0?void 0:$.isMoving())}isZooming(){var $;return this._zooming||(($=this.handlers)===null||$===void 0?void 0:$.isZooming())}isRotating(){var $;return this._rotating||(($=this.handlers)===null||$===void 0?void 0:$.isRotating())}_createDelegatedListener($,u,p){if($==="mouseenter"||$==="mouseover"){let g=!1;return{layer:u,listener:p,delegates:{mousemove:x=>{const A=this.getLayer(u)?this.queryRenderedFeatures(x.point,{layers:[u]}):[];A.length?g||(g=!0,p.call(this,new ks($,this,x.originalEvent,{features:A}))):g=!1},mouseout:()=>{g=!1}}}}if($==="mouseleave"||$==="mouseout"){let g=!1;return{layer:u,listener:p,delegates:{mousemove:A=>{(this.getLayer(u)?this.queryRenderedFeatures(A.point,{layers:[u]}):[]).length?g=!0:g&&(g=!1,p.call(this,new ks($,this,A.originalEvent)))},mouseout:A=>{g&&(g=!1,p.call(this,new ks($,this,A.originalEvent)))}}}}{const g=v=>{const x=this.getLayer(u)?this.queryRenderedFeatures(v.point,{layers:[u]}):[];x.length&&(v.features=x,p.call(this,v),delete v.features)};return{layer:u,listener:p,delegates:{[$]:g}}}}on($,u,p){if(p===void 0)return super.on($,u);const g=this._createDelegatedListener($,u,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[$]=this._delegatedListeners[$]||[],this._delegatedListeners[$].push(g);for(const v in g.delegates)this.on(v,g.delegates[v]);return this}once($,u,p){if(p===void 0)return super.once($,u);const g=this._createDelegatedListener($,u,p);for(const v in g.delegates)this.once(v,g.delegates[v]);return this}off($,u,p){return p===void 0?super.off($,u):(this._delegatedListeners&&this._delegatedListeners[$]&&(g=>{const v=this._delegatedListeners[$];for(let x=0;x<v.length;x++){const A=v[x];if(A.layer===u&&A.listener===p){for(const D in A.delegates)this.off(D,A.delegates[D]);return v.splice(x,1),this}}})(),this)}queryRenderedFeatures($,u){if(!this.style)return[];let p;const g=$ instanceof o.P||Array.isArray($),v=g?$:[[0,0],[this.transform.width,this.transform.height]];if(u=u||(g?{}:$)||{},v instanceof o.P||typeof v[0]=="number")p=[o.P.convert(v)];else{const x=o.P.convert(v[0]),A=o.P.convert(v[1]);p=[x,new o.P(A.x,x.y),A,new o.P(x.x,A.y),x]}return this.style.queryRenderedFeatures(p,u,this.transform)}querySourceFeatures($,u){return this.style.querySourceFeatures($,u)}setStyle($,u){return(u=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&$?(this._diffStyle($,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle($,u))}setTransformRequest($){return this._requestManager.setTransformRequest($),this}_getUIString($){const u=this._locale[$];if(u==null)throw new Error(`Missing UI string '${$}'`);return u}_updateStyle($,u){if(u.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle($,u));const p=this.style&&u.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!$)),$?(this.style=new Ls(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof $=="string"?this.style.loadURL($,u,p):this.style.loadJSON($,u,p),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ls(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle($,u){if(typeof $=="string"){const p=this._requestManager.transformRequest($,"Style");o.h(p,new AbortController).then(g=>{this._updateDiff(g.data,u)}).catch(g=>{g&&this.fire(new o.j(g))})}else typeof $=="object"&&this._updateDiff($,u)}_updateDiff($,u){try{this.style.setState($,u)&&this._update(!0)}catch(p){o.w(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle($,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource($,u){return this._lazyInitEmptyStyle(),this.style.addSource($,u),this._update(!0)}isSourceLoaded($){const u=this.style&&this.style.sourceCaches[$];if(u!==void 0)return u.loaded();this.fire(new o.j(new Error(`There is no source with ID '${$}'`)))}setTerrain($){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),$){const u=this.style.sourceCaches[$.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${$.source}`);this.terrain===null&&u.reload();for(const p in this.style._layers){const g=this.style._layers[p];g.type==="hillshade"&&g.source===$.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Zu(this.painter,u,$),this.painter.renderToTexture=new cc(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=p=>{p.dataType==="style"?this.terrain.sourceCache.freeRtt():p.dataType==="source"&&p.tile&&(p.sourceId!==$.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(p.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:$})),this}getTerrain(){var $,u;return(u=($=this.terrain)===null||$===void 0?void 0:$.options)!==null&&u!==void 0?u:null}areTilesLoaded(){const $=this.style&&this.style.sourceCaches;for(const u in $){const p=$[u]._tiles;for(const g in p){const v=p[g];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}removeSource($){return this.style.removeSource($),this._update(!0)}getSource($){return this.style.getSource($)}addImage($,u,p={}){const{pixelRatio:g=1,sdf:v=!1,stretchX:x,stretchY:A,content:D}=p;if(this._lazyInitEmptyStyle(),!(u instanceof HTMLImageElement||o.b(u))){if(u.width===void 0||u.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:H,data:X}=u,J=u;return this.style.addImage($,{data:new o.R({width:O,height:H},new Uint8Array(X)),pixelRatio:g,stretchX:x,stretchY:A,content:D,sdf:v,version:0,userImage:J}),J.onAdd&&J.onAdd(this,$),this}}{const{width:O,height:H,data:X}=b.getImageData(u);this.style.addImage($,{data:new o.R({width:O,height:H},X),pixelRatio:g,stretchX:x,stretchY:A,content:D,sdf:v,version:0})}}updateImage($,u){const p=this.style.getImage($);if(!p)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=u instanceof HTMLImageElement||o.b(u)?b.getImageData(u):u,{width:v,height:x,data:A}=g;if(v===void 0||x===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==p.data.width||x!==p.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const D=!(u instanceof HTMLImageElement||o.b(u));return p.data.replace(A,D),this.style.updateImage($,p),this}getImage($){return this.style.getImage($)}hasImage($){return $?!!this.style.getImage($):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage($){this.style.removeImage($)}loadImage($){return Q.getImage(this._requestManager.transformRequest($,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer($,u){return this._lazyInitEmptyStyle(),this.style.addLayer($,u),this._update(!0)}moveLayer($,u){return this.style.moveLayer($,u),this._update(!0)}removeLayer($){return this.style.removeLayer($),this._update(!0)}getLayer($){return this.style.getLayer($)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange($,u,p){return this.style.setLayerZoomRange($,u,p),this._update(!0)}setFilter($,u,p={}){return this.style.setFilter($,u,p),this._update(!0)}getFilter($){return this.style.getFilter($)}setPaintProperty($,u,p,g={}){return this.style.setPaintProperty($,u,p,g),this._update(!0)}getPaintProperty($,u){return this.style.getPaintProperty($,u)}setLayoutProperty($,u,p,g={}){return this.style.setLayoutProperty($,u,p,g),this._update(!0)}getLayoutProperty($,u){return this.style.getLayoutProperty($,u)}setGlyphs($,u={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs($,u),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite($,u,p={}){return this._lazyInitEmptyStyle(),this.style.addSprite($,u,p,g=>{g||this._update(!0)}),this}removeSprite($){return this._lazyInitEmptyStyle(),this.style.removeSprite($),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite($,u={}){return this._lazyInitEmptyStyle(),this.style.setSprite($,u,p=>{p||this._update(!0)}),this}setLight($,u={}){return this._lazyInitEmptyStyle(),this.style.setLight($,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState($,u){return this.style.setFeatureState($,u),this._update()}removeFeatureState($,u){return this.style.removeFeatureState($,u),this._update()}getFeatureState($){return this.style.getFeatureState($)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let $=0,u=0;return this._container&&($=this._container.clientWidth||400,u=this._container.clientHeight||300),[$,u]}_setupContainer(){const $=this._container;$.classList.add("maplibregl-map");const u=this._canvasContainer=w.create("div","maplibregl-canvas-container",$);this._interactive&&u.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const p=this._containerDimensions(),g=this._getClampedPixelRatio(p[0],p[1]);this._resizeCanvas(p[0],p[1],g);const v=this._controlContainer=w.create("div","maplibregl-control-container",$),x=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(A=>{x[A]=w.create("div",`maplibregl-ctrl-${A} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas($,u,p){this._canvas.width=Math.floor(p*$),this._canvas.height=Math.floor(p*u),this._canvas.style.width=`${$}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const $={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let u=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{u={requestedAttributes:$},g&&(u.statusMessage=g.statusMessage,u.type=g.type)},{once:!0});const p=this._canvas.getContext("webgl2",$)||this._canvas.getContext("webgl",$);if(!p){const g="Failed to initialize WebGL";throw u?(u.message=g,new Error(JSON.stringify(u))):new Error(g)}this.painter=new zu(p,this.transform),E.testSupport(p)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update($){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||$,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame($){return this._update(),this._renderTaskQueue.add($)}_cancelRenderFrame($){this._renderTaskQueue.remove($)}_render($){const u=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run($),this._removed)return;let p=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const v=this.transform.zoom,x=b.now();this.style.zoomHistory.update(v,x);const A=new o.a8(v,{now:x,fadeDuration:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),D=A.crossFadingFactor();D===1&&D===this._crossFadingFactor||(p=!0,this._crossFadingFactor=D),this.style.update(A)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,u,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:u,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bc.mark(o.bd.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||p)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const g=this._sourcesDirty||this._styleDirty||this._placementDirty;return g||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,o.bc.mark(o.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var $;this._hash&&this._hash.remove();for(const p of this._controls)p.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Q.removeThrottleControl(this._imageQueueHandle),($=this._resizeObserver)===null||$===void 0||$.disconnect();const u=this.painter.context.gl.getExtension("WEBGL_lose_context");u&&u.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bc.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,b.frameAsync(this._frameRequest).then($=>{o.bc.frame($),this._frameRequest=null,this._render($)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries($){this._showTileBoundaries!==$&&(this._showTileBoundaries=$,this._update())}get showPadding(){return!!this._showPadding}set showPadding($){this._showPadding!==$&&(this._showPadding=$,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes($){this._showCollisionBoxes!==$&&(this._showCollisionBoxes=$,$?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector($){this._showOverdrawInspector!==$&&(this._showOverdrawInspector=$,this._update())}get repaint(){return!!this._repaint}set repaint($){this._repaint!==$&&(this._repaint=$,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices($){this._vertices=$,this._update()}get version(){return fc}getCameraTargetElevation(){return this.transform.elevation}},a.MapMouseEvent=ks,a.MapTouchEvent=li,a.MapWheelEvent=rc,a.Marker=ua,a.NavigationControl=class{constructor($){this._updateZoomButtons=()=>{const u=this._map.getZoom(),p=u===this._map.getMaxZoom(),g=u===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{const u=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=u},this._setButtonTitle=(u,p)=>{const g=this._map._getUIString(`NavigationControl.${p}`);u.title=g,u.setAttribute("aria-label",g)},this.options=o.e({},hc,$),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd($){return this._map=$,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new dc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton($,u){const p=w.create("button",$,this._container);return p.type="button",p.addEventListener("click",u),p}},a.Popup=class extends o.E{constructor($){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=u=>{this._update(u.point)},this._onMouseMove=u=>{this._update(u.point)},this._onDrag=u=>{this._update(u.point)},this._update=u=>{var p;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const D of this.options.className.split(" "))this._container.classList.add(D);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?ol(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._trackPointer&&!u)return;const g=this._flatPos=this._pos=this._trackPointer&&u?u:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&u?u:this._map.transform.locationPoint(this._lngLat));let v=this.options.anchor;const x=fl(this.options.offset);if(!v){const D=this._container.offsetWidth,O=this._container.offsetHeight;let H;H=g.y+x.bottom.y<O?["top"]:g.y>this._map.transform.height-O?["bottom"]:[],g.x<D/2?H.push("left"):g.x>this._map.transform.width-D/2&&H.push("right"),v=H.length===0?"bottom":H.join("-")}let A=g.add(x[v]);this.options.subpixelPositioning||(A=A.round()),w.setTransform(this._container,`${ca[v]} translate(${A.x}px,${A.y}px)`),al(this._container,v,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(pc),$)}addTo($){return this._map&&this.remove(),this._map=$,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat($){return this._lngLat=o.M.convert($),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText($){return this.setDOMContent(document.createTextNode($))}setHTML($){const u=document.createDocumentFragment(),p=document.createElement("body");let g;for(p.innerHTML=$;g=p.firstChild,g;)u.appendChild(g);return this.setDOMContent(u)}getMaxWidth(){var $;return($=this._container)===null||$===void 0?void 0:$.style.maxWidth}setMaxWidth($){return this.options.maxWidth=$,this._update(),this}setDOMContent($){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild($),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName($){this._container&&this._container.classList.add($)}removeClassName($){this._container&&this._container.classList.remove($)}setOffset($){return this.options.offset=$,this._update(),this}toggleClassName($){if(this._container)return this._container.classList.toggle($)}setSubpixelPositioning($){this.options.subpixelPositioning=$}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const $=this._container.querySelector(mc);$&&$.focus()}},a.RasterDEMTileSource=Un,a.RasterTileSource=He,a.ScaleControl=class{constructor($){this._onMove=()=>{ul(this._map,this._container,this.options)},this.setUnit=u=>{this.options.unit=u,ul(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},cl),$)}getDefaultPosition(){return"bottom-left"}onAdd($){return this._map=$,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",$.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},a.ScrollZoomHandler=rl,a.Style=Ls,a.TerrainControl=class{constructor($){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=$}onAdd($){return this._map=$,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},a.TwoFingersTouchPitchHandler=Uu,a.TwoFingersTouchRotateHandler=ic,a.TwoFingersTouchZoomHandler=Vu,a.TwoFingersTouchZoomRotateHandler=sa,a.VectorTileSource=fn,a.VideoSource=gs,a.addSourceType=($,u)=>o._(void 0,void 0,void 0,function*(){if(ys($))throw new Error(`A source type called "${$}" already exists.`);((p,g)=>{vs[p]=g})($,u)}),a.clearPrewarmedResources=function(){const $=cn;$&&($.isPreloaded()&&$.numActive()===1?($.release(Ct),cn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},a.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},a.getRTLTextPluginStatus=function(){return Lt().getRTLTextPluginStatus()},a.getVersion=function(){return Wu},a.getWorkerCount=function(){return nn.workerCount},a.getWorkerUrl=function(){return o.a.WORKER_URL},a.importScriptInWorkers=function($){return rt().broadcast("IS",$)},a.prewarm=function(){Tt().acquire(Ct)},a.setMaxParallelImageRequests=function($){o.a.MAX_PARALLEL_IMAGE_REQUESTS=$},a.setRTLTextPlugin=function($,u){return Lt().setRTLTextPlugin($,u)},a.setWorkerCount=function($){nn.workerCount=$},a.setWorkerUrl=function($){o.a.WORKER_URL=$}});var s=n;return s})})(zv);var $f=zv.exports;const gi=ow($f);var BT=NT;function NT(i){var e,n,t;if(i){if(Array.isArray(i)){for(e=[],n=i.length,t=0;t<n;t++){var r=i[t];r!=null&&e.push(r)}return e}if(typeof i=="object"){e={};var s=Object.keys(i);for(n=s.length,t=0;t<n;t++){var a=s[t],o=i[a];o!=null&&(e[a]=o)}return e}}}function VT(i,e,n){let t;const{map:r}=Dl();sn(i,r,l=>n(4,t=l));let{position:s="top-left"}=e,{container:a=void 0}=e,o=null;return Bo(()=>{t!=null&&t.loaded()&&o&&t.removeControl(o)}),i.$$set=l=>{"position"in l&&n(1,s=l.position),"container"in l&&n(2,a=l.container)},i.$$.update=()=>{if(i.$$.dirty&30&&t&&!o){let l;typeof a=="string"?l=document.querySelector(a)??void 0:l=a,n(3,o=new gi.FullscreenControl({container:l})),t.addControl(o,s)}},[r,s,a,o,t]}class UT extends it{constructor(e){super(),ot(this,e,VT,null,nt,{position:1,container:2})}}function jT(i,e,n){let t;const{map:r}=Dl();sn(i,r,w=>n(8,t=w));let{position:s="top-left"}=e,{positionOptions:a=void 0}=e,{fitBoundsOptions:o=void 0}=e,{trackUserLocation:l=!1}=e,{showAccuracyCircle:d=!0}=e,{showUserLocation:_=!0}=e,b=null;return Bo(()=>{t!=null&&t.loaded()&&b&&t.removeControl(b)}),i.$$set=w=>{"position"in w&&n(1,s=w.position),"positionOptions"in w&&n(2,a=w.positionOptions),"fitBoundsOptions"in w&&n(3,o=w.fitBoundsOptions),"trackUserLocation"in w&&n(4,l=w.trackUserLocation),"showAccuracyCircle"in w&&n(5,d=w.showAccuracyCircle),"showUserLocation"in w&&n(6,_=w.showUserLocation)},i.$$.update=()=>{i.$$.dirty&510&&t&&!b&&(n(7,b=new gi.GeolocateControl({positionOptions:a,fitBoundsOptions:o,trackUserLocation:l,showAccuracyCircle:d,showUserLocation:_})),t.addControl(b,s))},[r,s,a,o,l,d,_,b,t]}class qT extends it{constructor(e){super(),ot(this,e,jT,null,nt,{position:1,positionOptions:2,fitBoundsOptions:3,trackUserLocation:4,showAccuracyCircle:5,showUserLocation:6})}}function GT(i){let e=i.getCenter(),n=Math.round(i.getZoom()*100)/100,t=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,t),s=Math.round(e.lat*r)/r,a=Math.round(e.lng*r)/r,o=`${n}/${s}/${a}`,l=i.getBearing(),d=i.getPitch();return(l||d)&&(o+=`/${Math.round(l*10)/10}`),d&&(o+=`/${Math.round(d)}`),`#${o}`}function HT(i){return i.replace("#","").split("/").map(parseFloat)}var vf=Rd;function Rd(i,e){return i===e||i!==i&&e!==e?!0:typeof i!=typeof e||{}.toString.call(i)!={}.toString.call(e)||i!==Object(i)||!i?!1:Array.isArray(i)?B_(i,e):{}.toString.call(i)=="[object Set]"?B_(Array.from(i),Array.from(e)):{}.toString.call(i)=="[object Object]"?WT(i,e):ZT(i,e)}function ZT(i,e){return i.toString()===e.toString()}function B_(i,e){var n=i.length;if(n!=e.length)return!1;for(var t=0;t<n;t++)if(!Rd(i[t],e[t]))return!1;return!0}function WT(i,e){var n=Object.keys(i),t=n.length;if(t!=Object.keys(e).length)return!1;for(var r=0;r<t;r++){var s=n[r];if(!(e.hasOwnProperty(s)&&Rd(i[s],e[s])))return!1}return!0}function KT(i,e,n){let t;const{map:r}=Dl();sn(i,r,_=>n(6,t=_));let{position:s="top-left"}=e,{showCompass:a=!0}=e,{showZoom:o=!0}=e,{visualizePitch:l=!1}=e,d=null;return Bo(()=>{t!=null&&t.loaded()&&d&&t.removeControl(d)}),i.$$set=_=>{"position"in _&&n(1,s=_.position),"showCompass"in _&&n(2,a=_.showCompass),"showZoom"in _&&n(3,o=_.showZoom),"visualizePitch"in _&&n(4,l=_.visualizePitch)},i.$$.update=()=>{i.$$.dirty&126&&t&&!d&&(n(5,d=new gi.NavigationControl({showCompass:a,showZoom:o,visualizePitch:l})),t.addControl(d,s))},[r,s,a,o,l,d,t]}class XT extends it{constructor(e){super(),ot(this,e,KT,null,nt,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function JT(i,e,n){let t;const{map:r}=Dl();sn(i,r,d=>n(5,t=d));let{position:s="bottom-left"}=e,{maxWidth:a=void 0}=e,{unit:o="metric"}=e,l=null;return Bo(()=>{t!=null&&t.loaded()&&l&&t.removeControl(l)}),i.$$set=d=>{"position"in d&&n(1,s=d.position),"maxWidth"in d&&n(2,a=d.maxWidth),"unit"in d&&n(3,o=d.unit)},i.$$.update=()=>{i.$$.dirty&62&&t&&!l&&(n(4,l=new gi.ScaleControl({maxWidth:a,unit:o})),t.addControl(l,s))},[r,s,a,o,l,t]}class YT extends it{constructor(e){super(),ot(this,e,JT,null,nt,{position:1,maxWidth:2,unit:3})}}const{window:QT}=Td,eI=i=>({map:i[0]&8,loadedImages:i[0]&16,allImagesLoaded:i[0]&32}),N_=i=>({map:i[3],loadedImages:i[4],allImagesLoaded:i[5]});function V_(i){let e,n,t=i[2]&&U_(i);const r=i[37].default,s=$t(r,i,i[36],N_);return{c(){t&&t.c(),e=de(),s&&s.c()},l(a){t&&t.l(a),e=pe(a),s&&s.l(a)},m(a,o){t&&t.m(a,o),R(a,e,o),s&&s.m(a,o),n=!0},p(a,o){a[2]?t?(t.p(a,o),o[0]&4&&T(t,1)):(t=U_(a),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(ht(),I(t,1,1,()=>{t=null}),dt()),s&&s.p&&(!n||o[0]&56|o[1]&32)&&wt(s,r,a,a[36],n?kt(r,a[36],o,eI):xt(a[36]),N_)},i(a){n||(T(t),T(s,a),n=!0)},o(a){I(t),I(s,a),n=!1},d(a){a&&S(e),t&&t.d(a),s&&s.d(a)}}}function U_(i){let e,n,t,r,s,a,o,l;return e=new XT({props:{position:i[6]}}),t=new qT({props:{position:i[6],fitBoundsOptions:{maxZoom:12}}}),s=new UT({props:{position:i[6]}}),o=new YT({props:{position:i[6]}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),N(s.$$.fragment),a=de(),N(o.$$.fragment)},l(d){j(e.$$.fragment,d),n=pe(d),j(t.$$.fragment,d),r=pe(d),j(s.$$.fragment,d),a=pe(d),j(o.$$.fragment,d)},m(d,_){V(e,d,_),R(d,n,_),V(t,d,_),R(d,r,_),V(s,d,_),R(d,a,_),V(o,d,_),l=!0},p(d,_){const b={};_[0]&64&&(b.position=d[6]),e.$set(b);const w={};_[0]&64&&(w.position=d[6]),t.$set(w);const E={};_[0]&64&&(E.position=d[6]),s.$set(E);const L={};_[0]&64&&(L.position=d[6]),o.$set(L)},i(d){l||(T(e.$$.fragment,d),T(t.$$.fragment,d),T(s.$$.fragment,d),T(o.$$.fragment,d),l=!0)},o(d){I(e.$$.fragment,d),I(t.$$.fragment,d),I(s.$$.fragment,d),I(o.$$.fragment,d),l=!1},d(d){d&&(S(n),S(r),S(a)),U(e,d),U(t,d),U(s,d),U(o,d)}}}function tI(i){let e,n,t,r,s,a=i[3]&&i[0]&&V_(i);return{c(){e=oe("div"),a&&a.c(),this.h()},l(o){e=ae(o,"DIV",{class:!0,"data-testid":!0});var l=$e(e);a&&a.l(l),l.forEach(S),this.h()},h(){te(e,"class",n=Bm(i[1])+" svelte-p00lfq"),te(e,"data-testid","map-container"),dr(e,"expand-map",!i[1])},m(o,l){R(o,e,l),a&&a.m(e,null),t=!0,r||(s=[bt(QT,"hashchange",i[10]),qn(i[9].call(null,e))],r=!0)},p(o,l){o[3]&&o[0]?a?(a.p(o,l),l[0]&9&&T(a,1)):(a=V_(o),a.c(),T(a,1),a.m(e,null)):a&&(ht(),I(a,1,1,()=>{a=null}),dt()),(!t||l[0]&2&&n!==(n=Bm(o[1])+" svelte-p00lfq"))&&te(e,"class",n),(!t||l[0]&2)&&dr(e,"expand-map",!o[1])},i(o){t||(T(a),t=!0)},o(o){I(a),t=!1},d(o){o&&S(e),a&&a.d(),r=!1,kr(s)}}}function nI(i,e,n){let t,r,s,a,{$$slots:o={},$$scope:l}=e,{map:d=null}=e,{class:_=void 0}=e,{style:b}=e,{diffStyleUpdates:w=!1}=e,{center:E=void 0}=e,{zoom:L=void 0}=e,{pitch:M=0}=e,{bearing:F=0}=e,{bounds:q=void 0}=e,{hash:G=!1}=e,{loaded:Q=!1}=e,{minZoom:ge=0}=e,{maxZoom:le=22}=e,{zoomOnDoubleClick:re=!0}=e,{locale:me=void 0}=e,{interactive:se=!0}=e,{attributionControl:Z=!0}=e,{cooperativeGestures:Y=!1}=e,{preserveDrawingBuffer:ie=!1}=e,{maxBounds:be=void 0}=e,{images:fe=[]}=e,{standardControls:ke=!1}=e,{filterLayers:je=void 0}=e,{transformRequest:Se=void 0}=e;const Qe=El(),{map:Xe,loadedImages:at}=LT();sn(i,Xe,rt=>n(3,s=rt)),sn(i,at,rt=>n(4,a=rt));let mt=new Set;async function Dt(rt,Kt=!1){if(s&&!(!s.loaded()&&!Kt))if("url"in rt){mt.add(rt.id);try{let en=await s.loadImage(rt.url);s==null||s.addImage(rt.id,en.data,rt.options),a.add(rt.id),at.set(a)}catch(en){Qe("error",en)}finally{mt.delete(rt.id)}}else s.addImage(rt.id,rt.data,rt.options),a.add(rt.id),at.set(a)}let Ct,nn,yn,cn;function At(rt){return dn(),Zr(Xe,s=new gi.Map(BT({container:rt,style:b,locale:me,center:E,zoom:L,pitch:M,bearing:F,minZoom:ge,maxZoom:le,interactive:se,preserveDrawingBuffer:ie,maxBounds:be,bounds:q,attributionControl:Z,transformRequest:Se,cooperativeGestures:Y})),s),s.on("load",Kt=>{Kt.target.getContainer().setAttribute("data-testid","map"),Kt.target.getCanvas().setAttribute("data-testid","map-canvas"),n(0,Q=!0),Qe("load",s)}),s.on("error",Kt=>Qe("error",{...Kt,map:s})),s.on("movestart",Kt=>Qe("movestart",{...Kt,map:s})),s.on("moveend",Kt=>{if(n(11,E=Kt.target.getCenter()),n(12,L=Kt.target.getZoom()),n(13,q=Kt.target.getBounds()),Qe("moveend",{...Kt,map:s}),G){let en=window.location.href.replace(/(#.+)?$/,GT(s));window.history.replaceState(window.history.state,"",en)}}),s.on("zoomstart",Kt=>Qe("zoomstart",{...Kt,map:s})),s.on("zoom",Kt=>{n(12,L=Kt.target.getZoom()),Qe("zoom",{...Kt,map:s})}),s.on("zoomend",Kt=>{n(12,L=Kt.target.getZoom()),Qe("zoomend",{...Kt,map:s})}),s.on("style.load",()=>{if(s){const Kt=s.getStyle();if(n(33,Ct=Kt.layers.map(en=>en.id)),n(34,nn=Object.keys(Kt.sources)),cn)for(const[en,Ot]of Object.entries(cn))s.addSource(en,Ot);if(yn)for(const en of yn)s.addLayer(en);for(const en of fe)Dt(en,!0)}}),s.on("styledata",Kt=>{if(s&&je){const en=s.getStyle().layers;if(en)for(let Ot of en)je(Ot)||s.setLayoutProperty(Ot.id,"visibility","none")}Qe("styledata",{...Kt,map:s})}),{destroy(){n(0,Q=!1),s==null||s.remove(),Zr(Xe,s=null,s)}}}let Tt=b;function dn(){if(G){let rt=HT(window.location.hash);rt.length>=3&&(n(12,L=rt[0]),n(11,E=[rt[2],rt[1]])),rt.length==5&&(n(16,F=rt[3]),n(15,M=rt[4]))}}return i.$$set=rt=>{"map"in rt&&n(14,d=rt.map),"class"in rt&&n(1,_=rt.class),"style"in rt&&n(17,b=rt.style),"diffStyleUpdates"in rt&&n(18,w=rt.diffStyleUpdates),"center"in rt&&n(11,E=rt.center),"zoom"in rt&&n(12,L=rt.zoom),"pitch"in rt&&n(15,M=rt.pitch),"bearing"in rt&&n(16,F=rt.bearing),"bounds"in rt&&n(13,q=rt.bounds),"hash"in rt&&n(19,G=rt.hash),"loaded"in rt&&n(0,Q=rt.loaded),"minZoom"in rt&&n(20,ge=rt.minZoom),"maxZoom"in rt&&n(21,le=rt.maxZoom),"zoomOnDoubleClick"in rt&&n(22,re=rt.zoomOnDoubleClick),"locale"in rt&&n(23,me=rt.locale),"interactive"in rt&&n(24,se=rt.interactive),"attributionControl"in rt&&n(25,Z=rt.attributionControl),"cooperativeGestures"in rt&&n(26,Y=rt.cooperativeGestures),"preserveDrawingBuffer"in rt&&n(27,ie=rt.preserveDrawingBuffer),"maxBounds"in rt&&n(28,be=rt.maxBounds),"images"in rt&&n(29,fe=rt.images),"standardControls"in rt&&n(2,ke=rt.standardControls),"filterLayers"in rt&&n(30,je=rt.filterLayers),"transformRequest"in rt&&n(31,Se=rt.transformRequest),"$$scope"in rt&&n(36,l=rt.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&4&&n(6,t=typeof ke=="boolean"?void 0:ke),i.$$.dirty[0]&8&&n(14,d=s),i.$$.dirty[0]&393224|i.$$.dirty[1]&28&&s&&!vf(b,Tt)){const rt=s.getStyle();if(Ct&&(yn=rt.layers.filter(Kt=>!Ct.includes(Kt.id))),nn){const Kt=Object.keys(rt.sources).filter(en=>!nn.includes(en));cn={};for(const en of Kt)cn[en]=rt.sources[en]}n(35,Tt=b),s.setStyle(b,{diff:w}),Zr(at,a=new Set,a),n(32,mt=new Set)}if(i.$$.dirty[0]&536870937|i.$$.dirty[1]&2&&Q&&s!=null&&s.loaded())for(let rt of fe)!a.has(rt.id)&&!mt.has(rt.id)&&!s.hasImage(rt.id)&&Dt(rt);i.$$.dirty[0]&536870928&&n(5,r=fe.every(rt=>a.has(rt.id))),i.$$.dirty[0]&2056&&E&&!vf(E,s==null?void 0:s.getCenter())&&(s==null||s.panTo(E)),i.$$.dirty[0]&4104&&L&&!vf(L,s==null?void 0:s.getZoom())&&(s==null||s.zoomTo(L)),i.$$.dirty[0]&8200&&q&&!vf(q,s==null?void 0:s.getBounds())&&(s==null||s.fitBounds(q)),i.$$.dirty[0]&4194312&&(re?s==null||s.doubleClickZoom.enable():s==null||s.doubleClickZoom.disable())},[Q,_,ke,s,a,r,t,Xe,at,At,dn,E,L,q,d,M,F,b,w,G,ge,le,re,me,se,Z,Y,ie,be,fe,je,Se,mt,Ct,nn,Tt,l,o]}class rI extends it{constructor(e){super(),ot(this,e,nI,tI,nt,{map:14,class:1,style:17,diffStyleUpdates:18,center:11,zoom:12,pitch:15,bearing:16,bounds:13,hash:19,loaded:0,minZoom:20,maxZoom:21,zoomOnDoubleClick:22,locale:23,interactive:24,attributionControl:25,cooperativeGestures:26,preserveDrawingBuffer:27,maxBounds:28,images:29,standardControls:2,filterLayers:30,transformRequest:31},null,[-1,-1])}}function sI(i){let e,n,t,r,s,a,o;const l=i[18].default,d=$t(l,i,i[17],null);return{c(){e=oe("div"),d&&d.c(),this.h()},l(_){e=ae(_,"DIV",{tabindex:!0,role:!0});var b=$e(e);d&&d.l(b),b.forEach(S),this.h()},h(){te(e,"tabindex",n=i[1]?0:void 0),te(e,"role",t=i[1]?"button":void 0),Pf(e,"z-index",i[2])},m(_,b){R(_,e,b),d&&d.m(e,null),s=!0,a||(o=[qn(i[6].call(null,e)),qn(r=iI.call(null,e,i[0])),bt(e,"click",i[19]),bt(e,"dblclick",i[20]),bt(e,"contextmenu",i[21]),bt(e,"mouseenter",i[22]),bt(e,"mouseleave",i[23]),bt(e,"mousemove",i[24]),bt(e,"keydown",i[7])],a=!0)},p(_,[b]){d&&d.p&&(!s||b&131072)&&wt(d,l,_,_[17],s?kt(l,_[17],b,null):xt(_[17]),null),(!s||b&2&&n!==(n=_[1]?0:void 0))&&te(e,"tabindex",n),(!s||b&2&&t!==(t=_[1]?"button":void 0))&&te(e,"role",t),r&&Sd(r.update)&&b&1&&r.update.call(null,_[0]),b&4&&Pf(e,"z-index",_[2])},i(_){s||(T(d,_),s=!0)},o(_){I(d,_),s=!1},d(_){_&&S(e),d&&d.d(_),a=!1,kr(o)}}}function iI(i,e){const n=i.className;function t(r){r?i.className=`${n} ${r}`:i.className=n}return t(e),{update:t}}function oI(i,e,n){let t,r,s,{$$slots:a={},$$scope:o}=e,{lngLat:l}=e,{class:d=void 0}=e,{interactive:_=!0}=e,{asButton:b=!1}=e,{draggable:w=!1}=e,{feature:E=null}=e,{offset:L=void 0}=e,{zIndex:M=void 0}=e,{rotation:F=0}=e,{opacity:q=1}=e;const G=El(),{map:Q,layerEvent:ge,self:le}=OT();sn(i,Q,Se=>n(26,s=Se)),sn(i,ge,Se=>n(25,t=Se)),sn(i,le,Se=>n(16,r=Se));function re(Se){Zr(le,r=new gi.Marker({element:Se,rotation:F,draggable:w,offset:L,opacity:q.toString()}).setLngLat(l).addTo(s),r);const Qe=()=>Z("dragstart"),Xe=()=>{me(),Z("drag")},at=()=>{me(),Z("dragend")};return w&&(r.on("dragstart",Qe),r.on("drag",Xe),r.on("dragend",at)),{destroy(){w&&(r==null||r.off("dragstart",Qe),r==null||r.off("drag",Xe),r==null||r.off("dragend",at)),r==null||r.remove()}}}function me(){let Se=r==null?void 0:r.getLngLat();Se&&(Array.isArray(l)?n(9,l=[Se.lng,Se.lat]):l&&"lon"in l?n(9,l={lon:Se.lng,lat:Se.lat}):n(9,l=Se))}function se(Se){Se.key===" "&&(Se.preventDefault(),Se.stopPropagation(),Z("click"))}function Z(Se){if(!_)return;let Qe=r==null?void 0:r.getLngLat();if(!Qe)return;const Xe=[Qe.lng,Qe.lat];let at={map:s,marker:r,lngLat:Xe,features:[{type:"Feature",properties:(E==null?void 0:E.properties)??{},geometry:{type:"Point",coordinates:Xe}}]};Zr(ge,t={...at,layerType:"marker",type:Se},t),G(Se,at)}const Y=()=>Z("click"),ie=()=>Z("dblclick"),be=()=>Z("contextmenu"),fe=Se=>{Z("mouseenter")},ke=()=>{Z("mouseleave")},je=()=>Z("mousemove");return i.$$set=Se=>{"lngLat"in Se&&n(9,l=Se.lngLat),"class"in Se&&n(0,d=Se.class),"interactive"in Se&&n(10,_=Se.interactive),"asButton"in Se&&n(1,b=Se.asButton),"draggable"in Se&&n(11,w=Se.draggable),"feature"in Se&&n(12,E=Se.feature),"offset"in Se&&n(13,L=Se.offset),"zIndex"in Se&&n(2,M=Se.zIndex),"rotation"in Se&&n(14,F=Se.rotation),"opacity"in Se&&n(15,q=Se.opacity),"$$scope"in Se&&n(17,o=Se.$$scope)},i.$$.update=()=>{i.$$.dirty&66048&&(r==null||r.setLngLat(l)),i.$$.dirty&73728&&(r==null||r.setOffset(L??[0,0])),i.$$.dirty&81920&&(r==null||r.setRotation(F)),i.$$.dirty&98304&&(r==null||r.setOpacity(q.toString()))},[d,b,M,Q,ge,le,re,se,Z,l,_,w,E,L,F,q,r,o,a,Y,ie,be,fe,ke,je]}class aI extends it{constructor(e){super(),ot(this,e,oI,sI,nt,{lngLat:9,class:0,interactive:10,asButton:1,draggable:11,feature:12,offset:13,zIndex:2,rotation:14,opacity:15})}}const lI=i=>({features:i[0]&16,data:i[0]&16,map:i[0]&4,close:i[0]&1}),j_=i=>{var e;return{features:i[4],data:(e=i[4])==null?void 0:e[0],map:i[2],close:i[31]}};function q_(i){let e,n,t=(i[4]||i[3]instanceof gi.Marker)&&G_(i);return{c(){e=oe("div"),t&&t.c()},l(r){e=ae(r,"DIV",{});var s=$e(e);t&&t.l(s),s.forEach(S)},m(r,s){R(r,e,s),t&&t.m(e,null),i[32](e),n=!0},p(r,s){r[4]||r[3]instanceof gi.Marker?t?(t.p(r,s),s[0]&24&&T(t,1)):(t=G_(r),t.c(),T(t,1),t.m(e,null)):t&&(ht(),I(t,1,1,()=>{t=null}),dt())},i(r){n||(T(t),n=!0)},o(r){I(t),n=!1},d(r){r&&S(e),t&&t.d(),i[32](null)}}}function G_(i){let e;const n=i[30].default,t=$t(n,i,i[29],j_);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s[0]&536870933)&&wt(t,n,r,r[29],e?kt(n,r[29],s,lI):xt(r[29]),j_)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function cI(i){let e,n,t=i[9].default&&q_(i);return{c(){t&&t.c(),e=Fe()},l(r){t&&t.l(r),e=Fe()},m(r,s){t&&t.m(r,s),R(r,e,s),n=!0},p(r,s){r[9].default?t?(t.p(r,s),s[0]&512&&T(t,1)):(t=q_(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(ht(),I(t,1,1,()=>{t=null}),dt())},i(r){n||(T(t),n=!0)},o(r){I(t),n=!1},d(r){r&&S(e),t&&t.d(r)}}}function uI(i,e,n){let t,r,s,a,o,l,{$$slots:d={},$$scope:_}=e;const b=E$(d);let{closeButton:w=void 0}=e,{closeOnClickOutside:E=!0}=e,{closeOnClickInside:L=!1}=e,{closeOnMove:M=!1}=e,{openOn:F="click"}=e,{openIfTopMost:q=!0}=e,{focusAfterOpen:G=!0}=e,{anchor:Q=void 0}=e,{offset:ge=void 0}=e,{popupClass:le=void 0}=e,{maxWidth:re=void 0}=e,{lngLat:me=void 0}=e,{html:se=void 0}=e,{open:Z=!1}=e;const Y=El(),{map:ie,popupTarget:be,layerEvent:fe,layer:ke,eventTopMost:je}=Dl();sn(i,ie,et=>n(2,s=et)),sn(i,be,et=>n(3,o=et)),sn(i,fe,et=>n(28,a=et)),sn(i,ke,et=>n(35,l=et));const Se=["click","dblclick","contextmenu"];let Qe,Xe=!1,at;function mt(){if(!Qe)return;let et=Qe.getElement();!et||et===at||(at=et,F==="hover"&&(at.style.pointerEvents="none"),at.addEventListener("mouseenter",()=>{n(24,Xe=!0)},{passive:!0}),at.addEventListener("mouseleave",()=>{n(24,Xe=!1)},{passive:!0}),at.addEventListener("click",()=>{L&&n(0,Z=!1)},{passive:!0}))}er(()=>{if(s)return s.on("click",Kt),s.on("contextmenu",Kt),typeof o=="string"&&(s.on("click",o,yn),s.on("dblclick",o,yn),s.on("contextmenu",o,yn),s.on("mousemove",o,rt),s.on("mouseleave",o,dn),s.on("touchstart",o,At),s.on("touchend",o,Tt)),()=>{s!=null&&s.loaded()&&(Qe==null||Qe.remove(),s.off("click",Kt),s.off("contextmenu",Kt),o instanceof gi.Marker?o.getPopup()===Qe&&o.setPopup(void 0):typeof o=="string"&&(s.off("click",o,yn),s.off("dblclick",o,yn),s.off("contextmenu",o,yn),s.off("mousemove",o,rt),s.off("mouseleave",o,dn),s.off("touchstart",o,At),s.off("touchend",o,Tt)))}});function Dt(et){return q?!("marker"in et)&&!FT(et)&&je(et)!==l:!1}let Ct=null,nn="normal";function yn(et){et.type===F&&(Dt(et)||("layerType"in et?et.layerType==="deckgl"?(n(10,me=et.coordinate),n(4,Ct=et.object?[et.object]:null)):(n(10,me=et.lngLat),n(4,Ct=et.features??[])):(n(10,me=et.lngLat),n(4,Ct=et.features??[])),setTimeout(()=>n(0,Z=!0))))}let cn=null;function At(et){cn=et.point}function Tt(et){if(!cn||F!=="hover")return;let bn=cn.dist(et.point);cn=null,bn<3&&(n(10,me=et.lngLat),n(4,Ct=et.features??[]),Qe.isOpen()?n(25,nn="justOpened"):(n(25,nn="opening"),n(0,Z=!0)))}function dn(et){F!=="hover"||cn||nn!=="normal"||(n(0,Z=!1),n(4,Ct=null))}function rt(et){if(!(F!=="hover"||cn||nn!=="normal")){if(Dt(et)){n(0,Z=!1),n(4,Ct=null);return}n(0,Z=!0),n(4,Ct=et.features??[]),n(10,me=et.lngLat)}}function Kt(et){if(nn==="justOpened"){n(25,nn="normal");return}if(!E)return;let bn=[at,o instanceof gi.Marker?o==null?void 0:o.getElement():null];Z&&Qe.isOpen()&&!bn.some(fn=>fn==null?void 0:fn.contains(et.originalEvent.target))&&(et.type==="contextmenu"&&F==="contextmenu"||et.type!=="contextmenu")&&n(0,Z=!1)}Bo(()=>{s&&(Qe!=null&&Qe.isOpen())&&Qe.remove()});let en;const Ot=()=>n(0,Z=!1);function Et(et){jt[et?"unshift":"push"](()=>{en=et,n(1,en)})}return i.$$set=et=>{"closeButton"in et&&n(11,w=et.closeButton),"closeOnClickOutside"in et&&n(12,E=et.closeOnClickOutside),"closeOnClickInside"in et&&n(13,L=et.closeOnClickInside),"closeOnMove"in et&&n(14,M=et.closeOnMove),"openOn"in et&&n(15,F=et.openOn),"openIfTopMost"in et&&n(16,q=et.openIfTopMost),"focusAfterOpen"in et&&n(17,G=et.focusAfterOpen),"anchor"in et&&n(18,Q=et.anchor),"offset"in et&&n(19,ge=et.offset),"popupClass"in et&&n(20,le=et.popupClass),"maxWidth"in et&&n(21,re=et.maxWidth),"lngLat"in et&&n(10,me=et.lngLat),"html"in et&&n(22,se=et.html),"open"in et&&n(0,Z=et.open),"$$scope"in et&&n(29,_=et.$$scope)},i.$$.update=()=>{if(i.$$.dirty[0]&14336&&n(27,t=w??(!E&&!L)),i.$$.dirty[0]&146685952&&(Qe||(n(23,Qe=new gi.Popup({closeButton:t,closeOnClick:!1,closeOnMove:M,focusAfterOpen:G,maxWidth:re,className:le,anchor:Q,offset:ge})),at=Qe.getElement(),Qe.on("open",()=>{n(0,Z=!0),mt(),Y("open",Qe)}),Qe.on("close",()=>{n(0,Z=!1),Y("close",Qe)}),Qe.on("hover",()=>{Y("hover",Qe)}))),i.$$.dirty[0]&8421384&&Qe&&o instanceof gi.Marker&&(F==="click"?o.setPopup(Qe):o.getPopup()===Qe&&o.setPopup(void 0)),i.$$.dirty[0]&268468224&&Se.includes(F)&&(a==null?void 0:a.type)===F&&(yn(a),Zr(fe,a=null,a)),i.$$.dirty[0]&268468224&&n(26,r=F==="hover"&&((a==null?void 0:a.type)==="mousemove"||(a==null?void 0:a.type)==="mouseenter")),i.$$.dirty[0]&352354304&&F==="hover"&&fe&&(r&&a&&(a.layerType==="deckgl"?(n(10,me=a.coordinate),n(4,Ct=a.object?[a.object]:null)):(n(10,me=a.lngLat),n(4,Ct=a.features??[]))),n(0,Z=(r||Xe)??!1)),i.$$.dirty[0]&12582914&&(en?Qe.setDOMContent(en):se&&Qe.setHTML(se)),i.$$.dirty[0]&8389632&&me&&Qe.setLngLat(me),i.$$.dirty[0]&41943045&&s){let et=Qe.isOpen();Z&&!et?(Qe.addTo(s),nn==="opening"&&n(25,nn="justOpened")):!Z&&et&&Qe.remove()}},[Z,en,s,o,Ct,ie,be,fe,ke,b,me,w,E,L,M,F,q,G,Q,ge,le,re,se,Qe,Xe,nn,r,t,a,_,d,Ot,Et]}class fI extends it{constructor(e){super(),ot(this,e,uI,cI,nt,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}var ou=Uint8Array,Rv=Uint16Array,hI=Int32Array,dI=new ou([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pI=new ou([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ov=function(i,e){for(var n=new Rv(31),t=0;t<31;++t)n[t]=e+=1<<i[t-1];for(var r=new hI(n[30]),t=1;t<30;++t)for(var s=n[t];s<n[t+1];++s)r[s]=s-n[t]<<5|t;return{b:n,r}},Fv=Ov(dI,2),mI=Fv.b,_I=Fv.r;mI[28]=258,_I[258]=28;Ov(pI,0);var gI=new Rv(32768);for(Qn=0;Qn<32768;++Qn)uo=(Qn&43690)>>1|(Qn&21845)<<1,uo=(uo&52428)>>2|(uo&13107)<<2,uo=(uo&61680)>>4|(uo&3855)<<4,gI[Qn]=((uo&65280)>>8|(uo&255)<<8)>>1;var uo,Qn,Zf=new ou(288);for(Qn=0;Qn<144;++Qn)Zf[Qn]=8;var Qn;for(Qn=144;Qn<256;++Qn)Zf[Qn]=9;var Qn;for(Qn=256;Qn<280;++Qn)Zf[Qn]=7;var Qn;for(Qn=280;Qn<288;++Qn)Zf[Qn]=8;var Qn,vI=new ou(32);for(Qn=0;Qn<32;++Qn)vI[Qn]=5;var Qn,yI=new ou(0),bI=typeof TextDecoder<"u"&&new TextDecoder,$I=0;try{bI.decode(yI,{stream:!0}),$I=1}catch{}const vd=Symbol("EMBLA_CAROUSEL_CONTEXT");function wI(i){return Ei(vd,i),i}function Bv(i="This component"){if(!P$(vd))throw new Error(`${i} must be used within a <Carousel.Root> component`);return bi(vd)}function xI(i){let e,n,t,r,s;const a=i[7].default,o=$t(a,i,i[6],null);let l=[{class:n=qt("relative",i[0])},{role:"region"},{"aria-roledescription":"carousel"},i[1]],d={};for(let _=0;_<l.length;_+=1)d=Ce(d,l[_]);return{c(){e=oe("div"),o&&o.c(),this.h()},l(_){e=ae(_,"DIV",{class:!0,role:!0,"aria-roledescription":!0});var b=$e(e);o&&o.l(b),b.forEach(S),this.h()},h(){Vt(e,d)},m(_,b){R(_,e,b),o&&o.m(e,null),t=!0,r||(s=[bt(e,"mouseenter",i[8]),bt(e,"mouseleave",i[9])],r=!0)},p(_,[b]){o&&o.p&&(!t||b&64)&&wt(o,a,_,_[6],t?kt(a,_[6],b,null):xt(_[6]),null),Vt(e,d=Pt(l,[(!t||b&1&&n!==(n=qt("relative",_[0])))&&{class:n},{role:"region"},{"aria-roledescription":"carousel"},b&2&&_[1]]))},i(_){t||(T(o,_),t=!0)},o(_){I(o,_),t=!1},d(_){_&&S(e),o&&o.d(_),r=!1,kr(s)}}}function kI(i,e,n){const t=["opts","plugins","api","orientation","class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{opts:o={}}=e,{plugins:l=[]}=e,{api:d=void 0}=e,{orientation:_="horizontal"}=e,{class:b=void 0}=e;const w=yr(void 0),E=yr(_),L=yr(!1),M=yr(!1),F=yr(o),q=yr(l);function G(){d==null||d.scrollPrev()}function Q(){d==null||d.scrollNext()}function ge(Z){Z&&(L.set(Z.canScrollPrev()),M.set(Z.canScrollNext()))}function le(Z){Z.key==="ArrowLeft"?(Z.preventDefault(),G()):Z.key==="ArrowRight"&&(Z.preventDefault(),Q())}wI({api:w,scrollPrev:G,scrollNext:Q,orientation:E,canScrollNext:M,canScrollPrev:L,handleKeyDown:le,options:F,plugins:q,onInit:re});function re(Z){n(2,d=Z.detail),w.set(d)}Bo(()=>{d==null||d.off("select",ge)});function me(Z){Wt.call(this,i,Z)}function se(Z){Wt.call(this,i,Z)}return i.$$set=Z=>{e=Ce(Ce({},e),Mt(Z)),n(1,r=lt(e,t)),"opts"in Z&&n(3,o=Z.opts),"plugins"in Z&&n(4,l=Z.plugins),"api"in Z&&n(2,d=Z.api),"orientation"in Z&&n(5,_=Z.orientation),"class"in Z&&n(0,b=Z.class),"$$scope"in Z&&n(6,a=Z.$$scope)},i.$$.update=()=>{i.$$.dirty&32&&E.set(_),i.$$.dirty&16&&q.set(l),i.$$.dirty&8&&F.set(o),i.$$.dirty&4&&d&&(ge(d),d.on("select",ge),d.on("reInit",ge))},[b,r,d,o,l,_,a,s,me,se]}class CI extends it{constructor(e){super(),ot(this,e,kI,xI,nt,{opts:3,plugins:4,api:2,orientation:5,class:0})}}function SI(i){return Object.prototype.toString.call(i)==="[object Object]"}function H_(i){return SI(i)||Array.isArray(i)}function TI(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Od(i,e){const n=Object.keys(i),t=Object.keys(e);if(n.length!==t.length)return!1;const r=JSON.stringify(Object.keys(i.breakpoints||{})),s=JSON.stringify(Object.keys(e.breakpoints||{}));return r!==s?!1:n.every(a=>{const o=i[a],l=e[a];return typeof o=="function"?`${o}`==`${l}`:!H_(o)||!H_(l)?o===l:Od(o,l)})}function Z_(i){return i.concat().sort((e,n)=>e.name>n.name?1:-1).map(e=>e.options)}function II(i,e){if(i.length!==e.length)return!1;const n=Z_(i),t=Z_(e);return n.every((r,s)=>{const a=t[s];return Od(r,a)})}function Fd(i){return typeof i=="number"}function yd(i){return typeof i=="string"}function Bd(i){return typeof i=="boolean"}function W_(i){return Object.prototype.toString.call(i)==="[object Object]"}function xr(i){return Math.abs(i)}function Nd(i){return Math.sign(i)}function Hc(i,e){return xr(i-e)}function EI(i,e){if(i===0||e===0||xr(i)<=xr(e))return 0;const n=Hc(xr(i),xr(e));return xr(n/i)}function Kc(i){return Xc(i).map(Number)}function Ii(i){return i[au(i)]}function au(i){return Math.max(0,i.length-1)}function Vd(i,e){return e===au(i)}function K_(i,e=0){return Array.from(Array(i),(n,t)=>e+t)}function Xc(i){return Object.keys(i)}function Nv(i,e){return[i,e].reduce((n,t)=>(Xc(t).forEach(r=>{const s=n[r],a=t[r],o=W_(s)&&W_(a);n[r]=o?Nv(s,a):a}),n),{})}function Vv(i,e){return typeof e.MouseEvent<"u"&&i instanceof e.MouseEvent}function PI(i,e){const n={start:t,center:r,end:s};function t(){return 0}function r(l){return s(l)/2}function s(l){return e-l}function a(l,d){return yd(i)?n[i](l):i(e,l,d)}return{measure:a}}function Jc(){let i=[];function e(r,s,a,o={passive:!0}){let l;if("addEventListener"in r)r.addEventListener(s,a,o),l=()=>r.removeEventListener(s,a,o);else{const d=r;d.addListener(a),l=()=>d.removeListener(a)}return i.push(l),t}function n(){i=i.filter(r=>r())}const t={add:e,clear:n};return t}function AI(i,e,n,t){const r=Jc(),s=1e3/60;let a=null,o=0,l=0;function d(){r.add(i,"visibilitychange",()=>{i.hidden&&L()})}function _(){E(),r.clear()}function b(F){if(!l)return;a||(a=F);const q=F-a;for(a=F,o+=q;o>=s;)n(),o-=s;const G=xr(o/s);t(G),l&&e.requestAnimationFrame(b)}function w(){l||(l=e.requestAnimationFrame(b))}function E(){e.cancelAnimationFrame(l),a=null,o=0,l=0}function L(){a=null,o=0}return{init:d,destroy:_,start:w,stop:E,update:n,render:t}}function MI(i,e){const n=e==="rtl",t=i==="y",r=t?"y":"x",s=t?"x":"y",a=!t&&n?-1:1,o=_(),l=b();function d(L){const{height:M,width:F}=L;return t?M:F}function _(){return t?"top":n?"right":"left"}function b(){return t?"bottom":n?"left":"right"}function w(L){return L*a}return{scroll:r,cross:s,startEdge:o,endEdge:l,measureSize:d,direction:w}}function wa(i=0,e=0){const n=xr(i-e);function t(d){return d<i}function r(d){return d>e}function s(d){return t(d)||r(d)}function a(d){return s(d)?t(d)?i:e:d}function o(d){return n?d-n*Math.ceil((d-e)/n):d}return{length:n,max:e,min:i,constrain:a,reachedAny:s,reachedMax:r,reachedMin:t,removeOffset:o}}function Uv(i,e,n){const{constrain:t}=wa(0,i),r=i+1;let s=a(e);function a(w){return n?xr((r+w)%r):t(w)}function o(){return s}function l(w){return s=a(w),b}function d(w){return _().set(o()+w)}function _(){return Uv(i,o(),n)}const b={get:o,set:l,add:d,clone:_};return b}function DI(i,e,n,t,r,s,a,o,l,d,_,b,w,E,L,M,F,q,G){const{cross:Q,direction:ge}=i,le=["INPUT","SELECT","TEXTAREA"],re={passive:!1},me=Jc(),se=Jc(),Z=wa(50,225).constrain(E.measure(20)),Y={mouse:300,touch:400},ie={mouse:500,touch:600},be=L?43:25;let fe=!1,ke=0,je=0,Se=!1,Qe=!1,Xe=!1,at=!1;function mt(Ot){if(!G)return;function Et(bn){(Bd(G)||G(Ot,bn))&&At(bn)}const et=e;me.add(et,"dragstart",bn=>bn.preventDefault(),re).add(et,"touchmove",()=>{},re).add(et,"touchend",()=>{}).add(et,"touchstart",Et).add(et,"mousedown",Et).add(et,"touchcancel",dn).add(et,"contextmenu",dn).add(et,"click",rt,!0)}function Dt(){me.clear(),se.clear()}function Ct(){const Ot=at?n:e;se.add(Ot,"touchmove",Tt,re).add(Ot,"touchend",dn).add(Ot,"mousemove",Tt,re).add(Ot,"mouseup",dn)}function nn(Ot){const Et=Ot.nodeName||"";return le.includes(Et)}function yn(){return(L?ie:Y)[at?"mouse":"touch"]}function cn(Ot,Et){const et=b.add(Nd(Ot)*-1),bn=_.byDistance(Ot,!L).distance;return L||xr(Ot)<Z?bn:F&&Et?bn*.5:_.byIndex(et.get(),0).distance}function At(Ot){const Et=Vv(Ot,t);at=Et,Xe=L&&Et&&!Ot.buttons&&fe,fe=Hc(r.get(),a.get())>=2,!(Et&&Ot.button!==0)&&(nn(Ot.target)||(Se=!0,s.pointerDown(Ot),d.useFriction(0).useDuration(0),r.set(a),Ct(),ke=s.readPoint(Ot),je=s.readPoint(Ot,Q),w.emit("pointerDown")))}function Tt(Ot){const Et=s.readPoint(Ot),et=s.readPoint(Ot,Q),bn=Hc(Et,ke),fn=Hc(et,je);if(!Qe&&!at&&(!Ot.cancelable||(Qe=bn>fn,!Qe)))return dn(Ot);const He=s.pointerMove(Ot);bn>M&&(Xe=!0),d.useFriction(.3).useDuration(1),o.start(),r.add(ge(He)),Ot.preventDefault()}function dn(Ot){const et=_.byDistance(0,!1).index!==b.get(),bn=s.pointerUp(Ot)*yn(),fn=cn(ge(bn),et),He=EI(bn,fn),Un=be-10*He,br=q+He/50;Qe=!1,Se=!1,se.clear(),d.useDuration(Un).useFriction(br),l.distance(fn,!L),at=!1,w.emit("pointerUp")}function rt(Ot){Xe&&(Ot.stopPropagation(),Ot.preventDefault(),Xe=!1)}function Kt(){return Se}return{init:mt,pointerDown:Kt,destroy:Dt}}function zI(i,e){let t,r;function s(b){return b.timeStamp}function a(b,w){const L=`client${(w||i.scroll)==="x"?"X":"Y"}`;return(Vv(b,e)?b:b.touches[0])[L]}function o(b){return t=b,r=b,a(b)}function l(b){const w=a(b)-a(r),E=s(b)-s(t)>170;return r=b,E&&(t=b),w}function d(b){if(!t||!r)return 0;const w=a(r)-a(t),E=s(b)-s(t),L=s(b)-s(r)>170,M=w/E;return E&&!L&&xr(M)>.1?M:0}return{pointerDown:o,pointerMove:l,pointerUp:d,readPoint:a}}function LI(){function i(n){const{offsetTop:t,offsetLeft:r,offsetWidth:s,offsetHeight:a}=n;return{top:t,right:r+s,bottom:t+a,left:r,width:s,height:a}}return{measure:i}}function RI(i){function e(t){return i*(t/100)}return{measure:e}}function OI(i,e,n,t,r,s,a){let o,l,d=[],_=!1;function b(M){return r.measureSize(a.measure(M))}function w(M){if(!s)return;l=b(i),d=t.map(b);function F(G){for(const Q of G){const ge=Q.target===i,le=t.indexOf(Q.target),re=ge?l:d[le],me=b(ge?i:t[le]);if(xr(me-re)>=.5){n.requestAnimationFrame(()=>{M.reInit(),e.emit("resize")});break}}}o=new ResizeObserver(G=>{_||(Bd(s)||s(M,G))&&F(G)}),[i].concat(t).forEach(G=>o.observe(G))}function E(){o&&o.disconnect(),_=!0}return{init:w,destroy:E}}function FI(i,e,n,t,r){let s=0,a=0,o=t,l=r,d=i.get(),_=0;function b(){const le=n.get()-i.get(),re=!o;let me=0;return re?(s=0,i.set(n),me=le):(s+=le/o,s*=l,d+=s,i.add(s),me=d-_),a=Nd(me),_=d,ge}function w(){const le=n.get()-e.get();return xr(le)<.001}function E(){return o}function L(){return a}function M(){return s}function F(){return G(t)}function q(){return Q(r)}function G(le){return o=le,ge}function Q(le){return l=le,ge}const ge={direction:L,duration:E,velocity:M,seek:b,settled:w,useBaseFriction:q,useBaseDuration:F,useFriction:Q,useDuration:G};return ge}function BI(i,e,n,t,r){const s=r.measure(10),a=r.measure(50),o=wa(.1,.99);let l=!1;function d(){return!(l||!i.reachedAny(n.get())||!i.reachedAny(e.get()))}function _(E){if(!d())return;const L=i.reachedMin(e.get())?"min":"max",M=xr(i[L]-e.get()),F=n.get()-e.get(),q=o.constrain(M/a);n.subtract(F*q),!E&&xr(F)<s&&(n.set(i.constrain(n.get())),t.useDuration(25).useBaseFriction())}function b(E){l=!E}return{constrain:_,toggleActive:b}}function NI(i,e,n,t,r){const s=wa(-e+i,0),a=b(),o=_(),l=w();function d(L,M){return Hc(L,M)<1}function _(){const L=a[0],M=Ii(a),F=a.lastIndexOf(L),q=a.indexOf(M)+1;return wa(F,q)}function b(){return n.map((L,M)=>{const{min:F,max:q}=s,G=s.constrain(L),Q=!M,ge=Vd(n,M);return Q?q:ge||d(F,G)?F:d(q,G)?q:G}).map(L=>parseFloat(L.toFixed(3)))}function w(){if(e<=i+r)return[s.max];if(t==="keepSnaps")return a;const{min:L,max:M}=o;return a.slice(L,M)}return{snapsContained:l,scrollContainLimit:o}}function VI(i,e,n){const t=e[0],r=n?t-i:Ii(e);return{limit:wa(r,t)}}function UI(i,e,n,t){const s=e.min+.1,a=e.max+.1,{reachedMin:o,reachedMax:l}=wa(s,a);function d(w){return w===1?l(n.get()):w===-1?o(n.get()):!1}function _(w){if(!d(w))return;const E=i*(w*-1);t.forEach(L=>L.add(E))}return{loop:_}}function jI(i){const{max:e,length:n}=i;function t(s){const a=s-e;return n?a/-n:0}return{get:t}}function qI(i,e,n,t,r){const{startEdge:s,endEdge:a}=i,{groupSlides:o}=r,l=b().map(e.measure),d=w(),_=E();function b(){return o(t).map(M=>Ii(M)[a]-M[0][s]).map(xr)}function w(){return t.map(M=>n[s]-M[s]).map(M=>-xr(M))}function E(){return o(d).map(M=>M[0]).map((M,F)=>M+l[F])}return{snaps:d,snapsAligned:_}}function GI(i,e,n,t,r,s){const{groupSlides:a}=r,{min:o,max:l}=t,d=_();function _(){const w=a(s),E=!i||e==="keepSnaps";return n.length===1?[s]:E?w:w.slice(o,l).map((L,M,F)=>{const q=!M,G=Vd(F,M);if(q){const Q=Ii(F[0])+1;return K_(Q)}if(G){const Q=au(s)-Ii(F)[0]+1;return K_(Q,Ii(F)[0])}return L})}return{slideRegistry:d}}function HI(i,e,n,t,r){const{reachedAny:s,removeOffset:a,constrain:o}=t;function l(L){return L.concat().sort((M,F)=>xr(M)-xr(F))[0]}function d(L){const M=i?a(L):o(L),F=e.map((G,Q)=>({diff:_(G-M,0),index:Q})).sort((G,Q)=>xr(G.diff)-xr(Q.diff)),{index:q}=F[0];return{index:q,distance:M}}function _(L,M){const F=[L,L+n,L-n];if(!i)return F[0];if(!M)return l(F);const q=F.filter(G=>Nd(G)===M);return q.length?l(q):Ii(F)-n}function b(L,M){const F=e[L]-r.get(),q=_(F,M);return{index:L,distance:q}}function w(L,M){const F=r.get()+L,{index:q,distance:G}=d(F),Q=!i&&s(F);if(!M||Q)return{index:q,distance:L};const ge=e[q]-G,le=L+_(ge,0);return{index:q,distance:le}}return{byDistance:w,byIndex:b,shortcut:_}}function ZI(i,e,n,t,r,s,a){function o(b){const w=b.distance,E=b.index!==e.get();s.add(w),w&&(t.duration()?i.start():(i.update(),i.render(1),i.update())),E&&(n.set(e.get()),e.set(b.index),a.emit("select"))}function l(b,w){const E=r.byDistance(b,w);o(E)}function d(b,w){const E=e.clone().set(b),L=r.byIndex(E.get(),w);o(L)}return{distance:l,index:d}}function WI(i,e,n,t,r,s){let a=0;function o(){s.add(document,"keydown",l,!1),e.forEach(d)}function l(b){b.code==="Tab"&&(a=new Date().getTime())}function d(b){const w=()=>{if(new Date().getTime()-a>10)return;i.scrollLeft=0;const M=e.indexOf(b),F=n.findIndex(q=>q.includes(M));Fd(F)&&(r.useDuration(0),t.index(F,0))};s.add(b,"focus",w,{passive:!0,capture:!0})}return{init:o}}function wf(i){let e=i;function n(){return e}function t(l){e=a(l)}function r(l){e+=a(l)}function s(l){e-=a(l)}function a(l){return Fd(l)?l:l.get()}return{get:n,set:t,add:r,subtract:s}}function jv(i,e){const n=i.scroll==="x"?s:a,t=e.style;let r=!1;function s(b){return`translate3d(${b}px,0px,0px)`}function a(b){return`translate3d(0px,${b}px,0px)`}function o(b){r||(t.transform=n(i.direction(b)))}function l(b){r=!b}function d(){r||(t.transform="",e.getAttribute("style")||e.removeAttribute("style"))}return{clear:d,to:o,toggleActive:l}}function KI(i,e,n,t,r,s,a,o,l){const _=Kc(r),b=Kc(r).reverse(),w=q().concat(G());function E(me,se){return me.reduce((Z,Y)=>Z-r[Y],se)}function L(me,se){return me.reduce((Z,Y)=>E(Z,se)>0?Z.concat([Y]):Z,[])}function M(me){return s.map((se,Z)=>({start:se-t[Z]+.5+me,end:se+e-.5+me}))}function F(me,se,Z){const Y=M(se);return me.map(ie=>{const be=Z?0:-n,fe=Z?n:0,ke=Z?"end":"start",je=Y[ie][ke];return{index:ie,loopPoint:je,slideLocation:wf(-1),translate:jv(i,l[ie]),target:()=>o.get()>je?be:fe}})}function q(){const me=a[0],se=L(b,me);return F(se,n,!1)}function G(){const me=e-a[0]-1,se=L(_,me);return F(se,-n,!0)}function Q(){return w.every(({index:me})=>{const se=_.filter(Z=>Z!==me);return E(se,e)<=.1})}function ge(){w.forEach(me=>{const{target:se,translate:Z,slideLocation:Y}=me,ie=se();ie!==Y.get()&&(Z.to(ie),Y.set(ie))})}function le(){w.forEach(me=>me.translate.clear())}return{canLoop:Q,clear:le,loop:ge,loopPoints:w}}function XI(i,e,n){let t,r=!1;function s(l){if(!n)return;function d(_){for(const b of _)if(b.type==="childList"){l.reInit(),e.emit("slidesChanged");break}}t=new MutationObserver(_=>{r||(Bd(n)||n(l,_))&&d(_)}),t.observe(i,{childList:!0})}function a(){t&&t.disconnect(),r=!0}return{init:s,destroy:a}}function JI(i,e,n,t){const r={};let s=null,a=null,o,l=!1;function d(){o=new IntersectionObserver(L=>{l||(L.forEach(M=>{const F=e.indexOf(M.target);r[F]=M}),s=null,a=null,n.emit("slidesInView"))},{root:i.parentElement,threshold:t}),e.forEach(L=>o.observe(L))}function _(){o&&o.disconnect(),l=!0}function b(L){return Xc(r).reduce((M,F)=>{const q=parseInt(F),{isIntersecting:G}=r[q];return(L&&G||!L&&!G)&&M.push(q),M},[])}function w(L=!0){if(L&&s)return s;if(!L&&a)return a;const M=b(L);return L&&(s=M),L||(a=M),M}return{init:d,destroy:_,get:w}}function YI(i,e,n,t,r,s){const{measureSize:a,startEdge:o,endEdge:l}=i,d=n[0]&&r,_=L(),b=M(),w=n.map(a),E=F();function L(){if(!d)return 0;const G=n[0];return xr(e[o]-G[o])}function M(){if(!d)return 0;const G=s.getComputedStyle(Ii(t));return parseFloat(G.getPropertyValue(`margin-${l}`))}function F(){return n.map((G,Q,ge)=>{const le=!Q,re=Vd(ge,Q);return le?w[Q]+_:re?w[Q]+b:ge[Q+1][o]-G[o]}).map(xr)}return{slideSizes:w,slideSizesWithGaps:E,startGap:_,endGap:b}}function QI(i,e,n,t,r,s,a,o,l){const{startEdge:d,endEdge:_,direction:b}=i,w=Fd(n);function E(q,G){return Kc(q).filter(Q=>Q%G===0).map(Q=>q.slice(Q,Q+G))}function L(q){return q.length?Kc(q).reduce((G,Q,ge)=>{const le=Ii(G)||0,re=le===0,me=Q===au(q),se=r[d]-s[le][d],Z=r[d]-s[Q][_],Y=!t&&re?b(a):0,ie=!t&&me?b(o):0,be=xr(Z-ie-(se+Y));return ge&&be>e+l&&G.push(Q),me&&G.push(q.length),G},[]).map((G,Q,ge)=>{const le=Math.max(ge[Q-1]||0);return q.slice(le,G)}):[]}function M(q){return w?E(q,n):L(q)}return{groupSlides:M}}function e3(i,e,n,t,r,s,a){const{align:o,axis:l,direction:d,startIndex:_,loop:b,duration:w,dragFree:E,dragThreshold:L,inViewThreshold:M,slidesToScroll:F,skipSnaps:q,containScroll:G,watchResize:Q,watchSlides:ge,watchDrag:le}=s,re=2,me=LI(),se=me.measure(e),Z=n.map(me.measure),Y=MI(l,d),ie=Y.measureSize(se),be=RI(ie),fe=PI(o,ie),ke=!b&&!!G,je=b||!!G,{slideSizes:Se,slideSizesWithGaps:Qe,startGap:Xe,endGap:at}=YI(Y,se,Z,n,je,r),mt=QI(Y,ie,F,b,se,Z,Xe,at,re),{snaps:Dt,snapsAligned:Ct}=qI(Y,fe,se,Z,mt),nn=-Ii(Dt)+Ii(Qe),{snapsContained:yn,scrollContainLimit:cn}=NI(ie,nn,Ct,G,re),At=ke?yn:Ct,{limit:Tt}=VI(nn,At,b),dn=Uv(au(At),_,b),rt=dn.clone(),Kt=Kc(n),en=({dragHandler:pt,scrollBody:Lt,scrollBounds:$s,options:{loop:Xr}})=>{Xr||$s.constrain(pt.pointerDown()),Lt.seek()},Ot=({scrollBody:pt,translate:Lt,location:$s,offsetLocation:Xr,scrollLooper:Ki,slideLooper:Jr,dragHandler:Ut,animation:In,eventHandler:Tn,options:{loop:$r}},qs)=>{const Cn=pt.velocity(),ii=pt.settled();ii&&!Ut.pointerDown()&&(In.stop(),Tn.emit("settle")),ii||Tn.emit("scroll"),Xr.set($s.get()-Cn+Cn*qs),$r&&(Ki.loop(pt.direction()),Jr.loop()),Lt.to(Xr.get())},Et=AI(t,r,()=>en(si),pt=>Ot(si,pt)),et=.68,bn=At[dn.get()],fn=wf(bn),He=wf(bn),Un=wf(bn),br=FI(fn,He,Un,w,et),wn=HI(b,At,nn,Tt,Un),Gn=ZI(Et,dn,rt,br,wn,Un,a),gs=jI(Tt),Ds=Jc(),vs=JI(e,n,a,M),{slideRegistry:ys}=GI(ke,G,At,cn,mt,Kt),bs=WI(i,n,ys,Gn,br,Ds),si={ownerDocument:t,ownerWindow:r,eventHandler:a,containerRect:se,slideRects:Z,animation:Et,axis:Y,dragHandler:DI(Y,i,t,r,Un,zI(Y,r),fn,Et,Gn,br,wn,dn,a,be,E,L,q,et,le),eventStore:Ds,percentOfView:be,index:dn,indexPrevious:rt,limit:Tt,location:fn,offsetLocation:He,options:s,resizeHandler:OI(e,a,r,n,Y,Q,me),scrollBody:br,scrollBounds:BI(Tt,He,Un,br,be),scrollLooper:UI(nn,Tt,He,[fn,He,Un]),scrollProgress:gs,scrollSnapList:At.map(gs.get),scrollSnaps:At,scrollTarget:wn,scrollTo:Gn,slideLooper:KI(Y,ie,nn,Se,Qe,Dt,At,He,n),slideFocus:bs,slidesHandler:XI(e,a,ge),slidesInView:vs,slideIndexes:Kt,slideRegistry:ys,slidesToScroll:mt,target:Un,translate:jv(Y,e)};return si}function t3(){const i={};let e;function n(l){e=l}function t(l){return i[l]||[]}function r(l){return t(l).forEach(d=>d(e,l)),o}function s(l,d){return i[l]=t(l).concat([d]),o}function a(l,d){return i[l]=t(l).filter(_=>_!==d),o}const o={init:n,emit:r,off:a,on:s};return o}const n3={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function r3(i){function e(s,a){return Nv(s,a||{})}function n(s){const a=s.breakpoints||{},o=Xc(a).filter(l=>i.matchMedia(l).matches).map(l=>a[l]).reduce((l,d)=>e(l,d),{});return e(s,o)}function t(s){return s.map(a=>Xc(a.breakpoints||{})).reduce((a,o)=>a.concat(o),[]).map(i.matchMedia)}return{mergeOptions:e,optionsAtMedia:n,optionsMediaQueries:t}}function s3(i){let e=[];function n(s,a){return e=a.filter(({options:o})=>i.optionsAtMedia(o).active!==!1),e.forEach(o=>o.init(s,i)),a.reduce((o,l)=>Object.assign(o,{[l.name]:l}),{})}function t(){e=e.filter(s=>s.destroy())}return{init:n,destroy:t}}function zf(i,e,n){const t=i.ownerDocument,r=t.defaultView,s=r3(r),a=s3(s),o=Jc(),l=t3(),{mergeOptions:d,optionsAtMedia:_,optionsMediaQueries:b}=s,{on:w,off:E,emit:L}=l,M=ie;let F=!1,q,G=d(n3,zf.globalOptions),Q=d(G),ge=[],le,re,me;function se(){const{container:en,slides:Ot}=Q;re=(yd(en)?i.querySelector(en):en)||i.children[0];const et=yd(Ot)?re.querySelectorAll(Ot):Ot;me=[].slice.call(et||re.children)}function Z(en){const Ot=e3(i,re,me,t,r,en,l);if(en.loop&&!Ot.slideLooper.canLoop()){const Et=Object.assign({},en,{loop:!1});return Z(Et)}return Ot}function Y(en,Ot){F||(G=d(G,en),Q=_(G),ge=Ot||ge,se(),q=Z(Q),b([G,...ge.map(({options:Et})=>Et)]).forEach(Et=>o.add(Et,"change",ie)),Q.active&&(q.translate.to(q.location.get()),q.animation.init(),q.slidesInView.init(),q.slideFocus.init(),q.eventHandler.init(Kt),q.resizeHandler.init(Kt),q.slidesHandler.init(Kt),q.options.loop&&q.slideLooper.loop(),re.offsetParent&&me.length&&q.dragHandler.init(Kt),le=a.init(Kt,ge)))}function ie(en,Ot){const Et=Dt();be(),Y(d({startIndex:Et},en),Ot),l.emit("reInit")}function be(){q.dragHandler.destroy(),q.eventStore.clear(),q.translate.clear(),q.slideLooper.clear(),q.resizeHandler.destroy(),q.slidesHandler.destroy(),q.slidesInView.destroy(),q.animation.destroy(),a.destroy(),o.clear()}function fe(){F||(F=!0,o.clear(),be(),l.emit("destroy"))}function ke(en,Ot,Et){!Q.active||F||(q.scrollBody.useBaseFriction().useDuration(Ot===!0?0:Q.duration),q.scrollTo.index(en,Et||0))}function je(en){const Ot=q.index.add(1).get();ke(Ot,en,-1)}function Se(en){const Ot=q.index.add(-1).get();ke(Ot,en,1)}function Qe(){return q.index.add(1).get()!==Dt()}function Xe(){return q.index.add(-1).get()!==Dt()}function at(){return q.scrollSnapList}function mt(){return q.scrollProgress.get(q.location.get())}function Dt(){return q.index.get()}function Ct(){return q.indexPrevious.get()}function nn(){return q.slidesInView.get()}function yn(){return q.slidesInView.get(!1)}function cn(){return le}function At(){return q}function Tt(){return i}function dn(){return re}function rt(){return me}const Kt={canScrollNext:Qe,canScrollPrev:Xe,containerNode:dn,internalEngine:At,destroy:fe,off:E,on:w,emit:L,plugins:cn,previousScrollSnap:Ct,reInit:M,rootNode:Tt,scrollNext:je,scrollPrev:Se,scrollProgress:mt,scrollSnapList:at,scrollTo:ke,selectedScrollSnap:Dt,slideNodes:rt,slidesInView:nn,slidesNotInView:yn};return Y(e,n),setTimeout(()=>l.emit("init"),0),Kt}zf.globalOptions=void 0;function Ud(i,e={options:{},plugins:[]}){let n=e,t;return TI()&&(zf.globalOptions=Ud.globalOptions,t=zf(i,n.options,n.plugins),t.on("init",()=>i.dispatchEvent(new CustomEvent("emblaInit",{detail:t})))),{destroy:()=>{t&&t.destroy()},update:r=>{const s=!Od(n.options,r.options),a=!II(n.plugins,r.plugins);!s&&!a||(n=r,t&&t.reInit(n.options,n.plugins))}}}Ud.globalOptions=void 0;function i3(i){let e,n,t,r,s,a,o;const l=i[10].default,d=$t(l,i,i[9],null);let _=[{class:t=qt("flex",i[2]==="horizontal"?"-ml-4":"-mt-4 flex-col",i[0])},{"data-embla-container":""},i[8]],b={};for(let w=0;w<_.length;w+=1)b=Ce(b,_[w]);return{c(){e=oe("div"),n=oe("div"),d&&d.c(),this.h()},l(w){e=ae(w,"DIV",{class:!0});var E=$e(e);n=ae(E,"DIV",{class:!0,"data-embla-container":!0});var L=$e(n);d&&d.l(L),L.forEach(S),E.forEach(S),this.h()},h(){Vt(n,b),te(e,"class","overflow-hidden")},m(w,E){R(w,e,E),ce(e,n),d&&d.m(n,null),s=!0,a||(o=[qn(r=Ud.call(null,e,{options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...i[1],axis:i[2]==="horizontal"?"x":"y"},plugins:i[3]})),bt(e,"emblaInit",i[7])],a=!0)},p(w,[E]){d&&d.p&&(!s||E&512)&&wt(d,l,w,w[9],s?kt(l,w[9],E,null):xt(w[9]),null),Vt(n,b=Pt(_,[(!s||E&5&&t!==(t=qt("flex",w[2]==="horizontal"?"-ml-4":"-mt-4 flex-col",w[0])))&&{class:t},{"data-embla-container":""},E&256&&w[8]])),r&&Sd(r.update)&&E&14&&r.update.call(null,{options:{container:"[data-embla-container]",slides:"[data-embla-slide]",...w[1],axis:w[2]==="horizontal"?"x":"y"},plugins:w[3]})},i(w){s||(T(d,w),s=!0)},o(w){I(d,w),s=!1},d(w){w&&S(e),d&&d.d(w),a=!1,kr(o)}}}function o3(i,e,n){const t=["class"];let r=lt(e,t),s,a,o,{$$slots:l={},$$scope:d}=e,{class:_=void 0}=e;const{orientation:b,options:w,plugins:E,onInit:L}=Bv("<Carousel.Content/>");return sn(i,b,M=>n(2,a=M)),sn(i,w,M=>n(1,s=M)),sn(i,E,M=>n(3,o=M)),i.$$set=M=>{e=Ce(Ce({},e),Mt(M)),n(8,r=lt(e,t)),"class"in M&&n(0,_=M.class),"$$scope"in M&&n(9,d=M.$$scope)},[_,s,a,o,b,w,E,L,r,d,l]}class a3 extends it{constructor(e){super(),ot(this,e,o3,i3,nt,{class:0})}}function l3(i){let e,n,t;const r=i[5].default,s=$t(r,i,i[4],null);let a=[{role:"group"},{"aria-roledescription":"slide"},{class:n=qt("min-w-0 shrink-0 grow-0 basis-full",i[1]==="horizontal"?"pl-4":"pt-4",i[0])},{"data-embla-slide":""},i[3]],o={};for(let l=0;l<a.length;l+=1)o=Ce(o,a[l]);return{c(){e=oe("div"),s&&s.c(),this.h()},l(l){e=ae(l,"DIV",{role:!0,"aria-roledescription":!0,class:!0,"data-embla-slide":!0});var d=$e(e);s&&s.l(d),d.forEach(S),this.h()},h(){Vt(e,o)},m(l,d){R(l,e,d),s&&s.m(e,null),t=!0},p(l,[d]){s&&s.p&&(!t||d&16)&&wt(s,r,l,l[4],t?kt(r,l[4],d,null):xt(l[4]),null),Vt(e,o=Pt(a,[{role:"group"},{"aria-roledescription":"slide"},(!t||d&3&&n!==(n=qt("min-w-0 shrink-0 grow-0 basis-full",l[1]==="horizontal"?"pl-4":"pt-4",l[0])))&&{class:n},{"data-embla-slide":""},d&8&&l[3]]))},i(l){t||(T(s,l),t=!0)},o(l){I(s,l),t=!1},d(l){l&&S(e),s&&s.d(l)}}}function c3(i,e,n){const t=["class"];let r=lt(e,t),s,{$$slots:a={},$$scope:o}=e,{class:l=void 0}=e;const{orientation:d}=Bv("<Carousel.Item/>");return sn(i,d,_=>n(1,s=_)),i.$$set=_=>{e=Ce(Ce({},e),Mt(_)),n(3,r=lt(e,t)),"class"in _&&n(0,l=_.class),"$$scope"in _&&n(4,o=_.$$scope)},[l,s,d,r,o,a]}class u3 extends it{constructor(e){super(),ot(this,e,c3,l3,nt,{class:0})}}function f3(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function h3(i){let e,n;const t=[{class:qt("text-lg font-semibold leading-none tracking-tight",i[0])},i[1]];let r={$$slots:{default:[f3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new Nk({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("text-lg font-semibold leading-none tracking-tight",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function d3(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}class jd extends it{constructor(e){super(),ot(this,e,d3,h3,nt,{class:0})}}function p3(i){let e;const n=i[1].default,t=$t(n,i,i[2],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&4)&&wt(t,n,r,r[2],e?kt(n,r[2],s,null):xt(r[2]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function m3(i){let e,n;const t=[i[0]];let r={$$slots:{default:[p3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new eC({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&1?Pt(t,[mn(s[0])]):{};a&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function _3(i,e,n){const t=[];let r=lt(e,t),{$$slots:s={},$$scope:a}=e;return i.$$set=o=>{e=Ce(Ce({},e),Mt(o)),n(0,r=lt(e,t)),"$$scope"in o&&n(2,a=o.$$scope)},[r,s,a]}class g3 extends it{constructor(e){super(),ot(this,e,_3,m3,nt,{})}}function v3(i){let e,n,t;const r=i[3].default,s=$t(r,i,i[2],null);let a=[{class:n=qt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",i[0])},i[1]],o={};for(let l=0;l<a.length;l+=1)o=Ce(o,a[l]);return{c(){e=oe("div"),s&&s.c(),this.h()},l(l){e=ae(l,"DIV",{class:!0});var d=$e(e);s&&s.l(d),d.forEach(S),this.h()},h(){Vt(e,o)},m(l,d){R(l,e,d),s&&s.m(e,null),t=!0},p(l,[d]){s&&s.p&&(!t||d&4)&&wt(s,r,l,l[2],t?kt(r,l[2],d,null):xt(l[2]),null),Vt(e,o=Pt(a,[(!t||d&1&&n!==(n=qt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",l[0])))&&{class:n},d&2&&l[1]]))},i(l){t||(T(s,l),t=!0)},o(l){I(s,l),t=!1},d(l){l&&S(e),s&&s.d(l)}}}function y3(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(2,a=l.$$scope)},[o,r,a,s]}class b3 extends it{constructor(e){super(),ot(this,e,y3,v3,nt,{class:0})}}function $3(i){let e,n,t;const r=i[3].default,s=$t(r,i,i[2],null);let a=[{class:n=qt("flex flex-col space-y-1.5 text-center sm:text-left",i[0])},i[1]],o={};for(let l=0;l<a.length;l+=1)o=Ce(o,a[l]);return{c(){e=oe("div"),s&&s.c(),this.h()},l(l){e=ae(l,"DIV",{class:!0});var d=$e(e);s&&s.l(d),d.forEach(S),this.h()},h(){Vt(e,o)},m(l,d){R(l,e,d),s&&s.m(e,null),t=!0},p(l,[d]){s&&s.p&&(!t||d&4)&&wt(s,r,l,l[2],t?kt(r,l[2],d,null):xt(l[2]),null),Vt(e,o=Pt(a,[(!t||d&1&&n!==(n=qt("flex flex-col space-y-1.5 text-center sm:text-left",l[0])))&&{class:n},d&2&&l[1]]))},i(l){t||(T(s,l),t=!0)},o(l){I(s,l),t=!1},d(l){l&&S(e),s&&s.d(l)}}}function w3(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(2,a=l.$$scope)},[o,r,a,s]}class lu extends it{constructor(e){super(),ot(this,e,w3,$3,nt,{class:0})}}function x3(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{class:qt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",i[0])},i[3]];let r={};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new CC({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&15?Pt(t,[a&2&&{transition:s[1]},a&4&&{transitionConfig:s[2]},a&1&&{class:qt("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm",s[0])},a&8&&mn(s[3])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function k3(i,e,n){const t=["class","transition","transitionConfig"];let r=lt(e,t),{class:s=void 0}=e,{transition:a=cw}=e,{transitionConfig:o={duration:150}}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(3,r=lt(e,t)),"class"in l&&n(0,s=l.class),"transition"in l&&n(1,a=l.transition),"transitionConfig"in l&&n(2,o=l.transitionConfig)},[s,a,o,r]}class C3 extends it{constructor(e){super(),ot(this,e,k3,x3,nt,{class:0,transition:1,transitionConfig:2})}}function S3(i){let e,n,t,r="Close",s;return e=new Y$({props:{class:"h-4 w-4"}}),{c(){N(e.$$.fragment),n=de(),t=oe("span"),t.textContent=r,this.h()},l(a){j(e.$$.fragment,a),n=pe(a),t=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(t)!=="svelte-1pewzs3"&&(t.textContent=r),this.h()},h(){te(t,"class","sr-only")},m(a,o){V(e,a,o),R(a,n,o),R(a,t,o),s=!0},p:gt,i(a){s||(T(e.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),s=!1},d(a){a&&(S(n),S(t)),U(e,a)}}}function T3(i){let e,n,t;const r=i[4].default,s=$t(r,i,i[5],null);return n=new Zk({props:{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",$$slots:{default:[S3]},$$scope:{ctx:i}}}),{c(){s&&s.c(),e=de(),N(n.$$.fragment)},l(a){s&&s.l(a),e=pe(a),j(n.$$.fragment,a)},m(a,o){s&&s.m(a,o),R(a,e,o),V(n,a,o),t=!0},p(a,o){s&&s.p&&(!t||o&32)&&wt(s,r,a,a[5],t?kt(r,a[5],o,null):xt(a[5]),null);const l={};o&32&&(l.$$scope={dirty:o,ctx:a}),n.$set(l)},i(a){t||(T(s,a),T(n.$$.fragment,a),t=!0)},o(a){I(s,a),I(n.$$.fragment,a),t=!1},d(a){a&&S(e),s&&s.d(a),U(n,a)}}}function I3(i){let e,n,t,r;e=new C3({});const s=[{transition:i[1]},{transitionConfig:i[2]},{class:qt("w-full-dialog-custom fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",i[0])},i[3]];let a={$$slots:{default:[T3]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Ce(a,s[o]);return t=new mC({props:a}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),r=!0},p(o,l){const d=l&15?Pt(s,[l&2&&{transition:o[1]},l&4&&{transitionConfig:o[2]},l&1&&{class:qt("w-full-dialog-custom fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg md:w-full",o[0])},l&8&&mn(o[3])]):{};l&32&&(d.$$scope={dirty:l,ctx:o}),t.$set(d)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function E3(i){let e,n;return e=new g3({props:{$$slots:{default:[I3]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&47&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function P3(i,e,n){const t=["class","transition","transitionConfig"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{transition:l=Id}=e,{transitionConfig:d={duration:200}}=e;return i.$$set=_=>{e=Ce(Ce({},e),Mt(_)),n(3,r=lt(e,t)),"class"in _&&n(0,o=_.class),"transition"in _&&n(1,l=_.transition),"transitionConfig"in _&&n(2,d=_.transitionConfig),"$$scope"in _&&n(5,a=_.$$scope)},[o,l,d,r,s,a]}class Ca extends it{constructor(e){super(),ot(this,e,P3,E3,nt,{class:0,transition:1,transitionConfig:2})}}function A3(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function M3(i){let e,n;const t=[{class:qt("text-sm text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[A3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new BC({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("text-sm text-muted-foreground",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function D3(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}class cu extends it{constructor(e){super(),ot(this,e,D3,M3,nt,{class:0})}}const Sa=Dk,qv=MC;function X_(i,e,n){const t=i.slice();return t[23]=e[n],t[25]=n,t}function J_(i){let e,n,t,r=i[23].nickname+"",s,a,o,l,d=i[23].text+"",_,b,w,E,L=i[23].rating+"",M,F,q,G,Q="Report",ge,le,re;function me(){return i[13](i[23])}return{c(){e=oe("div"),n=oe("div"),t=oe("div"),s=Ve(r),a=de(),o=oe("div"),l=oe("div"),_=Ve(d),b=de(),w=oe("div"),E=oe("div"),M=Ve(L),F=de(),q=oe("div"),G=oe("button"),G.textContent=Q,ge=de(),this.h()},l(se){e=ae(se,"DIV",{class:!0});var Z=$e(e);n=ae(Z,"DIV",{class:!0});var Y=$e(n);t=ae(Y,"DIV",{class:!0});var ie=$e(t);s=Ue(ie,r),ie.forEach(S),Y.forEach(S),a=pe(Z),o=ae(Z,"DIV",{class:!0});var be=$e(o);l=ae(be,"DIV",{class:!0});var fe=$e(l);_=Ue(fe,d),fe.forEach(S),be.forEach(S),b=pe(Z),w=ae(Z,"DIV",{class:!0});var ke=$e(w);E=ae(ke,"DIV",{class:!0});var je=$e(E);M=Ue(je,L),je.forEach(S),ke.forEach(S),F=pe(Z),q=ae(Z,"DIV",{class:!0});var Se=$e(q);G=ae(Se,"BUTTON",{class:!0,"data-svelte-h":!0}),an(G)!=="svelte-16v2fwz"&&(G.textContent=Q),Se.forEach(S),ge=pe(Z),Z.forEach(S),this.h()},h(){te(t,"class","user-name text-white"),te(n,"class","comment-info w-1/4"),te(l,"class","comment-text text-white"),te(o,"class","comment-info w-1/4"),te(E,"class","comment-rating text-white"),te(w,"class","comment-info w-1/4"),te(G,"class","report-button py-2 px-4 bg-red-600 text-white rounded-lg svelte-vwcu2f"),te(q,"class","comment-info w-1/4"),te(e,"class","comment-wrapper flex items-center justify-between px-4 mb-4 w-full svelte-vwcu2f")},m(se,Z){R(se,e,Z),ce(e,n),ce(n,t),ce(t,s),ce(e,a),ce(e,o),ce(o,l),ce(l,_),ce(e,b),ce(e,w),ce(w,E),ce(E,M),ce(e,F),ce(e,q),ce(q,G),ce(e,ge),le||(re=bt(G,"click",me),le=!0)},p(se,Z){i=se,Z&8&&r!==(r=i[23].nickname+"")&&Ft(s,r),Z&8&&d!==(d=i[23].text+"")&&Ft(_,d),Z&8&&L!==(L=i[23].rating+"")&&Ft(M,L)},d(se){se&&S(e),le=!1,re()}}}function z3(i){let e;return{c(){e=Ve("Upload Picture")},l(n){e=Ue(n,"Upload Picture")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function L3(i){let e,n,t,r,s,a,o,l,d,_,b="Comments",w,E,L,M='<div class="w-1/4">User</div> <div class="w-1/4">Comment</div> <div class="w-1/4">Rating</div>',F,q,G,Q,ge,le,re="Rating:",me,se,Z,Y,ie="Add Comment",be,fe,ke,je,Se="Upload a picture of this location!",Qe,Xe,at,mt,Dt,Ct,nn,yn=Qt(i[3]),cn=[];for(let At=0;At<yn.length;At+=1)cn[At]=J_(X_(i,yn,At));return mt=new Vn({props:{variant:"secondary",class:"mt-4",$$slots:{default:[z3]},$$scope:{ctx:i}}}),mt.$on("click",i[7]),{c(){e=oe("div"),n=oe("h2"),t=Ve(i[5]),r=de(),s=oe("p"),a=Ve("ID: "),o=Ve(i[4]),l=de(),d=oe("div"),_=oe("h3"),_.textContent=b,w=de(),E=oe("div"),L=oe("div"),L.innerHTML=M,F=de();for(let At=0;At<cn.length;At+=1)cn[At].c();q=de(),G=oe("textarea"),Q=de(),ge=oe("div"),le=oe("label"),le.textContent=re,me=de(),se=oe("input"),Z=de(),Y=oe("button"),Y.textContent=ie,be=de(),fe=oe("div"),ke=oe("div"),je=oe("label"),je.textContent=Se,Qe=de(),Xe=oe("input"),at=de(),N(mt.$$.fragment),this.h()},l(At){e=ae(At,"DIV",{class:!0});var Tt=$e(e);n=ae(Tt,"H2",{class:!0});var dn=$e(n);t=Ue(dn,i[5]),dn.forEach(S),r=pe(Tt),s=ae(Tt,"P",{class:!0});var rt=$e(s);a=Ue(rt,"ID: "),o=Ue(rt,i[4]),rt.forEach(S),l=pe(Tt),d=ae(Tt,"DIV",{class:!0});var Kt=$e(d);_=ae(Kt,"H3",{class:!0,"data-svelte-h":!0}),an(_)!=="svelte-xqj6bi"&&(_.textContent=b),w=pe(Kt),E=ae(Kt,"DIV",{class:!0});var en=$e(E);L=ae(en,"DIV",{class:!0,"data-svelte-h":!0}),an(L)!=="svelte-1mcpo61"&&(L.innerHTML=M),F=pe(en);for(let bn=0;bn<cn.length;bn+=1)cn[bn].l(en);en.forEach(S),Kt.forEach(S),q=pe(Tt),G=ae(Tt,"TEXTAREA",{class:!0,placeholder:!0}),$e(G).forEach(S),Q=pe(Tt),ge=ae(Tt,"DIV",{class:!0});var Ot=$e(ge);le=ae(Ot,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),an(le)!=="svelte-biuhfw"&&(le.textContent=re),me=pe(Ot),se=ae(Ot,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),Ot.forEach(S),Z=pe(Tt),Y=ae(Tt,"BUTTON",{class:!0,"data-svelte-h":!0}),an(Y)!=="svelte-195craw"&&(Y.textContent=ie),Tt.forEach(S),be=pe(At),fe=ae(At,"DIV",{class:!0});var Et=$e(fe);ke=ae(Et,"DIV",{class:!0});var et=$e(ke);je=ae(et,"LABEL",{for:!0,"data-svelte-h":!0}),an(je)!=="svelte-14dirxk"&&(je.textContent=Se),Qe=pe(et),Xe=ae(et,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),et.forEach(S),at=pe(Et),j(mt.$$.fragment,Et),Et.forEach(S),this.h()},h(){te(n,"class","text-2xl font-bold text-white svelte-vwcu2f"),te(s,"class","text-white"),te(_,"class","text-lg font-bold text-white mb-4"),te(L,"class","comment-header flex items-center bg-gray-700 text-white py-2 px-4 mb-4"),te(E,"class","comments-scroll svelte-vwcu2f"),te(d,"class","comment-container mt-8 overflow-y-auto max-h-48 svelte-vwcu2f"),te(G,"class","comment-input mt-4 w-full rounded-lg px-4 py-2"),te(G,"placeholder","Type your comment here..."),te(le,"for","rating"),te(le,"class","text-white"),te(se,"id","rating"),te(se,"type","number"),te(se,"min","1"),te(se,"max","5"),te(se,"class","w-full rounded-lg px-4 py-2 bg-gray-700 text-white"),te(ge,"class","rating-container mt-4"),te(Y,"class","bg-blue-500 text-white rounded-lg px-4 py-2 mt-4"),te(e,"class","flex flex-col items-center w-full max-w-full mx-auto bg-gray-800 rounded-lg p-8"),te(je,"for","poi-picture"),te(Xe,"id","poi-picture"),te(Xe,"type","file"),te(Xe,"accept","image/png, image/jpg, image/jpeg"),te(Xe,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),te(ke,"class","mb-4"),te(fe,"class","mb-4 text-white rounded shadow-md mt-6 w-full md:w-3/4 lg:w-1/2")},m(At,Tt){R(At,e,Tt),ce(e,n),ce(n,t),ce(e,r),ce(e,s),ce(s,a),ce(s,o),ce(e,l),ce(e,d),ce(d,_),ce(d,w),ce(d,E),ce(E,L),ce(E,F);for(let dn=0;dn<cn.length;dn+=1)cn[dn]&&cn[dn].m(E,null);ce(e,q),ce(e,G),ji(G,i[1]),ce(e,Q),ce(e,ge),ce(ge,le),ce(ge,me),ce(ge,se),ji(se,i[2]),ce(e,Z),ce(e,Y),R(At,be,Tt),R(At,fe,Tt),ce(fe,ke),ce(ke,je),ce(ke,Qe),ce(ke,Xe),ce(fe,at),V(mt,fe,null),Dt=!0,Ct||(nn=[bt(G,"input",i[14]),bt(se,"input",i[15]),bt(Y,"click",i[6]),bt(Xe,"change",i[8])],Ct=!0)},p(At,Tt){if(Tt&520){yn=Qt(At[3]);let rt;for(rt=0;rt<yn.length;rt+=1){const Kt=X_(At,yn,rt);cn[rt]?cn[rt].p(Kt,Tt):(cn[rt]=J_(Kt),cn[rt].c(),cn[rt].m(E,null))}for(;rt<cn.length;rt+=1)cn[rt].d(1);cn.length=yn.length}Tt&2&&ji(G,At[1]),Tt&4&&U0(se.value)!==At[2]&&ji(se,At[2]);const dn={};Tt&67108864&&(dn.$$scope={dirty:Tt,ctx:At}),mt.$set(dn)},i(At){Dt||(T(mt.$$.fragment,At),Dt=!0)},o(At){I(mt.$$.fragment,At),Dt=!1},d(At){At&&(S(e),S(be),S(fe)),ls(cn,At),U(mt),Ct=!1,kr(nn)}}}function R3(i){let e,n;return e=new Ca({props:{$$slots:{default:[L3]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&67108878&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function O3(i){let e,n;return e=new Sa({props:{open:!0,onOpenChange:i[16],$$slots:{default:[R3]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&1&&(s.onOpenChange=t[16]),r&67108878&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function F3(i,e,n){let{poi:t}=e;const{id:r,name:s,description:a,features:o}=t;let{userNickname:l}=e,{onClose:d}=e,{refreshPOIs:_}=e,b="",w=1,E,L=[];const M=async Y=>{try{let ie="/api/comments";Y!==void 0&&(ie+=`?poiId=${Y}`);const be=await fetch(ie);if(be.ok){const fe=await be.json();console.log("Fetched comments:",fe),n(3,L=fe)}else console.error("Failed to fetch comments:",be.statusText)}catch(ie){console.error("Error fetching comments:",ie)}};async function F(){if(b.trim()!=="")try{console.log("User ID:",1),console.log("POI ID:",t.id),console.log("Comment Text:",b),console.log("Rating:",w);const Y=await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:1,poi_id:t.id,text:b,rating:w})});Y.ok?(M(t.id),n(1,b="")):console.error("Failed to add ViewDetails comment:",Y.statusText)}catch(Y){console.error("Error adding comment:",Y)}}async function q(){if(E){const Y=new FormData;Y.append("picture",E),Y.append("poi_id",String(t.id));try{(await fetch("/api/poi/poi-image/upload",{method:"POST",body:Y})).ok&&(ge(t.id),Gc.success("Successfully added picture for POI!"),Sv.checkForUpdates(),d())}catch(ie){console.error("Error uploading file:",ie)}}}const G=["image/png","image/jpg","image/jpeg"];function Q(Y){const ie=Y.target;ie&&ie.files&&ie.files.length>0&&G.includes(ie.files[0].type)?E=ie.files[0]:E=void 0}const ge=async Y=>{const ie=new URLSearchParams({id:Y.toString()}),be=await fetch(`/api/poi/get-by-id?${ie.toString()}`);if(be.ok){const fe=await be.json(),ke=$a.decode(fe);if(qf.isRight(ke)){const je=ke.right;n(10,t.pictures=je.pictures,t),_()}else console.error("Invalid POI object received from API: ",ke.left)}};async function le(Y){try{if((await fetch(`/api/comments/${Y}/report`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reported:!0})})).ok)Gc.success("Comment reported successfully.");else throw new Error("Failed to report comment.")}catch(ie){console.error("Error reporting comment:",ie),Gc.error("An error occurred while reporting the comment.")}}er(()=>{M(t.id)});const re=Y=>le(Y.id);function me(){b=this.value,n(1,b)}function se(){w=U0(this.value),n(2,w)}const Z=Y=>Y||d();return i.$$set=Y=>{"poi"in Y&&n(10,t=Y.poi),"userNickname"in Y&&n(11,l=Y.userNickname),"onClose"in Y&&n(0,d=Y.onClose),"refreshPOIs"in Y&&n(12,_=Y.refreshPOIs)},[d,b,w,L,r,s,F,q,Q,le,t,l,_,re,me,se,Z]}class B3 extends it{constructor(e){super(),ot(this,e,F3,O3,nt,{poi:10,userNickname:11,onClose:0,refreshPOIs:12})}}function N3(i){let e;const n=i[5].default,t=$t(n,i,i[8],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&256)&&wt(t,n,r,r[8],e?kt(n,r[8],s,null):xt(r[8]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function V3(i){let e,n,t;const r=[{class:qt(Y_({variant:i[2],size:i[3],className:i[1]}))},i[4]];function s(o){i[6](o)}let a={$$slots:{default:[N3]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ce(a,r[o]);return i[0]!==void 0&&(a.pressed=i[0]),e=new nS({props:a}),jt.push(()=>kn(e,"pressed",s)),e.$on("click",i[7]),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,l){V(e,o,l),t=!0},p(o,[l]){const d=l&30?Pt(r,[l&14&&{class:qt(Y_({variant:o[2],size:o[3],className:o[1]}))},l&16&&mn(o[4])]):{};l&256&&(d.$$scope={dirty:l,ctx:o}),!n&&l&1&&(n=!0,d.pressed=o[0],xn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function U3(i,e,n){const t=["class","variant","size","pressed"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{variant:l="default"}=e,{size:d="default"}=e,{pressed:_=void 0}=e;function b(E){_=E,n(0,_)}function w(E){Wt.call(this,i,E)}return i.$$set=E=>{e=Ce(Ce({},e),Mt(E)),n(4,r=lt(e,t)),"class"in E&&n(1,o=E.class),"variant"in E&&n(2,l=E.variant),"size"in E&&n(3,d=E.size),"pressed"in E&&n(0,_=E.pressed),"$$scope"in E&&n(8,a=E.$$scope)},[_,o,l,d,r,s,b,w,a]}class qd extends it{constructor(e){super(),ot(this,e,U3,V3,nt,{class:1,variant:2,size:3,pressed:0})}}const Y_=Z0({base:"inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors data-[state=on]:bg-accent data-[state=on]:text-accent-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ring-offset-background hover:bg-muted hover:text-muted-foreground",variants:{variant:{default:"bg-transparent",outline:"bg-transparent border border-input hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}});function j3(i){let e;const n=i[2].default,t=$t(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&wt(t,n,r,r[4],e?kt(n,r[4],s,null):xt(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function q3(i){let e,n;const t=[{class:qt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",i[0])},i[1]];let r={$$slots:{default:[j3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new ZC({props:r}),e.$on("mousedown",i[3]),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s[0])},a&2&&mn(s[1])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function G3(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;function l(d){Wt.call(this,i,d)}return i.$$set=d=>{e=Ce(Ce({},e),Mt(d)),n(1,r=lt(e,t)),"class"in d&&n(0,o=d.class),"$$scope"in d&&n(4,a=d.$$scope)},[o,r,s,l,a]}class fo extends it{constructor(e){super(),ot(this,e,G3,q3,nt,{class:0})}}function H3(i){let e,n;const t=i[4].default,r=$t(t,i,i[5],null);return{c(){e=oe("div"),r&&r.c(),this.h()},l(s){e=ae(s,"DIV",{class:!0});var a=$e(e);r&&r.l(a),a.forEach(S),this.h()},h(){te(e,"class","pb-4 pt-0")},m(s,a){R(s,e,a),r&&r.m(e,null),n=!0},p(s,a){r&&r.p&&(!n||a&32)&&wt(r,t,s,s[5],n?kt(t,s[5],a,null):xt(s[5]),null)},i(s){n||(T(r,s),n=!0)},o(s){I(r,s),n=!1},d(s){s&&S(e),r&&r.d(s)}}}function Z3(i){let e,n;const t=[{class:qt("overflow-hidden text-sm transition-all",i[0])},{transition:i[1]},{transitionConfig:i[2]},i[3]];let r={$$slots:{default:[H3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new Yx({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&15?Pt(t,[a&1&&{class:qt("overflow-hidden text-sm transition-all",s[0])},a&2&&{transition:s[1]},a&4&&{transitionConfig:s[2]},a&8&&mn(s[3])]):{};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function W3(i,e,n){const t=["class","transition","transitionConfig"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{transition:l=uw}=e,{transitionConfig:d={duration:200}}=e;return i.$$set=_=>{e=Ce(Ce({},e),Mt(_)),n(3,r=lt(e,t)),"class"in _&&n(0,o=_.class),"transition"in _&&n(1,l=_.transition),"transitionConfig"in _&&n(2,d=_.transitionConfig),"$$scope"in _&&n(5,a=_.$$scope)},[o,l,d,r,s,a]}class Gv extends it{constructor(e){super(),ot(this,e,W3,Z3,nt,{class:0,transition:1,transitionConfig:2})}}function K3(i){let e;const n=i[3].default,t=$t(n,i,i[4],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16)&&wt(t,n,r,r[4],e?kt(n,r[4],s,null):xt(r[4]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function X3(i){let e,n;const t=[{value:i[1]},{class:qt("border-b",i[0])},i[2]];let r={$$slots:{default:[K3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new xx({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&7?Pt(t,[a&2&&{value:s[1]},a&1&&{class:qt("border-b",s[0])},a&4&&mn(s[2])]):{};a&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function J3(i,e,n){const t=["class","value"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{value:l}=e;return i.$$set=d=>{e=Ce(Ce({},e),Mt(d)),n(2,r=lt(e,t)),"class"in d&&n(0,o=d.class),"value"in d&&n(1,l=d.value),"$$scope"in d&&n(4,a=d.$$scope)},[o,l,r,s,a]}class Hv extends it{constructor(e){super(),ot(this,e,J3,X3,nt,{class:0,value:1})}}function Y3(i){let e,n,t;const r=i[3].default,s=$t(r,i,i[5],null);return n=new _w({props:{class:"h-4 w-4 transition-transform duration-200"}}),{c(){s&&s.c(),e=de(),N(n.$$.fragment)},l(a){s&&s.l(a),e=pe(a),j(n.$$.fragment,a)},m(a,o){s&&s.m(a,o),R(a,e,o),V(n,a,o),t=!0},p(a,o){s&&s.p&&(!t||o&32)&&wt(s,r,a,a[5],t?kt(r,a[5],o,null):xt(a[5]),null)},i(a){t||(T(s,a),T(n.$$.fragment,a),t=!0)},o(a){I(s,a),I(n.$$.fragment,a),t=!1},d(a){a&&S(e),s&&s.d(a),U(n,a)}}}function Q3(i){let e,n;const t=[{class:qt("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",i[0])},i[2]];let r={$$slots:{default:[Y3]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new Ox({props:r}),e.$on("click",i[4]),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,a){const o=a&5?Pt(t,[a&1&&{class:qt("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s[0])},a&4&&mn(s[2])]):{};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function eE(i){let e,n;return e=new Px({props:{level:i[1],class:"flex",$$slots:{default:[Q3]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&2&&(s.level=t[1]),r&37&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function tE(i,e,n){const t=["class","level"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{level:l=3}=e;function d(_){Wt.call(this,i,_)}return i.$$set=_=>{e=Ce(Ce({},e),Mt(_)),n(2,r=lt(e,t)),"class"in _&&n(0,o=_.class),"level"in _&&n(1,l=_.level),"$$scope"in _&&n(5,a=_.$$scope)},[o,l,r,s,d,a]}class Zv extends it{constructor(e){super(),ot(this,e,tE,eE,nt,{class:0,level:1})}}const Wv=_x;function Q_(i,e,n){const t=i.slice();return t[25]=e[n],t[27]=n,t}function eg(i,e,n){const t=i.slice();return t[28]=e[n],t}function tg(i,e,n){const t=i.slice();return t[31]=e[n],t[27]=n,t}function nE(i){let e,n=i[0].isFavourite?"Remove From Favourites":"Add To Favourites",t,r,s;return r=new Ml({props:{class:"max-sm:w-4 max-sm:h-4"}}),{c(){e=oe("div"),t=Ve(n),N(r.$$.fragment),this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=$e(e);t=Ue(o,n),j(r.$$.fragment,o),o.forEach(S),this.h()},h(){te(e,"class","flex gap-2 items-center max-sm:text-xs")},m(a,o){R(a,e,o),ce(e,t),V(r,e,null),s=!0},p(a,o){(!s||o[0]&1)&&n!==(n=a[0].isFavourite?"Remove From Favourites":"Add To Favourites")&&Ft(t,n)},i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&S(e),U(r)}}}function rE(i){let e,n;return e=new qd({props:{class:"max-sm:p-2 max-sm:h-auto text-secondary-foreground hover:text-accent-foreground data-[state=off]:hover:bg-accent data-[state=off]:bg-background data-[state=on]:bg-primary data-[state=on]:hover:brightness-90 data-[state=on]:text-error-content",pressed:i[0].isFavourite,onPressedChange:i[9],$$slots:{default:[nE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1&&(s.pressed=t[0].isFavourite),r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function sE(i){let e,n="Add/Remove Favourite";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-17t27y0"&&(e.textContent=n),this.h()},h(){te(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function iE(i){let e,n,t,r;return e=new No({props:{$$slots:{default:[rE]},$$scope:{ctx:i}}}),t=new Vo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[sE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[0]&1|a[1]&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a[1]&4&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function oE(i){let e,n,t=i[0].name+"",r,s,a,o,l;function d(b){i[11](b)}let _={openDelay:0,closeDelay:0,onOutsideClick:i[10],$$slots:{default:[iE]},$$scope:{ctx:i}};return i[7][0]!==void 0&&(_.open=i[7][0]),a=new Oo({props:_}),jt.push(()=>kn(a,"open",d)),{c(){e=oe("div"),n=oe("p"),r=Ve(t),s=de(),N(a.$$.fragment),this.h()},l(b){e=ae(b,"DIV",{class:!0});var w=$e(e);n=ae(w,"P",{class:!0});var E=$e(n);r=Ue(E,t),E.forEach(S),s=pe(w),j(a.$$.fragment,w),w.forEach(S),this.h()},h(){te(n,"class","max-sm:text-sm"),te(e,"class","flex justify-between items-center gap-2")},m(b,w){R(b,e,w),ce(e,n),ce(n,r),ce(e,s),V(a,e,null),l=!0},p(b,w){(!l||w[0]&1)&&t!==(t=b[0].name+"")&&Ft(r,t);const E={};w[0]&1|w[1]&4&&(E.$$scope={dirty:w,ctx:b}),!o&&w[0]&128&&(o=!0,E.open=b[7][0],xn(()=>o=!1)),a.$set(E)},i(b){l||(T(a.$$.fragment,b),l=!0)},o(b){I(a.$$.fragment,b),l=!1},d(b){b&&S(e),U(a)}}}function aE(i){let e,n;return e=new _s({props:{$$slots:{default:[oE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&129|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function lE(i){let e,n;return e=new Wv({props:{$$slots:{default:[xE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&97|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function cE(i){let e,n;return e=new nr({props:{class:"mb-2",$$slots:{default:[CE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function uE(i){let e;return{c(){e=Ve("All Pictures")},l(n){e=Ue(n,"All Pictures")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function fE(i){let e,n,t="Pictures:",r,s,a;return s=new Vn({props:{size:"sm",$$slots:{default:[uE]},$$scope:{ctx:i}}}),s.$on("click",i[12]),{c(){e=oe("div"),n=oe("p"),n.textContent=t,r=de(),N(s.$$.fragment),this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);n=ae(l,"P",{"data-svelte-h":!0}),an(n)!=="svelte-gkyk2r"&&(n.textContent=t),r=pe(l),j(s.$$.fragment,l),l.forEach(S),this.h()},h(){te(e,"class","flex justify-between items-center grow mr-4")},m(o,l){R(o,e,l),ce(e,n),ce(e,r),V(s,e,null),a=!0},p(o,l){const d={};l[1]&4&&(d.$$scope={dirty:l,ctx:o}),s.$set(d)},i(o){a||(T(s.$$.fragment,o),a=!0)},o(o){I(s.$$.fragment,o),a=!1},d(o){o&&S(e),U(s)}}}function hE(i){let e,n,t;return{c(){e=oe("img"),this.h()},l(r){e=ae(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pr(e.src,n=i[0].pictures[i[27]*3])||te(e,"src",n),te(e,"alt",t="Picture "+(i[27]*3+1)),te(e,"class","object-contain rounded-xl h-full")},m(r,s){R(r,e,s)},p(r,s){s[0]&1&&!pr(e.src,n=r[0].pictures[r[27]*3])&&te(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+1))&&te(e,"alt",t)},d(r){r&&S(e)}}}function dE(i){let e,n;return e=new Lr({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[hE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function ng(i){let e,n,t,r,s;n=new nr({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[mE]},$$scope:{ctx:i}}});function a(){return i[14](i[27])}return{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);j(n.$$.fragment,l),l.forEach(S),this.h()},h(){te(e,"class","basis-1/3 relative h-full")},m(o,l){R(o,e,l),V(n,e,null),t=!0,r||(s=bt(e,"click",a),r=!0)},p(o,l){i=o;const d={};l[0]&1|l[1]&4&&(d.$$scope={dirty:l,ctx:i}),n.$set(d)},i(o){t||(T(n.$$.fragment,o),t=!0)},o(o){I(n.$$.fragment,o),t=!1},d(o){o&&S(e),U(n),r=!1,s()}}}function pE(i){let e,n,t;return{c(){e=oe("img"),this.h()},l(r){e=ae(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pr(e.src,n=i[0].pictures[i[27]*3+1])||te(e,"src",n),te(e,"alt",t="Picture "+(i[27]*3+2)),te(e,"class","object-contain rounded-xl h-full")},m(r,s){R(r,e,s)},p(r,s){s[0]&1&&!pr(e.src,n=r[0].pictures[r[27]*3+1])&&te(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+2))&&te(e,"alt",t)},d(r){r&&S(e)}}}function mE(i){let e,n;return e=new Lr({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[pE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function rg(i){let e,n,t,r,s;n=new nr({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[gE]},$$scope:{ctx:i}}});function a(){return i[15](i[27])}return{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);j(n.$$.fragment,l),l.forEach(S),this.h()},h(){te(e,"class","basis-1/3 relative h-full")},m(o,l){R(o,e,l),V(n,e,null),t=!0,r||(s=bt(e,"click",a),r=!0)},p(o,l){i=o;const d={};l[0]&1|l[1]&4&&(d.$$scope={dirty:l,ctx:i}),n.$set(d)},i(o){t||(T(n.$$.fragment,o),t=!0)},o(o){I(n.$$.fragment,o),t=!1},d(o){o&&S(e),U(n),r=!1,s()}}}function _E(i){let e,n,t;return{c(){e=oe("img"),this.h()},l(r){e=ae(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pr(e.src,n=i[0].pictures[i[27]*3+2])||te(e,"src",n),te(e,"alt",t="Picture "+(i[27]*3+3)),te(e,"class","object-contain rounded-xl h-full")},m(r,s){R(r,e,s)},p(r,s){s[0]&1&&!pr(e.src,n=r[0].pictures[r[27]*3+2])&&te(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+3))&&te(e,"alt",t)},d(r){r&&S(e)}}}function gE(i){let e,n;return e=new Lr({props:{class:"p-2 flex justify-center items-center relative h-full",$$slots:{default:[_E]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function vE(i){let e,n,t,r,s,a,o,l,d;t=new nr({props:{class:"p-1 relative h-full bg-background transition-colors hover:bg-secondary/70 cursor-pointer",$$slots:{default:[dE]},$$scope:{ctx:i}}});function _(){return i[13](i[27])}let b=i[0].pictures[i[27]*3+1]!==void 0&&ng(i),w=i[0].pictures[i[27]*3+2]!==void 0&&rg(i);return{c(){e=oe("div"),n=oe("div"),N(t.$$.fragment),r=de(),b&&b.c(),s=de(),w&&w.c(),a=de(),this.h()},l(E){e=ae(E,"DIV",{class:!0});var L=$e(e);n=ae(L,"DIV",{class:!0});var M=$e(n);j(t.$$.fragment,M),M.forEach(S),r=pe(L),b&&b.l(L),s=pe(L),w&&w.l(L),L.forEach(S),a=pe(E),this.h()},h(){te(n,"class","basis-1/3 relative h-full"),te(e,"class","flex relative gap-4 h-24")},m(E,L){R(E,e,L),ce(e,n),V(t,n,null),ce(e,r),b&&b.m(e,null),ce(e,s),w&&w.m(e,null),R(E,a,L),o=!0,l||(d=bt(n,"click",_),l=!0)},p(E,L){i=E;const M={};L[0]&1|L[1]&4&&(M.$$scope={dirty:L,ctx:i}),t.$set(M),i[0].pictures[i[27]*3+1]!==void 0?b?(b.p(i,L),L[0]&1&&T(b,1)):(b=ng(i),b.c(),T(b,1),b.m(e,s)):b&&(ht(),I(b,1,1,()=>{b=null}),dt()),i[0].pictures[i[27]*3+2]!==void 0?w?(w.p(i,L),L[0]&1&&T(w,1)):(w=rg(i),w.c(),T(w,1),w.m(e,null)):w&&(ht(),I(w,1,1,()=>{w=null}),dt())},i(E){o||(T(t.$$.fragment,E),T(b),T(w),o=!0)},o(E){I(t.$$.fragment,E),I(b),I(w),o=!1},d(E){E&&(S(e),S(a)),U(t),b&&b.d(),w&&w.d(),l=!1,d()}}}function sg(i,e){let n,t,r;return t=new u3({props:{$$slots:{default:[vE]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&65|a[1]&4&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function yE(i){let e=[],n=new Map,t,r,s=Qt(Array(Math.ceil(i[0].pictures.length/3)));const a=o=>o[27];for(let o=0;o<s.length;o+=1){let l=tg(i,s,o),d=a(l);n.set(d,e[o]=sg(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l[0]&65&&(s=Qt(Array(Math.ceil(o[0].pictures.length/3))),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,sg,t,tg),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function bE(i){let e,n;return e=new a3({props:{$$slots:{default:[yE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function $E(i){let e,n;return e=new CI({props:{class:"w-full",$$slots:{default:[bE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wE(i){let e,n,t,r;return e=new Zv({props:{class:"hover:no-underline transition-colors hover:bg-secondary/70 rounded-md px-3 py-2",$$slots:{default:[fE]},$$scope:{ctx:i}}}),t=new Gv({props:{class:"p-0 *:p-0 mt-2",$$slots:{default:[$E]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[0]&32|a[1]&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a[0]&65|a[1]&4&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function xE(i){let e,n;return e=new Hv({props:{value:"poi-pictures",class:"border-b-0",$$slots:{default:[wE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&97|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function kE(i){let e,n="No Pictures available for this Point of Interest";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1ofvg4f"&&(e.textContent=n),this.h()},h(){te(e,"class","text-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function CE(i){let e,n;return e=new Lr({props:{class:"p-2",$$slots:{default:[kE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function SE(i){let e;return{c(){e=Ve("Description:")},l(n){e=Ue(n,"Description:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function TE(i){let e,n=(i[0].description||"No description")+"",t;return{c(){e=oe("p"),t=Ve(n),this.h()},l(r){e=ae(r,"P",{id:!0,class:!0});var s=$e(e);t=Ue(s,n),s.forEach(S),this.h()},h(){te(e,"id","description"),te(e,"class","text-muted-foreground")},m(r,s){R(r,e,s),ce(e,t)},p(r,s){s[0]&1&&n!==(n=(r[0].description||"No description")+"")&&Ft(t,n)},d(r){r&&S(e)}}}function IE(i){let e,n;return e=new Lr({props:{class:"px-3 py-2 max-h-16 overflow-y-auto",$$slots:{default:[TE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function EE(i){let e;return{c(){e=Ve("Features:")},l(n){e=Ue(n,"Features:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function PE(i){let e,n=Qt(i[0].features),t=[];for(let r=0;r<n.length;r+=1)t[r]=ig(eg(i,n,r));return{c(){e=oe("ul");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=ae(r,"UL",{id:!0,class:!0});var s=$e(e);for(let a=0;a<t.length;a+=1)t[a].l(s);s.forEach(S),this.h()},h(){te(e,"id","features"),te(e,"class","list-disc ml-2")},m(r,s){R(r,e,s);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,s){if(s[0]&1){n=Qt(r[0].features);let a;for(a=0;a<n.length;a+=1){const o=eg(r,n,a);t[a]?t[a].p(o,s):(t[a]=ig(o),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&S(e),ls(t,r)}}}function AE(i){let e,n="No features";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{id:!0,class:!0,"data-svelte-h":!0}),an(e)!=="svelte-12d3m3b"&&(e.textContent=n),this.h()},h(){te(e,"id","features"),te(e,"class","text-muted-foreground")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function ig(i){let e,n=i[28]+"",t;return{c(){e=oe("li"),t=Ve(n),this.h()},l(r){e=ae(r,"LI",{class:!0});var s=$e(e);t=Ue(s,n),s.forEach(S),this.h()},h(){te(e,"class","text-muted-foreground")},m(r,s){R(r,e,s),ce(e,t)},p(r,s){s[0]&1&&n!==(n=r[28]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function ME(i){let e;function n(s,a){return s[0].features.length===0?AE:PE}let t=n(i),r=t(i);return{c(){r.c(),e=Fe()},l(s){r.l(s),e=Fe()},m(s,a){r.m(s,a),R(s,e,a)},p(s,a){t===(t=n(s))&&r?r.p(s,a):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&S(e),r.d(s)}}}function DE(i){let e,n;return e=new Lr({props:{class:"px-3 py-2 max-h-16 overflow-y-auto",$$slots:{default:[ME]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function zE(i){let e,n,t,r,s,a,o,l,d,_,b;const w=[cE,lE],E=[];function L(M,F){return M[0].pictures.length===0?0:1}return e=L(i),n=E[e]=w[e](i),r=new fo({props:{for:"description",$$slots:{default:[SE]},$$scope:{ctx:i}}}),a=new nr({props:{class:"p-0",$$slots:{default:[IE]},$$scope:{ctx:i}}}),l=new fo({props:{for:"features",$$slots:{default:[EE]},$$scope:{ctx:i}}}),_=new nr({props:{class:"p-0",$$slots:{default:[DE]},$$scope:{ctx:i}}}),{c(){n.c(),t=de(),N(r.$$.fragment),s=de(),N(a.$$.fragment),o=de(),N(l.$$.fragment),d=de(),N(_.$$.fragment)},l(M){n.l(M),t=pe(M),j(r.$$.fragment,M),s=pe(M),j(a.$$.fragment,M),o=pe(M),j(l.$$.fragment,M),d=pe(M),j(_.$$.fragment,M)},m(M,F){E[e].m(M,F),R(M,t,F),V(r,M,F),R(M,s,F),V(a,M,F),R(M,o,F),V(l,M,F),R(M,d,F),V(_,M,F),b=!0},p(M,F){let q=e;e=L(M),e===q?E[e].p(M,F):(ht(),I(E[q],1,1,()=>{E[q]=null}),dt(),n=E[e],n?n.p(M,F):(n=E[e]=w[e](M),n.c()),T(n,1),n.m(t.parentNode,t));const G={};F[1]&4&&(G.$$scope={dirty:F,ctx:M}),r.$set(G);const Q={};F[0]&1|F[1]&4&&(Q.$$scope={dirty:F,ctx:M}),a.$set(Q);const ge={};F[1]&4&&(ge.$$scope={dirty:F,ctx:M}),l.$set(ge);const le={};F[0]&1|F[1]&4&&(le.$$scope={dirty:F,ctx:M}),_.$set(le)},i(M){b||(T(n),T(r.$$.fragment,M),T(a.$$.fragment,M),T(l.$$.fragment,M),T(_.$$.fragment,M),b=!0)},o(M){I(n),I(r.$$.fragment,M),I(a.$$.fragment,M),I(l.$$.fragment,M),I(_.$$.fragment,M),b=!1},d(M){M&&(S(t),S(s),S(o),S(d)),E[e].d(M),U(r,M),U(a,M),U(l,M),U(_,M)}}}function LE(i){let e;return{c(){e=Ve("Navigate")},l(n){e=Ue(n,"Navigate")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function RE(i){let e;return{c(){e=Ve("View Details")},l(n){e=Ue(n,"View Details")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function OE(i){let e;return{c(){e=Ve("Close")},l(n){e=Ue(n,"Close")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function FE(i){let e,n,t,r,s,a;return e=new Vn({props:{size:"sm",class:"basis-1/3",href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(i[0].lngLat.lat)},${encodeURIComponent(i[0].lngLat.lng)}`,target:"_blank",$$slots:{default:[LE]},$$scope:{ctx:i}}}),t=new Vn({props:{variant:"secondary",size:"sm",class:"basis-1/3",$$slots:{default:[RE]},$$scope:{ctx:i}}}),t.$on("click",i[16]),s=new Vn({props:{variant:"secondary",size:"sm",class:"basis-1/3",$$slots:{default:[OE]},$$scope:{ctx:i}}}),s.$on("click",function(){Sd(i[2])&&i[2].apply(this,arguments)}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o),r=pe(o),j(s.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),R(o,r,l),V(s,o,l),a=!0},p(o,l){i=o;const d={};l[0]&1&&(d.href=`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(i[0].lngLat.lat)},${encodeURIComponent(i[0].lngLat.lng)}`),l[1]&4&&(d.$$scope={dirty:l,ctx:i}),e.$set(d);const _={};l[1]&4&&(_.$$scope={dirty:l,ctx:i}),t.$set(_);const b={};l[1]&4&&(b.$$scope={dirty:l,ctx:i}),s.$set(b)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),I(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function BE(i){let e,n,t,r,s,a;return e=new Kr({props:{class:"p-3",$$slots:{default:[aE]},$$scope:{ctx:i}}}),t=new Lr({props:{class:"grow p-3 pt-0 flex flex-col overflow-y-auto gap-2",$$slots:{default:[zE]},$$scope:{ctx:i}}}),s=new dS({props:{class:"flex justify-between p-3 grow-0 gap-2",$$slots:{default:[FE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o),r=pe(o),j(s.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),R(o,r,l),V(s,o,l),a=!0},p(o,l){const d={};l[0]&129|l[1]&4&&(d.$$scope={dirty:l,ctx:o}),e.$set(d);const _={};l[0]&97|l[1]&4&&(_.$$scope={dirty:l,ctx:o}),t.$set(_);const b={};l[0]&21|l[1]&4&&(b.$$scope={dirty:l,ctx:o}),s.$set(b)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),I(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function og(i){let e,n,t;function r(a){i[18](a)}let s={refreshPOIs:i[3],onClose:i[17],userNickname:i[1]};return i[0]!==void 0&&(s.poi=i[0]),e=new B3({props:s}),jt.push(()=>kn(e,"poi",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&8&&(l.refreshPOIs=a[3]),o[0]&16&&(l.onClose=a[17]),o[0]&2&&(l.userNickname=a[1]),!n&&o[0]&1&&(n=!0,l.poi=a[0],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function ag(i){let e,n;return e=new Sa({props:{open:!0,onOpenChange:i[20],$$slots:{default:[WE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&32&&(s.onOpenChange=t[20]),r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function NE(i){let e;return{c(){e=Ve("All Pictures")},l(n){e=Ue(n,"All Pictures")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function VE(i){let e,n,t;return{c(){e=oe("img"),this.h()},l(r){e=ae(r,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pr(e.src,n=i[25])||te(e,"src",n),te(e,"alt",t="Picture "+(i[27]*3+1)),te(e,"class","object-contain rounded-xl h-full")},m(r,s){R(r,e,s)},p(r,s){s[0]&1&&!pr(e.src,n=r[25])&&te(e,"src",n),s[0]&1&&t!==(t="Picture "+(r[27]*3+1))&&te(e,"alt",t)},d(r){r&&S(e)}}}function UE(i){let e,n;return e=new Lr({props:{class:"p-2 flex justify-center items-center relative h-24",$$slots:{default:[VE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function jE(i){let e,n;return e=new Zi({props:{$$slots:{default:[UE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function qE(i){let e,n,t,r,s,a;n=new Kr({props:{class:"p-2 transition-colors hover:bg-secondary/70 rounded-lg cursor-pointer",$$slots:{default:[jE]},$$scope:{ctx:i}}});function o(){return i[19](i[27])}return{c(){e=oe("div"),N(n.$$.fragment),t=de()},l(l){e=ae(l,"DIV",{});var d=$e(e);j(n.$$.fragment,d),d.forEach(S),t=pe(l)},m(l,d){R(l,e,d),V(n,e,null),R(l,t,d),r=!0,s||(a=bt(e,"click",o),s=!0)},p(l,d){i=l;const _={};d[0]&1|d[1]&4&&(_.$$scope={dirty:d,ctx:i}),n.$set(_)},i(l){r||(T(n.$$.fragment,l),r=!0)},o(l){I(n.$$.fragment,l),r=!1},d(l){l&&(S(e),S(t)),U(n),s=!1,a()}}}function lg(i,e){let n,t,r;return t=new nr({props:{$$slots:{default:[qE]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&65|a[1]&4&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function GE(i){let e,n=[],t=new Map,r,s=Qt(i[0].pictures);const a=o=>o[25];for(let o=0;o<s.length;o+=1){let l=Q_(i,s,o),d=a(l);t.set(d,n[o]=lg(d,l))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);for(let d=0;d<n.length;d+=1)n[d].l(l);l.forEach(S),this.h()},h(){te(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(o,l){R(o,e,l);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,l){l[0]&65&&(s=Qt(o[0].pictures),ht(),n=zr(n,l,a,1,o,s,t,e,Wr,lg,null,Q_),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(n[l]);r=!0}},o(o){for(let l=0;l<n.length;l+=1)I(n[l]);r=!1},d(o){o&&S(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function HE(i){let e,n,t,r;return e=new jd({props:{class:"mb-4",$$slots:{default:[NE]},$$scope:{ctx:i}}}),t=new cu({props:{$$slots:{default:[GE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[1]&4&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a[0]&65|a[1]&4&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function ZE(i){let e,n;return e=new lu({props:{$$slots:{default:[HE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function WE(i){let e,n;return e=new Ca({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[ZE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function cg(i){let e,n;return e=new Sa({props:{open:!0,onOpenChange:i[21],$$slots:{default:[nP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&64&&(s.onOpenChange=t[21]),r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function KE(i){let e,n;return{c(){e=oe("img"),this.h()},l(t){e=ae(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pr(e.src,n=i[0].pictures[i[6]])||te(e,"src",n),te(e,"alt","Fullscreen POI picture"),te(e,"class","object-contain rounded-xl h-full")},m(t,r){R(t,e,r)},p(t,r){r[0]&65&&!pr(e.src,n=t[0].pictures[t[6]])&&te(e,"src",n)},d(t){t&&S(e)}}}function XE(i){let e,n;return e=new Lr({props:{class:"p-2 flex justify-center items-center grow relative",$$slots:{default:[KE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function JE(i){let e,n;return e=new Zi({props:{class:"flex grow",$$slots:{default:[XE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function YE(i){let e,n;return e=new Kr({props:{class:"p-2 flex grow",$$slots:{default:[JE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function QE(i){let e,n;return e=new nr({props:{class:"flex grow",$$slots:{default:[YE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function eP(i){let e,n;return e=new cu({props:{class:"flex grow",$$slots:{default:[QE]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function tP(i){let e,n;return e=new lu({props:{$$slots:{default:[eP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function nP(i){let e,n;return e=new Ca({props:{class:"h-[90%] max-w-[90%] overflow-y-auto p-8",$$slots:{default:[tP]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&65|r[1]&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function rP(i){let e,n,t,r,s,a,o,l,d;n=new nr({props:{class:"flex flex-col grow relative w-full",$$slots:{default:[BE]},$$scope:{ctx:i}}});let _=i[4]&&og(i),b=i[5]&&ag(i),w=i[6]!==null&&cg(i);return{c(){e=oe("div"),N(n.$$.fragment),s=de(),_&&_.c(),a=de(),b&&b.c(),o=de(),w&&w.c(),l=Fe(),this.h()},l(E){e=ae(E,"DIV",{class:!0});var L=$e(e);j(n.$$.fragment,L),L.forEach(S),s=pe(E),_&&_.l(E),a=pe(E),b&&b.l(E),o=pe(E),w&&w.l(E),l=Fe(),this.h()},h(){te(e,"class",t="z-20 absolute w-full flex pl-4"+(i[0].pictures.length===0?" h-72":" h-80"))},m(E,L){R(E,e,L),V(n,e,null),R(E,s,L),_&&_.m(E,L),R(E,a,L),b&&b.m(E,L),R(E,o,L),w&&w.m(E,L),R(E,l,L),d=!0},p(E,L){const M={};L[0]&245|L[1]&4&&(M.$$scope={dirty:L,ctx:E}),n.$set(M),(!d||L[0]&1&&t!==(t="z-20 absolute w-full flex pl-4"+(E[0].pictures.length===0?" h-72":" h-80")))&&te(e,"class",t),E[4]?_?(_.p(E,L),L[0]&16&&T(_,1)):(_=og(E),_.c(),T(_,1),_.m(a.parentNode,a)):_&&(ht(),I(_,1,1,()=>{_=null}),dt()),E[5]?b?(b.p(E,L),L[0]&32&&T(b,1)):(b=ag(E),b.c(),T(b,1),b.m(o.parentNode,o)):b&&(ht(),I(b,1,1,()=>{b=null}),dt()),E[6]!==null?w?(w.p(E,L),L[0]&64&&T(w,1)):(w=cg(E),w.c(),T(w,1),w.m(l.parentNode,l)):w&&(ht(),I(w,1,1,()=>{w=null}),dt())},i(E){d||(T(n.$$.fragment,E),E&&Hi(()=>{d&&(r||(r=Fo(e,Gm,{duration:300,x:200,y:0,opacity:0,easing:qm},!0)),r.run(1))}),T(_),T(b),T(w),d=!0)},o(E){I(n.$$.fragment,E),E&&(r||(r=Fo(e,Gm,{duration:300,x:200,y:0,opacity:0,easing:qm},!1)),r.run(0)),I(_),I(b),I(w),d=!1},d(E){E&&(S(e),S(s),S(a),S(o),S(l)),U(n),E&&r&&r.end(),_&&_.d(E),b&&b.d(E),w&&w.d(E)}}}function sP(i,e,n){let{poi:t}=e,{userNickname:r}=e,{closePOICard:s}=e,{refreshPOIs:a}=e,o=!1,l=!1,d=null,_=[!1];const b=()=>{n(7,_=new Array(_.length).fill(!1))},w=async()=>{const fe=await(await fetch("/api/favourites/single?poi_id="+encodeURIComponent(t.id))).json();typeof fe=="boolean"&&(n(0,t.isFavourite=!t.isFavourite,t),await _i(),n(0,t.isFavourite=fe,t))},E=async()=>{const be=t.isFavourite;n(0,t.isFavourite=!t.isFavourite,t),await _i(),n(0,t.isFavourite=be,t)};let L=!1;const M=async be=>{E(),!L&&(L=!0,be?await fetch("/api/favourites?poi_id="+encodeURIComponent(t.id),{method:"POST"}):await fetch("/api/favourites?poi_id="+encodeURIComponent(t.id),{method:"DELETE"}),await w(),a(),L=!1)},F=be=>{b(),be.target.focus()};function q(be){i.$$.not_equal(_[0],be)&&(_[0]=be,n(7,_))}const G=be=>{be.stopPropagation(),n(5,l=!0)},Q=be=>n(6,d=be*3),ge=be=>n(6,d=be*3+1),le=be=>n(6,d=be*3+2),re=()=>n(4,o=!0),me=()=>n(4,o=!1);function se(be){t=be,n(0,t)}const Z=be=>n(6,d=be),Y=be=>be||(()=>n(5,l=!1))(),ie=be=>be||(()=>n(6,d=null))();return i.$$set=be=>{"poi"in be&&n(0,t=be.poi),"userNickname"in be&&n(1,r=be.userNickname),"closePOICard"in be&&n(2,s=be.closePOICard),"refreshPOIs"in be&&n(3,a=be.refreshPOIs)},[t,r,s,a,o,l,d,_,b,M,F,q,G,Q,ge,le,re,me,se,Z,Y,ie]}class iP extends it{constructor(e){super(),ot(this,e,sP,rP,nt,{poi:0,userNickname:1,closePOICard:2,refreshPOIs:3},null,[-1,-1])}}const oP="https://api.maptiler.com/maps/outdoor-v2/style.json?key=TXpGz6EEUuCZtdUb72gw",aP="https://api.maptiler.com/maps/streets-v2/style.json?key=TXpGz6EEUuCZtdUb72gw",lP="https://api.maptiler.com/maps/hybrid/style.json?key=TXpGz6EEUuCZtdUb72gw",cP="https://api.maptiler.com/maps/dataviz-light/style.json?key=TXpGz6EEUuCZtdUb72gw",uP="https://api.maptiler.com/maps/dataviz-dark/style.json?key=TXpGz6EEUuCZtdUb72gw",fP="6faR3O8R7ilrB_1rMKJyXHy5DYdgnd1v4hS84oSaPt4",ba=[{value:"outdoor",label:"Outdoor",URI:oP},{value:"street",label:"Street",URI:aP},{value:"satellite",label:"Satellite",URI:lP},{value:"light",label:"Light",URI:cP},{value:"dark",label:"Dark",URI:uP}],ug=1,hP=.9,dP=.8,pP=.17,ld=.1,cd=.999,mP=.9999,_P=.99,gP=/[\\/_+.#"@[({&]/,vP=/[\\/_+.#"@[({&]/g,yP=/[\s-]/,Kv=/[\s-]/g;function bd(i,e,n,t,r,s,a){if(s===e.length)return r===i.length?ug:_P;const o=`${r},${s}`;if(a[o]!==void 0)return a[o];const l=t.charAt(s);let d=n.indexOf(l,r),_=0,b,w,E,L;for(;d>=0;)b=bd(i,e,n,t,d+1,s+1,a),b>_&&(d===r?b*=ug:gP.test(i.charAt(d-1))?(b*=dP,E=i.slice(r,d-1).match(vP),E&&r>0&&(b*=Math.pow(cd,E.length))):yP.test(i.charAt(d-1))?(b*=hP,L=i.slice(r,d-1).match(Kv),L&&r>0&&(b*=Math.pow(cd,L.length))):(b*=pP,r>0&&(b*=Math.pow(cd,d-r))),i.charAt(d)!==e.charAt(s)&&(b*=mP)),(b<ld&&n.charAt(d-1)===t.charAt(s+1)||t.charAt(s+1)===t.charAt(s)&&n.charAt(d-1)!==t.charAt(s))&&(w=bd(i,e,n,t,d+1,s+2,a),w*ld>b&&(b=w*ld)),b>_&&(_=b),d=n.indexOf(l,d+1);return a[o]=_,_}function fg(i){return i.toLowerCase().replace(Kv," ")}function bP(i,e){return bd(i,e,fg(i),fg(e),0,0,{})}const $P=typeof document<"u";function Lo(i){return i instanceof HTMLElement}function wP(i){return i instanceof HTMLInputElement}function Gd(i){return i===void 0}function Ti(){return Q$(10)}const Bc={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*"};function xP(i,...e){const n={};for(const t of Object.keys(i))e.includes(t)||(n[t]=i[t]);return n}function Xv(i){const e={};for(const n in i){const t=i[n];t!==void 0&&(e[n]=t)}return e}function kP(i){const e={};return Object.keys(i).forEach(n=>{const t=n,r=i[t];e[t]=yr(r)}),e}function CP(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}const SP={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Lf(i,e,n,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,n,t)),()=>{r.forEach(s=>i.removeEventListener(s,n,t))}}function Jv(...i){return(...e)=>{for(const n of i)typeof n=="function"&&n(...e)}}const Yv="Command",Qv="CommandState",ey="CommandGroup",TP="[data-cmdk-list-sizer]",Nc="[data-cmdk-group]",hg="[data-cmdk-group-items]",IP="[data-cmdk-group-heading]",ty="[data-cmdk-item]",ud=`${ty}:not([aria-disabled="true"])`,Vi="data-value",ny=(i,e)=>bP(i,e);function Wf(){return bi(Yv)}function zl(){return bi(Qv)}function EP(i){const e=Ti();return Ei(ey,{id:e,alwaysRender:Gd(i)?!1:i}),{id:e}}function PP(){const i=bi(ey);if(i)return i}function AP(i){const e={search:"",value:"",filtered:{count:0,items:new Map,groups:new Set}};return yr(i?{...e,...Xv(i)}:e)}const MP={label:"Command menu",shouldFilter:!0,loop:!1,onValueChange:void 0,value:void 0,filter:ny,ids:{root:Ti(),list:Ti(),label:Ti(),input:Ti()}};function DP(i){const e={root:Ti(),list:Ti(),label:Ti(),input:Ti(),...i.ids},n={...MP,...Xv(i)},t=i.state??AP({value:n.value}),r=yr(new Set),s=yr(new Map),a=yr(new Map),o=yr(null),l=kP(xP(n,"value","ids")),{shouldFilter:d,loop:_,filter:b,label:w}=l,E={value:(ke,je)=>{je!==as(a).get(ke)&&(a.update(Se=>(Se.set(ke,je),Se)),t.update(Se=>(Se.filtered.items.set(ke,G(je,Se.search)),F(Se,as(d)))))},item:(ke,je)=>(r.update(Se=>Se.add(ke)),je&&s.update(Se=>{var Qe;return Se.has(je)?(Qe=Se.get(je))==null||Qe.add(ke):Se.set(je,new Set([ke])),Se}),t.update(Se=>{const Qe=as(d),Xe=M(Se,Qe),at=F(Xe,Qe);if(!at.value){const mt=q();at.value=mt??""}return at}),()=>{a.update(Se=>(Se.delete(ke),Se)),r.update(Se=>(Se.delete(ke),Se)),t.update(Se=>{Se.filtered.items.delete(ke);const Qe=le(),Xe=M(Se);return(Qe==null?void 0:Qe.getAttribute("id"))===ke&&(Xe.value=q()??""),Se})}),group:ke=>(s.update(je=>(je.has(ke)||je.set(ke,new Set),je)),()=>{a.update(je=>(je.delete(ke),je)),s.update(je=>(je.delete(ke),je))}),filter:()=>as(d),label:as(w)||i["aria-label"]||"",commandEl:o,ids:e,updateState:L};function L(ke,je,Se){const Qe=as(d);t.update(Xe=>{var at;return Object.is(Xe[ke],je)||(Xe[ke]=je,ke==="search"?(Xe=M(Xe,Qe),Xe=F(Xe,Qe),_i().then(()=>t.update(Ct=>(Ct.value=q()??"",Ct)))):ke==="value"&&((at=i.onValueChange)==null||at.call(i,Xe.value),Se||_i().then(()=>Q()))),Xe})}function M(ke,je){const Se=je??as(d),Qe=as(r),Xe=as(a);if(!ke.search||!Se)return ke.filtered.count=Qe.size,ke;ke.filtered.groups=new Set;let at=0;for(const mt of Qe){const Dt=Xe.get(mt),Ct=G(Dt,ke.search);ke.filtered.items.set(mt,Ct),Ct>0&&at++}for(const[mt,Dt]of as(s))for(const Ct of Dt){const nn=ke.filtered.items.get(Ct);nn&&nn>0&&ke.filtered.groups.add(mt)}return ke.filtered.count=at,ke}function F(ke,je){const Se=je??as(d);if(!ke.search||!Se)return ke;const Qe=ke.filtered.items,Xe=[],at=as(s);ke.filtered.groups.forEach(Ct=>{const nn=at.get(Ct);if(!nn)return;let yn=0;nn.forEach(cn=>{const At=Qe.get(cn);Gd(At)||(yn=Math.max(At,yn))}),Xe.push([Ct,yn])});const mt=document.getElementById(e.root);if(!mt)return ke;const Dt=mt.querySelector(TP);return ge(mt).sort((Ct,nn)=>{const yn=Ct.getAttribute(Vi)??"",cn=nn.getAttribute(Vi)??"";return(Qe.get(yn)??0)-(Qe.get(cn)??0)}).forEach(Ct=>{const nn=Ct.closest(hg),yn=Ct.closest(`${hg} > *`);if(Lo(nn))if(Ct.parentElement===nn)nn.appendChild(Ct);else{if(!Lo(yn))return;nn.appendChild(yn)}else{if(!Lo(Dt))return;if(Ct.parentElement===Dt)Dt.appendChild(Ct);else{if(!Lo(yn))return;Dt.appendChild(yn)}}}),Xe.sort((Ct,nn)=>nn[1]-Ct[1]).forEach(Ct=>{var yn;const nn=mt.querySelector(`${Nc}[${Vi}="${Ct[0]}"]`);Lo(nn)&&((yn=nn.parentElement)==null||yn.appendChild(nn))}),ke}function q(){const ke=ge().find(Se=>!Se.ariaDisabled);if(!ke)return;const je=ke.getAttribute(Vi);if(je)return je}function G(ke,je){const Se=ke==null?void 0:ke.toLowerCase().trim(),Qe=as(b);return Qe?Se?Qe(Se,je):0:Se?ny(Se,je):0}function Q(){var je;const ke=le();ke&&(((je=ke.parentElement)==null?void 0:je.firstChild)===ke&&_i().then(()=>{var Se,Qe;return(Qe=(Se=ke.closest(Nc))==null?void 0:Se.querySelector(IP))==null?void 0:Qe.scrollIntoView({block:"nearest"})}),_i().then(()=>ke.scrollIntoView({block:"nearest"})))}function ge(ke){const je=ke??document.getElementById(e.root);return je?Array.from(je.querySelectorAll(ud)).filter(Se=>Lo(Se)):[]}function le(ke){const je=ke??document.getElementById(e.root);if(!je)return;const Se=je.querySelector(`${ud}[aria-selected="true"]`);return Lo(Se)?Se:null}function re(ke){const je=document.getElementById(e.root);!je||ge(je)[ke]}function me(ke){const je=le(),Se=ge(),Qe=Se.findIndex(at=>at===je);let Xe=Se[Qe+ke];as(_)&&(Qe+ke<0?Xe=Se[Se.length-1]:Qe+ke===Se.length?Xe=Se[0]:Xe=Se[Qe+ke]),Xe&&L("value",Xe.getAttribute(Vi)??"")}function se(ke){const je=le();let Se=je==null?void 0:je.closest(Nc),Qe;for(;Se&&!Qe;)Se=ke>0?zP(Se,Nc):LP(Se,Nc),Qe=Se==null?void 0:Se.querySelector(ud);Qe?L("value",Qe.getAttribute(Vi)??""):me(ke)}function Z(){return re(ge().length-1)}function Y(ke){ke.preventDefault(),ke.metaKey?Z():ke.altKey?se(1):me(1)}function ie(ke){ke.preventDefault(),ke.metaKey?re(0):ke.altKey?se(-1):me(-1)}function be(ke){switch(ke.key){case Bc.ARROW_DOWN:Y(ke);break;case Bc.ARROW_UP:ie(ke);break;case Bc.HOME:ke.preventDefault(),re(0);break;case Bc.END:ke.preventDefault(),Z();break;case Bc.ENTER:{ke.preventDefault();const je=le();je&&je.click()}}}Ei(Yv,E);const fe={subscribe:t.subscribe,update:t.update,set:t.set,updateState:L};return Ei(Qv,fe),{state:fe,handleRootKeydown:be,commandEl:o,ids:e}}function zP(i,e){let n=i.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function LP(i,e){let n=i.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}const RP=i=>i&4,OP=i=>({}),dg=i=>({...i[2]}),FP=i=>i&4,BP=i=>({}),pg=i=>({...i[2]});function NP(i){let e,n,t=(i[0]??"")+"",r,s,a,o,l,d=[i[6]],_={};for(let M=0;M<d.length;M+=1)_=Ce(_,d[M]);const b=i[18].default,w=$t(b,i,i[17],dg);let E=[i[5],i[7]],L={};for(let M=0;M<E.length;M+=1)L=Ce(L,E[M]);return{c(){e=oe("div"),n=oe("label"),r=Ve(t),s=de(),w&&w.c(),this.h()},l(M){e=ae(M,"DIV",{});var F=$e(e);n=ae(F,"LABEL",{});var q=$e(n);r=Ue(q,t),q.forEach(S),s=pe(F),w&&w.l(F),F.forEach(S),this.h()},h(){Vt(n,_),Vt(e,L)},m(M,F){R(M,e,F),ce(e,n),ce(n,r),ce(e,s),w&&w.m(e,null),a=!0,o||(l=qn(i[4].call(null,e)),o=!0)},p(M,F){(!a||F&1)&&t!==(t=(M[0]??"")+"")&&j0(r,t,_.contenteditable),w&&w.p&&(!a||F&131076)&&wt(w,b,M,M[17],RP(F)||!a?xt(M[17]):kt(b,M[17],F,OP),dg),Vt(e,L=Pt(E,[M[5],F&128&&M[7]]))},i(M){a||(T(w,M),a=!0)},o(M){I(w,M),a=!1},d(M){M&&S(e),w&&w.d(M),o=!1,l()}}}function VP(i){let e;const n=i[18].default,t=$t(n,i,i[17],pg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&131076)&&wt(t,n,r,r[17],FP(s)||!e?xt(r[17]):kt(n,r[17],s,BP),pg)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function UP(i){let e,n,t,r;const s=[VP,NP],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function jP(i,e,n){let t;const r=["label","shouldFilter","filter","value","onValueChange","loop","onKeydown","state","ids","asChild"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{label:d=void 0}=e,{shouldFilter:_=!0}=e,{filter:b=void 0}=e,{value:w=void 0}=e,{onValueChange:E=void 0}=e,{loop:L=void 0}=e,{onKeydown:M=void 0}=e,{state:F=void 0}=e,{ids:q=void 0}=e,{asChild:G=!1}=e;const{commandEl:Q,handleRootKeydown:ge,ids:le,state:re}=DP({label:d,shouldFilter:_,filter:b,value:w,onValueChange:fe=>{fe!==w&&(n(8,w=fe),E==null||E(fe))},loop:L,state:F,ids:q});sn(i,re,fe=>n(16,a=fe));function me(fe){fe&&fe!==a.value&&Zr(re,a.value=fe,a)}function se(fe){return Q.set(fe),{destroy:Jv(Lf(fe,"keydown",ie))}}const Z={role:"application",id:le.root,"data-cmdk-root":""},Y={"data-cmdk-label":"",for:le.input,id:le.label,style:CP(SP)};function ie(fe){M==null||M(fe),!fe.defaultPrevented&&ge(fe)}const be={action:se,attrs:Z};return i.$$set=fe=>{e=Ce(Ce({},e),Mt(fe)),n(7,s=lt(e,r)),"label"in fe&&n(0,d=fe.label),"shouldFilter"in fe&&n(9,_=fe.shouldFilter),"filter"in fe&&n(10,b=fe.filter),"value"in fe&&n(8,w=fe.value),"onValueChange"in fe&&n(11,E=fe.onValueChange),"loop"in fe&&n(12,L=fe.loop),"onKeydown"in fe&&n(13,M=fe.onKeydown),"state"in fe&&n(14,F=fe.state),"ids"in fe&&n(15,q=fe.ids),"asChild"in fe&&n(1,G=fe.asChild),"$$scope"in fe&&n(17,l=fe.$$scope)},i.$$.update=()=>{i.$$.dirty&256&&me(w),i.$$.dirty&65536&&n(2,t={root:be,label:{attrs:Y},stateStore:re,state:a})},[d,G,t,re,se,Z,Y,s,w,_,b,E,L,M,F,q,a,l,o]}let ry=class extends it{constructor(e){super(),ot(this,e,jP,UP,nt,{label:0,shouldFilter:9,filter:10,value:8,onValueChange:11,loop:12,onKeydown:13,state:14,ids:15,asChild:1})}};function qP(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}qP({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function sy(i,e,n,t){const r=Array.isArray(e)?e:[e];return r.forEach(s=>i.addEventListener(s,n,t)),()=>{r.forEach(s=>i.removeEventListener(s,n,t))}}const GP={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab",CTRL:"Control",ASTERISK:"*",A:"a",P:"p"};va(void 0,i=>{function e(t){i(t),i(void 0)}return sy(document,"pointerup",e,{passive:!1,capture:!0})});va(void 0,i=>{function e(t){t&&t.key===GP.ESCAPE&&i(t),i(void 0)}return sy(document,"keydown",e,{passive:!1,capture:!0})});function Rr(i,e){const n={};return e.forEach(t=>{n[t]={[`data-bits-${i}-${t}`]:""}}),t=>n[t]}function iy(i){return Object.keys(i).reduce((e,n)=>i[n]===void 0?e:e+`${n}:${i[n]};`,"")}iy({position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"});iy({position:"absolute",width:"25px",height:"25px",opacity:"0",margin:"0px",pointerEvents:"none",transform:"translateX(-100%)"});const HP="accordion",ZP=["root","content","header","item","trigger"];Rr(HP,ZP);const WP="alert-dialog",KP=["action","cancel","content","description","overlay","portal","title","trigger"];Rr(WP,KP);const XP="avatar",JP=["root","image","fallback"];Rr(XP,JP);const YP="checkbox",QP=["root","input","indicator"];Rr(YP,QP);const e4="collapsible",t4=["root","content","trigger"];Rr(e4,t4);const n4="context-menu",r4=["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];Rr(n4,r4);const s4="dialog",i4=["close","content","description","overlay","portal","title","trigger"];Rr(s4,i4);const o4="dropdown-menu",a4=["arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];Rr(o4,a4);const l4="link-preview",c4=["arrow","content","trigger"];Rr(l4,c4);const u4="label",f4=["root"];Rr(u4,f4);const h4="menubar",d4=["root","arrow","checkbox-indicator","checkbox-item","content","group","item","label","radio-group","radio-item","separator","sub-content","sub-trigger","trigger"];Rr(h4,d4);const p4="popover",m4=["arrow","close","content","trigger"];Rr(p4,m4);const _4="progress",g4=["root"];Rr(_4,g4);const v4="radio-group",y4=["root","item","input"];Rr(v4,y4);const b4="select",$4=["arrow","content","group","item","input","label","trigger","value"];Rr(b4,$4);const w4="separator",x4=["root"];Rr(w4,x4);const k4="slider",C4=["root","input","range","thumb","tick"];Rr(k4,C4);const S4="switch",T4=["root","input","thumb"];Rr(S4,T4);const I4="tabs",E4=["root","content","list","trigger"];Rr(I4,E4);const P4="toggle",A4=["root","input"];Rr(P4,A4);const M4="toggle-group",D4=["root","item"];Rr(M4,D4);const z4="tooltip",L4=["arrow","content","trigger"];Rr(z4,L4);const R4=i=>({}),mg=i=>({attrs:i[4]});function _g(i){let e,n,t,r;const s=[F4,O4],a=[];function o(l,d){return l[0]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function O4(i){let e,n;const t=i[8].default,r=$t(t,i,i[7],null);let s=[i[4],i[5]],a={};for(let o=0;o<s.length;o+=1)a=Ce(a,s[o]);return{c(){e=oe("div"),r&&r.c(),this.h()},l(o){e=ae(o,"DIV",{});var l=$e(e);r&&r.l(l),l.forEach(S),this.h()},h(){Vt(e,a)},m(o,l){R(o,e,l),r&&r.m(e,null),n=!0},p(o,l){r&&r.p&&(!n||l&128)&&wt(r,t,o,o[7],n?kt(t,o[7],l,null):xt(o[7]),null),Vt(e,a=Pt(s,[o[4],l&32&&o[5]]))},i(o){n||(T(r,o),n=!0)},o(o){I(r,o),n=!1},d(o){o&&S(e),r&&r.d(o)}}}function F4(i){let e;const n=i[8].default,t=$t(n,i,i[7],mg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&wt(t,n,r,r[7],e?kt(n,r[7],s,R4):xt(r[7]),mg)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function B4(i){let e,n,t=!i[1]&&i[2]&&_g(i);return{c(){t&&t.c(),e=Fe()},l(r){t&&t.l(r),e=Fe()},m(r,s){t&&t.m(r,s),R(r,e,s),n=!0},p(r,[s]){!r[1]&&r[2]?t?(t.p(r,s),s&6&&T(t,1)):(t=_g(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(ht(),I(t,1,1,()=>{t=null}),dt())},i(r){n||(T(t),n=!0)},o(r){I(t),n=!1},d(r){r&&S(e),t&&t.d(r)}}}function N4(i,e,n){let t;const r=["asChild"];let s=lt(e,r),a,{$$slots:o={},$$scope:l}=e,{asChild:d=!1}=e,_=!0;er(()=>{n(1,_=!1)});const b=zl();sn(i,b,E=>n(6,a=E));const w={"data-cmdk-empty":"",role:"presentation"};return i.$$set=E=>{e=Ce(Ce({},e),Mt(E)),n(5,s=lt(e,r)),"asChild"in E&&n(0,d=E.asChild),"$$scope"in E&&n(7,l=E.$$scope)},i.$$.update=()=>{i.$$.dirty&64&&n(2,t=a.filtered.count===0)},[d,_,t,b,w,s,a,l,o]}class oy extends it{constructor(e){super(),ot(this,e,N4,B4,nt,{asChild:0})}}const V4=i=>({container:i&32,group:i&16}),gg=i=>({container:i[5],group:i[4],heading:{attrs:i[8]}}),U4=i=>({container:i&32,group:i&16}),vg=i=>({container:i[5],group:i[4],heading:{attrs:i[8]}});function j4(i){let e,n,t,r,s,a,o=i[0]&&yg(i);const l=i[14].default,d=$t(l,i,i[13],gg);let _=[i[2]],b={};for(let L=0;L<_.length;L+=1)b=Ce(b,_[L]);let w=[i[3],i[9]],E={};for(let L=0;L<w.length;L+=1)E=Ce(E,w[L]);return{c(){e=oe("div"),o&&o.c(),n=de(),t=oe("div"),d&&d.c(),this.h()},l(L){e=ae(L,"DIV",{});var M=$e(e);o&&o.l(M),n=pe(M),t=ae(M,"DIV",{});var F=$e(t);d&&d.l(F),F.forEach(S),M.forEach(S),this.h()},h(){Vt(t,b),Vt(e,E)},m(L,M){R(L,e,M),o&&o.m(e,null),ce(e,n),ce(e,t),d&&d.m(t,null),r=!0,s||(a=qn(i[7].call(null,e)),s=!0)},p(L,M){L[0]?o?o.p(L,M):(o=yg(L),o.c(),o.m(e,n)):o&&(o.d(1),o=null),d&&d.p&&(!r||M&8240)&&wt(d,l,L,L[13],r?kt(l,L[13],M,V4):xt(L[13]),gg),Vt(t,b=Pt(_,[M&4&&L[2]])),Vt(e,E=Pt(w,[M&8&&L[3],M&512&&L[9]]))},i(L){r||(T(d,L),r=!0)},o(L){I(d,L),r=!1},d(L){L&&S(e),o&&o.d(),d&&d.d(L),s=!1,a()}}}function q4(i){let e;const n=i[14].default,t=$t(n,i,i[13],vg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8240)&&wt(t,n,r,r[13],e?kt(n,r[13],s,U4):xt(r[13]),vg)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function yg(i){let e,n,t=[i[8]],r={};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return{c(){e=oe("div"),n=Ve(i[0]),this.h()},l(s){e=ae(s,"DIV",{});var a=$e(e);n=Ue(a,i[0]),a.forEach(S),this.h()},h(){Vt(e,r)},m(s,a){R(s,e,a),ce(e,n)},p(s,a){a&1&&j0(n,s[0],r.contenteditable)},d(s){s&&S(e)}}}function G4(i){let e,n,t,r;const s=[q4,j4],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function H4(i,e,n){let t,r,s,a;const o=["heading","value","alwaysRender","asChild"];let l=lt(e,o),d,{$$slots:_={},$$scope:b}=e,{heading:w=void 0}=e,{value:E=""}=e,{alwaysRender:L=!1}=e,{asChild:M=!1}=e;const{id:F}=EP(L),q=Wf(),G=zl(),Q=Ti(),ge=Gi(G,me=>L||q.filter()===!1||!me.search?!0:me.filtered.groups.has(F));sn(i,ge,me=>n(12,d=me)),er(()=>q.group(F));function le(me){if(E){q.value(F,E),me.setAttribute(Vi,E);return}w?n(10,E=w.trim().toLowerCase()):me.textContent&&n(10,E=me.textContent.trim().toLowerCase()),q.value(F,E),me.setAttribute(Vi,E)}const re={"data-cmdk-group-heading":"","aria-hidden":!0,id:Q};return i.$$set=me=>{e=Ce(Ce({},e),Mt(me)),n(9,l=lt(e,o)),"heading"in me&&n(0,w=me.heading),"value"in me&&n(10,E=me.value),"alwaysRender"in me&&n(11,L=me.alwaysRender),"asChild"in me&&n(1,M=me.asChild),"$$scope"in me&&n(13,b=me.$$scope)},i.$$.update=()=>{i.$$.dirty&5120&&n(3,t={"data-cmdk-group":"",role:"presentation",hidden:d?void 0:!0,"data-value":E}),i.$$.dirty&1&&n(2,r={"data-cmdk-group-items":"",role:"group","aria-labelledby":w?Q:void 0}),i.$$.dirty&8&&n(5,s={action:le,attrs:t}),i.$$.dirty&4&&n(4,a={attrs:r})},[w,M,r,t,a,s,ge,le,re,l,E,L,d,b,_]}class ay extends it{constructor(e){super(),ot(this,e,H4,G4,nt,{heading:0,value:10,alwaysRender:11,asChild:1})}}function Z4(i){return new Promise(e=>setTimeout(e,i))}const W4=i=>({attrs:i&8}),bg=i=>({action:i[6],attrs:i[3]});function K4(i){let e,n,t,r=[i[3],i[7]],s={};for(let a=0;a<r.length;a+=1)s=Ce(s,r[a]);return{c(){e=oe("input"),this.h()},l(a){e=ae(a,"INPUT",{}),this.h()},h(){Vt(e,s)},m(a,o){R(a,e,o),e.autofocus&&e.focus(),i[17](e),ji(e,i[0]),n||(t=[bt(e,"input",i[18]),qn(i[6].call(null,e)),bt(e,"keydown",i[12]),bt(e,"input",i[13]),bt(e,"focus",i[14]),bt(e,"blur",i[15]),bt(e,"change",i[16])],n=!0)},p(a,o){Vt(e,s=Pt(r,[o&8&&a[3],o&128&&a[7]])),o&1&&e.value!==a[0]&&ji(e,a[0])},i:gt,o:gt,d(a){a&&S(e),i[17](null),n=!1,kr(t)}}}function X4(i){let e;const n=i[11].default,t=$t(n,i,i[10],bg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1032)&&wt(t,n,r,r[10],e?kt(n,r[10],s,W4):xt(r[10]),bg)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function J4(i){let e,n,t,r;const s=[X4,K4],a=[];function o(l,d){return l[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function Y4(i,e,n){const t=["autofocus","value","asChild","el"];let r=lt(e,t),s,a,{$$slots:o={},$$scope:l}=e;const{ids:d,commandEl:_}=Wf(),b=zl(),w=Gi(b,fe=>fe.search);sn(i,w,fe=>n(19,a=fe));const E=Gi(b,fe=>fe.value);let{autofocus:L=void 0}=e,{value:M=a}=e,{asChild:F=!1}=e,{el:q=void 0}=e;const G=Gi([E,_],([fe,ke])=>{if(!$P)return;const je=ke==null?void 0:ke.querySelector(`${ty}[${Vi}="${fe}"]`);return je==null?void 0:je.getAttribute("id")});sn(i,G,fe=>n(9,s=fe));function Q(fe){b.updateState("search",fe)}function ge(fe){return L&&Z4(10).then(()=>fe.focus()),{destroy:Lf(fe,"change",je=>{wP(je.target)&&b.updateState("search",je.target.value)})}}let le;function re(fe){Wt.call(this,i,fe)}function me(fe){Wt.call(this,i,fe)}function se(fe){Wt.call(this,i,fe)}function Z(fe){Wt.call(this,i,fe)}function Y(fe){Wt.call(this,i,fe)}function ie(fe){jt[fe?"unshift":"push"](()=>{q=fe,n(1,q)})}function be(){M=this.value,n(0,M)}return i.$$set=fe=>{e=Ce(Ce({},e),Mt(fe)),n(7,r=lt(e,t)),"autofocus"in fe&&n(8,L=fe.autofocus),"value"in fe&&n(0,M=fe.value),"asChild"in fe&&n(2,F=fe.asChild),"el"in fe&&n(1,q=fe.el),"$$scope"in fe&&n(10,l=fe.$$scope)},i.$$.update=()=>{i.$$.dirty&1&&Q(M),i.$$.dirty&512&&n(3,le={type:"text","data-cmdk-input":"",autocomplete:"off",autocorrect:"off",spellcheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.list,"aria-labelledby":d.label,"aria-activedescendant":s??void 0,id:d.input})},[M,q,F,le,w,G,ge,r,L,s,l,o,re,me,se,Z,Y,ie,be]}class ly extends it{constructor(e){super(),ot(this,e,Y4,J4,nt,{autofocus:8,value:0,asChild:2,el:1})}}const Q4=i=>({attrs:i&4}),$g=i=>({action:i[6],attrs:i[2]}),eA=i=>({attrs:i&4}),wg=i=>({action:i[6],attrs:i[2]});function xg(i){let e,n,t,r;const s=[nA,tA],a=[];function o(l,d){return l[0]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function tA(i){let e,n,t,r;const s=i[15].default,a=$t(s,i,i[14],$g);let o=[i[2],i[7]],l={};for(let d=0;d<o.length;d+=1)l=Ce(l,o[d]);return{c(){e=oe("div"),a&&a.c(),this.h()},l(d){e=ae(d,"DIV",{});var _=$e(e);a&&a.l(_),_.forEach(S),this.h()},h(){Vt(e,l)},m(d,_){R(d,e,_),a&&a.m(e,null),n=!0,t||(r=qn(i[6].call(null,e)),t=!0)},p(d,_){a&&a.p&&(!n||_&16388)&&wt(a,s,d,d[14],n?kt(s,d[14],_,Q4):xt(d[14]),$g),Vt(e,l=Pt(o,[_&4&&d[2],_&128&&d[7]]))},i(d){n||(T(a,d),n=!0)},o(d){I(a,d),n=!1},d(d){d&&S(e),a&&a.d(d),t=!1,r()}}}function nA(i){let e;const n=i[15].default,t=$t(n,i,i[14],wg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&16388)&&wt(t,n,r,r[14],e?kt(n,r[14],s,eA):xt(r[14]),wg)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function rA(i){let e,n,t=(i[3]||i[1])&&xg(i);return{c(){t&&t.c(),e=Fe()},l(r){t&&t.l(r),e=Fe()},m(r,s){t&&t.m(r,s),R(r,e,s),n=!0},p(r,[s]){r[3]||r[1]?t?(t.p(r,s),s&10&&T(t,1)):(t=xg(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(ht(),I(t,1,1,()=>{t=null}),dt())},i(r){n||(T(t),n=!0)},o(r){I(t),n=!1},d(r){r&&S(e),t&&t.d(r)}}}function sA(i,e,n){let t;const r=["disabled","value","onSelect","alwaysRender","asChild","id"];let s=lt(e,r),a,o,{$$slots:l={},$$scope:d}=e,{disabled:_=!1}=e,{value:b=""}=e,{onSelect:w=void 0}=e,{alwaysRender:E=!1}=e,{asChild:L=!1}=e,{id:M=Ti()}=e;const F=PP(),q=Wf(),G=zl(),Q=E??(F==null?void 0:F.alwaysRender),ge=Gi(G,Y=>{if(Q||q.filter()===!1||!Y.search)return!0;const ie=Y.filtered.items.get(M);return Gd(ie)?!1:ie>0});sn(i,ge,Y=>n(3,o=Y));let le=!0;er(()=>(n(1,le=!1),q.item(M,F==null?void 0:F.id)));const re=Gi(G,Y=>Y.value===b);sn(i,re,Y=>n(13,a=Y));function me(Y){!b&&Y.textContent&&n(8,b=Y.textContent.trim().toLowerCase()),q.value(M,b),Y.setAttribute(Vi,b);const ie=Jv(Lf(Y,"pointermove",()=>{_||Z()}),Lf(Y,"click",()=>{_||se()}));return{destroy(){ie()}}}function se(){Z(),w==null||w(b)}function Z(){G.updateState("value",b,!0)}return i.$$set=Y=>{e=Ce(Ce({},e),Mt(Y)),n(7,s=lt(e,r)),"disabled"in Y&&n(9,_=Y.disabled),"value"in Y&&n(8,b=Y.value),"onSelect"in Y&&n(10,w=Y.onSelect),"alwaysRender"in Y&&n(11,E=Y.alwaysRender),"asChild"in Y&&n(0,L=Y.asChild),"id"in Y&&n(12,M=Y.id),"$$scope"in Y&&n(14,d=Y.$$scope)},i.$$.update=()=>{i.$$.dirty&13056&&n(2,t={"aria-disabled":_?!0:void 0,"aria-selected":a?!0:void 0,"data-disabled":_?!0:void 0,"data-selected":a?!0:void 0,"data-cmdk-item":"","data-value":b,role:"option",id:M})},[L,le,t,o,ge,re,me,s,b,_,w,E,M,a,d,l]}class cy extends it{constructor(e){super(),ot(this,e,sA,rA,nt,{disabled:9,value:8,onSelect:10,alwaysRender:11,asChild:0,id:12})}}const iA=i=>({}),kg=i=>({list:i[7],sizer:i[8]});function oA(i){let e,n,t=i[2].search==="",r,s,a,o=Cg(i),l=[i[6]],d={};for(let w=0;w<l.length;w+=1)d=Ce(d,l[w]);let _=[i[5],i[9]],b={};for(let w=0;w<_.length;w+=1)b=Ce(b,_[w]);return{c(){e=oe("div"),n=oe("div"),o.c(),this.h()},l(w){e=ae(w,"DIV",{});var E=$e(e);n=ae(E,"DIV",{});var L=$e(n);o.l(L),L.forEach(S),E.forEach(S),this.h()},h(){Vt(n,d),Vt(e,b)},m(w,E){R(w,e,E),ce(e,n),o.m(n,null),i[12](e),r=!0,s||(a=qn(i[4].call(null,n)),s=!0)},p(w,E){E&4&&nt(t,t=w[2].search==="")?(ht(),I(o,1,1,gt),dt(),o=Cg(w),o.c(),T(o,1),o.m(n,null)):o.p(w,E),Vt(e,b=Pt(_,[w[5],E&512&&w[9]]))},i(w){r||(T(o),r=!0)},o(w){I(o),r=!1},d(w){w&&S(e),o.d(w),i[12](null),s=!1,a()}}}function aA(i){let e=i[2].search==="",n,t,r=Sg(i);return{c(){r.c(),n=Fe()},l(s){r.l(s),n=Fe()},m(s,a){r.m(s,a),R(s,n,a),t=!0},p(s,a){a&4&&nt(e,e=s[2].search==="")?(ht(),I(r,1,1,gt),dt(),r=Sg(s),r.c(),T(r,1),r.m(n.parentNode,n)):r.p(s,a)},i(s){t||(T(r),t=!0)},o(s){I(r),t=!1},d(s){s&&S(n),r.d(s)}}}function Cg(i){let e;const n=i[11].default,t=$t(n,i,i[10],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&wt(t,n,r,r[10],e?kt(n,r[10],s,null):xt(r[10]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function Sg(i){let e;const n=i[11].default,t=$t(n,i,i[10],kg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&1024)&&wt(t,n,r,r[10],e?kt(n,r[10],s,iA):xt(r[10]),kg)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function lA(i){let e,n,t,r;const s=[aA,oA],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function cA(i,e,n){const t=["el","asChild"];let r=lt(e,t),s,{$$slots:a={},$$scope:o}=e;const{ids:l}=Wf(),d=zl();sn(i,d,G=>n(2,s=G));let{el:_=void 0}=e,{asChild:b=!1}=e;function w(G){let Q;const ge=G.closest("[data-cmdk-list]");if(!Lo(ge))return;const le=new ResizeObserver(()=>{Q=requestAnimationFrame(()=>{const re=G.offsetHeight;ge.style.setProperty("--cmdk-list-height",re.toFixed(1)+"px")})});return le.observe(G),{destroy(){cancelAnimationFrame(Q),le.unobserve(G)}}}const E={"data-cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:l.list,"aria-labelledby":l.input},L={"data-cmdk-list-sizer":""},M={attrs:E},F={attrs:L,action:w};function q(G){jt[G?"unshift":"push"](()=>{_=G,n(0,_)})}return i.$$set=G=>{e=Ce(Ce({},e),Mt(G)),n(9,r=lt(e,t)),"el"in G&&n(0,_=G.el),"asChild"in G&&n(1,b=G.asChild),"$$scope"in G&&n(10,o=G.$$scope)},[_,b,s,d,w,E,L,M,F,r,o,a,q]}class uy extends it{constructor(e){super(),ot(this,e,cA,lA,nt,{el:0,asChild:1})}}const uA=i=>({attrs:i&2}),Tg=i=>({attrs:i[1]}),fA=i=>({attrs:i&2}),Ig=i=>({attrs:i[1]});function hA(i){let e,n,t;const r=i[5].default,s=$t(r,i,i[4],Tg);let a=[i[1],i[2]],o={};for(let l=0;l<a.length;l+=1)o=Ce(o,a[l]);return{c(){e=oe("div"),n=oe("div"),s&&s.c(),this.h()},l(l){e=ae(l,"DIV",{});var d=$e(e);n=ae(d,"DIV",{"aria-hidden":!0});var _=$e(n);s&&s.l(_),_.forEach(S),d.forEach(S),this.h()},h(){te(n,"aria-hidden",""),Vt(e,o)},m(l,d){R(l,e,d),ce(e,n),s&&s.m(n,null),t=!0},p(l,d){s&&s.p&&(!t||d&18)&&wt(s,r,l,l[4],t?kt(r,l[4],d,uA):xt(l[4]),Tg),Vt(e,o=Pt(a,[d&2&&l[1],d&4&&l[2]]))},i(l){t||(T(s,l),t=!0)},o(l){I(s,l),t=!1},d(l){l&&S(e),s&&s.d(l)}}}function dA(i){let e;const n=i[5].default,t=$t(n,i,i[4],Ig);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&18)&&wt(t,n,r,r[4],e?kt(n,r[4],s,fA):xt(r[4]),Ig)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function pA(i){let e,n,t,r;const s=[dA,hA],a=[];function o(l,d){return l[0]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function mA(i,e,n){let t;const r=["progress","asChild"];let s=lt(e,r),{$$slots:a={},$$scope:o}=e,{progress:l=0}=e,{asChild:d=!1}=e;return i.$$set=_=>{e=Ce(Ce({},e),Mt(_)),n(2,s=lt(e,r)),"progress"in _&&n(3,l=_.progress),"asChild"in _&&n(0,d=_.asChild),"$$scope"in _&&n(4,o=_.$$scope)},i.$$.update=()=>{i.$$.dirty&8&&n(1,t={"data-cmdk-loading":"",role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."})},[d,t,s,l,o,a]}class _A extends it{constructor(e){super(),ot(this,e,mA,pA,nt,{progress:3,asChild:0})}}const gA=i=>({}),Eg=i=>({attrs:i[4]});function Pg(i){let e,n,t,r;const s=[yA,vA],a=[];function o(l,d){return l[1]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function vA(i){let e,n=[i[4],i[5]],t={};for(let r=0;r<n.length;r+=1)t=Ce(t,n[r]);return{c(){e=oe("div"),this.h()},l(r){e=ae(r,"DIV",{}),$e(e).forEach(S),this.h()},h(){Vt(e,t)},m(r,s){R(r,e,s)},p(r,s){Vt(e,t=Pt(n,[r[4],s&32&&r[5]]))},i:gt,o:gt,d(r){r&&S(e)}}}function yA(i){let e;const n=i[7].default,t=$t(n,i,i[6],Eg);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&64)&&wt(t,n,r,r[6],e?kt(n,r[6],s,gA):xt(r[6]),Eg)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function bA(i){let e,n,t=(i[2]||i[0])&&Pg(i);return{c(){t&&t.c(),e=Fe()},l(r){t&&t.l(r),e=Fe()},m(r,s){t&&t.m(r,s),R(r,e,s),n=!0},p(r,[s]){r[2]||r[0]?t?(t.p(r,s),s&5&&T(t,1)):(t=Pg(r),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(ht(),I(t,1,1,()=>{t=null}),dt())},i(r){n||(T(t),n=!0)},o(r){I(t),n=!1},d(r){r&&S(e),t&&t.d(r)}}}function $A(i,e,n){const t=["alwaysRender","asChild"];let r=lt(e,t),s,{$$slots:a={},$$scope:o}=e,{alwaysRender:l=!1}=e,{asChild:d=!1}=e;const _=zl(),b=Gi(_,E=>!E.search);sn(i,b,E=>n(2,s=E));const w={"data-cmdk-separator":"",role:"separator"};return i.$$set=E=>{e=Ce(Ce({},e),Mt(E)),n(5,r=lt(e,t)),"alwaysRender"in E&&n(0,l=E.alwaysRender),"asChild"in E&&n(1,d=E.asChild),"$$scope"in E&&n(6,o=E.$$scope)},[l,d,s,b,w,r,o,a]}class wA extends it{constructor(e){super(),ot(this,e,$A,bA,nt,{alwaysRender:0,asChild:1})}}function xA(i){let e;const n=i[3].default,t=$t(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&wt(t,n,r,r[5],e?kt(n,r[5],s,null):xt(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function kA(i){let e,n,t;const r=[{class:qt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",i[1])},i[2]];function s(o){i[4](o)}let a={$$slots:{default:[xA]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ce(a,r[o]);return i[0]!==void 0&&(a.value=i[0]),e=new ry({props:a}),jt.push(()=>kn(e,"value",s)),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,l){V(e,o,l),t=!0},p(o,[l]){const d=l&6?Pt(r,[l&2&&{class:qt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",o[1])},l&4&&mn(o[2])]):{};l&32&&(d.$$scope={dirty:l,ctx:o}),!n&&l&1&&(n=!0,d.value=o[0],xn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function CA(i,e,n){const t=["value","class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{value:o=void 0}=e,{class:l=void 0}=e;function d(_){o=_,n(0,o)}return i.$$set=_=>{e=Ce(Ce({},e),Mt(_)),n(2,r=lt(e,t)),"value"in _&&n(0,o=_.value),"class"in _&&n(1,l=_.class),"$$scope"in _&&n(5,a=_.$$scope)},[o,l,r,s,d,a]}let Hd=class extends it{constructor(e){super(),ot(this,e,CA,kA,nt,{value:0,class:1})}};function SA(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function TA(i){let e,n;const t=[{class:qt("py-6 text-center text-sm",i[0])},i[1]];let r={$$slots:{default:[SA]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new oy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("py-6 text-center text-sm",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function IA(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}let Zd=class extends it{constructor(e){super(),ot(this,e,IA,TA,nt,{class:0})}};function EA(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function PA(i){let e,n;const t=[{class:qt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[EA]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new ay({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function AA(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}let Wd=class extends it{constructor(e){super(),ot(this,e,AA,PA,nt,{class:0})}};function MA(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function DA(i){let e,n;const t=[{class:qt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[0])},i[1]];let r={$$slots:{default:[MA]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new cy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function zA(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}let Ll=class extends it{constructor(e){super(),ot(this,e,zA,DA,nt,{class:0})}};function LA(i){let e,n,t,r,s,a;n=new uS({props:{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}});const o=[{class:qt("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]];function l(_){i[3](_)}let d={};for(let _=0;_<o.length;_+=1)d=Ce(d,o[_]);return i[0]!==void 0&&(d.value=i[0]),r=new ly({props:d}),jt.push(()=>kn(r,"value",l)),{c(){e=oe("div"),N(n.$$.fragment),t=de(),N(r.$$.fragment),this.h()},l(_){e=ae(_,"DIV",{class:!0,"data-cmdk-input-wrapper":!0});var b=$e(e);j(n.$$.fragment,b),t=pe(b),j(r.$$.fragment,b),b.forEach(S),this.h()},h(){te(e,"class","flex items-center border-b px-3"),te(e,"data-cmdk-input-wrapper","")},m(_,b){R(_,e,b),V(n,e,null),ce(e,t),V(r,e,null),a=!0},p(_,[b]){const w=b&6?Pt(o,[b&2&&{class:qt("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",_[1])},b&4&&mn(_[2])]):{};!s&&b&1&&(s=!0,w.value=_[0],xn(()=>s=!1)),r.$set(w)},i(_){a||(T(n.$$.fragment,_),T(r.$$.fragment,_),a=!0)},o(_){I(n.$$.fragment,_),I(r.$$.fragment,_),a=!1},d(_){_&&S(e),U(n),U(r)}}}function RA(i,e,n){const t=["class","value"];let r=lt(e,t),{class:s=void 0}=e,{value:a=""}=e;function o(l){a=l,n(0,a)}return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(2,r=lt(e,t)),"class"in l&&n(1,s=l.class),"value"in l&&n(0,a=l.value)},[a,s,r,o]}let Kd=class extends it{constructor(e){super(),ot(this,e,RA,LA,nt,{class:1,value:0})}};function OA(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function FA(i){let e,n;const t=[{class:qt("max-h-[300px] overflow-y-auto overflow-x-hidden",i[0])},i[1]];let r={$$slots:{default:[OA]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new uy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("max-h-[300px] overflow-y-auto overflow-x-hidden",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function BA(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}let Xd=class extends it{constructor(e){super(),ot(this,e,BA,FA,nt,{class:0})}};function NA(i){let e,n;const t=[{class:qt("-mx-1 h-px bg-border",i[0])},i[1]];let r={};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new wA({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("-mx-1 h-px bg-border",s[0])},a&2&&mn(s[1])]):{};e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function VA(i,e,n){const t=["class"];let r=lt(e,t),{class:s=void 0}=e;return i.$$set=a=>{e=Ce(Ce({},e),Mt(a)),n(1,r=lt(e,t)),"class"in a&&n(0,s=a.class)},[s,r]}class Jd extends it{constructor(e){super(),ot(this,e,VA,NA,nt,{class:0})}}function UA(i){let e;const n=i[6].default,t=$t(n,i,i[7],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&128)&&wt(t,n,r,r[7],e?kt(n,r[7],s,null):xt(r[7]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function jA(i){let e,n;const t=[{transition:i[1]},{transitionConfig:i[2]},{align:i[3]},{sideOffset:i[4]},i[5],{class:qt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",i[0])}];let r={$$slots:{default:[UA]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new ew({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&63?Pt(t,[a&2&&{transition:s[1]},a&4&&{transitionConfig:s[2]},a&8&&{align:s[3]},a&16&&{sideOffset:s[4]},a&32&&mn(s[5]),a&1&&{class:qt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",s[0])}]):{};a&128&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function qA(i,e,n){const t=["class","transition","transitionConfig","align","sideOffset"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{transition:l=Id}=e,{transitionConfig:d=void 0}=e,{align:_="center"}=e,{sideOffset:b=4}=e;return i.$$set=w=>{e=Ce(Ce({},e),Mt(w)),n(5,r=lt(e,t)),"class"in w&&n(0,o=w.class),"transition"in w&&n(1,l=w.transition),"transitionConfig"in w&&n(2,d=w.transitionConfig),"align"in w&&n(3,_=w.align),"sideOffset"in w&&n(4,b=w.sideOffset),"$$scope"in w&&n(7,a=w.$$scope)},[o,l,d,_,b,r,s,a]}class Yd extends it{constructor(e){super(),ot(this,e,qA,jA,nt,{class:0,transition:1,transitionConfig:2,align:3,sideOffset:4})}}const Qd=tw,ep=nw;function fd(i){let e,n,t;const r=i[5].default,s=$t(r,i,i[4],null);let a=[{href:i[1]},{class:n=qt(Ag({variant:i[2],className:i[0]}))},i[3]],o={};for(let l=0;l<a.length;l+=1)o=Ce(o,a[l]);return{c(){e=oe(i[1]?"a":"span"),s&&s.c(),this.h()},l(l){e=ae(l,((i[1]?"a":"span")||"null").toUpperCase(),{href:!0,class:!0});var d=$e(e);s&&s.l(d),d.forEach(S),this.h()},h(){Sf(i[1]?"a":"span")(e,o)},m(l,d){R(l,e,d),s&&s.m(e,null),t=!0},p(l,d){s&&s.p&&(!t||d&16)&&wt(s,r,l,l[4],t?kt(r,l[4],d,null):xt(l[4]),null),Sf(l[1]?"a":"span")(e,o=Pt(a,[(!t||d&2)&&{href:l[1]},(!t||d&5&&n!==(n=qt(Ag({variant:l[2],className:l[0]}))))&&{class:n},d&8&&l[3]]))},i(l){t||(T(s,l),t=!0)},o(l){I(s,l),t=!1},d(l){l&&S(e),s&&s.d(l)}}}function GA(i){let e=i[1]?"a":"span",n,t,r=(i[1]?"a":"span")&&fd(i);return{c(){r&&r.c(),n=Fe()},l(s){r&&r.l(s),n=Fe()},m(s,a){r&&r.m(s,a),R(s,n,a),t=!0},p(s,[a]){s[1],e?nt(e,s[1]?"a":"span")?(r.d(1),r=fd(s),e=s[1]?"a":"span",r.c(),r.m(n.parentNode,n)):r.p(s,a):(r=fd(s),e=s[1]?"a":"span",r.c(),r.m(n.parentNode,n))},i(s){t||(T(r,s),t=!0)},o(s){I(r,s),t=!1},d(s){s&&S(n),r&&r.d(s)}}}function HA(i,e,n){const t=["class","href","variant"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e,{href:l=void 0}=e,{variant:d="default"}=e;return i.$$set=_=>{e=Ce(Ce({},e),Mt(_)),n(3,r=lt(e,t)),"class"in _&&n(0,o=_.class),"href"in _&&n(1,l=_.href),"variant"in _&&n(2,d=_.variant),"$$scope"in _&&n(4,a=_.$$scope)},[o,l,d,r,a,s]}class po extends it{constructor(e){super(),ot(this,e,HA,GA,nt,{class:0,href:1,variant:2})}}const Ag=Z0({base:"inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 select-none",variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Mg(i,e,n){const t=i.slice();return t[10]=e[n],t}function Dg(i,e,n){const t=i.slice();return t[10]=e[n],t}function zg(i){let e,n,t,r,s,a,o,l;e=new yi({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new po({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[ZA]},$$scope:{ctx:i}}});const d=[KA,WA],_=[];function b(w,E){return w[0].length>2?0:1}return a=b(i),o=_[a]=d[a](i),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),s=oe("div"),o.c(),this.h()},l(w){j(e.$$.fragment,w),n=pe(w),j(t.$$.fragment,w),r=pe(w),s=ae(w,"DIV",{class:!0});var E=$e(s);o.l(E),E.forEach(S),this.h()},h(){te(s,"class","hidden space-x-1 lg:flex")},m(w,E){V(e,w,E),R(w,n,E),V(t,w,E),R(w,r,E),R(w,s,E),_[a].m(s,null),l=!0},p(w,E){const L={};E&65537&&(L.$$scope={dirty:E,ctx:w}),t.$set(L);let M=a;a=b(w),a===M?_[a].p(w,E):(ht(),I(_[M],1,1,()=>{_[M]=null}),dt(),o=_[a],o?o.p(w,E):(o=_[a]=d[a](w),o.c()),T(o,1),o.m(s,null))},i(w){l||(T(e.$$.fragment,w),T(t.$$.fragment,w),T(o),l=!0)},o(w){I(e.$$.fragment,w),I(t.$$.fragment,w),I(o),l=!1},d(w){w&&(S(n),S(r),S(s)),U(e,w),U(t,w),_[a].d()}}}function ZA(i){let e=i[0].length+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&Ft(n,e)},d(t){t&&S(n)}}}function WA(i){let e,n,t=Qt(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=Lg(Dg(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Fe()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Fe()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&1){t=Qt(a[0]);let l;for(l=0;l<t.length;l+=1){const d=Dg(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=Lg(d),r[l].c(),T(r[l],1),r[l].m(e.parentNode,e))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function KA(i){let e,n;return e=new po({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[JA]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function XA(i){let e=i[10]+"",n,t;return{c(){n=Ve(e),t=de()},l(r){n=Ue(r,e),t=pe(r)},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[10]+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function Lg(i){let e,n;return e=new po({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[XA]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&65537&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function JA(i){let e=i[0].length+"",n,t;return{c(){n=Ve(e),t=Ve(" Selected")},l(r){n=Ue(r,e),t=Ue(r," Selected")},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function YA(i){let e,n,t,r,s,a,o;e=new Ed({props:{class:"mr-2 h-5 w-5"}});let l=i[0].length>0&&zg(i);return{c(){N(e.$$.fragment),n=de(),t=oe("p"),r=Ve(i[1]),s=de(),l&&l.c(),a=Fe(),this.h()},l(d){j(e.$$.fragment,d),n=pe(d),t=ae(d,"P",{class:!0});var _=$e(t);r=Ue(_,i[1]),_.forEach(S),s=pe(d),l&&l.l(d),a=Fe(),this.h()},h(){te(t,"class","text-sm")},m(d,_){V(e,d,_),R(d,n,_),R(d,t,_),ce(t,r),R(d,s,_),l&&l.m(d,_),R(d,a,_),o=!0},p(d,_){(!o||_&2)&&Ft(r,d[1]),d[0].length>0?l?(l.p(d,_),_&1&&T(l,1)):(l=zg(d),l.c(),T(l,1),l.m(a.parentNode,a)):l&&(ht(),I(l,1,1,()=>{l=null}),dt())},i(d){o||(T(e.$$.fragment,d),T(l),o=!0)},o(d){I(e.$$.fragment,d),I(l),o=!1},d(d){d&&(S(n),S(t),S(s),S(a)),U(e,d),l&&l.d(d)}}}function QA(i){let e,n;return e=new ns({props:{builders:[i[13]],variant:"outline",class:"h-10 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[YA]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&8192&&(s.builders=[t[13]]),r&65539&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function e5(i){let e;return{c(){e=Ve("No results found.")},l(n){e=Ue(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Rg(i){let e,n=i[3][i[10]]+"",t;return{c(){e=oe("span"),t=Ve(n),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=$e(e);t=Ue(s,n),s.forEach(S),this.h()},h(){te(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){R(r,e,s),ce(e,t)},p(r,s){s&12&&n!==(n=r[3][r[10]]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function t5(i){let e,n,t,r,s,a=i[10]+"",o,l,d,_;n=new Pd({props:{className:qt("h-4 w-4")}});let b=i[3][i[10]]&&Rg(i);return{c(){e=oe("div"),N(n.$$.fragment),r=de(),s=oe("span"),o=Ve(a),l=de(),b&&b.c(),d=de(),this.h()},l(w){e=ae(w,"DIV",{class:!0});var E=$e(e);j(n.$$.fragment,E),E.forEach(S),r=pe(w),s=ae(w,"SPAN",{});var L=$e(s);o=Ue(L,a),L.forEach(S),l=pe(w),b&&b.l(w),d=pe(w),this.h()},h(){te(e,"class",t=qt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[10])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m(w,E){R(w,e,E),V(n,e,null),R(w,r,E),R(w,s,E),ce(s,o),R(w,l,E),b&&b.m(w,E),R(w,d,E),_=!0},p(w,E){(!_||E&5&&t!==(t=qt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",w[0].includes(w[10])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&te(e,"class",t),(!_||E&4)&&a!==(a=w[10]+"")&&Ft(o,a),w[3][w[10]]?b?b.p(w,E):(b=Rg(w),b.c(),b.m(d.parentNode,d)):b&&(b.d(1),b=null)},i(w){_||(T(n.$$.fragment,w),_=!0)},o(w){I(n.$$.fragment,w),_=!1},d(w){w&&(S(e),S(r),S(s),S(l),S(d)),U(n),b&&b.d(w)}}}function Og(i){let e,n;return e=new Ll({props:{class:"cursor-pointer",value:i[10],onSelect:i[7],$$slots:{default:[t5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[10]),r&65549&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function n5(i){let e,n,t=Qt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=Og(Mg(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Fe()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Fe()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&77){t=Qt(a[2]);let l;for(l=0;l<t.length;l+=1){const d=Mg(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=Og(d),r[l].c(),T(r[l],1),r[l].m(e.parentNode,e))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function Fg(i){let e,n,t,r;return e=new Jd({}),t=new Ll({props:{class:"justify-center text-center cursor-pointer",onSelect:i[8],$$slots:{default:[r5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.onSelect=s[8]),a&65536&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function r5(i){let e;return{c(){e=Ve("Clear Filter")},l(n){e=Ue(n,"Clear Filter")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function s5(i){let e,n,t,r,s,a;e=new Zd({props:{$$slots:{default:[e5]},$$scope:{ctx:i}}}),t=new Wd({props:{$$slots:{default:[n5]},$$scope:{ctx:i}}});let o=i[0].length>0&&Fg(i);return{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),o&&o.c(),s=Fe()},l(l){j(e.$$.fragment,l),n=pe(l),j(t.$$.fragment,l),r=pe(l),o&&o.l(l),s=Fe()},m(l,d){V(e,l,d),R(l,n,d),V(t,l,d),R(l,r,d),o&&o.m(l,d),R(l,s,d),a=!0},p(l,d){const _={};d&65536&&(_.$$scope={dirty:d,ctx:l}),e.$set(_);const b={};d&65549&&(b.$$scope={dirty:d,ctx:l}),t.$set(b),l[0].length>0?o?(o.p(l,d),d&1&&T(o,1)):(o=Fg(l),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(ht(),I(o,1,1,()=>{o=null}),dt())},i(l){a||(T(e.$$.fragment,l),T(t.$$.fragment,l),T(o),a=!0)},o(l){I(e.$$.fragment,l),I(t.$$.fragment,l),I(o),a=!1},d(l){l&&(S(n),S(r),S(s)),U(e,l),U(t,l),o&&o.d(l)}}}function i5(i){let e,n,t,r;return e=new Kd({props:{placeholder:i[1]}}),t=new Xd({props:{$$slots:{default:[s5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.placeholder=s[1]),e.$set(o);const l={};a&65549&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function o5(i){let e,n;return e=new Hd({props:{loop:!0,$$slots:{default:[i5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&65551&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function a5(i){let e,n,t,r;return e=new ep({props:{asChild:!0,$$slots:{default:[QA,({builder:s})=>({13:s}),({builder:s})=>s?8192:0]},$$scope:{ctx:i}}}),t=new Yd({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[o5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&73731&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&65551&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function l5(i){let e,n,t;function r(a){i[9](a)}let s={disableFocusTrap:!0,onOutsideClick:i[4],$$slots:{default:[a5]},$$scope:{ctx:i}};return i[5]!==void 0&&(s.open=i[5]),e=new Qd({props:s}),jt.push(()=>kn(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,[o]){const l={};o&65551&&(l.$$scope={dirty:o,ctx:a}),!n&&o&32&&(n=!0,l.open=a[5],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function c5(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{poiFeatureOptions:s}=e,{counts:a={}}=e,o=!1;const l=()=>n(5,o=!1);function d(E){Array.isArray(t)&&t.includes(E)?n(0,t=t.filter(L=>L!==E)):n(0,t=[...Array.isArray(t)?t:[],E])}const _=E=>{d(E)},b=()=>{n(0,t=[])};function w(E){o=E,n(5,o)}return i.$$set=E=>{"filterValues"in E&&n(0,t=E.filterValues),"title"in E&&n(1,r=E.title),"poiFeatureOptions"in E&&n(2,s=E.poiFeatureOptions),"counts"in E&&n(3,a=E.counts)},[t,r,s,a,l,o,d,_,b,w]}class u5 extends it{constructor(e){super(),ot(this,e,c5,l5,nt,{filterValues:0,title:1,poiFeatureOptions:2,counts:3,forceClosePopover:4})}get forceClosePopover(){return this.$$.ctx[4]}}function f5(i){let e;const n=i[3].default,t=$t(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&wt(t,n,r,r[5],e?kt(n,r[5],s,null):xt(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function h5(i){let e,n,t;const r=[{class:qt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",i[1])},i[2]];function s(o){i[4](o)}let a={$$slots:{default:[f5]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ce(a,r[o]);return i[0]!==void 0&&(a.value=i[0]),e=new ry({props:a}),jt.push(()=>kn(e,"value",s)),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,l){V(e,o,l),t=!0},p(o,[l]){const d=l&6?Pt(r,[l&2&&{class:qt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",o[1])},l&4&&mn(o[2])]):{};l&32&&(d.$$scope={dirty:l,ctx:o}),!n&&l&1&&(n=!0,d.value=o[0],xn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function d5(i,e,n){const t=["value","class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{value:o=void 0}=e,{class:l=void 0}=e;function d(_){o=_,n(0,o)}return i.$$set=_=>{e=Ce(Ce({},e),Mt(_)),n(2,r=lt(e,t)),"value"in _&&n(0,o=_.value),"class"in _&&n(1,l=_.class),"$$scope"in _&&n(5,a=_.$$scope)},[o,l,r,s,d,a]}class fy extends it{constructor(e){super(),ot(this,e,d5,h5,nt,{value:0,class:1})}}function p5(i){let e;const n=i[3].default,t=$t(n,i,i[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&64)&&wt(t,n,r,r[6],e?kt(n,r[6],s,null):xt(r[6]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function m5(i){let e,n,t;const r=[{class:"[&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground [&_[data-cmdk-group]:not([hidden])_~[data-cmdk-group]]:pt-0 [&_[data-cmdk-group]]:px-2 [&_[data-cmdk-input-wrapper]_svg]:h-5 [&_[data-cmdk-input-wrapper]_svg]:w-5 [&_[data-cmdk-input]]:h-12 [&_[data-cmdk-item]]:px-2 [&_[data-cmdk-item]]:py-3 [&_[data-cmdk-item]_svg]:h-5 [&_[data-cmdk-item]_svg]:w-5"},i[2]];function s(o){i[4](o)}let a={$$slots:{default:[p5]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ce(a,r[o]);return i[1]!==void 0&&(a.value=i[1]),e=new fy({props:a}),jt.push(()=>kn(e,"value",s)),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,l){V(e,o,l),t=!0},p(o,l){const d=l&4?Pt(r,[r[0],mn(o[2])]):{};l&64&&(d.$$scope={dirty:l,ctx:o}),!n&&l&2&&(n=!0,d.value=o[1],xn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function _5(i){let e,n;return e=new Ca({props:{class:"overflow-hidden p-0 shadow-lg",$$slots:{default:[m5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&70&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function g5(i){let e,n,t;const r=[i[2]];function s(o){i[5](o)}let a={$$slots:{default:[_5]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ce(a,r[o]);return i[0]!==void 0&&(a.open=i[0]),e=new Sa({props:a}),jt.push(()=>kn(e,"open",s)),{c(){N(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,l){V(e,o,l),t=!0},p(o,[l]){const d=l&4?Pt(r,[mn(o[2])]):{};l&70&&(d.$$scope={dirty:l,ctx:o}),!n&&l&1&&(n=!0,d.open=o[0],xn(()=>n=!1)),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){U(e,o)}}}function v5(i,e,n){const t=["open","value"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{open:o=!1}=e,{value:l=void 0}=e;function d(b){l=b,n(1,l)}function _(b){o=b,n(0,o)}return i.$$set=b=>{e=Ce(Ce({},e),Mt(b)),n(2,r=lt(e,t)),"open"in b&&n(0,o=b.open),"value"in b&&n(1,l=b.value),"$$scope"in b&&n(6,a=b.$$scope)},[o,l,r,s,d,_,a]}class hy extends it{constructor(e){super(),ot(this,e,v5,g5,nt,{open:0,value:1})}}function y5(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function b5(i){let e,n;const t=[{class:qt("py-6 text-center text-sm",i[0])},i[1]];let r={$$slots:{default:[y5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new oy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("py-6 text-center text-sm",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function $5(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}class tp extends it{constructor(e){super(),ot(this,e,$5,b5,nt,{class:0})}}function w5(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function x5(i){let e,n;const t=[{class:qt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",i[0])},i[1]];let r={$$slots:{default:[w5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new ay({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("overflow-hidden p-1 text-foreground [&_[data-cmdk-group-heading]]:px-2 [&_[data-cmdk-group-heading]]:py-1.5 [&_[data-cmdk-group-heading]]:text-xs [&_[data-cmdk-group-heading]]:font-medium [&_[data-cmdk-group-heading]]:text-muted-foreground",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function k5(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}class Tl extends it{constructor(e){super(),ot(this,e,k5,x5,nt,{class:0})}}function C5(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function S5(i){let e,n;const t=[{class:qt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",i[0])},i[1]];let r={$$slots:{default:[C5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new cy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function T5(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}class Rl extends it{constructor(e){super(),ot(this,e,T5,S5,nt,{class:0})}}function I5(i){let e,n,t,r,s,a;n=new Ad({props:{class:"mr-2 h-4 w-4 shrink-0 opacity-50"}});const o=[{class:qt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]];function l(_){i[3](_)}let d={};for(let _=0;_<o.length;_+=1)d=Ce(d,o[_]);return i[0]!==void 0&&(d.value=i[0]),r=new ly({props:d}),jt.push(()=>kn(r,"value",l)),{c(){e=oe("div"),N(n.$$.fragment),t=de(),N(r.$$.fragment),this.h()},l(_){e=ae(_,"DIV",{class:!0,"data-cmdk-input-wrapper":!0});var b=$e(e);j(n.$$.fragment,b),t=pe(b),j(r.$$.fragment,b),b.forEach(S),this.h()},h(){te(e,"class","flex items-center border-b px-2"),te(e,"data-cmdk-input-wrapper","")},m(_,b){R(_,e,b),V(n,e,null),ce(e,t),V(r,e,null),a=!0},p(_,[b]){const w=b&6?Pt(o,[b&2&&{class:qt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",_[1])},b&4&&mn(_[2])]):{};!s&&b&1&&(s=!0,w.value=_[0],xn(()=>s=!1)),r.$set(w)},i(_){a||(T(n.$$.fragment,_),T(r.$$.fragment,_),a=!0)},o(_){I(n.$$.fragment,_),I(r.$$.fragment,_),a=!1},d(_){_&&S(e),U(n),U(r)}}}function E5(i,e,n){const t=["class","value"];let r=lt(e,t),{class:s=void 0}=e,{value:a=""}=e;function o(l){a=l,n(0,a)}return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(2,r=lt(e,t)),"class"in l&&n(1,s=l.class),"value"in l&&n(0,a=l.value)},[a,s,r,o]}class np extends it{constructor(e){super(),ot(this,e,E5,I5,nt,{class:1,value:0})}}function P5(i){let e;const n=i[2].default,t=$t(n,i,i[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&8)&&wt(t,n,r,r[3],e?kt(n,r[3],s,null):xt(r[3]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function A5(i){let e,n;const t=[{class:qt("max-h-[300px] overflow-y-auto overflow-x-hidden",i[0])},i[1]];let r={$$slots:{default:[P5]},$$scope:{ctx:i}};for(let s=0;s<t.length;s+=1)r=Ce(r,t[s]);return e=new uy({props:r}),{c(){N(e.$$.fragment)},l(s){j(e.$$.fragment,s)},m(s,a){V(e,s,a),n=!0},p(s,[a]){const o=a&3?Pt(t,[a&1&&{class:qt("max-h-[300px] overflow-y-auto overflow-x-hidden",s[0])},a&2&&mn(s[1])]):{};a&8&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){n||(T(e.$$.fragment,s),n=!0)},o(s){I(e.$$.fragment,s),n=!1},d(s){U(e,s)}}}function M5(i,e,n){const t=["class"];let r=lt(e,t),{$$slots:s={},$$scope:a}=e,{class:o=void 0}=e;return i.$$set=l=>{e=Ce(Ce({},e),Mt(l)),n(1,r=lt(e,t)),"class"in l&&n(0,o=l.class),"$$scope"in l&&n(3,a=l.$$scope)},[o,r,s,a]}class dy extends it{constructor(e){super(),ot(this,e,M5,A5,nt,{class:0})}}const py=_A;function Bg(i,e,n){const t=i.slice();return t[8]=e[n],t}function D5(i){let e,n,t,r,s=i[0].label+"",a,o,l,d;return n=new Ww({props:{class:"h-5 w-5"}}),l=new $w({props:{class:"ml-2 h-4 w-4 shrink-0 opacity-50"}}),{c(){e=oe("div"),N(n.$$.fragment),t=de(),r=oe("p"),a=Ve(s),o=de(),N(l.$$.fragment),this.h()},l(_){e=ae(_,"DIV",{class:!0});var b=$e(e);j(n.$$.fragment,b),t=pe(b),r=ae(b,"P",{class:!0});var w=$e(r);a=Ue(w,s),w.forEach(S),b.forEach(S),o=pe(_),j(l.$$.fragment,_),this.h()},h(){te(r,"class","max-lg:hidden text-sm"),te(e,"class","flex gap-2")},m(_,b){R(_,e,b),V(n,e,null),ce(e,t),ce(e,r),ce(r,a),R(_,o,b),V(l,_,b),d=!0},p(_,b){(!d||b&1)&&s!==(s=_[0].label+"")&&Ft(a,s)},i(_){d||(T(n.$$.fragment,_),T(l.$$.fragment,_),d=!0)},o(_){I(n.$$.fragment,_),I(l.$$.fragment,_),d=!1},d(_){_&&(S(e),S(o)),U(n),U(l,_)}}}function z5(i){let e,n;return e=new Vn({props:{builders:[i[11]],variant:"outline",role:"combobox","aria-expanded":i[3],"aria-label":"Change Map Layer",$$slots:{default:[D5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&2048&&(s.builders=[t[11]]),r&8&&(s["aria-expanded"]=t[3]),r&4097&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function L5(i){let e;return{c(){e=Ve("No map layer found.")},l(n){e=Ue(n,"No map layer found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function R5(i){let e,n,t=i[8].label+"",r,s,a;return e=new Vf({props:{class:qt("mr-2 h-4 w-4",i[2]!==i[8].value&&"text-transparent")}}),{c(){N(e.$$.fragment),n=de(),r=Ve(t),s=de()},l(o){j(e.$$.fragment,o),n=pe(o),r=Ue(o,t),s=pe(o)},m(o,l){V(e,o,l),R(o,n,l),R(o,r,l),R(o,s,l),a=!0},p(o,l){const d={};l&4&&(d.class=qt("mr-2 h-4 w-4",o[2]!==o[8].value&&"text-transparent")),e.$set(d)},i(o){a||(T(e.$$.fragment,o),a=!0)},o(o){I(e.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r),S(s)),U(e,o)}}}function Ng(i){let e,n;function t(...r){return i[5](i[7],...r)}return e=new Rl({props:{class:"cursor-pointer",value:i[8].value,onSelect:t,$$slots:{default:[R5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,s){V(e,r,s),n=!0},p(r,s){i=r;const a={};s&132&&(a.onSelect=t),s&4100&&(a.$$scope={dirty:s,ctx:i}),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function O5(i){let e,n,t=Qt(ba),r=[];for(let a=0;a<t.length;a+=1)r[a]=Ng(Bg(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Fe()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Fe()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&148){t=Qt(ba);let l;for(l=0;l<t.length;l+=1){const d=Bg(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=Ng(d),r[l].c(),T(r[l],1),r[l].m(e.parentNode,e))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function F5(i){let e,n,t,r,s,a;return e=new np({props:{placeholder:"Search map layers"}}),t=new tp({props:{$$slots:{default:[L5]},$$scope:{ctx:i}}}),s=new Tl({props:{$$slots:{default:[O5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o),r=pe(o),j(s.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),R(o,r,l),V(s,o,l),a=!0},p(o,l){const d={};l&4096&&(d.$$scope={dirty:l,ctx:o}),t.$set(d);const _={};l&4228&&(_.$$scope={dirty:l,ctx:o}),s.$set(_)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),I(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function B5(i){let e,n;return e=new fy({props:{$$slots:{default:[F5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4228&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function N5(i){let e,n,t,r;return e=new X0({props:{asChild:!0,$$slots:{default:[z5,({builder:s})=>({11:s}),({builder:s})=>s?2048:0]},$$scope:{ctx:i}}}),t=new J0({props:{class:"w-[200px] p-0 mt-1",align:"end",$$slots:{default:[B5]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&6153&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&4228&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function V5(i){let e,n,t;function r(a){i[6](a)}let s={disableFocusTrap:!0,onOutsideClick:i[1],$$slots:{default:[N5,({ids:a})=>({7:a}),({ids:a})=>a?128:0]},$$scope:{ctx:i}};return i[3]!==void 0&&(s.open=i[3]),e=new K0({props:s}),jt.push(()=>kn(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,[o]){const l={};o&4237&&(l.$$scope={dirty:o,ctx:a}),!n&&o&8&&(n=!0,l.open=a[3],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function U5(i,e,n){let{selectedMapLayer:t}=e,r=!1;const s=()=>n(3,r=!1);let a="";function o(_){n(3,r=!1),_i().then(()=>{var b;(b=document.getElementById(_))==null||b.focus()})}const l=(_,b)=>{n(2,a=b),localStorage.setItem("preferredMapLayer",b),o(_.trigger)};function d(_){r=_,n(3,r)}return i.$$set=_=>{"selectedMapLayer"in _&&n(0,t=_.selectedMapLayer)},i.$$.update=()=>{i.$$.dirty&5&&(ba.find(_=>_.value===a)?n(0,t=ba.find(_=>_.value===a)):n(2,a=t.value))},[t,s,a,r,o,l,d]}class j5 extends it{constructor(e){super(),ot(this,e,U5,V5,nt,{selectedMapLayer:0,forceClosePopover:1})}get forceClosePopover(){return this.$$.ctx[1]}}function my(i,e){return function(){return i.apply(e,arguments)}}const{toString:q5}=Object.prototype,{getPrototypeOf:rp}=Object,Kf=(i=>e=>{const n=q5.call(e);return i[n]||(i[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Wi=i=>(i=i.toLowerCase(),e=>Kf(e)===i),Xf=i=>e=>typeof e===i,{isArray:Ol}=Array,Yc=Xf("undefined");function G5(i){return i!==null&&!Yc(i)&&i.constructor!==null&&!Yc(i.constructor)&&vi(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const _y=Wi("ArrayBuffer");function H5(i){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(i):e=i&&i.buffer&&_y(i.buffer),e}const Z5=Xf("string"),vi=Xf("function"),gy=Xf("number"),Jf=i=>i!==null&&typeof i=="object",W5=i=>i===!0||i===!1,xf=i=>{if(Kf(i)!=="object")return!1;const e=rp(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},K5=Wi("Date"),X5=Wi("File"),J5=Wi("Blob"),Y5=Wi("FileList"),Q5=i=>Jf(i)&&vi(i.pipe),eM=i=>{let e;return i&&(typeof FormData=="function"&&i instanceof FormData||vi(i.append)&&((e=Kf(i))==="formdata"||e==="object"&&vi(i.toString)&&i.toString()==="[object FormData]"))},tM=Wi("URLSearchParams"),nM=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uu(i,e,{allOwnKeys:n=!1}={}){if(i===null||typeof i>"u")return;let t,r;if(typeof i!="object"&&(i=[i]),Ol(i))for(t=0,r=i.length;t<r;t++)e.call(null,i[t],t,i);else{const s=n?Object.getOwnPropertyNames(i):Object.keys(i),a=s.length;let o;for(t=0;t<a;t++)o=s[t],e.call(null,i[o],o,i)}}function vy(i,e){e=e.toLowerCase();const n=Object.keys(i);let t=n.length,r;for(;t-- >0;)if(r=n[t],e===r.toLowerCase())return r;return null}const yy=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),by=i=>!Yc(i)&&i!==yy;function $d(){const{caseless:i}=by(this)&&this||{},e={},n=(t,r)=>{const s=i&&vy(e,r)||r;xf(e[s])&&xf(t)?e[s]=$d(e[s],t):xf(t)?e[s]=$d({},t):Ol(t)?e[s]=t.slice():e[s]=t};for(let t=0,r=arguments.length;t<r;t++)arguments[t]&&uu(arguments[t],n);return e}const rM=(i,e,n,{allOwnKeys:t}={})=>(uu(e,(r,s)=>{n&&vi(r)?i[s]=my(r,n):i[s]=r},{allOwnKeys:t}),i),sM=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),iM=(i,e,n,t)=>{i.prototype=Object.create(e.prototype,t),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:e.prototype}),n&&Object.assign(i.prototype,n)},oM=(i,e,n,t)=>{let r,s,a;const o={};if(e=e||{},i==null)return e;do{for(r=Object.getOwnPropertyNames(i),s=r.length;s-- >0;)a=r[s],(!t||t(a,i,e))&&!o[a]&&(e[a]=i[a],o[a]=!0);i=n!==!1&&rp(i)}while(i&&(!n||n(i,e))&&i!==Object.prototype);return e},aM=(i,e,n)=>{i=String(i),(n===void 0||n>i.length)&&(n=i.length),n-=e.length;const t=i.indexOf(e,n);return t!==-1&&t===n},lM=i=>{if(!i)return null;if(Ol(i))return i;let e=i.length;if(!gy(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=i[e];return n},cM=(i=>e=>i&&e instanceof i)(typeof Uint8Array<"u"&&rp(Uint8Array)),uM=(i,e)=>{const t=(i&&i[Symbol.iterator]).call(i);let r;for(;(r=t.next())&&!r.done;){const s=r.value;e.call(i,s[0],s[1])}},fM=(i,e)=>{let n;const t=[];for(;(n=i.exec(e))!==null;)t.push(n);return t},hM=Wi("HTMLFormElement"),dM=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,t,r){return t.toUpperCase()+r}),Vg=(({hasOwnProperty:i})=>(e,n)=>i.call(e,n))(Object.prototype),pM=Wi("RegExp"),$y=(i,e)=>{const n=Object.getOwnPropertyDescriptors(i),t={};uu(n,(r,s)=>{let a;(a=e(r,s,i))!==!1&&(t[s]=a||r)}),Object.defineProperties(i,t)},mM=i=>{$y(i,(e,n)=>{if(vi(i)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const t=i[n];if(vi(t)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},_M=(i,e)=>{const n={},t=r=>{r.forEach(s=>{n[s]=!0})};return Ol(i)?t(i):t(String(i).split(e)),n},gM=()=>{},vM=(i,e)=>(i=+i,Number.isFinite(i)?i:e),hd="abcdefghijklmnopqrstuvwxyz",Ug="0123456789",wy={DIGIT:Ug,ALPHA:hd,ALPHA_DIGIT:hd+hd.toUpperCase()+Ug},yM=(i=16,e=wy.ALPHA_DIGIT)=>{let n="";const{length:t}=e;for(;i--;)n+=e[Math.random()*t|0];return n};function bM(i){return!!(i&&vi(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const $M=i=>{const e=new Array(10),n=(t,r)=>{if(Jf(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const s=Ol(t)?[]:{};return uu(t,(a,o)=>{const l=n(a,r+1);!Yc(l)&&(s[o]=l)}),e[r]=void 0,s}}return t};return n(i,0)},wM=Wi("AsyncFunction"),xM=i=>i&&(Jf(i)||vi(i))&&vi(i.then)&&vi(i.catch),It={isArray:Ol,isArrayBuffer:_y,isBuffer:G5,isFormData:eM,isArrayBufferView:H5,isString:Z5,isNumber:gy,isBoolean:W5,isObject:Jf,isPlainObject:xf,isUndefined:Yc,isDate:K5,isFile:X5,isBlob:J5,isRegExp:pM,isFunction:vi,isStream:Q5,isURLSearchParams:tM,isTypedArray:cM,isFileList:Y5,forEach:uu,merge:$d,extend:rM,trim:nM,stripBOM:sM,inherits:iM,toFlatObject:oM,kindOf:Kf,kindOfTest:Wi,endsWith:aM,toArray:lM,forEachEntry:uM,matchAll:fM,isHTMLForm:hM,hasOwnProperty:Vg,hasOwnProp:Vg,reduceDescriptors:$y,freezeMethods:mM,toObjectSet:_M,toCamelCase:dM,noop:gM,toFiniteNumber:vM,findKey:vy,global:yy,isContextDefined:by,ALPHABET:wy,generateString:yM,isSpecCompliantForm:bM,toJSONObject:$M,isAsyncFn:wM,isThenable:xM};function Zn(i,e,n,t,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),t&&(this.request=t),r&&(this.response=r)}It.inherits(Zn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:It.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xy=Zn.prototype,ky={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{ky[i]={value:i}});Object.defineProperties(Zn,ky);Object.defineProperty(xy,"isAxiosError",{value:!0});Zn.from=(i,e,n,t,r,s)=>{const a=Object.create(xy);return It.toFlatObject(i,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Zn.call(a,i.message,e,n,t,r),a.cause=i,a.name=i.name,s&&Object.assign(a,s),a};const kM=null;function wd(i){return It.isPlainObject(i)||It.isArray(i)}function Cy(i){return It.endsWith(i,"[]")?i.slice(0,-2):i}function jg(i,e,n){return i?i.concat(e).map(function(r,s){return r=Cy(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function CM(i){return It.isArray(i)&&!i.some(wd)}const SM=It.toFlatObject(It,{},null,function(e){return/^is[A-Z]/.test(e)});function Yf(i,e,n){if(!It.isObject(i))throw new TypeError("target must be an object");e=e||new FormData,n=It.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,F){return!It.isUndefined(F[M])});const t=n.metaTokens,r=n.visitor||_,s=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&It.isSpecCompliantForm(e);if(!It.isFunction(r))throw new TypeError("visitor must be a function");function d(L){if(L===null)return"";if(It.isDate(L))return L.toISOString();if(!l&&It.isBlob(L))throw new Zn("Blob is not supported. Use a Buffer instead.");return It.isArrayBuffer(L)||It.isTypedArray(L)?l&&typeof Blob=="function"?new Blob([L]):Buffer.from(L):L}function _(L,M,F){let q=L;if(L&&!F&&typeof L=="object"){if(It.endsWith(M,"{}"))M=t?M:M.slice(0,-2),L=JSON.stringify(L);else if(It.isArray(L)&&CM(L)||(It.isFileList(L)||It.endsWith(M,"[]"))&&(q=It.toArray(L)))return M=Cy(M),q.forEach(function(Q,ge){!(It.isUndefined(Q)||Q===null)&&e.append(a===!0?jg([M],ge,s):a===null?M:M+"[]",d(Q))}),!1}return wd(L)?!0:(e.append(jg(F,M,s),d(L)),!1)}const b=[],w=Object.assign(SM,{defaultVisitor:_,convertValue:d,isVisitable:wd});function E(L,M){if(!It.isUndefined(L)){if(b.indexOf(L)!==-1)throw Error("Circular reference detected in "+M.join("."));b.push(L),It.forEach(L,function(q,G){(!(It.isUndefined(q)||q===null)&&r.call(e,q,It.isString(G)?G.trim():G,M,w))===!0&&E(q,M?M.concat(G):[G])}),b.pop()}}if(!It.isObject(i))throw new TypeError("data must be an object");return E(i),e}function qg(i){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function sp(i,e){this._pairs=[],i&&Yf(i,this,e)}const Sy=sp.prototype;Sy.append=function(e,n){this._pairs.push([e,n])};Sy.toString=function(e){const n=e?function(t){return e.call(this,t,qg)}:qg;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function TM(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ty(i,e,n){if(!e)return i;const t=n&&n.encode||TM,r=n&&n.serialize;let s;if(r?s=r(e,n):s=It.isURLSearchParams(e)?e.toString():new sp(e,n).toString(t),s){const a=i.indexOf("#");a!==-1&&(i=i.slice(0,a)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}class IM{constructor(){this.handlers=[]}use(e,n,t){return this.handlers.push({fulfilled:e,rejected:n,synchronous:t?t.synchronous:!1,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){It.forEach(this.handlers,function(t){t!==null&&e(t)})}}const Gg=IM,Iy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EM=typeof URLSearchParams<"u"?URLSearchParams:sp,PM=typeof FormData<"u"?FormData:null,AM=typeof Blob<"u"?Blob:null,MM={isBrowser:!0,classes:{URLSearchParams:EM,FormData:PM,Blob:AM},protocols:["http","https","file","blob","url","data"]},Ey=typeof window<"u"&&typeof document<"u",DM=(i=>Ey&&["ReactNative","NativeScript","NS"].indexOf(i)<0)(typeof navigator<"u"&&navigator.product),zM=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),LM=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ey,hasStandardBrowserEnv:DM,hasStandardBrowserWebWorkerEnv:zM},Symbol.toStringTag,{value:"Module"})),qi={...LM,...MM};function RM(i,e){return Yf(i,new qi.classes.URLSearchParams,Object.assign({visitor:function(n,t,r,s){return qi.isNode&&It.isBuffer(n)?(this.append(t,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function OM(i){return It.matchAll(/\w+|\[(\w*)]/g,i).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FM(i){const e={},n=Object.keys(i);let t;const r=n.length;let s;for(t=0;t<r;t++)s=n[t],e[s]=i[s];return e}function Py(i){function e(n,t,r,s){let a=n[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=n.length;return a=!a&&It.isArray(r)?r.length:a,l?(It.hasOwnProp(r,a)?r[a]=[r[a],t]:r[a]=t,!o):((!r[a]||!It.isObject(r[a]))&&(r[a]=[]),e(n,t,r[a],s)&&It.isArray(r[a])&&(r[a]=FM(r[a])),!o)}if(It.isFormData(i)&&It.isFunction(i.entries)){const n={};return It.forEachEntry(i,(t,r)=>{e(OM(t),r,n,0)}),n}return null}function BM(i,e,n){if(It.isString(i))try{return(e||JSON.parse)(i),It.trim(i)}catch(t){if(t.name!=="SyntaxError")throw t}return(n||JSON.stringify)(i)}const ip={transitional:Iy,adapter:["xhr","http"],transformRequest:[function(e,n){const t=n.getContentType()||"",r=t.indexOf("application/json")>-1,s=It.isObject(e);if(s&&It.isHTMLForm(e)&&(e=new FormData(e)),It.isFormData(e))return r?JSON.stringify(Py(e)):e;if(It.isArrayBuffer(e)||It.isBuffer(e)||It.isStream(e)||It.isFile(e)||It.isBlob(e))return e;if(It.isArrayBufferView(e))return e.buffer;if(It.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(t.indexOf("application/x-www-form-urlencoded")>-1)return RM(e,this.formSerializer).toString();if((o=It.isFileList(e))||t.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Yf(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),BM(e)):e}],transformResponse:[function(e){const n=this.transitional||ip.transitional,t=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&It.isString(e)&&(t&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?Zn.from(o,Zn.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qi.classes.FormData,Blob:qi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};It.forEach(["delete","get","head","post","put","patch"],i=>{ip.headers[i]={}});const op=ip,NM=It.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VM=i=>{const e={};let n,t,r;return i&&i.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),t=a.substring(r+1).trim(),!(!n||e[n]&&NM[n])&&(n==="set-cookie"?e[n]?e[n].push(t):e[n]=[t]:e[n]=e[n]?e[n]+", "+t:t)}),e},Hg=Symbol("internals");function Vc(i){return i&&String(i).trim().toLowerCase()}function kf(i){return i===!1||i==null?i:It.isArray(i)?i.map(kf):String(i)}function UM(i){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let t;for(;t=n.exec(i);)e[t[1]]=t[2];return e}const jM=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function dd(i,e,n,t,r){if(It.isFunction(t))return t.call(this,e,n);if(r&&(e=n),!!It.isString(e)){if(It.isString(t))return e.indexOf(t)!==-1;if(It.isRegExp(t))return t.test(e)}}function qM(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,t)=>n.toUpperCase()+t)}function GM(i,e){const n=It.toCamelCase(" "+e);["get","set","has"].forEach(t=>{Object.defineProperty(i,t+n,{value:function(r,s,a){return this[t].call(this,e,r,s,a)},configurable:!0})})}class Qf{constructor(e){e&&this.set(e)}set(e,n,t){const r=this;function s(o,l,d){const _=Vc(l);if(!_)throw new Error("header name must be a non-empty string");const b=It.findKey(r,_);(!b||r[b]===void 0||d===!0||d===void 0&&r[b]!==!1)&&(r[b||l]=kf(o))}const a=(o,l)=>It.forEach(o,(d,_)=>s(d,_,l));return It.isPlainObject(e)||e instanceof this.constructor?a(e,n):It.isString(e)&&(e=e.trim())&&!jM(e)?a(VM(e),n):e!=null&&s(n,e,t),this}get(e,n){if(e=Vc(e),e){const t=It.findKey(this,e);if(t){const r=this[t];if(!n)return r;if(n===!0)return UM(r);if(It.isFunction(n))return n.call(this,r,t);if(It.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Vc(e),e){const t=It.findKey(this,e);return!!(t&&this[t]!==void 0&&(!n||dd(this,this[t],t,n)))}return!1}delete(e,n){const t=this;let r=!1;function s(a){if(a=Vc(a),a){const o=It.findKey(t,a);o&&(!n||dd(t,t[o],o,n))&&(delete t[o],r=!0)}}return It.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let t=n.length,r=!1;for(;t--;){const s=n[t];(!e||dd(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,t={};return It.forEach(this,(r,s)=>{const a=It.findKey(t,s);if(a){n[a]=kf(r),delete n[s];return}const o=e?qM(s):String(s).trim();o!==s&&delete n[s],n[o]=kf(r),t[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return It.forEach(this,(t,r)=>{t!=null&&t!==!1&&(n[r]=e&&It.isArray(t)?t.join(", "):t)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const t=new this(e);return n.forEach(r=>t.set(r)),t}static accessor(e){const t=(this[Hg]=this[Hg]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=Vc(a);t[o]||(GM(r,a),t[o]=!0)}return It.isArray(e)?e.forEach(s):s(e),this}}Qf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);It.reduceDescriptors(Qf.prototype,({value:i},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>i,set(t){this[n]=t}}});It.freezeMethods(Qf);const ho=Qf;function pd(i,e){const n=this||op,t=e||n,r=ho.from(t.headers);let s=t.data;return It.forEach(i,function(o){s=o.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function Ay(i){return!!(i&&i.__CANCEL__)}function fu(i,e,n){Zn.call(this,i??"canceled",Zn.ERR_CANCELED,e,n),this.name="CanceledError"}It.inherits(fu,Zn,{__CANCEL__:!0});function HM(i,e,n){const t=n.config.validateStatus;!n.status||!t||t(n.status)?i(n):e(new Zn("Request failed with status code "+n.status,[Zn.ERR_BAD_REQUEST,Zn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const ZM=qi.hasStandardBrowserEnv?{write(i,e,n,t,r,s){const a=[i+"="+encodeURIComponent(e)];It.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),It.isString(t)&&a.push("path="+t),It.isString(r)&&a.push("domain="+r),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(i){const e=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function WM(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function KM(i,e){return e?i.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):i}function My(i,e){return i&&!WM(e)?KM(i,e):e}const XM=qi.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let t;function r(s){let a=s;return e&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(a){const o=It.isString(a)?r(a):a;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}();function JM(i){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return e&&e[1]||""}function YM(i,e){i=i||10;const n=new Array(i),t=new Array(i);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const d=Date.now(),_=t[s];a||(a=d),n[r]=l,t[r]=d;let b=s,w=0;for(;b!==r;)w+=n[b++],b=b%i;if(r=(r+1)%i,r===s&&(s=(s+1)%i),d-a<e)return;const E=_&&d-_;return E?Math.round(w*1e3/E):void 0}}function Zg(i,e){let n=0;const t=YM(50,250);return r=>{const s=r.loaded,a=r.lengthComputable?r.total:void 0,o=s-n,l=t(o),d=s<=a;n=s;const _={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&d?(a-s)/l:void 0,event:r};_[e?"download":"upload"]=!0,i(_)}}const QM=typeof XMLHttpRequest<"u",eD=QM&&function(i){return new Promise(function(n,t){let r=i.data;const s=ho.from(i.headers).normalize();let{responseType:a,withXSRFToken:o}=i,l;function d(){i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let _;if(It.isFormData(r)){if(qi.hasStandardBrowserEnv||qi.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((_=s.getContentType())!==!1){const[M,...F]=_?_.split(";").map(q=>q.trim()).filter(Boolean):[];s.setContentType([M||"multipart/form-data",...F].join("; "))}}let b=new XMLHttpRequest;if(i.auth){const M=i.auth.username||"",F=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";s.set("Authorization","Basic "+btoa(M+":"+F))}const w=My(i.baseURL,i.url);b.open(i.method.toUpperCase(),Ty(w,i.params,i.paramsSerializer),!0),b.timeout=i.timeout;function E(){if(!b)return;const M=ho.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),q={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:M,config:i,request:b};HM(function(Q){n(Q),d()},function(Q){t(Q),d()},q),b=null}if("onloadend"in b?b.onloadend=E:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(E)},b.onabort=function(){b&&(t(new Zn("Request aborted",Zn.ECONNABORTED,i,b)),b=null)},b.onerror=function(){t(new Zn("Network Error",Zn.ERR_NETWORK,i,b)),b=null},b.ontimeout=function(){let F=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const q=i.transitional||Iy;i.timeoutErrorMessage&&(F=i.timeoutErrorMessage),t(new Zn(F,q.clarifyTimeoutError?Zn.ETIMEDOUT:Zn.ECONNABORTED,i,b)),b=null},qi.hasStandardBrowserEnv&&(o&&It.isFunction(o)&&(o=o(i)),o||o!==!1&&XM(w))){const M=i.xsrfHeaderName&&i.xsrfCookieName&&ZM.read(i.xsrfCookieName);M&&s.set(i.xsrfHeaderName,M)}r===void 0&&s.setContentType(null),"setRequestHeader"in b&&It.forEach(s.toJSON(),function(F,q){b.setRequestHeader(q,F)}),It.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),a&&a!=="json"&&(b.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&b.addEventListener("progress",Zg(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",Zg(i.onUploadProgress)),(i.cancelToken||i.signal)&&(l=M=>{b&&(t(!M||M.type?new fu(null,i,b):M),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const L=JM(w);if(L&&qi.protocols.indexOf(L)===-1){t(new Zn("Unsupported protocol "+L+":",Zn.ERR_BAD_REQUEST,i));return}b.send(r||null)})},xd={http:kM,xhr:eD};It.forEach(xd,(i,e)=>{if(i){try{Object.defineProperty(i,"name",{value:e})}catch{}Object.defineProperty(i,"adapterName",{value:e})}});const Wg=i=>`- ${i}`,tD=i=>It.isFunction(i)||i===null||i===!1,Dy={getAdapter:i=>{i=It.isArray(i)?i:[i];const{length:e}=i;let n,t;const r={};for(let s=0;s<e;s++){n=i[s];let a;if(t=n,!tD(n)&&(t=xd[(a=String(n)).toLowerCase()],t===void 0))throw new Zn(`Unknown adapter '${a}'`);if(t)break;r[a||"#"+s]=t}if(!t){const s=Object.entries(r).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(Wg).join(`
`):" "+Wg(s[0]):"as no adapter specified";throw new Zn("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return t},adapters:xd};function md(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new fu(null,i)}function Kg(i){return md(i),i.headers=ho.from(i.headers),i.data=pd.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),Dy.getAdapter(i.adapter||op.adapter)(i).then(function(t){return md(i),t.data=pd.call(i,i.transformResponse,t),t.headers=ho.from(t.headers),t},function(t){return Ay(t)||(md(i),t&&t.response&&(t.response.data=pd.call(i,i.transformResponse,t.response),t.response.headers=ho.from(t.response.headers))),Promise.reject(t)})}const Xg=i=>i instanceof ho?{...i}:i;function Il(i,e){e=e||{};const n={};function t(d,_,b){return It.isPlainObject(d)&&It.isPlainObject(_)?It.merge.call({caseless:b},d,_):It.isPlainObject(_)?It.merge({},_):It.isArray(_)?_.slice():_}function r(d,_,b){if(It.isUndefined(_)){if(!It.isUndefined(d))return t(void 0,d,b)}else return t(d,_,b)}function s(d,_){if(!It.isUndefined(_))return t(void 0,_)}function a(d,_){if(It.isUndefined(_)){if(!It.isUndefined(d))return t(void 0,d)}else return t(void 0,_)}function o(d,_,b){if(b in e)return t(d,_);if(b in i)return t(void 0,d)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(d,_)=>r(Xg(d),Xg(_),!0)};return It.forEach(Object.keys(Object.assign({},i,e)),function(_){const b=l[_]||r,w=b(i[_],e[_],_);It.isUndefined(w)&&b!==o||(n[_]=w)}),n}const zy="1.6.8",ap={};["object","boolean","number","function","string","symbol"].forEach((i,e)=>{ap[i]=function(t){return typeof t===i||"a"+(e<1?"n ":" ")+i}});const Jg={};ap.transitional=function(e,n,t){function r(s,a){return"[Axios v"+zy+"] Transitional option '"+s+"'"+a+(t?". "+t:"")}return(s,a,o)=>{if(e===!1)throw new Zn(r(a," has been removed"+(n?" in "+n:"")),Zn.ERR_DEPRECATED);return n&&!Jg[a]&&(Jg[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,o):!0}};function nD(i,e,n){if(typeof i!="object")throw new Zn("options must be an object",Zn.ERR_BAD_OPTION_VALUE);const t=Object.keys(i);let r=t.length;for(;r-- >0;){const s=t[r],a=e[s];if(a){const o=i[s],l=o===void 0||a(o,s,i);if(l!==!0)throw new Zn("option "+s+" must be "+l,Zn.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Zn("Unknown option "+s,Zn.ERR_BAD_OPTION)}}const kd={assertOptions:nD,validators:ap},zo=kd.validators;class Rf{constructor(e){this.defaults=e,this.interceptors={request:new Gg,response:new Gg}}async request(e,n){try{return await this._request(e,n)}catch(t){if(t instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";t.stack?s&&!String(t.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(t.stack+=`
`+s):t.stack=s}throw t}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Il(this.defaults,n);const{transitional:t,paramsSerializer:r,headers:s}=n;t!==void 0&&kd.assertOptions(t,{silentJSONParsing:zo.transitional(zo.boolean),forcedJSONParsing:zo.transitional(zo.boolean),clarifyTimeoutError:zo.transitional(zo.boolean)},!1),r!=null&&(It.isFunction(r)?n.paramsSerializer={serialize:r}:kd.assertOptions(r,{encode:zo.function,serialize:zo.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&It.merge(s.common,s[n.method]);s&&It.forEach(["delete","get","head","post","put","patch","common"],L=>{delete s[L]}),n.headers=ho.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(n)===!1||(l=l&&M.synchronous,o.unshift(M.fulfilled,M.rejected))});const d=[];this.interceptors.response.forEach(function(M){d.push(M.fulfilled,M.rejected)});let _,b=0,w;if(!l){const L=[Kg.bind(this),void 0];for(L.unshift.apply(L,o),L.push.apply(L,d),w=L.length,_=Promise.resolve(n);b<w;)_=_.then(L[b++],L[b++]);return _}w=o.length;let E=n;for(b=0;b<w;){const L=o[b++],M=o[b++];try{E=L(E)}catch(F){M.call(this,F);break}}try{_=Kg.call(this,E)}catch(L){return Promise.reject(L)}for(b=0,w=d.length;b<w;)_=_.then(d[b++],d[b++]);return _}getUri(e){e=Il(this.defaults,e);const n=My(e.baseURL,e.url);return Ty(n,e.params,e.paramsSerializer)}}It.forEach(["delete","get","head","options"],function(e){Rf.prototype[e]=function(n,t){return this.request(Il(t||{},{method:e,url:n,data:(t||{}).data}))}});It.forEach(["post","put","patch"],function(e){function n(t){return function(s,a,o){return this.request(Il(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}Rf.prototype[e]=n(),Rf.prototype[e+"Form"]=n(!0)});const Cf=Rf;class lp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const t=this;this.promise.then(r=>{if(!t._listeners)return;let s=t._listeners.length;for(;s-- >0;)t._listeners[s](r);t._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{t.subscribe(o),s=o}).then(r);return a.cancel=function(){t.unsubscribe(s)},a},e(function(s,a,o){t.reason||(t.reason=new fu(s,a,o),n(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new lp(function(r){e=r}),cancel:e}}}const rD=lp;function sD(i){return function(n){return i.apply(null,n)}}function iD(i){return It.isObject(i)&&i.isAxiosError===!0}const Cd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cd).forEach(([i,e])=>{Cd[e]=i});const oD=Cd;function Ly(i){const e=new Cf(i),n=my(Cf.prototype.request,e);return It.extend(n,Cf.prototype,e,{allOwnKeys:!0}),It.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return Ly(Il(i,r))},n}const Qr=Ly(op);Qr.Axios=Cf;Qr.CanceledError=fu;Qr.CancelToken=rD;Qr.isCancel=Ay;Qr.VERSION=zy;Qr.toFormData=Yf;Qr.AxiosError=Zn;Qr.Cancel=Qr.CanceledError;Qr.all=function(e){return Promise.all(e)};Qr.spread=sD;Qr.isAxiosError=iD;Qr.mergeConfig=Il;Qr.AxiosHeaders=ho;Qr.formToJSON=i=>Py(It.isHTMLForm(i)?new FormData(i):i);Qr.getAdapter=Dy.getAdapter;Qr.HttpStatusCode=oD;Qr.default=Qr;const mi=Qr;function Yg(i,e,n){const t=i.slice();return t[19]=e[n],t}function Qg(i,e,n){const t=i.slice();return t[22]=e[n],t}function e1(i,e,n){const t=i.slice();return t[22]=e[n],t}function t1(i,e,n){const t=i.slice();return t[19]=e[n],t}function aD(i){let e,n,t,r,s="Search By Name Or Location",a;return n=new Ad({}),{c(){e=oe("div"),N(n.$$.fragment),t=de(),r=oe("p"),r.textContent=s,this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);j(n.$$.fragment,l),t=pe(l),r=ae(l,"P",{class:!0,"data-svelte-h":!0}),an(r)!=="svelte-1imatsx"&&(r.textContent=s),l.forEach(S),this.h()},h(){te(r,"class","text-sm"),te(e,"class","flex gap-2 items-center")},m(o,l){R(o,e,l),V(n,e,null),ce(e,t),ce(e,r),a=!0},p:gt,i(o){a||(T(n.$$.fragment,o),a=!0)},o(o){I(n.$$.fragment,o),a=!1},d(o){o&&S(e),U(n)}}}function lD(i){let e,n="Points Of Interest",t,r,s,a,o,l,d="Locations",_,b,w,E,L='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',M;return r=new Tl({props:{$$slots:{default:[pD]},$$scope:{ctx:i}}}),b=new Tl({props:{$$slots:{default:[_D]},$$scope:{ctx:i}}}),{c(){e=oe("p"),e.textContent=n,t=de(),N(r.$$.fragment),s=de(),a=oe("div"),o=de(),l=oe("p"),l.textContent=d,_=de(),N(b.$$.fragment),w=de(),E=oe("div"),E.innerHTML=L,this.h()},l(F){e=ae(F,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-x03xac"&&(e.textContent=n),t=pe(F),j(r.$$.fragment,F),s=pe(F),a=ae(F,"DIV",{class:!0}),$e(a).forEach(S),o=pe(F),l=ae(F,"P",{class:!0,"data-svelte-h":!0}),an(l)!=="svelte-wt03ge"&&(l.textContent=d),_=pe(F),j(b.$$.fragment,F),w=pe(F),E=ae(F,"DIV",{class:!0,"data-svelte-h":!0}),an(E)!=="svelte-160hzgv"&&(E.innerHTML=L),this.h()},h(){te(e,"class","px-4 py-2 font-medium leading-none"),te(a,"class","divider my-0 mx-4"),te(l,"class","px-4 py-2 font-medium leading-none"),te(E,"class","flex w-full justify-end p-2")},m(F,q){R(F,e,q),R(F,t,q),V(r,F,q),R(F,s,q),R(F,a,q),R(F,o,q),R(F,l,q),R(F,_,q),V(b,F,q),R(F,w,q),R(F,E,q),M=!0},p(F,q){const G={};q&536870921&&(G.$$scope={dirty:q,ctx:F}),r.$set(G);const Q={};q&536870929&&(Q.$$scope={dirty:q,ctx:F}),b.$set(Q)},i(F){M||(T(r.$$.fragment,F),T(b.$$.fragment,F),M=!0)},o(F){I(r.$$.fragment,F),I(b.$$.fragment,F),M=!1},d(F){F&&(S(e),S(t),S(s),S(a),S(o),S(l),S(_),S(w),S(E)),U(r,F),U(b,F)}}}function cD(i){let e,n="Points Of Interest",t,r,s,a,o='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',l;return r=new Tl({props:{$$slots:{default:[vD]},$$scope:{ctx:i}}}),{c(){e=oe("p"),e.textContent=n,t=de(),N(r.$$.fragment),s=de(),a=oe("div"),a.innerHTML=o,this.h()},l(d){e=ae(d,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-x03xac"&&(e.textContent=n),t=pe(d),j(r.$$.fragment,d),s=pe(d),a=ae(d,"DIV",{class:!0,"data-svelte-h":!0}),an(a)!=="svelte-160hzgv"&&(a.innerHTML=o),this.h()},h(){te(e,"class","px-4 py-2 font-medium leading-none"),te(a,"class","flex w-full justify-end p-2")},m(d,_){R(d,e,_),R(d,t,_),V(r,d,_),R(d,s,_),R(d,a,_),l=!0},p(d,_){const b={};_&536870921&&(b.$$scope={dirty:_,ctx:d}),r.$set(b)},i(d){l||(T(r.$$.fragment,d),l=!0)},o(d){I(r.$$.fragment,d),l=!1},d(d){d&&(S(e),S(t),S(s),S(a)),U(r,d)}}}function uD(i){let e,n="Locations",t,r,s,a,o='<p class="text-xs font-light leading-none">Note: Distances are relative to current map center.</p>',l;return r=new Tl({props:{$$slots:{default:[bD]},$$scope:{ctx:i}}}),{c(){e=oe("p"),e.textContent=n,t=de(),N(r.$$.fragment),s=de(),a=oe("div"),a.innerHTML=o,this.h()},l(d){e=ae(d,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-wt03ge"&&(e.textContent=n),t=pe(d),j(r.$$.fragment,d),s=pe(d),a=ae(d,"DIV",{class:!0,"data-svelte-h":!0}),an(a)!=="svelte-160hzgv"&&(a.innerHTML=o),this.h()},h(){te(e,"class","px-4 py-2 font-medium leading-none"),te(a,"class","flex w-full justify-end p-2")},m(d,_){R(d,e,_),R(d,t,_),V(r,d,_),R(d,s,_),R(d,a,_),l=!0},p(d,_){const b={};_&536870929&&(b.$$scope={dirty:_,ctx:d}),r.$set(b)},i(d){l||(T(r.$$.fragment,d),l=!0)},o(d){I(r.$$.fragment,d),l=!1},d(d){d&&(S(e),S(t),S(s),S(a)),U(r,d)}}}function fD(i){let e,n;return e=new tp({props:{class:"h-[300px] flex items-center justify-center",$$slots:{default:[$D]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function hD(i){let e,n;return e=new py({props:{$$slots:{default:[wD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function n1(i){let e,n,t;return n=new Ml({props:{class:"h-3 w-3 text-primary"}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","flex gap-2")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function dD(i){let e,n,t,r=i[22].name+"",s,a,o,l=Math.round(i[8](i[22].lngLat,i[0].getCenter())/100)/10+"",d,_,b,w,E,L,M,F=i[22].features.join(", ")+"",q,G,Q,ge,le,re,me,se,Z=i[22].likes+"",Y,ie,be,fe,ke,je,Se=i[22].comments.length+"",Qe,Xe,at,mt=i[22].isFavourite&&n1();return re=new Md({props:{class:"h-3 w-3"}}),fe=new Iv({props:{class:"h-3 w-3"}}),{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=Ve(r),a=de(),o=oe("p"),d=Ve(l),_=Ve("Km"),b=de(),w=oe("div"),E=oe("div"),L=oe("p"),M=Ve("Features:"),q=Ve(F),G=de(),Q=oe("div"),mt&&mt.c(),ge=de(),le=oe("div"),N(re.$$.fragment),me=de(),se=oe("p"),Y=Ve(Z),ie=de(),be=oe("div"),N(fe.$$.fragment),ke=de(),je=oe("p"),Qe=Ve(Se),Xe=de(),this.h()},l(Dt){e=ae(Dt,"DIV",{class:!0});var Ct=$e(e);n=ae(Ct,"DIV",{class:!0});var nn=$e(n);t=ae(nn,"P",{});var yn=$e(t);s=Ue(yn,r),yn.forEach(S),a=pe(nn),o=ae(nn,"P",{class:!0});var cn=$e(o);d=Ue(cn,l),_=Ue(cn,"Km"),cn.forEach(S),nn.forEach(S),b=pe(Ct),w=ae(Ct,"DIV",{class:!0});var At=$e(w);E=ae(At,"DIV",{class:!0});var Tt=$e(E);L=ae(Tt,"P",{class:!0});var dn=$e(L);M=Ue(dn,"Features:"),q=Ue(dn,F),dn.forEach(S),Tt.forEach(S),G=pe(At),Q=ae(At,"DIV",{class:!0});var rt=$e(Q);mt&&mt.l(rt),ge=pe(rt),le=ae(rt,"DIV",{class:!0});var Kt=$e(le);j(re.$$.fragment,Kt),me=pe(Kt),se=ae(Kt,"P",{class:!0});var en=$e(se);Y=Ue(en,Z),en.forEach(S),Kt.forEach(S),ie=pe(rt),be=ae(rt,"DIV",{class:!0});var Ot=$e(be);j(fe.$$.fragment,Ot),ke=pe(Ot),je=ae(Ot,"P",{class:!0});var Et=$e(je);Qe=Ue(Et,Se),Et.forEach(S),Ot.forEach(S),rt.forEach(S),At.forEach(S),Ct.forEach(S),Xe=pe(Dt),this.h()},h(){te(o,"class","text-sm text-muted-foreground"),te(n,"class","flex justify-between gap-4"),te(L,"class","text-xs text-muted-foreground"),te(E,"class","flex"),te(se,"class","text-muted-foreground"),te(le,"class","flex gap-2"),te(je,"class","text-muted-foreground"),te(be,"class","flex gap-2"),te(Q,"class","flex gap-4"),te(w,"class","flex justify-between gap-2"),te(e,"class","flex flex-col w-full gap-2")},m(Dt,Ct){R(Dt,e,Ct),ce(e,n),ce(n,t),ce(t,s),ce(n,a),ce(n,o),ce(o,d),ce(o,_),ce(e,b),ce(e,w),ce(w,E),ce(E,L),ce(L,M),ce(L,q),ce(w,G),ce(w,Q),mt&&mt.m(Q,null),ce(Q,ge),ce(Q,le),V(re,le,null),ce(le,me),ce(le,se),ce(se,Y),ce(Q,ie),ce(Q,be),V(fe,be,null),ce(be,ke),ce(be,je),ce(je,Qe),R(Dt,Xe,Ct),at=!0},p(Dt,Ct){(!at||Ct&8)&&r!==(r=Dt[22].name+"")&&Ft(s,r),(!at||Ct&9)&&l!==(l=Math.round(Dt[8](Dt[22].lngLat,Dt[0].getCenter())/100)/10+"")&&Ft(d,l),(!at||Ct&8)&&F!==(F=Dt[22].features.join(", ")+"")&&Ft(q,F),Dt[22].isFavourite?mt?Ct&8&&T(mt,1):(mt=n1(),mt.c(),T(mt,1),mt.m(Q,ge)):mt&&(ht(),I(mt,1,1,()=>{mt=null}),dt()),(!at||Ct&8)&&Z!==(Z=Dt[22].likes+"")&&Ft(Y,Z),(!at||Ct&8)&&Se!==(Se=Dt[22].comments.length+"")&&Ft(Qe,Se)},i(Dt){at||(T(mt),T(re.$$.fragment,Dt),T(fe.$$.fragment,Dt),at=!0)},o(Dt){I(mt),I(re.$$.fragment,Dt),I(fe.$$.fragment,Dt),at=!1},d(Dt){Dt&&(S(e),S(Xe)),mt&&mt.d(),U(re),U(fe)}}}function r1(i,e){let n,t,r;return t=new Rl({props:{value:e[22].id.toString(),onSelect:e[7],class:"cursor-pointer",$$slots:{default:[dD]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&8&&(o.value=e[22].id.toString()),a&536870921&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function pD(i){let e=[],n=new Map,t,r,s=Qt(i[3]);const a=o=>o[22].id;for(let o=0;o<s.length;o+=1){let l=Qg(i,s,o),d=a(l);n.set(d,e[o]=r1(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&393&&(s=Qt(o[3]),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,r1,t,Qg),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function s1(i){let e,n=i[19].address.label+"",t;return{c(){e=oe("p"),t=Ve(n),this.h()},l(r){e=ae(r,"P",{class:!0});var s=$e(e);t=Ue(s,n),s.forEach(S),this.h()},h(){te(e,"class","text-xs text-muted-foreground")},m(r,s){R(r,e,s),ce(e,t)},p(r,s){s&16&&n!==(n=r[19].address.label+"")&&Ft(t,n)},d(r){r&&S(e)}}}function mD(i){let e,n,t,r=i[19].title+"",s,a,o,l=Math.round(i[8](i[19].position,i[0].getCenter())/100)/10+"",d,_,b,w,E=i[19].address.label!==i[19].title&&s1(i);return{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=Ve(r),a=de(),o=oe("p"),d=Ve(l),_=Ve("Km"),b=de(),E&&E.c(),w=de(),this.h()},l(L){e=ae(L,"DIV",{class:!0});var M=$e(e);n=ae(M,"DIV",{class:!0});var F=$e(n);t=ae(F,"P",{});var q=$e(t);s=Ue(q,r),q.forEach(S),a=pe(F),o=ae(F,"P",{class:!0});var G=$e(o);d=Ue(G,l),_=Ue(G,"Km"),G.forEach(S),F.forEach(S),b=pe(M),E&&E.l(M),M.forEach(S),w=pe(L),this.h()},h(){te(o,"class","text-sm text-muted-foreground"),te(n,"class","flex justify-between gap-4"),te(e,"class","flex flex-col w-full gap-0.5")},m(L,M){R(L,e,M),ce(e,n),ce(n,t),ce(t,s),ce(n,a),ce(n,o),ce(o,d),ce(o,_),ce(e,b),E&&E.m(e,null),R(L,w,M)},p(L,M){M&16&&r!==(r=L[19].title+"")&&Ft(s,r),M&17&&l!==(l=Math.round(L[8](L[19].position,L[0].getCenter())/100)/10+"")&&Ft(d,l),L[19].address.label!==L[19].title?E?E.p(L,M):(E=s1(L),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},d(L){L&&(S(e),S(w)),E&&E.d()}}}function i1(i,e){let n,t,r;return t=new Rl({props:{value:e[19].id,onSelect:e[6],class:"cursor-pointer",$$slots:{default:[mD]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.value=e[19].id),a&536870929&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function _D(i){let e=[],n=new Map,t,r,s=Qt(i[4]);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let l=Yg(i,s,o),d=a(l);n.set(d,e[o]=i1(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&337&&(s=Qt(o[4]),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,i1,t,Yg),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function o1(i){let e,n,t;return n=new Ml({props:{class:"h-3 w-3 text-primary"}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","flex gap-2")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function gD(i){let e,n,t,r=i[22].name+"",s,a,o,l=Math.round(i[8](i[22].lngLat,i[0].getCenter())/100)/10+"",d,_,b,w,E,L,M,F=i[22].features.join(", ")+"",q,G,Q,ge,le,re,me,se,Z=i[22].likes+"",Y,ie,be,fe,ke,je,Se=i[22].comments.length+"",Qe,Xe,at,mt=i[22].isFavourite&&o1();return re=new Md({props:{class:"h-3 w-3"}}),fe=new Iv({props:{class:"h-3 w-3"}}),{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=Ve(r),a=de(),o=oe("p"),d=Ve(l),_=Ve("Km"),b=de(),w=oe("div"),E=oe("div"),L=oe("p"),M=Ve("Features:"),q=Ve(F),G=de(),Q=oe("div"),mt&&mt.c(),ge=de(),le=oe("div"),N(re.$$.fragment),me=de(),se=oe("p"),Y=Ve(Z),ie=de(),be=oe("div"),N(fe.$$.fragment),ke=de(),je=oe("p"),Qe=Ve(Se),Xe=de(),this.h()},l(Dt){e=ae(Dt,"DIV",{class:!0});var Ct=$e(e);n=ae(Ct,"DIV",{class:!0});var nn=$e(n);t=ae(nn,"P",{});var yn=$e(t);s=Ue(yn,r),yn.forEach(S),a=pe(nn),o=ae(nn,"P",{class:!0});var cn=$e(o);d=Ue(cn,l),_=Ue(cn,"Km"),cn.forEach(S),nn.forEach(S),b=pe(Ct),w=ae(Ct,"DIV",{class:!0});var At=$e(w);E=ae(At,"DIV",{class:!0});var Tt=$e(E);L=ae(Tt,"P",{class:!0});var dn=$e(L);M=Ue(dn,"Features:"),q=Ue(dn,F),dn.forEach(S),Tt.forEach(S),G=pe(At),Q=ae(At,"DIV",{class:!0});var rt=$e(Q);mt&&mt.l(rt),ge=pe(rt),le=ae(rt,"DIV",{class:!0});var Kt=$e(le);j(re.$$.fragment,Kt),me=pe(Kt),se=ae(Kt,"P",{class:!0});var en=$e(se);Y=Ue(en,Z),en.forEach(S),Kt.forEach(S),ie=pe(rt),be=ae(rt,"DIV",{class:!0});var Ot=$e(be);j(fe.$$.fragment,Ot),ke=pe(Ot),je=ae(Ot,"P",{class:!0});var Et=$e(je);Qe=Ue(Et,Se),Et.forEach(S),Ot.forEach(S),rt.forEach(S),At.forEach(S),Ct.forEach(S),Xe=pe(Dt),this.h()},h(){te(o,"class","text-sm text-muted-foreground"),te(n,"class","flex justify-between gap-4"),te(L,"class","text-xs text-muted-foreground"),te(E,"class","flex"),te(se,"class","text-muted-foreground"),te(le,"class","flex gap-2"),te(je,"class","text-muted-foreground"),te(be,"class","flex gap-2"),te(Q,"class","flex gap-4"),te(w,"class","flex justify-between gap-2"),te(e,"class","flex flex-col w-full gap-2")},m(Dt,Ct){R(Dt,e,Ct),ce(e,n),ce(n,t),ce(t,s),ce(n,a),ce(n,o),ce(o,d),ce(o,_),ce(e,b),ce(e,w),ce(w,E),ce(E,L),ce(L,M),ce(L,q),ce(w,G),ce(w,Q),mt&&mt.m(Q,null),ce(Q,ge),ce(Q,le),V(re,le,null),ce(le,me),ce(le,se),ce(se,Y),ce(Q,ie),ce(Q,be),V(fe,be,null),ce(be,ke),ce(be,je),ce(je,Qe),R(Dt,Xe,Ct),at=!0},p(Dt,Ct){(!at||Ct&8)&&r!==(r=Dt[22].name+"")&&Ft(s,r),(!at||Ct&9)&&l!==(l=Math.round(Dt[8](Dt[22].lngLat,Dt[0].getCenter())/100)/10+"")&&Ft(d,l),(!at||Ct&8)&&F!==(F=Dt[22].features.join(", ")+"")&&Ft(q,F),Dt[22].isFavourite?mt?Ct&8&&T(mt,1):(mt=o1(),mt.c(),T(mt,1),mt.m(Q,ge)):mt&&(ht(),I(mt,1,1,()=>{mt=null}),dt()),(!at||Ct&8)&&Z!==(Z=Dt[22].likes+"")&&Ft(Y,Z),(!at||Ct&8)&&Se!==(Se=Dt[22].comments.length+"")&&Ft(Qe,Se)},i(Dt){at||(T(mt),T(re.$$.fragment,Dt),T(fe.$$.fragment,Dt),at=!0)},o(Dt){I(mt),I(re.$$.fragment,Dt),I(fe.$$.fragment,Dt),at=!1},d(Dt){Dt&&(S(e),S(Xe)),mt&&mt.d(),U(re),U(fe)}}}function a1(i,e){let n,t,r;return t=new Rl({props:{value:e[22].id.toString(),onSelect:e[7],class:"cursor-pointer",$$slots:{default:[gD]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&8&&(o.value=e[22].id.toString()),a&536870921&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function vD(i){let e=[],n=new Map,t,r,s=Qt(i[3]);const a=o=>o[22].id;for(let o=0;o<s.length;o+=1){let l=e1(i,s,o),d=a(l);n.set(d,e[o]=a1(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&393&&(s=Qt(o[3]),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,a1,t,e1),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function l1(i){let e,n=i[19].address.label+"",t;return{c(){e=oe("p"),t=Ve(n),this.h()},l(r){e=ae(r,"P",{class:!0});var s=$e(e);t=Ue(s,n),s.forEach(S),this.h()},h(){te(e,"class","text-xs text-muted-foreground")},m(r,s){R(r,e,s),ce(e,t)},p(r,s){s&16&&n!==(n=r[19].address.label+"")&&Ft(t,n)},d(r){r&&S(e)}}}function yD(i){let e,n,t,r=i[19].title+"",s,a,o,l=Math.round(i[8](i[19].position,i[0].getCenter())/100)/10+"",d,_,b,w,E=i[19].address.label!==i[19].title&&l1(i);return{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=Ve(r),a=de(),o=oe("p"),d=Ve(l),_=Ve("Km"),b=de(),E&&E.c(),w=de(),this.h()},l(L){e=ae(L,"DIV",{class:!0});var M=$e(e);n=ae(M,"DIV",{class:!0});var F=$e(n);t=ae(F,"P",{});var q=$e(t);s=Ue(q,r),q.forEach(S),a=pe(F),o=ae(F,"P",{class:!0});var G=$e(o);d=Ue(G,l),_=Ue(G,"Km"),G.forEach(S),F.forEach(S),b=pe(M),E&&E.l(M),M.forEach(S),w=pe(L),this.h()},h(){te(o,"class","text-sm text-muted-foreground"),te(n,"class","flex justify-between gap-4"),te(e,"class","flex flex-col w-full gap-0.5")},m(L,M){R(L,e,M),ce(e,n),ce(n,t),ce(t,s),ce(n,a),ce(n,o),ce(o,d),ce(o,_),ce(e,b),E&&E.m(e,null),R(L,w,M)},p(L,M){M&16&&r!==(r=L[19].title+"")&&Ft(s,r),M&17&&l!==(l=Math.round(L[8](L[19].position,L[0].getCenter())/100)/10+"")&&Ft(d,l),L[19].address.label!==L[19].title?E?E.p(L,M):(E=l1(L),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},d(L){L&&(S(e),S(w)),E&&E.d()}}}function c1(i,e){let n,t,r;return t=new Rl({props:{value:e[19].id,onSelect:e[6],class:"cursor-pointer",$$slots:{default:[yD]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.value=e[19].id),a&536870929&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function bD(i){let e=[],n=new Map,t,r,s=Qt(i[4]);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let l=t1(i,s,o),d=a(l);n.set(d,e[o]=c1(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&337&&(s=Qt(o[4]),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,c1,t,t1),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function $D(i){let e;return{c(){e=Ve("No results found.")},l(n){e=Ue(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function wD(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-11244tn"&&(e.innerHTML=n),this.h()},h(){te(e,"class","h-[300px] w-full flex items-center justify-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function xD(i){let e,n,t,r;const s=[hD,fD,uD,cD,lD],a=[];function o(l,d){return l[5]?0:l[4].length===0&&l[3].length===0?1:l[3].length===0?2:l[4].length===0?3:4}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function kD(i){let e,n,t,r,s;function a(l){i[12](l)}let o={placeholder:"Search by POI name or location"};return i[1]!==void 0&&(o.value=i[1]),e=new np({props:o}),jt.push(()=>kn(e,"value",a)),r=new dy({props:{class:"my-2",$$slots:{default:[xD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),t=de(),N(r.$$.fragment)},l(l){j(e.$$.fragment,l),t=pe(l),j(r.$$.fragment,l)},m(l,d){V(e,l,d),R(l,t,d),V(r,l,d),s=!0},p(l,d){const _={};!n&&d&2&&(n=!0,_.value=l[1],xn(()=>n=!1)),e.$set(_);const b={};d&536870969&&(b.$$scope={dirty:d,ctx:l}),r.$set(b)},i(l){s||(T(e.$$.fragment,l),T(r.$$.fragment,l),s=!0)},o(l){I(e.$$.fragment,l),I(r.$$.fragment,l),s=!1},d(l){l&&S(t),U(e,l),U(r,l)}}}function CD(i){let e,n,t,r,s;e=new Vn({props:{class:"text-secondary-foreground w-full sm:max-w-md bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[aD]},$$scope:{ctx:i}}}),e.$on("click",i[11]);function a(l){i[13](l)}let o={shouldFilter:!1,loop:!0,$$slots:{default:[kD]},$$scope:{ctx:i}};return i[2]!==void 0&&(o.open=i[2]),t=new hy({props:o}),jt.push(()=>kn(t,"open",a)),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(l){j(e.$$.fragment,l),n=pe(l),j(t.$$.fragment,l)},m(l,d){V(e,l,d),R(l,n,d),V(t,l,d),s=!0},p(l,[d]){const _={};d&536870912&&(_.$$scope={dirty:d,ctx:l}),e.$set(_);const b={};d&536870971&&(b.$$scope={dirty:d,ctx:l}),!r&&d&4&&(r=!0,b.open=l[2],xn(()=>r=!1)),t.$set(b)},i(l){s||(T(e.$$.fragment,l),T(t.$$.fragment,l),s=!0)},o(l){I(e.$$.fragment,l),I(t.$$.fragment,l),s=!1},d(l){l&&S(n),U(e,l),U(t,l)}}}const SD=30;function TD(i,e,n){let t,{map:r}=e;const s=El();let a=!1,o=!1,l,d=!1,_=mi.CancelToken.source(),b=mi.CancelToken.source(),w=[];const E=async()=>{n(9,a=!0),_&&_.cancel(),_=mi.CancelToken.source();const re=_.token,me=new URLSearchParams({name:l}),se=await mi.get(`/api/poi/search?${me.toString()}`,{cancelToken:re}).catch(Z=>Z);if(se!=null&&se.data){let Z=se.data;Z=Z.map(Y=>{const ie=$a.decode(Y);return yf(ie)?ie.right:{error:!0,message:"Invalid POI object received from API: "+ie.left}}),Z=Z.filter(Y=>"error"in Y&&Y.error?(console.error(Y.message),!1):!0),n(3,w=Z)}n(9,a=!1)};let L=[];const M=async()=>{var Y;n(10,o=!0),b&&b.cancel(),b=mi.CancelToken.source();const re=b.token,me=r.getCenter(),se=new URLSearchParams({q:l,at:`${me.lat},${me.lng}`,limit:SD.toString(),lang:"en",apiKey:fP}),Z=await mi.get(`https://autosuggest.search.hereapi.com/v1/autosuggest?${se.toString()}`,{cancelToken:re}).catch(ie=>ie);if((Y=Z==null?void 0:Z.data)!=null&&Y.items){const ie=Z.data.items;n(4,L=ie.filter(be=>{var fe;return be.id!==void 0&&be.title!==void 0&&((fe=be.address)==null?void 0:fe.label)!==void 0&&be.position!==void 0&&be.distance!==void 0}))}n(10,o=!1)},F=re=>{const me=L.find(({id:se})=>se===re);me&&r.flyTo({center:{lat:me.position.lat,lng:me.position.lng},zoom:Math.min(16,Math.max(14,r.getZoom())),padding:{top:300}}),n(2,d=!1)},q=re=>{const me=w.find(({id:se})=>se===parseInt(re));me&&(r.flyTo({center:me.lngLat,zoom:Math.min(16,Math.max(14,r.getZoom())),padding:{top:300}}),s("poiSelected",parseInt(re))),n(2,d=!1)},G=(re,me)=>{const Z=re.lat*Math.PI/180,Y=me.lat*Math.PI/180,ie=(me.lat-re.lat)*Math.PI/180,be=(me.lng-re.lng)*Math.PI/180,fe=Math.sin(ie/2)*Math.sin(ie/2)+Math.cos(Z)*Math.cos(Y)*Math.sin(be/2)*Math.sin(be/2);return 6371e3*(2*Math.atan2(Math.sqrt(fe),Math.sqrt(1-fe)))},Q=()=>n(2,d=!0);function ge(re){l=re,n(1,l)}function le(re){d=re,n(2,d)}return i.$$set=re=>{"map"in re&&n(0,r=re.map)},i.$$.update=()=>{i.$$.dirty&1536&&n(5,t=a||o),i.$$.dirty&2&&l!=null&&l.trim()&&(E(),M())},[r,l,d,w,L,t,F,q,G,a,o,Q,ge,le]}class ID extends it{constructor(e){super(),ot(this,e,TD,CD,nt,{map:0})}}function ED(i){let e,n;return e=new ID({props:{map:i[4]}}),e.$on("poiSelected",i[9]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.map=t[4]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function PD(i){let e,n="Search By POI Name Or Location";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1fty8wh"&&(e.textContent=n),this.h()},h(){te(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function AD(i){let e,n,t,r;return e=new No({props:{class:"w-full sm:max-w-md",$$slots:{default:[ED]},$$scope:{ctx:i}}}),t=new Vo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[PD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108880&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&67108864&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function MD(i){let e,n,t,r;function s(l){i[12](l)}function a(l){i[13](l)}let o={title:"POI Features",poiFeatureOptions:i[3]};return i[1]!==void 0&&(o.filterValues=i[1]),i[6]!==void 0&&(o.forceClosePopover=i[6]),e=new u5({props:o}),jt.push(()=>kn(e,"filterValues",s)),jt.push(()=>kn(e,"forceClosePopover",a)),{c(){N(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,d){V(e,l,d),r=!0},p(l,d){const _={};d&8&&(_.poiFeatureOptions=l[3]),!n&&d&2&&(n=!0,_.filterValues=l[1],xn(()=>n=!1)),!t&&d&64&&(t=!0,_.forceClosePopover=l[6],xn(()=>t=!1)),e.$set(_)},i(l){r||(T(e.$$.fragment,l),r=!0)},o(l){I(e.$$.fragment,l),r=!1},d(l){U(e,l)}}}function DD(i){let e,n="Filter By POI Features";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1oglnlj"&&(e.textContent=n),this.h()},h(){te(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function zD(i){let e,n,t,r;return e=new No({props:{$$slots:{default:[MD]},$$scope:{ctx:i}}}),t=new Vo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[DD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108938&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&67108864&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function u1(i){let e,n,t;function r(a){i[18](a)}let s={openDelay:0,closeDelay:0,onOutsideClick:i[17],$$slots:{default:[FD]},$$scope:{ctx:i}};return i[5][2]!==void 0&&(s.open=i[5][2]),e=new Oo({props:s}),jt.push(()=>kn(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o&192&&(l.onOutsideClick=a[17]),o&67108866&&(l.$$scope={dirty:o,ctx:a}),!n&&o&32&&(n=!0,l.open=a[5][2],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function LD(i){let e,n;return e=new Aw({}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function RD(i){let e,n;return e=new qd({props:{class:"bg-background",onPressedChange:i[16],$$slots:{default:[LD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.onPressedChange=t[16]),r&67108864&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function OD(i){let e,n="Clear POI Features Filter";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-r3d05h"&&(e.textContent=n),this.h()},h(){te(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function FD(i){let e,n,t,r;return e=new No({props:{$$slots:{default:[RD]},$$scope:{ctx:i}}}),t=new Vo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[OD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108866&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&67108864&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function BD(i){let e,n;return e=new Ml({}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function ND(i){let e,n,t;function r(a){i[19](a)}let s={"aria-label":"Show Favourites Only",class:"text-secondary-foreground hover:text-accent-foreground data-[state=off]:hover:bg-accent data-[state=off]:bg-background data-[state=on]:bg-primary data-[state=on]:hover:brightness-90 data-[state=on]:text-error-content",$$slots:{default:[BD]},$$scope:{ctx:i}};return i[2]!==void 0&&(s.pressed=i[2]),e=new qd({props:s}),jt.push(()=>kn(e,"pressed",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o&67108864&&(l.$$scope={dirty:o,ctx:a}),!n&&o&4&&(n=!0,l.pressed=a[2],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function VD(i){let e,n="Show Favourites Only";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-14grtso"&&(e.textContent=n),this.h()},h(){te(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function UD(i){let e,n,t,r;return e=new No({props:{$$slots:{default:[ND]},$$scope:{ctx:i}}}),t=new Vo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[VD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108868&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&67108864&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function jD(i){let e,n,t,r;function s(l){i[22](l)}function a(l){i[23](l)}let o={};return i[0]!==void 0&&(o.selectedMapLayer=i[0]),i[7]!==void 0&&(o.forceClosePopover=i[7]),e=new j5({props:o}),jt.push(()=>kn(e,"selectedMapLayer",s)),jt.push(()=>kn(e,"forceClosePopover",a)),{c(){N(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,d){V(e,l,d),r=!0},p(l,d){const _={};!n&&d&1&&(n=!0,_.selectedMapLayer=l[0],xn(()=>n=!1)),!t&&d&128&&(t=!0,_.forceClosePopover=l[7],xn(()=>t=!1)),e.$set(_)},i(l){r||(T(e.$$.fragment,l),r=!0)},o(l){I(e.$$.fragment,l),r=!1},d(l){U(e,l)}}}function qD(i){let e,n="Change Map Layer";return{c(){e=oe("div"),e.textContent=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1habla0"&&(e.textContent=n),this.h()},h(){te(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function GD(i){let e,n,t,r;return e=new No({props:{$$slots:{default:[jD]},$$scope:{ctx:i}}}),t=new Vo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[qD]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&67108993&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&67108864&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function HD(i){let e,n,t,r,s,a,o,l,d,_,b,w,E,L,M,F;function q(Y){i[11](Y)}let G={openDelay:0,closeDelay:0,onOutsideClick:i[10],$$slots:{default:[AD]},$$scope:{ctx:i}};i[5][0]!==void 0&&(G.open=i[5][0]),n=new Oo({props:G}),jt.push(()=>kn(n,"open",q));function Q(Y){i[15](Y)}let ge={openDelay:0,closeDelay:0,onOutsideClick:i[14],$$slots:{default:[zD]},$$scope:{ctx:i}};i[5][1]!==void 0&&(ge.open=i[5][1]),o=new Oo({props:ge}),jt.push(()=>kn(o,"open",Q));let le=i[1].length>0&&u1(i);function re(Y){i[21](Y)}let me={openDelay:0,closeDelay:0,onOutsideClick:i[20],$$slots:{default:[UD]},$$scope:{ctx:i}};i[5][3]!==void 0&&(me.open=i[5][3]),b=new Oo({props:me}),jt.push(()=>kn(b,"open",re));function se(Y){i[25](Y)}let Z={openDelay:0,closeDelay:0,onOutsideClick:i[24],$$slots:{default:[GD]},$$scope:{ctx:i}};return i[5][4]!==void 0&&(Z.open=i[5][4]),L=new Oo({props:Z}),jt.push(()=>kn(L,"open",se)),{c(){e=oe("div"),N(n.$$.fragment),r=de(),s=oe("div"),a=oe("div"),N(o.$$.fragment),d=de(),le&&le.c(),_=de(),N(b.$$.fragment),E=de(),N(L.$$.fragment),this.h()},l(Y){e=ae(Y,"DIV",{class:!0});var ie=$e(e);j(n.$$.fragment,ie),r=pe(ie),s=ae(ie,"DIV",{class:!0});var be=$e(s);a=ae(be,"DIV",{class:!0});var fe=$e(a);j(o.$$.fragment,fe),d=pe(fe),le&&le.l(fe),_=pe(fe),j(b.$$.fragment,fe),fe.forEach(S),E=pe(be),j(L.$$.fragment,be),be.forEach(S),ie.forEach(S),this.h()},h(){te(a,"class","flex gap-2"),te(s,"class","flex justify-between gap-2 grow max-sm:w-full max-sm:overflow-x-auto"),te(e,"class","flex gap-2 max-sm:flex-col w-full sm:overflow-x-auto")},m(Y,ie){R(Y,e,ie),V(n,e,null),ce(e,r),ce(e,s),ce(s,a),V(o,a,null),ce(a,d),le&&le.m(a,null),ce(a,_),V(b,a,null),ce(s,E),V(L,s,null),F=!0},p(Y,[ie]){const be={};ie&192&&(be.onOutsideClick=Y[10]),ie&67108880&&(be.$$scope={dirty:ie,ctx:Y}),!t&&ie&32&&(t=!0,be.open=Y[5][0],xn(()=>t=!1)),n.$set(be);const fe={};ie&128&&(fe.onOutsideClick=Y[14]),ie&67108938&&(fe.$$scope={dirty:ie,ctx:Y}),!l&&ie&32&&(l=!0,fe.open=Y[5][1],xn(()=>l=!1)),o.$set(fe),Y[1].length>0?le?(le.p(Y,ie),ie&2&&T(le,1)):(le=u1(Y),le.c(),T(le,1),le.m(a,_)):le&&(ht(),I(le,1,1,()=>{le=null}),dt());const ke={};ie&192&&(ke.onOutsideClick=Y[20]),ie&67108868&&(ke.$$scope={dirty:ie,ctx:Y}),!w&&ie&32&&(w=!0,ke.open=Y[5][3],xn(()=>w=!1)),b.$set(ke);const je={};ie&64&&(je.onOutsideClick=Y[24]),ie&67108993&&(je.$$scope={dirty:ie,ctx:Y}),!M&&ie&32&&(M=!0,je.open=Y[5][4],xn(()=>M=!1)),L.$set(je)},i(Y){F||(T(n.$$.fragment,Y),T(o.$$.fragment,Y),T(le),T(b.$$.fragment,Y),T(L.$$.fragment,Y),F=!0)},o(Y){I(n.$$.fragment,Y),I(o.$$.fragment,Y),I(le),I(b.$$.fragment,Y),I(L.$$.fragment,Y),F=!1},d(Y){Y&&S(e),U(n),U(o),le&&le.d(),U(b),U(L)}}}function ZD(i,e,n){let{selectedMapLayer:t}=e,{poiFeatureOptions:r}=e,{poiFeaturesFilter:s}=e,{onlyShowFavourites:a}=e,{map:o}=e,l=[!1,!1,!1,!1,!1],d,_;const b=()=>{n(5,l=new Array(l.length).fill(!1))};function w(fe){Wt.call(this,i,fe)}const E=fe=>{b(),d(),_(),fe.target.focus()};function L(fe){i.$$.not_equal(l[0],fe)&&(l[0]=fe,n(5,l))}function M(fe){s=fe,n(1,s)}function F(fe){d=fe,n(6,d)}const q=fe=>{b(),_(),fe.target.focus()};function G(fe){i.$$.not_equal(l[1],fe)&&(l[1]=fe,n(5,l))}const Q=fe=>{fe&&n(1,s=[])},ge=fe=>{b(),d(),_(),fe.target.focus()};function le(fe){i.$$.not_equal(l[2],fe)&&(l[2]=fe,n(5,l))}function re(fe){a=fe,n(2,a)}const me=fe=>{b(),d(),_(),fe.target.focus()};function se(fe){i.$$.not_equal(l[3],fe)&&(l[3]=fe,n(5,l))}function Z(fe){t=fe,n(0,t)}function Y(fe){_=fe,n(7,_)}const ie=fe=>{b(),d(),fe.target.focus()};function be(fe){i.$$.not_equal(l[4],fe)&&(l[4]=fe,n(5,l))}return i.$$set=fe=>{"selectedMapLayer"in fe&&n(0,t=fe.selectedMapLayer),"poiFeatureOptions"in fe&&n(3,r=fe.poiFeatureOptions),"poiFeaturesFilter"in fe&&n(1,s=fe.poiFeaturesFilter),"onlyShowFavourites"in fe&&n(2,a=fe.onlyShowFavourites),"map"in fe&&n(4,o=fe.map)},[t,s,a,r,o,l,d,_,b,w,E,L,M,F,q,G,Q,ge,le,re,me,se,Z,Y,ie,be]}class WD extends it{constructor(e){super(),ot(this,e,ZD,HD,nt,{selectedMapLayer:0,poiFeatureOptions:3,poiFeaturesFilter:1,onlyShowFavourites:2,map:4})}}function f1(i,e,n){const t=i.slice();return t[29]=e[n],t}function h1(i,e,n){const t=i.slice();return t[32]=e[n],t[34]=n,t}function d1(i){let e,n,t;function r(a){i[26](a)}let s={onValueChange:i[25],$$slots:{default:[n6]},$$scope:{ctx:i}};return i[10]!==void 0&&(s.value=i[10]),e=new Wv({props:s}),jt.push(()=>kn(e,"value",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){const l={};o[0]&2561&&(l.onValueChange=a[25]),o[0]&128|o[1]&16&&(l.$$scope={dirty:o,ctx:a}),!n&&o[0]&1024&&(n=!0,l.value=a[10],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function KD(i){let e,n=i[7].length>1?"s":"",t,r;return{c(){e=Ve("Check-in to nearby POI"),t=Ve(n),r=Ve(":")},l(s){e=Ue(s,"Check-in to nearby POI"),t=Ue(s,n),r=Ue(s,":")},m(s,a){R(s,e,a),R(s,t,a),R(s,r,a)},p(s,a){a[0]&128&&n!==(n=s[7].length>1?"s":"")&&Ft(t,n)},d(s){s&&(S(e),S(t),S(r))}}}function XD(i){let e,n=i[32]+"",t;return{c(){e=Ve(""),t=Ve(n)},l(r){e=Ue(r,""),t=Ue(r,n)},m(r,s){R(r,e,s),R(r,t,s)},p(r,s){s[0]&128&&n!==(n=r[32]+"")&&Ft(t,n)},d(r){r&&(S(e),S(t))}}}function JD(i){let e=i[32]+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&128&&e!==(e=t[32]+"")&&Ft(n,e)},d(t){t&&S(n)}}}function p1(i,e){let n,t;function r(o,l){return o[34]===0?JD:XD}let s=r(e),a=s(e);return{key:i,first:null,c(){n=Fe(),a.c(),t=Fe(),this.h()},l(o){n=Fe(),a.l(o),t=Fe(),this.h()},h(){this.first=n},m(o,l){R(o,n,l),a.m(o,l),R(o,t,l)},p(o,l){e=o,s===(s=r(e))&&a?a.p(e,l):(a.d(1),a=s(e),a&&(a.c(),a.m(t.parentNode,t)))},d(o){o&&(S(n),S(t)),a.d(o)}}}function YD(i){let e;return{c(){e=Ve("View")},l(n){e=Ue(n,"View")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function QD(i){let e;return{c(){e=Ve("Check-in")},l(n){e=Ue(n,"Check-in")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function m1(i,e){let n,t,r=[],s=new Map,a,o,l,d,_,b,w,E=Qt(e[29].name.split(" "));const L=q=>q[34];for(let q=0;q<E.length;q+=1){let G=h1(e,E,q),Q=L(G);s.set(Q,r[q]=p1(Q,G))}function M(){return e[23](e[29])}l=new Vn({props:{size:"sm",variant:"secondary",$$slots:{default:[YD]},$$scope:{ctx:e}}}),l.$on("click",M);function F(){return e[24](e[29])}return _=new Vn({props:{size:"sm",$$slots:{default:[QD]},$$scope:{ctx:e}}}),_.$on("click",F),{key:i,first:null,c(){n=oe("div"),t=oe("p");for(let q=0;q<r.length;q+=1)r[q].c();a=de(),o=oe("div"),N(l.$$.fragment),d=de(),N(_.$$.fragment),b=de(),this.h()},l(q){n=ae(q,"DIV",{class:!0});var G=$e(n);t=ae(G,"P",{class:!0});var Q=$e(t);for(let le=0;le<r.length;le+=1)r[le].l(Q);Q.forEach(S),a=pe(G),o=ae(G,"DIV",{class:!0});var ge=$e(o);j(l.$$.fragment,ge),d=pe(ge),j(_.$$.fragment,ge),ge.forEach(S),b=pe(G),G.forEach(S),this.h()},h(){te(t,"class","max-sm:text-ellipsis max-sm:max-w-48 max-sm:overflow-hidden"),te(o,"class","flex items-center gap-2"),te(n,"class","flex justify-between items-center gap-4 px-4 py-2"),this.first=n},m(q,G){R(q,n,G),ce(n,t);for(let Q=0;Q<r.length;Q+=1)r[Q]&&r[Q].m(t,null);ce(n,a),ce(n,o),V(l,o,null),ce(o,d),V(_,o,null),ce(n,b),w=!0},p(q,G){e=q,G[0]&128&&(E=Qt(e[29].name.split(" ")),r=zr(r,G,L,1,e,E,s,t,R$,p1,null,h1));const Q={};G[1]&16&&(Q.$$scope={dirty:G,ctx:e}),l.$set(Q);const ge={};G[1]&16&&(ge.$$scope={dirty:G,ctx:e}),_.$set(ge)},i(q){w||(T(l.$$.fragment,q),T(_.$$.fragment,q),w=!0)},o(q){I(l.$$.fragment,q),I(_.$$.fragment,q),w=!1},d(q){q&&S(n);for(let G=0;G<r.length;G+=1)r[G].d();U(l),U(_)}}}function e6(i){let e=[],n=new Map,t,r,s=Qt(i[7]);const a=o=>o[29].id;for(let o=0;o<s.length;o+=1){let l=f1(i,s,o),d=a(l);n.set(d,e[o]=m1(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l[0]&12416&&(s=Qt(o[7]),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,m1,t,f1),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function t6(i){let e,n,t,r;return e=new Zv({props:{class:"hover:no-underline hover:backdrop-opacity-75 active:backdrop-opacity-95 rounded-md h-10 px-4 py-2",$$slots:{default:[KD]},$$scope:{ctx:i}}}),t=new Gv({props:{class:"*:p-0 max-h-32 overflow-y-auto",$$slots:{default:[e6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[0]&128|a[1]&16&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a[0]&128|a[1]&16&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function n6(i){let e,n;return e=new Hv({props:{value:"check-in-prompt",class:"border-b-0",$$slots:{default:[t6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&128|r[1]&16&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function r6(i){let e,n,t,r,s,a,o,l,d;function _(M){i[19](M)}function b(M){i[20](M)}function w(M){i[21](M)}let E={poiFeatureOptions:i[5],map:i[6]};i[1]!==void 0&&(E.selectedMapLayer=i[1]),i[3]!==void 0&&(E.poiFeaturesFilter=i[3]),i[4]!==void 0&&(E.onlyShowFavourites=i[4]),n=new WD({props:E}),jt.push(()=>kn(n,"selectedMapLayer",_)),jt.push(()=>kn(n,"poiFeaturesFilter",b)),jt.push(()=>kn(n,"onlyShowFavourites",w)),n.$on("poiSelected",i[22]);let L=i[7].length>0&&d1(i);return{c(){e=oe("div"),N(n.$$.fragment),a=de(),L&&L.c(),this.h()},l(M){e=ae(M,"DIV",{class:!0});var F=$e(e);j(n.$$.fragment,F),a=pe(F),L&&L.l(F),F.forEach(S),this.h()},h(){te(e,"class","z-10 absolute w-full p-2 border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex flex-col gap-2 justify-between")},m(M,F){R(M,e,F),V(n,e,null),ce(e,a),L&&L.m(e,null),i[27](e),o=!0,l||(d=bt(window,"resize",i[18]),l=!0)},p(M,F){const q={};F[0]&32&&(q.poiFeatureOptions=M[5]),F[0]&64&&(q.map=M[6]),!t&&F[0]&2&&(t=!0,q.selectedMapLayer=M[1],xn(()=>t=!1)),!r&&F[0]&8&&(r=!0,q.poiFeaturesFilter=M[3],xn(()=>r=!1)),!s&&F[0]&16&&(s=!0,q.onlyShowFavourites=M[4],xn(()=>s=!1)),n.$set(q),M[7].length>0?L?(L.p(M,F),F[0]&128&&T(L,1)):(L=d1(M),L.c(),T(L,1),L.m(e,null)):L&&(ht(),I(L,1,1,()=>{L=null}),dt())},i(M){o||(T(n.$$.fragment,M),T(L),o=!0)},o(M){I(n.$$.fragment,M),I(L),o=!1},d(M){M&&S(e),U(n),L&&L.d(),i[27](null),l=!1,d()}}}function s6(i,e,n){let{selectedMapLayer:t}=e,{searchBar:r}=e,{poiFeatureOptions:s}=e,{poiFeaturesFilter:a}=e,{onlyShowFavourites:o}=e,{map:l}=e,{checkInCandidates:d}=e,{updateSearchBarOffset:_}=e,{idOfSelectedPOI:b}=e,{userLocation:w}=e,{fetchCheckInCandidates:E}=e,{pointsOfInterest:L}=e,M="",F=null;const q=El(),G=Se=>{n(10,M="");const Qe=L.find(({id:Xe})=>Xe===Se);Qe&&l.flyTo({center:Qe.lngLat,zoom:Math.min(16,Math.max(14,l.getZoom())),padding:{top:300}}),q("poiSelected",Se)};let Q=!0,ge=0;const le=async Se=>{if(w===void 0)return;if((await fetch("/api/check-in",{method:"POST",body:JSON.stringify({poi_id:Se,latitude:w.lat,longitude:w.lat,accuracy_meters:w.accuracyMeters}),headers:{"Content-Type":"application/json"}})).ok||Gc.error("Failed to check-in at POI, contact admin for details."),E(),await(await fetch("/api/check-in/single?poi_id="+encodeURIComponent(Se))).json()){Gc.success("Successfully checked in at POI!"),Sv.checkForUpdates();const mt=L.find(({id:Dt})=>Se===Dt);mt!==void 0&&(mt.checkedIn=!0,n(14,L))}},re=async()=>{if(l==null||l.resize(),M!==""){const Se=M;n(10,M=""),await fw(250),_(),n(10,M=Se)}else _()};function me(Se){t=Se,n(1,t)}function se(Se){a=Se,n(3,a)}function Z(Se){o=Se,n(4,o)}function Y(Se){Wt.call(this,i,Se)}const ie=Se=>G(Se.id),be=Se=>le(Se.id),fe=Se=>{Se!==void 0&&Se!==""?(n(9,Q=!1),n(11,F=b),n(0,b=null)):F!==null&&(n(9,Q=!1),n(0,b=F))};function ke(Se){M=Se,n(10,M),n(7,d),n(0,b),n(9,Q)}function je(Se){jt[Se?"unshift":"push"](()=>{r=Se,n(2,r)})}return i.$$set=Se=>{"selectedMapLayer"in Se&&n(1,t=Se.selectedMapLayer),"searchBar"in Se&&n(2,r=Se.searchBar),"poiFeatureOptions"in Se&&n(5,s=Se.poiFeatureOptions),"poiFeaturesFilter"in Se&&n(3,a=Se.poiFeaturesFilter),"onlyShowFavourites"in Se&&n(4,o=Se.onlyShowFavourites),"map"in Se&&n(6,l=Se.map),"checkInCandidates"in Se&&n(7,d=Se.checkInCandidates),"updateSearchBarOffset"in Se&&n(8,_=Se.updateSearchBarOffset),"idOfSelectedPOI"in Se&&n(0,b=Se.idOfSelectedPOI),"userLocation"in Se&&n(15,w=Se.userLocation),"fetchCheckInCandidates"in Se&&n(16,E=Se.fetchCheckInCandidates),"pointsOfInterest"in Se&&n(14,L=Se.pointsOfInterest)},i.$$.update=()=>{i.$$.dirty[0]&128&&d.length===0&&n(10,M=""),i.$$.dirty[0]&513&&(b!==null?n(10,M=""):Q?n(11,F=null):n(9,Q=!0)),i.$$.dirty[0]&131456&&(async()=>(d.length>0&&ge===0||d.length===0&&ge>0)&&(n(17,ge=d.length),await _i(),_()))()},[b,t,r,a,o,s,l,d,_,Q,M,F,G,le,L,w,E,ge,re,me,se,Z,Y,ie,be,fe,ke,je]}class i6 extends it{constructor(e){super(),ot(this,e,s6,r6,nt,{selectedMapLayer:1,searchBar:2,poiFeatureOptions:5,poiFeaturesFilter:3,onlyShowFavourites:4,map:6,checkInCandidates:7,updateSearchBarOffset:8,idOfSelectedPOI:0,userLocation:15,fetchCheckInCandidates:16,pointsOfInterest:14},null,[-1,-1])}}const{Map:o6}=Td;function _d(i){const e=i.slice(),n=e[21](e[3]);return e[47]=n,e}function _1(i,e,n){const t=i.slice();return t[48]=e[n].lngLat,t[49]=e[n].name,t[50]=e[n].id,t[51]=e[n].isFavourite,t[52]=e[n].checkedIn,t}function a6(i){let e,n,t,r,s,a,o,l,d,_,b,w,E,L;function M(Z){i[24](Z)}let F={style:i[5].URI,class:"h-full w-full absolute",zoom:i[11]?6:1,center:[i[10].lon,i[10].lat],attributionControl:!1,$$slots:{default:[p6]},$$scope:{ctx:i}};i[6]!==void 0&&(F.map=i[6]),e=new rI({props:F}),jt.push(()=>kn(e,"map",M)),e.$on("moveend",i[19]),e.$on("zoomend",i[19]);function q(Z){i[25](Z)}function G(Z){i[26](Z)}function Q(Z){i[27](Z)}function ge(Z){i[28](Z)}function le(Z){i[29](Z)}function re(Z){i[30](Z)}let me={poiFeatureOptions:i[7],map:i[6],checkInCandidates:i[13],updateSearchBarOffset:i[17],userLocation:i[4],fetchCheckInCandidates:i[18]};i[8]!==void 0&&(me.searchBar=i[8]),i[5]!==void 0&&(me.selectedMapLayer=i[5]),i[0]!==void 0&&(me.poiFeaturesFilter=i[0]),i[1]!==void 0&&(me.onlyShowFavourites=i[1]),i[3]!==void 0&&(me.idOfSelectedPOI=i[3]),i[2]!==void 0&&(me.pointsOfInterest=i[2]),r=new i6({props:me}),jt.push(()=>kn(r,"searchBar",q)),jt.push(()=>kn(r,"selectedMapLayer",G)),jt.push(()=>kn(r,"poiFeaturesFilter",Q)),jt.push(()=>kn(r,"onlyShowFavourites",ge)),jt.push(()=>kn(r,"idOfSelectedPOI",le)),jt.push(()=>kn(r,"pointsOfInterest",re)),r.$on("poiSelected",i[31]);let se=i[3]!==null&&v1(_d(i));return E=new Sa({props:{open:i[15],onOpenChange:i[35],$$slots:{default:[b6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),t=de(),N(r.$$.fragment),b=de(),se&&se.c(),w=de(),N(E.$$.fragment)},l(Z){j(e.$$.fragment,Z),t=pe(Z),j(r.$$.fragment,Z),b=pe(Z),se&&se.l(Z),w=pe(Z),j(E.$$.fragment,Z)},m(Z,Y){V(e,Z,Y),R(Z,t,Y),V(r,Z,Y),R(Z,b,Y),se&&se.m(Z,Y),R(Z,w,Y),V(E,Z,Y),L=!0},p(Z,Y){const ie={};Y[0]&32&&(ie.style=Z[5].URI),Y[0]&2048&&(ie.zoom=Z[11]?6:1),Y[0]&1024&&(ie.center=[Z[10].lon,Z[10].lat]),Y[0]&65608|Y[1]&16777216&&(ie.$$scope={dirty:Y,ctx:Z}),!n&&Y[0]&64&&(n=!0,ie.map=Z[6],xn(()=>n=!1)),e.$set(ie);const be={};Y[0]&128&&(be.poiFeatureOptions=Z[7]),Y[0]&64&&(be.map=Z[6]),Y[0]&8192&&(be.checkInCandidates=Z[13]),Y[0]&16&&(be.userLocation=Z[4]),!s&&Y[0]&256&&(s=!0,be.searchBar=Z[8],xn(()=>s=!1)),!a&&Y[0]&32&&(a=!0,be.selectedMapLayer=Z[5],xn(()=>a=!1)),!o&&Y[0]&1&&(o=!0,be.poiFeaturesFilter=Z[0],xn(()=>o=!1)),!l&&Y[0]&2&&(l=!0,be.onlyShowFavourites=Z[1],xn(()=>l=!1)),!d&&Y[0]&8&&(d=!0,be.idOfSelectedPOI=Z[3],xn(()=>d=!1)),!_&&Y[0]&4&&(_=!0,be.pointsOfInterest=Z[2],xn(()=>_=!1)),r.$set(be),Z[3]!==null?se?(se.p(_d(Z),Y),Y[0]&8&&T(se,1)):(se=v1(_d(Z)),se.c(),T(se,1),se.m(w.parentNode,w)):se&&(ht(),I(se,1,1,()=>{se=null}),dt());const fe={};Y[0]&32768&&(fe.open=Z[15]),Y[0]&32768&&(fe.onOpenChange=Z[35]),Y[0]&32768|Y[1]&16777216&&(fe.$$scope={dirty:Y,ctx:Z}),E.$set(fe)},i(Z){L||(T(e.$$.fragment,Z),T(r.$$.fragment,Z),T(se),T(E.$$.fragment,Z),L=!0)},o(Z){I(e.$$.fragment,Z),I(r.$$.fragment,Z),I(se),I(E.$$.fragment,Z),L=!1},d(Z){Z&&(S(t),S(b),S(w)),U(e,Z),U(r,Z),se&&se.d(Z),U(E,Z)}}}function l6(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-ava9pj"&&(e.innerHTML=n),this.h()},h(){te(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function c6(i){let e,n,t;return n=new L2({props:{class:"h-5 w-5"}}),{c(){e=oe("span"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","text-xl")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function u6(i){let e,n,t;return n=new Ml({props:{class:"h-5 w-5"}}),{c(){e=oe("span"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","text-xl")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function f6(i){let e,n,t;return n=new Vf({props:{class:"h-5 w-5"}}),{c(){e=oe("span"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","text-xl")},m(r,s){R(r,e,s),V(n,e,null),t=!0},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function h6(i){let e,n=i[49]+"",t;return{c(){e=oe("div"),t=Ve(n),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=$e(e);t=Ue(s,n),s.forEach(S),this.h()},h(){te(e,"class","text-lg font-bold text-black")},m(r,s){R(r,e,s),ce(e,t)},p(r,s){s[0]&65536&&n!==(n=r[49]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function d6(i){let e,n,t,r,s,a;const o=[f6,u6,c6],l=[];function d(_,b){return _[52]?0:_[51]?1:2}return e=d(i),n=l[e]=o[e](i),r=new fI({props:{openOn:"hover",offset:[0,-10],$$slots:{default:[h6]},$$scope:{ctx:i}}}),{c(){n.c(),t=de(),N(r.$$.fragment),s=de()},l(_){n.l(_),t=pe(_),j(r.$$.fragment,_),s=pe(_)},m(_,b){l[e].m(_,b),R(_,t,b),V(r,_,b),R(_,s,b),a=!0},p(_,b){let w=e;e=d(_),e!==w&&(ht(),I(l[w],1,1,()=>{l[w]=null}),dt(),n=l[e],n||(n=l[e]=o[e](_),n.c()),T(n,1),n.m(t.parentNode,t));const E={};b[0]&65536|b[1]&16777216&&(E.$$scope={dirty:b,ctx:_}),r.$set(E)},i(_){a||(T(n),T(r.$$.fragment,_),a=!0)},o(_){I(n),I(r.$$.fragment,_),a=!1},d(_){_&&(S(t),S(s)),l[e].d(_),U(r,_)}}}function g1(i,e){let n,t,r;function s(){return e[23](e[50],e[48])}return t=new aI({props:{lngLat:e[48],class:"z-10 grid h-8 w-8 place-items-center rounded-full border border-zinc-600 text-black shadow-2xl focus:outline-2 focus:outline-black"+(e[3]===e[50]?" border-4 box-content":"")+(e[52]?" bg-cyan-300":e[51]?" bg-green-300":" bg-red-300"),$$slots:{default:[d6]},$$scope:{ctx:e}}}),t.$on("click",s),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(a){n=Fe(),j(t.$$.fragment,a),this.h()},h(){this.first=n},m(a,o){R(a,n,o),V(t,a,o),r=!0},p(a,o){e=a;const l={};o[0]&65536&&(l.lngLat=e[48]),o[0]&65544&&(l.class="z-10 grid h-8 w-8 place-items-center rounded-full border border-zinc-600 text-black shadow-2xl focus:outline-2 focus:outline-black"+(e[3]===e[50]?" border-4 box-content":"")+(e[52]?" bg-cyan-300":e[51]?" bg-green-300":" bg-red-300")),o[0]&65536|o[1]&16777216&&(l.$$scope={dirty:o,ctx:e}),t.$set(l)},i(a){r||(T(t.$$.fragment,a),r=!0)},o(a){I(t.$$.fragment,a),r=!1},d(a){a&&S(n),U(t,a)}}}function p6(i){let e=[],n=new o6,t,r,s=Qt(i[16]);const a=o=>o[50];for(let o=0;o<s.length;o+=1){let l=_1(i,s,o),d=a(l);n.set(d,e[o]=g1(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l[0]&4259912&&(s=Qt(o[16]),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,g1,t,_1),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function v1(i){let e,n,t,r;return n=new iP({props:{closePOICard:i[32],poi:i[47],userNickname:i[14],refreshPOIs:i[33]}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(s){e=ae(s,"DIV",{class:!0,style:!0});var a=$e(e);j(n.$$.fragment,a),a.forEach(S),this.h()},h(){te(e,"class","absolute w-full max-w-md md:max-w-xl top-2 right-2"),te(e,"style",t=`margin-top: ${i[9]}px;`)},m(s,a){R(s,e,a),V(n,e,null),r=!0},p(s,a){const o={};a[0]&8&&(o.closePOICard=s[32]),a[0]&8&&(o.poi=s[47]),a[0]&16384&&(o.userNickname=s[14]),a[0]&4&&(o.refreshPOIs=s[33]),n.$set(o),(!r||a[0]&512&&t!==(t=`margin-top: ${s[9]}px;`))&&te(e,"style",t)},i(s){r||(T(n.$$.fragment,s),r=!0)},o(s){I(n.$$.fragment,s),r=!1},d(s){s&&S(e),U(n)}}}function m6(i){let e;return{c(){e=Ve(`Please allow geolocation permissions and turn on location services for check-in
					functionality.`)},l(n){e=Ue(n,`Please allow geolocation permissions and turn on location services for check-in
					functionality.`)},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function _6(i){let e,n;return e=new cu({props:{$$slots:{default:[m6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&16777216&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function g6(i){let e;return{c(){e=Ve("Close")},l(n){e=Ue(n,"Close")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function v6(i){let e,n;return e=new Vn({props:{$$slots:{default:[g6]},$$scope:{ctx:i}}}),e.$on("click",i[34]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&16777216&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function y6(i){let e,n,t,r;return e=new lu({props:{$$slots:{default:[_6]},$$scope:{ctx:i}}}),t=new b3({props:{$$slots:{default:[v6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a[1]&16777216&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a[0]&32768|a[1]&16777216&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function b6(i){let e,n;return e=new Ca({props:{$$slots:{default:[y6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&32768|r[1]&16777216&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function $6(i){let e,n,t,r;const s=[l6,a6],a=[];function o(l,d){return l[12]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}const $a=bf({id:Sl,isFavourite:jm,lngLat:bf({lng:Sl,lat:Sl}),name:kl,description:kl,features:id(kl),likes:Sl,comments:id(bf({text:kl,nickname:kl})),pictures:id(kl),checkedIn:jm});function w6(i,e,n){let t,r;sn(i,Tv,Et=>n(44,r=Et));const s=r.url.searchParams.get("focus-poi");let a=ba.find(({value:Et})=>Et==="outdoor");er(()=>{const Et=localStorage.getItem("preferredMapLayer");Et&&ba.map(({value:et})=>et).includes(Et)&&n(5,a=ba.find(({value:et})=>et===Et))});let o,l,d,_,b,w=[],E=!1,L,M=64,F=[],q=null,G={lon:0,lat:0},Q=!1,ge=!0,le,re=[],me=mi.CancelToken.source();const se=()=>{L&&n(9,M=L.offsetHeight)},Z=async()=>{me&&me.cancel(),me=mi.CancelToken.source();const Et=me.token,et=new URLSearchParams({latitude:le.lat.toString(),longitude:le.lng.toString(),accuracy_meters:le.accuracyMeters.toString()}),bn=await mi.get(`/api/check-in/candidates?${et.toString()}`,{cancelToken:Et}).catch(fn=>fn);if(bn!=null&&bn.data){let fn=bn.data;fn=fn.map(He=>{const Un=$a.decode(He);return yf(Un)?Un.right:{error:!0,message:"Invalid POI object received from API: "+Un.left}}),fn=fn.filter(He=>"error"in He&&He.error?(console.error(He.message),!1):!0),n(13,re=fn)}};let Y=null;const ie=Et=>JSON.stringify(Et,Object.keys(Et).sort());let be=mi.CancelToken.source();const fe=async()=>{const Et=o.getBounds(),et=Et._ne.lat,bn=Et._sw.lat,fn=Et._ne.lng,He=Et._sw.lng,Un={north:et>90?"90":et.toString(),south:bn<-90?"-90":bn.toString(),east:fn>180?"180":fn.toString(),west:He<-180?"-180":He.toString()};if(Y!==null&&ie(Y)===ie(Un))return;be&&be.cancel(),be=mi.CancelToken.source();const br=be.token;Y=Un;const wn=new URLSearchParams(Un),Gn=await mi.get(`/api/poi?${wn.toString()}`,{cancelToken:br}).catch(gs=>gs);Gn.status===200&&Gn.data&&Gn.data.forEach(Ds=>{const vs=$a.decode(Ds);if(yf(vs)){const ys=vs.right;F.some(bs=>bs.id===ys.id)||n(2,F=[...F,ys])}else console.error("Invalid POI object received from API: ",vs.left)})},ke=async Et=>{if(F.some(fn=>fn.id===Et)){n(3,q=Et);return}const et=new URLSearchParams({id:Et.toString()}),bn=await fetch(`/api/poi/get-by-id?${et.toString()}`);if(bn.ok){const fn=await bn.json(),He=$a.decode(fn);if(yf(He)){const Un=He.right;F.some(br=>br.id===Un.id)||(n(2,F=[...F,Un]),n(3,q=Un.id))}else console.error("Invalid POI object received from API: ",He.left)}},je=Et=>F.find(({id:et})=>Et===et);let Se,Qe=!1,Xe;Bo(()=>clearInterval(Xe));const at=Et=>fetch("/api/stats/app/register-new-poi-click?poi_id="+encodeURIComponent(Et),{method:"POST"});er(async()=>{const Et=async()=>{try{const fn=await fetch("/api/utils/geolocation");if(fn.ok){const He=await fn.json();!isNaN(parseFloat(He.lon))&&!isNaN(parseFloat(He.lat))&&(n(10,[G.lon,G.lat]=[parseFloat(He.lon),parseFloat(He.lat)],G),n(11,Q=!0))}else{const He=await fetch("https://api.ipify.org?format=json"),br=(await He.json()).ip;if(!He.ok)return;const wn=await fetch("/api/utils/geolocation-with-ip-param",{method:"POST",body:JSON.stringify({ip:br}),headers:{"Content-Type":"application/json"}});if(!wn.ok)return;const Gn=await wn.json();!isNaN(parseFloat(Gn.lon))&&!isNaN(parseFloat(Gn.lat))&&(n(10,[G.lon,G.lat]=[parseFloat(Gn.lon),parseFloat(Gn.lat)],G),n(11,Q=!0))}}catch(fn){console.error(fn)}},et=async()=>{try{const He=await(await fetch("/api/poi/features")).json();n(7,b=He.allPOIFeatures)}catch(fn){console.error(fn)}},bn=async()=>{const fn=await fetch("/api/settings/profile"),{nickname:He}=await fn.json();He===void 0&&typeof He!="string"||n(14,Se=He)};await Promise.allSettled([Et(),et(),bn()]),n(12,ge=!1),await _i(),l=new $f.NavigationControl({visualizePitch:!0,showZoom:!0,showCompass:!0}),o.addControl(l,"bottom-right"),l._container.parentElement.style.zIndex="10",d=new $f.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),o.addControl(d,"bottom-right"),d._container.parentElement.style.zIndex="10",_=new $f.ScaleControl({maxWidth:160,unit:"metric"}),o.addControl(_,"bottom-left"),_._container.parentElement.style.zIndex="10",o.on("load",async()=>{if(o.resize(),s){await ke(parseInt(s));const fn=F.find(({id:He})=>He===parseInt(s));if(fn){await new Promise(Un=>{d.on("trackuserlocationstart",()=>o.once("movestart",Un)),d.trigger()}),o.stop();const He=14;o.flyTo({center:fn.lngLat,zoom:He,padding:{top:300}}),n(3,q=parseInt(s))}else d.trigger()}else d.trigger()}),o.on("pitchend",fe),se(),d.on("error",()=>{n(15,Qe=!0),Xe=setInterval(()=>{"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(fn=>{fn.state==="granted"&&d.trigger()})},1e3)}),d.on("trackuserlocationend",fn=>fn.target._watchState==="OFF"&&d.trigger()),d.on("geolocate",fn=>{const He=fn.coords;n(4,le={lat:He.latitude,lng:He.longitude,accuracyMeters:He.accuracy})}),o.on("click",fn=>{fn.originalEvent.target.dataset.testid==="map-canvas"&&n(3,q=null)})});const mt=(Et,et)=>{n(3,q=Et),o.flyTo({center:et,padding:{top:300}}),at(Et)};function Dt(Et){o=Et,n(6,o)}function Ct(Et){L=Et,n(8,L)}function nn(Et){a=Et,n(5,a)}function yn(Et){w=Et,n(0,w)}function cn(Et){E=Et,n(1,E)}function At(Et){q=Et,n(3,q)}function Tt(Et){F=Et,n(2,F)}const dn=({detail:Et})=>ke(Et),rt=()=>n(3,q=null),Kt=()=>n(2,F=[...F]),en=()=>n(15,Qe=!1),Ot=Et=>{Et||n(15,Qe=!1)};return i.$$.update=()=>{i.$$.dirty[0]&15&&n(16,t=F.filter(({features:Et,isFavourite:et,id:bn})=>bn===q?!0:!(w.length>0&&!Et.some(fn=>w.includes(fn))||E&&!et))),i.$$.dirty[0]&16&&le!==void 0&&Z()},[w,E,F,q,le,a,o,b,L,M,G,Q,ge,re,Se,Qe,t,se,Z,fe,ke,je,at,mt,Dt,Ct,nn,yn,cn,At,Tt,dn,rt,Kt,en,Ot]}class x6 extends it{constructor(e){super(),ot(this,e,w6,$6,nt,{},null,[-1,-1])}}function k6(i){let e,n;return e=new x6({}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function C6(i,e,n){let{slug:t}=e;return i.$$set=r=>{"slug"in r&&n(0,t=r.slug)},[t]}class S6 extends it{constructor(e){super(),ot(this,e,C6,k6,nt,{slug:0})}}function T6(i){let e,n,t,r,s=[{class:n=qt("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i[1])},{readOnly:i[2]},i[3]],a={};for(let o=0;o<s.length;o+=1)a=Ce(a,s[o]);return{c(){e=oe("textarea"),this.h()},l(o){e=ae(o,"TEXTAREA",{class:!0}),$e(e).forEach(S),this.h()},h(){Vt(e,a)},m(o,l){R(o,e,l),e.autofocus&&e.focus(),ji(e,i[0]),t||(r=[bt(e,"input",i[16]),bt(e,"blur",i[4]),bt(e,"change",i[5]),bt(e,"click",i[6]),bt(e,"focus",i[7]),bt(e,"keydown",i[8]),bt(e,"keypress",i[9]),bt(e,"keyup",i[10]),bt(e,"mouseover",i[11]),bt(e,"mouseenter",i[12]),bt(e,"mouseleave",i[13]),bt(e,"paste",i[14]),bt(e,"input",i[15])],t=!0)},p(o,[l]){Vt(e,a=Pt(s,[l&2&&n!==(n=qt("flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o[1]))&&{class:n},l&4&&{readOnly:o[2]},l&8&&o[3]])),l&1&&ji(e,o[0])},i:gt,o:gt,d(o){o&&S(e),t=!1,kr(r)}}}function I6(i,e,n){const t=["class","value","readonly"];let r=lt(e,t),{class:s=void 0}=e,{value:a=void 0}=e,{readonly:o=void 0}=e;function l(le){Wt.call(this,i,le)}function d(le){Wt.call(this,i,le)}function _(le){Wt.call(this,i,le)}function b(le){Wt.call(this,i,le)}function w(le){Wt.call(this,i,le)}function E(le){Wt.call(this,i,le)}function L(le){Wt.call(this,i,le)}function M(le){Wt.call(this,i,le)}function F(le){Wt.call(this,i,le)}function q(le){Wt.call(this,i,le)}function G(le){Wt.call(this,i,le)}function Q(le){Wt.call(this,i,le)}function ge(){a=this.value,n(0,a)}return i.$$set=le=>{e=Ce(Ce({},e),Mt(le)),n(3,r=lt(e,t)),"class"in le&&n(1,s=le.class),"value"in le&&n(0,a=le.value),"readonly"in le&&n(2,o=le.readonly)},[a,s,o,r,l,d,_,b,w,E,L,M,F,q,G,Q,ge]}class cp extends it{constructor(e){super(),ot(this,e,I6,T6,nt,{class:1,value:0,readonly:2})}}function E6(i){let e,n,t,r,s=[{class:n=qt("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0  file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i[1])},i[2]],a={};for(let o=0;o<s.length;o+=1)a=Ce(a,s[o]);return{c(){e=oe("input"),this.h()},l(o){e=ae(o,"INPUT",{class:!0}),this.h()},h(){Vt(e,a)},m(o,l){R(o,e,l),e.autofocus&&e.focus(),ji(e,i[0]),t||(r=[bt(e,"input",i[17]),bt(e,"blur",i[3]),bt(e,"change",i[4]),bt(e,"click",i[5]),bt(e,"focus",i[6]),bt(e,"focusin",i[7]),bt(e,"focusout",i[8]),bt(e,"keydown",i[9]),bt(e,"keypress",i[10]),bt(e,"keyup",i[11]),bt(e,"mouseover",i[12]),bt(e,"mouseenter",i[13]),bt(e,"mouseleave",i[14]),bt(e,"paste",i[15]),bt(e,"input",i[16])],t=!0)},p(o,[l]){Vt(e,a=Pt(s,[l&2&&n!==(n=qt("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background file:border-0  file:bg-transparent file:text-foreground file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",o[1]))&&{class:n},l&4&&o[2]])),l&1&&e.value!==o[0]&&ji(e,o[0])},i:gt,o:gt,d(o){o&&S(e),t=!1,kr(r)}}}function P6(i,e,n){const t=["class","value"];let r=lt(e,t),{class:s=void 0}=e,{value:a=void 0}=e;function o(re){Wt.call(this,i,re)}function l(re){Wt.call(this,i,re)}function d(re){Wt.call(this,i,re)}function _(re){Wt.call(this,i,re)}function b(re){Wt.call(this,i,re)}function w(re){Wt.call(this,i,re)}function E(re){Wt.call(this,i,re)}function L(re){Wt.call(this,i,re)}function M(re){Wt.call(this,i,re)}function F(re){Wt.call(this,i,re)}function q(re){Wt.call(this,i,re)}function G(re){Wt.call(this,i,re)}function Q(re){Wt.call(this,i,re)}function ge(re){Wt.call(this,i,re)}function le(){a=this.value,n(0,a)}return i.$$set=re=>{e=Ce(Ce({},e),Mt(re)),n(2,r=lt(e,t)),"class"in re&&n(1,s=re.class),"value"in re&&n(0,a=re.value)},[a,s,r,o,l,d,_,b,w,E,L,M,F,q,G,Q,ge,le]}class Qc extends it{constructor(e){super(),ot(this,e,P6,E6,nt,{class:1,value:0})}}function y1(i,e,n){const t=i.slice();return t[24]=e[n],t[25]=e,t[26]=n,t}function b1(i,e,n){const t=i.slice();return t[27]=e[n],t}function A6(i){let e;return{c(){e=Ve("Post")},l(n){e=Ue(n,"Post")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function M6(i){let e=i[24].user.nickname+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r&8&&e!==(e=t[24].user.nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function $1(i){let e,n,t,r,s;function a(){return i[14](i[24])}n=new Vn({props:{class:"icon-button",$$slots:{default:[D6]},$$scope:{ctx:i}}}),n.$on("click",a);function o(){return i[15](i[24])}return r=new Vn({props:{class:"icon-button bg-red-400 hover:bg-red-500",$$slots:{default:[z6]},$$scope:{ctx:i}}}),r.$on("click",o),{c(){e=oe("div"),N(n.$$.fragment),t=de(),N(r.$$.fragment),this.h()},l(l){e=ae(l,"DIV",{class:!0});var d=$e(e);j(n.$$.fragment,d),t=pe(d),j(r.$$.fragment,d),d.forEach(S),this.h()},h(){te(e,"class","button-container svelte-1foeejj")},m(l,d){R(l,e,d),V(n,e,null),ce(e,t),V(r,e,null),s=!0},p(l,d){i=l;const _={};d&1073741824&&(_.$$scope={dirty:d,ctx:i}),n.$set(_);const b={};d&1073741824&&(b.$$scope={dirty:d,ctx:i}),r.$set(b)},i(l){s||(T(n.$$.fragment,l),T(r.$$.fragment,l),s=!0)},o(l){I(n.$$.fragment,l),I(r.$$.fragment,l),s=!1},d(l){l&&S(e),U(n),U(r)}}}function D6(i){let e,n;return e=new d2({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function z6(i){let e,n;return e=new Ev({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function L6(i){let e=new Date(i[24].created_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r&8&&e!==(e=new Date(t[24].created_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"")&&Ft(n,e)},d(t){t&&S(n)}}}function R6(i){let e=new Date(i[24].updated_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"",n,t,r,s="(edited)";return{c(){n=Ve(e),t=de(),r=oe("span"),r.textContent=s},l(a){n=Ue(a,e),t=pe(a),r=ae(a,"SPAN",{"data-svelte-h":!0}),an(r)!=="svelte-zxef7y"&&(r.textContent=s)},m(a,o){R(a,n,o),R(a,t,o),R(a,r,o)},p(a,o){o&8&&e!==(e=new Date(a[24].updated_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"")&&Ft(n,e)},d(a){a&&(S(n),S(t),S(r))}}}function O6(i){let e;function n(s,a){return s[24].updated_at!==s[24].created_at?R6:L6}let t=n(i),r=t(i);return{c(){r.c(),e=Fe()},l(s){r.l(s),e=Fe()},m(s,a){r.m(s,a),R(s,e,a)},p(s,a){t===(t=n(s))&&r?r.p(s,a):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},d(s){s&&S(e),r.d(s)}}}function F6(i){let e,n,t,r,s;e=new _s({props:{$$slots:{default:[M6]},$$scope:{ctx:i}}});let a=i[24].user.id===(i[5]&&i[5].id)&&$1(i);return r=new Zi({props:{$$slots:{default:[O6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),a&&a.c(),t=de(),N(r.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),a&&a.l(o),t=pe(o),j(r.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),a&&a.m(o,l),R(o,t,l),V(r,o,l),s=!0},p(o,l){const d={};l&1073741832&&(d.$$scope={dirty:l,ctx:o}),e.$set(d),o[24].user.id===(o[5]&&o[5].id)?a?(a.p(o,l),l&40&&T(a,1)):(a=$1(o),a.c(),T(a,1),a.m(t.parentNode,t)):a&&(ht(),I(a,1,1,()=>{a=null}),dt());const _={};l&1073741832&&(_.$$scope={dirty:l,ctx:o}),r.$set(_)},i(o){s||(T(e.$$.fragment,o),T(a),T(r.$$.fragment,o),s=!0)},o(o){I(e.$$.fragment,o),I(a),I(r.$$.fragment,o),s=!1},d(o){o&&(S(n),S(t)),U(e,o),a&&a.d(o),U(r,o)}}}function B6(i){let e,n,t=i[24].content+"",r,s,a,o,l;function d(){return i[19](i[24])}return o=new Vn({props:{$$slots:{default:[V6]},$$scope:{ctx:i}}}),o.$on("click",d),{c(){e=oe("div"),n=oe("p"),r=Ve(t),s=de(),a=oe("div"),N(o.$$.fragment),this.h()},l(_){e=ae(_,"DIV",{class:!0});var b=$e(e);n=ae(b,"P",{});var w=$e(n);r=Ue(w,t),w.forEach(S),s=pe(b),a=ae(b,"DIV",{class:!0});var E=$e(a);j(o.$$.fragment,E),E.forEach(S),b.forEach(S),this.h()},h(){te(a,"class","flex items-center"),te(e,"class","flex justify-between items-center")},m(_,b){R(_,e,b),ce(e,n),ce(n,r),ce(e,s),ce(e,a),V(o,a,null),l=!0},p(_,b){i=_,(!l||b&8)&&t!==(t=i[24].content+"")&&Ft(r,t);const w={};b&1073741832&&(w.$$scope={dirty:b,ctx:i}),o.$set(w)},i(_){l||(T(o.$$.fragment,_),l=!0)},o(_){I(o.$$.fragment,_),l=!1},d(_){_&&S(e),U(o)}}}function N6(i){let e,n,t,r,s,a,o,l;function d(E){i[16](E,i[24])}let _={class:"max-w-xs"};i[2][i[24].id]!==void 0&&(_.value=i[2][i[24].id]),n=new Qc({props:_}),jt.push(()=>kn(n,"value",d));function b(){return i[17](i[24])}s=new Vn({props:{$$slots:{default:[U6]},$$scope:{ctx:i}}}),s.$on("click",b);function w(){return i[18](i[24])}return o=new Vn({props:{class:"icon-button bg-red-400 hover:bg-red-500",$$slots:{default:[j6]},$$scope:{ctx:i}}}),o.$on("click",w),{c(){e=oe("form"),N(n.$$.fragment),r=de(),N(s.$$.fragment),a=de(),N(o.$$.fragment),this.h()},l(E){e=ae(E,"FORM",{class:!0});var L=$e(e);j(n.$$.fragment,L),r=pe(L),j(s.$$.fragment,L),a=pe(L),j(o.$$.fragment,L),L.forEach(S),this.h()},h(){te(e,"class","flex w-full max-w-sm items-center space-x-2")},m(E,L){R(E,e,L),V(n,e,null),ce(e,r),V(s,e,null),ce(e,a),V(o,e,null),l=!0},p(E,L){i=E;const M={};!t&&L&12&&(t=!0,M.value=i[2][i[24].id],xn(()=>t=!1)),n.$set(M);const F={};L&1073741824&&(F.$$scope={dirty:L,ctx:i}),s.$set(F);const q={};L&1073741824&&(q.$$scope={dirty:L,ctx:i}),o.$set(q)},i(E){l||(T(n.$$.fragment,E),T(s.$$.fragment,E),T(o.$$.fragment,E),l=!0)},o(E){I(n.$$.fragment,E),I(s.$$.fragment,E),I(o.$$.fragment,E),l=!1},d(E){E&&S(e),U(n),U(s),U(o)}}}function V6(i){let e,n,t,r=i[24].likes_count+"",s,a;return n=new Md({}),{c(){e=oe("div"),N(n.$$.fragment),t=oe("span"),s=Ve(r),this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);j(n.$$.fragment,l),t=ae(l,"SPAN",{});var d=$e(t);s=Ue(d,r),d.forEach(S),l.forEach(S),this.h()},h(){te(e,"class","flex space-x-1")},m(o,l){R(o,e,l),V(n,e,null),ce(e,t),ce(t,s),a=!0},p(o,l){(!a||l&8)&&r!==(r=o[24].likes_count+"")&&Ft(s,r)},i(o){a||(T(n.$$.fragment,o),a=!0)},o(o){I(n.$$.fragment,o),a=!1},d(o){o&&S(e),U(n)}}}function U6(i){let e,n;return e=new Vf({props:{class:"icon-button h-3 w-3"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function j6(i){let e,n;return e=new Sw({props:{class:"h-3 w-3"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function q6(i){let e=i[27].user.nickname+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r&8&&e!==(e=t[27].user.nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function G6(i){let e=new Date(i[27].created_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r&8&&e!==(e=new Date(t[27].created_at).toLocaleDateString("en-UK",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})+"")&&Ft(n,e)},d(t){t&&S(n)}}}function H6(i){let e,n,t,r;return e=new _s({props:{$$slots:{default:[q6]},$$scope:{ctx:i}}}),t=new Zi({props:{$$slots:{default:[G6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1073741832&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&1073741832&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function w1(i){let e,n,t;function r(){return i[20](i[24],i[27])}return n=new Vn({props:{class:"icon-button bg-red-400 hover:bg-red-500",$$slots:{default:[Z6]},$$scope:{ctx:i}}}),n.$on("click",r),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(s){e=ae(s,"DIV",{class:!0});var a=$e(e);j(n.$$.fragment,a),a.forEach(S),this.h()},h(){te(e,"class","flex justify-end mt-4")},m(s,a){R(s,e,a),V(n,e,null),t=!0},p(s,a){i=s;const o={};a&1073741824&&(o.$$scope={dirty:a,ctx:i}),n.$set(o)},i(s){t||(T(n.$$.fragment,s),t=!0)},o(s){I(n.$$.fragment,s),t=!1},d(s){s&&S(e),U(n)}}}function Z6(i){let e,n;return e=new Ev({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function W6(i){let e,n=i[27].content+"",t,r,s,a,o=i[27].user.id===(i[5]&&i[5].id)&&w1(i);return{c(){e=oe("p"),t=Ve(n),r=de(),o&&o.c(),s=Fe()},l(l){e=ae(l,"P",{});var d=$e(e);t=Ue(d,n),d.forEach(S),r=pe(l),o&&o.l(l),s=Fe()},m(l,d){R(l,e,d),ce(e,t),R(l,r,d),o&&o.m(l,d),R(l,s,d),a=!0},p(l,d){(!a||d&8)&&n!==(n=l[27].content+"")&&Ft(t,n),l[27].user.id===(l[5]&&l[5].id)?o?(o.p(l,d),d&40&&T(o,1)):(o=w1(l),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(ht(),I(o,1,1,()=>{o=null}),dt())},i(l){a||(T(o),a=!0)},o(l){I(o),a=!1},d(l){l&&(S(e),S(r),S(s)),o&&o.d(l)}}}function K6(i){let e,n,t,r;return e=new Kr({props:{$$slots:{default:[H6]},$$scope:{ctx:i}}}),t=new Lr({props:{$$slots:{default:[W6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1073741832&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&1073741864&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function x1(i,e){let n,t,r;return t=new nr({props:{class:"mt-4",$$slots:{default:[K6]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&1073741864&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function X6(i){let e,n,t,r=[],s=new Map,a,o,l,d,_,b,w,E,L,M,F;const q=[N6,B6],G=[];function Q(Z,Y){return Z[1][Z[24].id]?0:1}e=Q(i),n=G[e]=q[e](i);let ge=Qt(i[24].comments);const le=Z=>Z[27].id;for(let Z=0;Z<ge.length;Z+=1){let Y=b1(i,ge,Z),ie=le(Y);s.set(ie,r[Z]=x1(ie,Y))}function re(Z){i[21](Z,i[24])}let me={placeholder:"Write a comment...",class:"w-full mr-2"};i[4][i[24].id]!==void 0&&(me.value=i[4][i[24].id]),l=new Qc({props:me}),jt.push(()=>kn(l,"value",re));function se(){return i[22](i[24])}return{c(){n.c(),t=de();for(let Z=0;Z<r.length;Z+=1)r[Z].c();a=de(),o=oe("form"),N(l.$$.fragment),_=de(),b=oe("button"),w=Ve("Submit"),this.h()},l(Z){n.l(Z),t=pe(Z);for(let be=0;be<r.length;be+=1)r[be].l(Z);a=pe(Z),o=ae(Z,"FORM",{class:!0});var Y=$e(o);j(l.$$.fragment,Y),_=pe(Y),b=ae(Y,"BUTTON",{type:!0});var ie=$e(b);w=Ue(ie,"Submit"),ie.forEach(S),Y.forEach(S),this.h()},h(){te(b,"type","submit"),b.disabled=E=!i[4][i[24].id],te(o,"class","flex justify-between mt-4")},m(Z,Y){G[e].m(Z,Y),R(Z,t,Y);for(let ie=0;ie<r.length;ie+=1)r[ie]&&r[ie].m(Z,Y);R(Z,a,Y),R(Z,o,Y),V(l,o,null),ce(o,_),ce(o,b),ce(b,w),L=!0,M||(F=bt(o,"submit",A$(se)),M=!0)},p(Z,Y){i=Z;let ie=e;e=Q(i),e===ie?G[e].p(i,Y):(ht(),I(G[ie],1,1,()=>{G[ie]=null}),dt(),n=G[e],n?n.p(i,Y):(n=G[e]=q[e](i),n.c()),T(n,1),n.m(t.parentNode,t)),Y&2088&&(ge=Qt(i[24].comments),ht(),r=zr(r,Y,le,1,i,ge,s,a.parentNode,Wr,x1,a,b1),dt());const be={};!d&&Y&24&&(d=!0,be.value=i[4][i[24].id],xn(()=>d=!1)),l.$set(be),(!L||Y&24&&E!==(E=!i[4][i[24].id]))&&(b.disabled=E)},i(Z){if(!L){T(n);for(let Y=0;Y<ge.length;Y+=1)T(r[Y]);T(l.$$.fragment,Z),L=!0}},o(Z){I(n);for(let Y=0;Y<r.length;Y+=1)I(r[Y]);I(l.$$.fragment,Z),L=!1},d(Z){Z&&(S(t),S(a),S(o)),G[e].d(Z);for(let Y=0;Y<r.length;Y+=1)r[Y].d(Z);U(l),M=!1,F()}}}function J6(i){let e,n,t,r,s;return e=new Kr({props:{$$slots:{default:[F6]},$$scope:{ctx:i}}}),t=new Lr({props:{$$slots:{default:[X6]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de()},l(a){j(e.$$.fragment,a),n=pe(a),j(t.$$.fragment,a),r=pe(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const l={};o&1073741870&&(l.$$scope={dirty:o,ctx:a}),e.$set(l);const d={};o&1073741886&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),I(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function k1(i,e){let n,t,r;return t=new nr({props:{class:"card m-2",$$slots:{default:[J6]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&1073741886&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function Y6(i){let e,n,t,r,s,a=[],o=new Map,l,d;function _(L){i[12](L)}let b={class:"px-4 mb-2 focus-visible:mx-1 focus-visible:mt-1 focus-visible:w-[calc(100%-0.5rem)]",placeholder:"What's on your mind?"};i[0]!==void 0&&(b.value=i[0]),e=new cp({props:b}),jt.push(()=>kn(e,"value",_)),r=new Vn({props:{variant:"outline",$$slots:{default:[A6]},$$scope:{ctx:i}}}),r.$on("click",i[13]);let w=Qt(i[3]);const E=L=>L[24].id;for(let L=0;L<w.length;L+=1){let M=y1(i,w,L),F=E(M);o.set(F,a[L]=k1(F,M))}return{c(){N(e.$$.fragment),t=de(),N(r.$$.fragment),s=de();for(let L=0;L<a.length;L+=1)a[L].c();l=Fe()},l(L){j(e.$$.fragment,L),t=pe(L),j(r.$$.fragment,L),s=pe(L);for(let M=0;M<a.length;M+=1)a[M].l(L);l=Fe()},m(L,M){V(e,L,M),R(L,t,M),V(r,L,M),R(L,s,M);for(let F=0;F<a.length;F+=1)a[F]&&a[F].m(L,M);R(L,l,M),d=!0},p(L,[M]){const F={};!n&&M&1&&(n=!0,F.value=L[0],xn(()=>n=!1)),e.$set(F);const q={};M&1073741824&&(q.$$scope={dirty:M,ctx:L}),r.$set(q),M&4030&&(w=Qt(L[3]),ht(),a=zr(a,M,E,1,L,w,o,l.parentNode,Wr,k1,l,y1),dt())},i(L){if(!d){T(e.$$.fragment,L),T(r.$$.fragment,L);for(let M=0;M<w.length;M+=1)T(a[M]);d=!0}},o(L){I(e.$$.fragment,L),I(r.$$.fragment,L);for(let M=0;M<a.length;M+=1)I(a[M]);d=!1},d(L){L&&(S(t),S(s),S(l)),U(e,L),U(r,L);for(let M=0;M<a.length;M+=1)a[M].d(L)}}}function Q6(i,e,n){let t="",r={},s={},a=[],o={},l=null;er(async()=>{const ie=await fetch("/api/social/users/show",{});ie.ok&&n(5,l=await ie.json())});const d=async()=>{(await fetch("/api/social/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:t})})).ok?(n(0,t=""),await _()):console.error("Post creation failed")},_=async()=>{const ie=await fetch("/api/social/posts",{});ie.ok?n(3,a=await ie.json()):console.error("Failed to get posts")},b=async(ie,be)=>{(await fetch(`/api/social/posts/${ie}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:{content:be}})})).ok?(n(1,r[ie]=!1,r),await _()):console.error("Post editing failed")},w=async ie=>{(await fetch(`/api/social/posts/${ie}`,{method:"DELETE"})).ok?await _():console.error("Post deletion failed")},E=async ie=>{(await fetch(`/api/social/posts/${ie}/like`,{method:"POST"})).ok?await _():console.error("Post liking failed")};async function L(ie){(await fetch(`/api/social/posts/${ie}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:o[ie]})})).ok||console.error("Post comment failed"),_(),n(4,o[ie]="",o)}async function M(ie,be){(await fetch(`/api/social/posts/${ie}/comments/${be}`,{method:"DELETE"})).ok?await _():console.error("Comment deletion failed")}er(_);function F(ie){t=ie,n(0,t)}const q=()=>{t.trim()!==""?d():alert("You cannot make an empty post!")},G=ie=>{n(1,r[ie.id]=!0,r),n(2,s[ie.id]=ie.content,s)},Q=ie=>{confirm("Are you sure you want to delete this post?")&&w(ie.id)};function ge(ie,be){i.$$.not_equal(s[be.id],ie)&&(s[be.id]=ie,n(2,s))}const le=ie=>{s[ie.id].trim()!==""?b(ie.id,s[ie.id]):alert("Post content cannot be empty")},re=ie=>n(1,r[ie.id]=!1,r),me=ie=>{console.log(`liked: ${ie.id}`),E(ie.id)},se=(ie,be)=>{confirm("Are you sure you want to delete this comment?")&&(console.log(ie.id,be.id),M(ie.id,be.id))};function Z(ie,be){i.$$.not_equal(o[be.id],ie)&&(o[be.id]=ie,n(4,o))}return[t,r,s,a,o,l,d,b,w,E,L,M,F,q,G,Q,ge,le,re,me,se,Z,ie=>L(ie.id)]}class ez extends it{constructor(e){super(),ot(this,e,Q6,Y6,nt,{})}}function C1(i,e,n){const t=i.slice();return t[31]=e[n],t}function S1(i,e,n){const t=i.slice();return t[34]=e[n],t}function T1(i,e,n){const t=i.slice();return t[31]=e[n],t}function I1(i,e,n){const t=i.slice();return t[39]=e[n],t}function E1(i,e,n){const t=i.slice();return t[42]=e[n],t}function P1(i,e,n){const t=i.slice();return t[31]=e[n],t}function tz(i){let e,n,t,r,s="Search users...",a;return n=new Ad({}),{c(){e=oe("div"),N(n.$$.fragment),t=de(),r=oe("p"),r.textContent=s,this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);j(n.$$.fragment,l),t=pe(l),r=ae(l,"P",{class:!0,"data-svelte-h":!0}),an(r)!=="svelte-1nrh68l"&&(r.textContent=s),l.forEach(S),this.h()},h(){te(r,"class","text-sm"),te(e,"class","flex gap-2 items-center")},m(o,l){R(o,e,l),V(n,e,null),ce(e,t),ce(e,r),a=!0},p:gt,i(o){a||(T(n.$$.fragment,o),a=!0)},o(o){I(n.$$.fragment,o),a=!1},d(o){o&&S(e),U(n)}}}function nz(i){let e,n="User Search",t,r,s;return r=new Tl({props:{$$slots:{default:[az]},$$scope:{ctx:i}}}),{c(){e=oe("p"),e.textContent=n,t=de(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-2xvezt"&&(e.textContent=n),t=pe(a),j(r.$$.fragment,a),this.h()},h(){te(e,"class","px-4 py-2 font-medium leading-none")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p(a,o){const l={};o[0]&320|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),r.$set(l)},i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function rz(i){let e,n;return e=new tp({props:{class:"h-[300px] flex items-center justify-center",$$slots:{default:[lz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function sz(i){let e,n;return e=new py({props:{$$slots:{default:[cz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function iz(i){let e;return{c(){e=Ve("Add Friend")},l(n){e=Ue(n,"Add Friend")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function oz(i){let e,n,t,r=i[31].nickname+"",s,a,o,l,d;return o=new Vn({props:{$$slots:{default:[iz]},$$scope:{ctx:i}}}),{c(){e=oe("div"),n=oe("div"),t=oe("p"),s=Ve(r),a=de(),N(o.$$.fragment),l=de(),this.h()},l(_){e=ae(_,"DIV",{class:!0});var b=$e(e);n=ae(b,"DIV",{class:!0});var w=$e(n);t=ae(w,"P",{});var E=$e(t);s=Ue(E,r),E.forEach(S),a=pe(w),j(o.$$.fragment,w),w.forEach(S),b.forEach(S),l=pe(_),this.h()},h(){te(n,"class","flex justify-between gap-4"),te(e,"class","flex flex-col w-full gap-2")},m(_,b){R(_,e,b),ce(e,n),ce(n,t),ce(t,s),ce(n,a),V(o,n,null),R(_,l,b),d=!0},p(_,b){(!d||b[0]&256)&&r!==(r=_[31].nickname+"")&&Ft(s,r);const w={};b[1]&65536&&(w.$$scope={dirty:b,ctx:_}),o.$set(w)},i(_){d||(T(o.$$.fragment,_),d=!0)},o(_){I(o.$$.fragment,_),d=!1},d(_){_&&(S(e),S(l)),U(o)}}}function A1(i,e){let n,t,r;return t=new Rl({props:{value:e[31].id.toString(),onSelect:e[17],class:"cursor-pointer",$$slots:{default:[oz]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&256&&(o.value=e[31].id.toString()),a[0]&64&&(o.onSelect=e[17]),a[0]&256|a[1]&65536&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function az(i){let e=[],n=new Map,t,r,s=Qt(i[8]);const a=o=>o[31].id;for(let o=0;o<s.length;o+=1){let l=P1(i,s,o),d=a(l);n.set(d,e[o]=A1(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l[0]&832&&(s=Qt(o[8]),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,A1,t,P1),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function lz(i){let e;return{c(){e=Ve("No results found.")},l(n){e=Ue(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function cz(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-11244tn"&&(e.innerHTML=n),this.h()},h(){te(e,"class","h-[300px] w-full flex items-center justify-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function uz(i){let e,n,t,r;const s=[sz,rz,nz],a=[];function o(l,d){return l[7]?0:l[8].length===0?1:2}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function fz(i){let e,n,t,r,s;function a(l){i[16](l)}let o={placeholder:"Search by name"};return i[2]!==void 0&&(o.value=i[2]),e=new np({props:o}),jt.push(()=>kn(e,"value",a)),r=new dy({props:{class:"my-2",$$slots:{default:[uz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),t=de(),N(r.$$.fragment)},l(l){j(e.$$.fragment,l),t=pe(l),j(r.$$.fragment,l)},m(l,d){V(e,l,d),R(l,t,d),V(r,l,d),s=!0},p(l,d){const _={};!n&&d[0]&4&&(n=!0,_.value=l[2],xn(()=>n=!1)),e.$set(_);const b={};d[0]&448|d[1]&65536&&(b.$$scope={dirty:d,ctx:l}),r.$set(b)},i(l){s||(T(e.$$.fragment,l),T(r.$$.fragment,l),s=!0)},o(l){I(e.$$.fragment,l),I(r.$$.fragment,l),s=!1},d(l){l&&S(t),U(e,l),U(r,l)}}}function hz(i){let e,n,t=Qt(i[3]),r=[];for(let a=0;a<t.length;a+=1)r[a]=M1(E1(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){e=oe("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=$e(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(S),this.h()},h(){te(e,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(a,o){R(a,e,o);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);n=!0},p(a,o){if(o[0]&12296){t=Qt(a[3]);let l;for(l=0;l<t.length;l+=1){const d=E1(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=M1(d),r[l].c(),T(r[l],1),r[l].m(e,null))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function dz(i){let e,n="Add some friends to get started!";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-peihu4"&&(e.textContent=n),this.h()},h(){te(e,"class","mb-8")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function pz(i){let e=i[42].nickname+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&8&&e!==(e=t[42].nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function mz(i){let e,n;return e=new _s({props:{$$slots:{default:[pz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&8|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function _z(i){let e;return{c(){e=Ve("Delete")},l(n){e=Ue(n,"Delete")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function gz(i){let e;return{c(){e=Ve("Block")},l(n){e=Ue(n,"Block")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function vz(i){let e,n,t,r;function s(){return i[19](i[42])}e=new Vn({props:{class:"bg-red-500 text-white",$$slots:{default:[_z]},$$scope:{ctx:i}}}),e.$on("click",s);function a(){return i[20](i[42])}return t=new Vn({props:{class:"bg-yellow-500 text-white",$$slots:{default:[gz]},$$scope:{ctx:i}}}),t.$on("click",a),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),r=!0},p(o,l){i=o;const d={};l[1]&65536&&(d.$$scope={dirty:l,ctx:i}),e.$set(d);const _={};l[1]&65536&&(_.$$scope={dirty:l,ctx:i}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function yz(i){let e,n,t,r,s;return e=new Kr({props:{$$slots:{default:[mz]},$$scope:{ctx:i}}}),t=new Lr({props:{$$slots:{default:[vz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de()},l(a){j(e.$$.fragment,a),n=pe(a),j(t.$$.fragment,a),r=pe(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const l={};o[0]&8|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),e.$set(l);const d={};o[0]&8|o[1]&65536&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),I(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function M1(i){let e,n;return e=new nr({props:{class:"card",$$slots:{default:[yz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&8|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function D1(i){let e,n="Received Friend Requests",t,r,s,a=Qt(i[4]),o=[];for(let d=0;d<a.length;d+=1)o[d]=z1(I1(i,a,d));const l=d=>I(o[d],1,1,()=>{o[d]=null});return{c(){e=oe("h1"),e.textContent=n,t=de(),r=oe("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ae(d,"H1",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-15xbieh"&&(e.textContent=n),t=pe(d),r=ae(d,"DIV",{class:!0});var _=$e(r);for(let b=0;b<o.length;b+=1)o[b].l(_);_.forEach(S),this.h()},h(){te(e,"class","text-xl font-bold mb-4"),te(r,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(d,_){R(d,e,_),R(d,t,_),R(d,r,_);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);s=!0},p(d,_){if(_[0]&3088){a=Qt(d[4]);let b;for(b=0;b<a.length;b+=1){const w=I1(d,a,b);o[b]?(o[b].p(w,_),T(o[b],1)):(o[b]=z1(w),o[b].c(),T(o[b],1),o[b].m(r,null))}for(ht(),b=a.length;b<o.length;b+=1)l(b);dt()}},i(d){if(!s){for(let _=0;_<a.length;_+=1)T(o[_]);s=!0}},o(d){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)I(o[_]);s=!1},d(d){d&&(S(e),S(t),S(r)),ls(o,d)}}}function bz(i){let e=(i[39].user?i[39].user.nickname:"Unknown")+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&16&&e!==(e=(t[39].user?t[39].user.nickname:"Unknown")+"")&&Ft(n,e)},d(t){t&&S(n)}}}function $z(i){let e,n;return e=new _s({props:{$$slots:{default:[bz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&16|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wz(i){let e;return{c(){e=Ve("Accept")},l(n){e=Ue(n,"Accept")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function xz(i){let e;return{c(){e=Ve("Reject")},l(n){e=Ue(n,"Reject")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function kz(i){let e,n,t,r;function s(){return i[21](i[39])}e=new Vn({props:{$$slots:{default:[wz]},$$scope:{ctx:i}}}),e.$on("click",s);function a(){return i[22](i[39])}return t=new Vn({props:{class:"bg-red-500 text-white",$$slots:{default:[xz]},$$scope:{ctx:i}}}),t.$on("click",a),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),r=!0},p(o,l){i=o;const d={};l[1]&65536&&(d.$$scope={dirty:l,ctx:i}),e.$set(d);const _={};l[1]&65536&&(_.$$scope={dirty:l,ctx:i}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function Cz(i){let e,n,t,r,s;return e=new Kr({props:{$$slots:{default:[$z]},$$scope:{ctx:i}}}),t=new Lr({props:{$$slots:{default:[kz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de()},l(a){j(e.$$.fragment,a),n=pe(a),j(t.$$.fragment,a),r=pe(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const l={};o[0]&16|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),e.$set(l);const d={};o[0]&16|o[1]&65536&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),I(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function z1(i){let e,n;return e=new nr({props:{class:"card",$$slots:{default:[Cz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&16|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function L1(i){let e,n="People you might know",t,r,s,a=Qt(V1(i[0])),o=[];for(let d=0;d<a.length;d+=1)o[d]=R1(T1(i,a,d));const l=d=>I(o[d],1,1,()=>{o[d]=null});return{c(){e=oe("h1"),e.textContent=n,t=de(),r=oe("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ae(d,"H1",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-18yu156"&&(e.textContent=n),t=pe(d),r=ae(d,"DIV",{class:!0});var _=$e(r);for(let b=0;b<o.length;b+=1)o[b].l(_);_.forEach(S),this.h()},h(){te(e,"class","text-xl font-bold mb-4"),te(r,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(d,_){R(d,e,_),R(d,t,_),R(d,r,_);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);s=!0},p(d,_){if(_[0]&513){a=Qt(V1(d[0]));let b;for(b=0;b<a.length;b+=1){const w=T1(d,a,b);o[b]?(o[b].p(w,_),T(o[b],1)):(o[b]=R1(w),o[b].c(),T(o[b],1),o[b].m(r,null))}for(ht(),b=a.length;b<o.length;b+=1)l(b);dt()}},i(d){if(!s){for(let _=0;_<a.length;_+=1)T(o[_]);s=!0}},o(d){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)I(o[_]);s=!1},d(d){d&&(S(e),S(t),S(r)),ls(o,d)}}}function Sz(i){let e=i[31].nickname+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&1&&e!==(e=t[31].nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function Tz(i){let e,n;return e=new _s({props:{$$slots:{default:[Sz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Iz(i){let e;return{c(){e=Ve("Add Friend")},l(n){e=Ue(n,"Add Friend")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Ez(i){let e,n;function t(){return i[23](i[31])}return e=new Vn({props:{$$slots:{default:[Iz]},$$scope:{ctx:i}}}),e.$on("click",t),{c(){N(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,s){V(e,r,s),n=!0},p(r,s){i=r;const a={};s[1]&65536&&(a.$$scope={dirty:s,ctx:i}),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Pz(i){let e,n,t,r,s;return e=new Kr({props:{$$slots:{default:[Tz]},$$scope:{ctx:i}}}),t=new Lr({props:{$$slots:{default:[Ez]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de()},l(a){j(e.$$.fragment,a),n=pe(a),j(t.$$.fragment,a),r=pe(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const l={};o[0]&1|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),e.$set(l);const d={};o[0]&1|o[1]&65536&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),I(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function R1(i){let e,n;return e=new nr({props:{class:"card",$$slots:{default:[Pz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&1|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function O1(i){let e,n="Sent Friend Requests",t,r,s,a=Qt(i[5]),o=[];for(let d=0;d<a.length;d+=1)o[d]=F1(S1(i,a,d));const l=d=>I(o[d],1,1,()=>{o[d]=null});return{c(){e=oe("h1"),e.textContent=n,t=de(),r=oe("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ae(d,"H1",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1e8ve9q"&&(e.textContent=n),t=pe(d),r=ae(d,"DIV",{class:!0});var _=$e(r);for(let b=0;b<o.length;b+=1)o[b].l(_);_.forEach(S),this.h()},h(){te(e,"class","text-xl font-bold mb-4"),te(r,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(d,_){R(d,e,_),R(d,t,_),R(d,r,_);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);s=!0},p(d,_){if(_[0]&32){a=Qt(d[5]);let b;for(b=0;b<a.length;b+=1){const w=S1(d,a,b);o[b]?(o[b].p(w,_),T(o[b],1)):(o[b]=F1(w),o[b].c(),T(o[b],1),o[b].m(r,null))}for(ht(),b=a.length;b<o.length;b+=1)l(b);dt()}},i(d){if(!s){for(let _=0;_<a.length;_+=1)T(o[_]);s=!0}},o(d){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)I(o[_]);s=!1},d(d){d&&(S(e),S(t),S(r)),ls(o,d)}}}function Az(i){let e=(i[34].friend?i[34].friend.nickname:"Unknown")+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&32&&e!==(e=(t[34].friend?t[34].friend.nickname:"Unknown")+"")&&Ft(n,e)},d(t){t&&S(n)}}}function Mz(i){let e,n;return e=new _s({props:{$$slots:{default:[Az]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&32|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Dz(i){let e,n,t;return e=new Kr({props:{$$slots:{default:[Mz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de()},l(r){j(e.$$.fragment,r),n=pe(r)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p(r,s){const a={};s[0]&32|s[1]&65536&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function F1(i){let e,n;return e=new nr({props:{class:"card",$$slots:{default:[Dz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&32|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function B1(i){let e,n="Blocked",t,r,s,a=Qt(i[1]),o=[];for(let d=0;d<a.length;d+=1)o[d]=N1(C1(i,a,d));const l=d=>I(o[d],1,1,()=>{o[d]=null});return{c(){e=oe("h1"),e.textContent=n,t=de(),r=oe("div");for(let d=0;d<o.length;d+=1)o[d].c();this.h()},l(d){e=ae(d,"H1",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-i2gizo"&&(e.textContent=n),t=pe(d),r=ae(d,"DIV",{class:!0});var _=$e(r);for(let b=0;b<o.length;b+=1)o[b].l(_);_.forEach(S),this.h()},h(){te(e,"class","text-xl font-bold mb-4"),te(r,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8")},m(d,_){R(d,e,_),R(d,t,_),R(d,r,_);for(let b=0;b<o.length;b+=1)o[b]&&o[b].m(r,null);s=!0},p(d,_){if(_[0]&16386){a=Qt(d[1]);let b;for(b=0;b<a.length;b+=1){const w=C1(d,a,b);o[b]?(o[b].p(w,_),T(o[b],1)):(o[b]=N1(w),o[b].c(),T(o[b],1),o[b].m(r,null))}for(ht(),b=a.length;b<o.length;b+=1)l(b);dt()}},i(d){if(!s){for(let _=0;_<a.length;_+=1)T(o[_]);s=!0}},o(d){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)I(o[_]);s=!1},d(d){d&&(S(e),S(t),S(r)),ls(o,d)}}}function zz(i){let e=i[31].nickname+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r[0]&2&&e!==(e=t[31].nickname+"")&&Ft(n,e)},d(t){t&&S(n)}}}function Lz(i){let e,n;return e=new _s({props:{$$slots:{default:[zz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&2|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Rz(i){let e;return{c(){e=Ve("Unblock User")},l(n){e=Ue(n,"Unblock User")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Oz(i){let e,n;function t(){return i[24](i[31])}return e=new Vn({props:{$$slots:{default:[Rz]},$$scope:{ctx:i}}}),e.$on("click",t),{c(){N(e.$$.fragment)},l(r){j(e.$$.fragment,r)},m(r,s){V(e,r,s),n=!0},p(r,s){i=r;const a={};s[1]&65536&&(a.$$scope={dirty:s,ctx:i}),e.$set(a)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){U(e,r)}}}function Fz(i){let e,n,t,r,s;return e=new Kr({props:{$$slots:{default:[Lz]},$$scope:{ctx:i}}}),t=new Lr({props:{$$slots:{default:[Oz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de()},l(a){j(e.$$.fragment,a),n=pe(a),j(t.$$.fragment,a),r=pe(a)},m(a,o){V(e,a,o),R(a,n,o),V(t,a,o),R(a,r,o),s=!0},p(a,o){const l={};o[0]&2|o[1]&65536&&(l.$$scope={dirty:o,ctx:a}),e.$set(l);const d={};o[0]&2|o[1]&65536&&(d.$$scope={dirty:o,ctx:a}),t.$set(d)},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),I(t.$$.fragment,a),s=!1},d(a){a&&(S(n),S(r)),U(e,a),U(t,a)}}}function N1(i){let e,n;return e=new nr({props:{class:"card",$$slots:{default:[Fz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r[0]&2|r[1]&65536&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Bz(i){let e,n="Your Connections",t,r,s,a,o,l,d,_,b,w,E,L,M,F;r=new Vn({props:{class:"text-secondary-foreground w-full bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground mb-4",$$slots:{default:[tz]},$$scope:{ctx:i}}}),r.$on("click",i[15]);function q(Y){i[18](Y)}let G={shouldFilter:!1,loop:!0,$$slots:{default:[fz]},$$scope:{ctx:i}};i[6]!==void 0&&(G.open=i[6]),a=new hy({props:G}),jt.push(()=>kn(a,"open",q));const Q=[dz,hz],ge=[];function le(Y,ie){return Y[3].length===0?0:1}d=le(i),_=ge[d]=Q[d](i);let re=i[4].length!==0&&D1(i),me=i[0].length!==0&&L1(i),se=i[5].length!==0&&O1(i),Z=i[1].length!==0&&B1(i);return{c(){e=oe("h1"),e.textContent=n,t=de(),N(r.$$.fragment),s=de(),N(a.$$.fragment),l=de(),_.c(),b=de(),re&&re.c(),w=de(),me&&me.c(),E=de(),se&&se.c(),L=de(),Z&&Z.c(),M=Fe(),this.h()},l(Y){e=ae(Y,"H1",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1srrtp0"&&(e.textContent=n),t=pe(Y),j(r.$$.fragment,Y),s=pe(Y),j(a.$$.fragment,Y),l=pe(Y),_.l(Y),b=pe(Y),re&&re.l(Y),w=pe(Y),me&&me.l(Y),E=pe(Y),se&&se.l(Y),L=pe(Y),Z&&Z.l(Y),M=Fe(),this.h()},h(){te(e,"class","text-xl font-bold mb-4")},m(Y,ie){R(Y,e,ie),R(Y,t,ie),V(r,Y,ie),R(Y,s,ie),V(a,Y,ie),R(Y,l,ie),ge[d].m(Y,ie),R(Y,b,ie),re&&re.m(Y,ie),R(Y,w,ie),me&&me.m(Y,ie),R(Y,E,ie),se&&se.m(Y,ie),R(Y,L,ie),Z&&Z.m(Y,ie),R(Y,M,ie),F=!0},p(Y,ie){const be={};ie[1]&65536&&(be.$$scope={dirty:ie,ctx:Y}),r.$set(be);const fe={};ie[0]&452|ie[1]&65536&&(fe.$$scope={dirty:ie,ctx:Y}),!o&&ie[0]&64&&(o=!0,fe.open=Y[6],xn(()=>o=!1)),a.$set(fe);let ke=d;d=le(Y),d===ke?ge[d].p(Y,ie):(ht(),I(ge[ke],1,1,()=>{ge[ke]=null}),dt(),_=ge[d],_?_.p(Y,ie):(_=ge[d]=Q[d](Y),_.c()),T(_,1),_.m(b.parentNode,b)),Y[4].length!==0?re?(re.p(Y,ie),ie[0]&16&&T(re,1)):(re=D1(Y),re.c(),T(re,1),re.m(w.parentNode,w)):re&&(ht(),I(re,1,1,()=>{re=null}),dt()),Y[0].length!==0?me?(me.p(Y,ie),ie[0]&1&&T(me,1)):(me=L1(Y),me.c(),T(me,1),me.m(E.parentNode,E)):me&&(ht(),I(me,1,1,()=>{me=null}),dt()),Y[5].length!==0?se?(se.p(Y,ie),ie[0]&32&&T(se,1)):(se=O1(Y),se.c(),T(se,1),se.m(L.parentNode,L)):se&&(ht(),I(se,1,1,()=>{se=null}),dt()),Y[1].length!==0?Z?(Z.p(Y,ie),ie[0]&2&&T(Z,1)):(Z=B1(Y),Z.c(),T(Z,1),Z.m(M.parentNode,M)):Z&&(ht(),I(Z,1,1,()=>{Z=null}),dt())},i(Y){F||(T(r.$$.fragment,Y),T(a.$$.fragment,Y),T(_),T(re),T(me),T(se),T(Z),F=!0)},o(Y){I(r.$$.fragment,Y),I(a.$$.fragment,Y),I(_),I(re),I(me),I(se),I(Z),F=!1},d(Y){Y&&(S(e),S(t),S(s),S(l),S(b),S(w),S(E),S(L),S(M)),U(r,Y),U(a,Y),ge[d].d(Y),re&&re.d(Y),me&&me.d(Y),se&&se.d(Y),Z&&Z.d(Y)}}}function V1(i){return i.sort(()=>.5-Math.random()).slice(0,5)}function Nz(i,e,n){let t=null,r=[],s=[],a=[],o=[],l=[],d=!1,_=!1,b,w=[];const E=async()=>{const Xe=await fetch("/api/social/users",{method:"GET",headers:{"Content-Type":"application/json"}});if(!Xe.ok){const at=`[Connections.svelte] ERROR: ${Xe.status}`;throw new Error(at)}n(0,r=await Xe.json())},L=async()=>{const Xe=await fetch("/api/social/friends",{method:"GET",headers:{"Content-Type":"application/json"}});if(!Xe.ok){const Ct=`[Connections.svelte] ERROR: ${Xe.status}`;throw new Error(Ct)}n(3,s=await Xe.json());const at=await fetch("/api/social/blocks",{method:"GET",headers:{"Content-Type":"application/json"}});if(!at.ok){const Ct=`[Connections.svelte] ERROR: ${at.status}`;throw new Error(Ct)}const mt=await at.json(),Dt=s.filter(Ct=>!mt.includes(Ct.id));n(3,s=Dt)},M=async()=>{const Xe=await fetch("/api/social/friend_requests",{method:"GET",headers:{"Content-Type":"application/json"}});if(!Xe.ok){const mt=`[Connections.svelte] ERROR: ${Xe.status}`;throw new Error(mt)}const at=await Xe.json();n(4,a=at.incoming),n(5,o=at.outgoing)},F=async Xe=>{if(await M(),o.some(mt=>String(mt.friend_id)===String(Xe))){window.alert("Friend request already sent!");return}const at=await fetch("/api/social/friend_requests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:Xe})});if(!at.ok){const mt=`[Connections.svelte] ERROR: ${at.status}`;throw new Error(mt)}E(),L(),M()},q=async Xe=>{const at=await fetch(`/api/social/friend_requests/${Xe}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({friend_id:Xe})});if(!at.ok){const mt=`[Connections.svelte] ERROR: ${at.status}`;throw new Error(mt)}E(),L(),M()},G=async Xe=>{const at=await fetch(`/api/social/friend_requests/${Xe}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!at.ok){const mt=`[Connections.svelte] ERROR: ${at.status}`;throw new Error(mt)}E(),L(),M()},Q=async Xe=>{const at=await fetch(`/api/social/friends/${Xe}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Xe})});if(!at.ok){const mt=`[Connections.svelte] ERROR: ${at.status}`;throw new Error(mt)}E(),L(),M()},ge=async Xe=>{const at=await fetch(`/api/social/users/block/${Xe}`,{method:"POST",headers:{"Content-Type":"application/json"}});if(at.ok)Q(Xe);else{const mt=`[Connections.svelte] ERROR: ${at.status}`;throw new Error(mt)}G(Xe),E(),L(),re()},le=async Xe=>{const at=await fetch(`/api/social/users/unblock/${Xe}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!at.ok){const mt=`[Connections.svelte] ERROR: ${at.status}`;throw new Error(mt)}E(),L(),re()},re=async()=>{const Xe=await fetch("/api/social/blocks",{method:"GET",headers:{"Content-Type":"application/json"}});if(!Xe.ok){const at=`[Connections.svelte] ERROR: ${Xe.status}`;throw new Error(at)}n(1,l=await Xe.json()),E(),L(),M()},me=async()=>{n(7,_=!0);let at=await(await fetch(`/api/social/users/search-by-nickname?nickname=${encodeURIComponent(b)}`)).json();at=at.filter(mt=>mt.id!==(t==null?void 0:t.id)),n(8,w=at),n(7,_=!1)};er(E),er(L),er(M),er(re),er(async()=>{const Xe=await fetch("/api/social/users/show",{});Xe.ok&&(t=await Xe.json())});const se=()=>{n(2,b=""),n(6,d=!0)};function Z(Xe){b=Xe,n(2,b)}const Y=Xe=>{F(Xe),n(6,d=!1)};function ie(Xe){d=Xe,n(6,d)}const be=Xe=>{Q(Xe.id)},fe=Xe=>{ge(Xe.id)},ke=Xe=>{q(Xe.id)},je=Xe=>{G(Xe.id)},Se=Xe=>F(Xe.id),Qe=Xe=>le(Xe.id);return i.$$.update=()=>{i.$$.dirty[0]&4&&b!=null&&b.trim()&&me(),i.$$.dirty[0]&3&&n(0,r=r.filter(Xe=>Array.isArray(l)&&!l.some(at=>at.id===Xe.id)))},[r,l,b,s,a,o,d,_,w,F,q,G,Q,ge,le,se,Z,Y,ie,be,fe,ke,je,Se,Qe]}class Vz extends it{constructor(e){super(),ot(this,e,Nz,Bz,nt,{},null,[-1,-1])}}function Uz(i){let e;return{c(){e=Ve(i[2])},l(n){e=Ue(n,i[2])},m(n,t){R(n,e,t)},p(n,t){t&4&&Ft(e,n[2])},d(n){n&&S(e)}}}function jz(i){let e,n,t,r;return e=new _s({props:{tag:"h2",class:"mb-3",$$slots:{default:[Uz]},$$scope:{ctx:i}}}),t=new yi({}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1028&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function qz(i){let e,n,t;var r=i[1];function s(a,o){return{}}return r&&(e=Af(r,s())),{c(){e&&N(e.$$.fragment),n=Fe()},l(a){e&&j(e.$$.fragment,a),n=Fe()},m(a,o){e&&V(e,a,o),R(a,n,o),t=!0},p(a,o){if(o&2&&r!==(r=a[1])){if(e){ht();const l=e;I(l.$$.fragment,1,0,()=>{U(l,1)}),dt()}r?(e=Af(r,s()),N(e.$$.fragment),T(e.$$.fragment,1),V(e,n.parentNode,n)):e=null}},i(a){t||(e&&T(e.$$.fragment,a),t=!0)},o(a){e&&I(e.$$.fragment,a),t=!1},d(a){a&&S(n),e&&U(e,a)}}}function Gz(i){let e,n,t,r,s;return n=new Kr({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[jz]},$$scope:{ctx:i}}}),r=new Lr({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[6]}px);`,$$slots:{default:[qz]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=de(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=$e(e);j(n.$$.fragment,o),o.forEach(S),t=pe(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[8](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const l={};o&1028&&(l.$$scope={dirty:o,ctx:a}),n.$set(l);const d={};o&64&&(d.style=`height: calc(100% - ${a[6]}px);`),o&1026&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){I(n.$$.fragment,a),I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[8](null),U(r,a)}}}function Hz(i){let e,n,t,r,s,a,o,l,d,_,b,w,E="Feed",L,M,F,q,G,Q,ge="Connections",le,re,me,se;return document.title=e=i[2]+" - Social Network",s=new nr({props:{class:"relative p-4 h-full",$$slots:{default:[Gz]},$$scope:{ctx:i}}}),_=new l2({props:{class:"h-5 w-5"}}),q=new N2({props:{class:"h-5 w-5"}}),{c(){n=de(),t=oe("div"),r=oe("div"),N(s.$$.fragment),o=de(),l=oe("div"),d=oe("a"),N(_.$$.fragment),b=de(),w=oe("span"),w.textContent=E,M=de(),F=oe("a"),N(q.$$.fragment),G=de(),Q=oe("span"),Q.textContent=ge,this.h()},l(Z){q0("svelte-hbok3p",document.head).forEach(S),n=pe(Z),t=ae(Z,"DIV",{class:!0});var ie=$e(t);r=ae(ie,"DIV",{class:!0,style:!0});var be=$e(r);j(s.$$.fragment,be),be.forEach(S),o=pe(ie),l=ae(ie,"DIV",{class:!0});var fe=$e(l);d=ae(fe,"A",{class:!0,href:!0,"data-testid":!0});var ke=$e(d);j(_.$$.fragment,ke),b=pe(ke),w=ae(ke,"SPAN",{class:!0,"data-svelte-h":!0}),an(w)!=="svelte-oj2kup"&&(w.textContent=E),ke.forEach(S),M=pe(fe),F=ae(fe,"A",{class:!0,href:!0,"data-testid":!0});var je=$e(F);j(q.$$.fragment,je),G=pe(je),Q=ae(je,"SPAN",{class:!0,"data-svelte-h":!0}),an(Q)!=="svelte-s36po"&&(Q.textContent=ge),je.forEach(S),fe.forEach(S),ie.forEach(S),this.h()},h(){te(r,"class","flex flex-col p-4 relative"),te(r,"style",a=`height: calc(100% - ${i[4]}px);`),te(w,"class","btm-nav-label text-neutral-content font-medium"),te(d,"class",L="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(i[0]===Rn.SOCIAL_NETWORK_FEED?" bg-secondary/30":"")),te(d,"href",`/app/${Rn.SOCIAL_NETWORK_FEED}`),te(d,"data-testid","social-network-feed-button"),dr(d,"active",i[0]===Rn.SOCIAL_NETWORK_FEED),te(Q,"class","btm-nav-label text-neutral-content font-medium"),te(F,"class",le="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(i[0]===Rn.SOCIAL_NETWORK_CONNECTIONS?" bg-secondary/30":"")),te(F,"href",`/app/${Rn.SOCIAL_NETWORK_CONNECTIONS}`),te(F,"data-testid","social-network-connections-button"),dr(F,"active",i[0]===Rn.SOCIAL_NETWORK_CONNECTIONS),te(l,"class","btm-nav static max-sm:btm-nav-md"),te(t,"class","flex grow flex-col relative h-full")},m(Z,Y){R(Z,n,Y),R(Z,t,Y),ce(t,r),V(s,r,null),ce(t,o),ce(t,l),ce(l,d),V(_,d,null),ce(d,b),ce(d,w),ce(l,M),ce(l,F),V(q,F,null),ce(F,G),ce(F,Q),i[9](l),re=!0,me||(se=bt(window,"resize",i[7]),me=!0)},p(Z,[Y]){(!re||Y&4)&&e!==(e=Z[2]+" - Social Network")&&(document.title=e);const ie={};Y&1126&&(ie.$$scope={dirty:Y,ctx:Z}),s.$set(ie),(!re||Y&16&&a!==(a=`height: calc(100% - ${Z[4]}px);`))&&te(r,"style",a),(!re||Y&1&&L!==(L="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(Z[0]===Rn.SOCIAL_NETWORK_FEED?" bg-secondary/30":"")))&&te(d,"class",L),(!re||Y&1)&&dr(d,"active",Z[0]===Rn.SOCIAL_NETWORK_FEED),(!re||Y&1&&le!==(le="text-primary transition-colors hover:bg-secondary/70 focus:bg-secondary/90"+(Z[0]===Rn.SOCIAL_NETWORK_CONNECTIONS?" bg-secondary/30":"")))&&te(F,"class",le),(!re||Y&1)&&dr(F,"active",Z[0]===Rn.SOCIAL_NETWORK_CONNECTIONS)},i(Z){re||(T(s.$$.fragment,Z),T(_.$$.fragment,Z),T(q.$$.fragment,Z),re=!0)},o(Z){I(s.$$.fragment,Z),I(_.$$.fragment,Z),I(q.$$.fragment,Z),re=!1},d(Z){Z&&(S(n),S(t)),U(s),U(_),U(q),i[9](null),me=!1,se()}}}function Zz(i,e,n){let{slug:t}=e,r=null,s="",a,o=64,l,d=64;const _=()=>{let E=a.offsetHeight;E!==void 0&&n(4,o=E),E=l.offsetHeight,E!==void 0&&n(6,d=E)};er(_);function b(E){jt[E?"unshift":"push"](()=>{l=E,n(5,l)})}function w(E){jt[E?"unshift":"push"](()=>{a=E,n(3,a)})}return i.$$set=E=>{"slug"in E&&n(0,t=E.slug)},i.$$.update=()=>{if(i.$$.dirty&1)switch(t){case Rn.SOCIAL_NETWORK_FEED:n(1,r=ez),n(2,s="Feed");break;case Rn.SOCIAL_NETWORK_CONNECTIONS:n(1,r=Vz),n(2,s="Connections");break;default:ya("/app/"+Rn.SOCIAL_NETWORK_FEED);break}},[t,r,s,a,o,l,d,_,b,w]}class Wz extends it{constructor(e){super(),ot(this,e,Zz,Hz,nt,{slug:0})}}function Kz(i){let e,n;return{c(){e=Ve("Total Points: "),n=Ve(i[0])},l(t){e=Ue(t,"Total Points: "),n=Ue(t,i[0])},m(t,r){R(t,e,r),R(t,n,r)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&(S(e),S(n))}}}function Xz(i){let e,n;return e=new xa({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Jz(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){pr(e.src,n=Ms[i[1].badge])||te(e,"src",n),te(e,"class","h-14 w-14 -ml-0.5"),te(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=bt(e,"error",i[4]),t=!0)},p(s,a){a&2&&!pr(e.src,n=Ms[s[1].badge])&&te(e,"src",n)},i:gt,o:gt,d(s){s&&S(e),t=!1,r()}}}function Yz(i){let e,n,t,r,s,a,o=i[1].badge+"",l,d,_,b,w=i[1].previous_threshold+"",E,L,M,F,q,G=i[1].threshold+"",Q,ge;const le=[Jz,Xz],re=[];function me(se,Z){return se[2]?1:0}return t=me(i),r=re[t]=le[t](i),{c(){e=oe("div"),n=oe("div"),r.c(),s=de(),a=oe("p"),l=Ve(o),d=de(),_=oe("div"),b=oe("p"),E=Ve(w),L=de(),M=oe("progress"),F=de(),q=oe("p"),Q=Ve(G),this.h()},l(se){e=ae(se,"DIV",{class:!0});var Z=$e(e);n=ae(Z,"DIV",{class:!0});var Y=$e(n);r.l(Y),Y.forEach(S),s=pe(Z),a=ae(Z,"P",{class:!0});var ie=$e(a);l=Ue(ie,o),ie.forEach(S),d=pe(Z),_=ae(Z,"DIV",{class:!0});var be=$e(_);b=ae(be,"P",{class:!0});var fe=$e(b);E=Ue(fe,w),fe.forEach(S),L=pe(be),M=ae(be,"PROGRESS",{class:!0,max:!0}),$e(M).forEach(S),F=pe(be),q=ae(be,"P",{class:!0});var ke=$e(q);Q=Ue(ke,G),ke.forEach(S),be.forEach(S),Z.forEach(S),this.h()},h(){te(n,"class","shrink-0"),te(a,"class","text-sm font-medium leading-none"),te(b,"class","text-sm font-medium leading-none text-muted-foreground"),te(M,"class","progress progress-error grow"),M.value=i[3],te(M,"max","100"),te(q,"class","text-sm font-medium leading-none text-muted-foreground"),te(_,"class","flex self-stretch gap-2 items-center"),te(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(se,Z){R(se,e,Z),ce(e,n),re[t].m(n,null),ce(e,s),ce(e,a),ce(a,l),ce(e,d),ce(e,_),ce(_,b),ce(b,E),ce(_,L),ce(_,M),ce(_,F),ce(_,q),ce(q,Q),ge=!0},p(se,Z){let Y=t;t=me(se),t===Y?re[t].p(se,Z):(ht(),I(re[Y],1,1,()=>{re[Y]=null}),dt(),r=re[t],r?r.p(se,Z):(r=re[t]=le[t](se),r.c()),T(r,1),r.m(n,null)),(!ge||Z&2)&&o!==(o=se[1].badge+"")&&Ft(l,o),(!ge||Z&2)&&w!==(w=se[1].previous_threshold+"")&&Ft(E,w),(!ge||Z&8)&&(M.value=se[3]),(!ge||Z&2)&&G!==(G=se[1].threshold+"")&&Ft(Q,G)},i(se){ge||(T(r),ge=!0)},o(se){I(r),ge=!1},d(se){se&&S(e),re[t].d()}}}function Qz(i){let e,n,t,r;return e=new _s({props:{class:"text-xs",$$slots:{default:[Kz]},$$scope:{ctx:i}}}),t=new Zi({props:{$$slots:{default:[Yz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&270&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function eL(i){let e,n;return e=new Kr({props:{class:"p-2",$$slots:{default:[Qz]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function tL(i){let e,n;return e=new nr({props:{$$slots:{default:[eL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let U1=2e3;function nL(i,e,n){let{totalPoints:t}=e,{inProgressTotalPoints:r}=e,s=!1,a,o=0,l,d;er(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),d=Date.now(),l=setInterval(()=>{const w=Date.now()-d;if(w<U1){const E=w/U1;n(3,o=a*iu(E))}else n(3,o=a),clearInterval(l)},2),()=>clearInterval(l)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalPoints"in b&&n(0,t=b.totalPoints),"inProgressTotalPoints"in b&&n(1,r=b.inProgressTotalPoints)},[t,r,s,o,_]}class rL extends it{constructor(e){super(),ot(this,e,nL,tL,nt,{totalPoints:0,inProgressTotalPoints:1})}}function sL(i){let e,n;return{c(){e=Ve("Total Check-ins: "),n=Ve(i[0])},l(t){e=Ue(t,"Total Check-ins: "),n=Ue(t,i[0])},m(t,r){R(t,e,r),R(t,n,r)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&(S(e),S(n))}}}function iL(i){let e,n;return e=new xa({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function oL(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){pr(e.src,n=Ms[i[1].badge])||te(e,"src",n),te(e,"class","h-14 w-14 -ml-0.5"),te(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=bt(e,"error",i[4]),t=!0)},p(s,a){a&2&&!pr(e.src,n=Ms[s[1].badge])&&te(e,"src",n)},i:gt,o:gt,d(s){s&&S(e),t=!1,r()}}}function aL(i){let e,n,t,r,s,a,o=i[1].badge+"",l,d,_,b,w=i[1].previous_threshold+"",E,L,M,F,q,G=i[1].threshold+"",Q,ge;const le=[oL,iL],re=[];function me(se,Z){return se[2]?1:0}return t=me(i),r=re[t]=le[t](i),{c(){e=oe("div"),n=oe("div"),r.c(),s=de(),a=oe("p"),l=Ve(o),d=de(),_=oe("div"),b=oe("p"),E=Ve(w),L=de(),M=oe("progress"),F=de(),q=oe("p"),Q=Ve(G),this.h()},l(se){e=ae(se,"DIV",{class:!0});var Z=$e(e);n=ae(Z,"DIV",{class:!0});var Y=$e(n);r.l(Y),Y.forEach(S),s=pe(Z),a=ae(Z,"P",{class:!0});var ie=$e(a);l=Ue(ie,o),ie.forEach(S),d=pe(Z),_=ae(Z,"DIV",{class:!0});var be=$e(_);b=ae(be,"P",{class:!0});var fe=$e(b);E=Ue(fe,w),fe.forEach(S),L=pe(be),M=ae(be,"PROGRESS",{class:!0,max:!0}),$e(M).forEach(S),F=pe(be),q=ae(be,"P",{class:!0});var ke=$e(q);Q=Ue(ke,G),ke.forEach(S),be.forEach(S),Z.forEach(S),this.h()},h(){te(n,"class","shrink-0"),te(a,"class","text-sm font-medium leading-none"),te(b,"class","text-sm font-medium leading-none text-muted-foreground"),te(M,"class","progress progress-error grow"),M.value=i[3],te(M,"max","100"),te(q,"class","text-sm font-medium leading-none text-muted-foreground"),te(_,"class","flex self-stretch gap-2 items-center"),te(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(se,Z){R(se,e,Z),ce(e,n),re[t].m(n,null),ce(e,s),ce(e,a),ce(a,l),ce(e,d),ce(e,_),ce(_,b),ce(b,E),ce(_,L),ce(_,M),ce(_,F),ce(_,q),ce(q,Q),ge=!0},p(se,Z){let Y=t;t=me(se),t===Y?re[t].p(se,Z):(ht(),I(re[Y],1,1,()=>{re[Y]=null}),dt(),r=re[t],r?r.p(se,Z):(r=re[t]=le[t](se),r.c()),T(r,1),r.m(n,null)),(!ge||Z&2)&&o!==(o=se[1].badge+"")&&Ft(l,o),(!ge||Z&2)&&w!==(w=se[1].previous_threshold+"")&&Ft(E,w),(!ge||Z&8)&&(M.value=se[3]),(!ge||Z&2)&&G!==(G=se[1].threshold+"")&&Ft(Q,G)},i(se){ge||(T(r),ge=!0)},o(se){I(r),ge=!1},d(se){se&&S(e),re[t].d()}}}function lL(i){let e,n,t,r;return e=new _s({props:{class:"text-xs",$$slots:{default:[sL]},$$scope:{ctx:i}}}),t=new Zi({props:{$$slots:{default:[aL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&270&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function cL(i){let e,n;return e=new Kr({props:{class:"p-2",$$slots:{default:[lL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function uL(i){let e,n;return e=new nr({props:{$$slots:{default:[cL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let j1=2e3;function fL(i,e,n){let{totalCheckInCounts:t}=e,{inProgressTotalCheckIns:r}=e,s=!1,a,o=0,l,d;er(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),d=Date.now(),l=setInterval(()=>{const w=Date.now()-d;if(w<j1){const E=w/j1;n(3,o=a*iu(E))}else n(3,o=a),clearInterval(l)},2),()=>clearInterval(l)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalCheckInCounts"in b&&n(0,t=b.totalCheckInCounts),"inProgressTotalCheckIns"in b&&n(1,r=b.inProgressTotalCheckIns)},[t,r,s,o,_]}class hL extends it{constructor(e){super(),ot(this,e,fL,uL,nt,{totalCheckInCounts:0,inProgressTotalCheckIns:1})}}function dL(i){let e,n;return{c(){e=Ve("Total Photos: "),n=Ve(i[0])},l(t){e=Ue(t,"Total Photos: "),n=Ue(t,i[0])},m(t,r){R(t,e,r),R(t,n,r)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&(S(e),S(n))}}}function pL(i){let e,n;return e=new xa({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function mL(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){pr(e.src,n=Ms[i[1].badge])||te(e,"src",n),te(e,"class","h-14 w-14 -ml-0.5"),te(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=bt(e,"error",i[4]),t=!0)},p(s,a){a&2&&!pr(e.src,n=Ms[s[1].badge])&&te(e,"src",n)},i:gt,o:gt,d(s){s&&S(e),t=!1,r()}}}function _L(i){let e,n,t,r,s,a,o=i[1].badge+"",l,d,_,b,w=i[1].previous_threshold+"",E,L,M,F,q,G=i[1].threshold+"",Q,ge;const le=[mL,pL],re=[];function me(se,Z){return se[2]?1:0}return t=me(i),r=re[t]=le[t](i),{c(){e=oe("div"),n=oe("div"),r.c(),s=de(),a=oe("p"),l=Ve(o),d=de(),_=oe("div"),b=oe("p"),E=Ve(w),L=de(),M=oe("progress"),F=de(),q=oe("p"),Q=Ve(G),this.h()},l(se){e=ae(se,"DIV",{class:!0});var Z=$e(e);n=ae(Z,"DIV",{class:!0});var Y=$e(n);r.l(Y),Y.forEach(S),s=pe(Z),a=ae(Z,"P",{class:!0});var ie=$e(a);l=Ue(ie,o),ie.forEach(S),d=pe(Z),_=ae(Z,"DIV",{class:!0});var be=$e(_);b=ae(be,"P",{class:!0});var fe=$e(b);E=Ue(fe,w),fe.forEach(S),L=pe(be),M=ae(be,"PROGRESS",{class:!0,max:!0}),$e(M).forEach(S),F=pe(be),q=ae(be,"P",{class:!0});var ke=$e(q);Q=Ue(ke,G),ke.forEach(S),be.forEach(S),Z.forEach(S),this.h()},h(){te(n,"class","shrink-0"),te(a,"class","text-sm font-medium leading-none"),te(b,"class","text-sm font-medium leading-none text-muted-foreground"),te(M,"class","progress progress-error grow"),M.value=i[3],te(M,"max","100"),te(q,"class","text-sm font-medium leading-none text-muted-foreground"),te(_,"class","flex self-stretch gap-2 items-center"),te(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(se,Z){R(se,e,Z),ce(e,n),re[t].m(n,null),ce(e,s),ce(e,a),ce(a,l),ce(e,d),ce(e,_),ce(_,b),ce(b,E),ce(_,L),ce(_,M),ce(_,F),ce(_,q),ce(q,Q),ge=!0},p(se,Z){let Y=t;t=me(se),t===Y?re[t].p(se,Z):(ht(),I(re[Y],1,1,()=>{re[Y]=null}),dt(),r=re[t],r?r.p(se,Z):(r=re[t]=le[t](se),r.c()),T(r,1),r.m(n,null)),(!ge||Z&2)&&o!==(o=se[1].badge+"")&&Ft(l,o),(!ge||Z&2)&&w!==(w=se[1].previous_threshold+"")&&Ft(E,w),(!ge||Z&8)&&(M.value=se[3]),(!ge||Z&2)&&G!==(G=se[1].threshold+"")&&Ft(Q,G)},i(se){ge||(T(r),ge=!0)},o(se){I(r),ge=!1},d(se){se&&S(e),re[t].d()}}}function gL(i){let e,n,t,r;return e=new _s({props:{class:"text-xs",$$slots:{default:[dL]},$$scope:{ctx:i}}}),t=new Zi({props:{$$slots:{default:[_L]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&270&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function vL(i){let e,n;return e=new Kr({props:{class:"p-2",$$slots:{default:[gL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function yL(i){let e,n;return e=new nr({props:{$$slots:{default:[vL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let q1=2e3;function bL(i,e,n){let{totalPoiPhotoCounts:t}=e,{inProgressTotalPoiPhotos:r}=e,s=!1,a,o=0,l,d;er(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),d=Date.now(),l=setInterval(()=>{const w=Date.now()-d;if(w<q1){const E=w/q1;n(3,o=a*iu(E))}else n(3,o=a),clearInterval(l)},2),()=>clearInterval(l)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalPoiPhotoCounts"in b&&n(0,t=b.totalPoiPhotoCounts),"inProgressTotalPoiPhotos"in b&&n(1,r=b.inProgressTotalPoiPhotos)},[t,r,s,o,_]}class $L extends it{constructor(e){super(),ot(this,e,bL,yL,nt,{totalPoiPhotoCounts:0,inProgressTotalPoiPhotos:1})}}function wL(i){let e,n;return{c(){e=Ve("Total Reviews: "),n=Ve(i[0])},l(t){e=Ue(t,"Total Reviews: "),n=Ue(t,i[0])},m(t,r){R(t,e,r),R(t,n,r)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&(S(e),S(n))}}}function xL(i){let e,n;return e=new xa({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function kL(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){pr(e.src,n=Ms[i[1].badge])||te(e,"src",n),te(e,"class","h-14 w-14 -ml-0.5"),te(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=bt(e,"error",i[4]),t=!0)},p(s,a){a&2&&!pr(e.src,n=Ms[s[1].badge])&&te(e,"src",n)},i:gt,o:gt,d(s){s&&S(e),t=!1,r()}}}function CL(i){let e,n,t,r,s,a,o=i[1].badge+"",l,d,_,b,w=i[1].previous_threshold+"",E,L,M,F,q,G=i[1].threshold+"",Q,ge;const le=[kL,xL],re=[];function me(se,Z){return se[2]?1:0}return t=me(i),r=re[t]=le[t](i),{c(){e=oe("div"),n=oe("div"),r.c(),s=de(),a=oe("p"),l=Ve(o),d=de(),_=oe("div"),b=oe("p"),E=Ve(w),L=de(),M=oe("progress"),F=de(),q=oe("p"),Q=Ve(G),this.h()},l(se){e=ae(se,"DIV",{class:!0});var Z=$e(e);n=ae(Z,"DIV",{class:!0});var Y=$e(n);r.l(Y),Y.forEach(S),s=pe(Z),a=ae(Z,"P",{class:!0});var ie=$e(a);l=Ue(ie,o),ie.forEach(S),d=pe(Z),_=ae(Z,"DIV",{class:!0});var be=$e(_);b=ae(be,"P",{class:!0});var fe=$e(b);E=Ue(fe,w),fe.forEach(S),L=pe(be),M=ae(be,"PROGRESS",{class:!0,max:!0}),$e(M).forEach(S),F=pe(be),q=ae(be,"P",{class:!0});var ke=$e(q);Q=Ue(ke,G),ke.forEach(S),be.forEach(S),Z.forEach(S),this.h()},h(){te(n,"class","shrink-0"),te(a,"class","text-sm font-medium leading-none"),te(b,"class","text-sm font-medium leading-none text-muted-foreground"),te(M,"class","progress progress-error grow"),M.value=i[3],te(M,"max","100"),te(q,"class","text-sm font-medium leading-none text-muted-foreground"),te(_,"class","flex self-stretch gap-2 items-center"),te(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(se,Z){R(se,e,Z),ce(e,n),re[t].m(n,null),ce(e,s),ce(e,a),ce(a,l),ce(e,d),ce(e,_),ce(_,b),ce(b,E),ce(_,L),ce(_,M),ce(_,F),ce(_,q),ce(q,Q),ge=!0},p(se,Z){let Y=t;t=me(se),t===Y?re[t].p(se,Z):(ht(),I(re[Y],1,1,()=>{re[Y]=null}),dt(),r=re[t],r?r.p(se,Z):(r=re[t]=le[t](se),r.c()),T(r,1),r.m(n,null)),(!ge||Z&2)&&o!==(o=se[1].badge+"")&&Ft(l,o),(!ge||Z&2)&&w!==(w=se[1].previous_threshold+"")&&Ft(E,w),(!ge||Z&8)&&(M.value=se[3]),(!ge||Z&2)&&G!==(G=se[1].threshold+"")&&Ft(Q,G)},i(se){ge||(T(r),ge=!0)},o(se){I(r),ge=!1},d(se){se&&S(e),re[t].d()}}}function SL(i){let e,n,t,r;return e=new _s({props:{class:"text-xs",$$slots:{default:[wL]},$$scope:{ctx:i}}}),t=new Zi({props:{$$slots:{default:[CL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&257&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&270&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function TL(i){let e,n;return e=new Kr({props:{class:"p-2",$$slots:{default:[SL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function IL(i){let e,n;return e=new nr({props:{$$slots:{default:[TL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&271&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}let G1=2e3;function EL(i,e,n){let{totalPoiReviewCounts:t}=e,{inProgressTotalPoiReviews:r}=e,s=!1,a,o=0,l,d;er(()=>(a=Math.round((t-r.previous_threshold)*100/(r.threshold-r.previous_threshold)),a>100&&(a=100),d=Date.now(),l=setInterval(()=>{const w=Date.now()-d;if(w<G1){const E=w/G1;n(3,o=a*iu(E))}else n(3,o=a),clearInterval(l)},2),()=>clearInterval(l)));const _=()=>n(2,s=!0);return i.$$set=b=>{"totalPoiReviewCounts"in b&&n(0,t=b.totalPoiReviewCounts),"inProgressTotalPoiReviews"in b&&n(1,r=b.inProgressTotalPoiReviews)},[t,r,s,o,_]}class PL extends it{constructor(e){super(),ot(this,e,EL,IL,nt,{totalPoiReviewCounts:0,inProgressTotalPoiReviews:1})}}function AL(i){let e,n="Your Progression",t,r,s,a,o,l,d,_,b,w,E,L;return s=new rL({props:{totalPoints:i[0],inProgressTotalPoints:i[4]}}),o=new hL({props:{totalCheckInCounts:i[1],inProgressTotalCheckIns:i[5]}}),d=new $L({props:{totalPoiPhotoCounts:i[2],inProgressTotalPoiPhotos:i[6]}}),b=new PL({props:{totalPoiReviewCounts:i[3],inProgressTotalPoiReviews:i[7]}}),E=new yi({props:{class:"mt-3 mb-4"}}),{c(){e=oe("p"),e.textContent=n,t=de(),r=oe("div"),N(s.$$.fragment),a=de(),N(o.$$.fragment),l=de(),N(d.$$.fragment),_=de(),N(b.$$.fragment),w=de(),N(E.$$.fragment),this.h()},l(M){e=ae(M,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-15fyxhe"&&(e.textContent=n),t=pe(M),r=ae(M,"DIV",{class:!0});var F=$e(r);j(s.$$.fragment,F),a=pe(F),j(o.$$.fragment,F),l=pe(F),j(d.$$.fragment,F),_=pe(F),j(b.$$.fragment,F),F.forEach(S),w=pe(M),j(E.$$.fragment,M),this.h()},h(){te(e,"class","text-lg font-medium leading-none text-muted-foreground mb-3"),te(r,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(M,F){R(M,e,F),R(M,t,F),R(M,r,F),V(s,r,null),ce(r,a),V(o,r,null),ce(r,l),V(d,r,null),ce(r,_),V(b,r,null),R(M,w,F),V(E,M,F),L=!0},p(M,[F]){const q={};F&1&&(q.totalPoints=M[0]),F&16&&(q.inProgressTotalPoints=M[4]),s.$set(q);const G={};F&2&&(G.totalCheckInCounts=M[1]),F&32&&(G.inProgressTotalCheckIns=M[5]),o.$set(G);const Q={};F&4&&(Q.totalPoiPhotoCounts=M[2]),F&64&&(Q.inProgressTotalPoiPhotos=M[6]),d.$set(Q);const ge={};F&8&&(ge.totalPoiReviewCounts=M[3]),F&128&&(ge.inProgressTotalPoiReviews=M[7]),b.$set(ge)},i(M){L||(T(s.$$.fragment,M),T(o.$$.fragment,M),T(d.$$.fragment,M),T(b.$$.fragment,M),T(E.$$.fragment,M),L=!0)},o(M){I(s.$$.fragment,M),I(o.$$.fragment,M),I(d.$$.fragment,M),I(b.$$.fragment,M),I(E.$$.fragment,M),L=!1},d(M){M&&(S(e),S(t),S(r),S(w)),U(s),U(o),U(d),U(b),U(E,M)}}}function ML(i,e,n){let{totalPoints:t}=e,{totalCheckInCounts:r}=e,{totalPoiPhotoCounts:s}=e,{totalPoiReviewCounts:a}=e,{inProgressTotalPoints:o}=e,{inProgressTotalCheckIns:l}=e,{inProgressTotalPoiPhotos:d}=e,{inProgressTotalPoiReviews:_}=e;return i.$$set=b=>{"totalPoints"in b&&n(0,t=b.totalPoints),"totalCheckInCounts"in b&&n(1,r=b.totalCheckInCounts),"totalPoiPhotoCounts"in b&&n(2,s=b.totalPoiPhotoCounts),"totalPoiReviewCounts"in b&&n(3,a=b.totalPoiReviewCounts),"inProgressTotalPoints"in b&&n(4,o=b.inProgressTotalPoints),"inProgressTotalCheckIns"in b&&n(5,l=b.inProgressTotalCheckIns),"inProgressTotalPoiPhotos"in b&&n(6,d=b.inProgressTotalPoiPhotos),"inProgressTotalPoiReviews"in b&&n(7,_=b.inProgressTotalPoiReviews)},[t,r,s,a,o,l,d,_]}class DL extends it{constructor(e){super(),ot(this,e,ML,AL,nt,{totalPoints:0,totalCheckInCounts:1,totalPoiPhotoCounts:2,totalPoiReviewCounts:3,inProgressTotalPoints:4,inProgressTotalCheckIns:5,inProgressTotalPoiPhotos:6,inProgressTotalPoiReviews:7})}}function zL(i){let e,n;return e=new xa({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function LL(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){pr(e.src,n=Ms[i[0].badge])||te(e,"src",n),te(e,"class","h-14 w-14 -ml-0.5"),te(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=bt(e,"error",i[3]),t=!0)},p(s,a){a&1&&!pr(e.src,n=Ms[s[0].badge])&&te(e,"src",n)},i:gt,o:gt,d(s){s&&S(e),t=!1,r()}}}function RL(i){let e,n,t=i[0].badge+"",r,s,a,o,l,d,_,b=i[0].threshold+"",w,E,L,M;const F=[LL,zL],q=[];function G(Q,ge){return Q[2]?1:0}return o=G(i),l=q[o]=F[o](i),{c(){e=oe("div"),n=oe("p"),r=Ve(t),s=de(),a=oe("div"),l.c(),d=de(),_=oe("p"),w=Ve(b),E=de(),L=Ve(i[1]),this.h()},l(Q){e=ae(Q,"DIV",{class:!0});var ge=$e(e);n=ae(ge,"P",{class:!0});var le=$e(n);r=Ue(le,t),le.forEach(S),s=pe(ge),a=ae(ge,"DIV",{class:!0});var re=$e(a);l.l(re),re.forEach(S),d=pe(ge),_=ae(ge,"P",{class:!0});var me=$e(_);w=Ue(me,b),E=pe(me),L=Ue(me,i[1]),me.forEach(S),ge.forEach(S),this.h()},h(){te(n,"class","text-sm font-medium leading-none"),te(a,"class","shrink-0"),te(_,"class","text-xs"),te(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(Q,ge){R(Q,e,ge),ce(e,n),ce(n,r),ce(e,s),ce(e,a),q[o].m(a,null),ce(e,d),ce(e,_),ce(_,w),ce(_,E),ce(_,L),M=!0},p(Q,ge){(!M||ge&1)&&t!==(t=Q[0].badge+"")&&Ft(r,t);let le=o;o=G(Q),o===le?q[o].p(Q,ge):(ht(),I(q[le],1,1,()=>{q[le]=null}),dt(),l=q[o],l?l.p(Q,ge):(l=q[o]=F[o](Q),l.c()),T(l,1),l.m(a,null)),(!M||ge&1)&&b!==(b=Q[0].threshold+"")&&Ft(w,b),(!M||ge&2)&&Ft(L,Q[1])},i(Q){M||(T(l),M=!0)},o(Q){I(l),M=!1},d(Q){Q&&S(e),q[o].d()}}}function OL(i){let e,n;return e=new Zi({props:{$$slots:{default:[RL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function FL(i){let e,n;return e=new Kr({props:{class:"p-2",$$slots:{default:[OL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function BL(i){let e,n;return e=new nr({props:{$$slots:{default:[FL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function NL(i,e,n){let{badgeStatus:t}=e,{appendix:r}=e,s=!1;const a=()=>n(2,s=!0);return i.$$set=o=>{"badgeStatus"in o&&n(0,t=o.badgeStatus),"appendix"in o&&n(1,r=o.appendix)},[t,r,s,a]}class Ry extends it{constructor(e){super(),ot(this,e,NL,BL,nt,{badgeStatus:0,appendix:1})}}function H1(i,e,n){const t=i.slice();return t[7]=e[n],t}function Z1(i,e,n){const t=i.slice();return t[7]=e[n],t}function VL(i){let e,n=[],t=new Map,r,s=Qt(i[0]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let l=Z1(i,s,o),d=a(l);t.set(d,n[o]=W1(d,l))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);for(let d=0;d<n.length;d+=1)n[d].l(l);l.forEach(S),this.h()},h(){te(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2 mb-3")},m(o,l){R(o,e,l);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,l){l&1&&(s=Qt(o[0]),ht(),n=zr(n,l,a,1,o,s,t,e,Wr,W1,null,Z1),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(n[l]);r=!0}},o(o){for(let l=0;l<n.length;l+=1)I(n[l]);r=!1},d(o){o&&S(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function UL(i){let e,n="<p>You have achieved all possible milestones, congratulations!</p>";return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-apfzai"&&(e.innerHTML=n),this.h()},h(){te(e,"class","flex justify-center items-center p-4")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function W1(i,e){let n,t,r;return t=new Ry({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function jL(i){let e,n;return e=new Sa({props:{$$slots:{default:[XL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function qL(i){let e;return{c(){e=Ve("Show All Others")},l(n){e=Ue(n,"Show All Others")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function GL(i){let e,n;return e=new Vn({props:{class:"grow",variant:"outline",$$slots:{default:[qL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function HL(i){let e;return{c(){e=Ve("All Other Upcoming Milestones")},l(n){e=Ue(n,"All Other Upcoming Milestones")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function K1(i,e){let n,t,r;return t=new Ry({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function ZL(i){let e,n=[],t=new Map,r,s=Qt(i[1]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let l=H1(i,s,o),d=a(l);t.set(d,n[o]=K1(d,l))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);for(let d=0;d<n.length;d+=1)n[d].l(l);l.forEach(S),this.h()},h(){te(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(o,l){R(o,e,l);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,l){l&2&&(s=Qt(o[1]),ht(),n=zr(n,l,a,1,o,s,t,e,Wr,K1,null,H1),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(n[l]);r=!0}},o(o){for(let l=0;l<n.length;l+=1)I(n[l]);r=!1},d(o){o&&S(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function WL(i){let e,n,t,r;return e=new jd({props:{class:"mb-4",$$slots:{default:[HL]},$$scope:{ctx:i}}}),t=new cu({props:{$$slots:{default:[ZL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&4096&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function KL(i){let e,n;return e=new lu({props:{$$slots:{default:[WL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function XL(i){let e,n,t,r;return e=new qv({props:{class:"flex",$$slots:{default:[GL]},$$scope:{ctx:i}}}),t=new Ca({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[KL]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&4096&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function JL(i){let e,n="Upcoming Milestones",t,r,s,a,o,l,d;const _=[UL,VL],b=[];function w(L,M){return L[0].length===0?0:1}r=w(i),s=b[r]=_[r](i);let E=i[1].length>0&&jL(i);return l=new yi({props:{class:"mt-3 mb-4"}}),{c(){e=oe("p"),e.textContent=n,t=de(),s.c(),a=de(),E&&E.c(),o=de(),N(l.$$.fragment),this.h()},l(L){e=ae(L,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1cur427"&&(e.textContent=n),t=pe(L),s.l(L),a=pe(L),E&&E.l(L),o=pe(L),j(l.$$.fragment,L),this.h()},h(){te(e,"class","text-lg font-medium leading-none text-muted-foreground mb-3")},m(L,M){R(L,e,M),R(L,t,M),b[r].m(L,M),R(L,a,M),E&&E.m(L,M),R(L,o,M),V(l,L,M),d=!0},p(L,[M]){s.p(L,M),L[1].length>0&&E.p(L,M)},i(L){d||(T(s),T(E),T(l.$$.fragment,L),d=!0)},o(L){I(s),I(E),I(l.$$.fragment,L),d=!1},d(L){L&&(S(e),S(t),S(a),S(o)),b[r].d(L),E&&E.d(L),U(l,L)}}}function YL(i,e,n){let{lockedTotalPoints:t}=e,{lockedTotalCheckIns:r}=e,{lockedTotalPoiPhotos:s}=e,{lockedTotalPoiReviews:a}=e;const o=(_,b)=>_.map(w=>({value:w,appendix:b})),l=[o(t,"Total Points")[0],o(r,"Total Check-ins")[0],o(s,"Total Photos")[0],o(a,"Total Reviews")[0]].concat([...o(t.slice(1),"Total Points"),...o(r.slice(1),"Total Check-ins"),...o(s.slice(1),"Total Photos"),...o(a.slice(1),"Total Reviews")]).filter(_=>_!==void 0).slice(0,4),d=[...o(t,"Total Points"),...o(r,"Total Check-ins"),...o(s,"Total Photos"),...o(a,"Total Reviews")].filter(_=>_!==void 0&&!l.some(({value:b})=>b===_.value));return i.$$set=_=>{"lockedTotalPoints"in _&&n(2,t=_.lockedTotalPoints),"lockedTotalCheckIns"in _&&n(3,r=_.lockedTotalCheckIns),"lockedTotalPoiPhotos"in _&&n(4,s=_.lockedTotalPoiPhotos),"lockedTotalPoiReviews"in _&&n(5,a=_.lockedTotalPoiReviews)},[l,d,t,r,s,a]}class QL extends it{constructor(e){super(),ot(this,e,YL,JL,nt,{lockedTotalPoints:2,lockedTotalCheckIns:3,lockedTotalPoiPhotos:4,lockedTotalPoiReviews:5})}}function eR(i){let e,n;return e=new xa({props:{class:"h-14 w-14 -ml-0.5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function tR(i){let e,n,t,r;return{c(){e=oe("img"),this.h()},l(s){e=ae(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){pr(e.src,n=Ms[i[0].badge])||te(e,"src",n),te(e,"class","h-14 w-14 -ml-0.5"),te(e,"alt","Badge Icon")},m(s,a){R(s,e,a),t||(r=bt(e,"error",i[3]),t=!0)},p(s,a){a&1&&!pr(e.src,n=Ms[s[0].badge])&&te(e,"src",n)},i:gt,o:gt,d(s){s&&S(e),t=!1,r()}}}function nR(i){let e,n,t=i[0].badge+"",r,s,a,o,l,d,_,b=i[0].threshold+"",w,E,L,M;const F=[tR,eR],q=[];function G(Q,ge){return Q[2]?1:0}return o=G(i),l=q[o]=F[o](i),{c(){e=oe("div"),n=oe("p"),r=Ve(t),s=de(),a=oe("div"),l.c(),d=de(),_=oe("p"),w=Ve(b),E=de(),L=Ve(i[1]),this.h()},l(Q){e=ae(Q,"DIV",{class:!0});var ge=$e(e);n=ae(ge,"P",{class:!0});var le=$e(n);r=Ue(le,t),le.forEach(S),s=pe(ge),a=ae(ge,"DIV",{class:!0});var re=$e(a);l.l(re),re.forEach(S),d=pe(ge),_=ae(ge,"P",{class:!0});var me=$e(_);w=Ue(me,b),E=pe(me),L=Ue(me,i[1]),me.forEach(S),ge.forEach(S),this.h()},h(){te(n,"class","text-sm font-medium leading-none"),te(a,"class","shrink-0"),te(_,"class","text-xs"),te(e,"class","flex flex-col space-y-1 items-center self-stretch")},m(Q,ge){R(Q,e,ge),ce(e,n),ce(n,r),ce(e,s),ce(e,a),q[o].m(a,null),ce(e,d),ce(e,_),ce(_,w),ce(_,E),ce(_,L),M=!0},p(Q,ge){(!M||ge&1)&&t!==(t=Q[0].badge+"")&&Ft(r,t);let le=o;o=G(Q),o===le?q[o].p(Q,ge):(ht(),I(q[le],1,1,()=>{q[le]=null}),dt(),l=q[o],l?l.p(Q,ge):(l=q[o]=F[o](Q),l.c()),T(l,1),l.m(a,null)),(!M||ge&1)&&b!==(b=Q[0].threshold+"")&&Ft(w,b),(!M||ge&2)&&Ft(L,Q[1])},i(Q){M||(T(l),M=!0)},o(Q){I(l),M=!1},d(Q){Q&&S(e),q[o].d()}}}function rR(i){let e,n;return e=new Zi({props:{$$slots:{default:[nR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function sR(i){let e,n;return e=new Kr({props:{class:"p-2",$$slots:{default:[rR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function iR(i){let e,n;return e=new nr({props:{$$slots:{default:[sR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&23&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function oR(i,e,n){let{badgeStatus:t}=e,{appendix:r}=e,s=!1;const a=()=>n(2,s=!0);return i.$$set=o=>{"badgeStatus"in o&&n(0,t=o.badgeStatus),"appendix"in o&&n(1,r=o.appendix)},[t,r,s,a]}class Oy extends it{constructor(e){super(),ot(this,e,oR,iR,nt,{badgeStatus:0,appendix:1})}}function X1(i,e,n){const t=i.slice();return t[7]=e[n],t}function J1(i,e,n){const t=i.slice();return t[7]=e[n],t}function aR(i){let e,n=[],t=new Map,r,s=Qt(i[0]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let l=J1(i,s,o),d=a(l);t.set(d,n[o]=Y1(d,l))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);for(let d=0;d<n.length;d+=1)n[d].l(l);l.forEach(S),this.h()},h(){te(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2 mb-3")},m(o,l){R(o,e,l);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,l){l&1&&(s=Qt(o[0]),ht(),n=zr(n,l,a,1,o,s,t,e,Wr,Y1,null,J1),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(n[l]);r=!0}},o(o){for(let l=0;l<n.length;l+=1)I(n[l]);r=!1},d(o){o&&S(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function lR(i){let e,n="<p>Currently you do not have any past achievements</p>";return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-mb704s"&&(e.innerHTML=n),this.h()},h(){te(e,"class","flex justify-center items-center p-4")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function Y1(i,e){let n,t,r;return t=new Oy({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function cR(i){let e,n;return e=new Sa({props:{$$slots:{default:[_R]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function uR(i){let e;return{c(){e=Ve("Show All Others")},l(n){e=Ue(n,"Show All Others")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function fR(i){let e,n;return e=new Vn({props:{class:"grow",variant:"outline",$$slots:{default:[uR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function hR(i){let e;return{c(){e=Ve("All Other Past Achievements")},l(n){e=Ue(n,"All Other Past Achievements")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Q1(i,e){let n,t,r;return t=new Oy({props:{badgeStatus:e[7].value,appendix:e[7].appendix}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function dR(i){let e,n=[],t=new Map,r,s=Qt(i[1]);const a=o=>o[7];for(let o=0;o<s.length;o+=1){let l=X1(i,s,o),d=a(l);t.set(d,n[o]=Q1(d,l))}return{c(){e=oe("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);for(let d=0;d<n.length;d+=1)n[d].l(l);l.forEach(S),this.h()},h(){te(e,"class","grid grid-cols-4 max-sm:grid-cols-2 max-sm:grid-rows-2 gap-2")},m(o,l){R(o,e,l);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null);r=!0},p(o,l){l&2&&(s=Qt(o[1]),ht(),n=zr(n,l,a,1,o,s,t,e,Wr,Q1,null,X1),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(n[l]);r=!0}},o(o){for(let l=0;l<n.length;l+=1)I(n[l]);r=!1},d(o){o&&S(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function pR(i){let e,n,t,r;return e=new jd({props:{class:"mb-4",$$slots:{default:[hR]},$$scope:{ctx:i}}}),t=new cu({props:{$$slots:{default:[dR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&4096&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function mR(i){let e,n;return e=new lu({props:{$$slots:{default:[pR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function _R(i){let e,n,t,r;return e=new qv({props:{class:"flex",$$slots:{default:[fR]},$$scope:{ctx:i}}}),t=new Ca({props:{class:"max-h-[90%] max-w-[90%] overflow-y-auto p-4",$$slots:{default:[mR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&4096&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function gR(i){let e,n="Past Achievements",t,r,s,a,o,l;const d=[lR,aR],_=[];function b(E,L){return E[0].length===0?0:1}r=b(i),s=_[r]=d[r](i);let w=i[1].length>0&&cR(i);return{c(){e=oe("p"),e.textContent=n,t=de(),s.c(),a=de(),w&&w.c(),o=Fe(),this.h()},l(E){e=ae(E,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-kqqb76"&&(e.textContent=n),t=pe(E),s.l(E),a=pe(E),w&&w.l(E),o=Fe(),this.h()},h(){te(e,"class","text-lg font-medium leading-none text-muted-foreground mb-3")},m(E,L){R(E,e,L),R(E,t,L),_[r].m(E,L),R(E,a,L),w&&w.m(E,L),R(E,o,L),l=!0},p(E,[L]){s.p(E,L),E[1].length>0&&w.p(E,L)},i(E){l||(T(s),T(w),l=!0)},o(E){I(s),I(w),l=!1},d(E){E&&(S(e),S(t),S(a),S(o)),_[r].d(E),w&&w.d(E)}}}function vR(i,e,n){let{achievedTotalPoints:t}=e,{achievedTotalCheckIns:r}=e,{achievedTotalPoiPhotos:s}=e,{achievedTotalPoiReviews:a}=e;const o=(_,b)=>_.map(w=>({value:w,appendix:b})),l=[o(t,"Total Points")[0],o(r,"Total Check-ins")[0],o(s,"Total Photos")[0],o(a,"Total Reviews")[0]].concat([...o(t.slice(1),"Total Points"),...o(r.slice(1),"Total Check-ins"),...o(s.slice(1),"Total Photos"),...o(a.slice(1),"Total Reviews")]).filter(_=>_!==void 0).slice(0,4),d=[...o(t,"Total Points"),...o(r,"Total Check-ins"),...o(s,"Total Photos"),...o(a,"Total Reviews")].filter(_=>_!==void 0&&!l.some(({value:b})=>b===_.value));return i.$$set=_=>{"achievedTotalPoints"in _&&n(2,t=_.achievedTotalPoints),"achievedTotalCheckIns"in _&&n(3,r=_.achievedTotalCheckIns),"achievedTotalPoiPhotos"in _&&n(4,s=_.achievedTotalPoiPhotos),"achievedTotalPoiReviews"in _&&n(5,a=_.achievedTotalPoiReviews)},[l,d,t,r,s,a]}class yR extends it{constructor(e){super(),ot(this,e,vR,gR,nt,{achievedTotalPoints:2,achievedTotalCheckIns:3,achievedTotalPoiPhotos:4,achievedTotalPoiReviews:5})}}function bR(i){let e;return{c(){e=Ve("Points & Badges")},l(n){e=Ue(n,"Points & Badges")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function $R(i){let e,n;return e=new Y0({props:{class:"h-5 w-5"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wR(i){let e,n;return e=new Vn({props:{"aria-label":"Additional Information",builders:[i[19]],variant:"secondary",size:"icon",$$slots:{default:[$R]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&524288&&(s.builders=[t[19]]),r&1048576&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function xR(i){let e,n,t,r,s,a='<h4 class="text-sm font-semibold">Note</h4> <p class="text-sm">Total Points are calculated according to this formula:</p> <p class="italic text-xs">total_points = 20 * total_check_ins + 10 * total_photos + 5 * total_reviews</p>',o;return t=new Y0({props:{className:"h-4 w-4"}}),{c(){e=oe("div"),n=oe("div"),N(t.$$.fragment),r=de(),s=oe("div"),s.innerHTML=a,this.h()},l(l){e=ae(l,"DIV",{class:!0});var d=$e(e);n=ae(d,"DIV",{class:!0});var _=$e(n);j(t.$$.fragment,_),_.forEach(S),r=pe(d),s=ae(d,"DIV",{class:!0,"data-svelte-h":!0}),an(s)!=="svelte-4zeadu"&&(s.innerHTML=a),d.forEach(S),this.h()},h(){te(n,"class","shrink-0"),te(s,"class","space-y-1"),te(e,"class","flex justify-between space-x-4")},m(l,d){R(l,e,d),ce(e,n),V(t,n,null),ce(e,r),ce(e,s),o=!0},p:gt,i(l){o||(T(t.$$.fragment,l),o=!0)},o(l){I(t.$$.fragment,l),o=!1},d(l){l&&S(e),U(t)}}}function kR(i){let e,n,t,r;return e=new X0({props:{asChild:!0,$$slots:{default:[wR,({builder:s})=>({19:s}),({builder:s})=>s?524288:0]},$$scope:{ctx:i}}}),t=new J0({props:{class:"w-80",$$slots:{default:[xR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1572864&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&1048576&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function CR(i){let e,n,t,r,s,a,o;return n=new _s({props:{tag:"h2",$$slots:{default:[bR]},$$scope:{ctx:i}}}),r=new K0({props:{portal:null,$$slots:{default:[kR]},$$scope:{ctx:i}}}),a=new yi({}),{c(){e=oe("div"),N(n.$$.fragment),t=de(),N(r.$$.fragment),s=de(),N(a.$$.fragment),this.h()},l(l){e=ae(l,"DIV",{class:!0});var d=$e(e);j(n.$$.fragment,d),t=pe(d),j(r.$$.fragment,d),d.forEach(S),s=pe(l),j(a.$$.fragment,l),this.h()},h(){te(e,"class","flex justify-between mb-3 items-center")},m(l,d){R(l,e,d),V(n,e,null),ce(e,t),V(r,e,null),R(l,s,d),V(a,l,d),o=!0},p(l,d){const _={};d&1048576&&(_.$$scope={dirty:d,ctx:l}),n.$set(_);const b={};d&1048576&&(b.$$scope={dirty:d,ctx:l}),r.$set(b)},i(l){o||(T(n.$$.fragment,l),T(r.$$.fragment,l),T(a.$$.fragment,l),o=!0)},o(l){I(n.$$.fragment,l),I(r.$$.fragment,l),I(a.$$.fragment,l),o=!1},d(l){l&&(S(e),S(s)),U(n),U(r),U(a,l)}}}function SR(i){let e,n,t,r,s,a;return e=new DL({props:{totalPoints:i[3],totalCheckInCounts:i[4],totalPoiPhotoCounts:i[5],totalPoiReviewCounts:i[6],inProgressTotalPoints:i[12](i[7]),inProgressTotalCheckIns:i[12](i[8]),inProgressTotalPoiPhotos:i[12](i[9]),inProgressTotalPoiReviews:i[12](i[10])}}),t=new QL({props:{lockedTotalPoints:i[13](i[7]),lockedTotalCheckIns:i[13](i[8]),lockedTotalPoiPhotos:i[13](i[9]),lockedTotalPoiReviews:i[13](i[10])}}),s=new yR({props:{achievedTotalPoints:i[14](i[7]),achievedTotalCheckIns:i[14](i[8]),achievedTotalPoiPhotos:i[14](i[9]),achievedTotalPoiReviews:i[14](i[10])}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),N(s.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o),r=pe(o),j(s.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),R(o,r,l),V(s,o,l),a=!0},p(o,l){const d={};l&8&&(d.totalPoints=o[3]),l&16&&(d.totalCheckInCounts=o[4]),l&32&&(d.totalPoiPhotoCounts=o[5]),l&64&&(d.totalPoiReviewCounts=o[6]),l&128&&(d.inProgressTotalPoints=o[12](o[7])),l&256&&(d.inProgressTotalCheckIns=o[12](o[8])),l&512&&(d.inProgressTotalPoiPhotos=o[12](o[9])),l&1024&&(d.inProgressTotalPoiReviews=o[12](o[10])),e.$set(d);const _={};l&128&&(_.lockedTotalPoints=o[13](o[7])),l&256&&(_.lockedTotalCheckIns=o[13](o[8])),l&512&&(_.lockedTotalPoiPhotos=o[13](o[9])),l&1024&&(_.lockedTotalPoiReviews=o[13](o[10])),t.$set(_);const b={};l&128&&(b.achievedTotalPoints=o[14](o[7])),l&256&&(b.achievedTotalCheckIns=o[14](o[8])),l&512&&(b.achievedTotalPoiPhotos=o[14](o[9])),l&1024&&(b.achievedTotalPoiReviews=o[14](o[10])),s.$set(b)},i(o){a||(T(e.$$.fragment,o),T(t.$$.fragment,o),T(s.$$.fragment,o),a=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),I(s.$$.fragment,o),a=!1},d(o){o&&(S(n),S(r)),U(e,o),U(t,o),U(s,o)}}}function TR(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){te(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function IR(i){let e,n,t,r;const s=[TR,SR],a=[];function o(l,d){return l[2]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function ER(i){let e,n,t,r,s;return n=new Kr({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[CR]},$$scope:{ctx:i}}}),r=new Lr({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[IR]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=de(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=$e(e);j(n.$$.fragment,o),o.forEach(S),t=pe(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[16](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const l={};o&1048576&&(l.$$scope={dirty:o,ctx:a}),n.$set(l);const d={};o&2&&(d.style=`height: calc(100% - ${a[1]}px);`),o&1050620&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){I(n.$$.fragment,a),I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[16](null),U(r,a)}}}function PR(i){let e,n,t,r,s;return n=new nr({props:{class:"relative p-4 h-full",$$slots:{default:[ER]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=$e(e);j(n.$$.fragment,o),o.forEach(S),this.h()},h(){te(e,"class","flex flex-col p-4 relative h-full")},m(a,o){R(a,e,o),V(n,e,null),t=!0,r||(s=bt(window,"resize",i[11]),r=!0)},p(a,[o]){const l={};o&1050623&&(l.$$scope={dirty:o,ctx:a}),n.$set(l)},i(a){t||(T(n.$$.fragment,a),t=!0)},o(a){I(n.$$.fragment,a),t=!1},d(a){a&&S(e),U(n),r=!1,s()}}}const AR=bf({status:aw([od("ACHIEVED"),od("IN PROGRESS"),od("LOCKED")]),badge:lw(Ms),threshold:Sl,previous_threshold:Sl});function MR(i,e,n){let{slug:t}=e,r,s=64;const a=()=>{const re=r.offsetHeight;re!==void 0&&n(1,s=re)};er(a);let o=!0,l,d,_,b,w,E,L,M;const F=re=>{if(!Array.isArray(re))return console.error("Badge statuses are not an array"),[];const me=[];return re.forEach(se=>{const Z=AR.decode(se);if(qf.isRight(Z)){const Y=Z.right;me.push(Y)}else console.error("Invalid BadgeStatus object received from API: ",Z.left)}),me};er(async()=>{const re=["totalPoints","totalCheckInCounts","totalPoiPhotoCounts","totalPoiReviewCounts","badgeStatusesForTotalPoints","badgeStatusesForTotalCheckInCounts","badgeStatusesForTotalPoiPhotoCounts","badgeStatusesForTotalPoiReviewCounts"],me=await fetch("/api/points-badges");if(me.ok){const se=await me.json();if(re.some(Z=>se[Z]===void 0)){console.error("Undefined data returned from API");return}if(typeof se.totalPoints!="number"||typeof se.totalCheckInCounts!="number"||typeof se.totalPoiPhotoCounts!="number"||typeof se.totalPoiReviewCounts!="number"){console.error("Data returned from API has unexpected type");return}n(7,w=F(se.badgeStatusesForTotalPoints)),n(8,E=F(se.badgeStatusesForTotalCheckInCounts)),n(9,L=F(se.badgeStatusesForTotalPoiPhotoCounts)),n(10,M=F(se.badgeStatusesForTotalPoiReviewCounts)),n(3,{totalPoints:l,totalCheckInCounts:d,totalPoiPhotoCounts:_,totalPoiReviewCounts:b}=se,l,n(4,d),n(5,_),n(6,b)),n(2,o=!1)}});const G=re=>re.find(({status:me})=>me==="IN PROGRESS")??re.slice(-1)[0],Q=re=>re.filter(({status:me})=>me==="LOCKED"),ge=re=>re.filter(({status:me})=>me==="ACHIEVED").reverse();function le(re){jt[re?"unshift":"push"](()=>{r=re,n(0,r)})}return i.$$set=re=>{"slug"in re&&n(15,t=re.slug)},[r,s,o,l,d,_,b,w,E,L,M,a,G,Q,ge,t,le]}class DR extends it{constructor(e){super(),ot(this,e,MR,PR,nt,{slug:15})}}function zR(i){let e,n;return{c(){e=oe("span"),n=Ve(i[0]),this.h()},l(t){e=ae(t,"SPAN",{class:!0});var r=$e(e);n=Ue(r,i[0]),r.forEach(S),this.h()},h(){te(e,"class","lg:max-w-[320px] sm:max-w-[160px] max-w-[80px] truncate font-medium")},m(t,r){R(t,e,r),ce(e,n)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&S(e)}}}function LR(i){let e,n;return{c(){e=oe("div"),n=Ve(i[0]),this.h()},l(t){e=ae(t,"DIV",{class:!0});var r=$e(e);n=Ue(r,i[0]),r.forEach(S),this.h()},h(){te(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r),ce(e,n)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&S(e)}}}function RR(i){let e,n,t,r;return e=new No({props:{$$slots:{default:[zR]},$$scope:{ctx:i}}}),t=new Vo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[LR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&3&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&3&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function OR(i){let e,n,t;return n=new Oo({props:{$$slots:{default:[RR]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","flex space-x-2")},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,[s]){const a={};s&3&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function FR(i,e,n){let{value:t}=e;return i.$$set=r=>{"value"in r&&n(0,t=r.value)},[t]}let e0=class extends it{constructor(e){super(),ot(this,e,FR,OR,nt,{value:0})}};function BR(i){let e;const n=i[4].default,t=$t(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&wt(t,n,r,r[5],e?kt(n,r[5],s,null):xt(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function NR(i){let e,n,t,r;return n=new nu({props:{$$slots:{default:[KR]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(s){e=ae(s,"DIV",{class:!0});var a=$e(e);j(n.$$.fragment,a),a.forEach(S),this.h()},h(){te(e,"class",t=qt("flex items-center",i[0]))},m(s,a){R(s,e,a),V(n,e,null),r=!0},p(s,a){const o={};a&34&&(o.$$scope={dirty:a,ctx:s}),n.$set(o),(!r||a&1&&t!==(t=qt("flex items-center",s[0])))&&te(e,"class",t)},i(s){r||(T(n.$$.fragment,s),r=!0)},o(s){I(n.$$.fragment,s),r=!1},d(s){s&&S(e),U(n)}}}function VR(i){let e,n;return e=new Q0({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function UR(i){let e,n;return e=new ev({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function jR(i){let e,n;return e=new tv({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function qR(i){let e,n,t,r,s;const a=i[4].default,o=$t(a,i,i[5],null),l=[jR,UR,VR],d=[];function _(b,w){return b[1].sort.order==="desc"?0:b[1].sort.order==="asc"?1:2}return n=_(i),t=d[n]=l[n](i),{c(){o&&o.c(),e=de(),t.c(),r=Fe()},l(b){o&&o.l(b),e=pe(b),t.l(b),r=Fe()},m(b,w){o&&o.m(b,w),R(b,e,w),d[n].m(b,w),R(b,r,w),s=!0},p(b,w){o&&o.p&&(!s||w&32)&&wt(o,a,b,b[5],s?kt(a,b[5],w,null):xt(b[5]),null);let E=n;n=_(b),n!==E&&(ht(),I(d[E],1,1,()=>{d[E]=null}),dt(),t=d[n],t||(t=d[n]=l[n](b),t.c()),T(t,1),t.m(r.parentNode,r))},i(b){s||(T(o,b),T(t),s=!0)},o(b){I(o,b),I(t),s=!1},d(b){b&&(S(e),S(r)),o&&o.d(b),d[n].d(b)}}}function GR(i){let e,n;return e=new ns({props:{variant:"ghost",builders:[i[6]],class:"-ml-3 h-8 data-[state=open]:bg-accent",$$slots:{default:[qR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&64&&(s.builders=[t[6]]),r&34&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function HR(i){let e;return{c(){e=Ve("Asc")},l(n){e=Ue(n,"Asc")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function ZR(i){let e;return{c(){e=Ve("Desc")},l(n){e=Ue(n,"Desc")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function WR(i){let e,n,t,r;return e=new Mf({props:{$$slots:{default:[HR]},$$scope:{ctx:i}}}),e.$on("click",i[2]),t=new Mf({props:{$$slots:{default:[ZR]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&32&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function KR(i){let e,n,t,r;return e=new ru({props:{asChild:!0,$$slots:{default:[GR,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:i}}}),t=new su({props:{align:"start",$$slots:{default:[WR]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&98&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&32&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function XR(i){let e,n,t,r;const s=[NR,BR],a=[];function o(l,d){return l[1].sort.disabled?1:0}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function JR(i,e,n){let{$$slots:t={},$$scope:r}=e,{class:s=void 0}=e,{props:a}=e;function o(d){a.sort.order!=="asc"&&a.sort.toggle(d)}function l(d){a.sort.order!=="desc"&&a.sort.toggle(d)}return i.$$set=d=>{"class"in d&&n(0,s=d.class),"props"in d&&n(1,a=d.props),"$$scope"in d&&n(5,r=d.$$scope)},[s,a,o,l,t,r]}let YR=class extends it{constructor(e){super(),ot(this,e,JR,XR,nt,{class:0,props:1})}};function t0(i){let e,n;return e=new ns({props:{variant:"outline",class:"h-8 px-2 lg:px-3",$$slots:{default:[QR]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function QR(i){let e,n;return e=new rv({props:{class:"h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function eO(i){let e,n,t,r,s,a,o,l,d,_,b,w,E;function L(Q){i[5](Q)}let M={placeholder:"Filter by name...",class:"h-8 sm:w-[250px] lg:w-[350px] grow sm:grow-0 lg:grow-0 md:grow hover:bg-accent hover:text-accent-foreground bg-background focus-visible:m-0.5",type:"search"};i[1].name!==void 0&&(M.value=i[1].name),n=new nv({props:M}),jt.push(()=>kn(n,"value",L));function F(Q){i[6](Q)}let q={title:"POI Features",options:i[2]};i[1].features!==void 0&&(q.filterValues=i[1].features),l=new LO({props:q}),jt.push(()=>kn(l,"filterValues",F));let G=i[3]&&t0(i);return w=new GO({props:{tableModel:i[0]}}),{c(){e=oe("div"),N(n.$$.fragment),r=de(),s=oe("div"),a=oe("div"),o=oe("div"),N(l.$$.fragment),_=de(),G&&G.c(),b=de(),N(w.$$.fragment),this.h()},l(Q){e=ae(Q,"DIV",{class:!0});var ge=$e(e);j(n.$$.fragment,ge),r=pe(ge),s=ae(ge,"DIV",{class:!0});var le=$e(s);a=ae(le,"DIV",{class:!0});var re=$e(a);o=ae(re,"DIV",{class:!0});var me=$e(o);j(l.$$.fragment,me),_=pe(me),G&&G.l(me),me.forEach(S),re.forEach(S),b=pe(le),j(w.$$.fragment,le),le.forEach(S),ge.forEach(S),this.h()},h(){te(o,"class","flex items-center gap-2 w-full"),te(a,"class","relative overflow-x-auto flex sm:overflow-x-visible"),te(s,"class","flex flex-1 sm:items-center grow justify-between gap-2 flex-col sm:flex-row relative overflow-x-auto sm:overflow-x-visible"),te(e,"class","flex items-center gap-2 flex-wrap")},m(Q,ge){R(Q,e,ge),V(n,e,null),ce(e,r),ce(e,s),ce(s,a),ce(a,o),V(l,o,null),ce(o,_),G&&G.m(o,null),ce(s,b),V(w,s,null),E=!0},p(Q,[ge]){const le={};!t&&ge&2&&(t=!0,le.value=Q[1].name,xn(()=>t=!1)),n.$set(le);const re={};ge&4&&(re.options=Q[2]),!d&&ge&2&&(d=!0,re.filterValues=Q[1].features,xn(()=>d=!1)),l.$set(re),Q[3]?G?(G.p(Q,ge),ge&8&&T(G,1)):(G=t0(Q),G.c(),T(G,1),G.m(o,null)):G&&(ht(),I(G,1,1,()=>{G=null}),dt());const me={};ge&1&&(me.tableModel=Q[0]),w.$set(me)},i(Q){E||(T(n.$$.fragment,Q),T(l.$$.fragment,Q),T(G),T(w.$$.fragment,Q),E=!0)},o(Q){I(n.$$.fragment,Q),I(l.$$.fragment,Q),I(G),I(w.$$.fragment,Q),E=!1},d(Q){Q&&S(e),U(n),U(l),G&&G.d(),U(w)}}}function tO(i,e,n){let t,r,{tableModel:s}=e,a;er(async()=>{try{const L=await(await fetch("/api/poi/features")).json();n(2,a=L.allPOIFeatures)}catch(E){console.error(E)}});const{pluginStates:l}=s,{filterValues:d}=l.colFilter;sn(i,d,E=>n(1,r=E));function _(E){i.$$.not_equal(r.name,E)&&(r.name=E,d.set(r))}function b(E){i.$$.not_equal(r.features,E)&&(r.features=E,d.set(r))}const w=()=>{Zr(d,r.name="",r),Zr(d,r.features=[],r)};return i.$$set=E=>{"tableModel"in E&&n(0,s=E.tableModel)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=Object.values({...r}).some(E=>E.length>0||typeof E=="string"&&E.length>0))},[s,r,a,t,d,_,b,w]}let nO=class extends it{constructor(e){super(),ot(this,e,tO,eO,nt,{tableModel:0})}};function rO(i){let e,n;return e=new fv({props:{placeholder:"Select page size"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function sO(i){let e;return{c(){e=Ve("10")},l(n){e=Ue(n,"10")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function iO(i){let e;return{c(){e=Ve("20")},l(n){e=Ue(n,"20")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function oO(i){let e;return{c(){e=Ve("30")},l(n){e=Ue(n,"30")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function aO(i){let e;return{c(){e=Ve("40")},l(n){e=Ue(n,"40")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function lO(i){let e;return{c(){e=Ve("50")},l(n){e=Ue(n,"50")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function cO(i){let e,n,t,r,s,a,o,l,d,_;return e=new Ui({props:{value:"10",$$slots:{default:[sO]},$$scope:{ctx:i}}}),t=new Ui({props:{value:"20",$$slots:{default:[iO]},$$scope:{ctx:i}}}),s=new Ui({props:{value:"30",$$slots:{default:[oO]},$$scope:{ctx:i}}}),o=new Ui({props:{value:"40",$$slots:{default:[aO]},$$scope:{ctx:i}}}),d=new Ui({props:{value:"50",$$slots:{default:[lO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),N(s.$$.fragment),a=de(),N(o.$$.fragment),l=de(),N(d.$$.fragment)},l(b){j(e.$$.fragment,b),n=pe(b),j(t.$$.fragment,b),r=pe(b),j(s.$$.fragment,b),a=pe(b),j(o.$$.fragment,b),l=pe(b),j(d.$$.fragment,b)},m(b,w){V(e,b,w),R(b,n,w),V(t,b,w),R(b,r,w),V(s,b,w),R(b,a,w),V(o,b,w),R(b,l,w),V(d,b,w),_=!0},p(b,w){const E={};w&1048576&&(E.$$scope={dirty:w,ctx:b}),e.$set(E);const L={};w&1048576&&(L.$$scope={dirty:w,ctx:b}),t.$set(L);const M={};w&1048576&&(M.$$scope={dirty:w,ctx:b}),s.$set(M);const F={};w&1048576&&(F.$$scope={dirty:w,ctx:b}),o.$set(F);const q={};w&1048576&&(q.$$scope={dirty:w,ctx:b}),d.$set(q)},i(b){_||(T(e.$$.fragment,b),T(t.$$.fragment,b),T(s.$$.fragment,b),T(o.$$.fragment,b),T(d.$$.fragment,b),_=!0)},o(b){I(e.$$.fragment,b),I(t.$$.fragment,b),I(s.$$.fragment,b),I(o.$$.fragment,b),I(d.$$.fragment,b),_=!1},d(b){b&&(S(n),S(r),S(a),S(l)),U(e,b),U(t,b),U(s,b),U(o,b),U(d,b)}}}function uO(i){let e,n,t,r;return e=new iv({props:{class:"w-[180px]",$$slots:{default:[rO]},$$scope:{ctx:i}}}),t=new ov({props:{$$slots:{default:[cO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1048576&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&1048576&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function fO(i){let e,n="Go to first page",t,r,s;return r=new av({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=de(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-lc32pz"&&(e.textContent=n),t=pe(a),j(r.$$.fragment,a),this.h()},h(){te(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function hO(i){let e,n="Go to previous page",t,r,s;return r=new lv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=de(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-2don1e"&&(e.textContent=n),t=pe(a),j(r.$$.fragment,a),this.h()},h(){te(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function dO(i){let e,n="Go to next page",t,r,s;return r=new cv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=de(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-10zd0e2"&&(e.textContent=n),t=pe(a),j(r.$$.fragment,a),this.h()},h(){te(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function pO(i){let e,n="Go to last page",t,r,s;return r=new uv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=de(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-17pj58n"&&(e.textContent=n),t=pe(a),j(r.$$.fragment,a),this.h()},h(){te(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function mO(i){let e,n,t,r="Rows per page",s,a,o,l,d,_=i[0]+1+"",b,w,E,L,M,F,q,G,Q,ge,le,re,me;return a=new sv({props:{onSelectedChange:i[14],selected:{value:10,label:"10"},$$slots:{default:[uO]},$$scope:{ctx:i}}}),F=new ns({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[fO]},$$scope:{ctx:i}}}),F.$on("click",i[15]),G=new ns({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[hO]},$$scope:{ctx:i}}}),G.$on("click",i[16]),ge=new ns({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[dO]},$$scope:{ctx:i}}}),ge.$on("click",i[17]),re=new ns({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[pO]},$$scope:{ctx:i}}}),re.$on("click",i[18]),{c(){e=oe("div"),n=oe("div"),t=oe("p"),t.textContent=r,s=de(),N(a.$$.fragment),o=de(),l=oe("div"),d=Ve("Page "),b=Ve(_),w=Ve(" of "),E=Ve(i[1]),L=de(),M=oe("div"),N(F.$$.fragment),q=de(),N(G.$$.fragment),Q=de(),N(ge.$$.fragment),le=de(),N(re.$$.fragment),this.h()},l(se){e=ae(se,"DIV",{class:!0});var Z=$e(e);n=ae(Z,"DIV",{class:!0});var Y=$e(n);t=ae(Y,"P",{class:!0,"data-svelte-h":!0}),an(t)!=="svelte-opj3eb"&&(t.textContent=r),s=pe(Y),j(a.$$.fragment,Y),Y.forEach(S),o=pe(Z),l=ae(Z,"DIV",{class:!0});var ie=$e(l);d=Ue(ie,"Page "),b=Ue(ie,_),w=Ue(ie," of "),E=Ue(ie,i[1]),ie.forEach(S),L=pe(Z),M=ae(Z,"DIV",{class:!0});var be=$e(M);j(F.$$.fragment,be),q=pe(be),j(G.$$.fragment,be),Q=pe(be),j(ge.$$.fragment,be),le=pe(be),j(re.$$.fragment,be),be.forEach(S),Z.forEach(S),this.h()},h(){te(t,"class","text-sm font-medium"),te(n,"class","flex items-center space-x-2"),te(l,"class","flex w-[100px] items-center justify-center text-sm font-medium"),te(M,"class","flex items-center space-x-2"),te(e,"class","flex items-center space-x-6 lg:space-x-8 flex-wrap gap-2")},m(se,Z){R(se,e,Z),ce(e,n),ce(n,t),ce(n,s),V(a,n,null),ce(e,o),ce(e,l),ce(l,d),ce(l,b),ce(l,w),ce(l,E),ce(e,L),ce(e,M),V(F,M,null),ce(M,q),V(G,M,null),ce(M,Q),V(ge,M,null),ce(M,le),V(re,M,null),me=!0},p(se,[Z]){const Y={};Z&1048576&&(Y.$$scope={dirty:Z,ctx:se}),a.$set(Y),(!me||Z&1)&&_!==(_=se[0]+1+"")&&Ft(b,_),(!me||Z&2)&&Ft(E,se[1]);const ie={};Z&4&&(ie.disabled=!se[2]),Z&1048576&&(ie.$$scope={dirty:Z,ctx:se}),F.$set(ie);const be={};Z&4&&(be.disabled=!se[2]),Z&1048576&&(be.$$scope={dirty:Z,ctx:se}),G.$set(be);const fe={};Z&8&&(fe.disabled=!se[3]),Z&1048576&&(fe.$$scope={dirty:Z,ctx:se}),ge.$set(fe);const ke={};Z&8&&(ke.disabled=!se[3]),Z&1048576&&(ke.$$scope={dirty:Z,ctx:se}),re.$set(ke)},i(se){me||(T(a.$$.fragment,se),T(F.$$.fragment,se),T(G.$$.fragment,se),T(ge.$$.fragment,se),T(re.$$.fragment,se),me=!0)},o(se){I(a.$$.fragment,se),I(F.$$.fragment,se),I(G.$$.fragment,se),I(ge.$$.fragment,se),I(re.$$.fragment,se),me=!1},d(se){se&&S(e),U(a),U(F),U(G),U(ge),U(re)}}}function _O(i,e,n){let t,r,s,a,o,l,{tableModel:d}=e;const{pageRows:_,pluginStates:b,rows:w}=d;sn(i,_,me=>n(5,l=me)),sn(i,w,me=>n(4,o=me));const{hasNextPage:E,hasPreviousPage:L,pageIndex:M,pageCount:F,pageSize:q}=b.page;sn(i,E,me=>n(3,a=me)),sn(i,L,me=>n(2,s=me)),sn(i,M,me=>n(0,t=me)),sn(i,F,me=>n(1,r=me));const G=me=>q.set(Number(me==null?void 0:me.value)),Q=()=>Zr(M,t=0,t),ge=()=>Zr(M,t=t-1,t),le=()=>Zr(M,t=t+1,t),re=()=>Zr(M,t=Math.ceil(o.length/l.length)-1,t);return i.$$set=me=>{"tableModel"in me&&n(13,d=me.tableModel)},[t,r,s,a,o,l,_,w,E,L,M,F,q,d,G,Q,ge,le,re]}let gO=class extends it{constructor(e){super(),ot(this,e,_O,mO,nt,{tableModel:13})}};function n0(i,e,n){const t=i.slice();return t[9]=e[n],t}function r0(i,e,n){const t=i.slice();return t[9]=e[n],t}function s0(i){let e,n,t,r,s,a,o,l;e=new yi({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new po({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[vO]},$$scope:{ctx:i}}});const d=[bO,yO],_=[];function b(w,E){return w[0].length>2?0:1}return a=b(i),o=_[a]=d[a](i),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),s=oe("div"),o.c(),this.h()},l(w){j(e.$$.fragment,w),n=pe(w),j(t.$$.fragment,w),r=pe(w),s=ae(w,"DIV",{class:!0});var E=$e(s);o.l(E),E.forEach(S),this.h()},h(){te(s,"class","hidden space-x-1 lg:flex")},m(w,E){V(e,w,E),R(w,n,E),V(t,w,E),R(w,r,E),R(w,s,E),_[a].m(s,null),l=!0},p(w,E){const L={};E&32769&&(L.$$scope={dirty:E,ctx:w}),t.$set(L);let M=a;a=b(w),a===M?_[a].p(w,E):(ht(),I(_[M],1,1,()=>{_[M]=null}),dt(),o=_[a],o?o.p(w,E):(o=_[a]=d[a](w),o.c()),T(o,1),o.m(s,null))},i(w){l||(T(e.$$.fragment,w),T(t.$$.fragment,w),T(o),l=!0)},o(w){I(e.$$.fragment,w),I(t.$$.fragment,w),I(o),l=!1},d(w){w&&(S(n),S(r),S(s)),U(e,w),U(t,w),_[a].d()}}}function vO(i){let e=i[0].length+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&Ft(n,e)},d(t){t&&S(n)}}}function yO(i){let e,n,t=Qt(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=i0(r0(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Fe()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Fe()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&1){t=Qt(a[0]);let l;for(l=0;l<t.length;l+=1){const d=r0(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=i0(d),r[l].c(),T(r[l],1),r[l].m(e.parentNode,e))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function bO(i){let e,n;return e=new po({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[wO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function $O(i){let e=i[9]+"",n,t;return{c(){n=Ve(e),t=de()},l(r){n=Ue(r,e),t=pe(r)},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[9]+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function i0(i){let e,n;return e=new po({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[$O]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function wO(i){let e=i[0].length+"",n,t;return{c(){n=Ve(e),t=Ve(" Selected")},l(r){n=Ue(r,e),t=Ue(r," Selected")},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function xO(i){let e,n,t,r,s,a;e=new Ed({props:{class:"mr-2 h-4 w-4"}});let o=i[0].length>0&&s0(i);return{c(){N(e.$$.fragment),n=de(),t=Ve(i[1]),r=de(),o&&o.c(),s=Fe()},l(l){j(e.$$.fragment,l),n=pe(l),t=Ue(l,i[1]),r=pe(l),o&&o.l(l),s=Fe()},m(l,d){V(e,l,d),R(l,n,d),R(l,t,d),R(l,r,d),o&&o.m(l,d),R(l,s,d),a=!0},p(l,d){(!a||d&2)&&Ft(t,l[1]),l[0].length>0?o?(o.p(l,d),d&1&&T(o,1)):(o=s0(l),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(ht(),I(o,1,1,()=>{o=null}),dt())},i(l){a||(T(e.$$.fragment,l),T(o),a=!0)},o(l){I(e.$$.fragment,l),I(o),a=!1},d(l){l&&(S(n),S(t),S(r),S(s)),U(e,l),o&&o.d(l)}}}function kO(i){let e,n;return e=new ns({props:{builders:[i[12]],variant:"outline",size:"sm",class:"h-8 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[xO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&32771&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function CO(i){let e;return{c(){e=Ve("No results found.")},l(n){e=Ue(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function o0(i){let e,n=i[3][i[9]]+"",t;return{c(){e=oe("span"),t=Ve(n),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=$e(e);t=Ue(s,n),s.forEach(S),this.h()},h(){te(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){R(r,e,s),ce(e,t)},p(r,s){s&12&&n!==(n=r[3][r[9]]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function SO(i){let e,n,t,r,s,a=i[9]+"",o,l,d,_;n=new Pd({props:{className:qt("h-4 w-4")}});let b=i[3][i[9]]&&o0(i);return{c(){e=oe("div"),N(n.$$.fragment),r=de(),s=oe("span"),o=Ve(a),l=de(),b&&b.c(),d=de(),this.h()},l(w){e=ae(w,"DIV",{class:!0});var E=$e(e);j(n.$$.fragment,E),E.forEach(S),r=pe(w),s=ae(w,"SPAN",{});var L=$e(s);o=Ue(L,a),L.forEach(S),l=pe(w),b&&b.l(w),d=pe(w),this.h()},h(){te(e,"class",t=qt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m(w,E){R(w,e,E),V(n,e,null),R(w,r,E),R(w,s,E),ce(s,o),R(w,l,E),b&&b.m(w,E),R(w,d,E),_=!0},p(w,E){(!_||E&5&&t!==(t=qt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",w[0].includes(w[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&te(e,"class",t),(!_||E&4)&&a!==(a=w[9]+"")&&Ft(o,a),w[3][w[9]]?b?b.p(w,E):(b=o0(w),b.c(),b.m(d.parentNode,d)):b&&(b.d(1),b=null)},i(w){_||(T(n.$$.fragment,w),_=!0)},o(w){I(n.$$.fragment,w),_=!1},d(w){w&&(S(e),S(r),S(s),S(l),S(d)),U(n),b&&b.d(w)}}}function a0(i){let e,n;return e=new Ll({props:{class:"cursor-pointer",value:i[9],onSelect:i[6],$$slots:{default:[SO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[9]),r&32781&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function TO(i){let e,n,t=Qt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=a0(n0(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Fe()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Fe()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&45){t=Qt(a[2]);let l;for(l=0;l<t.length;l+=1){const d=n0(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=a0(d),r[l].c(),T(r[l],1),r[l].m(e.parentNode,e))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function l0(i){let e,n,t,r;return e=new Jd({}),t=new Ll({props:{class:"justify-center text-center cursor-pointer",onSelect:i[7],$$slots:{default:[IO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.onSelect=s[7]),a&32768&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function IO(i){let e;return{c(){e=Ve("Clear Filter")},l(n){e=Ue(n,"Clear Filter")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function EO(i){let e,n,t,r,s,a;e=new Zd({props:{$$slots:{default:[CO]},$$scope:{ctx:i}}}),t=new Wd({props:{$$slots:{default:[TO]},$$scope:{ctx:i}}});let o=i[0].length>0&&l0(i);return{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),o&&o.c(),s=Fe()},l(l){j(e.$$.fragment,l),n=pe(l),j(t.$$.fragment,l),r=pe(l),o&&o.l(l),s=Fe()},m(l,d){V(e,l,d),R(l,n,d),V(t,l,d),R(l,r,d),o&&o.m(l,d),R(l,s,d),a=!0},p(l,d){const _={};d&32768&&(_.$$scope={dirty:d,ctx:l}),e.$set(_);const b={};d&32781&&(b.$$scope={dirty:d,ctx:l}),t.$set(b),l[0].length>0?o?(o.p(l,d),d&1&&T(o,1)):(o=l0(l),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(ht(),I(o,1,1,()=>{o=null}),dt())},i(l){a||(T(e.$$.fragment,l),T(t.$$.fragment,l),T(o),a=!0)},o(l){I(e.$$.fragment,l),I(t.$$.fragment,l),I(o),a=!1},d(l){l&&(S(n),S(r),S(s)),U(e,l),U(t,l),o&&o.d(l)}}}function PO(i){let e,n,t,r;return e=new Kd({props:{placeholder:i[1]}}),t=new Xd({props:{$$slots:{default:[EO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.placeholder=s[1]),e.$set(o);const l={};a&32781&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function AO(i){let e,n;return e=new Hd({props:{loop:!0,$$slots:{default:[PO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function MO(i){let e,n,t,r;return e=new ep({props:{asChild:!0,$$slots:{default:[kO,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new Yd({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[AO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&36867&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&32783&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function DO(i){let e,n,t;function r(a){i[8](a)}let s={$$slots:{default:[MO]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.open=i[4]),e=new Qd({props:s}),jt.push(()=>kn(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,[o]){const l={};o&32783&&(l.$$scope={dirty:o,ctx:a}),!n&&o&16&&(n=!0,l.open=a[4],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function zO(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{options:s}=e,{counts:a={}}=e,o=!1;const l=w=>{Array.isArray(t)&&t.includes(w)?n(0,t=t.filter(E=>E!==w)):n(0,t=[...Array.isArray(t)?t:[],w])},d=w=>{l(w)},_=()=>{n(0,t=[])};function b(w){o=w,n(4,o)}return i.$$set=w=>{"filterValues"in w&&n(0,t=w.filterValues),"title"in w&&n(1,r=w.title),"options"in w&&n(2,s=w.options),"counts"in w&&n(3,a=w.counts)},[t,r,s,a,o,l,d,_,b]}let LO=class extends it{constructor(e){super(),ot(this,e,zO,DO,nt,{filterValues:0,title:1,options:2,counts:3})}};function c0(i,e,n){const t=i.slice();return t[9]=e[n],t[10]=e,t[11]=n,t}function RO(i){let e,n,t;return e=new pv({props:{class:"mr-2 h-4 w-4"}}),{c(){N(e.$$.fragment),n=Ve(`
			View`)},l(r){j(e.$$.fragment,r),n=Ue(r,`
			View`)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function OO(i){let e,n;return e=new ns({props:{variant:"outline",size:"sm",class:"h-8 flex hover:bg-accent hover:text-accent-foreground bg-background",builders:[i[12]],$$slots:{default:[RO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&8192&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function FO(i){let e;return{c(){e=Ve("Toggle columns")},l(n){e=Ue(n,"Toggle columns")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function BO(i){let e,n,t;function r(a){i[5](a,i[9])}let s={$$slots:{default:[NO]},$$scope:{ctx:i}};return i[0][i[9].id]!==void 0&&(s.checked=i[0][i[9].id]),e=new mv({props:s}),jt.push(()=>kn(e,"checked",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){i=a;const l={};o&8192&&(l.$$scope={dirty:o,ctx:i}),!n&&o&3&&(n=!0,l.checked=i[0][i[9].id],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function NO(i){let e=i[9].header+"",n,t;return{c(){n=Ve(e),t=de()},l(r){n=Ue(r,e),t=pe(r)},m(r,s){R(r,n,s),R(r,t,s)},p:gt,d(r){r&&(S(n),S(t))}}}function u0(i){let e=i[3].includes(i[9].id),n,t,r=e&&BO(i);return{c(){r&&r.c(),n=Fe()},l(s){r&&r.l(s),n=Fe()},m(s,a){r&&r.m(s,a),R(s,n,a),t=!0},p(s,a){e&&r.p(s,a)},i(s){t||(T(r),t=!0)},o(s){I(r),t=!1},d(s){s&&S(n),r&&r.d(s)}}}function VO(i){let e,n,t,r,s,a;e=new hv({props:{$$slots:{default:[FO]},$$scope:{ctx:i}}}),t=new dv({});let o=Qt(i[1]),l=[];for(let _=0;_<o.length;_+=1)l[_]=u0(c0(i,o,_));const d=_=>I(l[_],1,1,()=>{l[_]=null});return{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de();for(let _=0;_<l.length;_+=1)l[_].c();s=Fe()},l(_){j(e.$$.fragment,_),n=pe(_),j(t.$$.fragment,_),r=pe(_);for(let b=0;b<l.length;b+=1)l[b].l(_);s=Fe()},m(_,b){V(e,_,b),R(_,n,b),V(t,_,b),R(_,r,b);for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(_,b);R(_,s,b),a=!0},p(_,b){const w={};if(b&8192&&(w.$$scope={dirty:b,ctx:_}),e.$set(w),b&11){o=Qt(_[1]);let E;for(E=0;E<o.length;E+=1){const L=c0(_,o,E);l[E]?(l[E].p(L,b),T(l[E],1)):(l[E]=u0(L),l[E].c(),T(l[E],1),l[E].m(s.parentNode,s))}for(ht(),E=o.length;E<l.length;E+=1)d(E);dt()}},i(_){if(!a){T(e.$$.fragment,_),T(t.$$.fragment,_);for(let b=0;b<o.length;b+=1)T(l[b]);a=!0}},o(_){I(e.$$.fragment,_),I(t.$$.fragment,_),l=l.filter(Boolean);for(let b=0;b<l.length;b+=1)I(l[b]);a=!1},d(_){_&&(S(n),S(r),S(s)),U(e,_),U(t,_),ls(l,_)}}}function UO(i){let e,n,t,r;return e=new ru({props:{asChild:!0,$$slots:{default:[OO,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new su({props:{$$slots:{default:[VO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&12288&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&8193&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function jO(i){let e,n;return e=new nu({props:{$$slots:{default:[UO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&8193&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function qO(i,e,n){let t,{tableModel:r}=e;const{pluginStates:s,flatColumns:a}=r,{hiddenColumnIds:o}=s.hide;sn(i,o,w=>n(6,t=w));const l=a.map(w=>w.id);let d=Object.fromEntries(l.map(w=>[w,!0]));const _=["name","features"];function b(w,E){i.$$.not_equal(d[E.id],w)&&(d[E.id]=w,n(0,d))}return i.$$set=w=>{"tableModel"in w&&n(4,r=w.tableModel)},i.$$.update=()=>{i.$$.dirty&1&&Zr(o,t=Object.entries(d).filter(([,w])=>!w).map(([w])=>w),t)},[d,a,o,_,r,b]}let GO=class extends it{constructor(e){super(),ot(this,e,qO,jO,nt,{tableModel:4})}};function f0(i,e,n){const t=i.slice();return t[14]=e[n],t}function h0(i,e,n){const t=i.slice();return t[18]=e[n],t}function d0(i,e,n){const t=i.slice();return t[22]=e[n],t}function p0(i,e,n){const t=i.slice();return t[18]=e[n],t}function HO(i){let e,n;return e=new jf({props:{of:i[18].render()}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.of=t[18].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function ZO(i){let e,n;return e=new YR({props:{props:i[27],$$slots:{default:[HO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&134217728&&(s.props=t[27]),r&268435460&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function WO(i){let e,n,t;const r=[i[21]];let s={$$slots:{default:[ZO]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Ce(s,r[a]);return e=new kv({props:s}),{c(){N(e.$$.fragment),n=de()},l(a){j(e.$$.fragment,a),n=pe(a)},m(a,o){V(e,a,o),R(a,n,o),t=!0},p(a,o){const l=o&2097152?Pt(r,[mn(a[21])]):{};o&402653188&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){a&&S(n),U(e,a)}}}function m0(i,e){let n,t,r;return t=new Uo({props:{attrs:e[18].attrs(),props:e[18].props(),$$slots:{default:[WO,({attrs:s,props:a})=>({21:s,27:a}),({attrs:s,props:a})=>(s?2097152:0)|(a?134217728:0)]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&4&&(o.attrs=e[18].attrs()),a&4&&(o.props=e[18].props()),a&404750340&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function KO(i){let e=[],n=new Map,t,r,s=Qt(i[22].cells);const a=o=>o[18].id;for(let o=0;o<s.length;o+=1){let l=p0(i,s,o),d=a(l);n.set(d,e[o]=m0(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&136314884&&(s=Qt(o[22].cells),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,m0,t,p0),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function XO(i){let e,n,t;return e=new Uf({props:{$$slots:{default:[KO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de()},l(r){j(e.$$.fragment,r),n=pe(r)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p(r,s){const a={};s&268435460&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function _0(i){let e,n;return e=new Uo({props:{rowAttrs:i[22].attrs(),$$slots:{default:[XO]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.rowAttrs=t[22].attrs()),r&268435460&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function JO(i){let e,n,t=Qt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=_0(d0(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Fe()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Fe()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&136314884){t=Qt(a[2]);let l;for(l=0;l<t.length;l+=1){const d=d0(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=_0(d),r[l].c(),T(r[l],1),r[l].m(e.parentNode,e))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function YO(i){let e,n;return e=new jf({props:{of:i[18].render()}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.of=t[18].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function QO(i){let e,n,t;const r=[i[21]];let s={$$slots:{default:[YO]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Ce(s,r[a]);return e=new Cv({props:s}),{c(){N(e.$$.fragment),n=de()},l(a){j(e.$$.fragment,a),n=pe(a)},m(a,o){V(e,a,o),R(a,n,o),t=!0},p(a,o){const l=o&2097152?Pt(r,[mn(a[21])]):{};o&268435472&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){a&&S(n),U(e,a)}}}function g0(i,e){let n,t,r;return t=new Uo({props:{attrs:e[18].attrs(),$$slots:{default:[QO,({attrs:s})=>({21:s}),({attrs:s})=>s?2097152:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.attrs=e[18].attrs()),a&270532624&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function e8(i){let e=[],n=new Map,t,r,s=Qt(i[14].cells);const a=o=>o[18].id;for(let o=0;o<s.length;o+=1){let l=h0(i,s,o),d=a(l);n.set(d,e[o]=g0(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&2097168&&(s=Qt(o[14].cells),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,g0,t,h0),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function t8(i){let e,n,t;const r=[i[17],{class:"cursor-pointer"}];function s(){return i[11](i[14])}let a={$$slots:{default:[e8]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ce(a,r[o]);return e=new Uf({props:a}),e.$on("click",s),{c(){N(e.$$.fragment),n=de()},l(o){j(e.$$.fragment,o),n=pe(o)},m(o,l){V(e,o,l),R(o,n,l),t=!0},p(o,l){i=o;const d=l&131072?Pt(r,[mn(i[17]),r[1]]):{};l&268435472&&(d.$$scope={dirty:l,ctx:i}),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){o&&S(n),U(e,o)}}}function v0(i,e){let n,t,r;return t=new Uo({props:{rowAttrs:e[14].attrs(),$$slots:{default:[t8,({rowAttrs:s})=>({17:s}),({rowAttrs:s})=>s?131072:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.rowAttrs=e[14].attrs()),a&268566544&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function n8(i){let e=[],n=new Map,t,r,s=Qt(i[4]);const a=o=>o[14].id;for(let o=0;o<s.length;o+=1){let l=f0(i,s,o),d=a(l);n.set(d,e[o]=v0(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&2228272&&(s=Qt(o[4]),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,v0,t,f0),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function r8(i){let e,n,t,r;e=new wv({props:{$$slots:{default:[JO]},$$scope:{ctx:i}}});const s=[i[3]];let a={$$slots:{default:[n8]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Ce(a,s[o]);return t=new xv({props:a}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),r=!0},p(o,l){const d={};l&268435460&&(d.$$scope={dirty:l,ctx:o}),e.$set(d);const _=l&8?Pt(s,[mn(o[3])]):{};l&268435472&&(_.$$scope={dirty:l,ctx:o}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function s8(i){let e,n;return e=new gO({props:{tableModel:i[6]}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function i8(i){let e,n="No POIs in Favourites";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-cqoewt"&&(e.textContent=n),this.h()},h(){te(e,"class","text-center text-xl")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function o8(i){let e,n,t,r,s,a,o,l,d;n=new nO({props:{tableModel:i[6]}});const _=[i[1]];let b={$$slots:{default:[r8]},$$scope:{ctx:i}};for(let M=0;M<_.length;M+=1)b=Ce(b,_[M]);s=new _v({props:b});const w=[i8,s8],E=[];function L(M,F){return M[0].length===0?0:1}return o=L(i),l=E[o]=w[o](i),{c(){e=oe("div"),N(n.$$.fragment),t=de(),r=oe("div"),N(s.$$.fragment),a=de(),l.c(),this.h()},l(M){e=ae(M,"DIV",{class:!0});var F=$e(e);j(n.$$.fragment,F),t=pe(F),r=ae(F,"DIV",{class:!0});var q=$e(r);j(s.$$.fragment,q),q.forEach(S),a=pe(F),l.l(F),F.forEach(S),this.h()},h(){te(r,"class","rounded-md border"),te(e,"class","space-y-4")},m(M,F){R(M,e,F),V(n,e,null),ce(e,t),ce(e,r),V(s,r,null),ce(e,a),E[o].m(e,null),d=!0},p(M,[F]){const q=F&2?Pt(_,[mn(M[1])]):{};F&268435484&&(q.$$scope={dirty:F,ctx:M}),s.$set(q);let G=o;o=L(M),o===G?E[o].p(M,F):(ht(),I(E[G],1,1,()=>{E[G]=null}),dt(),l=E[o],l?l.p(M,F):(l=E[o]=w[o](M),l.c()),T(l,1),l.m(e,null))},i(M){d||(T(n.$$.fragment,M),T(s.$$.fragment,M),T(l),d=!0)},o(M){I(n.$$.fragment,M),I(s.$$.fragment,M),I(l),d=!1},d(M){M&&S(e),U(n),U(s),E[o].d()}}}function a8(i,e,n){let t,r,s,a,{data:o}=e;const l=gv(va(o),{sort:vv({toggleOrder:["asc","desc"]}),page:yv(),colFilter:bv(),hide:$v()}),d=l.createColumns([l.column({accessor:"name",header:"Name",id:"name",cell:({value:q,row:G})=>G.isData()?qc(e0,{value:q}):q,plugins:{colFilter:{fn:({filterValue:q,value:G})=>G.toLowerCase().includes(q.toLowerCase()),initialFilterValue:"",render:({filterValue:q})=>as(q)}}}),l.column({accessor:"features",header:"Features",id:"features",cell:({value:q,row:G})=>G.isData()?qc(e0,{value:q.join(", ")}):q.join(""),plugins:{colFilter:{fn:({filterValue:q,value:G})=>q.length===0||!Array.isArray(q)?!0:q.some(Q=>G.includes(Q)),initialFilterValue:[],render:({filterValue:q})=>as(q)},sort:{disable:!0}}})]),_=q=>q.original,b=l.createViewModel(d),{headerRows:w,pageRows:E,tableAttrs:L,tableBodyAttrs:M}=b;sn(i,w,q=>n(2,r=q)),sn(i,E,q=>n(4,a=q)),sn(i,L,q=>n(1,t=q)),sn(i,M,q=>n(3,s=q));const F=q=>ya("/app?focus-poi="+encodeURIComponent(_(q).id));return i.$$set=q=>{"data"in q&&n(0,o=q.data)},[o,t,r,s,a,_,b,w,E,L,M,F]}let l8=class extends it{constructor(e){super(),ot(this,e,a8,o8,nt,{data:0})}};function c8(i){let e;return{c(){e=Ve("Check-ins")},l(n){e=Ue(n,"Check-ins")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function u8(i){let e,n,t,r;return e=new _s({props:{tag:"h2",class:"mb-3",$$slots:{default:[c8]},$$scope:{ctx:i}}}),t=new yi({}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&256&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function f8(i){let e,n;return e=new l8({props:{data:i[2]}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.data=t[2]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function h8(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){te(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function d8(i){let e,n,t,r;const s=[h8,f8],a=[];function o(l,d){return l[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function p8(i){let e,n,t,r,s;return n=new Kr({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[u8]},$$scope:{ctx:i}}}),r=new Lr({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[d8]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=de(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=$e(e);j(n.$$.fragment,o),o.forEach(S),t=pe(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[6](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const l={};o&256&&(l.$$scope={dirty:o,ctx:a}),n.$set(l);const d={};o&2&&(d.style=`height: calc(100% - ${a[1]}px);`),o&268&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){I(n.$$.fragment,a),I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[6](null),U(r,a)}}}function m8(i){let e,n,t,r,s;return n=new nr({props:{class:"relative p-4 h-full",$$slots:{default:[p8]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=$e(e);j(n.$$.fragment,o),o.forEach(S),this.h()},h(){te(e,"class","flex flex-col p-4 relative h-full")},m(a,o){R(a,e,o),V(n,e,null),t=!0,r||(s=bt(window,"resize",i[4]),r=!0)},p(a,[o]){const l={};o&271&&(l.$$scope={dirty:o,ctx:a}),n.$set(l)},i(a){t||(T(n.$$.fragment,a),t=!0)},o(a){I(n.$$.fragment,a),t=!1},d(a){a&&S(e),U(n),r=!1,s()}}}function _8(i,e,n){let{slug:t}=e,r,s=64;const a=()=>{const b=r.offsetHeight;b!==void 0&&n(1,s=b)};er(a);let o=[],l=!0;er(async()=>{const b=await fetch("/api/check-in");if(b.ok){const w=await b.json(),E=[];w.forEach(L=>{const M=$a.decode(L);if(qf.isRight(M)){const F=M.right;E.push(F)}else console.error("Invalid POI object received from API: ",M.left)}),n(2,o=E),n(3,l=!1)}});function _(b){jt[b?"unshift":"push"](()=>{r=b,n(0,r)})}return i.$$set=b=>{"slug"in b&&n(5,t=b.slug)},[r,s,o,l,a,t,_]}class g8 extends it{constructor(e){super(),ot(this,e,_8,m8,nt,{slug:5})}}function v8(i){let e,n;return{c(){e=oe("span"),n=Ve(i[0]),this.h()},l(t){e=ae(t,"SPAN",{class:!0});var r=$e(e);n=Ue(r,i[0]),r.forEach(S),this.h()},h(){te(e,"class","lg:max-w-[320px] sm:max-w-[160px] max-w-[80px] truncate font-medium")},m(t,r){R(t,e,r),ce(e,n)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&S(e)}}}function y8(i){let e,n;return{c(){e=oe("div"),n=Ve(i[0]),this.h()},l(t){e=ae(t,"DIV",{class:!0});var r=$e(e);n=Ue(r,i[0]),r.forEach(S),this.h()},h(){te(e,"class","text-xs flex items-center")},m(t,r){R(t,e,r),ce(e,n)},p(t,r){r&1&&Ft(n,t[0])},d(t){t&&S(e)}}}function b8(i){let e,n,t,r;return e=new No({props:{$$slots:{default:[v8]},$$scope:{ctx:i}}}),t=new Vo({props:{class:"w-fit h-fit py-2 px-2.5",$$slots:{default:[y8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&3&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&3&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function $8(i){let e,n,t;return n=new Oo({props:{$$slots:{default:[b8]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","flex space-x-2")},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,[s]){const a={};s&3&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function w8(i,e,n){let{value:t}=e;return i.$$set=r=>{"value"in r&&n(0,t=r.value)},[t]}class y0 extends it{constructor(e){super(),ot(this,e,w8,$8,nt,{value:0})}}function x8(i){let e,n,t,r="Open menu",s;return e=new oS({props:{class:"h-4 w-4"}}),{c(){N(e.$$.fragment),n=de(),t=oe("span"),t.textContent=r,this.h()},l(a){j(e.$$.fragment,a),n=pe(a),t=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(t)!=="svelte-rsbkxi"&&(t.textContent=r),this.h()},h(){te(t,"class","sr-only")},m(a,o){V(e,a,o),R(a,n,o),R(a,t,o),s=!0},p:gt,i(a){s||(T(e.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),s=!1},d(a){a&&(S(n),S(t)),U(e,a)}}}function k8(i){let e,n;return e=new ns({props:{variant:"ghost",builders:[i[4]],class:"flex h-8 w-8 p-0 data-[state=open]:bg-muted ml-auto hover:bg-accent hover:text-accent-foreground bg-background",$$slots:{default:[x8]},$$scope:{ctx:i}}}),e.$on("click",E8),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.builders=[t[4]]),r&32&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function C8(i){let e;return{c(){e=Ve("Remove From Favourites")},l(n){e=Ue(n,"Remove From Favourites")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function S8(i){let e,n;return e=new ns({props:{variant:"destructive",$$slots:{default:[C8]},$$scope:{ctx:i}}}),e.$on("click",i[3]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function T8(i){let e,n,t,r;return e=new ru({props:{asChild:!0,$$slots:{default:[k8,({builder:s})=>({4:s}),({builder:s})=>s?16:0]},$$scope:{ctx:i}}}),t=new su({props:{class:"w-[160px]",align:"end",$$slots:{default:[S8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&48&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&35&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function I8(i){let e,n;return e=new nu({props:{$$slots:{default:[T8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&35&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}const E8=i=>i.stopPropagation();function P8(i,e,n){let{row:t}=e,{rowId:r}=e,{removeFavourite:s}=e;const a=()=>s(r);return i.$$set=o=>{"row"in o&&n(2,t=o.row),"rowId"in o&&n(0,r=o.rowId),"removeFavourite"in o&&n(1,s=o.removeFavourite)},[r,s,t,a]}class A8 extends it{constructor(e){super(),ot(this,e,P8,I8,nt,{row:2,rowId:0,removeFavourite:1})}}function M8(i){let e;const n=i[4].default,t=$t(n,i,i[5],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,s){t&&t.m(r,s),e=!0},p(r,s){t&&t.p&&(!e||s&32)&&wt(t,n,r,r[5],e?kt(n,r[5],s,null):xt(r[5]),null)},i(r){e||(T(t,r),e=!0)},o(r){I(t,r),e=!1},d(r){t&&t.d(r)}}}function D8(i){let e,n,t,r;return n=new nu({props:{$$slots:{default:[U8]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(s){e=ae(s,"DIV",{class:!0});var a=$e(e);j(n.$$.fragment,a),a.forEach(S),this.h()},h(){te(e,"class",t=qt("flex items-center",i[0]))},m(s,a){R(s,e,a),V(n,e,null),r=!0},p(s,a){const o={};a&34&&(o.$$scope={dirty:a,ctx:s}),n.$set(o),(!r||a&1&&t!==(t=qt("flex items-center",s[0])))&&te(e,"class",t)},i(s){r||(T(n.$$.fragment,s),r=!0)},o(s){I(n.$$.fragment,s),r=!1},d(s){s&&S(e),U(n)}}}function z8(i){let e,n;return e=new Q0({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function L8(i){let e,n;return e=new ev({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function R8(i){let e,n;return e=new tv({props:{class:"ml-2 h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function O8(i){let e,n,t,r,s;const a=i[4].default,o=$t(a,i,i[5],null),l=[R8,L8,z8],d=[];function _(b,w){return b[1].sort.order==="desc"?0:b[1].sort.order==="asc"?1:2}return n=_(i),t=d[n]=l[n](i),{c(){o&&o.c(),e=de(),t.c(),r=Fe()},l(b){o&&o.l(b),e=pe(b),t.l(b),r=Fe()},m(b,w){o&&o.m(b,w),R(b,e,w),d[n].m(b,w),R(b,r,w),s=!0},p(b,w){o&&o.p&&(!s||w&32)&&wt(o,a,b,b[5],s?kt(a,b[5],w,null):xt(b[5]),null);let E=n;n=_(b),n!==E&&(ht(),I(d[E],1,1,()=>{d[E]=null}),dt(),t=d[n],t||(t=d[n]=l[n](b),t.c()),T(t,1),t.m(r.parentNode,r))},i(b){s||(T(o,b),T(t),s=!0)},o(b){I(o,b),I(t),s=!1},d(b){b&&(S(e),S(r)),o&&o.d(b),d[n].d(b)}}}function F8(i){let e,n;return e=new ns({props:{variant:"ghost",builders:[i[6]],class:"-ml-3 h-8 data-[state=open]:bg-accent",$$slots:{default:[O8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&64&&(s.builders=[t[6]]),r&34&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function B8(i){let e;return{c(){e=Ve("Asc")},l(n){e=Ue(n,"Asc")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function N8(i){let e;return{c(){e=Ve("Desc")},l(n){e=Ue(n,"Desc")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function V8(i){let e,n,t,r;return e=new Mf({props:{$$slots:{default:[B8]},$$scope:{ctx:i}}}),e.$on("click",i[2]),t=new Mf({props:{$$slots:{default:[N8]},$$scope:{ctx:i}}}),t.$on("click",i[3]),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&32&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function U8(i){let e,n,t,r;return e=new ru({props:{asChild:!0,$$slots:{default:[F8,({builder:s})=>({6:s}),({builder:s})=>s?64:0]},$$scope:{ctx:i}}}),t=new su({props:{align:"start",$$slots:{default:[V8]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&98&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&32&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function j8(i){let e,n,t,r;const s=[D8,M8],a=[];function o(l,d){return l[1].sort.disabled?1:0}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,[d]){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function q8(i,e,n){let{$$slots:t={},$$scope:r}=e,{class:s=void 0}=e,{props:a}=e;function o(d){a.sort.order!=="asc"&&a.sort.toggle(d)}function l(d){a.sort.order!=="desc"&&a.sort.toggle(d)}return i.$$set=d=>{"class"in d&&n(0,s=d.class),"props"in d&&n(1,a=d.props),"$$scope"in d&&n(5,r=d.$$scope)},[s,a,o,l,t,r]}class G8 extends it{constructor(e){super(),ot(this,e,q8,j8,nt,{class:0,props:1})}}function b0(i){let e,n;return e=new ns({props:{variant:"outline",class:"h-8 px-2 lg:px-3",$$slots:{default:[H8]},$$scope:{ctx:i}}}),e.$on("click",i[7]),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function H8(i){let e,n;return e=new rv({props:{class:"h-4 w-4"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function Z8(i){let e,n,t,r,s,a,o,l,d,_,b,w,E;function L(Q){i[5](Q)}let M={placeholder:"Filter by name...",class:"h-8 sm:w-[250px] lg:w-[350px] grow sm:grow-0 lg:grow-0 md:grow hover:bg-accent hover:text-accent-foreground bg-background focus-visible:m-0.5",type:"search"};i[1].name!==void 0&&(M.value=i[1].name),n=new nv({props:M}),jt.push(()=>kn(n,"value",L));function F(Q){i[6](Q)}let q={title:"POI Features",options:i[2]};i[1].features!==void 0&&(q.filterValues=i[1].features),l=new IF({props:q}),jt.push(()=>kn(l,"filterValues",F));let G=i[3]&&b0(i);return w=new FF({props:{tableModel:i[0]}}),{c(){e=oe("div"),N(n.$$.fragment),r=de(),s=oe("div"),a=oe("div"),o=oe("div"),N(l.$$.fragment),_=de(),G&&G.c(),b=de(),N(w.$$.fragment),this.h()},l(Q){e=ae(Q,"DIV",{class:!0});var ge=$e(e);j(n.$$.fragment,ge),r=pe(ge),s=ae(ge,"DIV",{class:!0});var le=$e(s);a=ae(le,"DIV",{class:!0});var re=$e(a);o=ae(re,"DIV",{class:!0});var me=$e(o);j(l.$$.fragment,me),_=pe(me),G&&G.l(me),me.forEach(S),re.forEach(S),b=pe(le),j(w.$$.fragment,le),le.forEach(S),ge.forEach(S),this.h()},h(){te(o,"class","flex items-center gap-2 w-full"),te(a,"class","relative overflow-x-auto flex sm:overflow-x-visible"),te(s,"class","flex flex-1 sm:items-center grow justify-between gap-2 flex-col sm:flex-row relative overflow-x-auto sm:overflow-x-visible"),te(e,"class","flex items-center gap-2 flex-wrap")},m(Q,ge){R(Q,e,ge),V(n,e,null),ce(e,r),ce(e,s),ce(s,a),ce(a,o),V(l,o,null),ce(o,_),G&&G.m(o,null),ce(s,b),V(w,s,null),E=!0},p(Q,[ge]){const le={};!t&&ge&2&&(t=!0,le.value=Q[1].name,xn(()=>t=!1)),n.$set(le);const re={};ge&4&&(re.options=Q[2]),!d&&ge&2&&(d=!0,re.filterValues=Q[1].features,xn(()=>d=!1)),l.$set(re),Q[3]?G?(G.p(Q,ge),ge&8&&T(G,1)):(G=b0(Q),G.c(),T(G,1),G.m(o,null)):G&&(ht(),I(G,1,1,()=>{G=null}),dt());const me={};ge&1&&(me.tableModel=Q[0]),w.$set(me)},i(Q){E||(T(n.$$.fragment,Q),T(l.$$.fragment,Q),T(G),T(w.$$.fragment,Q),E=!0)},o(Q){I(n.$$.fragment,Q),I(l.$$.fragment,Q),I(G),I(w.$$.fragment,Q),E=!1},d(Q){Q&&S(e),U(n),U(l),G&&G.d(),U(w)}}}function W8(i,e,n){let t,r,{tableModel:s}=e,a;er(async()=>{try{const L=await(await fetch("/api/poi/features")).json();n(2,a=L.allPOIFeatures)}catch(E){console.error(E)}});const{pluginStates:l}=s,{filterValues:d}=l.colFilter;sn(i,d,E=>n(1,r=E));function _(E){i.$$.not_equal(r.name,E)&&(r.name=E,d.set(r))}function b(E){i.$$.not_equal(r.features,E)&&(r.features=E,d.set(r))}const w=()=>{Zr(d,r.name="",r),Zr(d,r.features=[],r)};return i.$$set=E=>{"tableModel"in E&&n(0,s=E.tableModel)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=Object.values({...r}).some(E=>E.length>0||typeof E=="string"&&E.length>0))},[s,r,a,t,d,_,b,w]}class K8 extends it{constructor(e){super(),ot(this,e,W8,Z8,nt,{tableModel:0})}}function X8(i){let e,n;return e=new fv({props:{placeholder:"Select page size"}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function J8(i){let e;return{c(){e=Ve("10")},l(n){e=Ue(n,"10")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Y8(i){let e;return{c(){e=Ve("20")},l(n){e=Ue(n,"20")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function Q8(i){let e;return{c(){e=Ve("30")},l(n){e=Ue(n,"30")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function eF(i){let e;return{c(){e=Ve("40")},l(n){e=Ue(n,"40")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function tF(i){let e;return{c(){e=Ve("50")},l(n){e=Ue(n,"50")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function nF(i){let e,n,t,r,s,a,o,l,d,_;return e=new Ui({props:{value:"10",$$slots:{default:[J8]},$$scope:{ctx:i}}}),t=new Ui({props:{value:"20",$$slots:{default:[Y8]},$$scope:{ctx:i}}}),s=new Ui({props:{value:"30",$$slots:{default:[Q8]},$$scope:{ctx:i}}}),o=new Ui({props:{value:"40",$$slots:{default:[eF]},$$scope:{ctx:i}}}),d=new Ui({props:{value:"50",$$slots:{default:[tF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),N(s.$$.fragment),a=de(),N(o.$$.fragment),l=de(),N(d.$$.fragment)},l(b){j(e.$$.fragment,b),n=pe(b),j(t.$$.fragment,b),r=pe(b),j(s.$$.fragment,b),a=pe(b),j(o.$$.fragment,b),l=pe(b),j(d.$$.fragment,b)},m(b,w){V(e,b,w),R(b,n,w),V(t,b,w),R(b,r,w),V(s,b,w),R(b,a,w),V(o,b,w),R(b,l,w),V(d,b,w),_=!0},p(b,w){const E={};w&1048576&&(E.$$scope={dirty:w,ctx:b}),e.$set(E);const L={};w&1048576&&(L.$$scope={dirty:w,ctx:b}),t.$set(L);const M={};w&1048576&&(M.$$scope={dirty:w,ctx:b}),s.$set(M);const F={};w&1048576&&(F.$$scope={dirty:w,ctx:b}),o.$set(F);const q={};w&1048576&&(q.$$scope={dirty:w,ctx:b}),d.$set(q)},i(b){_||(T(e.$$.fragment,b),T(t.$$.fragment,b),T(s.$$.fragment,b),T(o.$$.fragment,b),T(d.$$.fragment,b),_=!0)},o(b){I(e.$$.fragment,b),I(t.$$.fragment,b),I(s.$$.fragment,b),I(o.$$.fragment,b),I(d.$$.fragment,b),_=!1},d(b){b&&(S(n),S(r),S(a),S(l)),U(e,b),U(t,b),U(s,b),U(o,b),U(d,b)}}}function rF(i){let e,n,t,r;return e=new iv({props:{class:"w-[180px]",$$slots:{default:[X8]},$$scope:{ctx:i}}}),t=new ov({props:{$$slots:{default:[nF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1048576&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&1048576&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function sF(i){let e,n="Go to first page",t,r,s;return r=new av({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=de(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-lc32pz"&&(e.textContent=n),t=pe(a),j(r.$$.fragment,a),this.h()},h(){te(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function iF(i){let e,n="Go to previous page",t,r,s;return r=new lv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=de(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-2don1e"&&(e.textContent=n),t=pe(a),j(r.$$.fragment,a),this.h()},h(){te(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function oF(i){let e,n="Go to next page",t,r,s;return r=new cv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=de(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-10zd0e2"&&(e.textContent=n),t=pe(a),j(r.$$.fragment,a),this.h()},h(){te(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function aF(i){let e,n="Go to last page",t,r,s;return r=new uv({props:{size:15}}),{c(){e=oe("span"),e.textContent=n,t=de(),N(r.$$.fragment),this.h()},l(a){e=ae(a,"SPAN",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-17pj58n"&&(e.textContent=n),t=pe(a),j(r.$$.fragment,a),this.h()},h(){te(e,"class","sr-only")},m(a,o){R(a,e,o),R(a,t,o),V(r,a,o),s=!0},p:gt,i(a){s||(T(r.$$.fragment,a),s=!0)},o(a){I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(r,a)}}}function lF(i){let e,n,t,r="Rows per page",s,a,o,l,d,_=i[0]+1+"",b,w,E,L,M,F,q,G,Q,ge,le,re,me;return a=new sv({props:{onSelectedChange:i[14],selected:{value:10,label:"10"},$$slots:{default:[rF]},$$scope:{ctx:i}}}),F=new ns({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[sF]},$$scope:{ctx:i}}}),F.$on("click",i[15]),G=new ns({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[2],$$slots:{default:[iF]},$$scope:{ctx:i}}}),G.$on("click",i[16]),ge=new ns({props:{variant:"outline",class:"p-0 w-8 h-8 hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[oF]},$$scope:{ctx:i}}}),ge.$on("click",i[17]),re=new ns({props:{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex hover:bg-accent hover:text-accent-foreground bg-background",disabled:!i[3],$$slots:{default:[aF]},$$scope:{ctx:i}}}),re.$on("click",i[18]),{c(){e=oe("div"),n=oe("div"),t=oe("p"),t.textContent=r,s=de(),N(a.$$.fragment),o=de(),l=oe("div"),d=Ve("Page "),b=Ve(_),w=Ve(" of "),E=Ve(i[1]),L=de(),M=oe("div"),N(F.$$.fragment),q=de(),N(G.$$.fragment),Q=de(),N(ge.$$.fragment),le=de(),N(re.$$.fragment),this.h()},l(se){e=ae(se,"DIV",{class:!0});var Z=$e(e);n=ae(Z,"DIV",{class:!0});var Y=$e(n);t=ae(Y,"P",{class:!0,"data-svelte-h":!0}),an(t)!=="svelte-opj3eb"&&(t.textContent=r),s=pe(Y),j(a.$$.fragment,Y),Y.forEach(S),o=pe(Z),l=ae(Z,"DIV",{class:!0});var ie=$e(l);d=Ue(ie,"Page "),b=Ue(ie,_),w=Ue(ie," of "),E=Ue(ie,i[1]),ie.forEach(S),L=pe(Z),M=ae(Z,"DIV",{class:!0});var be=$e(M);j(F.$$.fragment,be),q=pe(be),j(G.$$.fragment,be),Q=pe(be),j(ge.$$.fragment,be),le=pe(be),j(re.$$.fragment,be),be.forEach(S),Z.forEach(S),this.h()},h(){te(t,"class","text-sm font-medium"),te(n,"class","flex items-center space-x-2"),te(l,"class","flex w-[100px] items-center justify-center text-sm font-medium"),te(M,"class","flex items-center space-x-2"),te(e,"class","flex items-center space-x-6 lg:space-x-8 flex-wrap gap-2")},m(se,Z){R(se,e,Z),ce(e,n),ce(n,t),ce(n,s),V(a,n,null),ce(e,o),ce(e,l),ce(l,d),ce(l,b),ce(l,w),ce(l,E),ce(e,L),ce(e,M),V(F,M,null),ce(M,q),V(G,M,null),ce(M,Q),V(ge,M,null),ce(M,le),V(re,M,null),me=!0},p(se,[Z]){const Y={};Z&1048576&&(Y.$$scope={dirty:Z,ctx:se}),a.$set(Y),(!me||Z&1)&&_!==(_=se[0]+1+"")&&Ft(b,_),(!me||Z&2)&&Ft(E,se[1]);const ie={};Z&4&&(ie.disabled=!se[2]),Z&1048576&&(ie.$$scope={dirty:Z,ctx:se}),F.$set(ie);const be={};Z&4&&(be.disabled=!se[2]),Z&1048576&&(be.$$scope={dirty:Z,ctx:se}),G.$set(be);const fe={};Z&8&&(fe.disabled=!se[3]),Z&1048576&&(fe.$$scope={dirty:Z,ctx:se}),ge.$set(fe);const ke={};Z&8&&(ke.disabled=!se[3]),Z&1048576&&(ke.$$scope={dirty:Z,ctx:se}),re.$set(ke)},i(se){me||(T(a.$$.fragment,se),T(F.$$.fragment,se),T(G.$$.fragment,se),T(ge.$$.fragment,se),T(re.$$.fragment,se),me=!0)},o(se){I(a.$$.fragment,se),I(F.$$.fragment,se),I(G.$$.fragment,se),I(ge.$$.fragment,se),I(re.$$.fragment,se),me=!1},d(se){se&&S(e),U(a),U(F),U(G),U(ge),U(re)}}}function cF(i,e,n){let t,r,s,a,o,l,{tableModel:d}=e;const{pageRows:_,pluginStates:b,rows:w}=d;sn(i,_,me=>n(5,l=me)),sn(i,w,me=>n(4,o=me));const{hasNextPage:E,hasPreviousPage:L,pageIndex:M,pageCount:F,pageSize:q}=b.page;sn(i,E,me=>n(3,a=me)),sn(i,L,me=>n(2,s=me)),sn(i,M,me=>n(0,t=me)),sn(i,F,me=>n(1,r=me));const G=me=>q.set(Number(me==null?void 0:me.value)),Q=()=>Zr(M,t=0,t),ge=()=>Zr(M,t=t-1,t),le=()=>Zr(M,t=t+1,t),re=()=>Zr(M,t=Math.ceil(o.length/l.length)-1,t);return i.$$set=me=>{"tableModel"in me&&n(13,d=me.tableModel)},[t,r,s,a,o,l,_,w,E,L,M,F,q,d,G,Q,ge,le,re]}class uF extends it{constructor(e){super(),ot(this,e,cF,lF,nt,{tableModel:13})}}function $0(i,e,n){const t=i.slice();return t[9]=e[n],t}function w0(i,e,n){const t=i.slice();return t[9]=e[n],t}function x0(i){let e,n,t,r,s,a,o,l;e=new yi({props:{orientation:"vertical",class:"mx-2 h-4"}}),t=new po({props:{variant:"secondary",class:"rounded-sm px-1 font-normal lg:hidden",$$slots:{default:[fF]},$$scope:{ctx:i}}});const d=[dF,hF],_=[];function b(w,E){return w[0].length>2?0:1}return a=b(i),o=_[a]=d[a](i),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),s=oe("div"),o.c(),this.h()},l(w){j(e.$$.fragment,w),n=pe(w),j(t.$$.fragment,w),r=pe(w),s=ae(w,"DIV",{class:!0});var E=$e(s);o.l(E),E.forEach(S),this.h()},h(){te(s,"class","hidden space-x-1 lg:flex")},m(w,E){V(e,w,E),R(w,n,E),V(t,w,E),R(w,r,E),R(w,s,E),_[a].m(s,null),l=!0},p(w,E){const L={};E&32769&&(L.$$scope={dirty:E,ctx:w}),t.$set(L);let M=a;a=b(w),a===M?_[a].p(w,E):(ht(),I(_[M],1,1,()=>{_[M]=null}),dt(),o=_[a],o?o.p(w,E):(o=_[a]=d[a](w),o.c()),T(o,1),o.m(s,null))},i(w){l||(T(e.$$.fragment,w),T(t.$$.fragment,w),T(o),l=!0)},o(w){I(e.$$.fragment,w),I(t.$$.fragment,w),I(o),l=!1},d(w){w&&(S(n),S(r),S(s)),U(e,w),U(t,w),_[a].d()}}}function fF(i){let e=i[0].length+"",n;return{c(){n=Ve(e)},l(t){n=Ue(t,e)},m(t,r){R(t,n,r)},p(t,r){r&1&&e!==(e=t[0].length+"")&&Ft(n,e)},d(t){t&&S(n)}}}function hF(i){let e,n,t=Qt(i[0]),r=[];for(let a=0;a<t.length;a+=1)r[a]=k0(w0(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Fe()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Fe()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&1){t=Qt(a[0]);let l;for(l=0;l<t.length;l+=1){const d=w0(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=k0(d),r[l].c(),T(r[l],1),r[l].m(e.parentNode,e))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function dF(i){let e,n;return e=new po({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[mF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function pF(i){let e=i[9]+"",n,t;return{c(){n=Ve(e),t=de()},l(r){n=Ue(r,e),t=pe(r)},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[9]+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function k0(i){let e,n;return e=new po({props:{variant:"secondary",class:"rounded-sm px-1 font-normal",$$slots:{default:[pF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function mF(i){let e=i[0].length+"",n,t;return{c(){n=Ve(e),t=Ve(" Selected")},l(r){n=Ue(r,e),t=Ue(r," Selected")},m(r,s){R(r,n,s),R(r,t,s)},p(r,s){s&1&&e!==(e=r[0].length+"")&&Ft(n,e)},d(r){r&&(S(n),S(t))}}}function _F(i){let e,n,t,r,s,a;e=new Ed({props:{class:"mr-2 h-4 w-4"}});let o=i[0].length>0&&x0(i);return{c(){N(e.$$.fragment),n=de(),t=Ve(i[1]),r=de(),o&&o.c(),s=Fe()},l(l){j(e.$$.fragment,l),n=pe(l),t=Ue(l,i[1]),r=pe(l),o&&o.l(l),s=Fe()},m(l,d){V(e,l,d),R(l,n,d),R(l,t,d),R(l,r,d),o&&o.m(l,d),R(l,s,d),a=!0},p(l,d){(!a||d&2)&&Ft(t,l[1]),l[0].length>0?o?(o.p(l,d),d&1&&T(o,1)):(o=x0(l),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(ht(),I(o,1,1,()=>{o=null}),dt())},i(l){a||(T(e.$$.fragment,l),T(o),a=!0)},o(l){I(e.$$.fragment,l),I(o),a=!1},d(l){l&&(S(n),S(t),S(r),S(s)),U(e,l),o&&o.d(l)}}}function gF(i){let e,n;return e=new ns({props:{builders:[i[12]],variant:"outline",size:"sm",class:"h-8 bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground",$$slots:{default:[_F]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&32771&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function vF(i){let e;return{c(){e=Ve("No results found.")},l(n){e=Ue(n,"No results found.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function C0(i){let e,n=i[3][i[9]]+"",t;return{c(){e=oe("span"),t=Ve(n),this.h()},l(r){e=ae(r,"SPAN",{class:!0});var s=$e(e);t=Ue(s,n),s.forEach(S),this.h()},h(){te(e,"class","ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs")},m(r,s){R(r,e,s),ce(e,t)},p(r,s){s&12&&n!==(n=r[3][r[9]]+"")&&Ft(t,n)},d(r){r&&S(e)}}}function yF(i){let e,n,t,r,s,a=i[9]+"",o,l,d,_;n=new Pd({props:{className:qt("h-4 w-4")}});let b=i[3][i[9]]&&C0(i);return{c(){e=oe("div"),N(n.$$.fragment),r=de(),s=oe("span"),o=Ve(a),l=de(),b&&b.c(),d=de(),this.h()},l(w){e=ae(w,"DIV",{class:!0});var E=$e(e);j(n.$$.fragment,E),E.forEach(S),r=pe(w),s=ae(w,"SPAN",{});var L=$e(s);o=Ue(L,a),L.forEach(S),l=pe(w),b&&b.l(w),d=pe(w),this.h()},h(){te(e,"class",t=qt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",i[0].includes(i[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"))},m(w,E){R(w,e,E),V(n,e,null),R(w,r,E),R(w,s,E),ce(s,o),R(w,l,E),b&&b.m(w,E),R(w,d,E),_=!0},p(w,E){(!_||E&5&&t!==(t=qt("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",w[0].includes(w[9])?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible")))&&te(e,"class",t),(!_||E&4)&&a!==(a=w[9]+"")&&Ft(o,a),w[3][w[9]]?b?b.p(w,E):(b=C0(w),b.c(),b.m(d.parentNode,d)):b&&(b.d(1),b=null)},i(w){_||(T(n.$$.fragment,w),_=!0)},o(w){I(n.$$.fragment,w),_=!1},d(w){w&&(S(e),S(r),S(s),S(l),S(d)),U(n),b&&b.d(w)}}}function S0(i){let e,n;return e=new Ll({props:{class:"cursor-pointer",value:i[9],onSelect:i[6],$$slots:{default:[yF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.value=t[9]),r&32781&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function bF(i){let e,n,t=Qt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=S0($0(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Fe()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Fe()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&45){t=Qt(a[2]);let l;for(l=0;l<t.length;l+=1){const d=$0(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=S0(d),r[l].c(),T(r[l],1),r[l].m(e.parentNode,e))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function T0(i){let e,n,t,r;return e=new Jd({}),t=new Ll({props:{class:"justify-center text-center cursor-pointer",onSelect:i[7],$$slots:{default:[$F]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.onSelect=s[7]),a&32768&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function $F(i){let e;return{c(){e=Ve("Clear Filter")},l(n){e=Ue(n,"Clear Filter")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function wF(i){let e,n,t,r,s,a;e=new Zd({props:{$$slots:{default:[vF]},$$scope:{ctx:i}}}),t=new Wd({props:{$$slots:{default:[bF]},$$scope:{ctx:i}}});let o=i[0].length>0&&T0(i);return{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de(),o&&o.c(),s=Fe()},l(l){j(e.$$.fragment,l),n=pe(l),j(t.$$.fragment,l),r=pe(l),o&&o.l(l),s=Fe()},m(l,d){V(e,l,d),R(l,n,d),V(t,l,d),R(l,r,d),o&&o.m(l,d),R(l,s,d),a=!0},p(l,d){const _={};d&32768&&(_.$$scope={dirty:d,ctx:l}),e.$set(_);const b={};d&32781&&(b.$$scope={dirty:d,ctx:l}),t.$set(b),l[0].length>0?o?(o.p(l,d),d&1&&T(o,1)):(o=T0(l),o.c(),T(o,1),o.m(s.parentNode,s)):o&&(ht(),I(o,1,1,()=>{o=null}),dt())},i(l){a||(T(e.$$.fragment,l),T(t.$$.fragment,l),T(o),a=!0)},o(l){I(e.$$.fragment,l),I(t.$$.fragment,l),I(o),a=!1},d(l){l&&(S(n),S(r),S(s)),U(e,l),U(t,l),o&&o.d(l)}}}function xF(i){let e,n,t,r;return e=new Kd({props:{placeholder:i[1]}}),t=new Xd({props:{$$slots:{default:[wF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.placeholder=s[1]),e.$set(o);const l={};a&32781&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function kF(i){let e,n;return e=new Hd({props:{loop:!0,$$slots:{default:[xF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function CF(i){let e,n,t,r;return e=new ep({props:{asChild:!0,$$slots:{default:[gF,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new Yd({props:{class:"w-[200px] p-0",align:"start",side:"bottom",$$slots:{default:[kF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&36867&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&32783&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function SF(i){let e,n,t;function r(a){i[8](a)}let s={$$slots:{default:[CF]},$$scope:{ctx:i}};return i[4]!==void 0&&(s.open=i[4]),e=new Qd({props:s}),jt.push(()=>kn(e,"open",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,[o]){const l={};o&32783&&(l.$$scope={dirty:o,ctx:a}),!n&&o&16&&(n=!0,l.open=a[4],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function TF(i,e,n){let{filterValues:t=[]}=e,{title:r}=e,{options:s}=e,{counts:a={}}=e,o=!1;const l=w=>{Array.isArray(t)&&t.includes(w)?n(0,t=t.filter(E=>E!==w)):n(0,t=[...Array.isArray(t)?t:[],w])},d=w=>{l(w)},_=()=>{n(0,t=[])};function b(w){o=w,n(4,o)}return i.$$set=w=>{"filterValues"in w&&n(0,t=w.filterValues),"title"in w&&n(1,r=w.title),"options"in w&&n(2,s=w.options),"counts"in w&&n(3,a=w.counts)},[t,r,s,a,o,l,d,_,b]}class IF extends it{constructor(e){super(),ot(this,e,TF,SF,nt,{filterValues:0,title:1,options:2,counts:3})}}function I0(i,e,n){const t=i.slice();return t[9]=e[n],t[10]=e,t[11]=n,t}function EF(i){let e,n,t;return e=new pv({props:{class:"mr-2 h-4 w-4"}}),{c(){N(e.$$.fragment),n=Ve(`
			View`)},l(r){j(e.$$.fragment,r),n=Ue(r,`
			View`)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p:gt,i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function PF(i){let e,n;return e=new ns({props:{variant:"outline",size:"sm",class:"h-8 flex hover:bg-accent hover:text-accent-foreground bg-background",builders:[i[12]],$$slots:{default:[EF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4096&&(s.builders=[t[12]]),r&8192&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function AF(i){let e;return{c(){e=Ve("Toggle columns")},l(n){e=Ue(n,"Toggle columns")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function MF(i){let e,n,t;function r(a){i[5](a,i[9])}let s={$$slots:{default:[DF]},$$scope:{ctx:i}};return i[0][i[9].id]!==void 0&&(s.checked=i[0][i[9].id]),e=new mv({props:s}),jt.push(()=>kn(e,"checked",r)),{c(){N(e.$$.fragment)},l(a){j(e.$$.fragment,a)},m(a,o){V(e,a,o),t=!0},p(a,o){i=a;const l={};o&8192&&(l.$$scope={dirty:o,ctx:i}),!n&&o&3&&(n=!0,l.checked=i[0][i[9].id],xn(()=>n=!1)),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function DF(i){let e=i[9].header+"",n,t;return{c(){n=Ve(e),t=de()},l(r){n=Ue(r,e),t=pe(r)},m(r,s){R(r,n,s),R(r,t,s)},p:gt,d(r){r&&(S(n),S(t))}}}function E0(i){let e=i[3].includes(i[9].id),n,t,r=e&&MF(i);return{c(){r&&r.c(),n=Fe()},l(s){r&&r.l(s),n=Fe()},m(s,a){r&&r.m(s,a),R(s,n,a),t=!0},p(s,a){e&&r.p(s,a)},i(s){t||(T(r),t=!0)},o(s){I(r),t=!1},d(s){s&&S(n),r&&r.d(s)}}}function zF(i){let e,n,t,r,s,a;e=new hv({props:{$$slots:{default:[AF]},$$scope:{ctx:i}}}),t=new dv({});let o=Qt(i[1]),l=[];for(let _=0;_<o.length;_+=1)l[_]=E0(I0(i,o,_));const d=_=>I(l[_],1,1,()=>{l[_]=null});return{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment),r=de();for(let _=0;_<l.length;_+=1)l[_].c();s=Fe()},l(_){j(e.$$.fragment,_),n=pe(_),j(t.$$.fragment,_),r=pe(_);for(let b=0;b<l.length;b+=1)l[b].l(_);s=Fe()},m(_,b){V(e,_,b),R(_,n,b),V(t,_,b),R(_,r,b);for(let w=0;w<l.length;w+=1)l[w]&&l[w].m(_,b);R(_,s,b),a=!0},p(_,b){const w={};if(b&8192&&(w.$$scope={dirty:b,ctx:_}),e.$set(w),b&11){o=Qt(_[1]);let E;for(E=0;E<o.length;E+=1){const L=I0(_,o,E);l[E]?(l[E].p(L,b),T(l[E],1)):(l[E]=E0(L),l[E].c(),T(l[E],1),l[E].m(s.parentNode,s))}for(ht(),E=o.length;E<l.length;E+=1)d(E);dt()}},i(_){if(!a){T(e.$$.fragment,_),T(t.$$.fragment,_);for(let b=0;b<o.length;b+=1)T(l[b]);a=!0}},o(_){I(e.$$.fragment,_),I(t.$$.fragment,_),l=l.filter(Boolean);for(let b=0;b<l.length;b+=1)I(l[b]);a=!1},d(_){_&&(S(n),S(r),S(s)),U(e,_),U(t,_),ls(l,_)}}}function LF(i){let e,n,t,r;return e=new ru({props:{asChild:!0,$$slots:{default:[PF,({builder:s})=>({12:s}),({builder:s})=>s?4096:0]},$$scope:{ctx:i}}}),t=new su({props:{$$slots:{default:[zF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&12288&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&8193&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function RF(i){let e,n;return e=new nu({props:{$$slots:{default:[LF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,[r]){const s={};r&8193&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function OF(i,e,n){let t,{tableModel:r}=e;const{pluginStates:s,flatColumns:a}=r,{hiddenColumnIds:o}=s.hide;sn(i,o,w=>n(6,t=w));const l=a.map(w=>w.id);let d=Object.fromEntries(l.map(w=>[w,!0]));const _=["name","features"];function b(w,E){i.$$.not_equal(d[E.id],w)&&(d[E.id]=w,n(0,d))}return i.$$set=w=>{"tableModel"in w&&n(4,r=w.tableModel)},i.$$.update=()=>{i.$$.dirty&1&&Zr(o,t=Object.entries(d).filter(([,w])=>!w).map(([w])=>w),t)},[d,a,o,_,r,b]}class FF extends it{constructor(e){super(),ot(this,e,OF,RF,nt,{tableModel:4})}}function P0(i,e,n){const t=i.slice();return t[15]=e[n],t}function A0(i,e,n){const t=i.slice();return t[19]=e[n],t}function M0(i,e,n){const t=i.slice();return t[23]=e[n],t}function D0(i,e,n){const t=i.slice();return t[19]=e[n],t}function BF(i){let e,n;return e=new jf({props:{of:i[19].render()}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.of=t[19].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function NF(i){let e,n;return e=new G8({props:{props:i[28],$$slots:{default:[BF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&268435456&&(s.props=t[28]),r&536870916&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function VF(i){let e,n,t;const r=[i[22]];let s={$$slots:{default:[NF]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Ce(s,r[a]);return e=new kv({props:s}),{c(){N(e.$$.fragment),n=de()},l(a){j(e.$$.fragment,a),n=pe(a)},m(a,o){V(e,a,o),R(a,n,o),t=!0},p(a,o){const l=o&4194304?Pt(r,[mn(a[22])]):{};o&805306372&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){a&&S(n),U(e,a)}}}function z0(i,e){let n,t,r;return t=new Uo({props:{attrs:e[19].attrs(),props:e[19].props(),$$slots:{default:[VF,({attrs:s,props:a})=>({22:s,28:a}),({attrs:s,props:a})=>(s?4194304:0)|(a?268435456:0)]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&4&&(o.attrs=e[19].attrs()),a&4&&(o.props=e[19].props()),a&809500676&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function UF(i){let e=[],n=new Map,t,r,s=Qt(i[23].cells);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let l=D0(i,s,o),d=a(l);n.set(d,e[o]=z0(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&272629764&&(s=Qt(o[23].cells),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,z0,t,D0),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function jF(i){let e,n,t;return e=new Uf({props:{$$slots:{default:[UF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment),n=de()},l(r){j(e.$$.fragment,r),n=pe(r)},m(r,s){V(e,r,s),R(r,n,s),t=!0},p(r,s){const a={};s&536870916&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){t||(T(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){r&&S(n),U(e,r)}}}function L0(i){let e,n;return e=new Uo({props:{rowAttrs:i[23].attrs(),$$slots:{default:[jF]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.rowAttrs=t[23].attrs()),r&536870916&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function qF(i){let e,n,t=Qt(i[2]),r=[];for(let a=0;a<t.length;a+=1)r[a]=L0(M0(i,t,a));const s=a=>I(r[a],1,1,()=>{r[a]=null});return{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Fe()},l(a){for(let o=0;o<r.length;o+=1)r[o].l(a);e=Fe()},m(a,o){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(a,o);R(a,e,o),n=!0},p(a,o){if(o&272629764){t=Qt(a[2]);let l;for(l=0;l<t.length;l+=1){const d=M0(a,t,l);r[l]?(r[l].p(d,o),T(r[l],1)):(r[l]=L0(d),r[l].c(),T(r[l],1),r[l].m(e.parentNode,e))}for(ht(),l=t.length;l<r.length;l+=1)s(l);dt()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)T(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)I(r[o]);n=!1},d(a){a&&S(e),ls(r,a)}}}function GF(i){let e,n;return e=new jf({props:{of:i[19].render()}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.of=t[19].render()),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function HF(i){let e,n,t;const r=[i[22]];let s={$$slots:{default:[GF]},$$scope:{ctx:i}};for(let a=0;a<r.length;a+=1)s=Ce(s,r[a]);return e=new Cv({props:s}),{c(){N(e.$$.fragment),n=de()},l(a){j(e.$$.fragment,a),n=pe(a)},m(a,o){V(e,a,o),R(a,n,o),t=!0},p(a,o){const l=o&4194304?Pt(r,[mn(a[22])]):{};o&536870928&&(l.$$scope={dirty:o,ctx:a}),e.$set(l)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){I(e.$$.fragment,a),t=!1},d(a){a&&S(n),U(e,a)}}}function R0(i,e){let n,t,r;return t=new Uo({props:{attrs:e[19].attrs(),$$slots:{default:[HF,({attrs:s})=>({22:s}),({attrs:s})=>s?4194304:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.attrs=e[19].attrs()),a&541065232&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function ZF(i){let e=[],n=new Map,t,r,s=Qt(i[15].cells);const a=o=>o[19].id;for(let o=0;o<s.length;o+=1){let l=A0(i,s,o),d=a(l);n.set(d,e[o]=R0(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&4194320&&(s=Qt(o[15].cells),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,R0,t,A0),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function WF(i){let e,n,t;const r=[i[18],{class:"cursor-pointer"}];function s(){return i[12](i[15])}let a={$$slots:{default:[ZF]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)a=Ce(a,r[o]);return e=new Uf({props:a}),e.$on("click",s),{c(){N(e.$$.fragment),n=de()},l(o){j(e.$$.fragment,o),n=pe(o)},m(o,l){V(e,o,l),R(o,n,l),t=!0},p(o,l){i=o;const d=l&262144?Pt(r,[mn(i[18]),r[1]]):{};l&536870928&&(d.$$scope={dirty:l,ctx:i}),e.$set(d)},i(o){t||(T(e.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),t=!1},d(o){o&&S(n),U(e,o)}}}function O0(i,e){let n,t,r;return t=new Uo({props:{rowAttrs:e[15].attrs(),$$slots:{default:[WF,({rowAttrs:s})=>({18:s}),({rowAttrs:s})=>s?262144:0]},$$scope:{ctx:e}}}),{key:i,first:null,c(){n=Fe(),N(t.$$.fragment),this.h()},l(s){n=Fe(),j(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){R(s,n,a),V(t,s,a),r=!0},p(s,a){e=s;const o={};a&16&&(o.rowAttrs=e[15].attrs()),a&537133072&&(o.$$scope={dirty:a,ctx:e}),t.$set(o)},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(t,s)}}}function KF(i){let e=[],n=new Map,t,r,s=Qt(i[4]);const a=o=>o[15].id;for(let o=0;o<s.length;o+=1){let l=P0(i,s,o),d=a(l);n.set(d,e[o]=O0(d,l))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();t=Fe()},l(o){for(let l=0;l<e.length;l+=1)e[l].l(o);t=Fe()},m(o,l){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(o,l);R(o,t,l),r=!0},p(o,l){l&4456496&&(s=Qt(o[4]),ht(),e=zr(e,l,a,1,o,s,n,t.parentNode,Wr,O0,t,P0),dt())},i(o){if(!r){for(let l=0;l<s.length;l+=1)T(e[l]);r=!0}},o(o){for(let l=0;l<e.length;l+=1)I(e[l]);r=!1},d(o){o&&S(t);for(let l=0;l<e.length;l+=1)e[l].d(o)}}}function XF(i){let e,n,t,r;e=new wv({props:{$$slots:{default:[qF]},$$scope:{ctx:i}}});const s=[i[3]];let a={$$slots:{default:[KF]},$$scope:{ctx:i}};for(let o=0;o<s.length;o+=1)a=Ce(a,s[o]);return t=new xv({props:a}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(o){j(e.$$.fragment,o),n=pe(o),j(t.$$.fragment,o)},m(o,l){V(e,o,l),R(o,n,l),V(t,o,l),r=!0},p(o,l){const d={};l&536870916&&(d.$$scope={dirty:l,ctx:o}),e.$set(d);const _=l&8?Pt(s,[mn(o[3])]):{};l&536870928&&(_.$$scope={dirty:l,ctx:o}),t.$set(_)},i(o){r||(T(e.$$.fragment,o),T(t.$$.fragment,o),r=!0)},o(o){I(e.$$.fragment,o),I(t.$$.fragment,o),r=!1},d(o){o&&S(n),U(e,o),U(t,o)}}}function JF(i){let e,n;return e=new uF({props:{tableModel:i[6]}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p:gt,i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function YF(i){let e,n="No POIs in Favourites";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-cqoewt"&&(e.textContent=n),this.h()},h(){te(e,"class","text-center text-xl")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function QF(i){let e,n,t,r,s,a,o,l,d;n=new K8({props:{tableModel:i[6]}});const _=[i[1]];let b={$$slots:{default:[XF]},$$scope:{ctx:i}};for(let M=0;M<_.length;M+=1)b=Ce(b,_[M]);s=new _v({props:b});const w=[YF,JF],E=[];function L(M,F){return M[0].length===0?0:1}return o=L(i),l=E[o]=w[o](i),{c(){e=oe("div"),N(n.$$.fragment),t=de(),r=oe("div"),N(s.$$.fragment),a=de(),l.c(),this.h()},l(M){e=ae(M,"DIV",{class:!0});var F=$e(e);j(n.$$.fragment,F),t=pe(F),r=ae(F,"DIV",{class:!0});var q=$e(r);j(s.$$.fragment,q),q.forEach(S),a=pe(F),l.l(F),F.forEach(S),this.h()},h(){te(r,"class","rounded-md border"),te(e,"class","space-y-4")},m(M,F){R(M,e,F),V(n,e,null),ce(e,t),ce(e,r),V(s,r,null),ce(e,a),E[o].m(e,null),d=!0},p(M,[F]){const q=F&2?Pt(_,[mn(M[1])]):{};F&536870940&&(q.$$scope={dirty:F,ctx:M}),s.$set(q);let G=o;o=L(M),o===G?E[o].p(M,F):(ht(),I(E[G],1,1,()=>{E[G]=null}),dt(),l=E[o],l?l.p(M,F):(l=E[o]=w[o](M),l.c()),T(l,1),l.m(e,null))},i(M){d||(T(n.$$.fragment,M),T(s.$$.fragment,M),T(l),d=!0)},o(M){I(n.$$.fragment,M),I(s.$$.fragment,M),I(l),d=!1},d(M){M&&S(e),U(n),U(s),E[o].d()}}}function eB(i,e,n){let t,r,s,a,{data:o}=e,{removeFavourite:l}=e;const d=gv(va(o),{sort:vv({toggleOrder:["asc","desc"]}),page:yv(),colFilter:bv(),hide:$v()}),_=d.createColumns([d.column({accessor:"name",header:"Name",id:"name",cell:({value:G,row:Q})=>Q.isData()?qc(y0,{value:G}):G,plugins:{colFilter:{fn:({filterValue:G,value:Q})=>Q.toLowerCase().includes(G.toLowerCase()),initialFilterValue:"",render:({filterValue:G})=>as(G)}}}),d.column({accessor:"features",header:"Features",id:"features",cell:({value:G,row:Q})=>Q.isData()?qc(y0,{value:G.join(", ")}):G.join(""),plugins:{colFilter:{fn:({filterValue:G,value:Q})=>G.length===0||!Array.isArray(G)?!0:G.some(ge=>Q.includes(ge)),initialFilterValue:[],render:({filterValue:G})=>as(G)},sort:{disable:!0}}}),d.display({id:"actions",header:()=>"",cell:({row:G})=>G.isData()&&G.original?qc(A8,{row:G.original,rowId:parseInt(G.id),removeFavourite:l}):"",plugins:{sort:{disable:!0}}})]),b=G=>G.original,w=d.createViewModel(_),{headerRows:E,pageRows:L,tableAttrs:M,tableBodyAttrs:F}=w;sn(i,E,G=>n(2,r=G)),sn(i,L,G=>n(4,a=G)),sn(i,M,G=>n(1,t=G)),sn(i,F,G=>n(3,s=G));const q=G=>ya("/app?focus-poi="+encodeURIComponent(b(G).id));return i.$$set=G=>{"data"in G&&n(0,o=G.data),"removeFavourite"in G&&n(11,l=G.removeFavourite)},[o,t,r,s,a,b,w,E,L,M,F,l,q]}class tB extends it{constructor(e){super(),ot(this,e,eB,QF,nt,{data:0,removeFavourite:11})}}function nB(i){let e;return{c(){e=Ve("Favourites")},l(n){e=Ue(n,"Favourites")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function rB(i){let e,n,t,r;return e=new _s({props:{tag:"h2",class:"mb-3",$$slots:{default:[nB]},$$scope:{ctx:i}}}),t=new yi({}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&512&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function sB(i){let e,n;return e=new tB({props:{data:i[3],removeFavourite:i[0]}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.data=t[3]),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function iB(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-1foj6e5"&&(e.innerHTML=n),this.h()},h(){te(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function oB(i){let e,n,t,r;const s=[iB,sB],a=[];function o(l,d){return l[4]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=Fe()},l(l){n.l(l),t=Fe()},m(l,d){a[e].m(l,d),R(l,t,d),r=!0},p(l,d){let _=e;e=o(l),e===_?a[e].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),n=a[e],n?n.p(l,d):(n=a[e]=s[e](l),n.c()),T(n,1),n.m(t.parentNode,t))},i(l){r||(T(n),r=!0)},o(l){I(n),r=!1},d(l){l&&S(t),a[e].d(l)}}}function aB(i){let e,n,t,r,s;return n=new Kr({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[rB]},$$scope:{ctx:i}}}),r=new Lr({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[2]}px);`,$$slots:{default:[oB]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=de(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=$e(e);j(n.$$.fragment,o),o.forEach(S),t=pe(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[7](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const l={};o&512&&(l.$$scope={dirty:o,ctx:a}),n.$set(l);const d={};o&4&&(d.style=`height: calc(100% - ${a[2]}px);`),o&536&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){I(n.$$.fragment,a),I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[7](null),U(r,a)}}}function lB(i){let e,n,t,r,s;return n=new nr({props:{class:"relative p-4 h-full",$$slots:{default:[aB]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(a){e=ae(a,"DIV",{class:!0});var o=$e(e);j(n.$$.fragment,o),o.forEach(S),this.h()},h(){te(e,"class","flex flex-col p-4 relative h-full")},m(a,o){R(a,e,o),V(n,e,null),t=!0,r||(s=bt(window,"resize",i[5]),r=!0)},p(a,[o]){const l={};o&542&&(l.$$scope={dirty:o,ctx:a}),n.$set(l)},i(a){t||(T(n.$$.fragment,a),t=!0)},o(a){I(n.$$.fragment,a),t=!1},d(a){a&&S(e),U(n),r=!1,s()}}}function cB(i,e,n){let{slug:t}=e,r,s=64;const a=()=>{const w=r.offsetHeight;w!==void 0&&n(2,s=w)};er(a);let o=[],l=!0;const d=async()=>{const w=await fetch("/api/favourites");if(w.ok){const E=await w.json(),L=[];E.forEach(M=>{const F=$a.decode(M);if(qf.isRight(F)){const q=F.right;L.push(q)}else console.error("Invalid POI object received from API: ",F.left)}),n(3,o=L),n(4,l=!1)}},_=async w=>{n(4,l=!0);const E=o[w].id,L=await fetch("/api/favourites?poi_id="+encodeURIComponent(E),{method:"DELETE"});L.ok||console.error(await L.json()),await _i(),d()};er(d);function b(w){jt[w?"unshift":"push"](()=>{r=w,n(1,r)})}return i.$$set=w=>{"slug"in w&&n(6,t=w.slug)},[_,r,s,o,l,a,t,b]}class uB extends it{constructor(e){super(),ot(this,e,cB,lB,nt,{slug:6,removeFavourite:0})}get removeFavourite(){return this.$$.ctx[0]}}function fB(i){let e,n,t,r,s,a,o,l,d,_="Profile Picture",b,w,E,L,M,F="Profile Picture:",q,G,Q,ge,le,re,me,se=!i[1]&&F0(i),Z=i[1]&&N0(i);r=new yi({props:{orientation:"horizontal",class:"lg:hidden"}}),a=new yi({props:{orientation:"vertical",class:"max-lg:hidden"}});const Y=[xB,wB],ie=[];function be(fe,ke){return fe[0].profile_picture===void 0?0:1}return w=be(i),E=ie[w]=Y[w](i),ge=new Vn({props:{$$slots:{default:[IB]},$$scope:{ctx:i}}}),ge.$on("click",i[8]),{c(){e=oe("div"),se&&se.c(),n=de(),Z&&Z.c(),t=de(),N(r.$$.fragment),s=de(),N(a.$$.fragment),o=de(),l=oe("div"),d=oe("h2"),d.textContent=_,b=de(),E.c(),L=de(),M=oe("label"),M.textContent=F,q=de(),G=oe("input"),Q=de(),N(ge.$$.fragment),this.h()},l(fe){e=ae(fe,"DIV",{class:!0});var ke=$e(e);se&&se.l(ke),n=pe(ke),Z&&Z.l(ke),ke.forEach(S),t=pe(fe),j(r.$$.fragment,fe),s=pe(fe),j(a.$$.fragment,fe),o=pe(fe),l=ae(fe,"DIV",{class:!0});var je=$e(l);d=ae(je,"H2",{class:!0,"data-svelte-h":!0}),an(d)!=="svelte-1qatzt5"&&(d.textContent=_),b=pe(je),E.l(je),L=pe(je),M=ae(je,"LABEL",{for:!0,"data-svelte-h":!0}),an(M)!=="svelte-1j5ep21"&&(M.textContent=F),q=pe(je),G=ae(je,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),Q=pe(je),j(ge.$$.fragment,je),je.forEach(S),this.h()},h(){te(e,"class","relative card h-full w-full md:w-3/4 max-w-3xl md:max-h-[32rem] max-h-none flex bg-base-200 shadow-xl p-6 flex-col"),te(d,"class","text-2xl font-bold mb-2"),te(M,"for","profile-picture"),te(G,"id","profile-picture"),te(G,"type","file"),te(G,"accept","image/png, image/jpeg"),te(G,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),te(l,"class","relative card h-full w-full md:w-3/4 max-w-3xl max-h-none flex bg-base-200 shadow-xl p-6 flex-col")},m(fe,ke){R(fe,e,ke),se&&se.m(e,null),ce(e,n),Z&&Z.m(e,null),R(fe,t,ke),V(r,fe,ke),R(fe,s,ke),V(a,fe,ke),R(fe,o,ke),R(fe,l,ke),ce(l,d),ce(l,b),ie[w].m(l,null),ce(l,L),ce(l,M),ce(l,q),ce(l,G),ce(l,Q),V(ge,l,null),le=!0,re||(me=bt(G,"change",i[9]),re=!0)},p(fe,ke){fe[1]?se&&(ht(),I(se,1,1,()=>{se=null}),dt()):se?(se.p(fe,ke),ke&2&&T(se,1)):(se=F0(fe),se.c(),T(se,1),se.m(e,n)),fe[1]?Z?(Z.p(fe,ke),ke&2&&T(Z,1)):(Z=N0(fe),Z.c(),T(Z,1),Z.m(e,null)):Z&&(ht(),I(Z,1,1,()=>{Z=null}),dt());let je=w;w=be(fe),w===je?ie[w].p(fe,ke):(ht(),I(ie[je],1,1,()=>{ie[je]=null}),dt(),E=ie[w],E?E.p(fe,ke):(E=ie[w]=Y[w](fe),E.c()),T(E,1),E.m(l,L));const Se={};ke&262144&&(Se.$$scope={dirty:ke,ctx:fe}),ge.$set(Se)},i(fe){le||(T(se),T(Z),T(r.$$.fragment,fe),T(a.$$.fragment,fe),T(E),T(ge.$$.fragment,fe),le=!0)},o(fe){I(se),I(Z),I(r.$$.fragment,fe),I(a.$$.fragment,fe),I(E),I(ge.$$.fragment,fe),le=!1},d(fe){fe&&(S(e),S(t),S(s),S(o),S(l)),se&&se.d(),Z&&Z.d(),U(r,fe),U(a,fe),ie[w].d(),U(ge),re=!1,me()}}}function hB(i){let e,n,t;return n=new fo({props:{class:"text-error",$$slots:{default:[EB]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),this.h()},l(r){e=ae(r,"DIV",{class:!0});var s=$e(e);j(n.$$.fragment,s),s.forEach(S),this.h()},h(){te(e,"class","grow flex items-center justify-center")},m(r,s){R(r,e,s),V(n,e,null),t=!0},p(r,s){const a={};s&262144&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){I(n.$$.fragment,r),t=!1},d(r){r&&S(e),U(n)}}}function dB(i){let e,n='<span class="loading loading-ring loading-lg"></span>';return{c(){e=oe("div"),e.innerHTML=n,this.h()},l(t){e=ae(t,"DIV",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-y7ubrx"&&(e.innerHTML=n),this.h()},h(){te(e,"class","grow flex items-center justify-center")},m(t,r){R(t,e,r)},p:gt,i:gt,o:gt,d(t){t&&S(e)}}}function F0(i){let e,n,t="User Details",r,s,a,o,l,d,_,b,w,E,L,M,F,q,G,Q,ge,le,re,me,se;a=new fo({props:{for:"nickname",$$slots:{default:[pB]},$$scope:{ctx:i}}});function Z(ke){i[10](ke)}let Y={id:"nickname",readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm "+(i[1]?"bg-card":"bg-muted")};i[0].nickname!==void 0&&(Y.value=i[0].nickname),l=new Qc({props:Y}),jt.push(()=>kn(l,"value",Z));let ie=i[2]&&B0(i);E=new fo({props:{for:"email",$$slots:{default:[_B]},$$scope:{ctx:i}}}),M=new Qc({props:{id:"email",type:"text",value:i[0].email,readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm  bg-muted"}}),G=new fo({props:{for:"description",$$slots:{default:[gB]},$$scope:{ctx:i}}});function be(ke){i[11](ke)}let fe={id:"description",rows:5,cols:50,readonly:!0,class:"mt-1 block w-full rounded-md shadow-sm bg-muted "+(i[1]?"bg-card":"bg-muted")};return i[0].description!==void 0&&(fe.value=i[0].description),ge=new cp({props:fe}),jt.push(()=>kn(ge,"value",be)),me=new Vn({props:{$$slots:{default:[vB]},$$scope:{ctx:i}}}),me.$on("click",i[6]),{c(){e=oe("div"),n=oe("h2"),n.textContent=t,r=de(),s=oe("div"),N(a.$$.fragment),o=de(),N(l.$$.fragment),_=de(),ie&&ie.c(),b=de(),w=oe("div"),N(E.$$.fragment),L=de(),N(M.$$.fragment),F=de(),q=oe("div"),N(G.$$.fragment),Q=de(),N(ge.$$.fragment),re=de(),N(me.$$.fragment),this.h()},l(ke){e=ae(ke,"DIV",{class:!0});var je=$e(e);n=ae(je,"H2",{class:!0,"data-svelte-h":!0}),an(n)!=="svelte-1pn0m61"&&(n.textContent=t),r=pe(je),s=ae(je,"DIV",{});var Se=$e(s);j(a.$$.fragment,Se),o=pe(Se),j(l.$$.fragment,Se),_=pe(Se),ie&&ie.l(Se),Se.forEach(S),je.forEach(S),b=pe(ke),w=ae(ke,"DIV",{class:!0});var Qe=$e(w);j(E.$$.fragment,Qe),L=pe(Qe),j(M.$$.fragment,Qe),Qe.forEach(S),F=pe(ke),q=ae(ke,"DIV",{});var Xe=$e(q);j(G.$$.fragment,Xe),Q=pe(Xe),j(ge.$$.fragment,Xe),Xe.forEach(S),re=pe(ke),j(me.$$.fragment,ke),this.h()},h(){te(n,"class","text-2xl font-bold mb-2"),te(e,"class","mb-4"),te(w,"class","mb-4")},m(ke,je){R(ke,e,je),ce(e,n),ce(e,r),ce(e,s),V(a,s,null),ce(s,o),V(l,s,null),ce(s,_),ie&&ie.m(s,null),R(ke,b,je),R(ke,w,je),V(E,w,null),ce(w,L),V(M,w,null),R(ke,F,je),R(ke,q,je),V(G,q,null),ce(q,Q),V(ge,q,null),R(ke,re,je),V(me,ke,je),se=!0},p(ke,je){const Se={};je&262144&&(Se.$$scope={dirty:je,ctx:ke}),a.$set(Se);const Qe={};je&2&&(Qe.class="mt-1 block w-full rounded-md shadow-sm "+(ke[1]?"bg-card":"bg-muted")),!d&&je&1&&(d=!0,Qe.value=ke[0].nickname,xn(()=>d=!1)),l.$set(Qe),ke[2]?ie?(ie.p(ke,je),je&4&&T(ie,1)):(ie=B0(ke),ie.c(),T(ie,1),ie.m(s,null)):ie&&(ht(),I(ie,1,1,()=>{ie=null}),dt());const Xe={};je&262144&&(Xe.$$scope={dirty:je,ctx:ke}),E.$set(Xe);const at={};je&1&&(at.value=ke[0].email),M.$set(at);const mt={};je&262144&&(mt.$$scope={dirty:je,ctx:ke}),G.$set(mt);const Dt={};je&2&&(Dt.class="mt-1 block w-full rounded-md shadow-sm bg-muted "+(ke[1]?"bg-card":"bg-muted")),!le&&je&1&&(le=!0,Dt.value=ke[0].description,xn(()=>le=!1)),ge.$set(Dt);const Ct={};je&262144&&(Ct.$$scope={dirty:je,ctx:ke}),me.$set(Ct)},i(ke){se||(T(a.$$.fragment,ke),T(l.$$.fragment,ke),T(ie),T(E.$$.fragment,ke),T(M.$$.fragment,ke),T(G.$$.fragment,ke),T(ge.$$.fragment,ke),T(me.$$.fragment,ke),se=!0)},o(ke){I(a.$$.fragment,ke),I(l.$$.fragment,ke),I(ie),I(E.$$.fragment,ke),I(M.$$.fragment,ke),I(G.$$.fragment,ke),I(ge.$$.fragment,ke),I(me.$$.fragment,ke),se=!1},d(ke){ke&&(S(e),S(b),S(w),S(F),S(q),S(re)),U(a),U(l),ie&&ie.d(),U(E),U(M),U(G),U(ge),U(me,ke)}}}function pB(i){let e;return{c(){e=Ve("Nickname:")},l(n){e=Ue(n,"Nickname:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function B0(i){let e,n;return e=new fo({props:{class:"text-error",$$slots:{default:[mB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262148&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function mB(i){let e;return{c(){e=Ve(i[2])},l(n){e=Ue(n,i[2])},m(n,t){R(n,e,t)},p(n,t){t&4&&Ft(e,n[2])},d(n){n&&S(e)}}}function _B(i){let e;return{c(){e=Ve("Email:")},l(n){e=Ue(n,"Email:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function gB(i){let e;return{c(){e=Ve("Description:")},l(n){e=Ue(n,"Description:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function vB(i){let e;return{c(){e=Ve("Edit Profile")},l(n){e=Ue(n,"Edit Profile")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function N0(i){let e,n="Editing User Details",t,r,s,a,o,l,d,_,b,w,E,L,M,F,q;s=new fo({props:{for:"edit-email",$$slots:{default:[yB]},$$scope:{ctx:i}}});function G(re){i[12](re)}let Q={id:"edit-nickname",type:"text",class:"mt-1 block w-full rounded-md shadow-sm focus:border-green-300 bg-muted "};i[0].nickname!==void 0&&(Q.value=i[0].nickname),o=new Qc({props:Q}),jt.push(()=>kn(o,"value",G)),b=new fo({props:{for:"edit-description",$$slots:{default:[bB]},$$scope:{ctx:i}}});function ge(re){i[13](re)}let le={id:"edit-description",rows:5,cols:50,class:"mt-1 block w-full rounded-md shadow-sm focus:border-green-300 bg-muted"};return i[0].description!==void 0&&(le.value=i[0].description),E=new cp({props:le}),jt.push(()=>kn(E,"value",ge)),F=new Vn({props:{$$slots:{default:[$B]},$$scope:{ctx:i}}}),F.$on("click",i[7]),{c(){e=oe("h2"),e.textContent=n,t=de(),r=oe("div"),N(s.$$.fragment),a=de(),N(o.$$.fragment),d=de(),_=oe("div"),N(b.$$.fragment),w=de(),N(E.$$.fragment),M=de(),N(F.$$.fragment),this.h()},l(re){e=ae(re,"H2",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-g6v2i1"&&(e.textContent=n),t=pe(re),r=ae(re,"DIV",{});var me=$e(r);j(s.$$.fragment,me),a=pe(me),j(o.$$.fragment,me),me.forEach(S),d=pe(re),_=ae(re,"DIV",{});var se=$e(_);j(b.$$.fragment,se),w=pe(se),j(E.$$.fragment,se),se.forEach(S),M=pe(re),j(F.$$.fragment,re),this.h()},h(){te(e,"class","text-2xl font-bold mb-2")},m(re,me){R(re,e,me),R(re,t,me),R(re,r,me),V(s,r,null),ce(r,a),V(o,r,null),R(re,d,me),R(re,_,me),V(b,_,null),ce(_,w),V(E,_,null),R(re,M,me),V(F,re,me),q=!0},p(re,me){const se={};me&262144&&(se.$$scope={dirty:me,ctx:re}),s.$set(se);const Z={};!l&&me&1&&(l=!0,Z.value=re[0].nickname,xn(()=>l=!1)),o.$set(Z);const Y={};me&262144&&(Y.$$scope={dirty:me,ctx:re}),b.$set(Y);const ie={};!L&&me&1&&(L=!0,ie.value=re[0].description,xn(()=>L=!1)),E.$set(ie);const be={};me&262144&&(be.$$scope={dirty:me,ctx:re}),F.$set(be)},i(re){q||(T(s.$$.fragment,re),T(o.$$.fragment,re),T(b.$$.fragment,re),T(E.$$.fragment,re),T(F.$$.fragment,re),q=!0)},o(re){I(s.$$.fragment,re),I(o.$$.fragment,re),I(b.$$.fragment,re),I(E.$$.fragment,re),I(F.$$.fragment,re),q=!1},d(re){re&&(S(e),S(t),S(r),S(d),S(_),S(M)),U(s),U(o),U(b),U(E),U(F,re)}}}function yB(i){let e;return{c(){e=Ve("Edit Nickname:")},l(n){e=Ue(n,"Edit Nickname:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function bB(i){let e;return{c(){e=Ve("Edit Description:")},l(n){e=Ue(n,"Edit Description:")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function $B(i){let e;return{c(){e=Ve("Save Changes")},l(n){e=Ue(n,"Save Changes")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function wB(i){let e,n;return e=new nr({props:{class:"mb-2",$$slots:{default:[CB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262145&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function xB(i){let e,n;return e=new nr({props:{class:"mb-2",$$slots:{default:[TB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function kB(i){let e,n;return{c(){e=oe("img"),this.h()},l(t){e=ae(t,"IMG",{src:!0,class:!0,alt:!0,style:!0}),this.h()},h(){pr(e.src,n=i[0].profile_picture)||te(e,"src",n),te(e,"class","object-contain rounded-xl"),te(e,"alt","Profile Picture"),Pf(e,"width","max(200px, 75%)"),Pf(e,"max-height","320px")},m(t,r){R(t,e,r)},p(t,r){r&1&&!pr(e.src,n=t[0].profile_picture)&&te(e,"src",n)},d(t){t&&S(e)}}}function CB(i){let e,n;return e=new Lr({props:{class:"p-2 flex justify-center relative",$$slots:{default:[kB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262145&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function SB(i){let e,n="You do not currently have a profile picture...";return{c(){e=oe("p"),e.textContent=n,this.h()},l(t){e=ae(t,"P",{class:!0,"data-svelte-h":!0}),an(e)!=="svelte-n8lb6d"&&(e.textContent=n),this.h()},h(){te(e,"class","text-center")},m(t,r){R(t,e,r)},p:gt,d(t){t&&S(e)}}}function TB(i){let e,n;return e=new Lr({props:{class:"p-2",$$slots:{default:[SB]},$$scope:{ctx:i}}}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},p(t,r){const s={};r&262144&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function IB(i){let e;return{c(){e=Ve("Upload Profile Picture")},l(n){e=Ue(n,"Upload Profile Picture")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function EB(i){let e;return{c(){e=Ve("Failed to fetch or update data. Contact admin for more details.")},l(n){e=Ue(n,"Failed to fetch or update data. Contact admin for more details.")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function PB(i){let e,n,t,r;const s=[dB,hB,fB],a=[];function o(l,d){return l[4]?0:l[3]?1:2}return n=o(i),t=a[n]=s[n](i),{c(){e=oe("div"),t.c(),this.h()},l(l){e=ae(l,"DIV",{class:!0});var d=$e(e);t.l(d),d.forEach(S),this.h()},h(){te(e,"class","flex max-lg:flex-col max-lg:items-center gap-4 justify-between")},m(l,d){R(l,e,d),a[n].m(e,null),r=!0},p(l,[d]){let _=n;n=o(l),n===_?a[n].p(l,d):(ht(),I(a[_],1,1,()=>{a[_]=null}),dt(),t=a[n],t?t.p(l,d):(t=a[n]=s[n](l),t.c()),T(t,1),t.m(e,null))},i(l){r||(T(t),r=!0)},o(l){I(t),r=!1},d(l){l&&S(e),a[n].d()}}}function AB(i,e,n){let t;const r=bi("refreshAvatarData");sn(i,r,le=>n(15,t=le));let s=!1,a,o="",l=!1,d=!0,_;async function b(){const re=await(await fetch("/api/settings/profile")).json();n(0,_=re),((_==null?void 0:_.nickname)===void 0||(_==null?void 0:_.email)===void 0||(_==null?void 0:_.description)===void 0)&&n(3,l=!0),n(4,d=!1)}function w(){n(1,s=!s)}async function E(){if(o)return;n(4,d=!0);const re=await(await fetch("/api/settings/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{..._,email:void 0,profile_picture:void 0}})})).json();n(0,_=re),((_==null?void 0:_.nickname)===void 0||(_==null?void 0:_.email)===void 0||(_==null?void 0:_.description)===void 0)&&n(3,l=!0),n(4,d=!1),n(1,s=!1),t!==null&&t()}async function L(){if(a){const le=new FormData;le.append("profile_picture",a),n(4,d=!0);const re=await fetch("/api/settings/profile/update-picture",{method:"POST",body:le});if(re.ok){const me=await re.json();n(0,_=me),((_==null?void 0:_.nickname)===void 0||(_==null?void 0:_.email)===void 0||(_==null?void 0:_.description)===void 0)&&n(3,l=!0),n(1,s=!1)}else n(3,l=!0);n(4,d=!1),t!==null&&t()}}const M=["image/png","image/jpeg"];function F(le){const re=le.target;re&&re.files&&re.files.length>0&&M.includes(re.files[0].type)?a=re.files[0]:a=void 0}er(b);function q(le){i.$$.not_equal(_.nickname,le)&&(_.nickname=le,n(0,_))}function G(le){i.$$.not_equal(_.description,le)&&(_.description=le,n(0,_))}function Q(le){i.$$.not_equal(_.nickname,le)&&(_.nickname=le,n(0,_))}function ge(le){i.$$.not_equal(_.description,le)&&(_.description=le,n(0,_))}return i.$$.update=()=>{i.$$.dirty&1&&(_&&typeof _.nickname=="string"&&_.nickname.length<3?n(2,o="Nickname must be at least 3 characters long"):n(2,o=""))},[_,s,o,l,d,r,w,E,L,F,q,G,Q,ge]}class MB extends it{constructor(e){super(),ot(this,e,AB,PB,nt,{})}}function DB(i){let e;return{c(){e=Ve("Profile Settings")},l(n){e=Ue(n,"Profile Settings")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function zB(i){let e,n,t,r;return e=new _s({props:{tag:"h2",class:"mb-3",$$slots:{default:[DB]},$$scope:{ctx:i}}}),t=new yi({}),{c(){N(e.$$.fragment),n=de(),N(t.$$.fragment)},l(s){j(e.$$.fragment,s),n=pe(s),j(t.$$.fragment,s)},m(s,a){V(e,s,a),R(s,n,a),V(t,s,a),r=!0},p(s,a){const o={};a&32&&(o.$$scope={dirty:a,ctx:s}),e.$set(o)},i(s){r||(T(e.$$.fragment,s),T(t.$$.fragment,s),r=!0)},o(s){I(e.$$.fragment,s),I(t.$$.fragment,s),r=!1},d(s){s&&S(n),U(e,s),U(t,s)}}}function LB(i){let e,n;return e=new MB({}),{c(){N(e.$$.fragment)},l(t){j(e.$$.fragment,t)},m(t,r){V(e,t,r),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){U(e,t)}}}function RB(i){let e,n,t,r,s;return n=new Kr({props:{class:"p-0 pb-4 space-y-0",$$slots:{default:[zB]},$$scope:{ctx:i}}}),r=new Lr({props:{class:"flex flex-col overflow-y-auto p-0",style:`height: calc(100% - ${i[1]}px);`,$$slots:{default:[LB]},$$scope:{ctx:i}}}),{c(){e=oe("div"),N(n.$$.fragment),t=de(),N(r.$$.fragment)},l(a){e=ae(a,"DIV",{});var o=$e(e);j(n.$$.fragment,o),o.forEach(S),t=pe(a),j(r.$$.fragment,a)},m(a,o){R(a,e,o),V(n,e,null),i[4](e),R(a,t,o),V(r,a,o),s=!0},p(a,o){const l={};o&32&&(l.$$scope={dirty:o,ctx:a}),n.$set(l);const d={};o&2&&(d.style=`height: calc(100% - ${a[1]}px);`),o&32&&(d.$$scope={dirty:o,ctx:a}),r.$set(d)},i(a){s||(T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){I(n.$$.fragment,a),I(r.$$.fragment,a),s=!1},d(a){a&&(S(e),S(t)),U(n),i[4](null),U(r,a)}}}function OB(i){let e,n,t,r,s,a;return t=new nr({props:{class:"relative p-4 h-full",$$slots:{default:[RB]},$$scope:{ctx:i}}}),{c(){e=oe("div"),n=oe("div"),N(t.$$.fragment),this.h()},l(o){e=ae(o,"DIV",{class:!0});var l=$e(e);n=ae(l,"DIV",{class:!0});var d=$e(n);j(t.$$.fragment,d),d.forEach(S),l.forEach(S),this.h()},h(){te(n,"class","flex flex-col p-4 relative h-full"),te(e,"class","flex grow flex-col relative h-full")},m(o,l){R(o,e,l),ce(e,n),V(t,n,null),r=!0,s||(a=bt(window,"resize",i[2]),s=!0)},p(o,[l]){const d={};l&35&&(d.$$scope={dirty:l,ctx:o}),t.$set(d)},i(o){r||(T(t.$$.fragment,o),r=!0)},o(o){I(t.$$.fragment,o),r=!1},d(o){o&&S(e),U(t),s=!1,a()}}}function FB(i,e,n){let{slug:t}=e,r,s=64;const a=()=>{const l=r.offsetHeight;l!==void 0&&n(1,s=l)};er(a);function o(l){jt[l?"unshift":"push"](()=>{r=l,n(0,r)})}return i.$$set=l=>{"slug"in l&&n(3,t=l.slug)},[r,s,a,t,o]}class BB extends it{constructor(e){super(),ot(this,e,FB,OB,nt,{slug:3})}}const{document:gd}=Td;function V0(i){let e;return{c(){e=oe("div"),this.h()},l(n){e=ae(n,"DIV",{class:!0}),$e(e).forEach(S),this.h()},h(){te(e,"class","absolute w-full h-full md:hidden backdrop-blur")},m(n,t){R(n,e,t)},d(n){n&&S(e)}}}function NB(i){let e,n,t,r,s,a,o,l,d,_,b,w,E,L,M,F,q;gd.title=e=i[3];function G(Z){i[6](Z)}let Q={};i[1]!==void 0&&(Q.menuClosed=i[1]),t=new _T({props:Q}),jt.push(()=>kn(t,"menuClosed",G));function ge(Z){i[7](Z)}let le={slug:i[0].slug};i[1]!==void 0&&(le.menuClosed=i[1]),l=new DT({props:le}),jt.push(()=>kn(l,"menuClosed",ge));var re=i[2];function me(Z,Y){return{props:{slug:Z[0].slug}}}re&&(w=Af(re,me(i)));let se=!i[1]&&V0();return{c(){n=de(),N(t.$$.fragment),s=de(),a=oe("div"),o=oe("div"),N(l.$$.fragment),_=de(),b=oe("div"),w&&N(w.$$.fragment),E=de(),se&&se.c(),this.h()},l(Z){q0("svelte-a7ezgp",gd.head).forEach(S),n=pe(Z),j(t.$$.fragment,Z),s=pe(Z),a=ae(Z,"DIV",{class:!0,style:!0});var ie=$e(a);o=ae(ie,"DIV",{class:!0});var be=$e(o);j(l.$$.fragment,be),be.forEach(S),_=pe(ie),b=ae(ie,"DIV",{class:!0});var fe=$e(b);w&&j(w.$$.fragment,fe),E=pe(fe),se&&se.l(fe),fe.forEach(S),ie.forEach(S),this.h()},h(){te(o,"class","overflow-y-auto shrink-0"),te(b,"class","relative flex flex-col grow bg-base-300 md:brightness-100 overflow-x-hidden"),dr(b,"brightness-50",!i[1]),te(a,"class","relative flex"),te(a,"style",L=`height: calc(100% - ${i[4]}px);`)},m(Z,Y){R(Z,n,Y),V(t,Z,Y),R(Z,s,Y),R(Z,a,Y),ce(a,o),V(l,o,null),ce(a,_),ce(a,b),w&&V(w,b,null),ce(b,E),se&&se.m(b,null),M=!0,F||(q=[bt(window,"resize",i[5]),bt(b,"click",i[8])],F=!0)},p(Z,[Y]){(!M||Y&8)&&e!==(e=Z[3])&&(gd.title=e);const ie={};!r&&Y&2&&(r=!0,ie.menuClosed=Z[1],xn(()=>r=!1)),t.$set(ie);const be={};if(Y&1&&(be.slug=Z[0].slug),!d&&Y&2&&(d=!0,be.menuClosed=Z[1],xn(()=>d=!1)),l.$set(be),Y&4&&re!==(re=Z[2])){if(w){ht();const fe=w;I(fe.$$.fragment,1,0,()=>{U(fe,1)}),dt()}re?(w=Af(re,me(Z)),N(w.$$.fragment),T(w.$$.fragment,1),V(w,b,E)):w=null}else if(re){const fe={};Y&1&&(fe.slug=Z[0].slug),w.$set(fe)}Z[1]?se&&(se.d(1),se=null):se||(se=V0(),se.c(),se.m(b,null)),(!M||Y&2)&&dr(b,"brightness-50",!Z[1]),(!M||Y&16&&L!==(L=`height: calc(100% - ${Z[4]}px);`))&&te(a,"style",L)},i(Z){M||(T(t.$$.fragment,Z),T(l.$$.fragment,Z),w&&T(w.$$.fragment,Z),M=!0)},o(Z){I(t.$$.fragment,Z),I(l.$$.fragment,Z),w&&I(w.$$.fragment,Z),M=!1},d(Z){Z&&(S(n),S(s),S(a)),U(t,Z),U(l),w&&U(w),se&&se.d(),F=!1,kr(q)}}}function VB(i,e,n){let{data:t}=e,r=!0,s=null,a="",o=64;const l=()=>{const w=document.getElementById("app-header"),E=w==null?void 0:w.offsetHeight;E!==void 0&&n(4,o=E)};er(l);function d(w){r=w,n(1,r)}function _(w){r=w,n(1,r)}const b=()=>n(1,r=!0);return i.$$set=w=>{"data"in w&&n(0,t=w.data)},i.$$.update=()=>{if(i.$$.dirty&1)switch(t.slug.split("/")[0]){case Rn.HOME:n(2,s=S6),n(3,a="Home");break;case Rn.SOCIAL_NETWORK:n(2,s=Wz),n(3,a="Social Network");break;case Rn.POINTS_AND_BADGES:n(2,s=DR),n(3,a="Points & Badges");break;case Rn.CHECK_INS:n(2,s=g8),n(3,a="Check-ins");break;case Rn.FAVOURITES:n(2,s=uB),n(3,a="Favourites");break;case Rn.SETTINGS:n(2,s=BB),n(3,a="Settings");break;default:ya("/app");break}},[t,r,s,a,o,l,d,_,b]}class EN extends it{constructor(e){super(),ot(this,e,VB,NB,nt,{data:0})}}export{EN as component,pN as universal};
