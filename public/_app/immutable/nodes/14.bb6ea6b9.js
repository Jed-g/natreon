import{s as Ae,f as r,a as m,g as o,h as g,A as T,d as f,c as h,j as n,L as Ue,k as ke,i as H,x as t,P as Z,B as F,y as ee,C as Se,o as Fe,l as He,m as ze,n as Ge}from"../chunks/scheduler.dceb96db.js";import{S as qe,i as Me,b as Je,d as Re,m as Xe,a as Ke,t as Qe,e as We}from"../chunks/index.79eff260.js";import{g as Ye}from"../chunks/navigation.7a907589.js";function Be(a){let e,s;return{c(){e=r("p"),s=He(a[2])},l(l){e=o(l,"P",{});var u=g(e);s=ze(u,a[2]),u.forEach(f)},m(l,u){H(l,e,u),t(e,s)},p(l,u){u&4&&Ge(s,l[2])},d(l){l&&f(e)}}}function Ne(a){let e,s,l="Edit Profile",u,x;return{c(){e=r("div"),s=r("button"),s.textContent=l,this.h()},l(i){e=o(i,"DIV",{class:!0});var p=g(e);s=o(p,"BUTTON",{class:!0,"data-svelte-h":!0}),T(s)!=="svelte-1idffa2"&&(s.textContent=l),p.forEach(f),this.h()},h(){n(s,"class","btn"),n(e,"class","flex items-center justify-center h-full")},m(i,p){H(i,e,p),t(e,s),u||(x=F(s,"click",a[3]),u=!0)},p:ee,d(i){i&&f(e),u=!1,x()}}}function Le(a){let e,s="Editing Profile",l,u,x="Save Changes",i,p;return{c(){e=r("div"),e.textContent=s,l=m(),u=r("button"),u.textContent=x,this.h()},l(w){e=o(w,"DIV",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-11kvu6w"&&(e.textContent=s),l=h(w),u=o(w,"BUTTON",{class:!0,"data-svelte-h":!0}),T(u)!=="svelte-yt089f"&&(u.textContent=x),this.h()},h(){n(e,"class","text-white text-2xl text-center"),n(u,"class","btn")},m(w,U){H(w,e,U),H(w,l,U),H(w,u,U),i||(p=F(u,"click",a[4]),i=!0)},p:ee,d(w){w&&(f(e),f(l),f(u)),i=!1,p()}}}function Ze(a){let e,s,l,u="Back to Map",x,i,p,w="Profile",U,d,j,B,te="Details",$,P,k,D="Nickname:",le,E,se,fe,de,L,z,Ee="Email:",pe,V,me,G,J,ye="Description:",he,y,ne,ve,ie,_e,A,I,R,Pe="Profile Picture",be,X,N,ae,Ce,K,De="Profile Picture:",xe,q,ge,Q,M,Ie="Upload Profile Picture",we,Te,v=a[2]&&Be(a),_=!a[1]&&Ne(a),b=a[1]&&Le(a);return{c(){e=r("div"),s=r("div"),l=r("button"),l.textContent=u,x=m(),i=r("div"),p=r("h1"),p.textContent=w,U=m(),d=r("div"),j=r("div"),B=r("h2"),B.textContent=te,$=m(),P=r("div"),k=r("label"),k.textContent=D,le=m(),E=r("input"),fe=m(),v&&v.c(),de=m(),L=r("div"),z=r("label"),z.textContent=Ee,pe=m(),V=r("input"),me=m(),G=r("div"),J=r("label"),J.textContent=ye,he=m(),y=r("textarea"),ve=m(),_&&_.c(),ie=m(),b&&b.c(),_e=m(),A=r("div"),I=r("div"),R=r("h2"),R.textContent=Pe,be=m(),X=r("div"),N=r("img"),Ce=m(),K=r("label"),K.textContent=De,xe=m(),q=r("input"),ge=m(),Q=r("div"),M=r("button"),M.textContent=Ie,this.h()},l(c){e=o(c,"DIV",{class:!0});var C=g(e);s=o(C,"DIV",{class:!0});var Ve=g(s);l=o(Ve,"BUTTON",{class:!0,"data-svelte-h":!0}),T(l)!=="svelte-1jbpm4v"&&(l.textContent=u),Ve.forEach(f),C.forEach(f),x=h(c),i=o(c,"DIV",{class:!0});var W=g(i);p=o(W,"H1",{class:!0,"data-svelte-h":!0}),T(p)!=="svelte-doioy0"&&(p.textContent=w),U=h(W),d=o(W,"DIV",{class:!0});var O=g(d);j=o(O,"DIV",{class:!0});var re=g(j);B=o(re,"H2",{class:!0,"data-svelte-h":!0}),T(B)!=="svelte-mri6fi"&&(B.textContent=te),$=h(re),P=o(re,"DIV",{});var Y=g(P);k=o(Y,"LABEL",{for:!0,"data-svelte-h":!0}),T(k)!=="svelte-nea4js"&&(k.textContent=D),le=h(Y),E=o(Y,"INPUT",{id:!0,class:!0}),fe=h(Y),v&&v.l(Y),Y.forEach(f),re.forEach(f),de=h(O),L=o(O,"DIV",{class:!0});var oe=g(L);z=o(oe,"LABEL",{for:!0,"data-svelte-h":!0}),T(z)!=="svelte-1flf0h4"&&(z.textContent=Ee),pe=h(oe),V=o(oe,"INPUT",{id:!0,type:!0,class:!0}),oe.forEach(f),me=h(O),G=o(O,"DIV",{});var ue=g(G);J=o(ue,"LABEL",{for:!0,"data-svelte-h":!0}),T(J)!=="svelte-1jjlhqk"&&(J.textContent=ye),he=h(ue),y=o(ue,"TEXTAREA",{id:!0,rows:!0,cols:!0,class:!0}),g(y).forEach(f),ue.forEach(f),ve=h(O),_&&_.l(O),ie=h(O),b&&b.l(O),O.forEach(f),_e=h(W),A=o(W,"DIV",{class:!0});var ce=g(A);I=o(ce,"DIV",{class:!0});var S=g(I);R=o(S,"H2",{class:!0,"data-svelte-h":!0}),T(R)!=="svelte-1qatzt5"&&(R.textContent=Pe),be=h(S),X=o(S,"DIV",{style:!0});var je=g(X);N=o(je,"IMG",{src:!0,alt:!0,style:!0}),je.forEach(f),Ce=h(S),K=o(S,"LABEL",{for:!0,"data-svelte-h":!0}),T(K)!=="svelte-1j5ep21"&&(K.textContent=De),xe=h(S),q=o(S,"INPUT",{id:!0,type:!0,accept:!0,class:!0}),S.forEach(f),ge=h(ce),Q=o(ce,"DIV",{class:!0});var Oe=g(Q);M=o(Oe,"BUTTON",{class:!0,"data-svelte-h":!0}),T(M)!=="svelte-7lq7ha"&&(M.textContent=Ie),Oe.forEach(f),ce.forEach(f),W.forEach(f),this.h()},h(){n(l,"class","btn"),n(s,"class","mb-2"),n(e,"class","absolute top-2 right-2 flex flex-col items-end"),n(p,"class","text-4xl font-bold mb-6 text-white"),n(B,"class","text-2xl font-bold mb-2"),n(k,"for","nickname"),n(E,"id","nickname"),E.readOnly=se=!a[1],n(E,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),n(j,"class","mb-4"),n(z,"for","email"),n(V,"id","email"),n(V,"type","text"),V.readOnly=!0,n(V,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),n(L,"class","mb-4"),n(J,"for","description"),n(y,"id","description"),n(y,"rows","5"),n(y,"cols","50"),y.readOnly=ne=!a[1],n(y,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),n(d,"class","p-6 bg-green-700 text-white rounded shadow-md w-full md:w-3/4 lg:w-1/2"),n(R,"class","text-2xl font-bold mb-2"),Ue(N.src,ae=a[0].profile_picture)||n(N,"src",ae),n(N,"alt","Profile Picture"),ke(N,"width","200px"),ke(X,"display","flex"),ke(X,"justify-content","center"),n(K,"for","profile-picture"),n(q,"id","profile-picture"),n(q,"type","file"),n(q,"accept","image/*"),n(q,"class","mt-1 block w-full rounded-md text-white shadow-sm focus:border-green-300"),n(I,"class","mb-4"),n(M,"class","btn"),n(Q,"class","mb-4"),n(A,"class","p-6 bg-green-700 text-white rounded shadow-md mt-6 w-full md:w-3/4 lg:w-1/2"),n(i,"class","flex flex-col items-center justify-center min-h-screen bg-lime-900")},m(c,C){H(c,e,C),t(e,s),t(s,l),H(c,x,C),H(c,i,C),t(i,p),t(i,U),t(i,d),t(d,j),t(j,B),t(j,$),t(j,P),t(P,k),t(P,le),t(P,E),Z(E,a[0].nickname),t(P,fe),v&&v.m(P,null),t(d,de),t(d,L),t(L,z),t(L,pe),t(L,V),Z(V,a[0].email),t(d,me),t(d,G),t(G,J),t(G,he),t(G,y),Z(y,a[0].description),t(d,ve),_&&_.m(d,null),t(d,ie),b&&b.m(d,null),t(i,_e),t(i,A),t(A,I),t(I,R),t(I,be),t(I,X),t(X,N),t(I,Ce),t(I,K),t(I,xe),t(I,q),t(A,ge),t(A,Q),t(Q,M),we||(Te=[F(l,"click",a[5]),F(E,"input",a[8]),F(V,"input",a[9]),F(y,"input",a[10]),F(q,"change",a[7]),F(M,"click",a[6])],we=!0)},p(c,[C]){C&2&&se!==(se=!c[1])&&(E.readOnly=se),C&1&&E.value!==c[0].nickname&&Z(E,c[0].nickname),c[2]?v?v.p(c,C):(v=Be(c),v.c(),v.m(P,null)):v&&(v.d(1),v=null),C&1&&V.value!==c[0].email&&Z(V,c[0].email),C&2&&ne!==(ne=!c[1])&&(y.readOnly=ne),C&1&&Z(y,c[0].description),c[1]?_&&(_.d(1),_=null):_?_.p(c,C):(_=Ne(c),_.c(),_.m(d,ie)),c[1]?b?b.p(c,C):(b=Le(c),b.c(),b.m(d,null)):b&&(b.d(1),b=null),C&1&&!Ue(N.src,ae=c[0].profile_picture)&&n(N,"src",ae)},i:ee,o:ee,d(c){c&&(f(e),f(x),f(i)),v&&v.d(),_&&_.d(),b&&b.d(),we=!1,Se(Te)}}}function $e(a,e,s){let l=!1,u,x="",i={nickname:"",email:"",description:"",profile_picture:""};async function p(){const D=await(await fetch("/api/users/profile")).json();s(0,i=D)}function w(){s(1,l=!l)}async function U(){if(x)return;const{profile_picture:k,...D}=i,E=await(await fetch("/api/users/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:D})})).json();s(0,i=E),s(1,l=!1)}function d(){Ye("/app")}async function j(){if(u){const k=new FormData;k.append("profile_picture",u),(await fetch("/api/users/profile/update-picture",{method:"POST",body:k})).ok}}function B(k){const D=k.target;D&&D.files&&D.files.length>0&&(u=D.files[0])}Fe(p);function te(){i.nickname=this.value,s(0,i)}function $(){i.email=this.value,s(0,i)}function P(){i.description=this.value,s(0,i)}return a.$$.update=()=>{a.$$.dirty&1&&(i&&i.nickname&&i.nickname.length<3?s(2,x="Nickname must be at least 3 characters long"):s(2,x=""))},[i,l,x,w,U,d,j,B,te,$,P]}class et extends qe{constructor(e){super(),Me(this,e,$e,Ze,Ae,{})}}function tt(a){let e,s;return e=new et({}),{c(){Je(e.$$.fragment)},l(l){Re(e.$$.fragment,l)},m(l,u){Xe(e,l,u),s=!0},p:ee,i(l){s||(Ke(e.$$.fragment,l),s=!0)},o(l){Qe(e.$$.fragment,l),s=!1},d(l){We(e,l)}}}class it extends qe{constructor(e){super(),Me(this,e,null,tt,Ae,{})}}export{it as component};
